!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t=t||self).squared=t.squared||{},t.squared.base={}))}(this,(function(t){"use strict";class e extends squared.lib.base.Container{constructor(t){super(t),this._currentId=0}append(t,e=!1,i=!1){var n;return super.append(t),e&&(null===(n=this.afterAppend)||void 0===n||n.call(this,t,i)),this}reset(){return this._currentId=0,this.clear(),this}get nextId(){return++this._currentId}}const i=squared.lib,{CSS:n,STRING:s,XML:o}=i.regex,{buildAlphaString:r,fromLastIndexOf:a}=i.util,l=()=>r(5).toLowerCase()+"_"+(new Date).getTime();class c{reset(){var t;const e=c.ASSETS;for(const t in e)e[t].clear();null===(t=this.fileHandler)||void 0===t||t.reset()}addImage(t){var e;if(null==t?void 0:t.complete){const i=t.src;if(i.startsWith("data:image/")){const n=RegExp(`^${s.DATAURI}$`).exec(i);if(n){const s=n[1].split(o.DELIMITER);this.addRawData(i,s[0].trim(),(null===(e=s[1])||void 0===e?void 0:e.trim())||"base64",n[2],t.naturalWidth,t.naturalHeight)}}""!==i&&c.ASSETS.images.set(i,{width:t.naturalWidth,height:t.naturalHeight,uri:i})}}getImage(t){return c.ASSETS.images.get(t)}addFont(t){const e=c.ASSETS.fonts,i=t.fontFamily.trim().toLowerCase();t.fontFamily=i;const n=e.get(i);n?n.push(t):e.set(i,[t])}getFont(t,e="normal",i){const n=c.ASSETS.fonts.get(t.trim().toLowerCase());if(n){const t=this.controllerSettings.supported.fontFormat;return n.find(n=>n.fontStyle===e&&(void 0===i||n.fontWeight===parseInt(i))&&("*"===t||t.includes(n.srcFormat)))}}addRawData(t,e,i,n,s=0,o=0){let r;e=e.toLowerCase(),"base64"===(i=i.toLowerCase())?(r=n,"image/svg+xml"===e&&(n=window.atob(n))):n=n.replace(/\\(["'])/g,(t,...e)=>e[0]);const h=this.controllerSettings.supported.imageFormat,d=location.origin,u=t.startsWith(d),f=u?t.substring(d.length+1,t.lastIndexOf("/")):"";let g;if("*"===h)if(u)g=a(t,"/");else{let t=e.split("/").pop();"svg+xml"===t&&(t="svg"),g=l()+"."+t}else for(const i of h)if(e.includes(i)){const e="."+i;g=t.endsWith(e)?a(t,"/"):l()+e;break}return g?(c.ASSETS.rawData.set(t,{pathname:f,filename:g,content:n,base64:r,mimeType:e,width:s,height:o}),g):""}getRawData(t){if(/^url\(/.test(t)){const e=n.URL.exec(t);if(!e)return;t=e[1]}return c.ASSETS.rawData.get(t)}setFileHandler(t){t.resource=this,this.fileHandler=t}}c.ASSETS={ids:new Map,images:new Map,fonts:new Map,rawData:new Map};var h=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const d=squared.lib,{getSpecificity:u,getStyle:f,hasComputedStyle:g,insertStyleSheetRule:p,parseSelectorText:m,validMediaRule:b}=d.css,{isTextNode:x}=d.dom,{convertCamelCase:v,isString:y,objectMap:S,resolvePath:E}=d.util,{CHAR:_,FILE:k,STRING:w,XML:T}=d.regex,{getElementCache:C,setElementCache:A}=d.session,{images:I,rawData:R}=c.ASSETS,P=/all|screen/,B=/^background/,M=/\s*([a-z-]+):[^!;]+!important;/g,N=/\s*@font-face\s*{([^}]+)}\s*/,L=/\s*font-family:[^\w]*([^'";]+)/,W=/\s*src:\s*([^;]+);/,F=/\s*font-style:\s*(\w+)\s*;/,O=/\s*font-weight:\s*(\d+)\s*;/,D=/\s*(url|local)\((?:['""]([^'")]+)['"]|([^)]+))\)(?:\s*format\(['"]?([\w-]+)['"]?\))?\s*/,H=RegExp(`(url\\("(${w.DATAURI})"\\)),?\\s*`,"g");function X(t,e=0,i=0){const n=I.get(t);(void 0===n||e>0&&i>0||0===n.width||0===n.height)&&I.set(t,{width:e,height:i,uri:t})}function z(t){if(""!==t)for(const e of t.split(T.SEPARATOR))""!==e&&X(E(e.split(_.SPACE)[0].trim()))}const V=t=>k.SVG.test(t),U=(t,e)=>{var i;return(null===(i=RegExp(`\\s*@${t}([^{]+)`).exec(e))||void 0===i?void 0:i[1].trim())||e};class j{constructor(t,i,n,s,o){this.framework=t,this.initializing=!1,this.closed=!1,this.rootElements=new Set,this.session={active:[]},this.processing={cache:new e,excluded:new e,sessionId:""},this._cascadeAll=!1;const r=this.processing.cache;this._cache=r,this._controllerHandler=new n(this,r),this._resourceHandler=new s(this,r),this._extensionManager=new o(this,r),this._afterInsertNode=this._controllerHandler.afterInsertNode,this.Node=i}copyToDisk(t,e){var i;null===(i=this.fileHandler)||void 0===i||i.copyToDisk(t,e)}appendToArchive(t,e){var i;null===(i=this.fileHandler)||void 0===i||i.appendToArchive(t,e)}saveToArchive(t,e){var i;null===(i=this.fileHandler)||void 0===i||i.saveToArchive(t||this.userSettings.outputArchiveName,e)}reset(){const t=this.processing;t.cache.reset(),t.excluded.clear(),t.sessionId="",this.session.active.length=0,this.controllerHandler.reset();for(const t of this.extensions)t.subscribers.clear();this.closed=!1}parseDocument(...t){const{controllerHandler:e,resourceHandler:i}=this;this.initializing=!1,this.rootElements.clear();const n=e.generateSessionId;this.processing.sessionId=n,this.session.active.push(n),e.sessionId=n,e.init(),this.setStyleMap();const s=[],o=this.userSettings.preloadImages,r=[],a=p("html > body { overflow: hidden !important; }");let l;const c=()=>{this.initializing=!1;for(const t of s)t.parentElement&&d.removeChild(t);s.length=0;for(const t of this.extensions)t.beforeParseDocument();for(const t of this.rootElements)this.createCache(t)&&this.afterCreateCache(t);for(const t of this.extensions)t.afterParseDocument();try{document.head.removeChild(a)}catch(t){}"function"==typeof l&&l.call(this)};0===t.length&&t.push(document.body);for(const e of t){let t;if("string"==typeof e)t=document.getElementById(e);else{if(!g(e))continue;t=e}t&&this.rootElements.add(t)}const d=this.rootElements.values().next().value;if(o){for(const t of this.rootElements)t.querySelectorAll("picture > source").forEach(t=>z(t.srcset)),t.querySelectorAll("input[type=image]").forEach(t=>X(t.src,t.width,t.height));for(const t of I.values()){const e=t.uri;if(V(e))r.push(e);else if(0===t.width||0===t.height){const i=document.createElement("img");i.src=e,i.naturalWidth>0&&i.naturalHeight>0?(t.width=i.naturalWidth,t.height=i.naturalHeight):(d.appendChild(i),s.push(i))}}}for(const[t,e]of R.entries()){const i=e.mimeType;if((null==i?void 0:i.startsWith("image/"))&&!i.endsWith("svg+xml")){const n=document.createElement("img");n.src=`data:${i};${e.base64?`base64,${e.base64}`:e.content}`;const{naturalWidth:o,naturalHeight:r}=n;o>0&&r>0?(e.width=o,e.height=r,I.set(t,{width:o,height:r,uri:e.filename})):(document.body.appendChild(n),s.push(n))}}for(const t of this.rootElements)t.querySelectorAll("img").forEach(t=>{V(t.src)?o&&r.push(t.src):(o&&z(t.srcset),t.complete?i.addImage(t):o&&r.push(t))});r.length?(this.initializing=!0,Promise.all(S(r,t=>new Promise((e,i)=>{"string"==typeof t?e(function(t){return h(this,void 0,void 0,(function*(){return(yield fetch(t,{method:"GET",headers:new Headers({Accept:"application/xhtml+xml, image/svg+xml","Content-Type":"image/svg+xml"})})).text()}))}(t)):(t.addEventListener("load",()=>e(t)),t.addEventListener("error",()=>i(t)))}))).then(t=>{const e=t.length;for(let n=0;n<e;n++){const e=t[n];if("string"==typeof e){const t=r[n];"string"==typeof t&&i.addRawData(t,"image/svg+xml","utf8",e)}else i.addImage(e)}c()}).catch(t=>{t instanceof Event&&(t=t.target);const e=t instanceof HTMLImageElement?t.src:"";this.userSettings.showErrorMessages&&y(e)&&!confirm("FAIL: "+e)||c()})):c();return new class{then(t){r.length?l=t:t()}}}createCache(t){const e=this.createRootNode(t);if(e){e.parent.setBounds();for(const t of this._cache)t.setBounds();return this.controllerHandler.sortInitialCache(),!0}return!1}toString(){return""}createRootNode(t){const e=this.processing,i=e.cache;i.clear(),e.excluded.clear(),this._cascadeAll=!1;const n=this.extensionsCascade,s=this.cascadeParentNode(t,0,n.length?n:void 0);if(s){const i=new this.Node(0,e.sessionId,t.parentElement||document.body,this._afterInsertNode);s.parent=i,s.actualParent=i,s.childIndex=0,s.documentRoot=!0}return e.node=s,i.afterAppend=void 0,s}cascadeParentNode(t,e,i){const n=this.insertNode(t);if(n){const{controllerHandler:s,processing:o}=this,r=o.cache;if(n.depth=e,0===e&&r.append(n),s.preventNodeCascade(t))return n;const{childElementCount:a,childNodes:l}=t,c=l.length,h=Array(c),d=Array(a);let u=!0,f=0,g=0;for(let t=0;t<c;t++){const a=l[t];let c;"#"===a.nodeName.charAt(0)?x(a)&&(c=this.insertNode(a,n)):s.includeElement(a)?(c=this.cascadeParentNode(a,e+1,i),c&&(d[g++]=c,r.append(c),u=!1)):(c=this.insertNode(a),c&&(o.excluded.append(c),u=!1)),c&&(c.parent=n,c.actualParent=n,c.childIndex=f,h[f++]=c)}h.length=f,d.length=g,n.naturalChildren=h,n.naturalElements=d,n.inlineText=u,this.userSettings.createQuerySelectorMap&&g>0&&(n.queryMap=this.createQueryMap(d))}return n}createQueryMap(t){var e;const i=[t];for(const n of t){const t=n.queryMap;if(t){const n=t.length;for(let s=0;s<n;s++){const n=s+1;i[n]=(null===(e=i[n])||void 0===e?void 0:e.concat(t[s]))||t[s]}}}return i}setStyleMap(){let t=!1;const e=i=>{try{const t=i.cssRules;if(t){const i=t.length;for(let n=0;n<i;n++){const i=t[n];switch(i.type){case CSSRule.STYLE_RULE:case CSSRule.FONT_FACE_RULE:this.applyStyleRule(i);break;case CSSRule.IMPORT_RULE:e(i.styleSheet);break;case CSSRule.MEDIA_RULE:b(i.conditionText||U("media",i.cssText))&&this.applyCSSRuleList(i.cssRules);break;case CSSRule.SUPPORTS_RULE:CSS.supports&&CSS.supports(i.conditionText||U("supports",i.cssText))&&this.applyCSSRuleList(i.cssRules)}}}}catch(e){this.userSettings.showErrorMessages&&!t&&(alert("CSS cannot be parsed inside <link> tags when loading files directly from your hard drive or from external websites. Either use a local web server, embed your CSS into a <style> tag, or you can also try using a different browser. See the README for more detailed instructions.\n\n"+i.href+"\n\n"+e),t=!0)}},i=document.styleSheets,n=i.length;for(let t=0;t<n;t++){const n=i[t];let s;try{s=n.media.mediaText}catch(t){}y(s)&&!P.test(s)||e(n)}}applyCSSRuleList(t){const e=t.length;for(let i=0;i<e;i++)this.applyStyleRule(t[i])}applyStyleRule(t){var e,i,n,s,o,r,a;const l=this.resourceHandler,c=this.processing.sessionId,h=(null===(e=t.parentStyleSheet)||void 0===e?void 0:e.href)||void 0,d=t.cssText;switch(t.type){case CSSRule.SUPPORTS_RULE:this.applyCSSRuleList(t.cssRules);break;case CSSRule.STYLE_RULE:{const e=t.style,i={},n={},s=(t,e)=>{var i;const n=t[e];if(n&&"initial"!==n){let s,o=n;for(;null!==(s=H.exec(n));)if(s[3]){const t=s[3].split(T.DELIMITER);l.addRawData(s[2],t[0].trim(),(null===(i=t[1])||void 0===i?void 0:i.trim())||"utf8",s[4])}else if(this.userSettings.preloadImages){const t=E(s[4],h);""!==t&&(void 0===l.getImage(t)&&X(t),o=o.replace(s[1],`url("${t}")`))}t[e]=o,H.lastIndex=0}};for(const t of Array.from(e))n[v(t)]=e[t];let o;for(s(n,"backgroundImage"),s(n,"listStyleImage"),s(n,"content");null!==(o=M.exec(d));){const t=v(o[1]);switch(t){case"margin":i.marginTop=!0,i.marginRight=!0,i.marginBottom=!0,i.marginLeft=!0;break;case"padding":i.paddingTop=!0,i.paddingRight=!0,i.paddingBottom=!0,i.paddingLeft=!0;break;case"background":i.backgroundColor=!0,i.backgroundImage=!0,i.backgroundSize=!0,i.backgroundRepeat=!0,i.backgroundPositionX=!0,i.backgroundPositionY=!0;break;case"backgroundPosition":i.backgroundPositionX=!0,i.backgroundPositionY=!0;break;case"border":i.borderTopStyle=!0,i.borderRightStyle=!0,i.borderBottomStyle=!0,i.borderLeftStyle=!0,i.borderTopWidth=!0,i.borderRightWidth=!0,i.borderBottomWidth=!0,i.borderLeftWidth=!0,i.borderTopColor=!0,i.borderRightColor=!0,i.borderBottomColor=!0,i.borderLeftColor=!0;break;case"borderStyle":i.borderTopStyle=!0,i.borderRightStyle=!0,i.borderBottomStyle=!0,i.borderLeftStyle=!0;break;case"borderWidth":i.borderTopWidth=!0,i.borderRightWidth=!0,i.borderBottomWidth=!0,i.borderLeftWidth=!0;break;case"borderColor":i.borderTopColor=!0,i.borderRightColor=!0,i.borderBottomColor=!0,i.borderLeftColor=!0;break;case"font":i.fontFamily=!0,i.fontStyle=!0,i.fontSize=!0,i.fontWeight=!0,i.lineHeight=!0}i[t]=!0}M.lastIndex=0;for(const s of m(t.selectorText)){const t=u(s),[o,r]=s.split("::"),a=r?"::"+r:"";document.querySelectorAll(o||"*").forEach(s=>{const o="styleMap"+a,r="styleSpecificity"+a,l=C(s,o,c);if(l){const o=C(s,r,c)||{};for(const s in n){const r=o[s],a=t+(i[s]?1e3:0);if(void 0===r||a>=r){const t=n[s];"initial"===t&&B.test(s)?"none"===e.background&&delete l[s]:l[s]=t,o[s]=a}}}else{const e=Object.assign({},n),l={};for(const n in e)l[n]=t+(i[n]?1e3:0);A(s,"style"+a,"0",f(s,a)),A(s,"sessionId","0",c),A(s,o,c,e),A(s,r,c,l)}})}break}case CSSRule.FONT_FACE_RULE:{const t=null===(i=N.exec(d))||void 0===i?void 0:i[1];if(t){const e=((null===(n=L.exec(t))||void 0===n?void 0:n[1])||"").trim(),i=((null===(s=W.exec(t))||void 0===s?void 0:s[1])||"").split(T.SEPARATOR);if(""!==e&&i.length){const n=(null===(o=F.exec(t))||void 0===o?void 0:o[1].toLowerCase())||"normal",s=parseInt((null===(r=O.exec(t))||void 0===r?void 0:r[1])||"400");for(const t of i){const i=D.exec(t);if(i){let t,o;const r=(i[2]||i[3]).trim();"url"===i[1]?t=E(r,h):o=r,l.addFont({fontFamily:e,fontWeight:s,fontStyle:n,srcUrl:t,srcLocal:o,srcFormat:(null===(a=i[4])||void 0===a?void 0:a.toLowerCase().trim())||"truetype"})}}}}break}}}get controllerHandler(){return this._controllerHandler}get resourceHandler(){return this._resourceHandler}get extensionManager(){return this._extensionManager}get fileHandler(){return this._resourceHandler.fileHandler}get extensionsCascade(){return[]}get nextId(){return this._cache.nextId}get length(){return 0}}class G{preventNodeCascade(t){return!1}get generateSessionId(){return""+(new Date).getTime()}}class q{constructor(t,e,i){this.name=t,this.framework=e,this.options={},this.dependencies=[],this.subscribers=new Set,i&&Object.assign(this.options,i)}require(t,e=!1){this.dependencies.push({name:t,preload:e})}beforeParseDocument(){}afterParseDocument(){}set application(t){this._application=t,this._controller=t.controllerHandler}get application(){return this._application}get controller(){return this._controller}}const{hasBit:Y,isObject:$}=squared.lib.util;const{fromLastIndexOf:Q,isString:K,trimString:J}=squared.lib.util,Z=()=>/^http/.test(location.protocol);class tt{constructor(){this.assets=[]}static getMimeType(t){switch(t.toLowerCase()){case"aac":return"audio/aac";case"abw":return"application/x-abiword";case"arc":return"application/x-freearc";case"avi":return"video/x-msvideo";case"azw":return"application/vnd.amazon.ebook";case"bin":return"application/octet-stream";case"bmp":return"image/bmp";case"bz":return"application/x-bzip";case"bz2":return"application/x-bzip2";case"csh":return"application/x-csh";case"css":return"text/css";case"csv":return"text/csv";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"eot":return"application/vnd.ms-fontobject";case"epub":return"application/epub+zip";case"gif":return"image/gif";case"htm":case"html":return"text/html";case"ico":return"image/vnd.microsoft.icon";case"ics":return"text/calendar";case"jar":return"application/java-archive";case"jpeg":case"jpg":return"image/jpeg";case"js":case"mjs":return"text/javascript";case"json":return"application/json";case"jsonld":return"application/ld+json";case"mid":case"midi":return"audio/midi";case"mp3":return"audio/mpeg";case"mpeg":return"video/mpeg";case"mpkg":return"application/vnd.apple.installer+xml";case"odp":return"application/vnd.oasis.opendocument.presentation";case"ods":return"application/vnd.oasis.opendocument.spreadsheet";case"odt":return"application/vnd.oasis.opendocument.text";case"oga":return"audio/ogg";case"ogv":return"video/ogg";case"ogx":return"application/ogg";case"otf":return"font/otf";case"png":return"image/png";case"pdf":return"application/pdf";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"rar":return"application/x-rar-compressed";case"rtf":return"application/rtf";case"sh":return"application/x-sh";case"svg":return"image/svg+xml";case"swf":return"application/x-shockwave-flash";case"tar":return"application/x-tar";case"tif":case"tiff":return"image/tiff";case"ts":return"video/mp2t";case"ttf":return"font/ttf";case"txt":return"text/plain";case"vsd":return"application/vnd.visio";case"wav":return"audio/wav";case"weba":return"audio/webm";case"webm":return"video/webm";case"webp":return"image/webp";case"woff":return"font/woff";case"woff2":return"font/woff2";case"xhtml":return"application/xhtml+xml";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xml":return"text/xml";case"xul":return"application/vnd.mozilla.xul+xml";case"zip":return"application/zip";case"3gp":return"video/3gpp";case".3g2":return"video/3gpp2";case".7z":return"application/x-7z-compressed";default:return""}}static downloadFile(t,e,i){const n=new Blob([t],{type:i||"application/octet-stream"}),s=window.URL.createObjectURL(n),o=document.createElement("a");o.style.setProperty("display","none"),o.setAttribute("href",s),o.setAttribute("download",e),o.download||o.setAttribute("target","_blank");const r=document.body;r.appendChild(o),o.click(),r.removeChild(o),setTimeout(()=>window.URL.revokeObjectURL(s),1)}addAsset(t){if(t.content||t.uri||t.base64){const e=this.assets,{pathname:i,filename:n}=t,s=e.find(t=>t.pathname===i&&t.filename===n);s?Object.assign(s,t):e.push(t)}}reset(){this.assets.length=0}copying(t){if(Z()){const e=t.directory;if(K(e)){let i=t.assets||[];if(i=i.concat(this.assets),i.length){const{outputDirectory:n,outputEmptyCopyDirectory:s,outputArchiveTimeout:o}=this.userSettings;fetch("/api/assets/copy?to="+encodeURIComponent(e.trim())+"&directory="+encodeURIComponent(J(n,"/"))+"&empty="+(s?"1":"0")+"&timeout="+o,{method:"POST",headers:new Headers({Accept:"application/json, text/plain, */*","Content-Type":"application/json"}),body:JSON.stringify(i)}).then(t=>t.json()).then(e=>{if(e){const i=t.callback;if("function"==typeof i&&i(e),this.userSettings.showErrorMessages){const{application:t,system:i}=e;i&&alert(t+"\n\n"+i)}}}).catch(t=>{this.userSettings.showErrorMessages&&alert("ERROR: "+t)})}}}else this.userSettings.showErrorMessages&&alert("SERVER (required): See README for instructions")}archiving(t){if(Z()){const e=t.filename;if(K(e)){let i=t.assets||[];if(i=i.concat(this.assets),i.length){const{outputDirectory:n,outputArchiveFormat:s,outputArchiveTimeout:o}=this.userSettings;fetch("/api/assets/archive?filename="+encodeURIComponent(e.trim())+"&directory="+encodeURIComponent(J(n,"/"))+"&format="+s+"&append_to="+encodeURIComponent((t.appendTo||"").trim())+"&timeout="+o,{method:"POST",headers:new Headers({Accept:"application/json, text/plain, */*","Content-Type":"application/json"}),body:JSON.stringify(i)}).then(t=>t.json()).then(e=>{if(e){const i=t.callback;"function"==typeof i&&i(e);const n=e.zipname;if(n)fetch("/api/browser/download?filename="+encodeURIComponent(n)).then(t=>t.blob()).then(t=>tt.downloadFile(t,Q(n,"/","\\")));else if(this.userSettings.showErrorMessages){const{application:t,system:i}=e;i&&alert(t+"\n\n"+i)}}}).catch(t=>{this.userSettings.showErrorMessages&&alert("ERROR: "+t)})}}}else this.userSettings.showErrorMessages&&alert("SERVER (required): See README for instructions")}}const et=new Map([[2,"marginTop"],[4,"marginRight"],[8,"marginBottom"],[16,"marginLeft"],[32,"paddingTop"],[64,"paddingRight"],[128,"paddingBottom"],[256,"paddingLeft"]]),it={ACCESSIBILITY:"squared.accessibility",COLUMN:"squared.column",CSS_GRID:"squared.css-grid",FLEXBOX:"squared.flexbox",GRID:"squared.grid",LIST:"squared.list",RELATIVE:"squared.relative",SPRITE:"squared.sprite",TABLE:"squared.table",VERTICAL_ALIGN:"squared.verticalalign",WHITESPACE:"squared.whitespace"};var nt=Object.freeze({__proto__:null,CSS_SPACING:et,EXT_NAME:it});const st=squared.lib,{isUserAgent:ot}=st.client,{BOX_BORDER:rt,TEXT_STYLE:at,checkStyleValue:lt,formatPX:ct,getInheritedStyle:ht,getStyle:dt,hasComputedStyle:ut,isLength:ft,isPercent:gt,parseSelectorText:pt,parseUnit:mt}=st.css,{ELEMENT_BLOCK:bt,assignRect:xt,getNamedItem:vt,getRangeClientRect:yt,newBoxRectDimension:St}=st.dom,{CHAR:Et,CSS:_t,FILE:kt,XML:wt}=st.regex,{actualClientRect:Tt,actualTextRangeRect:Ct,deleteElementCache:At,getElementAsNode:It,getElementCache:Rt,getPseudoElt:Pt,setElementCache:Bt}=st.session,{aboveRange:Mt,belowRange:Nt,convertCamelCase:Lt,convertFloat:Wt,convertInt:Ft,hasBit:Ot,hasValue:Dt,isNumber:Ht,isObject:Xt,isString:zt,iterateArray:Vt,spliceString:Ut}=st.util,{PX:jt,SELECTOR_ATTR:Gt,SELECTOR_G:qt,SELECTOR_LABEL:Yt,SELECTOR_PSEUDO_CLASS:$t}=_t,Qt=/^inline/,Kt=/^inline-/,Jt=/^margin/,Zt=/^padding/,te=/^border/,ee=/\s*(url\(.+?\))\s*/,ie=/^:lang\(\s*(.+)\s*\)$/,ne=/^:nth(-last)?-(child|of-type)\((.+)\)$/,se=/^(-)?(\d+)?n\s*([+-]\d+)?$/,oe=/em$/,re=/grid$/,ae=/flex$/;function le(t,e,i,n){const s=(n||t).css(e);return Ht(s)?parseFloat(s):"inherit"===s&&void 0===n?le(t,e,i,t.actualParent):i}function ce(t,e,i,n,s){var o;if(e.all)return!0;let r=e.tagName;if(r&&r!==t.tagName.toUpperCase())return!1;const a=e.id;if(a&&a!==t.elementId)return!1;const{attrList:l,classList:c,notList:h,pseudoList:d}=e;if(d){const e=t.actualParent;r=t.tagName;for(const i of d)switch(i){case":first-child":case":nth-child(1)":if(t!==e.firstChild)return!1;break;case":last-child":case":nth-last-child(1)":if(t!==e.lastChild)return!1;break;case":only-child":if(e.naturalElements.length>1)return!1;break;case":only-of-type":{let t=0;for(const i of e.naturalElements)if(i.tagName===r&&++t>1)return!1;break}case":first-of-type":for(const i of e.naturalElements)if(i.tagName===r){if(i!==t)return!1;break}break;case":nth-child(n)":case":nth-last-child(n)":break;case":empty":if(t.element.childNodes.length)return!1;break;case":checked":switch(r){case"INPUT":if(!t.toElementBoolean("checked"))return!1;break;case"OPTION":if(!t.toElementBoolean("selected"))return!1;break;default:return!1}break;case":enabled":if(!t.inputElement||t.toElementBoolean("disabled"))return!1;break;case":disabled":if(!t.inputElement||!t.toElementBoolean("disabled"))return!1;break;case":read-only":{const e=t.element;if(e.isContentEditable||("INPUT"===r||"TEXTAREA"===r)&&!e.readOnly)return!1;break}case":read-write":{const e=t.element;if(!e.isContentEditable||("INPUT"===r||"TEXTAREA"===r)&&e.readOnly)return!1;break}case":required":if(!t.inputElement||"BUTTON"===r||!t.toElementBoolean("required"))return!1;break;case":optional":if(!t.inputElement||"BUTTON"===r||t.toElementBoolean("required"))return!1;break;case":placeholder-shown":if("INPUT"!==r&&"TEXTAREA"!==r||""===t.toElementString("placeholder"))return!1;break;case":default":switch(r){case"INPUT":{const e=t.element;switch(e.type){case"radio":case"checkbox":if(!e.checked)return!1;break;default:return!1}break}case"OPTION":if(void 0===t.element.attributes.selected)return!1;break;case"BUTTON":{const e=t.ascend({condition:t=>"FORM"===t.tagName})[0];if(e){let i=!1;const n=t.element;if(Vt(e.element.querySelectorAll("*"),t=>{switch(t.tagName){case"BUTTON":return i=n===t,!0;case"INPUT":switch(t.type){case"submit":case"image":return i=n===t,!0}}}),!i)return!1}break}default:return!1}break;case":in-range":case":out-of-range":if("INPUT"!==r)return!1;{const e=t.element,n=parseFloat(e.value);if(isNaN(n)){if(":in-range"===i)return!1}else{const t=parseFloat(e.min),s=parseFloat(e.max);if(n>=t&&n<=s){if(":out-of-range"===i)return!1}else if(":in-range"===i)return!1}}break;case":indeterminate":if("INPUT"===r){const e=t.element;switch(e.type){case"checkbox":if(!e.indeterminate)return!1;break;case"radio":if(e.checked)return!1;if(e.name&&Vt(((null===(o=t.ascend({condition:t=>"FORM"===t.tagName})[0])||void 0===o?void 0:o.element)||document).querySelectorAll(`input[type=radio][name="${e.name}"`),t=>t.checked)===1/0)return!1;break;default:return!1}}else{if("PROGRESS"!==r)return!1;if(-1!==t.toElementInt("value",-1))return!1}break;case":target":if(""===location.hash)return!1;{const e=t.element;if(location.hash!==`#${e.id}`&&("A"!==r||location.hash!==`#${e.name}`))return!1}break;case":scope":if(!n||">"===s&&t!==this)return!1;break;case":root":if(!n||s)return!1;break;case":link":case":visited":case":any-link":case":hover":case":focus":case":focus-within":case":valid":case":invalid":{const n=t.element;if(Vt(e.element.querySelectorAll(":scope > "+i),t=>t===n)!==1/0)return!1;break}default:{let n=ne.exec(i);if(n){const i=n[3].trim();let s=e.naturalElements;n[1]&&(s=s.slice(0).reverse());const o=("child"===n[2]?s.indexOf(t):s.filter(t=>t.tagName===r).indexOf(t))+1;if(o>0){if(Ht(i)){if(parseInt(i)!==o)return!1}else switch(i){case"even":if(o%2!=0)return!1;break;case"odd":if(o%2==0)return!1;break;default:{const t=se.exec(i);if(t){const e=Ft(t[3]);if(t[2]){if(t[1])return!1;const i=parseInt(t[2]);if(0!==i){if(o!==e)for(let t=i;;t+=i){const t=i+e;if(t===o)break;if(t>o)return!1}}else if(o!==e)return!1}else if(t[3]){if(!(e>0))return!1;if(t[1]){if(o>e)return!1}else if(o<e)return!1}}break}}continue}}else if(n=ie.exec(i),n){const e=t.attributes;if(e.lang&&n[1].toLowerCase()===e.lang.toLowerCase())continue}return!1}}}if(h)for(const e of h){const s={all:!1};switch(e.charAt(0)){case".":s.classList=[e];break;case"#":s.id=e.substring(1);break;case":":s.pseudoList=[e];break;case"[":{Gt.lastIndex=0;const t=Gt.exec(e);if(!t)continue;{const e="i"===t[6];let i=t[3]||t[4]||t[5]||"";e&&(i=i.toLowerCase()),s.attrList=[{key:t[1],symbol:t[2],value:i,caseInsensitive:e}]}break}default:if(!Et.WORDDASH.test(e))return!1;s.tagName=e}if(ce.call(this,t,s,i,n))return!1}if(c){const e=t.element.classList;for(const t of c)if(!e.contains(t))return!1}if(l){const e=t.attributes;for(const t of l){let i=e[t.key];if(void 0===i)return!1;{const e=t.value;if(e)if(t.caseInsensitive&&(i=i.toLowerCase()),t.symbol)switch(t.symbol){case"~":if(!i.split(Et.SPACE).includes(e))return!1;break;case"^":if(!i.startsWith(e))return!1;break;case"$":if(!i.endsWith(e))return!1;break;case"*":if(!i.includes(e))return!1;break;case"|":if(i!==e&&!i.startsWith(e+"-"))return!1}else if(i!==e)return!1}}}return!0}function he(t,e,i){const n=t.cssAscend("textAlign",t.textElement&&t.blockStatic&&!t.hasPX("width"));if(n===e||n===i){if(t.textElement&&t.blockStatic)return!t.hasPX("width",!0,!0)&&!t.hasPX("maxWidth",!0,!0);{const e=t.actualParent;if(e){const i=e.naturalChildren;if(1===i.length)return!0;{const e=t.childIndex,n=i[e-1],s=i[e+1];return(void 0===n||!n.pageFlow||n.blockStatic||n.lineBreak)&&(void 0===s||!s.pageFlow||s.blockStatic||s.lineBreak)}}}}return!1}function de(t,e,i,n,s){return s===n||(t.style.setProperty(e,n),!!ge(n,t.style.getPropertyValue(e))&&(Bt(t,e,i,"auto"!==n?s:""),!0))}function ue(t,e,i){const n=Rt(t,e,i);void 0!==n&&(t.style.setProperty(e,n),At(t,e,i))}const fe=t=>t.naturalChild&&(t.inlineVertical||0===t.length)&&!t.floating&&!0!==t.autoMargin.horizontal,ge=(t,e)=>t===e||ft(t,!0)&&jt.test(e);class pe extends squared.lib.base.Container{constructor(t,e="0",i){super(),this.id=t,this.sessionId=e,this.documentRoot=!1,this.depth=-1,this.childIndex=1/0,this._element=null,this._data={},this._inlineText=!1,i?this._element=i:(this.style={},this._styleMap={},this._cssStyle={})}init(){const t=this._element;if(t){const e=this.sessionId,i=Rt(t,"styleMap",e)||{};let n;if(this.pseudoElement)n=dt(t.parentElement,Pt(t,e));else if(n=dt(t),this.styleElement){const e=Array.from(t.style);if(e.length){const n=t.style;for(const t of e)i[Lt(t)]=n.getPropertyValue(t)}}if(this.styleElement){const e={};for(const s in i){const o=lt(t,s,i[s],n);""!==o&&(e[s]=o)}this._styleMap=e}else this._styleMap=i;this.style=n,this._cssStyle=i,"0"!==e&&Bt(t,"node",e,this)}}saveAsInitial(t=!1){(void 0===this._initial||t)&&(this._initial={children:this.duplicate(),styleMap:Object.assign({},this._styleMap)})}data(t,e,i,n=!0){const s=this._data;if(Dt(i)){let o=s[t];Xt(o)||(o={},s[t]=o),(n||void 0===o[e])&&(o[e]=i)}else if(null===i)return void delete s[t];const o=s[t];return Xt(o)?o[e]:void 0}unsetCache(...t){if(t.length){const e=this._cached;for(const i of t){switch(i){case"position":case"display":return void(this._cached={});case"width":e.actualWidth=void 0;case"minWidth":e.width=void 0;case"maxWidth":e.overflow=void 0;break;case"height":e.actualHeight=void 0;case"minHeight":e.height=void 0;case"maxHeight":e.overflow=void 0;break;case"verticalAlign":e.baseline=void 0;break;case"textAlign":e.rightAligned=void 0,e.centerAligned=void 0;break;case"top":case"bottom":e.bottomAligned=void 0;break;case"backgroundColor":case"backgroundImage":e.visibleStyle=void 0;break;case"float":e.floating=void 0;break;case"overflowX":case"overflowY":e.overflow=void 0;break;default:Jt.test(i)?(e.autoMargin=void 0,e.rightAligned=void 0,e.centerAligned=void 0):Zt.test(i)?(e.contentBoxWidth=void 0,e.contentBoxHeight=void 0):te.test(i)&&(e.visibleStyle=void 0,e.contentBoxWidth=void 0,e.contentBoxHeight=void 0)}e[i]=void 0}}else this._cached={},this._textStyle=void 0}ascend(t={}){const{condition:e,including:i,error:n,every:s,excluding:o}=t;let r=t.attr;zt(r)||(r="actualParent");const a=[];let l=t.startSelf?this:this[r];for(;l&&l!==o&&(!n||!n(l));){if(e){if(e(l)&&(a.push(l),!s))break}else a.push(l);if(l===i)break;l=l[r]}return a}intersectX(t,e="linear"){if(t.width>0){const{left:i,right:n}=this[e],{left:s,right:o}=t;return Math.ceil(i)>=s&&Math.floor(i)<=o||n>=Math.floor(s)&&n<=Math.ceil(o)||Math.ceil(s)>=i&&Math.floor(s)<=n||o>=Math.floor(i)&&o<=Math.ceil(n)}return!1}intersectY(t,e="linear"){if(t.height>0){const{top:i,bottom:n}=this[e],{top:s,bottom:o}=t;return Math.ceil(i)>=s&&Math.floor(i)<=o||n>=Math.floor(s)&&n<=Math.ceil(o)||Math.ceil(s)>=i&&Math.floor(s)<=n||o>=Math.floor(i)&&o<=Math.ceil(n)}return!1}withinX(t,e="linear"){if(this.pageFlow||t.width>0){const i=this[e];return Mt(i.left,t.left)&&Nt(i.right,t.right)}return!0}withinY(t,e="linear"){if(this.pageFlow||t.height>0){const i=this[e];return Math.ceil(i.top)>=t.top&&Math.floor(i.bottom)<=t.bottom}return!0}outsideX(t,e="linear"){if(this.pageFlow||t.width>0){const i=this[e];return i.left<Math.floor(t.left)||i.right>Math.ceil(t.right)}return!1}outsideY(t,e="linear"){if(this.pageFlow||t.height>0){const i=this[e];return i.top<Math.floor(t.top)||i.bottom>Math.ceil(t.bottom)}return!1}css(t,e,i=!0){return e&&this.styleElement&&(this.style[t]=e,ge(e,this.style[t]))?(this._styleMap[t]=e,i&&this.unsetCache(t),e):this._styleMap[t]||this.styleElement&&this.style[t]||""}cssApply(t,e=!0){for(const i in t){const n=t[i];this.css(i,n,e)===n&&e&&this.unsetCache(i)}return this}cssInitial(t,e=!1,i=!1){var n;let s=((null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[t]||e&&this._styleMap[t];return!s&&i&&(s=this.style[t]),s||""}cssAny(t,...e){const i=this.css(t);for(const t of e)if(i===t)return!0;return!1}cssInitialAny(t,...e){for(const i of e)if(this.cssInitial(t)===i)return!0;return!1}cssAscend(t,e=!1){let i,n=e?this:this.actualParent;for(;n;){if(i=n.cssInitial(t),""!==i)return i;if(n.documentBody)break;n=n.actualParent}return""}cssSort(t,e=!0,i=!1){return(i?this.duplicate():this.children).sort((i,n)=>{const s=i.toFloat(t,i.childIndex),o=n.toFloat(t,n.childIndex);return s===o?0:e?s<o?-1:1:s>o?-1:1})}cssPX(t,e,i=!1,n=!1){const s=this._styleMap[t];if(s&&ft(s)){e+=mt(s,this.fontSize),!i&&e<0&&(e=0);const o=ct(e);return this.css(t,o),n&&this.unsetCache(t),o}return""}cssSpecificity(t){var e,i;let n;if(this.styleElement)if(this.pseudoElement){const i=this._element,s=this.sessionId;n=null===(e=Rt(i.parentElement,"styleSpecificity"+Pt(i,s),s))||void 0===e?void 0:e[t]}else n=null===(i=Rt(this._element,"styleSpecificity",this.sessionId))||void 0===i?void 0:i[t];return n||0}cssTry(t,e){if(this.styleElement){const i=this._element;return de(i,t,this.sessionId,e,dt(i).getPropertyValue(t))}return!1}cssFinally(t){this.styleElement&&ue(this._element,t,this.sessionId)}cssTryAll(t){if(this.styleElement){const e=this.sessionId,i=this._element,n=dt(i),s=[];for(const o in t){if(!de(i,o,e,t[o],n.getPropertyValue(o))){for(const t of s)this.cssFinally(t);return}s.push(o)}return t}}cssFinallyAll(t){if(this.styleElement){const e=this.sessionId,i=this._element;for(const n in t)ue(i,n,e)}}cssParent(t,e,i=!1){return this.naturalChild?this.actualParent.css(t,e,i):""}cssCopy(t,...e){const i=this._styleMap;for(const n of e)i[n]=t.css(n)}cssCopyIfEmpty(t,...e){const i=this._styleMap;for(const n of e)Dt(i[n])||(i[n]=t.css(n))}cssAsTuple(...t){const e=t.length,i=Array(e);for(let n=0;n<e;n++)i[n]=this.css(t[n]);return i}cssAsObject(...t){const e={};for(const i of t)e[i]=this.css(i);return e}toInt(t,e=NaN,i=!1){var n;const s=parseInt((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[t]);return isNaN(s)?e:s}toFloat(t,e=NaN,i=!1){var n;const s=parseFloat((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[t]);return isNaN(s)?e:s}toElementInt(t,e=NaN){var i;const n=parseInt(null===(i=this._element)||void 0===i?void 0:i[t]);return isNaN(n)?e:n}toElementFloat(t,e=NaN){var i;const n=parseFloat(null===(i=this._element)||void 0===i?void 0:i[t]);return isNaN(n)?e:n}toElementBoolean(t,e=!1){var i;const n=null===(i=this._element)||void 0===i?void 0:i[t];return"boolean"==typeof n?n:e}toElementString(t,e=""){var i;return((null===(i=this._element)||void 0===i?void 0:i[t])||e).toString()}parseUnit(t,e="width",i=!0,n){var s;if(t){if(gt(t)){const n=i&&(null===(s=this.absoluteParent)||void 0===s?void 0:s.box)||this.bounds;let o=parseFloat(t)/100;switch(e){case"width":o*=n.width;break;case"height":o*=n.height}return o}return mt(t,this.fontSize,n)}return 0}has(t,e){var i;let n,s,o;e&&({map:n,not:s,type:o}=e);const r=("initial"===n&&(null===(i=this._initial)||void 0===i?void 0:i.styleMap)||this._styleMap)[t];if(r)switch(r){case"auto":case"none":case"initial":case"normal":case"rgba(0, 0, 0, 0)":return!1;case"baseline":return"verticalAlign"!==t;case"left":case"start":return"textAlign"!==t;default:if(s)if(Array.isArray(s)){for(const t of s)if(r===t)return!1}else if(r===s)return!1;return!o||!!(Ot(o,2)&&ft(r)||Ot(o,4)&&gt(r))}return!1}hasPX(t,e=!0,i=!1){var n;return ft((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[t],e)}hasFlex(t){const e=this.actualParent;if((null==e?void 0:e.flexElement)&&e.flexdata[t]){if("column"===t&&!e.hasHeight){const t=e.actualParent;if(!t)return!1;if(t.flexElement&&!t.flexdata.column){if(!t.hasHeight){let i=0,n=0;for(const s of t){const t=(s.data(it.FLEXBOX,"boundsData")||s.bounds).height;if(t>i&&(i=t),s===e&&(n=t,n<i))break}if(n>=i)return!1}}else if(!t.gridElement)return!1}const{grow:i,shrink:n}=this.flexbox;return i>0||1!==n}return!1}setBounds(t=!0){if(this.styleElement)this._bounds=xt(Tt(this._element,t?this.sessionId:void 0)),this.documentBody&&0===this.marginTop&&(this._bounds.top=0);else if(this.plainText){const t=yt(this._element),e=xt(t),i=t.numberOfLines;e.numberOfLines=i,this._bounds=e,this._textBounds=e,this._cached.multiline=i>1}t||(this._box=void 0,this._linear=void 0)}querySelector(t){return this.naturalElement&&this.querySelectorAll(t,1)[0]||null}querySelectorAll(t,e=-1){let i=[];const n=this.queryMap;if(n){const s=pt(t);for(let t=0;t<s.length;t++){const o=s[t],r=[];let a=-1;t:{let t,e;for(;null!==(e=qt.exec(o));){let i,n,s,o,l,c,h=e[1],d=!1;if(1===h.length){const e=h.charAt(0);switch(e){case"+":case"~":a--;case">":if(t||0===r.length){r.length=0;break t}t=e;continue;case"*":d=!0}}else if(h.endsWith("|*"))d="*|*"===h;else if("*"===h.charAt(0))h=h.substring(1);else if(/^::/.test(h)){r.length=0;break t}if(!d){let t;for(;null!==(t=Gt.exec(h));){void 0===o&&(o=[]);const e="i"===t[6];let i=t[3]||t[4]||t[5]||"";e&&(i=i.toLowerCase()),o.push({key:t[1],symbol:t[2],value:i,caseInsensitive:e}),h=Ut(h,t.index,t[0].length)}if(h.includes("::")){r.length=0;break t}for(;null!==(t=$t.exec(h));)/^:not\(/.test(t[0])?t[1]&&(void 0===c&&(c=[]),c.push(t[1])):(void 0===l&&(l=[]),l.push(t[0])),h=Ut(h,t.index,t[0].length);for(;null!==(t=Yt.exec(h));){const e=t[0];switch(e.charAt(0)){case"#":n=e.substring(1);break;case".":void 0===s&&(s=[]),s.push(e.substring(1));break;default:i=e.toUpperCase()}h=Ut(h,t.index,t[0].length)}}r.push({all:d,tagName:i,id:n,adjacent:t,classList:s,pseudoList:l,notList:c,attrList:o}),a++,t=void 0}qt.lastIndex=0}let l=n.length;if(r.length&&-1!==a&&a<l){const o=r.pop(),c=0===r.length;let h=[];for(let e=a;e<l;e++){const i=n[e];if(o.all)h=h.concat(i);else for(const e of i)ce.call(this,e,o,t,c)&&h.push(e)}if(r.length){const n=this.depth;r.reverse(),l=r.length;const s=(e,i,o)=>{const a=r[e],c=e===l-1,h=[];for(const s of o)if(i){const e=s.actualParent;if(">"===i)ce.call(this,e,a,t,c,i)&&h.push(e);else{const n=e.naturalElements;switch(i){case"+":{const e=n.indexOf(s);if(e>0){const s=n[e-1];s&&ce.call(this,s,a,t,c,i)&&h.push(s)}break}case"~":{const e=n.length;for(let o=0;o<e;o++){const e=n[o];if(e===s)break;ce.call(this,e,a,t,c,i)&&h.push(e)}break}}}}else if(s.depth-n>=l-e){let e=s.actualParent;do{ce.call(this,e,a,t,c)&&h.push(e),e=e.actualParent}while(e)}return!!h.length&&(++e===l||s(e,a.adjacent,h))};for(const t of h)if(s(0,o.adjacent,[t])&&(i.push(t),i.length===e))return i}else{if(0===i.length&&(t===s.length-1||e>=0&&e<=h.length))return e>=0&&h.length>e&&(h.length=e),h;if(i=i.concat(h),e>=0&&i.length>=e)return i.length=e,i}}}}return i}setDimension(t,e,i){const n=this._styleMap,s=n[t],o=this.parseUnit(s,t);let r=Math.max(o,this.parseUnit(n[e],t));if(0===r&&this.styleElement){const e=this._element;switch(e.tagName){case"IMG":case"INPUT":if("image"!==e.type)break;case"TD":case"TH":case"SVG":case"IFRAME":case"VIDEO":case"CANVAS":case"OBJECT":case"EMBED":{const i=vt(e,t);""!==i&&(r=Ht(i)?parseFloat(i):this.parseUnit(i,t),r>0&&this.css(t,gt(i)?i:i+"px"));break}}}let a=0;if(o>0&&!this.imageElement){const e=n[i];s===e?delete n[i]:(a=this.parseUnit(e,t),a>0&&a<=o&&ft(s)&&(a=0,n[t]=e,delete n[i]))}return a>0?Math.min(r,a):r}convertPosition(t){if(!this.positionStatic){const e=this.cssInitial(t,!0);if(ft(e))return this.parseUnit(e,"left"===t||"right"===t?"width":"height");if(gt(e)&&this.styleElement)return Wt(this.style[t])}return 0}convertBorderWidth(t){if(!this.plainText){const[e,i]=rt[t];if("none"!==this.css(e)){const e=this.css(i);let n;switch(e){case"thin":case"medium":case"thick":n=Wt(this.style[i]);break;default:n=this.parseUnit(e,1===t||3===t?"width":"height")}if(n>0)return Math.max(Math.round(n),1)}}return 0}convertBox(t,e){var i,n;switch(this.display){case"table":if(!e&&"collapse"===this.css("borderCollapse"))return 0;break;case"table-row":return 0;case"table-cell":if(e){switch(this.tagName){case"TD":case"TH":return 0;default:{const e=this.ascend({condition:t=>"TABLE"===t.tagName})[0];if(e){const[n,s]=e.css("borderSpacing").split(" ");switch(t){case"marginTop":case"marginBottom":return s?this.parseUnit(s,"height",!1):this.parseUnit(n,"width",!1);case"marginRight":if((null===(i=this.actualParent)||void 0===i?void 0:i.lastChild)!==this)return this.parseUnit(n,"width",!1);case"marginLeft":return 0}}break}}return 0}}const s=this.parseUnit(this.css(t),"width",!0!==(null===(n=this.actualParent)||void 0===n?void 0:n.gridElement));if(!e){let e=this.toFloat("paddingInlineStart",0),i=this.toFloat("paddingInlineEnd",0);if(e>0||i>0)return"vertical-rl"===this.css("writingMode")?"rtl"===this.dir?("paddingBottom"!==t&&(e=0),"paddingTop"!==t&&(i=0)):("paddingTop"!==t&&(e=0),"paddingBottom"!==t&&(i=0)):"rtl"===this.dir?("paddingRight"!==t&&(e=0),"paddingLeft"!==t&&(i=0)):("paddingLeft"!==t&&(e=0),"paddingRight"!==t&&(i=0)),e+s+i}return s}set parent(t){if(t){const e=this._parent;t!==e&&(null==e||e.remove(this),this._parent=t),t.contains(this)||t.append(this),-1===this.depth&&(this.depth=t.depth+1)}}get parent(){return this._parent}get tagName(){let t=this._cached.tagName;if(void 0===t){const e=this._element;if(e){const i=e.nodeName;t="#"===i.charAt(0)?i:e.tagName}else t="";this._cached.tagName=t}return t}get element(){return this._element}get elementId(){var t;return(null===(t=this._element)||void 0===t?void 0:t.id)||""}get htmlElement(){let t=this._cached.htmlElement;return void 0===t&&(t=!this.plainText&&this._element instanceof HTMLElement,this._cached.htmlElement=t),t}get svgElement(){let t=this._cached.svgElement;return void 0===t&&(t=!this.htmlElement&&!this.plainText&&this._element instanceof SVGElement||this.imageElement&&kt.SVG.test(this.src),this._cached.svgElement=t),t}get styleElement(){return this.htmlElement||this.svgElement}get naturalChild(){return!0}get naturalElement(){let t=this._cached.naturalElement;return void 0===t&&(t=this.naturalChild&&this.styleElement&&!this.pseudoElement,this._cached.naturalElement=t),t}get pseudoElement(){return!1}get imageElement(){return"IMG"===this.tagName}get flexElement(){let t=this._cached.flexElement;return void 0===t&&(t=ae.test(this.display),this._cached.flexElement=t),t}get gridElement(){let t=this._cached.gridElement;return void 0===t&&(t=re.test(this.display),this._cached.gridElement=t),t}get textElement(){let t=this._cached.textElement;return void 0===t&&(t=this.plainText||this.inlineText&&!this.inputElement,this._cached.textElement=t),t}get tableElement(){let t=this._cached.tableElement;return void 0===t&&(t="TABLE"===this.tagName||"table"===this.display,this._cached.tableElement=t),t}get inputElement(){let t=this._cached.inputElement;if(void 0===t){switch(this.tagName){case"INPUT":case"BUTTON":case"SELECT":case"TEXTAREA":t=!0;break;default:t=!1}this._cached.inputElement=t}return t}get layoutElement(){let t=this._cached.layoutElement;return void 0===t&&(t=this.flexElement||this.gridElement,this._cached.layoutElement=t),t}get plainText(){return"#text"===this.tagName}get styleText(){return this.naturalElement&&this.inlineText}get lineBreak(){return"BR"===this.tagName}get documentBody(){return this._element===document.body}get initial(){return this._initial}get bounds(){return this._bounds||xt(this.boundingClientRect)}get linear(){return this._linear||(()=>{const t=this._bounds;if(t){if(this.styleElement){const{marginBottom:e,marginRight:i}=this,n=Math.max(this.marginTop,0),s=Math.max(this.marginLeft,0);this._linear={top:t.top-n,right:t.right+i,bottom:t.bottom+e,left:t.left-s,width:t.width+s+i,height:t.height+n+e}}else this._linear=t;return this._linear}return St()})()}get box(){return this._box||(()=>{const t=this._bounds;return t?(this._box=this.styleElement?{top:t.top+(this.paddingTop+this.borderTopWidth),right:t.right-(this.paddingRight+this.borderRightWidth),bottom:t.bottom-(this.paddingBottom+this.borderBottomWidth),left:t.left+(this.paddingLeft+this.borderLeftWidth),width:t.width-this.contentBoxWidth,height:t.height-this.contentBoxHeight}:t,this._box):St()})()}get dataset(){if(this.styleElement)return this._element.dataset;{let t=this._dataset;return void 0===t&&(t={},this._dataset=t),t}}get flexdata(){let t=this._cached.flexdata;if(void 0===t){if(this.flexElement){const{flexWrap:e,flexDirection:i,alignContent:n,justifyContent:s}=this.cssAsObject("flexWrap","flexDirection","alignContent","justifyContent"),o=/^row/.test(i);t={row:o,column:!o,reverse:/reverse$/.test(i),wrap:/^wrap/.test(e),wrapReverse:"wrap-reverse"===e,alignContent:n,justifyContent:s}}else t={};this._cached.flexdata=t}return t}get flexbox(){var t;let e=this._cached.flexbox;if(void 0===e){if((null===(t=this.actualParent)||void 0===t?void 0:t.flexElement)&&this.styleElement){const t=this.css("alignSelf"),i=this.css("justifySelf");e={alignSelf:"auto"===t?this.cssParent("alignItems"):t,justifySelf:"auto"===i?this.cssParent("justifyItems"):i,basis:this.css("flexBasis"),grow:le(this,"flexGrow",0),shrink:le(this,"flexShrink",1),order:this.toInt("order",0)}}else e={alignSelf:"auto",justifySelf:"auto",basis:"auto",grow:0,shrink:1,order:0};this._cached.flexbox=e}return e}get width(){let t=this._cached.width;return void 0===t&&(t=this.setDimension("width","minWidth","maxWidth"),this._cached.width=t),t}get height(){let t=this._cached.height;return void 0===t&&(t=this.setDimension("height","minHeight","maxHeight"),this._cached.height=t),t}get hasWidth(){let t=this._cached.hasWidth;return void 0===t&&(t=this.width>0,this._cached.hasWidth=t),t}get hasHeight(){var t;let e=this._cached.hasHeight;if(void 0===e){const i=this.css("height");e=gt(i)?this.pageFlow&&((null===(t=this.actualParent)||void 0===t?void 0:t.hasHeight)||this.documentBody)?parseFloat(i)>0:"fixed"===this.css("position"):this.height>0,this._cached.hasHeight=e}return e}get lineHeight(){let t=this._cached.lineHeight;if(void 0===t){if(t=0,!this.imageElement&&!this.svgElement){let e=this.has("lineHeight"),i=0;if(e){const t=this.css("lineHeight");if(gt(t))i=Wt(this.style.lineHeight);else if(i=mt(t,this.fontSize),jt.test(t)&&"inherit"!==this._cssStyle.lineHeight){const t=this.cssInitial("fontSize");oe.test(t)&&(i*=parseFloat(t))}}else{const t=this.ascend({condition:t=>t.lineHeight>0})[0];if(t&&(i=t.lineHeight),this.styleElement){const t=this.cssInitial("fontSize");if(oe.test(t)){const n=parseFloat(t);1!==n&&(i*=n,this.css("lineHeight",ct(i)),e=!0)}}}(e||i>this.height||this.multiline||this.block&&this.naturalChildren.some(t=>t.textElement))&&(t=i)}this._cached.lineHeight=t}return t}get display(){return this.css("display")}get positionStatic(){let t=this._cached.positionStatic;if(void 0===t){switch(this.css("position")){case"fixed":case"absolute":t=!1;break;case"relative":this.documentBody?t=!1:(t=!(this.hasPX("top")||this.hasPX("right")||this.hasPX("bottom")||this.hasPX("left")),t&&(this._cached.positionRelative=!1));break;case"inherit":{const e=this._element,i=(null==e?void 0:e.parentElement)?ht(e.parentElement,"position"):"";t=""!==i&&!("absolute"===i||"fixed"===i);break}default:t=!0}this._cached.positionStatic=t}return t}get positionRelative(){let t=this._cached.positionRelative;return void 0===t&&(t="relative"===this.css("position"),this._cached.positionRelative=t),t}get top(){let t=this._cached.top;return void 0===t&&(t=this.convertPosition("top"),this._cached.top=t),t}get right(){let t=this._cached.right;return void 0===t&&(t=this.convertPosition("right"),this._cached.right=t),t}get bottom(){let t=this._cached.bottom;return void 0===t&&(t=this.convertPosition("bottom"),this._cached.bottom=t),t}get left(){let t=this._cached.left;return void 0===t&&(t=this.convertPosition("left"),this._cached.left=t),t}get marginTop(){let t=this._cached.marginTop;return void 0===t&&(t=this.inlineStatic?0:this.convertBox("marginTop",!0),this._cached.marginTop=t),t}get marginRight(){let t=this._cached.marginRight;return void 0===t&&(t=this.convertBox("marginRight",!0),this._cached.marginRight=t),t}get marginBottom(){let t=this._cached.marginBottom;return void 0===t&&(t=this.inlineStatic?0:this.convertBox("marginBottom",!0),this._cached.marginBottom=t),t}get marginLeft(){let t=this._cached.marginLeft;return void 0===t&&(t=this.convertBox("marginLeft",!0),this._cached.marginLeft=t),t}get borderTopWidth(){let t=this._cached.borderTopWidth;return void 0===t&&(t=this.convertBorderWidth(0),this._cached.borderTopWidth=t),t}get borderRightWidth(){let t=this._cached.borderRightWidth;return void 0===t&&(t=this.convertBorderWidth(1),this._cached.borderRightWidth=t),t}get borderBottomWidth(){let t=this._cached.borderBottomWidth;return void 0===t&&(t=this.convertBorderWidth(2),this._cached.borderBottomWidth=t),t}get borderLeftWidth(){let t=this._cached.borderLeftWidth;return void 0===t&&(t=this.convertBorderWidth(3),this._cached.borderLeftWidth=t),t}get paddingTop(){let t=this._cached.paddingTop;return void 0===t&&(t=this.convertBox("paddingTop",!1),this._cached.paddingTop=t),t}get paddingRight(){let t=this._cached.paddingRight;return void 0===t&&(t=this.convertBox("paddingRight",!1),this._cached.paddingRight=t),t}get paddingBottom(){let t=this._cached.paddingBottom;return void 0===t&&(t=this.convertBox("paddingBottom",!1),this._cached.paddingBottom=t),t}get paddingLeft(){let t=this._cached.paddingLeft;return void 0===t&&(t=this.convertBox("paddingLeft",!1),this._cached.paddingLeft=t),t}get contentBox(){return"border-box"!==this.css("boxSizing")||this.tableElement&&ot(8)}get contentBoxWidth(){let t=this._cached.contentBoxWidth;return void 0===t&&(t=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderLeftWidth+this.paddingLeft+this.paddingRight+this.borderRightWidth,this._cached.contentBoxWidth=t),t}get contentBoxHeight(){let t=this._cached.contentBoxHeight;return void 0===t&&(t=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderTopWidth+this.paddingTop+this.paddingBottom+this.borderBottomWidth,this._cached.contentBoxHeight=t),t}get inline(){let t=this._cached.inline;if(void 0===t){const e=this.display;t="inline"===e||"initial"===e&&!bt.includes(this.tagName),this._cached.inline=t}return t}get inlineStatic(){let t=this._cached.inlineStatic;return void 0===t&&(t=this.inline&&this.pageFlow&&!this.floating&&!this.imageElement,this._cached.inlineStatic=t),t}get inlineVertical(){let t=this._cached.inlineVertical;if(void 0===t){if(this.naturalElement&&!this.floating){const e=this.display;t=Qt.test(e)||"table-cell"===e}else t=!1;this._cached.inlineVertical=t}return t}get inlineDimension(){let t=this._cached.inlineDimension;return void 0===t&&(t=this.naturalElement&&(Kt.test(this.display)||this.floating),this._cached.inlineDimension=t),t}set inlineText(t){switch(this.tagName){case"INPUT":case"IMG":case"SELECT":case"SVG":case"BR":case"HR":case"TEXTAREA":case"PROGRESS":case"METER":this._inlineText=!1;break;case"BUTTON":this._inlineText=""!==this.textContent.trim();break;default:this._inlineText=t,this._cached.textElement=void 0}}get inlineText(){return this._inlineText}get block(){var t;let e=this._cached.block;if(void 0===e){switch(this.display){case"block":case"flex":case"grid":case"list-item":e=!0;break;case"initial":e=bt.includes(this.tagName);break;case"inline":if("svg"===this.tagName&&(null===(t=this.actualParent)||void 0===t?void 0:t.htmlElement)){e=!this.hasPX("width")&&0===Wt(vt(this._element,"width"));break}default:e=!1}this._cached.block=e}return e}get blockStatic(){let t=this._cached.blockStatic;return void 0===t&&(t=this.pageFlow&&(this.block&&!this.floating||this.lineBreak||this.blockDimension&&("100%"===this.cssInitial("width")||"100%"===this.cssInitial("minWidth"))&&!this.hasPX("maxWidth")),this._cached.blockStatic=t),t}get blockDimension(){let t=this._cached.blockDimension;if(void 0===t){if(this.block||this.floating||this.imageElement||this.svgElement)t=!0;else{const e=this.display;t=Kt.test(e)||"table"===e}this._cached.blockDimension=t}return t}get blockVertical(){let t=this._cached.blockVertical;return void 0===t&&(t=this.blockDimension&&this.hasHeight,this._cached.blockVertical=t),t}get pageFlow(){let t=this._cached.pageFlow;return void 0===t&&(t=this.positionStatic||this.positionRelative,this._cached.pageFlow=t),t}get inlineFlow(){let t=this._cached.inlineFlow;return void 0===t&&(t=this.inline||this.inlineDimension||this.inlineVertical||this.imageElement,this._cached.inlineFlow=t),t}get centerAligned(){let t=this._cached.centerAligned;return void 0===t&&(t=this.pageFlow?this.autoMargin.leftRight||fe(this)&&he(this,"center"):this.hasPX("left")&&this.hasPX("right"),this._cached.centerAligned=t),t}get rightAligned(){let t=this._cached.rightAligned;return void 0===t&&(t=this.pageFlow?"right"===this.float||this.autoMargin.left||fe(this)&&he(this,"right","end"):this.hasPX("right")&&!this.hasPX("left"),this._cached.rightAligned=t),t}get bottomAligned(){var t;let e=this._cached.bottomAligned;return void 0===e&&(e=this.pageFlow?!0===(null===(t=this.actualParent)||void 0===t?void 0:t.hasHeight)&&!0===this.autoMargin.top:this.hasPX("bottom")&&!this.hasPX("top"),this._cached.bottomAligned=e),e}get autoMargin(){let t=this._cached.autoMargin;if(void 0===t){if(!this.pageFlow||this.blockStatic||"table"===this.display){const e=this._styleMap,i="auto"===e.marginLeft&&(this.pageFlow||this.hasPX("right")),n="auto"===e.marginRight&&(this.pageFlow||this.hasPX("left")),s="auto"===e.marginTop&&(this.pageFlow||this.hasPX("bottom")),o="auto"===e.marginBottom&&(this.pageFlow||this.hasPX("top"));t={horizontal:i||n,left:i&&!n,right:!i&&n,leftRight:i&&n,vertical:s||o,top:s&&!o,bottom:!s&&o,topBottom:s&&o}}else t={};this._cached.autoMargin=t}return t}get floating(){let t=this._cached.floating;return void 0===t&&(t="none"!==this.float,this._cached.floating=t),t}get float(){let t=this._cached.float;return void 0===t&&(t=this.pageFlow&&this.css("float")||"none",this._cached.float=t),t}get zIndex(){return this.toInt("zIndex",0)}get textContent(){let t=this._cached.textContent;return void 0===t&&(t=this.svgElement?"":this._element.textContent,this._cached.textContent=t),t}get src(){return this.htmlElement&&this._element.src||""}get overflow(){let t=this._cached.overflow;if(void 0===t){if(t=0,this.htmlElement&&!this.inputElement&&!this.imageElement&&"HR"!==this.tagName&&!this.documentBody){const e=this._element,{overflowX:i,overflowY:n}=this.cssAsObject("overflowX","overflowY");this.hasHeight&&(this.hasPX("height")||this.hasPX("maxHeight"))&&("scroll"===n||"auto"===n&&e.clientHeight!==e.scrollHeight)&&(t|=16),(this.hasPX("width")||this.hasPX("maxWidth"))&&("scroll"===i||"auto"===i&&e.clientWidth!==e.scrollWidth)&&(t|=8),"auto"!==i&&"hidden"!==i&&"overlay"!==i&&"auto"!==n&&"hidden"!==n&&"overlay"!==n||(t|=64)}this._cached.overflow=t}return t}get overflowX(){return Ot(this.overflow,8)}get overflowY(){return Ot(this.overflow,16)}get baseline(){let t=this._cached.baseline;if(void 0===t){if(this.pageFlow&&!this.floating){const e=this.css("verticalAlign");t="baseline"===e||"initial"===e||0===this.naturalElements.length&&ft(e,!0)}else t=!1;this._cached.baseline=t}return t}get verticalAlign(){let t=this._cached.verticalAlign;return void 0===t&&(t=this.css("verticalAlign"),ft(t,!0)&&(t=this.parseUnit(t,"height")+"px"),this._cached.verticalAlign=t),t}set textBounds(t){this._textBounds=t}get textBounds(){let t=this._textBounds;if(void 0===t){if(t=null,this.naturalChild)if(this.textElement)t=Ct(this._element,this.sessionId);else{const e=this.naturalChildren;if(e.length){let i=1/0,n=-1/0,s=1/0,o=-1/0,r=0;for(const t of e)if(t.textElement){const e=Ct(t.element,t.sessionId);i=Math.min(e.top,i),n=Math.max(e.right,n),s=Math.min(e.left,s),o=Math.max(e.bottom,o),r+=e.numberOfLines||0}r>0&&(t={top:i,right:n,left:s,bottom:o,width:n-s,height:o-i,numberOfLines:r})}}this._textBounds=t}return t}get multiline(){var t;let e=this._cached.multiline;return void 0===e&&(e=this.plainText?Math.floor(yt(this._element).width)>this.actualParent.box.width:!(!this.styleText||!this.inlineFlow&&0!==this.naturalElements.length)&&(null===(t=this.textBounds)||void 0===t?void 0:t.numberOfLines)>1,this._cached.multiline=e),e}get backgroundColor(){let t=this._cached.backgroundColor;if(void 0===t){switch(t=this.css("backgroundColor"),t){case"initial":case"transparent":case"rgba(0, 0, 0, 0)":t="";break;default:if(""!==t&&this.pageFlow&&this.styleElement&&!this.inputElement&&(void 0===this._initial||this.cssInitial("backgroundColor")===t)){let e=this.actualParent;for(;e;){const i=e.cssInitial("backgroundColor",!0);if(""!==i){i===t&&""===e.backgroundColor&&(t="");break}e=e.actualParent}}}this._cached.backgroundColor=t}return t}get backgroundImage(){var t;let e=this._cached.backgroundImage;if(void 0===e){const i=this.css("backgroundImage");e=""!==i&&"none"!==i&&"initial"!==i?i:(null===(t=ee.exec(this.css("background")))||void 0===t?void 0:t[1])||"",this._cached.backgroundImage=e}return e}get percentWidth(){let t=this._cached.percentWidth;if(void 0===t){const e=this.cssInitial("width");t=gt(e)?parseFloat(e)/100:0,this._cached.percentWidth=t}return t}get percentHeight(){var t;let e=this._cached.percentHeight;if(void 0===e){const i=this.cssInitial("height");e=gt(i)&&((null===(t=this.actualParent)||void 0===t?void 0:t.hasHeight)||"fixed"===this.css("position"))?parseFloat(i)/100:0,this._cached.percentHeight=e}return e}get visibleStyle(){let t=this._cached.visibleStyle;if(void 0===t){if(this.plainText)t={background:!1,borderWidth:!1,backgroundImage:!1,backgroundColor:!1,backgroundRepeat:!1,backgroundRepeatX:!1,backgroundRepeatY:!1};else{const e=this.borderTopWidth>0||this.borderRightWidth>0||this.borderBottomWidth>0||this.borderLeftWidth>0,i=""!==this.backgroundColor,n=""!==this.backgroundImage;let s=!1,o=!1;if(n)for(const t of this.css("backgroundRepeat").split(wt.SEPARATOR)){const[e,i]=t.split(" ");s||(s="repeat"===e||"repeat-x"===e),o||(o="repeat"===e||"repeat-y"===e||"repeat"===i)}t={background:e||n||i,borderWidth:e,backgroundImage:n,backgroundColor:i,backgroundRepeat:s||o,backgroundRepeatX:s,backgroundRepeatY:o}}this._cached.visibleStyle=t}return t}get absoluteParent(){let t=this._cached.absoluteParent;if(void 0===t){if(t=this.actualParent,!this.pageFlow&&!this.documentBody)for(;t&&!t.documentBody;){switch(t.cssInitial("position",!1,!0)){case"static":case"initial":case"unset":t=t.actualParent;continue}break}this._cached.absoluteParent=t}return t}set actualParent(t){this._cached.actualParent=t}get actualParent(){var t;let e=this._cached.actualParent;if(void 0===e){const i=null===(t=this._element)||void 0===t?void 0:t.parentElement;e=i&&It(i,this.sessionId)||null,this._cached.actualParent=e}return e}get actualWidth(){let t=this._cached.actualWidth;if(void 0===t){if(this.plainText){const e=this.bounds;switch(e.numberOfLines||1){case 1:t=e.width;break;case 2:t=Math.min(e.width,this.actualParent.box.width);break;default:t=Math.min(e.right-e.left,this.actualParent.box.width)}}else this.inlineStatic||"table-cell"===this.display||this.hasFlex("row")?t=this.bounds.width:(t=this.width,t>0?this.contentBox&&!this.tableElement&&(t+=this.contentBoxWidth):t=this.bounds.width);this._cached.actualWidth=t}return t}get actualHeight(){let t=this._cached.actualHeight;return void 0===t&&(this.inlineStatic||"table-cell"===this.display||this.hasFlex("column")?t=this.bounds.height:(t=this.height,t>0?this.contentBox&&!this.tableElement&&(t+=this.contentBoxHeight):t=this.bounds.height),this._cached.actualHeight=t),t}get actualDimension(){return{width:this.actualWidth,height:this.actualHeight}}set naturalChildren(t){this._naturalChildren=t}get naturalChildren(){return this._naturalChildren||function(t){var e;let i;if(t.naturalElement){const e=t.sessionId;let n=0;i=[],t.element.childNodes.forEach(t=>{const s=It(t,e);s&&(s.childIndex=n++,i.push(s))})}else i=((null===(e=t.initial)||void 0===e?void 0:e.children)||t.children).slice(0);return t.naturalChildren=i,i}(this)}set naturalElements(t){this._naturalElements=t}get naturalElements(){return this._naturalElements||function(t){const e=t.naturalChildren.filter(t=>t.naturalElement);return t.naturalElements=e,e}(this)}get firstChild(){return this.naturalElements[0]||null}get lastChild(){const t=this.naturalElements,e=t.length;return e?t[e-1]:null}get firstStaticChild(){for(const t of this.naturalChildren)if(t.pageFlow)return t;return null}get lastStaticChild(){const t=this.naturalChildren;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.pageFlow)return i}return null}get previousSibling(){var t;return(null===(t=this.actualParent)||void 0===t?void 0:t.naturalChildren[this.childIndex-1])||null}get nextSibling(){var t;return(null===(t=this.actualParent)||void 0===t?void 0:t.naturalChildren[this.childIndex+1])||null}get previousElementSibling(){var t;const e=null===(t=this.actualParent)||void 0===t?void 0:t.naturalElements;if(e){const t=e.indexOf(this);if(t>0)return e[t-1]}return null}get nextElementSibling(){var t;const e=null===(t=this.actualParent)||void 0===t?void 0:t.naturalElements;if(e){const t=e.indexOf(this);if(-1!==t)return e[t+1]||null}return null}get attributes(){let t=this._cached.attributes;if(void 0===t){if(t={},this.styleElement){const e=this._element.attributes,i=e.length;for(let n=0;n<i;n++){const{name:i,value:s}=e.item(n);t[i]=s}}this._cached.attributes=t}return t}get boundingClientRect(){var t;return this.naturalElement&&(null===(t=this._element)||void 0===t?void 0:t.getBoundingClientRect())||this._bounds||St()}get fontSize(){var t;let e=this._fontSize;if(void 0===e){const i=t=>parseFloat(t.getPropertyValue("font-size"));if(this.naturalChild&&this.styleElement){const n=this.css("fontSize");e=jt.test(n)?parseFloat(n):gt(n)&&!this.documentBody?((null===(t=this.actualParent)||void 0===t?void 0:t.fontSize)||i(dt(document.body)))*parseFloat(n)/100:i(this.style)}else e=mt(this.css("fontSize"));if(0===e&&!this.naturalChild){const t=this.element;if(t&&ut(t)){const n=It(t,this.sessionId);e=n?n.fontSize:i(dt(t))}else do{const t=this.actualParent;if(!t){e=i(dt(document.body));break}e=i(t.style)}while(0===e)}this._fontSize=e}return e}get cssStyle(){return this._cssStyle}get textStyle(){let t=this._textStyle;return void 0===t&&(t=this.cssAsObject(...at),this._textStyle=t),t}set dir(t){this._cached.dir=t}get dir(){let t=this._cached.dir;if(void 0===t){if(t=this.naturalElement?this._element.dir:"",""===t){let e=this.actualParent;for(;e&&(t=e.dir,""===t);)e=e.actualParent}this._cached.dir=t}return t}get center(){const t=this.bounds;return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}}var me,be,xe;!function(t){t[t.DOM_TRAVERSE=2]="DOM_TRAVERSE",t[t.EXTENSION=4]="EXTENSION",t[t.RENDER=8]="RENDER",t[t.ALL=14]="ALL"}(me||(me={})),function(t){t[t.BOX_STYLE=2]="BOX_STYLE",t[t.BOX_SPACING=4]="BOX_SPACING",t[t.FONT_STYLE=8]="FONT_STYLE",t[t.VALUE_STRING=16]="VALUE_STRING",t[t.IMAGE_SOURCE=32]="IMAGE_SOURCE",t[t.ASSET=56]="ASSET",t[t.ALL=126]="ALL"}(be||(be={})),function(t){t[t.CONSTRAINT=2]="CONSTRAINT",t[t.LAYOUT=4]="LAYOUT",t[t.ALIGNMENT=8]="ALIGNMENT",t[t.ACCESSIBILITY=16]="ACCESSIBILITY",t[t.LOCALIZATION=32]="LOCALIZATION",t[t.CUSTOMIZATION=64]="CUSTOMIZATION",t[t.ALL=126]="ALL"}(xe||(xe={}));var ve=Object.freeze({__proto__:null,get APP_SECTION(){return me},get NODE_RESOURCE(){return be},get NODE_PROCEDURE(){return xe}});const ye=squared.lib,{BOX_MARGIN:Se,BOX_PADDING:Ee,BOX_POSITION:_e}=ye.css,{isTextNode:ke}=ye.dom,{equal:we}=ye.math,{XML:Te}=ye.regex,{getElementAsNode:Ce}=ye.session,{cloneObject:Ae,convertWord:Ie,hasBit:Re,isArray:Pe,iterateArray:Be,safeNestedMap:Me,searchObject:Ne,spliceArray:Le,withinRange:We}=ye.util,Fe=Array.from(et.keys()),Oe=["position","display","verticalAlign","float","clear","zIndex"],De=/^inline-/;function He(t={},e,i,n){const{floating:s,pageFlow:o,lineBreak:r,excluded:a}=t,l=[];for(;e;){const t=Ce(e,n);if(t)if(!1!==r&&t.lineBreak||!1!==a&&t.excluded&&!t.lineBreak)l.push(t);else if(t.pageFlow&&!t.excluded){if(!1===o)break;if(l.push(t),!1!==s||!t.floating&&(t.visible||t.rendered)&&"none"!==t.display)break}e=e[i]}return l}const Xe=t=>t.naturalElements.length>0&&!t.layoutElement&&!t.tableElement,ze=t=>t.blockVertical||t.percentWidth>0,Ve=(t,e)=>t.blockDimension&&Math.ceil(t.bounds.top)>=e.bounds.bottom&&(ze(t)||ze(e)),Ue=t=>t.inlineDimension&&!t.hasPX("maxWidth")?t.percentWidth:-1/0;class je extends pe{constructor(){super(...arguments),this.alignmentType=0,this.rendered=!1,this.excluded=!1,this.originalRoot=!1,this.floatContainer=!1,this.lineBreakLeading=!1,this.lineBreakTrailing=!1,this.baselineActive=!1,this.baselineAltered=!1,this.positioned=!1,this._boxRegister={},this._excludeSection=0,this._excludeProcedure=0,this._excludeResource=0,this._childIndex=1/0,this._containerIndex=1/0,this._visible=!0,this._locked={}}static refitScreen(t,e){const{width:i,height:n}=t.localSettings.screenDimension;let{width:s,height:o}=e;if(s>i)o=Math.round(o*i/s),s=i;else{if(!(o>n))return e;s=Math.round(s*n/o),o=n}return{width:s,height:o}}static outerRegion(t){let e,i,n,s,o=1/0,r=-1/0,a=-1/0,l=1/0,c=-1/0,h=-1/0;return t.each(t=>{if(t.companion)e=t.actualRect("top"),i=t.actualRect("right"),n=t.actualRect("bottom"),s=t.actualRect("left");else{if(({top:e,right:i,bottom:n,left:s}=t.linear),t.marginRight<0){const e=i+Math.abs(t.marginRight);e>c&&(c=e)}if(t.marginBottom<0){const e=n+Math.abs(t.marginBottom);e>h&&(h=e)}}e<o&&(o=e),i>r&&(r=i),n>a&&(a=n),s<l&&(l=s)}),{top:o,right:r,bottom:a,left:l,width:Math.max(r,c)-l,height:Math.max(a,h)-o}}static baseline(t,e=!1){const i=[];for(const n of t)!n.baseline||e&&!n.textElement||n.baselineAltered||(n.naturalElements.length?n.baselineElement&&i.push(n):i.push(n));return i.length>1&&i.sort((t,e)=>{if(t.length&&0===e.length)return 1;if(e.length&&0===t.length)return-1;const i=t.baselineHeight+t.marginBottom,n=e.baselineHeight+e.marginBottom;if(!we(i,n))return i>n?-1:1;if(t.textElement&&e.textElement){if(!t.pseudoElement&&e.pseudoElement)return-1;if(t.pseudoElement&&!e.pseudoElement)return 1;if(!t.plainText&&e.plainText)return-1;if(t.plainText&&!e.plainText)return 1}else{if(t.inputElement&&e.inputElement&&t.containerType!==e.containerType)return t.containerType>e.containerType?-1:1;if(e.textElement&&t.inputElement&&e.childIndex<t.childIndex)return 1;if(t.textElement&&e.inputElement&&t.childIndex<e.childIndex)return-1}const s=t.bounds.bottom,o=e.bounds.bottom;return s>o?-1:s<o?1:0}),i[0]||null}static linearData(t,e){const i=new Set;let n=!1,s=!1;const o=t.length;if(o>1){const r=Array(o);let a=0;for(let e=0;e<o;e++){const n=t[e];n.pageFlow?(n.floating&&i.add(n.float),r[a++]=n):n.autoPosition&&(r[a++]=n)}if(a){r.length=a;const t=[r[0]];let o=1,l=1;for(let i=1;i<a;i++){const n=r[i];if(n.alignedVertically(t,e)>0?l++:o++,o>1&&l>1)break;t.push(n)}if(n=o===a,s=l===a,n&&i.size){let t=1/0,e=-1/0,i=-1/0,s=1/0;for(const n of r){const{left:o,right:r}=n.linear;switch(t=Math.min(t,o),e=Math.max(e,r),n.float){case"left":i=Math.max(i,r);break;case"right":s=Math.min(s,o)}}for(let o=0,l=0,c=0,h=0,d=0;o<a;o++){const a=r[o],{left:u,right:f}=a.linear;if(Math.floor(u)<=t&&l++,Math.ceil(f)>=e&&c++,a.floating||(u===i&&h++,f===s&&d++),0===o)continue;if(2===l||2===c||2===h||2===d){n=!1;break}const g=r[o-1];if(We(u,g.linear.left)||g.floating&&Math.ceil(a.bounds.top)>=g.bounds.bottom){n=!1;break}}}}}else o&&(s=t[0].blockStatic,n=!s);return{linearX:n,linearY:s,floated:i,cleared:e}}static partitionRows(t,e){const i=[];let n=[],s=[];const o=t.length;for(let r=0;r<o;r++){const o=t[r];let a=o;if(!o.naturalChild){if(o.nodeGroup){n.length&&i.push(n),i.push([o]),n=[],s.length=0;continue}const t=o.innerMostWrapped;t!==o&&(a=t)}0===n.length?(n.push(o),s.push(a)):a.alignedVertically(s,e)>0?(n.length&&i.push(n),n=[o],s=[a]):(n.push(o),s.push(a))}return n.length&&i.push(n),i}is(t){return this.containerType===t}of(t,...e){return this.is(t)&&e.some(t=>this.hasAlign(t))}attr(t,e,i,n=!0){let s=this["__"+t];return i?(void 0===s&&(this._namespaces.includes(t)||this._namespaces.push(t),s={},this["__"+t]=s),n&&this.lockedAttr(t,e)&&(n=!1),!n&&s[e]?i=s[e]:s[e]=i,i):(null==s?void 0:s[e])||""}unsafe(t,e){if(void 0===e)return this["_"+t];this["_"+t]=e}unset(t){delete this["_"+t]}namespace(t){return this["__"+t]||{}}delete(t,...e){const i=this["__"+t];if(i)for(const t of e)if(t.includes("*"))for(const[e]of Ne(i,t))delete i[e];else delete i[t]}lockAttr(t,e){Me(this._locked,t)[e]=!0}unlockAttr(t,e){const i=this._locked[t];i&&(i[e]=!1)}lockedAttr(t,e){var i;return!0===(null===(i=this._locked[t])||void 0===i?void 0:i[e])}render(t){this.renderParent=t,this.rendered=!0}parseUnit(t,e="width",i=!0,n){return super.parseUnit(t,e,i,n||this.localSettings.screenDimension)}parseWidth(t,e=!0){return super.parseUnit(t,"width",e,this.localSettings.screenDimension)}parseHeight(t,e=!0){return super.parseUnit(t,"height",e,this.localSettings.screenDimension)}renderEach(t){const e=this.renderChildren,i=e.length;for(let n=0;n<i;n++){const i=e[n];i.visible&&t(i,n,e)}return this}hide(t){let e,i;t&&({remove:e,replacement:i}=t),e&&this.removeTry(i),this.rendered=!0,this.visible=!1}inherit(t,...e){for(const i of e)switch(i){case"base":{this._documentParent=t.documentParent,this._bounds=t.bounds,this._linear=t.linear,this._box=t.box,-1===this.depth&&(this.depth=t.depth);const e=t.actualParent;e&&(this.actualParent=e,this.dir=e.dir);break}case"initial":Ae(t.unsafe("initial"),this.initial);break;case"alignment":{const e=this._styleMap;for(const i of Oe)e[i]=t.css(i);if(!this.positionStatic)for(const i of _e)t.hasPX(i)&&(e[i]=t.css(i));Object.assign(this.autoMargin,t.autoMargin),this.autoPosition=t.autoPosition;break}case"styleMap":this.cssCopyIfEmpty(t,...Object.keys(t.unsafe("styleMap")));break;case"textStyle":this.cssApply(t.textStyle),this.fontSize=t.fontSize;break;case"boxStyle":{const{backgroundColor:e,backgroundImage:i}=t;this.cssApply(t.cssAsObject("backgroundRepeat","backgroundSize","backgroundPositionX","backgroundPositionY","backgroundClip","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius")),this.cssApply({backgroundColor:e,backgroundImage:i,border:"inherit",borderRadius:"inherit"}),this.unsetCache("borderTopWidth","borderBottomWidth","borderRightWidth","borderLeftWidth"),this.setCacheValue("backgroundColor",e),this.setCacheValue("backgroundImage",i),t.setCacheValue("backgroundColor",""),t.setCacheValue("backgroundImage",""),t.cssApply({backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"none",border:"initial",borderRadius:"initial"});const n=t.visibleStyle;n.background=!1,n.backgroundImage=!1,n.backgroundRepeatX=!1,n.backgroundRepeatY=!1,n.backgroundColor=!1,n.borderWidth=!1;break}}}addAlign(t){this.hasAlign(t)||(this.alignmentType|=t)}removeAlign(t){this.hasAlign(t)&&(this.alignmentType^=t)}hasAlign(t){return Re(this.alignmentType,t)}hasResource(t){return!Re(this._excludeResource,t)}hasProcedure(t){return!Re(this._excludeProcedure,t)}hasSection(t){return!Re(this._excludeSection,t)}exclude(t){const{resource:e,procedure:i,section:n}=t;e&&!Re(this._excludeResource,e)&&(this._excludeResource|=e),i&&!Re(this._excludeProcedure,i)&&(this._excludeProcedure|=i),n&&!Re(this._excludeSection,n)&&(this._excludeSection|=n)}setExclusions(){var t;if(this.naturalElement){const e=this._element.dataset,i=(null===(t=this.actualParent)||void 0===t?void 0:t.dataset)||{};if(Object.keys(e).length||Object.keys(i).length){const t=(t,n)=>{let s=e[t]||"",o=0;const r=i[t+"Child"];if(r&&(s+=(""!==s?"|":"")+r),""!==s)for(const t of s.split(/\s*\|\s*/)){const e=n[t.toUpperCase()]||0;e>0&&!Re(o,e)&&(o|=e)}return o};this.exclude({resource:t("excludeResource",be),procedure:t("excludeProcedure",xe),section:t("excludeSection",me)})}}}appendTry(t,e,i=!0){const n=this.children,s=n.length;for(let i=0;i<s;i++){const s=n[i];if(s===t||s===t.innerMostWrapped||s===t.outerMostWrapper)return n[i]=e,e.parent=this,e.containerIndex=t.containerIndex,!0}return!!i&&(e.parent=this,!0)}removeTry(t,e){const i=this.renderParent;if(i){const{renderTemplates:n,renderChildren:s}=i;if(n){const o=s.findIndex(t=>t===this);if(-1!==o){const r=n[o];if((null==r?void 0:r.node)===this){if(!t)return e&&e.bind(this,t)(),n.splice(o,1),s.splice(o,1),this.renderParent=void 0,!0;{const r=t.renderParent;if(r===this){const a=r.renderTemplates;if(a){const l=a.findIndex(e=>(null==e?void 0:e.node)===t);if(-1!==l&&r.renderChildren.splice(l,1),i.appendTry(this,t,!1))return e&&e.bind(this,t)(),n[o]=a[l],t.renderParent=i,s[o]=t,this.documentRoot&&(t.documentRoot=!0,this.documentRoot=!1),this.renderParent=void 0,!0}}}}}}}return!1}sort(t){return t?super.sort(t):this.children.sort((t,e)=>t.containerIndex<e.containerIndex?-1:1),this}alignedVertically(t,e,i){if(this.lineBreak)return 2;if(this.autoPosition&&Pe(t))return t[t.length-1].blockStatic?1:0;if(!this.pageFlow)return 1;{const n=this.floating;if(Pe(t)){const s=t[t.length-1];if(e){if(e.size&&(e.has(this)||this.siblingsLeading.some(t=>t.excluded&&e.has(t))))return 4;if(n&&s.floating){if(i&&this.float===s.float||Math.floor(this.bounds.top)===Math.floor(s.bounds.top))return 0;if(Math.ceil(this.bounds.top)>=s.bounds.bottom){if(t.every(t=>t.inlineDimension)){const e=this.actualParent;if(e&&e.ascend({condition:t=>!t.inline&&t.hasWidth,error:t=>t.layoutElement,startSelf:!0})){if(e.naturalChildren.filter(t=>t.visible&&t.pageFlow).length===t.length+1){const i=t=>t.actualWidth+Math.max(t.marginLeft,0)+t.marginRight;let n=e.box.width-i(this);for(const e of t)n-=i(e);if(n>=0)return 0}}}return 6}}else{if(this.blockStatic&&t.reduce((t,e)=>t+(e.floating?e.linear.width:-1/0),0)/this.actualParent.box.width>=.8)return 7;if(t.every(t=>t.inlineDimension&&Math.ceil(this.bounds.top)>=t.bounds.bottom))return 5;if(void 0!==i){if(n&&!i&&s.blockStatic)return 0;if(!De.test(this.display)){let{top:n,bottom:s}=this.bounds;if(this.textElement&&e.size&&t.some(t=>e.has(t))&&t.some(t=>Math.floor(n)<t.bounds.top&&Math.ceil(s)>t.bounds.bottom))return 7;if(t[0].floating){if(t.length>1){const e=t[0].float;let o=-1/0,r=0;for(const i of t)i.floating&&(i.float===e&&(o=Math.max(i.actualRect("bottom","bounds"),o)),r+=i.linear.width);if(Math.ceil(r)>=this.actualParent.box.width)return 5;if(this.multiline){if(this.styleText){const t=this.textBounds;t&&(s=t.bottom)}const t=s-o;n=t<=0||t/(s-n)<.5?-1/0:1/0}else n=Math.ceil(n);return n<Math.floor(o)?i?0:5:i?5:0}if(!i)return 5}}}}}if(Ve(this,s))return 3;{const e=Ue(this);if(e>0&&t.reduce((t,e)=>t+Ue(e),e)>1)return 8}}for(const s of this.siblingsLeading){if(s.lineBreak)return 2;if(s.blockStatic||s.autoMargin.leftRight||(n&&0===s.childIndex||!1===i)&&s.plainText&&s.multiline)return 1;if((this.blockStatic||"table"===this.display)&&(!s.floating||(null==e?void 0:e.has(s))))return 1;if(s.floating){if("left"===s.float){if(this.autoMargin.right)return 5}else if(this.autoMargin.left)return 5;if(this.floatContainer&&this.some(t=>t.floating&&Math.ceil(t.bounds.top)>=s.bounds.bottom))return 5}if((null==e?void 0:e.has(s))&&(null==t?void 0:t[0])!==s)return 4;if(Ve(this,s))return 3}}return 0}previousSiblings(t={}){var e,i,n;return He(t,this.nodeGroup?null===(i=null===(e=this.firstChild)||void 0===e?void 0:e.element)||void 0===i?void 0:i.previousSibling:null===(n=this.innerMostWrapped.element)||void 0===n?void 0:n.previousSibling,"previousSibling",this.sessionId)}nextSiblings(t={}){var e,i,n;return He(t,this.nodeGroup?null===(i=null===(e=this.firstChild)||void 0===e?void 0:e.element)||void 0===i?void 0:i.nextSibling:null===(n=this.innerMostWrapped.element)||void 0===n?void 0:n.nextSibling,"nextSibling",this.sessionId)}modifyBox(t,e,i=!0){if(0!==e){const n=et.get(t);if(n){const s=this._boxRegister[t];if(void 0===e)if(s){const e=this[n]||s.getBox(t)[1];e>0&&s.modifyBox(t,-e,i)}else this._boxReset[n]=1;else if(s)s.modifyBox(t,e,i);else{const t=this._boxAdjustment;!i&&(0===this._boxReset[n]?this[n]:0)+t[n]+e<=0?(t[n]=0,this[n]>=0&&e<0&&(this._boxReset[n]=1)):t[n]+=e}}}}getBox(t){const e=et.get(t);return e?[this._boxReset[e],this._boxAdjustment[e]]:[NaN,0]}setBox(t,e){const i=et.get(t);if(i){const n=this._boxRegister[t];if(n)n.setBox(t,e);else{const{reset:t,adjustment:n}=e,s=this._boxReset,o=this._boxAdjustment;if(void 0!==t&&(s[i]=t),void 0!==n){let t=o[i];e.accumulate?t+=n:t=n,!1===e.negative&&(0===s[i]?this[i]:0)+t<=0&&(t=0,this[i]>=0&&t<0&&(s[i]=1)),o[i]=t}else 1!==t||this.naturalChild||(o[i]=0)}}}resetBox(t,e){const i=this._boxReset,n=(n,s)=>{for(let o=0;o<4;o++){const r=Fe[o+s];if(Re(t,r)){const t=n[o];if(i[t]=1,e){const i=this.registerBox(r);if(i)i.resetBox(r,e);else{if(this.naturalChild){const i=this[t];i>=0&&e.modifyBox(r,i)}this.transferBox(r,e)}}}}};Re(30,t)&&n(Se,0),Re(480,t)&&n(Ee,4)}transferBox(t,e){const i=this._boxAdjustment,n=(n,s)=>{for(let o=0;o<4;o++){const r=Fe[o+s];if(Re(t,r)){const t=this.registerBox(r);if(t)t.transferBox(r,e);else{const t=n[o],s=i[t];0!==s&&(e.modifyBox(r,s,!1),i[t]=0),this.registerBox(r,e)}}}};Re(30,t)&&n(Se,0),Re(480,t)&&n(Ee,4)}registerBox(t,e){const i=this._boxRegister;for(e?i[t]=e:e=i[t];e;){const i=e.unsafe("boxRegister")[t];if(!i)break;e=i}return e}actualPadding(t,e){if(e>0){if(this.layoutElement){if(this.gridElement)switch(this.css("alignContent")){case"space-around":case"space-evenly":return 0}}else{const i=this.innerMostWrapped;if(i!==this){if(!i.naturalChild)return e;if(0===i.getBox("paddingTop"===t?32:128)[0])return 0}if(i.naturalChild)return Xe(i)&&function t(e,i,n){let s=!1;for(const o of e){if(o.blockStatic)return!1;if(o.inlineStatic){if(o.has("lineHeight")&&o.lineHeight>o.bounds.height)return!1;if(o[i]>=n)s=!0;else if(Xe(o)){if(!t(o.naturalChildren,i,n))return!1;s=!0}}}return s}(i.naturalChildren,t,e)?0:e}return e}return 0}actualBoxWidth(t){if(t||(t=this.box.width),this.pageFlow&&!this.documentRoot){let e=0,i=0,n=this.actualParent;for(;n;){if(n.hasPX("width",!1)||!n.pageFlow)return t;if(e+=Math.max(n.marginLeft,0)+n.borderLeftWidth+n.paddingLeft,i+=n.paddingRight+n.borderRightWidth+n.marginRight,n.documentRoot)break;n=n.actualParent}const s=this.localSettings.screenDimension.width-e-i;if(s>0)return Math.min(t,s)}return t}cloneBase(t){t.localSettings=this.localSettings,t.alignmentType=this.alignmentType,t.containerName=this.containerName,t.depth=this.depth,t.visible=this.visible,t.excluded=this.excluded,t.rendered=this.rendered,t.childIndex=this.childIndex,t.containerIndex=this.containerIndex,t.inlineText=this.inlineText,t.lineBreakLeading=this.lineBreakLeading,t.lineBreakTrailing=this.lineBreakTrailing,t.actualParent=this.actualParent,t.documentParent=this.documentParent,t.documentRoot=this.documentRoot,t.renderParent=this.renderParent,this.length&&t.retain(this.duplicate()),t.inherit(this,"initial","base","alignment","styleMap","textStyle"),Object.assign(t.unsafe("cached"),this._cached)}unsetCache(...t){if(t.length){const e=this._cached;for(const i of t)switch(i){case"top":case"right":case"bottom":case"left":e.autoPosition=void 0;break;case"lineHeight":e.baselineHeight=void 0}}super.unsetCache(...t)}css(t,e,i=!1){return arguments.length>=2&&(e?this._styleMap[t]=e:delete this._styleMap[t],i&&this.unsetCache(t)),this._styleMap[t]||this.styleElement&&this.style[t]||""}cssApply(t,e=!1){return Object.assign(this._styleMap,t),e&&this.unsetCache(...Object.keys(t)),this}cssSet(t,e,i=!0){return super.css(t,e,i)}setCacheValue(t,e){this._cached[t]=e}get element(){return this._element||!!this.innerWrapped&&this.innerMostWrapped.unsafe("element")||null}set naturalChild(t){this._cached.naturalChild=t}get naturalChild(){var t;let e=this._cached.naturalChild;return void 0===e&&(e=!!(null===(t=this._element)||void 0===t?void 0:t.parentElement),this._cached.naturalChild=e),e}get pseudoElement(){var t;return"__squared.pseudo"===(null===(t=this._element)||void 0===t?void 0:t.className)}set documentParent(t){this._documentParent=t}get documentParent(){return this._documentParent||this.absoluteParent||this.actualParent||this.parent||this}set containerName(t){this._cached.containerName=t.toUpperCase()}get containerName(){let t=this._cached.containerName;if(void 0===t){const e=this.element;t=e?ke(e)?"PLAINTEXT":"INPUT"===e.tagName?"INPUT_"+Ie(e.type,!0).toUpperCase():e.tagName.toUpperCase():"",this._cached.containerName=t}return t}get layoutHorizontal(){return this.hasAlign(8)}get layoutVertical(){if(this.hasAlign(16))return!0;if(this.naturalChild){const t=this.naturalChildren;return 1===t.length&&t[0].blockStatic}return!1}get nodeGroup(){return!1}set renderAs(t){this.rendered||!1!==(null==t?void 0:t.rendered)||(this._renderAs=t)}get renderAs(){return this._renderAs}get blockStatic(){return super.blockStatic||this.hasAlign(64)&&!this.floating&&this.pageFlow}get rightAligned(){return super.rightAligned||this.hasAlign(2048)}set autoPosition(t){this._cached.autoPosition=t}get autoPosition(){let t=this._cached.autoPosition;if(void 0===t){if(this.pageFlow)t=!1;else{const{top:e,right:i,bottom:n,left:s}=this._styleMap;t=!(e&&"auto"!==e||s&&"auto"!==s||i&&"auto"!==i||n&&"auto"!==n)}this._cached.autoPosition=t}return t}set textContent(t){this._cached.textContent=t}get textContent(){let t=this._cached.textContent;return void 0===t&&(t=this.naturalChild&&this._element.textContent||"",this._cached.textContent=t),t}get positiveAxis(){let t=this._cached.positiveAxis;return void 0===t&&(t=(!this.positionRelative||this.positionRelative&&this.top>=0&&this.left>=0&&(this.right<=0||this.hasPX("left"))&&(this.bottom<=0||this.hasPX("top")))&&this.marginTop>=0&&this.marginLeft>=0&&this.marginRight>=0,this._cached.positiveAxis=t),t}get leftTopAxis(){let t=this._cached.leftTopAxis;if(void 0===t){switch(this.cssInitial("position")){case"absolute":t=this.absoluteParent===this.documentParent;break;case"fixed":t=!0;break;default:t=!1}this._cached.leftTopAxis=t}return t}set overflow(t){0!==t&&16!==t&&8!==t&&24!==t||(Re(this.overflow,64)&&(t|=64),this._cached.overflow=t)}get overflow(){return super.overflow}get baselineElement(){let t=this._cached.baselineElement;if(void 0===t){if(this.baseline){const e=this.naturalChildren;t=e.length?e.every(t=>t.baselineElement&&0===t.length):this.inlineText&&this.textElement||this.plainText&&!this.multiline||this.inputElement||this.imageElement||this.svgElement}else t=!1;this._cached.baselineElement=t}return t}set multiline(t){this._cached.multiline=t,this._cached.baselineElement=void 0}get multiline(){return super.multiline}set visible(t){this._visible=t}get visible(){return this._visible}set controlName(t){this.rendered&&void 0!==this._controlName||(this._controlName=t)}get controlName(){return this._controlName||""}set actualParent(t){this._cached.actualParent=t}get actualParent(){let t=this._cached.actualParent;return void 0===t&&(t=super.actualParent,null===t&&(t=this.innerMostWrapped.actualParent),this._cached.actualParent=t),t}set siblingsLeading(t){this._siblingsLeading=t}get siblingsLeading(){return this._siblingsLeading||this.previousSiblings()}set siblingsTrailing(t){this._siblingsTrailing=t}get siblingsTrailing(){return this._siblingsTrailing||this.nextSiblings()}get previousSibling(){const t=this.actualParent;if(t){const e=t.naturalChildren,i=e.indexOf(this);if(-1!==i)for(let t=i-1;t>=0;t--){const i=e[t];if(i&&(!i.excluded||i.lineBreak))return i}}return null}get nextSibling(){const t=this.actualParent;if(t){const e=t.naturalChildren,i=e.indexOf(this);if(-1!==i){const t=e.length;for(let n=i+1;n<t;n++){const t=e[n];if(t&&(!t.excluded||t.lineBreak))return t}}}return null}get firstChild(){return this.naturalChildren[0]||null}get lastChild(){const t=this.naturalChildren;return t[t.length-1]||null}get onlyChild(){var t,e,i;return 1===(null!==(e=null===(t=this.renderParent)||void 0===t?void 0:t.renderChildren.length)&&void 0!==e?e:null===(i=this.parent)||void 0===i?void 0:i.length)&&!this.documentRoot}set childIndex(t){this._childIndex=t}get childIndex(){let t=this._childIndex;if(t===1/0){let e=this.innerWrapped;if(e)do{const i=e.childIndex;if(i!==1/0){t=i,this._childIndex=t;break}e=e.innerWrapped}while(e);else{const e=this._element;if(e){const i=e.parentElement;i&&Be(i.childNodes,(i,n)=>{if(i===e)return t=n,this._childIndex=n,!0})}}}return t}set containerIndex(t){this._containerIndex=t}get containerIndex(){let t=this._containerIndex;if(t===1/0){let e=this.innerWrapped;for(;e;){const i=e.containerIndex;if(i!==1/0){t=i,this._containerIndex=t;break}e=e.innerWrapped}}return t}get textEmpty(){let t=this._cached.textEmpty;if(void 0===t){if(!this.styleElement||this.imageElement||this.svgElement)t=!1;else{const e=this.textContent;t=""===e||!this.preserveWhiteSpace&&""===e.trim()}this._cached.textEmpty=t}return t}get innerMostWrapped(){if(this.naturalChild)return this;let t=this.innerWrapped;for(;t;){const e=t.innerWrapped;if(!e)break;t=e}return t||this}get outerMostWrapper(){let t=this.outerWrapper;for(;t;){const e=t.outerWrapper;if(!e)break;t=e}return t||this}get preserveWhiteSpace(){let t=this._cached.whiteSpace;if(void 0===t){const e=this.css("whiteSpace");t="pre"===e||"pre-wrap"===e,this._cached.whiteSpace=t}return t}get outerExtensionElement(){if(this.naturalChild){let t=this._element.parentElement;for(;t;){if(t.dataset.use)return t;t=t.parentElement}}return null}set fontSize(t){this._fontSize=t}get fontSize(){return super.fontSize}get extensions(){let t=this._cached.extensions;if(void 0===t){const e=this.dataset.use;t=e?Le(e.split(Te.SEPARATOR),t=>""===t):[],this._cached.extensions=t}return t}}const{hasBit:Ge}=squared.lib.util;class qe extends squared.lib.base.Container{constructor(t,e,i=0,n=0,s){super(s),this.parent=t,this.node=e,this.containerType=i,this.alignmentType=n,this.rowCount=0,this.columnCount=0,this.renderType=0,this.renderIndex=-1}static create(t){const{parent:e,node:i,containerType:n,alignmentType:s,children:o,itemCount:r,rowCount:a,columnCount:l}=t,c=new qe(e,i,n,s,o);return r&&(c.itemCount=r),a&&(c.rowCount=a),l&&(c.columnCount=l),c}init(){const t=this.length;if(t>1){const t=je.linearData(this.children);this._floated=t.floated,this._linearX=t.linearX,this._linearY=t.linearY}else{if(!t)return;this._linearY=this.item(0).blockStatic,this._linearX=!this._linearY}this._initialized=!0}setContainerType(t,e){this.containerType=t,e&&this.add(e)}hasAlign(t){return Ge(this.alignmentType,t)}add(t){return Ge(this.alignmentType,t)||(this.alignmentType|=t),this.alignmentType}addRender(t){return Ge(this.renderType,t)||(this.renderType|=t),this.renderType}delete(t){return Ge(this.alignmentType,t)&&(this.alignmentType^=t),this.alignmentType}retain(t){return super.retain(t),this.init(),this}set itemCount(t){this._itemCount=t}get itemCount(){var t;return null!==(t=this._itemCount)&&void 0!==t?t:this.length}get linearX(){var t;return this._initialized||this.init(),null===(t=this._linearX)||void 0===t||t}get linearY(){var t;return this._initialized||this.init(),null!==(t=this._linearY)&&void 0!==t&&t}get floated(){return this._initialized||this.init(),this._floated||new Set}set type(t){this.setContainerType(t.containerType,t.alignmentType);const e=t.renderType;e&&this.addRender(e)}get singleRowAligned(){let t=this._singleRow;if(void 0===t){const e=this.length;if(e){if(t=!0,e>1){let e=1/0;for(const i of this.children){if(i.blockStatic||i.multiline||Math.ceil(i.bounds.top)>=e){t=!1;break}e=i.bounds.bottom}}this._singleRow=t}else t=!1}return t}get unknownAligned(){return this.length>1&&!this.linearX&&!this.linearY}}const Ye=squared.lib,{BOX_POSITION:$e,TEXT_STYLE:Qe,convertListStyle:Ke,formatPX:Je,getStyle:Ze,insertStyleSheetRule:ti,resolveURL:ei}=Ye.css,{getNamedItem:ii,isTextNode:ni,removeElementsByClassName:si}=Ye.dom,{maxArray:oi}=Ye.math,{convertFloat:ri,convertWord:ai,flatArray:li,fromLastIndexOf:ci,hasBit:hi,isString:di,iterateArray:ui,partitionArray:fi,safeNestedArray:gi,safeNestedMap:pi,trimBoth:mi,trimString:bi}=Ye.util,{CSS:xi,XML:vi}=Ye.regex,{getElementCache:yi,getPseudoElt:Si,setElementCache:Ei}=Ye.session,{isPlainText:_i}=Ye.xml,ki=/\s*(?:attr\(([^)]+)\)|(counter)\(([^,)]+)(?:, ([a-z-]+))?\)|(counters)\(([^,]+), "([^"]*)"(?:, ([a-z-]+))?\)|"([^"]+)")\s*/g;function wi(t,e,i,n,s,o){pi(t,i)[n]=o,e.style.setProperty(n,s)}function Ti(t,e,i=1){if("none"!==t){const n=/\s*([^\-\d][^\-\d]?[^ ]*) (-?\d+)\s*/g;let s;for(;null!==(s=n.exec(t));)if(s[1]===e)return parseInt(s[2]);return i}}function Ci(t,e,i,n,s){var o;const r=null===(o=yi(t,"styleMap"+i,n))||void 0===o?void 0:o.counterIncrement;return r?Ti(r,e,s):void 0}function Ai(t,e,i){return!i.length&&(e.push(t),!0)}function Ii(t,e,i){return!e.length&&(i.push(t),!0)}function Ri(t,e){if(t){const i=t.split(vi.SEPARATOR),n=[],s=[];for(const t of e){const e=i.indexOf(t.name);-1!==e?n[e]=t:s.push(t)}if(n.length)return li(n).concat(s)}return e}function Pi(t){let e=0,i=!0,n=!0;const s=t.length;for(let e=0;e<s;e++){const s=t[e];if(s.floating||(i=!1),s.rightAligned||(n=!1),!i&&!n)break}return i&&(e|=512),n&&(e|=2048),e}const Bi=t=>!t.blockStatic&&!0!==t.autoMargin.horizontal&&!(t.blockDimension&&"100%"===t.css("width"))&&(!(t.plainText&&t.multiline)||t.floating),Mi=t=>t.textElement&&(t.blockStatic||t.multiline),Ni=(t,e)=>t.positionRelative?t.hasPX("left")?t.left*(e?1:-1):t.right*(e?-1:1):0;const Li=squared.lib,{isUserAgent:Wi,isWinEdge:Fi}=Li.client,{BOX_BORDER:Oi,BOX_PADDING:Di,formatPX:Hi,getStyle:Xi,isLength:zi,isPercent:Vi}=Li.css,{isTextNode:Ui,withinViewport:ji}=Li.dom,{capitalize:Gi,convertFloat:qi,flatArray:Yi,iterateArray:$i,safeNestedArray:Qi}=Li.util,{actualClientRect:Ki,getElementCache:Ji,setElementCache:Zi}=Li.session,{pushIndent:tn,pushIndentArray:en}=Li.xml;function nn(t){switch(t.getPropertyValue("position")){case"absolute":case"fixed":return!0}return!1}const sn=(t,e)=>parseInt(t.getPropertyValue(e));const on=squared.lib,{hasComputedStyle:rn}=on.css,{includes:an}=on.util;class ln extends q{constructor(t,e,i,n=[]){super(t,e,i),this.eventOnly=!1,this.documentBase=!1,this.cascadeAll=!1,this.removeIs=!1,this.tagNames=n,this._isAll=0===n.length}static findNestedElement(t,e){if(t&&rn(t)){const i=t.children,n=i.length;for(let t=0;t<n;t++){const n=i[t];if(an(n.dataset.use,e))return n}}return null}condition(t,e){return t.dataset.use?this.included(t.element):!this._isAll}is(t){return this._isAll||this.tagNames.includes(t.tagName)}included(t){return an(t.dataset.use,this.name)}processNode(t,e){}processChild(t,e){}addDescendant(t){const e=this.application.session.extensionMap,i=t.id,n=e.get(i);n?n.includes(this)||n.push(this):e.set(i,[this])}postBaseLayout(t){}postConstraints(t){}postOptimize(t){}afterBaseLayout(){}afterConstraints(){}afterResources(){}beforeBaseLayout(){}beforeCascade(){}afterFinalize(){}set application(t){this._application=t,this._controller=t.controllerHandler,this._resource=t.resourceHandler,this._cache=t.session.cache,this._cacheProcessing=t.processing.cache}get application(){return this._application}get controller(){return this._controller}get resource(){return this._resource}get cache(){return this._cache}get cacheProcessing(){return this._cacheProcessing}}const{isLength:cn}=squared.lib.css;const hn=squared.lib,{isUserAgent:dn}=hn.client,{parseColor:un}=hn.color,{BOX_BORDER:fn,calculate:gn,convertAngle:pn,formatPX:mn,getBackgroundPosition:bn,getInheritedStyle:xn,isCalc:vn,isLength:yn,isParentStyle:Sn,isPercent:En,parseAngle:_n}=hn.css,{cos:kn,equal:wn,hypotenuse:Tn,offsetAngleX:Cn,offsetAngleY:An,relativeAngle:In,sin:Rn,triangulate:Pn,truncateFraction:Bn}=hn.math,{CHAR:Mn,ESCAPE:Nn,STRING:Ln,XML:Wn}=hn.regex,{getElementAsNode:Fn}=hn.session,{convertCamelCase:On,convertFloat:Dn,hasValue:Hn,isEqual:Xn,isNumber:zn,isString:Vn,iterateArray:Un,trimEnd:jn,trimStart:Gn}=hn.util,{STRING_SPACE:qn,STRING_TABSPACE:Yn}=hn.xml,$n=`((?:rgb|hsl)a?\\(\\d+, \\d+%?, \\d+%?(?:, [\\d.]+)?\\)|#[A-Za-z\\d]{3,8}|[a-z]+)\\s*(${Ln.LENGTH_PERCENTAGE}|${Ln.CSS_ANGLE}|(?:${Ln.CSS_CALC}(?=,)|${Ln.CSS_CALC}))?,?\\s*`,Qn=/^url/,Kn=/\u00A0/g,Jn=RegExp(`(?:initial|url\\([^)]+\\)|(repeating)?-?(linear|radial|conic)-gradient\\(((?:to [a-z ]+|(?:from )?-?[\\d.]+(?:deg|rad|turn|grad)|(?:circle|ellipse)?\\s*(?:closest-side|closest-corner|farthest-side|farthest-corner)?)?(?:\\s*(?:(?:-?[\\d.]+(?:[a-z%]+)?\\s*)+)?(?:at [\\w %]+)?)?),?\\s*((?:${$n})+)\\))`,"g"),Zn=RegExp($n,"g"),ts=/\n([^\S\n]*)?$/;function es(t,e,i){const{width:n,height:s}=e.dimension,o=[];let r,a=!1,l=!0,c=1;switch(e.type){case"linear":{const{repeating:t,angle:i}=e;switch(a=t,i){case 0:case 180:case 360:r=s,l=!1;break;case 90:case 270:r=n;break;default:r=Math.abs(n*Rn(i-180))+Math.abs(s*kn(i-180)),l=n>=s}break}case"radial":{const{repeating:i,radiusExtent:n,radius:s}=e;l=t.actualWidth>=t.actualHeight,a=i,c=n/s,r=s;break}case"conic":r=Math.min(n,s);break;default:return o}let h,d=0;for(;null!==(h=Zn.exec(i));){const i=un(h[1],1,!0);if(i){let n=-1;if("conic"===e.type){const t=h[3],e=h[4];t&&e&&(n=pn(t,e)/360)}else{const e=h[2];En(e)?n=parseFloat(e)/100:yn(e)?n=(l?t.parseWidth(e,!1):t.parseHeight(e,!1))/r:vn(e)&&(n=gn(h[6],r,t.fontSize)/r),a&&-1!==n&&(n*=c)}0===o.length&&(-1===n?n=0:n>0&&o.push({color:i,offset:0})),-1!==n&&(n=Math.max(d,n),d=n),o.push({color:i,offset:n})}}const u=o.length,f=o[u-1];-1===f.offset&&(f.offset=1);let g=0;for(let t=0;t<u;t++){const e=o[t];if(-1===e.offset)if(0===t)e.offset=0;else{for(let i=t+1,n=2;i<u-1;i++,n++){const t=o[i];if(-1!==t.offset){e.offset=(g+t.offset)/n;break}}-1===e.offset&&(e.offset=g+f.offset/(u-1))}g=e.offset}if(a){if(g<100)t:{const t=o.slice(0);let e=g;for(;g<100;){for(const i of t)if(g=Math.min(e+i.offset,1),o.push(Object.assign(Object.assign({},i),{offset:g})),1===g)break t;e=g}}}else g<1&&o.push(Object.assign(Object.assign({},o[u-1]),{offset:1}));return Zn.lastIndex=0,o}function is(t,e=0){if(""!==(t=t.trim())){let e=_n(t);return e<0&&(e+=360),e}return e}function ns(t,e){var i,n,s;let o=!1;switch(e=e.replace(Kn,qn),t.css("whiteSpace")){case"nowrap":e=e.replace(/\n/g," "),o=!0;break;case"pre":case"pre-wrap":{!1===(null===(i=t.renderParent)||void 0===i?void 0:i.layoutVertical)&&(e=e.replace(/^\s*\n/,""));const n=cs.checkPreIndent(t);if(n){const[t,i]=n;""!==t&&(i.textContent=t+i.textContent),e=e.replace(ts,"")}return[e=e.replace(/\n/g,"\\n").replace(/\t/g,Yn).replace(/\s/g,qn),!0,!1]}case"pre-line":return[e=e.replace(/\n/g,"\\n").replace(/[ ]+/g," "),!0,!1]}return t.onlyChild&&t.htmlElement?e=e.replace(Mn.LEADINGSPACE,"").replace(Mn.TRAILINGSPACE,""):((null===(n=t.previousSibling)||void 0===n?void 0:n.blockStatic)&&(e=e.replace(Mn.LEADINGSPACE,"")),(null===(s=t.nextSibling)||void 0===s?void 0:s.blockStatic)&&(e=e.replace(Mn.TRAILINGSPACE,""))),[e,o,!0]}function ss(t,e,i,n){if(i){const s=i.split(Wn.SEPARATOR);return cs.getBackgroundSize(t,s[e%s.length],n)}}function os(t,e,i,n){const s=t.css(n[0])||"none";if("none"!==s){let o=mn("outline"!==i?t[n[1]]:Dn(t.style[n[1]]));if("0px"!==o){let r=t.css(n[2])||"initial";switch(r){case"initial":r="rgb(0, 0, 0)";break;case"inherit":case"currentcolor":case"currentColor":r=xn(t.element,n[2])}"2px"!==o||"inset"!==s&&"outset"!==s||(o="1px"),r=un(r,1,!0),r&&(e[i]={width:o,style:s,color:r})}}}function rs(t,e,i){let n=t.css(i);switch("initial"===n&&(n="backgroundClip"===i?"border-box":"padding-box"),n){case"border-box":return!0;case"padding-box":e[i]={top:t.borderTopWidth,right:t.borderRightWidth,bottom:t.borderBottomWidth,left:t.borderLeftWidth};break;case"content-box":e[i]={top:t.borderTopWidth+t.paddingTop,right:t.borderRightWidth+t.paddingRight,bottom:t.borderBottomWidth+t.paddingBottom,left:t.borderLeftWidth+t.paddingLeft}}return!1}const as=t=>t.replace(/&/g,"&amp;"),ls=t=>Vn(t)?t.includes("at ")?/(.+?)?\s*at (.+?)\s*$/.exec(t):[t,t]:null;class cs extends c{static generateId(t,e,i=1){const n=e;let s=i;1===i&&(e+="_"+s);const o=this.ASSETS.ids,r=o.get(t)||[];for(;;){if(!r.includes(e)){r.push(e);break}e=`${n}_${++s}`}return o.set(t,r),e}static insertStoredAsset(t,e,i){const n=cs.STORED[t];if(n&&Hn(i)){let s=this.getStoredName(t,i);if(""===s){zn(e)&&(e="__"+e);let t=0;do{if(s=e+(t>0?"_"+t:""),!n.has(s)){n.set(s,i);break}}while(++t)}return s}return""}static getOptionArray(t,e=!1){let i=[],n=!0;return Un(t.children,t=>{if(!t.disabled||e)switch(t.tagName){case"OPTION":{const e=t.text.trim()||t.value.trim();""!==e&&(n&&!zn(e)&&(n=!1),i.push(e));break}case"OPTGROUP":{const[s,o]=this.getOptionArray(t,e);s?(i=i.concat(s),n=!1):o&&(i=i.concat(o));break}}}),n?[void 0,i]:[i]}static isBackgroundVisible(t){return!!t&&("backgroundImage"in t||"borderTop"in t||"borderRight"in t||"borderBottom"in t||"borderLeft"in t)}static parseBackgroundImage(t,e,i){var n,s;if(""!==e){const o=[];let r,a=0;for(;null!==(r=Jn.exec(e));){const e=r[0];if(Qn.test(e)||"initial"===e)o.push(e);else{const e="repeating"===r[1],l=r[2],c=r[3],h=ss(t,a,t.css("backgroundSize"),i),d=je.refitScreen(t,h||t.actualDimension);let u;switch(l){case"linear":{const{width:i,height:n}=d;let s=180;switch(c){case"to top":s=360;break;case"to right top":s=45;break;case"to right":s=90;break;case"to right bottom":s=135;break;case"to bottom":break;case"to left bottom":s=225;break;case"to left":s=270;break;case"to left top":s=315;break;default:c&&(s=is(c,180)||360)}let o=Bn(Cn(s,i)),a=Bn(An(s,n));if(o!==i&&a!==n&&!wn(Math.abs(o),Math.abs(a))){let t;t=s<=90?In({x:0,y:n},{x:i,y:0}):s<=180?In({x:0,y:0},{x:i,y:n}):s<=270?In({x:0,y:0},{x:-i,y:n}):In({x:0,y:n},{x:-i,y:0});const e=Math.abs(t-s);o=Bn(Cn(s,Pn(e,90-e,Tn(i,n))[1])),a=Bn(An(s,Pn(90,90-s,o)[0]))}const h={type:l,repeating:e,dimension:d,angle:s,angleExtent:{x:o,y:a}};h.colorStops=es(t,h,r[4]),u=h;break}case"radial":{const o=ls(c),a=bn((null==o?void 0:o[2])||"center",d,{fontSize:t.fontSize,imageDimension:h,screenDimension:i}),{left:f,top:g}=a,{width:p,height:m}=d;let b="ellipse",x=g,v=g,y=1/0,S=-1/0,E=0,_=0;if(o){const e=null===(n=o[1])||void 0===n?void 0:n.trim();if(e)if(/^circle/.test(e))b="circle";else{let i=1/0;const n=e.split(" "),s=n.length;for(let e=0;e<s;e++)i=Math.min(0===e?t.parseWidth(n[e],!1):t.parseHeight(n[e],!1),i);E=i,_=i,1!==s&&n[0]!==n[1]||(b="circle")}}for(const t of[[0,0],[p,0],[p,m],[0,m]]){const e=Math.round(Tn(Math.abs(t[0]-f),Math.abs(t[1]-g)));y=Math.min(e,y),S=Math.max(e,S)}for(const t of[p-f,m-g,f])x=Math.min(t,x),v=Math.max(t,v);const k={type:l,repeating:e,dimension:d,shape:b,center:a,closestSide:x,farthestSide:v,closestCorner:y,farthestCorner:S};if(0===E&&0===_){E=S;const t=(null===(s=null==o?void 0:o[1])||void 0===s?void 0:s.split(" ").pop())||"";switch(t){case"closest-corner":case"closest-side":case"farthest-side":{const i=k[On(t)];e?_=i:E=i;break}default:_=S}}k.radius=E,k.radiusExtent=_,k.colorStops=es(t,k,r[4]),u=k;break}case"conic":{const e=ls(c),n={type:l,dimension:d,angle:is(c),center:bn((null==e?void 0:e[2])||"center",d,{fontSize:t.fontSize,imageDimension:h,screenDimension:i})};n.colorStops=es(t,n,r[4]),u=n;break}}o.push(u||"initial")}a++}if(Jn.lastIndex=0,o.length)return o}}static getBackgroundSize(t,e,i){let n=0,s=0;switch(e){case"":case"cover":case"contain":case"100% 100%":case"auto":case"auto auto":case"initial":return;default:{const o=e.split(" "),r=o.length;1===r&&(o[1]=o[0]);for(let e=0;e<r;e++){let r=o[e];"auto"===r&&(r="100%"),0===e?n=t.parseUnit(r,"width",!1,i):s=t.parseUnit(r,"height",!1,i)}break}}return n>0&&s>0?{width:Math.round(n),height:Math.round(s)}:void 0}static isInheritedStyle(t,e){var i;return t.styleElement&&t.style[e]===(null===(i=t.actualParent)||void 0===i?void 0:i.style[e])&&("inherit"===t.cssStyle[e]||""===t.cssInitial(e))}static hasLineBreak(t,e=!1,i=!1){if(t.naturalElements.length)return t.naturalElements.some(t=>t.lineBreak);if(!e&&t.naturalChild){const e=t.element;let n=e.textContent;return i&&(n=n.trim()),n.includes("\n")&&(t.plainText&&Sn(e,"whiteSpace","pre","pre-wrap")||/^pre/.test(t.css("whiteSpace")))}return!1}static checkPreIndent(t){if(t.plainText){const e=t.actualParent;if((null==e?void 0:e.preserveWhiteSpace)&&e.ascend({condition:t=>"PRE"===t.tagName,startSelf:!0}).length){let e=t.nextSibling;if(null==e?void 0:e.naturalElement){const i=t.textContent;if(""!==i.trim()){const t=ts.exec(i);if(t&&(e.textElement||(e=e.find(t=>t.naturalChild&&t.textElement,{cascade:!0,error:t=>t.naturalChild&&!t.textElement&&0===t.length})),e))return[t[1]?t[0]:"",e]}}}}}static getStoredName(t,e){const i=cs.STORED[t];if(i)for(const[t,n]of i.entries())if(Xn(e,n))return t;return""}finalize(t){}reset(){super.reset();const t=cs.STORED;for(const e in t)t[e].clear()}writeRawImage(t,e){var i;null===(i=this.fileHandler)||void 0===i||i.addAsset({pathname:this.controllerSettings.directory.image,filename:t,base64:e})}setBoxStyle(t){var e;if((t.styleElement||t.visibleStyle.background)&&t.hasResource(be.BOX_STYLE)){const i=t.cssAsObject("backgroundSize","backgroundRepeat","backgroundPositionX","backgroundPositionY");if(rs(t,i,"backgroundClip")&&rs(t,i,"backgroundOrigin"),"0px"!==t.css("borderRadius")){const{borderTopLeftRadius:e,borderTopRightRadius:n,borderBottomRightRadius:s,borderBottomLeftRadius:o}=t.cssAsObject("borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"),[r,a]=e.split(" "),[l,c]=n.split(" "),[h,d]=s.split(" "),[u,f]=o.split(" "),g=a||c||d||f?[r,a||r,l,c||l,h,d||h,u,f||u]:[r,l,h,u],p=t.actualWidth>=t.actualHeight,m=g[0];g.every(t=>t===m)&&(g.length="0px"===m||""===m?0:1);const b=g.length;if(b){const e=p?"width":"height";for(let i=0;i<b;i++)g[i]=mn(t.parseUnit(g[i],e,!1));i.borderRadius=g}}t.visibleStyle.borderWidth&&(t.borderTopWidth>0&&os(t,i,"borderTop",fn[0]),t.borderRightWidth>0&&os(t,i,"borderRight",fn[1]),t.borderBottomWidth>0&&os(t,i,"borderBottom",fn[2]),t.borderLeftWidth>0&&os(t,i,"borderLeft",fn[3])),os(t,i,"outline",fn[4]),t.hasResource(be.IMAGE_SOURCE)&&(i.backgroundImage=cs.parseBackgroundImage(t,t.backgroundImage,t.localSettings.screenDimension));let n=t.backgroundColor;""===n&&t.has("backgroundColor")&&!t.documentParent.visible&&(n=t.css("backgroundColor")),""!==n&&(i.backgroundColor=(null===(e=un(n))||void 0===e?void 0:e.valueAsRGBA)||""),t.data(cs.KEY_NAME,"boxStyle",i)}}setFontStyle(t){if((t.textElement||t.inlineText)&&(!t.textEmpty||t.visibleStyle.background||t.pseudoElement)||t.inputElement){const e=un(t.css("color"));let i=t.css("fontWeight");if(!zn(i))switch(i){case"lighter":i="200";break;case"bold":i="700";break;case"bolder":i="900";break;default:i="400"}t.data(cs.KEY_NAME,"fontStyle",{fontFamily:t.css("fontFamily").trim(),fontStyle:t.css("fontStyle"),fontSize:t.fontSize,fontWeight:i,color:(null==e?void 0:e.valueAsRGBA)||""})}}setValueString(t){const e=t.element;if(e){let i="",n="",s="",o=!0,r=!1;switch(e.tagName){case"INPUT":switch(n=e.value,e.type){case"radio":case"checkbox":{const e=t.companion;!1===(null==e?void 0:e.visible)&&(n=e.textContent.trim());break}case"submit":""!==n||t.visibleStyle.backgroundImage||(n="Submit");break;case"reset":""!==n||t.visibleStyle.backgroundImage||(n="Reset");break;case"time":""===n&&(s="--:-- --");break;case"date":case"datetime-local":if(""===n){switch((new Intl.DateTimeFormat).resolvedOptions().locale){case"en-US":s="mm/dd/yyyy";break;default:s="dd/mm/yyyy"}"datetime-local"===e.type&&(s+=" --:-- --")}break;case"week":""===n&&(s="Week: --, ----");break;case"month":""===n&&(s="--------- ----");break;case"text":case"password":case"url":case"email":case"search":case"number":case"tel":""===n&&(s=e.placeholder);break;case"file":n=dn(8)?"Browse...":"Choose File";break;case"color":{const e=this.controllerSettings.style.inputColorBorderColor,i=(un(n)||un("rgb(0, 0, 0)")).valueAsRGBA,{width:s,height:o}=t.actualDimension,r=`${s-10}px ${o-10}px, ${s-8}px ${o-8}px`,a="no-repeat, no-repeat",l="center, center",c="center, center",h=cs.parseBackgroundImage(t,`linear-gradient(${i}, ${i}), linear-gradient(${e}, ${e})`);n="";let d=t.data(cs.KEY_NAME,"boxStyle");if(d){const t=d.backgroundImage;if(t){d.backgroundSize=r+", "+d.backgroundSize,d.backgroundRepeat=a+", "+d.backgroundRepeat,d.backgroundPositionX=l+", "+d.backgroundPositionX,d.backgroundPositionY=c+", "+d.backgroundPositionY,t.unshift(...h);break}}else d={};t.data(cs.KEY_NAME,"boxStyle",Object.assign(d,{backgroundSize:r,backgroundRepeat:a,backgroundPositionX:l,backgroundPositionY:c,backgroundImage:h}));break}case"range":s=n,n=""}break;case"TEXTAREA":n=e.value;break;case"IFRAME":n=e.src;break;default:{const s=t.textContent;t.plainText||t.pseudoElement?(i=s.trim(),[n,r,o]=ns(t,as(s)),r=!0):t.inlineText?(i=s.trim(),[n,r,o]=ns(t,t.hasAlign(1024)?as(s):this.removeExcludedFromText(t,e))):0===t.naturalChildren.length&&""===(null==s?void 0:s.trim())&&!t.hasPX("height")&&cs.isBackgroundVisible(t.data(cs.KEY_NAME,"boxStyle"))&&(n=s);break}}if(""!==n){if(o&&t.pageFlow){const e=t.siblingsLeading[0];let i=!1;if(n.length>1)if(void 0===e||e.multiline||e.lineBreak||e.plainText&&Mn.TRAILINGSPACE.test(e.textContent))n=n.replace(Mn.LEADINGSPACE,"");else if(e.naturalElement){const t=e.textContent,n=t.length;n&&(i=32===t.charCodeAt(n-1))}if(r){const s=!t.lineBreakTrailing&&Mn.TRAILINGSPACE.test(n);if(n=!Mn.LEADINGSPACE.test(n)||!1!==(null==e?void 0:e.block)||e.lineBreak||i?n.trim():qn+n.trim(),s){const e=t.siblingsTrailing.find(t=>!t.excluded||t.lineBreak);!1===(null==e?void 0:e.blockStatic)&&(n+=qn)}}else if(""!==n.trim())n=n.replace(Mn.LEADINGSPACE,e&&(e.block||e.lineBreak||i&&e.htmlElement&&e.textContent.length>1||t.multiline&&cs.hasLineBreak(t))?"":qn),n=n.replace(Mn.TRAILINGSPACE,"table-cell"===t.display||t.lineBreakTrailing||t.blockStatic?"":qn);else if(!t.inlineText)return}""!==n&&t.data(cs.KEY_NAME,"valueString",{key:i,value:n.replace(/\\n\\n$/,"\\n")})}""!==s&&t.data(cs.KEY_NAME,"hintString",s)}else if(t.inlineText){const e=t.textContent;e&&t.data(cs.KEY_NAME,"valueString",{key:e,value:e})}}removeExcludedFromText(t,e){const i=e.children.length>0||"CODE"===e.tagName,n=t.preserveWhiteSpace,s=i?"innerHTML":"textContent";let o=e[s]||"";if(""===o.trim())return n?o:qn;const r=t.sessionId;return e.childNodes.forEach((t,e)=>{const a=Fn(t,r);if(null===a||!a.textElement||!a.pageFlow||a.positioned||a.pseudoElement||a.excluded||a.dataset.target){if(a){if(i&&a.htmlElement){const t=a.toElementString("outerHTML");return void(a.lineBreak?o=o.replace(n?t:RegExp(`\\s*${t}\\s*`),"\\n"):a.positioned?o=o.replace(t,""):n||(o=o.replace(t,a.pageFlow&&""!==a.textContent.trim()?qn:"")))}{const t=a.plainText?a.textContent:a[s];if(Vn(t))return void(n||(o=o.replace(t,"")))}}else if(t instanceof HTMLElement){const e=getComputedStyle(t).getPropertyValue("position");o=o.replace(t.outerHTML,"absolute"!==e&&"fixed"!==e&&""!==t.textContent.trim()?qn:"")}0===e?o=Gn(o," "):e===length-1&&(o=jn(o," "))}}),i?o.replace(Nn.ENTITY,(t,e)=>String.fromCharCode(parseInt(e))):o}}cs.KEY_NAME="squared.resource",cs.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,images:new Map};const hs=squared.lib,{formatPercent:ds,formatPX:us,isLength:fs,isPercent:gs}=hs.css,{CHAR:ps,CSS:ms}=hs.regex,{isNumber:bs,safeNestedArray:xs,trimString:vs,withinRange:ys}=hs.util,Ss=it.CSS_GRID,Es="[\\d.]+[a-z%]+|auto|max-content|min-content",_s=RegExp(`^(${Es})$`),ks=RegExp(`\\s*(repeat\\((auto-fit|auto-fill|\\d+), (.+)\\)|\\[([\\w\\-\\s]+)\\]|minmax\\(([^,]+), ([^)]+)\\)|fit-content\\(([\\d.]+[a-z%]+)\\)|${Es})\\s*`,"g"),ws=RegExp(`\\s*(\\[([\\w\\-\\s]+)\\]|minmax\\(([^,]+), ([^)]+)\\)|fit-content\\(([\\d.]+[a-z%]+)\\)|${Es})\\s*`,"g"),Ts=/^([\w-]+)-(start|end)$/,Cs=/[\d.]+[a-z%]+|auto|max-content|min-content/,As=/minmax\(([^,]+), ([^)]+)\)/,Is=/fit-content\(([\d.]+[a-z%]+)\)/,Rs=/\[([\w\-\s]+)\]/,Ps=/^span/;function Bs(t,e){const i=t.repeat,n=[],s=[],o=e.length;for(let t=0;t<o;t++)i[t]?s.push(e[t]):n.push(e[t]);const r=t.length,a=r-n.length,l=s.length,c=Array(r);for(let t=0;t<r;t++)if(i[t]){for(let e=0,i=0;e<a;t++,e++,i++)i===l&&(i=0),c[t]=s[i];t--}else c[t]=n.shift();return c}function Ms(t,e){const i=t.unit;if(1===i.length&&(t.autoFill||t.autoFit)){const n=t.unitMin;let s=0;if([i[0],n[0]].forEach(t=>{gs(t)?s=Math.max(parseFloat(t)/100*e,s):fs(t)&&(s=Math.max(parseFloat(t),s))}),s>0)return t.length=Math.floor(e/(s+t.gap)),t.unit=Bs(t,i),t.unitMin=Bs(t,n),!0}return!1}function Ns(t){let e=0;for(const i of t)i&&e++;return e}function Ls(t,e,i,n,s){let o=0,r=0,a=1;const l=n.length;for(let t=0;t<l;t++){const e=n[t];ms.PX.test(e)?o+=parseFloat(e):Ds(e)?r+=parseFloat(e):gs(e)&&(a-=parseFloat(e)/100)}if(a<1&&r>0){const c=(t*a-(i-1)*e-s.reduce((t,e)=>t+Math.max(0,e),0)-o)/r;if(c>0)for(let t=0;t<l;t++){const e=n[t];Ds(e)&&(n[t]=us(parseFloat(e)*c))}}}function Ws(t,e){if(0===t.length)for(let i=0;i<e;i++)t[i]="1fr"}function Fs(t,e,i){if(i){for(let n=0,s=-1,o=0;n<t;n++)if(0===i[n]){if(-1===s&&(s=n),++o===e)return s}else s=-1;return-1}return 0}function Os(t){const e=t.length;for(let i=0;i<e;i++){const e=t[i];for(const t of e)if(0===t)return i}return Math.max(0,e-1)}const Ds=t=>/fr$/.test(t),Hs=(t,e,i)=>fs(e)?us(t.parseUnit(e,0!==i?"width":"height")):e;class Xs extends ln{static isAligned(t){return t.hasHeight&&/^space-|center|flex-end|end/.test(t.css("alignContent"))}static isJustified(t){return(t.blockStatic||t.hasWidth)&&/^space-|center|flex-end|end|right/.test(t.css("justifyContent"))}static createDataAttribute(t){const e=t.gridAutoFlow;return Object.assign(t,{children:[],rowData:[],rowSpanMultiple:[],rowDirection:!e.includes("column"),dense:e.includes("dense"),templateAreas:{},row:Xs.createDataRowAttribute(),column:Xs.createDataRowAttribute(),emptyRows:[],minCellHeight:0})}static createDataRowAttribute(){return{length:0,gap:0,unit:[],unitMin:[],unitTotal:[],repeat:[],auto:[],autoFill:!1,autoFit:!1,name:{},fixedWidth:!1,flexible:!1,frTotal:0}}is(t){return t.gridElement}condition(t){return t.length>0}processNode(t){const e=Xs.createDataAttribute(t.cssAsObject("alignItems","alignContent","justifyItems","justifyContent","gridAutoFlow")),{column:i,dense:n,row:s,rowDirection:o}=e,[r,a,l,c]=o?[0,1,2,3]:[1,0,3,2],h=[],d=[],u=[];i.gap=t.parseWidth(t.css("columnGap"),!1),s.gap=t.parseHeight(t.css("rowGap"),!1),[t.cssInitial("gridTemplateRows",!0),t.cssInitial("gridTemplateColumns",!0),t.css("gridAutoRows"),t.css("gridAutoColumns")].forEach((e,n)=>{if(""!==e&&"none"!==e&&"auto"!==e){const o=0===n?s:i,{name:r,repeat:a,unit:l,unitMin:c}=o;let h,d=1;for(;null!==(h=ks.exec(e));){const e=h[1].trim();switch(n){case 0:case 1:if("["===e.charAt(0))for(const t of h[4].split(ps.SPACE))xs(r,t).push(d);else if(/^repeat/.test(e)){let e=1;switch(h[2]){case"auto-fit":o.autoFit=!0;break;case"auto-fill":o.autoFill=!0;break;default:e=parseInt(h[2])||1}if(e>0){const i=[];let s;for(;null!==(s=ws.exec(h[3]));){const e=s[1];let o;if(null!==(o=Rs.exec(e))){const t=o[1];void 0===r[t]&&(r[t]=[]),i.push({name:t})}else null!==(o=As.exec(e))?i.push({unit:Hs(t,o[2],n),unitMin:Hs(t,o[1],n)}):null!==(o=Is.exec(e))?i.push({unit:Hs(t,o[1],n),unitMin:"0px"}):null!==(o=Cs.exec(e))&&i.push({unit:Hs(t,o[0],n)})}if(i.length)for(let t=0;t<e;t++)for(const t of i){const{name:e,unit:i}=t;e?r[e].push(d):i&&(l.push(i),c.push(t.unitMin||""),a.push(!0),d++)}ws.lastIndex=0}}else/^minmax/.test(e)?(l.push(Hs(t,h[6],n)),c.push(Hs(t,h[5],n)),a.push(!1),d++):/^fit-content/.test(e)?(l.push(Hs(t,h[7],n)),c.push("0px"),a.push(!1),d++):_s.test(e)&&(l.push(Hs(t,e,n)),c.push(""),a.push(!1),d++);break;case 2:case 3:(2===n?s:i).auto.push(fs(e)?us(t.parseUnit(e,2!==n?"width":"height")):e)}}ks.lastIndex=0}}),t.sort(o?(t,e)=>{const{left:i,top:n}=t.linear,{left:s,top:o}=e.linear;return ys(n,o)?ys(i,s)?0:i<s?-1:1:n<o?-1:1}:(t,e)=>{const{left:i,top:n}=t.linear,{left:s,top:o}=e.linear;return ys(i,s)?ys(n,o)?0:n<o?-1:1:i<s?-1:1});let f,g=!1,p=!1;if(!t.has("gridTemplateAreas")&&t.every(t=>"auto"===t.css("gridRowStart")&&"auto"===t.css("gridColumnStart"))){const[n,r,a,l,c]=o?["top","bottom",2,1,3]:["left","right",3,0,2];let h,d=0,f=0,m=0;o?i.autoFill&&(g=Ms(i,t.actualWidth)):s.autoFill&&(p=Ms(s,t.actualHeight)),t.each((t,i)=>{(void 0===h||t.linear[n]>=h.linear[r]||f>0&&f===m)&&(m=Math.max(f,m),d++,f=1);const{gridRowEnd:s,gridColumnEnd:g}=t.cssAsObject("gridRowEnd","gridColumnEnd");let p=1,b=1;if(Ps.test(s)?p=parseInt(s.split(" ")[1]):bs(s)&&(p=parseInt(s)-d),Ps.test(g)?b=parseInt(g.split(" ")[1]):bs(g)&&(b=parseInt(g)-f),1===f&&m>0){let t=!1;do{const i=Array(m-1).fill(1);for(const t of u){const e=t.placement;if(e[a]>d)for(let t=e[l];t<e[c];t++)i[t-1]=0}for(let e=0,n=0,s=0;e<i.length;e++)if(i[e]){if(0===n&&(s=e),++n===b){f=s+1,t=!0;break}}else n=0;t||(e.emptyRows[d-1]=i,d++)}while(!t)}u[i]=o?{outerCoord:t.linear.top,placement:[d,f,d+p,f+b],rowSpan:p,columnSpan:b}:{outerCoord:t.linear.left,placement:[f,d,f+b,d+p],rowSpan:p,columnSpan:b},f+=b,h=t})}else{const n=e.templateAreas;let r;g=Ms(i,t.actualWidth),p=Ms(s,t.actualHeight),t.css("gridTemplateAreas").split(/"[\s\n]+"/).forEach((t,e)=>{"none"!==t&&vs(t.trim(),'"').split(ps.SPACE).forEach((t,i)=>{if("."!==t.charAt(0)){const s=n[t];s?(s.rowSpan=e-s.rowStart+1,s.columnSpan=i-s.columnStart+1):n[t]={rowStart:e,rowSpan:1,columnStart:i,columnSpan:1}}})}),t.each((t,e)=>{const a=t.cssAsTuple("gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd"),l=[0,0,0,0];let c=-1,h=-1;if(Object.keys(n).length)for(let t=0;t<4;t++){const e=a[t];let i=n[e];if(i)switch(t){case 0:l[0]=i.rowStart+1;break;case 1:l[1]=i.columnStart+1;break;case 2:l[2]=i.rowStart+i.rowSpan+1;break;case 3:l[3]=i.columnStart+i.columnSpan+1}else{const s=Ts.exec(e);if(s&&(i=n[s[1]],i))if("start"===s[2])switch(t){case 0:case 2:l[t]=i.rowStart+1;break;case 1:case 3:l[t]=i.columnStart+1}else switch(t){case 0:case 2:l[t]=i.rowStart+i.rowSpan+1;break;case 1:case 3:l[t]=i.columnStart+i.columnSpan+1}}}if(0===l[0]||0===l[1]||0===l[2]||0===l[3]){const t=(t,e,i,n)=>{if(bs(t)){const i=parseInt(t);if(i>0)return l[e]=i,!0;if(i<0&&e>=2){const t=e-2;return l[l[t]>0?e:t]=i+n+2,!0}}else if(Ps.test(t)){const s=parseInt(t.split(" ")[1]);if(s===n&&r)if(o){if(!i){const t=r[2];t>0&&0===l[0]&&(l[0]=t)}}else if(i){const t=r[3];t>0&&0===l[1]&&(l[1]=t)}const d=l[e-2];switch(e){case 0:{const t=a[2];if(bs(t)){const e=parseInt(t);l[0]=e-s,l[2]=e}break}case 1:{const t=a[3];if(bs(t)){const e=parseInt(t);l[1]=e-s,l[3]=e}break}case 2:case 3:d>0&&(l[e]=d+s)}return i?-1===c&&(c=s):-1===h&&(h=s),!0}return!1};let e,n;for(let o=0;o<4;o++){const r=a[o];if("auto"!==r&&0===l[o]){const d=o%2==0,u=d?s:i;if(!t(r,o,d,Math.max(1,u.unit.length))){const t=r.split(" ");1===t.length?(t[1]=t[0],t[0]="1"):bs(t[0])&&(d?e?c=parseInt(t[0])-parseInt(e[0]):e=t:n?h=parseInt(t[0])-parseInt(n[0]):n=t);const i=u.name[t[1]];if(i){const e=parseInt(t[0]);e<=i.length&&(l[o]=i[e-1]+(t[1]===a[o-2]?1:0))}}}}}void 0===r&&(0===l[0]&&(l[0]=1),0===l[1]&&(l[1]=1));const[d,f,g,p]=l;-1===c?c=d>0&&g>0?g-d:1:d>0&&0===g&&(l[2]=d+c),-1===h?h=f>0&&p>0?p-f:1:f>0&&0===p&&(l[3]=d+h),0===l[2]&&l[0]>0&&(l[2]=l[0]+c),0===l[3]&&l[1]>0&&(l[3]=l[1]+h),u[e]={outerCoord:o?t.bounds.top:t.bounds.left,placement:l,rowSpan:c,columnSpan:h},r=l})}{const[e,n]=o?[i,t.box.top]:[s,t.box.left];let r=e.unit,a=1,l=0;for(const t of u)if(t){const[e,i,s]=o?[t.columnSpan,1,3]:[t.rowSpan,0,2],r=t.placement;r.some(t=>t>0)&&(a=Math.max(a,e,r[i],r[s]-1)),ys(t.outerCoord,n)&&(l+=e)}const c=r.length;if(f=Math.max(a,l,o&&!g||!o&&!p?c:0),e.length=f,c<f)if(e.autoFill||e.autoFit)0===c&&(r.push("auto"),e.unitMin.push(""),e.repeat.push(!0)),r=Bs(e,r),e.unit=r,e.unitMin=Bs(e,e.unitMin);else{const t=e.auto,i=t.length;if(i){let e=0;for(;r.length<f;)e===i&&(e=0),r.push(t[e])}}else(e.autoFit||e.autoFill&&t.blockStatic&&(o&&!t.hasWidth&&!t.hasPX("maxWidth",!1)||!o&&!t.hasHeight))&&(r.length=f);let h=1,d=0,m=0;for(const t of r)gs(t)?h-=parseFloat(t)/100:Ds(t)?d+=parseFloat(t):"auto"===t&&m++;if(e.flexible=h<1||d>0,h<1)if(d>0){const t=r.length;for(let e=0;e<t;e++){const t=r[e];Ds(t)&&(r[e]=h*(parseFloat(t)/d)+"fr")}}else if(1===m){const t=r.findIndex(t=>"auto"===t);-1!==t&&(r[t]=ds(h))}}if(t.each((t,i)=>{const{placement:s,rowSpan:g,columnSpan:p}=u[i],[m,b]=o?[g,p]:[p,g];for(;0===s[0]||0===s[1];){const t=s.slice(0);if(0===t[r]){let e=h.length;for(let i=n?0:Os(d),s=0,o=-1;i<e;i++){if(-1!==Fs(f,b,d[i])){if(0===s&&(o=i,e=Math.max(e,i+m)),++s===m){t[r]=o+1;break}}else s=0,o=-1,e=h.length}}if(0===t[r])s[r]=h.length+1,0===s[a]&&(s[a]=1);else if(0===t[a]){0===t[l]&&(t[l]=t[r]+m);const e=[],i=t[r]-1,n=t[l]-1;for(let t=i;t<n;t++){const i=h[t];if(void 0===i)e.push([[0,-1]]);else{if(!(Ns(i)+b<=f))break;{const t=[];let n=0;for(let e=0,s=-1;e<f;e++){const o=i[e];void 0===o&&(-1===s&&(s=e),n++),(o||e===f-1)&&(n>=b&&t.push([s,s+n]),s=-1,n=0)}if(!t.length)break;e.push(t)}}}const s=e.length;if(s){const o=e[0];if(-1===o[0][1])t[a]=1;else if(s===n-i)if(s>1)t:for(const i of o)for(let n=i[0];n<i[1];n++)for(let i=1;i<s;i++){const s=e[i],o=s.length;for(let e=0;e<o;e++){const i=s[e];if(n>=i[0]&&(-1===i[1]||n+b<=i[1])){t[a]=n+1;break t}}}else t[a]=o[0][0]+1}}const e=t[r];if(e>0){const i=t[a];i>0&&(s[r]=e,s[a]=i)}}if(0===s[l]&&(s[l]=s[r]+m),0===s[c]&&(s[c]=s[a]+b),((t,e,i)=>{if(e.every(t=>t>0)){for(let s=e[r]-1;s<e[l]-1;s++){const o=xs(h,s);let r=d[s],l=e[a]-1;if(void 0===r){if(r=Array(i).fill(0),!n)for(let t=0;t<l;t++)r[t]=1;d[s]=r}for(;l<e[c]-1;l++)xs(o,l).push(t),r[l]=1}return!0}return!1})(t,s,f)){const[i,r,a,l]=s,c=i-1,h=a-i,u=r-1;if(!n){const t=o?c:u;if(t>0){const e=d[t-1];for(let t=0;t<f;t++)e[t]=1}}if(h>1){const t=e.rowSpanMultiple;for(let e=c;e<c+h;e++)t[e]=!0}t.data(Ss,"cellData",{rowStart:c,rowSpan:h,columnStart:u,columnSpan:l-r})}}),h.length){let n;if(o)n=h,e.rowData=h;else{n=e.rowData;const t=h.length;for(let e=0;e<t;e++){const t=h[e],i=t.length;for(let s=0;s<i;s++)xs(n,s)[e]=t[s]}}const r=o?s.unitTotal:i.unitTotal,a=e.children,l=i.unit.length;for(const t of n){const e=t.length;for(let i=0;i<e;i++){const e=t[i];let n=r[i]||0;if(e){let t=0;for(const i of e)a.includes(i)||(t=Math.max(t,o?i.bounds.height:i.bounds.width),a.push(i));n+=t}r[i]=n}}if(a.length===t.length){const{gap:r,unit:c}=s,{gap:h,unit:d}=i,u=Math.max(c.length,n.length),f=Array(u).fill(0),g=Array(l).fill(0),p=new Set;s.length=u,i.length=l;let m=0;for(let t=0;t<u;t++){const i=n[t],s=c[t];if(i)for(let n=0;n<l;n++){const s=i[n];if(s){for(const e of s)if(!p.has(e)){const{columnSpan:i,rowSpan:s}=e.data(Ss,"cellData"),o=n+i-1,a=t+s-1;if(h>0&&o<l-1&&e.modifyBox(4,h),r>0&&a<u-1&&e.modifyBox(8,r),1===s){const i=e.bounds.height,n=f[t];e.hasHeight?n<0?i>Math.abs(n)&&(f[t]=i):f[t]=Math.max(i,n):i>Math.abs(n)&&(f[t]=-i),m=Math.max(i,m)}if(1===i){const t=e.bounds.width,i=g[n];e.hasWidth?i<0?t>Math.abs(i)&&(g[n]=t):g[n]=Math.max(t,i):t>Math.abs(i)&&(g[n]=-t)}p.add(e)}}else o||(e.emptyRows[n]=[1/0])}else f[t]=parseFloat(s)||0,o&&(e.emptyRows[t]=[1/0])}e.minCellHeight=m,o?(t.hasPX("width",!1)&&(i.fixedWidth=!0,i.flexible=!1,Ls(t.actualWidth,h,l,d,g)),t.hasHeight&&!Xs.isAligned(t)&&Ws(s.unit,u)):(t.hasPX("height",!1)&&(s.fixedWidth=!0,s.flexible=!1,Ls(t.actualHeight,r,u,c,f)),t.hasWidth&&!Xs.isJustified(t)&&Ws(i.unit,l)),t.retain(a),t.cssSort("zIndex"),t.cssTry("display","block")&&(t.each(t=>{const{width:e,height:i}=t.boundingClientRect;t.data(Ss,"boundsData",Object.assign(Object.assign({},t.bounds),{width:e,height:i}))}),t.cssFinally("display")),t.data(Ss,"mainData",e)}}}}const{withinRange:zs}=squared.lib.util,Vs=it.FLEXBOX;class Us extends ln{static createDataAttribute(t,e){return Object.assign(Object.assign({},t.flexdata),{rowCount:0,columnCount:0,children:e})}is(t){return t.flexElement}condition(t){return t.length>0}processNode(t){const e=this.controller,[i,n]=t.partition(t=>t.pageFlow),s=Us.createDataAttribute(t,i);if(t.cssTry("align-items","start")){if(t.cssTry("justify-items","start")){for(const t of i)if(t.cssTry("align-self","start")){if(t.cssTry("justify-self","start")){const{width:e,height:i}=t.boundingClientRect;t.data(Vs,"boundsData",Object.assign(Object.assign({},t.bounds),{width:e,height:i})),t.cssFinally("justify-self")}t.cssFinally("align-self")}t.cssFinally("justify-items")}t.cssFinally("align-items")}if(s.wrap){const[o,r,a,l]=s.row?["top","left","right","intersectY"]:["left","top","bottom","intersectX"];i.sort((t,e)=>{const i=t.linear,n=e.linear;if(!t[l](e.bounds,"bounds"))return i[o]<n[o]?-1:1;{const t=i[r],e=n[r];if(!zs(t,e))return t<e?-1:1}return 0});let c=i[0],h=[c];const d=[h];let u=i.length;for(let t=1;t<u;t++){const e=i[t];c[l](e.bounds,"bounds")?h.push(e):(c=e,h=[e],d.push(h))}t.clear();let f,g=0;if(u=d.length,u>1){const i=t.box[a];for(let n=0;n<u;n++){const s=d[n],o=e.createNodeGroup(s[0],s,{parent:t,delegate:!0,cascade:!0});o.addAlign(128),o.containerIndex=n,o.box[a]=i,g=Math.max(s.length,g)}f=u}else{const e=d[0];t.retain(e);for(let t=0;t<e.length;t++)e[t].containerIndex=t;g=e.length,f=g}for(let t=0;t<n.length;t++)n[t].containerIndex=f+t;t.concat(n),t.sort(),s.row?(s.rowCount=u,s.columnCount=g):(s.rowCount=g,s.columnCount=u)}else{if(i.some(t=>0!==t.flexbox.order)){const[t,e]=s.reverse?[-1,1]:[1,-1];i.sort((i,n)=>{const s=i.flexbox.order,o=n.flexbox.order;return s===o?0:s>o?t:e})}s.row?(s.rowCount=1,s.columnCount=t.length):(s.rowCount=t.length,s.columnCount=1)}t.data(Vs,"mainData",s)}}const js=squared.lib,{aboveRange:Gs,belowRange:qs,safeNestedArray:Ys,withinRange:$s}=js.util,Qs=it.GRID;function Ks(t,e){const i=e.bounds.top;for(const e of t){const t=e.findIndex(t=>{const e=t.bounds.top;return $s(i,e)||Math.ceil(i)>=e&&i<Math.floor(t.bounds.bottom)});if(-1!==t)return t}return-1}class Js extends ln{static createDataCellAttribute(){return{rowSpan:0,columnSpan:0,index:-1,cellStart:!1,cellEnd:!1,rowEnd:!1,rowStart:!1}}condition(t){if(t.length>1&&!t.layoutElement&&"TABLE"!==t.tagName&&!t.has("listStyle")){if("table"===t.display)return t.every(t=>"table-row"===t.display&&t.every(t=>"table-cell"===t.display))||t.every(t=>"table-cell"===t.display);if(0===t.percentWidth||void 0===t.find(t=>t.percentWidth>0,{cascade:!0})){let e=!1,i=0;for(const n of t){if(!n.pageFlow||n.visibleStyle.background||!n.blockStatic||0!==n.percentWidth||n.autoMargin.leftRight||n.autoMargin.left)return!1;n.length>1&&(e=!0),"list-item"!==n.display||n.has("listStyleType")||i++}return i===t.length||e&&t.every(t=>t.length>0&&je.linearData(t.children).linearX)}}return!1}processNode(t){var e;const i=[],n=[],s={};for(const e of t)for(const t of e)t.visible&&Ys(s,Math.floor(t.linear.left)).push(t);const o=Object.keys(s),r=o.length;if(r){let a=-1;for(let t=0;t<r;t++){const e=s[o[t]];if(0===t)a=r;else if(a!==e.length){a=-1;break}}if(-1!==a)for(const t of o)n.push(s[t]);else{const a=[];for(let t=0;t<r;t++){const e=s[o[t]],i=e.length;if(0===t&&0===i)return;a[t]=0===t?0:a[t-1];for(let s=0;s<i;s++){const o=e[s],{left:r,right:l}=o.linear;if(0===t||Gs(r,a[t-1])){const e=Ys(n,t);if(0===t||n[0].length===i)e[s]=o;else{const t=Ks(n,o);if(-1===t)return;e[t]=o}}else{const t=n[n.length-1];if(t){let e=1/0,i=-1/0;for(const n of t){const t=n.linear;e=Math.min(t.left,e),i=Math.max(t.right,i)}if(Math.floor(r)>Math.ceil(e)&&Math.floor(l)>Math.ceil(i)){const e=Ks(n,o);if(-1!==e)for(let i=n.length-1;i>=0;i--){const s=n[i];if(s){void 0===s[e]&&(t.length=0);break}}}}}a[t]=Math.max(l,a[t])}}const l=a.length;for(let t=0,e=-1;t<l;t++)void 0===n[t]?-1===e?e=t-1:t===l-1&&(a[e]=a[t]):-1!==e&&(a[e]=a[t-1],e=-1);for(let t=0;t<n.length;t++)(null===(e=n[t])||void 0===e?void 0:e.length)?i.push(a[t]):n.splice(t--,1);const c=n.reduce((t,e)=>Math.max(t,e.length),0);for(let t=0;t<c;t++){const e=n.length;for(let i=0;i<e;i++){const e=n[i];void 0===e[t]&&(e[t]={spacer:1})}}i.push(t.box.right)}}const a=n.length;if(a>1&&n[0].length===t.length){const e=[],s=new Set;for(let t=0,o=0;t<a;t++){const r=n[t];let l=0;for(let c=0,h=0;c<r.length;c++){const d=r[c],u=r.length,f=Ys(e,c);if(d.spacer)1===d.spacer&&l++;else{const e=Object.assign(Js.createDataCellAttribute(),d.data(Qs,"cellData"));let g=1,p=1+l;for(let e=t+1;e<a;e++){const t=n[e][c];if(1!==t.spacer)break;p++,t.spacer=2}if(1===p)for(let t=c+1;t<u;t++){const e=r[t];if(1!==e.spacer)break;g++,e.spacer=2}if(i.length){const n=Math.min(t+(p-1),i.length-1);for(const t of d.actualParent.naturalChildren)if(!s.has(t)&&t.visible&&!t.rendered){const{left:s,right:o}=t.linear;Gs(s,d.linear.right)&&qs(o,i[n])&&Ys(e,"siblings").push(t)}}e.rowSpan=g,e.columnSpan=p,e.rowStart=0==h++,e.rowEnd=p+t===a,e.cellStart=0===o,e.cellEnd=e.rowEnd&&c===u-1,e.index=t,l=0,d.data(Qs,"cellData",e),f.push(d),s.add(d)}}}t.each(t=>t.hide()),t.clear();for(const i of e)for(const e of i)e.parent=t;t.tableElement&&"collapse"===t.css("borderCollapse")&&t.resetBox(480),t.data(Qs,"columnCount",a)}}}const Zs=squared.lib,{convertListStyle:to}=Zs.css,{isNumber:eo}=Zs.util,io=t=>t.backgroundImage&&!t.backgroundRepeat;class no extends ln{static createDataAttribute(){return{ordinal:"",imageSrc:"",imagePosition:""}}condition(t){const e=t.length;if(e){const i=new Set;let n=!0,s=!0,o=!0,r=!0,a=!1;const l=t.children;for(let t=0;t<e;t++){const c=l[t],h=c.css("listStyleType");if(("list-item"===c.display&&("none"!==h||c.innerBefore)||c.marginLeft<0&&"none"===h&&io(c.visibleStyle))&&(a=!0),(o||r)&&(c.floating?(i.add(c.float),r=!1):0===t||t===e-1||c.blockStatic||l[t-1].blockStatic&&l[t+1].blockStatic?o=!1:(o=!1,r=!1)),c.blockStatic||(n=!1),c.inlineVertical||(s=!1),!(n||s||r||o))return!1}return a&&(n||s||o&&1===i.size||r)}return!1}processNode(t){const e="OL"===t.tagName;let i=e&&t.toElementInt("start")||1;t.each(t=>{const n=no.createDataAttribute(),s=t.css("listStyleType"),o="list-item"===t.display;if(o||""!==s&&"none"!==s||io(t.visibleStyle)){if(t.has("listStyleImage"))n.imageSrc=t.css("listStyleImage");else{if(e&&o&&"LI"===t.tagName){const e=t.attributes.value;eo(e)&&(i=Math.floor(parseFloat(e)))}let r=to(s,i);if(""===r)switch(s){case"disc":r="●";break;case"square":r="■";break;case"none":{let e="",i="";t.visibleStyle.backgroundRepeat||(e=t.backgroundImage,i=t.css("backgroundPosition")),""!==e&&"none"!==e&&(n.imageSrc=e,n.imagePosition=i,t.exclude({resource:be.IMAGE_SOURCE}));break}default:r="○"}else r+=".";n.ordinal=r}o&&i++}t.data(it.LIST,"mainData",n)})}}const so=squared.lib,{assignRect:oo}=so.dom,{convertFloat:ro,withinRange:ao}=so.util,lo={relative:!0};const{getBackgroundPosition:co,resolveURL:ho}=squared.lib.css,uo=/^0[a-z%]+|left|start|top/;const fo=squared.lib,{formatPercent:go,formatPX:po,getInheritedStyle:mo,getStyle:bo,isLength:xo,isPercent:vo}=fo.css,{getNamedItem:yo}=fo.dom,{maxArray:So}=fo.math,{isNumber:Eo,replaceMap:_o,safeNestedArray:ko,withinRange:wo}=fo.util,To=it.TABLE,Co=/rgba\(0, 0, 0, 0\)|transparent/;function Ao(t,e,i){i.percent=Math.round(e.bounds.width/t.box.width*100)+"%",i.expand=!0}function Io(t,e,i){const n=e+"Style";t.ascend({including:i}).some(i=>{if(i.has(n)){const s=e+"Color",o=e+"Width";return t.css("border","inherit"),t.cssApply(i.cssAsObject(n,s,o)),t.unsetCache(o),!0}return!1})}function Ro(t){t.exclude({resource:be.ALL}),t.hide()}const Po=t=>t.css("width",po(t.bounds.width),!0);class Bo extends ln{static createDataAttribute(t){return{layoutType:0,rowCount:0,columnCount:0,layoutFixed:"fixed"===t.css("tableLayout"),borderCollapse:"collapse"===t.css("borderCollapse"),expand:!1}}processNode(t){const e=Bo.createDataAttribute(t),i=[];let n,s,o=[];const r=t=>{if(t){for(const e of t.cascade())switch(e.tagName){case"TH":case"TD":e.inherit(t,"styleMap"),e.unsetCache("visibleStyle")}o=o.concat(t.children),Ro(t)}};t.each(t=>{switch(t.tagName){case"THEAD":void 0===s?s=t:Ro(t);break;case"TBODY":i.push(t);break;case"TFOOT":void 0===n?n=t:Ro(t)}}),r(s);for(const t of i)o=o.concat(t.children),Ro(t);r(n);const a=e.borderCollapse,[l,c]=a?[0,0]:_o(t.css("borderSpacing").split(" "),(e,i)=>t.parseUnit(e,0===i?"width":"height")),h=l>1?Math.round(l/2):l,d=c>1?Math.round(c/2):c,u=t.element.querySelector("COLGROUP"),f=[],g=[],p=[],m=[],b=o.length;let x=0;for(let i=0;i<b;i++){const n=o[i];f[i]=l;const s=p[i]||[];p[i]=s,n.each((n,o)=>{const r=n.element,a=r.rowSpan;let x=r.colSpan,v=-1;for(let t=0;-1===v;t++)void 0===s[t]&&(v=t);for(let t=i;t<i+a;t++){const e=ko(p,t);for(let t=v,i=0;t<v+x;t++){if(void 0!==e[t]){x=i;break}e[t]=n,i++}}if(!n.hasPX("width")){const t=yo(r,"width");vo(t)?n.css("width",t,!0):Eo(t)&&n.css("width",po(parseFloat(t)),!0)}if(!n.hasPX("height")){const t=yo(r,"height");vo(t)?n.css("height",t):Eo(t)&&n.css("height",po(parseFloat(t)))}if(""===n.cssInitial("verticalAlign")&&n.css("verticalAlign","middle",!0),!n.visibleStyle.backgroundImage&&!n.visibleStyle.backgroundColor)if(u){const{backgroundImage:t,backgroundColor:e}=bo(u.children[o+1]);t&&"none"!==t&&n.css("backgroundImage",t,!0),e&&!Co.test(e)&&(n.css("backgroundColor",e),n.setCacheValue("backgroundColor",e))}else{let t=mo(r,"backgroundImage",/none/,"TABLE");""!==t&&n.css("backgroundImage",t,!0),t=mo(r,"backgroundColor",Co,"TABLE"),""!==t&&(n.css("backgroundColor",t),n.setCacheValue("backgroundColor",t))}switch(n.tagName){case"TD":{const t=n.parent;0===n.borderTopWidth&&Io(n,"borderTop",t),0===n.borderRightWidth&&Io(n,"borderRight",t),0===n.borderBottomWidth&&Io(n,"borderBottom",t),0===n.borderLeftWidth&&Io(n,"borderLeft",t);break}case"TH":""===n.cssInitial("textAlign")&&n.css("textAlign","center"),0===n.borderTopWidth&&Io(n,"borderTop",t),0===n.borderBottomWidth&&Io(n,"borderBottom",t)}const y=n.cssInitial("width"),S=void 0===m[v]||"auto"===m[v],E=n.bounds.width;if(0===i||S||!e.layoutFixed)if(""===y||"auto"===y)void 0===m[v]?(m[v]=y||"0px",g[v]=0):i===b-1&&S&&0===g[v]&&(g[v]=E);else{const t=vo(y),e=xo(m[v]);(S||E<g[v]||E===g[v]&&(e&&t||t&&vo(m[v])&&n.parseWidth(y)>=n.parseWidth(m[v])||e&&xo(y)&&n.parseWidth(y)>n.parseWidth(m[v])))&&(m[v]=y),(S||1===r.colSpan)&&(g[v]=E)}(n.length||n.inlineText)&&(f[i]+=E+l),h>0&&(n.modifyBox(16,0===v?l:h),n.modifyBox(4,0===o?h:l)),d>0&&(n.modifyBox(2,0===i?c:d),n.modifyBox(8,i+a<b?d:c)),n.data(To,"cellData",{colSpan:x,rowSpan:a})}),Ro(n),x=Math.max(x,s.length)}t.hasPX("width",!1)&&m.some(t=>vo(t))&&_o(m,(t,e)=>{if("auto"===t){const t=g[e];if(t>0)return po(t)}return t});let v=!1;if(m.every(t=>vo(t))){if(m.reduce((t,e)=>t+parseFloat(e),0)>1){let t=100;_o(m,e=>{const i=parseFloat(e);return t<=0?e="0px":t-i<0&&(e=go(t/100)),t-=i,e})}t.hasWidth||(e.expand=!0),v=!0}else if(m.every(t=>xo(t))){const i=m.reduce((t,e)=>t+parseFloat(e),0);if(t.hasWidth)if(i<t.width)_o(m,t=>"0px"!==t?parseFloat(t)/i*100+"%":t);else if(i>t.width&&(t.css("width","auto"),!e.layoutFixed))for(const e of t.cascade())e.css("width","auto");e.layoutFixed&&!t.hasPX("width")&&t.css("width",po(t.bounds.width))}let y=0;e.layoutType=(()=>{if(m.length>1){if(y=m.reduce((t,e)=>t+(vo(e)?parseFloat(e):0),0),e.layoutFixed&&m.reduce((t,e)=>t+(xo(e)?parseFloat(e):0),0)>=t.actualWidth)return 4;if(m.length>1&&m.some(t=>vo(t))||m.every(t=>xo(t)&&"0px"!==t))return 3;if(m.every(t=>t===m[0])){if(t.find(t=>t.hasHeight,{cascade:!0}))return e.expand=!0,3;if("auto"===m[0]){if(t.hasWidth)return 3;{const e=t.cascade(t=>"TD"===t.tagName);return e.length&&e.every(t=>wo(t.bounds.width,e[0].bounds.width))?0:3}}if(t.hasWidth)return 2}if(m.every(t=>"auto"===t||xo(t)&&"0px"!==t))return t.hasWidth||(e.expand=!0),1}return 0})();const S=t.find(t=>"CAPTION"===t.tagName);t.clear(),S&&(S.hasWidth||(S.textElement?S.hasPX("maxWidth")||S.css("maxWidth",po(S.bounds.width)):S.bounds.width>So(f)&&Po(S)),S.cssInitial("textAlign")||S.css("textAlign","center"),S.data(To,"cellData",{colSpan:x}),S.parent=t);const E=t.hasWidth;for(let i=0;i<b;i++){const n=p[i],s=n.length;for(let i=0;i<s;){const s=n[i],o=s.data(To,"cellData");if(o.placed){i+=o.colSpan;continue}const r=m[i];if(r)switch(e.layoutType){case 0:break;case 3:"auto"===r?y>=1?(Po(s),o.exceed=!E,o.downsized=!0):Ao(t,s,o):vo(r)?v?(o.percent=r,o.expand=!0):Po(s):xo(r)&&parseInt(r)>0?s.bounds.width>=parseInt(r)?(Po(s),o.expand=!1,o.downsized=!1):e.layoutFixed?(Ao(t,s,o),o.downsized=!0):(Po(s),o.expand=!1):(s.hasPX("width",!1)&&!s.percentWidth||Po(s),o.expand=!1);break;case 2:Ao(t,s,o);break;case 1:"auto"===r?o.flexible=!0:(e.layoutFixed?o.downsized=!0:Po(s),o.expand=!1);break;case 4:xo(r)||s.hide()}o.placed=!0,s.parent=t,i+=o.colSpan}if(s<x){const t=n[s-1].data(To,"cellData");t&&(t.spaceSpan=x-s)}}if(e.borderCollapse){const e=t.cssAsObject("borderTopColor","borderTopStyle","borderTopWidth"),i=t.cssAsObject("borderRightColor","borderRightStyle","borderRightWidth"),n=t.cssAsObject("borderBottomColor","borderBottomStyle","borderBottomWidth"),s=t.cssAsObject("borderLeftColor","borderLeftStyle","borderLeftWidth"),o=parseInt(e.borderTopWidth),r=parseInt(i.borderRightWidth),a=parseInt(n.borderBottomWidth),l=parseInt(s.borderLeftWidth);let c=!1,h=!1,d=!1,u=!1;for(let t=0;t<b;t++){const f=p[t];for(let g=0;g<x;g++){const m=f[g];if("visible"===(null==m?void 0:m.css("visibility"))){if(0===t&&(m.borderTopWidth<o?(m.cssApply(e),m.unsetCache("borderTopWidth")):c=!0),t>=0&&t<b-1){const e=p[t+1][g];"visible"===(null==e?void 0:e.css("visibility"))&&e!==m&&(m.borderBottomWidth>e.borderTopWidth?e.css("borderTopWidth","0px",!0):m.css("borderBottomWidth","0px",!0))}if(t===b-1&&(m.borderBottomWidth<a?(m.cssApply(n),m.unsetCache("borderBottomWidth")):d=!0),0===g&&(m.borderLeftWidth<l?(m.cssApply(s),m.unsetCache("borderLeftWidth")):u=!0),g>=0&&g<x-1){const t=f[g+1];"visible"===(null==t?void 0:t.css("visibility"))&&t!==m&&(m.borderRightWidth>=t.borderLeftWidth?t.css("borderLeftWidth","0px",!0):m.css("borderRightWidth","0px",!0))}g===x-1&&(m.borderRightWidth<r?(m.cssApply(i),m.unsetCache("borderRightWidth")):h=!0)}}}(c||h||d||u)&&t.cssApply({borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"},!0)}e.rowCount=b,e.columnCount=x,t.data(To,"mainData",e)}}const Mo=squared.lib,{isLength:No}=Mo.css,{convertFloat:Lo}=Mo.util;var Wo;const Fo=squared.lib,{formatPX:Oo}=Fo.css,{maxArray:Do}=Fo.math,{getElementCache:Ho}=Fo.session,{hasBit:Xo,iterateReverseArray:zo}=Fo.util,Vo="html"===(null===(Wo=document.doctype)||void 0===Wo?void 0:Wo.name),Uo=["marginTop","borderTopWidth","paddingTop",2],jo=["marginBottom","borderBottomWidth","paddingBottom",8];function Go(t,e,i,n=0){let s;switch(e){case 2:s=t.actualRect("top")-i;break;case 16:s=t.actualRect("left")-i;break;case 8:s=i-t.actualRect("bottom");break;default:s=0}s-=n,s>0&&(t.renderAs||t).modifyBox(e,s)}function qo(t,e,i){if(!i||Yo(e,!0)){const[n,s,o,r]=i?Uo:jo;if(0===t[s])if(0===t[o]){let a=e;for(;Vo&&0===a[n]&&0===a[s]&&0===a[o]&&Zo(a);)if(i){const t=a.firstStaticChild;if(!Yo(t,i))break;a=t}else{const t=Qo(a);if(!t)break;a=t}const l=t[n],c=a[n],h=(t,e)=>t.setBox(r,{reset:1,adjustment:e});if(l>=0&&c>=0){const s=a.bounds.height;let o=!1;if(!Vo&&0===l&&c>0&&""===a.cssInitial(n))o=!0;else{const n=l>=c;if(0===s&&n&&a.textEmpty&&0===a.extensions.length)a.hide({collapse:!0});else{const s=a.registerBox(r);if(s){const e=s.getBox(r)[1];e>0&&(e>l&&h(t,e),s.setBox(r,{reset:1,adjustment:0}))}else if(0===a.getBox(r)[0])if(n)o=c>0;else if(t.documentBody){if(Ko(t,r),i&&(t.bounds.top>0&&(t.bounds.top=0,t.unset("box"),t.unset("linear")),t.layoutVertical)){const i=t.renderChildren[0];(a.positionStatic||a.top>=0&&!a.hasPX("bottom"))&&i!==e.outerMostWrapper&&(h(i,c),h(a,0),o=!0)}}else h(t,c),o=!0}}if(o){if(Ko(a,r),!i&&a.floating){const t=a.bounds;for(const e of a.actualParent.naturalChildren)e.floating&&e!==a&&e.intersectY(t,"bounds")&&Ko(e,r)}0!==s||a.every(t=>t.floating||!t.pageFlow)||Ko(a,i?8:2)}}else l<0&&c<0&&(i||(c<l&&h(t,c),Ko(a,r)))}else if(0===e[n]&&0===e[s]&&Zo(e)){let r=!0;for(;;){const a=i?e.firstStaticChild:e.lastStaticChild;if(!a||0!==a[n]||0!==a[s]||a.visibleStyle.background||!Zo(a))break;{const n=a[o];if(n>0){n>=t[o]?t.setBox(i?32:128,{reset:1}):r&&t.modifyBox(i?32:128,-n,!1);break}Yo(a,i)||(r=!1),e=a}}}}}function Yo(t,e){if(null===t||!t.styleElement||t.lineBreak)return!1;if(t.blockStatic)return!0;if(!t.floating){switch(t.display){case"table":case"list-item":return!0}if(void 0!==e){if(e){const e=t.firstStaticChild;return Yo(e)&&tr(e,!1)}{const e=t.lastStaticChild;return Yo(e)&&er(e,!1)}}}return!1}function $o(t,e,i,n){let s=1/0;if(t.nodeGroup&&t.some(t=>t.floating))for(const e of t.renderChildren)if(!e.floating){const i=e.linear.top;i<s&&(s=i,t=e)}if(s===1/0&&(s=t.linear.top),n){const o=Math.max(n.linear.top,e.linear.bottom);if(o<s)return[s-o-i,t]}return[Math.round(s-e.linear.bottom-i),t]}function Qo(t){let e;if(t.floatContainer){let i;const n=t.naturalChildren;for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.floating){if(void 0===e){const e=o.linear.bottom;i?e>i.linear.bottom&&(i=o):Math.ceil(o.linear.bottom)>=t.box.bottom&&(i=o)}else if(o.linear.bottom>=e.linear.bottom){e=o;break}}else if(void 0===e){if(i&&i.linear.bottom>o.linear.bottom){e=i;break}e=o}}void 0===e&&(e=i)}else e=t.lastStaticChild,(!Yo(t,!1)||t.hasHeight&&Math.floor(e.linear.bottom)<t.box.bottom)&&(e=void 0);return e}const Ko=(t,e)=>t.setBox(e,{reset:1}),Jo=(t,e)=>t.css("minHeight",Oo(Math.max(e,t.hasPX("minHeight",!1)?t.parseHeight(t.css("minHeight")):0))),Zo=(t,e=!0)=>(!e&&t.blockStatic||e&&t.length>0&&!t.floating)&&!t.layoutElement&&!t.tableElement&&"FIELDSET"!==t.tagName,tr=(t,e)=>!t.hasPX("height")&&0===t.borderBottomWidth&&0===t.paddingBottom&&Zo(t,e),er=(t,e)=>!t.hasPX("height")&&0===t.borderTopWidth&&0===t.paddingTop&&Zo(t,e);const ir={Accessibility:class extends ln{},Column:class extends ln{is(t){return t.blockDimension&&"table"!==t.display&&!t.layoutElement&&t.length>1}condition(t){return t.has("columnCount")||t.hasPX("columnWidth")}processNode(t,e){let i=[];const n=[i];let s=1/0,o=!1;t.each(t=>{var e;"all"===t.css("columnSpan")?(i.length?n.push([t]):i.push(t),i=[],n.push(i)):(t.textElement&&(null===(e=t.textBounds)||void 0===e?void 0:e.overflow)&&(s=NaN),t.multiline?o=!0:isNaN(s)||(s=Math.min(t.bounds.width,s)),i.push(t))}),0===i.length&&n.pop();const[r,a,l]=t.cssAsTuple("columnRuleStyle","columnRuleWidth","columnRuleColor"),c=t.box.width,h=t.toInt("columnCount"),d=t.parseWidth(t.css("columnWidth"));let u,f=t.parseWidth(t.css("columnGap"));const g=()=>isNaN(h)&&d>0?c/(d+f):1/0;f>0?u=Math.floor(g()):(f=(d>0&&!isNaN(s)&&s!==1/0?Math.max(s-d,0):0)+16,u=Math.ceil(g())),t.data(it.COLUMN,"mainData",{rows:n,columnCount:h,columnWidth:d,columnGap:f,columnSized:u,columnRule:{borderLeftStyle:r,borderLeftWidth:a,borderLeftColor:l},boxWidth:e.actualBoxWidth(c),multiline:o})}},CssGrid:Xs,Flexbox:Us,Grid:Js,List:no,Relative:class extends ln{is(t){return t.positionRelative&&!t.autoPosition||0!==ro(t.verticalAlign)}condition(){return!0}processNode(t){return{subscribe:!0}}postOptimize(t){const e=t.renderParent,i=ro(t.verticalAlign);let n=0,s=0,o=0,r=0;if(t.hasPX("top")?n=t.top:o=t.bottom,t.hasPX("left")?r=t.left:s=t.right,e.support.positionTranslation){let e=0,a=0;0!==r?e=r:0!==s&&(e=-s),0!==n?a=n:0!==o&&(a=-o),0!==i&&(a-=i),0!==e&&t.translateX(e,lo),0!==a&&t.translateY(a,lo)}else{let a=t;if((0!==n||0!==o||0!==i)&&e.layoutHorizontal&&e.support.positionRelative&&0===t.renderChildren.length){const i=this.application;a=t.clone(i.nextId,!0,!0),a.baselineAltered=!0,t.hide({hidden:!0}),this.cache.append(a,!1);const n=new qe(e,a,a.containerType,a.alignmentType),s=e.renderChildren.findIndex(e=>e===t);if(-1!==s&&(n.renderIndex=s+1),i.addLayout(n),t.parseUnit(t.css("textIndent"))<0){const i=t.documentId;e.renderEach(t=>{t.alignSibling("topBottom")===i?t.alignSibling("topBottom",a.documentId):t.alignSibling("bottomTop")===i&&t.alignSibling("bottomTop",a.documentId)})}if(t.baselineActive&&!t.baselineAltered)for(const i of e.horizontalRows||[e.renderChildren])if(i.includes(t)){const e=i.filter(e=>e.positionRelative&&e.length>0&&0!==ro(t.verticalAlign)),n=e.length;if(n){e.sort((t,e)=>{const i=t.linear.top,n=e.linear.top;return ao(i,n)?0:i<n?-1:1});for(let i=0;i<n;i++){const n=e[i];0===i?t.modifyBox(2,ro(n.verticalAlign)):n.modifyBox(2,n.linear.top-e[0].linear.top),n.setCacheValue("verticalAlign","0px")}}break}}else if(t.positionRelative&&t.naturalElement){const i=t.bounds,a=0!==n||0!==o,l=0!==r||0!==s;let c,h=!1;for(const d of t.actualParent.naturalChildren){if(d===t){if(h){if(a&&e.layoutVertical){const e=oo(t.boundingClientRect);0!==n?n-=e.top-i.top:(null==c?void 0:c.positionRelative)&&c.hasPX("top")?o+=i.bottom-e.bottom:o+=e.bottom-i.bottom}if(l&&e.layoutHorizontal&&""===t.alignSibling("leftRight")){const e=oo(t.boundingClientRect);0!==r?r-=e.left-i.left:(null==c?void 0:c.positionRelative)&&c.hasPX("right")?s+=i.right-e.right:s+=e.right-i.right}}else if(e.layoutVertical)if(0!==n)(null==c?void 0:c.blockStatic)&&c.positionRelative&&d.blockStatic&&(n-=c.top);else if(0!==o){1===d.getBox(2)[0]&&(o-=d.marginTop)}break}d.positionRelative&&d.renderParent===e&&(h=!0),d.pageFlow&&(c=d)}}0!==i&&a.modifyBox(2,-1*i),0!==n?a.modifyBox(2,n):0!==o&&a.modifyBox(2,-1*o),0!==r?a.autoMargin.left?a.modifyBox(4,-1*r):a.modifyBox(16,r):0!==s&&a.modifyBox(16,-1*s),a!==t&&a.setBoxSpacing()}}},Sprite:class extends ln{is(t){return 0===t.length&&t.hasWidth&&t.hasHeight}condition(t){const e=t.backgroundImage;if(""!==e&&(this.included(t.element)||!t.dataset.use)){const i=this.resource.getRawData(e)||this.resource.getImage(ho(e));if(i){const e=t.actualDimension,{backgroundPositionX:n,backgroundPositionY:s}=t.cssAsObject("backgroundPositionX","backgroundPositionY"),o=co(n+" "+s,e,{fontSize:t.fontSize,screenDimension:t.localSettings.screenDimension}),r=(o.left<0||uo.test(n))&&i.width>e.width,a=(o.top<0||uo.test(s))&&i.height>e.height;if((r||a)&&(r||0===o.left)&&(a||0===o.top))return t.data(it.SPRITE,"mainData",{image:i,position:o}),!0}}return!1}},Table:Bo,VerticalAlign:class extends ln{is(t){return t.length>0}condition(t){let e=!1,i=0,n=0;for(const s of t){if(!(s.positionStatic||s.positionRelative&&s.length))return!1;if(s.inlineVertical){const t=Lo(s.verticalAlign);0!==t&&(e=!0),isNaN(n)||(0===n?n=t:n!==t&&(n=NaN)),i++}else n=NaN}return e&&isNaN(n)&&i>1&&je.linearData(t.children).linearX}processNode(t){return t.each(t=>{(t.inlineVertical&&No(t.verticalAlign)||t.imageElement||t.svgElement)&&(t.baselineAltered=!0)}),{subscribe:!0}}postConstraints(t){if(t.layoutHorizontal)for(const e of t.horizontalRows||[t.renderChildren]){const t=[];let i,n=1/0;for(const s of e){const e=s.linear.top;s.inlineVertical&&e<=n&&(e<n&&(t.length=0),t.push(s),n=e),s.baselineActive&&(i=s)}if(t.length){const n=t[0],s=n.linear.top;for(const n of e)n!==i&&(n.inlineVertical&&(t.includes(n)?i&&(n.imageElement||n.svgElement)&&i.documentId===n.alignSibling("baseline")&&n.setBox(2,{reset:1,adjustment:i.linear.top-n.linear.top}):(No(n.verticalAlign)||void 0===i)&&(n.setBox(2,{reset:1,adjustment:n.linear.top-s}),n.baselineAltered=!0)),n.baselineAltered&&n.setCacheValue("verticalAlign","0px"));i&&(i.setBox(2,{reset:1,adjustment:i.linear.top-s+Math.min(0,n.parseHeight(n.cssInitial("verticalAlign")))}),i.baselineAltered=!0)}}else t.each(t=>t.baselineAltered=!1)}},WhiteSpace:class extends ln{afterBaseLayout(){var t,e;const i=this.application,n=new Set,s=i.session.clearMap;for(const i of this.cacheProcessing)if(i.naturalElement&&!i.hasAlign(4)){const o=i.naturalChildren,r=o.length;if(0===r||0===i.id)continue;const a=i.pageFlow,l=a&&Yo(i,!0)&&!i.actualParent.layoutElement;let c,h;for(let a=0;a<r;a++){const d=o[a];if(d.pageFlow&&(l&&(d.floating?h?d.linear.bottom>=h.linear.bottom&&(h=d):h=d:(void 0===c&&(c=d),h=d)),Yo(d,!0)))if(a>0){const o=d.previousSiblings({floating:!1}),l=o.length;if(l){let h=!1;const u=o[l-1];if(Yo(u,!1)){let e=u.marginBottom,i=d.marginTop;if(u.marginTop<0&&0===u.bounds.height){const t=Math.min(e,u.marginTop);if(t<0){Math.abs(t)<i?d.modifyBox(2,t):Ko(d,2),n.add(u.id),u.hide({collapse:!0});continue}}else if(d.marginBottom<0&&0===d.bounds.height){const t=Math.min(i,d.marginBottom);if(t<0){Math.abs(t)<e?u.modifyBox(8,t):Ko(u,8),n.add(d.id),d.hide({collapse:!0});continue}}let o=!1,r=u;for(;tr(r,!0);){let t=Qo(r);if(0===(null==t?void 0:t.getBox(8)[0])){let i=t.marginBottom,n=t;for(;0===n.bounds.height&&!n.pseudoElement;){i=Math.max(n.marginTop,n.marginBottom,i),Ko(n,2);const e=n.previousSibling;if(!e)break;if(e.marginBottom>=i)Ko(n,8),t=e,i=e.marginBottom,n=e;else{if(e.bounds.height>0)break;Ko(e,8),n=e}}if(Ko(t,8),i>e)e=i,o=!0;else if(0===i&&0===e){r=t;continue}}break}for(r=d;er(r,!0);){let t=r.firstStaticChild;if(Yo(t,!0)&&0===t.getBox(2)[0]){let e=t.marginTop,n=t;for(;0===n.bounds.height&&!n.pseudoElement;){e=Math.max(n.marginTop,n.marginBottom,e),Ko(n,8);const i=n.nextSibling;if(!i)break;if(i.marginTop>=e)Ko(n,2),t=i,e=i.marginTop,n=i;else{if(i.bounds.height>0)break;Ko(i,2),n=i}}if(Ko(t,2),e>i)i=e,h=!0;else if(0===e&&0===i){r=t;continue}}break}if(e>0&&(i>0?i<=e?h&&Xo(d.overflow,64)||(h&&(h=!1),Ko(d,2),0===d.bounds.height&&e>=d.marginBottom&&Ko(d,8)):o&&Xo(u.overflow,64)||(o&&(o=!1),Ko(u,8),0===u.bounds.height&&i>=u.marginTop&&Ko(u,2)):0===d.bounds.height&&(i=Math.min(i,d.marginBottom),i<0&&(u.modifyBox(8,i),d.hide({collapse:!0})))),i>0&&u.floatContainer&&0===d.getBox(2)[1]&&!Xo(u.overflow,64)){let e=!1;if(0===u.bounds.height)e=!0;else{let i;if(zo(u.naturalElements,t=>!!s.has(t)||(t.floating?(t.linear.bottom>Math.ceil(u.bounds.bottom)&&(i=t.float),!0):void 0)),i){const n=null===(t=Ho(u.element,"styleMap::after",u.sessionId))||void 0===t?void 0:t.clear;e=!("both"===n||n===i)}}e&&d.modifyBox(2,u.box.top-Do(u.naturalElements.map(t=>t.linear.bottom)),!1)}if(h){let t=0;if(0===u.bounds.height){const e=u.previousSibling;t=e&&Yo(e,!1)?Math.max(e.getBox(8)[1],e.marginBottom):0}i>t&&(d.registerBox(2)||d).setCacheValue("marginTop",i)}if(o){let t=0;if(0===d.bounds.height){const e=d.nextSibling;t=e&&Yo(e,!0)?Math.max(e.getBox(2)[1],e.marginTop):0}e>=t&&(u.registerBox(8)||u).setCacheValue("marginBottom",e)}}else if(0===d.bounds.height){const{marginTop:t,marginBottom:e}=d;t>0&&e>0&&(t<e?Ko(d,2):a===r-1?(d.setCacheValue("marginBottom",t),Ko(d,2)):Ko(d,8))}if(!h&&d!==c&&o.length>1&&(i.layoutVertical||(null===(e=d.renderParent)||void 0===e?void 0:e.layoutVertical))){const t=o.pop();t.floating&&Math.floor(t.bounds.top)===Math.floor(d.bounds.top)&&d.modifyBox(2,-t.bounds.height,!1)}}}else if(0===d.bounds.height){const{marginTop:t,marginBottom:e}=d;t>0&&e>0&&(t<e&&d.setCacheValue("marginTop",e),Ko(d,8))}}if(a&&!Xo(i.overflow,64)&&"FIELDSET"!==i.tagName&&((null==c?void 0:c.naturalElement)&&qo(i,c,!0),(null==h?void 0:h.naturalElement)&&(qo(i,h,!1),h.marginTop<0))){const t=h.bounds.height+h.marginBottom+h.marginTop;t<0&&i.modifyBox(128,t,!1)}}for(const t of i.processing.excluded)if(t.lineBreak&&!t.lineBreakTrailing&&!s.has(t)&&!n.has(t.id)){let e=!1;const i=t.previousSiblings({floating:!1});if(i.length){const s=t.actualParent,o=t.nextSiblings();if(o.length){let r,a,l=i.pop(),c=o.pop(),h=0;if(l.rendered&&c.rendered){const o=l.inlineStatic&&c.inlineStatic;if(o&&0===i.length){n.add(t.id);continue}if(!l.multiline&&l.has("lineHeight")){const t=Math.floor((l.lineHeight-l.bounds.height)/2);t>0&&(h+=t)}if(!c.multiline&&c.has("lineHeight")){const t=Math.round((c.lineHeight-c.bounds.height)/2);t>0&&(h+=t)}o&&(r=i[0],1===i.length&&(r=r.lineBreak?t:void 0),null==r||r.setBounds(!1));let d=l.renderParent,u=c.renderParent;if(d!==u){for(;d&&d!==s;)l=d,d=l.renderParent;for(;u&&u!==s;)c=u,u=c.renderParent}[a,c]=$o(c,l,h,r),a>=1&&(c.visible?(c.modifyBox(2,a),e=!0):l.visible&&(l.modifyBox(8,a),e=!0))}else[a,c]=$o(c,l,h),a>=1&&((c.lineBreak||c.excluded)&&s.lastChild===c?(s.modifyBox(128,a),e=!0):(l.lineBreak||l.excluded)&&s.firstChild===l&&(s.modifyBox(32,a),e=!0))}else if(s.visible&&!s.preserveWhiteSpace&&"CODE"!==s.tagName){if(s.documentRoot||0!==s.ascend({condition:t=>t.documentRoot,attr:"outerWrapper"}).length){if(o.length){const t=o[o.length-1],e=(t.lineBreak||t.excluded?t.linear.bottom:t.linear.top)-s.box.top;0!==e&&(t.rendered||s.visibleStyle.background?s.modifyBox(32,e):s.hasHeight||Jo(s,e))}}else{const t=i[i.length-1],e=0===t.bounds.height&&t.length?je.outerRegion(t):t.linear,n=s.box.bottom-(t.lineBreak||t.excluded?e.top:e.bottom);0!==n&&(t.rendered||s.visibleStyle.background?s.modifyBox(128,n):s.hasHeight||Jo(s,n))}e=!0}if(e){for(const t of i)n.add(t.id);for(const t of o)n.add(t.id)}}}}afterConstraints(){for(const t of this.cacheProcessing){if(t.naturalChild&&t.styleElement&&t.inlineVertical&&t.pageFlow&&!t.positioned&&!t.actualParent.layoutElement){const e=t.outerMostWrapper,i=e.renderParent;if(!1===(null==i?void 0:i.hasAlign(4))){if(t.blockDimension&&!t.floating)if(i.layoutVertical){const n=i.renderChildren,s=n.findIndex(t=>t===e);if(-1!==s){if(!t.lineBreakLeading&&!t.baselineAltered){const t=n[s-1];(null==t?void 0:t.pageFlow)&&Go(e,2,t.actualRect("bottom"),t.getBox(8)[1])}if(!t.lineBreakTrailing){const t=n[s+1];(null==t?void 0:t.pageFlow)&&t.styleElement&&!t.inlineVertical&&Go(e,8,t.actualRect("top"),t.getBox(2)[1])}}}else if(!t.baselineAltered){const n=i.horizontalRows,s=t=>t.pageFlow&&t.blockDimension&&!t.floating;let o;if(n&&n.length>1)t:{let t=-1/0;const i=n.length;for(let r=0;r<i;r++){const i=n[r],a=i.length;for(let n=0;n<a;n++)if(e===i[n]){r>0?Go(e,2,t):o=i;break t}for(const e of i){const i=e.innerMostWrapped;s(i)&&(t=Math.max(i.actualRect("bottom"),t))}if(t===-1/0)break}}else(i.layoutHorizontal||i.hasAlign(1024))&&(o=i.renderChildren);if(o){let i=[];for(const t of o)t.nodeGroup?i=i.concat(t.cascade(t=>t.naturalChild)):i.push(t.innerWrapped?t.innerMostWrapped:t);const n=t.actualParent,r=t.actualRect("top");let a=-1/0;for(const t of n.naturalChildren){if(i.includes(t))break;if(t.lineBreak||t.block)a=-1/0;else{if(t.excluded)continue;s(t)&&(a=Math.max(t.actualRect("bottom"),a))}}a!==-1/0&&r>a&&Go(e,2,a)}}if(!i.layoutVertical&&!e.alignParent("left")){const n=e.alignSibling("leftRight");if(""!==n){const t=i.renderChildren.find(t=>t.documentId===n);(null==t?void 0:t.inlineVertical)&&Go(e,16,t.actualRect("right"))}else{let i=t;for(;;){const t=i.siblingsLeading;if(t.length&&!t.some(t=>t.lineBreak||t.excluded&&t.blockStatic)){const n=t[0];if(n.inlineVertical)Go(e,16,n.actualRect("right"));else if(n.floating){i=n;continue}}break}}}}}if(t.floatContainer&&t.layoutVertical){const e=[];for(const i of t.naturalChildren)if(i.pageFlow)if(i.floating)e.push(i);else if(e.length){const n=i.outerMostWrapper;let s=n.renderParent;if(s){const[o,r]=i.getBox(2);if((0===o?i.marginTop:0)+r>0){const i=Math.floor(t.bounds.top);for(const o of e)if(i<=Math.floor(o.bounds.top)){let e=o.outerMostWrapper.renderParent;if(e){s=s.ascend({error:t=>t.naturalChild,attr:"renderParent"}).pop()||s,e=e.ascend({error:t=>t.naturalChild,attr:"renderParent"}).pop()||e,s!==e&&n.modifyBox(2,-1*(e!==t?e:o).linear.height,!1);break}}}}e.length=0}}}}}},nr={constant:nt,enumeration:ve};t.Application=j,t.ApplicationUI=class extends j{constructor(t,i,n,s,o){super(t,i,n,s,o),this.session={cache:new e,excluded:new e,extensionMap:new Map,clearMap:new Map,active:[],targetQueue:new Map},this.builtInExtensions={},this.extensions=[],this._layouts=[];const r=this.controllerHandler.localSettings;this._localSettings=r,this._excluded=r.unsupported.excluded}finalize(){var t;if(this.closed)return;const{controllerHandler:e,session:i}=this,n=i.cache,s=this.extensions,o=this._layouts;for(const[t,e]of i.targetQueue.entries()){const i=this.resolveTarget(t.dataset.target);i?(t.render(i),this.addLayoutTemplate(i,t,e)):void 0===t.renderParent&&n.remove(t)}const r=n.children,a=r.length,l=Array(a);let c=0;for(let t=0;t<a;t++){const e=r[t];e.renderParent&&e.visible&&(e.hasProcedure(xe.LAYOUT)&&e.setLayout(),e.hasProcedure(xe.ALIGNMENT)&&e.setAlignment(),l[c++]=e)}l.length=c,e.optimize(l);for(const t of s)for(const e of t.subscribers)t.postOptimize(e);const h=[];for(const t of l)if(t.hasResource(be.BOX_SPACING)&&t.setBoxSpacing(),t.documentRoot){const e=t.innerMostWrapped.dataset.layoutName;e&&h.push({node:t,layoutName:e})}for(const t of s)t.beforeCascade();const d=this._localSettings.layout.baseTemplate;for(const i of h){const n=i.node;if(n.documentRoot&&0===n.renderChildren.length&&!n.inlineText){if(n.naturalElements.length&&n.naturalElements.every(t=>t.documentRoot))continue}const s=n.renderParent.renderTemplates;s&&this.saveDocument(i.layoutName,d+e.cascadeDocument(s,0),n.dataset.pathname,(null===(t=n.renderExtension)||void 0===t?void 0:t.some(t=>t.documentBase))?0:void 0)}this.resourceHandler.finalize(o),e.finalize(o);for(const t of s)t.afterFinalize();si("__squared.pseudo"),this.closed=!0}copyToDisk(t,e){super.copyToDisk(t,this.createAssetOptions(e))}appendToArchive(t,e){super.appendToArchive(t,this.createAssetOptions(e))}saveToArchive(t,e){super.saveToArchive(t,this.createAssetOptions(e))}reset(){super.reset();for(const t of this.rootElements)t.dataset.iteration="";const t=this.session;t.cache.reset(),t.excluded.reset(),t.extensionMap.clear(),t.targetQueue.clear(),this._layouts.length=0}conditionElement(t,e){if(!this._excluded.has(t.tagName)){if(this.controllerHandler.visibleElement(t,e)||this._cascadeAll)return!0;if(!e){switch(Ze(t).position){case"absolute":case"fixed":return this.isUseElement(t)}let e=t.parentElement;for(;e;){if("none"===Ze(e).display)return this.isUseElement(t);e=e.parentElement}const i=this.controllerHandler;return ui(t.children,t=>i.visibleElement(t))===1/0||this.isUseElement(t)}}return!1}insertNode(t,e,i){if(!ni(t)){if(this.conditionElement(t,i))return this.controllerHandler.applyDefaultStyles(t),this.createNode({parent:e,element:t,append:!1});{const i=this.createNode({parent:e,element:t,append:!1});return i.visible=!1,i.excluded=!0,i}}if(_i(t.textContent)||(null==e?void 0:e.preserveWhiteSpace)&&("PRE"!==e.tagName||0===e.element.childElementCount)){this.controllerHandler.applyDefaultStyles(t);const i=this.createNode({parent:e,element:t,append:!1});return e&&(i.cssApply(e.textStyle),i.fontSize=e.fontSize),i}}saveDocument(t,e,i,n){if(di(e)){const s={pathname:i?bi(i,"/"):this._localSettings.layout.pathName,filename:t,content:e,index:n},o=this._layouts;void 0!==n&&n>=0&&n<o.length?o.splice(n,0,s):o.push(s)}}renderNode(t){return 0===t.itemCount?this.controllerHandler.renderNode(t):this.controllerHandler.renderNodeGroup(t)}addLayout(t){const e=t.renderType;if(hi(e,512)&&(hi(e,8)?t=this.processFloatHorizontal(t):hi(e,16)&&(t=this.processFloatVertical(t))),0!==t.containerType){const e=this.renderNode(t);if(e)return this.addLayoutTemplate(e.parent||t.parent,t.node,e,t.renderIndex)}return!1}addLayoutTemplate(t,e,i,n=-1){if(i){if(e.renderExclude)e.hide({remove:!0}),e.excluded=!0;else if(e.renderParent){const s=gi(t,"renderTemplates");n>=0&&n<t.renderChildren.length?(t.renderChildren.splice(n,0,e),s.splice(n,0,i)):(t.renderChildren.push(e),s.push(i))}else this.session.targetQueue.set(e,i);return!0}return!1}createNode(t){const e=this.processing,{element:i,parent:n,children:s}=t,o=new this.Node(this.nextId,e.sessionId,i,this.controllerHandler.afterInsertNode);if(n){o.depth=n.depth+1,!n.naturalElement||i&&null!==i.parentElement||(o.actualParent=n);const e=t.replace;e&&n.appendTry(e,o,!1)&&(e.parent=o,o.innerWrapped=e)}if(s)for(const t of s)t.parent=o;return!1!==t.append&&e.cache.append(o,!0===t.delegate,!0===t.cascade),o}createCache(t){const e=this.createRootNode(t);if(e){const t=this.controllerHandler,i=this._cache,n=e.parent,s={},o=new Set,r=[];let a=!1;e.documentBody&&(n.naturalChild=!0,n.visible=!1,n.exclude({resource:be.FONT_STYLE|be.VALUE_STRING,procedure:xe.ALL}),i.append(n)),e.originalRoot=!0,e.documentParent=n;for(const t of i)if(t.styleElement){const e=t.element;if(t.length){const i=t.cssInitial("textAlign");switch(i){case"center":case"right":case"end":wi(s,e,t.id,"text-align","left",i)}}if(t.positionRelative)for(const i of $e)t.hasPX(i)&&(wi(s,e,t.id,i,"auto",t.css(i)),a=!0);"rtl"===t.dir&&(e.dir="ltr",o.add(e))}!a&&o.size&&(a=!0);for(const t of this.processing.excluded)t.pageFlow||t.cssTry("display","none");n.setBounds();for(const t of i)t.pseudoElement?r.push(t):t.setBounds(void 0===s[t.id]&&!a);if(r.length){const t=[];for(const e of r){const i=e.actualParent.element;let n,s=i.id;e.pageFlow&&(""===s&&(s="__squared_"+Math.round(Math.random()*(new Date).getTime()),i.id=s),n=ti(`#${s+Si(e.element,e.sessionId)} { display: none !important; }`)),e.cssTry("display",e.display)&&t.push({item:e,id:s,parentElement:i,styleElement:n})}for(const e of t)e.item.setBounds(!1);for(const e of t){const t=e.styleElement;if(e.id.startsWith("__squared_")&&(e.parentElement.id=""),t)try{document.head.removeChild(t)}catch(t){}e.item.cssFinally("display")}}for(const t of this.processing.excluded)t.lineBreak||(t.setBounds(),t.saveAsInitial()),t.pageFlow||t.cssFinally("display");for(const t of i){if(t.styleElement){const e=t.element,i=s[t.id];if(i)for(const t in i)e.style.setProperty(t,i[t]);o.has(e)&&(e.dir="rtl")}t.saveAsInitial()}return t.evaluateNonStatic(e,i),t.sortInitialCache(),!0}return!1}afterCreateCache(t){const e=t.dataset,{filename:i,iteration:n}=e,s=di(i)&&i.replace(RegExp(`\\.${this._localSettings.layout.fileExtension}$`),"")||t.id||`document_${this.length}`,o=(n?parseInt(n):-1)+1,r=ai(o>1?`${s}_${o}`:s,!0);e.iteration=""+o,e.layoutName=r,this.setBaseLayout(),this.setConstraints(),this.setResources()}resolveTarget(t){if(di(t)){for(const e of this._cache)if(e.elementId===t||e.controlId===t)return e;for(const e of this.session.cache)if(e.elementId===t||e.controlId===t)return e}}toString(){var t;return(null===(t=this._layouts[0])||void 0===t?void 0:t.content)||""}cascadeParentNode(t,e,i){var n;const s=this.insertNode(t);if(s&&("none"!==s.display||0===e||s.outerExtensionElement)){if(s.depth=e,0===e){this._cache.append(s);const t=this.extensionManager;for(const e of s.extensions)if(null===(n=t.retrieve(e))||void 0===n?void 0:n.cascadeAll){this._cascadeAll=!0;break}}const o=this.controllerHandler;if(s.excluded&&null===s.outerExtensionElement||o.preventNodeCascade(t))return s;const r=this.processing.sessionId,a=this.createPseduoElement(t,"::before",r),l=this.createPseduoElement(t,"::after",r),c=t.childNodes,h=c.length,d=Array(h),u=Array(t.childElementCount);let f=!0,g=0,p=0;for(let t=0;t<h;t++){const n=c[t];let r;n===a?(r=this.insertNode(a,void 0,"::before"),r&&(s.innerBefore=r,r.textEmpty||(r.inlineText=!0),f=!1)):n===l?(r=this.insertNode(l,void 0,"::after"),r&&(s.innerAfter=r,r.textEmpty||(r.inlineText=!0),f=!1)):"#"===n.nodeName.charAt(0)?ni(n)&&(r=this.insertNode(n,s)):o.includeElement(n)&&(i&&Ri(n.dataset.use,i).some(t=>t.init(n)),this.rootElements.has(n)?(r=this.insertNode(n),r&&(r.documentRoot=!0,r.visible=!1,r.excluded=!0),f=!1):(r=this.cascadeParentNode(n,e+1,i),!1===(null==r?void 0:r.excluded)&&(f=!1)),r&&(u[p++]=r)),r&&(r.childIndex=g,r.naturalChild=!0,d[g++]=r)}d.length=g,u.length=p,s.naturalChildren=d,s.naturalElements=u,this.cacheNodeChildren(s,d,f),this.userSettings.createQuerySelectorMap&&p>0&&(s.queryMap=this.createQueryMap(u))}return s}cacheNodeChildren(t,e,i){const n=e.length;if(n){const s=this._cache;let o=[],r=[];if(n>1){let a=e[0],l=!1;for(let c=0,h=0;c<n;c++){const d=e[c];d.excluded?this.processing.excluded.append(d):d.plainText&&i||(d.containerIndex=h++,d.parent=t,s.append(d)),d.pageFlow&&(d.floating&&(l=!0),c>0&&(r.push(d),d.lineBreak&&(e[c-1].lineBreakTrailing=!0)),d.excluded||(d.siblingsLeading=o,a.siblingsTrailing=r,o=[],r=[],a=d),c<n-1&&(o.push(d),d.lineBreak&&(e[c+1].lineBreakLeading=!0))),d.actualParent=t}a.siblingsTrailing=r,t.floatContainer=l}else{const i=e[0];i.excluded?this.processing.excluded.append(i):i.plainText||(i.siblingsLeading=o,i.siblingsTrailing=r,i.parent=t,i.containerIndex=0,s.append(i),t.floatContainer=i.floating),i.actualParent=t}}else i=!t.textEmpty;t.inlineText=i}createPseduoElement(t,e,i){let n=yi(t,"styleMap"+e,i),s=0;if("Q"===t.tagName){void 0===n&&(n={},Ei(t,"styleMap"+e,i,n));let o=n.content;if("string"==typeof o&&""!==o||(o=Ze(t,e).getPropertyValue("content")||("::before"===e?"open-quote":"close-quote"),n.content=o),/-quote$/.test(o)){let e=t.parentElement;for(;"Q"===(null==e?void 0:e.tagName);)s++,e=e.parentElement}}if(n){let o=n.content;if(o){const r=mi(o,'"');let a=!1;switch(n.position){case"absolute":case"fixed":a=!0}const l=()=>{if(!a&&""!==r){const e=t.childNodes[t.childNodes.length-1];if(ni(e))return!/\s+$/.test(e.textContent)}return!1};if(""===r.trim()){const i=t=>{if((t||0===ri(n.width))&&0===ri(n.height)){for(const t in n){if(/(padding|Width|Height)/.test(t)&&ri(n[t])>0)return!0;if(!a&&/^margin/.test(t)&&0!==ri(n[t]))return!0}return!1}return!0};if("::after"===e){if(!l()&&!i(!0))return}else{const e=t.childNodes,s=e.length;for(let t=0;t<s;t++){const i=e[t];if(ni(i)){if(""!==i.textContent.trim())break}else if(i instanceof HTMLElement){const t=Ze(i);switch(t.getPropertyValue("position")){case"fixed":case"absolute":continue}if("none"!==t.getPropertyValue("float"))return;break}}switch(n.display){case void 0:case"block":case"inline":case"inherit":case"initial":if(!i(!1))return}}}else if("inherit"===o){let e=t;do{if(o=Ze(e).getPropertyValue("content"),"inherit"!==o)break;e=e.parentElement}while(e)}const c=Ze(t);for(const t of Qe)void 0===n[t]&&(n[t]=c[t]);let h="",d="";switch(o){case"normal":case"none":case"initial":case"inherit":case"unset":case"no-open-quote":case"no-close-quote":case'""':break;case"open-quote":"::before"===e&&(d=s%2==0?"“":"‘");break;case"close-quote":"::after"===e&&(d=s%2==0?"”":"’");break;default:if(xi.URL.test(o)){d=ei(o);const t=ci(d,".").toLowerCase(),e=this._localSettings.supported.imageFormat;"*"===e||e.includes(t)?h="img":d=""}else{let n,s=!1;for(;null!==(n=ki.exec(o));){const o=n[1];if(o)d+=ii(t,o.trim());else if(n[2]||n[5]){const s="counter"===n[2],[o,r]=s?[n[3],n[4]||"decimal"]:[n[6],n[8]||"decimal"],a=(Ci(t,o,e,i,0)||0)+(Ti(c.getPropertyValue("counter-reset"),o,0)||0),l=[];let h,u=t,f=a,g=!1;const p=(t,e)=>{const i=l.length;0===i?f+=t:(g||e)&&(l[i-1]+=t)},m=t=>{void 0===Ti(Ze(t).getPropertyValue("counter-reset"),o)&&ui(t.children,t=>{if("__squared.pseudo"!==t.className){let n=Ci(t,o,e,i);n&&p(n,!0);const s=Ze(t);if(n=Ti(s.getPropertyValue("counter-increment"),o),n&&p(n,!1),n=Ti(s.getPropertyValue("counter-reset"),o),void 0!==n)return!0;m(t)}})};for(;;){if(g=!1,u.previousElementSibling)u=u.previousElementSibling,m(u);else{if(!u.parentElement)break;u=u.parentElement,g=!0}if("__squared.pseudo"!==u.className){const t=Ci(u,o,e,i);t&&p(t,!0);const n=Ze(u),r=Ti(n.getPropertyValue("counter-increment"),o);r&&p(r,!1);const a=Ti(n.getPropertyValue("counter-reset"),o);if(void 0!==a){if(void 0===h&&(f+=a),h=u,s)break;g&&l.push((t||0)+a)}}}if(h){if(!s&&l.length>1){l.reverse(),l.splice(1,1);for(const t of l)d+=Ke(r,t,!0)+n[7]}}else f=a;d+=Ke(r,f,!0)}else n[9]&&(d+=n[9]);s=!0}s||(d=o),ki.lastIndex=0}}if(void 0===n.display&&(n.display="inline"),d||'""'===o){""===h&&(h=/^(inline|table)/.test(n.display)?"span":"div");const s=function(t,e="span",i=-1){const n=document.createElement(e);return n.className="__squared.pseudo",n.style.setProperty("display","none"),i>=0&&i<t.childNodes.length?t.insertBefore(n,t.childNodes[i]):t.appendChild(n),n}(t,h,"::before"===e?0:-1);if("img"===h){s.src=d;const t=this.resourceHandler.getImage(d);t&&(void 0===n.width&&t.width>0&&(n.width=Je(t.width)),void 0===n.height&&t.height>0&&(n.height=Je(t.height)))}else'""'!==o&&(s.innerText=d);for(const t in n)"display"!==t&&(s.style[t]=n[t]);return Ei(s,"pseudoElement",i,e),Ei(s,"styleMap",i,n),s}}}}setBaseLayout(){const{controllerHandler:t,processing:e,session:i}=this,{extensionMap:n,clearMap:s}=i,o=e.cache,r=e.node,a=new Map;let l=this.extensions.filter(t=>!t.eventOnly);{let t=0;const e=(t,e,i)=>{var n;return(null===(n=a.get(t))||void 0===n?void 0:n.set(e,i))||a.set(t,new Map([[e,i]]))},i=t=>-1*t-2;e(-1,0,r.parent);for(const i of o)if(i.length){const n=i.depth;if(e(n,i.id,i),t=Math.max(n,t),i.floatContainer){const t=new Set,e={};for(const n of i.naturalChildren)if(n.pageFlow){const i=n.floating;if(t.size){const o=n.css("clear");if("none"!==o){if(!i){let i;switch(o){case"left":i=[e.left];break;case"right":i=[e.right];break;case"both":i=[e.left,e.right]}if(i)for(const s of i)if(s){const i=s.float;t.has(i)&&Math.ceil(n.bounds.top)>=s.bounds.bottom&&(t.delete(i),e[i]=void 0)}}(t.has(o)||"both"===o)&&(s.set(n,2===t.size?"both":o),i||n.setBox(2,{reset:1}),t.clear(),e.left=void 0,e.right=void 0)}}if(i){const i=n.float;t.add(i),e[i]=n}}}}for(let e=0;e<t;e++)a.set(i(e),new Map);o.afterAppend=(t,n=!1)=>{var s;if(e(i(t.depth),t.id,t),n&&t.length)for(const n of t.cascade())if(n.length){const t=n.depth;null===(s=a.get(t))||void 0===s||s.delete(n.id),e(i(t),n.id,n)}}}for(const t of this.extensions)t.beforeBaseLayout();for(const e of a.values())for(const i of e.values()){if(0===i.length)continue;const e=i.floatContainer,o=i.renderExtension,r=i.duplicate(),a=r.length;for(let i=0;i<a;i++){let c=r[i];if(c.rendered||!c.visible)continue;let h=c.parent;if(a>1&&i<a-1&&c.pageFlow&&(0===h.alignmentType||h.hasAlign(2)||c.hasAlign(8192))&&!h.hasAlign(4)&&!c.nodeGroup&&c.hasSection(me.DOM_TRAVERSE)){const n=[],o=[];let l,d,u=i,f=0;h.layoutVertical&&c.hasAlign(8192)&&(n.push(c),u++,f++);t:{let t=!1;for(;u<a;u++,f++){const i=r[u];if(i.pageFlow){if(i.labelFor&&!i.visible){f--;continue}if(e){if(t){s.get(i)&&(t=!1)}i.floating&&(t=!0)}if(0===f){const t=i.siblingsTrailing[0];if(t){!Bi(i)||t.alignedVertically([i])>0?o.push(i):n.push(i);continue}}const r=i.siblingsLeading[0];if(!r)break t;{const a=n.length>0;if(e){const e=i.alignedVertically(a?n:o,s,a);if(e>0){if(a){if(e<4&&t&&!i.siblingsLeading.some(t=>t.lineBreak&&!s.has(t))){if(!i.floating||r.floating&&i.bounds.top<Math.floor(r.bounds.bottom)){let e=-1/0;if(!i.floating)for(const t of n)t.floating&&(e=Math.max(e,t.bounds.bottom));if(!i.floating&&i.bounds.top<Math.floor(e)||t){if(n.push(i),!i.floating&&Math.ceil(i.bounds.bottom)>e)break t;continue}}}else switch(e){case 6:case 7:s.has(i)||s.set(i,"both")}break t}if(!Ii(i,n,o))break t}else if(!Ai(i,n,o))break t}else if(i.alignedVertically(a?n:o,void 0,a)>0){if(!Ii(i,n,o))break t}else if(!Ai(i,n,o))break t}}else if(i.autoPosition){const t=o.length;if(t){o[t-1].blockStatic&&o.push(i);break}n.push(i)}}}let g=n.length;g>1?(l=t.processTraverseHorizontal(new qe(h,c,0,0,n),r),d=n[g-1]):(g=o.length,g>1&&(l=t.processTraverseVertical(new qe(h,c,0,0,o),r),d=o[g-1],Bi(d)&&d!==r[a-1]&&d.addAlign(8192)));let p=!1;l?this.addLayout(l)&&(p=!0,h=c.parent):p=!0,p&&d===r[a-1]&&h.removeAlign(2)}if(c.removeAlign(8192),i===a-1&&h.removeAlign(2),c.renderAs&&h.appendTry(c,c.renderAs,!1)&&(c.hide(),c=c.renderAs,c.positioned&&(h=c.parent)),!c.rendered&&c.hasSection(me.EXTENSION)){const t=n.get(c.id),e=t?o?o.concat(t):t:o;if(e){let t=!1;for(const i of e){const e=i.processChild(c,h);if(e){const{output:n,renderAs:s,outputAs:o}=e;if(n&&this.addLayoutTemplate(e.outerParent||h,c,n),s&&o&&this.addLayoutTemplate(e.parentAs||h,s,o),h=e.parent||h,e.subscribe&&i.subscribers.add(c),t=!0===e.next,e.complete||t)break}}if(t)continue}if(c.styleElement){let e=!1;for(const i of Ri(c.dataset.use,l))if(i.is(c)&&i.condition(c,h)&&(void 0===t||!t.includes(i))){const t=i.processNode(c,h);if(t){const{output:n,renderAs:s,outputAs:o}=t;if(n&&this.addLayoutTemplate(t.outerParent||h,c,n),s&&o&&this.addLayoutTemplate(t.parentAs||h,s,o),h=t.parent||h,t.include?(gi(c,"renderExtension").push(i),i.subscribers.add(c)):t.subscribe&&i.subscribers.add(c),t.remove){const t=l.indexOf(i);-1!==t&&(l=l.slice(0),l.splice(t,1))}if(e=!0===t.next,t.complete||e)break}}if(e)continue}}if(!c.rendered&&c.hasSection(me.RENDER)){let e=this.createLayoutControl(h,c);if(0===e.containerType){const i=c.length?t.processUnknownParent(e):t.processUnknownChild(e);if(i.next)continue;e=i.layout}this.addLayout(e)}}}o.sort((t,e)=>{if(t.depth===e.depth){if(t.innerWrapped===e)return-1;if(t===e.innerWrapped)return 1;const i=t.outerWrapper,n=e.outerWrapper;if(t===n||void 0===i&&n)return-1;if(e===i||void 0===n&&i)return 1;const s=t.nodeGroup,o=e.nodeGroup;return s&&o?t.id<e.id?-1:1:s?-1:o?1:0}return t.depth<e.depth?-1:1});for(const t of this.extensions){for(const e of t.subscribers)o.contains(e)&&t.postBaseLayout(e);t.afterBaseLayout()}i.cache.join(o),i.excluded.join(e.excluded)}setConstraints(){const t=this._cache;this.controllerHandler.setConstraints();for(const e of this.extensions){for(const i of e.subscribers)t.contains(i)&&e.postConstraints(i);e.afterConstraints()}}setResources(){const t=this.resourceHandler;for(const e of this._cache)t.setBoxStyle(e),e.imageElement||e.svgElement||!e.visible||(t.setFontStyle(e),t.setValueString(e));for(const t of this.extensions)t.afterResources()}processFloatHorizontal(t){const e=this.controllerHandler,{containerType:i,alignmentType:n}=e.containerTypeVertical,s=this.session.clearMap,o=[],r=[],a=[],l=[],c=[];let h,d,u,f,g=!1;if(t.each((t,e)=>{if(e>0){s.get(t)&&(g=!0)}const i=t.float;if(g)"left"===i?(void 0===h&&(h=[]),h.push(t)):"right"===i?(void 0===d&&(d=[]),d.push(t)):a.push(t);else if("left"===i)l.push(t);else if("right"===i)c.push(t);else if(l.length||c.length){let e=t.linear.top;if(t.styleText){const i=t.textBounds;i&&(e=Math.max(i.top,e))}e=Math.ceil(e),l.some(t=>e>=t.bounds.bottom)||c.some(t=>e>=t.bounds.bottom)?a.push(t):r.push(t)}else r.push(t)}),l.length&&(u=h?[l,h]:l),c.length&&(f=d?[c,d]:c),c.length+((null==d?void 0:d.length)||0)===t.length&&t.add(2048),a.length){const{node:s,parent:o}=t;a.length>1&&a[0].addAlign(8192),a.unshift(s);const r=e.createNodeGroup(s,a,{parent:o});r.childIndex=s.childIndex,r.containerName=s.containerName,r.inherit(s,"boxStyle"),r.innerWrapped=s,s.resetBox(30,r),s.resetBox(480,r),this.addLayout(new qe(o,r,i,n|(o.blockStatic?64:0),a)),t.parent=r}r.length&&o.push(r),u&&o.push(u),f&&o.push(f),t.type=e.containerTypeVerticalMargin,t.add(64),t.itemCount=o.length;for(const s of o){let o,a;if(Array.isArray(s[0])){o=s;let r=o[0];for(let t=1;t<o.length;t++)r=r.concat(o[t]);r.sort((t,e)=>t.childIndex<e.childIndex?-1:1);const l=t.node;l.layoutVertical?a=l:(a=e.createNodeGroup(r[0],r,{parent:l}),this.addLayout(qe.create({parent:l,node:a,containerType:i,alignmentType:n|(o.some(t=>t===f||t===c)?2048:0),itemCount:o.length})))}else o=[s];for(const s of o){const o=s[0],h=a||t.node,d=e.createNodeGroup(o,s,{parent:h,delegate:!0}),u=new qe(h,d,0,128);u.add(s===r?256:Pi(s)),s.some(t=>t.percentWidth>0)?(u.type=e.containerTypePercent,1===s.length&&(u.node.innerWrapped=o)):1===s.length?u.setContainerType(i,n):u.linearY||u.unknownAligned?u.setContainerType(i,n|(u.unknownAligned?2:0)):e.processLayoutHorizontal(u),this.addLayout(u),s===r&&this.setFloatPadding(h,d,r,l,c)}}return t}processFloatVertical(t){const e=this.controllerHandler,{containerType:i,alignmentType:n}=e.containerTypeVertical,s=this.session.clearMap;if(0!==t.containerType){const s=t.node,o=e.createNodeGroup(s,[s],{parent:t.parent});this.addLayout(new qe(o,s,i,n,o.children)),t.node=o}else t.setContainerType(i,n);const o=[],r=[],a=[],l=[];let c=!1,h=!1,d=!0;for(const e of t)e.blockStatic&&0===l.length?(a.push(e),h=!0):(s.has(e)&&(e.floating?c=!0:(e.setBox(2,{reset:1}),o.push(a.slice(0)),r.push(l.slice(0)),a.length=0,l.length=0)),e.floating?(h&&(o.push(a.slice(0)),r.push(null),a.length=0,l.length=0,h=!1),l.push(e)):(c&&!s.has(e)&&(d=!1),a.push(e)));if(l.length&&r.push(l),a.length&&o.push(a),!d){const s=t.node,a=Math.max(r.length,o.length);for(let t=0;t<a;t++){const a=o[t]||[];if(null===r[t]&&a.length){const t=e.containerTypeVertical;this.addLayout(new qe(s,e.createNodeGroup(a[0],a,{parent:s}),t.containerType,192|t.alignmentType,a))}else{const o=r[t]||[];if(a.length||o.length){const t=e.createNodeGroup(o[0]||a[0],[],{parent:s}),r=new qe(s,t);r.type=e.containerTypeVerticalMargin;const l=[];let c;if(o.length){const i=e.createNodeGroup(o[0],o,{parent:t});r.add(512),0===a.length&&o.every(t=>"right"===t.float)&&r.add(2048),l.push(i)}a.length&&(c=e.createNodeGroup(a[0],a,{parent:t}),l.push(c)),r.itemCount=l.length,this.addLayout(r);for(let s of l)s.nodeGroup||(s=e.createNodeGroup(s,[s],{parent:t,delegate:!0})),this.addLayout(new qe(t,s,i,192|n,s.children));if(a.length&&o.length){const[t,e]=fi(o,t=>"right"!==t.float);this.setFloatPadding(s,c,a,t,e)}}}}}return t}createAssetOptions(t){let e=null==t?void 0:t.assets;return e=e?this.layouts.concat(e):this.layouts,Object.assign(Object.assign({},t),{assets:e})}setFloatPadding(t,e,i,n,s){let o=[];for(const t of i)Mi(t)&&o.push(t),t.blockStatic&&(o=o.concat(t.cascade(t=>Mi(t))));const r=e.bounds.bottom,a=t.actualBoxWidth();if(n.length){let i=-1/0,s=0,l=!1,c=!1;for(const t of n)if(t.bounds.top<r){const e=t.linear.right+Ni(t,!1);e>i?(i=e,c=t.marginRight>0):e===i&&t.marginRight<=0&&(c=!1)}if(i!==-1/0){for(const t of o)Math.floor(t.linear.left)<=i&&(s=Math.max(s,t.marginLeft),l=!0);if(l){const n=i-t.box.left-s-oi(e.map(t=>o.includes(t)?0:t.marginLeft));n>0&&n<a&&e.modifyBox(256,n+(!c&&e.find(t=>t.multiline,{cascade:!0})?Math.max(s,this._localSettings.deviations.textMarginBoundarySize):0))}}}if(s.length){let i=1/0,n=0,l=!1,c=!1;for(const t of s)if(t.bounds.top<r){const e=t.linear.left+Ni(t,!0);e<i?(i=e,c=t.marginLeft>0):e===i&&t.marginLeft<=0&&(c=!1)}if(i!==1/0){for(const t of o)(t.multiline||Math.ceil(t.linear.right)>=i)&&(n=Math.max(n,t.marginRight),l=!0);if(l){const s=t.box.right-i-n-oi(e.map(t=>o.includes(t)?0:t.marginRight));s>0&&s<a&&e.modifyBox(64,s+(!c&&e.find(t=>t.multiline,{cascade:!0})?Math.max(n,this._localSettings.deviations.textMarginBoundarySize):0))}}}}createLayoutControl(t,e){return new qe(t,e,e.containerType,e.alignmentType,e.children)}isUseElement(t){const e=t.dataset.use;return di(e)&&e.split(vi.SEPARATOR).some(t=>!!this.extensionManager.retrieve(t))}get layouts(){return this._layouts.sort((t,e)=>{const i=t.index,n=e.index;if(i!==n){if(0===i||n===1/0||void 0===n&&i!==1/0)return-1;if(0===n||i===1/0||void 0===i&&n!==1/0)return 1;if(void 0!==i&&void 0!==n)return i<n?-1:1}return 0})}get clearMap(){return this.session.clearMap}get extensionsCascade(){return this.extensions.filter(t=>!!t.init)}get length(){return this.session.cache.length}},t.Controller=G,t.ControllerUI=class extends G{constructor(){super(...arguments),this._requireFormat=!1,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}init(){const t=this.localSettings.unsupported;this._unsupportedCascade=t.cascade,this._unsupportedTagName=t.tagName}reset(){this._requireFormat=!1,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}preventNodeCascade(t){return this._unsupportedCascade.has(t.tagName)}applyDefaultStyles(t){const e=this.sessionId;let i;if(Ui(t))i={position:"static",display:"inline",verticalAlign:"baseline",float:"none",clear:"none"};else{i=Ji(t,"styleMap",e)||{};const n=()=>{if(void 0===i.border&&o()){const t=this.localSettings.style.inputBorderColor;i.border=`outset 1px ${t}`;for(let e=0;e<4;e++){const n=Oi[e];i[n[0]]="outset",i[n[1]]="1px",i[n[2]]=t}return!0}return!1},s=t=>{if(t){const t=i.backgroundColor;void 0!==t&&"initial"!==t||(i.backgroundColor=this.localSettings.style.inputBackgroundColor)}void 0===i.textAlign&&(i.textAlign="center"),void 0!==i.padding||Di.some(t=>!!i[t])||(i.paddingTop="2px",i.paddingRight="6px",i.paddingBottom="3px",i.paddingLeft="6px")},o=()=>!(Oi[0][0]in i||Oi[1][0]in i||Oi[2][0]in i||Oi[3][0]in i),r=t.tagName;if(Wi(8))switch(r){case"INPUT":case"SELECT":case"BUTTON":case"TEXTAREA":void 0===i.display&&(i.display="inline-block");break;case"FIELDSET":void 0===i.display&&(i.display="block")}else if(Fi())switch(r){case"BODY":"transparent"===i.backgroundColor&&(i.backgroundColor="rgb(255, 255, 255)");break;case"INPUT":switch(t.type){case"text":case"password":case"time":case"date":case"datetime-local":case"week":case"month":case"url":case"email":case"search":case"number":case"tel":void 0===i.fontSize&&(i.fontSize="13.3333px")}break;case"CODE":void 0===i.fontFamily&&(i.fontFamily="monospace");break;case"LEGEND":case"RT":void 0===i.display&&(i.display="block")}switch(r){case"INPUT":{const e=t.type;switch(e){case"radio":case"checkbox":case"image":break;case"week":case"month":case"time":case"date":case"datetime-local":i.paddingTop=Hi(qi(i.paddingTop)+1),i.paddingRight=Hi(qi(i.paddingRight)+1),i.paddingBottom=Hi(qi(i.paddingBottom)+1),i.paddingLeft=Hi(qi(i.paddingLeft)+1);break;default:{const t=n();switch(e){case"file":case"reset":case"submit":case"button":s(t)}break}}break}case"BUTTON":s(n());break;case"TEXTAREA":case"SELECT":n();break;case"BODY":{const t=i.backgroundColor;void 0!==t&&"initial"!==t||(i.backgroundColor="rgb(255, 255, 255)");break}case"FORM":void 0===i.marginTop&&(i.marginTop="0px");break;case"LI":if(void 0===i.listStyleImage){const e=Xi(t);i.listStyleImage=e.getPropertyValue("list-style-image")}break;case"IFRAME":void 0===i.display&&(i.display="block");case"svg":case"IMG":{const e=(e,n)=>{const s=i[e];if(void 0===s||"auto"===s){const s=RegExp(`\\s+${e}="([^"]+)"`).exec(t.outerHTML);if(s){const t=s[1];zi(t)?i[e]=t+"px":Vi(t)&&(i[e]=t)}else if("IFRAME"===r)"width"===e?i.width="300px":i.height="150px";else{const s=i[n];if(s&&zi(s)){const o="max"+Gi(e);if(void 0===i[o]||!Vi(o)){const o=this.application.resourceHandler.getImage(t.src);o&&o.width>0&&o.height>0&&(i[e]=Hi(o[e]*parseFloat(s)/o[n]))}}}}};e("width","height"),e("height","width");break}}}Zi(t,"styleMap",e,i)}addBeforeOutsideTemplate(t,e,i=!0,n=-1){const s=Qi(this._beforeOutside,t);-1!==n&&n<s.length?s.splice(n,0,e):s.push(e),i&&(this._requireFormat=!0)}addBeforeInsideTemplate(t,e,i=!0,n=-1){const s=Qi(this._beforeInside,t);-1!==n&&n<s.length?s.splice(n,0,e):s.push(e),i&&(this._requireFormat=!0)}addAfterInsideTemplate(t,e,i=!0,n=-1){const s=Qi(this._afterInside,t);-1!==n&&n<s.length?s.splice(n,0,e):s.push(e),i&&(this._requireFormat=!0)}addAfterOutsideTemplate(t,e,i=!0,n=-1){const s=Qi(this._afterOutside,t);-1!==n&&n<s.length?s.splice(n,0,e):s.push(e),i&&(this._requireFormat=!0)}getBeforeOutsideTemplate(t,e){const i=this._beforeOutside[t];return i?en(i,e):""}getBeforeInsideTemplate(t,e){const i=this._beforeInside[t];return i?en(i,e):""}getAfterInsideTemplate(t,e){const i=this._afterInside[t];return i?en(i,e):""}getAfterOutsideTemplate(t,e){const i=this._afterOutside[t];return i?en(i,e):""}hasAppendProcessing(t){return void 0===t?this._requireFormat:t in this._beforeOutside||t in this._beforeInside||t in this._afterInside||t in this._afterOutside}includeElement(t){return!(this._unsupportedTagName.has(t.tagName)||"INPUT"===t.tagName&&this._unsupportedTagName.has(t.tagName+":"+t.type))||"true"===t.contentEditable}visibleElement(t,e){let i,n,s;if(e){const o=t.parentElement;i=o?Xi(o,e):Xi(t),n=1,s=1}else{if(i=Xi(t),"none"===i.getPropertyValue("display"))return!1;{const e=Ki(t,this.sessionId);if(!ji(e))return!1;({width:n,height:s}=e)}}if(n>0&&s>0)return"visible"===i.getPropertyValue("visibility")||!nn(i);if(!e){if($i(t.children,t=>this.visibleElement(t))===1/0)return!0;if("IMG"===t.tagName&&"none"!==i.getPropertyValue("display"))return!0}return!nn(i)&&(n>0&&"none"!==i.getPropertyValue("float")||!!e&&"none"!==i.getPropertyValue("clear")||"block"===i.getPropertyValue("display")&&(0!==sn(i,"margin-top")||0!==sn(i,"margin-bottom")))}evaluateNonStatic(t,e){const i=new Set,n=new Set;for(const s of e)if(!s.documentRoot&&!s.pageFlow){const e=s.parent;let o;switch(s.css("position")){case"fixed":if(!s.autoPosition){o=t;break}case"absolute":{const i=s.absoluteParent;if(i)if(o=i,s.autoPosition)s.siblingsLeading.some(t=>t.multiline||t.excluded&&!t.blockStatic)?s.autoPosition=!1:s.cssApply({display:"inline-block",verticalAlign:"top"},!0),o=e;else if(this.userSettings.supportNegativeLeftTop){let e=!1;for(;o&&o!==t&&(!o.rightAligned&&!o.centerAligned||!o.pageFlow);){const t=o.linear;if(e){if(o.layoutElement){o=i;break}if(s.withinX(t)&&s.withinY(t))break}else{if(s.hasPX("top")&&s.hasPX("bottom")||s.hasPX("left")&&s.hasPX("right"))break;{const i="hidden"===o.css("overflowX"),n="hidden"===o.css("overflowY");if(i&&n)break;const r=!i&&s.outsideX(t),a=!n&&s.outsideY(t);if(r&&(s.left<0||s.right>0)||a&&(s.top<0||0!==s.bottom))e=!0;else if(!i&&((s.left<0||s.right>0)&&Math.ceil(s.bounds.right)<t.left||(s.left>0||s.right<0)&&Math.floor(s.bounds.left)>t.right))e=!0;else if(!n&&((s.top<0||s.bottom>0)&&Math.ceil(s.bounds.bottom)<o.bounds.top||(s.top>0||s.bottom<0)&&Math.floor(s.bounds.top)>o.bounds.bottom))e=!0;else if(r&&a&&(!o.pageFlow||o.actualParent.documentRoot)&&(s.top>0||s.left>0))e=!0;else{if(i||n||s.intersectX(t)||s.intersectY(t))break;e=!0}}}o=o.actualParent}}break}}if(void 0===o&&(o=t),o!==e){const t=s.absoluteParent;if((null==t?void 0:t.positionRelative)&&o!==t){const{left:e,right:i,top:n,bottom:o}=t,r=s.bounds;0!==e?(r.left+=e,r.right+=e):t.hasPX("left")||0===i||(r.left-=i,r.right-=i),0!==n?(r.top+=n,r.bottom+=n):t.hasPX("top")||0===o||(r.top-=o,r.bottom-=o),s.unset("box"),s.unset("linear")}let r=s.toFloat("opacity",1),a=e;do{r*=a.toFloat("opacity",1),a=a.actualParent}while(a&&a!==o);s.css("opacity",""+r),s.parent=o,s.containerIndex=1/0,i.add(o),n.add(e)}s.documentParent=o}for(const t of n)t.each((t,e)=>{t.containerIndex=e});for(const t of i){const e=[];let i=-1;t.each(n=>{n.containerIndex===1/0?t.some(t=>{let i=t.naturalElements.includes(n);if(!i){const e=t.cascade();i=n.ascend({condition:t=>e.includes(t)}).length>0}return i&&Qi(e,t.containerIndex+(n.zIndex>=0||t!==n.actualParent?1:0)).push(n),i}):n.containerIndex>i&&(i=n.containerIndex)});const n=e.length;if(n){const s=t.children;for(let t=0,o=0,r=1;t<n;t++,o++){const n=e[t];if(n){n.sort((t,e)=>{if(t.parent===e.parent){const i=t.zIndex,n=e.zIndex;return i===n?t.id<e.id?-1:1:i<n?-1:1}return 0});for(const t of n)t.containerIndex=i+r++;const t=s.length;for(let e=0;e<t;e++)n.includes(s[e])&&(s[e]=void 0);s.splice(o,0,...n),o+=n.length}}t.retain(Yi(s))}}}sortInitialCache(t){(t||this.cache).sort((t,e)=>{if(t.depth!==e.depth)return t.depth<e.depth?-1:1;{const i=t.documentParent,n=e.documentParent;if(i!==n){const t=i.depth,e=n.depth;return t!==e?t<e?-1:1:i.actualParent===n.actualParent?i.childIndex<n.childIndex?-1:1:i.id<n.id?-1:1}}return 0})}cascadeDocument(t,e){const i=this.userSettings.showAttributes,n="\t".repeat(e);let s="";for(const o of t){const t=o.node;switch(o.type){case 1:{const{controlName:r,attributes:a}=o,{id:l,renderTemplates:c}=t,h=e+1,d=this.getBeforeInsideTemplate(l,h),u=this.getAfterInsideTemplate(l,h);let f=n+`<${r+(0===e?"{#0}":"")+(i?a?tn(a,h):t.extractAttributes(h):"")}`;f+=c||""!==d||""!==u?">\n"+d+(c?this.cascadeDocument(this.sortRenderPosition(t,c),h):"")+u+n+`</${r}>\n`:" />\n",s+=this.getBeforeOutsideTemplate(l,e)+f+this.getAfterOutsideTemplate(l,e);break}case 2:{const t=o.content;t&&(s+=tn(t,e));break}}}return s}getEnclosingXmlTag(t,e="",i){return"<"+t+e+(i?`>\n${i}</${t}>\n`:" />\n")}get generateSessionId(){return""+(new Date).getTime()}},t.Extension=q,t.ExtensionManager=class{constructor(t){this.application=t}include(t){const e=this.application,i=e.extensions;let n=t.name;const s=i.findIndex(t=>t.name===n);if(-1!==s)return i[s]=t,!0;{const s=t.framework;if(s>0)for(const i of t.dependencies)if(i.preload&&(n=i.name,null===this.retrieve(n))){const t=e.builtInExtensions[n];t&&this.include(t)}if((0===s||Y(s,e.framework))&&t.dependencies.every(t=>!!this.retrieve(t.name)))return t.application=e,i.push(t),!0}return!1}exclude(t){const e=this.application.extensions,i=e.length;for(let n=0;n<i;n++)if(e[n]===t)return e.splice(n,1),!0;return!1}retrieve(t){for(const e of this.application.extensions)if(e.name===t)return e;return null}optionValue(t,e){var i;const n=null===(i=this.retrieve(t))||void 0===i?void 0:i.options;return $(n)?n[e]:void 0}optionValueAsObject(t,e){const i=this.optionValue(t,e);return $(i)?i:null}optionValueAsString(t,e){const i=this.optionValue(t,e);return"string"==typeof i?i:""}optionValueAsNumber(t,e){const i=this.optionValue(t,e);return"number"==typeof i?i:NaN}optionValueAsBoolean(t,e){const i=this.optionValue(t,e);return"boolean"==typeof i&&i}},t.ExtensionUI=ln,t.File=tt,t.FileUI=class extends tt{get directory(){return this.resource.controllerSettings.directory}},t.LayoutUI=qe,t.Node=pe,t.NodeGroupUI=class extends je{init(){var t;if(this.length){for(const t of this.children)t.parent=this;this.setBounds(),this.saveAsInitial(),this.dir=(null===(t=this.actualParent)||void 0===t?void 0:t.dir)||""}}setBounds(){this.length&&(this._bounds=je.outerRegion(this))}previousSiblings(t){var e;const i=((null===(e=this._initial)||void 0===e?void 0:e.children)||this.children)[0];return(null==i?void 0:i.previousSiblings(t))||[]}nextSiblings(t){var e;const i=(null===(e=this._initial)||void 0===e?void 0:e.children)||this.children,n=i[i.length-1];return(null==n?void 0:n.nextSiblings(t))||[]}get block(){let t=this._cached.block;return void 0===t&&(t=this.some(t=>t.block),this._cached.block=t),t}get blockStatic(){let t=this._cached.blockStatic;if(void 0===t){const e=this.actualParent||this.documentParent;t=this.some(t=>t.blockStatic||t.percentWidth>0)||e.percentWidth>0||this.layoutVertical&&(e.hasWidth||this.some(t=>t.centerAligned||t.rightAligned))||e.blockStatic&&(e.layoutVertical||this.hasAlign(256)),(t||0!==this.containerType)&&(this._cached.blockStatic=t)}return t||this.hasAlign(64)}get blockDimension(){let t=this._cached.blockDimension;return void 0===t&&(t=this.every(t=>t.blockDimension),this._cached.blockDimension=t),t}get blockVertical(){let t=this._cached.blockVertical;return void 0===t&&(t=this.every(t=>t.blockVertical),this._cached.blockVertical=t),t}get inline(){let t=this._cached.inline;return void 0===t&&(t=this.every(t=>t.inline),this._cached.inline=t),t&&!this.hasAlign(64)}get inlineStatic(){let t=this._cached.inlineStatic;return void 0===t&&(t=this.every(t=>t.inlineStatic),this._cached.inlineStatic=t),t&&!this.hasAlign(64)}get inlineVertical(){let t=this._cached.inlineVertical;return void 0===t&&(t=this.every(t=>t.inlineVertical),this._cached.inlineVertical=t),t&&!this.hasAlign(64)}get inlineFlow(){let t=this._cached.inlineFlow;return void 0===t&&(t=this.every(t=>t.inlineFlow),this._cached.inlineFlow=t),t&&!this.hasAlign(64)}get inlineDimension(){let t=this._cached.inlineDimension;return void 0===t&&(t=this.every(t=>t.inlineDimension),this._cached.inlineDimension=t),t&&!this.hasAlign(64)}get pageFlow(){let t=this._cached.pageFlow;if(void 0===t){const e=this.css("position");t="absolute"!==e&&"fixed"!==e,this._cached.pageFlow=t}return t}set baseline(t){this._cached.baseline=t}get baseline(){let t=this._cached.baseline;if(void 0===t){const e=this.cssInitial("verticalAlign",!0);t=""===e?this.every(t=>t.baseline):"baseline"===e||cn(e,!0),this._cached.baseline=t}return t}get float(){let t=this._cached.float;return void 0===t&&(this.floating?this.hasAlign(2048)?t="right":this.every(t=>"right"===t.float)?(this.addAlign(2048),t="right"):t="left":t="none",this._cached.float=t),t}get floating(){let t=this._cached.floating;return void 0===t&&(t=this.every(t=>t.floating||t.hasAlign(512)),this._cached.floating=t),t}get display(){return super.display||(this.some(t=>t.blockStatic)?"block":this.blockDimension?"inline-block":"inline")}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}set childIndex(t){super.childIndex=t}get childIndex(){let t=super.childIndex;if(t===1/0){for(const e of this)t=Math.min(e.childIndex,t);super.childIndex=t}return t}set containerIndex(t){super.containerIndex=t}get containerIndex(){let t=super.containerIndex;if(t===1/0){for(const e of this)t=Math.min(e.containerIndex,t);super.containerIndex=t}return t}get centerAligned(){let t=this._cached.centerAligned;return void 0===t&&(t=this.every(t=>t.centerAligned),this._cached.centerAligned=t),t}get rightAligned(){let t=this._cached.rightAligned;return void 0===t&&(t=this.every(t=>t.rightAligned),this._cached.rightAligned=t),t||this.hasAlign(2048)}get tagName(){return""}get plainText(){return!1}get styleText(){return!1}get multiline(){return!1}get nodeGroup(){return!0}get naturalChild(){return!1}get naturalElement(){return!1}get pseudoElement(){return!1}get previousSibling(){return null}get nextSibling(){return null}get previousElementSibling(){return null}get nextElementSibling(){return null}},t.NodeList=e,t.NodeUI=je,t.Resource=c,t.ResourceUI=cs,t.extensions=ir,t.lib=nr,Object.defineProperty(t,"__esModule",{value:!0})}));
