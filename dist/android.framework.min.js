var android=function(){"use strict";class t extends squared.base.ApplicationUI{}var e;!function(t){t[t.EDIT=1]="EDIT",t[t.RANGE=2]="RANGE",t[t.RADIO=3]="RADIO",t[t.CHECKBOX=4]="CHECKBOX",t[t.SELECT=5]="SELECT",t[t.TEXT=6]="TEXT",t[t.SVG=7]="SVG",t[t.IMAGE=8]="IMAGE",t[t.BUTTON=9]="BUTTON",t[t.PROGRESS=10]="PROGRESS",t[t.INLINE=11]="INLINE",t[t.LINE=12]="LINE",t[t.SPACE=13]="SPACE",t[t.BLOCK=14]="BLOCK",t[t.FRAME=15]="FRAME",t[t.LINEAR=16]="LINEAR",t[t.GRID=17]="GRID",t[t.RELATIVE=18]="RELATIVE",t[t.CONSTRAINT=19]="CONSTRAINT",t[t.WEBVIEW=20]="WEBVIEW",t[t.UNKNOWN=21]="UNKNOWN"}(e||(e={}));var i=Object.freeze({__proto__:null,get CONTAINER_NODE(){return e}});const n={EXTERNAL:"android.external",SUBSTITUTE:"android.substitute",DELEGATE_BACKGROUND:"android.delegate.background",DELEGATE_FIXED:"android.delegate.fixed",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEVIEWPORT:"android.delegate.negative-viewport",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_STYLES:"android.resource.styles"},o={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",RANGE:"SeekBar",SVG:"ImageView",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",METER:"ProgressBar",PROGRESS:"ProgressBar",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},a={VERTICAL_SCROLL:"androidx.core.widget.NestedScrollView",CONSTRAINT:"androidx.constraintlayout.widget.ConstraintLayout",GUIDELINE:"androidx.constraintlayout.widget.Guideline",BARRIER:"androidx.constraintlayout.widget.Barrier"},r={PLAINTEXT:e.TEXT,HR:e.LINE,SVG:e.SVG,IMG:e.IMAGE,BUTTON:e.BUTTON,SELECT:e.SELECT,TEXTAREA:e.EDIT,METER:e.PROGRESS,PROGRESS:e.PROGRESS,IFRAME:e.WEBVIEW,INPUT_RANGE:e.RANGE,INPUT_TEXT:e.EDIT,INPUT_PASSWORD:e.EDIT,INPUT_NUMBER:e.EDIT,INPUT_EMAIL:e.EDIT,INPUT_SEARCH:e.EDIT,INPUT_URL:e.EDIT,INPUT_DATE:e.EDIT,INPUT_TEL:e.EDIT,INPUT_TIME:e.EDIT,INPUT_WEEK:e.EDIT,INPUT_MONTH:e.EDIT,INPUT_BUTTON:e.BUTTON,INPUT_FILE:e.BUTTON,INPUT_IMAGE:e.BUTTON,INPUT_SUBMIT:e.BUTTON,INPUT_RESET:e.BUTTON,INPUT_CHECKBOX:e.CHECKBOX,INPUT_RADIO:e.RADIO,"INPUT_DATETIME-LOCAL":e.EDIT},s={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},l={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},c={HORIZONTAL:"horizontal",VERTICAL:"vertical",MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft",CENTER_HORIZONTAL:"center_horizontal",CENTER_VERTICAL:"center_vertical"},d={left:"start",right:"end",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toRightOf:"layout_toEndOf",layout_toLeftOf:"layout_toStartOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},h=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var u=Object.freeze({__proto__:null,EXT_ANDROID:n,CONTAINER_ANDROID:o,CONTAINER_ANDROID_X:a,SUPPORT_ANDROID:{DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},SUPPORT_ANDROID_X:{DRAWER:"androidx.drawerlayout.widget.DrawerLayout",NAVIGATION_VIEW:"com.google.android.material.navigation.NavigationView",COORDINATOR:"androidx.coordinatorlayout.widget.CoordinatorLayout",APPBAR:"com.google.android.material.appbar.AppBarLayout",COLLAPSING_TOOLBAR:"com.google.android.material.appbar.CollapsingToolbarLayout",TOOLBAR:"androidx.appcompat.widget.Toolbar",FLOATING_ACTION_BUTTON:"com.google.android.material.floatingactionbutton.FloatingActionButton",BOTTOM_NAVIGATION:"com.google.android.material.bottomnavigation.BottomNavigationView"},ELEMENT_ANDROID:r,LAYOUT_ANDROID:s,XMLNS_ANDROID:l,STRING_ANDROID:c,LOCALIZE_ANDROID:d,RESERVED_JAVA:h});const{color:p,css:g,regex:m,util:f}=squared.lib,T=squared.base.ResourceUI.STORED,y=/[^\w+]/g;let b,A={};function E(t,e=!1){if(t)for(const i in t)if(f.isPlainObject(t[i]))E(t,e);else{let n=""+t[i];switch(i){case"text":if(!n.startsWith("@string/")&&""!==(n=S.addString(n,"",e))){t[i]="@string/"+n;continue}break;case"src":case"srcCompat":if(m.COMPONENT.PROTOCOL.test(n)&&""!==(n=S.addImage({mdpi:n}))){t[i]="@drawable/"+n;continue}}const o=p.parseColor(n);if(o){const e=S.addColor(o);""!==e&&(t[i]="@color/"+e)}}}class S extends squared.base.ResourceUI{constructor(t,e){super(),this.application=t,this.cache=e,T.styles=new Map,T.themes=new Map,T.dimens=new Map,T.drawables=new Map,T.animators=new Map,this.controllerSettings=t.controllerHandler.localSettings,b=this.controllerSettings.supported.imageFormat}static formatOptions(t,e=!1){for(const i in t){const n=t[i];f.isPlainObject(n)&&E(n,e)}return t}static formatName(t){return m.CHAR.LEADINGNUMBER.test(t)&&(t="__"+t),t.replace(y,"_")}static addTheme(...t){for(const e of t){const t=e.output,i=T.themes,n=t&&f.isString(t.path)?t.path.trim():"res/values",o=t&&f.isString(t.file)?t.file.trim():"themes.xml",a=f.trimString(n.trim(),"/")+"/"+f.trimString(o.trim(),"/"),r=i.get(a)||new Map;let s="";if(""===e.name||"."===e.name.charAt(0)){t:for(const t of i.values())for(const e of t.values())if(e.name){s=e.name;break t}if(""===s)continue}else s=e.name;e.name=s+("."===e.name.charAt(0)?e.name:""),S.formatOptions(e.items);const l=r.get(e.name);if(l)for(const t in e.items)l.items[t]=e.items[t];else r.set(e.name,e);i.set(a,r)}}static addString(t,e="",i=!1){if(""!==t){""===e&&(e=t.trim());const n=f.isNumber(t);if(!n||i){const i=T.strings;for(const[e,n]of i.entries())if(n===t)return e;const o=f.trimString(e.replace(m.XML.NONWORD_G,"_"),"_").split(/_+/);o.length>1?(o.length>4&&(o.length=4),e=o.join("_")):e=o[0],e=e.toLowerCase(),n||m.CHAR.LEADINGNUMBER.test(e)||h.includes(e)?e="__"+e:""===e&&(e="__symbol"+Math.ceil(1e5*Math.random())),i.has(e)&&(e=S.generateId("string",e)),i.set(e,t)}return e}return""}static addImage(t,e=""){const i=t.mdpi;if(i){if(A[i]&&1===Object.keys(t).length)return A[i];const n=f.fromLastIndexOf(i,"/"),o=f.fromLastIndexOf(n,".").toLowerCase();if("svg"!==o&&b.includes(o))return A[i]=S.insertStoredAsset("images",S.formatName(e+n.substring(0,n.length-o.length-1)),t),A[i]}return""}static addColor(t,e=!1){if("string"==typeof t&&(t=p.parseColor(t,1,e)),t&&(!t.transparent||e)){const e=t.opacity<1?t.valueAsARGB:t.value;let i=T.colors.get(e);if(i)return i;const n=p.findColorShade(t.value);if(n)return i=e===n.value?n.key:S.generateId("color",n.key),T.colors.set(e,i),i}return""}reset(){super.reset(),A={}}addImageSrc(t,e="",i){const n={};if("string"==typeof t){const i=m.CSS.URL.exec(t);if(i){if(!i[1].startsWith("data:image"))return S.addImage({mdpi:f.resolvePath(i[1])},e);n.mdpi=i[1]}}else{if(t.srcset){void 0===i&&(i=g.getSrcSet(t,b));for(const t of i){const e=t.pixelRatio;if(e>0){const i=t.src;e<1?n.ldpi=i:1===e?(void 0===n.mdpi||t.actualWidth)&&(n.mdpi=i):e<=1.5?n.hdpi=i:e<=2?n.xhdpi=i:e<=3?n.xxhdpi=i:n.xxxhdpi=i}}}void 0===n.mdpi&&(n.mdpi=t.src)}if(n.mdpi){const t=this.application.resourceHandler,i=t.getRawData(n.mdpi);if(i&&i.base64){if(i.filename.toLowerCase().endsWith(".svg"))return"";const n=e+i.filename;return t.writeRawImage(n,i.base64),n.substring(0,n.lastIndexOf("."))}}return S.addImage(n,e)}get userSettings(){return this.application.userSettings}}const R=squared.lib.util;function I(t,e,i,n=0){return(!i||i>=n)&&(t.attr=e,!0)}const _={29:{android:{},assign:{}},28:{android:{allowAudioPlaybackCapture:!1,enforceNavigationBarContrast:!1,enforceStatusBarContrast:!1,forceDarkAllowed:!1,forceUriPermissions:!1,foregroundServiceType:!1,hasFragileUserData:!1,identifier:!1,inheritShowWhenLocked:!1,interactiveUiTimeout:!1,isLightTheme:!1,isSplitRequired:!1,minAspectRatio:!1,nonInteractiveUiTimeout:!1,opticalInsetBottom:!1,opticalInsetLeft:!1,opticalInsetRight:!1,opticalInsetTop:!1,packageType:!1,requestLegacyExternalStorage:!1,secureElementName:!1,selectionDividerHeight:!1,settingsSliceUri:!1,shell:!1,supportsMultipleDisplays:!1,textLocale:!1,useAppZygote:!1,useEmbeddedDex:!1,zygotePreloadName:!1},assign:{}},27:{android:{accessibilityHeading:!1,accessibilityPaneTitle:!1,appComponentFactory:!1,buttonCornerRadius:!1,cantSaveState:!1,dialogCornerRadius:!1,fallbackLineSpacing:!1,firstBaselineToTopHeight:!1,fontVariationSettings:!1,lastBaselineToBottomHeight:!1,lineHeight:!1,maxLongVersionCode:!1,outlineAmbientShadowColor:!1,outlineSpotShadowColor:!1,screenReaderFocusable:!1,textFontWeight:!1,ttcIndex:!1,versionCodeMajor:!1,versionMajor:!1,widgetFeatures:!1,windowLayoutInDisplayCutoutMode:!1},assign:{}},26:{android:{classLoader:!1,navigationBarDividerColor:!1,showWhenLocked:!1,turnScreenOn:!1,windowLightNavigationBar:!1},assign:{}},25:{android:{fontWeight:!1,justificationMode:!1,layout_marginHorizontal:!1,layout_marginVertical:!1,paddingHorizontal:!1,paddingVertical:!1,tooltipText:!1},assign:{}},24:{android:{colorSecondary:!1,contextDescription:!1,contextUri:!1,roundIcon:!1,shortcutDisabledMessage:!1,shortcutId:!1,shortcutLongLabel:!1,shortcutShortLabel:!1,showMetadataInPreview:!1},assign:{}},23:{android:{backupInForeground:!1,bitmap:!1,buttonGravity:!1,canControlMagnification:!1,canPerformGestures:!1,canRecord:!1,collapseIcon:!1,contentInsetEndWithActions:!1,contentInsetStartWithNavigation:!1,contextPopupMenuStyle:!1,countDown:!1,defaultHeight:!1,defaultToDeviceProtectedStorage:!1,defaultWidth:!1,directBootAware:!1,enableVrMode:!1,endX:!1,endY:!1,externalService:!1,fillType:!1,forceHasOverlappingRendering:!1,hotSpotX:!1,hotSpotY:!1,languageTag:!1,level:!1,listMenuViewStyle:!1,maxButtonHeight:!1,networkSecurityConfig:!1,numberPickerStyle:!1,offset:!1,pointerIcon:!1,popupEnterTransition:!1,popupExitTransition:!1,preferenceFragmentStyle:!1,resizeableActivity:!1,startX:!1,startY:!1,subMenuArrow:!1,supportsLocalInteraction:!1,supportsPictureInPicture:!1,textAppearancePopupMenuHeader:!1,tickMark:!1,tickMarkTint:!1,tickMarkTintMode:!1,titleMargin:!1,titleMarginBottom:!1,titleMarginEnd:!1,titleMarginStart:!1,titleMarginTop:!1,tunerCount:!1,use32bitAbi:!1,version:!1,windowBackgroundFallback:!1},assign:{}},22:{android:{allowUndo:!1,autoVerify:!1,breakStrategy:!1,colorBackgroundFloating:!1,contextClickable:!1,drawableTint:!1,drawableTintMode:!1,end:t=>I(t,"right"),extractNativeLibs:!1,fingerprintAuthDrawable:!1,fraction:!1,fullBackupContent:!1,hyphenationFrequency:!1,lockTaskMode:!1,logoDescription:!1,numbersInnerTextColor:!1,scrollIndicators:!1,showForAllUsers:!1,start:t=>I(t,"left"),subtitleTextColor:!1,supportsAssist:!1,supportsLaunchVoiceAssistFromKeyguard:!1,thumbPosition:!1,titleTextColor:!1,trackTint:!1,trackTintMode:!1,usesCleartextTraffic:!1,windowLightStatusBar:!1},assign:{}},21:{android:{accessibilityTraversalAfter:!1,accessibilityTraversalBefore:!1,collapseContentDescription:!1,dialogPreferredPadding:!1,resizeClip:!1,revisionCode:!1,searchHintIcon:!1},assign:{}},20:{android:{actionBarPopupTheme:!1,actionBarTheme:!1,actionModeFindDrawable:!1,actionModeShareDrawable:!1,actionModeWebSearchDrawable:!1,actionOverflowMenuStyle:!1,amPmBackgroundColor:!1,amPmTextColor:!1,ambientShadowAlpha:!1,autoRemoveFromRecents:!1,backgroundTint:!1,backgroundTintMode:!1,banner:!1,buttonBarNegativeButtonStyle:!1,buttonBarNeutralButtonStyle:!1,buttonBarPositiveButtonStyle:!1,buttonTint:!1,buttonTintMode:!1,calendarTextColor:!1,checkMarkTint:!1,checkMarkTintMode:!1,closeIcon:!1,colorAccent:!1,colorButtonNormal:!1,colorControlActivated:!1,colorControlHighlight:!1,colorControlNormal:!1,colorEdgeEffect:!1,colorPrimary:!1,colorPrimaryDark:!1,commitIcon:!1,contentAgeHint:!1,contentInsetEnd:!1,contentInsetLeft:!1,contentInsetRight:!1,contentInsetStart:!1,controlX1:!1,controlX2:!1,controlY1:!1,controlY2:!1,country:!1,datePickerDialogTheme:!1,datePickerMode:!1,dayOfWeekBackground:!1,dayOfWeekTextAppearance:!1,documentLaunchMode:!1,elegantTextHeight:!1,elevation:!1,excludeClass:!1,excludeId:!1,excludeName:!1,fastScrollStyle:!1,fillAlpha:!1,fillColor:!1,fontFeatureSettings:!1,foregroundTint:!1,foregroundTintMode:!1,fragmentAllowEnterTransitionOverlap:!1,fragmentAllowReturnTransitionOverlap:!1,fragmentEnterTransition:!1,fragmentExitTransition:!1,fragmentReenterTransition:!1,fragmentReturnTransition:!1,fragmentSharedElementEnterTransition:!1,fragmentSharedElementReturnTransition:!1,fromId:!1,fullBackupOnly:!1,goIcon:!1,headerAmPmTextAppearance:!1,headerDayOfMonthTextAppearance:!1,headerMonthTextAppearance:!1,headerTimeTextAppearance:!1,headerYearTextAppearance:!1,hideOnContentScroll:!1,indeterminateTint:!1,indeterminateTintMode:!1,inset:!1,isGame:!1,launchTaskBehindSourceAnimation:!1,launchTaskBehindTargetAnimation:!1,layout_columnWeight:!1,layout_rowWeight:!1,letterSpacing:!1,matchOrder:!1,maxRecentsv:!1,maximumAngle:!1,minimumHorizontalAngle:!1,minimumVerticalAngle:!1,multiArch:!1,navigationBarColor:!1,navigationContentDescription:!1,navigationIcon:!1,nestedScrollingEnabled:!1,numbersBackgroundColor:!1,numbersSelectorColor:!1,numbersTextColor:!1,outlineProvider:!1,overlapAnchor:!1,paddingMode:!1,pathData:!1,patternPathData:!1,persistableMode:!1,popupElevation:!1,popupTheme:!1,progressBackgroundTint:!1,progressBackgroundTintMode:!1,progressTint:!1,progressTintMode:!1,propertyXName:!1,propertyYName:!1,queryBackground:!1,recognitionService:!1,relinquishTaskIdentity:!1,reparent:!1,reparentWithOverlay:!1,restrictionType:!1,resumeWhilePausing:!1,reversible:!1,searchIcon:!1,searchViewStyle:!1,secondaryProgressTint:!1,secondaryProgressTintMode:!1,selectableItemBackgroundBorderless:!1,sessionService:!1,setupActivity:!1,showText:!1,slideEdge:!1,splitTrack:!1,spotShadowAlpha:!1,src:(t,e,i)=>(i.svgElement&&(t.obj="app",t.attr="srcCompat"),!0),stackViewStyle:!1,stateListAnimator:!1,statusBarColor:!1,strokeAlpha:!1,strokeColor:!1,strokeLineCap:!1,strokeLineJoin:!1,strokeMiterLimit:!1,strokeWidth:!1,submitBackground:!1,subtitleTextAppearance:!1,suggestionRowLayout:!1,switchStyle:!1,targetName:!1,textAppearanceListItemSecondary:!1,thumbTint:!1,thumbTintMode:!1,tileModeX:!1,tileModeY:!1,timePickerDialogTheme:!1,timePickerMode:!1,timePickerStyle:!1,tintMode:!1,titleTextAppearance:!1,toId:!1,toolbarStyle:!1,touchscreenBlocksFocus:!1,transitionGroup:!1,transitionName:!1,transitionVisibilityMode:!1,translateX:!1,translateY:!1,translationZ:!1,trimPathEnd:!1,trimPathOffset:!1,trimPathStart:!1,viewportHeight:!1,viewportWidth:!1,voiceIcon:!1,windowActivityTransitions:!1,windowAllowEnterTransitionOverlap:!1,windowAllowReturnTransitionOverlap:!1,windowClipToOutline:!1,windowContentTransitionManager:!1,windowContentTransitions:!1,windowDrawsSystemBarBackgrounds:!1,windowElevation:!1,windowEnterTransition:!1,windowExitTransition:!1,windowReenterTransition:!1,windowReturnTransition:!1,windowSharedElementEnterTransition:!1,windowSharedElementExitTransition:!1,windowSharedElementReenterTransition:!1,windowSharedElementReturnTransition:!1,windowSharedElementsUseOverlay:!1,windowTransitionBackgroundFadeDuration:!1,yearListItemTextAppearance:!1,yearListSelectorColor:!1},assign:{}},19:{android:{allowEmbedded:!1,windowSwipeToDismiss:!1},assign:{}},18:{android:{accessibilityLiveRegion:!1,addPrintersActivity:!1,advancedPrintOptionsActivity:!1,apduServiceBanner:!1,autoMirrored:!1,category:!1,fadingMode:!1,fromScene:!1,isAsciiCapable:!1,keySet:!1,requireDeviceUnlock:!1,ssp:!1,sspPattern:!1,sspPrefix:!1,startDelay:!1,supportsSwitchingToNextInputMethod:!1,targetId:!1,toScene:!1,transition:!1,transitionOrdering:!1,vendor:!1,windowTranslucentNavigation:!1,windowTranslucentStatus:!1},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(t,e)=>e<26,canRequestFilterKeyEvents:!1,canRequestTouchExplorationMode:!1,childIndicatorEnd:!1,childIndicatorStart:!1,indicatorEnd:!1,indicatorStart:!1,layoutMode:!1,mipMap:!1,mirrorForRtl:!1,requiredAccountType:!1,requiredForAllUsers:!1,restrictedAccountType:!1,windowOverscan:!1},assign:{}},16:{android:{checkedTextViewStyle:!1,format12Hour:!1,format24Hour:!1,initialKeyguardLayout:!1,labelFor:!1,layoutDirection:!1,layout_alignEnd:t=>I(t,"layout_alignRight"),layout_alignParentEnd:t=>I(t,"layout_alignParentRight"),layout_alignParentStart:t=>I(t,"layout_alignParentLeft"),layout_alignStart:t=>I(t,"layout_alignLeft"),layout_marginEnd:t=>I(t,"layout_marginRight"),layout_marginStart:t=>I(t,"layout_marginLeft"),layout_toEndOf:t=>I(t,"layout_toRightOf"),layout_toStartOf:t=>I(t,"layout_toLeftOf"),listPreferredItemPaddingEnd:t=>I(t,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:t=>I(t,"listPreferredItemPaddingLeft"),paddingEnd:t=>I(t,c.PADDING_RIGHT),paddingStart:t=>I(t,c.PADDING_LEFT),permissionFlags:!1,permissionGroupFlags:!1,presentationTheme:!1,showOnLockScreen:!1,singleUser:!1,subtypeId:!1,supportsRtl:!1,textAlignment:!1,textDirection:!1,timeZone:!1,widgetCategory:!1},assign:{}},15:{android:{fontFamily:!1,importantForAccessibility:!1,isolatedProcess:!1,keyboardLayout:!1,mediaRouteButtonStyle:!1,mediaRouteTypes:!1,parentActivityName:!1},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},x={android:{amPmBackgroundColor:(t,e)=>I(t,"headerBackground",e,23),amPmTextColor:(t,e)=>I(t,"headerTextColor",e,23),animationResolution:(t,e)=>e<16,canRequestEnhancedWebAccessibility:(t,e)=>e<26,dayOfWeekBackground:(t,e)=>e<23,dayOfWeekTextAppearance:(t,e)=>e<23,directionDescriptions:(t,e)=>e<23,headerAmPmTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),headerDayOfMonthTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),headerMonthTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),headerTimeTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),headerYearTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),showOnLockScreen:(t,e)=>I(t,"showForAllUsers",e,23),targetDescriptions:(t,e)=>e<23,yearListItemTextAppearance:(t,e)=>I(t,"yearListTextColor",e,23),yearListSelectorColor:(t,e)=>e<23}};var w=Object.freeze({__proto__:null,API_ANDROID:_,DEPRECATED_ANDROID:x,getValue:function(t,e,i,n){for(const o of[_[t],_[0]]){const t=R.optionalAsString(o,`assign.${e}.${i}.${n}`);if(R.isString(t))return t}return""}});const{math:v,util:N}=squared.lib,C=/^@\+?id\//;function L(t,e,i=4){return 0===t?0:0===e?1:parseFloat(Math.max(t/(t+e),0).toPrecision(i))}function P(t,e=160,i=!1,n=3){let o=parseFloat(t);return isNaN(o)?"0dp":160!==e?(0!==(o/=e/160)&&o>-1&&o<1?o.toPrecision(n):v.truncate(o,n-1))+(i?"sp":"dp"):Math.round(o)+(i?"sp":"dp")}function O(t){return t.replace(C,"")}function k(t,e={},i={}){const n={android:e,app:i};return t&&Object.assign(n,t),n}function X(t){const e={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(N.isPlainObject(t))for(const i in e)typeof t[i]==typeof e[i]&&(e[i]=t[i]);return e}function B(t,e,i){return e&&i>=17&&d[t]||t}function M(t){return l[t]?`xmlns:${t}="${l[t]}"`:""}function D(t){let e="";for(const i in l)-1!==t.indexOf(i+":")&&(e+="\n\t"+M(i));return e}var G=Object.freeze({__proto__:null,convertLength:P,getDocumentId:O,getHorizontalBias:function(t){const e=t.documentParent;return L(Math.max(0,t.actualRect("left","bounds")-e.box.left),Math.max(0,e.box.right-t.actualRect("right","bounds")),t.localSettings.floatPrecision)},getVerticalBias:function(t){const e=t.documentParent;return L(Math.max(0,t.actualRect("top","bounds")-e.box.top),Math.max(0,e.box.bottom-t.actualRect("bottom","bounds")),t.localSettings.floatPrecision)},createViewAttribute:k,createStyleAttribute:X,localizeString:B,getXmlNs:M,getRootNs:D});const{client:W,css:H,dom:V,math:F,regex:z,util:U}=squared.lib,{constant:q,enumeration:j}=squared.base.lib,Y=/^attr[A-Z]/,Z=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,K=/[^\w$\-_.]/g;function $(t,e){switch(t){case"justify":case"initial":case"inherit":return"";case"center":return c.CENTER_HORIZONTAL;case"start":case"left":if(e)return"";default:return t}}function J(t){if(t.autoMargin.horizontal&&(!t.blockWidth||t.hasWidth||t.hasPX("maxWidth")||t.innerWrapped&&t.innerWrapped.has("width",4,{not:"100%"}))){const e=t.autoMargin,i=void 0!==t.outerWrapper||!t.blockWidth&&t.pageFlow?"layout_gravity":"gravity";t.mergeGravity(i,e.leftRight?c.CENTER_HORIZONTAL:e.left?"right":"left")}return!1}function Q(t,e,i,n){if(t.localSettings.targetAPI>=28)t.android("lineHeight",H.formatPX(e),i);else{const n=(e-t.actualHeight)/2;n>0&&t.android("lineSpacingExtra",H.formatPX(n),i)}if(n&&t.styleElement&&!t.hasPX("height")&&t.cssTry("line-height","normal")){if(t.cssTry("white-space","nowrap")){const i=(e-t.element.getBoundingClientRect().height)/2,n=Math.round(i);n>0&&(t.modifyBox(32,n),t.blockStatic||t.modifyBox(128,Math.floor(i))),t.cssFinally("white-space")}t.cssFinally("line-height")}}function tt(t,e,i,n,o){if(!t.imageOrSvgElement&&0!==t.actualHeight&&"initial"!==t.cssInitial("lineHeight"))if(t.multiline)Q(t,e,!1,!0);else if(0!==t.renderChildren.length&&!t.inline||!t.pageFlow&&!t.textContent.length)i&&(!t.hasHeight||e>t.height)&&(t.layoutHorizontal&&void 0===t.horizontalRows||t.hasAlign(4096))&&et(t,e);else{let a=0,r=!0;if(i&&!t.inline&&t.inlineText)et(t,e),Q(t,e,!1,!1);else if(!i&&t.styleElement&&!t.hasPX("height")&&t.cssTry("line-height","normal"))t.cssTry("white-space","nowrap")&&(a=(e-t.element.getBoundingClientRect().height)/2,r=!1,t.cssFinally("white-space")),t.cssFinally("line-height");else{const i=t.bounds;if(t.plainText&&i.numberOfLines>1)return t.android("minHeight",H.formatPX(i.height/i.numberOfLines)),void t.mergeGravity("gravity",c.CENTER_VERTICAL);a=(e-i.height)/2}const s=Math.round(a);if(s>0){const e=r&&t.textElement&&!t.plainText&&!i;n&&t.modifyBox(e?32:2,s),o&&t.modifyBox(e?128:8,Math.floor(a))}}}function et(t,e){t.inlineText&&(e+=t.contentBoxHeight,(!t.hasPX("height")||e>=Math.floor(t.height))&&t.mergeGravity("gravity",c.CENTER_VERTICAL,!1)),e>t.height&&t.android("minHeight",H.formatPX(e))}function it(t,i){if("0px"===i){const i=t.renderParent;if(i)return i.layoutConstraint||i.is(e.GRID)}return!1}const nt=t=>t?t.trim().replace(K,"_").toLowerCase():"";var ot=t=>(class i extends t{constructor(t=0,e="0",i,n){super(t,e,i),this.renderChildren=[],this.constraint={horizontal:!1,vertical:!1,current:{}},this._namespaces=["android","app"],this._cached={},this._controlName="",this._containerType=0,this._api=29,this.__android={},this.__app={},this.init(),n&&n(this)}static getControlName(t,i=29){const n=e[t];if(i>=29){const t=a[n];if(t)return t}return o[n]}android(t,e,i=!0){if(e){if(this._api<29){const n={};if(!this.supported(t,n))return"";Object.keys(n).length&&(U.isString(n.attr)&&(t=n.attr),U.isString(n.value)&&(e=n.value),"boolean"==typeof n.overwrite&&(i=n.overwrite))}this.attr("android",t,e,i)}return this.__android[t]||""}app(t,e,i=!0){return e&&this.attr("app",t,e,i),this.__app[t]||""}apply(t){const e=Object.assign({},t);super.apply(e);for(const t in e)this.formatted(`${t}="${e[t]}"`)}formatted(t,e=!0){const i=Z.exec(t);i&&this.attr(i[1]||"_",i[2],i[3],e)}anchor(t,e="",i){const n=this.anchorTarget,o=n.renderParent;if(o&&n.documentId!==e)if(o.layoutConstraint){if(""===e||void 0===n.constraint.current[t]||i){e&&void 0===i&&(i="parent"===e);const o=s.constraint[t];if(o){let a=!1;switch(n.app(this.localizeString(o),e,i),t){case"left":case"right":"parent"===e&&(n.constraint.horizontal=!0);case q.STRING_BASE.LEFT_RIGHT:case q.STRING_BASE.RIGHT_LEFT:a=!0;break;case"top":case"bottom":case"baseline":"parent"===e&&(n.constraint.vertical=!0)}return n.constraint.current[t]={documentId:e,horizontal:a},!0}}}else if(o.layoutRelative){return e&&void 0===i&&(i="true"===e),n.android(this.localizeString(s["true"===e?"relativeParent":"relative"][t]),e,i),!0}return!1}anchorParent(t,e,i,n){const o=this.anchorTarget,a=o.renderParent;if(a){const r=t===c.HORIZONTAL;if(a.layoutConstraint){if(n||!this.constraint[t])return o.anchor(r?"left":"top","parent",n),o.anchor(r?"right":"bottom","parent",n),o.constraint[t]=!0,e&&o.anchorStyle(t,e,i,n),!0}else if(a.layoutRelative)return o.anchor(r?"centerHorizontal":"centerVertical","true",n),!0}return!1}anchorStyle(t,e="packed",i=0,n=!0){const o=this.anchorTarget,a=t===c.HORIZONTAL;o.app(a?"layout_constraintHorizontal_chainStyle":"layout_constraintVertical_chainStyle",e,n),o.app(a?"layout_constraintHorizontal_bias":"layout_constraintVertical_bias",""+i,n)}anchorDelete(...t){const e=this.anchorTarget,i=e.renderParent;if(i)if(i.layoutConstraint)e.delete("app",...U.replaceMap(t,t=>this.localizeString(s.constraint[t])));else if(i.layoutRelative)for(const i of t)""!==e.alignSibling(i)?e.delete("android",s.relative[i],this.localizeString(s.relative[i])):s.relativeParent[i]&&e.delete("android",this.localizeString(s.relativeParent[i]))}anchorClear(){const t=this.anchorTarget,e=t.renderParent;e&&(e.layoutConstraint?t.anchorDelete(...Object.keys(s.constraint)):e.layoutRelative&&(t.anchorDelete(...Object.keys(s.relativeParent)),t.anchorDelete(...Object.keys(s.relative))))}alignParent(t){const e=this.anchorTarget,i=e.renderParent;if(i)if(i.layoutConstraint){const i=s.constraint[t];if(i)return"parent"===e.app(this.localizeString(i))||"parent"===e.app(i)}else if(i.layoutRelative){const i=s.relativeParent[t];if(i)return"true"===e.android(this.localizeString(i))||"true"===e.android(i)}else if(i.layoutLinear){const n=i.renderChildren;switch(t){case"left":return i.layoutHorizontal&&e===n[0];case"top":return i.layoutVertical&&e===n[0]}}return!1}alignSibling(t,e){const i=this.anchorTarget,n=i.renderParent;if(n)if(e){if(n.layoutConstraint){const n=s.constraint[t];n&&i.app(this.localizeString(n),e)}else if(n.layoutRelative){const n=s.relative[t];n&&i.android(this.localizeString(n),e)}}else if(n.layoutConstraint){const e=s.constraint[t];if(e){const t=i.app(this.localizeString(e))||i.app(e);return"parent"!==t&&t!==n.documentId?t:""}}else if(n.layoutRelative){const e=s.relative[t];if(e)return i.android(this.localizeString(e))||i.android(e)}return""}supported(t,e={}){if(this._api<29){const i=x.android;if(i&&"function"==typeof i[t]){const n=i[t](e,this._api,this);if(!n||Object.keys(e).length)return n}for(let i=this._api;i<=29;i++){const n=_[i];if(n&&void 0!==n.android[t]){const i=n.android[t];return"function"==typeof i?i(e,this._api,this):i}}}return!0}combine(...t){const e=[],i=0===t.length;let n="";for(const o of this._namespaces)if(i||t.includes(o)){const t=this["__"+o];if(t)for(const i in t)"id"===i&&"android"===o?n=t[i]:e.push(("_"!==o?o+":":"")+`${i}="${t[i]}"`)}return e.sort((t,e)=>t>e?1:-1),e.unshift(`android:id="${""!==n?n:"@+id/"+this.controlId}"`),e}localizeString(t){return this.hasProcedure(j.NODE_PROCEDURE.LOCALIZATION)?B(t,this.localSettings.supportRTL,this._api):t}hide(t){t?this.android("visibility","invisible"):super.hide()}clone(t,e=!1,n=!1){const o=new i(t||this.id,this.sessionId,this.element||void 0);if(o.localSettings=Object.assign({},this.localSettings),void 0!==t?o.setControlType(this.controlName,this.containerType):(o.controlId=this.controlId,o.controlName=this.controlName,o.containerType=this.containerType),this.cloneBase(o),e){this._boxReset&&Object.assign(o.unsafe("boxReset"),this._boxReset),this._boxAdjustment&&Object.assign(o.unsafe("boxAdjustment"),this._boxAdjustment);for(const t of this._namespaces){const e=this["__"+t];for(const i in e)o.attr(t,i,"id"===i&&"android"===t?o.documentId:e[i])}}if(n){o.anchorClear();const t=this.documentId;o.anchor("left",t)&&(o.modifyBox(16),Object.assign(o.unsafe("boxAdjustment"),{marginLeft:0})),o.anchor("top",t)&&(o.modifyBox(2),Object.assign(o.unsafe("boxAdjustment"),{marginTop:0}))}return o}setControlType(t,i){if(this.controlName=t,i?this.containerType=i:0===this.containerType&&(this.containerType=e.UNKNOWN),""===this.controlId){let t;if(this.styleElement){const e=this.elementId;("parent"===(t=nt(""!==e?e:V.getNamedItem(this.element,"name")))||h.includes(t))&&(t="_"+t)}this.controlId=U.convertWord(squared.base.ResourceUI.generateId("android",t||U.fromLastIndexOf(this.controlName,".").toLowerCase(),t?0:1))}}setLayout(){const t=this.renderParent;switch(this.cssAscend("visibility",!0)){case"hidden":case"collapse":this.hide(!0)}if(this.plainText)return this.setLayoutWidth("wrap_content",!1),void this.setLayoutHeight("wrap_content",!1);const i=this.documentParent;let n=!1;if(this.documentBody&&(("100%"===this.css("width")||"100%"===this.css("minWidth")||!this.hasWidth&&this.renderChildren.some(t=>t.alignParent("right")))&&this.setLayoutWidth("match_parent",!1),("100%"===this.css("height")||"100%"===this.css("minHeight")||!this.hasHeight&&this.renderChildren.some(t=>t.alignParent("bottom")))&&this.setLayoutHeight("match_parent",!1)),""===this.layoutWidth){let o="";if(!this.hasPX("width")||this.inlineStatic&&""!==this.cssInitial("width"))if(this.length>0)switch(this.cssInitial("width")){case"max-content":case"fit-content":for(const t of this.renderChildren)t.hasPX("width")||t.setLayoutWidth("wrap_content");o="wrap_content";break;case"min-content":const t=[];let e=0;for(const i of this.renderChildren)if(!i.textElement||i.hasPX("width")){const t=i.actualWidth;t>e&&(e=t)}else{const n=i.parseUnit(i.css("minWidth"));n>e&&(e=n),t.push(i)}if(t.length){const i=H.formatPX(e);for(const e of t)e.css("maxWidth",i)}o="wrap_content"}else this.imageElement&&this.hasPX("height")&&(o="wrap_content",n=!0);else{const a=this.css("width");let r=-1;if(H.isLength(a))r=this.actualWidth;else if(H.isPercent(a))if(this.inputElement)r=this.bounds.width;else if(t.layoutConstraint&&!t.hasPX("width",!1))"100%"===a?o="match_parent":(this.app("layout_constraintWidth_percent",F.truncate(parseFloat(a)/100,this.localSettings.floatPrecision)),o="0px"),n=!0;else if(t.is(e.GRID))o="0px",this.android("layout_columnWeight",F.truncate(parseFloat(a)/100,this.localSettings.floatPrecision)),n=!0;else if(this.imageElement)"100%"!==a||t.inlineWidth?(r=this.bounds.width,n=!0):o="match_parent";else if("100%"===a){if(!this.support.maxWidth){const e=this.css("maxWidth"),n=this.parseUnit(e),a=this.absoluteParent||i;"100%"===e?!t.inlineWidth&&U.aboveRange(n,a.box.width)?o="match_parent":r=Math.min(this.actualWidth,n):n>0&&(this.blockDimension?r=Math.min(this.actualWidth,n):o=Math.ceil(n)<Math.floor(a.width)?"wrap_content":"match_parent")}""!==o||!this.documentRoot&&t.inlineWidth||(o="match_parent")}else r=this.actualWidth;r>0&&(o=H.formatPX(r))}if(""===o)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage)o=H.formatPX(this.actualWidth);else{const n=()=>{let e=t,i=!0;do{if(!e.blockWidth)return i=!1,void(e.inlineWidth?this.styleElement&&this.cssTry("display","inline-block")&&(this.element.getBoundingClientRect().width<this.bounds.width&&(o="match_parent"),this.cssFinally("display")):o="match_parent");if(e.documentBody)break;e=e.renderParent}while(e);i&&(t.layoutVertical||t.layoutFrame||this.onlyChild||(t.layoutRelative||t.layoutConstraint)&&""===this.alignSibling("leftRight")&&""===this.alignSibling("rightLeft"))&&(o="match_parent")};!this.blockStatic||this.inputElement||t.is(e.GRID)||("flex"===this.display?t.layoutConstraint&&this.css("flexDirection").startsWith("column")?o="0px":i.layoutElement||(o="match_parent"):i.layoutElement||n()),""!==o||this.floating||(this.layoutVertical&&!t.inlineWidth&&(t.layoutFrame&&this.rightAligned||this.layoutLinear&&this.naturalElements.some(t=>t.lineBreak)||this.renderChildren.some(t=>t.layoutConstraint&&t.blockStatic))&&!this.documentRoot||!this.pageFlow&&this.absoluteParent===i&&this.hasPX("left")&&this.hasPX("right")||this.is(e.GRID)&&this.some(t=>parseFloat(t.android("layout_columnWeight"))>0)||i.flexElement&&this.flexbox.grow>0&&t.flexibleWidth&&i.css("flexDirection").startsWith("row")?o="match_parent":this.naturalElement&&!this.inlineHorizontal&&this.some(t=>t.naturalElement&&t.blockStatic&&t.textElement)&&!i.layoutElement&&n())}this.setLayoutWidth(o||"wrap_content")}let o=this.layoutHeight;if(""===this.layoutHeight){if(!this.hasPX("height")||this.inlineStatic&&""!==this.cssInitial("height"))this.imageElement&&this.hasPX("width")&&(o="wrap_content",n=!0);else{const a=this.css("height");let r=-1;if(H.isLength(a))r=this.actualHeight;else if(H.isPercent(a)){if(this.inputElement)r=this.bounds.height;else if(this.imageElement)"100%"!==a||t.inlineHeight?(r=this.bounds.height,n=!0):o="match_parent";else if("100%"===a){if(!this.support.maxHeight){const e=this.css("maxHeight"),n=this.parseUnit(e),a=this.absoluteParent||i;"100%"===e?!t.inlineHeight&&U.aboveRange(n,a.box.height)?o="match_parent":r=Math.min(this.actualHeight,n):n>0&&(this.blockDimension?r=Math.min(this.actualHeight,n):o=Math.ceil(n)<Math.floor(a.box.height)?"wrap_content":"match_parent")}""!==o||!this.documentRoot&&t.inlineHeight||(o="match_parent")}""===o&&this.hasHeight&&(r=this.actualHeight)}r>0&&(this.is(e.LINE)&&"HR"!==this.tagName&&this.hasPX("height",!0,!0)&&(r+=this.borderTopWidth+this.borderBottomWidth),o=H.formatPX(r))}""===o&&(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage?t.layoutConstraint&&!this.floating&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||i).box.height?(o="0px",this.anchor("bottom","parent")):o=H.formatPX(this.actualHeight):("table-cell"===this.display||!this.pageFlow&&this.leftTopAxis&&this.hasPX("top")&&this.hasPX("bottom")||this.onlyChild&&t.flexElement&&!t.inlineHeight&&t.css("flexDirection").startsWith("row")&&void 0===this.outerWrapper)&&(o="match_parent")),this.setLayoutHeight(o||"wrap_content")}else"0px"===o&&t.inlineHeight&&""===t.android("minHeight")&&!i.layoutElement&&this.setLayoutHeight("wrap_content");const a=t=>!(i.flexElement&&this.flexbox.grow>0&&i.css("flexDirection").startsWith(t));this.hasPX("minWidth")&&a("column")&&this.android("minWidth",this.convertPX(this.css("minWidth")),!1),this.hasPX("minHeight")&&a("row")&&this.android("minHeight",this.convertPX(this.css("minHeight"),"height"),!1);const r=this.support;if(r.maxWidth){const t=this.css("maxWidth");let e=-1;H.isLength(t,!0)?"100%"===t?this.imageElement?e=this.element.naturalWidth:this.svgElement&&(e=this.bounds.width):e=this.parseUnit(this.css("maxWidth")):!this.pageFlow&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&(this.ascend(t=>t.hasPX("width")).length>0||!/\n/.test(this.textContent))&&(e=Math.ceil(this.bounds.width)),-1!==e&&(this.android("maxWidth",H.formatPX(e),!1),this.imageElement&&(n=!0))}if(r.maxHeight){const t=this.css("maxHeight");if(H.isLength(t,!0)){let e=-1;(e="100%"===t&&this.imageElement?this.element.naturalHeight:this.parseUnit(this.css("maxHeight"),"height"))>=0&&(this.android("maxHeight",H.formatPX(e)),this.imageElement&&(n=!0))}}this.imageElement&&(n||this.blockWidth||this.blockHeight)&&this.android("adjustViewBounds","true")}setAlignment(){const t=this.renderParent,i=this.outerWrapper||this,n=i.renderParent||t;let o=$(this.cssInitial("textAlign",!0),!1),a=$(this.cssAscend("textAlign"),!0);if(this.nodeGroup&&""===o&&!this.hasAlign(512)){const t=this.actualParent;t&&(o=$(t.cssInitial("textAlign",!0),!1))}if(this.pageFlow){let r="";if(this.inlineVertical&&(n.layoutHorizontal&&!n.support.container.positionRelative||n.is(e.GRID)||"table-cell"===this.display)){const t="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",!0)){case"top":i.mergeGravity(t,"top");break;case"middle":i.mergeGravity(t,c.CENTER_VERTICAL);break;case"bottom":i.mergeGravity(t,"bottom")}}if(this.blockWidth?i.nodeGroup&&i.layoutVertical&&this.rightAligned&&i.renderEach(t=>{t.rightAligned&&t.mergeGravity("layout_gravity","right")}):((n.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))&&(this.floating?i.mergeGravity("layout_gravity",this.float):J(i)||""===o||!this.hasWidth||this.blockStatic||"table"===this.display||i.mergeGravity("layout_gravity",o,!1)),this.rightAligned||this.nodeGroup&&this.renderChildren.length&&this.renderChildren.every(t=>t.rightAligned)?r="right":this.nodeGroup&&this.hasAlign(512)&&!this.renderChildren.some(t=>t.rightAligned)&&(r="left")),t.layoutFrame&&void 0===this.innerWrapped){if(J(this)||(this.floating&&(r=this.float),""!==r&&!t.naturalElement&&(t.inlineWidth||!t.documentRoot&&this.onlyChild)&&(t.mergeGravity("layout_gravity",r),r=""),this.centerAligned&&this.mergeGravity("layout_gravity",$("center",!1))),this.onlyChild&&"table-cell"===t.display){let e;switch(t.css("verticalAlign")){case"top":e="top";break;case"bottom":e="bottom";break;default:e=c.CENTER_VERTICAL}this.mergeGravity("layout_gravity",e)}}else n.layoutFrame&&t.blockWidth&&this.rightAligned&&this.mergeGravity("layout_gravity","right");""!==r?this.blockWidth?""!==o&&"right"!==r||(o=r):(i.blockWidth&&this!==i?this:i).mergeGravity("layout_gravity",r):J(i.inlineWidth?i:this)&&""!==o&&(a="")}if(""===a||!this.blockStatic||this.centerAligned||this.rightAligned||i.mergeGravity("layout_gravity","left",!1),this.layoutConstraint||this.layoutFrame||this.is(e.GRID)||this.layoutElement||(""!==o?this.imageOrSvgElement||this.mergeGravity("gravity",o):""===a||this.inputElement||(this.imageOrSvgElement?this.pageFlow&&this.mergeGravity("layout_gravity",a):this.nodeGroup&&this.hasAlign(512)||this.mergeGravity("gravity",a))),i.autoMargin.vertical&&(t.layoutFrame||t.layoutLinear&&t.layoutVertical)){const t=i.autoMargin;i.mergeGravity("layout_gravity",t.topBottom?c.CENTER_VERTICAL:t.top?"bottom":"top")}}mergeGravity(t,i,n=!0){if("layout_gravity"===t){const t=this.renderParent;if(t){if(function(t){switch(t){case"left":case"start":case"right":case"end":case c.CENTER_HORIZONTAL:return!0}return!1}(i)&&(this.blockWidth||t.inlineWidth&&this.onlyChild||!n&&this.outerWrapper&&this.hasPX("maxWidth")))return;if(t.layoutRelative){if(i===c.CENTER_HORIZONTAL&&""===this.alignSibling(q.STRING_BASE.LEFT_RIGHT)&&""===this.alignSibling(q.STRING_BASE.RIGHT_LEFT))return this.anchorDelete("left","right"),void this.anchor("centerHorizontal","true")}else if(t.layoutConstraint){if(!t.layoutHorizontal&&!this.positioned)switch(i){case"top":this.anchor("top","parent",!1);break;case"right":case"end":""===this.alignSibling(q.STRING_BASE.RIGHT_LEFT)&&this.anchor("right","parent",!1);break;case"bottom":this.anchor("bottom","parent",!1);break;case"left":case"start":""===this.alignSibling(q.STRING_BASE.LEFT_RIGHT)&&this.anchor("left","parent",!1);break;case c.CENTER_HORIZONTAL:""===this.alignSibling(q.STRING_BASE.LEFT_RIGHT)&&""===this.alignSibling(q.STRING_BASE.LEFT_RIGHT)&&this.anchorParent(c.HORIZONTAL,void 0,void 0,!0)}return}}}else if(this.is(e.TEXT)&&this.textEmpty)return;const o=new Set,a=this.android(t);if(""!==a)for(const t of a.split("|"))o.add(t);o.add(this.localizeString(i));let r="";switch(o.size){case 0:break;case 1:r=$(o.values().next().value,!1);default:function s(t){const e=t+"_horizontal",i=t+"_vertical";(o.has(t)||o.has(e)&&o.has(i))&&(o.delete(e),o.delete(i),o.add(t))}s("center"),s("fill");let t="",e="",i="";for(const a of o.values())switch(a){case"left":case"start":case"right":case"end":case c.CENTER_HORIZONTAL:(""===t||n)&&(t=a);break;case"top":case"bottom":case c.CENTER_VERTICAL:(""===e||n)&&(e=a);break;default:i+=(""!==i?"|":"")+a}r=""!==t&&""!==e?t+"|"+e:t||e,""!==i&&(r+=(""!==r?"|":"")+i)}""!==r&&this.android(t,r)}applyOptimizations(){const t=this.renderParent;if(t){!(this.tableElement?"content-box"===this.css("boxSizing")||W.isUserAgent(8):this.styleElement)||!this.visibleStyle.borderWidth||this.is(e.LINE)||0!==this.renderChildren.length&&this.naturalChildren.every(t=>!t.pageFlow&&t.absoluteParent===this)||(this.modifyBox(256,this.borderLeftWidth),this.modifyBox(64,this.borderRightWidth),this.modifyBox(32,this.borderTopWidth),this.modifyBox(128,this.borderBottomWidth)),this.alignLayout(t),this.setLineHeight(t),this.inlineWidth&&this.renderChildren.some(t=>t.blockWidth&&t.some(t=>t.flexibleWidth))&&this.setLayoutWidth(this.documentRoot||t.inlineWidth?H.formatPX(this.actualWidth):"match_parent")}}applyCustomizations(t=!0){const e=(e,i)=>{const n=e.assign[i];if(n)for(const e in n){const i=n[e];for(const n in i)this.attr(e,n,i[n],t)}},{tagName:i,controlName:n}=this;e(_[0],i),e(_[0],n);const o=_[this._api];o&&(e(o,i),e(o,n))}setBoxSpacing(){const t=this._boxReset,i=this._boxAdjustment,n=(e,n,o=!1)=>{let a=0,r=0,s=0,l=0;for(let n=0;n<4;n++){const o=e[n];let c=void 0===t||0===t[o]?this[o]:0;if(0!==c)switch(o){case"marginRight":if(c<0)"right"===this.float&&U.aboveRange(this.linear.right,this.documentParent.box.right)&&(c=0);else if(this.inline){const t=this.documentParent.box.right,e=this.bounds.right;if(Math.floor(e)>t){this.onlyChild||this.alignParent("left")||this.setSingleLine(!0);continue}e+c>t&&(c=F.clampRange(t-e,0,c))}break;case"marginBottom":c<0&&this.pageFlow&&!this.blockStatic&&(c=0);break;case"paddingTop":case"paddingBottom":c=this.actualPadding(o,c)}switch(i&&(c+=i[o]),n){case 0:a=c;break;case 1:r=c;break;case 2:s=c;break;case 3:l=c}}if(0!==a||0!==l||0!==s||0!==r){let t=0,e=0,i=0;if(n&&this.positionStatic&&!this.blockWidth&&(l<0||r<0))switch(this.cssAscend("textAlign")){case"center":l<r?(r+=Math.abs(l),r/=2,l=0):(l+=Math.abs(r),l/=2,r=0);break;case"right":case"end":l<0&&(l=0)}!o&&this._api>=26&&(a===r&&r===s&&s===l?t=a:(l===r&&(e=l),a===s&&(i=a))),0!==t?this.android(n?c.MARGIN:c.PADDING,H.formatPX(t)):(0!==e?this.android(n?c.MARGIN_HORIZONTAL:c.PADDING_HORIZONTAL,H.formatPX(e)):(0!==l&&this.android(this.localizeString(n?c.MARGIN_LEFT:c.PADDING_LEFT),H.formatPX(l)),0!==r&&this.android(this.localizeString(n?c.MARGIN_RIGHT:c.PADDING_RIGHT),H.formatPX(r))),0!==i?this.android(n?c.MARGIN_VERTICAL:c.PADDING_VERTICAL,H.formatPX(i)):(0!==a&&this.android(n?c.MARGIN_TOP:c.PADDING_TOP,H.formatPX(a)),0!==s&&this.android(n?c.MARGIN_BOTTOM:c.PADDING_BOTTOM,H.formatPX(s))))}};n(H.BOX_MARGIN,!0,!!this.renderParent&&this.renderParent.is(e.GRID)),n(H.BOX_PADDING,!1)}setSingleLine(t=!1){if(this.textElement&&this.naturalChild){const e=this.actualParent;e.preserveWhiteSpace||"CODE"===e.tagName||this.multiline&&"nowrap"!==e.css("whiteSpace")||this.android("maxLines","1"),t&&this.textContent.trim().length>1&&this.android("ellipsize","end")}}extractAttributes(t){if("rtl"!==this.dir||this.imageOrSvgElement||(this.textElement?this.android("textDirection","rtl"):this.renderChildren.length&&this.android("layoutDirection","rtl")),this.styleElement){const t=H.getDataSet(this.element,"android");for(const e in t){const i="attr"===e?"android":Y.test(e)?U.capitalize(e.substring(4),!1):"";if(""!==i)for(const n of t[e].split(";")){const[t,e]=n.split("::");t&&e&&this.attr(i,t,e)}}if(this.naturalElement){const t=this.css("opacity");"1"!==t&&this.android("alpha",t)}}const e="\n"+"\t".repeat(t);let i="";for(const t of this.combine())i+=e+t;return i}setLayoutWidth(t,e=!0){this.android("layout_width",t,e)}setLayoutHeight(t,e=!0){this.android("layout_height",t,e)}alignLayout(t){if(this.layoutLinear)if(this.layoutVertical){if(!(t.layoutVertical||t.layoutFrame||this.documentRoot||this.hasAlign(1024))){let t,e=this.renderChildren;do{if((t=e[0])&&t.naturalChild)break;e=t.renderChildren}while(e.length);t.baseline&&(t.textElement||t.inputElement)&&this.android("baselineAlignedChildIndex","0")}}else{const t=this.renderChildren;if(t.some(t=>t.floating)&&!t.some(t=>t.imageElement&&t.baseline))this.android("baselineAligned","false");else{const e=squared.base.NodeUI.baseline(t,!0);e&&(e.textElement||e.inputElement)&&this.android("baselineAlignedChildIndex",""+t.indexOf(e))}const e=t.length;for(let i=1;i<e;i++)t[i].setSingleLine(i===e-1)}}setLineHeight(t){let e=this.lineHeight;if(e>0){const i=this.has("lineHeight");if(this.multiline)Q(this,e,i,!0);else{const n=this.renderChildren.length>0;if(i||n||0===t.lineHeight)if(n)if(this.inline)this.renderEach(t=>{t.lineHeight>e&&(e=t.lineHeight),t.setCacheValue("lineHeight",0)}),tt(this,e,i,!0,!0);else{const t=this.horizontalRows||[this.renderChildren];let i=!1;const n=t.length;for(let o=0;o<n;o++){const a=t[o],r=t[o+1];let s=r&&(1===r.length&&r[0].multiline||r[0].lineBreakLeading);if(!s&&o<n-1){const e=t[o+1].find(t=>t.baselineActive);e&&e.has("lineHeight")&&(s=!0)}const l=a.find(t=>t.baselineActive),c=1===a.length&&!a[0].multiline,d=c||!i&&(o>0||1===n)||a[0].lineBreakLeading,h=c||!s&&(o<n-1||1===n);if(l){if(l.has("lineHeight")){i=!0;continue}tt(l,e,!1,d,h)}else for(const t of a)0!==t.length||t.has("lineHeight")||t.multiline||t.baselineAltered||tt(t,e,!1,d,h);i=1===a.length&&a[0].multiline}}else tt(this,e,i,!0,!0)}}}get documentId(){const t=this.controlId;return t?"@id/"+t:""}get anchorTarget(){const t=this.renderParent;return t&&(t.layoutConstraint||t.layoutRelative)?this:this.outerWrapper||this}set anchored(t){this.constraint.horizontal=t,this.constraint.vertical=t}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}set containerType(t){this._containerType=t}get containerType(){if(0===this._containerType){const t=r[this.containerName];t&&(this._containerType=t)}return this._containerType}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this.is(e.FRAME)}get layoutLinear(){return this.is(e.LINEAR)}get layoutRelative(){return this.is(e.RELATIVE)}get layoutConstraint(){return this.is(e.CONSTRAINT)}set renderExclude(t){this._cached.renderExclude=t}get renderExclude(){let t=this._cached.renderExclude;if(void 0===t){if(this.styleElement&&0===this.length&&!this.imageElement){const e=this.renderParent;t=this.blockStatic||e&&(e.layoutVertical||e.layoutFrame)?0===this.contentBoxHeight&&((0===this.bounds.height||this.textEmpty&&this.pseudoElement&&this.pageFlow)&&this.marginTop<=0&&this.marginBottom<=0||"hidden"===this.css("overflow")&&z.CHAR.UNITZERO.test(this.css("height")))&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop"):this.textEmpty&&(0===this.bounds.width&&0===this.contentBoxWidth&&this.marginLeft<=0&&this.marginRight<=0&&!this.visibleStyle.background||0===this.bounds.height&&0===this.contentBoxHeight&&this.marginTop<=0&&this.marginBottom<=0)&&""===this.alignSibling("leftRight")&&""===this.alignSibling("rightLeft")&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop")}else t=!1;this._cached.renderExclude=t}return t}get baselineHeight(){let t=this._cached.baselineHeight;if(void 0===t){if(t=0,this.plainText)t=this.bounds.height/(this.bounds.numberOfLines||1);else if(this.multiline&&this.cssTry("white-space","nowrap")?(t=this.element.getBoundingClientRect().height,this.cssFinally("white-space")):t=this.hasHeight?this.actualHeight:this.bounds.height,this.naturalElement&&this.lineHeight>t)t=this.lineHeight;else if(this.inputElement)switch(this.controlName){case o.BUTTON:t+=2;break;case o.RADIO:case o.CHECKBOX:t+=8;break;case o.SELECT:t+=4,t/=this.element.size||1}else this.is(e.PROGRESS)&&(t+=4);this._cached.baselineHeight=t}return t}get leftTopAxis(){let t=this._cached.leftTopAxis;if(void 0===t){switch(this.cssInitial("position")){case"absolute":const{absoluteParent:e,documentParent:i}=this;e===i?t=!0:e&&this.has("right")&&!this.has("left")&&e.box.right===i.linear.right?(this.css("top",H.formatPX(this.linear.top-i.box.top),!0),t=!0):t=!1;break;case"fixed":t=!0;break;default:t=!1}this._cached.leftTopAxis=t}return t}get support(){let t=this._cached.support;if(void 0===t){const e=this.textElement||this.imageOrSvgElement;t={container:{positionRelative:this.layoutRelative||this.layoutConstraint},maxWidth:e,maxHeight:e},0!==this.containerType&&(this._cached.support=t)}return t}get layoutWidth(){return this.android("layout_width")}get layoutHeight(){return this.android("layout_height")}get inlineWidth(){return"wrap_content"===this.layoutWidth}get inlineHeight(){return"wrap_content"===this.layoutHeight}get blockWidth(){return"match_parent"===this.layoutWidth}get blockHeight(){return"match_parent"===this.layoutHeight}get flexibleWidth(){return it(this,this.layoutWidth)}get flexibleHeight(){return it(this,this.layoutHeight)}set localSettings(t){this._localSettings?Object.assign(this._localSettings,t):this._localSettings=Object.assign({},t);const e=t.targetAPI;e&&(this._api=e)}get localSettings(){return this._localSettings}});class at extends(ot(squared.base.NodeUI)){}class rt extends(ot(squared.base.NodeGroupUI)){constructor(t,e,i,n){super(t,e.sessionId,void 0,n),this.depth=e.depth,this.containerName=e.containerName+"_GROUP",this.actualParent=e.actualParent,this.documentParent=e.documentParent,this.retain(i)}}const{client:st,color:lt,css:ct,dom:dt,math:ht,regex:ut,session:pt,util:gt,xml:mt}=squared.lib,{constant:ft,enumeration:Tt}=squared.base.lib,yt=squared.base.NodeUI,bt=[c.HORIZONTAL,c.VERTICAL],At={};let Et;function St(t){t.some(t=>t.floating)&&t.sort((t,e)=>{if(t.floating&&!e.floating)return"left"===t.float?-1:1;if(!t.floating&&e.floating)return"left"===e.float?1:-1;if(t.floating&&e.floating){if(t.float!==e.float)return"left"===t.float?-1:1;if("right"===t.float&&"right"===e.float)return 1}return 0})}function Rt(t){return t.length>1&&t.sort((t,e)=>{const i=t.node.innerWrapped||t.node,n=e.node.innerWrapped||e.node;return i.absoluteParent===n.absoluteParent?i.zIndex===n.zIndex?i.childIndex<n.childIndex?-1:1:i.zIndex<n.zIndex?-1:1:i.intersectX(n.bounds,"bounds")&&i.intersectY(n.bounds,"bounds")?i.depth===n.depth?0:i.id<n.id?-1:1:0}),t}function It(t,e){let i,n=0;for(const o of e)if(o!==t&&!o.baselineAltered){let e=o.bounds.height;if(e>0||o.textElement){if(o.blockVertical&&t.blockVertical){o.anchor("bottom",t.documentId);continue}if(!o.textElement&&!o.inputElement){for(const t of o.renderChildren.filter(t=>t.imageOrSvgElement&&t.baseline))t.bounds.height>e&&(e=t.bounds.height);if(e>t.bounds.height){void 0===i||e>=n?(i&&i.anchor(o.imageOrSvgElement?"baseline":"bottom",o.documentId),i=o,n=e):o.anchor(i.imageOrSvgElement?"baseline":"bottom",i.documentId);continue}if(gt.withinRange(o.linear.top,o.documentParent.box.top)){o.anchor("top","true");continue}}(o.naturalChild&&0===o.length||_t(o))&&o.anchor("baseline",t.documentId)}else o.imageOrSvgElement&&o.baseline&&(i=o)}i&&t.anchor(i.imageOrSvgElement?"baseline":"bottom",i.documentId)}function _t(t){if(t.layoutHorizontal){const e=t.renderChildren;return e.length&&e.every(t=>t.baseline&&!t.baselineAltered&&(!t.positionRelative||t.positionRelative&&0===t.top&&0===t.bottom))}if(t.layoutVertical){const e=t.renderChildren,i=e[0];return i&&i.baseline&&(1===e.length||i.textElement)}return!1}function xt(t,e,i){if(i>0){if(t.documentBody)switch(e){case 32:i-=t.marginTop;break;case 64:i-=t.marginRight;break;case 128:i-=t.marginBottom;break;case 256:i-=t.marginLeft}if(1!==t.getBox(e)[0])switch(e){case 32:i+=t.borderTopWidth-t.paddingTop;break;case 64:i+=t.borderRightWidth-t.paddingRight;break;case 128:i+=t.borderBottomWidth-t.paddingBottom;break;case 256:i+=t.borderLeftWidth-t.paddingLeft}return Math.max(i,0)}return i}function wt(t,e){if("left"===e.float){if(e.marginRight<0){return t.modifyBox(16,e.actualWidth+(e.hasWidth?e.paddingLeft+e.borderLeftWidth:0)-Math.abs(e.marginRight)),t.anchor("left",e.documentId),e.modifyBox(4),!0}}else if("right"===t.float&&"right"===e.float&&e.marginLeft<0){const i=Math.abs(e.marginLeft),n=e.actualWidth;return i<n&&t.modifyBox(4,n-i),t.anchor("right",e.documentId),e.modifyBox(16),!0}return!1}function vt(t,e,i){if(!t.inputElement&&!t.imageOrSvgElement){const o=t.documentParent,a=t.renderParent;if(a){function n(){a.nodeGroup&&(a.addAlign(64),a.unsetCache("blockStatic"))}if(!t.blockWidth&&!o.flexElement){const a=t.cssInitial(i?"minWidth":"minHeight",!0);if(ct.isLength(a,!0)&&"0px"!==a){let r=!1;i?t.ascend(t=>t.hasPX("width")||t.blockStatic).length&&(t.setLayoutWidth("0px",!1),r=t.flexibleWidth,n()):(t.absoluteParent||o).hasHeight&&!t.hasPX("height")&&(t.setLayoutHeight("0px",!1),r=t.flexibleHeight),r&&(t.app(i?"layout_constraintWidth_min":"layout_constraintHeight_min",ct.formatPX(t.parseUnit(a,e.toLowerCase()))),t.css(i?"minWidth":"minHeight","auto"))}}const r=t.cssInitial(i?"maxWidth":"maxHeight",!0);let s=0;if(ct.isLength(r,!0)){let l=!1;if(i?(t.outerWrapper||t.ascend(t=>t.hasPX("width")||t.blockStatic).length)&&(t.setLayoutWidth(a.flexibleWidth?"match_parent":"0px",t.innerWrapped&&t.innerWrapped.naturalChild),l=t.flexibleWidth,n(),l&&!ct.isPercent(r)&&(s+=t.contentBoxWidth)):(t.absoluteParent||o).hasHeight&&!t.hasPX("height")&&(t.setLayoutHeight(a.flexibleHeight?"match_parent":"0px",t.innerWrapped&&t.innerWrapped.naturalChild),(l=t.flexibleHeight)&&!ct.isPercent(r)&&(s+=t.contentBoxHeight)),l){const n=t.parseUnit(r,e.toLowerCase());t.app(i?"layout_constraintWidth_max":"layout_constraintHeight_max",ct.formatPX(n+s)),i&&t.layoutVertical&&t.each(t=>{t.textElement&&!t.hasPX("maxWidth")&&t.css("maxWidth",ct.formatPX(n))})}}}}}function Nt(t,e,i,n){const o=t.cssInitial(e,!0);let a;if(n){if(ct.isLength(o,!0)&&(a=ct.formatPX(t.bounds[e]),t.imageElement)){const n=t.element;if(n.naturalWidth>0&&n.naturalHeight>0){const o=ct.formatPX(t.bounds[e]/(i?n.naturalWidth:n.naturalHeight)*(i?n.naturalHeight:n.naturalWidth));i?t.setLayoutHeight(o,!1):t.setLayoutWidth(o,!1)}}}else if(ct.isPercent(o)&&"100%"!==o){t.app(i?"layout_constraintWidth_percent":"layout_constraintHeight_percent",ht.truncate(parseFloat(o)/100,t.localSettings.floatPrecision)),a="0px"}return!!a&&(i?t.setLayoutWidth(a,!1):t.setLayoutHeight(a,!1),!0)}function Ct(t,e){if(e||t.documentParent.layoutElement||!t.documentParent.hasPX("width",!1))Nt(t,"width",!0,e);else{const e=t.cssInitial("width",!0);ct.isPercent(e)&&"100%"!==e&&t.setLayoutWidth(ct.formatPX(t.bounds.width))}}function Lt(t,e){if(t.documentParent.hasPX("height",!1))if(e||t.documentParent.layoutElement)Nt(t,"height",!1,e);else{const e=t.cssInitial("height",!0);ct.isPercent(e)&&"100%"!==e&&t.setLayoutHeight(ct.formatPX(t.bounds.height))}else{const e=t.cssInitial("height");"100%"===e&&t.alignParent("top")&&t.alignParent("bottom")?t.setLayoutHeight("0px",!1):ct.isLength(e,!0)&&t.setLayoutHeight(ct.formatPX(t.bounds.height),!1)}}function Pt(t){return gt.filterArray(t,t=>(t.baseline||ct.isLength(t.verticalAlign,!0))&&("TEXTAREA"===t.tagName||"SELECT"===t.tagName&&t.element.size>1)||"text-bottom"===t.verticalAlign&&"INPUT_IMAGE"!==t.containerName).sort((t,e)=>t.baselineHeight===e.baselineHeight?"SELECT"===t.tagName?1:0:t.baselineHeight>e.baselineHeight?-1:1)}function Ot(t){return t?["right","left",ft.STRING_BASE.RIGHT_LEFT,ft.STRING_BASE.LEFT_RIGHT]:["left","right",ft.STRING_BASE.LEFT_RIGHT,ft.STRING_BASE.RIGHT_LEFT]}function kt(t,e){if("BR"===t.tagName)return!0;{const i=pt.getElementAsNode(t,e);if(i)return!i.excluded&&i.blockStatic}return!1}function Xt(t){const e=t.length;for(let i=0;i<e;i++){const n=t[i];i>0&&n.anchor(ft.STRING_BASE.LEFT_RIGHT,t[i-1].documentId),i<e-1&&n.anchor(ft.STRING_BASE.RIGHT_LEFT,t[i+1].documentId),n.anchored=!0}const i=t[0],n=t[e-1];i.anchor("left","parent"),n.anchor("right","parent"),i.anchorStyle(c.HORIZONTAL,"spread_inside")}function Bt(t,e,i){const n=t[0][0],o=t.length;for(let a=0;a<o;a++){const o=t[a],r=o.length;for(let s=0;s<r;s++){const l=o[s];if(0===s?0===a?i?(i.anchor(ft.STRING_BASE.BOTTOM_TOP,l.documentId),l.anchor(ft.STRING_BASE.TOP_BOTTOM,"string"==typeof i?i:i.documentId)):(l.anchor("top","parent"),l.anchorStyle(c.VERTICAL)):(l.anchor("top",n.documentId),l.anchorStyle(c.VERTICAL),l.modifyBox(2)):(o[s-1].anchor(ft.STRING_BASE.BOTTOM_TOP,l.documentId),l.anchor(ft.STRING_BASE.TOP_BOTTOM,o[s-1].documentId)),s>0&&l.anchor("left",o[0].documentId),s===r-1){if(e)l.anchor("bottom","parent");else if(a>0&&!l.multiline){const e=t[a-1][s];e&&!e.multiline&&gt.withinRange(l.bounds.top,e.bounds.top)&&(l.anchor("top",e.documentId),l.modifyBox(2,-e.marginTop))}l.modifyBox(8)}l.anchored=!0,l.positioned=!0}}}const Mt=t=>t.plainText&&S.hasLineBreak(t,!1,!0)||t.preserveWhiteSpace&&ut.CHAR.LEADINGNEWLINE.test(t.textContent),Dt=t=>t.some(t=>t.positionRelative||!t.pageFlow&&t.positionAuto)?e.RELATIVE:e.LINEAR,Gt=t=>Math.max(t.actualHeight,t.lineHeight);class Wt extends squared.base.ControllerUI{constructor(t,e){super(),this.application=t,this.cache=e,this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:mt.STRING_XMLENCODING},directory:{string:"res/values",font:"res/font",image:"res/drawable"},svg:{enabled:!1},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:st.isPlatform(4)?"rgb(255, 255, 255)":"rgb(221, 221, 221)",meterForegroundColor:"rgb(99, 206, 68)",meterBackgroundColor:"rgb(237, 237, 237)",progressForegroundColor:"rgb(153, 153, 158)",progressBackgroundColor:"rgb(237, 237, 237)"},supported:{fontFormat:["truetype","opentype"],imageFormat:["jpg","jpeg","png","gif","bmp","webp","svg","ico","cur"]},unsupported:{cascade:new Set(["SELECT","svg"]),tagName:new Set(["HEAD","TITLE","META","SCRIPT","STYLE","LINK","OPTION","INPUT:hidden","COLGROUP","MAP","AREA","SOURCE","TEMPLATE","DATALIST"]),excluded:new Set(["BR","WBR"])},precision:{standardFloat:4},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.25,superscriptTopOffset:.25,legendBottomOffset:.25}}}static setConstraintDimension(t){Ct(t,!1),Lt(t,!1),vt(t,"Width",!0),vt(t,"Height",!1)}static setFlexDimension(t,e){const i="width"===e,n=t.flexbox,{grow:o,basis:a}=n;function r(e){i?t.setLayoutWidth("0px"):t.setLayoutHeight("0px"),o>0?(t.app(i?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",ht.truncate(o,t.localSettings.floatPrecision)),""!==e&&t.css(i?"minWidth":"minHeight",e,!0)):""!==e&&(n.shrink<1?(t.app(i?"layout_constraintWidth_min":"layout_constraintHeight_min",ct.formatPX((1-n.shrink)*parseFloat(e))),t.app(i?"layout_constraintWidth_max":"layout_constraintHeight_max",e)):t.app(i?"layout_constraintWidth_min":"layout_constraintHeight_min",e))}if(ct.isLength(a))r(t.convertPX(a));else if("0%"!==a&&ct.isPercent(a))t.app(i?"layout_constraintWidth_percent":"layout_constraintHeight_percent",(parseFloat(a)/100).toPrecision(t.localSettings.floatPrecision)),r("");else{const n=t.documentParent;o>0&&(i&&n.css("flexDirection").startsWith("row")||!i&&n.css("flexDirection").startsWith("column")&&(n.hasHeight||n.blockHeight||n.flexibleHeight))?r(t.hasPX(e,!1)?ct.formatPX(i?t.actualWidth:t.actualHeight):""):i?Ct(t,!1):Lt(t,!1)}n.shrink>1&&t.app(i?"layout_constrainedWidth":"layout_constrainedHeight","true"),vt(t,"Width",!0),i?Lt(t,!0):Ct(t,!0),vt(t,"Height",!1)}init(){const t=this.userSettings;Et={targetAPI:t.targetAPI||29,supportRTL:"boolean"!=typeof t.supportRTL||t.supportRTL,floatPrecision:this.localSettings.precision.standardFloat},super.init()}optimize(t){for(const e of t)e.applyOptimizations(),e.hasProcedure(Tt.NODE_PROCEDURE.CUSTOMIZATION)&&e.applyCustomizations(this.userSettings.customizationsOverwritePrivilege)}finalize(t){const e=this.userSettings.insertSpaces;for(const i of t)i.content=mt.replaceTab(i.content.replace(/{#0}/,D(i.content)),e)}processUnknownParent(t){const i=t.node;if(i.has("columnCount")||i.hasPX("columnWidth"))t.setContainerType(e.CONSTRAINT,260);else if(t.some(t=>!t.pageFlow&&!t.positionAuto))t.setContainerType(e.CONSTRAINT,34);else if(t.visible.length<=1){const n=i.find(t=>t.visible);if(!n)return this.processUnknownChild(t);if(i.documentRoot&&function(t,e){if(e.dataset.target&&t.element){const i=document.getElementById(e.dataset.target);return null!==i&&i!==t.element}return!1}(i,n))return i.hide(),{layout:t,next:!0};i.naturalElement&&n.plainText?(i.clear(),i.inlineText=!0,i.textContent=n.textContent,n.hide(),t.setContainerType(e.TEXT)):i.autoMargin.horizontal||t.parent.layoutConstraint&&t.parent.flexElement&&"baseline"===i.flexbox.alignSelf&&n.textElement?t.setContainerType(e.LINEAR,4104):n.percentWidth?(i.hasPX("width")||i.setLayoutWidth("match_parent"),t.setContainerType(e.CONSTRAINT,4160)):n.baseline&&(n.textElement||n.inputElement)?t.setContainerType(e.LINEAR,16):t.setContainerType(e.FRAME,4096)}else S.hasLineBreak(i,!0)?t.setContainerType(t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,18):this.checkConstraintFloat(t)?t.setContainerType(e.CONSTRAINT,512):t.linearX?(this.checkFrameHorizontal(t)?t.renderType|=520:this.checkConstraintHorizontal(t)?t.setContainerType(e.CONSTRAINT):this.checkLinearHorizontal(t)?(t.setContainerType(e.LINEAR),t.floated.size&&St(t.children)):t.setContainerType(e.RELATIVE),t.add(8)):t.linearY?t.setContainerType(Dt(t),16|(i.documentRoot?2:0)):t.every(t=>t.inlineFlow)?this.checkFrameHorizontal(t)?t.renderType|=520:t.setContainerType(Dt(t),18):t.some(e=>e.alignedVertically(e.childIndex>0?t.children.slice(0,e.childIndex):void 0,t.cleared)>0)?t.setContainerType(Dt(t),18):t.setContainerType(e.CONSTRAINT,2);return{layout:t}}processUnknownChild(t){const i=t.node,n=i.visibleStyle;if(!i.inlineText||i.textEmpty&&!n.borderWidth)if(i.blockStatic&&(n.borderWidth||n.backgroundImage||i.paddingTop+i.paddingBottom>0)&&0===i.naturalElements.length)t.setContainerType(e.FRAME);else{if(i.naturalElement&&!i.documentRoot&&""===i.elementId&&0===i.bounds.height&&0===i.marginTop&&0===i.marginRight&&0===i.marginBottom&&0===i.marginLeft&&!n.background&&!i.dataset.use)return i.hide(),{layout:t,next:!0};n.background?(t.setContainerType(e.TEXT),i.inlineText=!0):t.setContainerType(e.FRAME)}else t.setContainerType(e.TEXT);return{layout:t}}processTraverseHorizontal(t,i){const n=t.parent;return 1===t.floated.size&&t.same((t,e)=>t.floating&&(t.positiveAxis||t.renderExclude)?-1:e)?(t.node=this.createNodeGroup(t.node,t.children,n),t.setContainerType(e.CONSTRAINT,512)):this.checkFrameHorizontal(t)?(t.node=this.createNodeGroup(t.node,t.children,n),t.renderType|=520):t.length!==i.length||n.hasAlign(16)?(t.node=this.createNodeGroup(t.node,t.children,n),this.processLayoutHorizontal(t)):n.addAlign(8),t}processTraverseVertical(t){const{floated:i,cleared:n}=t;return t.some((e,i)=>e.lineBreakTrailing&&i<t.length-1)?t.parent.hasAlign(16)||(t.node=this.createLayoutNodeGroup(t),t.setContainerType(Dt(t),18)):1===i.size&&t.every((e,i)=>0===i||i===t.length-1||n.has(e))?(t.node=this.createLayoutNodeGroup(t),t.same(t=>t.float)?t.setContainerType(e.CONSTRAINT,512):n.size?t.renderType|=520:t.setContainerType(t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,16)):i.size&&n.size?(t.node=this.createLayoutNodeGroup(t),t.renderType|=528):i.size&&t.children[0].floating?(t.node=this.createLayoutNodeGroup(t),t.renderType|=520):t.parent.hasAlign(16)||(t.node=this.createLayoutNodeGroup(t),t.setContainerType(t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,16)),t}processLayoutHorizontal(t){return this.checkConstraintFloat(t,!0)?t.setContainerType(e.CONSTRAINT,512):this.checkConstraintHorizontal(t)?t.setContainerType(e.CONSTRAINT,8):this.checkLinearHorizontal(t)?(t.setContainerType(e.LINEAR,8),t.floated.size&&St(t.children)):t.setContainerType(e.RELATIVE,8),t}sortRenderPosition(t,e){if(t.layoutRelative&&e.some(t=>0!==t.node.zIndex))e.sort((t,e)=>{const i=t.node.zIndex,n=e.node.zIndex;return i===n?0:i>n?1:-1});else if(t.layoutConstraint&&e.some(t=>!t.node.pageFlow||0!==t.node.zIndex)){const t=[],i=[],n=[];for(const o of e){const e=o.node;e.pageFlow?i.push(o):e.zIndex>=0?n.push(o):t.push(o)}return Rt(t),Rt(n),t.concat(i,n)}return e}checkFrameHorizontal(t){const e=t.floated;if(2===e.size)return!0;if((e.has("right")||1===e.size&&"center"===t.node.cssAscend("textAlign",!0))&&t.some(t=>t.pageFlow))return!0;if(e.has("left")&&!t.linearX){const e=t.item(0);return e.pageFlow&&e.floating}return!1}checkConstraintFloat(t,e=!1){if(t.length>1){let i=0,n=0;for(const o of t){const a=t.cleared.has(o)||o.renderExclude;if(-1!==i&&(o.positiveAxis&&(!o.positionRelative||o.positionAuto)&&(o.floating||o.autoMargin.horizontal)||a)?i++:i=-1,-1!==n&&(o.percentWidth||a)?n++:e||(n=-1),i<=0&&n<=0)return!1}return!0}return!1}checkConstraintHorizontal(t){const e=t.floated;let i=!1;switch(t.node.cssInitial("textAlign")){case"center":i=0===e.size;break;case"end":case"right":i=0===e.size||e.has("right")&&1===e.size&&0===t.cleared.size}return!(!i&&!t.some(e=>e.blockVertical||e.percentWidth||("middle"===e.verticalAlign||"bottom"===e.verticalAlign)&&!t.parent.hasHeight))&&(t.singleRowAligned&&t.every(t=>t.positiveAxis||t.renderExclude))}checkLinearHorizontal(t){const e=t.floated;if((0===e.size||1===e.size&&e.has("left"))&&0===t.node.lineHeight&&t.singleRowAligned){const{fontSize:e,lineHeight:i}=t.children[0];for(const n of t)if(!n.naturalChild||0!==n.length||n.inputElement||n.positionRelative||n.blockVertical||n.positionAuto||0!==n.zIndex||0!==i&&(n.lineHeight!==i||n.fontSize!==e)||"WBR"===n.tagName||!n.baseline&&!n.cssAny("verticalAlign","top","middle","bottom"))return!1;return!0}return!1}setConstraints(){for(const t of this.cache)if(t.layoutRelative)this.processRelativeHorizontal(t,t.renderChildren);else if(t.layoutConstraint&&t.hasProcedure(Tt.NODE_PROCEDURE.CONSTRAINT)){const e=t.renderFilter(t=>!t.positioned);if(e.length){const[i,n]=gt.partitionArray(e,t=>t.pageFlow||t.positionAuto);if(n.length)for(const e of n)if(e.leftTopAxis){const i=e.autoMargin;e.hasWidth&&i.horizontal?e.hasPX("left")&&i.right?(e.anchor("left","parent"),e.modifyBox(16,e.left)):e.hasPX("right")&&i.left?(e.anchor("right","parent"),e.modifyBox(4,e.right)):(e.anchorParent(c.HORIZONTAL),e.modifyBox(16,e.left),e.modifyBox(4,e.right)):(e.hasPX("left")&&(e.anchor("left","parent"),e.hasPX("right")||"100%"!==e.css("width")||e.anchor("right","parent"),e.modifyBox(16,xt(t,256,e.left))),!e.hasPX("right")||e.hasPX("width")&&"100%"!==e.css("width")&&e.hasPX("left")||(e.anchor("right","parent"),e.modifyBox(4,xt(t,64,e.right)))),e.hasHeight&&i.vertical?e.hasPX("top")&&i.bottom?(e.anchor("top","parent"),e.modifyBox(2,e.top)):e.hasPX("bottom")&&i.top?(e.anchor("bottom","parent"),e.modifyBox(8,e.bottom)):(e.anchorParent(c.VERTICAL),e.modifyBox(2,e.top),e.modifyBox(8,e.bottom)):(e.hasPX("top")&&(e.anchor("top","parent"),e.hasPX("bottom")||"100%"!==e.css("height")||e.anchor("bottom","parent"),e.modifyBox(2,xt(t,32,e.top))),!e.hasPX("bottom")||e.hasPX("height")&&"100%"!==e.css("height")&&e.hasPX("top")||(e.anchor("bottom","parent"),e.modifyBox(8,xt(t,128,e.bottom)))),e.positioned=!0}if(i.length){if(t.layoutHorizontal)this.processConstraintHorizontal(t,i);else if(t.hasAlign(256))this.processConstraintColumn(t,i);else if(i.length>1)this.processConstraintChain(t,i);else{const t=i[0];t.anchorParent(c.HORIZONTAL),t.anchorParent(c.VERTICAL),t.rightAligned?t.anchorStyle(c.HORIZONTAL,"packed",1):t.centerAligned||t.anchorStyle(c.HORIZONTAL),t.autoMargin.topBottom||t.anchorStyle(c.VERTICAL),Wt.setConstraintDimension(t)}this.evaluateAnchors(i)}for(const i of e)if(!i.anchored)if(i.outerWrapper){const{horizontal:t,vertical:e}=i.constraint;t&&i.anchorParent(c.HORIZONTAL),e&&i.anchorParent(c.VERTICAL)}else this.addGuideline(i,t)}}}renderNodeGroup(t){const{node:i,containerType:n,alignmentType:o}=t,a=k();let r=!1;switch(n){case e.LINEAR:gt.hasBit(o,16)?(a.android.orientation=c.VERTICAL,r=!0):gt.hasBit(o,8)&&(a.android.orientation=c.HORIZONTAL,r=!0);break;case e.GRID:a.android.rowCount=t.rowCount?""+t.rowCount:"",a.android.columnCount=t.columnCount?""+t.columnCount:"2",r=!0;break;case e.FRAME:case e.RELATIVE:case e.CONSTRAINT:r=!0;break;default:if(0===t.length)return this.renderNode(t)}if(r){const e=i.dataset;return i.setControlType(at.getControlName(n,i.localSettings.targetAPI),n),i.addAlign(o),i.render(!e.use&&e.target?this.application.resolveTarget(e.target):t.parent),i.apply(a),{type:1,node:i,controlName:i.controlName}}}renderNode(t){const{containerType:i,node:n}=t;let a=at.getControlName(i,n.localSettings.targetAPI);n.setControlType(a,i),n.addAlign(t.alignmentType);let r=t.parent,s=n.dataset.use?void 0:n.dataset.target;switch(n.tagName){case"IMG":{const i=n.element,a=n.absoluteParent||n.documentParent;let l=n.toFloat("width"),c=n.toFloat("height"),d=n.percentWidth?l:-1;const h=n.percentHeight?c:-1;let u,p="fitXY";if(i.srcset)if((u=ct.getSrcSet(i,this.localSettings.supported.imageFormat)).length){const t=u[0].actualWidth;if(t){if(-1===d){n.css("width",ct.formatPX(l=t),!0);const e=this.application.resourceHandler.getImage(i.src);e&&e.width>0&&e.height>0?n.css("height",ct.formatPX(c=e.height*(l/e.width)),!0):n.android("adjustViewBounds","true")}else l=r.box.width,n.android("adjustViewBounds","true");d=-1}}else u=void 0;if(n.hasResource(Tt.NODE_RESOURCE.IMAGE_SOURCE)){const t=this.application.resourceHandler.addImageSrc(i,"",u);""!==t&&n.android("src","@drawable/"+t)}if(-1!==d||-1!==h)d>=0&&(l*=a.box.width/100,d<100&&!r.layoutConstraint&&(n.css("width",ct.formatPX(l)),n.android("adjustViewBounds","true"))),h>=0&&(c*=a.box.height/100,!(h<100)||r.layoutConstraint&&a.hasHeight||(n.css("height",ct.formatPX(c)),n.android("adjustViewBounds","true")));else{switch(n.css("objectFit")){case"contain":p="centerInside";break;case"cover":p="centerCrop";break;case"scale-down":p="fitCenter";break;case"none":p="center"}(0===l&&c>0||0===c&&l>0)&&n.android("adjustViewBounds","true")}if(n.android("scaleType",p),n.baseline&&(n.android("baselineAlignBottom","true"),n.marginBottom>0&&r.layoutLinear&&r.layoutHorizontal&&n.mergeGravity("layout_gravity","bottom")),!n.pageFlow&&r===n.absoluteParent&&(n.left<0&&"hidden"===r.css("overflowX")||n.top<0&&"hidden"===r.css("overflowY"))){const i=this.application,d=i.createNode();d.setControlType(o.FRAME,e.FRAME),d.inherit(n,"base"),d.positionAuto=!1,d.exclude(Tt.NODE_RESOURCE.ALL,Tt.NODE_PROCEDURE.ALL),d.cssApply({position:n.css("position"),zIndex:""+n.zIndex}),r.appendTry(n,d),n.parent=d,d.setLayoutWidth(l>0?l<a.box.width?ct.formatPX(l):"match_parent":"wrap_content"),d.setLayoutHeight(c>0?c<a.box.height?ct.formatPX(c):"match_parent":"wrap_content"),d.render(s?i.resolveTarget(s):r),d.saveAsInitial(),d.innerWrapped=n,n.outerWrapper=d,r.layoutConstraint||(n.modifyBox(2,n.top),n.modifyBox(16,n.left)),i.addLayoutTemplate(r,d,{type:1,node:d,controlName:o.FRAME}),r=d,t.parent=d,s=void 0}break}case"INPUT":{const t=n.element,e=t.type;switch(e){case"checkbox":t.checked&&n.android("checked","true");break;case"text":n.android("inputType","text");break;case"password":n.android("inputType","textPassword");break;case"range":case"time":case"number":case"date":case"datetime-local":switch(e){case"number":case"range":n.android("inputType","number");break;case"date":n.android("inputType","date");break;case"time":n.android("inputType","time");break;case"datetime-local":n.android("inputType","datetime")}gt.isString(t.min)&&n.android("min",t.min),gt.isString(t.max)&&n.android("max",t.max);break;case"email":case"tel":case"url":case"week":case"month":case"search":switch(e){case"email":n.android("inputType","textEmailAddress");break;case"tel":n.android("inputType","phone");break;case"url":n.android("inputType","textUri");break;default:n.android("inputType","text")}-1!==t.minLength&&n.android("minLength",""+t.minLength),t.maxLength>0&&n.android("maxLength",""+t.maxLength)}break}case"TEXTAREA":{const t=n.element;switch(n.android("minLines",t.rows>0?""+t.rows:"2"),n.css("verticalAlign")){case"middle":n.mergeGravity("gravity",c.CENTER_VERTICAL);break;case"bottom":n.mergeGravity("gravity","bottom");break;default:n.mergeGravity("gravity","top")}t.maxLength>0&&n.android("maxLength",""+t.maxLength),!n.hasPX("width")&&t.cols>0&&n.css("width",ct.formatPX(8*t.cols),!0),n.android("hint",t.placeholder),n.android("scrollbars",c.VERTICAL),n.android("inputType","textMultiLine"),n.overflowX&&n.android("scrollHorizontally","true");break}case"LEGEND":{n.hasWidth||(n.css("minWidth",ct.formatPX(n.actualWidth),!0),n.css("display","inline-block",!0));const t=n.actualHeight*this.localSettings.deviations.legendBottomOffset;n.modifyBox(8,t),n.unsafe("linear").bottom+=t;break}case"METER":case"PROGRESS":{let t,e;if("METER"===n.tagName){({meterForegroundColor:t,meterBackgroundColor:e}=this.localSettings.style);const i=n.element,{value:o,max:a}=i;a&&(o&&n.android("progress",""+Math.round(o/a*100)),100===a&&(n.android("min",""+i.min),n.android("max",""+a)))}else{({progressForegroundColor:t,progressBackgroundColor:e}=this.localSettings.style);const i=n.element,{value:o,max:a}=i;o&&n.android("progress",""+o),a&&n.android("max",""+a)}n.hasWidth||n.css("width",ct.formatPX(n.bounds.width),!0),n.hasHeight||n.css("height",ct.formatPX(n.bounds.height),!0),n.android("progressTint","@color/"+S.addColor(t)),n.android("progressBackgroundTint","@color/"+S.addColor(e)),n.inlineText=!1;break}}switch(a){case o.TEXT:let t="";if(n.overflowX&&(t+=c.HORIZONTAL),n.overflowY&&(t+=(""!==t?"|":"")+c.VERTICAL),""!==t&&n.android("scrollbars",t),n.has("letterSpacing")&&n.android("letterSpacing",ht.truncate(n.toFloat("letterSpacing")/n.fontSize,this.localSettings.precision.standardFloat)),"justify"===n.css("textAlign")&&n.android("justificationMode","inter_word"),n.has("textShadow")){void 0===At.TEXT_SHADOW&&(At.TEXT_SHADOW=/^(rgba?\([^)]+\)|[a-z]+) (-?[\d.]+[a-z]+) (-?[\d.]+[a-z]+)\s*(-?[\d.]+[a-z]+)?.*$/);const t=At.TEXT_SHADOW.exec(n.css("textShadow"));if(t){const e=S.addColor(lt.parseColor(t[1]));""!==e&&(n.android("shadowColor","@color/"+e),n.android("shadowDx",ht.truncate(2*ct.parseUnit(t[2],n.fontSize))),n.android("shadowDy",ht.truncate(2*ct.parseUnit(t[3],n.fontSize))),n.android("shadowRadius",t[4]?ht.truncate(Math.max(ct.parseUnit(t[4],n.fontSize),1)):"1"))}}"nowrap"===n.css("whiteSpace")&&(n.android("maxLines","1"),n.android("ellipsize","end"));break;case o.BUTTON:n.hasHeight||n.android("minHeight",ct.formatPX(Math.ceil(n.actualHeight))),n.mergeGravity("gravity",c.CENTER_VERTICAL);break;case o.EDIT:{const t=n.element;t.list&&t.list.children.length&&(n.controlName=a=o.EDIT_LIST)}case o.RANGE:n.hasPX("width")||n.css("width",ct.formatPX(n.bounds.width),!0);break;case o.LINE:n.hasHeight||n.setLayoutHeight(ct.formatPX(n.contentBoxHeight||1))}if(n.inlineVertical&&(!r.layoutHorizontal||r.layoutLinear))switch(n.verticalAlign){case"sub":n.modifyBox(8,-1*Math.ceil(n.fontSize*this.localSettings.deviations.subscriptBottomOffset));break;case"super":n.modifyBox(2,-1*Math.ceil(n.fontSize*this.localSettings.deviations.superscriptTopOffset))}return n.render(s?this.application.resolveTarget(s):r),{type:1,node:n,parent:r,controlName:a}}renderNodeStatic(t,e,i,n,o){const a=new at(0,"0",void 0,this.afterInsertNode);return a.setControlType(t),""!==i&&a.setLayoutWidth(i||"wrap_content"),""!==n&&a.setLayoutHeight(n||"wrap_content"),e&&(a.apply(e),e.documentId=a.documentId),this.getEnclosingXmlTag(t,this.userSettings.showAttributes?a.extractAttributes(1):void 0,o)}renderSpace(t,e,i,n,a){return void 0===a&&(a=k()),ct.isPercent(t)&&(a.android.layout_columnWeight=ht.truncate(parseFloat(t)/100,this.localSettings.precision.standardFloat),t="0px"),e&&ct.isPercent(e)&&(a.android.layout_rowWeight=ht.truncate(parseFloat(e)/100,this.localSettings.precision.standardFloat),e="0px"),i&&(a.android.layout_columnSpan=""+i),n&&(a.android.layout_rowSpan=""+n),this.renderNodeStatic(o.SPACE,a,t,e||void 0)}addGuideline(t,e,i,n=!1,r=!1){const s=t.absoluteParent,l=e.nodeGroup&&!t.documentParent.hasAlign(4)?e:t.documentParent;bt.forEach(d=>{if(!(t.constraint[d]||i&&d!==i)){const i=d===c.HORIZONTAL,h=l.box;let u,p,g,m;if(i?r?(u="right",p="left",g=ft.STRING_BASE.RIGHT_LEFT,m=ft.STRING_BASE.LEFT_RIGHT):(u="left",p="right",g=ft.STRING_BASE.LEFT_RIGHT,m=ft.STRING_BASE.RIGHT_LEFT):r?(u="bottom",p="top",g=ft.STRING_BASE.BOTTOM_TOP,m=ft.STRING_BASE.TOP_BOTTOM):(u="top",p="bottom",g=ft.STRING_BASE.TOP_BOTTOM,m=ft.STRING_BASE.BOTTOM_TOP),gt.withinRange(t.linear[u],h[u]))return void t.anchor(u,"parent",!0);const f=t.positionStatic?t.bounds:t.linear;let T,y="layout_constraintGuide_";if(!n&&!e.hasAlign(4)){if(e.renderChildren.some(e=>{if(e!==t&&e.constraint[d]){let n=!1;if(t.pageFlow&&e.pageFlow&&(gt.withinRange(t.linear[u],e.linear[p])?(t.anchor(g,e.documentId,!0),n=!0):gt.withinRange(t.linear[p],e.linear[u])&&(t.anchor(m,e.documentId,!0),n=!0)),n||(gt.withinRange(t.bounds[u],e.bounds[u])?(!i&&t.textElement&&t.baseline&&e.textElement&&e.baseline?t.anchor("baseline",e.documentId,!0):(t.anchor(u,e.documentId,!0),i?t.modifyBox(16,-e.marginLeft,!1):t.modifyBox(2,-e.marginTop,!1)),n=!0):gt.withinRange(t.bounds[p],e.bounds[p])?(t.anchor(p,e.documentId,!0),t.modifyBox(i?4:8),n=!0):!t.pageFlow&&e.pageFlow&&gt.withinRange(t.bounds[u]+t[u],e.bounds[u])&&(t.anchor(u,e.documentId,!0),t.modifyBox(i?16:2,t[u]),n=!0)),n)return e.constraint[d]=!0,!0}return!1}))return}if(t.positionAuto){const e=t.siblingsLeading;if(e.length&&!t.alignedVertically()){const n=e[0];if(n.renderParent===t.renderParent)return t.anchor(i?ft.STRING_BASE.RIGHT_LEFT:"top",n.documentId,!0),void(t.constraint[d]=n.constraint[d])}}if(n){const t=Math.abs(f[u]-h[u])/h[i?"width":"height"];T=parseFloat(ht.truncate(r?1-t:t,this.localSettings.precision.standardFloat)),y+="percent"}else T=f[u]-h[r?p:u],i||l.nodeGroup||l===s||1!==s.getBox(2)[0]||(T-=s.marginTop),y+="begin";const b=e.constraint.guideline||{};if(t.pageFlow){if(t.inlineVertical){const e=gt.convertFloat(t.verticalAlign);e<0&&(T+=e)}}else if(t.parent===l.outerWrapper)T+=l[r?i?"paddingRight":"paddingBottom":i?"paddingLeft":"paddingTop"];else if(s===t.documentParent){let t;T=xt(l,t=i?r?64:256:r?128:32,T)}if(!i&&t.marginTop<0&&(T-=t.marginTop,t.modifyBox(2)),t.constraint[d]=!0,T<=0){if(t.anchor(u,"parent",!0),T<0){const e=t.innerWrapped;if(e&&!e.pageFlow){let t=0;switch(u){case"top":t=2;break;case"left":t=16;break;case"bottom":t=8;break;case"right":t=4}e.modifyBox(t,T)}}}else if(i&&T+f.width>=h.right&&l.hasPX("width")&&!t.hasPX("right")||!i&&T+f.height>=h.bottom&&l.hasPX("height")&&!t.hasPX("bottom"))t.anchor(p,"parent",!0);else{const s=gt.optionalAsObject(b,`${d}.${y}.${u}`);if(s)for(const e in s)if(parseInt(s[e])===T)return t.anchor(u,e,!0),void t.anchorDelete(p);let l;l=n?""+T:"@dimen/"+S.insertStoredAsset("dimens","constraint_guideline_"+(r?p:u),ct.formatPX(T));const h=k(void 0,{orientation:i?c.VERTICAL:c.HORIZONTAL},{[y]:l});this.addAfterOutsideTemplate(t.id,this.renderNodeStatic(t.localSettings.targetAPI<29?o.GUIDELINE:a.GUIDELINE,h),!1);const g=h.documentId;g&&(t.anchor(u,g,!0),t.anchorDelete(p),T>0&&(gt.assignEmptyValue(b,d,y,u,g,""+T),e.constraint.guideline=b))}}})}addBarrier(t,e){const i=[];for(const n of t){const t=n.constraint.barrier;if(void 0===t)n.constraint.barrier={};else if(t[e])continue;i.push(n)}if(i.length){const t=k(void 0,void 0,{barrierDirection:e,constraint_referenced_ids:gt.objectMap(i,t=>O(t.documentId)).join(",")}),n=i[i.length-1];this.addAfterOutsideTemplate(n.id,this.renderNodeStatic(n.localSettings.targetAPI<29?o.BARRIER:a.BARRIER,t),!1);for(const n of i)n.constraint.barrier[e]=t.documentId;return t.documentId}return""}evaluateAnchors(t){const e=[],i=[];for(const n of t)if(n.constraint.horizontal&&e.push(n),n.constraint.vertical&&i.push(n),n.alignParent("top")){let e=n;for(;;){const i=e.alignSibling(ft.STRING_BASE.BOTTOM_TOP);if(""===i){if(e!==n){const t=e.constraint.barrier;let i;(i=void 0!==t&&t.bottom?t.bottom:this.addBarrier([e],"bottom"))&&e.anchor(ft.STRING_BASE.BOTTOM_TOP,i)}break}{const o=t.find(t=>t.documentId===i);if(!o||o.alignSibling(ft.STRING_BASE.TOP_BOTTOM)!==e.documentId)break;if(o.alignParent("bottom")){n.anchorStyle(c.VERTICAL,"packed",0,!1);break}e=o}}}let n=-1;for(;++n<t.length;){const o=t[n],a=o.constraint,r=a.current;if(!a.horizontal)for(const t in r){const i=r[t];if(i.horizontal&&e.some(t=>t.documentId===i.documentId)){a.horizontal=!0,e.push(o),n=-1;break}}if(!a.vertical)for(const t in r){const e=r[t];if(!e.horizontal&&i.some(t=>t.documentId===e.documentId)){a.vertical=!0,i.push(o),n=-1;break}}}}createNodeGroup(t,e,i,n=!1){const o=new rt(this.cache.nextId,t,e,this.afterInsertNode);return i?(i.appendTry(t,o),o.init()):o.containerIndex=t.containerIndex,this.cache.append(o,n),o}createNodeWrapper(t,e,i,n,o){const a=this.application.createNode(void 0,!0,e,i);a.addAlign(16384),t.documentRoot&&(a.documentRoot=!0,t.documentRoot=!1),a.inherit(t,"base","alignment"),n&&a.setControlType(n,o),a.exclude(Tt.NODE_RESOURCE.BOX_STYLE|Tt.NODE_RESOURCE.ASSET,Tt.NODE_PROCEDURE.CUSTOMIZATION,Tt.APP_SECTION.ALL),e.appendTry(t,a),t.parent=a;const r=t.outerWrapper;if(r&&(a.outerWrapper=r,r.innerWrapped=a),t.renderParent){const e=t.renderParent.renderTemplates;if(e){const i=e.length;for(let n=0;n<i;n++){const i=e[n];if(i&&i.node===t){t.renderChildren.splice(n,1),e.splice(n,1);break}}}t.rendered=!1,t.renderParent=void 0}if(a.saveAsInitial(),a.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),t.documentParent.layoutElement){const e=t.namespace("android");for(const t in e)t.startsWith("layout_")&&(a.android(t,e[t]),delete e[t]);t.transferBox(30,a)}return a.innerWrapped=t,t.outerWrapper=a,a}processRelativeHorizontal(t,e){const i=[],n="nowrap"!==t.css("whiteSpace");let o,a=!1,r=!1;if(t.hasAlign(16)){let t;for(const n of e)t?n.anchor(ft.STRING_BASE.TOP_BOTTOM,t.documentId):n.anchor("top","true"),n.pageFlow?(i.push([n]),t=n):r=!0}else{const a=(()=>{const i=t.renderParent;if(i){if(i.overflowY)return i.box.width;{const n=t.actualParent;if(n){if(n===i&&n.blockStatic&&t.naturalElement&&t.inlineStatic){const e=n.box;return e.width-(t.linear.left-e.left)}if(n.floatContainer){const{containerType:i,alignmentType:o}=this.containerTypeVerticalMargin;if(t.ascend(t=>t.of(i,o),n,"renderParent").length){const i=t.box;let o=0,a=0;for(const r of n.naturalElements){const n=r.linear;r.floating&&!e.includes(r)&&t.intersectY(n)&&("left"===r.float?Math.floor(n.right)>i.left&&(o=Math.max(o,n.right-i.left)):"right"===r.float&&i.right>Math.ceil(n.left)&&(a=Math.max(a,i.right-n.left)))}return i.width-o-a}}}}}return t.box.width})(),s=yt.linearData(e,!0).cleared,l="center"===t.cssInitial("textAlign");let c=0;if(t.naturalElement)t.blockDimension&&(c=t.parseUnit(t.css("textIndent")));else{const e=t.parent;if(e&&e.blockDimension&&e.children[0]===t){const i=e.css("textIndent");0!==(c=t.parseUnit(i))&&(c<0&&e.setCacheValue("paddingLeft",Math.max(0,e.paddingLeft+c)),t.setCacheValue("blockDimension",!0),t.css("textIndent",i),e.css("textIndent","0px"))}}let d,h=0,u=!1;gt.partitionArray(e,t=>"right"!==t.float).forEach((e,p)=>{const g=e.length;if(0===g)return;const m=0===p;let f,T,y,b=!0;if(m){const t=e[0].actualParent;t&&t.cssInitialAny("textAlign","right","end")?(b=!1,e[g-1].anchor(f="right","true")):f="left",St(e),T=i}else f="right",T=o=[];for(let i=0;i<g;i++){const o=e[i];let p;if(m&&b?(p=ft.STRING_BASE.LEFT_RIGHT,0===i&&o.inline&&Math.abs(c)>o.actualWidth&&"right"!==o.float&&!o.positionRelative&&(u=!0,o.floating||(o.setCacheValue("float","left"),o.setCacheValue("floating",!0)))):p=ft.STRING_BASE.RIGHT_LEFT,!o.pageFlow){if(y){const t=y.documentId;o.anchor(p,t),o.anchor("top",t)}else o.anchor(f,"true"),o.anchor("top","true");r=!0;continue}let E,R=o.bounds;if(o.styleText&&!o.hasPX("width")){const t=o.textBounds;t&&(t.numberOfLines>1||Math.ceil(t.width)<o.box.width)&&(R=t)}let I=o.multiline;I&&Math.floor(R.width)<=a&&!o.hasPX("width")&&!Mt(o)&&(I=!1,o.multiline=!1);let _=o.autoMargin.horizontal;if(_){const t=o.autoMargin;o.anchor(t.leftRight?"centerHorizontal":t.left?"right":"left","true")}if(y){const e=T[T.length-1];let r=0,m=0;function A(){if(y.floating&&y.alignParent("left")&&(I||Math.floor(h+o.actualWidth)<a))return!0;if(t.floating&&i===g-1&&o.textElement&&!/\s|-/.test(o.textContent.trim())){if(t.hasPX("width")){const e=t.css("width");t.parseUnit(e)>t.parseUnit(t.css("minWidth"))&&t.cssApply({width:"auto",minWidth:e},!0)}return t.android("maxLines","1"),!0}return!1}const x=()=>(m=h+o.marginLeft,d&&!e.includes(d)&&(m+=d.linear.width),void 0!==d&&o.plainText&&!I&&e.includes(d)&&!s.has(o)||(m+=R.width),o.marginRight<0&&(m+=o.marginRight),r=a,c<0?T.length<=1&&(r+=c):c>0&&1===T.length&&(r-=c),o.styleElement&&o.inlineStatic&&(m-=o.contentBoxWidth),!0);wt(o,y)&&(p="");const w=o.nodeGroup&&!o.hasAlign(128);let v=!1;E=o.inlineVertical&&y.inlineVertical&&o.previousSibling!==y?dt.getElementsBetweenSiblings(y.element,o.element):void 0;const N=()=>{if(y.textElement){if(1===i&&o.plainText&&o.previousSibling===y&&!ut.CHAR.TRAILINGSPACE.test(y.textContent)&&!ut.CHAR.LEADINGSPACE.test(o.textContent))return v=!0,!1;if(n&&y.multiline&&(y.bounds.width>=a||o.plainText&&S.hasLineBreak(y,!1,!0)))return!0}if(A())return!1;if(n){if(x()&&m>r)return!0;{const t=o.actualParent;if(t&&"CODE"!==t.tagName)return I&&o.plainText||Mt(o)}}return!1},C=o.textElement&&N();C||w||gt.aboveRange(o.linear.top,y.linear.bottom)&&(o.blockStatic||o.floating&&y.float===o.float)||!o.textElement&&!A()&&x()&&Math.floor(m)>r||!o.floating&&(y.blockStatic||o.previousSiblings().some(t=>t.lineBreak||t.excluded&&t.blockStatic)||E&&E.some(e=>kt(e,t.sessionId)))||y.autoMargin.horizontal||s.has(o)?(b?(d&&(o.linear.bottom<=d.bounds.bottom||u)?_||o.anchor(p,d.documentId):(_||o.anchor(f,"true"),d=void 0),_=!0):(d&&o.linear.bottom>d.bounds.bottom&&(d=void 0),y.anchor(f,"true")),1===e.length&&(y.centerAligned||l&&!y.blockStatic)&&(y.anchorDelete(f),y.anchor("centerHorizontal","true")),h=Math.min(0,C&&!y.multiline&&I&&!s.has(o)?o.linear.right-t.box.right:0),T.push([o])):(""!==p&&(b?_||(o.anchor(p,y.documentId),_=!0):y.anchor(p,o.documentId)),!I||o.hasPX("width")||y.floating||v||(o.multiline=!1),e.push(o))}else b&&(_||o.anchor(f,"true")),T.push([o]);if("left"===o.float&&m&&(d?gt.aboveRange(o.linear.bottom,d.linear.bottom)&&(d=o):d=o),E&&!E.some(t=>!!pt.getElementAsNode(t,o.sessionId)||kt(t,o.sessionId))){const t=dt.getRangeClientRect(E[0]);if(!t.numberOfLines){const e=E.length>1?dt.getRangeClientRect(E[E.length-1]):void 0;void 0!==e&&e.numberOfLines||(h+=e?t.left-e.right:t.width)}}h+=o.marginLeft+R.width+o.marginRight,y=o}}),1===i.length&&c<0&&t.setCacheValue("paddingLeft",Math.max(0,t.paddingLeft+c))}(i.length>1||o&&o.length>1)&&(a=!0);const s=e=>{let i=null;const n=e.length;for(let o=0;o<n;o++){const n=e[o];let r;if(n.length>1){const e=Pt(n);let i=e[0];(r=yt.baseline(e.length?n.filter(t=>!e.includes(t)):n))&&i&&(r!==i&&i.bounds.height>r.bounds.height?r.anchor("bottom",i.documentId):(r=yt.baseline(n),i=void 0));const s=[];let l=0===o?"true":r?r.documentId:"",c=0,d=null;for(const e of n)if(e!==r&&e!==i)if(e.baseline)s.push(e);else if(e.inlineVertical)switch(e.verticalAlign){case"text-top":if(null===d&&(d=yt.baseline(n,!0)),d&&e!==d){e.anchor("top",d.documentId);break}break;case"super":e.baselineAltered||e.modifyBox(2,-1*Math.ceil(e.fontSize*this.localSettings.deviations.superscriptTopOffset));case"top":""!==l&&l!==e.documentId?e.anchor("top",l):r&&e.anchor("top",r.documentId);break;case"middle":const i=Math.max(e.actualHeight,e.lineHeight);if(a){if(r){const t=Math.max(r.actualHeight,r.lineHeight);i<t?(e.anchor("top",r.documentId),e.modifyBox(2),e.modifyBox(2,Math.round((t-i)/2))):i>c&&(c=i)}}else e.anchor("centerVertical","true"),e.imageElement&&(c=Math.max(i,c));break;case"text-bottom":null===d&&(d=yt.baseline(n,!0)),d&&d!==e?e.anchor("bottom",d.documentId):r&&e.anchor("bottom",r.documentId);break;case"sub":e.baselineAltered||e.modifyBox(8,-1*Math.ceil(e.fontSize*this.localSettings.deviations.subscriptBottomOffset));case"bottom":""===l||gt.withinRange(t.bounds.height,e.bounds.height)||(t.hasHeight||"true"!==l||(a?r&&(l=r.documentId):t.css("height",ct.formatPX(t.bounds.height),!0)),e.anchor("bottom",l));break;default:e.baselineAltered||s.push(e)}else _t(e)&&s.push(e);if(r)r.baselineActive=!0,s.length?It(r,s):r.textElement&&c>r.actualHeight&&(r.anchor("centerVertical","true"),r=null);else if(s.length&&s.length<n.length&&(i=Pt(n)[0]))for(const t of s)t.baseline&&!t.multiline&&i.bounds.height>t.bounds.height&&t.anchor("bottom",i.documentId);for(let t=n.length-1,e=!0;t>0;t--){const i=n[t];i.textElement&&(i.setSingleLine(e&&!i.rightAligned&&!i.centerAligned),e=!1)}}else(r=n[0]).baselineActive=!0;if(o>0){if(null===i){const t=e[o-1];i=t.find(t=>!t.floating)||t[0];let n=!1;for(const e of t)e===i?n=!0:n&&e.linear.bottom>=i.linear.bottom&&(!e.floating||i.floating)&&(i=e)}for(const t of n)""===t.alignSibling("baseline")&&t.anchor(ft.STRING_BASE.TOP_BOTTOM,i.documentId)}i=r}};if(s(i),o&&s(o),a&&(t.horizontalRows=o?i.concat(o):i),r){const e=t.renderChildren,i=t.renderTemplates,n=[];for(let t=0;t<e.length;t++)e[t].pageFlow||(n.push(i[t]),e.splice(t,1),i.splice(t--,1));for(const t of n)e.push(t.node),i.push(t)}}processConstraintHorizontal(t,e){const i=yt.baseline(e),n=yt.baseline(e,!0),o=t.hasAlign(2048),a=Pt(e)[0],r=i?i.documentId:"",[s,l,d,h]=Ot(o);let u,p,g,m=0;switch(t.cssAscend("textAlign",!0)){case"center":m=.5;break;case"right":case"end":o||(m=1)}St(e),!t.hasPX("width")&&e.some(t=>t.percentWidth)&&t.setLayoutWidth("match_parent");const f=e.length;for(let o=0;o<f;o++){const T=e[o];if(g?T.pageFlow?(g.anchor(h,T.documentId),T.anchor(d,g.documentId),o===f-1&&T.anchor(l,"parent")):T.positionAuto&&T.anchor(d,g.documentId):(T.anchor(s,"parent"),T.anchorStyle(c.HORIZONTAL,"packed",m)),T.pageFlow){if(T!==i){if(T.inlineVertical){let o=!1;switch((void 0===u||Gt(T)>Gt(u))&&(u=T),T.verticalAlign){case"text-top":n&&T!==n?T.anchor("top",n.documentId):o=!0;break;case"middle":i&&!i.textElement||a?o=!0:T.anchorParent(c.VERTICAL);break;case"text-bottom":if(n&&T!==n){T!==a?T.anchor("bottom",n.documentId):a&&(o=!0);break}case"bottom":if(void 0===p)for(const t of e)!t.baseline&&(void 0===p||t.linear.bottom>p.linear.bottom)&&(p=t);T===p?o=!0:T.anchor("bottom","parent");break;case"baseline":null===i||T.blockVertical||!T.textElement&&Gt(T)>Gt(i)?o=!0:T.anchor("baseline",r);break;default:o=!0}o&&(T.anchorParent(c.VERTICAL,"packed"),T.modifyBox(2,T.linear.top-t.box.top),T.baselineAltered=!0)}else T.plainText&&i?T.anchor("baseline",r):T.anchorParent(c.VERTICAL,"packed");T.anchored=!0}else i.baselineActive=!0;Wt.setConstraintDimension(T),g=T}else T.positionAuto&&(T.anchorParent(c.VERTICAL,"packed"),T.anchored=!0)}if(i){if(u&&u!==i&&i.textElement&&Gt(u)>Gt(i))switch(u.verticalAlign){case"middle":i.anchorParent(c.VERTICAL,void 0,void 0,!0);break;case"baseline":i.anchor("baseline",u.documentId);break;case"bottom":case"text-bottom":i.anchor("bottom",u.documentId);break;case"sub":u.textElement||(i.anchor("bottom",u.documentId),i.modifyBox(8,-1*Math.ceil(i.fontSize*this.localSettings.deviations.subscriptBottomOffset)));break;case"super":u.textElement||(i.anchor("bottom",u.documentId),i.modifyBox(2,-1*Math.ceil(i.fontSize*this.localSettings.deviations.superscriptTopOffset)))}else i.anchorParent(c.VERTICAL,"packed"),i.modifyBox(2,Math.floor(i.linear.top-t.box.top));i.anchored=!0}}processConstraintColumn(t,e){let i=[];const n=[i];for(const t of e)"all"===t.css("columnSpan")?(i.length?n.push([t]):i.push(t),n.push(i=[])):i.push(t);0===i.length&&n.pop();const o=t.parseUnit(t.css("columnGap"))||t.fontSize,a=t.parseUnit(t.css("columnWidth"),"width"),r=t.toInt("columnCount");let s,l=0;if(a>0){let e;for(e=st.isUserAgent(4)?Math.min(t.width>0?t.width-t.contentBoxWidth:1/0,t.box.width*(r||1),t.documentParent.box.width-t.contentBoxWidth):t.box.width;e-a>=0;)l++,e-=a+o}else l=1/0;const d=n.length;for(let e=0;e<d;e++){const i=n[e],h=i[0];if(1===i.length)0===e?(h.anchor("top","parent"),h.anchorStyle(c.VERTICAL)):s&&(s.anchor(ft.STRING_BASE.BOTTOM_TOP,h.documentId),h.anchor(ft.STRING_BASE.TOP_BOTTOM,"string"==typeof s?s:s.documentId)),h.rightAligned?h.anchorParent(c.HORIZONTAL,"packed",1):h.centerAligned?h.anchorParent(c.HORIZONTAL):h.anchorParent(c.HORIZONTAL,"packed"),e===d-1?h.anchor("bottom","parent"):s=i[0];else{const n=[],c=i.length;let h=Math.min(c,l,r||1/0),u=0;if(h>1){let e=c>=h?Math.ceil(c/h):1;const a=Math.floor(i.reduce((t,e)=>t+e.bounds.height,0)/h);let r=e>1&&c%h!=0?c-h:1/0,s=0;for(let t=0,o=0,l=0;t<c;t++,l++){const c=i[t],d=l%e==0;o<h-1&&(d||r<=0||t>0&&(i[t-1].bounds.height>=a||n[o].length&&i.length-t+1==h-o&&i[t-1].bounds.height>i[t+1].bounds.height))&&(t>0&&(o++,d?r--:r++),void 0===n[o]&&(n[o]=[]),l=0),n[o].push(c),c.length&&(s+=ht.maxArray(gt.objectMap(c.children,t=>t.marginLeft+t.marginRight))),t>0&&/H\d/.test(c.tagName)?1===n[o].length&&t===i.length-2?(h--,r=0):(l+1)%e==0&&i.length-t>h&&!i[t+1].multiline&&i[t+1].bounds.height<a&&(n[o].push(i[++t]),l=-1):i.length-t==h-o&&r!==1/0&&(e=1)}u=h>1?Math.max((s+o*(h-1))/t.box.width/h,.01):0}else n.push(i);const p=[],g=n.length;for(let t=0;t<g;t++){const e=n[t];for(const t of e)t.setLayoutWidth("0px"),t.app("layout_constraintWidth_percent",ht.truncate(1/h-u,this.localSettings.precision.standardFloat));p.push(e[0])}const m=Array(g).fill(0),f=[];for(let e=0;e<g;e++){const i=n[e];if(e<g-1&&i.length>1){const t=i[i.length-1];/H\d/.test(t.tagName)&&(i.pop(),p[e+1]=t,n[e+1].unshift(t))}const o=[];for(let t=0;t<i.length;t++){const n=i[t];n.naturalChild?o.push(n.element.cloneNode(!0)):m[e]+=n.linear.height}if(o.length){const i=dt.createElement(document.body,"div",{width:ct.formatPX(a||t.box.width/h),visibility:"hidden"});for(const t of o)i.appendChild(t);m[e]+=i.getBoundingClientRect().height,document.body.removeChild(i)}}const T=p.length;for(let t=1;t<T;t++)p[t].modifyBox(16,o);if(Xt(p),Bt(n,e===d-1,s),s=void 0,n.every(t=>1===t.length)){for(const t of n)f.push(t[t.length-1]);s=this.addBarrier(f,"bottom")}if(!s){let t=0;const e=m.length;for(let i=0;i<e;i++)m[i]>=t&&(s=n[i].pop(),t=m[i])}}}}processConstraintChain(t,e){const i=e[0].actualParent||t,n=yt.partitionRows(e),o=t.hasAlign(512),a=n.length;a>1&&(t.horizontalRows=n),!t.hasWidth&&e.some(t=>t.percentWidth)&&t.setLayoutWidth("match_parent");let r=[],s=!1;for(let t=0;t<a;t++){const e=n[t],l=n[t-1],[d,h]=gt.partitionArray(e,t=>"right"===t.float||!0===t.autoMargin.left);let u,p;if([h,d].forEach(e=>{const n=e.length;if(0===n)return;const h=e===d,[g,m,f,T]=Ot(h),y=e[0],b=e[n-1];y.anchor(g,"parent"),o||"center"!==i.css("textAlign")?n>1&&(h?b.anchorStyle(c.HORIZONTAL,"packed",1):y.anchorStyle(c.HORIZONTAL)):y.anchorStyle(c.HORIZONTAL,"spread"),(n>1||b.autoMargin.leftRight)&&b.anchor(m,"parent");for(let d=0;d<n;d++){const n=e[d],A=e[d-1],E=e[d+1];if(0===t?1===a?(n.anchorParent(c.VERTICAL),n.autoMargin.topBottom||n.anchorStyle(c.VERTICAL,"packed",n.autoMargin.top?1:0)):n.anchor("top","parent"):s||t!==a-1||n.anchor("bottom","parent"),n.autoMargin.leftRight)n.anchorParent(c.HORIZONTAL);else{if(A)if(!A.pageFlow&&A.positionAuto){let t;for(let i=d-2;i>=0&&!(t=e[i]).pageFlow;i--)t=void 0;t?n.anchor(f,t.documentId):n.anchor(g,"parent")}else n.anchor(f,A.documentId);E&&n.anchor(T,E.documentId)}if(Wt.setConstraintDimension(n),o&&t>0&&0===d){let t=!1;for(const e of r)if(Math.ceil(n.linear.top)<Math.floor(e.linear.bottom)){t=!0;break}if(t){u=l[l.length-1];for(let t=r.length-2;t>=0;t--){const e=r[t];if(e.linear.bottom>u.linear.bottom){if(h&&Math.ceil(e.linear[m])-Math.floor(i.box[m])<n.linear.width)continue;const o=r[t+1];n.anchor(g,o.documentId,!0),h?n.modifyBox(4,-o.marginRight,!1):n.modifyBox(16,-o.marginLeft,!1),y.anchorDelete(T),b.anchorDelete(m),y.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),void 0===p&&(p=n,s=!0);break}}}}}}),o&&(r=r.concat(h,d)),t>0){if(void 0===u){u=l[0];const t=l.length;for(let e=1;e<t;e++)l[e].linear.bottom>=u.linear.bottom&&(u=l[e])}if(void 0===p){p=e[0];const t=e.length;for(let i=1;i<t;i++)e[i].linear.bottom>=p.linear.bottom&&(p=e[i]);s=!1}p.anchor(ft.STRING_BASE.TOP_BOTTOM,u.documentId),u.anchor(ft.STRING_BASE.BOTTOM_TOP,p.documentId);for(const t of e)t!==p&&(t.anchor("top",p.documentId),t.autoMargin.topBottom||t.anchorStyle(c.VERTICAL,"packed",t.autoMargin.top?1:0),t.modifyBox(2,-1*p.marginTop))}}}createLayoutNodeGroup(t){return this.createNodeGroup(t.node,t.children,t.parent)}get containerTypeHorizontal(){return{containerType:e.LINEAR,alignmentType:8,renderType:0}}get containerTypeVertical(){return{containerType:e.LINEAR,alignmentType:16,renderType:0}}get containerTypeVerticalMargin(){return{containerType:e.FRAME,alignmentType:256,renderType:0}}get containerTypePercent(){return{containerType:e.CONSTRAINT,alignmentType:8,renderType:0}}get afterInsertNode(){return t=>{this.userSettings.exclusionsDisabled||t.setExclusions(),t.localSettings=Et}}get userSettings(){return this.application.userSettings}}class Ht extends squared.base.ExtensionManager{}var Vt={resources:{">":{color:{"@":["name"],"~":!0}}}},Ft={resources:{">":{dimen:{"@":["name"],"~":!0}}}},zt={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},Ut={resources:{">":{string:{"@":["name"],"~":!0}}}},qt={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":!0}}}}}},jt={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":!0}}}}}};const{util:Yt,xml:Zt}=squared.lib,Kt=S.STORED,$t=/^(.+)\/(.+?\.\w+)$/,Jt=/"(-?[\d.]+)px"/g,Qt=/>(-?[\d.]+)px</g;function te(t){const e=[],i=t.length;for(let n=0;n<i;n+=3)e.push({pathname:t[n+1],filename:t[n+2],content:t[n]});return e}function ee(t){const e=[],i=t.length;for(let n=0;n<i;n+=3)e.push({pathname:t[n+1],filename:t[n+2],content:"",uri:t[n]});return e}const ie=(t,e,i)=>({pathname:t,filename:e,content:i}),ne=(t,e,i)=>"dp"===i?t.replace(Jt,(t,...i)=>'"'+P(i[0],e,!1)+'"'):t,oe=(t,e,i)=>"dp"===i?t.replace(Qt,(t,...i)=>">"+P(i[0],e,!1)+"<"):t,ae=(t,e)=>(""+t).toLowerCase()>=(""+e).toLowerCase()?1:-1;class re extends squared.base.FileUI{copyToDisk(t,e,i){this.copying(t,this.getAssetsAll(e),i)}appendToArchive(t,e){this.archiving(this.userSettings.outputArchiveName,this.getAssetsAll(e),t)}saveToArchive(t,e){this.archiving(t,this.getAssetsAll(e))}resourceAllToXml({copyTo:t,archiveTo:e,callback:i}={}){const n={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),drawableImage:this.resourceDrawableImageToXml(),anim:this.resourceAnimToXml()};for(const t in n)0===n[t].length&&delete n[t];if(t||e){let o=[];for(const t in n)o=o.concat("image"===t?ee(n[t]):te(n[t]));t&&this.copying(t,o,i),e&&this.archiving(e,o)}return n}resourceStringToXml(t={}){const e=[],i=[{string:[]}];Kt.strings.has("app_name")||i[0].string.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[t,e]of Array.from(Kt.strings.entries()).sort(ae))i[0].string.push({name:t,innerText:e});return e.push(Zt.replaceTab(Zt.applyTemplate("resources",Ut,i),this.userSettings.insertSpaces,!0),this.directory.string,"strings.xml"),this.checkFileAssets(e,t),e}resourceStringArrayToXml(t={}){const e=[];if(Kt.arrays.size){const i=[{"string-array":[]}];for(const[t,e]of Array.from(Kt.arrays.entries()).sort())i[0]["string-array"].push({name:t,item:Yt.objectMap(e,t=>({innerText:t}))});e.push(Zt.replaceTab(Zt.applyTemplate("resources",qt,i),this.userSettings.insertSpaces,!0),this.directory.string,"string_arrays.xml"),this.checkFileAssets(e,t)}return e}resourceFontToXml(t={}){const e=[];if(Kt.fonts.size){const i=this.userSettings,n=l[i.targetAPI<26?"app":"android"],o=this.directory.font;for(const[t,a]of Array.from(Kt.fonts.entries()).sort()){const r=[{"xmlns:android":n,font:[]}];for(const e in a){const[i,n,s]=e.split("|");let l=t;"normal"===n?l+="400"===s?"_normal":"_"+a[e]:(l+="_"+n,"400"!==s&&(l+="_"+a[e])),r[0].font.push({font:"@font/"+l,fontStyle:n,fontWeight:s});const c=this.resource.getFont(i,n,s);c&&c.srcUrl&&this.addAsset({pathname:o,filename:l+"."+Yt.fromLastIndexOf(c.srcUrl,".").toLowerCase(),uri:c.srcUrl})}let s=Zt.replaceTab(Zt.applyTemplate("font-family",zt,r),i.insertSpaces);i.targetAPI<26&&(s=s.replace(/\s+android:/g," app:")),e.push(s,o,t+".xml")}this.checkFileAssets(e,t)}return e}resourceColorToXml(t={}){const e=[];if(Kt.colors.size){const i=[{color:[]}];for(const[t,e]of Array.from(Kt.colors.entries()).sort())i[0].color.push({name:e,innerText:t});e.push(Zt.replaceTab(Zt.applyTemplate("resources",Vt,i),this.userSettings.insertSpaces),this.directory.string,"colors.xml"),this.checkFileAssets(e,t)}return e}resourceStyleToXml(t={}){const e=this.userSettings,i=[];if(Kt.styles.size){const t=[{style:[]}];for(const e of Array.from(Kt.styles.values()).sort((t,e)=>(""+t.name).toLowerCase()>=(""+e.name).toLowerCase()?1:-1))if(Array.isArray(e.items)){const i=[];for(const t of e.items.sort((t,e)=>t.key>=e.key?1:-1))i.push({name:t.key,innerText:t.value});t[0].style.push({name:e.name,parent:e.parent,item:i})}i.push(Zt.replaceTab(Zt.applyTemplate("resources",jt,t),e.insertSpaces),this.directory.string,"styles.xml")}if(Kt.themes.size){const t=e.manifestThemeName,n={};for(const[o,a]of Kt.themes.entries()){const r=[{style:[]}];for(const[e,i]of a.entries()){const a=i.items,s=[];for(const t in a)s.push({name:t,innerText:a[t]});n[o]&&e===t&&!s.length||r[0].style.push({name:e,parent:i.parent,item:s}),e===t&&(n[o]=!0)}const s=$t.exec(o);s&&i.push(Zt.replaceTab(oe(Zt.applyTemplate("resources",jt,r),e.resolutionDPI,e.convertPixels),e.insertSpaces),s[1],s[2])}}return this.checkFileAssets(i,t),i}resourceDimenToXml(t={}){const e=[];if(Kt.dimens.size){const i=[{dimen:[]}],n=this.userSettings,o=n.resolutionDPI,a=n.convertPixels;for(const[t,e]of Array.from(Kt.dimens.entries()).sort())i[0].dimen.push({name:t,innerText:a?P(e,o,!1):e});e.push(Zt.replaceTab(Zt.applyTemplate("resources",Ft,i)),this.directory.string,"dimens.xml"),this.checkFileAssets(e,t)}return e}resourceDrawableToXml(t={}){const e=[];if(Kt.drawables.size){const i=this.userSettings,n=this.directory.image;for(const[t,o]of Kt.drawables.entries())e.push(Zt.replaceTab(ne(o,i.resolutionDPI,i.convertPixels),i.insertSpaces),n,t+".xml");this.checkFileAssets(e,t)}return e}resourceDrawableImageToXml({copyTo:t,archiveTo:e,callback:i}={}){const n=[];if(Kt.images.size){const o=this.directory.image;for(const[t,e]of Kt.images.entries())if(Object.keys(e).length>1)for(const i in e)n.push(e[i],o+"-"+i,t+"."+Yt.fromLastIndexOf(e[i],"."));else e.mdpi&&n.push(e.mdpi,o,t+"."+Yt.fromLastIndexOf(e.mdpi,"."));if(t||e){const o=ee(n);t&&this.copying(t,o,i),e&&this.archiving(e,o)}}return n}resourceAnimToXml(t={}){const e=[];if(Kt.animators.size){const i=this.userSettings;for(const[t,n]of Kt.animators.entries())e.push(Zt.replaceTab(n,i.insertSpaces),"res/anim",t+".xml");this.checkFileAssets(e,t)}return e}layoutAllToXml(t={}){const{assets:e,copyTo:i,archiveTo:n,callback:o}=t,a={};if(e){const t=[],r=e.length;for(let i=0;i<r;i++){const o=e[i];a[o.filename]=[o.content],n&&t.push(ie(o.pathname,0===i?this.userSettings.outputMainFileName:o.filename+".xml",o.content))}i&&this.copying(i,t,o),n&&this.archiving(n,t)}return a}getAssetsAll(t){const e=[],i=t.length;for(let n=0;n<i;n++)e.push(ie(t[n].pathname,0===n?this.userSettings.outputMainFileName:t[n].filename+".xml",t[n].content));return e.concat(te(this.resourceStringToXml()),te(this.resourceStringArrayToXml()),te(this.resourceFontToXml()),te(this.resourceColorToXml()),te(this.resourceDimenToXml()),te(this.resourceStyleToXml()),te(this.resourceDrawableToXml()),ee(this.resourceDrawableImageToXml()),te(this.resourceAnimToXml()))}checkFileAssets(t,{copyTo:e,archiveTo:i,callback:n}={}){if(e||i){const o=te(t);e&&this.copying(e,o,n),i&&this.archiving(i,o)}}get userSettings(){return this.resource.userSettings}}const se=squared.base.lib.enumeration;class le extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=!0}afterBaseLayout(){for(const t of this.application.processing.cache)if(t.inputElement&&t.visible&&t.hasProcedure(se.NODE_PROCEDURE.ACCESSIBILITY))switch(t.controlName){case o.EDIT:t.companion||[t.previousSibling,t.nextSibling].some(e=>{if(e&&e.visible&&e.pageFlow){const i=t.element,n=e.element,o="LABEL"===e.documentParent.tagName?e.documentParent:void 0;if(i.id&&i.id===n.htmlFor)return e.android("labelFor",t.documentId),!0;if(o&&e.textElement)return o.android("labelFor",t.documentId),!0}return!1});case o.SELECT:case o.CHECKBOX:case o.RADIO:case o.BUTTON:{const e=t.element;e.readOnly&&t.android("focusable","false"),e.disabled&&t.android("enabled","false");break}}}}var ce=squared.base.LayoutUI;const{css:de,math:he,regex:ue,util:pe}=squared.lib,{constant:ge,enumeration:me}=squared.base.lib,fe=/(start|end|center|baseline)/,Te=/(start|left|center|right|end)/;function ye(t,e,i){const n=i?e.column:e.row,o=n.unit,a=o.length;let r=0;if(a){const t=i?"width":"height";for(let i=0;i<a;i++){const n=o[i];if(n.endsWith("px"))r+=parseFloat(n);else{let n=0;pe.captureMap(e.rowData[i],t=>t&&t.length>0,e=>n=Math.min(n,...pe.objectMap(e,e=>e.bounds[t]))),r+=n}}}else if((r=he.maxArray(n.unitTotal))<=0)return 0;return r+=n.gap*(n.length-1),i?t.actualWidth-(r+=t.contentBox?t.borderLeftWidth+t.borderRightWidth:t.contentBoxWidth):t.actualHeight-(r+=t.contentBox?t.borderTopWidth+t.borderBottomWidth:t.contentBoxHeight)}function be(t,e,i,n,o,a,r){const s=n?e.column:e.row;if(i.startsWith("space")){const c=ye(t,e,n);if(c>0){const t=function(t,e){const i=t.rowData;if(e){const e=t.column.length,n=t.row.length,o=Array(e);for(let t=0;t<e;t++){const e=Array(n);for(let o=0;o<n;o++)e[o]=i[o][t];o[t]=e}return o}return i}(e,n),d=s.length,h=new Set;function l(t){const e=Math.floor(c/t);return[e,c-e*t]}switch(i){case"space-around":{const[e,i]=l(2*d);for(let n=0;n<d;n++)for(const s of new Set(pe.flatMultiArray(t[n]))){const t=(n>0&&n<=i?1:0)+e;h.has(s)?s.cssPX(o,c/d):(s.modifyBox(a,t),s.modifyBox(r,e),h.add(s))}s.normal=!1;break}case"space-between":if(d>1){const[e,i]=l(d-1);for(let a=0;a<d;a++)for(const s of new Set(pe.flatMultiArray(t[a]))){const t=e+(a<i?1:0);a<d-1?h.has(s)?s.cssPX(o,t):(s.modifyBox(r,t),h.add(s)):pe.convertInt(s.android(n?"layout_columnSpan":"layout_rowSpan"))>1&&(s.cssPX(o,t),h.has(s)&&s.modifyBox(r,-t))}}s.normal=!1;break;case"space-evenly":{const[e,i]=l(d+1);for(let n=0;n<d;n++)for(const s of new Set(pe.flatMultiArray(t[n]))){const t=e+(n<i?1:0);h.has(s)?s.cssPX(o,t):(0===n&&s.modifyBox(a,e),s.modifyBox(r,t),h.add(s))}s.normal=!1;break}}}}else{const o=ye(t,e,n);if(o>0){const e=n?256:32;switch(i){case"center":t.modifyBox(e,Math.floor(o/2)),s.normal=!1;break;case"right":if(!n)break;case"end":case"flex-end":t.modifyBox(e,o),s.normal=!1}}}}class Ae extends squared.base.extensions.CssGrid{processNode(t,i){super.processNode(t,i);const n=t.data(ge.EXT_NAME.CSS_GRID,ge.STRING_BASE.EXT_DATA);if(n){const o=new ce(i,t,e.GRID,4,t.children);o.rowCount=n.row.length,o.columnCount=n.column.length;for(const e of t.cascade(t=>t.imageElement)){const t=this.resource.getImage(e.src);t&&(!e.hasPX("width",!1)&&t.width>e.bounds.width?(e.css("width",de.formatPX(e.bounds.width),!0),e.android("adjustViewBounds","true")):!e.hasPX("height",!1)&&t.height>e.bounds.height&&(e.css("height",de.formatPX(e.bounds.height),!0),e.android("adjustViewBounds","true")))}return{output:this.application.renderNode(o),complete:!0}}}processChild(t,i){const n=i.data(ge.EXT_NAME.CSS_GRID,ge.STRING_BASE.EXT_DATA),a=t.data(ge.EXT_NAME.CSS_GRID,"cellData");let r,s;if(n&&a){function l(e,o,r){let s,l,d;o?(s=n.column,l=a.columnStart,d=a.columnSpan):(s=n.row,l=a.rowStart,d=a.rowSpan);const h=s.unitMin,u=o?c.HORIZONTAL:c.VERTICAL;let p=s.unit,g=0,m=0,f=!1,T=0,y=0;p.length&&p.every(t=>"auto"===t)&&(o?(p=Array(p.length).fill("1fr"),s.unit=p):p.length=0);for(let n=0,a=0;n<d;n++){const c=l+n,b=h[c];""!==b&&(T+=i.parseUnit(b));let A=p[c];if(!A){const t=s.auto;if(!t[a])continue;A=t[a],t[a+1]&&a++}if("auto"===A||"max-content"===A){if(d<p.length&&(!i.hasPX(r)||p.some(t=>de.isLength(t))||"max-content"===A)){g=t.bounds[r],m=0,y=0;break}if(o){g=0,m=0,y=.01;break}}else if("min-content"===A){if(!e.hasPX(r)){o?e.setLayoutWidth("wrap_content",!1):e.setLayoutHeight("wrap_content",!1);break}}else if(A.endsWith("fr"))o||t.hasHeight?(y+=parseFloat(A),m=g):(y=0,m=t.bounds[r]),g=0;else if(de.isPercent(A))y+=parseFloat(A)/100,m=g,g=0;else{const t=e.parseUnit(A,u);0===m?g+=t:m+=t}t.textElement&&ue.CHAR.UNITZERO.test(b)&&(f=!0)}if(d>1){const t=(d-1)*s.gap;g>0&&0===m?g+=t:m>0&&(m+=t),T>0&&(T+=t)}if(T>0&&(s.autoFill&&0===g&&1===(o?n.row.length:n.column.length)?(g=Math.max(t.actualWidth,T),y=0):m=T),e.android(o?"layout_column":"layout_row",""+l),d>1&&e.android(o?"layout_columnSpan":"layout_rowSpan",""+d),m>0&&!e.hasPX(o?"minWidth":"minHeight")&&e.css(o?"minWidth":"minHeight",de.formatPX(m),!0),y>0){if(!e.hasPX(r)){const i=he.truncate(y,t.localSettings.floatPrecision);o?(e.setLayoutWidth("0px"),e.android("layout_columnWeight",i),e.mergeGravity("layout_gravity","fill_horizontal")):(e.setLayoutHeight("0px"),e.android("layout_rowWeight",i),e.mergeGravity("layout_gravity","fill_vertical"))}}else g>0&&(e.contentBox&&(g-=o?e.contentBoxWidth:e.contentBoxHeight),f&&!e.hasPX(o?"maxWidth":"maxHeight")?(e.css(o?"maxWidth":"maxHeight",de.formatPX(g),!0),e.mergeGravity("layout_gravity",o?"fill_horizontal":"fill_vertical")):e.hasPX(r)||e.css(r,de.formatPX(g),!0));return[l,d]}const{alignSelf:h,justifySelf:u}=t.flexbox;if(fe.test(h)||Te.test(u)){(r=this.application.createNode()).containerName=t.containerName,r.setControlType(o.FRAME,e.FRAME),r.inherit(t,"base","initial"),r.resetBox(510),r.exclude(me.NODE_RESOURCE.BOX_STYLE|me.NODE_RESOURCE.ASSET,me.NODE_PROCEDURE.CUSTOMIZATION),i.appendTry(t,r),r.render(i),t.transferBox(30,r),l(r,!0,"width"),l(r,!1,"height");let n=!1;u.endsWith("start")||u.endsWith("left")||u.endsWith("baseline")?(t.mergeGravity("layout_gravity","left"),n=!0):u.endsWith("end")||u.endsWith("right")?(t.mergeGravity("layout_gravity","right"),n=!0):u.endsWith("center")&&(t.mergeGravity("layout_gravity",c.CENTER_HORIZONTAL),n=!0),t.hasWidth||t.setLayoutWidth(n?"wrap_content":"match_parent",!1),h.endsWith("start")||h.endsWith("baseline")?t.mergeGravity("layout_gravity","top"):h.endsWith("end")?t.mergeGravity("layout_gravity","bottom"):h.endsWith("center")?t.mergeGravity("layout_gravity",c.CENTER_VERTICAL):t.hasHeight||t.setLayoutHeight("match_parent",!1),r.innerWrapped=t,t.outerWrapper=r,t.parent=r,s=this.application.renderNode(new ce(i,r,e.FRAME,4096,r.children))}const p=r||t,g=n.row;l(p,!0,"width"),p.hasPX("width")||p.mergeGravity("layout_gravity","fill_horizontal");const[m,f]=l(p,!1,"height");function d(){if(1===f&&!0===n.rowSpanMultiple[m]){const e=n.rowData.length;for(const i of pe.flatMultiArray(n.rowData[m]))if(i!==t){const t=i.data(ge.EXT_NAME.CSS_GRID,"cellData");if(t&&(0===m||t.rowSpan<e)&&t.rowSpan>f)return!0}}return!1}"normal"===n.alignContent&&!i.hasPX("height")&&(!g.unit[m]||"auto"===g.unit[m])&&t.initial.bounds&&t.bounds.height>t.initial.bounds.height&&d()?p.css("minHeight",de.formatPX(t.actualHeight),!0):p.hasPX("height")||1===g.length&&"space-between"===n.alignContent||(fe.test(n.alignItems)||p.mergeGravity("layout_gravity","fill_vertical"),"normal"===n.alignContent&&i.hasHeight&&0===n.rowSpanMultiple.length&&p.mergeGravity("layout_rowWeight","1"))}return{parent:r,renderAs:r,outputAs:s}}postBaseLayout(t){const e=t.data(ge.EXT_NAME.CSS_GRID,ge.STRING_BASE.EXT_DATA);if(e){if(t.hasWidth&&"normal"!==e.justifyContent&&be(t,e,e.justifyContent,!0,"width",16,4),t.hasHeight&&"normal"!==e.alignContent){be(t,e,e.alignContent,!1,"height",2,8);const i=e.rowWeight;if(i.length>1){const t=this.controller.localSettings.precision.standardFloat;for(let n=0;n<e.row.length;n++)if(i[n]>0){const o=e.rowData[n],a=o.length;for(let e=0;e<a;e++){const a=o[e];if(a)for(let e of a)e.outerWrapper&&(e=e.outerWrapper),e.android("layout_rowWeight",""+he.truncate(i[n],t)),e.setLayoutHeight("0px")}}}}const i=e.column;if(i.normal&&!i.unit.includes("auto")){const e=i.gap*(i.length-1);if(e>0){const i=t.renderParent;i&&!i.hasAlign(4)&&(t.cssPX("minWidth",e),t.cssPX("width",e,!1,!0)),!t.hasPX("width")&&t.hasPX("maxWidth")&&t.css("width",de.formatPX(t.actualWidth+e),!0)}}}}postOptimize(t){const e=t.data(ge.EXT_NAME.CSS_GRID,ge.STRING_BASE.EXT_DATA);if(e){const i=this.controller,{children:n,column:o}=e,a=o.unit,r=n[n.length-1];if(a.length&&a.every(t=>de.isPercent(t))){const n=o.length,s=a.reduce((t,e)=>t+parseFloat(e),0)+o.gap*n*100/t.actualWidth;if(s<100){const a="@dimen/"+S.insertStoredAsset("dimens",t.controlId+"_cssgrid_column_gap",de.formatPX(o.gap)),l=e.row.length;for(let e=0;e<l;e++)i.addAfterOutsideTemplate(r.id,i.renderSpace(de.formatPercent((100-s)/100),"wrap_content",0,0,k(void 0,{[t.localizeString(c.MARGIN_LEFT)]:a,layout_row:""+e,layout_column:""+n})),!1);t.android("columnCount",""+(n+1))}}const s=e.emptyRows,l=s.length;for(let n=0;n<l;n++){const o=s[n];if(o){const a="@dimen/"+S.insertStoredAsset("dimens",t.controlId+"_cssgrid_row_gap",de.formatPX(e.row.gap)),s=o.length;for(let t=0;t<s;t++)if(1===o[t]){i.addAfterOutsideTemplate(r.id,i.renderSpace("wrap_content",a,0,0,k(void 0,{layout_row:""+n,layout_column:""+t})),!1);break}}}}}}class Ee extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}init(t){return this.included(t)&&this.application.rootElements.add(t),!1}}var Se=squared.base.LayoutUI;const{math:Re,util:Ie}=squared.lib,{constant:_e}=squared.base.lib,xe=squared.base.NodeUI,we={leftTop:["left","top"],rightBottom:["right","bottom"],rightLeftBottomTop:[_e.STRING_BASE.RIGHT_LEFT,_e.STRING_BASE.BOTTOM_TOP],leftRightTopBottom:[_e.STRING_BASE.LEFT_RIGHT,_e.STRING_BASE.TOP_BOTTOM],widthHeight:["Width","Height"],horizontalVertical:[c.HORIZONTAL,c.VERTICAL]};function ve(t,e,i){const n="width"===i,o="has"+Ie.capitalize(i),a=e.reduce((t,e)=>t+e.flexbox.grow,0),r=e=>e.flexbox.basis=e.bounds[i]/t.box[i]*100+"%";let s=t[o]||t.blockStatic&&Ie.withinRange(t.parseUnit(t.css(n?"maxWidth":"maxHeight")),t.box.width),l=0;if(s)for(const t of e){const e=t.innerWrapped&&t.innerWrapped.autoMargin||t.autoMargin;if(n){if(e.horizontal){s=!1;break}}else if(e.vertical){s=!1;break}}if(e.length>1&&(n||s)){const t=[],n=[];let a,c=0,d=0,h=NaN;for(const r of e){const e=r.bounds[i],u=r.flexbox;let p=!1;if(u.grow>0||1!==u.shrink){const n=r.parseUnit("auto"===u.basis?r.css(i):u.basis,i);if(n>0){const{shrink:i,grow:o}=u;let s=!1;e<n?(isNaN(h)||i<h)&&(h=i,s=!0,l=1):(isNaN(h)||o>h)&&(h=o,s=!0,l=2),s&&(a=r,c=n,d=e),t.push({item:r,basis:n,dimension:e,shrink:i,grow:o});continue}u.grow>0&&e>r[i]&&(p=!0)}"auto"===u.alignSelf&&(s&&!r[o]||p)&&n.push(r)}if(0!==l){if(t.length>1)for(const e of t){const t=e.item;t.flexbox.grow=t===a||e.basis===c&&(1===l&&h===e.shrink||2===l&&h===e.grow)?1:e.dimension/e.basis/(d/c)*e.basis/c}for(const t of n)r(t)}}if(n&&0===l)for(const i of e)i.cascadeSome(e=>e.multiline&&0===e.ascend(t=>t[o],t).length)&&r(i);return a}const Ne=t=>t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin;class Ce extends squared.base.extensions.Flexbox{processNode(t,i){super.processNode(t,i);const n=t.data(_e.EXT_NAME.FLEXBOX,_e.STRING_BASE.EXT_DATA);if(n.directionRow&&1===n.rowCount||n.directionColumn&&1===n.columnCount)return t.containerType=e.CONSTRAINT,t.addAlign(4),n.wrap=!1,{include:!0};{const o=new Se(i,t,0,4);return o.itemCount=t.length,o.rowCount=n.rowCount,o.columnCount=n.columnCount,n.directionRow&&t.hasHeight||n.directionColumn&&t.hasWidth||t.some(t=>!t.pageFlow)?o.containerType=e.CONSTRAINT:o.setContainerType(e.LINEAR,n.directionColumn?8:16),{output:this.application.renderNode(o),complete:!0}}}processChild(t,i){if(t.hasAlign(128))return{output:this.application.renderNode(new Se(i,t,e.CONSTRAINT,4,t.children)),complete:!0};if(t.autoMargin.horizontal||t.autoMargin.vertical&&t.hasHeight){const n=i.data(_e.EXT_NAME.FLEXBOX,_e.STRING_BASE.EXT_DATA);if(n){const o=n.children.findIndex(e=>e===t);if(-1!==o){const a=this.controller.createNodeWrapper(t,i);return a.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},!0),a.saveAsInitial(!0),a.flexbox=Object.assign({},t.flexbox),n.children[o]=a,t.autoMargin.horizontal&&!t.hasWidth&&t.setLayoutWidth("wrap_content"),{parent:a,renderAs:a,outputAs:this.application.renderNode(new Se(i,a,e.FRAME,4096,a.children))}}}}}postBaseLayout(t){const e=t.data(_e.EXT_NAME.FLEXBOX,_e.STRING_BASE.EXT_DATA);if(e){const{alignContent:i,children:n,directionColumn:o,directionReverse:a,directionRow:r,justifyContent:s,wrap:l,wrapReverse:d}=e,h=[],u=[],p=[];if(l){let e;t.each(t=>{if(t.hasAlign(128)){const i=t.renderFilter(t=>t.pageFlow);if(i.length){if(r)t.setLayoutWidth("match_parent"),h.push(i);else{if(t.setLayoutHeight("match_parent"),e){const i=e.length;let n=e[0];for(let t=1;t<i;t++)e[t].linear.right>n.linear.right&&(n=e[t]);if(d){const e=t.linear.left-n.actualRect("right");e>0&&t.modifyBox(16,e)}t.constraint.horizontal=!0}u.push(i),e=i}p.push(t)}}}),t.layoutLinear?d&&o&&t.mergeGravity("gravity","right"):p.length&&(r?u.push(p):h.push(p))}else r?(a&&n.reverse(),h[0]=n):(a&&n.reverse(),u[0]=n);[h,u].forEach((e,n)=>{const r=0===n,h=r?1:0,u=we.horizontalVertical[n],g=we.horizontalVertical[h],m=we.widthHeight[n],f=we.widthHeight[h],T=we.leftTop[n],y=we.leftTop[h],b=we.rightBottom[n],A=we.rightBottom[h],E=we.leftRightTopBottom[n],S=we.rightLeftBottomTop[n],R=m.toLowerCase(),I=f.toLowerCase(),_=t["has"+f],x=t["has"+m],w=`layout_constraint${Ie.capitalize(u)}_weight`;function v(t,e){0===t[R]&&(t.app(w,Re.truncate(e,t.localSettings.floatPrecision)),r?t.setLayoutWidth("0px"):t.setLayoutHeight("0px"))}const N=e.length;for(let n=0;n<N;n++){const h=e[n],m=h.length,f=h[0],L=h[m-1],P=h===p,O=!P&&h.every(t=>0===t.flexbox.grow),k=O&&("space-between"===s||"space-around"===s&&m>1),X=[];let B,M=0,D=0,G=!0,W=null;if(P)if(B=!1,x){let t="spread",e=0;switch(i){case"left":case"right":case"flex-end":e=1;case"baseline":case"start":case"end":case"flex-start":t="packed",G=!1}f.anchorStyle(u,t,e)}else f.anchorStyle(u);else if(B=r||x,D=1-ve(t,h,R),m>1){let t=0;for(const e of h){const i=e.initial.bounds;if(i){const e=i[I];0===t?(M=e,t++):e===M?t++:e>M&&(M=e,t=1)}}t===m&&(M=NaN)}for(let t=0;t<m;t++){const e=h[t],o=h[t-1],a=h[t+1];if(a&&e.anchor(S,(a.outerWrapper||a).documentId),o&&e.anchor(E,(o.outerWrapper||o).documentId),P)G&&m>1&&x&&v(e,1),e.anchor(y,"parent");else{const s=Ne(e),p=e.innerWrapped;if(r){if(s.horizontal)if(p){const t=s.leftRight?c.CENTER_HORIZONTAL:e.localizeString(s.left?"right":"left");p.mergeGravity("layout_gravity",t),D>0&&(e.flexbox.basis="0%",X.push(e))}else s.leftRight||(s.left?o&&e.anchorDelete(E):a&&e.anchorDelete(S))}else if(s.vertical)if(p){const t=s.topBottom?c.CENTER_VERTICAL:e.localizeString(s.top?"bottom":"top");p.mergeGravity("layout_gravity",t),D>0&&(e.flexbox.basis="0%",X.push(e))}else s.topBottom||(s.top?o&&e.anchorDelete(E):a&&e.anchorDelete(S));switch(e.flexbox.alignSelf){case"start":case"flex-start":e.anchor(y,"parent");break;case"end":case"flex-end":e.anchor(A,"parent");break;case"baseline":r&&(null===W&&(W=xe.baseline(h)),W&&e!==W&&e.anchor("baseline",W.documentId));break;case"center":e.anchorParent(g,"packed",.5),e.textElement&&e.mergeGravity("gravity","center");break;default:const o=e.layoutFrame&&e.innerWrapped;switch(i){case"center":N%2==1&&n===Math.floor(N/2)?e.anchorParent(g):n<N/2?e.anchor(A,"parent"):n>=N/2&&e.anchor(y,"parent");break;case"space-evenly":case"space-around":o?o.mergeGravity("layout_gravity",r?c.CENTER_VERTICAL:c.CENTER_HORIZONTAL):e.anchorParent(g);break;case"space-between":k&&2===m&&e.anchorDelete(0===t?S:E),0===n?o?o.mergeGravity("layout_gravity",d?A:y):e.anchor(d?A:y,"parent"):N>2&&n<N-1?o?o.mergeGravity("layout_gravity",r?c.CENTER_VERTICAL:c.CENTER_HORIZONTAL):e.anchorParent(g):o?o.mergeGravity("layout_gravity",d?y:A):e.anchor(d?y:A,"parent");break;default:if(e.anchorParent(g),void 0!==e.innerWrapped&&e.innerWrapped.autoMargin[g]||e.anchorStyle(g,"packed",d?1:0),0===e[I]){function C(t,e){r?t.setLayoutHeight(e):t.setLayoutWidth(e)}!r&&e.blockStatic?C(e,"match_parent"):isNaN(M)?C(e,!r&&!l&&e.length||_&&"normal"===i?_?"0px":"match_parent":"wrap_content"):1===m?C(e,r?"wrap_content":_?"0px":"match_parent"):(e.naturalElement?e.initial.bounds[I]:1/0)<M?(C(e,e.flexElement&&e.css("flexDirection").startsWith(r?"row":"column")?"match_parent":"0px"),p&&!p.autoMargin[u]&&C(p,"match_parent")):(e.lockAttr("android","layout_"+I),C(e,"wrap_content"))}}}Wt.setFlexDimension(e,R),(p||e).has("flexGrow")||(B=!1)}e.anchored=!0,e.positioned=!0}if(B)for(const t of h)v(t,(t.innerWrapped||t).flexbox.grow);else if(D>0)for(const t of X){const e=Ne(t);let i=1;r?e.leftRight&&(i=2):e.topBottom&&(i=2),v(t,Math.max(t.flexbox.grow,D*i/X.length))}if(f.anchor(T,"parent"),L.anchor(b,"parent"),!P&&(r||o)){let c=!1;if(O)switch(s){case"normal":o&&f.anchorStyle(u,"packed",a?1:0);break;case"left":if(!r)break;case"start":case"flex-start":f.anchorStyle(u,"packed",a?1:0);break;case"center":m>1&&f.anchorStyle(u,"packed",.5),c=!0;break;case"right":if(!r)break;case"end":case"flex-end":f.anchorStyle(u,"packed",1);break;case"space-between":1===m&&L.anchorDelete(b);break;case"space-evenly":if(m>1){if(f.anchorStyle(u,"spread"),!i.startsWith("space"))for(const t of h)v(t,t.flexbox.grow||1)}else c=!0;break;case"space-around":if(m>1){const e=this.controller;f.constraint[u]=!1,L.constraint[u]=!1,e.addGuideline(f,t,u,!0,!1),e.addGuideline(L,t,u,!0,!0)}else c=!0}k||!l&&e[n].some(t=>""!==t.app(w))&&!Ie.sameArray(e[n],t=>t.app(w))?f.anchorStyle(u,"spread_inside",0,!1):c||f.anchorStyle(u,"packed",a?1:0,!1)}}})}}}var Le=squared.base.LayoutUI;const{css:Pe,util:Oe}=squared.lib,{constant:ke}=squared.base.lib;class Xe extends squared.base.extensions.Grid{processNode(t,i){super.processNode(t,i);const n=t.data(ke.EXT_NAME.GRID,"columnCount");if(n){const o=new Le(i,t,e.GRID,4,t.children);return o.columnCount=n,{output:this.application.renderNode(o),complete:!0}}}processChild(t,e){const i=t.data(ke.EXT_NAME.GRID,"cellData");if(i){const n=i.siblings&&i.siblings.slice(0);let o;if(n){const a=this.controller;if(n.unshift(t),t=(o=a.processLayoutHorizontal(new Le(e,a.createNodeGroup(t,n,e,!0),0,i.block?64:0,n))).node,i.block)t.css("display","block");else for(const t of n)t.percentWidth&&t.css("width",Pe.formatPX(t.bounds.width),!0);!function(t,e){const i=squared.base.extensions.Grid.createDataCellAttribute();for(const t of e){const e=t.data(ke.EXT_NAME.GRID,"cellData");e&&(e.cellStart&&(i.cellStart=!0),e.cellEnd&&(i.cellEnd=!0),e.rowEnd&&(i.rowEnd=!0),e.rowStart&&(i.rowStart=!0),t.data(ke.EXT_NAME.GRID,"cellData",null))}t.data(ke.EXT_NAME.GRID,"cellData",i)}(t,n)}if(i.rowSpan>1&&t.android("layout_rowSpan",""+i.rowSpan),i.columnSpan>1&&t.android("layout_columnSpan",""+i.columnSpan),"table-cell"===t.display&&t.mergeGravity("layout_gravity","fill"),o)return{parent:o.node,renderAs:o.node,outputAs:this.application.renderNode(o),complete:!0}}}postConstraints(t){if("collapse"!==t.css("borderCollapse")){const e=t.data(ke.EXT_NAME.GRID,"columnCount");if(e){let i=0,n=0,o=0,a=0;t.renderEach(r=>{const s=r.data(ke.EXT_NAME.GRID,"cellData");if(s){const l=r.actualParent;if(!l.visible){const c=1!==l.getBox(2)[0]?l.marginTop:0,d=1!==l.getBox(8)[0]?l.marginBottom:0;if(s.cellStart&&(i=c+l.paddingTop),s.rowStart&&(a=Math.max(l.marginLeft+l.paddingLeft,a)),s.rowEnd){const i=d+l.paddingBottom+(s.cellEnd?0:c+l.paddingTop);if(i>0)if(s.cellEnd)o=i;else{const n=this.controller;n.addAfterOutsideTemplate(r.id,n.renderSpace("match_parent","@dimen/"+S.insertStoredAsset("dimens",t.controlId+"_grid_space",Pe.formatPX(i)),e),!1)}n=Math.max(l.marginRight+l.paddingRight,n)}}}}),t.modifyBox(32,i),t.modifyBox(64,n),t.modifyBox(128,o),t.modifyBox(256,a)}}if(!t.hasWidth){let e=-1/0;Oe.captureMap(t.renderChildren,t=>t.inlineFlow||!t.blockStatic,t=>e=Math.max(e,t.linear.right)),Oe.withinRange(t.box.right,e)&&t.setLayoutWidth("wrap_content")}}}var Be=squared.base.LayoutUI;const{css:Me,util:De}=squared.lib,{constant:Ge}=squared.base.lib,We=squared.base.NodeUI,He=24,Ve=8;class Fe extends squared.base.extensions.List{processNode(t,i){const n=new Be(i,t,0,0,t.children);if((!n.unknownAligned||n.singleRowAligned)&&(super.processNode(t,i),n.linearY?(n.rowCount=t.length,n.columnCount=t.some(t=>"inside"===t.css("listStylePosition"))?3:2,n.setContainerType(e.GRID,4)):(n.linearX||n.singleRowAligned)&&(n.rowCount=1,n.columnCount=n.length,n.setContainerType(e.LINEAR,8)),0!==n.containerType))return{output:this.application.renderNode(n),complete:!0}}processChild(t,i){const n=t.data(Ge.EXT_NAME.LIST,Ge.STRING_BASE.EXT_DATA);if(n){const a=this.application,r=this.controller,s=i.firstStaticChild===t;let l=t.marginLeft,c=0,d=!1,h=NaN;t.modifyBox(16),i.is(e.GRID)?(c=De.convertInt(i.android("columnCount")),d=!0):s&&(d=!0),d&&(l+=i.paddingLeft>0?i.paddingLeft:i.marginLeft);const u=0===t.length?r.createNodeGroup(t,[t],i):t;let p=n.ordinal?void 0:t.find(t=>"left"===t.float&&t.marginLeft<0&&Math.abs(t.marginLeft)<=t.documentParent.marginLeft),g=!1;if(p){const n=new Be(i,p);p.inlineText||0===p.length?n.containerType=e.TEXT:(n.singleRowAligned?n.setContainerType(e.RELATIVE,8):n.setContainerType(e.CONSTRAINT,2),n.retain(p.children)),p.parent=i,p.render(i),3===c&&t.android("layout_columnSpan","2"),(l+=p.marginLeft)>0&&!p.hasWidth&&p.android("minWidth",Me.formatPX(l)),p.modifyBox(16),a.addLayoutTemplate(i,p,a.renderNode(n))}else{const s="inside"===t.css("listStylePosition");let m,f="right",T=0,y=0,b=0,A=0;if(""!==n.imageSrc&&(n.imagePosition&&(({top:b,left:A}=Me.getBackgroundPosition(n.imagePosition,t.actualDimension,t.fontSize,this.resource.getImage(n.imageSrc))),f="left",t.marginLeft<0?(h=t.marginLeft,h+=i.paddingLeft>0?i.paddingLeft:i.marginLeft):(d=!1,y=t.marginLeft),l=0),m=this.resource.addImageSrc(n.imageSrc)),"left"===f)l+=t.paddingLeft-A,t.modifyBox(256);else{const t=n.ordinal?n.ordinal.length:1;T=Math.max(l/(m?6:4*t),4)}const E=k();(p=a.createNode()).containerName=t.containerName+"_ORDINAL",s?(r.addBeforeOutsideTemplate(p.id,r.renderNodeStatic(o.SPACE,k(void 0,{minWidth:"@dimen/"+S.insertStoredAsset("dimens",t.tagName.toLowerCase()+"_space_indent",Me.formatPX(l))})),!1),l=He):3===c&&u.android("layout_columnSpan","2"),"DT"!==t.tagName||m?(m?(p.setControlType(o.IMAGE,e.IMAGE),Object.assign(E.android,{src:"@drawable/"+m,scaleType:s||"right"!==f?"fitStart":"fitEnd",baselineAlignBottom:d?"true":""})):n.ordinal?(p.textContent=n.ordinal,p.inlineText=!0,p.setControlType(o.TEXT,e.TEXT),"DFN"===t.tagName&&(l+=Ve,p.modifyBox(64,Ve))):(p.setControlType(o.SPACE,e.SPACE),p.renderExclude=!1,t.modifyBox(256)),p.depth=t.depth,p.inherit(t,"textStyle"),n.ordinal&&!n.ordinal.endsWith(".")&&(p.fontSize*=.75),p.cssApply({minWidth:l>0?Me.formatPX(l):"",marginTop:0!==t.marginTop?Me.formatPX(t.marginTop):"",marginLeft:y>0?Me.formatPX(y):"",paddingTop:t.paddingTop>0&&0===t.getBox(32)[0]?Me.formatPX(t.paddingTop):"",paddingRight:T>0&&"right"===f?Me.formatPX(T):"",paddingLeft:T>0&&"left"===f&&(!m||n.imagePosition)?Me.formatPX(T):"",lineHeight:t.lineHeight>0?Me.formatPX(t.lineHeight):""}),p.apply(E),p.cssTry("display","block")&&(p.setBounds(),p.cssFinally("display")),p.saveAsInitial(),s||p.mergeGravity("gravity",t.localizeString(f)),0!==b&&p.modifyBox(2,b),0!==A&&p.modifyBox(16,A),p.render(i),a.addLayoutTemplate(i,p,{type:1,node:p,controlName:p.controlName}),g=!0):u.android("layout_columnSpan",""+c)}if(p.positioned=!0,d&&((isNaN(h)||h<=0)&&i.modifyBox(i.paddingLeft>0?256:16),h<0&&i.modifyBox(16,h)),c>0&&(u.setLayoutWidth("0px"),u.android("layout_columnWeight","1"),u!==t?t.baseline&&u.android("baselineAlignedChildIndex","0"):t.filter(t=>t.visible).length>1&&We.linearData(t.children).linearY&&t.addAlign(1024)),t!==u)return 0!==t.marginTop&&(u.modifyBox(2,t.marginTop),t.modifyBox(2),t.outerWrapper=u,u.innerWrapped=t,g&&u.registerBox(2,p)),{parent:u,renderAs:u,outputAs:a.renderNode(new Be(i,u,e.LINEAR,18,u.children))};g&&t.registerBox(2,p)}}}const ze=squared.lib.util;class Ue extends squared.base.extensions.Relative{postOptimize(t){super.postOptimize(t),t.imageOrSvgElement&&t.alignSibling("baseline")&&0!==ze.convertFloat(t.verticalAlign)&&"invisible"===t.android("visibility")&&t.android("baselineAlignBottom","true")}}var qe=squared.base.LayoutUI;const je=squared.lib.css,{constant:Ye,enumeration:Ze}=squared.base.lib;class Ke extends squared.base.extensions.Sprite{processNode(t,i){const n=t.data(Ye.EXT_NAME.SPRITE,Ye.STRING_BASE.EXT_DATA);if(n){const a=this.resource.addImageSrc(t.backgroundImage);if(""!==a){const{width:r,height:s}=n.image,l=this.application.createNode();return l.inherit(t,"base","initial","styleMap"),l.setControlType(o.FRAME,e.FRAME),l.exclude(Ze.NODE_RESOURCE.IMAGE_SOURCE,Ze.NODE_PROCEDURE.CUSTOMIZATION),i.appendTry(t,l),t.setControlType(o.IMAGE,e.IMAGE),t.exclude(Ze.NODE_RESOURCE.FONT_STYLE|Ze.NODE_RESOURCE.BOX_STYLE),t.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:r>0?je.formatPX(r):"auto",height:s>0?je.formatPX(s):"auto",marginTop:je.formatPX(n.position.top),marginRight:"0px",marginBottom:"0px",marginLeft:je.formatPX(n.position.left),paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"rgba(0, 0, 0, 0)"}),t.unsetCache(),t.android("src","@drawable/"+a),l.innerWrapped=t,t.outerWrapper=l,t.parent=l,{renderAs:l,outputAs:this.application.renderNode(new qe(i,l,e.FRAME,4096,l.children)),parent:l,complete:!0}}}}}const $e=squared.lib.css;squared;class Je extends squared.base.ExtensionUI{constructor(t,e,i,o){super(t,e,i,o),this.require(n.EXTERNAL,!0)}processNode(t,i){const n=this.name,o=$e.getDataSet(t.element,n),a=o.tag;if(a){t.containerType=t.blockStatic?e.BLOCK:e.INLINE,t.setControlType(a),t.render(i);const r=o.tagChild;return r&&(t.addAlign(4),t.each(t=>{if(t.styleElement){const e=t.dataset;e.use=n,e.androidSubstituteTag=r}})),{output:{type:1,node:t,controlName:a}}}}postOptimize(t){t.apply(S.formatOptions(k(this.options[t.elementId]),this.application.extensionManager.optionValueAsBoolean(n.RESOURCE_STRINGS,"numberResourceValue")))}}var Qe=squared.base.LayoutUI;const{css:ti,regex:ei,util:ii}=squared.lib,{constant:ni}=squared.base.lib;function oi(t){t.hasPX("height")&&t.height+t.contentBoxHeight<Math.floor(t.bounds.height)&&"top"!==t.css("verticalAlign")&&t.setLayoutHeight("wrap_content")}class ai extends squared.base.extensions.Table{processNode(t,i){super.processNode(t,i);const n=t.data(ni.EXT_NAME.TABLE,ni.STRING_BASE.EXT_DATA);if(n){let o=!1;n.columnCount>1?(o=n.expand,t.each(t=>{const e=t.data(ni.EXT_NAME.TABLE,"cellData");if(ei.CHAR.UNITZERO.test(t.css("width")))t.setLayoutWidth("0px"),t.android("layout_columnWeight",""+(t.element.colSpan||1));else{const i=e.expand;if(i){const i=ii.convertFloat(e.percent)/100;i>0&&(t.setLayoutWidth("0px"),t.android("layout_columnWeight",ii.trimEnd(i.toPrecision(3),"0")),o||(o=!t.hasWidth))}else!1===i&&t.android("layout_columnWeight","0");e.downsized&&(e.exceed?(t.setLayoutWidth("0px"),t.android("layout_columnWeight","0.01")):t.hasPX("width")&&t.actualWidth<t.bounds.width&&t.setLayoutWidth(ti.formatPX(t.bounds.width)))}"TD"===t.tagName&&t.setSingleLine(!0),oi(t)})):t.each(t=>{t.has("width",4)&&(t.setLayoutWidth("wrap_content"),o=!0),oi(t)}),o?i.hasPX("width")&&ii.aboveRange(t.actualWidth,i.actualWidth)?t.setLayoutWidth("match_parent"):t.css("width",ti.formatPX(t.actualWidth),!0):t.hasPX("width")&&t.actualWidth<Math.floor(t.bounds.width)&&(n.layoutFixed?t.android("width",ti.formatPX(t.bounds.width),!0):(t.hasPX("minWidth")||t.android("minWidth",ti.formatPX(t.actualWidth)),t.css("width","auto",!0))),t.hasPX("height")&&t.actualHeight<Math.floor(t.bounds.height)&&(t.hasPX("minHeight")||t.android("minHeight",ti.formatPX(t.actualHeight)),t.css("height","auto",!0));const a=new Qe(i,t,e.GRID,4,t.children);return a.rowCount=n.rowCount,a.columnCount=n.columnCount,{output:this.application.renderNode(a),complete:!0}}}processChild(t,e){const i=t.data(ni.EXT_NAME.TABLE,"cellData");if(i){const{rowSpan:n,colSpan:o,spaceSpan:a}=i;if(n>1&&t.android("layout_rowSpan",""+n),o>1&&t.android("layout_columnSpan",""+o),a){const e=this.controller;e.addAfterOutsideTemplate(t.id,e.renderSpace("wrap_content","wrap_content",a),!1)}t.mergeGravity("layout_gravity","fill"),"hide"===e.css("empty-cells")&&0===t.naturalChildren.length&&""===t.textContent&&t.hide(!0)}}postOptimize(t){const e=ii.convertInt(t.layoutWidth);e>0&&(t.bounds.width>e&&t.setLayoutWidth(ti.formatPX(t.bounds.width)),e>0&&"auto"===t.cssInitial("width")&&t.renderChildren.every(t=>t.inlineWidth)&&t.renderEach(t=>{t.setLayoutWidth("0px"),t.android("layout_columnWeight","1")}))}}var ri=squared.base.LayoutUI;squared;class si extends squared.base.extensions.VerticalAlign{processNode(t,i){return super.processNode(t,i),{output:this.application.renderNode(new ri(i,t,e.RELATIVE,8,t.children))}}}class li extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=!0}}var ci=squared.base.LayoutUI;const{css:di,util:hi}=squared.lib,ui=squared.base.lib.enumeration;class pi extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:!1}}is(){return!0}condition(t){return this.included(t.element)&&t.length>0}processNode(t,i){return t.exclude(0,ui.NODE_PROCEDURE.CONSTRAINT),{output:this.application.renderNode(new ci(i,t,e.CONSTRAINT,32,t.children))}}postBaseLayout(t){const e=this.controller,i=this.options.circlePosition;let n;t.each(e=>{hi.withinRange(e.linear.left,t.box.left)&&(e.anchor("left","parent"),e.anchorStyle(c.HORIZONTAL)),hi.withinRange(e.linear.top,t.box.top)&&(e.anchor("top","parent"),e.anchorStyle(c.VERTICAL)),i&&(e.anchored?n=e:n?!n.constraint.vertical&&e.constraint.vertical&&(n=e):e.constraint.vertical?n=e:e.constraint.horizontal&&(n=e))}),i?(void 0===n&&(n=t.item(0)),n.anchored||e.addGuideline(n,t),t.each(t=>{if(t!==n){const e=t.center,i=n.center,o=Math.abs(e.x-i.x),a=Math.abs(e.y-i.y),r=Math.round(Math.sqrt(Math.pow(o,2)+Math.pow(a,2)));let s=Math.round(Math.atan(Math.min(o,a)/Math.max(o,a))*(180/Math.PI));e.y>i.y?e.x>i.x?o>a?s+=90:s=180-s:o>a?s=270-s:s+=180:e.y<i.y?i.x>e.x?o>a?s+=270:s=360-s:o>a&&(s=90-s):s=e.x>i.x?90:270,t.app("layout_constraintCircle",n.documentId),t.app("layout_constraintCircleRadius",di.formatPX(r)),t.app("layout_constraintCircleAngle",""+s)}})):t.each(i=>{i.anchored||e.addGuideline(i,t)})}}var gi=squared.base.LayoutUI,mi=squared.base.ResourceUI;const{css:fi,regex:Ti}=squared.lib,yi=squared.base.lib.enumeration,bi=t=>t.visibleStyle.borderWidth&&(""!==t.backgroundColor||t.element.scrollHeight<window.innerHeight)&&!t.hasPX("width")&&!t.inline&&"100%"!==t.css("height")&&"100%"!==t.css("minHeight");class Ai extends squared.base.ExtensionUI{constructor(){super(...arguments),this.removeIs=!0}is(t){return t.documentBody}condition(t){if(bi(t))return!0;{const e=t.element.scrollHeight,i=mi.parseBackgroundImage(t);if(i){const n=t.css("backgroundRepeat").split(Ti.XML.SEPARATOR);for(let t=0;t<i.length;t++){const o=i[t];if("string"==typeof o&&o.startsWith("url(")){const i=n[t];if("no-repeat"===i||"repeat-x"===i){const t=this.resource.getRawData(o)||this.resource.getImage(fi.resolveURL(o));if(t){const i=t.height;if(i>0&&i<e)return!0}}}}}const n=t.actualParent;if(n.visibleStyle.background&&"HTML"===n.tagName&&!n.visible)return!0}return!1}processNode(t,i){const n=this.controller.createNodeWrapper(t,i);n.visibleStyle.background=!0,n.setLayoutWidth("match_parent");const o=bi(t),a=i.cssInitial("height"),r=i.cssInitial("minHeight");let s=t.css("backgroundSize");if(""===a&&""===r)n.setLayoutHeight(o?"match_parent":"wrap_content");else{if("100%"!==a&&"100%"!==r){const t=i.element.offsetHeight;t<window.innerHeight&&(s=`auto ${t}px`)}n.setLayoutHeight("match_parent")}const l=t.backgroundImage;if(""!==l&&(n.cssApply({backgroundImage:l,backgroundSize:s,backgroundRepeat:t.css("backgroundRepeat"),backgroundPositionX:t.css("backgroundPositionX"),backgroundPositionY:t.css("backgroundPositionY"),backgroundClip:t.css("backgroundClip"),border:"0px none solid",borderRadius:"0px"}),n.setCacheValue("backgroundImage",l),t.setCacheValue("backgroundImage","")),o){const e=t.backgroundColor;""!==e&&(n.css("backgroundColor",e),n.setCacheValue("backgroundColor",e),t.css("backgroundColor","transparent"),t.setCacheValue("backgroundColor",""))}return t.unsetCache("visibleStyle"),n.unsetCache("visibleStyle"),n.unsafe("excludeResource",yi.NODE_RESOURCE.BOX_SPACING),{parent:n,renderAs:n,outputAs:this.application.renderNode(new gi(i,n,e.FRAME,4096,n.children))}}}var Ei=squared.base.LayoutUI;const{util:Si}=squared.lib,{constant:Ri}=squared.base.lib;class Ii extends squared.base.ExtensionUI{is(t){return t.naturalElement&&(t.documentBody||t.contentBoxWidth>0||t.contentBoxHeight>0)}condition(t){const e=t.filter(t=>!t.pageFlow&&t.leftTopAxis&&t.left>=0&&t.right>=0);if(e.length){const i=t.paddingTop+(t.documentBody?t.marginTop:0),o=t.paddingRight+(t.documentBody?t.marginRight:0),a=t.paddingBottom+(t.documentBody?t.marginBottom:0),r=t.paddingLeft+(t.documentBody?t.marginLeft:0),s=new Set;let l=!1,c=!1;for(const n of e){const e="fixed"===n.css("position");n.hasPX("left")?n.left>=0&&n.left<r&&s.add(n):n.hasPX("right")&&n.right>=0&&(e||n.right<o||t.documentBody&&t.hasPX("width"))?(s.add(n),l=!0):n.rightAligned?n.marginRight<0&&(t.documentRoot||Si.aboveRange(n.linear.right,t.bounds.right))&&s.add(n):n.marginLeft<0&&(t.documentRoot||Si.belowRange(n.linear.left,t.bounds.left))&&s.add(n),n.hasPX("top")?n.top>=0&&n.top<i&&s.add(n):n.hasPX("bottom")&&n.bottom>=0&&(e||n.bottom<a||t.documentBody&&t.hasPX("height"))&&(s.add(n),c=!0)}if(s.size)return t.data(n.DELEGATE_FIXED,Ri.STRING_BASE.EXT_DATA,{children:Array.from(s),right:l,bottom:c}),!0}return!1}processNode(t,i){const o=t.data(n.DELEGATE_FIXED,Ri.STRING_BASE.EXT_DATA);if(o){const a=this.controller.createNodeWrapper(t,i,o.children);t.documentBody&&(o.right||o.bottom)?(a.cssApply({width:"auto",height:"auto",display:"block",float:"none"}),o.right&&a.setLayoutWidth("match_parent"),o.bottom&&a.setLayoutHeight("match_parent")):t.pageFlow||t.resetBox(30,a);for(const e of o.children){const i=e.autoMargin;let n=!1,o=!1;e.hasPX("top")&&(e.modifyBox(2,t.borderTopWidth),n=!0),e.hasPX("bottom")&&(!n||i.top||i.topBottom)&&e.modifyBox(8,t.borderBottomWidth),e.hasPX("left")&&(e.modifyBox(16,t.borderLeftWidth),o=!0),e.hasPX("right")&&(!o||i.left||i.leftRight)&&e.modifyBox(4,t.borderRightWidth)}const r=t.data(n.DELEGATE_MAXWIDTHHEIGHT,Ri.STRING_BASE.EXT_DATA);if(r){r.container&&(r.width&&(a.css("maxWidth",t.css("maxWidth")),a.setLayoutWidth("0px"),a.contentBoxWidth=t.contentBoxWidth,t.setLayoutWidth("wrap_content")),r.height&&(a.css("maxHeight",t.css("maxHeight")),a.setLayoutHeight("0px"),a.contentBoxHeight=t.contentBoxHeight,t.setLayoutHeight("wrap_content")))}return this.subscribers.add(a),{parent:a,renderAs:a,outputAs:this.application.renderNode(new Ei(i,a,e.CONSTRAINT,32,a.children))}}}postConstraints(t){t.each(t=>{t.constraint.horizontal||t.anchor("left","parent"),t.constraint.vertical||t.anchor("top","parent")})}}var _i=squared.base.LayoutUI;const{constant:xi}=squared.base.lib;class wi extends squared.base.ExtensionUI{is(t){return!t.inputElement}condition(t,e){let i=!1,o=!1;return t.support.maxWidth||isNaN(t.width)||!t.hasPX("maxWidth")||e.hasAlign(256)||(i=!0),!t.support.maxHeight&&!isNaN(t.height)&&t.hasPX("maxHeight")&&e.hasHeight&&(o=!0),!(!i&&!o)&&(t.data(n.DELEGATE_MAXWIDTHHEIGHT,xi.STRING_BASE.EXT_DATA,{width:i,height:o}),!0)}processNode(t,i){const o=t.data(n.DELEGATE_MAXWIDTHHEIGHT,xi.STRING_BASE.EXT_DATA);if(o){const n=i.layoutConstraint?i:this.controller.createNodeWrapper(t,i,void 0,at.getControlName(e.CONSTRAINT,t.localSettings.targetAPI),e.CONSTRAINT);if(o.width&&(t.setLayoutWidth("0px"),n.setLayoutWidth("match_parent"),i.layoutElement)){const e=t.autoMargin;e.horizontal=!1,e.left=!1,e.right=!1,e.leftRight=!1}if(o.height&&(t.setLayoutHeight("0px"),n.setLayoutHeight("match_parent"),i.layoutElement)){const e=t.autoMargin;e.vertical=!1,e.top=!1,e.bottom=!1,e.topBottom=!1}if(o.container=n,i!==n)return{parent:n,renderAs:n,outputAs:this.application.renderNode(new _i(i,n,n.containerType,4096,n.children))}}}}var vi=squared.base.LayoutUI;squared;class Ni extends squared.base.ExtensionUI{is(t){return!t.pageFlow}condition(t,e){if(e.naturalElement&&e.documentRoot){const i=e.box,n=t.linear;return Math.ceil(n.left)<Math.floor(i.left)&&(t.left<0||t.marginLeft<0||!t.hasPX("left")&&t.right>0)||Math.floor(n.right)>Math.ceil(i.right)&&(t.left>0||t.marginLeft>0||!t.hasPX("left")&&t.right<0)||Math.ceil(n.top)<Math.floor(i.top)&&(t.top<0||t.marginTop<0||!t.hasPX("top")&&t.bottom>0)||Math.floor(n.bottom)>Math.ceil(i.bottom)&&(t.top>0||t.marginTop>0||!t.hasPX("top")&&t.bottom<0)&&e.hasPX("height")}return!1}processNode(t,i){const n=this.controller.createNodeWrapper(t,i);return{parent:n,renderAs:n,outputAs:this.application.renderNode(new vi(i,n,e.FRAME,4096,n.children)),include:!0}}}var Ci=squared.base.LayoutUI;const Li=squared.lib.css,{constant:Pi}=squared.base.lib;function Oi(t,e){return t.pageFlow?t===e.firstChild&&t.inlineFlow&&!t.centerAligned&&!t.rightAligned&&t.marginLeft<0&&Math.abs(t.marginLeft)<=e.marginLeft+e.paddingLeft&&!e.some(t=>t.multiline):t.absoluteParent===e&&(t.left<0||!t.hasPX("left")&&t.right<0)}class ki extends squared.base.ExtensionUI{is(t){return this.application.userSettings.supportNegativeLeftTop&&!t.documentRoot&&"hidden"!==t.css("overflowX")}condition(t){return t.some(e=>Oi(e,t))}processNode(t,i){const o=t.filter(e=>Oi(e,t)),a=this.controller.createNodeWrapper(t,i,o,at.getControlName(e.CONSTRAINT,t.localSettings.targetAPI),e.CONSTRAINT);t.marginTop>0&&(a.modifyBox(2,t.marginTop),t.modifyBox(2)),t.marginBottom>0&&(a.modifyBox(8,t.marginBottom),t.modifyBox(8));let r,s=NaN,l=NaN;for(const t of o)t.pageFlow?((isNaN(s)||t.linear.left<s)&&(s=t.linear.left),r=t):t.hasPX("left")?t.left<0&&(isNaN(s)||t.linear.left<s)&&(s=t.linear.left):t.right<0&&(isNaN(l)||t.linear.right>l)&&(l=t.linear.right);if(a.inherit(t,"styleMap"),!isNaN(s)){let e=t.linear.left-s;if(e>0){t.modifyBox(16,e);for(const t of o)!t.pageFlow&&t.left<0&&t.css("left",Li.formatPX(t.left+e),!0)}else{for(const e of o)!e.pageFlow&&e.left<0&&e.css("left",Li.formatPX(t.marginLeft+e.left),!0);e=Math.abs(e)}t.hasPX("width",!1)?a.cssPX("width",(t.marginLeft>0?t.marginLeft:0)+e,!1,!0):t.hasPX("width")&&a.css("width","auto",!0)}if(!isNaN(l)){let e=l-t.linear.right;e>t.marginRight?t.modifyBox(4,e-=t.marginRight):e=0;const i=t.linear.right+e;t.marginRight>0&&(e+=t.marginRight),e>0&&(t.hasPX("width",!1)||!t.blockStatic&&!t.hasPX("width"))&&a.css(a.hasPX("width")?"width":"minWidth",Li.formatPX(t.actualWidth+e),!0);for(const t of o)t.right<0&&t.css("right",Li.formatPX(i-t.linear.right),!0)}return this.subscribers.add(a),a.data(n.DELEGATE_NEGATIVEX,Pi.STRING_BASE.EXT_DATA,{offsetLeft:t.marginLeft+t.paddingLeft,firstChild:r,nextSibling:t}),{parent:a,renderAs:a,outputAs:this.application.renderNode(new Ci(i,a,a.containerType,4104,a.children))}}postBaseLayout(t){const e=t.data(n.DELEGATE_NEGATIVEX,Pi.STRING_BASE.EXT_DATA);if(e){let i=e.firstChild;i&&((i=i.ascend(e=>e!==t,t,"outerWrapper").pop()||i).anchorParent(c.HORIZONTAL,"packed"),i.anchorParent(c.VERTICAL,"packed"),i.modifyBox(16,e.offsetLeft),Wt.setConstraintDimension(i),i.positioned=!0);const n=e.nextSibling.ascend(e=>e!==t,t,"outerWrapper").pop()||e.nextSibling;n.anchorParent(c.HORIZONTAL,"packed"),n.anchorParent(c.VERTICAL,"packed"),Wt.setConstraintDimension(n),n.positioned=!0}}}var Xi=squared.base.LayoutUI;squared;const Bi=t=>!t.documentParent.layoutElement&&!t.display.startsWith("table");class Mi extends squared.base.ExtensionUI{is(t){return t.pageFlow}condition(t,e){return t.has("width",4,{not:"100%"})&&!e.layoutConstraint&&(t.documentRoot||t.hasPX("height")||(e.layoutVertical||t.onlyChild)&&(e.blockStatic||e.hasPX("width")))?Bi(t):!(!t.has("height",4,{not:"100%"})||!(t.documentRoot||e.hasHeight&&t.onlyChild))&&Bi(t)}processNode(t,i){const n=this.controller.createNodeWrapper(t,i);return t.percentWidth?(n.css("display","block"),n.setLayoutWidth("match_parent"),t.setLayoutWidth("0px")):n.setLayoutWidth("wrap_content"),t.percentHeight?(n.setLayoutHeight("match_parent"),t.setLayoutHeight("0px")):n.setLayoutHeight("wrap_content"),{parent:n,renderAs:n,outputAs:this.application.renderNode(new Xi(i,n,e.CONSTRAINT,4096,n.children)),include:!0}}postConstraints(t){const e=t.outerWrapper;e&&t.resetBox(30,e)}}const Di=squared.base.NodeUI,Gi=squared.base.lib.enumeration,Wi=t=>t.name?t.name.trim():"";class Hi extends squared.base.ExtensionUI{is(t){return t.is(e.RADIO)}condition(t){return""!==Wi(t.element)&&!t.positioned}processNode(t,i){const n=Wi(t.element),a=[],r=[],s=[];i.each(i=>{let o;if(i.renderAs){const e=i.renderAs;e!==t&&(o=i),i=e}if(i.is(e.RADIO)&&!i.rendered&&Wi(i.element)===n)a.push(i),s.push(i);else{if(!a.length||i.visible||i.is(e.RADIO))return;a.push(i)}o&&r.push(o)});for(let t=a.length-1;t>=0;t--)if(s.includes(a[t])){a.splice(t+1);break}if(a.length>1){const n=this.controller.createNodeGroup(t,a,i,!0),s=o.RADIOGROUP;Di.linearData(a).linearX?(n.addAlign(136),n.android("orientation",c.HORIZONTAL)):(n.addAlign(16),n.android("orientation",c.VERTICAL)),n.setControlType(s,e.LINEAR),n.inherit(t,"alignment"),n.baseline&&(n.css("verticalAlign","middle"),n.baseline=!1),n.exclude(Gi.NODE_RESOURCE.ASSET),n.render(!t.dataset.use&&t.dataset.target?this.application.resolveTarget(t.dataset.target):i);for(const t of r)t.hide();return this.subscribers.add(n),{renderAs:n,outputAs:{type:1,node:n,controlName:s},parent:n,complete:!0}}}postBaseLayout(t){t.renderEach(e=>{e.naturalElement&&e.element.checked&&t.android("checkedButton",e.documentId)})}}const Vi=squared.lib.css,Fi=squared.base.lib.enumeration;class zi extends squared.base.ExtensionUI{is(t){return t.length>0}condition(t){return t.overflowX&&t.hasPX("width")||t.overflowY&&t.hasHeight&&t.hasPX("height")||this.included(t.element)}processNode(t,i){const n=[],r=[],s=o.HORIZONTAL_SCROLL,l=t.localSettings.targetAPI<29?o.VERTICAL_SCROLL:a.VERTICAL_SCROLL;if(t.overflowX&&t.overflowY)n.push(s,l);else if(t.overflowX)n.push(s);else if(t.overflowY)n.push(l);else{let e=0;t.hasPX("width")&&(e|=8,n.push(s)),t.hasHeight&&t.hasPX("height")&&(e|=16,n.push(l)),t.overflow=e}if(n.includes(s)){const e=[];let i=t.actualWidth-t.contentBoxWidth,o=!0,a=0;if(t.each(t=>{if(t.textElement&&"nowrap"!==t.css("whiteSpace"))e.push(t);else{const e=t.actualWidth;if(e<=i)return;e>a&&(a=e)}o=!1}),o?n.shift():a>i&&(i=a),n.length)for(const t of e)t.css("maxWidth",Vi.formatPX(i),!0)}const d=n.length;if(d>0){for(let o=0;o<d;o++){let a;0===o?((a=this.application.createNode(t.element)).inherit(t,"base","initial","styleMap"),i.appendTry(t,a)):((a=this.application.createNode()).inherit(t,"base"),a.exclude(Fi.NODE_RESOURCE.BOX_STYLE),r[0].innerWrapped=a,a.outerWrapper=r[0]),a.setControlType(n[o],e.BLOCK),a.exclude(Fi.NODE_RESOURCE.ASSET),a.resetBox(480),r.push(a)}for(let e=0;e<d;e++){const n=r[e];switch(n.controlName){case l:t.setLayoutHeight("wrap_content"),n.setLayoutHeight(Vi.formatPX(t.actualHeight)),n.android("scrollbars",c.VERTICAL),n.cssApply({width:1===d&&t.css("width")||"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case s:t.setLayoutWidth("wrap_content"),n.setLayoutWidth(Vi.formatPX(t.actualWidth)),n.android("scrollbars",c.HORIZONTAL),n.cssApply({height:1===d&&t.css("height")||"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"})}n.render(0===e?!t.dataset.use&&t.dataset.target?this.application.resolveTarget(t.dataset.target):i:r[e-1]),n.unsetCache(),this.application.addLayoutTemplate(n.renderParent||i,n,{type:1,node:n,controlName:n.controlName})}return t.overflow=0,t.exclude(Fi.NODE_RESOURCE.BOX_STYLE),t.resetBox(30,r[0]),(i=r.pop()).innerWrapped=t,t.parent=i,t.outerWrapper=i,{parent:i}}}}var Ui={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},qi={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","top","right","bottom","drawable","width","height","gravity"],">":{shape:Ui.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const ji={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},Yi={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":!0,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:ji.path},"#":"include"}};var Zi={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:ji.path},"#":"include"}};const{color:Ki,css:$i,math:Ji,regex:Qi,util:tn,xml:en}=squared.lib,nn=squared.base.lib.enumeration;function on(t,e=-1,i=!1){const{style:n,color:o}=t,a=fn(t.width),r=Tn(o);switch(n){case"solid":break;case"dotted":r.dashWidth=$i.formatPX(a),r.dashGap=r.dashWidth;break;case"dashed":{let t,e;switch(a){case 1:case 2:e=(t=3*a)-1;break;case 3:t=6,e=3;break;default:t=2*a,e=4}r.dashWidth=$i.formatPX(t),r.dashGap=$i.formatPX(e);break}case"inset":case"outset":case"groove":case"ridge":const t=o.rgba;let s=1;if(1===a)"inset"!==n&&"outset"!==n||(s=.5);else{const o=t.r===t.g&&t.g===t.b;let a=0;if("ridge"===n?(i=!i,a+=.25):"groove"===n?a+=.25:o?"inset"===n&&(i=!i):"outset"===n&&(i=!i),i)switch(e){case 0:case 3:e=1;break;case 1:case 2:e=0}switch(e){case 0:case 3:o&&(s=.5+a);break;case 1:case 2:s=o?.75+a:-.75}}if(1!==s){const e=Ki.reduceRGBA(t,s,o.valueAsRGBA);if(e)return Tn(e)}}return r}function an(t,e=-1,i=!1,n=!1){let o;if(t)if(sn(t.style)){const a=parseFloat(t.width);(o=on(t,e,!n)).width=$i.formatPX(n?2*Math.ceil(a/2):i?Math.ceil(a/2):fn(t.width))}else(o=on(t)).width=$i.formatPX(fn(t.width));return o}function rn(t){const e=mn(t,!1);return""!==e?{color:e}:void 0}function sn(t,e=0){switch(t){case"groove":case"ridge":case"inset":case"outset":return 1!==e;default:return!1}}function ln(t,e,i,n,o,a,r=0,s){const l=fn(e.width),c=Math.max(1,Math.floor(l/3)),d=r>0?$i.formatPX(r):"";let h="-"+$i.formatPX(c+r+1);t.push({top:i?d:h,right:n?d:h,bottom:o?d:h,left:a?d:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:$i.formatPX(c)},on(e)),corners:s}});const u=l-c+r,p=$i.formatPX(u);h="-"+$i.formatPX(u+1),t.push({top:i?p:h,right:n?p:h,bottom:o?p:h,left:a?p:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:$i.formatPX(c)},on(e)),corners:s}})}function cn(t,e,i){return-1===t.indexOf(" ")&&-1!==e.indexOf(" ")?Qi.CHAR.LOWERCASE.test(t)?("initial"===t?i:t)+" 0px":i+" "+t:"initial"===t?"0px":t}function dn(t,e=21,i){const n=t.type,o={type:n,item:!1},a=e>=21;switch(n){case"conic":{const e=t.center;o.type="sweep",a?(o.centerX=""+2*e.left,o.centerY=""+2*e.top):(o.centerX=$i.formatPercent(e.leftAsPercent),o.centerY=$i.formatPercent(e.topAsPercent));break}case"radial":{const{center:e,radius:i}=t;a?(o.gradientRadius=""+i,o.centerX=""+e.left,o.centerY=""+e.top):(o.gradientRadius=$i.formatPX(i),o.centerX=$i.formatPercent(e.leftAsPercent),o.centerY=$i.formatPercent(e.topAsPercent));break}case"linear":{const{angle:e,angleExtent:n,dimension:a}=t;let r=n.x,s=n.y;if(e<=90){const t=a.height;s+=t,o.startX="0",o.startY=""+t}else if(e<=180)o.startX="0",o.startY="0";else if(e<=270){const t=a.width;r+=t,o.startX=""+t,o.startY="0"}else{const{width:t,height:e}=a;r+=t,s+=e,o.startX=""+t,o.startY=""+e}o.endX=Ji.truncate(r,i),o.endY=Ji.truncate(s,i);break}}const r=t.colorStops;if(a)o.item=An(r);else{const t=r.length;o.startColor=mn(r[0].color),o.endColor=mn(r[t-1].color),t>2&&(o.centerColor=mn(r[Math.floor(t/2)].color))}return o}function hn(t,e,i,n,o){if(o){const i=e.orientation;if("left"===t||"right"===t){if($i.isPercent(4===i.length?i[1]:i[0]))return("left"===t?e.leftAsPercent:e.rightAsPercent)*(n.width-o.width)}else{if($i.isPercent(4===i.length?i[3]:i[1]))return("top"===t?e.topAsPercent:e.bottomAsPercent)*(n.height-o.height)}}return e[t]}function un(t,e,i=!0){const n=[{"xmlns:android":l.android,item:[]}],o=!i&&rn(t.backgroundColor);if(o&&n[0].item.push({shape:{"android:shape":"rectangle",solid:o}}),e)for(const t of e)n[0].item.push(t.gradient?{shape:{"android:shape":"rectangle",gradient:t.gradient}}:t);return n}function pn(t,e,i){S.addTheme({name:t,parent:e,items:{"android:windowBackground":i,"android:windowFullscreen":"true","android:fitsSystemWindows":"true"}})}function gn(t){const e=fn(t.width);return"double"===t.style&&2===e?3:e}function mn(t,e=!0){const i=S.addColor(t,e);return""!==i?"@color/"+i:""}const fn=t=>Math.round(parseFloat(t)),Tn=t=>({color:mn(t),dashWidth:"",dashGap:""}),yn=t=>"groove"===t.style||"ridge"===t.style||"double"===t.style&&fn(t.width)>1,bn=(t,e)=>`${t}px ${e}px`;function An(t,e){const i=[];for(const n of t)i.push({color:mn(n.color),offset:Ji.truncate(n.offset,e)});return i}function En(t,e,i=0,n=0,o){return o?(i=Ji.truncate(i,o),n=Ji.truncate(n,o),t=Ji.truncate(i+t,o),e=Ji.truncate(n+e,o)):(t+=i,e+=n),`M${i},${n} ${t},${n} ${t},${e} ${i},${e} Z`}class Sn extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={drawOutlineAsInsetBorder:!0},this.eventOnly=!0}afterResources(){const t=this.application,e=t.userSettings;function i(t,i){let n=S.insertStoredAsset("drawables",t.containerName.toLowerCase()+"_"+t.controlId,i);""!==n&&(n="@drawable/"+n,t.documentBody&&!o(t)&&(""!==t.backgroundColor||t.visibleStyle.backgroundImage&&t.visibleStyle.backgroundRepeat)?pn(e.manifestThemeName,e.manifestParentThemeName,n):t.android("background",n,!1))}function o(t){const i=t.actualParent;if(!i.visible){const t=i.android("background");if(""!==t)return pn(e.manifestThemeName,e.manifestParentThemeName,t),!0}return!1}this._resourceSvgInstance=this.controller.localSettings.svg.enabled?t.builtInExtensions[n.RESOURCE_SVG]:void 0;const a=this.options.drawOutlineAsInsetBorder;for(const n of t.processing.cache){const t=n.data(S.KEY_NAME,"boxStyle");if(t)if(n.hasResource(nn.NODE_RESOURCE.BOX_STYLE)){if(n.inputElement){const e=n.companion;if(e&&!e.visible&&"LABEL"===e.tagName){const i=e.data(S.KEY_NAME,"boxStyle");i&&i.backgroundColor&&(t.backgroundColor=i.backgroundColor)}}const o=this.getDrawableImages(n,t),r=t.outline;let[s,l]=this.getDrawableBorder(t,void 0,o,a&&r?gn(r):0);const c=void 0===s&&void 0===l;if(r&&(a||c)){const[e,i]=this.getDrawableBorder(t,r,c?o:void 0,void 0,!c);e?void 0===s&&(s=e):i&&(l?l[0].item=l[0].item.concat(i[0].item):l=i)}if(s)i(n,en.applyTemplate("shape",Ui,s));else if(l)i(n,en.applyTemplate("layer-list",qi,l));else if(t.backgroundColor){const i=mn(t.backgroundColor,!1);if(""!==i)if(n.documentBody)pn(e.manifestThemeName,e.manifestParentThemeName,i);else{const e=n.data(S.KEY_NAME,"fontStyle");e?e.backgroundColor=t.backgroundColor:n.android("background",i,!1)}}}else n.documentBody&&o(n)}this._resourceSvgInstance=void 0}getDrawableBorder(t,e,i,n=0,o=!1){const a=[,,,,],r=[,,,,],s=o?void 0:function(t){if(t){const e=t.length;if(1===e)return{radius:t[0]};{let i;if(8===e){i=[];for(let n=0;n<e;n+=2)i.push($i.formatPX((parseFloat(t[n])+parseFloat(t[n+1]))/2))}else i=t;const n=["topLeft","topRight","bottomRight","bottomLeft"],o={};let a=!1;const r=i.length;for(let t=0;t<r;t++){const e=i[t];"0px"!==i[t]&&(o[n[t]+"Radius"]=e,a=!0)}if(a)return o}}}(t.borderRadius),c=n>0?$i.formatPX(n):"";let d,h,u,p,g=!0,m=!0;if(e){h=e;for(let t=0;t<4;t++)a[t]=e,r[t]=!0}else{a[0]=t.borderTop,a[1]=t.borderRight,a[2]=t.borderBottom,a[3]=t.borderLeft;for(let t=0;t<4;t++){const e=a[t];e?(g&&h&&((g=tn.isEqual(h,e))||(m=!1)),h=e,r[t]=!0):(r[t]=!1,m=!1)}}if(m&&(d=h),d&&!sn(d.style,fn(d.width))&&!("double"===d.style&&parseInt(d.width)>1)||void 0===h&&(s||i&&i.length)){const e=!!d&&an(d);i&&i.length||n>0||o?(p=un(t,i,o),(s||e)&&p[0].item.push({top:c,right:c,left:c,bottom:c,shape:{"android:shape":"rectangle",corners:s,stroke:e}})):u=function(t,e,i){return[{"xmlns:android":l.android,"android:shape":"rectangle",stroke:t,solid:e,corners:i}]}(e,!o&&rn(t.backgroundColor),s)}else if(h)if(p=un(t,i,o),g&&!sn(h.style)){const t=fn(h.width);if("double"===h.style&&t>1)ln(p[0].item,h,r[0],r[1],r[2],r[3],n,s);else{const e="-"+$i.formatPX(t+n+1);p[0].item.push({top:r[0]?c:e,right:r[1]?c:e,bottom:r[2]?c:e,left:r[3]?c:e,shape:{"android:shape":"rectangle",corners:s,stroke:an(h)}})}}else{function f(t,e){const i=a[e];if(i){const o=fn(i.width);if("double"===i.style&&o>1)ln(t.item,i,0===e,1===e,2===e,3===e,n,s);else{const a=o>1&&yn(i);if(a){const r="-"+$i.formatPX(o+n+1);t.item.push({top:0===e?"":r,right:1===e?"":r,bottom:2===e?"":r,left:3===e?"":r,shape:{"android:shape":"rectangle",stroke:an(i,e,a,!0)}})}const r="-"+$i.formatPX((a?Math.ceil(o/2):o)+n+1);t.item.push({top:0===e?c:r,right:1===e?c:r,bottom:2===e?c:r,left:3===e?c:r,shape:{"android:shape":"rectangle",corners:s,stroke:an(i,e,a)}})}}}f(p[0],0),f(p[0],3),f(p[0],2),f(p[0],1)}return[u,p]}getDrawableImages(t,i){const n=i.backgroundImage,o=t.extracted;if((n||o)&&t.hasResource(nn.NODE_RESOURCE.IMAGE_SOURCE)){const p=this.resource,g=[],{width:m,height:f}=t.bounds,T=i.backgroundPositionX.split(Qi.XML.SEPARATOR),y=i.backgroundPositionY.split(Qi.XML.SEPARATOR),b=[],A=[],E=[],R=[];let I=i.backgroundRepeat.split(Qi.XML.SEPARATOR),_=i.backgroundSize.split(Qi.XML.SEPARATOR),x=0,w=!0;if(n){const e=this._resourceSvgInstance,i=n.length;function a(t){for(;t.length<i;)t=t.concat(t.slice(0));return t.length=i,t}I=a(I),_=a(_);let o=!1;for(let a=0;a<i;a++){let i=n[a],r=!1;if("string"==typeof i){if("initial"!==i){if(e){const[n,o]=e.createSvgElement(t,i);if(n&&o){const i=e.createSvgDrawable(t,o);if(""!==i){b[x]=i,E[x]=!0;const e=t.data(S.KEY_NAME,"svgViewBox")||{width:o.width.baseVal.value,height:o.height.baseVal.value};if(!t.svgElement){let{width:t,height:i}=e;if(t>m||i>f){const e=t/m,n=i/f;e>n?e>1?(t=m,i/=e):i=f*(n/e):n>1?(i=f,t/=n):t=m*(e/n)}e.width=t,e.height=i}A[x]=e,r=!0}n.removeChild(o)}}if(!r){const t=Qi.CSS.URL.exec(i);if(t)if(t[1].startsWith("data:image")){const e=p.getRawData(t[1]);e&&e.base64&&(b[x]=e.filename.substring(0,e.filename.lastIndexOf(".")),A[x]=e,p.writeRawImage(e.filename,e.base64),r=!0)}else i=tn.resolvePath(t[1]),b[x]=S.addImage({mdpi:i}),""!==b[x]&&(A[x]=p.getImage(i),r=!0)}}}else if(i.colorStops.length>1){const e=dn(i,t.localSettings.targetAPI);e&&(b[x]=e,A[x]=i.dimension,r=!0)}if(r){const e=T[a]||T[a-1],i=y[a]||y[a-1];R[x]=$i.getBackgroundPosition(cn(e,i,"left")+" "+cn(i,e,"top"),t.actualDimension,t.fontSize,A[x],_[a]),x++}else I[a]=void 0,_[a]=void 0,o=!0}o&&(I=tn.flatArray(I),_=tn.flatArray(_))}if(o){0===x&&(I.length=0,_.length=0);const e=o.filter(t=>t.visible&&(t.imageElement||"INPUT_IMAGE"===t.containerName));for(let i=0;i<e.length;i++){const n=e[i],o=p.addImageSrc(n.element);if(""!==o){const e=n.bounds;b[x]=o,I[x]="no-repeat",_[x]=bn(n.actualWidth,n.actualHeight),R[x]=$i.getBackgroundPosition("INPUT_IMAGE"===n.containerName?bn(0,0):bn(e.left-t.bounds.left+t.borderLeftWidth,e.top-t.bounds.top+t.borderTopWidth),t.actualDimension,t.fontSize,e),A[x]=p.getImage(o),x++}}}for(let n=x-1;n>=0;n--){const o=b[n],a=R[n],p=_[n],T={};let y=A[n],x=0,v=0;y&&(y.width&&y.height?(x=y.width,v=y.height):y=void 0);let N=0,C=0,L=0,P=0,O=!0,k=!0,X=!0;if("string"==typeof o){function r(t,e,i=!1){(2===a.orientation.length||i)&&(a[t]=0),a[e]=0}function s(){D="",G="",W="",A=!1,t.documentBody&&(t.visibleStyle.backgroundRepeat=!0)}const l="@drawable/"+o;let g=I[n];if(-1!==g.indexOf(" ")){const[t,e]=g.split(" ");g="no-repeat"===t?"no-repeat"===e?"no-repeat":"repeat-y":"no-repeat"===e?"repeat-x":"repeat"}else"space"!==g&&"round"!==g||(g="repeat");const b=!0===E[n];let A="repeat"===g,S="",R="";if(A||"repeat-x"===g){if(y)for(;a.left>0;)a.left-=x;else a.left=0;a.right=0,O=!0}else switch(a.horizontal){case"left":case"0%":r("left","right"),S=t.localizeString("left");break;case"center":case"50%":r("left","right",!0),S=c.CENTER_HORIZONTAL;break;case"right":case"100%":r("right","left"),S=t.localizeString("right");break;default:S+=t.localizeString(0!==a.right?"right":"left")}if(A||"repeat-y"===g){if(y)for(;a.top>0;)a.top-=v;else a.top=0;a.bottom=0,k=!0}else switch(a.vertical){case"top":case"0%":r("top","bottom"),R+="top";break;case"center":case"50%":r("top","bottom",!0),R+=c.CENTER_VERTICAL;break;case"bottom":case"100%":r("bottom","top"),R+="bottom";break;default:R+=0!==a.bottom?"bottom":"top"}let _,B=0,M=0,D="",G="",W="",H="";if(A)D="repeat";else switch(g){case"repeat-x":t.documentBody?y&&x<m?G="repeat":S="fill_horizontal":(G="repeat",!t.blockStatic&&x>m&&(B=x));break;case"repeat-y":t.documentBody?y&&v<f?W="repeat":R="fill_vertical":(W="repeat",v>f&&(M=v));break;default:D="disabled"}if(y){if(""!==S&&"repeat"===W&&x<m){function d(){""===R&&""!==S&&S!==t.localizeString("left")&&t.renderChildren.length&&(W="disabled"),H=S,S="",G="disabled"}switch(S){case"start":case"left":a.left+=t.borderLeftWidth,a.right=0,d();break;case"end":case"right":a.left=0,a.right+=t.borderRightWidth,d();break;case c.CENTER_HORIZONTAL:a.left=0,a.right=0,d()}}if(""!==R&&"repeat"===G&&v<f){function h(){""===S&&""!==R&&"top"!==R&&t.renderChildren.length&&(G="disabled"),H+=(""!==H?"|":"")+R,R="",W="disabled"}switch(R){case"top":a.top+=t.borderTopWidth,a.bottom=0,h();break;case"bottom":a.top=0,a.bottom+=t.borderBottomWidth,h();break;case c.CENTER_VERTICAL:a.top=0,a.bottom=0,h()}}}switch(p){case"auto":case"auto auto":case"initial":case"contain":break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(!A&&"repeat"!==G&&"repeat"!==W&&(x<m||v<f)){const t=x/m,e=v/f;t<e?(B=m,M=f*(e/t)):t>e&&(B=m*(t/e),M=f)}w=!1;break;case"cover":s();break;case"round":_="fill",S="fill_horizontal",R="fill_vertical",s();break;default:p.split(" ").forEach((e,i)=>{"100%"===e?0===i?S="fill_horizontal":R="fill_vertical":A||"auto"===e||(0===i?B=t.parseUnit(e,"width",!1):M=t.parseUnit(e,"height",!1))})}if(y){function u(){S="",R="",a.top=0,a.right=0,a.bottom=0,a.left=0,w=!1,X=!1}x+a.left>=m&&(!t.blockStatic||t.hasPX("width",!1))&&(G="","repeat"===D&&(W="repeat",D="",A=!1)),v+a.top>=f&&!t.documentBody&&!t.has("height",4)&&(W="","repeat"===D&&(G="repeat",D="",A=!1));const n=()=>w&&"fill_horizontal"!==S&&"repeat"!==D&&""===G,o=()=>w&&"fill_vertical"!==R&&"repeat"!==D&&""===W;switch(p){case"cover":{const t=x/m,e=v/f;if(t<e){if(B=m,P=0,(M=f*(e/t))>f){if(N=f-M,a.topAsPercent>0){const t=Math.round(N*a.topAsPercent);t+v<f&&(N=t)}}else N=0;_=""}else if(t>e){if(M=f,(B=m*(t/e))>m){if(P=m-B,a.leftAsPercent>0){const t=Math.round(P*a.leftAsPercent);t+x<m&&(P=t)}}else P=0;N=0,_=""}else _="fill";u();break}case"contain":{const t=x/m,e=v/f;t>e?(_="fill_horizontal|center_vertical",B=0,M=f*(e/t)):t<e?(_="fill_vertical|center_horizontal",B=m*(t/e),M=0):_="fill",u();break}default:0===B&&M>0&&n()&&(B=x*M/v),0===M&&B>0&&o()&&(M=v*B/x)}if(i.backgroundClip){const{top:e,right:n,left:o,bottom:r}=i.backgroundClip;0===B?B=m:B+=t.contentBoxWidth,0===M?M=f:M+=t.contentBoxHeight,B-=o+n,M-=e+r,"right"===S||"end"===S?(a.right+=n,P=0):0!==a.right?C+=n:P+=o,"bottom"===R?(a.bottom+=r,N=0):0!==a.bottom?L+=r:N+=e,_="",S="",R="",X=!1}else 0===B&&0===M&&x<m&&v<f&&!b&&n()&&o()&&(B=x,M=v);if(X){if(!A&&i.backgroundOrigin){const t=i.backgroundOrigin;"repeat"!==G&&("right"===S||"end"===S?(a.right+=t.right,P=0):0!==a.leftAsPercent||0===a.rightAsPercent?0!==a.right?C-=t.left:P+=t.left:0!==a.right?C+=t.right:P-=t.right),"repeat"!==W&&("bottom"===R?(a.bottom+=t.bottom,N=0):0!==a.topAsPercent||0===a.bottomAsPercent?0!==a.bottom?L-=t.top:N+=t.top:0!==a.bottom?L+=t.bottom:N-=t.bottom)}if(!t.documentBody&&!t.is(e.IMAGE||b))if(w){let e=!1,i=!1;if(m<x&&(!t.has("width",2,{map:"initial",not:"100%"})&&(!t.blockStatic||!_||"center"!==_&&-1===_.indexOf(c.CENTER_HORIZONTAL))||!t.pageFlow)&&t.renderParent&&!t.renderParent.tableElement&&(B=m-(t.contentBox?t.contentBoxWidth:0),e=!0,"disabled"!==D))switch(a.horizontal){case"left":case"0px":G="repeat"}!(f<v)||t.has("height",2,{map:"initial",not:"100%"})&&t.pageFlow||(M=f-(t.contentBox?t.contentBoxHeight:0),i=!0),(e||i)&&(""!==H&&(H+="|"),H+=e&&i?"fill":e?"fill_horizontal":"fill_vertical")}else f<v&&!t.hasPX("height")&&0===t.length&&(M=f,H="",""===R&&(R="top"))}B>0&&(T.width=$i.formatPX(B)),M>0&&(T.height=$i.formatPX(M))}""===H&&"repeat"!==D&&(""!==G?""!==W||""!==R&&"top"!==R&&"fill_vertical"!==R||(H=R,R="",t.renderChildren.length&&(G="")):""===W||""!==S&&"start"!==S&&"left"!==S&&"fill_horizontal"!==S||(H=S,S="",t.renderChildren.length&&(W=""))),void 0===_&&(S===c.CENTER_HORIZONTAL&&R===c.CENTER_VERTICAL?y&&x<=m&&v<=f?(H+=(""!==H?"|":"")+"center",_=""):_="center":"fill_horizontal"===S&&"fill_vertical"===R?_="fill":(_="",""!==S&&(_+=S),""!==R&&(_+=(_?"|":"")+R)),"fill_horizontal"===S&&(S=""),"fill_vertical"===R&&(R="")),t.documentBody&&"repeat"!==G&&""!==_&&""===H&&"cover"!==p&&"contain"!==p?(T.gravity=_,T.drawable=l):("repeat"===D||""!==G||""!==W||""!==H&&""!==_||"cover"===p||"contain"===p||!w&&M>0&&"cover"!==p&&"contain"!==p)&&!b?(T.gravity=H,T.bitmap=[{src:l,gravity:_,tileMode:D,tileModeX:G,tileModeY:W}]):(T.gravity=_||H,T.drawable=l)}else if(o.item){let e,i;y?(e=Math.round(x),i=Math.round(v)):(e=Math.round(t.actualWidth),i=Math.round(t.actualHeight)),p.split(" ").some(t=>"100%"!==t&&$i.isLength(t,!0))&&(T.width=$i.formatPX(e),T.height=$i.formatPX(i));const r=S.insertStoredAsset("drawables",`${t.controlId}_gradient_${n+1}`,en.applyTemplate("vector",Zi,[{"xmlns:android":l.android,"xmlns:aapt":l.aapt,"android:width":T.width||$i.formatPX(e),"android:height":T.height||$i.formatPX(i),"android:viewportWidth":""+e,"android:viewportHeight":""+i,path:{pathData:En(e,i),"aapt:attr":{name:"android:fillColor",gradient:o}}}]));""!==r&&(T.drawable="@drawable/"+r,a.static&&(T.gravity="fill"))}else T.gradient=o,a.static&&(T.gravity="fill");if(T.drawable||T.bitmap||T.gradient){const e=t.bounds;0!==a.bottom?(T.bottom=$i.formatPX((k||!X?a.bottom:hn("bottom",a,0,e,y))+L),L=0):0!==a.top&&(T.top=$i.formatPX((k||!X?a.top:hn("top",a,0,e,y))+N),N=0),0!==a.right?(T.right=$i.formatPX((O||!X?a.right:hn("right",a,0,e,y))+C),C=0):0!==a.left&&(T.left=$i.formatPX((O||!X?a.left:hn("left",a,0,e,y))+P),P=0),0!==N&&(T.top=$i.formatPX(N)),0!==C&&(T.right=$i.formatPX(C)),0!==L&&(T.bottom=$i.formatPX(L)),0!==P&&(T.left=$i.formatPX(P)),g.push(T)}}return g}}}const{regex:Rn,util:In}=squared.lib,_n=S.STORED,xn=["android","app"],wn=/\dpx$/,vn=/:(\w+)="(-?[\d.]+px)"/;function Nn(t,e,i){for(const[n,o]of t.entries())if(n.startsWith(e)&&i===o)return n;return t.has(e)&&t.get(e)!==i?S.generateId("dimen",e):e}const Cn=t=>In.fromLastIndexOf(t,".");class Ln extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t=_n.dimens,e={};for(const t of this.application.session.cache)if(t.visible){const i=t.containerName.toLowerCase();void 0===e[i]&&(e[i]={});for(const n of xn){const o=t.namespace(n);for(const a in o){const r=o[a];if(wn.test(r)&&"text"!==a){const o=`${n},${a},${r}`;void 0===e[i][o]&&(e[i][o]=[]),e[i][o].push(t)}}}}for(const i in e){const n=e[i];for(const e in n){const[o,a,r]=e.split(Rn.XML.SEPARATOR),s=Nn(t,Cn(i)+"_"+In.convertUnderscore(a),r),l=n[e];for(const t of l)t[o](a,"@dimen/"+s);t.set(s,r)}}}afterFinalize(){if(this.controller.hasAppendProcessing()){const t=_n.dimens;for(const e of this.application.layouts){let i,n=e.content;for(;null!==(i=vn.exec(n));)if("text"!==i[1]){const e=i[2],o=Nn(t,"custom_"+In.convertUnderscore(i[1]),e);t.set(o,e),n=n.replace(i[0],i[0].replace(i[2],"@dimen/"+o))}e.content=n}}}}const{regex:Pn,util:On}=squared.lib,kn=squared.base.lib.enumeration,Xn=S.STORED,Bn=/^(\w*?)(?:_(\d+))?$/,Mn=/"/g,Dn={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},Gn={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},Wn={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},Hn={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},Vn={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'};function Fn(t,e,i){const n=t.length;for(const o of e.split(";"))for(let e=0;e<n;e++){let a=-1,r="";const s=t[e];for(const t in s)if(t===o){a=e,r=t,e=n;break}if(-1!==a){t[a][r]=On.filterArray(t[a][r],t=>!i.includes(t)),0===t[a][r].length&&delete t[a][r];break}}}class zn extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:!1},this.eventOnly=!0}afterParseDocument(){const t=this.resource,e=t.userSettings,i=e.resolutionDPI,n="dp"===e.convertPixels,{fonts:o,styles:a}=Xn,r={},s={};for(const t of this.application.session.cache)t.data(S.KEY_NAME,"fontStyle")&&t.hasResource(kn.NODE_RESOURCE.FONT_STYLE)&&(void 0===r[t.containerName]&&(r[t.containerName]=[]),r[t.containerName].push(t));const l=Object.keys(Vn),c=l.length;for(const e in r){const a=[],d=r[e];for(let e of d){const r=Object.assign({},e.data(S.KEY_NAME,"fontStyle")),{id:s,companion:d}=e;d&&!d.visible&&"LABEL"===d.tagName&&(e=d),r.backgroundColor&&(r.backgroundColor=S.addColor(r.backgroundColor)),r.fontFamily&&r.fontFamily.replace(Mn,"").split(Pn.XML.SEPARATOR).some((i,n,a)=>{let s=(i=On.trimString(i,"'")).toLowerCase(),l=!1;if(!this.options.disableFontAlias&&Wn[s]&&(s=this.options.systemDefaultFont||Wn[s]),Dn[s]&&e.localSettings.targetAPI>=Dn[s]||!this.options.disableFontAlias&&Gn[s]&&e.localSettings.targetAPI>=Dn[Gn[s]])r.fontFamily=s,l=!0;else if(r.fontStyle&&r.fontWeight){let e=!0;if(void 0===t.getFont(i,r.fontStyle,r.fontWeight))if(t.getFont(i,r.fontStyle))e=!1;else{if(n<a.length-1)return!1;n>0&&(s=(i=On.trimString(a[0],"'")).toLowerCase())}if(s=On.convertWord(s),e){const t=o.get(s)||{};t[i+"|"+r.fontStyle+"|"+r.fontWeight]=Hn[r.fontWeight]||r.fontWeight,o.set(s,t)}r.fontFamily="@font/"+s,l=!0}if(l){const t=r.fontWeight;return"normal"===r.fontStyle&&(r.fontStyle=""),"400"===t||e.localSettings.targetAPI<26?r.fontWeight="":parseInt(t)>500&&(r.fontStyle+=(r.fontStyle?"|":"")+"bold"),!0}return!1}),r.color=S.addColor(r.color);for(let t=0;t<c;t++){const e=l[t];let o=r[e];if(o){n&&"fontSize"===e&&(o=P(o,i,!0));const r=Vn[e]+o+'"';void 0===a[t]&&(a[t]={}),void 0===a[t][r]&&(a[t][r]=[]),a[t][r].push(s)}}}s[e]=a}const d={};for(const t in s){const e={};d[t]=e;const i=On.filterArray(s[t],t=>void 0!==t).sort((t,e)=>{let i=0,n=0,o=0,a=0;for(const e in t)i=Math.max(t[e].length,i),o+=t[e].length;for(const t in e)e[t]&&(n=Math.max(e[t].length,n),a+=e[t].length);return i!==n?i>n?-1:1:o!==a?o>a?-1:1:0});do{if(1===i.length){const t=i[0];for(const i in t){const n=t[i];n.length&&(e[i]=n)}i.length=0}else{const n={};for(let o=0;o<i.length;o++){const a={},s=i[o];for(const e in s){const l=s[e];if(0===l.length)continue;if(l.length===r[t].length){n[e]=l,i[o]={};break}const c={};let d=!1;for(let t=0;t<i.length;t++)if(o!==t){const e=i[t];for(const t in e){const i=e[t];if(i.length)for(const e of l)i.includes(e)&&(void 0===c[t]&&(c[t]=[]),c[t].push(e))}}for(const t in c)c[t].length>1&&(a[[e,t].sort().join(";")]=c[t],d=!0);d||(a[e]=l)}if(Object.keys(a).length){const t={},n=new Set,o={};for(const t in a)o[t]=a[t].join(",");for(const e in a)for(const i in a){const a=o[e];if(e!==i&&a===o[i]){void 0===t[a]&&(t[a]=new Set(e.split(";")));for(const e of i.split(";"))t[a].add(e);n.add(e).add(i)}}for(const t of n)delete a[t];for(const t in a)Fn(i,t,a[t]),e[t]=a[t];for(const n in t){const o=Array.from(t[n]).sort().join(";"),a=On.objectMap(n.split(Pn.XML.SEPARATOR),t=>parseInt(t));Fn(i,o,a),e[o]=a}}}const o=Object.keys(n);o.length&&(e[o.join(";")]=n[o[0]]),On.spliceArray(i,t=>{for(const e in t)if(t[e].length)return!1;return!0})}}while(i.length)}const h={},u={},p=new Set;for(const t in d){const e=d[t],i=[];for(const t in e){const n=[];for(const e of t.split(";")){const t=Pn.XML.ATTRIBUTE.exec(e);t&&n.push({key:t[1],value:t[2]})}i.push({name:"",parent:"",items:n,ids:e[t]})}i.sort((t,e)=>{let i=0,n=0;return t.ids&&e.ids&&(i=t.ids.length,n=e.ids.length),i===n&&(i=t.items.length)===(n=e.items.length)&&(i=t.items[0].name)===(n=e.items[0].name)&&(i=t.items[0].value,n=e.items[0].value),i<=n?1:-1});const n=i.length;for(let e=0;e<n;e++)i[e].name=On.capitalize(t)+(e>0?"_"+e:"");h[t]=i}for(const t in h)for(const e of h[t])if(e.ids)for(const t of e.ids)void 0===u[t]&&(u[t]=[]),u[t].push(e.name);for(const t of this.application.session.cache){const e=u[t.id];if(e&&e.length)switch(t.tagName){case"METER":case"PROGRESS":t.attr("_","style","@android:style/Widget.ProgressBar.Horizontal");break;default:e.length>1?(p.add(e.join(".")),e.shift()):p.add(e[0]),t.attr("_","style","@style/"+e.join("."))}}for(const t of p){const e=[];let i,n="";if(t.split(".").forEach((t,o,r)=>{const s=Bn.exec(t);if(s){const l=h[s[1].toUpperCase()][On.convertInt(s[2])];if(l)if(0===o)n=t,1===r.length?i=l.items:a.has(t)||a.set(t,{name:t,parent:"",items:l.items});else{if(i)for(const t of l.items){const e=i.findIndex(e=>e.key===t.key);-1!==e?i[e]=t:i.push(t)}else i=l.items.slice(0);e.push(t)}}}),i)if(0===e.length)a.set(n,{name:n,parent:"",items:i});else{const t=e.join(".");a.set(t,{name:t,parent:n,items:i})}}}}squared;class Un extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){for(const t of this.application.session.cache)if(t.renderTemplates){let e,i;if(t.renderEach((t,n)=>{const o=t.dataset,a=o.androidInclude,r="true"===o.androidIncludeEnd;if(a||r){const s={item:t,name:a,index:n,merge:"true"===o.androidIncludeMerge};a&&(void 0===e&&(e=[]),e.push(s)),r&&(void 0===i&&(i=[]),i.push(s))}}),e&&i){const n=this.application,o=this.controller;e.length=Math.min(e.length,i.length);for(let t=e.length;t<i.length;t++)i.shift();for(let a=e.length-1;a>=0;a--){const r=e[a];for(let e=0;e<i.length;e++){const a=i[e].index;if(a>=r.index){const s=[];for(let e=r.index;e<=a;e++)s.push(t.renderTemplates[e]),t.renderTemplates[e]=null;const l=r.merge||s.length>1,c=l?1:0;t.renderTemplates[r.index]={type:2,node:s[0].node,content:o.renderNodeStatic("include",{layout:"@layout/"+r.name},"",""),indent:!0},l||r.item.documentRoot||(r.item.documentRoot=!0);let d=o.cascadeDocument(s,c);l&&(d=o.getEnclosingXmlTag("merge",D(d),d)),n.saveDocument(r.name,d,"",1/0),i.splice(e,1);break}}}}}}}const{css:qn,dom:jn,util:Yn,xml:Zn}=squared.lib,Kn=squared.base.lib.enumeration;class $n extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:!1,fontVariantSmallCapsReduction:.7},this.eventOnly=!0}afterResources(){const t=(t,e,i,n)=>{""!==(i=S.addString(n,i,this.options.numberResourceValue))&&t.android(e,this.options.numberResourceValue||!Yn.isNumber(i)?"@string/"+i:i,!1)};for(const e of this.application.processing.cache)if(e.hasResource(Kn.NODE_RESOURCE.VALUE_STRING)){switch(e.tagName){case"SELECT":{const t=this.createOptionArray(e.element,e.controlId);""!==t&&e.android("entries","@array/"+t);break}case"IFRAME":{const t=e.data(S.KEY_NAME,"valueString");t&&S.addString(Zn.replaceCharacterData(t.value),t.key);break}default:if(!e.layoutFrame){const i=e.data(S.KEY_NAME,"valueString");if(i){const n=i.key||i.value;let o=i.value;if(e.naturalChild&&e.alignParent("left")&&!(!e.plainText&&e.preserveWhiteSpace||e.plainText&&e.actualParent.preserveWhiteSpace)){const t=e.textContent;let i=0;const n=t.length;for(let e=0;e<n;e++)switch(t.charCodeAt(e)){case 160:i++;case 32:continue}0===i&&(o=o.replace(/^(\s|&#160;)+/,""))}if("small-caps"===e.css("fontVariant"))if(e.localSettings.targetAPI>=21)e.android("fontFeatureSettings","smcp");else{e.android("textAllCaps","true");const t=e.data(S.KEY_NAME,"fontStyle");t&&(t.fontSize=parseFloat(t.fontSize)*this.options.fontVariantSmallCapsReduction+"px")}switch(e.css("textTransform")){case"uppercase":e.android("textAllCaps","true");break;case"lowercase":o=Yn.lowerCaseString(o);break;case"capitalize":o=Yn.capitalizeString(o)}const a=e.tagName;o=Zn.replaceCharacterData(o,e.preserveWhiteSpace||"CODE"===a);const r=e.css("textDecorationLine");if("none"!==r)for(const t of r.split(" "))switch(t){case"underline":o="<u>"+o+"</u>";break;case"line-through":o="<strike>"+o+"</strike>"}"INS"===a&&-1===r.indexOf("line-through")&&(o="<strike>"+o+"</strike>");let s=0;if((e.blockDimension||"table-cell"===e.display)&&(s=e.parseUnit(e.css("textIndent")))+e.bounds.width<0&&(o=""),0===s){const t=e.actualParent;t&&(t.blockDimension||"table-cell"===t.display)&&e===t.firstChild&&(s=t.parseUnit(t.css("textIndent")))}if(s>0){const t=jn.measureTextWidth(" ",e.css("fontFamily"),e.fontSize)||e.fontSize/2;o="&#160;".repeat(Math.max(Math.floor(s/t),1))+o}t(e,"text",n,o)}if(e.inputElement){if(e.controlName===o.EDIT_LIST){const t=e.element;t.list&&(this.createOptionArray(t.list,e.controlId),e.hasPX("width")||e.css("width",qn.formatPX(Math.max(e.bounds.width,e.width)),!0))}const i=e.data(S.KEY_NAME,"hintString");i&&t(e,"hint",e.controlId.toLowerCase()+"_hint",i)}}}if(e.styleElement){const i=e.element.title;i&&t(e,"tooltipText",e.controlId.toLowerCase()+"_title",i)}}}createOptionArray(t,e){const i=S.getOptionArray(t);let n;if(!this.options.numberResourceValue&&i[1])n=i[1];else{const t=i[0]||i[1];if(t){n=[];for(let e of t)""!==(e=S.addString(Zn.replaceCharacterData(e),"",this.options.numberResourceValue))&&n.push("@string/"+e)}}return n&&n.length?S.insertStoredAsset("arrays",e+"_array",n):""}}const{regex:Jn,util:Qn}=squared.lib,to=S.STORED,eo=/(\w+):(\w+)="([^"]+)"/;class io extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={},e={};for(const i of this.application.session.cache)if(i.visible&&i.controlId){const n=i.renderChildren,o=n.length;if(o>1){const a=new Map;let r=!0,s="";for(let t=0;t<o;t++){const e=n[t];let i=!1;for(const n of e.combine("_","android"))if(!i&&n.startsWith("style=")){if(0===t)s=n;else if(""===s||n!==s){r=!1;break}i=!0}else a.set(n,(a.get(n)||0)+1);if(!r||!i&&""!==s){r=!1;break}}if(r){for(const[t,e]of a.entries())e!==o&&a.delete(t);if(a.size>1){""!==s&&(s=Qn.trimString(s.substring(s.indexOf("/")+1),'"'));const o=[];for(const t of a.keys()){const e=eo.exec(t);if(e){for(const t of n)t.delete(e[1],e[2]);o.push(e[0])}}o.sort();const r=o.join(";");let l="";for(const t in e)if(e[t]===r){l=t;break}""!==s&&l.startsWith(s+".")||(t[l=(""!==s?s+".":"")+Qn.capitalize(i.controlId)]=o,e[l]=r);for(const t of n)t.attr("_","style","@style/"+l)}}}}for(const e in t){const i=[],n=t[e];for(const t in n){const e=Jn.XML.ATTRIBUTE.exec(n[t]);e&&i.push({key:e[1],value:e[2]})}to.styles.set(e,Object.assign(Object.assign({},X()),{name:e,items:i}))}}}var no={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const oo=["ordering"],ao={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var ro={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":oo,">":{set:{"^":"android","@":oo,">":{objectAnimator:ao.objectAnimator}},objectAnimator:ao.objectAnimator}},objectAnimator:ao.objectAnimator}}};void 0===squared.svg&&Object.assign(squared,{svg:{lib:{}}});var so=squared.svg.Svg,lo=squared.svg.SvgAnimate,co=squared.svg.SvgAnimateTransform,ho=squared.svg.SvgBuild,uo=squared.svg.SvgG,po=squared.svg.SvgPath,go=squared.svg.SvgShape;const{css:mo,math:fo,regex:To,util:yo,xml:bo}=squared.lib,{constant:Ao,util:Eo}=squared.svg.lib,So=S.STORED,Ro={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"},Io=["name","value","fill","stroke","fillPattern","fillRule","strokeWidth","fillOpacity","strokeOpacity","strokeLinecap","strokeLinejoin","strokeLineJoin","strokeMiterlimit"];Ao&&Object.assign(Ro,{[Ao.KEYSPLINE_NAME["ease-in"]]:Ro.accelerate,[Ao.KEYSPLINE_NAME["ease-out"]]:Ro.decelerate,[Ao.KEYSPLINE_NAME["ease-in-out"]]:Ro.accelerate_decelerate,[Ao.KEYSPLINE_NAME.linear]:Ro.linear});const _o='<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',xo={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function wo(t,e){return t&&t[e]?Ro[t[e]]||No(t[e]):""}function vo(t){for(const e in xo)if(xo[e].includes(t))return yo.convertCamelCase(e);return""}function No(t){if(Ro[t])return Ro[t];{const e="path_interpolator_"+yo.convertWord(t);if(!So.animators.has(e)){const i=yo.formatString(_o,...t.split(" "));So.animators.set(e,i)}return"@anim/"+e}}function Co(t){const e={};for(const i of t){const{matrix:t,origin:n}=i;switch(i.type){case SVGTransform.SVG_TRANSFORM_SCALE:e.scaleX=""+t.a,e.scaleY=""+t.d,n&&(e.pivotX=""+n.x,e.pivotY=""+n.y);break;case SVGTransform.SVG_TRANSFORM_ROTATE:e.rotation=""+i.angle,n?(e.pivotX=""+n.x,e.pivotY=""+n.y):(e.pivotX="0",e.pivotY="0");break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:e.translateX=""+t.e,e.translateY=""+t.f}}return e}function Lo(t,e){let i=0,n=0;for(const o of function(t){const e=[];let i=t.parentElement;for(;i&&(e.push(i),!((i=i.parentElement)instanceof HTMLElement)););return e}(t))(Eo.SVG.svg(o)||Eo.SVG.use(o))&&o!==e&&(i+=o.x.baseVal.value,n+=o.y.baseVal.value);return{x:i,y:n}}function Po(t,e,i=1,n=1){return e.length&&(Eo.SVG.circle(t)||Eo.SVG.ellipse(t))&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(i!==n||e.length>1&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_SCALE&&t.matrix.a!==t.matrix.d))?Oo(t,e):[[],e]}function Oo(t,e,i=!1){if(e.length){const o=[],a=[],r=e[0].fromCSS?[]:Eo.TRANSFORM.rotateOrigin(t).reverse(),s=e.slice(0).reverse();for(let t=1;t<s.length;t++){const e=s[t],i=s[t-1];if(e.type===i.type){let n;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:(n=Eo.MATRIX.clone(e.matrix)).e+=i.matrix.e,n.f+=i.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:(n=Eo.MATRIX.clone(e.matrix)).a*=i.matrix.a,n.d*=i.matrix.d}n&&(e.matrix=n,s.splice(--t,1))}}const l=[];function n(){o.push(l.slice(0)),l.length=0}for(const t of s)switch(t.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:a.push(t);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:i||0!==o.length||0!==l.length?(l.push(t),n()):a.push(t);break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;r.length;){const e=r.shift();if(e.angle===t.angle){0===e.x&&0===e.y||(t.origin=e);break}}if(void 0===t.origin&&1===l.length&&l[0].type===SVGTransform.SVG_TRANSFORM_SCALE){l.push(t);continue}case SVGTransform.SVG_TRANSFORM_SCALE:l.length&&n(),l.push(t)}return l.length&&o.push(l),[o.reverse(),a]}return[[],e]}function ko(t,e,i,n=!1,o){let a;const r=t[e];return r?a=Array.isArray(r)?""+r[i]:r:n||0!==e||(a=o),a||""}function Xo(t){switch(t){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:return Wo(t)?"floatType":void 0}}function Bo(t,e,i,n){const o=new lo;return o.attributeName=t,o.delay=e,o.duration=1,o.from=n||i,o.to=i,o.fillForwards=!0,o.convertToValues(),o}function Mo(t,e=!0){let i=xo[t];return void 0===i&&e&&Wo(t)&&(i=[t]),i}function Do(t){switch(t){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Go(t){switch(t.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return co.toRotateList(t.values);case SVGTransform.SVG_TRANSFORM_SCALE:return co.toScaleList(t.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return co.toTranslateList(t.values)}}function Wo(t){switch(t){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Ho(t,e=!1){const i="@color/"+S.addColor(t);return e?[i]:i}function Vo(t,e){return Uo(t.attributeName)?Ho(e):e.trim()||void 0}function Fo(t){switch(t){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function zo(t,e,i){const n=t.type,o={type:n,item:An(t.colorStops,i)};switch(n){case"radial":{const i=t,n=e.element;let a,r,s,l,c=[];switch(n.tagName){case"path":for(const t of ho.getPathCommands(e.value))c=c.concat(t.value);case"polygon":if(Eo.SVG.polygon(n)&&(c=c.concat(ho.clonePoints(n.points))),!c.length)return;[a,r,s,l]=ho.minMaxPoints(c),s-=a,l-=r;break;default:if(Eo.SVG.rect(n))a=n.x.baseVal.value,r=n.y.baseVal.value,s=n.width.baseVal.value,l=n.height.baseVal.value;else if(Eo.SVG.circle(n))a=n.cx.baseVal.value-n.r.baseVal.value,r=n.cy.baseVal.value-n.r.baseVal.value,l=s=2*n.r.baseVal.value;else{if(!Eo.SVG.ellipse(n))return;a=n.cx.baseVal.value-n.rx.baseVal.value,r=n.cy.baseVal.value-n.ry.baseVal.value,s=2*n.rx.baseVal.value,l=2*n.ry.baseVal.value}}o.centerX=""+(a+s*jo(i.cxAsString)),o.centerY=""+(r+l*jo(i.cyAsString)),o.gradientRadius=""+(s+l)/2*(mo.isPercent(i.rAsString)?parseFloat(i.rAsString)/100:1),i.spreadMethod&&(o.tileMode=Fo(i.spreadMethod));break}case"linear":{const e=t;o.startX=""+e.x1,o.startY=""+e.y1,o.endX=""+e.x2,o.endY=""+e.y2,e.spreadMethod&&(o.tileMode=Fo(e.spreadMethod))}}return o}const Uo=t=>"fill"===t||"stroke"===t,qo=(t,e,i=-1)=>t.name+"_"+e+(-1!==i?"_"+(i+1):""),jo=t=>mo.isPercent(t)?parseFloat(t)/100:.5,Yo=t=>"@drawable/"+t,Zo=(t="")=>({ordering:t,objectAnimator:[]});class Ko extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=!0,this.VECTOR_DATA=new Map,this.ANIMATE_DATA=new Map,this.ANIMATE_TARGET=new Map,this.IMAGE_DATA=[],this.SYNCHRONIZE_MODE=0,this.NAMESPACE_AAPT=!1}beforeParseDocument(){ho&&(ho.setName(),this.controller.localSettings.svg.enabled=!0)}afterResources(){if(ho)for(const t of this.application.processing.cache){let e,i;if(t.imageElement?[e,i]=this.createSvgElement(t,t.src):t.svgElement&&(i=t.element),i){const n=this.createSvgDrawable(t,i);""!==n&&(t.localSettings.targetAPI>=21?t.android("src",Yo(n)):t.app("srcCompat",Yo(n))),t.hasWidth||t.setLayoutWidth("wrap_content"),t.hasHeight||t.setLayoutHeight("wrap_content"),t.baseline&&t.android("baselineAlignBottom","true"),e&&e.removeChild(i)}}}afterFinalize(){this.controller.localSettings.svg.enabled=!1}createSvgElement(t,e){const i=To.CSS.URL.exec(e);if(i&&(e=i[1]),e.toLowerCase().endsWith(".svg")||e.startsWith("data:image/svg+xml")){const i=this.resource.getRawData(e);if(i){const e=(t.actualParent||t.documentParent).element;if(e.insertAdjacentHTML("beforeend",i.content),e.lastElementChild instanceof SVGSVGElement){const i=e.lastElementChild;return 0===i.width.baseVal.value&&i.setAttribute("width",""+t.actualWidth),0===i.height.baseVal.value&&i.setAttribute("height",""+t.actualHeight),[e,i]}}}return[]}createSvgDrawable(t,e){const i=new so(e),n=t.localSettings.targetAPI>=23,{floatPrecisionValue:o,floatPrecisionKeyTime:a}=this.options;this.SVG_INSTANCE=i,this.VECTOR_DATA.clear(),this.ANIMATE_DATA.clear(),this.ANIMATE_TARGET.clear(),this.IMAGE_DATA.length=0,this.NAMESPACE_AAPT=!1,this.SYNCHRONIZE_MODE=2|(n?32:64);const r=(t.tagName+"_"+yo.convertWord(t.controlId,!0)+"_viewbox").toLowerCase(),s=(t,e)=>r+(t?"_"+t:"")+(this.IMAGE_DATA.length?"_vector":"")+(e?"_"+e.toLowerCase():"");i.build({exclude:this.options.transformExclude,residual:Po,precision:o}),i.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,framesPerSecond:this.controller.userSettings.framesPerSecond,precision:o}),this.queueAnimations(i,i.name,t=>"opacity"===t.attributeName);const c=this.parseVectorData(i),d=i.viewBox;let h=S.insertStoredAsset("drawables",s(),bo.applyTemplate("vector",Zi,[{"xmlns:android":l.android,"xmlns:aapt":this.NAMESPACE_AAPT?l.aapt:"","android:name":i.name,"android:width":mo.formatPX(i.width),"android:height":mo.formatPX(i.height),"android:viewportWidth":""+(d.width||i.width),"android:viewportHeight":""+(d.height||i.height),"android:alpha":parseFloat(i.opacity)<1?""+i.opacity:"",include:c}])),u="";if(this.ANIMATE_DATA.size){const t=[{"xmlns:android":l.android,"android:drawable":Yo(h),target:[]}];function p(e,i){const n=i.set;if(n.length){let o=!1;if(n.length>1&&n.every(t=>""===t.ordering)){const t={set:[],objectAnimator:[]};for(const e of n)t.set=t.set.concat(e.set),t.objectAnimator=t.objectAnimator.concat(e.objectAnimator);i=t}for(;1===i.set.length;){const t=i.set[0];if(o&&""!==t.ordering||0!==t.objectAnimator.length)break;i=t,o=!0}i["xmlns:android"]=l.android,o&&(i["android:ordering"]=i.ordering,i.ordering=void 0);const a={name:e,animation:S.insertStoredAsset("animators",s("anim",e),bo.applyTemplate("set",ro,[i]))};""!==a.animation&&(a.animation="@anim/"+a.animation,t[0].target.push(a))}}for(const[t,e]of this.ANIMATE_DATA.entries()){const i=new Map,r=new Map,s=[],l=[],c=[],d=[],h=[],[u,g]=yo.partitionArray(e.animate,t=>void 0!==t.companion),m={set:[],objectAnimator:[]},f=g.length;for(let t=0;t<f;t++){const e=g[t];if(e.setterType)xo[e.attributeName]&&yo.isString(e.to)&&(e.duration>0&&e.fillReplace?l.push(e):s.push(e));else if(ho.isAnimate(e)){const o=yo.filterArray(u,t=>t.companion.value===e);if(o.length){o.sort((t,e)=>t.companion.key>=e.companion.key?1:0);const n=[],a=[],r=o.length;for(let t=0;t<r;t++){const i=o[t];i.companion.key<=0?(n.push(i),0===t&&e.delay>0&&(i.delay+=e.delay,e.delay=0)):a.push(i)}n.push(e),i.set("sequentially_companion_"+t,n.concat(a))}else{const t=e.synchronized;if(t){const n=t.value;if(ho.isAnimateTransform(e)){const t=r.get(n)||[];t.push(e),r.set(n,t)}else{const t=i.get(n)||[];t.push(e),i.set(n,t)}}else ho.isAnimateTransform(e)&&e.expandToValues(),-1===e.iterationCount?l.push(e):!(!e.fromToType||ho.isAnimateTransform(e)&&e.transformOrigin)||n&&"pathType"!==Xo(e.attributeName)?e.fillReplace?l.push(e):s.push(e):c.push([e])}}}s.length&&c.push(s);for(const[t,e]of i.entries())t.startsWith("sequentially_companion")?c.push(e):c.push(e.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of r.values())h.push(t.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of l)d.push([[t]]);[c,h,...d].forEach((t,i)=>{if(0===t.length)return;const r={ordering:0===i||1===t.length?"":"sequentially",set:[],objectAnimator:[]};for(const s of t){let t="",l=!1,c=!1,d=!0;i<=1&&s.some(t=>!!t.synchronized&&""!==t.synchronized.value)?(ho.isAnimateTransform(s[0])||(t="sequentially"),l=!0,d=!1):i<=1&&s.some(t=>!!t.synchronized&&""===t.synchronized.value)?(t="sequentially",l=!0,c=!0):i<=1&&s.some(t=>void 0!==t.companion)?t="sequentially":(i>0&&(t="sequentially"),i>1&&ho.isAnimateTransform(s[0])&&(c=!0));const h=Zo(),u=Zo(),p=Zo(),g=Zo();let m=[];(l?yo.partitionArray(s,t=>-1!==t.iterationCount):[s]).forEach((s,f)=>{1===f&&s.length>1&&(p.ordering="sequentially");const T=new Map;for(const y of s){const b=Xo(y.attributeName);if(void 0===b)continue;const A=y.delay>0;let E,S=!1;const R=(t,e)=>{yo.isString(e)&&-1===h.objectAnimator.findIndex(e=>e.propertyName===t)&&h.objectAnimator.push(this.createPropertyValue(t,e,"0",b))},I=(t,e,i)=>{if(!l&&y.fillReplace&&void 0!==b){let n,o=y.replaceValue;if(o||(S?o=Wo(t):y.parent&&ho.isShape(y.parent)&&y.parent.path&&(o="pathData"===t?y.parent.path.value:y.parent.path[vo(t)]),o||(o=y.baseValue)),e&&e.length){const t=e[e.length-1];if(yo.isArray(t.propertyValuesHolder)){const e=t.propertyValuesHolder[t.propertyValuesHolder.length-1];n=e.keyframe[e.keyframe.length-1].value}else n=t.valueTo}if(yo.isString(o)&&o!==n&&(o=Vo(y,o))){switch(t){case"trimPathStart":case"trimPathEnd":o=o.split(" ")["trimPathStart"===t?0:1]}g.objectAnimator.push(this.createPropertyValue(t,o,"1",b,"pathType"===b?n:"",i?""+i:""))}E&&(t.endsWith("X")?g.objectAnimator.push(this.createPropertyValue("translateX","0","1",b)):t.endsWith("Y")&&g.objectAnimator.push(this.createPropertyValue("translateY","0","1",b)))}};if(y.setterType){const t=Mo(y.attributeName);if(t){const e=Uo(y.attributeName)?Ho(y.to,!0):y.to.trim().split(" "),n=t.length;if(e.length===n&&!e.some(t=>""===t)){let o,a;for(let r=0;r<n;r++){let n;"pathType"===b?n=e[r]:A&&y.baseValue&&(n=Vo(y,y.baseValue.trim().split(" ")[r]));const s=this.createPropertyValue(t[r],e[r],"1",b,n,y.delay>0?""+y.delay:"");i>1?(p.objectAnimator.push(s),I(t[r],void 0,i>1?y.duration:0)):y.companion&&y.companion.key<=0?(void 0===o&&(o=[]),o.push(s)):y.companion&&y.companion.key>0?(void 0===a&&(a=[]),a.push(s)):m.push(s)}o&&(h.objectAnimator=h.objectAnimator.concat(o)),a&&(g.objectAnimator=g.objectAnimator.concat(a))}}}else if(ho.isAnimate(y)){let h,g=c;const m=this.createPropertyValue("","",""+y.duration,b,"",y.delay>0?""+y.delay:"",h=1===f?s.length>1?"0":"-1":-1!==y.iterationCount?""+Math.ceil(y.iterationCount-1):"-1");let _,x,w;if(l||"pathType"!==m.valueType)if(ho.asAnimateTransform(y))x=Do(y.type),w=Go(y),x&&w&&(c&&0===y.keyTimes[0]&&(g=!1),(g||A)&&(_=yo.objectMap(x,t=>Wo(t)||"0")),E=y.transformOrigin),S=!0;else if(ho.asAnimateMotion(y)){if(x=Do(y.type),w=Go(y),x&&w){const t=y.rotateValues,e=w.length;if(t&&t.length===e){x.push("rotation");for(let i=0;i<e;i++)w[i].push(t[i])}}S=!0}else switch(x=Mo(y.attributeName),m.valueType){case"intType":w=yo.objectMap(y.values,t=>""+yo.convertInt(t)),A&&y.baseValue&&(_=yo.replaceMap(ho.parseCoordinates(y.baseValue),t=>""+Math.trunc(t)));break;case"floatType":w="stroke-dasharray"===y.attributeName?yo.objectMap(y.values,t=>yo.replaceMap(t.split(" "),t=>parseFloat(t))):y.values,A&&y.baseValue&&(_=yo.replaceMap(ho.parseCoordinates(y.baseValue),t=>""+t));break;default:if(w=y.values.slice(0),Uo(y.attributeName)){A&&y.baseValue&&(_=Ho(y.baseValue,!0));const t=w.length;for(let e=0;e<t;e++)""!==w[e]&&(w[e]=Ho(w[e]))}}else if(e.pathData){const t=y.parent;let i,n;t&&ho.isShape(t)&&(n=t,t.path&&(i=t.path.transformed)),x=["pathData"],w=po.extrapolate(y.attributeName,e.pathData,y.values,i,n,o)}if(void 0===y.keySplines&&(y.timingFunction?m.interpolator=No(y.timingFunction):""!==this.options.animateInterpolator&&(m.interpolator=this.options.animateInterpolator)),w&&x){const s=x.length,h=y.synchronized,b=h?h.key+h.value:0!==i||s>1?JSON.stringify(m):"",S=y.keyTimes;for(let i=0;i<s;i++){const s=x[i];g&&_&&R(s,_[i]);const h=S.length;if(d&&h>1)if(n&&"pathType"!==m.valueType){!g&&A&&_&&R(s,_[i]);const t=T.get(b)||[],e=[];for(let t=0;t<h;t++){let n=ko(w,t,i,!0);n&&"floatType"===m.valueType&&(n=fo.truncate(n,o)),e.push({interpolator:t>0&&""!==n&&"pivotX"!==s&&"pivotY"!==s?wo(y.keySplines,t-1):"",fraction:0===S[t]&&""===n?"":fo.truncate(S[t],a),value:n})}t.push({propertyName:s,keyframe:e}),T.has(b)||(""!==b&&T.set(b,t),(0===f?u:p).objectAnimator.push(Object.assign(Object.assign({},m),{propertyValuesHolder:t}))),E=void 0}else{t="sequentially";const n=Zo("sequentially"),a=u.objectAnimator;for(let t=0;t<h;t++){const r=Object.assign(Object.assign({},m),{propertyName:s,startOffset:0===t?""+(y.delay+(S[t]>0?Math.floor(S[t]*y.duration):0)):"",propertyValuesHolder:!1});let l=ko(w,t,i,!1,"pathType"===m.valueType?e.pathData:y.baseValue);if(l){let d;if(0===t?(r.valueFrom=!c&&A&&_?_[i]:"pathType"===m.valueType?e.pathData||""+w[0]:y.baseValue||y.replaceValue||"",d=0):(r.valueFrom=""+ko(w,t-1,i),d=Math.floor((S[t]-S[t-1])*y.duration)),"floatType"===m.valueType&&(l=fo.truncate(l,o)),E&&E[t]){let e,i=0;if(s.endsWith("X")?(e="translateX",i=E[t].x):s.endsWith("Y")&&(e="translateY",i=E[t].y),e){const t=this.createPropertyValue(e,fo.truncate(i,o),""+d,"floatType");t.interpolator=No(Ao.KEYSPLINE_NAME["step-start"]),n.objectAnimator.push(t)}}t>0&&(r.interpolator=wo(y.keySplines,t-1)),r.duration=""+d,r.valueTo=l,a.push(r)}}n.objectAnimator.length&&r.set.push(n)}else{const t=Object.assign(Object.assign({},m),{propertyName:s,interpolator:y.duration>1?wo(y.keySplines,0):"",propertyValuesHolder:!1});if(Array.isArray(w[0])){const e=w[w.length-1][i];if(w.length>1){const n=w[0][i];n!==e&&(t.valueFrom=""+n)}t.valueTo=""+e}else{let n;w.length>1?(n=""+w[0],t.valueTo=""+w[w.length-1]):(n=y.from||(!c&&A&&_?_[i]:""),t.valueTo=y.to),"pathType"===m.valueType?t.valueFrom=n||e.pathData||t.valueTo:n&&n!==t.valueTo&&(t.valueFrom=Vo(y,n))}t.valueTo&&("floatType"===m.valueType&&(t.valueTo=fo.truncate(t.valueTo,o)),(0===f?u:p).objectAnimator.push(t))}0!==f||l||-1===y.iterationCount||I(s,u.objectAnimator)}A&&E&&E.length&&(R("translateX","0"),R("translateY","0"))}}}});const f=u.objectAnimator.length>0||p.objectAnimator.length>0;"sequentially"===t&&(f&&1===h.objectAnimator.length&&(u.objectAnimator.unshift(h.objectAnimator[0]),h.objectAnimator.length=0),1===p.objectAnimator.length&&(u.objectAnimator.push(p.objectAnimator[0]),p.objectAnimator.length=0),f&&1===g.objectAnimator.length&&(u.objectAnimator.push(g.objectAnimator[0]),g.objectAnimator.length=0)),0===h.objectAnimator.length&&0===p.objectAnimator.length&&0===g.objectAnimator.length&&("sequentially"===t&&1===u.objectAnimator.length&&(t=""),"sequentially"!==r.ordering&&"sequentially"!==t&&(m=m.concat(u.objectAnimator),u.objectAnimator.length=0)),(u.objectAnimator.length||p.objectAnimator.length)&&(h.objectAnimator.length&&(r.ordering="sequentially",r.set.push(h)),u.objectAnimator.length&&(u.ordering=t,r.set.push(u)),p.objectAnimator.length&&(r.ordering="sequentially",r.set.push(p)),g.objectAnimator.length&&(r.ordering="sequentially",r.set.push(g))),m.length&&(r.objectAnimator=r.objectAnimator.concat(m))}(r.set.length||r.objectAnimator.length)&&m.set.push(r)}),p(t,m)}for(const[t,e]of this.ANIMATE_TARGET.entries()){let i;const n=(t,e,n,o,a)=>{void 0===i&&(i=[]),i.push(this.createPropertyValue(t,e,"0",n,o,a))};for(const t of e.animate)if(ho.asAnimateMotion(t)&&t.parent&&ho.isShape(t.parent)){const e=t.parent.path;e&&e.value!==e.baseValue&&(n("pathData",e.baseValue,"pathType",e.value),-1===t.iterationCount||t.setterType||n("pathData",e.value,"pathType",e.baseValue,""+t.getTotalDuration()))}i&&p(t,{set:[{set:void 0,objectAnimator:i}],objectAnimator:void 0})}t[0].target&&(h=S.insertStoredAsset("drawables",s("anim"),bo.applyTemplate("animated-vector",no,t)))}if(this.IMAGE_DATA.length){const t=[];""!==h&&t.push({drawable:Yo(h)});const e=[{"xmlns:android":l.android,item:t}];for(const e of this.IMAGE_DATA){const n=i.viewBox,o=i.width/n.width,a=i.height/n.height;let r=e.getBaseValue("x",0)*o,s=e.getBaseValue("y",0)*a,l=e.getBaseValue("width",0),c=e.getBaseValue("height",0);const d=Lo(e.element,i.element);r+=d.x,s+=d.y,c*=a;const h={width:mo.formatPX(l*=o),height:mo.formatPX(c),left:0!==r?mo.formatPX(r):"",top:0!==s?mo.formatPX(s):""},u=Yo(S.addImage({mdpi:e.href}));e.rotateAngle?h.rotate={drawable:u,fromDegrees:""+e.rotateAngle,visible:e.visible?"true":"false"}:h.drawable=u,t.push(h)}u=S.insertStoredAsset("drawables",r,bo.applyTemplate("layer-list",qi,e))}else u=h;return t.data(S.KEY_NAME,"svgViewBox",i.viewBox),u}parseVectorData(t,e=0){const i=this.options.floatPrecisionValue,n=this.createGroup(t),o=n.length,a=e+o;let r="";for(const e of t)if(e.visible)if(ho.isShape(e)){const t=e.path;if(t&&t.value){const[n,o]=this.createPath(e,t),s=[];if(t.strokeWidth&&(t.strokeDasharray||t.strokeDashoffset)){const a=this.ANIMATE_DATA.get(e.name);if(void 0===a||a.animate.every(t=>t.attributeName.startsWith("stroke-dash"))){const[r,l,c,d]=t.extractStrokeDash(a&&a.animate,i);if(l){a&&(this.ANIMATE_DATA.delete(e.name),r&&(a.animate=r));const t=qo(e,"stroke"),h={name:t};""!==c&&(n.pathData=c),""!==d&&(h["clip-path"]=[{pathData:d}]);const u=l.length;for(let e=0;e<u;e++){const o=0===e?n:Object.assign({},n),r=l[e];o.name=t+"_"+e,a&&this.ANIMATE_DATA.set(o.name,{element:a.element,animate:yo.filterArray(a.animate,t=>void 0===t.id||t.id===e)}),o.trimPathStart=fo.truncate(r.start,i),o.trimPathEnd=fo.truncate(r.end,i),s.push(o)}o.unshift(h)}}}if(0===s.length&&s.push(n),o.length){o[o.length-1].path=s,r+=bo.applyTemplate("group",Yi,o,a+1)}else r+=bo.applyTemplate("path",ji,s,a+1)}}else ho.isContainer(e)?e.length&&(r+=this.parseVectorData(e,a)):ho.asImage(e)&&(ho.asPattern(t)||(e.extract(this.options.transformExclude.image),this.IMAGE_DATA.push(e)));return o?(n[o-1].include=r,bo.applyTemplate("group",Yi,n,e+1)):r}createGroup(t){const e=[],i=[],n={"clip-path":e},o={"clip-path":i},a=[],r={};if(!(t!==this.SVG_INSTANCE&&ho.asSvg(t)||ho.asUseSymbol(t)||ho.asUsePattern(t))||0===t.x&&0===t.y||(r.name=qo(t,"main"),r.translateX=""+t.x,r.translateY=""+t.y),""!==t.clipRegion&&this.createClipPath(t,e,t.clipRegion),(e.length||Object.keys(r).length)&&(Object.assign(n,r),a.push(n)),t!==this.SVG_INSTANCE){const e={},[n]=Oo(t.element,t.transforms,!0),r=qo(t,"animate");if((ho.asG(t)||ho.asUseSymbol(t))&&yo.isString(t.clipPath)&&this.createClipPath(t,i,t.clipPath)&&(e.name=r),this.queueAnimations(t,r,t=>ho.asAnimateTransform(t))&&(e.name=r),Object.keys(e).length&&(Object.assign(o,e),a.push(o)),n.length){let e=[];for(const t of n)a.push(Co(t)),e=e.concat(t);t.transformed=e.reverse()}}return a}createPath(t,e){const i=this.options.floatPrecisionValue,n={name:t.name},o=[],a=[];if(ho.asUse(t)&&yo.isString(t.clipPath)&&this.createClipPath(t,a,t.clipPath),yo.isString(e.clipPath)){const t=new go(e.element);t.build({exclude:this.options.transformExclude,residual:Po,precision:i}),t.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:i}),this.createClipPath(t,a,e.clipPath)}const r={},s=qo(t,"group");if(this.queueAnimations(t,s,t=>ho.isAnimateTransform(t),"",t.name)?r.name=s:a.length&&(r.name=""),!ho.asUse(t)||0===t.x&&0===t.y||(r.translateX=""+t.x,r.translateY=""+t.y),a.length&&(r["clip-path"]=a),Object.keys(r).length&&o.push(r),e.transformResidual)for(const t of e.transformResidual)o.push(Co(t));const l=function(t){let e=parseFloat(t.opacity),i=t.parent;for(;i;){const t=parseFloat(i.opacity||"1");!isNaN(t)&&t<1&&(e*=t),i=i.parent}return e}(t),c=ho.asUse(t);for(let o of Io){let a=c&&t[o]||e[o];if(a){switch(o){case"name":break;case"value":o="pathData";break;case"fill":if(o="fillColor","none"===a||void 0!==n["aapt:attr"])continue;{const t=S.addColor(a);""!==t&&(a="@color/"+t)}break;case"stroke":if(o="strokeColor","none"===a)continue;{const t=S.addColor(a);""!==t&&(a="@color/"+t)}break;case"fillPattern":const t=this.SVG_INSTANCE.definitions.gradient.get(a);let r=!1;if(t)switch(e.element.tagName){case"path":if(!/[zZ]\s*$/.test(e.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const n=zo(t,e,i);n&&(a={name:"android:fillColor",gradient:n},r=!0);break}}if(!r)continue;o="aapt:attr",n.fillColor="",this.NAMESPACE_AAPT=!0;break;case"fillRule":if("evenodd"!==a)continue;o="fillType",a="evenOdd";break;case"strokeWidth":if("0"===a)continue;break;case"fillOpacity":case"strokeOpacity":if("1"===(a=""+(yo.isNumber(a)?parseFloat(a):1)*l))continue;o="fillOpacity"===o?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===a)continue;o="strokeLineCap";break;case"strokeLinejoin":if("miter"===a)continue;o="strokeLineJoin";break;case"strokeMiterlimit":if("4"===a)continue;o="strokeMiterLimit";break;default:continue}n[o]=a}}n.strokeWidth?n.strokeColor||(n.strokeWidth=""):n.strokeColor="";const d=new Map,h=[],u=[],p=e.value;let g=p,m=0;for(const e of t.animations)if(ho.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);d.set(t,{index:m,time:t,to:e.transformFrom,reset:!1,animate:e}),-1!==e.iterationCount&&e.fillReplace&&(d.has(t=e.delay+e.iterationCount*e.duration)||d.set(t,{index:m,time:t,to:p,reset:!0})),m++}const f=Array.from(d.values()).sort((t,e)=>t.time<e.time?-1:1),T=f.length;for(let t=0;t<T;t++){const e=f[t];if(!e.reset||e.to!==g){let i=!0;if(e.reset)t:for(let n=0;n<t;n++){const o=f[n];if(!o.reset)for(let n=t+1;n<T;n++)switch(f[n].index){case o.index:i=!1;case e.index:break t}}else{const i=[],n=new Set;for(let e=0;e<t;e++){const t=f[e];i[t.index]=i[t.index]?2:1}const o=i.length;for(let t=0;t<o;t++)if(1===i[t]){const e=f.find(e=>e.index===t&&void 0!==e.animate);e&&e.animate&&n.add(e.animate.type)}for(const t of n){const i=Do(t);if(i){const n=Eo.TRANSFORM.typeAsValue(t).split(" "),o=n.length;for(let t=0;t<o;t++)h.push(Bo(i[t],e.time,n[t],""))}}}i&&(u.push(Bo("d",e.time,e.to)),g=e.to)}}this.queueAnimations(t,n.name,t=>(ho.asAnimate(t)||ho.asSet(t))&&"clip-path"!==t.attributeName,p)||0!==u.length||r.name!==s&&(n.name="");const y=this.ANIMATE_DATA;if(h.length){const t=y.get(s);t&&(t.animate=t.animate.concat(h))}if(u.length){const e=y.get(n.name);e?e.animate=e.animate.concat(u):y.set(n.name,{element:t.element,animate:u,pathData:p})}return[n,o]}createClipPath(t,e,i){const n=this.SVG_INSTANCE.definitions,o=this.options,a=o.floatPrecisionValue;let r=0;return i.split(";").forEach((i,s,l)=>{if("#"===i.charAt(0)){const t=n.clipPath.get(i);if(t){const i=new uo(t);i.build({exclude:o.transformExclude,residual:Po,precision:a}),i.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:a}),i.each(t=>{const i=t.path;if(i){const n=i.value;if(n){let i=qo(t,"clip_path",l.length>1?s+1:-1);this.queueAnimations(t,i,t=>ho.asAnimate(t)||ho.asSet(t),n)||(i=""),e.push({name:i,pathData:n})}}})}r++}else{let n=qo(t,"clip_path",l.length>1?s+1:-1);this.queueAnimations(t,n,t=>(ho.asAnimate(t)||ho.asSet(t))&&"clip-path"===t.attributeName,i)||(n=""),e.push({name:n,pathData:i}),r++}}),r>0}queueAnimations(t,e,i,n="",o){if(t.animations.length){const a=yo.filterArray(t.animations,(t,e,n)=>!t.paused&&(t.duration>=0||t.setterType)&&i(t,e,n));if(a.length){const i=t.element;return this.ANIMATE_DATA.set(e,{element:i,animate:a,pathData:n}),o&&this.ANIMATE_TARGET.set(o,{element:i,animate:a,pathData:n}),!0}}return!1}createPropertyValue(t,e,i,n,o="",a="",r="0"){const s=this.options.floatPrecisionValue;return{propertyName:t,startOffset:a,duration:i,repeatCount:r,valueType:n,valueFrom:yo.isNumber(o)?fo.truncate(o,s):o,valueTo:yo.isNumber(e)?fo.truncate(e,s):e,propertyValuesHolder:!1}}}const $o={builtInExtensions:["android.delegate.max-width-height","android.delegate.fixed","android.delegate.negative-x","android.delegate.negative-viewport","android.delegate.percent","android.delegate.scrollbar","android.delegate.background","android.delegate.radiogroup","squared.sprite","squared.css-grid","squared.flexbox","squared.table","squared.list","squared.grid","squared.relative","squared.verticalalign","squared.whitespace","squared.accessibility","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.includes"],targetAPI:29,resolutionDPI:160,framesPerSecond:60,supportRTL:!0,preloadImages:!0,supportNegativeLeftTop:!0,exclusionsDisabled:!1,customizationsOverwritePrivilege:!0,showAttributes:!0,createQuerySelectorMap:!1,convertPixels:"dp",insertSpaces:4,handleExtensionsAsync:!0,autoCloseOnWrite:!0,showErrorMessages:!0,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputMainFileName:"activity_main.xml",outputDirectory:"app/src/main",outputArchiveName:"android-xml",outputArchiveFormat:"zip",outputArchiveTimeout:30},Jo=squared.base.lib;let Qo,ta,ea,ia=!1;const na=t=>ia&&!!t&&(t.closed||!(!Qo||!Qo.userSettings.autoCloseOnWrite||Qo.initializing||Qo.closed)&&(Qo.finalize(),!0)),oa={base:{Controller:Wt,File:re,Resource:S,View:at},extensions:{Accessibility:le,CssGrid:Ae,External:Ee,Flexbox:Ce,Grid:Xe,List:Fe,Relative:Ue,Sprite:Ke,Substitute:Je,Table:ai,VerticalAlign:si,WhiteSpace:li,constraint:{Guideline:pi},delegate:{Background:Ai,Fixed:Ii,MaxWidthHeight:wi,NegativeViewport:Ni,NegativeX:ki,Percent:Mi,RadioGroup:Hi,ScrollBar:zi},resource:{Background:Sn,Dimens:Ln,Fonts:zn,Includes:Un,Strings:$n,Styles:io,Svg:Ko}},lib:{constant:u,customization:w,enumeration:i,util:G},system:{customize(t,e,i){if(_[t]){const n=_[t].assign;return n[e]?Object.assign(n[e],i):n[e]=i,n[e]}},addXmlNs(t,e){l[t]=e},copyLayoutAllXml(t,e){na(Qo)&&ta.layoutAllToXml({assets:Qo.layouts,copyTo:t,callback:e})},copyResourceAllXml(t,e){na(Qo)&&ta.resourceAllToXml({copyTo:t,callback:e})},copyResourceStringXml(t,e){na(Qo)&&ta.resourceStringToXml({copyTo:t,callback:e})},copyResourceArrayXml(t,e){na(Qo)&&ta.resourceStringArrayToXml({copyTo:t,callback:e})},copyResourceFontXml(t,e){na(Qo)&&ta.resourceFontToXml({copyTo:t,callback:e})},copyResourceColorXml(t,e){na(Qo)&&ta.resourceColorToXml({copyTo:t,callback:e})},copyResourceStyleXml(t,e){na(Qo)&&ta.resourceStyleToXml({copyTo:t,callback:e})},copyResourceDimenXml(t,e){na(Qo)&&ta.resourceDimenToXml({copyTo:t,callback:e})},copyResourceDrawableXml(t,e){na(Qo)&&ta.resourceDrawableToXml({copyTo:t,callback:e})},copyResourceDrawableImageXml(t,e){na(Qo)&&ta.resourceDrawableImageToXml({copyTo:t,callback:e})},copyResourceAnimXml(t,e){na(Qo)&&ta.resourceAnimToXml({copyTo:t,callback:e})},saveLayoutAllXml(t){na(Qo)&&ta.layoutAllToXml({assets:Qo.layouts,archiveTo:t||ea.outputArchiveName+"-layouts"})},saveResourceAllXml(t){na(Qo)&&ta.resourceAllToXml({archiveTo:t||ea.outputArchiveName+"-resources"})},saveResourceStringXml(t){na(Qo)&&ta.resourceStringToXml({archiveTo:t||ea.outputArchiveName+"-string"})},saveResourceArrayXml(t){na(Qo)&&ta.resourceStringArrayToXml({archiveTo:t||ea.outputArchiveName+"-array"})},saveResourceFontXml(t){na(Qo)&&ta.resourceFontToXml({archiveTo:t||ea.outputArchiveName+"-font"})},saveResourceColorXml(t){na(Qo)&&ta.resourceColorToXml({archiveTo:t||ea.outputArchiveName+"-color"})},saveResourceStyleXml(t){na(Qo)&&ta.resourceStyleToXml({archiveTo:t||ea.outputArchiveName+"-style"})},saveResourceDimenXml(t){na(Qo)&&ta.resourceDimenToXml({archiveTo:t||ea.outputArchiveName+"-dimen"})},saveResourceDrawableXml(t){na(Qo)&&ta.resourceDrawableToXml({archiveTo:t||ea.outputArchiveName+"-drawable"})},saveResourceDrawableImageXml(t){na(Qo)&&ta.resourceDrawableImageToXml({archiveTo:t||ea.outputArchiveName+"-drawable-image"})},saveResourceAnimXml(t){na(Qo)&&ta.resourceAnimToXml({archiveTo:t||ea.outputArchiveName+"-anim"})},writeLayoutAllXml:()=>na(Qo)?ta.layoutAllToXml({assets:Qo.layouts}):{},writeResourceAllXml:()=>na(Qo)?ta.resourceAllToXml():{},writeResourceStringXml:()=>na(Qo)?ta.resourceStringToXml():[],writeResourceArrayXml:()=>na(Qo)?ta.resourceStringArrayToXml():[],writeResourceFontXml:()=>na(Qo)?ta.resourceFontToXml():[],writeResourceColorXml:()=>na(Qo)?ta.resourceColorToXml():[],writeResourceStyleXml:()=>na(Qo)?ta.resourceStyleToXml():[],writeResourceDimenXml:()=>na(Qo)?ta.resourceDimenToXml():[],writeResourceDrawableXml:()=>na(Qo)?ta.resourceDrawableToXml():[],writeResourceDrawableImageXml:()=>na(Qo)?ta.resourceDrawableImageToXml():[],writeResourceAnimXml:()=>na(Qo)?ta.resourceAnimToXml():[]},create(){const e=Jo.constant.EXT_NAME,i=n;return Qo=new t(2,at,Wt,S,Ht),ta=new re,Qo.resourceHandler.setFileHandler(ta),ea=Object.assign({},$o),Object.assign(Qo.builtInExtensions,{[e.SPRITE]:new Ke(e.SPRITE,2),[e.CSS_GRID]:new Ae(e.CSS_GRID,2),[e.FLEXBOX]:new Ce(e.FLEXBOX,2),[e.TABLE]:new ai(e.TABLE,2,void 0,["TABLE"]),[e.LIST]:new Fe(e.LIST,2,void 0,["DIV","UL","OL","DL"]),[e.GRID]:new Xe(e.GRID,2,void 0,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[e.RELATIVE]:new Ue(e.RELATIVE,2),[e.VERTICAL_ALIGN]:new si(e.VERTICAL_ALIGN,2),[e.WHITESPACE]:new li(e.WHITESPACE,2),[e.ACCESSIBILITY]:new le(e.ACCESSIBILITY,2),[i.EXTERNAL]:new Ee(i.EXTERNAL,2),[i.SUBSTITUTE]:new Je(i.SUBSTITUTE,2),[i.CONSTRAINT_GUIDELINE]:new pi(i.CONSTRAINT_GUIDELINE,2),[i.DELEGATE_BACKGROUND]:new Ai(i.DELEGATE_BACKGROUND,2),[i.DELEGATE_FIXED]:new Ii(i.DELEGATE_FIXED,2),[i.DELEGATE_MAXWIDTHHEIGHT]:new wi(i.DELEGATE_MAXWIDTHHEIGHT,2),[i.DELEGATE_NEGATIVEVIEWPORT]:new Ni(i.DELEGATE_NEGATIVEVIEWPORT,2),[i.DELEGATE_NEGATIVEX]:new ki(i.DELEGATE_NEGATIVEX,2),[i.DELEGATE_PERCENT]:new Mi(i.DELEGATE_PERCENT,2),[i.DELEGATE_RADIOGROUP]:new Hi(i.DELEGATE_RADIOGROUP,2),[i.DELEGATE_SCROLLBAR]:new zi(i.DELEGATE_SCROLLBAR,2),[i.RESOURCE_INCLUDES]:new Un(i.RESOURCE_INCLUDES,2),[i.RESOURCE_BACKGROUND]:new Sn(i.RESOURCE_BACKGROUND,2),[i.RESOURCE_SVG]:new Ko(i.RESOURCE_SVG,2),[i.RESOURCE_STRINGS]:new $n(i.RESOURCE_STRINGS,2),[i.RESOURCE_FONTS]:new zn(i.RESOURCE_FONTS,2),[i.RESOURCE_DIMENS]:new Ln(i.RESOURCE_DIMENS,2),[i.RESOURCE_STYLES]:new io(i.RESOURCE_STYLES,2)}),ia=!0,{application:Qo,framework:2,userSettings:ea}},cached:()=>ia?{application:Qo,framework:2,userSettings:ea}:oa.create()};return oa}();
