var android=function(){"use strict";var t;!function(t){t[t.CHECKBOX=1]="CHECKBOX",t[t.RADIO=2]="RADIO",t[t.EDIT=3]="EDIT",t[t.SELECT=4]="SELECT",t[t.RANGE=5]="RANGE",t[t.SVG=6]="SVG",t[t.TEXT=7]="TEXT",t[t.IMAGE=8]="IMAGE",t[t.BUTTON=9]="BUTTON",t[t.INLINE=10]="INLINE",t[t.LINE=11]="LINE",t[t.SPACE=12]="SPACE",t[t.BLOCK=13]="BLOCK",t[t.FRAME=14]="FRAME",t[t.LINEAR=15]="LINEAR",t[t.GRID=16]="GRID",t[t.RELATIVE=17]="RELATIVE",t[t.CONSTRAINT=18]="CONSTRAINT"}(t||(t={}));var e=Object.freeze({get CONTAINER_NODE(){return t}});const n={DELEGATE_FIXED:"android.delegate.fixed",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_STYLES:"android.resource.styles"},o={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",SELECT:"Spinner",RANGE:"SeekBar",SVG:"ImageView",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline"},i={PLAINTEXT:t.TEXT,HR:t.LINE,SVG:t.SVG,IMG:t.IMAGE,SELECT:t.SELECT,RANGE:t.RANGE,TEXT:t.EDIT,PASSWORD:t.EDIT,NUMBER:t.EDIT,EMAIL:t.EDIT,SEARCH:t.EDIT,URL:t.EDIT,CHECKBOX:t.CHECKBOX,RADIO:t.RADIO,BUTTON:t.BUTTON,SUBMIT:t.BUTTON,RESET:t.BUTTON,TEXTAREA:t.EDIT},a={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},r={HORIZONTAL:"horizontal",VERTICAL:"vertical"},s={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},l={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},c=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var d=Object.freeze({EXT_ANDROID:n,CONTAINER_ANDROID:o,ELEMENT_ANDROID:i,SUPPORT_ANDROID:{DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},BOX_ANDROID:a,AXIS_ANDROID:r,LAYOUT_ANDROID:s,XMLNS_ANDROID:l,PREFIX_ANDROID:{MENU:"ic_menu_",DIALOG:"ic_dialog_"},RESERVED_JAVA:c});const h=squared.base.Resource,u=squared.lib.color,p=squared.lib.css,m=squared.lib.util,g=h.STORED;class f extends squared.base.Resource{constructor(t,e){super(t,e),g.styles=new Map,g.themes=new Map,g.dimens=new Map,g.drawables=new Map,g.animators=new Map}static formatOptions(t,e=!1){for(const n in t)if(t.hasOwnProperty(n)){const o=t[n];if("object"==typeof o)for(const t in o){let n=""+o[t];switch(t){case"text":if(!n.startsWith("@string/")&&""!==(n=this.addString(n,"",e))){o[t]=`@string/${n}`;continue}break;case"src":case"srcCompat":if(m.REGEXP_COMPILED.URI.test(n)&&""!==(n=this.addImage({mdpi:n}))){o[t]=`@drawable/${n}`;continue}}const i=u.parseColor(n);if(i){const e=this.addColor(i);""!==e&&(o[t]=`@color/${e}`)}}}return t}static addTheme(...t){for(const e of t){const t=m.isString(e.output.path)?e.output.path:"",n=m.isString(e.output.file)?e.output.file:"themes.xml",o=`${m.trimString(t.trim(),"/")}/${m.trimString(n.trim(),"/")}`,i=g.themes.get(o)||new Map;let a="";if(""===e.name||"."===e.name.charAt(0)){t:for(const t of g.themes.values())for(const e of t.values())if(e.name){a=e.name;break t}""===a&&(a="AppTheme")}else a=e.name;e.name=a+("."===e.name.charAt(0)?e.name:""),f.formatOptions(e.items);const r=i.get(e.name);if(r)for(const t in e.items)r.items[t]=e.items[t];else i.set(e.name,e);g.themes.set(o,i)}}static addString(t,e="",n=!1){if(""!==t){""===e&&(e=t.trim());const o=m.isNumber(t);if(!o||n){for(const[e,n]of g.strings.entries())if(n===t)return e;const n=m.trimString(e.replace(/[^A-Za-z\d]+/g,"_"),"_").split(/_+/);n.length>1?(n.length>4&&(n.length=4),e=n.join("_")):e=n[0],e=e.toLowerCase(),o||/^\d/.test(e)||c.includes(e)?e=`__${e}`:""===e&&(e=`__symbol${Math.ceil(1e5*Math.random())}`),g.strings.has(e)&&(e=f.generateId("string",e)),g.strings.set(e,t)}return e}return""}static addImageSrcSet(t,e=""){const n={},o=t.srcset.trim();if(""!==o){const e=t.src.substring(0,t.src.lastIndexOf("/")+1);for(const t of o.split(m.REGEXP_COMPILED.SEPARATOR)){const o=/^(.+?)\s*(?:(\d*\.?\d*)x)?$/.exec(t.trim());if(o){m.hasValue(o[2])||(o[2]="1");const t=e+m.fromLastIndexOf(o[1]),i=parseFloat(o[2]);i<=.75?n.ldpi=t:i<=1?n.mdpi=t:i<=1.5?n.hdpi=t:i<=2?n.xhdpi=t:i<=3?n.xxhdpi=t:n.xxxhdpi=t}}}return void 0===n.mdpi&&(n.mdpi=t.src),this.addImage(n,e)}static addImage(t,e=""){let n="";if(t.mdpi){n=m.fromLastIndexOf(t.mdpi);const o=m.fromLastIndexOf(n,".").toLowerCase();switch(o){case"bmp":case"cur":case"gif":case"ico":case"jpg":case"png":n=f.insertStoredAsset("images",e+n.substring(0,n.length-o.length-1).replace(/[^\w+]/g,"_"),t);break;default:n=""}}return n}static addImageUrl(t,e=""){return""!==(t=p.resolveURL(t)||m.resolvePath(t))?this.addImage({mdpi:t},e):""}static addColor(t,e=!1){if("string"==typeof t&&(t=u.parseColor(t,void 0,e)),t&&(!t.transparent||e)){const e=t.semiopaque||t.transparent?t.valueAsARGB:t.value;let n=g.colors.get(e);if(n)return n;const o=u.findColorShade(t.value);if(o)return n=e===o.value?o.name:f.generateId("color",o.name),g.colors.set(e,n),n}return""}get userSettings(){return this.application.userSettings}}const y=squared.lib.util;function b(t,e,n,o=0){return(!n||n>=o)&&(t.attr=e,!0)}const T={28:{android:{},app:{},assign:{}},27:{android:{accessibilityHeading:!1,accessibilityPaneTitle:!1,appComponentFactory:!1,buttonCornerRadius:!1,cantSaveState:!1,dialogCornerRadius:!1,fallbackLineSpacing:!1,firstBaselineToTopHeight:!1,fontVariationSettings:!1,lastBaselineToBottomHeight:!1,lineHeight:!1,maxLongVersionCode:!1,outlineAmbientShadowColor:!1,outlineSpotShadowColor:!1,screenReaderFocusable:!1,textFontWeight:!1,ttcIndex:!1,versionCodeMajor:!1,versionMajor:!1,widgetFeatures:!1,windowLayoutInDisplayCutoutMode:!1},app:{},assign:{}},26:{android:{classLoader:!1,navigationBarDividerColor:!1,showWhenLocked:!1,turnScreenOn:!1,windowLightNavigationBar:!1},app:{},assign:{}},25:{android:{fontWeight:!1,justificationMode:!1,layout_marginHorizontal:!1,layout_marginVertical:!1,paddingHorizontal:!1,paddingVertical:!1},app:{},assign:{}},24:{android:{colorSecondary:!1,contextDescription:!1,contextUri:!1,roundIcon:!1,shortcutDisabledMessage:!1,shortcutId:!1,shortcutLongLabel:!1,shortcutShortLabel:!1,showMetadataInPreview:!1},app:{},assign:{}},23:{android:{backupInForeground:!1,bitmap:!1,buttonGravity:!1,canControlMagnification:!1,canPerformGestures:!1,canRecord:!1,collapseIcon:!1,contentInsetEndWithActions:!1,contentInsetStartWithNavigation:!1,contextPopupMenuStyle:!1,countDown:!1,defaultHeight:!1,defaultToDeviceProtectedStorage:!1,defaultWidth:!1,directBootAware:!1,enableVrMode:!1,endX:!1,endY:!1,externalService:!1,fillType:!1,forceHasOverlappingRendering:!1,hotSpotX:!1,hotSpotY:!1,languageTag:!1,level:!1,listMenuViewStyle:!1,maxButtonHeight:!1,networkSecurityConfig:!1,numberPickerStyle:!1,offset:!1,pointerIcon:!1,popupEnterTransition:!1,popupExitTransition:!1,preferenceFragmentStyle:!1,resizeableActivity:!1,startX:!1,startY:!1,subMenuArrow:!1,supportsLocalInteraction:!1,supportsPictureInPicture:!1,textAppearancePopupMenuHeader:!1,tickMark:!1,tickMarkTint:!1,tickMarkTintMode:!1,titleMargin:!1,titleMarginBottom:!1,titleMarginEnd:!1,titleMarginStart:!1,titleMarginTop:!1,tunerCount:!1,use32bitAbi:!1,version:!1,windowBackgroundFallback:!1},app:{},assign:{}},22:{android:{allowUndo:!1,autoVerify:!1,breakStrategy:!1,colorBackgroundFloating:!1,contextClickable:!1,drawableTint:!1,drawableTintMode:!1,end:t=>b(t,"right"),extractNativeLibs:!1,fingerprintAuthDrawable:!1,fraction:!1,fullBackupContent:!1,hyphenationFrequency:!1,lockTaskMode:!1,logoDescription:!1,numbersInnerTextColor:!1,scrollIndicators:!1,showForAllUsers:!1,start:t=>b(t,"left"),subtitleTextColor:!1,supportsAssist:!1,supportsLaunchVoiceAssistFromKeyguard:!1,thumbPosition:!1,titleTextColor:!1,trackTint:!1,trackTintMode:!1,usesCleartextTraffic:!1,windowLightStatusBar:!1},app:{},assign:{}},21:{android:{accessibilityTraversalAfter:!1,accessibilityTraversalBefore:!1,collapseContentDescription:!1,dialogPreferredPadding:!1,resizeClip:!1,revisionCode:!1,searchHintIcon:!1},app:{},assign:{}},20:{android:{actionBarPopupTheme:!1,actionBarTheme:!1,actionModeFindDrawable:!1,actionModeShareDrawable:!1,actionModeWebSearchDrawable:!1,actionOverflowMenuStyle:!1,amPmBackgroundColor:!1,amPmTextColor:!1,ambientShadowAlpha:!1,autoRemoveFromRecents:!1,backgroundTint:!1,backgroundTintMode:!1,banner:!1,buttonBarNegativeButtonStyle:!1,buttonBarNeutralButtonStyle:!1,buttonBarPositiveButtonStyle:!1,buttonTint:!1,buttonTintMode:!1,calendarTextColor:!1,checkMarkTint:!1,checkMarkTintMode:!1,closeIcon:!1,colorAccent:!1,colorButtonNormal:!1,colorControlActivated:!1,colorControlHighlight:!1,colorControlNormal:!1,colorEdgeEffect:!1,colorPrimary:!1,colorPrimaryDark:!1,commitIcon:!1,contentAgeHint:!1,contentInsetEnd:!1,contentInsetLeft:!1,contentInsetRight:!1,contentInsetStart:!1,controlX1:!1,controlX2:!1,controlY1:!1,controlY2:!1,country:!1,datePickerDialogTheme:!1,datePickerMode:!1,dayOfWeekBackground:!1,dayOfWeekTextAppearance:!1,documentLaunchMode:!1,elegantTextHeight:!1,elevation:!1,excludeClass:!1,excludeId:!1,excludeName:!1,fastScrollStyle:!1,fillAlpha:!1,fillColor:!1,fontFeatureSettings:!1,foregroundTint:!1,foregroundTintMode:!1,fragmentAllowEnterTransitionOverlap:!1,fragmentAllowReturnTransitionOverlap:!1,fragmentEnterTransition:!1,fragmentExitTransition:!1,fragmentReenterTransition:!1,fragmentReturnTransition:!1,fragmentSharedElementEnterTransition:!1,fragmentSharedElementReturnTransition:!1,fromId:!1,fullBackupOnly:!1,goIcon:!1,headerAmPmTextAppearance:!1,headerDayOfMonthTextAppearance:!1,headerMonthTextAppearance:!1,headerTimeTextAppearance:!1,headerYearTextAppearance:!1,hideOnContentScroll:!1,indeterminateTint:!1,indeterminateTintMode:!1,inset:!1,isGame:!1,launchTaskBehindSourceAnimation:!1,launchTaskBehindTargetAnimation:!1,layout_columnWeight:!1,layout_rowWeight:!1,letterSpacing:!1,matchOrder:!1,maxRecentsv:!1,maximumAngle:!1,minimumHorizontalAngle:!1,minimumVerticalAngle:!1,multiArch:!1,navigationBarColor:!1,navigationContentDescription:!1,navigationIcon:!1,nestedScrollingEnabled:!1,numbersBackgroundColor:!1,numbersSelectorColor:!1,numbersTextColor:!1,outlineProvider:!1,overlapAnchor:!1,paddingMode:!1,pathData:!1,patternPathData:!1,persistableMode:!1,popupElevation:!1,popupTheme:!1,progressBackgroundTint:!1,progressBackgroundTintMode:!1,progressTint:!1,progressTintMode:!1,propertyXName:!1,propertyYName:!1,queryBackground:!1,recognitionService:!1,relinquishTaskIdentity:!1,reparent:!1,reparentWithOverlay:!1,restrictionType:!1,resumeWhilePausing:!1,reversible:!1,searchIcon:!1,searchViewStyle:!1,secondaryProgressTint:!1,secondaryProgressTintMode:!1,selectableItemBackgroundBorderless:!1,sessionService:!1,setupActivity:!1,showText:!1,slideEdge:!1,splitTrack:!1,spotShadowAlpha:!1,src:(t,e,n)=>(n.svgElement&&(t.obj="app",t.attr="srcCompat"),!0),stackViewStyle:!1,stateListAnimator:!1,statusBarColor:!1,strokeAlpha:!1,strokeColor:!1,strokeLineCap:!1,strokeLineJoin:!1,strokeMiterLimit:!1,strokeWidth:!1,submitBackground:!1,subtitleTextAppearance:!1,suggestionRowLayout:!1,switchStyle:!1,targetName:!1,textAppearanceListItemSecondary:!1,thumbTint:!1,thumbTintMode:!1,tileModeX:!1,tileModeY:!1,timePickerDialogTheme:!1,timePickerMode:!1,timePickerStyle:!1,tintMode:!1,titleTextAppearance:!1,toId:!1,toolbarStyle:!1,touchscreenBlocksFocus:!1,transitionGroup:!1,transitionName:!1,transitionVisibilityMode:!1,translateX:!1,translateY:!1,translationZ:!1,trimPathEnd:!1,trimPathOffset:!1,trimPathStart:!1,viewportHeight:!1,viewportWidth:!1,voiceIcon:!1,windowActivityTransitions:!1,windowAllowEnterTransitionOverlap:!1,windowAllowReturnTransitionOverlap:!1,windowClipToOutline:!1,windowContentTransitionManager:!1,windowContentTransitions:!1,windowDrawsSystemBarBackgrounds:!1,windowElevation:!1,windowEnterTransition:!1,windowExitTransition:!1,windowReenterTransition:!1,windowReturnTransition:!1,windowSharedElementEnterTransition:!1,windowSharedElementExitTransition:!1,windowSharedElementReenterTransition:!1,windowSharedElementReturnTransition:!1,windowSharedElementsUseOverlay:!1,windowTransitionBackgroundFadeDuration:!1,yearListItemTextAppearance:!1,yearListSelectorColor:!1},app:{},assign:{}},19:{android:{allowEmbedded:!1,windowSwipeToDismiss:!1},app:{},assign:{}},18:{android:{accessibilityLiveRegion:!1,addPrintersActivity:!1,advancedPrintOptionsActivity:!1,apduServiceBanner:!1,autoMirrored:!1,category:!1,fadingMode:!1,fromScene:!1,isAsciiCapable:!1,keySet:!1,requireDeviceUnlock:!1,ssp:!1,sspPattern:!1,sspPrefix:!1,startDelay:!1,supportsSwitchingToNextInputMethod:!1,targetId:!1,toScene:!1,transition:!1,transitionOrdering:!1,vendor:!1,windowTranslucentNavigation:!1,windowTranslucentStatus:!1},app:{},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(t,e)=>e<26,canRequestFilterKeyEvents:!1,canRequestTouchExplorationMode:!1,childIndicatorEnd:!1,childIndicatorStart:!1,indicatorEnd:!1,indicatorStart:!1,layoutMode:!1,mipMap:!1,mirrorForRtl:!1,requiredAccountType:!1,requiredForAllUsers:!1,restrictedAccountType:!1,windowOverscan:!1},app:{},assign:{}},16:{android:{checkedTextViewStyle:!1,format12Hour:!1,format24Hour:!1,initialKeyguardLayout:!1,labelFor:!1,layoutDirection:!1,layout_alignEnd:t=>b(t,"layout_alignRight"),layout_alignParentEnd:t=>b(t,"layout_alignParentRight"),layout_alignParentStart:t=>b(t,"layout_alignParentLeft"),layout_alignStart:t=>b(t,"layout_alignLeft"),layout_marginEnd:t=>b(t,"layout_marginRight"),layout_marginStart:t=>b(t,"layout_marginLeft"),layout_toEndOf:t=>b(t,"layout_toRightOf"),layout_toStartOf:t=>b(t,"layout_toLeftOf"),listPreferredItemPaddingEnd:t=>b(t,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:t=>b(t,"listPreferredItemPaddingLeft"),paddingEnd:t=>b(t,"paddingRight"),paddingStart:t=>b(t,"paddingLeft"),permissionFlags:!1,permissionGroupFlags:!1,presentationTheme:!1,showOnLockScreen:!1,singleUser:!1,subtypeId:!1,supportsRtl:!1,textAlignment:!1,textDirection:!1,timeZone:!1,widgetCategory:!1},app:{},assign:{}},15:{android:{fontFamily:!1,importantForAccessibility:!1,isolatedProcess:!1,keyboardLayout:!1,mediaRouteButtonStyle:!1,mediaRouteTypes:!1,parentActivityName:!1},app:{},assign:{}},14:{android:{},app:{},assign:{}},0:{android:{},app:{},assign:{Button:{android:{textAllCaps:"false"}}}}},A={android:{amPmBackgroundColor:(t,e)=>b(t,"headerBackground",e,23),amPmTextColor:(t,e)=>b(t,"headerTextColor",e,23),animationResolution:(t,e)=>e<16,canRequestEnhancedWebAccessibility:(t,e)=>e<26,dayOfWeekBackground:(t,e)=>e<23,dayOfWeekTextAppearance:(t,e)=>e<23,directionDescriptions:(t,e)=>e<23,headerAmPmTextAppearance:(t,e)=>b(t,"headerTextColor",e,23),headerDayOfMonthTextAppearance:(t,e)=>b(t,"headerTextColor",e,23),headerMonthTextAppearance:(t,e)=>b(t,"headerTextColor",e,23),headerTimeTextAppearance:(t,e)=>b(t,"headerTextColor",e,23),headerYearTextAppearance:(t,e)=>b(t,"headerTextColor",e,23),showOnLockScreen:(t,e)=>b(t,"showForAllUsers",e,23),targetDescriptions:(t,e)=>e<23,yearListItemTextAppearance:(t,e)=>b(t,"yearListTextColor",e,23),yearListSelectorColor:(t,e)=>e<23}};var E=Object.freeze({API_ANDROID:T,DEPRECATED_ANDROID:A,getValue:function(t,e,n,o){for(const i of[T[t],T[0]]){const t=y.optionalAsString(i,`assign.${e}.${n}.${o}`);if(y.isString(t))return t}return""}});const S=squared.lib.util,v=squared.lib.xml,w={LEFT:/left/,LEFT_UPPER:/Left/g,RIGHT:/right/,RIGHT_UPPER:/Right/g},R=/([">])(-)?(\d+(?:\.\d+)?px)(["<])/g,_=/[^\w$\-_.]/g;function x(t){return t?t.replace(/@\+?id\//,""):""}function I(t){return Object.assign({android:{},app:{}},t)}function N(t){const e={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(t&&"object"==typeof t)for(const n in e)typeof t[n]==typeof e[n]&&(e[n]=t[n]);return e}function C(t){return t?t.trim().replace(_,"_"):""}function P(t,e=160,n=!1){let o=parseFloat(t);return isNaN(o)?"0dp":(t=(o/=e/160)>=1||0===o?""+Math.floor(o):o.toPrecision(2))+(n?"sp":"dp")}function O(t,e=160,n="dp",o=!1){return"dp"===n||o?t.replace(R,(t,...n)=>n[0]+(n[1]||"")+P(n[2],e,o)+n[3]):t}function L(t,e=4,n=!1){return v.replaceTab(t,e,n)}function M(t,e,n=4){return 0===t?0:0===e?1:parseFloat(Math.max(t/(t+e),0).toPrecision(n))}function D(t,e=!0,n=26){return e&&n>=17&&(t=t.replace(w.LEFT,"start").replace(w.LEFT_UPPER,"Start").replace(w.RIGHT,"end").replace(w.RIGHT_UPPER,"End")),t}function k(...t){return S.joinMap(t,t=>l[t]?`xmlns:${t}="${l[t]}"`:""," ")}var B=Object.freeze({stripId:x,createViewAttribute:I,createStyleAttribute:N,validateString:C,convertUnit:P,replaceUnit:O,replaceTab:L,calculateBias:M,replaceRTL:D,getXmlNs:k}),X=squared.base.NodeList,G=squared.base.Resource;const V=squared.base.lib.enumeration,H=squared.lib.dom,z=squared.lib.util,F=["margin","padding"],W=["Top","Left","Right","Bottom"];function q(t){switch(t){case"justify":case"initial":case"inherit":return"";case"center":return"center_horizontal";default:return t}}function $(t){if(!t.blockWidth){const e=[],n=t.documentRoot&&t.layoutFrame&&1===t.length&&t.has("maxWidth");if(t.autoMargin.leftRight?n?t.renderChildren[0].mergeGravity("layout_gravity","center_horizontal"):e.push("center_horizontal"):t.autoMargin.left?n?t.renderChildren[0].mergeGravity("layout_gravity","right"):e.push("right"):t.autoMargin.right&&e.push("left"),t.autoMargin.topBottom?e.push("center_vertical"):t.autoMargin.top?e.push("bottom"):t.autoMargin.bottom&&e.push("top"),e.length)return t.mergeGravity(t.blockWidth||!t.pageFlow?"gravity":"layout_gravity",...e),!0}return!1}var U=e=>(class n extends e{constructor(t=0,e,n){super(t,e),this.renderChildren=[],this.constraint={horizontal:!1,vertical:!1,current:{}},this._namespaces=new Set(["android","app"]),this._controlName="",this._fontSize=0,this._boxAdjustment=H.newBoxModel(),this._boxReset=H.newBoxModel(),this._containerType=0,this._localSettings={targetAPI:28,supportRTL:!1},this.__android={},this.__app={},n&&n(this)}static documentBody(){if(void 0===n._documentBody){const t=new n(0,document.body);t.hide(),t.setBounds(),n._documentBody=t}return n._documentBody}static getControlName(e){return o[t[e]]}attr(t,e,n="",o=!0){const i={};return this.supported(t,e,i)?(Object.keys(i).length&&(z.isString(i.obj)&&(t=i.obj),z.isString(i.attr)&&(e=i.attr),z.isString(i.value)&&(n=i.value),"boolean"==typeof i.overwrite&&(o=i.overwrite)),super.attr(t,e,n,o)):""}android(t,e="",n=!0){return this.attr("android",t,e,n),this.__android[t]||""}app(t,e="",n=!0){return this.attr("app",t,e,n),this.__app[t]||""}apply(t){const e=Object.assign({},t);super.apply(e);for(const t in e)this.formatted(`${t}="${e[t]}"`)}formatted(t,e=!0){const n=t.match(/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/);n&&this.attr(n[1]||"_",n[2],n[3],e)}anchor(t,e="",n){const o=this.renderParent;if(o)if(o.layoutConstraint){if(void 0===e||void 0===this.constraint.current[t]||n){e&&void 0===n&&(n="parent"===e);const o=s.constraint[t];if(o){if(this.app(this.localizeString(o),e,n),"parent"===e)switch(t){case"left":case"right":this.constraint.horizontal=!0;break;case"top":case"bottom":case"baseline":this.constraint.vertical=!0}return this.constraint.current[t]={documentId:e,horizontal:-1!==z.firstIndexOf(t.toLowerCase(),"left","right")},!0}}}else if(o.layoutRelative){return e&&void 0===n&&(n="true"===e),this.android(this.localizeString(s["true"===e?"relativeParent":"relative"][t]),e,n),!0}return!1}anchorParent(t,e=!1,n=!1){const o=this.renderParent;if(o){const i=t===r.HORIZONTAL;if(o.layoutConstraint){if(e||!this.constraint[t])return this.anchor(i?"left":"top","parent"),this.anchor(i?"right":"bottom","parent"),this.constraint[t]=!0,n&&this.app(`layout_constraint${z.capitalize(t)}_bias`,this[`${t}Bias`]),!0}else if(o.layoutRelative)return this.anchor(i?"left":"top","true"),this.anchor(i?"right":"bottom","true"),!0}return!1}anchorDelete(...t){const e=this.renderParent;if(e)if(e.layoutConstraint)this.delete("app",...z.replaceMap(t,t=>this.localizeString(s.constraint[t])));else if(e.layoutRelative)for(const e of t)""!==this.alignSibling(e)?this.delete("android",s.relative[e],this.localizeString(s.relative[e])):s.relativeParent[e]&&this.delete("android",this.localizeString(s.relativeParent[e]))}anchorClear(){const t=this.renderParent;t&&(t.layoutConstraint?this.anchorDelete(...Object.keys(s.constraint)):t.layoutRelative&&(this.anchorDelete(...Object.keys(s.relativeParent)),this.anchorDelete(...Object.keys(s.relative))))}alignParent(t){const e=this.renderParent;if(e)if(e.layoutConstraint){const e=s.constraint[t];if(e)return"parent"===this.app(this.localizeString(e))||"parent"===this.app(e)}else if(e.layoutRelative){const e=s.relativeParent[t];if(e)return"true"===this.android(this.localizeString(e))||"true"===this.android(e)}return!1}alignSibling(t,e){const n=this.renderParent;if(n)if(e){if(n.layoutConstraint){this.app(this.localizeString(s.constraint[t]),e)}else if(n.layoutRelative){this.android(this.localizeString(s.relative[t]),e)}}else{if(n.layoutConstraint){const e=s.constraint[t],o=this.app(this.localizeString(e))||this.app(e);return""!==o&&"parent"!==o&&o!==n.documentId?o:""}if(n.layoutRelative){const e=s.relative[t];return e?this.android(this.localizeString(e))||this.android(e):""}}return""}horizontalBias(){const t=this.documentParent;if(t!==this){return M(Math.max(0,this.linear.left-t.box.left),Math.max(0,t.box.right-this.linear.right),this.localSettings.constraintPercentAccuracy)}return.5}verticalBias(){const t=this.documentParent;if(t!==this){return M(Math.max(0,this.linear.top-t.box.top),Math.max(0,t.box.bottom-this.linear.bottom),this.localSettings.constraintPercentAccuracy)}return.5}supported(t,e,n={}){if(this.localSettings.targetAPI>0&&this.localSettings.targetAPI<28){const o=A[t];if(o&&"function"==typeof o[e]){const t=o[e](n,this.localSettings.targetAPI,this);if(!t||Object.keys(n).length)return t}for(let o=this.localSettings.targetAPI;o<=28;o++){const i=T[o];if(i&&i[t]&&void 0!==i[t][e]){const o=i[t][e];if("boolean"==typeof o)return o;if("function"==typeof o)return o(n,this.localSettings.targetAPI,this)}}}return!0}combine(...t){const e=[];for(const n of this._namespaces){const o=this[`__${n}`];if(0===t.length||t.includes(n))for(const t in o)e.push(("_"!==n?`${n}:`:"")+`${t}="${o[t]}"`)}return e.sort((t,e)=>t>e||e.startsWith("android:id=")?1:-1)}localizeString(t){return this.hasBit("excludeProcedure",V.NODE_PROCEDURE.LOCALIZATION)?t:D(t,this.localSettings.supportRTL,this.localSettings.targetAPI)}hide(t){t?this.android("visibility","invisible"):super.hide()}clone(t,e=!1,o=!1){const i=new n(t||this.id,this.element);if(Object.assign(i.localSettings,this.localSettings),i.tagName=this.tagName,void 0!==t?i.setControlType(this.controlName,this.containerType):(i.controlId=this.controlId,i.controlName=this.controlName,i.containerType=this.containerType),i.alignmentType=this.alignmentType,i.depth=this.depth,i.visible=this.visible,i.excluded=this.excluded,i.rendered=this.rendered,i.renderDepth=this.renderDepth,i.renderParent=this.renderParent,i.documentParent=this.documentParent,i.documentRoot=this.documentRoot,this.length&&i.retain(this.duplicate()),e){Object.assign(i.unsafe("boxReset"),this._boxReset),Object.assign(i.unsafe("boxAdjustment"),this._boxAdjustment);for(const t of this._namespaces){const e=this[`__${t}`];for(const n in e)i.attr(t,n,"android"===t&&"id"===n?i.documentId:e[n])}}return o&&(i.anchorClear(),i.anchor("left",this.documentId)&&(Object.assign(i.unsafe("boxReset"),{marginLeft:1}),Object.assign(i.unsafe("boxAdjustment"),{marginLeft:0})),i.anchor("top",this.documentId)&&(Object.assign(i.unsafe("boxReset"),{marginTop:1}),Object.assign(i.unsafe("boxAdjustment"),{marginTop:0}))),i.inherit(this,"initial","base","alignment","styleMap"),Object.assign(i.unsafe("cached"),this.unsafe("cached")),i}setControlType(e,n){if(n)this.containerType=n;else if(0===this.containerType)for(const n in o)if(o[n]===e){for(const e in t)if(t[t[e]]===n){this.containerType=t[e];break}break}if(this.controlName=e,""!==this.android("id")&&(this.controlId=x(this.android("id"))),""===this.controlId){const t=this.element;let e="";t&&("parent"===(e=C(t.id||t.name))||c.includes(e))&&(e=`_${e}`),this.controlId=z.convertWord(G.generateId("android",e||z.fromLastIndexOf(this.controlName,".").toLowerCase(),e?0:1)),this.android("id",this.documentId)}}setLayout(){const e=this.absoluteParent,n=this.renderParent,o=this.renderChildren;let i=!0,a=!0;if(this.documentBody&&(!this.hasWidth&&o.some(t=>t.alignParent("right"))&&this.android("layout_width","match_parent",!1),!this.hasHeight&&o.some(t=>t.alignParent("bottom"))&&this.android("layout_height","match_parent",!1)),!this.android("layout_height"))if(!this.inlineStatic&&this.has("height")||this.toInt("height")>0&&!this.cssInitial("height")){const t=this.css("height");if(z.isUnit(t)){const e=this.calculateUnit(t,!1);this.android("layout_height","hidden"===this.css("overflow")&&e<Math.floor(this.box.height)?"wrap_content":z.formatPX(e))}else z.isPercent(t)&&("100%"===t?this.android("layout_height","match_parent"):this.documentParent.has("height")?this.android("layout_height",z.formatPX(Math.ceil(this.bounds.height)-this.contentBoxHeight)):a=!1)}else a=!1;if(this.has("minHeight")&&!this.constraint.minHeight?(this.android("minHeight",this.convertPX(this.css("minHeight"),!1),!1),this.android("layout_height","wrap_content",!1)):a||this.android("layout_height","wrap_content",!1),!this.android("layout_width"))if(!this.inlineStatic&&this.has("width")||this.toInt("width")>0&&!this.cssInitial("width")){const o=this.css("width");if(z.isUnit(o)){const t=n?z.convertInt(n.android("layout_width")):0,i=this.calculateUnit(o);this.android("layout_width",e===n&&t>0&&i>=t?"match_parent":z.formatPX(i))}else z.isPercent(o)?n&&n.is(t.GRID)?(this.android("layout_width","0px",!1),this.android("layout_columnWeight",(parseInt(o)/100).toPrecision(2),!1)):this.android("layout_width","100%"===o?"match_parent":this.convertPX(o)):i=!1}else i=!1;if(this.has("minWidth")&&!this.constraint.minWidth)this.android("minWidth",this.convertPX(this.css("minWidth")),!1),this.android("layout_width","wrap_content",!1);else if(!i){if(e&&n){const i=this.blockStatic&&!this.has("maxWidth")&&(this.htmlElement||this.svgElement);if(this.plainText)return void this.android("layout_width",this.bounds.width>n.box.width&&this.multiline&&this.alignParent("left")?"match_parent":"wrap_content",!1);if(o.some(t=>Math.ceil(t.bounds.width)>=this.box.width&&!t.autoMargin.horizontal&&(n.inlineWidth||t.inlineStatic&&!t.plainText||z.isUnit(t.cssInitial("width")))))return void this.android("layout_width","wrap_content",!1);if(this.flexElement&&n.hasWidth||this.groupParent&&o.some(t=>!(t.plainText&&t.multiline)&&t.linear.width>=this.documentParent.box.width)||i&&(this.documentBody||e.documentBody||e.has("width",32)||e.blockStatic&&(this.singleChild||this.alignedVertically(this.previousSiblings())))||this.layoutFrame&&(2===X.floated(o).size||o.some(t=>t.blockStatic&&(t.autoMargin.leftRight||t.rightAligned))))return void this.android("layout_width","match_parent",!1);if((!(!i&&(this.containerType<t.INLINE||this.inlineFlow||!this.pageFlow||this.tableElement||this.flexElement||n.is(t.GRID)||e.flexElement||e.gridElement))||i)&&(this.linear.width>=e.box.width||this.layoutVertical&&!this.autoMargin.horizontal||!this.documentRoot&&o.some(t=>t.layoutVertical&&!t.autoMargin.horizontal&&!t.hasWidth&&!t.floating)))return void this.android("layout_width","match_parent",!1)}this.android("layout_width","wrap_content",!1)}}setAlignment(){const e=this.renderParent;if(e){let n=q(this.cssInitial("textAlign",!0));if(this.pageFlow){let o="";if(this.inlineVertical&&(e.layoutHorizontal&&!e.support.container.positionRelative||e.is(t.GRID))){const t="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",!0)){case"top":this.mergeGravity(t,"top");break;case"middle":this.mergeGravity(t,"center_vertical");break;case"bottom":this.mergeGravity(t,"bottom")}}!this.blockWidth&&(e.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))&&(this.floating?this.mergeGravity("layout_gravity",this.float):$(this)),this.hasAlign(64)&&(this.hasAlign(512)||this.renderChildren.length&&this.renderChildren.every(t=>t.rightAligned)?o="right":this.groupParent&&!this.renderChildren.some(t=>"right"===t.float)&&(o="left")),e.layoutFrame&&!$(this)&&""!==(o=this.floating?this.float:o)&&(e.inlineWidth||this.singleChild&&!e.documentRoot)&&e.mergeGravity("layout_gravity",o),""!==o&&(this.blockWidth?""!==n&&"right"!==o||(n=o):this.mergeGravity("layout_gravity",o))}else $(this);const o=q(this.cssAscend("textAlign"));""!==o&&"left"!==o&&"start"!==o&&(!e.layoutFrame||!this.pageFlow||this.floating||this.autoMargin.horizontal||this.blockWidth||this.mergeGravity("layout_gravity",o),this.imageElement||""!==n||(n=o)),""===n||this.layoutConstraint||this.mergeGravity("gravity",n)}}mergeGravity(t,...e){const n=new Set,o=this.android(t);if(""!==o)for(const t of o.split("|"))n.add(t.trim());for(const t of e)""!==t&&n.add(this.localizeString(t.trim()));let i="";switch(n.size){case 0:break;case 1:i=q(n.values().next().value);default:let t="",e="",o="";for(const t of["center","fill"]){const e=`${t}_horizontal`,o=`${t}_vertical`;(n.has(t)||n.has(e)&&n.has(o))&&(n.delete(e),n.delete(o),n.add(t))}for(const i of n.values())switch(i){case"justify":case"initial":case"inherit":continue;case"left":case"start":case"right":case"end":case"center_horizontal":t=i;break;case"top":case"bottom":case"center_vertical":e=i;break;default:o+=(""!==o?"|":"")+i}const a=""!==t&&""!==e?`${t}|${e}`:t||e;i=a+(""!==o?(""!==a?"|":"")+o:"")}return""!==i?this.android(t,i):(this.delete("android",t),"")}setLineHeight(t){const e=t-(this.hasHeight?this.height:this.bounds.height);e>0?(this.modifyBox(2,Math.floor(e/2)-(this.inlineVertical?z.convertInt(this.verticalAlign):0)),this.modifyBox(8,Math.ceil(e/2))):this.hasHeight||0!==this.multiline||(this.android("minHeight",z.formatPX(t)),this.mergeGravity("gravity","center_vertical"))}applyOptimizations(){if(this.renderParent)switch(this.autoSizeBoxModel(),this.alignHorizontalLayout(),this.alignVerticalLayout(),this.cssAscend("visibility",!0)){case"hidden":case"collapse":this.hide(!0)}}applyCustomizations(){for(const t of[T[0],T[this.localSettings.targetAPI]])if(t&&t.assign)for(const e of[this.tagName,this.controlName]){const n=t.assign[e];if(n)for(const t in n)for(const e in n[t])this.attr(t,e,n[t][e],this.localSettings.customizationsOverwritePrivilege)}}setBoxSpacing(){const e={marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},n=this.supported("android","layout_marginHorizontal");for(let o=0;o<F.length;o++){const i=F[o];for(const t of W){const n=i+t;let o=0!==this._boxReset[n]||"marginRight"===n&&this.inline&&this.bounds.right>=this.documentParent.box.right?0:this[n];e[n]=o+=this._boxAdjustment[n]}const a=0===o?"layout_margin":"padding",r=`${i}Top`,s=`${i}Right`,l=`${i}Bottom`,c=`${i}Left`,d=this.localizeString("Left"),h=this.localizeString("Right"),u=this.renderParent;let p=0,m=0,g=0;!n||0===o&&u&&u.is(t.GRID)||(e[r]===e[s]&&e[s]===e[l]&&e[l]===e[c]?p=e[r]:(e[c]===e[s]&&(m=e[c]),e[r]===e[l]&&(g=e[r]))),0!==p?this.android(a,z.formatPX(p)):(0!==m?this.android(`${a}Horizontal`,z.formatPX(m)):(0!==e[c]&&this.android(a+d,z.formatPX(e[c])),0!==e[s]&&this.android(a+h,z.formatPX(e[s]))),0!==g?this.android(`${a}Vertical`,z.formatPX(g)):(0!==e[r]&&this.android(`${a}Top`,z.formatPX(e[r])),0!==e[l]&&this.android(`${a}Bottom`,z.formatPX(e[l]))))}}autoSizeBoxModel(){if(!this.hasBit("excludeProcedure",V.NODE_PROCEDURE.AUTOFIT)){const e=this.renderParent;let n=z.convertInt(this.android("layout_width")),o=z.convertInt(this.android("layout_height"));if(this.is(t.BUTTON)&&0===o)this.has("minHeight")||this.android("layout_height",z.formatPX(this.bounds.height+("outset"===this.css("borderStyle")?z.convertInt(this.css("borderWidth")):0)));else if(this.is(t.LINE))"HR"!==this.tagName&&o>0&&this.toInt("height",!0)>0&&this.android("layout_height",z.formatPX(o+this.borderTopWidth+this.borderBottomWidth));else if(e){let t=!1;this.tableElement?t="content-box"===this.css("boxSizing")||z.isUserAgent(24):this.styleElement&&!this.hasBit("excludeResource",V.NODE_RESOURCE.BOX_SPACING)&&("border-box"===this.css("boxSizing")||e.tableElement||(n>0&&this.toInt("width",!this.imageElement)>0&&this.contentBoxWidth>0?this.android("layout_width",z.formatPX(n+this.contentBoxWidth)):this.imageElement&&this.singleChild&&(n=z.convertInt(e.android("layout_width")))>0&&e.android("layout_width",z.formatPX(n+this.marginLeft+this.contentBoxWidth)),o>0&&this.toInt("height",!this.imageElement)>0&&this.contentBoxHeight>0?this.android("layout_height",z.formatPX(o+this.contentBoxHeight)):this.imageElement&&this.singleChild&&(o=z.convertInt(e.android("layout_height")))>0&&e.android("layout_height",z.formatPX(o+this.marginTop+this.contentBoxHeight))),t=!0),t&&this.visibleStyle.borderWidth&&(this.modifyBox(256,this.borderLeftWidth),this.modifyBox(64,this.borderRightWidth),this.modifyBox(32,this.borderTopWidth),this.modifyBox(128,this.borderBottomWidth))}}}alignHorizontalLayout(){if(this.layoutHorizontal){if(this.layoutLinear){const t=this.renderChildren;let e;t.some(t=>t.floating)&&!t.some(t=>t.imageElement&&t.baseline)?this.android("baselineAligned","false"):(e=X.baseline(t.filter(t=>t.baseline&&!t.layoutRelative&&!t.layoutConstraint),!0)[0])&&this.android("baselineAlignedChildIndex",""+t.indexOf(e));let n=this.lineHeight;this.renderEach(t=>n=Math.max(n,t.lineHeight)),n>0&&this.setLineHeight(n)}if(!this.hasAlign(4096)&&!this.hasAlign(512)&&!this.visibleStyle.background){const t=this.find(t=>"left"===t.float)||this.renderChildren[0];if(t&&t.marginLeft<0){const e=Math.abs(t.marginLeft);e===this.marginLeft?(this.modifyBox(16,null),t.modifyBox(16,null)):e<this.marginLeft?(this.modifyBox(16,t.marginLeft),t.modifyBox(16,null)):(this.modifyBox(16,null),t.modifyBox(16,this.marginLeft))}}}}alignVerticalLayout(){const t=this.renderParent;if(t&&!t.layoutHorizontal){const t=this.lineHeight;if(t>0){const e=()=>{const e=this.android("minHeight"),n=t+this.contentBoxHeight;z.convertInt(e)<n&&(this.android("minHeight",z.formatPX(n)),this.mergeGravity("gravity","center_vertical"))};0===this.length?this.layoutHorizontal||(this.support.lineHeight||this.inlineStatic&&this.visibleStyle.background?this.setLineHeight(t):e()):this.layoutVertical&&this.renderEach(e=>{e.layoutHorizontal||e.setLineHeight(t)})}}}get documentId(){return this.controlId?`@+id/${this.controlId}`:""}set anchored(t){this.constraint.horizontal=t,this.constraint.vertical=t}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}set containerType(t){this._containerType=t}get containerType(){if(0===this._containerType){const t=i[this.tagName]||0;0!==t&&(this._containerType=t)}return this._containerType||0}get layoutFrame(){return this.is(t.FRAME)}get layoutLinear(){return this.is(t.LINEAR)}get layoutRelative(){return this.is(t.RELATIVE)}get layoutConstraint(){return this.is(t.CONSTRAINT)}get support(){const t=this.unsafe("cached")||{};return void 0===t.support&&(t.support={lineHeight:this.textElement&&this.supported("android","lineHeight"),container:{positionRelative:this.layoutRelative||this.layoutConstraint}}),t.support}get inlineWidth(){return"wrap_content"===this.android("layout_width")}get inlineHeight(){return"wrap_content"===this.android("layout_height")}get blockWidth(){return"match_parent"===this.android("layout_width")}get blockHeight(){return"match_parent"===this.android("layout_height")}get singleChild(){return this.renderParent?1===this.renderParent.length:!(!this.parent||0===this.parent.id)&&1===this.parent.length}get fontSize(){return 0===this._fontSize&&(this._fontSize=z.calculateUnit(this.css("fontSize"))||16),this._fontSize}set localSettings(t){Object.assign(this._localSettings,t)}get localSettings(){return this._localSettings}});class Y extends(U(squared.base.Node)){}class j extends(U(squared.base.NodeGroup)){constructor(t,e,n,o){super(t,void 0,o),this.tagName=`${e.tagName}_GROUP`,this.documentParent=e.documentParent,this.retain(n)}}var K='<?xml version="1.0" encoding="utf-8"?>\n{:0}',Z=squared.base.NodeList;const J=squared.base.lib.enumeration,Q=squared.lib.color,tt=squared.lib.css,et=squared.lib.dom,nt=squared.lib.element,ot=squared.lib.math,it=squared.lib.util,at=squared.lib.xml,rt=[r.HORIZONTAL,r.VERTICAL],st=/^attr[A-Z]/;function lt(t,e){for(const n of t){const t=n[0],o=n[n.length-1];t.anchor(e?"left":"top","parent"),o.anchor(e?"right":"bottom","parent");for(let o=0;o<n.length;o++){const i=n[o],a=n[o-1],r=n[o+1];e?i.app("layout_constraintVertical_bias","0"):o>0&&i.anchor("left",t.documentId),r&&i.anchor(e?"rightLeft":"bottomTop",r.documentId),a&&i.anchor(e?"leftRight":"topBottom",a.documentId),vt.setConstraintDimension(i),i.anchored=!0}e?t.app("layout_constraintHorizontal_chainStyle","spread_inside"):t.app("layout_constraintVertical_chainStyle","packed")}}function ct(t){if(t.some(t=>t.floating)){const e=t.slice(0).sort((t,e)=>{if(t.floating&&!e.floating)return"left"===t.float?-1:1;if(!t.floating&&e.floating)return"left"===e.float?1:-1;if(t.floating&&e.floating){if(t.float!==e.float)return"left"===t.float?-1:1;if("right"===t.float&&"right"===e.float)return-1}return 0});if(!it.isEqual(t,e))return t.length=0,it.concatArray(t,e),!0}return!1}function dt(t,e){e.lineHeight>0?e.setLineHeight(e.lineHeight):t.lineHeight>0&&e.setLineHeight(t.lineHeight+e.paddingTop+e.paddingBottom)}function ht(t,e){for(const n of e)n!==t&&(n.imageElement&&n.actualHeight>t.actualHeight?n.renderParent&&it.withinRange(n.linear.top,n.renderParent.box.top)&&n.anchor("top","true"):(n.element&&0===n.length||n.layoutHorizontal&&n.renderChildren.every(t=>t.baseline))&&n.anchor("baseline",t.documentId))}function ut(e){return it.filterArray(e,t=>"text-bottom"===t.verticalAlign).sort((e,n)=>e.bounds.height===n.bounds.height?e.is(t.SELECT)?1:-1:e.bounds.height>n.bounds.height?-1:1)[0]}function pt(t,e=!1){t.textElement&&"center"!==t.cssAscend("textAlign",!0)&&!t.hasWidth&&!t.multiline&&(e||t.textContent.trim().split(" ").length>0)&&t.android("singleLine","true")}function mt(t,e,n,o=!1){return t>0?(o||(t-=e[`padding${n}`]),e.documentBody&&(t-=e[`margin${n}`]),Math.max(t,0)):t}function gt(t,e){if("left"===e.float){if(e.marginRight<0){return t.modifyBox(16,e.bounds.width+(e.hasWidth?e.paddingLeft+e.borderLeftWidth:0)-Math.abs(e.marginRight)),t.anchor("left",e.documentId),e.modifyBox(4,null),!0}}else if("right"===t.float&&"right"===e.float&&e.marginLeft<0){const n=Math.abs(e.marginLeft);return n<e.bounds.width&&t.modifyBox(4,e.bounds.width-n),t.anchor("right",e.documentId),e.modifyBox(16,null),!0}return!1}function ft(t,e){const n=t.cssInitial(`min${e}`),o=t.cssInitial(`max${e}`);it.isUnit(n)&&(t.app(`layout_constraint${e}_min`,n),t.constraint.minWidth=!0),it.isUnit(o)&&(t.app(`layout_constraint${e}_max`,o),t.constraint.minHeight=!0)}function yt(t,e,n,o){if(it.isPercent(n))if(o)t.android(`layout_${e.toLowerCase()}`,t.convertPX(n,"Width"===e));else if("100%"!==n){t.app(`layout_constraint${e}_percent`,(parseInt(n)/100+(t.actualParent?t.contentBoxWidth/t.actualParent.box.width:0)).toPrecision(t.localSettings.constraintPercentAccuracy||4)),t.android(`layout_${e.toLowerCase()}`,"0px")}}function bt(t,e=!1){const n=t.has("width")?t.css("width"):"";yt(t,"Width",n,e)}function Tt(t,e=!1){if(t.documentParent.hasHeight){const n=t.has("height")?t.css("height"):"";yt(t,"Height",n,e)}}function At(t){let e="";for(const n in l)-1!==t.indexOf(`${n}:`)&&(e+=`\n\t${k(n)}`);return e}function Et(t){if("rtl"===t.dir&&t.android(t.length?"layoutDirection":"textDirection","rtl"),t.styleElement){const e=tt.getDataSet(t.element,"android");for(const n in e)if(st.test(n)){const o=it.capitalize(n.substring(4),!1);for(const i of e[n].split(";")){const[e,n]=i.split("::");e&&n&&t.attr(o,e,n)}}}return St(t,t.renderDepth+1)}function St(t,e){const n="\t".repeat(e);let o="";for(const e of t.combine())o+=`\n${n+e}`;return o}class vt extends squared.base.Controller{constructor(){super(...arguments),this.localSettings={baseTemplate:K,layout:{pathName:"res/layout",fileExtension:"xml"},unsupported:{excluded:new Set(["BR"]),tagName:new Set(["OPTION","INPUT:hidden","MAP","AREA","IFRAME","svg"])},relative:{boxWidthWordWrapPercent:.9,superscriptFontScale:-4,subscriptFontScale:-4},constraint:{withinParentBottomOffset:3.5,percentAccuracy:4}}}static evaluateAnchors(t){const e=[],n=[];for(const o of t)o.constraint.horizontal&&e.push(o),o.constraint.vertical&&n.push(o);let o=-1;for(;++o<t.length;){const i=t[o];if(!i.constraint.horizontal)for(const t in i.constraint.current){const n=i.constraint.current[t];if(n.horizontal&&e.find(t=>t.documentId===n.documentId)){i.constraint.horizontal=!0,e.push(i),o=-1;break}}if(!i.constraint.vertical)for(const t in i.constraint.current){const e=i.constraint.current[t];if(!e.horizontal&&n.find(t=>t.documentId===e.documentId)){i.constraint.vertical=!0,n.push(i),o=-1;break}}}}static setConstraintDimension(t){bt(t),Tt(t),ft(t,"Width"),ft(t,"Height")}static setFlexDimension(t,e){const n=e?"width":"height",o=e?"height":"width";let i=t.flexbox.basis;if("auto"!==i&&(it.isPercent(i)?"0%"!==i&&(t.app(`layout_constraint${e?"Width":"Height"}_percent`,(parseInt(i)/100).toPrecision(2)),i=""):it.isUnit(i)&&(t.android(`layout_${n}`,t.convertPX(i)),i="")),""!==i){const o=t.has(n)?t.css(n):"";t.flexbox.grow>0?(t.android(`layout_${n}`,"0px"),t.app(`layout_constraint${e?"Horizontal":"Vertical"}_weight`,""+t.flexbox.grow)):it.isUnit(o)?t.android(`layout_${n}`,o):t.flexbox.shrink>1?t.android(`layout_${n}`,"wrap_content"):e?bt(t):Tt(t),t.flexbox.shrink<1&&t.app(`layout_constrained${e?"Width":"Height"}`,"true")}const a=t.has(o)?t.css(o):"";it.isUnit(a)?t.android(`layout_${o}`,a):e?Tt(t,!0):bt(t,!0),ft(t,"Width"),ft(t,"Height")}finalize(t){const e=t.templates;if(this.userSettings.showAttributes)for(const n of t.cache)if(n.visible){const t=at.formatPlaceholder(n.id,"@");if(1===e.length)e[0].content=e[0].content.replace(t,Et(n));else for(const o of e)if(-1!==o.content.indexOf(t)){o.content=o.content.replace(t,Et(n));break}}for(const t of e)t.content=this.removePlaceholders(L(O(t.content.replace(/{#0}/,At(t.content)),this.userSettings.resolutionDPI,this.userSettings.convertPixels),this.userSettings.insertSpaces))}processUnknownParent(e){const n=e.node;let o,i=!1;if(n.has("columnCount"))e.columnCount=n.toInt("columnCount"),e.setType(t.CONSTRAINT,256,4);else if(e.some(t=>!t.pageFlow))e.setType(t.CONSTRAINT,32,2);else if(1===e.length){const a=n.item(0);n.documentRoot&&function(t,e){if(e.element&&t.dataset.target){const n=document.getElementById(t.dataset.target);return null!==n&&n!==e.element}return!1}(a,n)?(n.hide(),i=!0):!(this.userSettings.collapseUnattributedElements&&n.element&&n.positionStatic)||n.elementId||n.dataset.use||n.dataset.target||n.hasWidth||n.hasHeight||n.has("maxWidth")||n.has("maxHeight")||n.visibleStyle.background||n.has("textAlign")||n.has("verticalAlign")||!(n.toInt("lineHeight")>0)||n.rightAligned||n.autoMargin.horizontal||n.groupParent||n.companion||this.hasAppendProcessing(n.id)?e.setType(t.FRAME,2048):(a.documentRoot=n.documentRoot,a.siblingIndex=n.siblingIndex,a.parent=e.parent,n.renderAs=a,n.resetBox(510,a,!0),n.hide(),o=a)}else e.init(),n.element&&nt.hasLineBreak(n.element,!0)?e.setType(t.LINEAR,16,2):this.checkConstraintFloat(e)?e.setType(t.CONSTRAINT,1024):e.linearX?(this.checkFrameHorizontal(e)?e.renderType=72:this.checkConstraintHorizontal(e)?e.setType(t.CONSTRAINT):this.checkRelativeHorizontal(e)?e.setType(t.RELATIVE):(e.setType(t.LINEAR),e.floated.size&&(e.renderPosition=ct(e.children))),e.add(8)):e.linearY?e.setType(t.LINEAR,16,n.documentRoot?2:0):e.every(t=>t.inlineFlow)?this.checkFrameHorizontal(e)?e.renderType=72:e.setType(t.RELATIVE,8,2):e.some(t=>t.alignedVertically(t.previousSiblings(),e.children,e.cleared))?e.setType(t.LINEAR,16,2):e.setType(t.CONSTRAINT,2);return{layout:e,next:i,renderAs:o}}processUnknownChild(e){const n=e.node,o=n.visibleStyle;let i=!1;return n.inlineText||o.borderWidth&&n.textContent.length?e.setType(t.TEXT):o.backgroundImage&&!o.backgroundRepeat&&(!n.inlineText||n.toInt("textIndent")+n.bounds.width<0)?(e.setType(t.IMAGE,2048),n.exclude({resource:J.NODE_RESOURCE.FONT_STYLE|J.NODE_RESOURCE.VALUE_STRING})):n.block&&(o.borderWidth||o.backgroundImage||o.paddingVertical)?e.setType(t.LINE):n.documentRoot||(!this.userSettings.collapseUnattributedElements||!n.element||0!==n.bounds.height||o.background||n.elementId||n.dataset.use?e.setType(o.background?t.TEXT:t.FRAME):(n.hide(),i=!0)),{layout:e,next:i}}processTraverseHorizontal(t,e){const{node:n,parent:o,children:i}=t;return this.checkFrameHorizontal(t)?(t.node=this.createNodeGroup(n,i,o),t.renderType|=72):void 0===e||t.length!==e.length?(t.node=this.createNodeGroup(n,i,o),this.processLayoutHorizontal(t)):o.alignmentType|=8,{layout:t}}processTraverseVertical(e,n){const{node:o,parent:i,children:a,floated:r,cleared:s}=e;return!r.size||!s.size||1===r.size&&e.every((t,n)=>0===n||n===e.length-1||s.has(t))?void 0===n||e.length!==n.length?i.layoutVertical||(e.node=this.createNodeGroup(o,a,i),e.setType(t.LINEAR,16)):i.alignmentType|=16:(e.node=this.createNodeGroup(o,a,i),e.renderType|=80),{layout:e}}processLayoutHorizontal(e,n=!1){let o=0;return this.checkConstraintFloat(e)?e.setType(t.CONSTRAINT,1024):this.checkConstraintHorizontal(e)?o=t.CONSTRAINT:this.checkRelativeHorizontal(e)?o=t.RELATIVE:(!n||e.linearX&&!e.floated.has("right"))&&(o=t.LINEAR,e.floated.size&&(e.renderPosition=ct(e.children))),0!==o&&e.setType(o,8),{layout:e}}sortRenderPosition(t,e){if(t.layoutConstraint&&e.some(t=>!t.pageFlow)){const n=[],o=[],i=[];for(const a of e)a.pageFlow||a.actualParent!==t?o.push(a):a.zIndex>=0?i.push(a):n.push(a);return it.concatMultiArray(it.sortArray(n,!0,"zIndex","id"),o,it.sortArray(i,!0,"zIndex","id"))}return[]}checkFrameHorizontal(t){const[e,n]=t.partition(t=>t.floating);if(2===t.floated.size||t.cleared.size||t.some(t=>t.pageFlow&&t.autoMargin.horizontal))return!0;if(n.length){if(t.floated.has("right"))return!0;if(!this.userSettings.floatOverlapDisabled&&t.floated.has("left")&&n.some(t=>t.blockStatic)){let t=1/0;for(const e of n)t=Math.min(t,e.siblingIndex);return it.replaceMap(e,t=>t.siblingIndex).some(e=>e<t)}}return!1}checkConstraintFloat(t){return 1===t.floated.size&&t.every(t=>t.floating&&t.marginLeft>=0&&t.marginRight>=0&&(!t.positionRelative||t.left>=0&&t.top>=0))}checkConstraintHorizontal(t){let e=!0;for(let n=1;n<t.length;n++)if(t.children[n-1].bounds.height!==t.children[n].bounds.height){e=!1;break}return!e&&!t.parent.hasHeight&&t.some(t=>"bottom"===t.verticalAlign)&&t.every(t=>t.inlineVertical&&(t.baseline||"bottom"===t.verticalAlign))}checkRelativeHorizontal(t){return 2!==t.floated.size&&t.some(t=>t.positionRelative||t.textElement||t.imageElement||!t.baseline)}setConstraints(){for(const t of this.cache)if(t.visible&&(t.layoutRelative||t.layoutConstraint)&&!t.hasBit("excludeProcedure",J.NODE_PROCEDURE.CONSTRAINT)){const e=t.renderFilter(t=>!t.positioned);if(e.length)if(t.layoutRelative)this.processRelativeHorizontal(t,e);else if(t.layoutConstraint){const[n,o]=it.partitionArray(e,t=>t.pageFlow);let i=t.box.bottom;if(o.length){t.renderEach(t=>i=Math.max(i,t.linear.bottom));for(const e of o)if(!e.positionAuto&&(e.documentParent===e.absoluteParent||"fixed"===e.position)){if(e.hasWidth&&e.autoMargin.horizontal?e.has("left")&&e.autoMargin.right?(e.anchor("left","parent"),e.modifyBox(16,e.left)):e.has("right")&&e.autoMargin.left?(e.anchor("right","parent"),e.modifyBox(4,e.right)):(e.anchorParent(r.HORIZONTAL),e.modifyBox(16,e.left),e.modifyBox(4,e.right)):(e.has("left")&&(e.anchor("left","parent"),e.modifyBox(16,mt(e.left,t,"Left"))),!e.has("right")||e.hasWidth&&e.has("left")||(e.anchor("right","parent"),e.modifyBox(4,mt(e.right,t,"Right")))),e.hasHeight&&e.autoMargin.vertical)e.has("top")&&e.autoMargin.bottom?(e.anchor("top","parent"),e.modifyBox(2,e.top)):e.has("bottom")&&e.autoMargin.top?(e.anchor("bottom","parent"),e.modifyBox(8,e.bottom)):(e.anchorParent(r.VERTICAL),e.modifyBox(2,e.top),e.modifyBox(8,e.bottom));else{if(e.has("top")){const n=t.valueBox(32);e.anchor("top","parent"),e.modifyBox(2,mt(e.top,t,"Top",1===n[0]))}if(e.has("bottom")&&(!e.hasHeight||!e.has("top"))){const n=t.valueBox(128);e.anchor("bottom","parent"),e.modifyBox(8,mt(e.bottom,t,"Bottom",1===n[0]))}}e.positioned=!0}}if(t.layoutHorizontal)this.processConstraintHorizontal(t,n);else if(t.hasAlign(256))this.processConstraintColumn(t,n);else if(n.length>1)this.processConstraintChain(t,n,i);else for(const e of n)e.autoMargin.leftRight||e.inlineStatic&&"center"===e.cssAscend("textAlign",!0)?e.anchorParent(r.HORIZONTAL):e.rightAligned?e.anchor("right","parent"):(it.withinRange(e.linear.left,t.box.left)||e.linear.left<t.box.left)&&e.anchor("left","parent"),(it.withinRange(e.linear.top,t.box.top)||e.linear.top<t.box.top)&&e.anchor("top","parent"),this.withinParentBottom(e.linear.bottom,i)&&e.actualParent&&!e.actualParent.documentBody&&e.anchor("bottom","parent"),vt.setConstraintDimension(e);vt.evaluateAnchors(n);for(const o of e)o.anchored||(this.addGuideline(o,t),o.pageFlow&&vt.evaluateAnchors(n)),!o.hasWidth&&o.alignParent("left")&&o.alignParent("right")&&o.android("layout_width","match_parent"),!o.hasHeight&&o.alignParent("top")&&o.alignParent("bottom")&&o.android("layout_height","match_parent")}}}renderNodeGroup(e){const{node:n,parent:o,containerType:i,alignmentType:a,rowCount:s,columnCount:l}=e,c=I();let d=!1;switch(i){case t.LINEAR:it.hasBit(a,16)?(c.android.orientation=r.VERTICAL,d=!0):it.hasBit(a,8)&&(c.android.orientation=r.HORIZONTAL,d=!0);break;case t.GRID:c.android.rowCount=s?""+s:"",c.android.columnCount=l?""+l:"2",d=!0;break;case t.FRAME:case t.RELATIVE:case t.CONSTRAINT:d=!0}if(d){const t=n.dataset.use?void 0:n.dataset.target,e=Y.getControlName(i);return n.alignmentType|=a,n.setControlType(e,i),n.render(t?this.application.resolveTarget(t,n):o),n.apply(c),this.getEnclosingTag(e,n.id,t?-1:n.renderDepth,at.formatPlaceholder(n.id))}return""}renderNode(e){const{node:n,parent:i,containerType:a,alignmentType:s}=e;n.alignmentType|=s;const l=Y.getControlName(a);n.setControlType(l,a);const c=n.dataset.use?void 0:n.dataset.target;switch(n.element&&n.element.tagName){case"IMG":if(!n.hasBit("excludeResource",J.NODE_RESOURCE.IMAGE_SOURCE)){const e=n.element,a=n.has("width",32),r=n.has("height",32);let s=n.toInt("width"),d=n.toInt("height"),h="";if(a||r)h=a&&r?"fitXY":"fitCenter";else{if(0===s){const t=/width="(\d+)"/.exec(e.outerHTML);t&&(s=parseInt(t[1]),n.css("width",it.formatPX(t[1]),!0))}if(0===d){const t=/height="(\d+)"/.exec(e.outerHTML);t&&(d=parseInt(t[1]),n.css("height",it.formatPX(t[1]),!0))}switch(n.css("objectFit")){case"contain":h="centerInside";break;case"cover":h="centerCrop";break;case"scale-down":h="fitCenter";break;case"none":h="matrix";break;default:h="fitXY"}}n.android("scaleType",h),(s>0&&0===d||0===s&&d>0)&&n.android("adjustViewBounds","true"),n.baseline&&n.android("baselineAlignBottom","true");const u=f.addImageSrcSet(e);if(""!==u&&n.android("src",`@drawable/${u}`),!n.pageFlow&&n.left<0||n.top<0){const e=n.absoluteParent;if(e&&"hidden"===e.css("overflow")){const e=this.application.createNode(nt.createElement(n.actualParent?n.actualParent.element:null));return e.setControlType(o.FRAME,t.FRAME),e.inherit(n,"base"),e.exclude({procedure:J.NODE_PROCEDURE.ALL,resource:J.NODE_RESOURCE.ALL}),e.cssApply({position:n.position,zIndex:""+n.zIndex}),i.appendTry(n,e),this.cache.append(e),e.android("layout_width",s>0?s<i.box.width?it.formatPX(s):"match_parent":"wrap_content"),e.android("layout_height",d>0?d<i.box.height?it.formatPX(d):"match_parent":"wrap_content"),e.render(c?this.application.resolveTarget(c,e):i),e.companion=n,e.saveAsInitial(),n.modifyBox(2,n.top),n.modifyBox(16,n.left),n.render(e),this.getEnclosingTag(o.FRAME,e.id,c?-1:e.renderDepth,this.getEnclosingTag(l,n.id,c?0:n.renderDepth))}}}break;case"TEXTAREA":{const t=n.element;n.android("minLines","2"),t.rows>2&&n.android("lines",""+t.rows),t.maxLength>0&&n.android("maxLength",""+t.maxLength),!n.hasWidth&&t.cols>0&&n.css("width",it.formatPX(8*t.cols),!0),n.android("hint",t.placeholder),n.android("scrollbars",r.VERTICAL),n.android("inputType","textMultiLine"),n.overflowX&&n.android("scrollHorizontally","true"),n.cssInitial("verticalAlign")||n.css("verticalAlign","text-bottom",!0);break}case"SELECT":n.element.size>1&&!n.cssInitial("verticalAlign")&&n.css("verticalAlign","text-bottom",!0);break;case"INPUT":{const t=n.element;switch(t.type){case"password":n.android("inputType","textPassword");break;case"text":n.android("inputType","text");break;case"range":it.hasValue(t.min)&&n.android("min",t.min),it.hasValue(t.max)&&n.android("max",t.max),it.hasValue(t.value)&&n.android("progress",t.value);break;case"image":if(!n.hasBit("excludeResource",J.NODE_RESOURCE.IMAGE_SOURCE)){const e=f.addImage({mdpi:t.src});""!==e&&n.android("src",`@drawable/${e}`,!1)}}switch(t.type){case"text":case"search":case"tel":case"url":case"email":case"password":!n.hasWidth&&t.size>0&&n.css("width",it.formatPX(8*t.size),!0)}break}}if(n.inlineVertical)switch(n.verticalAlign){case"sub":n.modifyBox(8,Math.ceil(n.fontSize/this.localSettings.relative.subscriptFontScale));break;case"super":n.modifyBox(2,Math.ceil(n.fontSize/this.localSettings.relative.superscriptFontScale))}switch(n.controlName){case o.TEXT:const t=[];if(n.overflowX&&t.push(r.HORIZONTAL),n.overflowY&&t.push(r.VERTICAL),t.length&&n.android("scrollbars",t.join("|")),n.has("letterSpacing")&&n.android("letterSpacing",n.css("letterSpacing")),"justify"===n.css("textAlign")&&n.android("justificationMode","inter_word"),n.has("textShadow")){const t=n.css("textShadow");[/^(rgba?\(\d+, \d+, \d+(?:, [\d.]+)?\)) ([\d.]+[a-z]+) ([\d.]+[a-z]+) ([\d.]+[a-z]+)$/,/^([\d.]+[a-z]+) ([\d.]+[a-z]+) ([\d.]+[a-z]+) (.+)$/].some((e,o)=>{const i=t.match(e);if(i){const t=Q.parseColor(i[0===o?1:4]);if(t){const e=f.addColor(t);""!==e&&n.android("shadowColor",`@color/${e}`)}return n.android("shadowDx",""+it.convertInt(i[0===o?2:1])),n.android("shadowDy",""+it.convertInt(i[0===o?3:2])),n.android("shadowRadius",""+it.convertInt(i[0===o?4:3])),!0}return!1})}n.lineHeight>0&&n.multiline&&(n.support.lineHeight?n.android("lineHeight",it.formatPX(n.lineHeight)):n.android("lineSpacingExtra",it.formatPX(n.lineHeight/2))),"nowrap"===n.css("whiteSpace")&&n.android("singleLine","true");break;case o.BUTTON:n.cssInitial("verticalAlign")||n.css("verticalAlign","text-bottom",!0);break;case o.LINE:n.hasHeight||n.android("layout_height",it.formatPX(n.contentBoxHeight||1))}return(n.textElement||n.imageElement||n.svgElement)&&(n.has("maxWidth")&&n.android("maxWidth",n.convertPX(n.css("maxWidth"))),n.has("maxHeight")&&n.android("maxHeight",n.convertPX(n.css("maxHeight"),!1))),n.render(c?this.application.resolveTarget(c,n):i),this.getEnclosingTag(l,n.id,c?-1:n.renderDepth)}renderNodeStatic(t,e,n={},o="",i="",a,r){const s=Math.max(0,e);void 0===a?a=new Y(0,void 0,this.afterInsertNode):(a.renderDepth=s,a.rendered=!0),a.apply(n),a.android("layout_width",o,!1),a.android("layout_height",i,!1),0!==a.containerType&&""!==a.controlName||a.setControlType(t);let l=this.getEnclosingTag(t,a.id,a.documentRoot||0!==e?e:-1,r?at.formatPlaceholder(a.id):"");return this.userSettings.showAttributes&&0===a.id&&(l=l.replace(at.formatPlaceholder(a.id,"@"),St(a,s+1))),n.documentId=a.documentId,l}renderSpace(t,e,n="",i=0,a=0,r){return r=I(r),it.isPercent(e)&&(r.android.layout_columnWeight=(parseInt(e)/100).toPrecision(2),e="0px"),it.isPercent(n)&&(r.android.layout_rowWeight=(parseInt(n)/100).toPrecision(2),n="0px"),i>0&&(r.android.layout_columnSpan=""+i),a>0&&(r.android.layout_rowSpan=""+a),this.renderNodeStatic(o.SPACE,t,r,e,it.hasValue(n)?n:"wrap_content")}addGuideline(t,e,n="",i=!1,a=!1){const s=e.groupParent?e:t.documentParent;rt.forEach(l=>{if(!t.constraint[l]&&(""===n||l===n)){const n=l===r.HORIZONTAL;let c,d,h,u;if(n?(c=a?"right":"left",d=a?"left":"right",h=a?"rightLeft":"leftRight",u=a?"leftRight":"rightLeft"):(c=a?"bottom":"top",d=a?"top":"bottom",h=a?"bottomTop":"topBottom",u=a?"topBottom":"bottomTop"),it.withinRange(t.linear[c],s.box[c]))return void t.anchor(c,"parent",!0);const p=t.positionStatic?"bounds":"linear";let m,g="layout_constraintGuide_",f=!1;if(!t.pageFlow&&it.isPercent(t.css(c)))m=parseInt(t.css(c))/100,f=!0,g+="percent";else{if(!i&&!e.hasAlign(4)){if(e.renderChildren.some(e=>{if(e!==t&&e.constraint[l]){const o=t.pageFlow&&e.pageFlow;let i=!1;if(o&&(it.withinRange(t.linear[c],e.linear[d])?(t.anchor(h,e.documentId,!0),i=!0):it.withinRange(t.linear[d],e.linear[c])&&(t.anchor(u,e.documentId,!0),i=!0)),(o||!t.pageFlow&&!e.pageFlow)&&(it.withinRange(t.bounds[c],e.bounds[c])?(t.anchor(!n&&t.textElement&&t.baseline&&e.textElement&&e.baseline?"baseline":c,e.documentId,!0),i=!0):it.withinRange(t.bounds[d],e.bounds[d])&&(t.anchor(d,e.documentId,!0),i=!0)),i)return e.constraint[l]=!0,!0}return!1}))return}if(t.positionAuto){const e=t.previousSiblings();if(e.length&&!t.alignedVertically(e)){const o=e[e.length-1];if(o.renderParent===t.renderParent)return t.anchor(n?"rightLeft":"top",o.documentId,!0),void(t.constraint[l]=o.constraint[l])}}if(i){m=parseFloat(Math.abs(Math.abs(t[p][c]-s.box[c])/s.box[n?"width":"height"]-(a?1:0)).toPrecision(this.localSettings.constraint.percentAccuracy)),f=!0,g+="percent"}else m=t[p][c]-s.box[a?d:c],g+="begin"}const y=e.constraint.guideline||{};if(t.pageFlow){if(t.inlineVertical){const e=it.convertInt(t.verticalAlign);e<0&&(m+=e)}}else t.absoluteParent===t.documentParent&&(m=n?mt(m,s,"Left"):mt(m,s,"Top",1===s.valueBox(32)[0]));if(t.constraint[l]=!0,m<=0)t.anchor(c,"parent",!0);else if(n&&s.hasWidth&&!t.has("right")&&m+t[p].width>=s.box.right||!n&&s.hasHeight&&!t.has("bottom")&&m+t[p].height>=s.box.bottom)t.anchor(d,"parent",!0);else{const i=it.optionalAsObject(y,`${l}.${g}.${c}`);if(i)for(const e in i)if(parseInt(i[e])===m)return t.anchor(c,e,!0),void t.anchorDelete(d);const a=I({android:{orientation:n?r.VERTICAL:r.HORIZONTAL},app:{[g]:f?""+m:it.formatPX(m)}});this.appendAfter(t.id,this.renderNodeStatic(o.GUIDELINE,t.renderDepth,a,"wrap_content","wrap_content"));const s=a.documentId;t.anchor(c,s,!0),t.anchorDelete(d),it.assignEmptyValue(y,l,g,c,s,""+m),e.constraint.guideline=y,t.constraint[n?"guidelineHorizontal":"guidelineVertical"]=s}}})}createNodeGroup(t,e,n,o){const i=new j(this.cache.nextId,t,e,this.afterInsertNode);return i.siblingIndex=t.siblingIndex,n&&(n.appendTry(o||t,i),i.init()),this.cache.append(i),i}createNodeWrapper(t,e,n,o){const i=this.application.createNode(nt.createElement(t.actualParent?t.actualParent.element:null,t.block));return t.documentRoot&&(i.documentRoot=!0,t.documentRoot=!1),i.inherit(t,"base","alignment"),n&&i.setControlType(n,o),i.exclude({section:J.APP_SECTION.ALL,procedure:J.NODE_PROCEDURE.CUSTOMIZATION,resource:J.NODE_RESOURCE.ALL}),i.siblingIndex=t.siblingIndex,e&&(e.appendTry(t,i),t.siblingIndex=0,-1!==t.renderPosition&&(i.renderPositionId=t.renderPositionId,t.renderPosition=-1),t.parent=i),i.saveAsInitial(),this.application.processing.cache.append(i,!e),t.unsetCache(),i}processRelativeHorizontal(t,e){const n=Z.cleared(e),o=Math.ceil((()=>{const n=t.renderParent;if(n)if(n.overflowX){if(t.has("width",2))return t.toInt("width",!0);if(n.has("width",2))return n.toInt("width",!0);if(n.has("width",32))return n.bounds.width-n.contentBoxWidth}else{let o=-1/0;if(it.captureMap(n.children,e=>"left"===e.float&&e.siblingIndex<t.siblingIndex,t=>o=Math.max(o,t.linear.right)),o!==-1/0&&e.some(t=>t.linear.left===o))return t.box.right-o}return t.box.width})()),i=o*this.localSettings.relative.boxWidthWordWrapPercent,a="nowrap"!==t.css("whiteSpace"),r=it.isUserAgent(24),s=[],l=new Set;let c,d,h=!1,u=0;const[p,m]=it.partitionArray(e,t=>"right"===t.float);ct(m);for(const e of[m,p]){const h=e===m?"left":"right";for(let p=0;p<e.length;p++){const f=e[p],y=e[p-1];let b=f.bounds;if(f.element&&!f.hasWidth&&f.inlineText){const t=et.getRangeClientRect(f.element);(t.multiline||t.width<f.box.width)&&(b=t,0===f.multiline&&(f.multiline=t.multiline),r&&t.multiline&&!/^\s*\n+/.test(f.textContent)&&l.add(f))}let T=e===m?"leftRight":"rightLeft",A=[];if(0===p)f.anchor(h,"true"),s.push([f]);else{function g(){const t=(c&&s.length>1?c.linear.width:0)+u+f.marginLeft+("left"!==y.float||n.has(f)?b.width:0)-(r?f.borderRightWidth:0);return!f.rightAligned&&Math.floor(t)-(f.styleElement&&f.inlineStatic?f.paddingLeft+f.paddingRight:0)>o}gt(f,y)&&(T="");const e=f.groupParent&&!f.hasAlign(128);A=!e&&f.element&&f.inlineVertical&&y.inlineVertical?et.getElementsBetweenSiblings(y.element,f.element,!0):[];const i=(()=>{if(f.textElement){let t=!1;if(y.textElement&&(1===p&&f.plainText&&!y.rightAligned&&(t=0===A.length&&!/\s+$/.test(y.textContent)&&!/^\s+/.test(f.textContent)),a&&!t&&(l.has(y)||y.multiline&&nt.hasLineBreak(y.element,!1,!0))))return!0;if(a&&!t&&(g()||f.multiline&&nt.hasLineBreak(f.element)||f.preserveWhiteSpace&&/^\s*\n+/.test(f.textContent)))return!0}return!1})(),m=s[s.length-1],E=f.previousSiblings();if(i||e||!f.textElement&&g()||f.linear.top>=y.linear.bottom&&(f.blockStatic||f.floating&&y.float===f.float)||!f.floating&&(y.blockStatic||E.some(t=>t.lineBreak||t.excluded&&t.blockStatic)||A.some(t=>nt.isLineBreak(t)))||n.has(f)){d=m.find(t=>!t.floating)||m[0];for(let t=0;t<m.length;t++)m[t]!==d&&m[t].linear.bottom>d.linear.bottom&&(!m[t].floating||m[t].floating&&d.floating)&&(d=m[t]);f.anchor("topBottom",d.documentId),c&&f.linear.bottom<=c.bounds.bottom?f.anchor(T,c.documentId):(f.anchor(h,"true"),c=void 0),i&&f.multiline&&pt(y,a),u=Math.min(0,i&&!y.multiline&&f.multiline&&!n.has(f)?f.linear.right-t.box.right:0),s.push([f])}else""!==T&&f.anchor(T,y.documentId),d&&f.anchor("topBottom",d.documentId),m.push(f)}"left"===f.float&&(c=f);let E=0;if(A.length&&!A.some(t=>!!et.getElementAsNode(t)||nt.isLineBreak(t))){const t=et.getRangeClientRect(A[0]),e=A.length>1?et.getRangeClientRect(A[A.length-1]):null;t.multiline||null!==e&&e.multiline||(E=e?t.left-e.right:t.width)}Math.ceil(u+=E+f.marginLeft+b.width+f.marginRight)>=i&&!f.alignParent(h)&&pt(f,a)}}s.length>1&&(t.alignmentType|=4096,h=!0);for(let e=0;e<s.length;e++){let n;if(s[e].length>1){const o=Z.baseline(s[e]);n=o[0];const i=Z.baseline(s[e],!0)[0];let a=ut(s[e]);n&&a&&a.bounds.height>n.bounds.height?n.anchor("bottom",a.documentId):a=void 0;const r=[],l=e=>{if(!h){if(o.includes(e)||e.actualParent&&e.actualHeight>=e.actualParent.box.height)return!0;t.hasHeight||t.css("height",it.formatPX(t.bounds.height),!0)}return!1};let c=0===e?"true":n?n.documentId:"";for(const t of s[e])if(t!==n)if(t.baseline)r.push(t);else if(t.inlineVertical)switch(t.verticalAlign){case"text-top":i&&t.anchor("top",i.documentId);break;case"super":case"top":c&&t.anchor("top",c);break;case"middle":if(h){if(n){const e=Math.max(t.bounds.height,t.lineHeight),o=Math.max(n.bounds.height,n.lineHeight);e<o&&(t.anchor("top",n.documentId),t.modifyBox(2,Math.round((o-e)/2)))}}else t.anchor("centerVertical","true");break;case"text-bottom":i&&t!==a&&t.anchor("bottom",i.documentId);break;case"sub":case"bottom":l(t)&&(c=""),c&&t.anchor("bottom",c);break;default:"0px"===t.verticalAlign||t.svgElement||r.push(t)}n&&(n.baselineActive=!0,r.length&&ht(n,r))}else n=s[e][0];n&&dt(t,n)}}processConstraintHorizontal(t,e){const n=Z.baseline(e)[0],o=Z.baseline(e,!0)[0],i=t.hasAlign(512);let a=ut(e);n&&(n.baselineActive=!0,a&&n.bounds.height<a.bounds.height?n.anchor("bottom",a.documentId):a=void 0,dt(t,n));for(let t=0;t<e.length;t++){const s=e[t],l=e[t-1];if(0===t?s.anchor(i?"right":"left","parent"):l&&s.anchor(i?"rightLeft":"leftRight",l.documentId),s.inlineVertical)switch(s.verticalAlign){case"text-top":o&&s!==o&&s.anchor("top",o.documentId);break;case"super":case"top":s.anchor("top","parent");break;case"middle":s.anchorParent(r.VERTICAL);break;case"text-bottom":o&&s!==o&&s!==a&&s.anchor("bottom",o.documentId);break;case"sub":case"bottom":s.anchor("bottom","parent");break;case"baseline":n&&s!==n&&s.anchor("baseline",n.documentId)}}}processConstraintColumn(t,e){const n=t.toInt("columnCount"),o=Math.ceil(e.length/Math.min(n,e.length)),i=[];let r=0;for(let t=0,n=0;t<e.length;t++){const a=e[t];t%o==0&&(t>0&&n++,void 0===i[n]&&(i[n]=[])),i[n].push(a),a.length&&(r+=ot.maxArray(it.objectMap(a.children,t=>t.marginLeft+t.marginRight)))}const s=it.convertInt(t.css("columnGap"))||16,l=Math.max((r+s*(n-1))/t.box.width/n,.01),c=[],d=[],h=[];for(let t=0;t<i.length;t++){const e=i[t],o=e[0];t>0&&o.android(o.localizeString(a.MARGIN_LEFT),it.formatPX(o.marginLeft+s)),h.push(o);for(const t of e){let e=0;(e=t.has("width",32)?t.toInt("width")/100:1/n-l)>0&&(t.android("layout_width","0px"),t.app("layout_constraintWidth_percent",e.toPrecision(2)))}d.push(e)}c.push(h),lt(c,!0),lt(d,!1)}processConstraintChain(t,e,n){const o=Z.partitionRows(e),i=Z.actualParent(e)||t,a=t.hasAlign(64),s=o.length>1&&t.hasAlign(1024)?Z.clearedAll(i):new Map;let l=!1;o.length>1&&(t.alignmentType|=4096),a&&(l=t.hasAlign(512),e.some(t=>t.has("width",32))&&t.android("layout_width","match_parent"));for(const r of e)a||(r.rightAligned?(it.withinRange(r.linear.right,i.box.right)||r.linear.right>i.box.right)&&r.anchor("right","parent"):(it.withinRange(r.linear.left,i.box.left)||r.linear.left<i.box.left)&&r.anchor("left","parent")),(it.withinRange(r.linear.top,t.box.top)||r.linear.top<t.box.top||r.floating&&1===o.length)&&r.anchor("top","parent"),!this.withinParentBottom(r.linear.bottom,n)||i.documentBody||!i.hasHeight&&r.alignParent("top")||r.anchor("bottom","parent");const c=[];let d,h,u,p;l?(d="right",h="left",u="rightLeft",p="leftRight"):(d="left",h="right",u="leftRight",p="rightLeft");for(let t=0;t<o.length;t++){const e=o[t],n=e[0],m=e[e.length-1];let g;if(n.anchor(d,"parent"),"center"===i.css("textAlign")?n.app("layout_constraintHorizontal_chainStyle","spread"):e.length>1&&(l?(m.app("layout_constraintHorizontal_chainStyle","packed"),m.app("layout_constraintHorizontal_bias","1")):(n.app("layout_constraintHorizontal_chainStyle","packed"),n.app("layout_constraintHorizontal_bias","0"))),e.length>1&&m.anchor(h,"parent"),t>0){const e=o[t-1];g=e[0];for(let t=1;t<e.length;t++)e[t].linear.bottom>g.linear.bottom&&(g=e[t])}for(let f=0;f<e.length;f++){const y=e[f],b=e[f-1],T=e[f+1];if(y.autoMargin.leftRight?y.anchorParent(r.HORIZONTAL):(b&&y.anchor(u,b.documentId),T&&y.anchor(p,T.documentId)),vt.setConstraintDimension(y),t>0){const e=o[t-1],r=e[e.length-1],b=l?m:n,T=[];if(r?(T.push(r),y.element&&it.concatArray(T,it.flatMap(et.getElementsBetweenSiblings(r.element,y.element),t=>et.getElementAsNode(t)))):T.push(b),!a||0!==s.size&&T.some(t=>s.has(t)))g&&(f>0?(y.anchor("top",n.documentId),y.modifyBox(2,-1*n.marginTop)):(y.anchor("topBottom",g.documentId),g.anchor("bottomTop",y.documentId)));else if(e.length){y.anchor("topBottom",r.documentId),""===r.alignSibling("bottomTop")&&r.anchor("bottomTop",y.documentId);for(let t=c.length-2;t>=0;t--){const e=c[t];if(e.linear.bottom>r.linear.bottom){if((l?Math.ceil(e.linear[h])-Math.floor(i.box[h]):Math.ceil(i.box[h])-Math.floor(e.linear[h]))>=y.linear.width){y.anchor(u,e.documentId),y.anchorDelete(p),y===n?(y.anchorDelete(d),y.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias")):y===m&&y.anchorDelete(h);break}}}}}c.push(y)}}vt.evaluateAnchors(e)}withinParentBottom(t,e){return it.withinRange(t,e,this.localSettings.constraint.withinParentBottomOffset)}get userSettings(){return this.application.userSettings}get containerTypeHorizontal(){return{containerType:t.LINEAR,alignmentType:8,renderType:0}}get containerTypeVertical(){return{containerType:t.LINEAR,alignmentType:16,renderType:0}}get containerTypeVerticalMargin(){return{containerType:t.FRAME,alignmentType:256,renderType:0}}get afterInsertNode(){const t=this.userSettings;return e=>{e.localSettings={targetAPI:void 0!==t.targetAPI?t.targetAPI:28,supportRTL:void 0===t.supportRTL||t.supportRTL,constraintPercentAccuracy:this.localSettings.constraint.percentAccuracy,customizationsOverwritePrivilege:void 0===t.customizationsOverwritePrivilege||t.customizationsOverwritePrivilege}}}}class wt extends squared.base.ExtensionManager{}const Rt=squared.lib.util,_t=squared.lib.xml,xt={color:_t.parseTemplate('<?xml version="1.0" encoding="utf-8"?>\n<resources>\n<<A>>\n\t<color name="{&value}">{&name}</color>\n<<A>>\n</resources>\n\x3c!-- filename: res/values/colors.xml --\x3e'),dimen:_t.parseTemplate('<?xml version="1.0" encoding="utf-8"?>\n<resources>\n<<A>>\n\t<dimen name="{&name}">{&value}</dimen>\n<<A>>\n</resources>\n\x3c!-- filename: res/values/dimens.xml --\x3e'),drawable:_t.parseTemplate("{&value}\n\x3c!-- filename: {&name} --\x3e"),font:_t.parseTemplate('<?xml version="1.0" encoding="utf-8"?>\n<font-family {&namespace}>\n<<A>>\n\t<font android:fontStyle="{&style}" android:fontWeight="{&weight}" android:font="{&font}" />\n<<A>>\n</font-family>\n\x3c!-- filename: res/font/{&name}.xml --\x3e'),string:_t.parseTemplate('<?xml version="1.0" encoding="utf-8"?>\n<resources>\n<<A>>\n\t<string name="{&name}">{~value}</string>\n<<A>>\n</resources>\n\x3c!-- filename: res/values/strings.xml --\x3e'),string_array:_t.parseTemplate('<?xml version="1.0" encoding="utf-8"?>\n<resources>\n<<A>>\n\t<string-array name="{&name}">\n\t<<AA>>\n\t\t<item>{&value}</item>\n\t<<AA>>\n\t</string-array>\n<<A>>\n</resources>\n\x3c!-- filename: res/values/string_arrays.xml --\x3e'),style:_t.parseTemplate('<?xml version="1.0" encoding="utf-8"?>\n<resources>\n<<A>>\n\t<style name="{&name}" parent="{~parent}">\n\t<<items>>\n\t\t<item name="{&name}">{&value}</item>\n\t<<items>>\n\t</style>\n<<A>>\n</resources>\n\x3c!-- filename: {0} --\x3e')},It=/^<!-- image: (.+) -->\n<!-- filename: (.+)\/(.+?\.\w+) -->$/,Nt=/^[\w\W]*?(<!-- filename: (.+)\/(.+?\.xml) -->)$/;function Ct(t){const e=[];for(const n of t){const t=It.exec(n);t&&e.push({uri:t[1],pathname:t[2],filename:t[3],content:""})}return e}function Pt(t){const e=[];for(const n of t){const t=Nt.exec(n);t&&e.push({content:t[0].replace(t[1],"").trim(),pathname:t[2],filename:t[3]})}return e}function Ot(t,e,n){return{pathname:t,filename:e,content:n}}function Lt(t,e){return(""+t).toLowerCase()>=(""+e).toLowerCase()?1:-1}class Mt extends squared.base.File{saveAllToDisk(t){const e=[];for(let n=0;n<t.templates.length;n++){const o=t.templates[n];e.push(Ot(o.pathname,0===n?this.userSettings.outputMainFileName:`${o.filename}.xml`,o.content))}this.saveToDisk(Rt.concatMultiArray(e,Pt(this.resourceStringToXml()),Pt(this.resourceStringArrayToXml()),Pt(this.resourceFontToXml()),Pt(this.resourceColorToXml()),Pt(this.resourceStyleToXml()),Pt(this.resourceDimenToXml()),Pt(this.resourceDrawableToXml()),Ct(this.resourceDrawableImageToXml()),Pt(this.resourceAnimToXml())))}layoutAllToXml(t,e=!1){const n={},o=[];for(let i=0;i<t.templates.length;i++){const a=t.templates[i];n[a.filename]=[a.content],e&&o.push(Ot(a.pathname,0===i?this.userSettings.outputMainFileName:`${a.filename}.xml`,a.content))}return e&&this.saveToDisk(o),n}resourceAllToXml(t=!1){const e={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),drawableImage:this.resourceDrawableImageToXml(),anim:this.resourceAnimToXml()};for(const t in e)0===e[t].length&&delete e[t];if(t){const t=[];for(const n in e)Rt.concatArray(t,"image"===n?Ct(e[n]):Pt(e[n]));this.saveToDisk(t)}return e}resourceStringToXml(t=!1){const e=[],n={A:[]};this.stored.strings=new Map(Array.from(this.stored.strings.entries()).sort(Lt)),""===this.appName||this.stored.strings.has("app_name")||n.A.push({name:"app_name",value:this.appName});for(const[t,e]of this.stored.strings.entries())n.A.push({name:t,value:e});return e.push(L(_t.createTemplate(xt.string,n),this.userSettings.insertSpaces,!0)),t&&this.saveToDisk(Pt(e)),e}resourceStringArrayToXml(t=!1){const e=[];if(this.stored.arrays.size){const n={A:[]};this.stored.arrays=new Map(Array.from(this.stored.arrays.entries()).sort());for(const[t,e]of this.stored.arrays.entries())n.A.push({name:t,AA:Rt.objectMap(e,t=>({value:t}))});e.push(L(_t.createTemplate(xt.string_array,n),this.userSettings.insertSpaces,!0)),t&&this.saveToDisk(Pt(e))}return e}resourceFontToXml(t=!1){const e=[];if(this.stored.fonts.size){const n=this.userSettings;this.stored.fonts=new Map(Array.from(this.stored.fonts.entries()).sort());const o=n.targetAPI<26?"app":"android";for(const[t,i]of this.stored.fonts.entries()){const a={name:t,namespace:k(o),A:[]};let r="";for(const e in i){const[n,o]=e.split("-");a.A.push({style:n,weight:o,font:`@font/${t+("normal"===n&&"normal"===o?`_${n}`:("normal"!==n?`_${n}`:"")+("normal"!==o?`_${o}`:""))}`})}r+=_t.createTemplate(xt.font,a),n.targetAPI<26&&(r=r.replace(/\s+android:/g," app:")),e.push(L(r,n.insertSpaces))}t&&this.saveToDisk(Pt(e))}return e}resourceColorToXml(t=!1){const e=[];if(this.stored.colors.size){const n={A:[]};this.stored.colors=new Map(Array.from(this.stored.colors.entries()).sort());for(const[t,e]of this.stored.colors.entries())n.A.push({name:t,value:e});e.push(L(_t.createTemplate(xt.color,n),this.userSettings.insertSpaces)),t&&this.saveToDisk(Pt(e))}return e}resourceStyleToXml(t=!1){const e=this.userSettings,n=[],o=[];if(this.stored.styles.size){const t={A:[]};for(const e of Array.from(this.stored.styles.values()).sort((t,e)=>(""+t.name).toLowerCase()>=(""+e.name).toLowerCase()?1:-1))Array.isArray(e.items)&&(e.items.sort((t,e)=>t.name>=e.name?1:-1),t.A.push(e));o.push({filename:"res/values/styles.xml",data:t})}if(this.stored.themes.size){const t={};for(const[e,n]of this.stored.themes.entries()){const i={A:[]};for(const[o,a]of n.entries()){const n=[];for(const t in a.items)n.push({name:t,value:a.items[t]});t[e]&&"AppTheme"===o&&!n.length||i.A.push({name:o,parent:a.parent,items:n}),"AppTheme"===o&&(t[e]=!0)}o.push({filename:e,data:i})}}for(const t of o)n.push(L(O(_t.createTemplate(xt.style,t.data).replace("filename: {0}",`filename: ${t.filename}`),e.resolutionDPI,e.convertPixels,!0),e.insertSpaces));return t&&this.saveToDisk(Pt(n)),n}resourceDimenToXml(t=!1){const e=[];if(this.stored.dimens.size){const n=this.userSettings,o={A:[]};this.stored.dimens=new Map(Array.from(this.stored.dimens.entries()).sort());for(const[t,e]of this.stored.dimens.entries())o.A.push({name:t,value:e});e.push(L(O(_t.createTemplate(xt.dimen,o),n.resolutionDPI,n.convertPixels),n.insertSpaces)),t&&this.saveToDisk(Pt(e))}return e}resourceDrawableToXml(t=!1){const e=[];if(this.stored.drawables.size){const n=this.userSettings;for(const[t,o]of this.stored.drawables.entries())e.push(L(O(_t.createTemplate(xt.drawable,{name:`res/drawable/${t}.xml`,value:o}),n.resolutionDPI,n.convertPixels),n.insertSpaces));t&&this.saveToDisk(Pt(e))}return e}resourceDrawableImageToXml(t=!1){const e=[];if(this.stored.images.size){const n=this.userSettings;for(const[t,o]of this.stored.images.entries())if(Object.keys(o).length>1)for(const i in o)e.push(L(_t.createTemplate(xt.drawable,{name:`res/drawable-${i}/${t}.${Rt.fromLastIndexOf(o[i],".")}`,value:`\x3c!-- image: ${o[i]} --\x3e`}),n.insertSpaces));else o.mdpi&&e.push(L(_t.createTemplate(xt.drawable,{name:`res/drawable/${t}.${Rt.fromLastIndexOf(o.mdpi,".")}`,value:`\x3c!-- image: ${o.mdpi} --\x3e`}),n.insertSpaces));t&&this.saveToDisk(Ct(e))}return e}resourceAnimToXml(t=!1){const e=[];if(this.stored.animators.size){for(const[t,n]of this.stored.animators.entries())e.push(L(_t.createTemplate(xt.drawable,{name:`res/anim/${t}.xml`,value:n}),this.userSettings.insertSpaces));t&&this.saveToDisk(Pt(e))}return e}get userSettings(){return this.resource.userSettings}get stored(){return this.resource.stored}}const Dt=squared.base.lib.enumeration,kt=squared.lib.dom,Bt=squared.lib.util;class Xt extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=!0}afterBaseLayout(){for(const t of this.application.processing.cache){const e=t.element;if(e&&t.visible&&!t.hasBit("excludeProcedure",Dt.NODE_PROCEDURE.ACCESSIBILITY))switch(t.controlName){case o.EDIT:t.companion||[kt.getPreviousElementSibling(e),kt.getNextElementSibling(e)].some(n=>{if(n){const o=kt.getElementAsNode(n),i=n&&n.parentElement&&"LABEL"===n.parentElement.tagName?kt.getElementAsNode(n.parentElement):void 0;if(o&&o.visible&&o.pageFlow){if(Bt.hasValue(n.htmlFor)&&n.htmlFor===e.id)return o.android("labelFor",t.documentId),!0;if(o.textElement&&i)return i.android("labelFor",t.documentId),!0}}return!1});case o.SELECT:case o.CHECKBOX:case o.RADIO:case o.BUTTON:e.disabled&&t.android("focusable","false")}}}}var Gt=squared.base.Layout;const Vt=squared.base.lib.constant,Ht=squared.base.lib.enumeration,zt=squared.lib.element,Ft=squared.lib.util;function Wt(t,e,n,o){const i="column"===o?16:2,a="column"===o?4:8,r="column"===o?256:32,s=t[o],l=n.startsWith("space")?function(t,e){const n=[];if("column"===e)for(let e=0;e<t.column.count;e++){n[e]=[];for(let o=0;o<t.row.count;o++)n[e].push(t.rowData[o][e])}else for(let e=0;e<t.row.count;e++)n.push(t.rowData[e]);return n}(t,o):[],c=function(t,e,n){const o="column"===e?"width":"height";let i=0;for(let n=0;n<t[e].count;n++){const a=t[e].unit[n];if(a.endsWith("px"))i+=parseInt(a);else{let e=0;Ft.captureMap(t.rowData[n],t=>t&&t.length>0,t=>e=Math.min(e,t[0].bounds[o])),i+=e}}return i=n[o]-(i+=(t[e].count-1)*t[e].gap)}(t,o,e);if(c>0){const d="column"===o?"width":"height",h=t[o].count,u=new Set;switch(n){case"center":e.modifyBox(r,Math.floor(c/2)),s.normal=!1;break;case"right":if("row"===o)break;case"end":case"flex-end":e.modifyBox(r,c),s.normal=!1;break;case"space-around":{const t=Math.floor(c/(2*h));for(let e=0;e<h;e++)for(const n of new Set(Ft.flatArray(l[e])))u.has(n)?n.cssPX(d,2*t):(n.modifyBox(i,t),e<h-1&&n.modifyBox(a,t),u.add(n));s.normal=!1;break}case"space-between":{const t=Math.floor(c/(2*(h-1))),e=Ft.flatArray(l[h-1]);for(let n=0;n<h;n++)for(const o of new Set(Ft.flatArray(l[n])))u.has(o)?o.cssPX(d,2*t):(n>0&&o.modifyBox(i,t),n<h-1&&!e.some(t=>t===o)&&o.modifyBox(a,t),u.add(o));s.normal=!1;break}case"space-evenly":{const t=Math.floor(c/(h+1)),e=Ft.flatArray(l[h-1]);for(let n=0;n<h;n++){const o=Math.floor(t/2);for(const r of new Set(Ft.flatArray(l[n])))u.has(r)?r.cssPX(d,t):(r.modifyBox(i,0===n?t:o),n<h-1&&!e.some(t=>t===r)&&r.modifyBox(a,o),u.add(r))}s.normal=!1;break}}}}class qt extends squared.base.extensions.CssGrid{processNode(e,n){super.processNode(e,n);const o=e.data(Vt.EXT_NAME.CSS_GRID,"mainData");let i="";if(o){const a=new Gt(n,e,t.GRID,4,e.length,e.children);a.rowCount=o.row.count,a.columnCount=o.column.count,i=this.application.renderNode(a)}return{output:i,complete:""!==i}}processChild(e,n){const i=n.data(Vt.EXT_NAME.CSS_GRID,"mainData"),a=e.data(Vt.EXT_NAME.CSS_GRID,"cellData");let r,s="";if(i&&a){function l(t,o,r){const s=i[o],l=`${o}Start`,c=`${o}Span`,d=a[c]-a[l],h=`min${Ft.capitalize(r)}`;let u=0,p=0,m=!1,g=0,f=0;s.unit.every(t=>"auto"===t)&&("width"===r?s.unit=Array(s.unit.length).fill("1fr"):s.unit.length=0);for(let t=0,o=0;t<a[c];t++){const i=s.unitMin[a[l]+t];g+=n.calculateUnit(i);let c=s.unit[a[l]+t];if(!Ft.hasValue(c)){if(!s.auto[o])continue;c=s.auto[o],s.auto[o+1]&&o++}if(Ft.hasValue(c)){if("auto"===c||"min-content"===c||"max-content"===c){d<s.unit.length&&(!n.has(r)||s.unit.some(t=>Ft.isUnit(t))||"min-content"===c)?(u=e.bounds[r],p=0,f=0):(u=0,p=0,f=.01);break}if(Ft.isPercent(c))f+=parseInt(c)/100,p=u,u=0;else if(c.endsWith("fr"))f+=parseInt(c),p=u,u=0;else if(c.endsWith("px")){const t=parseInt(c);0===p?u+=t:p+=t}"0px"===i&&e.textElement&&(m=!0)}}if(a[c]>1){const t=(a[c]-1)*s.gap;u>0&&0===p?u+=t:p>0&&(p+=t),g>0&&(g+=t)}if(g>0&&(s.autoFill&&0===u&&1===i["column"===o?"row":"column"].count?(u=Math.max(e.bounds.width,g),f=0):p=g),t.android(`layout_${o}`,""+a[l]),a[c]>1&&t.android(`layout_${o}Span`,""+a[c]),p>0&&!t.has(h)&&t.css(h,Ft.formatPX(p),!0),f>0)t.android(`layout_${r}`,"0px"),t.android(`layout_${o}Weight`,""+f),t.mergeGravity("layout_gravity","column"===o?"fill_horizontal":"fill_vertical");else if(u>0){const e=`max${Ft.capitalize(r)}`;m&&!t.has(e)?(t.css(e,Ft.formatPX(u),!0),t.mergeGravity("layout_gravity","column"===o?"fill_horizontal":"fill_vertical")):t.has(r)||t.css(r,Ft.formatPX(u),!0)}}const c=e.has("alignSelf")?e.css("alignSelf"):i.alignItems,d=e.has("justifySelf")?e.css("justifySelf"):i.justifyItems;if(/(start|end|center|baseline)/.test(c)||/(start|end|center|baseline|left|right)/.test(d)){(r=this.application.createNode(zt.createElement(e.actualParent?e.actualParent.element:null))).tagName=e.tagName,r.setControlType(o.FRAME,t.FRAME),r.inherit(e,"initial","base"),r.resetBox(510),r.exclude({procedure:Ht.NODE_PROCEDURE.AUTOFIT|Ht.NODE_PROCEDURE.CUSTOMIZATION,resource:Ht.NODE_RESOURCE.BOX_STYLE|Ht.NODE_RESOURCE.ASSET}),n.appendTry(e,r),r.render(n),this.application.processing.cache.append(r,!1),e.inheritBox(30,r),l(r,"column","width"),l(r,"row","height");let i=!1;d.endsWith("start")||d.endsWith("left")||d.endsWith("baseline")?(e.mergeGravity("layout_gravity","left"),i=!0):d.endsWith("end")||d.endsWith("right")?(e.mergeGravity("layout_gravity","right"),i=!0):d.endsWith("center")&&(e.mergeGravity("layout_gravity","center_horizontal"),i=!0),e.hasWidth||e.android("layout_width",i?"wrap_content":"match_parent",!1),c.endsWith("start")||c.endsWith("baseline")?e.mergeGravity("layout_gravity","top"):c.endsWith("end")?e.mergeGravity("layout_gravity","bottom"):c.endsWith("center")?e.mergeGravity("layout_gravity","center_vertical"):e.hasHeight||e.android("layout_height","match_parent",!1),e.parent=r;const a=new Gt(n,r,t.FRAME,2048,1,r.children);s=this.application.renderLayout(a)}const h=r||e;l(h,"column","width"),l(h,"row","height"),h.has("height")||(n.hasHeight&&(h.android("layout_height","0px"),h.android("layout_rowWeight","1")),h.mergeGravity("layout_gravity","fill_vertical")),h.has("width")||h.mergeGravity("layout_gravity","fill_horizontal")}return{output:s,parent:r,complete:""!==s}}postBaseLayout(t){const e=t.data(Vt.EXT_NAME.CSS_GRID,"mainData");if(e&&(t.hasWidth&&"normal"!==e.justifyContent&&Wt(e,t,e.justifyContent,"column"),t.hasHeight&&"normal"!==e.alignContent&&Wt(e,t,e.alignContent,"row"),e.column.normal&&!e.column.unit.includes("auto"))){const n=e.column.gap*(e.column.count-1);n>0&&(t.renderParent&&!t.renderParent.hasAlign(4)&&(t.cssPX("minWidth",n),t.cssPX("width",n,!1,!0)),!t.has("width")&&t.has("maxWidth")&&t.css("width",Ft.formatPX(t.bounds.width+n),!0))}}postProcedure(t){const e=t.data(Vt.EXT_NAME.CSS_GRID,"mainData");if(e){const n=this.application.controllerHandler,o=Array.from(e.children)[e.children.size-1];if(e.column.unit.every(t=>Ft.isPercent(t))){const i=e.column.unit.reduce((t,e)=>t+parseInt(e),0);if(i<100){t.android("columnCount",""+(e.column.count+1));for(let r=0;r<e.row.count;r++)n.appendAfter(o.id,n.renderSpace(t.renderDepth+1,Ft.formatPercent(100-i),"wrap_content",0,0,I({android:{[t.localizeString(a.MARGIN_LEFT)]:Ft.formatPX(e.column.gap),layout_row:""+r,layout_column:""+e.column.count}})))}}for(let i=0;i<e.emptyRows.length;i++){const a=e.emptyRows[i];if(a)for(let r=0;r<a.length;r++)if(1===a[r]){n.appendAfter(o.id,n.renderSpace(t.renderDepth+1,"wrap_content",Ft.formatPX(e.row.gap),0,0,I({android:{layout_row:""+i,layout_column:""+r}})));break}}}}}class $t extends squared.base.extensions.External{constructor(){super(...arguments),this.eventOnly=!0}}var Ut=squared.base.Layout,Yt=squared.base.NodeList;const jt=squared.base.lib.constant,Kt=(squared,squared.lib.util),Zt={leftTop:["left","top"],rightBottom:["right","bottom"],rightLeftBottomTop:["rightLeft","bottomTop"],leftRightTopBottom:["leftRight","topBottom"],widthHeight:["Width","Height"],horizontalVertical:["Horizontal","Vertical"]};class Jt extends squared.base.extensions.Flexbox{processNode(e,n){super.processNode(e,n);const o=e.data(jt.EXT_NAME.FLEXBOX,"mainData"),i=new Ut(n,e,0,4,e.length);return i.rowCount=o.rowCount,i.columnCount=o.columnCount,void 0!==e.find(t=>!t.pageFlow)||o.rowDirection&&(1===o.rowCount||e.hasHeight)||o.columnDirection&&1===o.columnCount?i.containerType=t.CONSTRAINT:i.setType(t.LINEAR,o.columnDirection?8:16),{output:this.application.renderNode(i),complete:!0}}processChild(e,n){let o="";if(e.hasAlign(128)){const i=new Ut(n,e,t.CONSTRAINT,4,e.length,e.children);o=this.application.renderNode(i)}return{output:o,complete:""!==o}}postBaseLayout(e){const n=e.data(jt.EXT_NAME.FLEXBOX,"mainData");if(n){const o=[],i=[],a=[],s=[];if(n.wrap){let r;e.each(t=>{if(t.hasAlign(128)){const l=t.renderFilter(t=>t.pageFlow);if(n.rowDirection)t.android("layout_width","match_parent"),e.hasHeight&&(t.android("layout_height","0px"),t.app("layout_constraintVertical_weight","1")),o.push(l),s.push(t);else{if(t.android("layout_height","match_parent"),i.push(l),r){let e=r[0];for(let t=1;t<r.length;t++)r[t].linear.right>e.linear.right&&(e=r[t]);const n=t.linear.left-e.actualRight();n>0&&t.modifyBox(16,n),t.constraint.horizontal=!0}a.push(t),r=l}}}),e.is(t.LINEAR)?n.columnDirection&&n.wrapReverse&&e.mergeGravity("gravity","right"):(s.length&&i.push(s),a.length&&o.push(a))}else n.rowDirection?o[0]=n.directionReverse?n.children.reverse():n.children:(e.hasHeight||e.android("layout_height","match_parent"),i[0]=n.directionReverse?n.children.reverse():n.children);[o,i].forEach((t,o)=>{const i=0===o,l=i?1:0;for(const c of t){const t=Zt.widthHeight[l],d=t.toLowerCase(),h=Zt.leftTop[o],u=Zt.leftTop[l],p=Zt.rightBottom[o],m=Zt.rightBottom[l];let g,f=-1/0;Kt.captureMap(c,t=>!t.flexElement,e=>f=Math.max(f,e.bounds[t.toLowerCase()]));for(let e=0;e<c.length;e++){const l=c[e],h=c[e-1],p=c[e+1];if(p&&l.anchor(Zt.rightLeftBottomTop[o],p.documentId),h&&l.anchor(Zt.leftRightTopBottom[o],h.documentId),c!==a&&c!==s){switch(l.flexbox.alignSelf){case"start":case"flex-start":l.anchor(u,"parent");break;case"end":case"flex-end":l.anchor(m,"parent");break;case"baseline":i&&(void 0===g&&(g=Yt.baseline(c)[0]),g&&(l!==g?(l.anchor("baseline",g.documentId),l.constraint.vertical=!0):l.anchor("top","parent")));break;case"center":l.anchorParent(i?r.VERTICAL:r.HORIZONTAL);break;default:if(l.anchor(n.wrapReverse?m:u,"parent"),!l[`has${t}`]&&!l.has(d,32)){const e=l.unsafe("initial");e.bounds&&e.bounds[d]<f&&(l.android(`layout_${t.toLowerCase()}`,"0px"),l.anchor(n.wrapReverse?u:m,"parent"))}}vt.setFlexDimension(l,i)}i||l.anchorParent(r.HORIZONTAL),l.positioned=!0}const y=Zt.horizontalVertical[o],b=c[0],T=c[c.length-1],A=`layout_constraint${y}_chainStyle`;if(b.anchor(h,"parent"),T.anchor(p,"parent"),c.every(t=>t.flexbox.grow<1))switch(n.justifyContent){case"left":if(!i)break;case"start":case"flex-start":b.app(A,"packed"),b.app(`layout_constraint${y}_bias`,"0");break;case"center":b.app(A,"packed"),b.app(`layout_constraint${y}_bias`,"0.5");break;case"right":if(!i)break;case"end":case"flex-end":b.app(A,"packed"),b.app(`layout_constraint${y}_bias`,"1");break;case"space-between":b.app(A,"spread_inside");break;case"space-evenly":b.app(A,"spread");for(const t of c)t.app(`layout_constraint${y}_weight`,""+(t.flexbox.grow||1));break;case"space-around":const t=this.application.controllerHandler,e=y.toLowerCase();b.app(A,"spread_inside"),b.constraint[e]=!1,T.constraint[e]=!1,t.addGuideline(b,b.parent,e,!0,!1),t.addGuideline(T,b.parent,e,!0,!0)}c.length>1&&(i&&Kt.withinRange(e.box.left,b.linear.left)&&Kt.withinRange(T.linear.right,e.box.right)||!i&&Kt.withinRange(e.box.top,b.linear.top)&&Kt.withinRange(T.linear.bottom,e.box.bottom))?b.app(A,"spread_inside",!1):(b.app(A,"packed",!1),b.app(`layout_constraint${y}_bias`,n.directionReverse?"1":"0",!1))}})}}}var Qt=squared.base.Layout;const te=squared.base.lib.constant,ee=(squared,squared.lib.util);class ne extends squared.base.extensions.Grid{processNode(e,n){super.processNode(e,n);const o=e.data(te.EXT_NAME.GRID,"mainData");if(o){const i=new Qt(n,e,t.GRID,4,e.length,e.children);return i.columnCount=o.columnCount,{output:this.application.renderNode(i),complete:!0}}return{output:""}}processChild(e,n){const o=n.data(te.EXT_NAME.GRID,"mainData"),i=e.data(te.EXT_NAME.GRID,"cellData");if(o&&i){i.rowSpan>1&&e.android("layout_rowSpan",""+i.rowSpan),i.columnSpan>1&&e.android("layout_columnSpan",""+i.columnSpan),"table-cell"===e.display&&e.mergeGravity("layout_gravity","fill");const o=i.siblings?i.siblings.slice(0):[];if(o.length){const i=this.application.controllerHandler;o.unshift(e);const a=new Qt(n,e,0,0,o.length,o);if(a.linearY)a.node=i.createNodeGroup(e,o,n),a.setType(t.LINEAR,16);else{a.init();const t=i.processTraverseHorizontal(a);a.node=t.layout.node}if(0!==a.containerType)return function(t,e){let n;for(let t=0;t<e.length;t++){const o=e[t];if(n){const t=o.data(te.EXT_NAME.GRID,"cellData");if(t)for(const e in t)switch(typeof t[e]){case"number":n[e]+=t[e];break;case"boolean":!0===t[e]&&(n[e]=!0)}}else n=o.data(te.EXT_NAME.GRID,"cellData");o.siblingIndex=t,o.data(te.EXT_NAME.GRID,"cellData",null)}t.data(te.EXT_NAME.GRID,"cellData",n)}(a.node,o),{output:this.application.renderNode(a),parent:a.node,complete:!0}}}return{output:""}}postBaseLayout(t){if(!t.tableElement||"collapse"!==t.css("borderCollapse")){const e=t.data(te.EXT_NAME.GRID,"mainData");e&&t.renderEach(t=>{const n=t.data(te.EXT_NAME.GRID,"cellData");if(n){const o=t.actualParent;if(o&&!o.visible&&(n.cellStart&&(e.paddingTop=o.paddingTop+o.marginTop),n.rowStart&&(e.paddingLeft=Math.max(o.marginLeft+o.paddingLeft,e.paddingLeft)),n.rowEnd)){const i=o.marginBottom+o.paddingBottom+(n.cellEnd?0:o.marginTop+o.paddingTop);if(i>0)if(n.cellEnd)e.paddingBottom=i;else{const n=this.application.controllerHandler;n.appendAfter(t.id,n.renderSpace(t.renderDepth,"match_parent",ee.formatPX(i),e.columnCount))}e.paddingRight=Math.max(o.marginRight+o.paddingRight,e.paddingRight)}}}),t.modifyBox(32,e.paddingTop),t.modifyBox(64,e.paddingRight),t.modifyBox(128,e.paddingBottom),t.modifyBox(256,e.paddingLeft)}if(!t.hasWidth){let e=-1/0;ee.captureMap(t.renderChildren,t=>t.inlineFlow||!t.blockStatic,t=>e=Math.max(e,t.linear.right)),ee.withinRange(t.box.right,e)&&t.android("layout_width","wrap_content")}}}var oe=squared.base.Layout,ie=squared.base.NodeList;const ae=squared.base.lib.constant,re=(squared,squared.lib.css),se=squared.lib.element,le=squared.lib.util;class ce extends squared.base.extensions.List{processNode(e,n){super.processNode(e,n);const o=new oe(n,e,0,0,e.length,e.children);let i="";return ie.linearY(o.children)?(o.rowCount=e.length,o.columnCount=e.some(t=>"inside"===t.css("listStylePosition"))?3:2,o.setType(t.GRID,4)):this.application.controllerHandler.checkRelativeHorizontal(o)&&(o.rowCount=1,o.columnCount=o.length,o.setType(t.RELATIVE,8)),0!==o.containerType&&(i=this.application.renderNode(o)),{output:i,complete:""!==i}}processChild(e,n){const i=e.data(ae.EXT_NAME.LIST,"mainData");let r="";if(i){const s=this.application.controllerHandler,l=le.convertInt(n.css("paddingLeft"))+le.convertInt(n.css("marginLeft"));let c=0,d=e.marginLeft;e.modifyBox(16,null),n.is(t.GRID)?(c=le.convertInt(n.android("columnCount")),d+=l):n.item(0)===e&&(d+=l);const h=e.find(t=>"left"===t.float&&t.marginLeft<0&&Math.abs(t.marginLeft)<=le.convertInt(t.documentParent.cssInitial("marginLeft")));if(h&&""===i.ordinal){const o=new oe(n,h);h.inlineText||0===h.length?o.containerType=t.TEXT:(o.retain(h.children),s.checkRelativeHorizontal(o)?o.setType(t.RELATIVE,8):o.setType(t.CONSTRAINT,2)),h.parent=n,s.prependBefore(e.id,this.application.renderNode(o)),3===c&&e.android("layout_columnSpan","2"),(d+=h.marginLeft)>0&&!h.hasWidth&&h.android("minWidth",le.formatPX(d)),h.modifyBox(16,null)}else{const t=c>0?"0":"",r="inside"===e.css("listStylePosition");let h=0,u=0,p="";if(""!==i.imageSrc){const t=re.getBackgroundPosition(i.imagePosition,e.bounds,e.fontSize);h=t.left,u=t.top,p=f.addImageUrl(i.imageSrc)}const m=""!==p&&!e.has("listStyleImage")||0===l&&0===e.marginLeft?"":"right";""===m&&(d+=e.paddingLeft,e.modifyBox(256,null)),h>0&&d>h&&(d-=h),d=Math.max(d,20);const g=(()=>d<=24?6:d<=32?8:10)(),y=h>0?le.formatPX(h):"",b=d>0?le.formatPX(d):"",T=I({android:{layout_columnWeight:t}});if(r){const i=s.renderNodeStatic(o.SPACE,n.renderDepth+1,{android:{minWidth:b,layout_columnWeight:t,[e.localizeString(a.MARGIN_LEFT)]:y}},"wrap_content","wrap_content");s.prependBefore(e.id,i),T.android.minWidth=le.formatPX("24")}else Object.assign(T.android,{minWidth:b,gravity:d>20?e.localizeString(m):"",[a.MARGIN_TOP]:e===n.children[0]&&e.marginTop>0?le.formatPX(e.marginTop):"",[e.localizeString(a.MARGIN_LEFT)]:y,[e.localizeString(a.PADDING_LEFT)]:""===m&&""===p?le.formatPX(g):20===d?"2px":"",[e.localizeString(a.PADDING_RIGHT)]:"right"===m&&d>20?le.formatPX(g):"",[a.PADDING_TOP]:e.paddingTop>0?le.formatPX(e.paddingTop):""}),3===c&&e.android("layout_columnSpan","2");if("DT"===e.tagName&&""===p)e.android("layout_columnSpan",""+c);else{""!==p?Object.assign(T.android,{src:`@drawable/${p}`,[a.MARGIN_TOP]:u>0?le.formatPX(u):"",scaleType:r||"right"!==m?"fitStart":"fitEnd"}):T.android.text=i.ordinal;const t=this.application.createNode(se.createElement(e.actualParent?e.actualParent.element:null));t.tagName=`${e.tagName}_ORDINAL`,t.inherit(e,"textStyle"),""!==i.ordinal&&!/[A-Za-z\d]+\./.test(i.ordinal)&&t.toInt("fontSize")>12&&t.css("fontSize","12px"),this.application.processing.cache.append(t,!1);const l=s.renderNodeStatic(""!==p?o.IMAGE:""!==i.ordinal?o.TEXT:o.SPACE,n.renderDepth+1,T,"wrap_content","wrap_content",t);s.prependBefore(e.id,l)}}c>0&&(e.android("layout_width","0px"),e.android("layout_columnWeight","1"));const u=ie.linearX(e.children);if(u||ie.linearY(e.children)){const o=new oe(n,e,t.LINEAR,u?8:16,e.length,e.children);r=this.application.renderNode(o)}}return{output:r,next:""!==r}}postBaseLayout(t){super.postBaseLayout(t);const e=t.android("columnCount");for(let n=0;n<t.renderChildren.length;n++){const i=t.renderChildren[n],r=t.renderChildren[n-1];let s=0;if(r){const t=le.convertInt(r.android(a.MARGIN_BOTTOM));t>0&&(s+=t,r.delete("android",a.MARGIN_BOTTOM),r.modifyBox(8,null))}const l=le.convertInt(i.android(a.MARGIN_TOP));if(l>0&&(s+=l,i.delete("android",a.MARGIN_TOP),i.modifyBox(2,null)),s>0){const t=this.application.controllerHandler,n=I({android:{layout_columnSpan:""+e}}),a=t.renderNodeStatic(o.SPACE,i.renderDepth,n,"match_parent",le.formatPX(s));t.prependBefore(i.id,a,0)}}}postProcedure(t){t.blockStatic&&t.inlineWidth&&t.android("layout_width","match_parent")}}class de extends squared.base.extensions.Relative{}var he=squared.base.Layout;const ue=squared.base.lib.constant,pe=squared.base.lib.enumeration,me=squared.lib.util;class ge extends squared.base.extensions.Sprite{processNode(e,n){const i=e.data(ue.EXT_NAME.SPRITE,"mainData");let a,r="";if(i&&i.uri&&i.position){(a=this.application.createNode(e.element)).inherit(e,"initial","base","styleMap"),a.setControlType(o.FRAME),a.exclude({procedure:pe.NODE_PROCEDURE.CUSTOMIZATION,resource:pe.NODE_RESOURCE.IMAGE_SOURCE}),n.appendTry(e,a),this.application.processing.cache.append(a,!1),e.setControlType(o.IMAGE,t.IMAGE),e.exclude({procedure:pe.NODE_PROCEDURE.AUTOFIT,resource:pe.NODE_RESOURCE.FONT_STYLE|pe.NODE_RESOURCE.BOX_STYLE}),e.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:me.formatPX(i.width),height:me.formatPX(i.height),marginTop:me.formatPX(i.position.y),marginRight:"0px",marginBottom:"0px",marginLeft:me.formatPX(i.position.x),paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"transparent"}),e.unsetCache(),e.android("src",`@drawable/${f.addImage({mdpi:i.uri})}`),e.parent=a;const s=new he(n,a,t.FRAME,2048,1,a.children);r=this.application.renderLayout(s)}return{output:r,parent:a,complete:!0}}}class fe extends squared.base.extensions.Substitute{processNode(e,n){return e.containerType=e.blockStatic?t.BLOCK:t.INLINE,super.processNode(e,n)}postProcedure(t){const e=I(this.options[t.elementId]);t.apply(f.formatOptions(e,this.application.extensionManager.optionValueAsBoolean(n.RESOURCE_STRINGS,"numberResourceValue")))}}var ye=squared.base.Layout;const be=squared.base.lib.constant,Te=(squared,squared.lib.util);class Ae extends squared.base.extensions.Table{processNode(e,n){super.processNode(e,n);const o=e.data(be.EXT_NAME.TABLE,"mainData");let i="";if(o){if(o.columnCount>1){let t=!!e.data(be.EXT_NAME.TABLE,"expand");if(e.each(e=>{if("0px"===e.css("width"))e.android("layout_width","0px"),e.android("layout_columnWeight",""+(e.element.colSpan||1));else{const n=e.data(be.EXT_NAME.TABLE,"expand"),o=!!e.data(be.EXT_NAME.TABLE,"exceed"),i=!!e.data(be.EXT_NAME.TABLE,"downsized");if("boolean"==typeof n)if(n){const n=Te.convertFloat(e.data(be.EXT_NAME.TABLE,"percent"))/100;n>0&&(e.android("layout_width","0px"),e.android("layout_columnWeight",Te.trimEnd(n.toPrecision(3),"0")),t=!0)}else e.android("layout_columnWeight","0");i&&(o?(e.android("layout_width","0px"),e.android("layout_columnWeight","0.01")):(e.textElement&&!/[\s\n\-]/.test(e.textContent.trim())&&e.android("maxLines","1"),e.has("width")&&e.toInt("width")<e.bounds.width&&e.android("layout_width",Te.formatPX(e.bounds.width))))}}),t&&!e.hasWidth){let t=0;e.ascend().some(e=>!!e.hasWidth&&(t=e.bounds.width,!0)),e.bounds.width>=t?e.android("layout_width","match_parent"):e.css("width",Te.formatPX(e.bounds.width),!0)}}const a=new ye(n,e,t.GRID,4,e.length,e.children);a.rowCount=o.rowCount,a.columnCount=o.columnCount,i=this.application.renderNode(a)}return{output:i,complete:""!==i}}processChild(t,e){const n=Te.convertInt(t.data(be.EXT_NAME.TABLE,"rowSpan")),o=Te.convertInt(t.data(be.EXT_NAME.TABLE,"colSpan")),i=Te.convertInt(t.data(be.EXT_NAME.TABLE,"spaceSpan"));if(n>1&&t.android("layout_rowSpan",""+n),o>1&&t.android("layout_columnSpan",""+o),t.mergeGravity("layout_gravity","fill"),i>0){const n=this.application.controllerHandler;n.appendAfter(t.id,n.renderSpace(e.renderDepth+1,"wrap_content","wrap_content",i))}return{output:""}}postProcedure(t){const e=Te.convertInt(t.android("layout_width"));e>0&&(t.bounds.width>e&&t.android("layout_width",Te.formatPX(t.bounds.width)),e>0&&"auto"===t.cssInitial("width")&&t.renderChildren.every(t=>t.inlineWidth)&&t.renderEach(t=>{t.android("layout_width","0px"),t.android("layout_columnWeight","1")}))}}var Ee=squared.base.Layout;const Se=squared.base.lib.constant;squared;class ve extends squared.base.extensions.VerticalAlign{processNode(e,n){super.processNode(e,n);let o="";if(e.data(Se.EXT_NAME.VERTICAL_ALIGN,"mainData")){const i=new Ee(n,e,t.RELATIVE,8,e.length,e.children);i.floated=i.getFloated(!0),o=this.application.renderNode(i)}return{output:o}}}class we extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=!0}}var Re=squared.base.Layout;const _e=squared.base.lib.enumeration,xe=squared.lib.util;class Ie extends squared.base.Extension{constructor(){super(...arguments),this.options={circlePosition:!1}}condition(t){return this.included(t.element)&&t.length>0}processNode(e,n){e.exclude({procedure:_e.NODE_PROCEDURE.CONSTRAINT});const o=new Re(n,e,t.CONSTRAINT,32,e.length,e.children);return{output:this.application.renderNode(o)}}afterConstraints(){const t=this.application.controllerHandler;for(const e of this.subscribers){const n=new Map;if(e.each(t=>{const o=[];xe.withinRange(t.linear.left,e.box.left)&&o.push("left"),xe.withinRange(t.linear.top,e.box.top)&&o.push("top"),n.set(t,o)}),this.options.circlePosition){let o,i=!1;for(const t of n.values())if(2===t.length){i=!0;break}for(const[a,s]of n.entries())if(i){if(2===s.length){a.anchor("left","parent"),a.anchor("top","parent"),o=a;break}}else if(1===s.length){s.includes("left")?(a.anchor("left","parent"),t.addGuideline(a,e,r.VERTICAL),o=a):(a.anchor("top","parent"),t.addGuideline(a,e,r.HORIZONTAL),o=a);break}void 0===o&&(o=e.item(0),t.addGuideline(o,e)),e.each(t=>{if(t!==o){const e=t.center,n=o.center,i=Math.abs(e.x-n.x),a=Math.abs(e.y-n.y),r=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(a,2)));let s=Math.round(Math.atan(Math.min(i,a)/Math.max(i,a))*(180/Math.PI));e.y>n.y?e.x>n.x?i>a?s+=90:s=180-s:i>a?s=270-s:s+=180:e.y<n.y?n.x>e.x?i>a?s+=270:s=360-s:i>a&&(s=90-s):s=e.x>n.x?90:270,t.app("layout_constraintCircle",o.documentId),t.app("layout_constraintCircleRadius",xe.formatPX(r)),t.app("layout_constraintCircleAngle",""+s)}})}else for(const[o,i]of n.entries())i.includes("left")&&o.anchor("left","parent"),i.includes("top")&&o.anchor("top","parent"),i.length<2&&t.addGuideline(o,e)}}}var Ne=squared.base.Layout,Ce=squared.base.NodeList;const Pe=squared.base.lib.enumeration,Oe=squared.lib.element,Le=squared.lib.util;function Me(t){return t.filter(e=>!e.pageFlow&&("fixed"===e.position||e.absoluteParent===t))}function De(t,e){return t.some(t=>t<e)}function ke(t,e,n){if(Le.isPercent(e)){const o=t.actualParent;if(o){const t=parseFloat(e)-n/o.box.width*100;if(t>0)return Le.formatPercent(t)}}else if(Le.isUnit(e)){const t=parseInt(e)-n;if(t>0)return Le.formatPX(t)}return e}class Be extends squared.base.Extension{condition(t){const e=Me(t);if(e.length){const n=[],o=[],i=[],a=[];for(const t of e)t.has("top")&&t.top>=0&&n.push(t.top),t.has("right")&&t.right>=0&&o.push(t.right),t.has("bottom")&&t.bottom>=0&&i.push(t.bottom),t.has("left")&&t.left>=0&&a.push(t.left);return De(n,t.paddingTop+(t.documentBody?t.marginTop:0))||De(o,t.paddingRight+(t.documentBody?t.marginRight:0))||De(i,t.paddingBottom+(t.documentBody?t.marginBottom:0))||De(a,t.paddingLeft+(t.documentBody?t.marginLeft:0))||t.documentBody&&o.length>0&&t.hasWidth}return!1}processNode(e,n){const o=this.application.createNode(Oe.createElement(e.element,e.block));o.inherit(e,"initial","base"),o.exclude({procedure:Pe.NODE_PROCEDURE.NONPOSITIONAL,resource:Pe.NODE_RESOURCE.BOX_STYLE|Pe.NODE_RESOURCE.ASSET});const[i,a]=Le.partitionArray(Me(e),t=>t.absoluteParent===e);i.push(o),Le.concatArray(Le.sortArray(i,!0,"zIndex","id"),Le.sortArray(a,!0,"zIndex","id"));for(const t of e.duplicate())i.includes(t)||(t.parent=o);o.parent=e,this.application.processing.cache.append(o);for(let t=0;t<i.length;t++)i[t].siblingIndex=t;e.sort(Ce.siblingIndex),e.resetBox(480|(e.documentBody?30:0),o,!0),e.companion=o;const r=new Ne(n,e,t.CONSTRAINT,32,i.length,i);return{output:this.application.renderLayout(r)}}postBaseLayout(t){if(t.hasWidth&&t.companion){const e=t.cssInitial("width",!0),n=t.cssInitial("minWidth",!0);if(t.documentBody&&t.some(t=>t.has("right")))t.cssApply({width:"auto",minWidth:"auto"},!0),t.companion.cssApply({width:e,minWidth:n},!0),t.android("layout_width","match_parent");else{const o=t.paddingLeft+t.paddingRight+(t.documentBody?t.marginLeft+t.marginRight:0);t.companion.cssApply({width:ke(t,e,o),minWidth:ke(t,n,o)},!0)}}}}var Xe=squared.base.Layout;squared;class Ge extends squared.base.Extension{condition(t){return!t.textElement&&!t.imageElement&&!t.svgElement&&(t.has("maxWidth")||t.has("maxHeight"))}processNode(e,n){const o=this.application.controllerHandler.createNodeWrapper(e,n);if(o.css("display","block",!0),e.has("maxWidth")){const t=e.css("maxWidth");o.cssApply({width:t,maxWidth:t},!0)}if(e.has("maxHeight")){const t=e.css("maxHeight");o.cssApply({height:t,maxHeight:t},!0)}const i=new Xe(n,o,t.FRAME,2048,1,o.children);return{output:"",parent:o,renderAs:o,outputAs:this.application.renderLayout(i)}}}var Ve=squared.base.Layout;squared;const He=squared.lib.util;class ze extends squared.base.Extension{condition(t,e){return e.layoutVertical&&!t.documentBody&&t.pageFlow&&!t.imageElement&&t.has("width",32,{not:"100%"})}processNode(e,n){const o=this.application.controllerHandler.createNodeWrapper(e,n);o.android("layout_width","match_parent"),o.android("layout_height","wrap_content"),e.has("height",2)||e.css("height",He.formatPX(e.bounds.height),!0);const i=new Ve(n,o,t.CONSTRAINT,2048,1,o.children);return{output:"",parent:o,renderAs:o,outputAs:this.application.renderLayout(i)}}}var Fe=squared.base.NodeList;squared;const We=squared.lib.util,qe=squared.lib.xml,$e="RadioGroup";class Ue extends squared.base.Extension{condition(t){const e=t.element;return"INPUT"===e.tagName&&"radio"===e.type&&We.hasValue(e.name)}processNode(e,n){const i=e.element,a=e.dataset.use?void 0:e.dataset.target,s=[];let l;const c=n.flatMap(t=>{t.renderAs&&(t.renderAs===e?l=t:s.push(t),t=t.renderAs);const n=t.element;return"radio"!==n.type||n.name!==i.name||t.rendered?void 0:t});if(c.length>1){const i=this.application.controllerHandler,d=i.createNodeGroup(e,c,n,l);d.alignmentType|=8|(n.length!==c.length?128:0),n.layoutConstraint&&(d.companion=l||e),d.setControlType($e,t.INLINE),d.inherit(e,"alignment"),d.css("verticalAlign","text-bottom"),d.each((n,i)=>{n!==e&&n.setControlType(o.RADIO,t.RADIO),n.positioned=!0,n.parent=d,n.siblingIndex=i});for(const t of s)t.hide();d.android("orientation",Fe.linearX(c)?r.HORIZONTAL:r.VERTICAL),d.render(a?this.application.resolveTarget(a,d):n),this.subscribers.add(d);const h=i.getEnclosingTag($e,d.id,a?-1:d.renderDepth,qe.formatPlaceholder(d.id));return{output:"",complete:!0,parent:d,renderAs:d,outputAs:h}}return{output:""}}postBaseLayout(t){t.some(e=>!!e.element.checked&&(t.android("checkedButton",e.documentId),!0))}}const Ye=squared.base.lib.enumeration,je=squared.lib.element,Ke=squared.lib.xml,Ze="HorizontalScrollView",Je="android.support.v4.widget.NestedScrollView";class Qe extends squared.base.Extension{condition(t){return t.length>0&&(t.overflowX||t.overflowY||this.included(t.element)&&(t.hasWidth||t.hasHeight))}processNode(e,n){const o=e.dataset.use?void 0:e.dataset.target,i=[],a=[];let r="";if(e.overflowX&&e.overflowY)i.push(Ze,Je);else if(e.overflowX)i.push(Ze);else if(e.overflowY)i.push(Je);else{let t=0;e.hasWidth&&(t|=8,i.push(Ze)),e.hasHeight&&(t|=16,i.push(Je)),e.overflow=t}for(let o=0;o<i.length;o++){const r=this.application.createNode(0===o?e.element:je.createElement(e.actualParent?e.actualParent.element:null,e.block));r.setControlType(i[o],t.BLOCK),0===o?(r.inherit(e,"initial","base","styleMap"),n.appendTry(e,r)):(r.inherit(e,"base"),r.exclude({resource:Ye.NODE_RESOURCE.BOX_STYLE})),r.exclude({resource:Ye.NODE_RESOURCE.ASSET}),r.resetBox(480),a.push(r)}for(let t=0;t<a.length;t++){const i=a[t],s=a[t-1];switch(i.controlName){case Je:{const t=e.css("height");e.android("layout_width","wrap_content"),i.android("layout_height",e.convertPX(t,!1)),i.cssApply({overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break}case Ze:{const t=e.css("width");i.android("layout_width",e.convertPX(t)),e.android("layout_height","wrap_content"),i.cssApply({overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"});break}}i.unsetCache(),this.application.processing.cache.append(i),i.render(0===t?o?i:n:s);const l=this.application.controllerHandler.getEnclosingTag(i.controlName,i.id,o?0===t?-1:0:i.renderDepth,Ke.formatPlaceholder(i.id));r=0===t?l:Ke.replacePlaceholder(r,s.id,l)}2===a.length?(e.android("layout_width","wrap_content"),e.android("layout_height","wrap_content")):e.overflowX?(e.android("layout_width","wrap_content"),e.android("layout_height","match_parent")):(e.android("layout_width","match_parent"),e.android("layout_height","wrap_content"));const s=a[a.length-1];return e.parent=s,n.layoutConstraint&&(s.companion=e),e.overflow=0,e.resetBox(30),e.exclude({resource:Ye.NODE_RESOURCE.BOX_STYLE}),{output:"",parent:e.parent,renderAs:a[0],outputAs:r}}}var tn='<?xml version="1.0" encoding="utf-8"?>\n<layer-list xmlns:android="http://schemas.android.com/apk/res/android">\n<<A>>\n\t<item>\n\t\t<shape android:shape="rectangle">\n\t\t\t<solid android:color="@color/{&color}" />\n\t\t</shape>\n\t</item>\n<<A>>\n<<B>>\n\t<item android:left="{~left}" android:top="{~top}" android:right="{~right}" android:bottom="{~bottom}" android:drawable="@drawable/{~src}" android:width="{~width}" android:height="{~height}">\n\t<<gradient>>\n\t\t<shape android:shape="rectangle">\n\t\t\t<gradient android:type="{&type}" android:startColor="@color/{~startColor}" android:endColor="@color/{~endColor}" android:centerColor="@color/{~centerColor}" android:angle="{~angle}" android:centerX="{~centerX}" android:centerY="{~centerY}" android:gradientRadius="{~gradientRadius}" android:visible="{~visible}" />\n\t\t</shape>\n\t<<gradient>>\n\t<<bitmap>>\n\t\t<bitmap android:src="@drawable/{&src}" android:gravity="{~gravity}" android:tileMode="{~tileMode}" android:tileModeX="{~tileModeX}" android:tileModeY="{~tileModeY}" />\n\t<<bitmap>>\n\t<<rotate>>\n\t\t<rotate android:drawable="@drawable/{&src}" android:fromDegrees="{~fromDegrees}" android:toDegrees="{~toDegrees}" android:pivotX="{~pivotX}" android:pivotY="{~pivotY}" android:visible="{~visible}" />\n\t<<rotate>>\n\t</item>\n<<B>>\n<<C>>\n\t<item android:left="{~left}" android:top="{~top}" android:right="{~right}" android:bottom="{~bottom}">\n\t\t<shape android:shape="rectangle">\n\t\t<<stroke>>\n\t\t\t<stroke android:width="{&width}" {~borderStyle} />\n\t\t<<stroke>>\n\t\t<<corners>>\n\t\t\t<corners android:radius="{~radius}" android:topLeftRadius="{~topLeftRadius}" android:topRightRadius="{~topRightRadius}" android:bottomRightRadius="{~bottomRightRadius}" android:bottomLeftRadius="{~bottomLeftRadius}" />\n\t\t<<corners>>\n\t\t</shape>\n\t</item>\n<<C>>\n</layer-list>',en='<?xml version="1.0" encoding="utf-8"?>\n<vector xmlns:android="http://schemas.android.com/apk/res/android" {~namespace} android:name="{~name}" android:width="{&width}" android:height="{&height}" android:viewportWidth="{&viewportWidth}" android:viewportHeight="{&viewportHeight}" android:alpha="{~alpha}">\n<<A>>\n\t##region-start##\n\t<group android:name="{~groupName}" android:translateX="{~translateX}" android:translateY="{~translateY}">\n\t##region-start##\n\t\t<<clipRegion>>\n\t\t<clip-path android:name="{~clipName}" android:pathData="{&clipPathData}" />\n\t\t<<clipRegion>>\n\t\t##path-start##\n\t\t<group android:name="{~groupName}" android:rotation="{~rotation}" android:scaleX="{~scaleX}" android:scaleY="{~scaleY}" android:translateX="{~translateX}" android:translateY="{~translateY}" android:pivotX="{~pivotX}" android:pivotY="{~pivotY}">\n\t\t##path-start##\n\t\t<<clipPath>>\n\t\t\t<clip-path android:name="{~clipName}" android:pathData="{&clipPathData}" />\n\t\t<<clipPath>>\n\t\t<<BB>>\n\t\t\t##render-start##\n\t\t\t<group android:name="{~groupName}" android:rotation="{~rotation}" android:scaleX="{~scaleX}" android:scaleY="{~scaleY}" android:translateX="{~translateX}" android:translateY="{~translateY}" android:pivotX="{~pivotX}" android:pivotY="{~pivotY}">\n\t\t\t##render-start##\n\t\t\t<<clipGroup>>\n\t\t\t<clip-path android:name="{~clipName}" android:pathData="{&clipPathData}" />\n\t\t\t<<clipGroup>>\n\t\t\t<<CCC>>\n\t\t\t\t<<clipElement>>\n\t\t\t\t<clip-path android:name="{~clipName}" android:pathData="{&clipPathData}" />\n\t\t\t\t<<clipElement>>\n\t\t\t\t<path android:name="{~name}" android:fillColor="{~fill}" android:fillAlpha="{~fillOpacity}" android:fillType="{~fillRule}" android:strokeColor="{~stroke}" android:strokeAlpha="{~strokeOpacity}" android:strokeWidth="{~strokeWidth}" android:strokeLineCap="{~strokeLinecap}" android:strokeLineJoin="{~strokeLinejoin}" android:strokeMiterLimit="{~strokeMiterlimit}" android:trimPathStart="{~trimPathStart}" android:trimPathEnd="{~trimPathEnd}" android:trimPathOffset="{~trimPathOffset}" android:pathData="{&value}">\n\t\t\t\t<<fillPattern>>\n\t\t\t\t\t<aapt:attr name="android:fillColor">\n\t\t\t\t\t<<gradients>>\n\t\t\t\t\t\t<gradient android:type="{&type}" android:startColor="@color/{~startColor}" android:endColor="@color/{~endColor}" android:centerColor="@color/{~centerColor}" android:startX="{~startX}" android:startY="{~startY}" android:endX="{~endX}" android:endY="{~endY}" android:centerX="{~centerX}" android:centerY="{~centerY}" android:gradientRadius="{~gradientRadius}" android:tileMode="{~tileMode}">\n\t\t\t\t\t\t<<colorStops>>\n\t\t\t\t\t\t\t<item android:offset="{&offset}" android:color="{&color}" />\n\t\t\t\t\t\t<<colorStops>>\n\t\t\t\t\t\t</gradient>\n\t\t\t\t\t<<gradients>>\n\t\t\t\t\t</aapt:attr>\n\t\t\t\t<<fillPattern>>\n\t\t\t\t</path>\n\t\t\t<<CCC>>\n\t\t\t##render-end##\n\t\t\t</group>\n\t\t\t##render-end##\n\t\t\t<<DDD>>\n\t\t\t!!{&templateName}!!\n\t\t\t<<DDD>>\n\t\t<<BB>>\n\t\t##path-end##\n\t\t</group>\n\t\t##path-end##\n\t##region-end##\n\t</group>\n\t##region-end##\n<<A>>\n<<B>>\n!!{&templateName}!!\n<<B>>\n</vector>';const nn=squared.svg&&squared.svg.SvgBuild,on=squared.base.lib.enumeration,an=squared.lib.color,rn=squared.lib.css,sn=squared.lib.math,ln=squared.lib.util,cn=squared.lib.xml,dn={LAYER_LIST:cn.parseTemplate(tn),SHAPE:cn.parseTemplate('<?xml version="1.0" encoding="utf-8"?>\n<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">\n<<A>>\n\t<stroke android:width="{&width}" {~borderStyle} />\n<<A>>\n<<B>>\n\t<solid android:color="@color/{&color}" />\n<<B>>\n<<C>>\n\t<corners android:radius="{~radius}" android:topLeftRadius="{~topLeftRadius}" android:topRightRadius="{~topRightRadius}" android:bottomLeftRadius="{~bottomLeftRadius}" android:bottomRightRadius="{~bottomRightRadius}" />\n<<C>>\n</shape>'),VECTOR:cn.parseTemplate(en)},hn=f.STORED;function un(t,e=-1,n=!1){const o=parseInt(t.width),i=`android:color="@color/${t.color}"`,a=`${i} android:dashWidth="${o}px" android:dashGap="${o}px"`,r={solid:i,double:i,inset:i,outset:i,dashed:a,dotted:a,groove:"",ridge:""},s=t.style,l="groove"===s;if(o>1&&(l||"ridge"===s)){const o=an.parseColor(t.color);if(o){const t=an.reduceColor(o.valueAsRGBA,l||"#000000"===o.value?.5:-.5);if(t){const i=f.addColor(t);if(""!==i){const t=`android:color="@color/${i}"`;if(0!==e&&2!==e||(n=!n),"#000000"!==o.value||(!l||1!==e&&3!==e)&&(l||0!==e&&2!==e)||(n=!n),n)switch(e){case 0:r[s]=t;break;case 1:case 2:r[s]=r.solid;break;case 3:r[s]=t}else switch(e){case 0:r[s]=r.solid;break;case 1:case 2:r[s]=t;break;case 3:r[s]=r.solid}}}}}return r[s]||r.solid}function pn(t,e,n=-1,o=!1,i=!1){switch(e){case"stroke":if(t.border&&f.isBorderVisible(t.border)){if(!o||i)return[{width:t.border.width,borderStyle:un(t.border,i?n:-1)}];if(o)return[{width:ln.formatPX(Math.ceil(parseInt(t.border.width)/2)),borderStyle:un(t.border,n,!0)}]}return!1;case"backgroundColor":return!!ln.hasValue(t.backgroundColor)&&[{color:t.backgroundColor}];case"radius":if(t.borderRadius)if(1===t.borderRadius.length){if("0px"!==t.borderRadius[0])return[{radius:t.borderRadius[0]}]}else if(t.borderRadius.length>1){const e={};for(let n=0;n<t.borderRadius.length;n++)e[`${["topLeft","topRight","bottomRight","bottomLeft"][n]}Radius`]=t.borderRadius[n];return[e]}return!1}return!1}function mn(t,e,n,o,i,a,r){if(t.C){const s=parseInt(e.width),l=Math.floor(s/3),c=2===s%3?1:0,d=l+c,h=l+c;let u=`${ln.formatPX(s-l)}`,p=`-${u}`;t.C.push({top:n?"":p,right:o?"":p,bottom:i?"":p,left:a?"":p,stroke:[{width:ln.formatPX(d),borderStyle:un(e)}],corners:r}),3===s&&(p=`-${u=`${ln.formatPX(s)}`}`),t.C.push({top:n?u:p,right:o?u:p,bottom:i?u:p,left:a?u:p,stroke:[{width:ln.formatPX(h),borderStyle:un(e)}],corners:r})}}function gn(t,e,n){const o="initial"===t||"unset"===t;return-1===t.indexOf(" ")&&-1!==e.indexOf(" ")?/^[a-z]+$/.test(t)?`${o?n:t} 0px`:`${n} ${t}`:o?"0px":t}function fn(t,e,n,o){if(o)switch(e){case"left":case"right":if(ln.isPercent(t.originalX))return parseInt(t.originalX)/100*(n.width-o.width);break;case"top":case"bottom":if(ln.isPercent(t.originalY))return parseInt(t.originalY)/100*(n.height-o.height)}return t[e]}function yn(t,e=21,n){if(void 0===t.dimension)return;const o=t.dimension,i={type:t.type,colorStops:!1},a=e>=21;switch(t.type){case"radial":{const e=rn.getBackgroundPosition(t.position[0],o,t.fontSize,!a);a?(i.gradientRadius=""+o.width,i.centerX=""+e.left,i.centerY=""+e.top):(i.gradientRadius=ln.formatPX(o.width),i.centerX=ln.formatPercent(100*e.left),i.centerY=ln.formatPercent(100*e.top));break}case"linear":{const e=t,a=e.angle;let r,s;e.dimension?(r=e.dimension.width,s=e.dimension.height):(r=Math.round(o.width),s=Math.round(o.height));let l=sn.offsetAngleX(a,r),c=sn.offsetAngleY(a,s);if(!sn.isEqual(Math.abs(l),Math.abs(c))){let t;t=a<=90?sn.offsetAngle({x:0,y:s},{x:r,y:0}):a<=180?sn.offsetAngle({x:0,y:0},{x:r,y:s}):a<=270?sn.offsetAngle({x:0,y:0},{x:-r,y:s}):sn.offsetAngle({x:0,y:s},{x:-r,y:0});let e=Math.abs(t-a),n=90-e;const o=sn.trianguleASA(e,n,Math.sqrt(Math.pow(r,2)+Math.pow(s,2)));l=sn.truncateFraction(sn.offsetAngleX(a,o[1]));const i=sn.trianguleASA(e=90,n=90-a,l);c=sn.truncateFraction(sn.offsetAngleY(a,i[0]))}a<=90?(c+=s,i.startX="0",i.startY=""+s):a<=180?(i.startX="0",i.startY="0"):a<=270?(l+=r,i.startX=""+r,i.startY="0"):(l+=r,c+=s,i.startX=""+r,i.startY=""+s),i.endX=sn.truncate(l,n),i.endY=sn.truncate(c,n);break}case"conic":{i.type="sweep";const e=rn.getBackgroundPosition(t.position[0],{width:2*o.width,height:2*o.height},t.fontSize,!a);a?(i.centerX=""+e.left,i.centerY=""+e.top):(i.centerX=ln.formatPercent(100*e.left),i.centerY=ln.formatPercent(100*e.top));break}}const r=t.colorStops;return a?i.colorStops=bn.convertColorStops(r):(i.startColor=f.addColor(r[0].color,!0),i.endColor=f.addColor(r[r.length-1].color,!0),r.length>2&&(i.centerColor=f.addColor(r[Math.floor(r.length/2)].color,!0))),i}class bn extends squared.base.Extension{constructor(){super(...arguments),this.options={autoSizeBackgroundImage:!0},this.eventOnly=!0}static convertColorStops(t,e){const n=[];for(const o of t){const t=`@color/${f.addColor(o.color,!0)}`;n.push({color:t,offset:sn.truncate(o.offset,e)})}return n}afterResources(){for(const i of this.application.processing.cache.duplicate().sort(t=>t.visible?0:-1)){const a=i.data(f.KEY_NAME,"boxStyle");if(a&&!i.hasBit("excludeResource",on.NODE_RESOURCE.BOX_STYLE)){const r=a.backgroundRepeat.split(ln.REGEXP_COMPILED.SEPARATOR),s=a.backgroundSize.split(ln.REGEXP_COMPILED.SEPARATOR),l=a.backgroundPositionX.split(ln.REGEXP_COMPILED.SEPARATOR),c=a.backgroundPositionY.split(ln.REGEXP_COMPILED.SEPARATOR),d=[],h=[],u=[];let p=0;if(a.backgroundImage&&!i.hasBit("excludeResource",on.NODE_RESOURCE.IMAGE_SOURCE)){for(p=a.backgroundImage.length;s.length<p;)ln.concatArray(s,s.slice(0));s.length=p;for(let t=0,e=0;t<p;t++){const n=a.backgroundImage[t];let o=!0;if("string"==typeof n)"initial"!==n&&(d[e]=f.addImageUrl(n),""!==d[e]&&(u[e]=f.ASSETS.images.get(rn.resolveURL(n)),o=!1));else if(n.colorStops.length>1){void 0===n.dimension&&(n.dimension=i.bounds);const t=yn(n,i.localSettings.targetAPI);t&&(d[e]=t,u[e]=n.dimension,o=!1)}if(o)r.splice(t,1),s.splice(t,1),p--;else{const n=l[t]||l[t-1],o=c[t]||c[t-1];h[e]=`${gn(n,o,"left")} ${gn(o,n,"top")}`,e++}}}const m=i.companion;if(m&&!m.visible&&m.htmlElement&&!rn.isInheritedStyle(m.element,"backgroundColor")){const t=m.data(f.KEY_NAME,"boxStyle"),e=f.addColor(t.backgroundColor);""!==e&&(a.backgroundColor=e)}const g=[a.borderTop,a.borderRight,a.borderBottom,a.borderLeft],y=[],b=new Set,T=new Set;let A;for(let t=0;t<g.length;t++){const e=g[t];y[t]=f.isBorderVisible(e),y[t]&&(e.color=f.addColor(e.color),b.add(un(e)),T.add(e.width),A=e)}const E=void 0!==A||void 0!==a.borderRadius;if(p||E){const l={A:!1,B:[],C:!1};let c="";for(let o=p-1;o>=0;o--){const a=d[o],c={bitmap:!1,rotate:!1,gradient:!1},m=i.of(t.IMAGE,2048)&&1===p,g=rn.getBackgroundPosition(h[o],i.bounds,i.fontSize);function e(){m||(g.left=0,g.right=0)}function n(){m||(g.top=0,g.bottom=0)}let y,b="";if("center"!==g.horizontal&&"50%"!==g.horizontal||"center"!==g.vertical&&"50%"!==g.vertical){switch(g.horizontal){case"0%":case"left":e(),b=i.localizeString("left");break;case"50%":case"center":e(),b="center_horizontal";break;case"100%":case"right":e(),b=i.localizeString("right")}const t=""!==b?"|":"";switch(g.vertical){case"0%":case"top":n(),b+=t+"top";break;case"50%":case"center":n(),b+=t+"center_vertical";break;case"100%":case"bottom":n(),b+=t+"bottom"}}else e(),n(),b="center";if("string"==typeof a){y=u[o];let t="",e="",n="",l="",d="";if("no-repeat"===r[o])n="disabled";else if(!y||y.width<i.bounds.width||y.height<i.bounds.height)switch(r[o]){case"repeat":n="repeat";break;case"repeat-x":l="repeat";break;case"repeat-y":d="repeat"}if(""!==b&&y&&y.width>0&&y.height>0&&0===i.renderChildren.length){if("repeat"===d){let e=0;if(y.width<(e=i.hasWidth?i.width+i.paddingLeft+i.paddingRight:i.bounds.width-(i.borderLeftWidth+i.borderRightWidth))){const n=ln.convertInt(i.android("layout_width"));-1!==b.indexOf("left")||-1!==b.indexOf("start")?(g.right=e-y.width,i.hasWidth&&e>n&&i.android("layout_width",ln.formatPX(i.bounds.width))):-1!==b.indexOf("right")||-1!==b.indexOf("end")?(g.left=e-y.width,i.hasWidth&&e>n&&i.android("layout_width",ln.formatPX(i.bounds.width))):"center"!==b&&-1===b.indexOf("center_horizontal")||(g.left=Math.floor((e-y.width)/2),t=ln.formatPX(y.width),i.hasWidth&&e>n&&i.android("layout_width",ln.formatPX(i.bounds.width)))}}if("repeat"===l){let t=0;if(y.height<(t=i.hasHeight?i.height+i.paddingTop+i.paddingBottom:i.bounds.height-(i.borderTopWidth+i.borderBottomWidth))){const n=ln.convertInt(i.android("layout_height"));-1!==b.indexOf("top")?(g.bottom=t-y.height,!i.hasHeight&&t>n&&i.android("layout_height",ln.formatPX(i.bounds.height))):-1!==b.indexOf("bottom")?(g.top=t-y.height,!i.hasHeight&&t>n&&i.android("layout_height",ln.formatPX(i.bounds.height))):"center"!==b&&-1===b.indexOf("center_vertical")||(g.top=Math.floor((t-y.height)/2),e=ln.formatPX(y.height),!i.hasHeight&&t>n&&i.android("layout_height",ln.formatPX(i.bounds.height)))}}}if(m){let t="";if(/^(left|start)/.test(b)?t="fitStart":/^(right|end)/.test(b)?t="fitEnd":("center"===b||b.startsWith("center_horizontal"))&&(t="center"),g.left>0&&i.modifyBox(16,g.left),g.top>0&&i.modifyBox(2,g.top),i.android("scaleType",t),i.android("src",`@drawable/${a}`),!E)return}else{if("auto"!==s[o]&&"auto auto"!==s[o]&&"initial"!==s[o])switch(s[o]){case"cover":case"contain":case"100% 100%":t="",e="",n="",l="",d="",b="";break;default:const a=s[o].split(" ");"100%"===a[0]?l="":"100%"===a[1]&&(d="");for(let n=0;n<a.length;n++)"auto"!==a[n]&&"100%"!==a[n]&&(0===n?t=i.convertPX(s[o],!0,!1):e=i.convertPX(s[o],!1,!1))}c.width=t,c.height=e,""!==b||""!==n||""!==l||""!==d?c.bitmap=[{src:a,gravity:b,tileMode:n,tileModeX:l,tileModeY:d}]:c.src=a}}else if(a.colorStops){let t,e;(y=u[o]||f.getBackgroundSize(i,s[o]))?(t=Math.round(y.width),e=Math.round(y.height),c.width=ln.formatPX(t),c.height=ln.formatPX(e)):(t=Math.round(i.bounds.width),e=Math.round(i.bounds.height));const n={namespace:k("aapt"),width:c.width||ln.formatPX(t),height:c.height||ln.formatPX(e),viewportWidth:""+t,viewportHeight:""+e,alpha:"",A:[{region:[[]],clipRegion:!1,path:[[]],clipPath:!1,BB:[{render:[[]],CCC:[{value:nn.drawRect(t,e),clipElement:!1,fillPattern:[{gradients:[a]}]}],DDD:!1}]}],B:!1},r=cn.createTemplate(dn.VECTOR,n,!0);let l=f.getStoredName("drawables",r);""===l&&(l=`${i.tagName.toLowerCase()}_${i.controlId}_gradient_${o}`,hn.drawables.set(l,r)),c.src=l}else c.gradient=[a];(c.src||c.bitmap||c.gradient)&&(0!==g.top&&(c.top=ln.formatPX(c.gradient?fn(g,"top",i.bounds,y):g.top)),0!==g.right&&(c.right=ln.formatPX(g.right)),0!==g.bottom&&(c.bottom=ln.formatPX(g.bottom)),0!==g.left&&(c.left=ln.formatPX(c.gradient?fn(g,"left",i.bounds,y):g.left)),l.B.push(c))}a.backgroundColor=f.addColor(a.backgroundColor);const m=pn(a,"backgroundColor"),S=pn(a,"radius");let v,w;const R=a.border;if(R&&!("double"===R.style&&parseInt(R.width)>2||("groove"===R.style||"ridge"===R.style)&&parseInt(R.width)>1)){const t=pn(a,"stroke")||[];0===d.length?(S&&void 0===S[0].radius&&(S[0].radius="1px"),v=dn.SHAPE,w={A:t,B:m,C:S}):(v=dn.LAYER_LIST,l.A=m,(A||S)&&(l.C=[{stroke:t,corners:S}]))}else{v=dn.LAYER_LIST,l.A=m,l.C=[];const t=y[1]&&y[2];function o(e){return e+(t?0:1===e?1:2)}if(1===b.size&&1===T.size&&A&&"groove"!==A.style&&"ridge"!==A.style){const t=parseInt(A.width);if("double"===A.style&&t>2)mn(l,A,y[0],y[1],y[2],y[3],S);else{const e=`-${ln.formatPX(o(t))}`,n=!y[0]&&!y[3],i=!y[0]&&y[1]&&y[2]&&y[3],a=y[0]&&y[1]&&y[2]&&!y[3];l.C.push({top:y[0]?"":e,right:y[1]?y[3]||n||a?"":A.width:e,bottom:y[2]?y[0]||n||i?"":A.width:e,left:y[3]?"":e,stroke:pn({border:A},"stroke"),corners:S})}}else for(let e=0;e<g.length;e++)if(y[e]){const n=g[e],i=parseInt(n.width);if("double"===n.style&&i>2)mn(l,n,0===e,1===e,2===e,3===e,S);else{const a=i>1&&("groove"===n.style||"ridge"===n.style),r=o(a?Math.ceil(i/2):i),s=!t&&"1px"===n.width;let c=`-${ln.formatPX(r)}`,d=`-${ln.formatPX(r+(t?1:0))}`;l.C.push({top:0===e?"":d,right:1===e?s?n.width:"":c,bottom:2===e?s?n.width:"":c,left:3===e?"":c,stroke:pn({border:n},"stroke",e,a),corners:S}),a&&(c=`-${ln.formatPX(o(i))}`,d=`-${ln.formatPX(i+(t?1:0))}`,l.C.unshift({top:0===e?"":d,right:1===e?s?n.width:"":c,bottom:2===e?s?n.width:"":c,left:3===e?"":c,stroke:pn({border:n},"stroke",e,!0,!0),corners:!1}))}}}if(v){const t=cn.createTemplate(v,w||l,l.B.some(t=>!!t.src));""===(c=f.getStoredName("drawables",t))&&(c=`${i.tagName.toLowerCase()}_${i.controlId}`,hn.drawables.set(c,t))}if(d.length&&(i.data("RESOURCE","backgroundImage",!0),this.options.autoSizeBackgroundImage&&!i.documentRoot&&!i.imageElement&&!i.svgElement&&i.renderParent&&!i.renderParent.tableElement&&!i.hasBit("excludeProcedure",on.NODE_PROCEDURE.AUTOFIT))){const e={width:0,height:0};for(const t of u)t&&(e.width=Math.max(e.width,t.width),e.height=Math.max(e.height,t.height));if(0===e.width){let t=i;for(;t&&!t.documentBody&&(t.hasWidth&&(e.width=t.bounds.width),t.hasHeight&&(e.height=t.bounds.height),t.pageFlow&&!(e.width>0&&e.height>0));)t=t.documentParent}if(!i.has("width",2)){const n=i.bounds.width+(i.is(t.LINE)?0:i.borderLeftWidth+i.borderRightWidth);(0===e.width||n>0&&n<e.width)&&i.css("width",ln.formatPX(n),!0)}if(!i.has("height",2)){const n=i.bounds.height+(i.is(t.LINE)?0:i.borderTopWidth+i.borderBottomWidth);(0===e.height||n>0&&n<e.height)&&(i.css("height",ln.formatPX(n),!0),i.marginTop<0&&i.modifyBox(2,null),i.marginBottom<0&&i.modifyBox(8,null))}}i.android("background",`@drawable/${c}`,!1)}else if(a.backgroundColor){const t=i.data(f.KEY_NAME,"fontStyle");t?t.backgroundColor=a.backgroundColor:(a.backgroundColor=f.addColor(a.backgroundColor),""!==a.backgroundColor&&i.android("background",`@color/${a.backgroundColor}`,!1))}}}}}const Tn=squared.lib.util,An=f.STORED,En=["android","app"],Sn=/[\s\n]+<[^<]*?(\w+):(\w+)="(-?[\d.]+(?:px|dp|sp))"/,vn=/^[\s\n]+<([\w\-.]+)[\s\n]/,wn=/^-?[\d.]+(px|dp|sp)$/;function Rn(t,e,n){for(const[o,i]of t.entries())if(o.startsWith(e)&&n===i)return o;return t.has(e)&&t.get(e)!==n?f.generateId("dimen",e):e}function _n(t){return Tn.convertUnderscore(t).replace("layout_","")}function xn(t){return Tn.fromLastIndexOf(t,".")}class In extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}afterProcedure(){const t={};for(const e of this.application.session.cache)if(e.visible){const n=e.tagName.toLowerCase();void 0===t[n]&&(t[n]={});for(const o of En){const i=e.namespace(o);for(const a in i){const r=i[a].trim();if(wn.test(r)){const i=`${o},${a},${r}`;void 0===t[n][i]&&(t[n][i]=[]),t[n][i].push(e)}}}}for(const e in t){const n=t[e];for(const t in n){const[o,i,a]=t.split(Tn.REGEXP_COMPILED.SEPARATOR),r=Rn(An.dimens,`${xn(e)}_${_n(i)}`,a);for(const e of n[t])e[o](i,`@dimen/${r}`);An.dimens.set(r,a)}}}afterFinalize(){for(const t of this.application.viewData){let e,n=t.content;for(;null!==(e=Sn.exec(n));){const t=vn.exec(e[0]);if(t){const o=Rn(An.dimens,`${xn(t[1]).toLowerCase()}_${_n(e[2])}`,e[3]);An.dimens.set(o,e[3]),n=n.replace(e[0],e[0].replace(e[3],`@dimen/${o}`))}}t.content=n}}}const Nn=squared.base.lib.enumeration,Cn=squared.lib.util,Pn={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},On={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},Ln={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif"},Mn={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},Dn={fontFamily:'android:fontFamily="{0}"',fontStyle:'android:textStyle="{0}"',fontWeight:'android:fontWeight="{0}"',fontSize:'android:textSize="{0}"',color:'android:textColor="@color/{0}"',backgroundColor:'android:background="@color/{0}"'};Cn.isUserAgent(16)&&(Ln.consolas="monospace");const kn=f.STORED;function Bn(t,e,n){for(const o of e.split(";"))for(let e=0;e<t.length;e++){let i=-1,a="";for(const n in t[e])if(n===o){i=e,a=n,e=t.length;break}if(-1!==i){t[i][a]=Cn.filterArray(t[i][a],t=>!n.includes(t)),0===t[i][a].length&&delete t[i][a];break}}}class Xn extends squared.base.Extension{constructor(){super(...arguments),this.options={fontResourceValue:!0},this.eventOnly=!0}afterParseDocument(){const t={},e={};for(const e of this.application.session.cache)e.visible&&e.data(f.KEY_NAME,"fontStyle")&&!e.hasBit("excludeResource",Nn.NODE_RESOURCE.FONT_STYLE)&&(void 0===t[e.tagName]&&(t[e.tagName]=[]),t[e.tagName].push(e));const n=Object.keys(Dn);for(const o in t){const i=[];for(let e of t[o]){const{id:t,companion:o}=e;o&&!o.visible&&"LABEL"===o.tagName&&(e=o);const a=Object.assign({},e.data(f.KEY_NAME,"fontStyle"));let r=!1;if(a.backgroundColor&&(a.backgroundColor=f.addColor(a.backgroundColor)),a.fontFamily){let t=a.fontFamily.split(Cn.REGEXP_COMPILED.SEPARATOR)[0].replace(/"/g,"").toLowerCase(),n="",o="";if(a.color=f.addColor(a.color),this.options.fontResourceValue&&Ln[t]&&(t=Ln[t]),Pn[t]&&e.localSettings.targetAPI>=Pn[t]||this.options.fontResourceValue&&On[t]&&e.localSettings.targetAPI>=Pn[On[t]]?(r=!0,a.fontFamily=t,"normal"===a.fontStyle&&(a.fontStyle=""),"400"!==a.fontWeight&&e.supported("android","fontWeight")||(a.fontWeight="")):(t=Cn.convertWord(t),a.fontFamily=`@font/${t+("normal"!==a.fontStyle?`_${a.fontStyle}`:"")+("400"!==a.fontWeight?`_${Mn[a.fontWeight]||a.fontWeight}`:"")}`,n=a.fontStyle,o=a.fontWeight,a.fontStyle="",a.fontWeight=""),!r){const e=f.STORED.fonts.get(t)||{};e[`${n}-${Mn[o]||o}`]=!0,f.STORED.fonts.set(t,e)}}for(let e=0;e<n.length;e++){const o=a[n[e]];if(o){const a=Cn.formatString(Dn[n[e]],o);void 0===i[e]&&(i[e]={}),void 0===i[e][a]&&(i[e][a]=[]),i[e][a].push(t)}}}e[o]=i}const o={};for(const n in e){o[n]={};const i=Cn.filterArray(e[n],t=>void 0!==t).sort((t,e)=>{let n=0,o=0,i=0,a=0;for(const e in t)n=Math.max(t[e].length,n),i+=t[e].length;for(const t in e)e[t]&&(o=Math.max(e[t].length,o),a+=e[t].length);return n!==o?n>o?-1:1:i!==a?i>a?-1:1:0});do{if(1===i.length){for(const t in i[0])i[0][t].length&&(o[n][t]=i[0][t]);i.length=0}else{const e={};for(let a=0;a<i.length;a++){const r={};for(const o in i[a]){const s=i[a][o];if(0===s.length)continue;if(s.length===t[n].length){e[o]=s,i[a]={};break}const l={};let c=!1;for(let t=0;t<i.length;t++)if(a!==t)for(const e in i[t]){const n=i[t][e];if(n.length)for(const t of s)n.includes(t)&&(void 0===l[e]&&(l[e]=[]),l[e].push(t))}for(const t in l)l[t].length>1&&(r[[o,t].sort().join(";")]=l[t],c=!0);c||(r[o]=s)}if(Object.keys(r).length){const t={},e=new Set,a={};for(const t in r)a[t]=r[t].join(",");for(const n in r)for(const o in r){const i=a[n];if(n!==o&&i===a[o]){void 0===t[i]&&(t[i]=new Set(n.split(";")));for(const e of o.split(";"))t[i].add(e);e.add(n).add(o)}}for(const t of e)delete r[t];for(const t in r)Bn(i,t,r[t]),o[n][t]=r[t];for(const e in t){const a=Array.from(t[e]).sort().join(";"),r=Cn.replaceMap(e.split(Cn.REGEXP_COMPILED.SEPARATOR),t=>parseInt(t));Bn(i,a,r),o[n][a]=r}}}const a=Object.keys(e);a.length&&(o[n][a.join(";")]=e[a[0]]),Cn.spliceArray(i,t=>{for(const e in t)if(t[e].length)return!1;return!0})}}while(i.length>0)}const i={},a={},r=new Set;for(const t in o){const e=o[t],n=[];for(const t in e){const o=[];for(const e of t.split(";")){const t=Cn.REGEXP_COMPILED.ATTRIBUTE.exec(e);t&&o.push({name:t[1],value:t[2]})}n.push({name:"",parent:"",items:o,ids:e[t]})}n.sort((t,e)=>{let n=0,o=0;return t.ids&&e.ids&&(n=t.ids.length,o=e.ids.length),n===o&&(n=t.items.length,o=e.items.length),n===o&&(n=t.items[0].name,o=e.items[0].name),n===o&&(n=t.items[0].value,o=e.items[0].value),n<=o?1:-1});for(let e=0;e<n.length;e++)n[e].name=Cn.capitalize(t)+(e>0?`_${e}`:"");i[t]=n}for(const t in i)for(const e of i[t])if(e.ids)for(const t of e.ids)void 0===a[t]&&(a[t]=[]),a[t].push(e.name);for(const t in a){const e=this.application.session.cache.find("id",parseInt(t));if(e){const n=a[t];n.length&&(r.add(n.join(".")),e.attr("_","style",`@style/${n.pop()}`))}}for(const t of r){let e="";for(const n of t.split(".")){const t=n.match(/^(\w*?)(?:_(\d+))?$/);if(t){const o=i[t[1].toUpperCase()],a=Cn.convertInt(t[2]);o[a]&&(kn.styles.set(n,Object.assign({},o[a],{name:n,parent:e})),e=n)}}}}}const Gn=squared.lib.util,Vn=squared.lib.xml;class Hn extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}afterDepthLevel(){const t=this.application.processing;for(const e of t.cache){const n=[],o=[];if(e.renderEach((t,e)=>{const i=Gn.hasValue(t.dataset.androidInclude),a="true"===t.dataset.androidIncludeEnd;if(i||a){const r="true"===t.dataset.androidIncludeMerge,s={item:t,name:(t.dataset.androidInclude||"").trim(),index:e,merge:r};i&&n.push(s),a&&o.push(s)}}),n.length&&o.length){n.length=Math.min(n.length,o.length);for(let t=n.length;t<o.length;t++)o.shift();for(let i=n.length-1;i>=0;i--){const a=n[i];for(let n=0;n<o.length;n++){const i=o[n].index;if(i>=a.index){const r=new Map;let s=!0;for(let n=a.index;n<=i;n++){const o=e.renderChildren[n],i=t.depthMap.get(e.id);if(i&&i.has(o.renderPositionId)){const t=r.get(e.id)||[];t.push(o),r.set(e.id,t)}else s=!1}if(s){const e=new Map,n=[];let o=0;for(const[i,s]of t.depthMap.entries()){const t=r.get(i);if(t){const i=[];for(const[r,l]of s.entries()){const c=t.find(t=>t.renderPositionId===r);if(c){if(0===o){const t=this.application.controllerHandler.renderNodeStatic("include",c.renderDepth,{layout:`@layout/${a.name}`});s.set(r,t),o++}else i.push(r);e.set(r,l),n.push(c)}}for(const t of i)s.delete(t)}}if(e.size){const t=this.application.controllerHandler,o=a.merge||e.size>1,i=o?1:0;for(const o of n)if(o.renderDepth!==i){const n=o.renderPositionId,a=e.get(n);a&&e.set(n,t.replaceIndent(a,i,t.cache.children))}let r="";for(const t of e.values())r+=t;if(o)r=t.getEnclosingTag("merge",0,0,r);else if(!a.item.documentRoot){const t=Vn.formatPlaceholder(a.item.id,"@");r=r.replace(t,`{#0}${t}`),a.item.documentRoot=!0}this.application.addIncludeFile(a.name,r)}}o.splice(n,1);break}}}}}}}const zn=squared.base.lib.enumeration,Fn=squared.lib.css,Wn=squared.lib.util,qn=squared.lib.xml;function $n(t,e=!1){const n=[];let o=[],i=-1;for(;++i<t.children.length;){const a=t.children[i].text.trim();if(""!==a)if(o&&0===n.length&&Wn.isNumber(a))o.push(a);else{if(o&&o.length){i=-1,o=void 0;continue}""!==a&&n.push(e?qn.replaceEntity(a):a)}}return[n.length?n:void 0,o&&o.length?o:void 0]}class Un extends squared.base.Extension{constructor(){super(...arguments),this.options={numberResourceValue:!1},this.eventOnly=!0}afterResources(){for(const t of this.application.processing.cache)if(!t.hasBit("excludeResource",zn.NODE_RESOURCE.VALUE_STRING)){const e=t.element;if(e&&"SELECT"===e.tagName){const[n,o]=$n(e,this.application.userSettings.replaceCharacterEntities);let i;if(!this.options.numberResourceValue&&o&&o.length)i=o;else{const t=n||o;if(t){i=[];for(let e of t)e=f.addString(qn.replaceCharacter(e),"",this.options.numberResourceValue),i.push(""!==e?`@string/${e}`:"")}}if(i&&i.length){const e=i.join("-");let n="";for(const[t,o]of f.STORED.arrays.entries())if(e===o.join("-")){n=t;break}""===n&&f.STORED.arrays.set(n=`${t.controlId}_array`,i),t.android("entries",`@array/${n}`,!1)}}else{const e=t.data(f.KEY_NAME,"valueString");if(e){const n=t.renderParent;if(n&&n.layoutRelative&&t.alignParent("left")&&!Fn.isParentStyle(t.element,"whiteSpace","pre","pre-wrap")){const n=t.textContent;let o=0;for(let t=0;t<n.length;t++)switch(n.charCodeAt(t)){case 160:o++;case 32:continue}0===o&&(e.value=e.value.replace(/^(\s|&#160;)+/,""))}e.value=qn.replaceCharacter(e.value),t.htmlElement&&"small-caps"===t.css("fontVariant")&&(e.value=e.value.toUpperCase());const o=t.actualParent;if(o){let n=0;(o.blockDimension||t.blockDimension)&&(n=t.toInt("textIndent")||o.toInt("textIndent")),0===n||!t.blockDimension&&o.firstChild!==t||(n>0?e.value="&#160;".repeat(Math.floor(n/7))+e.value:t.toInt("textIndent")+t.bounds.width<0&&(e.value=""))}const i=f.addString(e.value,e.name,this.options.numberResourceValue);""!==i&&t.android("text",isNaN(parseInt(i))||""+parseInt(i)!==i?`@string/${i}`:i,!1)}}}}}const Yn=squared.lib.util,jn=f.STORED;class Kn extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}afterProcedure(){const t={};for(const e of this.application.session.cache)if(e.visible){const n=e.renderChildren;if(e.controlId&&n.length>1){const o=new Map;let i="",a=!0;for(let t=0;t<n.length;t++){let e=!1;if(n[t].combine("_","android").some(n=>{if(n.startsWith("style=")){if(0===t)i=n;else if(""===i||n!==i)return a=!1,!0;e=!0}else o.set(n,(o.get(n)||0)+1);return!1}),!a||""!==i&&!e){a=!1;break}}if(a){for(const[t,e]of o.entries())e!==n.length&&o.delete(t);if(o.size>1){""!==i&&(i=Yn.trimString(i.substring(i.indexOf("/")+1),'"'));const a=[];for(const t of o.keys()){const e=t.match(/(\w+):(\w+)="([^"]+)"/);if(e){for(const t of n)t.delete(e[1],e[2]);a.push(e[0])}}a.sort();let r="";for(const e in t)if(t[e].join(";")===a.join(";")){r=e;break}""!==r&&""!==i&&r.startsWith(`${i}.`)||(t[r=Yn.convertCamelCase((""!==i?`${i}.`:"")+Yn.capitalize(e.controlId),"_")]=a);for(const t of n)t.attr("_","style",`@style/${r}`)}}}}for(const e in t){const n=[];for(const o in t[e]){const i=Yn.REGEXP_COMPILED.ATTRIBUTE.exec(t[e][o]);i&&n.push({name:i[1],value:i[2]})}jn.styles.set(e,Object.assign({},N(),{name:e,items:n,ids:[]}))}}}var Zn='<?xml version="1.0" encoding="utf-8"?>\n<animated-vector xmlns:android="http://schemas.android.com/apk/res/android" android:drawable="@drawable/{&vectorName}">\n<<A>>\n\t<target android:name="{&name}" android:animation="@anim/{&animationName}" />\n<<A>>\n</animated-vector>';const Jn='<<fillBefore>>\n\t<set>\n\t<<values>><<values>>\n\t</set>\n<<fillBefore>>\n<<repeating>>\n\t<objectAnimator\n\t\tandroid:propertyName="{~propertyName}"\n\t\tandroid:interpolator="{~interpolator}"\n\t\tandroid:valueType="{~valueType}"\n\t\tandroid:valueFrom="{~valueFrom}"\n\t\tandroid:valueTo="{~valueTo}"\n\t\tandroid:startOffset="{~startOffset}"\n\t\tandroid:duration="{&duration}"\n\t\tandroid:repeatCount="{&repeatCount}">\n\t<<propertyValues>>\n\t\t<propertyValuesHolder android:propertyName="{&propertyName}">\n\t\t<<keyframes>>\n\t\t\t<keyframe android:interpolator="{~interpolator}" android:fraction="{~fraction}" android:value="{~value}" />\n\t\t<<keyframes>>\n\t\t</propertyValuesHolder>\n\t<<propertyValues>>\n\t</objectAnimator>\n<<repeating>>\n<<fillCustom>>\n\t<set android:ordering="{~ordering}">\n\t<<values>><<values>>\n\t</set>\n<<fillCustom>>\n<<fillAfter>>\n\t<set>\n\t<<values>>\n\t\t<objectAnimator\n\t\t\tandroid:propertyName="{&propertyName}"\n\t\t\tandroid:interpolator="{~interpolator}"\n\t\t\tandroid:valueType="{~valueType}"\n\t\t\tandroid:valueFrom="{~valueFrom}"\n\t\t\tandroid:valueTo="{&valueTo}"\n\t\t\tandroid:startOffset="{~startOffset}"\n\t\t\tandroid:duration="{&duration}"\n\t\t\tandroid:repeatCount="{&repeatCount}" />\n\t<<values>>\n\t</set>\n<<fillAfter>>';var Qn=`<?xml version="1.0" encoding="utf-8"?>\n<set xmlns:android="http://schemas.android.com/apk/res/android" android:ordering="{~ordering}">\n${Jn}\n</set>`;var to=`<?xml version="1.0" encoding="utf-8"?>\n<set xmlns:android="http://schemas.android.com/apk/res/android">\n<<A>>\n\t<set android:ordering="{~ordering}">\n\t<<AA>>\n\t\t<set android:ordering="{~ordering}">\n${squared.lib.xml.pushIndent(Jn,2)}\n\t\t</set>\n\t<<AA>>\n\t<<BB>>\n\t\t<<together>>\n\t\t<objectAnimator\n\t\t\tandroid:propertyName="{&propertyName}"\n\t\t\tandroid:interpolator="{~interpolator}"\n\t\t\tandroid:valueType="{~valueType}"\n\t\t\tandroid:valueFrom="{~valueFrom}"\n\t\t\tandroid:valueTo="{&valueTo}"\n\t\t\tandroid:startOffset="{~startOffset}"\n\t\t\tandroid:duration="{&duration}"\n\t\t\tandroid:repeatCount="{&repeatCount}" />\n\t\t<<together>>\n\t<<BB>>\n\t</set>\n<<A>>\n</set>`;squared.svg||(squared.svg={lib:{}});var eo=squared.svg.Svg,no=squared.svg.SvgAnimate,oo=squared.svg.SvgAnimateTransform,io=squared.svg.SvgBuild,ao=squared.svg.SvgG,ro=squared.svg.SvgPath,so=squared.svg.SvgShape;const lo=squared.lib.util,co=squared.lib.math,ho=squared.lib.xml,uo=squared.svg.lib.constant,po=squared.svg.lib.util,mo={},go=f.STORED,fo={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"};uo&&Object.assign(fo,{[uo.KEYSPLINE_NAME["ease-in"]]:fo.accelerate,[uo.KEYSPLINE_NAME["ease-out"]]:fo.decelerate,[uo.KEYSPLINE_NAME["ease-in-out"]]:fo.accelerate_decelerate,[uo.KEYSPLINE_NAME.linear]:fo.linear});const yo='<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n\tandroid:controlY2="{3}" />',bo={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function To(t,e){return t&&t[e]?fo[t[e]]||So(t[e]):""}function Ao(t){for(const e in bo)if(bo[e].includes(t))return lo.convertCamelCase(e);return""}function Eo(t,e,n=-1){return`${t.name}_${e+(-1!==n?`_${n+1}`:"")}`}function So(t){if(fo[t])return fo[t];{const e=`path_interpolator_${lo.convertWord(t)}`;if(!go.animators.has(e)){const n=lo.formatString(yo,...t.split(" "));go.animators.set(e,n)}return`@anim/${e}`}}function vo(t){const e={};for(let n=0;n<t.length;n++){const o=t[n],i=o.matrix;switch(o.type){case SVGTransform.SVG_TRANSFORM_SCALE:e.scaleX=""+i.a,e.scaleY=""+i.d,o.origin&&(e.pivotX=""+o.origin.x,e.pivotY=""+o.origin.y);break;case SVGTransform.SVG_TRANSFORM_ROTATE:e.rotation=""+o.angle,o.origin?(e.pivotX=""+o.origin.x,e.pivotY=""+o.origin.y):(e.pivotX="0",e.pivotY="0");break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:e.translateX=""+i.e,e.translateY=""+i.f}}return e}function wo(t,e){let n=0,o=0;for(const i of function(t){const e=[];let n=t.parentElement;for(;n&&(e.push(n),!((n=n.parentElement)instanceof HTMLElement)););return e}(t))(po.SVG.svg(i)||po.SVG.use(i))&&i!==e&&(n+=i.x.baseVal.value,o+=i.y.baseVal.value);return{x:n,y:o}}function Ro(t,e,n=1,o=1){if(e.length&&(po.SVG.circle(t)||po.SVG.ellipse(t))){if(-1!==e.findIndex(t=>t.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(n!==o||e.length>1&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_SCALE&&t.matrix.a!==t.matrix.d)))return _o(t,e)}return[[],e]}function _o(t,e,n=!1){if(e.length){const i=[],a=[],r=e.slice(0).reverse(),s=e[0].fromCSS?[]:po.TRANSFORM.rotateOrigin(t).reverse();for(let t=1;t<r.length;t++){const e=r[t],n=r[t-1];if(e.type===n.type){let o;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:(o=po.MATRIX.clone(e.matrix)).e+=n.matrix.e,o.f+=n.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:(o=po.MATRIX.clone(e.matrix)).a*=n.matrix.a,o.d*=n.matrix.d}o&&(e.matrix=o,r.splice(--t,1))}}const l=[];function o(){i.push(l.slice(0)),l.length=0}for(const t of r)switch(t.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:a.push(t);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:n||0!==i.length||0!==l.length?(l.push(t),o()):a.push(t);break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;s.length;){const e=s.shift();if(e.angle===t.angle){0===e.x&&0===e.y||(t.origin=e);break}}if(void 0===t.origin&&1===l.length&&l[0].type===SVGTransform.SVG_TRANSFORM_SCALE){l.push(t);continue}case SVGTransform.SVG_TRANSFORM_SCALE:l.length&&o(),l.push(t)}return l.length&&i.push(l),[i.reverse(),a]}return[[],e]}function xo(t,e,n,o=!1,i){let a;const r=t[e];return r?a=Array.isArray(r)?""+r[n]:r:o||0!==e||(a=i),a||""}function Io(t){switch(t){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:return Lo(t)?"floatType":void 0}}function No(t,e,n,o){const i=new no;return i.attributeName=t,i.delay=e,i.duration=1,i.from=o||n,i.to=n,i.fillForwards=!0,i.convertToValues(),i}function Co(t,e=!0){let n=bo[t];return void 0===n&&e&&Lo(t)&&(n=[t]),n}function Po(t){switch(t){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Oo(t){switch(t.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return oo.toRotateList(t.values);case SVGTransform.SVG_TRANSFORM_SCALE:return oo.toScaleList(t.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return oo.toTranslateList(t.values)}}function Lo(t){switch(t){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Mo(t){return"fill"===t||"stroke"===t}function Do(t,e=!1){const n=f.addColor(t);return t=""!==n?`@color/${n}`:"",e?[t]:t}function ko(t,e){return Mo(t.attributeName)?Do(e):e.trim()||void 0}function Bo(t){switch(t){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}const Xo=t=>lo.isPercent(t)?parseInt(t)/100:.5;class Go extends squared.base.Extension{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=!0,this.VECTOR_DATA=new Map,this.ANIMATE_DATA=new Map,this.IMAGE_DATA=[],this.SYNCHRONIZE_MODE=0,this.NAMESPACE_AAPT=!1}static createFillGradient(t,e,n){const o={type:t.type,colorStops:bn.convertColorStops(t.colorStops,n)};switch(t.type){case"radial":{const n=t,i=[];let a,r,s,l;switch(e.element.tagName){case"path":for(const t of io.getPathCommands(e.value))lo.concatArray(i,t.value);case"polygon":if(po.SVG.polygon(e.element)&&lo.concatArray(i,io.clonePoints(e.element.points)),!i.length)return;[a,r,s,l]=io.minMaxPoints(i),s-=a,l-=r;break;default:if(po.SVG.rect(e.element)){const t=e.element;a=t.x.baseVal.value,r=t.y.baseVal.value,s=t.width.baseVal.value,l=t.height.baseVal.value}else if(po.SVG.circle(e.element)){const t=e.element;a=t.cx.baseVal.value-t.r.baseVal.value,r=t.cy.baseVal.value-t.r.baseVal.value,l=s=2*t.r.baseVal.value}else{if(!po.SVG.ellipse(e.element))return;{const t=e.element;a=t.cx.baseVal.value-t.rx.baseVal.value,r=t.cy.baseVal.value-t.ry.baseVal.value,s=2*t.rx.baseVal.value,l=2*t.ry.baseVal.value}}}o.centerX=""+(a+s*Xo(n.cxAsString)),o.centerY=""+(r+l*Xo(n.cyAsString)),o.gradientRadius=""+(s+l)/2*(lo.isPercent(n.rAsString)?parseFloat(n.rAsString)/100:1),n.spreadMethod&&(o.tileMode=Bo(n.spreadMethod));break}case"linear":{const e=t;o.startX=""+e.x1,o.startY=""+e.y1,o.endX=""+e.x2,o.endY=""+e.y2,e.spreadMethod&&(o.tileMode=Bo(e.spreadMethod))}}return o}beforeInit(){io&&(void 0===mo.ANIMATED&&(mo.ANIMATED=ho.parseTemplate(Zn),mo.LAYER_LIST=ho.parseTemplate(tn),mo.OBJECTANIMATOR=ho.parseTemplate(Qn),mo.SET_OBJECTANIMATOR=ho.parseTemplate(to)),io.setName(),this.application.controllerHandler.localSettings.unsupported.tagName.delete("svg"))}afterResources(){for(const t of this.application.processing.cache)if(t.svgElement){const e=new eo(t.element),n=t.localSettings.targetAPI>=23;this.SVG_INSTANCE=e,this.VECTOR_DATA.clear(),this.ANIMATE_DATA.clear(),this.IMAGE_DATA.length=0,this.NAMESPACE_AAPT=!1,this.SYNCHRONIZE_MODE=2|(n?32:64),e.build({exclude:this.options.transformExclude,residual:Ro,precision:this.options.floatPrecisionValue}),e.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),this.parseVectorData(e),this.queueAnimations(e,e.name,t=>"opacity"===t.attributeName);const o=lo.convertWord(`${t.tagName}_${t.controlId}_viewbox`,!0).toLowerCase(),i=(t="",e="")=>o+(""!==t?`_${t}`:"")+(this.IMAGE_DATA.length?"_vector":"")+(""!==e?`_${e.toLowerCase()}`:"");let a="",r="";{const t=ho.parseTemplate(en);let n=ho.createTemplate(t,{namespace:this.NAMESPACE_AAPT?k("aapt"):"",name:e.name,width:lo.formatPX(e.width),height:lo.formatPX(e.height),viewportWidth:""+(e.viewBox.width||e.width),viewportHeight:""+(e.viewBox.height||e.height),alpha:parseFloat(e.opacity)<1?""+e.opacity:"",A:[],B:[{templateName:e.name}]});const o=new Map;t.__ROOT__=t.A;for(const[e,n]of this.VECTOR_DATA.entries())o.set(e,ho.createTemplate(t,n));const a=Array.from(o.entries()).reverse();for(let t=0;t<a.length;t++){let e=a[t][1];for(let n=t;n<a.length;n++){const t=`!!${a[n][0]}!!`;if(-1!==e.indexOf(t)){e=e.replace(t,a[n][1]);break}}n=n.replace(`!!${a[t][0]}!!`,e)}n=ho.formatTemplate(n),""===(r=f.getStoredName("drawables",n))&&(r=i(),go.drawables.set(r,n))}if(this.ANIMATE_DATA.size){const t={vectorName:r,A:[]};for(const[e,o]of this.ANIMATE_DATA.entries()){const a={name:e},r={A:[]},s=new Map,l=new Map,c=[],d=[],h=[],u=[],p=[],[m,g]=lo.partitionArray(o.animate,t=>void 0!==t.companion);for(let t=0;t<g.length;t++){const e=g[t];if(e.setterType)bo[e.attributeName]&&lo.hasValue(e.to)&&(e.duration>0&&e.fillReplace?d.push(e):c.push(e));else if(io.isAnimate(e)){const o=lo.filterArray(m,t=>t.companion.value===e);if(o.length){o.sort((t,e)=>t.companion.index>=e.companion.index?1:0);const n=[],i=[];for(let t=0;t<o.length;t++){const a=o[t];a.companion.index<=0?(n.push(a),0===t&&e.delay>0&&(a.delay+=e.delay,e.delay=0)):i.push(a)}n.push(e),lo.concatArray(n,i),s.set(`sequentially_companion_${t}`,n)}else{const t=e.synchronized;if(t)if(io.asAnimateTransform(e)){const n=l.get(t.value)||[];n.push(e),l.set(t.value,n)}else{const n=s.get(t.value)||[];n.push(e),s.set(t.value,n)}else io.asAnimateTransform(e)&&e.expandToValues(),-1===e.iterationCount?d.push(e):!(!e.fromToType||io.asAnimateTransform(e)&&e.transformOrigin)||n&&"pathType"!==Io(e.attributeName)?e.fillReplace?d.push(e):c.push(e):h.push([e])}}}c.length&&h.push(c);for(const[t,e]of s.entries())t.startsWith("sequentially_companion")?h.push(e):h.push(e.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.index>=e.synchronized.index?1:-1));for(const t of l.values())p.push(t.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.index>=e.synchronized.index?1:-1));for(const t of d)u.push([[t]]);if([h,p,...u].forEach((t,e)=>{const i={ordering:0===e||1===t.length?"":"sequentially",AA:[],BB:[]};for(const a of t){let t="",r=!1,s=!1,l=!0;e<=1&&a.some(t=>!!t.synchronized&&""!==t.synchronized.value)?(io.asAnimateTransform(a[0])||(t="sequentially"),r=!0,l=!1):e<=1&&a.some(t=>!!t.synchronized&&""===t.synchronized.value)?(t="sequentially",r=!0,s=!0):e<=1&&a.some(t=>void 0!==t.companion)?t="sequentially":(e>0&&(t="sequentially"),e>1&&io.asAnimateTransform(a[0])&&(s=!0));const c={ordering:t,fillBefore:[],repeating:[],fillCustom:[],fillAfter:[]},d={values:[]},h={values:[]},u={values:[]},p={together:[]};(r?lo.partitionArray(a,t=>-1!==t.iterationCount):[a]).forEach((t,a)=>{1===a&&t.length>1&&(h.ordering="sequentially");const m=new Map;for(const g of t){const f=Io(g.attributeName);if(void 0===f)continue;const y=(t,e)=>{e&&-1===d.values.findIndex(e=>e.propertyName===t)&&d.values.push(this.createPropertyValue(t,e,"0",f))},b=g.delay>0;let T,A=!1;const E=(t,e,n,o)=>{if(!r&&g.fillReplace&&void 0!==f){let i,a=g.replaceValue;if(a||(A?a=Lo(t):g.parent&&io.isShape(g.parent)&&g.parent.path&&(a="pathData"===t?g.parent.path.value:g.parent.path[Ao(t)]),a||(a=g.baseValue)),n&&n.length){const t=n[n.length-1];if(lo.isArray(t.propertyValues)){const e=t.propertyValues[t.propertyValues.length-1];i=e.keyframes[e.keyframes.length-1].value}else i=t.valueTo}if(lo.isString(a)&&a!==i&&(a=ko(g,a))){switch(t){case"trimPathStart":case"trimPathEnd":a=a.split(" ")["trimPathStart"===t?0:1]}e.values.push(this.createPropertyValue(t,a,"1",f,"pathType"===f?i:"",o?""+o:""))}T&&(t.endsWith("X")?e.values.push(this.createPropertyValue("translateX","0","1",f)):t.endsWith("Y")&&e.values.push(this.createPropertyValue("translateY","0","1",f)))}};if(g.setterType){const t=Co(g.attributeName);if(t){const n=Mo(g.attributeName)?Do(g.to,!0):g.to.trim().split(" ");if(n.length===t.length&&!n.some(t=>""===t)){let o,i;for(let a=0;a<t.length;a++){let r;"pathType"===f?r=n[a]:b&&g.baseValue&&(r=ko(g,g.baseValue.trim().split(" ")[a]));const s=this.createPropertyValue(t[a],n[a],"1",f,r,g.delay>0?""+g.delay:"");e>1?(h.values.push(s),E(t[a],u,void 0,e>1?g.duration:0)):g.companion&&g.companion.index<=0?(void 0===o&&c.fillBefore.push(o={values:[]}),o.values.push(s)):g.companion&&g.companion.index>0?(void 0===i&&c.fillAfter.push(i={values:[]}),i.values.push(s)):p.together.push(s)}}}}else if(io.isAnimate(g)){let d;const p=this.createPropertyValue("","",""+g.duration,f,"",g.delay>0?""+g.delay:"",d=1===a?t.length>1?"0":"-1":-1!==g.iterationCount?""+Math.ceil(g.iterationCount-1):"-1");void 0===g.keySplines&&(g.timingFunction?p.interpolator=So(g.timingFunction):""!==this.options.animateInterpolator&&(p.interpolator=this.options.animateInterpolator));const S=[];let v,w;if(r||"pathType"!==p.valueType)if(io.asAnimateTransform(g)){if(void 0===(v=Po(g.type)))continue;w=Oo(g),(s||b)&&lo.concatArray(S,lo.objectMap(v,t=>Lo(t)||"0")),T=g.transformOrigin,A=!0}else switch(v=Co(g.attributeName),p.valueType){case"intType":w=lo.objectMap(g.values,t=>""+lo.convertInt(t)),b&&g.baseValue&&lo.concatArray(S,lo.replaceMap(io.parseCoordinates(g.baseValue),t=>""+Math.trunc(t)));break;case"floatType":switch(g.attributeName){case"stroke-dasharray":w=lo.objectMap(g.values,t=>lo.replaceMap(t.split(" "),t=>parseFloat(t)));break;default:w=g.values}b&&g.baseValue&&lo.concatArray(S,lo.replaceMap(io.parseCoordinates(g.baseValue),t=>""+t));break;default:if(w=g.values.slice(0),Mo(g.attributeName)){b&&g.baseValue&&lo.concatArray(S,Do(g.baseValue,!0));for(let t=0;t<w.length;t++)""!==w[t]&&(w[t]=Do(w[t]))}}else if(o.pathData){let t,e;g.parent&&io.isShape(g.parent)&&(e=g.parent,g.parent.path&&(t=g.parent.path.transformed)),v=["pathData"],w=ro.extrapolate(g.attributeName,o.pathData,g.values,t,e,this.options.floatPrecisionValue)}if(w&&v){const t=g.synchronized?g.synchronized.index+g.synchronized.value:0!==e||v.length>1?JSON.stringify(p):"";for(let e=0;e<v.length;e++){const d=v[e];if(s&&y(d,S[e]),l&&g.keyTimes.length>1)if(n&&"pathType"!==p.valueType){!s&&b&&y(d,S[e]);const n=m.get(t)||[],o=[];for(let t=0;t<g.keyTimes.length;t++){let n=xo(w,t,e,!0);""!==n&&(n=co.truncateString(n,this.options.floatPrecisionValue));let i=t>0&&""!==n&&"pivotX"!==d&&"pivotY"!==d?To(g.keySplines,t-1):"";""===i&&g.isLoop(t)&&(i=So(uo.KEYSPLINE_NAME["step-start"])),o.push({interpolator:i,fraction:0===g.keyTimes[t]&&""===n?"":co.truncate(g.keyTimes[t],this.options.floatPrecisionKeyTime),value:n})}n.push({propertyName:d,keyframes:o}),m.has(t)||(""!==t&&m.set(t,n),(0===a?c.repeating:h.values).push(Object.assign({},p,{propertyValues:n}))),T=void 0}else{c.ordering="sequentially";const t={ordering:"sequentially",fillBefore:!1,repeating:[],fillCustom:!1,fillAfter:!1};for(let n=0;n<g.keyTimes.length;n++){const i=Object.assign({},p,{propertyName:d,startOffset:0===n?""+(g.delay+(g.keyTimes[n]>0?Math.floor(g.keyTimes[n]*g.duration):0)):"",propertyValues:!1}),a=xo(w,n,e,!1,"pathType"===p.valueType?o.pathData:g.baseValue);if(a){let r;if(0===n?(i.valueFrom=!s&&b?S[e]:"pathType"===p.valueType?o.pathData||""+w[0]:g.baseValue||g.replaceValue||"",r=0):(i.valueFrom=""+xo(w,n-1,e),r=Math.floor((g.keyTimes[n]-g.keyTimes[n-1])*g.duration)),T&&T[n]){let e,o=0;if(d.endsWith("X")?(e="translateX",o=T[n].x):d.endsWith("Y")&&(e="translateY",o=T[n].y),e){const n=this.createPropertyValue(e,""+o,""+r,"floatType");n.interpolator=So(uo.KEYSPLINE_NAME["step-start"]),t.repeating.push(n)}}let l=n>0?To(g.keySplines,n-1):"";""===l&&g.isLoop(n)&&(l=So(uo.KEYSPLINE_NAME["step-start"])),i.interpolator=l,i.duration=""+r,i.valueTo=a,c.repeating.push(i)}}t.repeating.length&&i.AA.push(t)}else{const t=Object.assign({},p,{propertyName:d,interpolator:g.duration>1?To(g.keySplines,0):"",propertyValues:!1});if(Array.isArray(w[0])){const n=w[w.length-1][e];if(w.length>1){const o=w[0][e];o!==n&&(t.valueFrom=""+o)}t.valueTo=""+n}else{let n;w.length>1?(n=""+w[0],t.valueTo=""+w[w.length-1]):(n=g.from||(!s&&b?S[e]:""),t.valueTo=g.to),"pathType"===p.valueType?t.valueFrom=n||o.pathData||t.valueTo:n&&n!==t.valueTo&&(t.valueFrom=ko(g,n))}t.valueTo&&(0===a?c.repeating:h.values).push(t)}0!==a||r||E(d,u,c.repeating)}b&&T&&T.length&&(y("translateX","0"),y("translateY","0"))}}}});const m=c.repeating.length>0||h.values.length>0;m&&d.values.length&&(1===d.values.length?c.repeating.unshift(d.values[0]):c.fillBefore.push(d)),h.values.length&&(1===d.values.length?c.repeating.push(h.values[0]):c.fillCustom.push(h)),m&&u.values.length&&(1===u.values.length?c.repeating.push(u.values[0]):c.fillAfter.push(u));const g=c.fillBefore.length>0||c.fillCustom.length>0||c.fillAfter.length>0;g||"sequentially"!==c.ordering||1!==c.repeating.length||(c.ordering=""),!g&&"sequentially"!==i.ordering&&"sequentially"!==c.ordering&&c.repeating.every(t=>!1===t.propertyValues)?(lo.concatArray(p.together,c.repeating),c.repeating.length=0):m&&i.AA.push(c),p.together.length&&i.BB.push(p)}(i.AA.length||i.BB.length)&&r.A.push(i)}),r.A.length){let n;if(1===r.A.length){const t=r.A[0];""===t.ordering&&t.BB&&0===t.BB.length&&t.AA&&1===t.AA.length&&(n=t.AA[0])}const o=n?ho.createTemplate(mo.OBJECTANIMATOR,n):ho.createTemplate(mo.SET_OBJECTANIMATOR,r);a.animationName=f.getStoredName("animators",o),""===a.animationName&&(a.animationName=i("anim",e),go.animators.set(a.animationName,o)),t.A.push(a)}}if(t.A.length){const e=ho.createTemplate(mo.ANIMATED,t);""===(r=f.getStoredName("drawables",e))&&(r=i("anim"),go.drawables.set(r,e))}}if(this.IMAGE_DATA.length){const t=[{src:r}],n={A:!1,B:t,C:!1};for(const n of this.IMAGE_DATA){const o=e.width/e.viewBox.width,i=e.height/e.viewBox.height;let a=n.getBaseValue("x",0)*o,r=n.getBaseValue("y",0)*i,s=n.getBaseValue("width",0),l=n.getBaseValue("height",0);const c=wo(n.element,e.element);a+=c.x,r+=c.y,l*=i;const d={width:lo.formatPX(s*=o),height:lo.formatPX(l),left:0!==a?lo.formatPX(a):"",top:0!==r?lo.formatPX(r):"",src:f.addImage({mdpi:n.href}),rotate:[]};n.rotateAngle&&(d.rotate.push({src:d.src,fromDegrees:""+n.rotateAngle,visible:n.visible?"true":"false"}),d.src=""),t.push(d)}const i=ho.formatTemplate(ho.createTemplate(mo.LAYER_LIST,n));""===(a=f.getStoredName("drawables",i))&&go.drawables.set(a=o,i)}else a=r;""!==a&&(t.localSettings.targetAPI>=21?t.android("src",`@drawable/${a}`):t.app("srcCompat",`@drawable/${a}`)),t.hasWidth||t.android("layout_width","wrap_content"),t.hasHeight||t.android("layout_height","wrap_content")}}afterFinalize(){this.application.controllerHandler.localSettings.unsupported.tagName.add("svg")}parseVectorData(t){const e=this.createGroup(t);for(const n of t)if(n.visible){const o=[],i=[],a=[[]],r=[];if(io.isShape(n)){if(!n.path||!n.path.value)continue;{const t=this.createPath(n,n.path,a);if(t.strokeWidth&&(t.strokeDasharray||t.strokeDashoffset)){const e=this.ANIMATE_DATA.get(n.name);if(void 0===e||e.animate.every(t=>t.attributeName.startsWith("stroke-dash"))){const[i,s,l]=n.path.extractStrokeDash(e&&e.animate,this.options.floatPrecisionValue);if(i){const c=Eo(n,"stroke");""!==s&&(t.value=s),""!==l&&r.push({clipPathData:l});for(let n=0;n<i.length;n++){const a=0===n?t:Object.assign({},t);a.name=`${c}_${n}`,e&&this.ANIMATE_DATA.set(a.name,{element:e.element,animate:lo.filterArray(e.animate,t=>void 0===t.id||t.id===n)}),a.trimPathStart=co.truncate(i[n].start,this.options.floatPrecisionValue),a.trimPathEnd=co.truncate(i[n].end,this.options.floatPrecisionValue),o.push(a)}e&&this.ANIMATE_DATA.delete(n.name),a[0].push({groupName:c})}}}0===o.length&&o.push(t)}}else{if(io.asImage(n)){if(!io.asPattern(t)){if(0===n.width||0===n.height){const t=this.application.session.image.get(n.href);t&&t.width>0&&t.height>0&&(n.width=t.width,n.height=t.height,n.setRect())}n.extract(this.options.transformExclude.image),this.IMAGE_DATA.push(n)}continue}if(io.isContainer(n)){if(!n.length)continue;this.parseVectorData(n),i.push({templateName:n.name})}}e.BB.push({render:a,clipGroup:r,CCC:o,DDD:i})}this.VECTOR_DATA.set(t.name,e)}createGroup(t){const e=[[]],n=[],o=[[]],i=[],a={region:e,clipRegion:n,path:o,clipPath:i,BB:[]},r={};if(!(t!==this.SVG_INSTANCE&&io.asSvg(t)||io.asUseSymbol(t)||io.asUsePattern(t))||0===t.x&&0===t.y||(r.groupName=Eo(t,"main"),r.translateX=""+t.x,r.translateY=""+t.y),""!==t.clipRegion&&this.createClipPath(t,n,t.clipRegion),(n.length||Object.keys(r).length)&&e[0].push(r),t!==this.SVG_INSTANCE){const e={},[n]=_o(t.element,t.transforms,!0),a=Eo(t,"animate");if((io.asG(t)||io.asUseSymbol(t))&&lo.hasValue(t.clipPath)&&this.createClipPath(t,i,t.clipPath)&&(e.groupName=a),this.queueAnimations(t,a,t=>io.asAnimateTransform(t))&&(e.groupName=a),Object.keys(e).length&&o[0].push(e),n.length){const e=[];for(const t of n)o[0].push(vo(t)),lo.concatArray(e,t);t.transformed=e.reverse()}}return a}createPath(t,e,n){const o=[],i={name:t.name,clipElement:o,fillPattern:!1},a=(t,n=!1)=>{if(n){const n=`${t}Pattern`,o=i[n];if(o){const a=this.SVG_INSTANCE.definitions.gradient.get(o);if(a)switch(e.element.tagName){case"path":if(!/[zZ]\s*$/.test(e.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const o=Go.createFillGradient(a,e,this.options.floatPrecisionValue);if(o)return i[t]="",i[n]=[{gradients:[o]}],void(this.NAMESPACE_AAPT=!0);break}}i[n]=!1}}const o=f.addColor(i[t]);""!==o&&(i[t]=`@color/${o}`)};if(io.asUse(t)&&lo.hasValue(t.clipPath)&&this.createClipPath(t,o,t.clipPath),lo.hasValue(e.clipPath)){const t=new so(e.element);t.build({exclude:this.options.transformExclude,residual:Ro}),t.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),this.createClipPath(t,o,e.clipPath)}const r={},s=Eo(t,"group");if(this.queueAnimations(t,s,t=>io.asAnimateTransform(t))?r.groupName=s:o.length&&(r.groupName=""),!io.asUse(t)||0===t.x&&0===t.y||(r.translateX=""+t.x,r.translateY=""+t.y),Object.keys(r).length&&n[0].push(r),e.transformResidual)for(const t of e.transformResidual)n[0].push(vo(t));const l=function(t){let e=parseFloat(t.opacity),n=t.parent;for(;n;){const t=parseFloat(n.opacity||"1");!isNaN(t)&&t<1&&(e*=t),n=n.parent}return e}(t);for(const t in e){let n=e[t];if(lo.isString(n)){switch(t){case"fillRule":if("evenodd"!==n)continue;n="evenOdd";break;case"strokeWidth":if("0"===n)continue;break;case"fillOpacity":case"strokeOpacity":if("1"===(n=""+(lo.isNumber(n)?parseFloat(n):1)*l))continue;break;case"strokeLinecap":if("butt"===n)continue;break;case"strokeLinejoin":if("miter"===n)continue;break;case"strokeMiterlimit":if("4"===n)continue}i[t]=n}}a("fill",!0),a("stroke");const c=new Map,d=[],h=[],u=e.value;let p=u,m=0;for(const e of t.animations)if(io.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);c.set(t,{index:m,time:t,to:e.transformFrom,reset:!1,animate:e}),-1!==e.iterationCount&&e.fillReplace&&(c.has(t=e.delay+e.iterationCount*e.duration)||c.set(t,{index:m,time:t,to:u,reset:!0})),m++}const g=Array.from(c.values()).sort((t,e)=>t.time<e.time?-1:1);for(let t=0;t<g.length;t++){const e=g[t];if(!e.reset||e.to!==p){let n=!0;if(e.reset)t:for(let o=0;o<t;o++){const i=g[o];if(!i.reset)for(let o=t+1;o<g.length;o++)switch(g[o].index){case i.index:n=!1;case e.index:break t}}else{const n=[],o=new Set;for(let e=0;e<t;e++){const t=g[e];n[t.index]=n[t.index]?2:1}for(let t=0;t<n.length;t++)if(1===n[t]){const e=g.find(e=>e.index===t&&void 0!==e.animate);e&&e.animate&&o.add(e.animate.type)}for(const t of o){const n=Po(t);if(n){const o=po.TRANSFORM.typeAsValue(t).split(" ");for(let t=0;t<o.length;t++)d.push(No(n[t],e.time,o[t],""))}}}n&&(h.push(No("d",e.time,e.to)),p=e.to)}}if(this.queueAnimations(t,i.name,t=>(io.asAnimate(t)||io.asSet(t))&&"clip-path"!==t.attributeName,u)||0!==h.length||(i.name=""),d.length){const t=this.ANIMATE_DATA.get(s);t&&lo.concatArray(t.animate,d)}if(h.length){const e=this.ANIMATE_DATA.get(i.name);e?lo.concatArray(e.animate,h):this.ANIMATE_DATA.set(i.name,{element:t.element,animate:h,pathData:u})}return i}createClipPath(t,e,n){let o=0;return n.split(";").forEach((n,i,a)=>{if("#"===n.charAt(0)){const t=this.SVG_INSTANCE.definitions.clipPath.get(n);if(t){const n=new ao(t);n.build({exclude:this.options.transformExclude,residual:Ro}),n.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),n.each(t=>{if(t.path&&t.path.value){let n=Eo(t,"clip_path",a.length>1?i+1:-1);this.queueAnimations(t,n,t=>io.asAnimate(t)||io.asSet(t),t.path.value)||(n=""),e.push({clipName:n,clipPathData:t.path.value})}})}o++}else{let r=Eo(t,"clip_path",a.length>1?i+1:-1);this.queueAnimations(t,r,t=>(io.asAnimate(t)||io.asSet(t))&&"clip-path"===t.attributeName,n)||(r=""),e.push({clipName:r,clipPathData:n}),o++}}),o>0}queueAnimations(t,e,n,o=""){if(t.animations.length){const i=lo.filterArray(t.animations,(t,e,o)=>!t.paused&&(t.duration>0||t.setterType)&&n(t,e,o));if(i.length)return this.ANIMATE_DATA.set(e,{element:t.element,animate:i,pathData:o}),!0}return!1}createPropertyValue(t,e,n,o,i="",a="",r="0"){return{propertyName:t,startOffset:a,duration:n,repeatCount:r,valueType:o,valueFrom:lo.isNumber(i)?co.truncateString(i,this.options.floatPrecisionValue):i,valueTo:lo.isNumber(e)?co.truncateString(e,this.options.floatPrecisionValue):e,propertyValues:!1}}}const Vo={builtInExtensions:["android.delegate.fixed","android.delegate.max-width-height","android.delegate.percent","android.delegate.radiogroup","android.delegate.scrollbar","squared.external","squared.substitute","squared.sprite","squared.css-grid","squared.flexbox","squared.table","squared.list","squared.grid","squared.relative","squared.verticalalign","squared.whitespace","squared.accessibility","android.constraint.guideline","android.resource.includes","android.resource.background","android.resource.svg","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles"],targetAPI:26,resolutionDPI:160,supportRTL:!0,preloadImages:!0,ellipsisOnTextOverflow:!0,supportNegativeLeftTop:!0,floatOverlapDisabled:!1,collapseUnattributedElements:!0,customizationsOverwritePrivilege:!0,replaceCharacterEntities:!1,showAttributes:!0,convertPixels:"dp",insertSpaces:4,handleExtensionsAsync:!0,autoCloseOnWrite:!0,outputDirectory:"app/src/main",outputMainFileName:"activity_main.xml",outputArchiveFileType:"zip",outputMaxProcessingTime:30};let Ho,zo,Fo,Wo=!1;function qo(t){return Wo&&!!t&&(t.closed||!(!Ho||!Ho.userSettings.autoCloseOnWrite||Ho.initialized||Ho.closed||(Ho.finalize(),0)))}const $o={base:{Controller:vt,File:Mt,Resource:f,View:Y},extensions:{Accessibility:Xt,CssGrid:qt,External:$t,Flexbox:Jt,Grid:ne,List:ce,Relative:de,Sprite:ge,Substitute:fe,Table:Ae,VerticalAlign:ve,WhiteSpace:we,constraint:{Guideline:Ie},delegate:{Fixed:Be,MaxWidthHeight:Ge,Percent:ze,RadioGroup:Ue,ScrollBar:Qe},resource:{Background:bn,Dimens:In,Fonts:Xn,Includes:Hn,Strings:Un,Styles:Kn,Svg:Go}},lib:{constant:d,customization:E,enumeration:e,util:B},system:{customize(t,e,n){if(T[t]){const o=T[t].assign;return void 0===o[e]?o[e]=n:Object.assign(o[e],n),o[e]}},addXmlNs(t,e){l[t]=e},writeLayoutAllXml:(t=!1)=>zo&&qo(Ho)?zo.layoutAllToXml(Ho.sessionData,t):{},writeResourceAllXml:(t=!1)=>zo&&qo(Ho)?zo.resourceAllToXml(t):{},writeResourceStringXml:(t=!1)=>zo&&qo(Ho)?zo.resourceStringToXml(t):[],writeResourceArrayXml:(t=!1)=>zo&&qo(Ho)?zo.resourceStringArrayToXml(t):[],writeResourceFontXml:(t=!1)=>zo&&qo(Ho)?zo.resourceFontToXml(t):[],writeResourceColorXml:(t=!1)=>zo&&qo(Ho)?zo.resourceColorToXml(t):[],writeResourceStyleXml:(t=!1)=>zo&&qo(Ho)?zo.resourceStyleToXml(t):[],writeResourceDimenXml:(t=!1)=>zo&&qo(Ho)?zo.resourceDimenToXml(t):[],writeResourceDrawableXml:(t=!1)=>zo&&qo(Ho)?zo.resourceDrawableToXml(t):[],writeResourceDrawableImageXml:(t=!1)=>zo&&qo(Ho)?zo.resourceDrawableImageToXml(t):[],writeResourceAnimXml:(t=!1)=>zo&&qo(Ho)?zo.resourceAnimToXml(t):[]},create(){const t=squared.base.lib.constant.EXT_NAME,e=n;return Ho=new squared.base.Application(2,Y,vt,f,wt),zo=new Mt(Ho.resourceHandler),Fo=Object.assign({},Vo),Object.assign(Ho.builtInExtensions,{[t.EXTERNAL]:new $t(t.EXTERNAL,2),[t.SUBSTITUTE]:new fe(t.SUBSTITUTE,2),[t.SPRITE]:new ge(t.SPRITE,2),[t.CSS_GRID]:new qt(t.CSS_GRID,2),[t.FLEXBOX]:new Jt(t.FLEXBOX,2),[t.TABLE]:new Ae(t.TABLE,2,["TABLE"]),[t.LIST]:new ce(t.LIST,2,["UL","OL","DL","DIV"]),[t.GRID]:new ne(t.GRID,2,["FORM","UL","OL","DL","DIV","TABLE","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET","SPAN"]),[t.RELATIVE]:new de(t.RELATIVE,2),[t.VERTICAL_ALIGN]:new ve(t.VERTICAL_ALIGN,2),[t.WHITESPACE]:new we(t.WHITESPACE,2),[t.ACCESSIBILITY]:new Xt(t.ACCESSIBILITY,2),[e.CONSTRAINT_GUIDELINE]:new Ie(e.CONSTRAINT_GUIDELINE,2),[e.DELEGATE_FIXED]:new Be(e.DELEGATE_FIXED,2),[e.DELEGATE_MAXWIDTHHEIGHT]:new Ge(e.DELEGATE_MAXWIDTHHEIGHT,2),[e.DELEGATE_PERCENT]:new ze(e.DELEGATE_PERCENT,2),[e.DELEGATE_RADIOGROUP]:new Ue(e.DELEGATE_RADIOGROUP,2),[e.DELEGATE_SCROLLBAR]:new Qe(e.DELEGATE_SCROLLBAR,2),[e.RESOURCE_INCLUDES]:new Hn(e.RESOURCE_INCLUDES,2),[e.RESOURCE_BACKGROUND]:new bn(e.RESOURCE_BACKGROUND,2),[e.RESOURCE_SVG]:new Go(e.RESOURCE_SVG,2),[e.RESOURCE_STRINGS]:new Un(e.RESOURCE_STRINGS,2),[e.RESOURCE_FONTS]:new Xn(e.RESOURCE_FONTS,2),[e.RESOURCE_DIMENS]:new In(e.RESOURCE_DIMENS,2),[e.RESOURCE_STYLES]:new Kn(e.RESOURCE_STYLES,2)}),Wo=!0,{application:Ho,framework:2,userSettings:Fo}},cached:()=>Wo?{application:Ho,framework:2,userSettings:Fo}:$o.create()};return $o}();
