var android=function(){"use strict";class t extends squared.base.ApplicationUI{set viewModel(t){this._viewModel=t}get viewModel(){return this._viewModel}}var e;!function(t){t[t.RADIO=1]="RADIO",t[t.CHECKBOX=2]="CHECKBOX",t[t.SELECT=3]="SELECT",t[t.SVG=4]="SVG",t[t.IMAGE=5]="IMAGE",t[t.BUTTON=6]="BUTTON",t[t.PROGRESS=7]="PROGRESS",t[t.RANGE=8]="RANGE",t[t.EDIT=9]="EDIT",t[t.TEXT=10]="TEXT",t[t.INLINE=11]="INLINE",t[t.LINE=12]="LINE",t[t.SPACE=13]="SPACE",t[t.BLOCK=14]="BLOCK",t[t.FRAME=15]="FRAME",t[t.LINEAR=16]="LINEAR",t[t.GRID=17]="GRID",t[t.RELATIVE=18]="RELATIVE",t[t.CONSTRAINT=19]="CONSTRAINT",t[t.WEBVIEW=20]="WEBVIEW",t[t.VIDEOVIEW=21]="VIDEOVIEW",t[t.UNKNOWN=22]="UNKNOWN"}(e||(e={}));var a=Object.freeze({__proto__:null,get CONTAINER_NODE(){return e}});const i={EXTERNAL:"android.external",SUBSTITUTE:"android.substitute",DELEGATE_BACKGROUND:"android.delegate.background",DELEGATE_CSS_GRID:"android.delegate.css-grid",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_POSITIVEX:"android.delegate.positive-x",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_DATA:"android.resource.data",RESOURCE_STYLES:"android.resource.styles"},n={RADIO:"RadioButton",CHECKBOX:"CheckBox",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",EDIT:"EditText",SVG:"ImageView",IMAGE:"ImageView",BUTTON:"Button",RANGE:"SeekBar",METER:"ProgressBar",PROGRESS:"ProgressBar",TEXT:"TextView",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",VIDEOVIEW:"VideoView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},o={VERTICAL_SCROLL:"androidx.core.widget.NestedScrollView",CONSTRAINT:"androidx.constraintlayout.widget.ConstraintLayout",GUIDELINE:"androidx.constraintlayout.widget.Guideline",BARRIER:"androidx.constraintlayout.widget.Barrier"},r={DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},s={DRAWER:"androidx.drawerlayout.widget.DrawerLayout",NAVIGATION_VIEW:"com.google.android.material.navigation.NavigationView",COORDINATOR:"androidx.coordinatorlayout.widget.CoordinatorLayout",APPBAR:"com.google.android.material.appbar.AppBarLayout",COLLAPSING_TOOLBAR:"com.google.android.material.appbar.CollapsingToolbarLayout",TOOLBAR:"androidx.appcompat.widget.Toolbar",FLOATING_ACTION_BUTTON:"com.google.android.material.floatingactionbutton.FloatingActionButton",BOTTOM_NAVIGATION:"com.google.android.material.bottomnavigation.BottomNavigationView"},l={PLAINTEXT:e.TEXT,HR:e.LINE,SVG:e.SVG,IMG:e.IMAGE,BUTTON:e.BUTTON,SELECT:e.SELECT,TEXTAREA:e.EDIT,METER:e.PROGRESS,PROGRESS:e.PROGRESS,AUDIO:e.VIDEOVIEW,VIDEO:e.VIDEOVIEW,IFRAME:e.WEBVIEW,INPUT_RANGE:e.RANGE,INPUT_TEXT:e.EDIT,INPUT_PASSWORD:e.EDIT,INPUT_NUMBER:e.EDIT,INPUT_EMAIL:e.EDIT,INPUT_SEARCH:e.EDIT,INPUT_URL:e.EDIT,INPUT_DATE:e.EDIT,INPUT_TEL:e.EDIT,INPUT_TIME:e.EDIT,INPUT_WEEK:e.EDIT,INPUT_MONTH:e.EDIT,INPUT_BUTTON:e.BUTTON,INPUT_FILE:e.BUTTON,INPUT_IMAGE:e.BUTTON,INPUT_COLOR:e.BUTTON,INPUT_SUBMIT:e.BUTTON,INPUT_RESET:e.BUTTON,INPUT_CHECKBOX:e.CHECKBOX,INPUT_RADIO:e.RADIO,INPUT_DATETIME_LOCAL:e.EDIT},c={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},h={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},d={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},u={left:"start",right:"end",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toLeftOf:"layout_toStartOf",layout_toRightOf:"layout_toEndOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},f=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var p=Object.freeze({__proto__:null,EXT_ANDROID:i,CONTAINER_ANDROID:n,CONTAINER_ANDROID_X:o,SUPPORT_ANDROID:r,SUPPORT_ANDROID_X:s,ELEMENT_ANDROID:l,LAYOUT_ANDROID:c,XMLNS_ANDROID:h,STRING_ANDROID:d,LOCALIZE_ANDROID:u,RESERVED_JAVA:f});const g=squared.lib,{findColorShade:m,parseColor:y}=g.color,{extractURL:b,getSrcSet:T}=g.css,{CHAR:E,COMPONENT:S,FILE:A,XML:v}=g.regex,{fromLastIndexOf:x,hasMimeType:w,isNumber:_,isPlainObject:N,isString:I,randomUUID:R,resolvePath:C,safeNestedArray:L,spliceArray:P,trimString:O}=g.util,k=squared.base.ResourceUI.STORED,D=/[^\w+]/g;let M={};function W(t,e=false){var a;if(t)for(const i in t)if(N(t[i]))W(t,e);else{let n=null===(a=t[i])||void 0===a?void 0:a.toString();if(n){switch(i){case"text":if(n.startsWith("@string/"))continue;n=B.addString(n,"",e),""!==n&&(t[i]="@string/"+n);break;case"src":case"srcCompat":S.PROTOCOL.test(n)&&(n=B.addImage({mdpi:n}),""!==n&&(t[i]="@drawable/"+n));continue}const a=y(n);if(a){const e=B.addColor(a);""!==e&&(t[i]="@color/"+e)}}}}class B extends squared.base.ResourceUI{constructor(t,e){super(),this.application=t,this.cache=e,k.styles=new Map,k.themes=new Map,k.dimens=new Map,k.drawables=new Map,k.animators=new Map,this.controllerSettings=t.controllerHandler.localSettings;const a=this.controllerSettings.mimeType.image;"*"!==a&&(this._imageFormat=P(a.slice(0),t=>"image/svg+xml"===t))}static formatOptions(t,e=false){for(const a in t){const i=t[a];N(i)&&W(i,e)}return t}static formatName(t){return E.LEADINGNUMBER.test(t)&&(t="__"+t),t.replace(D,"_")}static addTheme(t,e="res/values",a="themes.xml"){const i=k.themes,{items:n,output:o}=t;o&&(I(o.path)&&(e=o.path.trim()),I(o.file)&&(a=o.file.trim()));const r=O(e,"/")+"/"+O(a,"/"),s=i.get(r)||new Map;let l=t.name,c="";if(""===l||"."===l.charAt(0)){t:for(const t of i.values())for(const e of t.values())if(e.name){c=e.name;break t}if(""===c)return false}else c=l;l=c+("."===l.charAt(0)?l:""),t.name=l,B.formatOptions(n);const h=s.get(l);if(h){const t=h.items;for(const e in n)t[e]=n[e]}else s.set(l,t);return i.set(r,s),true}static addString(t,e="",a=false){if(""!==t){""===e&&(e=t.trim());const i=_(t);if(!i||a){const a=k.strings;for(const[e,i]of a.entries())if(i===t)return e;const n=O(e.replace(v.NONWORD_G,"_"),"_").split(/_+/);n.length>1?(n.length>4&&(n.length=4),e=n.join("_")):e=n[0],e=e.toLowerCase(),i||E.LEADINGNUMBER.test(e)||f.includes(e)?e="__"+e:""===e&&(e="__symbol"+Math.ceil(1e5*Math.random())),a.has(e)&&(e=B.generateId("string",e)),a.set(e,t)}return e}return""}static addImage(t,e="",a){const i=t.mdpi;if(i){if(1===Object.keys(t).length){const t=M[i];if(t)return t}const n=x(i,"/");if(!a||w(a,n)){const a=B.insertStoredAsset("images",B.formatName(e+n.substring(0,n.length-x(n,".").length-1)).toLowerCase(),t);return M[i]=a,a}}return""}static addColor(t,e=false){if("string"==typeof t&&(t=y(t,1,e)),t&&(!t.transparent||e)){const e=t.opacity<1?t.valueAsARGB:t.value;let a=k.colors.get(e);if(a)return a;const i=m(t.value);if(i)return a=e===i.value?i.key:B.generateId("color",i.key),k.colors.set(e,a),a}return""}reset(){super.reset(),M={}}addImageSrc(t,e="",a){const i={};let n;if("string"==typeof t){if(n=b(t),""!==n&&!n.startsWith("data:image/"))return this.addImageSet({mdpi:C(n)},e)}else t.srcset&&(a||T(t,this._imageFormat)).forEach(t=>{const e=t.pixelRatio;if(e>0){const a=t.src;e<1?i.ldpi=a:1===e?n&&!t.actualWidth||(n=a):e<=1.5?i.hdpi=a:e<=2?i.xhdpi=a:e<=3?i.xxhdpi=a:i.xxxhdpi=a}}),n||(n=t.src);if(n){const t=this.application.resourceHandler;i.mdpi=n;const a=t.getRawData(n);if(a){const{base64:i,filename:n}=a;if(i)return A.SVG.test(n)?"":(t.writeRawImage(e+n,i),n.substring(0,n.lastIndexOf(".")))}}return this.addImageSet(i,e)}addImageSet(t,e){return B.addImage(t,e,this._imageFormat)}writeRawImage(t,e){const a=super.writeRawImage(t,e);return a&&this.userSettings.compressImages&&B.canCompressImage(t)&&L(a,"compress").unshift({format:"png"}),a}get randomUUID(){return"__"+R("_")}get userSettings(){return this.application.userSettings}}const{isString:X}=squared.lib.util;function G(t,e,a,i=0){return(!a||a>=i)&&(t.attr=e,true)}const H={29:{android:{},assign:{}},28:{android:{allowAudioPlaybackCapture:false,enforceNavigationBarContrast:false,enforceStatusBarContrast:false,forceDarkAllowed:false,forceUriPermissions:false,foregroundServiceType:false,hasFragileUserData:false,identifier:false,inheritShowWhenLocked:false,interactiveUiTimeout:false,isLightTheme:false,isSplitRequired:false,minAspectRatio:false,nonInteractiveUiTimeout:false,opticalInsetBottom:false,opticalInsetLeft:false,opticalInsetRight:false,opticalInsetTop:false,packageType:false,requestLegacyExternalStorage:false,secureElementName:false,selectionDividerHeight:false,settingsSliceUri:false,shell:false,supportsMultipleDisplays:false,textLocale:false,useAppZygote:false,useEmbeddedDex:false,zygotePreloadName:false},assign:{}},27:{android:{accessibilityHeading:false,accessibilityPaneTitle:false,appComponentFactory:false,buttonCornerRadius:false,cantSaveState:false,dialogCornerRadius:false,fallbackLineSpacing:false,firstBaselineToTopHeight:false,fontVariationSettings:false,lastBaselineToBottomHeight:false,lineHeight:false,maxLongVersionCode:false,outlineAmbientShadowColor:false,outlineSpotShadowColor:false,screenReaderFocusable:false,textFontWeight:false,ttcIndex:false,versionCodeMajor:false,versionMajor:false,widgetFeatures:false,windowLayoutInDisplayCutoutMode:false},assign:{}},26:{android:{classLoader:false,navigationBarDividerColor:false,showWhenLocked:false,turnScreenOn:false,windowLightNavigationBar:false},assign:{}},25:{android:{fontWeight:false,justificationMode:false,layout_marginHorizontal:false,layout_marginVertical:false,paddingHorizontal:false,paddingVertical:false,tooltipText:false},assign:{}},24:{android:{colorSecondary:false,contextDescription:false,contextUri:false,roundIcon:false,shortcutDisabledMessage:false,shortcutId:false,shortcutLongLabel:false,shortcutShortLabel:false,showMetadataInPreview:false},assign:{}},23:{android:{backupInForeground:false,bitmap:false,buttonGravity:false,canControlMagnification:false,canPerformGestures:false,canRecord:false,collapseIcon:false,contentInsetEndWithActions:false,contentInsetStartWithNavigation:false,contextPopupMenuStyle:false,countDown:false,defaultHeight:false,defaultToDeviceProtectedStorage:false,defaultWidth:false,directBootAware:false,enableVrMode:false,endX:false,endY:false,externalService:false,fillType:false,forceHasOverlappingRendering:false,hotSpotX:false,hotSpotY:false,languageTag:false,level:false,listMenuViewStyle:false,maxButtonHeight:false,networkSecurityConfig:false,numberPickerStyle:false,offset:false,pointerIcon:false,popupEnterTransition:false,popupExitTransition:false,preferenceFragmentStyle:false,resizeableActivity:false,startX:false,startY:false,subMenuArrow:false,supportsLocalInteraction:false,supportsPictureInPicture:false,textAppearancePopupMenuHeader:false,tickMark:false,tickMarkTint:false,tickMarkTintMode:false,titleMargin:false,titleMarginBottom:false,titleMarginEnd:false,titleMarginStart:false,titleMarginTop:false,tunerCount:false,use32bitAbi:false,version:false,windowBackgroundFallback:false},assign:{}},22:{android:{allowUndo:false,autoVerify:false,breakStrategy:false,colorBackgroundFloating:false,contextClickable:false,drawableTint:false,drawableTintMode:false,end:t=>G(t,"right"),extractNativeLibs:false,fingerprintAuthDrawable:false,fraction:false,fullBackupContent:false,hyphenationFrequency:false,lockTaskMode:false,logoDescription:false,numbersInnerTextColor:false,scrollIndicators:false,showForAllUsers:false,start:t=>G(t,"left"),subtitleTextColor:false,supportsAssist:false,supportsLaunchVoiceAssistFromKeyguard:false,thumbPosition:false,titleTextColor:false,trackTint:false,trackTintMode:false,usesCleartextTraffic:false,windowLightStatusBar:false},assign:{}},21:{android:{accessibilityTraversalAfter:false,accessibilityTraversalBefore:false,collapseContentDescription:false,dialogPreferredPadding:false,resizeClip:false,revisionCode:false,searchHintIcon:false},assign:{}},20:{android:{actionBarPopupTheme:false,actionBarTheme:false,actionModeFindDrawable:false,actionModeShareDrawable:false,actionModeWebSearchDrawable:false,actionOverflowMenuStyle:false,amPmBackgroundColor:false,amPmTextColor:false,ambientShadowAlpha:false,autoRemoveFromRecents:false,backgroundTint:false,backgroundTintMode:false,banner:false,buttonBarNegativeButtonStyle:false,buttonBarNeutralButtonStyle:false,buttonBarPositiveButtonStyle:false,buttonTint:false,buttonTintMode:false,calendarTextColor:false,checkMarkTint:false,checkMarkTintMode:false,closeIcon:false,colorAccent:false,colorButtonNormal:false,colorControlActivated:false,colorControlHighlight:false,colorControlNormal:false,colorEdgeEffect:false,colorPrimary:false,colorPrimaryDark:false,commitIcon:false,contentAgeHint:false,contentInsetEnd:false,contentInsetLeft:false,contentInsetRight:false,contentInsetStart:false,controlX1:false,controlX2:false,controlY1:false,controlY2:false,country:false,datePickerDialogTheme:false,datePickerMode:false,dayOfWeekBackground:false,dayOfWeekTextAppearance:false,documentLaunchMode:false,elegantTextHeight:false,elevation:false,excludeClass:false,excludeId:false,excludeName:false,fastScrollStyle:false,fillAlpha:false,fillColor:false,fontFeatureSettings:false,foregroundTint:false,foregroundTintMode:false,fragmentAllowEnterTransitionOverlap:false,fragmentAllowReturnTransitionOverlap:false,fragmentEnterTransition:false,fragmentExitTransition:false,fragmentReenterTransition:false,fragmentReturnTransition:false,fragmentSharedElementEnterTransition:false,fragmentSharedElementReturnTransition:false,fromId:false,fullBackupOnly:false,goIcon:false,headerAmPmTextAppearance:false,headerDayOfMonthTextAppearance:false,headerMonthTextAppearance:false,headerTimeTextAppearance:false,headerYearTextAppearance:false,hideOnContentScroll:false,indeterminateTint:false,indeterminateTintMode:false,inset:false,isGame:false,launchTaskBehindSourceAnimation:false,launchTaskBehindTargetAnimation:false,layout_columnWeight:false,layout_rowWeight:false,letterSpacing:false,matchOrder:false,maxRecentsv:false,maximumAngle:false,minimumHorizontalAngle:false,minimumVerticalAngle:false,multiArch:false,navigationBarColor:false,navigationContentDescription:false,navigationIcon:false,nestedScrollingEnabled:false,numbersBackgroundColor:false,numbersSelectorColor:false,numbersTextColor:false,outlineProvider:false,overlapAnchor:false,paddingMode:false,pathData:false,patternPathData:false,persistableMode:false,popupElevation:false,popupTheme:false,progressBackgroundTint:false,progressBackgroundTintMode:false,progressTint:false,progressTintMode:false,propertyXName:false,propertyYName:false,queryBackground:false,recognitionService:false,relinquishTaskIdentity:false,reparent:false,reparentWithOverlay:false,restrictionType:false,resumeWhilePausing:false,reversible:false,searchIcon:false,searchViewStyle:false,secondaryProgressTint:false,secondaryProgressTintMode:false,selectableItemBackgroundBorderless:false,sessionService:false,setupActivity:false,showText:false,slideEdge:false,splitTrack:false,spotShadowAlpha:false,src:(t,e,a)=>(a.svgElement&&(t.obj="app",t.attr="srcCompat"),true),stackViewStyle:false,stateListAnimator:false,statusBarColor:false,strokeAlpha:false,strokeColor:false,strokeLineCap:false,strokeLineJoin:false,strokeMiterLimit:false,strokeWidth:false,submitBackground:false,subtitleTextAppearance:false,suggestionRowLayout:false,switchStyle:false,targetName:false,textAppearanceListItemSecondary:false,thumbTint:false,thumbTintMode:false,tileModeX:false,tileModeY:false,timePickerDialogTheme:false,timePickerMode:false,timePickerStyle:false,tintMode:false,titleTextAppearance:false,toId:false,toolbarStyle:false,touchscreenBlocksFocus:false,transitionGroup:false,transitionName:false,transitionVisibilityMode:false,translateX:false,translateY:false,translationZ:false,trimPathEnd:false,trimPathOffset:false,trimPathStart:false,viewportHeight:false,viewportWidth:false,voiceIcon:false,windowActivityTransitions:false,windowAllowEnterTransitionOverlap:false,windowAllowReturnTransitionOverlap:false,windowClipToOutline:false,windowContentTransitionManager:false,windowContentTransitions:false,windowDrawsSystemBarBackgrounds:false,windowElevation:false,windowEnterTransition:false,windowExitTransition:false,windowReenterTransition:false,windowReturnTransition:false,windowSharedElementEnterTransition:false,windowSharedElementExitTransition:false,windowSharedElementReenterTransition:false,windowSharedElementReturnTransition:false,windowSharedElementsUseOverlay:false,windowTransitionBackgroundFadeDuration:false,yearListItemTextAppearance:false,yearListSelectorColor:false},assign:{}},19:{android:{allowEmbedded:false,windowSwipeToDismiss:false},assign:{}},18:{android:{accessibilityLiveRegion:false,addPrintersActivity:false,advancedPrintOptionsActivity:false,apduServiceBanner:false,autoMirrored:false,category:false,fadingMode:false,fromScene:false,isAsciiCapable:false,keySet:false,requireDeviceUnlock:false,ssp:false,sspPattern:false,sspPrefix:false,startDelay:false,supportsSwitchingToNextInputMethod:false,targetId:false,toScene:false,transition:false,transitionOrdering:false,vendor:false,windowTranslucentNavigation:false,windowTranslucentStatus:false},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(t,e)=>e<26,canRequestFilterKeyEvents:false,canRequestTouchExplorationMode:false,childIndicatorEnd:false,childIndicatorStart:false,indicatorEnd:false,indicatorStart:false,layoutMode:false,mipMap:false,mirrorForRtl:false,requiredAccountType:false,requiredForAllUsers:false,restrictedAccountType:false,windowOverscan:false},assign:{}},16:{android:{checkedTextViewStyle:false,format12Hour:false,format24Hour:false,initialKeyguardLayout:false,labelFor:false,layoutDirection:false,layout_alignEnd:t=>G(t,"layout_alignRight"),layout_alignParentEnd:t=>G(t,"layout_alignParentRight"),layout_alignParentStart:t=>G(t,"layout_alignParentLeft"),layout_alignStart:t=>G(t,"layout_alignLeft"),layout_marginEnd:t=>G(t,"layout_marginRight"),layout_marginStart:t=>G(t,"layout_marginLeft"),layout_toEndOf:t=>G(t,"layout_toRightOf"),layout_toStartOf:t=>G(t,"layout_toLeftOf"),listPreferredItemPaddingEnd:t=>G(t,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:t=>G(t,"listPreferredItemPaddingLeft"),paddingEnd:t=>G(t,d.PADDING_RIGHT),paddingStart:t=>G(t,d.PADDING_LEFT),permissionFlags:false,permissionGroupFlags:false,presentationTheme:false,showOnLockScreen:false,singleUser:false,subtypeId:false,supportsRtl:false,textAlignment:false,textDirection:false,timeZone:false,widgetCategory:false},assign:{}},15:{android:{fontFamily:false,importantForAccessibility:false,isolatedProcess:false,keyboardLayout:false,mediaRouteButtonStyle:false,mediaRouteTypes:false,parentActivityName:false},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},V={android:{amPmBackgroundColor:(t,e)=>G(t,"headerBackground",e,23),amPmTextColor:(t,e)=>G(t,"headerTextColor",e,23),animationResolution:(t,e)=>e<16,canRequestEnhancedWebAccessibility:(t,e)=>e<26,dayOfWeekBackground:(t,e)=>e<23,dayOfWeekTextAppearance:(t,e)=>e<23,directionDescriptions:(t,e)=>e<23,headerAmPmTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),headerDayOfMonthTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),headerMonthTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),headerTimeTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),headerYearTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),showOnLockScreen:(t,e)=>G(t,"showForAllUsers",e,23),targetDescriptions:(t,e)=>e<23,yearListItemTextAppearance:(t,e)=>G(t,"yearListTextColor",e,23),yearListSelectorColor:(t,e)=>e<23}};var F=Object.freeze({__proto__:null,API_ANDROID:H,DEPRECATED_ANDROID:V,getValue:function(t,e,a,i){var n,o;for(const r of[H[t],H[0]]){const t=null===(o=null===(n=r.assign[e])||void 0===n?void 0:n[a])||void 0===o?void 0:o[i];if(X(t))return t}return""}});const z=squared.lib,{truncate:U}=z.math,{capitalize:q,isPlainObject:Y}=z.util,{BOX_STANDARD:j}=squared.base.lib.enumeration,K=/^@\+?id\//;function $(t,e,a=3){return 0===t?0:0===e?1:parseFloat(U(Math.max(t/(t+e),0),a))}function Z(t,e=false,a=3){return"string"==typeof t&&(t=parseFloat(t)||0),e?U(t,a)+"sp":Math.round(t)+"dp"}function J(t){return t.replace(K,"")}function Q(t){switch(t){case"left":case"start":case"right":case"end":case"center_horizontal":return true}return false}function tt(t){switch(t){case"top":case"bottom":case"center_vertical":return true}return false}function et(t,e){const a={};let i=false;for(const n in t)n.startsWith(e)&&(a[q(n.substring(e.length),false)]=t[n],i=true);return i?a:void 0}function at(t,e,a){if(a>0){if(t.documentBody)switch(e){case 32:0===t.getBox(2)[0]&&(a-=t.marginTop);break;case 64:a-=t.marginRight;break;case 128:0===t.getBox(8)[0]&&(a-=t.marginBottom);break;case 256:a-=t.marginLeft}if(0===t.getBox(e)[0])switch(e){case 32:a+=t.borderTopWidth-t.paddingTop;break;case 64:a+=t.borderRightWidth-t.paddingRight;break;case 128:a+=t.borderBottomWidth-t.paddingBottom;break;case 256:a+=t.borderLeftWidth-t.paddingLeft}return Math.max(a,0)}if(a<0){switch(e){case 32:a+=t.marginTop;break;case 64:a+=t.marginRight;break;case 128:a+=t.marginBottom;break;case 256:a+=t.marginLeft}return a}return 0}function it(t,e){if(e?e.android||(e.android={}):e={android:{}},t){const{android:a,app:i}=t;a&&Object.assign(e.android,a),i&&(e.app||(e.app={}),Object.assign(e.app,i))}return e}function nt(t){const e={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(Y(t))for(const a in e)typeof t[a]==typeof e[a]&&(e[a]=t[a]);return e}function ot(t,e,a){return e&&a>=17&&u[t]||t}function rt(t){return h[t]?`xmlns:${t}="${h[t]}"`:""}function st(t){let e="";for(const a in h)t.includes(a+":")&&(e+="\n\t"+rt(a));return e}var lt=Object.freeze({__proto__:null,convertLength:Z,getDocumentId:J,isHorizontalAlign:Q,isVerticalAlign:tt,getDataSet:et,getHorizontalBias:function(t){const e=t.documentParent.box;return $(Math.max(0,t.actualRect("left","bounds")-e.left),Math.max(0,e.right-t.actualRect("right","bounds")),t.localSettings.floatPrecision)},getVerticalBias:function(t){const e=t.documentParent.box;return $(Math.max(0,t.actualRect("top","bounds")-e.top),Math.max(0,e.bottom-t.actualRect("bottom","bounds")),t.localSettings.floatPrecision)},adjustAbsolutePaddingOffset:at,createViewAttribute:it,createStyleAttribute:nt,localizeString:ot,getXmlNs:rt,getRootNs:st});const{lib:ct,base:ht}=squared,{BOX_MARGIN:dt,BOX_PADDING:ut,CSS_UNIT:ft,formatPX:pt,isLength:gt,isPercent:mt}=ct.css,{createElement:yt,getNamedItem:bt,newBoxModel:Tt}=ct.dom,{clamp:Et,truncate:St}=ct.math,{actualTextRangeRect:At}=ct.session,{capitalize:vt,convertFloat:xt,convertInt:wt,convertWord:_t,fromLastIndexOf:Nt,isNumber:It,isPlainObject:Rt,isString:Ct,replaceMap:Lt}=ct.util,{EXT_NAME:Pt}=ht.lib.constant,{BOX_STANDARD:Ot,NODE_ALIGNMENT:kt,NODE_PROCEDURE:Dt}=ht.lib.enumeration,Mt=ht.ResourceUI,{constraint:Wt,relative:Bt,relativeParent:Xt}=c,Gt=V.android,Ht=/^attr[A-Z]/,Vt=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,Ft=/[^\w$\-_.]/g,zt=/^rect\(0[a-z]*,\s+0[a-z]*,\s+0[a-z]*,\s+0[a-z]*\)$/;function Ut(t,e){switch(t){case"left":case"start":return e?"":t;case"center":return"center_horizontal";case"justify":case"initial":case"inherit":return""}return t}function qt(t,e){return!(!e.horizontal||t.blockWidth&&!t.hasWidth&&!t.hasPX("maxWidth")&&!t.innerMostWrapped.has("width",{type:4,not:"100%"}))&&(t.mergeGravity(!t.blockWidth&&t.pageFlow||t.outerWrapper?"layout_gravity":"gravity",e.leftRight?"center_horizontal":e.left?"right":"left"),true)}function Yt(t,e,a){const i=Zt(t,e);if(t.api>=28)t.android("lineHeight",pt(e),a);else{if(!(i>0))return;t.android("lineSpacingExtra",pt(i),a)}const n=Math.round(i);n>0&&(t.modifyBox(t.inline?2:32,n),t.block&&!t.floating||t.modifyBox(t.inline?8:128,Math.floor(i)))}function jt(t,e,a,i,n){const o=t.cssInitial("lineHeight");if(!t.imageOrSvgElement&&!t.renderChildren.length&&0!==t.actualHeight&&"initial"!==o)if(t.multiline)Yt(t,e,false);else{const r=t.height,s=(s,l=false)=>{let c=Math.round(s);if(c>0){const h=(a||r>e)&&(t.styleText||l)&&!t.inline&&!(t.inputElement&&!gt(o,true));i&&(h?c>0&&t.modifyBox(32,c):!a&&t.baselineAltered||(c-=t.paddingTop,c>0&&t.modifyBox(2,c))),n&&(s=Math.floor(s),h?s>0&&t.modifyBox(128,s):(s-=t.paddingBottom)>0&&t.modifyBox(8,s))}};if(e===r)t.mergeGravity("gravity","center_vertical",false);else if(r>0)if(t.styleText)s(Zt(t,e));else{const a=e/2-t.paddingTop;a>0&&t.modifyBox(32,a)}else if(t.textElement)s(Zt(t,e));else if(t.inputElement){const a=yt(document.body,"div",Object.assign(Object.assign({},t.textStyle),{visibility:"hidden"}));a.innerText="AgjpyZ";const i=At(a).height;document.body.removeChild(a);let n=1;switch(t.tagName){case"SELECT":n=t.toElementInt("size",1);break;case"TEXTAREA":n=t.toElementInt("rows",1)}s((e-i*Math.max(n,1))/2,true)}else s((e-t.bounds.height)/2)}}function Kt(t,e){if("0px"===e){const e=t.renderParent;return!!e&&(e.layoutConstraint||e.layoutGrid)}return false}function $t(t,e){const a=t+"_horizontal",i=t+"_vertical";(e.has(t)||e.has(a)&&e.has(i))&&(e.delete(a),e.delete(i),e.add(t))}function Zt(t,e){let a=NaN;if(t.styleText){const e=t.cssTryAll({display:"inline-block",height:"auto","max-height":"none","min-height":"auto","line-height":"normal","white-space":"nowrap"});e&&(a=At(t.element).height,t.cssFinally(e))}else if(t.plainText){const e=t.bounds;a=e.height/(e.numberOfLines||1)}return(e-(isNaN(a)?t.boundingClientRect.height:a))/2}function Jt(t,e){if(t.support.maxDimension&&(e&&t.floating||!e))return;if(!t.hasPX(e?"width":"height",false)){const a=t.cssInitial(e?"minWidth":"minHeight",true);gt(a,true)&&parseFloat(a)>0&&(e?ne(t)&&(t.setLayoutWidth("0px",false),t.flexibleWidth&&(t.app("layout_constraintWidth_min",pt(t.parseWidth(a)+t.contentBoxWidth)),t.css("minWidth","auto"))):oe(t)&&(t.setLayoutHeight("0px",false),t.flexibleHeight&&(t.app("layout_constraintHeight_min",pt(t.parseHeight(a)+t.contentBoxHeight)),t.css(e?"minWidth":"minHeight","auto"))))}const a=t.cssInitial(e?"maxWidth":"maxHeight",true);if(gt(a,true)&&"100%"!==a)if(e){if(ne(t)){const e=t.parseWidth(a);(e>t.width||t.percentWidth>0)&&(t.setLayoutWidth("0px"),t.app("layout_constraintWidth_max",pt(e+(t.contentBox?t.contentBoxWidth:0))),t.css("maxWidth","auto"))}}else if(oe(t)){const e=t.parseHeight(a);(e>t.height||t.percentHeight>0)&&(t.setLayoutHeight("0px"),t.app("layout_constraintHeight_max",pt(e+(t.contentBox?t.contentBoxHeight:0))),t.css("maxHeight","auto"))}}function Qt(t,e,a,i){if(e<1&&!isNaN(i)&&t.pageFlow){const n=t.actualParent||t.documentParent;let o,r;if(a){const e=n.box.width;o=n.gridElement?0:t.contentBoxWidth/e,r=(Math.max(t.marginLeft,0)+t.marginRight)/e}else{const e=n.box.height;o=n.gridElement?0:t.contentBoxHeight/e,r=(Math.max(t.marginTop,0)+t.marginBottom)/e}1===i&&e+r>=i?e=i-r:(o>0&&(i<o?(o=Math.max(i,0),i=0):i-=o),0===i?o-=r:i=Math.max(i-r,0),e=Math.min(e+o,1))}return 1!==e||t.hasPX(a?"maxWidth":"maxHeight")?(t.app(a?"layout_constraintWidth_percent":"layout_constraintHeight_percent",St(e,t.localSettings.floatPrecision)),te(t,"0px",a,false)):te(t,"match_parent",a,false),i}function te(t,e,a,i){a?t.setLayoutWidth(e,i):t.setLayoutHeight(e,i)}function ee(t,e,a){const i=e?t.percentWidth:t.percentHeight;return i>0?Qt(t,i,e,a):a}function ae(t,e=1){const a=t.percentWidth;if(a>0)if(t.renderParent.hasPX("width",false)&&!(t.actualParent||t.documentParent).layoutElement)a<1?t.setLayoutWidth(pt(t.actualWidth)):t.setLayoutWidth("match_parent",false);else if(!t.inputElement)return ee(t,true,e);return e}function ie(t,e=1){const a=t.percentHeight;if(a>0)if(t.renderParent.hasPX("height",false)&&!(t.actualParent||t.documentParent).layoutElement)a<1?t.setLayoutHeight(pt(t.actualHeight)):t.setLayoutHeight("match_parent",false);else if(!t.inputElement)return ee(t,false,e);return e}function ne(t){if(t.documentRoot&&(t.hasWidth||t.blockStatic||t.blockWidth))return true;let a=t.renderParent,i=0;while(a){if(!a.inlineWidth&&(a.hasWidth||parseInt(a.layoutWidth)>0||a.of(e.CONSTRAINT,64)||a.documentRoot&&(a.blockWidth||a.blockStatic)))return true;if(a.flexibleWidth){if(++i>1)return false}else if(a.inlineWidth||a.naturalElement&&a.inlineVertical)return false;a=a.renderParent}return false}function oe(t){var e;if(t.documentRoot&&t.hasHeight)return true;const a=t.renderParent;return!!a&&(a.hasHeight||a.layoutConstraint&&a.blockHeight)||true===(null===(e=t.absoluteParent)||void 0===e?void 0:e.hasHeight)}const re=t=>0===t.bounds.width&&0===t.contentBoxWidth&&t.textEmpty&&0===t.marginLeft&&0===t.marginRight&&!t.visibleStyle.background,se=t=>0===t.bounds.height&&0===t.contentBoxHeight&&(0===t.marginTop&&0===t.marginBottom||"hidden"===t.css("overflow"));function le(t,e){const a=ce(t,e);a.size>1&&($t("center",a),$t("fill",a));let i="",n="",o="",r="";for(const t of a.values())Q(t)?n=t:tt(t)?o=t:r+=(""!==r?"|":"")+t;i=""!==n&&""!==o?n+"|"+o:n||o,""!==r&&(i+=(""!==i?"|":"")+r),""!==i?t.android(e,i):t.delete("android",e)}const ce=(t,e)=>new Set(t.android(e).split("|"));var he=t=>class a extends t{constructor(t=0,e="0",a,i){super(t,e,a),this.api=29,this.renderChildren=[],this.constraint={horizontal:false,vertical:false,current:{}},this._namespaces=["android","app"],this._cached={},this._containerType=0,this._controlName="",this._boxAdjustment=Tt(),this._boxReset=Tt(),this.__android={},this.__app={},this.init(),i?(i(this),this._localization=this.hasProcedure(Dt.LOCALIZATION)&&this.localSettings.supportRTL):this._localization=false}static setConstraintDimension(t,e=NaN){return e=ae(t,e),ie(t,1),t.inputElement||(Jt(t,true),Jt(t,false)),e}static setFlexDimension(t,e){const{grow:a,basis:i,shrink:n}=t.flexbox,o="width"===e,r=e=>a>0?(t.app(o?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",St(a,t.localSettings.floatPrecision)),true):(e>0&&(n>1?e/=n:n>1&&(e*=1-n),t.app(o?"layout_constraintWidth_min":"layout_constraintHeight_min",pt(e))),false);if(gt(i))r(t.parseUnit(i,e)),te(t,"0px",o,true);else if("0%"!==i&&mt(i)){r(0);const e=parseFloat(i)/100;Qt(t,e,!!o,NaN)}else{let a=false;t.hasFlex(o?"row":"column")&&(a=r(t.hasPX(e,false)?o?t.actualWidth:t.actualHeight:0),a&&te(t,"0px",o,true)),a||(o?ae(t,0):ie(t,0))}n>1&&t.app(o?"layout_constrainedWidth":"layout_constrainedHeight","true"),o&&ie(t),t.inputElement||t.imageOrSvgElement||(Jt(t,true),Jt(t,false))}static availablePercent(t,e,a){const i="width"===e;let n=1,o=0;return t.forEach(t=>{if((t=t.innerMostWrapped).pageFlow){if(++o,t.hasPX(e,true,true)){const o=t.cssInitial(e);if(mt(o))return void(n-=parseFloat(o)/100);if(gt(o))return void(n-=i?Math.max(t.actualWidth+t.marginLeft+t.marginRight,0)/a:Math.max(t.actualHeight+t.marginTop+t.marginBottom,0)/a)}n-=t.linear[e]/a}}),o>0?Math.max(0,n):1}static getControlName(t,a=29){const i=e[t];return a>=29&&o[i]||n[i]}setControlType(t,a){this.controlName=t,a?this._containerType=a:0===this._containerType&&(this._containerType=e.UNKNOWN)}setLayout(){if(this.plainText)return this.setLayoutWidth("wrap_content",false),void this.setLayoutHeight("wrap_content",false);switch(this.css("visibility")){case"visible":break;case"hidden":this.hide({hidden:true});break;case"collapse":this.hide({collapse:true})}!this.pageFlow&&zt.test(this.css("clip"))&&this.hide({hidden:true});const t=this.actualParent||this.documentParent,i=this.renderParent,n=!i.inlineWidth,o=!i.inlineHeight,r=this.support.maxDimension,s=!i.layoutConstraint||i.flexibleWidth||i.inlineWidth&&!this.renderChildren.length||this.onlyChild||!(!this.textElement&&!this.inputElement&&!this.controlElement&&this.alignParent("left")&&this.alignParent("right")||this.alignSibling("leftRight")||this.alignSibling("rightLeft"))?"match_parent":"0px";let{layoutWidth:l,layoutHeight:c}=this;if(""===l){if(!this.hasPX("width")||this.inlineStatic&&""!==this.cssInitial("width")){if(this.length)switch(this.cssInitial("width")){case"max-content":case"fit-content":this.renderEach(t=>{t.hasPX("width")||t.hasPX("maxWidth")||t.setLayoutWidth("wrap_content")}),l="wrap_content";break;case"min-content":{const t=[];let e=0;if(this.renderEach(a=>{!a.textElement||a.hasPX("width")?e=Math.max(a.actualWidth,e):(e=Math.max(a.width,e),a.support.maxDimension&&t.push(a))}),e>0&&t.length){const a=pt(e);t.forEach(t=>{t.hasPX("maxWidth")||t.css("maxWidth",a)})}l="wrap_content";break}}}else{const e=this.css("width");let o=-1;if(mt(e)){const c=()=>"100%"===e&&n&&(r||!this.hasPX("maxWidth"));if(this.inputElement)c()?l=s:o=this.actualWidth;else if(i.layoutConstraint)n?c()?l=s:(a.setConstraintDimension(this,1),l=this.layoutWidth):o=this.actualWidth;else if(i.layoutGrid)l="0px",this.android("layout_columnWeight",St(parseFloat(e)/100,this.localSettings.floatPrecision));else if(this.imageElement)c()?l=s:o=this.bounds.width;else if("100%"===e){if(!r&&this.hasPX("maxWidth")){const e=this.css("maxWidth"),a=this.parseWidth(e),i=this.absoluteParent||t;"100%"===e?n&&Math.ceil(a)>=i.box.width?l=s:o=Math.min(this.actualWidth,a):a>0&&(this.blockDimension?o=Math.min(this.actualWidth,a):l=Math.floor(a)<i.box.width?"wrap_content":s)}""===l&&(this.documentRoot||n)&&(l=s)}else o=this.actualWidth}else gt(e)&&(o=this.actualWidth);-1!==o&&(l=pt(o))}if(""===l)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage)l=pt(this.actualWidth);else if(this.imageElement&&this.hasHeight)l="wrap_content";else if(n&&(this.nodeGroup&&(i.layoutFrame&&(this.hasAlign(512)||this.hasAlign(2048))||this.hasAlign(32768))||this.layoutGrid&&this.some(t=>t.flexibleWidth)))l="match_parent";else if(!this.imageElement&&!this.inputElement&&!this.controlElement){const e=e=>{var a;if(t.pageFlow||!this.some(t=>t.textElement)){if(this.styleText){if((null===(a=this.textBounds)||void 0===a?void 0:a.numberOfLines)>1)return void(e&&(l="match_parent"));if(this.cssTry("display","inline-block")){const e=Math.ceil(At(this.element).width);return l=e>=t.box.width?"wrap_content":"match_parent",void this.cssFinally("display")}}l=s}};i.layoutGrid?this.blockStatic&&"1"===i.android("columnCount")&&(l=s):this.blockStatic?t.layoutElement?n&&t.gridElement&&!i.layoutElement&&(l=s):this.nodeGroup||i.hasWidth||this.hasAlign(64)||this.originalRoot||this.documentRoot?l=s:e(true):this.floating&&this.block&&!this.rightAligned&&this.alignParent("left")&&this.alignParent("right")?l="match_parent":this.inlineStatic&&!this.blockDimension&&this.naturalElement&&this.some(t=>t.naturalElement&&t.blockStatic)&&!t.layoutElement&&(i.layoutVertical||!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))&&e(false)}this.setLayoutWidth(l||"wrap_content")}if(""===this.layoutHeight){if(this.hasPX("height")&&(!this.inlineStatic||""===this.cssInitial("height"))){const a=this.css("height");let i=-1;if(mt(a)){if(this.inputElement)i=this.bounds.height;else if(this.imageElement)"100%"===a&&o?c="match_parent":i=this.bounds.height;else if("100%"===a){if(!r){const e=this.css("maxHeight"),a=this.parseHeight(e),n=this.absoluteParent||t;"100%"===e?o&&Math.ceil(a)>=n.box.height?c="match_parent":i=Math.min(this.actualHeight,a):a>0&&(this.blockDimension?i=Math.min(this.actualHeight,a):c=Math.floor(a)<n.box.height?"wrap_content":"match_parent")}""===c&&(this.documentRoot||o&&this.onlyChild||"fixed"===this.css("position"))&&(c="match_parent")}""===c&&this.hasHeight&&(i=this.actualHeight)}else gt(a)&&(i=this.actualHeight);-1!==i&&(this.is(e.LINE)&&"HR"!==this.tagName&&this.hasPX("height",true,true)&&(i+=this.borderTopWidth+this.borderBottomWidth),this.styleText&&this.multiline&&!t.layoutElement&&!this.hasPX("minHeight")?(this.android("minHeight",pt(i)),c="wrap_content"):c=pt(i))}""===c&&(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage?i.layoutConstraint&&!this.floating&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||t).box.height?(c="0px",this.anchor("bottom","parent")):this.naturalChild&&!this.pseudoElement&&(c=pt(this.actualHeight)):this.imageElement&&this.hasWidth?c="wrap_content":"table-cell"===this.display&&t.hasHeight&&(c="match_parent")),this.setLayoutHeight(c||"wrap_content")}else"0px"===c&&i.inlineHeight&&""===i.android("minHeight")&&!t.layoutElement&&t===this.absoluteParent&&this.setLayoutHeight("wrap_content");if(this.hasPX("minWidth")&&(!this.hasFlex("row")||t.flexElement&&!this.flexibleWidth)){const t=this.css("minWidth");"100%"===t&&this.inlineWidth?this.setLayoutWidth(s):this.android("minWidth",pt(this.parseWidth(t)+(this.contentBox?this.contentBoxWidth:0)),false)}if(this.hasPX("minHeight")&&"table-cell"!==this.display&&(!this.hasFlex("column")||t.flexElement&&!this.flexibleHeight)){const t=this.css("minHeight");"100%"===t&&o&&this.inlineHeight?this.setLayoutHeight("match_parent"):this.android("minHeight",pt(this.parseHeight(t)+(this.contentBox?this.contentBoxHeight:0)),false)}if(r){const t=this.css("maxWidth");let e=this.css("maxHeight"),a=-1;if(gt(t,true)?"100%"===t?this.svgElement?a=this.bounds.width:this.imageElement?(a=this.toElementInt("naturalWidth"),a>this.documentParent.actualWidth&&(this.setLayoutWidth("match_parent"),this.setLayoutHeight("wrap_content"),a=-1,e="")):n&&this.setLayoutWidth("match_parent"):a=this.parseWidth(t):this.pageFlow||!this.multiline||!this.inlineWidth||this.preserveWhiteSpace||!this.ascend({condition:t=>t.hasPX("width")}).length&&this.textContent.includes("\n")||(a=this.actualWidth),a>=0&&this.android("maxWidth",pt(a),false),gt(e,true)){let t=-1;"100%"!==e||this.svgElement?t=this.parseHeight(e):o?this.setLayoutHeight("match_parent"):t=this.imageElement?this.toElementInt("naturalHeight"):this.parseHeight(e),t>=0&&this.android("maxHeight",pt(t))}}}setAlignment(){const t=this.outerMostWrapper,e=this.renderParent,a=t.renderParent||e,i=this.autoMargin;let n=Ut(this.cssInitial("textAlign",true),false),o=Ut(this.cssAscend("textAlign"),true);if(this.nodeGroup&&""===n&&!this.hasAlign(512)){const t=this.actualParent;t&&(n=Ut(t.cssInitial("textAlign",true),false))}if(this.pageFlow){let r="";if(this.inlineVertical&&(a.layoutFrame||a.layoutGrid)||"table-cell"===this.display){const e="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",true)){case"top":t.mergeGravity(e,"top");break;case"middle":t.mergeGravity(e,"center_vertical");break;case"bottom":t.mergeGravity(e,"bottom")}}if(this.blockWidth?this.rightAligned&&t.nodeGroup&&t.layoutVertical&&t.renderEach(t=>{t.rightAligned&&t.mergeGravity("layout_gravity","right")}):((a.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))&&(this.floating?t.mergeGravity("layout_gravity",this.float):qt(t,i)||""===n||!this.hasWidth||this.blockStatic||this.inputElement||"table"===this.display||t.mergeGravity("layout_gravity",n,false)),this.rightAligned?r="right":this.nodeGroup&&(this.renderChildren.every(t=>t.rightAligned)?r="right":this.hasAlign(512)&&!this.renderChildren.some(t=>t.rightAligned)&&(r="left"))),e.layoutFrame&&(qt(this,i)||(this.innerWrapped||(this.floating&&(r=this.float),""!==r&&!e.naturalElement&&(e.inlineWidth||!e.documentRoot&&this.onlyChild)&&(e.mergeGravity("layout_gravity",r),r="")),this.centerAligned?this.mergeGravity("layout_gravity",Ut("center",false)):this.rightAligned&&e.blockWidth&&this.mergeGravity("layout_gravity","right")),this.onlyChild&&"table-cell"===e.display)){let t;switch(e.css("verticalAlign")){case"top":t="top";break;case"bottom":t="bottom";break;default:t="center_vertical"}this.mergeGravity("layout_gravity",t)}""!==r?this.blockWidth?""!==n&&"right"!==r||(n=r):(t.blockWidth&&this!==t?this:t).mergeGravity("layout_gravity",r):qt(t.inlineWidth?t:this,i)&&""!==n&&(o="")}""===o||!this.blockStatic||this.centerAligned||this.rightAligned||t.mergeGravity("layout_gravity","left",false),this.layoutConstraint||this.layoutFrame||this.layoutElement||this.layoutGrid||(""!==n?this.imageOrSvgElement||this.mergeGravity("gravity",n):""===o||this.inputElement||(this.imageOrSvgElement?this.pageFlow&&this.mergeGravity("layout_gravity",o):this.nodeGroup&&this.hasAlign(512)||this.mergeGravity("gravity",o))),i.vertical&&(e.layoutFrame||e.layoutVertical&&e.layoutLinear)&&t.mergeGravity("layout_gravity",i.topBottom?"center_vertical":i.top?"bottom":"top")}setBoxSpacing(){const t=this._boxReset,a=this._boxAdjustment,i=this.renderParent,o=(o,r,s)=>{let l=0,c=0,h=0,u=0;for(let e=0;e<4;++e){const i=o[e];let n=0===t[i]?this[i]:0;if(0!==n)switch(i){case"marginRight":if(this.inline){const t=this.documentParent.box.right,e=this.bounds.right;if(Math.floor(e)>t){this.onlyChild||this.alignParent("left")||this.setSingleLine(true);continue}e+n>t&&(n=Et(t-e,0,n))}break;case"marginBottom":n<0&&this.pageFlow&&!this.blockStatic&&(n=0);break;case"paddingTop":n=this.actualPadding(i,n);break;case"paddingBottom":if(this.hasPX("height",false,true)&&(!this.layoutElement&&(this.layoutVertical||this.layoutFrame)||!this.pageFlow)||this.documentParent.gridElement&&this.hasPX("height",false))continue;if(this.floatContainer){let t=Number.NEGATIVE_INFINITY;this.naturalChildren.forEach(e=>{e.floating&&(t=Math.max(e.bounds.bottom,t))}),n=Et(this.bounds.bottom-t,0,n)}else n=this.actualPadding(i,n)}switch(a&&(n+=a[i]),e){case 0:l=n;break;case 1:c=n;break;case 2:h=n;break;case 3:u=n}}if(r){if(this.floating){let t=i.renderChildren.find(t=>!t.floating);if(t){const e=Math.floor(this.bounds.top);let a;while(Math.floor(t.bounds.top)===e){a=t;const e=t.innerWrapped;if(!e)break;t=e}if(a){const[t,e]=a.getBox(2);l+=(0===t?a.marginTop:0)+e}}}if(this.positionStatic&&!this.blockWidth&&(u<0||c<0))switch(this.cssAscend("textAlign")){case"center":u<c?(c+=Math.abs(u),c/=2,u=0):(u+=Math.abs(c),u/=2,c=0);break;case"right":case"end":u<0&&(u=0)}switch(this.controlName){case n.RADIO:case n.CHECKBOX:l=Math.max(l-4,0),h=Math.max(h-4,0);break;case n.SELECT:l=Math.max(l-2,0),h=Math.max(h-2,0)}if(l<0&&(this.pageFlow?this.blockDimension&&!this.inputElement&&this.translateY(l)&&(this.anchorChain("bottom").forEach(t=>t.translateY(l)),l=0):h>=0&&this.leftTopAxis&&(this.hasPX("top")||!this.hasPX("bottom"))&&this.translateY(l)&&(l=0)),h<0&&(this.pageFlow?this.blockDimension&&!this.inputElement&&i.layoutConstraint&&(this.anchorChain("bottom").forEach(t=>t.translateY(-h)),h=0):l>=0&&this.leftTopAxis&&this.hasPX("bottom")&&!this.hasPX("top")&&this.translateY(-h)&&(h=0)),u<0)if(this.pageFlow)if("right"===this.float){const t=this.anchorChain("left");u=Math.min(-u,-this.bounds.width),t.forEach(t=>t.translateX(-u)),u=0}else this.blockDimension&&this.translateX(u)&&(this.anchorChain("right").forEach(t=>t.translateX(u)),u=0);else c>=0&&this.leftTopAxis&&(this.hasPX("left")||!this.hasPX("right"))&&this.translateX(u)&&(u=0);c<0&&(this.pageFlow?this.rightAligned?this.translateX(-c)&&(c=0):this.blockDimension&&i.layoutConstraint&&(this.anchorChain("right").forEach(t=>t.translateX(c)),c=0):u>=0&&this.leftTopAxis&&this.hasPX("right")&&!this.hasPX("left")&&this.translateX(-c)&&(c=0))}else this.visibleStyle.borderWidth&&!this.is(e.LINE)&&(l+=this.borderTopWidth,h+=this.borderBottomWidth,c+=this.borderRightWidth,u+=this.borderLeftWidth);if(0!==l||0!==u||0!==h||0!==c){let t=0,e=0,a=0;!s&&this.api>=26&&(l===c&&c===h&&h===u?t=l:(u===c&&(e=u),l===h&&(a=l))),0!==t?this.android(r?d.MARGIN:d.PADDING,pt(t)):(0!==e?this.android(r?d.MARGIN_HORIZONTAL:d.PADDING_HORIZONTAL,pt(e)):(0!==u&&this.android(this.localizeString(r?d.MARGIN_LEFT:d.PADDING_LEFT),pt(u)),0!==c&&this.android(this.localizeString(r?d.MARGIN_RIGHT:d.PADDING_RIGHT),pt(c))),0!==a?this.android(r?d.MARGIN_VERTICAL:d.PADDING_VERTICAL,pt(a)):(0!==l&&this.android(r?d.MARGIN_TOP:d.PADDING_TOP,pt(l)),0!==h&&this.android(r?d.MARGIN_BOTTOM:d.PADDING_BOTTOM,pt(h))))}};o(dt,true,i.layoutGrid),o(ut,false,false)}apply(t){for(const e in t){const a=t[e];if(Rt(a))for(const t in a)this.attr(e,t,a[t]);else a&&this.attr("_",e,a.toString())}}clone(t,e=true,i=false){const n=new a(t||this.id,this.sessionId,this.element||void 0);if(n.unsafe("localization",this._localization),n.localSettings=Object.assign({},this.localSettings),void 0!==t?n.setControlType(this.controlName,this.containerType):(n.controlId=this.controlId,n.controlName=this.controlName,n.containerType=this.containerType),this.cloneBase(n),e&&(Object.assign(n.unsafe("boxReset"),this._boxReset),Object.assign(n.unsafe("boxAdjustment"),this._boxAdjustment),this._namespaces.forEach(t=>{const e=this["__"+t];for(const a in e)n.attr(t,a,"id"===a&&"android"===t?n.documentId:e[a])})),i){n.anchorClear();const t=this.documentId;n.anchor("left",t)&&n.setBox(16,{reset:1,adjustment:0}),n.anchor("top",t)&&n.setBox(2,{reset:1,adjustment:0})}return n.saveAsInitial(true),n}extractAttributes(t){if("rtl"!==this.dir||this.imageOrSvgElement||(this.textElement?this.android("textDirection","rtl"):this.renderChildren.length&&this.android("layoutDirection","rtl")),this.styleElement||this.hasAlign(16384)){const t=et(this.dataset,"android");if(t)for(const e in t){const a="attr"===e?"android":Ht.test(e)?vt(e.substring(4),false):"";""!==a&&t[e].split(";").forEach(t=>{const[e,i]=t.split("::");i&&this.attr(a,e,i)})}if(!this.svgElement){const t=this.css("opacity");"1"!==t&&It(t)&&this.android("alpha",t)}}const e="\n"+"\t".repeat(t);let a="";return this.combine().forEach(t=>a+=e+t),a}alignParent(t){const e=this.anchorTarget,a=e.renderParent;if(a)if(a.layoutConstraint){const a=Wt[t];if(a)return"parent"===e.app(this.localizeString(a))}else if(a.layoutRelative){const a=Xt[t];if(a)return"true"===e.android(this.localizeString(a))}else if(a.layoutLinear){const i=a.renderChildren;if(a.layoutVertical)switch(t){case"top":return e===i[0];case"bottom":return e===i[i.length-1]}else switch(t){case"left":case"start":return e===i[0];case"right":case"end":return e===i[i.length-1]}}return false}alignSibling(t,e){const a=this.anchorTarget,i=a.renderParent;if(i)if(e){if(i.layoutConstraint){const i=Wt[t];i&&a.app(this.localizeString(i),e)}else if(i.layoutRelative){const i=Bt[t];i&&a.android(this.localizeString(i),e)}}else if(i.layoutConstraint){const e=Wt[t];if(e){const t=a.app(this.localizeString(e));return"parent"!==t&&t!==i.documentId?t:""}}else if(i.layoutRelative){const e=Bt[t];if(e)return a.android(this.localizeString(e))}return""}actualRect(t,e="linear"){let a=this[e][t];if(this.positionRelative&&this.floating)switch(t){case"top":case"bottom":this.hasPX("top")?a+=this.top:a-=this.bottom;break;case"left":this.hasPX("left")?a+=this.left:a-=this.right;case"right":this.hasPX("left")?a+=this.left:a-=this.right}if(this.inputElement){const i=this.companion;if((null==i?void 0:i.labelFor)===this&&!i.visible){const n=i[e][t];switch(t){case"top":case"left":return Math.min(n,a);case"right":case"bottom":return Math.max(n,a)}}}return a}translateX(t,e={}){const a=this.anchorTarget,i=a.renderParent;if(null==i?void 0:i.layoutConstraint){let n=wt(a.android("translationX"));if(false===e.oppose&&(n>0&&t<0||n<0&&t>0))return false;if(false!==e.accumulate&&(n+=t),e.contain){const{left:t,right:e}=i.box,{left:a,right:o}=this.linear;a+n<t?n=Math.max(a-t,0):o+n>e&&(n=Math.max(e-o,0))}return 0!==n?a.android("translationX",pt(n)):a.delete("android","translationX"),true}return false}translateY(t,e={}){const a=this.anchorTarget,i=a.renderParent;if(null==i?void 0:i.layoutConstraint){let n=wt(a.android("translationY"));if(false===e.oppose&&(n>0&&t<0||n<0&&t>0))return false;if(false!==e.accumulate&&(n+=t),e.contain){const{top:t,bottom:e}=i.box,{top:a,bottom:o}=this.linear;a+n<t?n=Math.max(a-t,0):o+n>e&&(n=Math.max(e-o,0))}return 0!==n?a.android("translationY",pt(n)):a.delete("android","translationY"),true}return false}localizeString(t){return ot(t,this._localization,this.api)}removeTry(t,e){return t&&!e&&(e=()=>t.anchorClear()),super.removeTry(t,e)}hasFlex(t){if(super.hasFlex(t)){const e=this.actualParent;if("column"===t&&!e.hasHeight){const t=e.actualParent;if(!t)return false;if(t.flexElement&&!t.flexdata.column){if(!t.hasHeight){let a=0,i=0;for(const n of t){const t=(n.data(Pt.FLEXBOX,"boundsData")||n.bounds).height;if(t>a&&(a=t),n===e&&(i=t,i<a))break}if(i>=a)return false}}else if(!t.gridElement)return false}const{grow:a,shrink:i}=this.flexbox;return a>0||1!==i}return false}hide(t){if(t){if(t.hidden)return void this.android("visibility","invisible");if(t.collapse)return void this.android("visibility","gone")}super.hide(t)}android(t,e,a=true){return e&&""!==(e=this.attr("android",t,e,a))?e:this.__android[t]||""}app(t,e,a=true){return e&&""!==(e=this.attr("app",t,e,a))?e:this.__app[t]||""}formatted(t,e=true){const a=Vt.exec(t);a&&this.attr(a[1]||"_",a[2],a[3],e)}anchor(t,e="",a){const i=this.anchorTarget,n=i.renderParent;if(n&&i.documentId!==e)if(n.layoutConstraint){if(""===e||void 0===i.constraint.current[t]||a){const n="parent"===e;void 0===a&&""!==e&&(a=n);const o=Wt[t];if(o){let r=false;switch(i.app(this.localizeString(o),e,a),t){case"left":case"right":n&&(i.constraint.horizontal=true);case"leftRight":case"rightLeft":r=true;break;case"top":case"bottom":case"baseline":n&&(i.constraint.vertical=true)}return i.constraint.current[t]={documentId:e,horizontal:r},true}}}else if(n.layoutRelative){const n="true"===e;void 0===a&&""!==e&&(a=n);const o=(n?Xt:Bt)[t];if(o)return i.android(this.localizeString(o),e,a),true}return false}anchorParent(t,e,a="",i){const n=this.anchorTarget,o=n.renderParent;if(o){const r="horizontal"===t;if(o.layoutConstraint){if(i||!n.constraint[t])return r?(n.anchor("left","parent",i),n.anchor("right","parent",i),n.constraint.horizontal=true):(n.anchor("top","parent",i),n.anchor("bottom","parent",i),n.constraint.vertical=true),void 0!==e&&n.anchorStyle(t,e,a,i),true}else if(o.layoutRelative)return n.anchor(r?"centerHorizontal":"centerVertical","true",i),true}return false}anchorStyle(t,e,a,i=true){const n=this.anchorTarget;"horizontal"===t?(n.app("layout_constraintHorizontal_bias",e.toString(),i),a&&n.app("layout_constraintHorizontal_chainStyle",a,i)):(n.app("layout_constraintVertical_bias",e.toString(),i),a&&n.app("layout_constraintVertical_chainStyle",a,i))}anchorChain(t){const e=[],a=this.anchorTarget,i=a.renderParent;if(i&&(i.layoutConstraint||i.layoutRelative)){let n,o;switch(t){case"top":n="topBottom",o="bottomTop";break;case"right":n="rightLeft",o="leftRight";break;case"bottom":n="bottomTop",o="topBottom";break;case"left":n="leftRight",o="rightLeft"}const r=i.renderChildren;let s=a;do{const t=s.alignSibling(n);if(""===t)break;{const a=r.find(e=>e.documentId===t);if((null==a?void 0:a.alignSibling(o))!==s.documentId)break;e.push(a),s=a}}while(true)}return e}anchorDelete(...t){const e=this.anchorTarget,a=e.renderParent;if(a)if(a.layoutConstraint)e.delete("app",...Lt(t,t=>this.localizeString(Wt[t])));else if(a.layoutRelative){const a=[];t.forEach(t=>{let e=Bt[t];e&&a.push(this.localizeString(e)),e=Xt[t],e&&a.push(this.localizeString(e))}),e.delete("android",...a)}}anchorClear(){const t=this.anchorTarget,e=t.renderParent;e&&(e.layoutConstraint?(t.anchorDelete(...Object.keys(Wt)),t.delete("app","layout_constraintHorizontal_bias","layout_constraintHorizontal_chainStyle","layout_constraintVertical_bias","layout_constraintVertical_chainStyle")):e.layoutRelative&&(t.anchorDelete(...Object.keys(Xt)),t.anchorDelete(...Object.keys(Bt))))}supported(t,e={}){var a;if("function"==typeof Gt[t]){const a=Gt[t](e,this.api,this);if(!a||Object.keys(e).length)return a}let i=this.api;while(i<=29){const n=null===(a=H[i++])||void 0===a?void 0:a.android[t];switch(typeof n){case"boolean":return n;case"function":return n(e,this.api,this)}}return true}combine(...t){const e=0===t.length,a=[];let i=false,n="";return this._namespaces.forEach(o=>{if(e||t.includes(o)){const t=this["__"+o];if(t){let e=o+":";switch(o){case"android":if(this.api<29)for(let i in t)if("id"===i)n=t[i];else{const n={};let o=t[i];if(!this.supported(i,n))continue;Object.keys(n).length&&(Ct(n.attr)&&(i=n.attr),Ct(n.value)&&(o=n.value)),a.push(e+`${i}="${o}"`)}else for(const i in t)"id"===i?n=t[i]:a.push(e+`${i}="${t[i]}"`);i=true;break;case"_":e="";default:for(const i in t)a.push(e+`${i}="${t[i]}"`)}}}}),a.sort((t,e)=>t>e?1:-1),i&&a.unshift('android:id="'+(n||"@+id/"+this.controlId)+'"'),a}mergeGravity(t,a,i=true){if("layout_gravity"===t){const t=this.renderParent;if(t){if(Q(a)&&(this.blockWidth||t.inlineWidth&&this.onlyChild||!i&&this.outerWrapper&&this.hasPX("maxWidth")))return;if(t.layoutRelative){if("center_horizontal"===a&&!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))return this.anchorDelete("left","right"),void this.anchor("centerHorizontal","true")}else if(t.layoutConstraint){if(!t.layoutHorizontal&&!this.positioned)switch(a){case"top":this.anchorStyle("vertical",0);break;case"right":case"end":this.alignSibling("rightLeft")||(this.anchor("right","parent",false),(this.alignParent("left")||this.alignSibling("left"))&&this.anchorStyle("horizontal",1));break;case"bottom":this.anchorStyle("vertical",1);break;case"left":case"start":this.alignSibling("leftRight")||(this.anchor("left","parent",false),(this.alignParent("right")||this.alignSibling("right"))&&this.anchorStyle("horizontal",0));break;case"center_horizontal":this.alignSibling("leftRight")||this.alignSibling("rightLeft")||this.anchorParent("horizontal",.5)}return}}}else switch(this.tagName){case"#text":case"IMG":case"SVG":case"HR":return;case"INPUT":switch(this.toElementString("type")){case"radio":case"checkbox":case"image":case"range":return}break;default:if(this.controlElement||this.is(e.TEXT)&&this.textEmpty||this.length&&(this.layoutFrame||this.layoutConstraint||this.layoutGrid))return}const n=ce(this,t),o=this.localizeString(a);if(!n.has(o)){n.add(o);let e="",a="",r="",s="";for(const t of n.values())Q(t)?(""===a||i)&&(a=t):tt(t)?(""===r||i)&&(r=t):s+=(""!==s?"|":"")+t;e=""!==a&&""!==r?a+"|"+r:a||r,""!==s&&(e+=(""!==e?"|":"")+s),""!==e&&this.android(t,e)}}applyOptimizations(){const t=this.renderParent;if(t&&(this.alignLayout(t),function(t,e){var a;const i=t.lineHeight;if(i>0){const n=t.has("lineHeight",{map:"initial"});if(t.multiline)Yt(t,i,n);else if(t.renderChildren.length){if(!n&&t.layoutHorizontal&&t.alignSibling("baseline"))return;if(t.layoutVertical||t.layoutFrame)t.renderChildren.forEach(t=>{0!==t.length||t.multiline||isNaN(t.lineHeight)||t.has("lineHeight")||jt(t,i,true,true,true)});else{const e=t.horizontalRows||[t.renderChildren];let n=false;const o=e.length;for(let t=0;t<o;++t){const r=e[t],s=r.length,l=e[t+1],c=!!l&&(1===l.length&&l[0].multiline||l[0].lineBreakLeading||t<o-1&&!!(null===(a=l.find(t=>t.baselineActive))||void 0===a?void 0:a.has("lineHeight"))),h=r[0],d=1===s,u=d&&!h.multiline,f=!d&&r.find(t=>t.baselineActive&&0===t.renderChildren.length),p=u||!n&&(t>0||1===o)||h.lineBreakLeading,g=u||!c&&(t<o-1||1===o);if(f&&s>1){if(isNaN(f.lineHeight)||f.has("lineHeight")){n=true;continue}jt(f,i,false,p,g)}else r.forEach(t=>{0!==t.length||t.multiline||isNaN(t.lineHeight)||t.has("lineHeight")||jt(t,i,d,p,g)});n=d&&h.multiline}}}else(n||0===e.lineHeight)&&jt(t,i,n,true,true)}}(this,t),le(this,"layout_gravity"),le(this,"gravity"),this.imageElement)){const t=this.layoutWidth,e=this.layoutHeight;("wrap_content"===t&&"wrap_content"!==e||"wrap_content"!==t&&"wrap_content"===e||"match_parent"===t||"match_parent"===e||"0px"===t||"0px"===e||""!==this.android("minWidth")||""!==this.android("minHeight")||""!==this.android("maxWidth")||""!==this.android("maxHeight"))&&this.android("adjustViewBounds","true")}}applyCustomizations(t=true){const e=e=>{if(e)for(const a in e){const i=e[a];for(const e in i)this.attr(a,e,i[e],t)}},{tagName:a,controlName:i}=this;let n=H[0].assign;e(n[a]),e(n[i]);const o=H[this.api];o&&(n=o.assign,e(n[a]),e(n[i]))}setSingleLine(t=false){if(this.textElement&&this.naturalChild){const e=this.actualParent;e.preserveWhiteSpace||"CODE"===e.tagName||this.multiline&&"nowrap"!==e.css("whiteSpace")||this.android("maxLines","1"),t&&this.textContent.trim().length>1&&this.android("ellipsize","end")}}setLayoutWidth(t,e=true){this.android("layout_width",t,e)}setLayoutHeight(t,e=true){this.android("layout_height",t,e)}alignLayout(t){if(this.layoutLinear){const e=this.renderChildren;if(this.layoutVertical)t.layoutFrame||this.documentRoot||!e.length||!this.baselineElement&&!e.every(t=>t.textElement)||this.android("baselineAlignedChildIndex","0");else{let t=!this.baselineActive;e.some(t=>t.floating)&&!e.some(t=>t.imageElement&&t.baseline)&&(this.android("baselineAligned","false"),t=false);const a=e.length;for(let i=0;i<a;++i){const n=e[i];n.setSingleLine(i===a-1),t&&n.baselineElement&&(this.android("baselineAlignedChildIndex",i.toString()),t=false)}}}}get controlElement(){switch(this.tagName){case"PROGRESS":case"METER":return true;case"INPUT":return"range"===this.toElementString("type")}return false}set containerType(t){this._containerType=t}get containerType(){if(0===this._containerType){const t=l[this.containerName];t>0&&(this._containerType=t)}return this._containerType}set controlId(t){this._controlId=t}get controlId(){var t;let e=this._controlId;if(void 0===e){const a=this.controlName;if(!a)return 0===this.id?"baseroot":"";{let i;if(this.styleElement){const e=(null===(t=this.elementId)||void 0===t?void 0:t.trim())||bt(this.element,"name");""!==e&&(i=e.replace(Ft,"_").toLowerCase(),("parent"===i||f.includes(i))&&(i="_"+i))}e=_t(Mt.generateId("android",i||Nt(a,".").toLowerCase(),i?0:1)),this._controlId=e}}return e}get documentId(){const t=this.controlId;return""!==t?"@id/"+t:""}get support(){let t=this._cached.support;return void 0===t&&(t={positionTranslation:this.layoutConstraint,positionRelative:this.layoutRelative,maxDimension:this.textElement||this.imageOrSvgElement},0!==this.containerType&&(this._cached.support=t)),t}set renderExclude(t){this._cached.renderExclude=t}get renderExclude(){let t=this._cached.renderExclude;if(void 0===t){if(this.naturalChild&&!this.originalRoot){const e=this.renderParent;if(!e)return false;t=!(this.onlyChild||0!==this.length||!this.styleElement||this.imageElement||this.pseudoElement)&&(this.pageFlow?e.layoutVertical?se(this)&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop"):re(this)&&(e.layoutHorizontal||se(this))&&""===this.alignSibling("leftRight")&&""===this.alignSibling("rightLeft")&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop"):re(this)||se(this))}else t=false;this._cached.renderExclude=t}return t}get baselineHeight(){var t;let e=this._cached.baselineHeight;if(void 0===e){if(e=0,this.plainText){const{height:t,numberOfLines:a}=this.bounds;e=t/(a||1)}else if(this.multiline&&this.cssTry("white-space","nowrap")?(e=this.boundingClientRect.height,this.cssFinally("white-space")):e=this.hasHeight?this.actualHeight:"PICTURE"===this.tagName?Math.max((null===(t=this.naturalElements.find(t=>"IMG"===t.tagName))||void 0===t?void 0:t.height)||0,this.bounds.height):this.bounds.height,this.naturalElement&&!this.pseudoElement&&this.lineHeight>e)e=this.lineHeight;else if(this.inputElement)switch(this.controlName){case n.RADIO:case n.CHECKBOX:e+=8;break;case n.SELECT:e/=this.toElementInt("size")||1,e+=4;break;default:e+=Math.max(-1*xt(this.verticalAlign),0)}this._cached.baselineHeight=e}return e}get innerWrapped(){return this._innerWrapped}set innerWrapped(t){t&&(t=t.outerMostWrapper,this._innerWrapped=t,t.outerWrapper=this)}get anchorTarget(){let t=this;do{const e=t.renderParent;if(!e)break;if(e.layoutConstraint||e.layoutRelative)return t;t=t.outerWrapper}while(t);return this}set anchored(t){const e=this.constraint;e.horizontal=t,e.vertical=t}get anchored(){const{horizontal:t,vertical:e}=this.constraint;return true===t&&true===e}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this._containerType===e.FRAME}get layoutLinear(){return this._containerType===e.LINEAR}get layoutGrid(){return this._containerType===e.GRID}get layoutRelative(){return this._containerType===e.RELATIVE}get layoutConstraint(){return this._containerType===e.CONSTRAINT}get layoutWidth(){return this.__android.layout_width||""}get layoutHeight(){return this.__android.layout_height||""}get inlineWidth(){return"wrap_content"===this.layoutWidth}get inlineHeight(){return"wrap_content"===this.layoutHeight}get blockWidth(){return"match_parent"===this.layoutWidth}get blockHeight(){return"match_parent"===this.layoutHeight}get flexibleWidth(){return Kt(this,this.layoutWidth)}get flexibleHeight(){return Kt(this,this.layoutHeight)}get labelFor(){return this._labelFor}set labelFor(t){t&&(t.companion=this),this._labelFor=t}set localSettings(t){this._localSettings?Object.assign(this._localSettings,t):this._localSettings=Object.assign({},t)}get localSettings(){return this._localSettings}};class de extends(he(squared.base.NodeUI)){}class ue extends(he(squared.base.NodeGroupUI)){constructor(t,e,a,i){super(t,e.sessionId,void 0,i),this.depth=e.depth,this.containerName=e.containerName+"_GROUP",this.actualParent=e.actualParent,this.documentParent=e.documentParent,this.retain(a)}set containerType(t){this._containerType=t}get containerType(){return this._containerType}set renderExclude(t){}get renderExclude(){return false}}const{lib:fe,base:pe}=squared,{PLATFORM:ge,isPlatform:me}=fe.client,{parseColor:ye}=fe.color,{formatPX:be,getSrcSet:Te,hasComputedStyle:Ee,isLength:Se,isPercent:Ae}=fe.css,{getElementsBetweenSiblings:ve,getRangeClientRect:xe}=fe.dom,{truncate:we}=fe.math,{CHAR:_e}=fe.regex,{getElementAsNode:Ne,getPseudoElt:Ie}=fe.session,{assignEmptyValue:Re,convertFloat:Ce,hasBit:Le,hasMimeType:Pe,isString:Oe,iterateArray:ke,objectMap:De,parseMimeType:Me,partitionArray:We,withinRange:Be}=fe.util,{STRING_XMLENCODING:Xe,replaceTab:Ge}=fe.xml,{APP_SECTION:He,BOX_STANDARD:Ve,NODE_ALIGNMENT:Fe,NODE_PROCEDURE:ze,NODE_RESOURCE:Ue,NODE_TEMPLATE:qe}=pe.lib.enumeration,Ye=pe.NodeUI,je=/((?:rgb|hsl)a?\([^)]+\)|[a-z]{4,})?\s*(-?[\d.]+[a-z]+)\s+(-?[\d.]+[a-z]+)\s*([\d.]+[a-z]+)?/;function Ke(t){t.sort((t,e)=>{switch(t.float){case"left":return-1;case"right":return 1}switch(e.float){case"left":return 1;case"right":return-1}return 0})}function $e(t,e){return function(t,e){const a=t.depth,i=e.depth;if(a===i){const a=t.actualParent,i=e.actualParent;if(t===i)return-1;if(a===e)return 1;if(a&&i){if(a===i)return Je(t,e);if(a.actualParent===i.actualParent)return Je(a,i)}return t.id<e.id?-1:1}return a<i?-1:1}(t.node.innerMostWrapped,e.node.innerMostWrapped)}function Ze(t,e){return Je(t.node.innerMostWrapped,e.node.innerMostWrapped)}function Je(t,e){const a=t.actualParent;if(t===e.actualParent)return-1;if(a===e)return 1;const{pageFlow:i,zIndex:n}=t,{pageFlow:o,zIndex:r}=e;return!i&&o?n>=0?1:-1:!o&&i?r>=0?-1:1:n===r?t.childIndex<e.childIndex?-1:1:n<r?-1:1}function Qe(t,a,i,n){const o=t.baselineHeight,r=t=>t.imageOrSvgElement&&t.baseline,s=t=>t.imageOrSvgElement?"baseline":"bottom";let l,c=0;const h=a.length;let d=0;while(d<h){const h=a[d++];if(h.baselineAltered)continue;let u=h.baselineHeight;if(u>0||h.textElement){if(h.blockVertical&&t.blockVertical){h.anchor("bottom",t.documentId);continue}{const t=h.renderChildren.filter(t=>r(t));if(h.imageOrSvgElement||t.length){if(t.forEach(t=>u=Math.max(t.baselineHeight,u)),u>o){!l||u>=c?(null==l||l.anchor(s(h),h.documentId),c=u,l=h):h.anchor(s(l),l.documentId);continue}if(Be(h.linear.top,n)){h.anchor("top","true");continue}}}i&&h.is(e.BUTTON)?h.anchor("centerVertical","true"):h.naturalChild&&h.isEmpty?h.anchor("baseline",t.documentId):h.baselineElement&&h.anchor(h.naturalElements.find(t=>r(t))?"bottom":"baseline",t.documentId)}else r(h)&&(l=h)}l&&t.anchor(s(l),l.documentId)}function ta(t,e){if("left"===e.float){if(e.marginRight<0){const a=Math.abs(e.marginRight);return t.modifyBox(16,e.actualWidth+(e.hasWidth?e.paddingLeft+e.borderLeftWidth:0)-a),t.anchor("left",e.documentId),e.setBox(4,{reset:1}),true}}else if("right"===t.float&&e.marginLeft<0){const a=Math.abs(e.marginLeft),i=e.actualWidth;return a<i&&t.modifyBox(4,i-a),t.anchor("right",e.documentId),e.setBox(16,{reset:1}),true}return false}function ea(t){return t.filter(t=>(t.baseline||Se(t.verticalAlign,true))&&("TEXTAREA"===t.tagName||"SELECT"===t.tagName&&t.toElementInt("size")>1)||"text-bottom"===t.verticalAlign&&"INPUT_IMAGE"!==t.containerName).sort((t,e)=>t.baselineHeight===e.baselineHeight?"SELECT"===t.tagName?1:0:t.baselineHeight>e.baselineHeight?-1:1)}function aa(t){if("BR"===t.tagName)return true;if(Ee(t)){const e=getComputedStyle(t),a=e.getPropertyValue("position");if(!("absolute"===a||"fixed"===a)){const t=e.getPropertyValue("display"),a="none"!==e.getPropertyValue("float"),i=()=>("100%"===e.getPropertyValue("width")||"100%"===e.getPropertyValue("minWidth"))&&"none"===e.getPropertyValue("max-width");switch(t){case"block":case"flex":case"grid":return!a||i()}return(t.startsWith("inline-")||"table"===t)&&i()}}return false}function ia(t){const e=t.element;e.readOnly&&t.android("focusable","false"),e.disabled&&t.android("enabled","false")}function na(t,e,a){const[i,n,o,r,s,l,c,h]=a?["horizontal","width","left","right",16,4,256,64]:["vertical","height","top","bottom",2,8,32,128],d=t.autoMargin,u=t.hasPX(n);if(u&&d[i])t.hasPX(o)&&d[r]?(t.anchor(o,"parent"),t.modifyBox(s,t[o])):t.hasPX(r)&&d[o]?(t.anchor(r,"parent"),t.modifyBox(l,t[r])):(t.anchorParent(i,.5),t.modifyBox(s,t[o]),t.modifyBox(l,t[r]));else{const f="100%"===t.css(n)||"100%"===t.css(a?"minWidth":"minHeight");let p=0;t.hasPX(o)&&(t.anchor(o,"parent"),!t.hasPX(r)&&f&&(t.anchor(r,"parent"),p++),t.modifyBox(s,at(e,c,t[o])),p++),t.hasPX(r)&&(!f&&u&&t.hasPX(o)||(t.anchor(r,"parent"),t.modifyBox(l,at(e,h,t[r]))),p++),0===p?a&&(t.centerAligned?t.anchorParent("horizontal",.5):t.rightAligned&&(t.blockStatic?t.anchorParent("horizontal",1):t.anchor("right","parent"))):2!==p||u||d[i]&&!d[o]&&!d[r]||(a?t.setLayoutWidth("0px"):t.setLayoutHeight("0px"))}}function oa(t,e,a,i){return t.css("width",be(e),true),i&&i.width>0&&i.height>0&&(a=i.height*(e/i.width),t.css("height",be(a),true)),[e,a]}function ra(t,e){const{minLength:a,maxLength:i}=e;-1!==a&&t.android("minLength",a.toString()),i>0&&t.android("maxLength",i.toString())}function sa(t,e){const{min:a,max:i}=e;Oe(a)&&t.android("min",a),Oe(i)&&t.android("max",i)}function la(t,e){return t.naturalChild?e.has(t):t.nodeGroup?t.cascade(t=>t.naturalChild).some(t=>e.has(t)):e.has(t.innerMostWrapped)}function ca(t,e){const a=t.parent;if(a.flexElement&&("baseline"===a.css("alignItems")||t.some(t=>"baseline"===t.flexbox.alignSelf)))return false;const i=t.length>1;return t.some(e=>i&&(e.rightAligned||e.centerAligned)&&t.singleRowAligned||e.percentWidth>0&&e.percentWidth<1||e.hasPX("maxWidth"))&&(!e||t.every(t=>t.marginTop>=0))}function ha(t,e){if(t.leftTopAxis){const a=t.absoluteParent;if(a.documentBody)switch(e){case"top":if(0===a.getBox(2)[0])return a.marginTop;break;case"left":return a.marginLeft}}return 0}function da(t){const{centerAligned:e,rightAligned:a}=t;t.css("display","inline-block",true),t.setCacheValue("centerAligned",e),t.setCacheValue("rightAligned",a)}function ua(t){return We(t,t=>"right"===t.float||true===t.autoMargin.left)}const fa=(t,e,a=true)=>e.size&&t.some((t,i)=>(i>0||!a)&&e.has(t)),pa=t=>t.plainText&&B.hasLineBreak(t,false,true)||t.preserveWhiteSpace&&_e.LEADINGNEWLINE.test(t.textContent),ga=t=>Math.max(t.actualHeight,t.lineHeight),ma=t=>ca(t,true)?e.CONSTRAINT:t.some(t=>t.positionRelative||!t.pageFlow&&t.autoPosition)?e.RELATIVE:e.LINEAR,ya=t=>ca(t,true)?e.CONSTRAINT:t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,ba=(t=false)=>t?{anchorStart:"right",anchorEnd:"left",chainStart:"rightLeft",chainEnd:"leftRight"}:{anchorStart:"left",anchorEnd:"right",chainStart:"leftRight",chainEnd:"rightLeft"},Ta=(t,e,a)=>t.containerType===e&&t.length===a&&(0===t.alignmentType||t.hasAlign(2));function Ea(t){if(t.centerAligned)t.anchorParent("horizontal",.5);else{const e=t.autoMargin;if(e.horizontal)t.anchorParent("horizontal",e.left?1:e.leftRight?.5:0);else{const e=t.rightAligned;e?(t.anchor("right","parent"),t.anchorStyle("horizontal",1)):(t.anchor("left","parent"),t.anchorStyle("horizontal",0)),(t.blockStatic||t.percentWidth>0||t.block&&t.multiline&&t.floating)&&t.anchor(e?"left":"right","parent")}}}function Sa(t,e=true,a=false){const i=t.autoMargin;let n=e?0:NaN;if(t.floating)n=0;else if(i.vertical)n=i.top?1:i.topBottom?.5:0;else if(t.imageOrSvgElement||t.inlineVertical)switch(t.verticalAlign){case"baseline":n=e?0:1;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=0}else{const e=t.actualParent;if("table-cell"===(null==e?void 0:e.display))switch(e.verticalAlign){case"middle":n=.5;break;case"bottom":n=1;break;default:n=0}}isNaN(n)||(a?(t.app("layout_constraintVertical_bias",n.toString(),false),t.delete("layout_constraintVertical_chainStyle")):t.anchorStyle("vertical",n,e?"":"packed",false))}class Aa extends squared.base.ControllerUI{constructor(t,e){super(),this.application=t,this.cache=e,this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:Xe},directory:{string:"res/values",font:"res/font",image:"res/drawable",video:"res/raw",audio:"res/raw"},svg:{enabled:false},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:me(4)?"rgb(255, 255, 255)":"rgb(221, 221, 221)",inputColorBorderColor:"rgb(119, 119, 199)",meterForegroundColor:"rgb(99, 206, 68)",meterBackgroundColor:"rgb(237, 237, 237)",progressForegroundColor:"rgb(138, 180, 248)",progressBackgroundColor:"rgb(237, 237, 237)"},mimeType:{font:["font/ttf","font/otf"],image:["image/jpeg","image/png","image/gif","image/bmp","image/webp","image/svg+xml","image/heic","image/heif","image/x-icon"],audio:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","audio/aac","audio/flac","audio/gsm","audio/midi","audio/mpeg","audio/wav","audio/ogg"],video:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","video/webm"]},unsupported:{cascade:new Set(["SELECT","svg"]),tagName:new Set(["HEAD","TITLE","META","SCRIPT","STYLE","LINK","OPTION","INPUT:hidden","COLGROUP","MAP","AREA","SOURCE","TEMPLATE","DATALIST","TRACK"]),excluded:new Set(["BR","WBR"])},precision:{standardFloat:3},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.35,superscriptTopOffset:.35,legendBottomOffset:.25}}}init(){const{resolutionDPI:t,resolutionScreenWidth:e,resolutionScreenHeight:a,supportRTL:i,targetAPI:n}=this.userSettings,o=160/t,r={width:e*o,height:a*o};this._targetAPI=n||29,this._screenDimension=r,this._defaultViewSettings={screenDimension:r,supportRTL:i,floatPrecision:this.localSettings.precision.standardFloat},super.init()}optimize(t){const e=t.length;let a=0;while(a<e){const e=t[a++];e.applyOptimizations(),e.hasProcedure(ze.CUSTOMIZATION)&&e.applyCustomizations(this.userSettings.customizationsOverwritePrivilege)}}finalize(t){const e=this.userSettings.insertSpaces;t.forEach(t=>{const a=t.content;t.content=Ge(a.replace("{#0}",st(a)),e)})}processUnknownParent(t){const a=t.node;if(t.some(t=>!t.pageFlow&&!t.autoPosition))t.setContainerType(e.CONSTRAINT,34);else if(t.length<=1){const i=a.item(0);if(!i)return this.processUnknownChild(t);if(a.originalRoot&&function(t,e){const a=e.dataset.target;if(a&&t){const e=document.getElementById(a);return!!e&&e!==t}return false}(a.element,i))return a.hide(),{layout:t,next:true};a.naturalElement&&i.plainText?(i.hide(),a.clear(),a.inlineText=true,a.textContent=i.textContent,t.setContainerType(e.TEXT),t.add(1024)):t.parent.flexElement&&i.baselineElement&&"baseline"===a.flexbox.alignSelf?t.setContainerType(e.LINEAR,8):i.percentWidth>0&&i.percentWidth<1?t.setContainerType(e.CONSTRAINT,32768):a.autoMargin.leftRight||a.autoMargin.left?t.setContainerType(e.CONSTRAINT):i.baselineElement?t.setContainerType(ya(t),16):t.setContainerType(e.FRAME),t.add(4096)}else if(B.hasLineBreak(a,true))t.setContainerType(ya(t),18);else if(this.checkConstraintFloat(t))t.setContainerType(e.CONSTRAINT),t.every(t=>t.floating)?t.add(512):t.linearY?t.add(16):t.some(t=>t.floating||t.rightAligned)&&t.singleRowAligned?t.add(8):(t.add(t.some(t=>t.blockStatic)?16:1024),t.add(2));else if(t.linearX||t.singleRowAligned)this.checkFrameHorizontal(t)?(t.addRender(512),t.addRender(8)):this.checkConstraintHorizontal(t)?t.setContainerType(e.CONSTRAINT):this.checkLinearHorizontal(t)?(t.setContainerType(e.LINEAR),t.floated.size&&Ke(t.children)):t.setContainerType(ca(t,false)?e.CONSTRAINT:e.RELATIVE),t.add(8);else if(t.linearY)t.setContainerType(ma(t),16|(a.originalRoot||t.some((e,a)=>a>0&&e.inlineFlow&&t.item(a-1).inlineFlow)?2:0));else if(t.every(t=>t.inlineFlow))this.checkFrameHorizontal(t)?(t.addRender(512),t.addRender(8)):t.setContainerType(ma(t),18);else{const a=t.children,i=this.application.clearMap;t.some((t,e)=>t.alignedVertically(e>0?a.slice(0,e):void 0,i)>0)?t.setContainerType(ma(t),18):t.setContainerType(e.CONSTRAINT,2)}return{layout:t}}processUnknownChild(t){const a=t.node,i=a.visibleStyle.background;if(!a.inlineText||a.textEmpty&&!i)if(a.blockStatic&&0===a.naturalChildren.length&&(i||a.contentBoxHeight>0))t.setContainerType(e.FRAME);else{if(0===a.bounds.height&&a.naturalChild&&0===a.naturalElements.length&&""===a.elementId&&0===a.marginTop&&0===a.marginRight&&0===a.marginBottom&&0===a.marginLeft&&!a.originalRoot&&!i&&!a.dataset.use)return a.hide(),{layout:t,next:true};switch(a.tagName){case"OUTPUT":t.setContainerType(e.TEXT);break;default:""!==a.textContent&&(i||a.pseudoElement&&"::after"===Ie(a.element,a.sessionId))?(t.setContainerType(e.TEXT),a.inlineText=true):t.setContainerType(e.FRAME)}}else t.setContainerType(e.TEXT);return{layout:t}}processTraverseHorizontal(t,a){const i=t.parent;if(1===t.floated.size&&t.every(t=>t.floating)){if(Ta(i,e.CONSTRAINT,t.length))return i.addAlign(512),void i.removeAlign(2);t.node=this.createNodeGroup(t.node,t.children,{parent:i}),t.setContainerType(e.CONSTRAINT,512)}else this.checkFrameHorizontal(t)?(t.node=this.createNodeGroup(t.node,t.children,{parent:i}),t.addRender(512),t.addRender(8)):t.length!==a.length||i.hasAlign(16)?(t.node=this.createNodeGroup(t.node,t.children,{parent:i}),this.processLayoutHorizontal(t)):(i.hasAlign(1024)||i.addAlign(8),i.removeAlign(2));return t}processTraverseVertical(t){const a=t.parent,i=this.application.clearMap,n=t.floated.size,o=t.length,r=()=>{a.addAlign(16),a.removeAlign(2)};if(t.some((t,e)=>t.lineBreakTrailing&&e<o-1)){if(!a.hasAlign(16)){const e=ma(t);if(Ta(a,e,o))return void r();if(a.layoutConstraint&&(a.addAlign(16),!a.hasAlign(32)))return;t.node=this.createLayoutGroup(t),t.setContainerType(e,18)}}else if(1===n&&t.every((t,e)=>0===e||e===o-1||i.has(t)))if(t.same(t=>t.float)){if(Ta(a,e.CONSTRAINT,o))return void r();t.node=this.createLayoutGroup(t),t.setContainerType(e.CONSTRAINT,512)}else if(fa(t,i)||this.checkFrameHorizontal(t))t.node=this.createLayoutGroup(t),t.addRender(512),t.addRender(8);else{const e=ya(t);if(Ta(a,e,o))return void r();if(a.layoutConstraint&&(a.addAlign(16),!a.hasAlign(32)))return;t.node=this.createLayoutGroup(t),t.setContainerType(e,16)}else n&&(fa(t,i)?(t.node=this.createLayoutGroup(t),t.addRender(512),t.addRender(16)):t.item(0).floating&&(t.node=this.createLayoutGroup(t),t.addRender(512),t.addRender(8)));if(!a.hasAlign(16)){const e=ya(t);if(Ta(a,e,o))return void r();if(a.layoutConstraint&&(a.addAlign(16),!a.hasAlign(32)))return;t.node=this.createLayoutGroup(t),t.setContainerType(e,16)}return t}processLayoutHorizontal(t){return this.checkConstraintFloat(t)?t.setContainerType(e.CONSTRAINT,t.every(t=>t.floating)?512:1024):this.checkConstraintHorizontal(t)?t.setContainerType(e.CONSTRAINT,8):this.checkLinearHorizontal(t)?(t.setContainerType(e.LINEAR,8),t.floated.size&&Ke(t.children)):t.setContainerType(e.RELATIVE,8),t}sortRenderPosition(t,e){if(t.layoutRelative)e.some(t=>0!==t.node.zIndex)&&e.sort(Ze);else if(t.layoutConstraint&&e.some(t=>{return 0!==(e=t.node).zIndex||!e.pageFlow;var e})){let a=[];const i=t.innerMostWrapped,n=[],o=[];if(e.forEach(t=>{const e=t.node.innerMostWrapped;e.pageFlow||e.actualParent===e.documentParent||e===i?(a.push(t),n.push(e)):o.push(t)}),a.sort(Ze),o.length){const t=new Map,e=[],i=[];o.forEach(a=>{var o;const r=a.node.innerMostWrapped,s=r.ascend({condition:t=>n.includes(t),error:t=>t.originalRoot})[0];s?(null===(o=t.get(s))||void 0===o?void 0:o.push(a))||t.set(s,[a]):r.zIndex<0?i.push(a):e.push(a)});for(const[n,o]of t.entries()){o.sort(Ze);const t=a.findIndex(t=>t.node.innerMostWrapped===n);-1!==t?a.splice(t+1,0,...o):o.forEach(t=>{t.node.innerMostWrapped.zIndex<0?i.push(t):e.push(t)})}i.length&&(i.sort($e),a=i.concat(a)),e.length&&(e.sort($e),a=a.concat(e))}return a}return e}checkFrameHorizontal(t){switch(t.floated.size){case 1:if("center"===t.node.cssAscend("textAlign",true)&&t.some(t=>t.pageFlow))return true;if(t.floated.has("right")){let e=0,a=false;for(const i of t)if(i.floating){if(a)return false}else i.multiline&&(a=true),e++;return e>0&&!t.singleRowAligned}return t.item(0).floating&&(t.linearY||t.length>2&&!t.singleRowAligned&&!t.every(t=>t.inlineFlow)||t.every(t=>t.floating||t.block&&(!t.isEmpty||!(t.textElement||t.inputElement||t.imageElement||t.svgElement||t.controlElement))));case 2:return true}return false}checkConstraintFloat(t){if(t.length>1){const e=this.application.clearMap;let a=true,i=true;for(const n of t)if(!e.has(n)){const t=n.inputElement||n.controlElement;if(a&&!(n.floating||n.autoMargin.horizontal||n.inlineDimension&&!t||n.imageOrSvgElement||n.marginTop<0)&&(a=false),i&&0===n.percentWidth&&(i=false),!a&&!i)return false}return true}return false}checkConstraintHorizontal(t){if(t.length>1&&t.singleRowAligned){const e=t.floated.size;return(!e||!(2===e||fa(t,this.application.clearMap)||t.some(t=>"left"===t.float)&&t.some(t=>true===t.autoMargin.left)||t.some(t=>"right"===t.float)&&t.some(t=>true===t.autoMargin.right)))&&t.some(e=>e.blockVertical||e.percentWidth>0&&e.percentWidth<1&&!e.inputElement&&!e.controlElement||e.marginTop<0||"bottom"===e.verticalAlign&&!t.parent.hasHeight)}return false}checkLinearHorizontal(t){const e=t.floated,a=e.size;if((0===a||1===a&&e.has("left"))&&0===t.node.lineHeight&&t.singleRowAligned){const{fontSize:e,lineHeight:a}=t.item(0),i=t.parent.actualBoxWidth();let n=0;for(const o of t){if(!o.naturalChild||!o.isEmpty||o.inputElement||o.controlElement||o.positionRelative||!o.baseline||o.blockVertical||0!==o.zIndex||o.lineHeight!==a||o.fontSize!==e)return false;if(n+=o.linear.width,n>=i)return false}return true}return false}setConstraints(){this.cache.each(t=>{const e=t.renderChildren;if(e.length&&t.hasProcedure(ze.CONSTRAINT))if(t.hasAlign(4))t.layoutConstraint&&!t.layoutElement&&this.evaluateAnchors(e);else if(t.layoutRelative)this.processRelativeHorizontal(t,e);else if(t.layoutConstraint){let a=0;const i=e.length,n=new Array(i);if(e.forEach(e=>{if(!e.positioned)if(e.pageFlow||e.autoPosition)n[a++]=e;else{const a=e.constraint;e.outerWrapper===t?(a.horizontal||e.anchorParent("horizontal",0),a.vertical||e.anchorParent("vertical",0)):(e.leftTopAxis&&(a.horizontal||na(e,t,true),a.vertical||na(e,t,false)),a.horizontal||this.addGuideline(e,t,{orientation:"horizontal"}),a.vertical||this.addGuideline(e,t,{orientation:"vertical"}),e.positioned=true)}}),a>0){if(n.length=a,t.layoutHorizontal)this.processConstraintHorizontal(t,n);else if(a>1)this.processConstraintChain(t,n);else{const t=n[0],{horizontal:e,vertical:a}=t.constraint;e||Ea(t),a||(t.anchorParent("vertical"),Sa(t)),de.setConstraintDimension(t,1)}this.evaluateAnchors(n)}}})}renderNodeGroup(t){const{node:a,containerType:i}=t,n=it();let o=false;switch(i){case e.LINEAR:n.android.orientation=Le(t.alignmentType,16)?"vertical":"horizontal",o=true;break;case e.GRID:{const{columnCount:e,rowCount:a}=t,i=n.android;a>0&&(i.rowCount=a.toString()),i.columnCount=e>0?e.toString():"1",o=true;break}case e.FRAME:case e.RELATIVE:case e.CONSTRAINT:o=true;break;default:if(t.isEmpty)return this.renderNode(t)}if(o){const e=a.dataset,o=!e.use&&e.target;return a.setControlType(de.getControlName(i,a.api),i),a.addAlign(t.alignmentType),a.render(o?this.application.resolveTarget(o):t.parent),a.apply(n),{type:1,node:a,controlName:a.controlName}}}renderNode(t){var a,i;let{parent:o,containerType:r}=t;const s=t.node,l=s.dataset;let c=!l.use&&l.target,h=de.getControlName(r,s.api);switch(s.tagName){case"IMG":{const i=this.application,r=s.element,l=s.absoluteParent||s.documentParent;let h=s.toFloat("width",0),d=s.toFloat("height",0),u=s.percentWidth>0?h:-1;const f=s.percentHeight>0?d:-1;let p,g="fitXY";if(Oe(r.srcset)||"PICTURE"===(null===(a=s.actualParent)||void 0===a?void 0:a.tagName)){const t=this.localSettings.mimeType.image;if(p=Te(r,"*"===t?void 0:t),p.length){const t=p[0],e=t.actualWidth;if(e)-1===u?[h,d]=oa(s,e,d,i.resourceHandler.getImage(r.src)):(h=s.bounds.width,u=-1);else{const e=i.resourceHandler.getImage(t.src);e&&(-1===u?[h,d]=oa(s,e.width,d,e):(h=s.bounds.width,u=-1))}}else p=void 0}if(-1!==u||-1!==f){const t=l.box;u>=0&&(h*=t.width/100,u<100&&!o.layoutConstraint&&s.css("width",be(h))),f>=0&&(d*=t.height/100,f<100&&!(o.layoutConstraint&&l.hasHeight)&&s.css("height",be(d)))}else switch(s.css("objectFit")){case"contain":g="centerInside";break;case"cover":g="centerCrop";break;case"scale-down":g="fitCenter";break;case"none":g="center"}if(s.android("scaleType",g),h>0&&o.hasPX("maxWidth",false)&&(-1===u||100===u)){const t=o.parseWidth(o.css("maxWidth"));t<=h&&(h=t,s.css("width",be(h)))}else if(d>0&&o.hasPX("maxHeight",false)&&(-1===f||100===f)){const t=o.parseHeight(o.css("maxHeight"));t<=d&&(d=t,s.css("maxHeight",be(d)),s.setLayoutHeight("wrap_content"))}if(s.baseline&&(s.android("baselineAlignBottom","true"),s.marginBottom>0&&o.layoutLinear&&o.layoutHorizontal&&s.mergeGravity("layout_gravity","bottom")),s.hasResource(Ue.IMAGE_SOURCE)){const t=i.resourceHandler.addImageSrc(r,"",p);""!==t&&s.android("src","@drawable/"+t)}if(!s.pageFlow&&o===l&&(s.left<0&&"hidden"===o.css("overflowX")||s.top<0&&"hidden"===o.css("overflowY"))){const a=l.box,r=i.createNode({parent:o,replace:s});r.setControlType(n.FRAME,e.FRAME),r.inherit(s,"base"),r.cssCopy(s,"position","zIndex"),r.exclude({resource:Ue.ALL,procedure:ze.ALL}),r.autoPosition=false,h>0?r.setLayoutWidth(h<a.width?be(h):"match_parent"):r.setLayoutWidth("wrap_content"),d>0?r.setLayoutHeight(d<a.height?be(d):"match_parent"):r.setLayoutHeight("wrap_content"),r.render(c?i.resolveTarget(c):o),r.saveAsInitial(),o.layoutConstraint||(s.modifyBox(2,s.top),s.modifyBox(16,s.left)),i.addLayoutTemplate(o,r,{type:1,node:r,controlName:n.FRAME}),o=r,t.parent=r,c=void 0}break}case"INPUT":{const t=s.element;switch(t.type){case"radio":case"checkbox":t.checked&&s.android("checked","true");break;case"text":s.android("inputType","text");break;case"password":s.android("inputType","textPassword");break;case"number":case"range":s.android("inputType","number"),s.android("progress",t.value),sa(s,t);break;case"time":s.android("inputType","time"),sa(s,t);break;case"date":s.android("inputType","date"),sa(s,t);break;case"datetime-local":s.android("inputType","datetime"),sa(s,t);break;case"email":s.android("inputType","textEmailAddress"),ra(s,t);break;case"tel":s.android("inputType","phone"),ra(s,t);break;case"url":s.android("inputType","textUri"),ra(s,t);break;case"week":case"month":case"search":s.android("inputType","text"),ra(s,t);break;case"image":case"color":0===s.width&&s.css("width",be(s.bounds.width))}break}case"BUTTON":s.naturalChildren.forEach(t=>{t.pageFlow&&t.textElement||t.android("elevation","2px")});break;case"TEXTAREA":{const{cols:t,maxLength:e,placeholder:a,rows:i}=s.element;switch(s.android("minLines",i>0?i.toString():"2"),s.css("verticalAlign")){case"middle":s.mergeGravity("gravity","center_vertical");break;case"bottom":s.mergeGravity("gravity","bottom");break;default:s.mergeGravity("gravity","top")}e>0&&s.android("maxLength",e.toString()),!s.hasPX("width")&&t>0&&s.css("width",be(8*t)),s.android("hint",a),s.android("scrollbars","vertical"),s.android("inputType","textMultiLine"),s.overflowX&&s.android("scrollHorizontally","true");break}case"LEGEND":{s.hasWidth||(s.css("minWidth",be(s.actualWidth)),da(s));const t=s.actualHeight*this.localSettings.deviations.legendBottomOffset;s.modifyBox(8,t),s.linear.bottom+=t;break}case"METER":case"PROGRESS":{const{min:t,max:e,value:a}=s.element;let i,n;"METER"===s.tagName?(({meterForegroundColor:i,meterBackgroundColor:n}=this.localSettings.style),e&&(a&&s.android("progress",Math.round(a/e*100).toString()),100===e&&(s.android("min",t.toString()),s.android("max",e.toString())))):(({progressForegroundColor:i,progressBackgroundColor:n}=this.localSettings.style),a&&s.android("progress",a.toString()),e&&s.android("max",e.toString())),s.hasWidth||s.css("width",be(s.bounds.width)),s.hasHeight||s.css("height",be(s.bounds.height)),s.android("progressTint","@color/"+B.addColor(i)),s.android("progressBackgroundTint","@color/"+B.addColor(n)),s.attr("_","style","@android:style/Widget.ProgressBar.Horizontal"),s.exclude({resource:Ue.BOX_STYLE|Ue.FONT_STYLE});break}case"AUDIO":case"VIDEO":{const a=this.localSettings.mimeType.video,i=s.element;let n,o=i.src;if(Pe(a,o)?n=Me(o):(o="",ke(i.children,t=>{if("SOURCE"===t.tagName){if(Pe(a,t.src))return o=t.src,n=Me(o),true;if(n=t.type.trim().toLowerCase(),a.includes(n))return o=t.src,true}})),s.hasPX("width")||s.css("width",be(s.actualWidth),true),s.hasPX("height")||s.css("height",be(s.actualHeight),true),s.inline&&da(s),Oe(o))this.application.resourceHandler.addVideo(o,n),s.inlineText=false,s.exclude({resource:Ue.FONT_STYLE});else{if(Oe(i.poster)){s.setCacheValue("tagName","IMG"),o=i.src,i.src=i.poster,t.containerType=e.IMAGE;const a=this.renderNode(t);return i.src=o,a}r=e.TEXT,h=de.getControlName(r,s.api),t.containerType=r,s.inlineText=true}}}switch(h){case n.TEXT:{let t="";if(s.overflowX&&(t+="horizontal"),s.overflowY&&(t+=(""!==t?"|":"")+"vertical"),""!==t&&s.android("scrollbars",t),s.has("letterSpacing")&&s.android("letterSpacing",we(s.toFloat("letterSpacing")/s.fontSize,s.localSettings.floatPrecision)),"justify"===s.css("textAlign")&&s.android("justificationMode","inter_word"),s.has("textShadow")){const t=je.exec(s.css("textShadow"));if(t){const e=B.addColor(ye(t[1]||s.css("color")));if(""!==e){const a=s.localSettings.floatPrecision;s.android("shadowColor","@color/"+e),s.android("shadowDx",we(2*s.parseWidth(t[2]),a)),s.android("shadowDy",we(2*s.parseHeight(t[3]),a)),s.android("shadowRadius",we(Oe(t[4])?Math.max(s.parseWidth(t[4]),0):.01,a))}}}"nowrap"===s.css("whiteSpace")&&(s.android("maxLines","1"),"ellipsis"===s.css("textOverflow")&&"hidden"===s.css("overflow")&&s.android("ellipsize","end"));break}case n.BUTTON:s.hasHeight||s.android("minHeight",be(Math.ceil(s.actualHeight))),s.mergeGravity("gravity","center_vertical"),ia(s);break;case n.SELECT:case n.CHECKBOX:case n.RADIO:ia(s);break;case n.EDIT:!s.companion&&s.hasProcedure(ze.ACCESSIBILITY)&&[s.previousSibling,s.nextSibling].some(t=>{if((null==t?void 0:t.visible)&&t.pageFlow){const e=s.element,a=t.element,i="LABEL"===t.documentParent.tagName&&t.documentParent;if(e.id&&e.id===a.htmlFor)return t.android("labelFor",s.documentId),true;if(i&&t.textElement)return i.android("labelFor",s.documentId),true}return false}),(null===(i=s.element.list)||void 0===i?void 0:i.children.length)?h=n.EDIT_LIST:s.api>=26&&s.android("importantForAutofill","no"),ia(s);case n.RANGE:s.hasPX("width")||s.css("width",be(s.bounds.width));break;case n.LINE:s.hasHeight||s.setLayoutHeight(be(s.contentBoxHeight||1))}return s.setControlType(h,r),s.addAlign(t.alignmentType),s.render(c?this.application.resolveTarget(c):o),{type:1,node:s,parent:o,controlName:h}}renderNodeStatic(t,e){const{controlType:a,width:i,height:n,content:o}=t;let r=t.controlName;if(!Oe(r)){if(!a)return"";r=de.getControlName(a,this.userSettings.targetAPI)}const s=new de(0,"0",void 0,this.afterInsertNode);return s.setControlType(r),s.setLayoutWidth(i||"wrap_content"),s.setLayoutHeight(n||"wrap_content"),e&&(s.apply(e),e.documentId=s.documentId),this.getEnclosingXmlTag(r,this.userSettings.showAttributes?s.extractAttributes(1):void 0,o)}renderSpace(t){const{android:e,app:a,column:i,columnSpan:o,row:r,rowSpan:s}=t;let{width:l,height:c}=t;l?Ae(l)&&(e.layout_columnWeight=we(parseFloat(l)/100,this.localSettings.precision.standardFloat),l="0px"):l="wrap_content",c?Ae(c)&&(e.layout_rowWeight=we(parseFloat(c)/100,this.localSettings.precision.standardFloat),c="0px"):c="wrap_content",void 0!==i&&(e.layout_column=i.toString()),o&&(e.layout_columnSpan=o.toString()),void 0!==r&&(e.layout_row=r.toString()),s&&(e.layout_rowSpan=s.toString());const h={android:e,app:a},d=this.renderNodeStatic({controlName:n.SPACE,width:l,height:c},h);return t.documentId=h.documentId,d}addGuideline(t,e,a={}){const{percent:i,opposing:r,orientation:s}=a;let l=t.documentParent;e.nodeGroup&&!l.hasAlign(4)&&(l=e);const c=l.box,h=t.linear,d=(a,d)=>{var u,f;if(t.constraint[a]||s&&a!==s)return;let p,g;if(d?r?(p="right",g="left"):(p="left",g="right"):r?(p="bottom",g="top"):(p="top",g="bottom"),!i&&!r){if(Be(h[p],c[p]))return void t.anchor(p,"parent",true);if(t.autoPosition){const e=t.siblingsLeading,i=e.length;if(i&&!t.alignedVertically()){const n=e[i-1];if(n.pageFlow&&n.renderParent===t.renderParent)return t.anchor(d?"leftRight":"top",n.documentId,true),void(t.constraint[a]=true)}}if(!t.pageFlow&&"fixed"!==t.css("position")&&!e.hasAlign(4)){const i=t.innerMostWrapped.bounds,n=e.renderChildren,o=n.length;let r=0;while(r<o){const e=n[r++];if(e===t||e.plainText||e.pseudoElement||e.originalRoot)continue;const o=e.innerMostWrapped;if(o.pageFlow||e.constraint[a]){const{linear:n,bounds:r}=o;let s,l=NaN;if(Be(i[p],r[p]))s=p;else if(Be(h[p],n[p]))s=p,l=(d?i.left-r.left:i.top-r.top)+ha(t,p);else{if(!Be(h[p],n[g]))continue;if(d){if((t.hasPX("left")||t.hasPX("right"))&&(e.inlineStatic||!e.hasPX("width",false,true)))continue;s="leftRight",l=i.left-r.right}else{if((t.hasPX("top")||t.hasPX("bottom"))&&(e.inlineStatic||!e.hasPX("height",false,true)))continue;s="topBottom",l=i.top-r.bottom}}return d?isNaN(l)||(t.setBox(16,{reset:1,adjustment:0}),0!==l&&t.translateX(l)):isNaN(l)||(t.setBox(2,{reset:1,adjustment:0}),0!==l&&t.translateY(l)),t.anchor(s,e.documentId,true),void(t.constraint[a]=true)}}const s=d?"top":"left";let l,c;const u=(e,i,n)=>{t.anchor(i,e,true),t.setBox(d?16:2,{reset:1,adjustment:n}),t.constraint[a]=true};r=0;while(r<o){const e=n[r++];if(e===t||e.pageFlow||e.originalRoot||!e.constraint[a])continue;const o=e.innerMostWrapped,f=o.bounds;if(Be(i[s],f[s])||Be(h[s],o.linear[s])){const t=i[p]-f[g];if(t>=0)return void u(e.documentId,d?"leftRight":"topBottom",t)}else f[p]<=i[p]&&(f[s]<=i[s]?l=o:c=o)}if(l||(l=c),l){const e=i[p]-l.bounds[p]+ha(t,p);if(e>=0)return void u(l.documentId,p,e)}}}const m=t.absoluteParent,y=t.positionStatic?t.bounds:h;let b="layout_constraintGuide_",T=0;if(!t.leftTopAxis&&l.originalRoot){const e=t.renderParent;l.ascend({condition:t=>t===e,attr:"renderParent"}).length&&(T=d?r?l.marginRight:l.marginLeft:r?l.marginBottom:l.marginTop)}if(i){const e=Math.abs(y[p]-c[p])/(d?c.width:c.height);T+=parseFloat(we(r?1-e:e,t.localSettings.floatPrecision)),b+="percent"}else T+=y[p]-c[r?g:p],b+="begin";if(t.pageFlow){if(t.inlineVertical){const e=Ce(t.verticalAlign);e<0&&(T+=e)}}else if(l.outerWrapper&&t.parent===l.outerMostWrapper)T+=l[r?d?"paddingRight":"paddingBottom":d?"paddingLeft":"paddingTop"];else if(m===t.documentParent){let t;t=d?r?64:256:r?128:32,T=at(l,t,T)}if(!d&&t.marginTop<0&&(T-=t.marginTop,t.setBox(2,{reset:1})),t.constraint[a]=true,T<=0)t.anchor(p,"parent",true);else if(d&&T+y.width>=c.right&&l.hasPX("width")&&!t.hasPX("right")||!d&&T+y.height>=c.bottom&&l.hasPX("height")&&!t.hasPX("bottom"))t.anchor(g,"parent",true);else{const s=e.constraint.guideline||{},l=null===(f=null===(u=s[a])||void 0===u?void 0:u[b])||void 0===f?void 0:f[p];if(l)for(const e in l)if(parseInt(l[e])===T)return t.anchor(p,e,true),void t.anchorDelete(g);const c=it(void 0,{android:{orientation:d?"vertical":"horizontal"},app:{[b]:i?T.toString():"@dimen/"+B.insertStoredAsset("dimens","constraint_guideline_"+(r?g:p),be(T))}});this.addAfterOutsideTemplate(t.id,this.renderNodeStatic({controlName:t.api<29?n.GUIDELINE:o.GUIDELINE},c),false);const h=c.documentId;h&&(t.anchor(p,h,true),t.anchorDelete(g),T>0&&(Re(s,a,b,p,h,T.toString()),e.constraint.guideline=s))}};d("horizontal",true),d("vertical",false)}addBarrier(t,e){const a=[];if(t.forEach(t=>{const i=t.constraint.barrier;if(i){if(i[e])return}else t.constraint.barrier={};a.push(t)}),a.length){const t=it(void 0,{android:{},app:{barrierDirection:e,constraint_referenced_ids:De(a,t=>J(t.anchorTarget.documentId)).join(",")}}),{api:i,anchorTarget:r}=a[a.length-1],s=this.renderNodeStatic({controlName:i<29?n.BARRIER:o.BARRIER},t);switch(e){case"top":case"left":this.addBeforeOutsideTemplate(r.id,s,false);break;default:this.addAfterOutsideTemplate(r.id,s,false)}const l=t.documentId;if(l)return a.forEach(t=>t.constraint.barrier[e]=l),l}return""}evaluateAnchors(t){const e=[],a=[],i=t.length;let n=0;while(n<i){const i=t[n++],{horizontal:o,vertical:r}=i.constraint;if(o&&e.push(i),r&&a.push(i),i.alignParent("top")||i.alignSibling("top")){let e=i;do{const a=e.alignSibling("bottomTop");if(""===a){if(e!==i&&!e.alignParent("bottom"))if(e.blockHeight)e.anchor("bottom","parent");else{const t=e.constraint.barrier,a=t&&Oe(t.bottom)?t.bottom:this.addBarrier([e],"bottom");a&&e.anchor("bottomTop",a)}break}{const i=t.find(t=>t.documentId===a);if((null==i?void 0:i.alignSibling("topBottom"))!==e.documentId)break;if(i.alignParent("bottom"))break;e=i}}while(true)}}n=0;while(n<i){const i=t[n++],o=i.constraint,r=o.current;if(!o.horizontal)for(const t in r){const{documentId:a,horizontal:s}=r[t];if(s&&e.some(t=>t.documentId===a)){o.horizontal=true,e.push(i),n=0;break}}if(!o.vertical)for(const t in r){const{documentId:e,horizontal:s}=r[t];if(!s&&a.some(t=>t.documentId===e)){o.vertical=true,a.push(i),n=0;break}}}}createNodeGroup(t,e,a={}){const{parent:i,delegate:n,cascade:o}=a,r=new ue(this.cache.nextId,t,e,this.afterInsertNode);return i?(i.appendTry(t,r),r.init()):r.containerIndex=t.containerIndex,this.cache.append(r,true===n,true===o),r}createNodeWrapper(t,e,a={}){const{children:i,containerType:n,alignmentType:o,resource:r,procedure:s,section:l}=a,c=this.application.createNode({parent:e,children:i,append:true,replace:t,delegate:true,cascade:true===a.cascade||!!i&&i.length>0&&!t.originalRoot});if(c.inherit(t,"base","alignment"),t.documentRoot&&(c.documentRoot=true,t.documentRoot=false),null===c.actualParent&&e.naturalElement&&(c.actualParent=e),n&&c.setControlType(de.getControlName(n,t.api),n),o&&c.addAlign(o),c.addAlign(16384),c.exclude({resource:void 0===r?Ue.BOX_STYLE|Ue.ASSET:r,procedure:void 0===s?ze.CUSTOMIZATION:s,section:void 0===l?He.ALL:l}),c.saveAsInitial(),c.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),false!==a.inheritContentBox&&(c.setCacheValue("contentBoxWidth",t.contentBoxWidth),c.setCacheValue("contentBoxHeight",t.contentBoxHeight)),a.resetMargin&&t.resetBox(30,c),a.inheritDataset&&t.naturalElement){const e=c.dataset;Object.assign(e,t.dataset),delete e.use}if(t.renderParent&&t.removeTry()&&(t.rendered=false),t.documentParent.layoutElement){const e=t.namespace("android");for(const t in e)t.startsWith("layout_")&&(c.android(t,e[t]),delete e[t])}return c}processRelativeHorizontal(t,a){const i=[];let o,r=false,s=false;if(t.hasAlign(16)){let t;a.forEach(e=>{t?e.anchor("topBottom",t.documentId):e.anchor("top","true"),e.pageFlow?(i.push([e]),t=e):r=true})}else{const e=t.nodeGroup?t.documentParent:t,n=e.actualBoxWidth((()=>{const i=t.renderParent;if(i.overflowY)return i.box.width;{const e=t.actualParent;if(e){if(t.naturalElement&&t.inlineStatic&&e.blockStatic&&e===i){const{left:a,width:i}=e.box;return i-(t.linear.left-a)}if(e.floatContainer){const{containerType:i,alignmentType:n}=this.containerTypeVerticalMargin;if(t.ascend({condition:t=>t.of(i,n),including:e,attr:"renderParent"}).length){const{left:i,right:n,width:o}=t.box;let r=0,s=0;return e.naturalChildren.forEach(e=>{const o=e.linear;e.floating&&!a.includes(e)&&t.intersectY(o)&&("left"===e.float?Math.floor(o.right)>i&&(r=Math.max(r,o.right-i)):n>Math.ceil(o.left)&&(s=Math.max(s,n-o.left)))}),o-r-s}}}}return e.box.width})()),s=this.application.clearMap,l="nowrap"!==t.css("whiteSpace");let c,h=0,d=false,u=0;if(t.naturalElement)t.blockDimension&&(u=t.parseUnit(t.css("textIndent")));else{const e=t.actualParent;if((null==e?void 0:e.blockDimension)&&e.has("textIndent")){const t=a[0];if(!t.rightAligned){const a=e.css("textIndent");u=e.parseUnit(a),0!==u&&(u<0&&e.setCacheValue("paddingLeft",Math.max(0,e.paddingLeft+u)),t.setCacheValue("blockDimension",true),t.css("textIndent",a),e.css("textIndent","0px"))}}}ua(a).forEach((e,a)=>{const f=e.length;if(0===f)return;const p=1===a;let g,m,y,b,T=true;p?((!t.naturalElement&&e[0].actualParent||t).cssInitialAny("textAlign","right","end")?(g="right",T=false,e[f-1].anchor(g,"true")):g="left",e.some(t=>t.floating)&&Ke(e),m=i):(g="right",o=[],m=o);for(let a=0;a<f;++a){const i=e[a];let o;if(p&&T?(o="leftRight",0===a&&i.inline&&Math.abs(u)>=i.actualWidth&&"right"!==i.float&&!i.positionRelative&&(d=true,i.floating||(i.setCacheValue("float","left"),i.setCacheValue("floating",true)))):o="rightLeft",!i.pageFlow){if(y){const t=y.documentId;i.anchor(o,t),i.anchor("top",t)}else i.anchor(g,"true"),i.anchor("top","true");r=true;continue}let E,S=i.bounds;if(i.styleText&&!i.hasPX("width")){const t=i.textBounds;t&&(t.numberOfLines>1||Math.ceil(t.width)<i.box.width)&&(S=t)}let A=i.multiline;A&&Math.floor(S.width)<=n&&!i.hasPX("width")&&!pa(i)&&(A=false,i.multiline=false);let v=true===i.autoMargin.horizontal;if(v&&(i.autoMargin.leftRight?i.anchorParent("horizontal"):i.anchor(i.autoMargin.left?"right":"left","true")),y){let e=0,r=0,p=false;const x=()=>{if(y.floating&&y.alignParent(y.float)&&(A||Math.floor(h+i.actualWidth)<n))return true;if(t.floating&&a===f-1&&i.textElement&&!/[\s-]/.test(i.textContent.trim())){const e=t.css("width");return Se(e)&&t.parseWidth(e)>t.parseWidth(t.css("minWidth"))&&t.cssApply({width:"auto",minWidth:e}),t.android("maxLines","1"),true}return false},w=()=>(r=h+i.marginLeft,c&&!b.includes(c)&&(r+=c.linear.width),c&&i.plainText&&!A&&b.includes(c)&&!s.has(i)||(r+=S.width),i.marginRight<0&&(r+=i.marginRight),e=n,u<0?m.length<=1&&(e+=u):u>0&&1===m.length&&(e-=u),i.styleElement&&i.inlineStatic&&(r-=i.contentBoxWidth),e=Math.ceil(e),true),_=()=>{var t;if(y.textElement){if(1===a&&i.plainText&&i.previousSibling===y&&!_e.TRAILINGSPACE.test(y.textContent)&&!_e.LEADINGSPACE.test(i.textContent))return p=true,false;if(l&&y.multiline&&(y.bounds.width>=n||i.plainText&&B.hasLineBreak(y,false,true)))return true}if(x())return false;if(l){if(w()&&Math.floor(r)>e)return true;if("CODE"!==(null===(t=i.actualParent)||void 0===t?void 0:t.tagName))return A&&i.plainText||pa(i)}return false},N=i.textElement&&_();y.floating&&ta(i,y)&&(o=""),E=i.inlineVertical&&y.inlineVertical&&i.previousSibling!==y?ve(y.element,i.element):void 0;const I=s.has(i);N||i.nodeGroup&&!i.hasAlign(128)||Math.ceil(i.bounds.top)>=y.bounds.bottom&&(i.blockStatic||i.floating&&y.float===i.float)||!i.textElement&&!x()&&w()&&Math.floor(r)>e||!i.floating&&(y.blockStatic||i.previousSiblings().some(t=>t.excluded&&t.blockStatic)||(null==E?void 0:E.some(t=>aa(t))))||I||y.autoMargin.horizontal||B.checkPreIndent(y)?(I&&!c&&i.setBox(2,{reset:1}),T?(c&&(i.bounds.bottom<=c.bounds.bottom||d)?v||i.anchor(o,c.documentId):(v||i.anchor(g,"true"),c=void 0),v=true):(c&&i.linear.bottom>c.bounds.bottom&&(c=void 0),y.anchor(g,"true")),h=Math.min(0,N&&!y.multiline&&A&&!I?i.linear.right-t.box.right:0),b=[i],m.push(b)):(""!==o&&(T?v||(i.anchor(o,y.documentId),v=true):y.anchor(o,i.documentId)),!A||i.hasPX("width")||y.floating||p||(i.multiline=false),b.push(i))}else T&&(v||i.anchor(g,"true")),b=[i],m.push(b);if("left"===i.float&&p&&(c?i.linear.bottom>c.linear.bottom&&(c=i):c=i),false===(null==E?void 0:E.some(t=>!!Ne(t,i.sessionId)||aa(t)))){const t=xe(E[0]);if(!t.numberOfLines){const e=E.length>1&&xe(E.pop());e&&e.numberOfLines||(h+=e?t.left-e.right:t.width)}}h+=i.marginLeft+S.width+i.marginRight,y=i}}),u<0&&1===i.length&&t.setCacheValue("paddingLeft",Math.max(0,t.paddingLeft+u))}(i.length>1||o&&o.length>1)&&(s=true);const l=i=>{let o=null;const r=i.length,l=1===r&&!t.hasHeight;for(let c=0;c<r;++c){const h=i[c];let d;const u=h.length;if(u>1){const i=ea(h);let f=i[0];d=Ye.baseline(i.length?h.filter(t=>!i.includes(t)):h),d&&f&&(d!==f&&d.bounds.height<f.bounds.height?d.anchor("bottom",f.documentId):(d=Ye.baseline(h),f=void 0));const p=[];let g=0===c?"true":null==d?void 0:d.documentId,m=0,y=null,b=0;while(b<u){const e=h[b++];if(e===d||e===f)continue;const a=e.inlineVertical?e.css("verticalAlign"):"";if(e.controlElement){let a=e.bounds.top;o?a-=o.linear.bottom:(e.anchor("top","true"),a-=t.box.top),e.setBox(2,{reset:1,adjustment:a}),e.baselineAltered=true;continue}let i=false;if(e.baseline)!e.naturalElements.length||!Se(e.verticalAlign)&&e.baselineElement?p.push(e):i=true;else switch(a){case"text-top":null===y&&(y=Ye.baseline(h,true)),y&&e!==y&&e.anchor("top",y.documentId);break;case"super":e.baselineAltered||e.modifyBox(2,-1*Math.floor(e.baselineHeight*this.localSettings.deviations.superscriptTopOffset));case"top":g&&g!==e.documentId?e.anchor("top",g):d&&e.anchor("top",d.documentId);break;case"middle":{const t=Math.max(e.actualHeight,e.lineHeight);if(s){if(d){const a=Math.max(d.actualHeight,d.lineHeight);t<a?(e.anchor("top",d.documentId),e.setBox(2,{reset:1,adjustment:Math.round((a-t)/2)}),e.baselineAltered=true):t>m&&(m=t)}}else e.anchor("centerVertical","true"),e.imageElement&&(m=Math.max(t,m));break}case"text-bottom":null===y&&(y=Ye.baseline(h,true)),y!==e&&y?e.anchor("bottom",y.documentId):d&&e.anchor("bottom",d.documentId);break;case"sub":e.baselineAltered||e.modifyBox(8,-1*Math.ceil(e.baselineHeight*this.localSettings.deviations.subscriptBottomOffset));case"bottom":g&&!Be(t.bounds.height,e.bounds.height)&&(t.hasHeight||"true"!==g||(s?d&&(g=d.documentId):t.css("height",be(t.bounds.height))),e.anchor("bottom",g));break;default:i=!e.baselineAltered}0===c&&i&&e.anchor("top","true")}const T=p.length;if(d){if(d.baselineActive=true,T)Qe(d,p,l,t.box.top),l&&d.is(e.BUTTON)&&(d.anchor("centerVertical","true"),d=null);else if(d.textElement)if(m>Math.max(d.actualHeight,d.lineHeight))d.anchor("centerVertical","true"),d=null;else if(d.multiline){const{left:t,height:e}=d.bounds;let a=0;while(a<u){const i=h[a++];if(i===d)break;if(t<i.bounds.right&&e<i.bounds.height){d.anchor("bottom",i.documentId);break}}}}else if(T>0&&T<u&&(f=ea(h)[0],f)){let t=0;while(t<T){const e=p[t++];e.baseline&&!e.multiline&&f.bounds.height>e.bounds.height&&e.anchor("bottom",f.documentId)}}let E=true,S=u-1;while(S>=0){const t=h[S--];t.textElement&&(t.setSingleLine(E&&!t.rightAligned&&!t.centerAligned),E=false)}if("center"===t.cssInitial("textAlign")&&r>1){const i=this.application,r=this.createNodeGroup(h[0],h,{parent:t});r.setControlType(n.RELATIVE,e.RELATIVE),r.render(t),r.anchorParent("horizontal"),r.setLayoutWidth("wrap_content"),r.setLayoutHeight("wrap_content");let s=-1;h.forEach(t=>{const e=a.indexOf(t);-1!==e&&(s=-1===s?e:Math.min(e,s)),t.removeTry(),t.render(r),i.addLayoutTemplate(r,t,{type:1,node:t,controlName:t.controlName})}),i.addLayoutTemplate(t,r,{type:1,node:r,controlName:r.controlName},s),o?r.anchor("topBottom",o.documentId):o=r;continue}}else d=h[0],d.centerAligned&&(d.anchorParent("horizontal"),d.anchorDelete("left","right"));let f=false;null===d&&(d=h[0],f=true);let p=0;while(p<u){const t=h[p++];o&&!t.alignSibling("baseline")&&t.anchor("topBottom",o.documentId),f&&t.linear.bottom>=d.linear.bottom&&(d=t)}o=d}};if(l(i),o&&l(o),t.horizontalRows=o?i.concat(o):i,r){const e=t.renderChildren,a=t.renderTemplates,i=[];for(let t=0;t<e.length;++t)e[t].pageFlow||(i.push(a[t]),e.splice(t,1),a.splice(t--,1));i.forEach(t=>{e.push(t.node),a.push(t)})}}processConstraintHorizontal(t,e){const a=t.hasAlign(2048),{anchorStart:i,anchorEnd:n,chainStart:o,chainEnd:r}=ba(a);let s,l,c,h=0,d=true,u=null,f=0;const p=e=>{e.anchorParent("vertical",0),e.setBox(2,{reset:1,adjustment:Math.max(e.bounds.top-t.box.top,Math.min(-1*Ce(e.verticalAlign),0))}),e.baselineAltered=true,d=false};if(!a)switch(t.cssAscend("textAlign",true)){case"center":h=.5;break;case"right":case"end":h=1}if(e.some(t=>t.floating)){if(!a)switch(h){case.5:{let a;[a,e]=We(e,t=>t.floating||true===t.autoMargin.horizontal),a.length&&this.processConstraintChain(t,a);break}case 1:{let a;[a,e]=function(t){return We(t,t=>"left"===t.float||true===t.autoMargin.right)}(e),a.length&&this.processConstraintChain(t,a);break}default:{let a;[a,e]=ua(e),a.length&&this.processConstraintChain(t,a);break}}Ke(e)}!t.hasPX("width")&&e.some(t=>t.percentWidth>0)&&t.setLayoutWidth("match_parent");const g=Ye.baseline(e),m=ea(e)[0],y=null==g?void 0:g.documentId;let b=de.availablePercent(e,"width",t.box.width);const T=e.length;for(let t=0;t<T;++t){const a=e[t];if(c?a.pageFlow?(c.anchor(r,a.documentId),a.anchor(o,c.documentId),t===T-1&&a.anchor(n,"parent")):a.autoPosition&&a.anchor(o,c.documentId):1===T?(h=a.centerAligned?.5:a.rightAligned?1:0,a.blockStatic||.5===h?a.anchorParent("horizontal",h):(a.anchor(i,"parent"),a.anchorStyle("horizontal",0))):(a.anchor(i,"parent"),a.anchorStyle("horizontal",h,"packed")),a.pageFlow){if(a!==g){if(a.controlElement)p(a);else if(a.inlineVertical)switch((!s||ga(a)>ga(s))&&(s=a),a.css("verticalAlign")){case"text-top":null===u&&(u=Ye.baseline(e,true)),u&&a!==u?a.anchor("top",u.documentId):p(a);break;case"middle":false===(null==g?void 0:g.textElement)||m?p(a):a.anchorParent("vertical",.5);break;case"text-bottom":if(null===u&&(u=Ye.baseline(e,true)),u&&a!==u){a!==m?a.anchor("bottom",u.documentId):m&&p(a);break}case"bottom":l||e.forEach(t=>{t.baseline||l&&!(t.linear.bottom>l.linear.bottom)||(l=t)}),a===l?p(a):a.anchor("bottom","parent");break;case"baseline":null===g||a.blockVertical||!a.textElement&&ga(a)>ga(g)?p(a):(a.anchor("baseline",y||"parent"),f++);break;default:p(a)}else a.plainText?(a.anchor("baseline",y||"parent"),f++):p(a);a.anchored=true}b=de.setConstraintDimension(a,b),c=a}else a.autoPosition&&(y?a.anchor("top",y):(a.anchorParent("vertical",0),a.anchored=true,d=false))}if(g){if(s&&s!==g&&g.textElement&&ga(s)>ga(g))switch(s.verticalAlign){case"middle":g.anchorParent("vertical",.5,"",true);break;case"baseline":g.anchor("baseline",s.documentId);break;case"bottom":case"text-bottom":g.anchor("bottom",s.documentId);break;default:p(g)}else d&&g.baselineElement&&!g.imageOrSvgElement&&t.ascend({condition:t=>t.layoutHorizontal,error:t=>t.naturalChild&&t.layoutVertical||t.layoutGrid,attr:"renderParent"}).length?(g.anchorParent("vertical"),g.anchor("baseline","parent")):p(g);g.baselineActive=f>0,g.anchored=true}}processConstraintChain(t,e){const a=this.application.clearMap,i=t.hasAlign(512),n=e[0].actualParent||t,o=Ye.partitionRows(e,a),r=o.length;!t.hasWidth&&e.some(t=>t.percentWidth>0)&&t.setLayoutWidth("match_parent",false);let s,l=[];for(let e=0;e<r;++e){const c=o[e],[h,d]=We(c,t=>"right"===t.float||true===t.autoMargin.left);let u,f,p,g=false;const m=(o,h)=>{const d=o.length;if(0===d)return;const{anchorStart:m,anchorEnd:y,chainStart:b,chainEnd:T}=ba(h),E=o[0],S=o[d-1];d>1?(E.anchor(m,"parent"),h?S.anchorStyle("horizontal",1,"packed"):E.anchorStyle("horizontal",i||"center"!==n.css("textAlign")?0:.5,"packed"),S.anchor(y,"parent")):Ea(E);let A=de.availablePercent(c,"width",t.box.width);g=!((1!==e||E.floating||true!==(null==s?void 0:s.every(t=>t.floating))||0!==a.size&&c.some(t=>la(t,a)))&&(E.pageFlow||E.autoPosition&&1!==d)),p=void 0;for(let t=0;t<d;++t){const c=o[t];if(0===e||g?1===r?(c.anchorParent("vertical"),Sa(c,1===d,true)):(c.anchor("top","parent"),c.anchorStyle("vertical",0,"packed")):e!==r-1||f||c.anchor("bottom","parent"),c.autoMargin.leftRight)c.anchorParent("horizontal");else if(d>1){const e=o[t-1],a=o[t+1];if(e)if(!e.pageFlow&&e.autoPosition){let e,a=t-2;while(a>=0){if(e=o[a--],e.pageFlow)break;e=void 0}e?c.anchor(b,e.documentId):c.anchor(m,"parent")}else c.anchor(b,e.documentId);a&&c.anchor(T,a.documentId)}if(A=de.setConstraintDimension(c,A),s&&0===t&&(a.has(c)&&!c.floating&&c.modifyBox(2,-s[s.length-1].bounds.height,false),i)){let t=false;for(const e of l)if(c.bounds.top<Math.floor(e.bounds.bottom)){t=true;break}if(t){u=s[s.length-1];let t=l.length-2;while(t>=0){const e=l[t--];if(e.linear.bottom>u.linear.bottom){if(h&&Math.ceil(e.linear[y])-Math.floor(n.box[y])<c.linear.width)continue;c.anchorDelete(m),c.anchor(b,e.documentId,true),h?c.modifyBox(4,e.marginLeft):c.modifyBox(16,e.marginRight),E.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),E.anchorDelete(T),S.anchorDelete(y),f||(f=c);break}}}}(!p||c.linear.height>p.linear.height)&&(p=c)}};if(m(d,false),m(h,true),i&&(l=l.concat(d,h)),!g){if(s){const t=c[0],e=s.length,a=c.length;if(1===e&&1===a){const e=s[0];e.anchor("bottomTop",t.documentId),t.anchor("topBottom",e.documentId),t.app("layout_constraintVertical_bias","0")}else{if(!u||!f){u=s[0];let t=1;while(t<e){const e=s[t++];e.linear.bottom>u.linear.bottom&&(u=e)}}if(!f){f=c[0];let t=f.linear.top,e=1;while(e<a){const a=c[e++],i=a.linear.top;(i<t||i===t&&a.linear.height>f.linear.height)&&(f=a,t=i)}}const t=f.documentId;u.anchor("bottomTop",t),f.anchor("topBottom",u.documentId),Sa(f,1===e,true);const i=f.marginTop;c.forEach(e=>{e!==f&&(Sa(e,1===a),e.anchor("top",t),e.modifyBox(2,-1*i))})}}s=c}}t.horizontalRows=o}createLayoutGroup(t){return this.createNodeGroup(t.node,t.children,{parent:t.parent})}get containerTypeHorizontal(){return{containerType:e.RELATIVE,alignmentType:8}}get containerTypeVertical(){return{containerType:e.CONSTRAINT,alignmentType:16}}get containerTypeVerticalMargin(){return{containerType:e.FRAME,alignmentType:256}}get containerTypePercent(){return{containerType:e.CONSTRAINT,alignmentType:32768}}get afterInsertNode(){return t=>{this.userSettings.exclusionsDisabled||t.setExclusions(),t.localSettings=this._defaultViewSettings,t.api=this._targetAPI}}get userSettings(){return this.application.userSettings}get screenDimension(){return this._screenDimension}}class va extends squared.base.ExtensionManager{}var xa={resources:{">":{color:{"@":["name"],"~":true}}}},wa={resources:{">":{dimen:{"@":["name"],"~":true}}}},_a={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},Na={resources:{">":{string:{"@":["name"],"~":true}}}},Ia={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":true}}}}}},Ra={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":true}}}}}};const Ca=squared.lib,{fromLastIndexOf:La,objectMap:Pa,parseMimeType:Oa,trimEnd:ka}=Ca.util,{applyTemplate:Da,replaceTab:Ma}=Ca.xml,Wa=B.ASSETS,Ba=B.STORED,Xa=/^(.+)\/(.+?\.\w+)$/,Ga=/"(-?[\d.]+)px"/g,Ha=/>(-?[\d.]+)px</g;function Va(t,e){const a=e.length;if(a){const i=new Array(a/3);for(let n=0,o=0;n<a;n+=3)i[o++]={pathname:t+e[n+1],filename:e[n+2],content:e[n]};return i}return e}function Fa(t,e,a,i){const n=e.length;if(n){a=a.toLowerCase();let o=Oa(a);o.startsWith("image/")||(o=""),/^[a-z\d]/.test(a)||(a="@"+a);const r=new Array(n/3);for(let s=0,l=0;s<n;s+=3){const n=e[s+2].split("?")[0].trim().toLowerCase();let c;if(""!==o){const t=Oa(n);t.startsWith("image/")&&t!==o&&(c=a+":"+t)}r[l++]={pathname:t+e[s+1],filename:n,mimeType:c,compress:i&&B.canCompressImage(n)?[{format:"png"}]:void 0,uri:e[s]}}return r}return e}function za(t,e){const a=e.length;if(a){const i=new Array(a/3);for(let n=0,o=0;n<a;n+=3)i[o++]={pathname:t,filename:e[n+2].toLowerCase(),mimeType:e[n+1],uri:e[n]};return i}return e}function Ua(t){return(t=t.trim()).endsWith("\\")?ka(t,"\\")+"/":t.endsWith("/")?t:t+"/"}const qa=(t,e,a)=>({pathname:t,filename:e,content:a}),Ya=(t,e)=>"dp"===e?t.replace(Ga,(t,...e)=>'"'+Z(e[0],false)+'"'):t,ja=(t,e)=>t.toString().toLowerCase()>=e.toString().toLowerCase()?1:-1;class Ka extends squared.base.FileUI{copyToDisk(t,e){this.copying(Object.assign(Object.assign({},e),{assets:this.getAssetsAll(null==e?void 0:e.assets),directory:t}))}appendToArchive(t,e){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},e),{assets:this.getAssetsAll(null==e?void 0:e.assets),appendTo:t}))}saveToArchive(t,e){this.archiving(Object.assign(Object.assign({},e),{assets:this.getAssetsAll(null==e?void 0:e.assets),filename:t}))}resourceAllToXml(t={}){const{directory:e,filename:a}=t,i={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),anim:this.resourceAnimToXml(),drawableImage:this.resourceDrawableImageToString(),rawVideo:this.resourceRawVideoToString(),rawAudio:this.resourceRawAudioToString()};for(const t in i)0===i[t].length&&delete i[t];if(e||a){const n=this.userSettings,o=Ua(n.outputDirectory);let r=[];for(const t in i)switch(t){case"drawableImage":r=r.concat(Fa(o,i[t],n.convertImages,n.compressImages));break;case"rawVideo":r=r.concat(za(o+this.directory.video,i[t]));break;case"rawAudio":r=r.concat(za(o+this.directory.audio,i[t]));break;default:r=r.concat(Va(o,i[t]))}t.assets=r.concat(t.assets||[]),e&&this.copying(t),a&&this.archiving(t)}return i}resourceStringToXml(t={}){const e={string:[]},a=e.string;Ba.strings.has("app_name")||a.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[t,e]of Array.from(Ba.strings.entries()).sort(ja))a.push({name:t,innerText:e});return this.checkFileAssets([Ma(Da("resources",Na,[e]),this.userSettings.insertSpaces,true),this.directory.string,"strings.xml"],t)}resourceStringArrayToXml(t={}){if(Ba.arrays.size){const e={"string-array":[]},a=e["string-array"];for(const[t,e]of Array.from(Ba.arrays.entries()).sort())a.push({name:t,item:Pa(e,t=>({innerText:t}))});return this.checkFileAssets([Ma(Da("resources",Ia,[e]),this.userSettings.insertSpaces,true),this.directory.string,"string_arrays.xml"],t)}return[]}resourceFontToXml(t={}){var e;if(Ba.fonts.size){const a=this.resource,{insertSpaces:i,targetAPI:n}=this.userSettings,o=n<26?h.app:h.android,r=Ua(this.userSettings.outputDirectory),s=this.directory.font,l=[];for(const[t,c]of Array.from(Ba.fonts.entries()).sort()){const h={"xmlns:android":o,font:[]},d=h.font;for(const i in c){const[n,o,l]=i.split("|");let h=t;"normal"===o?h+="400"===l?"_normal":"_"+c[i]:(h+="_"+o,"400"!==l&&(h+="_"+c[i])),d.push({font:"@font/"+h,fontStyle:o,fontWeight:l});const u=null===(e=a.getFont(n,o,l))||void 0===e?void 0:e.srcUrl;u&&this.addAsset({pathname:r+s,filename:h+"."+La(u.split("?")[0],".").toLowerCase(),uri:u})}let u=Ma(Da("font-family",_a,[h]),i);n<26&&(u=u.replace(/\s+android:/g," app:")),l.push(u,s,t+".xml")}return this.checkFileAssets(l,t)}return[]}resourceColorToXml(t={}){if(Ba.colors.size){const e={color:[]},a=e.color;for(const[t,e]of Array.from(Ba.colors.entries()).sort())a.push({name:e,innerText:t});return this.checkFileAssets([Ma(Da("resources",xa,[e]),this.userSettings.insertSpaces),this.directory.string,"colors.xml"],t)}return[]}resourceStyleToXml(t={}){const e=[];if(Ba.styles.size){const t={style:[]},a=t.style;Array.from(Ba.styles.values()).sort((t,e)=>t.name.toString().toLowerCase()>=e.name.toString().toLowerCase()?1:-1).forEach(t=>{const e=t.items;Array.isArray(e)&&a.push({name:t.name,parent:t.parent,item:Pa(e.sort((t,e)=>t.key>=e.key?1:-1),t=>({name:t.key,innerText:t.value}))})}),e.push(Ma(Da("resources",Ra,[t]),this.userSettings.insertSpaces),this.directory.string,"styles.xml")}if(Ba.themes.size){const{convertPixels:t,insertSpaces:i,manifestThemeName:n}=this.userSettings,o={};for(const[r,s]of Ba.themes.entries()){const l=Xa.exec(r);if(l){const c={style:[]},h=c.style;for(const[t,e]of s.entries()){const a=[],i=e.items;for(const t in i)a.push({name:t,innerText:i[t]});o[r]&&t===n&&!c.length||h.push({name:t,parent:e.parent,item:a}),t===n&&(o[r]=true)}e.push(Ma((a=Da("resources",Ra,[c]),"dp"===t?a.replace(Ha,(t,...e)=>">"+Z(e[0],false)+"<"):a),i),l[1],l[2])}}}var a;return this.checkFileAssets(e,t)}resourceDimenToXml(t={}){if(Ba.dimens.size){const e=this.userSettings.convertPixels,a={dimen:[]},i=a.dimen;for(const[t,a]of Array.from(Ba.dimens.entries()).sort())i.push({name:t,innerText:e?Z(a,false):a});return this.checkFileAssets([Ma(Da("resources",wa,[a])),this.directory.string,"dimens.xml"],t)}return[]}resourceDrawableToXml(t={}){if(Ba.drawables.size){const{convertPixels:e,insertSpaces:a}=this.userSettings,i=this.directory.image,n=[];for(const[t,o]of Ba.drawables.entries())n.push(Ma(Ya(o,e),a),i,t+".xml");return this.checkFileAssets(n,t)}return[]}resourceAnimToXml(t={}){if(Ba.animators.size){const e=this.userSettings.insertSpaces,a=[];for(const[t,i]of Ba.animators.entries())a.push(Ma(i,e),"res/anim",t+".xml");return this.checkFileAssets(a,t)}return[]}resourceDrawableImageToString(t={}){if(Ba.images.size){const{directory:e,filename:a}=t,i=this.directory.image,n=[];for(const[t,e]of Ba.images.entries())if(Object.keys(e).length>1)for(const a in e){const o=e[a];n.push(o,`${i}-${a}`,t+"."+La(o,".").toLowerCase())}else{const a=e.mdpi;a&&n.push(a,i,t+"."+La(a,".").toLowerCase())}if(e||a){const{outputDirectory:i,convertImages:o,compressImages:r}=this.userSettings;t.assets=Fa(Ua(i),n,o,r).concat(t.assets||[]),e&&this.copying(t),a&&this.archiving(t)}return n}return[]}resourceRawVideoToString(t={}){if(Wa.video.size){const{directory:e,filename:a}=t,i=this.directory.video,n=[];for(const t of Wa.video.values()){const e=t.uri;n.push(e,t.mimeType||"",La(e,"/","\\"))}return(e||a)&&(t.assets=za(Ua(this.userSettings.outputDirectory)+i,n).concat(t.assets||[]),e&&this.copying(t),a&&this.archiving(t)),n}return[]}resourceRawAudioToString(t={}){if(Wa.video.size){const{directory:e,filename:a}=t,i=this.directory.audio,n=[];for(const t of Wa.audio.values()){const e=t.uri;n.push(e,t.mimeType||"",La(e,"/","\\"))}return(e||a)&&(t.assets=za(Ua(this.userSettings.outputDirectory)+i,n).concat(t.assets||[]),e&&this.copying(t),a&&this.archiving(t)),n}return[]}layoutAllToXml(t,e={}){const{directory:a,filename:i}=e,n=a||i,o={},r=[],s=t.length;for(let e=0;e<s;++e){const{content:a,filename:i,pathname:s}=t[e];o[i]=[a],n&&r.push(qa(s,0===e?this.userSettings.outputMainFileName:i+".xml",a))}return n&&(e.assets=e.assets?r.concat(e.assets):r,a&&this.copying(e),i&&this.archiving(e)),o}getAssetsAll(t){const e=this.userSettings;let a=[];if(t){const i=t.length;let n=true,o=0;while(o<i){const a=t[o++];if(!a.uri)if(n)a.filename=e.outputMainFileName,n=false;else{const t=a.filename;t.endsWith(".xml")||(a.filename=t+".xml")}}a=a.concat(t)}const i=Ua(e.outputDirectory);return a.concat(Va(i,this.resourceStringToXml()),Va(i,this.resourceStringArrayToXml()),Va(i,this.resourceFontToXml()),Va(i,this.resourceColorToXml()),Va(i,this.resourceDimenToXml()),Va(i,this.resourceStyleToXml()),Va(i,this.resourceDrawableToXml()),Fa(i,this.resourceDrawableImageToString(),e.convertImages,e.compressImages),Va(i,this.resourceAnimToXml()),za(i+this.directory.video,this.resourceRawVideoToString()),za(i+this.directory.audio,this.resourceRawAudioToString()))}checkFileAssets(t,e){const{directory:a,filename:i}=e;return(a||i)&&(e.assets=Va(Ua(this.userSettings.outputDirectory),t).concat(e.assets||[]),a&&this.copying(e),i&&this.archiving(e)),t}get userSettings(){return this.resource.userSettings}}const{NODE_PROCEDURE:$a,NODE_RESOURCE:Za}=squared.base.lib.enumeration;class Ja extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=true,this.options={displayLabel:false}}beforeBaseLayout(){this.cacheProcessing.each(t=>{if(t.inputElement&&t.hasProcedure($a.ACCESSIBILITY)){const e=t.attributes["aria-describedby"];if(e){const a=this.cacheProcessing.find(t=>t.elementId===e);if(a){const e=a.textContent.trim();""!==e&&t.data(B.KEY_NAME,"titleString",e)}}switch(t.containerName){case"INPUT_RADIO":case"INPUT_CHECKBOX":{const e=t.elementId;[t.nextSibling,t.previousSibling].some(a=>{if((null==a?void 0:a.pageFlow)&&!a.visibleStyle.backgroundImage&&a.visible){let i=false;if(e&&e===a.toElementString("htmlFor"))i=true;else if(a.textElement){const e=a.actualParent;"LABEL"===e.tagName?(e.renderAs=t,i=true):a.plainText&&(i=true)}if(i)return a.labelFor=t,this.options.displayLabel||a.hide(),true}return false});break}case"INPUT_IMAGE":t.hasResource(Za.IMAGE_SOURCE)&&t.data(B.KEY_NAME,"embedded",[t]);break;case"BUTTON":if(t.length){const e=t.extract(t=>!t.textElement);e.length&&t.hasResource(Za.IMAGE_SOURCE)&&t.data(B.KEY_NAME,"embedded",e),t.clear()}}}})}}const Qa=squared.lib,ti=squared.base.lib,{formatPX:ei}=Qa.css,{createElement:ai}=Qa.dom,{maxArray:ii,truncate:ni}=Qa.math,{safeNestedArray:oi}=Qa.util,{APP_SECTION:ri,BOX_STANDARD:si,NODE_ALIGNMENT:li,NODE_PROCEDURE:ci,NODE_RESOURCE:hi,NODE_TEMPLATE:di}=ti.enumeration,ui=ti.constant.EXT_NAME.COLUMN;class fi extends squared.base.extensions.Column{processNode(t,a){return super.processNode(t,a),t.containerType=e.CONSTRAINT,t.addAlign(4),{complete:true,subscribe:true}}postBaseLayout(t){const a=t.data(ui,"mainData");if(a){const i=this.application,{columnCount:o,columnGap:r,columnWidth:s,columnRule:l,columnSized:c,boxWidth:h,rows:d,multiline:u}=a,{borderLeftWidth:f,borderLeftColor:p,borderLeftStyle:g}=l,m=t.parseUnit(f),y="none"!==g&&m>0,b=()=>{const a=i.createNode({parent:t,append:true});let o;return a.inherit(t,"base"),a.containerName=t.containerName+"_COLUMNRULE",a.setControlType(n.LINE,e.LINE),a.exclude({resource:hi.ASSET,procedure:ci.ALL}),y?(o=ei(m),a.cssApply({width:o,paddingLeft:o,borderLeftStyle:g,borderLeftWidth:f,borderLeftColor:p,lineHeight:"initial",boxSizing:"border-box",display:"inline-block"})):(o=ei(r),a.cssApply({width:o,lineHeight:"initial",display:"inline-block"})),a.saveAsInitial(),a.setLayoutWidth(o),a.setLayoutHeight("0px"),a.render(t),a.positioned=true,a.renderExclude=false,i.addLayoutTemplate(t,a,{type:1,node:a,controlName:a.controlName}),a};let T;const E=d.length;for(let e=0;e<E;++e){const a=d[e],i=a.length;if(1===i){const t=a[0];0===e?(t.anchor("top","parent"),t.anchorStyle("vertical",0,"packed")):(T.anchor("bottomTop",t.documentId),t.anchor("topBottom",T.documentId)),e===E-1?t.anchor("bottom","parent"):T=a[0],t.anchorParent("horizontal",t.rightAligned?1:t.centerAligned?.5:0),t.anchored=true,t.positioned=true}else{const n=[];let l=Math.min(i,c,o||Number.POSITIVE_INFINITY),d=0;if(l>1){const t=Math.floor(a.reduce((t,e)=>t+e.bounds.height,0)/l);let e=i>=l?Math.ceil(i/l):1,s=u||e>1&&(i%e!=0||!isNaN(o)&&e*o%i>1),c=s&&i%l!=0?i-l:Number.POSITIVE_INFINITY,f=0;for(let o=0,r=0,h=0;o<i;++o,++h){const d=a[o],u=h%e==0;r<l-1&&(u||c<=0||o>0&&(a[o-1].bounds.height>=t||n[r].length&&o<i-2&&i-o+1==l-r&&a[o-1].bounds.height>a[o+1].bounds.height))&&(o>0&&(++r,u?c--:c++),h=0,!u&&c>0&&(s=true));const p=oi(n,r);p.push(d),d.length&&(f+=ii(d.map(t=>t.marginLeft+t.marginRight))),o>0&&/^H\d/.test(d.tagName)?1===p.length&&o===i-2?(l--,c=0):(h+1)%e==0&&i-o>l&&!a[o+1].multiline&&a[o+1].bounds.height<t&&(p.push(a[++o]),h=-1):s&&i-o==l-r&&c!==Number.POSITIVE_INFINITY&&(e=1)}d=l>1?Math.max((f+r*(l-1))/h/l,.01):0}else n.push(a);const f=n.length,p=new Array(f);let g=0;while(g<f){const e=n[g];e.forEach(e=>{e.app("layout_constraintWidth_percent",ni(1/l-d,t.localSettings.floatPrecision)),e.setLayoutWidth("0px"),e.setBox(4,{reset:1}),e.exclude({section:ri.EXTENSION}),e.anchored=true,e.positioned=true}),p[g++]=e[0]}for(g=0;g<f;++g){const t=n[g];if(g<f-1&&t.length>1){const e=t[t.length-1];if(/^H\d/.test(e.tagName)){t.pop();const a=g+1;p[a]=e,n[a].unshift(e)}}}const m=new Array(f);g=0;while(g<f){const e=n[g],a=[];let i=0;const o=e.length;let r=0;while(r<o){const t=e[r++];if(t.naturalChild){const e=t.element.cloneNode(true);if(t.styleElement)if(t.imageOrSvgElement)e.style.height=ei(t.bounds.height);else{const a=t.textStyle;for(const t in a)e.style[t]=a[t]}a.push(e)}else i+=t.linear.height}if(a.length){const e=ai(document.body,"div",{width:ei(s||t.box.width/l),visibility:"hidden"});a.forEach(t=>e.appendChild(t)),i+=e.getBoundingClientRect().height,document.body.removeChild(e)}m[g++]=i}let y,S,A=0;for(g=0;g<f;++g){const t=m[g];if(t>=A){const e=n[g];y=e[0],S=e[e.length-1],A=t}}for(g=0;g<f;++g){const t=p[g];if(0===g)t.anchor("left","parent"),t.anchorStyle("horizontal",0,"spread_inside");else{const e=p[g-1];t.anchor("leftRight",e.documentId),t.modifyBox(16,r)}g===f-1?t.anchor("right","parent"):t.anchor("rightLeft",p[g+1].documentId)}const v=[];for(g=0;g<f;++g){const t=n[g],a=t.length;for(let i=0;i<a;++i){const o=t[i];if(0===i){if(g>0){const t=b();t.anchor("top",y.documentId),t.anchor("left",n[g-1][0].documentId),t.anchor("right",o.documentId),v.push(t)}0===e?o.anchor("top","parent"):o!==y?o.anchor("top",y.documentId):(T.anchor("bottomTop",o.documentId),o.anchor("topBottom",T.documentId)),o.anchorStyle("vertical",0,"packed"),o.setBox(2,{reset:1})}else{const e=t[i-1];e.anchor("bottomTop",o.documentId),o.anchor("topBottom",e.documentId),o.app("layout_constraintVertical_bias","0"),o.anchor("left",t[0].documentId)}i===a-1&&(e===E-1&&o.anchor("bottom","parent"),o.setBox(8,{reset:1}))}}const x=e<E-1?S.documentId:"parent";v.forEach(t=>t.anchor("bottom",x)),T=S}}}}}const{lib:pi,base:gi}=squared,mi=gi.lib,{formatPercent:yi,formatPX:bi,isLength:Ti,isPercent:Ei}=pi.css,{maxArray:Si,truncate:Ai}=pi.math,{CHAR:vi}=pi.regex,{conditionArray:xi,flatMultiArray:wi,hasValue:_i,isArray:Ni}=pi.util,{BOX_STANDARD:Ii,NODE_ALIGNMENT:Ri,NODE_PROCEDURE:Ci,NODE_RESOURCE:Li}=mi.enumeration,Pi=gi.LayoutUI,Oi=mi.constant.EXT_NAME.CSS_GRID,ki=gi.extensions.CssGrid,Di=/start|left|center|right|end/,Mi=/(start|left|baseline)$/,Wi=/(right|end)$/,Bi=/start|end|center|baseline/,Xi=/(start|baseline)$/;function Gi(t,e,a,i,n){const o=a?e.column:e.row,r=o.unit,s=r.length;let l=0;if(s){const t=a?"width":"height";for(let a=0;a<s;++a){const i=r[a];if(ki.isPx(i))l+=parseFloat(i);else{let i=0;xi(e.rowData[a],t=>Ni(t),e=>i=Math.min(i,...e.map(e=>e.bounds[t]))),l+=i}}}else if(l=Si(o.unitTotal),l<=0)return 0;return l+=o.gap*(o.length-1),a?(l+=t.contentBox?t.borderLeftWidth+t.borderRightWidth:t.contentBoxWidth,(i>l?Math.min(i,t.actualWidth):t.actualWidth)-l):(l+=t.contentBox?t.borderTopWidth+t.borderBottomWidth:t.contentBoxHeight,(n>l&&t.documentBody?Math.min(n,t.actualHeight):t.actualHeight)-l)}function Hi(t,e){const a=Math.floor(e/t);return[a,e-a*t]}function Vi(t,e,a,i,n,o,r,s,l,c){const h=i?e.column:e.row;if(a.startsWith("space")){const d=Gi(t,e,i,l,c);if(d>0){const t=function(t,e){const a=t.rowData;if(e){const e=t.column.length,i=t.row.length,n=new Array(e);let o=0;while(o<e){const t=new Array(i);let e=0;while(e<i)t[e]=a[e++][o];n[o++]=t}return n}return a}(e,i),l=h.length,c=new Set;switch(a){case"space-around":{const[e,a]=Hi(2*l,d);for(let i=0;i<l;++i)for(const o of new Set(wi(t[i]))){const t=(i>0&&i<=a?1:0)+e;c.has(o)?o.cssPX(n,d/l,false,true):(o.modifyBox(r,t),o.modifyBox(s,e),c.add(o))}break}case"space-between":if(l>1){const[e,a]=Hi(l-1,d);for(let o=0;o<l;++o)for(const r of new Set(wi(t[o])))if(o<l-1){const t=e+(o<a?1:0);c.has(r)?r.cssPX(n,t,false,true):(r.modifyBox(s,t),c.add(r))}else{if(parseInt(r.android(i?"layout_columnSpan":"layout_rowSpan"))>1){const t=e+(a>0?Math.max(a-1,1):0);r.cssPX(n,t,false,true),c.has(r)&&r.modifyBox(s,-t,false)}}break}return;case"space-evenly":{const[e,a]=Hi(l+1,d);for(let i=0;i<l;++i)for(const l of new Set(wi(t[i]))){let t=e+(i<a?1:0);c.has(l)?l.cssPX(n,t,false,true):(o?(t/=2,l.modifyBox(r,t),l.modifyBox(s,t)):(0===i&&l.modifyBox(r,e),l.modifyBox(s,t)),c.add(l))}break}}}}else if(!o){let n=Gi(t,e,i,l,c);if(n>0)switch(a){case"center":n/=2,i?t.modifyBox(256,Math.floor(n)):(t.modifyBox(32,Math.floor(n)),t.modifyBox(128,Math.ceil(n)));break;case"right":if(!i)break;case"end":case"flex-end":t.modifyBox(i?256:32,n)}}}function Fi(t,e,a,i){let n,o,r,s;if(a.every(t=>ki.isPx(t))){let t=i;a.forEach(e=>t+=parseFloat(e));const r=bi(t);e?n=r:o=r}else if(a.every(t=>ki.isFr(t))){let i=0;a.forEach(t=>i+=parseFloat(t));const l=Ai(i,t.localSettings.floatPrecision);e?(n="0px",r=l):(o="0px",s=l)}else if(a.every(t=>Ei(t))){const r=yi((a.reduce((t,e)=>t+parseFloat(e),0)+i/(e?t.actualWidth:t.actualHeight))/100);e?n=r:o=r}else e?n="wrap_content":o="wrap_content";return[n,o,r,s]}function zi(t,e){const a=t.unit,i=a.length;i&&a.every(t=>"auto"===t)&&(t.unit=new Array(i).fill(e?"1fr":""))}function Ui(t,e){const{gap:a,length:i,unit:n}=t;let o=0,r=0;for(const t of n)if(ki.isPx(t))o+=parseFloat(t);else if(Ei(t))r+=parseFloat(t);else if(ki.isFr(t))return 0;const s=Math.ceil(o+(i-1)*a);return r>0?r+s/e*100:o>0&&s<e?-1:0}class qi extends squared.base.extensions.CssGrid{processNode(t,a){super.processNode(t,a);const i=t.data(Oi,"mainData");if(i){const{column:n,row:o}=i,r=n.unit,s=n.length,l=Pi.create({parent:a,node:t,alignmentType:4,children:t.children,rowCount:o.length,columnCount:s});if(!t.originalRoot&&!t.hasWidth&&0===i.rowSpanMultiple.length&&r.length===s&&r.every(t=>ki.isFr(t))&&function(t){return t.ascend({condition:t=>{const e=t.actualParent;if(null==e?void 0:e.gridElement){const a=e.data(Oi,"mainData"),i=t.data(Oi,"cellData");if(a&&i){const t=a.column.unit,{columnStart:e,columnSpan:n}=i;let o=false,r=0;while(r<n){const a=t[e+r++];if(ki.isFr(a)||Ei(a))o=true;else if("auto"===a){o=false;break}}return o}}else if(t.hasFlex("row")&&t.flexbox.grow>0)return true;return false},error:t=>t.hasWidth}).length>0}(t)){const a=i.rowData,s=a.length,c=new Array(s);let h=true;t:{let t=0;while(t<s){const e=[],i=a[t],n=i.length;let o=0;while(o<n){const t=i[o++];if(1!==(null==t?void 0:t.length)){h=false;break t}e.push(t[0])}c[t++]=e}}if(h)return n.frTotal=r.reduce((t,e)=>t+parseFloat(e),0),o.frTotal=o.unit.reduce((t,e)=>t+(ki.isFr(e)?parseFloat(e):0),0),t.setLayoutWidth("match_parent"),t.lockAttr("android","layout_width"),t.data(Oi,"constraintData",c),l.setContainerType(e.CONSTRAINT),{output:this.application.renderNode(l),include:true,complete:true}}return zi(n,true),zi(o,false),l.setContainerType(e.GRID),{output:this.application.renderNode(l),include:true,complete:true}}}processChild(t,a){var i;const o=a.data(Oi,"mainData"),r=t.data(Oi,"cellData");let s,l;if(o&&r){const{alignContent:c,column:h,row:d}=o,u=t.has("alignSelf")?t.css("alignSelf"):o.alignItems,f=t.has("justifySelf")?t.css("justifySelf"):o.justifyItems,p=a.layoutConstraint,g=(e,i,n)=>{const[s,l,c,u]=i?[h,r.columnStart,r.columnSpan,"minWidth"]:[d,r.rowStart,r.rowSpan,"minHeight"],{unit:f,unitMin:g}=s;let m=0,y=0,b=0,T=0,E=false,S=false,A=0,v=0;while(A<c){const r=l+A++,h=g[r];""!==h&&(b+=a.parseUnit(h,i?"width":"height"));let d=f[r];if(!_i(d)){const t=s.auto;if(!t[v])continue;d=t[v],t[v+1]&&++v}if("auto"===d||"max-content"===d){if(S=true,c<f.length&&(!a.hasPX(n)||f.some(t=>Ti(t))||"max-content"===d)){m=t.bounds[n],y=0,T=0;break}if(i){m=0,y=0,T=-1;break}}else if("min-content"===d){if(!e.hasPX(n)){i?e.setLayoutWidth("wrap_content",false):e.setLayoutHeight("wrap_content",false);break}}else if(ki.isFr(d))i||a.hasHeight?(-1===T&&(T=0),T+=parseFloat(d),y=m):(T=0,y+=o.minCellHeight*parseFloat(d)),m=0;else if(Ei(d))-1===T&&(T=0),T+=parseFloat(d)/100,y=m,m=0;else{const t=e.parseUnit(d,i?"width":"height");0===y?m+=t:y+=t}t.textElement&&vi.UNITZERO.test(h)&&(E=true)}if(c>1){const t=(c-1)*s.gap;m>0&&0===y?m+=t:y>0&&(y+=t),b>0&&(b+=t)}if(b>0&&(s.autoFill&&0===m&&1===(i?d.length:h.length)?(m=Math.max(t.actualWidth,b),T=0):y=b),y>0&&!e.hasPX(u)&&e.css(u,bi(y),true),p)if(i){if(e.hasPX("width",false)||(e.app("layout_constraintWidth_percent",Ai(T/h.frTotal,e.localSettings.floatPrecision)),e.setLayoutWidth("0px")),0===l)e.anchor("left","parent"),e.anchorStyle("horizontal",0,"spread");else{const t=e.innerMostWrapped.previousSibling;t&&(t.anchor("rightLeft",e.documentId),e.anchor("leftRight",t.anchorTarget.documentId))}l+c===h.length&&e.anchor("right","parent"),e.positioned=true}else e.hasPX("height",false)||(T>0?1===d.length?e.setLayoutHeight("match_parent"):(e.app("layout_constraintHeight_percent",Ai(T/d.frTotal,e.localSettings.floatPrecision)),e.setLayoutHeight("0px")):m>0&&(e.contentBox&&(m-=e.contentBoxHeight),e.css(S?"minHeight":"height",bi(m),true)));else{e.android(i?"layout_column":"layout_row",l.toString()),e.android(i?"layout_columnSpan":"layout_rowSpan",c.toString());let o=i&&h.flexible;if(0!==T)e.hasPX(n)||(i?(r.columnSpan===h.length?e.setLayoutWidth("match_parent"):(e.setLayoutWidth("0px"),e.android("layout_columnWeight",-1===T?"0.01":Ai(T,t.localSettings.floatPrecision)),e.mergeGravity("layout_gravity","fill_horizontal")),o=false):r.rowSpan===d.length?e.setLayoutHeight("match_parent"):(e.setLayoutHeight("0px"),e.android("layout_rowWeight",Ai(T,t.localSettings.floatPrecision)),e.mergeGravity("layout_gravity","fill_vertical")));else if(m>0){const t=i?"maxWidth":"maxHeight";E&&!e.hasPX(t)?(e.css(t,bi(m),true),e.mergeGravity("layout_gravity",i?"fill_horizontal":"fill_vertical")):e.hasPX(n)||(e.contentBox&&(m-=i?e.contentBoxWidth:e.contentBoxHeight),S&&!a.hasPX(t)?(e.css(u,bi(m),true),i?e.setLayoutWidth("wrap_content"):e.setLayoutHeight("wrap_content")):e.css(n,bi(m),true))}else 0!==f.length||e.hasPX(n)||(i?e.setLayoutWidth("match_parent",false):e.setLayoutHeight("wrap_content",false));o&&e.android("layout_columnWeight","0")}return[l,c]};if(Bi.test(u)||Di.test(f)||p){s=this.application.createNode({parent:a,replace:t}),s.containerName=t.containerName,s.setControlType(n.FRAME,e.FRAME),s.inherit(t,"base","initial"),s.exclude({resource:Li.BOX_STYLE|Li.ASSET,procedure:Ci.CUSTOMIZATION}),s.resetBox(30),s.resetBox(480),s.render(a),t.transferBox(30,s);let i=true;Mi.test(f)?t.mergeGravity("layout_gravity","left"):Wi.test(f)?t.mergeGravity("layout_gravity","right"):"center"===f?t.mergeGravity("layout_gravity","center_horizontal"):i=false,t.hasWidth||t.setLayoutWidth(i?"wrap_content":"match_parent",false),Xi.test(u)?t.mergeGravity("layout_gravity","top"):u.endsWith("end")?t.mergeGravity("layout_gravity","bottom"):"center"===u?t.mergeGravity("layout_gravity","center_vertical"):t.hasHeight||t.setLayoutHeight("match_parent",false),l=this.application.renderNode(new Pi(a,s,e.FRAME,4096,s.children))}else t.mergeGravity("layout_gravity","top");const m=s||t;g(m,true,"width"),m!==t||t.hasPX("maxHeight")?m.mergeGravity("layout_gravity","fill"):m.hasPX("width")||m.mergeGravity("layout_gravity","fill_horizontal");const[y,b]=g(m,false,"height");!("normal"!==c||a.hasPX("height")||t.hasPX("minHeight")||d.unit[y]&&"auto"!==d.unit[y])&&Math.floor(t.bounds.height)>(null===(i=t.data(Oi,"boundsData"))||void 0===i?void 0:i.height)&&function(t,e,a,i){if(1===a&&e.rowSpanMultiple[i]){const n=e.rowData,o=n.length;for(const e of wi(n[i]))if(e!==t){const t=e.data(Oi,"cellData");if(t&&t.rowSpan>a&&(0===i||t.rowSpan<o))return true}}return false}(t,o,b,y)?m.css("minHeight",bi(t.box.height)):m.hasPX("height")||m.hasPX("maxHeight")||1===d.length&&c.startsWith("space")&&!Bi.test(o.alignItems)||m.mergeGravity("layout_gravity","fill_vertical")}return{parent:s,renderAs:s,outputAs:l}}postBaseLayout(t){const e=t.data(Oi,"mainData");if(e){const a=this.controller,{alignContent:n,children:o,column:r,emptyRows:s,justifyContent:l,row:c,rowDirection:h,rowData:u}=e,f=true===t.data(i.DELEGATE_CSS_GRID,"unsetContentBox"),p=o[o.length-1].id;if(ki.isJustified(t)){switch(Vi(t,e,l,true,"width",f,16,4,a.userSettings.resolutionScreenWidth-t.bounds.left,0),l){case"center":case"space-around":case"space-evenly":f&&t.anchorParent("horizontal",.5,"",true);break;case"end":case"flex-end":f&&t.anchorParent("horizontal",1,"",true);break;default:1===e.column.length&&t.setLayoutWidth("match_parent")}f&&r.unit.some(t=>ki.isFr(t))&&t.setLayoutWidth("match_parent")}else{const e=r.length;if(t.blockStatic||t.hasWidth){const i=Ui(r,t.actualWidth);0!==i&&i<100&&(i>0&&a.addAfterOutsideTemplate(p,a.renderSpace({width:yi((100-i)/100),height:"match_parent",rowSpan:c.length,android:{layout_row:"0",layout_column:e.toString(),layout_columnWeight:r.flexible?"0.01":""}}),false),t.android("columnCount",(e+1).toString()))}f&&(t.contentBoxWidth>0&&t.hasPX("width",false)?t.anchorParent("horizontal",.5,"",true):1===e?t.setLayoutWidth("match_parent"):t.setLayoutWidth("wrap_content",false))}if(ki.isAligned(t)){if(Vi(t,e,n,false,"height",f,2,8,0,this.controller.userSettings.resolutionScreenHeight),f)switch(n){case"center":case"space-around":case"space-evenly":t.anchorParent("vertical",.5,"",true);break;case"end":case"flex-end":t.anchorParent("vertical",1,"",true)}}else{if(t.hasHeight){const e=Ui(c,t.actualHeight);if(0!==e&&e<100){const i=c.length;e>0&&a.addAfterOutsideTemplate(p,a.renderSpace({width:"match_parent",height:yi((100-e)/100),columnSpan:r.length,android:{layout_row:i.toString(),layout_column:"0",layout_rowWeight:c.flexible?"0.01":""}}),false),t.android("rowCount",(i+1).toString())}}f&&(t.contentBoxHeight>0&&t.hasPX("height",false)?t.anchorParent("vertical",.5,"",true):t.setLayoutHeight("wrap_content",false))}const g=t.data(Oi,"constraintData");if(g){const{gap:e,length:i}=r,n=g.length,o=new Array(n-1);let s=1,l=0;while(s<n)o[l++]=a.addBarrier(g[s++],"top");for(s=0;s<n;++s){const c=g[s],h=o[s-1],d=o[s];let u;for(l=0;l<i;++l){const o=c[l];if(o)0===s?(o.anchor("top","parent"),o.anchor("bottomTop",d),o.anchorStyle("vertical",0,"packed")):(s===n-1?o.anchor("bottom","parent"):o.anchor("bottomTop",d),o.anchor("topBottom",h)),l===i-1?o.anchor("right","parent"):o.modifyBox(4,-e),u?(u.anchor("rightLeft",o.documentId),o.anchor("leftRight",u.documentId)):(o.anchor("left","parent"),o.anchorStyle("horizontal",0,"packed")),o.anchored=true,o.positioned=true,u=o;else if(u){const e={width:"0px",height:"wrap_content",android:{},app:{layout_constraintTop_toTopOf:0===s?"parent":"",layout_constraintTop_toBottomOf:h,layout_constraintBottom_toTopOf:s<i-1?d:"",layout_constraintBottom_toBottomOf:s===i-1?"parent":"",layout_constraintStart_toEndOf:u.anchorTarget.documentId,layout_constraintEnd_toEndOf:"parent",layout_constraintVertical_bias:0===s?"0":"",layout_constraintVertical_chainStyle:0===s?"packed":"",layout_constraintWidth_percent:(r.unit.slice(l,i).reduce((t,e)=>t+parseFloat(e),0)/r.frTotal).toString()}};a.addAfterInsideTemplate(t.id,a.renderSpace(e),false),u.anchor("rightLeft",e.documentId);break}}}}else{const{flexible:e,gap:i,unit:n}=h?r:c,o=n.length;let l=-1,f=0;const g=(i,n,o,r,s="wrap_content",c="",h=0)=>{if(-1!==l){const u=o.slice(l,l+f);let g,m,y="",b="",T="",E="",S=1,A=1;if(n?(g=i.toString(),m=l.toString(),b=s,T=e?"0.01":"",E=c,A=f):(g=l.toString(),m=i.toString(),E=e?"0.01":"",T=c,y=s,S=f),u.length===o.length)n?(y="match_parent",T=""):(b="match_parent",E=""),r=0;else{const[e,a,i,o]=Fi(t,n,u,r*(u.length-1));e&&(y=e),a&&(b=a),i&&(T=i),o&&(E=o)}a.addAfterOutsideTemplate(p,a.renderSpace({width:y,height:b,rowSpan:S,columnSpan:A,android:{[n?t.localizeString(d.MARGIN_RIGHT):"bottom"]:r>0&&l+f<o.length?"@dimen/"+B.insertStoredAsset("dimens",`${t.controlId}_cssgrid_${n?"column":"row"}_gap`,bi(r)):"",[n?"bottom":t.localizeString(d.MARGIN_RIGHT)]:h>0?"@dimen/"+B.insertStoredAsset("dimens",`${t.controlId}_cssgrid_${n?"row":"column"}_gap`,bi(h)):"",layout_row:g,layout_column:m,layout_rowWeight:E,layout_columnWeight:T,layout_gravity:"fill"}}),ki.isPx(y)||ki.isPx(b)),l=-1}f=0};let m=Math.max(u.length,1);for(let t=0;t<m;++t)if(void 0===s[t]){const e=u[t];for(let a=0;a<o;++a)e[a]?g(t,h,n,i):(-1===l&&(l=a),++f);g(t,h,n,i)}m=s.length;for(let e=0;e<m;++e){const a=s[e];if(a){const i=a.length;for(let n=0;n<i;++n){const i=a[n];if(i>0){l=n;const{unit:a,gap:o}=h?c:r,{unit:s,gap:d}=h?r:c,u=Fi(t,!h,[a[n]],0);f=i===Number.POSITIVE_INFINITY?s.length:1,g(e,h,s,d,u[h?1:0],u[h?3:2],e<m-1?o:0)}}}}}}}postOptimize(t){var e;const a=t.data(Oi,"mainData");if(a&&t.blockStatic&&!t.hasPX("minWidth",false)&&false===(null===(e=t.actualParent)||void 0===e?void 0:e.layoutElement)){const{gap:e,length:i,unit:n}=a.column;let o=e*(i-1);for(const t of n){if(!ki.isPx(t))return;o+=parseFloat(t)}o>t.width&&(t.android("minWidth",bi(o)),t.flexibleWidth||t.blockWidth||t.setLayoutWidth("wrap_content"))}}}class Yi extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}init(t){return this.included(t)&&this.application.rootElements.add(t),false}}var ji=squared.base.LayoutUI;const{lib:Ki,base:$i}=squared,Zi=$i.lib,{isLength:Ji}=Ki.css,{truncate:Qi}=Ki.math,{capitalize:tn,sameArray:en,withinRange:an}=Ki.util,{BOX_STANDARD:nn,NODE_ALIGNMENT:on}=Zi.enumeration,rn=$i.NodeUI,sn=Zi.constant.EXT_NAME.FLEXBOX,ln={orientation:"horizontal",orientationInverse:"vertical",WHL:"width",HWL:"height",LT:"left",TL:"top",RB:"right",BR:"bottom",LRTB:"leftRight",RLBT:"rightLeft"},cn={orientation:"vertical",orientationInverse:"horizontal",WHL:"height",HWL:"width",LT:"top",TL:"left",RB:"bottom",BR:"right",LRTB:"topBottom",RLBT:"bottomTop"};function hn(t,e,a){const i="width"===a,n=i?"hasWidth":"hasHeight",o=e=>e.flexbox.basis=e.bounds[a]/t.box[a]*100+"%";let r=t[n]||i&&t.blockStatic&&an(t.parseWidth(t.css("maxWidth")),t.box.width),s=0,l=0;const c=e.length;let h=0;while(h<c){const t=e[h++];if(r)if(i){if(t.innerMostWrapped.autoMargin.horizontal){r=false;break}}else if(t.innerMostWrapped.autoMargin.vertical){r=false;break}s+=t.flexbox.grow}if(c>1&&(i||r)){const t=[],i=[];let s,d=0,u=0,f=NaN;h=0;while(h<c){const o=e[h++],{alignSelf:c,basis:p,shrink:g,grow:m}=o.flexbox,y=o.bounds[a];let b=false;if(m>0||1!==g){const e=o.parseUnit("auto"===p?o.css(a):p,a);if(e>0){let a=false;y<e?(isNaN(f)||g<f)&&(f=g,a=true,l=1):(isNaN(f)||m>f)&&(f=m,a=true,l=2),a&&(s=o,d=e,u=y),t.push({item:o,basis:e,dimension:y,shrink:g,grow:m});continue}m>0&&(b=true)}else if(Ji(p)){t.push({item:o,basis:Math.min(y,o.parseUnit(p,a)),dimension:y,shrink:g,grow:m}),o.flexbox.basis="auto";continue}"auto"===c&&(r&&!o[n]||b)&&i.push(o)}l&&(t.length>1&&t.forEach(t=>{const{basis:e,item:a}=t;a===s||e===d&&(1===l&&f===t.shrink||2===l&&f===t.grow)?a.flexbox.grow=1:e>0&&(a.flexbox.grow=t.dimension/e/(u/d)*e/d)}),i.forEach(t=>o(t)))}if(i&&0===l){h=0;while(h<c){if(e[h++].find(e=>e.multiline&&0===e.ascend({condition:t=>t[n],including:t}).length,{cascade:true})){e.forEach(t=>o(t));break}}}return s}function dn(t){const e=t.length;let a=0;while(a<e){const e=t[a++];if(e.textElement&&e.baseline)return e}return rn.baseline(t)}function un(t,e,a){a?t.setLayoutHeight(e):t.setLayoutWidth(e)}function fn(t){while(t){if(t.layoutFrame)return t.innerWrapped;t=t.innerWrapped}}class pn extends squared.base.extensions.Flexbox{processNode(t,a){super.processNode(t,a);const i=t.data(sn,"mainData"),{column:n,row:o,rowCount:r,columnCount:s}=i;if(o&&1===r||n&&1===s)return t.containerType=e.CONSTRAINT,t.addAlign(4),t.addAlign(n?16:8),i.wrap=false,{include:true,complete:true};{const i=o&&t.hasHeight||n&&t.hasWidth||t.some(t=>!t.pageFlow)?e.CONSTRAINT:e.LINEAR;return{output:this.application.renderNode(ji.create({parent:a,node:t,containerType:i,alignmentType:4|(n?8:16),itemCount:t.length,rowCount:r,columnCount:s})),include:true,complete:true}}}processChild(t,a){if(t.hasAlign(128))return{output:this.application.renderNode(new ji(a,t,e.CONSTRAINT,4,t.children)),complete:true,subscribe:true};{const i=t.autoMargin;if(i.horizontal||i.vertical&&a.hasHeight){const n=a.data(sn,"mainData");if(n){const o=n.children.findIndex(e=>e===t);if(-1!==o){const r=this.controller.createNodeWrapper(t,a);return r.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},true),r.saveAsInitial(true),r.setCacheValue("flexbox",t.flexbox),n.children[o]=r,i.horizontal&&!t.hasWidth&&t.setLayoutWidth("wrap_content"),{parent:r,renderAs:r,outputAs:this.application.renderNode(new ji(a,r,e.FRAME,4096,r.children))}}}}}}postBaseLayout(t){const e=t.data(sn,"mainData");if(e){const a=this.controller,{row:i,column:n,reverse:o,wrap:r,wrapReverse:s,alignContent:l,justifyContent:c,children:h}=e,d=t.hasPX("height",false)||t.percentHeight>0?t.linear.bottom:0,u=[],f=[],p=[];let g=0;if(r){let e;t.each(t=>{if(t.hasAlign(128)){const a=t.renderChildren.filter(t=>t.pageFlow);if(a.length){if(i)t.setLayoutWidth("match_parent"),u.push(a);else{if(t.setLayoutHeight("match_parent"),e){const a=e.length;let i=e[0],n=1;while(n<a){const t=e[n++];t.linear.right>i.linear.right&&(i=t)}if(s){const e=t.linear.left-i.actualRect("right");e>0&&t.modifyBox(16,e)}t.constraint.horizontal=true}f.push(a),e=a}p.push(t)}}}),t.layoutLinear?s&&n&&t.mergeGravity("gravity","right"):p.length&&(i?f.push(p):u.push(p))}else i?(o&&h.reverse(),u[0]=h):(o&&h.reverse(),f[0]=h);const m=(e,i)=>{const h=e.length;if(0===h)return;const{orientation:u,orientationInverse:f,WHL:m,HWL:y,LT:b,TL:T,RB:E,BR:S,LRTB:A,RLBT:v}=i?ln:cn,[x,w]=i?[t.hasHeight,t.hasWidth]:[t.hasWidth,t.hasHeight],_=`layout_constraint${tn(u)}_weight`,N=(t,e)=>{0===t[m]&&(t.app(_,Qi(e,t.localSettings.floatPrecision)),i?t.setLayoutWidth("0px"):t.setLayoutHeight("0px"))};for(let I=0;I<h;++I){const R=e[I],C=R.length,L=R[0],P=R[C-1],O=R===p,k=!O&&R.every(t=>0===t.flexbox.grow),D=k&&("space-between"===c||"space-around"===c&&C>1),M=[];let W,B=0,X=0,G=true,H=null;if(L.anchor(b,"parent"),P.anchor(E,"parent"),O)if(W=false,w){let t="spread",e=0;switch(l){case"left":case"right":case"flex-end":e=1;case"baseline":case"start":case"end":case"flex-start":t="packed",G=false}L.anchorStyle(u,e,t)}else L.anchorStyle(u,0,"packed");else if(W=i||w,X=1-hn(t,R,m),C>1){let t=0;R.forEach(e=>{const a=(e.data(sn,"boundsData")||e.bounds)[y];0===t?(B=a,t++):a===B?t++:a>B&&(B=a,t=1)}),t===C&&(B=NaN)}for(let t=0;t<C;++t){const e=R[t],a=R[t-1],n=R[t+1];if(n&&e.anchor(v,n.documentId),a&&e.anchor(A,a.documentId),O)G&&C>1&&w&&N(e,1),e.anchor(T,"parent");else{const o=fn(e),c=e.innerMostWrapped.autoMargin;switch(i?c.horizontal&&(o?(o.mergeGravity("layout_gravity",c.leftRight?"center_horizontal":e.localizeString(c.left?"right":"left")),X>0&&(e.flexbox.basis="0%",M.push(e))):c.leftRight||(c.left?a&&e.anchorDelete(A):n&&e.anchorDelete(v))):c.vertical&&(o?(o.mergeGravity("layout_gravity",c.topBottom?"center_vertical":e.localizeString(c.top?"bottom":"top")),X>0&&(e.flexbox.basis="0%",M.push(e))):c.topBottom||(c.top?a&&e.anchorDelete(A):n&&e.anchorDelete(v))),e.flexbox.alignSelf){case"start":case"flex-start":e.anchor(T,"parent");break;case"end":case"flex-end":e.anchor(S,"parent");break;case"baseline":i&&(null===H&&(H=dn(R)),H&&(H!==e?e.anchor("baseline",H.documentId):e.anchorParent(f,0)));break;case"center":e.anchorParent(f,.5),!i&&e.textElement&&e.mergeGravity("gravity","center");break;default:{const a=fn(e);switch(l){case"center":h%2==1&&I===Math.floor(h/2)?e.anchorParent(f):I<h/2?e.anchor(S,"parent"):I>=h/2&&e.anchor(T,"parent");break;case"space-evenly":case"space-around":a?a.mergeGravity("layout_gravity",i?"center_vertical":"center_horizontal"):e.anchorParent(f);break;case"space-between":D&&2===C&&e.anchorDelete(0===t?v:A),0===I?a?a.mergeGravity("layout_gravity",s?S:T):e.anchor(s?S:T,"parent"):h>2&&I<h-1?a?a.mergeGravity("layout_gravity",i?"center_vertical":"center_horizontal"):e.anchorParent(f):a?a.mergeGravity("layout_gravity",s?T:S):e.anchor(s?T:S,"parent");break;default:e.anchorParent(f),o&&e.innerMostWrapped.autoMargin[f]||e.anchorStyle(f,s?1:0),0===e[y]&&(!i&&e.blockStatic?un(e,"match_parent",i):isNaN(B)?!i&&!r&&e.length||x&&"normal"===l?un(e,x?"0px":"match_parent",i):un(e,"wrap_content",i):1===C?un(e,i?"wrap_content":x?"0px":"match_parent",i):(e.naturalElement?(e.data(sn,"boundsData")||e.bounds)[y]:Number.POSITIVE_INFINITY)<B?(un(e,e.flexElement&&e.css("flexDirection").startsWith(i?"row":"column")?"match_parent":"0px",i),o&&!o.autoMargin[u]&&un(o,"match_parent",i)):x?un(e,"0px",i):(un(e,"wrap_content",i),e.lockAttr("android","layout_"+y)))}break}}if(de.setFlexDimension(e,m),e.innerMostWrapped.has("flexGrow")||(W=false),d>0&&I===h-1){e.linear.bottom-d>0&&(g=Math.max(e.linear.bottom-d,g)),e.setBox(8,{reset:1})}}e.anchored=true,e.positioned=true}if(!O&&(W?R.forEach(t=>N(t,t.flexbox.grow)):X>0&&M.forEach(t=>{const e=t.innerMostWrapped.autoMargin;let a=1;i?e.leftRight&&(a=2):e.topBottom&&(a=2),N(t,Math.max(t.flexbox.grow,X*a/M.length))}),g>0&&t.modifyBox(8,g),i||n)){let e=false;if(k)switch(c){case"normal":if(n){L.anchorStyle(u,o?1:0,"packed");continue}break;case"left":if(!i)break;case"start":case"flex-start":L.anchorStyle(u,o?1:0,"packed");continue;case"center":if(C>1){L.anchorStyle(u,.5,"packed");continue}e=true;break;case"right":if(!i)break;case"end":case"flex-end":L.anchorStyle(u,1,"packed");continue;case"space-between":if(1===C){P.anchorDelete(E);continue}break;case"space-evenly":if(C>1){L.anchorStyle(u,0,"spread");continue}e=true;break;case"space-around":if(C>1){L.constraint[u]=false,P.constraint[u]=false,a.addGuideline(L,t,{orientation:u,percent:true}),a.addGuideline(P,t,{orientation:u,percent:true,opposing:true}),L.anchorStyle(u,0,"spread_inside");continue}e=true}D||!r&&R.some(t=>""!==t.app(_))&&!en(R,t=>t.app(_))?L.anchorStyle(u,0,"spread_inside",false):e||L.anchorStyle(u,o?1:0,"packed",false)}}};m(u,true),m(f,false)}}}var gn=squared.base.LayoutUI;const mn=squared.lib,yn=squared.base.lib,{formatPX:bn}=mn.css,{withinRange:Tn}=mn.util,{BOX_STANDARD:En,NODE_ALIGNMENT:Sn}=yn.enumeration,An=squared.base.extensions.Grid,vn=yn.constant.EXT_NAME.GRID;class xn extends squared.base.extensions.Grid{processNode(t,a){super.processNode(t,a);const i=t.data(vn,"columnCount");if(i)return{output:this.application.renderNode(gn.create({parent:a,node:t,containerType:e.GRID,alignmentType:256,children:t.children,columnCount:i})),include:true,complete:true}}processChild(t,e){var a;const i=t.data(vn,"cellData");if(i){const n=null===(a=i.siblings)||void 0===a?void 0:a.slice(0);let o;if(n){const a=this.controller;n.unshift(t),o=a.processLayoutHorizontal(new gn(e,a.createNodeGroup(t,n,{parent:e,delegate:true,cascade:true}),0,0,n)),function(t,e){const a=An.createDataCellAttribute();e.forEach(t=>{const e=t.data(vn,"cellData");e&&(e.cellStart&&(a.cellStart=true),e.cellEnd&&(a.cellEnd=true),e.rowEnd&&(a.rowEnd=true),e.rowStart&&(a.rowStart=true),t.data(vn,"cellData",null))}),t.data(vn,"cellData",a)}(t=o.node,n)}if(i.rowSpan>1&&t.android("layout_rowSpan",i.rowSpan.toString()),i.columnSpan>1&&t.android("layout_columnSpan",i.columnSpan.toString()),"table-cell"===t.display&&t.mergeGravity("layout_gravity","fill"),o)return{parent:o.node,renderAs:o.node,outputAs:this.application.renderNode(o)}}}postConstraints(t){if("collapse"!==t.css("borderCollapse")){const e=t.data(vn,"columnCount");if(e){let a=0,i=0,n=0,o=0;t.renderEach(r=>{const s=r.data(vn,"cellData");if(s){const l=r.actualParent;if(false===(null==l?void 0:l.visible)){const c=0===l.getBox(2)[0]?l.marginTop:0,h=0===l.getBox(8)[0]?l.marginBottom:0;if(s.cellStart&&(a=c+l.paddingTop),s.rowStart&&(o=Math.max(l.marginLeft+l.paddingLeft,o)),s.rowEnd){const a=h+l.paddingBottom+(s.cellEnd?0:c+l.paddingTop);if(a>0)if(s.cellEnd)n=a;else{const i=this.controller;i.addAfterOutsideTemplate(r.id,i.renderSpace({width:"match_parent",height:"@dimen/"+B.insertStoredAsset("dimens",t.controlId+"_grid_space",bn(a)),columnSpan:e,android:{}}),false)}i=Math.max(l.marginRight+l.paddingRight,i)}}}}),t.modifyBox(32,a),t.modifyBox(64,i),t.modifyBox(128,n),t.modifyBox(256,o)}}if(!t.hasWidth){let e=Number.NEGATIVE_INFINITY;t.renderEach(t=>{!t.inlineFlow&&t.blockStatic||(e=Math.max(e,t.linear.right))}),Tn(t.box.right,e)&&t.setLayoutWidth("wrap_content")}}}var wn=squared.base.LayoutUI;const _n=squared.lib,Nn=squared.base.lib,{formatPX:In,getBackgroundPosition:Rn}=_n.css,{convertInt:Cn}=_n.util,{STRING_SPACE:Ln}=_n.xml,{BOX_STANDARD:Pn,NODE_ALIGNMENT:On,NODE_TEMPLATE:kn}=Nn.enumeration,Dn=Nn.constant.EXT_NAME.LIST;class Mn extends squared.base.extensions.List{processNode(t,a){const i=new wn(a,t,0,0,t.children);if(!i.unknownAligned||i.singleRowAligned){if(super.processNode(t,a),i.linearY)i.rowCount=t.length,i.columnCount=t.some(t=>"inside"===t.css("listStylePosition"))?3:2,i.setContainerType(e.GRID,16);else{if(!i.linearX&&!i.singleRowAligned)return;i.rowCount=1,i.columnCount=i.length,i.setContainerType(e.LINEAR,8)}return{output:this.application.renderNode(i),complete:true,include:true}}}processChild(t,a){const i=t.data(Dn,"mainData");if(i){const o=this.application,r=this.controller,s=a.firstStaticChild===t,l=t.marginTop;let c,h=i.ordinal||"",d=t.marginLeft,u=0,f=0,p=false,g=NaN;t.setBox(16,{reset:1}),a.layoutGrid?(f=Cn(a.android("columnCount"))||1,p=true):s&&(p=true),p&&(a.paddingLeft>0?d+=a.paddingLeft:d+=a.marginLeft),0===t.length?(c=r.createNodeWrapper(t,a,Object.assign({},r.containerTypeVertical)),t.resetBox(10,c)):c=t;let m=""===h?t.find(t=>"left"===t.float&&t.marginLeft<0&&Math.abs(t.marginLeft)<=t.documentParent.marginLeft):void 0;if(m){3===f&&t.android("layout_columnSpan","2"),m.hasWidth||(d+=m.marginLeft,d>0&&m.android("minWidth",In(d))),m.parent=a,m.setControlType(n.TEXT,e.INLINE),m.setBox(16,{reset:1}),m.render(a);const i=new wn(a,m);m.inlineText||0===m.length?i.setContainerType(e.TEXT):(i.singleRowAligned?i.setContainerType(e.RELATIVE,8):i.setContainerType(e.CONSTRAINT,2),i.retain(m.children)),o.addLayoutTemplate(a,m,o.renderNode(i))}else{let r,s="right",l=0,y=0,b=0;if(""!==i.imageSrc){const e=this.resource;i.imagePosition&&(({top:y,left:b}=Rn(i.imagePosition,t.actualDimension,{fontSize:t.fontSize,imageDimension:e.getImage(i.imageSrc),screenDimension:t.localSettings.screenDimension})),t.marginLeft<0?g=t.marginLeft+(a.paddingLeft>0?a.paddingLeft:a.marginLeft):(p=false,u=t.marginLeft),d=t.paddingLeft-b,t.setBox(256,{reset:1}),s=""),r=e.addImageSrc(i.imageSrc)}const T=it();if(m=o.createNode({parent:a}),m.childIndex=t.childIndex,m.containerName=t.containerName+"_ORDINAL",m.inherit(t,"textStyle"),""===h||h.endsWith(".")||m.setCacheValue("fontSize",.75*m.fontSize),"right"===s&&(r?(l=Math.max(d/6,4),d-=l):""!==h&&(h+=Ln.repeat(1===h.length?3:2))),3===f&&c.android("layout_columnSpan","2"),"DT"!==t.tagName||r){r?(m.setControlType(n.IMAGE,e.IMAGE),Object.assign(T.android,{src:"@drawable/"+r,scaleType:"right"===s?"fitEnd":"fitStart",baselineAlignBottom:p?"true":""})):""!==h?(m.textContent=h,m.inlineText=true,m.setControlType(n.TEXT,e.TEXT),"DFN"===t.tagName&&(d+=8,m.modifyBox(64,8))):(m.setControlType(n.SPACE,e.SPACE),m.renderExclude=false,t.setBox(256,{reset:1}));const{paddingTop:i,lineHeight:c}=t;m.cssApply({minWidth:d>0?In(d):"",marginLeft:u>0?In(u):"",paddingTop:i>0&&0===t.getBox(32)[0]?In(i):"",paddingRight:l>0?In(l):"",lineHeight:c>0?In(c):""}),m.apply(T),m.modifyBox(256,2),m.cssTry("display","block")&&(m.setBounds(),m.cssFinally("display")),m.saveAsInitial(),""!==s&&m.mergeGravity("gravity",t.localizeString(s)),0!==y&&m.modifyBox(2,y),0!==b&&m.modifyBox(16,b),m.render(a),o.addLayoutTemplate(a,m,{type:1,node:m,controlName:m.controlName})}else c.android("layout_columnSpan",f.toString())}if(0!==l&&(m.modifyBox(2,l),m.companion=c,this.subscribers.add(m)),m.positioned=true,p&&((isNaN(g)||g<=0)&&a.setBox(a.paddingLeft>0?256:16,{reset:1}),g<0&&a.modifyBox(16,g)),f>0&&(c.setLayoutWidth("0px"),c.android("layout_columnWeight","1")),t!==c)return{parent:c,renderAs:c,outputAs:o.renderNode(new wn(a,c,e.LINEAR,18,c.children)),subscribe:true}}}postConstraints(t){const e=!t.naturalChild&&t.companion;if(e){const[a,i]=e.getBox(2);0===a?t.modifyBox(2,i-t.getBox(2)[1],false):t.setBox(2,{adjustment:0})}}}const{BOX_STANDARD:Wn}=squared.base.lib.enumeration;class Bn extends squared.base.extensions.Relative{is(t){if(t.inlineStatic||t.imageOrSvgElement)switch(t.verticalAlign){case"sub":case"super":return true}return super.is(t)}postOptimize(t){if(!t.baselineAltered)switch(t.verticalAlign){case"sub":t.outerMostWrapper.renderParent.layoutHorizontal||t.modifyBox(8,-1*Math.floor(t.baselineHeight*this.controller.localSettings.deviations.subscriptBottomOffset));break;case"super":t.outerMostWrapper.renderParent.layoutHorizontal||t.modifyBox(2,-1*Math.floor(t.baselineHeight*this.controller.localSettings.deviations.superscriptTopOffset));break}super.postOptimize(t)}}var Xn=squared.base.LayoutUI;const{formatPX:Gn}=squared.lib.css,Hn=squared.base.lib,{APP_SECTION:Vn,BOX_STANDARD:Fn,NODE_ALIGNMENT:zn,NODE_PROCEDURE:Un,NODE_RESOURCE:qn}=Hn.enumeration,Yn=Hn.constant.EXT_NAME.SPRITE;class jn extends squared.base.extensions.Sprite{processNode(t,a){const i=t.data(Yn,"mainData");if(i){const o=this.resource.addImageSrc(t.backgroundImage);if(""!==o){const{width:r,height:s}=i.image,{top:l,left:c}=i.position,h=this.application.createNode({parent:a,replace:t});return h.inherit(t,"base","initial","styleMap"),h.setControlType(n.FRAME,e.FRAME),h.exclude({resource:qn.ASSET,procedure:Un.CUSTOMIZATION,section:Vn.ALL}),t.setControlType(n.IMAGE,e.IMAGE),t.resetBox(30),t.resetBox(480),t.registerBox(2,h),t.registerBox(4,h),t.registerBox(8,h),t.registerBox(16,h),t.exclude({resource:qn.FONT_STYLE|qn.BOX_STYLE|qn.BOX_SPACING}),t.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:r>0?Gn(r):"auto",height:s>0?Gn(s):"auto",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"transparent"}),t.unsetCache(),t.android("src","@drawable/"+o),t.android("layout_marginTop",Gn(l)),t.android(t.localizeString("layout_marginLeft"),Gn(c)),{renderAs:h,outputAs:this.application.renderNode(new Xn(a,h,e.FRAME,4096,h.children)),parent:h,complete:true}}}}}const{convertCamelCase:Kn}=squared.lib.util,{NODE_ALIGNMENT:$n,NODE_TEMPLATE:Zn}=squared.base.lib.enumeration;class Jn extends squared.base.ExtensionUI{constructor(t,e,a,n){super(t,e,a,n),this.require(i.EXTERNAL,true)}processNode(t,a){const i=et(t.dataset,Kn(this.name,"."));if(i){const n=i.tag;if(n){t.setControlType(n,t.blockStatic?e.BLOCK:e.INLINE),t.render(a);const o=i.tagChild;if(o){const e=this.name;t.addAlign(4),t.each(t=>{if(t.styleElement){const a=t.dataset;a.use=e,a.androidSubstituteTag=o}})}return{output:{type:1,node:t,controlName:n},include:true}}}}postOptimize(t){t.apply(B.formatOptions(it(this.options[t.elementId]),this.application.extensionManager.optionValueAsBoolean(i.RESOURCE_STRINGS,"numberResourceValue")))}}var Qn=squared.base.LayoutUI;const to=squared.lib,eo=squared.base.lib,{CSS_UNIT:ao,formatPX:io}=to.css,{convertFloat:no,convertInt:oo,trimEnd:ro}=to.util,{NODE_ALIGNMENT:so}=eo.enumeration,lo=eo.constant.EXT_NAME.TABLE;function co(t){t.hasPX("height")&&t.height+t.contentBoxHeight<Math.floor(t.bounds.height)&&"top"!==t.css("verticalAlign")&&t.setLayoutHeight("wrap_content")}class ho extends squared.base.extensions.Table{processNode(t,a){super.processNode(t,a);const i=t.data(lo,"mainData");let n=false;return i.columnCount>1?(n=i.expand,t.each(t=>{const e=t.data(lo,"cellData");if(e.flexible)t.android("layout_columnWeight",e.colSpan.toString()),t.setLayoutWidth("0px"),n=true;else{const{downsized:a,expand:i,percent:o}=e;if(i){if(o){const e=no(o)/100;e>0&&(t.setLayoutWidth("0px"),t.android("layout_columnWeight",ro(e.toPrecision(3),"0")),n=true)}}else false===i&&t.android("layout_columnWeight","0");if(a)if(e.exceed)t.setLayoutWidth("0px"),t.android("layout_columnWeight","0.01"),n=true;else if(t.hasPX("width")){const e=t.bounds.width;t.actualWidth<e&&t.setLayoutWidth(io(e))}}"TD"===t.tagName&&t.setSingleLine(true),co(t)})):t.each(t=>{t.has("width",{type:4})&&(t.setLayoutWidth("wrap_content"),n=true),co(t)}),t.hasWidth?t.width<Math.floor(t.bounds.width)&&(i.layoutFixed?t.android("width",io(t.bounds.width)):(t.hasPX("minWidth")||t.android("minWidth",io(t.actualWidth)),t.css("width","auto"))):n&&((a.blockStatic||a.hasPX("width"))&&Math.ceil(t.bounds.width)>=a.box.width?t.setLayoutWidth("match_parent"):t.css("width",io(t.actualWidth))),t.hasHeight&&t.height<Math.floor(t.bounds.height)&&(t.hasPX("minHeight")||t.android("minHeight",io(t.actualHeight)),t.css("height","auto")),{output:this.application.renderNode(Qn.create({parent:a,node:t,containerType:e.GRID,alignmentType:4,children:t.children,rowCount:i.rowCount,columnCount:i.columnCount})),include:true,complete:true}}processChild(t,e){const a=t.data(lo,"cellData");if(a){const{rowSpan:i,colSpan:n,spaceSpan:o}=a;if(i>1&&t.android("layout_rowSpan",i.toString()),n>1&&t.android("layout_columnSpan",n.toString()),o){const e=this.controller;e.addAfterOutsideTemplate(t.id,e.renderSpace({width:"wrap_content",height:"wrap_content",columnSpan:o,android:{}}),false)}t.mergeGravity("layout_gravity","fill"),"hide"===e.css("empty-cells")&&0===t.naturalChildren.length&&""===t.textContent&&t.hide({hidden:true})}}postOptimize(t){const e=oo(t.layoutWidth);if(e>0){const a=t.bounds.width;a>e&&t.setLayoutWidth(io(a)),"auto"===t.cssInitial("width")&&t.renderChildren.every(t=>t.inlineWidth)&&t.renderEach(t=>{t.setLayoutWidth("0px"),t.android("layout_columnWeight","1")})}}}var uo=squared.base.LayoutUI;const{NODE_ALIGNMENT:fo}=squared.base.lib.enumeration;class po extends squared.base.extensions.VerticalAlign{processNode(t,a){return super.processNode(t,a),{output:this.application.renderNode(new uo(a,t,e.RELATIVE,8,t.children)),subscribe:true}}}class go extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=true}}var mo=squared.base.LayoutUI;const yo=squared.lib,{formatPX:bo}=yo.css,{hypotenuse:To}=yo.math,{withinRange:Eo}=yo.util,{NODE_ALIGNMENT:So}=squared.base.lib.enumeration;class Ao extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:false}}is(t){return this.included(t.element)}condition(t){return t.length>0}processNode(t,a){return{output:this.application.renderNode(new mo(a,t,e.CONSTRAINT,32,t.children))}}postBaseLayout(t){const e=this.controller,a=this.options.circlePosition,{left:i,top:n}=t.box;let o;if(t.each(t=>{const e=t.linear;if(Eo(e.left,i)&&t.anchorParent("horizontal",0),Eo(e.top,n)&&t.anchorParent("vertical",0),a)if(t.anchored)o=t;else{const{horizontal:e,vertical:a}=t.constraint;o?a&&!o.constraint.vertical&&(o=t):(a||e)&&(o=t)}t.positioned=true}),a){o||(o=t.item(0)),o.anchored||e.addGuideline(o,t);const{x:a,y:i}=o.center;t.each(t=>{if(t!==o){const{x:e,y:n}=t.center,r=Math.abs(e-a),s=Math.abs(n-i),l=Math.round(To(r,s));let c=Math.round(Math.atan(Math.min(r,s)/Math.max(r,s))*(180/Math.PI));n>i?e>a?r>s?c+=90:c=180-c:r>s?c=270-c:c+=180:n<i?a>e?r>s?c+=270:c=360-c:r>s&&(c=90-c):c=e>a?90:270,t.app("layout_constraintCircle",o.documentId),t.app("layout_constraintCircleRadius",bo(l)),t.app("layout_constraintCircleAngle",c.toString())}})}else t.each(a=>{a.anchored||e.addGuideline(a,t)})}}var vo=squared.base.LayoutUI;const xo=squared.base,{CSS_UNIT:wo,isLength:_o}=squared.lib.css,{BOX_STANDARD:No,NODE_ALIGNMENT:Io,NODE_RESOURCE:Ro,NODE_TEMPLATE:Co}=xo.lib.enumeration,Lo=xo.extensions.CssGrid,Po=Ro.BOX_SPACING|Ro.FONT_STYLE|Ro.VALUE_STRING,Oo=t=>!t.blockStatic&&!t.hasPX("width")||t.has("width",{type:6,not:"100%"})&&"100%"!==t.css("minWidth")||t.has("maxWidth",{type:6,not:"100%"}),ko=t=>"100%"===t.css("height")||"100%"===t.css("minHeight"),Do=t=>t.marginTop>0||t.marginRight>0||t.marginBottom>0||t.marginLeft>0,Mo=(t,e)=>e.visibleStyle.background&&(Oo(t)||!ko(e)||!ko(t)),Wo=t=>"HTML"===t.tagName&&(t.contentBoxWidth>0||t.contentBoxHeight>0||Do(t)),Bo=(t,e,a,i,n,o,r)=>a&&i&&((!n||!o)&&(t.has("backgroundPositionX")||t.has("backgroundPositionY")||r&&(Oo(t)||!ko(e)||!ko(t)))||"fixed"===t.css("backgroundAttachment"));class Xo extends squared.base.ExtensionUI{is(t){return t.documentBody}condition(t,e){const{backgroundColor:a,backgroundImage:i,backgroundRepeatX:n,backgroundRepeatY:o,borderWidth:r}=t.visibleStyle;return((t,e,a,i,n)=>(a||i)&&!Mo(t,e)&&(n||t.gridElement&&(Lo.isJustified(t)||Lo.isAligned(t))))(t,e,a,i,r)||Bo(t,e,a,i,n,o,r)||((t,e)=>e&&Do(t))(t,i)||Wo(e)}processNode(t,a){var i;const n=this.controller,{backgroundColor:o,backgroundImage:r,visibleStyle:s}=t,{backgroundColor:l,backgroundImage:c,backgroundRepeatX:h,backgroundRepeatY:d,borderWidth:u}=s,f=Bo(t,a,l,c,h,d,u),p=t.hasHeight||true===(null===(i=t.actualParent)||void 0===i?void 0:i.hasHeight);let g,m,y=a;const b=a=>{a.setControlType(de.getControlName(e.CONSTRAINT,t.api),e.CONSTRAINT),a.addAlign(16),a.render(y),this.application.addLayoutTemplate(y,a,{type:1,node:a,controlName:a.controlName}),m=a,y=a},T=Mo(t,a),E="fixed"===t.css("backgroundAttachment");if(""!==o&&(c&&h&&d||(g=n.createNodeWrapper(t,y,{resource:Po}),g.css("backgroundColor",o),g.setCacheValue("backgroundColor",o),T?Oo(t)||g.setLayoutWidth("match_parent"):(g.setLayoutWidth("match_parent"),g.setLayoutHeight("match_parent")),g.unsetCache("visibleStyle")),t.css("backgroundColor","transparent"),t.setCacheValue("backgroundColor",""),s.backgroundColor=false),""!==r&&(T||f||d||a.visibleStyle.background||Do(t))){g?(f||E)&&(b(g),g=n.createNodeWrapper(t,m,{resource:Ro.BOX_SPACING})):g=n.createNodeWrapper(t,y,{resource:Po}),g.setLayoutWidth("match_parent");const e=a.cssInitial("height"),i=a.cssInitial("minHeight");let o=t.css("backgroundSize");if(""===e&&""===i)g.setLayoutHeight(T||!E&&(f&&p||!(d||t.has("backgroundSize")||t.css("backgroundPosition").split(" ").some(t=>_o(t)&&parseInt(t)>0)))?"wrap_content":"match_parent");else{if("100%"!==e&&"100%"!==i){const t=a.toElementInt("offsetHeight");t<window.innerHeight&&(o=`auto ${t}px`)}g.setLayoutHeight("match_parent")}g.cssApply({backgroundImage:r,backgroundSize:o,border:"0px none solid",borderRadius:"0px"}),g.cssApply(t.cssAsObject("backgroundRepeat","backgroundPositionX","backgroundPositionY","backgroundClip")),g.setCacheValue("backgroundImage",r),g.unsetCache("visibleStyle"),E&&g.android("scrollbars","vertical"),t.css("backgroundImage","none"),t.setCacheValue("backgroundImage",""),s.backgroundImage=false,s.backgroundRepeatX=false,s.backgroundRepeatY=false}return Wo(a)&&(g||(g=n.createNodeWrapper(t,y)),g.unsafe("excludeResource",Ro.FONT_STYLE|Ro.VALUE_STRING),a.resetBox(30,g),a.resetBox(480,g),g.setLayoutWidth("match_parent",false),g.setLayoutHeight("wrap_content",false)),g?(s.background=s.borderWidth||s.backgroundImage||s.backgroundColor,{parent:g,parentAs:m,renderAs:g,outputAs:this.application.renderNode(new vo(m||a,g,e.CONSTRAINT,16,g.children)),remove:true}):{remove:true}}}var Go=squared.base.LayoutUI;const Ho=squared.base,{BOX_STANDARD:Vo,NODE_ALIGNMENT:Fo,NODE_RESOURCE:zo}=Ho.lib.enumeration,Uo=Ho.extensions.CssGrid,qo=t=>"space-between"===t?"match_parent":"wrap_content";class Yo extends squared.base.ExtensionUI{is(t){return t.gridElement}condition(t){return Uo.isJustified(t)||Uo.isAligned(t)}processNode(t,a){const n=this.controller.createNodeWrapper(t,a,{containerType:e.CONSTRAINT,resource:zo.ASSET});return n.inherit(t,"styleMap","boxStyle"),t.resetBox(30,n),t.resetBox(480,n),t.data(i.DELEGATE_CSS_GRID,"unsetContentBox",true),Uo.isJustified(t)?t.setLayoutWidth(qo(t.css("justifyContent"))):t.hasPX("width",false)?t.setLayoutWidth("match_parent"):n.setLayoutWidth(t.blockStatic?"match_parent":"wrap_content"),Uo.isAligned(t)?t.setLayoutHeight(qo(t.css("alignContent"))):t.hasPX("height",false)?t.setLayoutHeight("match_parent"):n.setLayoutHeight("wrap_content"),{parent:n,renderAs:n,outputAs:this.application.renderNode(new Go(a,n,e.CONSTRAINT,4096,n.children)),include:true}}}var jo=squared.base.LayoutUI;const{NODE_ALIGNMENT:Ko}=squared.base.lib.enumeration;class $o extends squared.base.ExtensionUI{is(t){return!t.inputElement&&!t.support.maxDimension}condition(t,e){const a=t.hasPX("maxWidth")&&!e.layoutConstraint&&!e.layoutElement&&(e.layoutVertical||e.layoutFrame||t.blockStatic||t.onlyChild&&(e.blockStatic||e.hasWidth)),n=t.hasPX("maxHeight")&&(e.hasHeight||e.gridElement||e.tableElement);return!(!a&&!n)&&(t.data(i.DELEGATE_MAXWIDTHHEIGHT,"mainData",{maxWidth:a,maxHeight:n}),true)}processNode(t,a){const n=t.data(i.DELEGATE_MAXWIDTHHEIGHT,"mainData");if(n){const i=this.controller.createNodeWrapper(t,a,{containerType:e.CONSTRAINT,alignmentType:64,resetMargin:true});if(n.maxWidth&&(t.setLayoutWidth("0px"),i.setLayoutWidth("match_parent"),a.layoutElement)){const e=t.autoMargin;e.horizontal=false,e.left=false,e.right=false,e.leftRight=false}if(n.maxHeight&&(t.setLayoutHeight("0px"),i.setLayoutHeight("match_parent"),a.layoutElement)){const e=t.autoMargin;e.vertical=false,e.top=false,e.bottom=false,e.topBottom=false,n.maxHeight||!t.blockStatic||t.hasWidth||t.setLayoutWidth("match_parent",false)}return{parent:i,renderAs:i,outputAs:this.application.renderNode(new jo(a,i,i.containerType,4096,i.children))}}}}var Zo=squared.base.LayoutUI;const{BOX_STANDARD:Jo,NODE_ALIGNMENT:Qo}=squared.base.lib.enumeration;function tr(t,e){return t.pageFlow?t===e.firstStaticChild&&t.inlineFlow&&!t.centerAligned&&!t.rightAligned&&t.marginLeft<0&&Math.abs(t.marginLeft)<=e.marginLeft+e.paddingLeft&&!e.some(t=>t.multiline):t.leftTopAxis&&(t.left<0||!t.hasPX("left")&&t.right<0)}class er extends squared.base.ExtensionUI{is(t){return t.length>0&&!t.originalRoot&&"hidden"!==t.css("overflowX")}condition(t){return t.some(e=>tr(e,t))}processNode(t,a){const n=t.children.filter(e=>tr(e,t)),o=this.controller.createNodeWrapper(t,a,{children:n,containerType:e.CONSTRAINT});t.resetBox(10,o);let r,s=NaN,l=NaN;if(n.forEach(t=>{const e=t.linear;t.pageFlow?((isNaN(s)||e.left<s)&&(s=e.left),r=t):t.hasPX("left")?t.left<0&&(isNaN(s)||e.left<s)&&(s=e.left):t.right<0&&(isNaN(l)||e.right>l)&&(l=e.right)}),t.pageFlow)t.hasWidth&&o.setLayoutWidth("wrap_content");else{if(!isNaN(s)&&!t.has("left")){const e=t.linear.left-s;e>0&&t.modifyBox(16,e)}if(!isNaN(l)&&!t.has("right")){const e=l-t.linear.right;e>0&&t.modifyBox(4,e)}}return t.data(i.DELEGATE_NEGATIVEX,"mainData",{container:o,children:n,offsetLeft:t.marginLeft+t.paddingLeft,firstChild:r}),{parent:o,renderAs:o,outputAs:this.application.renderNode(new Zo(a,o,o.containerType,4104,o.children)),subscribe:true}}postBaseLayout(t){const e=t.data(i.DELEGATE_NEGATIVEX,"mainData");if(e){let a=e.firstChild;a&&(a=a.ascend({excluding:t,attr:"outerWrapper"}).pop()||a,a.anchor("left","parent"),a.anchorStyle("horizontal",0),a.anchorParent("vertical",0),a.modifyBox(16,e.offsetLeft),de.setConstraintDimension(a),a.positioned=true),e.children.forEach(e=>{e!==a&&(e.hasPX("left")?(e.translateX(e.left),e.alignSibling("left",t.documentId),e.constraint.horizontal=true):e.hasPX("right")&&(e.translateX(-e.right),e.alignSibling("right",t.documentId),e.constraint.horizontal=true))}),t.anchorParent("horizontal",0),t.anchorParent("vertical",0),de.setConstraintDimension(t),t.positioned=true}}beforeCascade(){for(const t of this.subscribers){const e=t.data(i.DELEGATE_NEGATIVEX,"mainData");if(e){const a=t.android("translationX"),i=t.android("translationY");if(""!==a||""!==i){const t=parseInt(a),n=parseInt(i);e.children.forEach(e=>{isNaN(t)||e.translateX(t),isNaN(n)||e.translateY(n)})}}}}}var ar=squared.base.LayoutUI;const{BOX_STANDARD:ir,NODE_ALIGNMENT:nr}=squared.base.lib.enumeration,or=(t,e)=>e.marginLeft<0&&(t.originalRoot||e.linear.left<Math.floor(t.box.left)),rr=(t,e)=>e.marginTop<0&&(t.originalRoot||e.linear.top<Math.floor(t.box.top));function sr(t,e){const a=t.documentBody;if(!e&&!a)return false;const n=t.originalRoot,o=a&&t.positionStatic,r=new Set,s=t.paddingTop+(a?t.marginTop:0),l=t.paddingRight+(a?t.marginRight:0),c=t.paddingBottom+(a?t.marginBottom:0),h=t.paddingLeft+(a?t.marginLeft:0);let d=false,u=false;return t.each(i=>{const f=n&&"fixed"===i.css("position");if(i.pageFlow||!e&&!f)return;const p=f&&i.autoPosition;if(i.hasPX("left")||p)if(!a||"100%"!==i.css("width")&&"100%"!==i.css("minWidth")){const e=i.left;((e>=0||n)&&e<h||e<0&&t.marginLeft>0||!i.hasPX("right")&&or(t,i))&&r.add(i)}else r.add(i),d=true;else if(i.hasPX("right"))if(o)r.add(i),d=true;else{const e=i.right;((e>=0||n)&&e<l||e<0&&t.marginRight>0||((t,e)=>e.marginRight<0&&(t.originalRoot||e.linear.right>Math.ceil(t.box.right)))(t,i))&&r.add(i)}else or(t,i)&&r.add(i);if(i.hasPX("top")||p)if(!a||"100%"!==i.css("height")&&"100%"!==i.css("minHeight")){const e=i.top;((e>=0||n)&&e<s||e<0&&t.marginTop>0||!i.hasPX("bottom")&&rr(t,i))&&r.add(i)}else r.add(i),u=true;else if(i.hasPX("bottom"))if(o)r.add(i),u=true;else{const e=i.bottom;((e>=0||n)&&e<c||e<0&&t.marginBottom>0||((t,e)=>e.marginBottom<0&&(t.originalRoot||e.linear.bottom>Math.ceil(t.box.bottom)))(t,i))&&r.add(i)}else rr(t,i)&&r.add(i)}),!!r.size&&(t.data(i.DELEGATE_POSITIVEX,"mainData",{children:Array.from(r),right:d,bottom:u}),true)}class lr extends squared.base.ExtensionUI{is(t){return t.length>0}condition(t){return sr(t,t.contentBoxWidth>0||t.contentBoxHeight>0||t.marginTop>0||t.marginRight>0||t.marginBottom>0||t.marginLeft>0)}processNode(t,a){const n=t.data(i.DELEGATE_POSITIVEX,"mainData");if(n){const i=this.controller.createNodeWrapper(t,a,{children:n.children,resetMargin:!t.originalRoot&&!t.pageFlow||a.layoutGrid,cascade:true,inheritDataset:true});return t.documentBody?(n.right&&i.setLayoutWidth("match_parent"),n.bottom&&i.setLayoutHeight("match_parent")):t.pageFlow||(!t.hasPX("width")&&t.hasPX("left")&&t.hasPX("right")&&t.setLayoutWidth("match_parent"),!t.hasPX("height")&&t.hasPX("top")&&t.hasPX("bottom")&&t.setLayoutHeight("match_parent")),{parent:i,renderAs:i,outputAs:this.application.renderNode(new ar(a,i,e.CONSTRAINT,32,i.children)),subscribe:true}}}postBaseLayout(t){const e=t.data(i.DELEGATE_POSITIVEX,"mainData");if(e){const a=t.documentId;e.children.forEach(e=>{const i=!e.pageFlow&&(e.absoluteParent!==e.documentParent||"fixed"===e.css("position")||t.documentBody),n=e.outerMostWrapper;e.hasPX("left")&&(i||(e.translateX(e.left),e.alignSibling("left",a),e.constraint.horizontal=true),n.modifyBox(16,t.borderLeftWidth)),e.hasPX("right")?(i||(e.translateX(-e.right),e.alignSibling("right",a),e.constraint.horizontal=true),n.modifyBox(4,t.borderRightWidth)):e.marginLeft<0&&or(t,e)&&(n.alignSibling("left",a),n.translateX(e.linear.left-t.bounds.left),n.modifyBox(16,t.borderLeftWidth),n.constraint.horizontal=true,e.setBox(16,{reset:1})),e.hasPX("top")&&(i||(e.translateY(e.top),e.alignSibling("top",a),e.constraint.vertical=true),n.modifyBox(2,t.borderTopWidth)),e.hasPX("bottom")?(i||(e.translateY(-e.bottom),e.alignSibling("bottom",a),e.constraint.vertical=true),n.modifyBox(8,t.borderBottomWidth)):e.marginTop<0&&rr(t,e)&&(n.alignSibling("top",a),n.translateY(e.linear.top-t.bounds.top),n.modifyBox(2,t.borderTopWidth),n.constraint.vertical=true,e.setBox(2,{reset:1}))})}}}var cr=squared.base.LayoutUI;const{CSS_UNIT:hr}=squared.lib.css,{NODE_ALIGNMENT:dr}=squared.base.lib.enumeration;function ur(t){const e=t.percentWidth;return e>0&&e<1}function fr(t){const e=t.percentHeight;return e>0&&e<1}class pr extends squared.base.ExtensionUI{is(t){return t.pageFlow}condition(t,e){return(t=>!t.documentParent.layoutElement&&!t.display.startsWith("table"))(t)&&(ur(t)&&!e.layoutConstraint&&("100%"!==t.cssInitial("width")||t.has("maxWidth",{type:4,not:"100%"}))&&(t.originalRoot||t.hasPX("height")||(e.layoutVertical||t.onlyChild)&&(e.blockStatic||e.hasPX("width")))||fr(t)&&("100%"!==t.cssInitial("height")||t.has("maxHeight",{type:4,not:"100%"}))&&(t.originalRoot||e.hasHeight))}processNode(t,a){const i=this.controller.createNodeWrapper(t,a,{resetMargin:true});return ur(t)?(i.setCacheValue("hasWidth",true),i.css("display","block"),i.setLayoutWidth("match_parent"),t.setLayoutWidth("100%"!==t.cssInitial("width")||t.hasPX("maxWidth")?"0px":"match_parent")):i.setLayoutWidth("wrap_content"),fr(t)?(i.setCacheValue("hasHeight",true),i.setLayoutHeight("match_parent"),t.setLayoutHeight("100%"!==t.cssInitial("height")||t.hasPX("maxHeight")?"0px":"match_parent")):i.setLayoutHeight("wrap_content"),{parent:i,renderAs:i,outputAs:this.application.renderNode(new cr(a,i,e.CONSTRAINT,4096,i.children))}}}const gr=squared.base,{getElementAsNode:mr}=squared.lib.session,{NODE_ALIGNMENT:yr,NODE_RESOURCE:br,NODE_TEMPLATE:Tr}=gr.lib.enumeration,Er=gr.NodeUI;function Sr(t,e){let a=false;const i=t.length;let n=0;while(n<i){const i=t[n++];i.toElementBoolean("checked")&&i.android("checked","true"),!a&&i.baseline&&i.parent===e&&e.layoutLinear&&(0===n||e.layoutHorizontal)&&(e.android("baselineAlignedChildIndex",n.toString()),a=true),i.positioned=true}return a}const Ar=t=>{var e;return(null===(e=t.name)||void 0===e?void 0:e.trim())||""};class vr extends squared.base.ExtensionUI{is(t){return t.is(e.RADIO)}condition(t){return""!==Ar(t.element)&&!t.positioned}processNode(t,a){var i;const o=Ar(t.element),r=[],s=[];let l=-1,c=-1;a.each((a,i)=>{const n=a.renderAs;let h;n&&(n!==t&&(h=a),a=n),a.is(e.RADIO)&&!a.rendered&&Ar(a.element)===o?(r.push(a),-1===l&&(l=i),c=i):!a.visible&&r.includes(a.labelFor)&&(c=i),h&&s.push(h)});let h=r.length;if(h>1){const{target:i,use:o}=t.dataset,h=Er.linearData(a.children.slice(l,c+1)).linearX,d=this.controller.createNodeGroup(t,r,{parent:a,delegate:true}),u=n.RADIOGROUP;return d.setControlType(u,e.LINEAR),h?(d.addAlign(136),d.android("orientation","horizontal")):(d.addAlign(16),d.android("orientation","vertical")),d.inherit(t,"alignment"),d.exclude({resource:br.ASSET}),d.render(i&&!o?this.application.resolveTarget(i):a),Sr(r,d)||(d.css("verticalAlign","middle"),d.setCacheValue("baseline",false),d.setCacheValue("verticalAlign","middle")),s.forEach(t=>t.hide({remove:true})),this.subscribers.add(d),{renderAs:d,outputAs:{type:1,node:d,controlName:u},parent:d,complete:true}}{r.length=0;const a=Ar(t.element),o=t.sessionId;if(document.querySelectorAll(`input[type=radio][name=${a}]`).forEach(t=>{const e=mr(t,o);e&&r.push(e)}),h=r.length,h>1&&r.includes(t)){const t=n.RADIOGROUP,a=new Map;let o=0;while(o<h){const e=r[o++].ascend({condition:t=>t.layoutLinear,error:e=>e.controlName===t,every:true});if(!e.length){a.clear();break}e.forEach(t=>a.set(t,(a.get(t)||0)+1))}for(const[n,o]of a.entries())if(o===h){n.unsafe("controlName",t),n.containerType=e.RADIO;const a=n.renderParent;if(a){const e=null===(i=a.renderTemplates)||void 0===i?void 0:i.find(t=>(null==t?void 0:t.node)===n);e&&(e.controlName=t)}return void Sr(r,n)}}}}postBaseLayout(t){t.renderEach(e=>{e.naturalElement&&e.toElementBoolean("checked")&&t.android("checkedButton",e.documentId)})}}const xr=squared.lib,{formatPX:wr}=xr.css,{BOX_STANDARD:_r,NODE_RESOURCE:Nr,NODE_TEMPLATE:Ir}=squared.base.lib.enumeration;class Rr extends squared.base.ExtensionUI{is(t){return t.length>0}condition(t){return t.overflowX&&t.hasPX("width")||t.overflowY&&t.hasPX("height")&&t.hasHeight}processNode(t,a){const i=[],r=[],s=n.HORIZONTAL_SCROLL,l=t.api<29?n.VERTICAL_SCROLL:o.VERTICAL_SCROLL;if(t.overflowX&&t.overflowY?i.push(s,l):t.overflowX?i.push(s):t.overflowY&&i.push(l),i.includes(s)){const e=[];let a=t.actualWidth-t.contentBoxWidth,n=true,o=0;t.each(t=>{if(t.textElement&&"nowrap"!==t.css("whiteSpace"))e.push(t);else{const e=t.actualWidth;if(e<=a)return;e>o&&(o=e)}n=false}),n?i.shift():o>a&&(a=o),i.length&&e.forEach(t=>{t.textElement&&t.css("maxWidth",wr(a))})}const c=i.length;if(c){for(let n=0;n<c;++n){const o=this.application.createNode({parent:a});0===n?(o.inherit(t,"base","initial","styleMap"),a.appendTry(t,o)):(o.inherit(t,"base"),o.exclude({resource:Nr.BOX_STYLE})),o.setControlType(i[n],e.BLOCK),o.exclude({resource:Nr.ASSET}),o.resetBox(480),o.childIndex=t.childIndex,r.push(o)}for(let e=0;e<c;++e){const i=r[e];switch(i.controlName){case l:t.setLayoutHeight("wrap_content"),i.setLayoutHeight(wr(t.actualHeight)),i.android("scrollbars","vertical"),i.cssApply({width:1===c&&t.css("width")||"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case s:t.setLayoutWidth("wrap_content"),i.setLayoutWidth(wr(t.actualWidth)),i.android("scrollbars","horizontal"),i.cssApply({height:1===c&&t.css("height")||"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"})}if(0===e){const e=t.dataset;i.render(e.target&&!e.use?this.application.resolveTarget(e.target):a)}else i.render(r[e-1]);i.unsetCache(),this.application.addLayoutTemplate(i.renderParent||a,i,{type:1,node:i,controlName:i.controlName})}let n,o=true;do{n=r.pop(),o?(a=n,n.innerWrapped=t,o=false):n.innerWrapped=a}while(r.length);return t.exclude({resource:Nr.BOX_STYLE}),t.resetBox(30,n),t.parent=a,{parent:a}}}}var Cr={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},Lr={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","start","top","right","end","bottom","drawable","width","height","gravity"],">":{shape:Cr.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const Pr={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},Or={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":true,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:Pr.path},"#":"include"}};var kr={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:Pr.path},"#":"include"}};const Dr=squared.lib,Mr=squared.base,{reduceRGBA:Wr}=Dr.color,{extractURL:Br,formatPercent:Xr,formatPX:Gr,getBackgroundPosition:Hr}=Dr.css,{truncate:Vr}=Dr.math,{CHAR:Fr,XML:zr}=Dr.regex,{delimitString:Ur,flatArray:qr,isEqual:Yr,objectMap:jr,resolvePath:Kr}=Dr.util,{applyTemplate:$r}=Dr.xml,{BOX_STANDARD:Zr,NODE_RESOURCE:Jr}=Mr.lib.enumeration,Qr=Mr.NodeUI;function ts(t,e=-1,a=false){const{style:i,color:n}=t,o=us(t.width),r=fs(n);switch(i){case"solid":break;case"dotted":r.dashWidth=Gr(o),r.dashGap=r.dashWidth;break;case"dashed":{let t,e;switch(o){case 1:case 2:t=3*o,e=t-1;break;case 3:t=6,e=3;break;default:t=2*o,e=4}r.dashWidth=Gr(t),r.dashGap=Gr(e);break}case"inset":case"outset":case"groove":case"ridge":{const t=n.rgba;let r=1;if(1===o)"inset"!==i&&"outset"!==i||(r=.5);else{const n=t.r===t.g&&t.g===t.b;let o=0;if("ridge"===i?(a=!a,o+=.25):"groove"===i?o+=.25:n?"inset"===i&&(a=!a):"outset"===i&&(a=!a),a)switch(e){case 0:case 3:e=1;break;case 1:case 2:e=0}switch(e){case 0:case 3:n&&(r=.5+o);break;case 1:case 2:r=n?.75+o:-.75}}if(1!==r){const e=Wr(t,r,n.valueAsRGBA);if(e)return fs(e)}break}}return r}function es(t,e=-1,a=false,i=false){if(t){let n;if(ns(t.style)){const o=parseFloat(t.width);n=ts(t,e,!i),n.width=Gr(i?2*Math.ceil(o/2):a?Math.ceil(o/2):us(t.width))}else n=ts(t),n.width=Gr(us(t.width));return n}}function as(t){const[e,a,i,n]=t,o={};let r=false;return"0px"!==e&&(o.topLeftRadius=e,r=true),"0px"!==a&&(o.topRightRadius=a,r=true),"0px"!==i&&(o.bottomRightRadius=i,r=true),"0px"!==n&&(o.bottomLeftRadius=n,r=true),r?o:void 0}function is(t){const e=cs(t,false);return""!==e?{color:e}:void 0}function ns(t,e=0){switch(t){case"groove":case"ridge":case"inset":case"outset":return 1!==e;default:return false}}function os(t,e,a,i,n,o,r=0,s){const l=us(e.width),c=Math.max(1,Math.floor(l/3)),h=r>0?Gr(r):"";let d="-"+Gr(c+r+1);t.push({top:a?h:d,right:i?h:d,bottom:n?h:d,left:o?h:d,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Gr(c)},ts(e)),corners:s}});const u=l-c+r,f=Gr(u);d="-"+Gr(u+1),t.push({top:a?f:d,right:i?f:d,bottom:n?f:d,left:o?f:d,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Gr(c)},ts(e)),corners:s}})}function rs(t,e,a){return!t.includes(" ")&&e.includes(" ")?Fr.LOWERCASE.test(t)?("initial"===t?a:t)+" 0px":a+" "+t:"initial"===t?"0px":t}function ss(t,e=21,a){const i=t.type,n={type:i,item:false,positioning:true},o=e>=21;switch(i){case"conic":{const e=t.center;n.type="sweep",o?(n.centerX=(2*e.left).toString(),n.centerY=(2*e.top).toString()):(n.centerX=Xr(e.leftAsPercent),n.centerY=Xr(e.topAsPercent));break}case"radial":{const{center:e,radius:a}=t;o?(n.gradientRadius=a.toString(),n.centerX=e.left.toString(),n.centerY=e.top.toString()):(n.gradientRadius=Gr(a),n.centerX=Xr(e.leftAsPercent),n.centerY=Xr(e.topAsPercent));break}case"linear":{const{angle:e,angleExtent:i,dimension:o}=t,{width:r,height:s}=o;let l=i.x,c=i.y;e<=90?(c+=s,n.startX="0",n.startY=s.toString()):e<=180?(n.startX="0",n.startY="0"):e<=270?(l+=r,n.startX=r.toString(),n.startY="0"):(l+=r,c+=s,n.startX=r.toString(),n.startY=s.toString()),n.endX=Vr(l,a),n.endY=Vr(c,a);break}}const r=t.colorStops;if(o)n.item=ms(r);else{const t=r.length;n.startColor=cs(r[0].color),n.endColor=cs(r[t-1].color),t>2&&(n.centerColor=cs(r[Math.floor(t/2)].color))}return n}function ls(t,e,a=true){const i=[],n=[{"xmlns:android":h.android,item:i}],o=!a&&is(t.backgroundColor);return o&&i.push({shape:{"android:shape":"rectangle",solid:o}}),e&&e.forEach(t=>{const e=t.gradient;i.push(e?{shape:{"android:shape":"rectangle",gradient:e}}:t)}),n}function cs(t,e=true){const a=B.addColor(t,e);return""!==a?"@color/"+a:""}function hs(t,e){while(t.length<e)t=t.concat(t.slice(0));return t.length=e,t}function ds(t,e,a,i,n,o){const r=e[a];if(r){const e=us(r.width);if("double"===r.style&&e>1)os(t.item,r,0===a,1===a,2===a,3===a,n,i);else{const s=e>1&&ps(r);if(s){const i="-"+Gr(e+n+1);t.item.push({top:0===a?"":i,right:1===a?"":i,bottom:2===a?"":i,left:3===a?"":i,shape:{"android:shape":"rectangle",stroke:es(r,a,s,true)}})}const l="-"+Gr((s?Math.ceil(e/2):e)+n+1);t.item.push({top:0===a?o:l,right:1===a?o:l,bottom:2===a?o:l,left:3===a?o:l,shape:{"android:shape":"rectangle",corners:i,stroke:es(r,a,s)}})}}}const us=t=>Math.round(parseFloat(t)),fs=t=>({color:cs(t),dashWidth:"",dashGap:""}),ps=t=>"groove"===t.style||"ridge"===t.style||"double"===t.style&&us(t.width)>1,gs=(t,e)=>`${t}px ${e}px`;function ms(t,e){return jr(t,t=>({color:cs(t.color),offset:Vr(t.offset,e)}))}function ys(t,e,a=0,i=0,n){return n?(a=Vr(a,n),i=Vr(i,n),t=Vr(a+t,n),e=Vr(i+e,n)):(t+=a,e+=i),`M${a},${i} ${t},${i} ${t},${e} ${a},${e} Z`}class bs extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={drawOutlineAsInsetBorder:true},this.eventOnly=true}beforeParseDocument(){this._resourceSvgInstance=this.controller.localSettings.svg.enabled?this.application.builtInExtensions[i.RESOURCE_SVG]:void 0}afterResources(){const t=this.application.userSettings,e=this.options.drawOutlineAsInsetBorder;let a=false;const i=(t,e,i)=>{B.addTheme({name:t,parent:e,items:{"android:windowBackground":i,"android:windowFullscreen":"true","android:fitsSystemWindows":"true"}}),a=true},n=(t,e)=>{if(t!==e&&!e.hasResource(Jr.BOX_SPACING)&&0===t.percentWidth)switch(t.cssInitial("maxWidth")){case"":case"auto":case"100%":{const t=e.renderChildren;1===t.length&&e.removeTry(t[0]);break}}},o=(e,o)=>{if(""!==o){const r="@drawable/"+B.insertStoredAsset("drawables",`${e.containerName.toLowerCase()}_${e.controlId}`,o);if(!a){if("HTML"===e.tagName)return void i(t.manifestThemeName,t.manifestParentThemeName,r);{const a=e.innerMostWrapped;if(a.documentBody&&(""!==e.backgroundColor||e.visibleStyle.backgroundRepeatY))return i(t.manifestThemeName,t.manifestParentThemeName,r),void n(a,e)}}e.android("background",r,false)}};this.cacheProcessing.each(r=>{var s;const l=r.data(B.KEY_NAME,"boxStyle");if(l){if(r.inputElement){const t=r.companion;if("LABEL"===(null==t?void 0:t.tagName)&&!t.visible){const e=null===(s=t.data(B.KEY_NAME,"boxStyle"))||void 0===s?void 0:s.backgroundColor;e&&(l.backgroundColor=e)}}const c=this.getDrawableImages(r,l),h=l.outline;let[d,u]=this.getDrawableBorder(l,void 0,c,e&&h?function(t){const e=us(t.width);return 2===e&&"double"===t.style?3:e}(h):0);const f=void 0===d&&void 0===u;if(h&&(e||f)){const[t,e]=this.getDrawableBorder(l,h,f?c:void 0,void 0,!f);t?d||(d=t):e&&(u?u[0].item=u[0].item.concat(e[0].item):u=e)}if(d)o(r,$r("shape",Cr,d));else if(u)o(r,$r("layer-list",Lr,u));else{const e=l.backgroundColor;if(e){const o=cs(e,false);if(""!==o){if(!a){if("HTML"===r.tagName)return void i(t.manifestThemeName,t.manifestParentThemeName,o);{const e=r.innerMostWrapped;if(e.documentBody)return i(t.manifestThemeName,t.manifestParentThemeName,o),void n(e,r)}}const s=r.data(B.KEY_NAME,"fontStyle");s?s.backgroundColor=e:r.android("background",o,false)}}}}})}getDrawableBorder(t,e,a,i=0,n=false){const o=new Array(4),r=new Array(4),s=n?void 0:function(t){if(t){const e=t.length;if(1===e)return{radius:t[0]};if(8===e){const a=new Array(4);for(let i=0,n=0;i<e;i+=2)a[n++]=Gr((parseFloat(t[i])+parseFloat(t[i+1]))/2);return as(a)}return as(t)}}(t.borderRadius),l=i>0?Gr(i):"";let c,d,u,f,p=true,g=true;if(e){d=e;for(let t=0;t<4;++t)o[t]=e,r[t]=true}else{o[0]=t.borderTop,o[1]=t.borderRight,o[2]=t.borderBottom,o[3]=t.borderLeft;for(let t=0;t<4;++t){const e=o[t];e?(p&&d&&(p=Yr(d,e),p||(g=false)),d=e,r[t]=true):(r[t]=false,g=false)}}if(g&&(c=d),c&&!ns(c.style,us(c.width))&&!("double"===c.style&&parseInt(c.width)>1)||!d&&(s||(null==a?void 0:a.length))){const e=!!c&&es(c);(null==a?void 0:a.length)||i>0||n?(f=ls(t,a,n),(s||e)&&f[0].item.push({top:l,right:l,left:l,bottom:l,shape:{"android:shape":"rectangle",corners:s,stroke:e}})):u=function(t,e,a){return[{"xmlns:android":h.android,"android:shape":"rectangle",stroke:t,solid:e,corners:a}]}(e,!n&&is(t.backgroundColor),s)}else if(d)if(f=ls(t,a,n),p&&!ns(d.style)){const t=us(d.width);if("double"===d.style&&t>1)os(f[0].item,d,r[0],r[1],r[2],r[3],i,s);else{const e="-"+Gr(t+i+1);f[0].item.push({top:r[0]?l:e,right:r[1]?l:e,bottom:r[2]?l:e,left:r[3]?l:e,shape:{"android:shape":"rectangle",corners:s,stroke:es(d)}})}}else{const t=f[0];ds(t,o,0,s,i,l),ds(t,o,3,s,i,l),ds(t,o,2,s,i,l),ds(t,o,1,s,i,l)}return[u,f]}getDrawableImages(t,a){const i=a.backgroundImage,n=t.data(B.KEY_NAME,"embedded");if(i||n){const o=this.resource,l=t.localSettings.screenDimension,{bounds:c,fontSize:d}=t,{width:u,height:f}=c,p=[],g=[],m=[],y=[],b=[],T=a.backgroundPositionX.split(zr.SEPARATOR),E=a.backgroundPositionY.split(zr.SEPARATOR);let S=a.backgroundRepeat.split(zr.SEPARATOR),A=a.backgroundSize.split(zr.SEPARATOR),v=0;if(i){const e=this._resourceSvgInstance,a=i.length;S=hs(S,a),A=hs(A,a);let n=false;for(let r=0;r<a;++r){let a=i[r],s=false;if("string"==typeof a){if("initial"!==a){if(e){const[i,n]=e.createSvgElement(t,a);if(i&&n){const a=e.createSvgDrawable(t,n);if(""!==a){const e=t.data(B.KEY_NAME,"svgViewBox")||{width:n.width.baseVal.value,height:n.height.baseVal.value};if(!t.svgElement){let{width:t,height:a}=e;if(t>u||a>f){const e=t/u,i=a/f;e>i?e>1?(t=u,a/=e):a=f*(i/e):i>1?(a=f,t/=i):t=u*(e/i)}e.width=t,e.height=a}g[v]=a,y[v]=e,m[v]=true,s=true}i.removeChild(n)}}if(!s){const t=Br(a);if(""!==t)if(t.startsWith("data:image/")){const e=o.getRawData(t);if(e){const{base64:t,filename:a}=e;t&&(g[v]=a.substring(0,a.lastIndexOf(".")),y[v]=e.width&&e.height?{width:e.width,height:e.height}:void 0,o.writeRawImage(a,t),s=true)}}else{a=Kr(t);const e=o.addImageSet({mdpi:a});g[v]=e,""!==e&&(y[v]=o.getImage(a),s=true)}}}}else if(a.colorStops.length>1){const e=ss(a,t.api);e&&(g[v]=e,y[v]=a.dimension,s=true)}if(s){const e=T[r]||T[r-1],a=E[r]||E[r-1];b[v]=Hr(rs(e,a,"left")+" "+rs(a,e,"top"),t.actualDimension,{fontSize:d,imageDimension:y[v],imageSize:A[r],screenDimension:l}),v++}else S[r]=void 0,A[r]=void 0,n=true}n&&(S=qr(S),A=qr(A))}n&&(0===v&&(S.length=0,A.length=0),n.filter(t=>t.visible&&(t.imageElement||"INPUT_IMAGE"===t.containerName)).forEach(e=>{const a=e.element,i=o.addImageSrc(a);if(""!==i){const n=e.bounds;g[v]=i,S[v]="no-repeat",A[v]=gs(e.actualWidth,e.actualHeight);const r=Hr("INPUT_IMAGE"===e.containerName?gs(0,0):gs(n.left-c.left+t.borderLeftWidth,n.top-c.top+t.borderTopWidth),t.actualDimension,{fontSize:d,imageDimension:n,screenDimension:l}),s=o.getImage(a.src);if(!t.hasPX("width")){const e=((null==s?void 0:s.width)||0)+r.left-(t.paddingLeft+t.borderLeftWidth);e>0&&t.modifyBox(256,e)}y[v]=s,b[v]=r,v++}}));const{backgroundClip:x,backgroundOrigin:w}=a,_=t.innerMostWrapped.documentBody;for(let a=v-1,i=0;a>=0;--a){const n=g[a],o={order:Number.POSITIVE_INFINITY};if("object"==typeof n&&!n.positioning){o.gravity="fill",o.gradient=n;continue}const d=b[a],T=A[a],E=4===d.orientation.length;let v=y[a],N=NaN,I=NaN;v&&(v.width&&v.height?(N=v.width,I=v.height):v=void 0);let R=0,C=0,L=0,P=0,O=NaN,k=NaN,D=NaN,M=NaN,W=0,X=false,G=false,H=0,V=0,F="",z="",U="",q="",Y="",j=S[a];if(j.includes(" ")){const[t,e]=j.split(" ");j="no-repeat"===t?"no-repeat"===e?"no-repeat":"repeat-y":"no-repeat"===e?"repeat-x":"repeat"}else"space"!==j&&"round"!==j||(j="repeat");switch(j){case"repeat":F="repeat",z="repeat";break;case"repeat-x":F="repeat",z="disabled";break;case"repeat-y":F="disabled",z="repeat";break;default:F="disabled",z="disabled"}switch(d.horizontal){case"left":case"0%":case"0px":U=t.localizeString("left"),E&&(M=0,X=true);break;case"center":case"50%":U="center_horizontal";break;case"right":case"100%":U=t.localizeString("right"),k=0,E&&(X=true);break;default:d.leftAsPercent<1?(U="left",M=0,X=true):(U="right",k=0,X=true);break}switch(d.vertical){case"top":case"0%":case"0px":q="top",E&&(O=0,G=true);break;case"center":case"50%":q="center_vertical";break;case"bottom":case"100%":q="bottom",D=0,E&&(G=true);break;default:d.topAsPercent<1?(q="top",O=0,G=true):(q="bottom",D=0,G=true);break}switch(T){case"auto":case"auto auto":case"initial":"string"!=typeof n&&(Y="fill");break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":case"contain":case"cover":case"round":if(F="",z="",Y="fill",_){const e=t.visibleStyle;e.backgroundRepeat=true,e.backgroundRepeatY=true}break;default:""!==T&&T.split(" ").forEach((e,a)=>{"100%"===e?Y=0===a?"fill_horizontal":Ur({value:Y},"fill_vertical"):"auto"!==e&&(0===a?"repeat"!==F&&(H=t.parseWidth(e,false)):"repeat"!==z&&(V=t.parseHeight(e,false)))})}let K,$=true!==m[a],Z=t.is(e.IMAGE)||"string"!=typeof n,J=false,Q=false,tt=false,et=false,at=true;if(v){let e=u,a=f;if("contain"!==T&&!t.hasWidth){const i=window.innerWidth,n=l.width,o=()=>f*(e/u);u===i?i>=n?(e=n,a=o()):({width:e,height:a}=Qr.refitScreen(t,c)):i>=n&&(e=t.actualBoxWidth(u),a=o())}const i=N/e,n=I/a,o=()=>N*V/I,r=()=>I*H/N,s=()=>e*(i/n),h=()=>a*(n/i),p=(t,e)=>{F="",z="",Y="",t&&(U="",q=""),e&&(O=NaN,k=NaN,D=NaN,M=NaN,X=false,G=false),at=false};switch(T){case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(I>=f){tt=true,et=true,V=f,Z=true;break}case"cover":{const o="cover"===T;if(p(o,!o),i<n)if(H=e,V=h(),V>f){const e=d.topAsPercent;0!==e&&(R=Math.round((f-V)*e)),t.hasPX("height")||t.css("height",Gr(f-t.contentBoxHeight)),X||(Y="center_horizontal|fill_horizontal")}else V<f&&(H=e*f/V,V=f),X||(Y="center_horizontal|fill");else if(i>n){if(H=s(),V=a,H>u){if(t.hasWidth){const t=d.leftAsPercent;0!==t&&(P=Math.round((u-H)*t))}G||(Y="center_vertical|fill_vertical")}else H<u&&(H=u,V=a*u/H),G||(Y="center_vertical|fill");X=false}else Y="fill";G=false;break}case"contain":p(true,true),i>n?(V=h(),H=N<u?o():u,q="center_vertical",Y="fill_horizontal"):i<n?(H=s(),V=I<f?r():f,U="center_horizontal",Y="fill_vertical"):Y="fill";break;default:0===H&&V>0&&(H=o()),0===V&&H>0&&(V=r())}}if(x){const{top:e,right:a,left:i,bottom:n}=x;0===H?H=u:H+=t.contentBoxWidth,0===V?V=f:V+=t.contentBoxHeight,H-=i+a,V-=e+n,isNaN(k)?P+=i:C+=a,isNaN(D)?R+=e:L+=n,U="",q=""}else if(at&&(w&&("repeat"!==F&&(isNaN(k)?P+=w.left:C+=w.right),"repeat"!==z&&(isNaN(D)?R+=w.top:L+=w.bottom)),!Z&&!_)){if(N>u){H=u-(X?Math.min(d.left,0):0);let e=true;if("repeat"===z&&""!==U){switch(U){case"start":case"left":if(C+=u-N,X){const t=d.left;t<0&&(W=t),H=0,C-=t,e=false,U="right",z=""}else U="";M=NaN,k=0;break;case"center_horizontal":U+="|fill_vertical",z="";break;case"right":if(P+=u-N,X){const a=d.right;a<0&&(W=a),H=0,P-=a,e=false,U=t.localizeString("left"),z=""}else U="";M=0,k=NaN}X=false,q=""}e&&(Y=Ur({value:Y,not:["fill"]},"fill_horizontal")),"disabled"!==F&&(F=""),J=true}if(I>f){V=f;let t=true;if("repeat"===F&&""!==q){switch(q){case"top":if(G){L+=f-I;const e=d.top;e<0&&(W=e),V=0,L-=e,t=false,q="bottom",F="",O=NaN,D=0}break;case"center_vertical":q+="|fill_horizontal",F="";break;case"bottom":if(R+=f-I,G){const e=d.bottom;e<0&&(W=e),V=0,R-=e,t=false,q="top"}else q="";F="",O=0,D=NaN}U="",G=false}t&&(Y=Ur({value:Y,not:["fill"]},"fill_vertical")),"disabled"!==z&&(z=""),Q=true}}switch(t.controlName){case r.TOOLBAR:case s.TOOLBAR:U="",q="",Y="fill"}if(Z)0===H&&0===V&&"fill"===Y&&($=false);else{0===H&&N<u&&"disabled"===F&&(H=N,tt=true),0===V&&I<f&&"disabled"===z&&(V=I,et=true);const e=U;if("repeat"===F){switch(q){case"top":isNaN(O)||(F=""),q="";break;case"bottom":H>0&&!tt?F="":et&&(H=N,Y=Ur({value:Y,not:["fill"]},"fill_horizontal"),I>=N&&(F=""))}U=""}if("repeat"===z){switch(e){case"start":case"left":isNaN(M)||(z=""),U="";break;case"center_horizontal":t.renderChildren.length&&(z="");break;case"right":case"end":V>0&&!et?z="":tt&&(V=I,Y=Ur({value:Y,not:["fill"]},"fill_vertical"),N>=I&&(z=""))}q=""}""===U||J||(Y=Ur({value:Y},U),U=""),""===q||Q||(Y=Ur({value:Y},q),q="")}if("string"==typeof n)K="@drawable/"+n;else if(n.item){0===H&&(H=(null==v?void 0:v.width)||Qr.refitScreen(t,t.actualDimension).width),0===V&&(V=(null==v?void 0:v.height)||Qr.refitScreen(t,t.actualDimension).height);const e=B.insertStoredAsset("drawables",`${t.controlId}_gradient_${a+1}`,$r("vector",kr,[{"xmlns:android":h.android,"xmlns:aapt":h.aapt,"android:width":Gr(H),"android:height":Gr(V),"android:viewportWidth":H.toString(),"android:viewportHeight":V.toString(),path:{pathData:ys(H,V),"aapt:attr":{name:"android:fillColor",gradient:n}}}]));""!==e&&(K="@drawable/"+e,o.order=i++),"left"!==U&&"start"!==U||(U=""),"top"===q&&(q=""),"fill"!==Y&&("repeat"===F&&"repeat"===z?Y="fill":"repeat"===F?Y="fill_vertical"===Y?"fill":"fill_horizontal":"repeat"===z&&(Y="fill_horizontal"===Y?"fill":"fill_vertical"))}const it="center_horizontal"===U&&"center_vertical"===q?"center":Ur({value:U},q);if(K){if($&&(!Z&&(""!==Y&&""!==it||"repeat"===F||"repeat"===z||_)||tt||et)){let t="";"disabled"===F&&"disabled"===z?(t="disabled",F="",z=""):"repeat"===F&&"repeat"===z&&(t="repeat",F="",z=""),o.gravity=Y,o.bitmap=[{src:K,gravity:it,tileMode:t,tileModeX:F,tileModeY:z}]}else o.gravity=Ur({value:it},Y),o.drawable=K;(o.drawable||o.bitmap||o.gradient)&&(isNaN(D)?(G&&(R+=d.top),isNaN(O)||(R+=O),0!==R&&(o.top=Gr(R)),W<0&&(o.bottom=Gr(W))):(G&&(L+=d.bottom),L+=D,0!==L&&(o.bottom=Gr(L)),W<0&&(o.top=Gr(W))),isNaN(k)?(X&&(P+=d.left),isNaN(M)||(P+=M),0!==P&&(o[t.localizeString("left")]=Gr(P)),W<0&&(o[t.localizeString("right")]=Gr(W))):(X&&(C+=d.right),C+=k,0!==C&&(o[t.localizeString("right")]=Gr(C)),W<0&&(o[t.localizeString("left")]=Gr(W))),H>0&&(o.width=Gr(H)),V>0&&(o.height=Gr(V)),p.push(o))}}return p.sort((t,e)=>{const a=t.order,i=e.order;return a===i?0:a<i?-1:1})}}}const{capitalize:Ts}=squared.lib.util;class Es extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(t){const e=this.application.viewModel;if(e){const a=this.controller,i=new Set;this.cache.each(t=>{t.styleElement&&t.visible&&t.unsafe("namespaces").forEach(e=>{const a=et(t.dataset,"viewmodel"+Ts(e));if(a){for(const i in a)t.attr(e,i,`@{${a[i]}}`,true);i.add(t)}})}),i.size&&t.forEach(t=>{const n=t.node;for(const t of i)if(t.ascend({condition:t=>t===n,attr:"renderParent"}).length){const{import:o,variable:r}=e,{depth:s,id:l}=n,c="\t".repeat(s),h="\t".repeat(s+1),d="\t".repeat(s+2);let u=c+"<layout {#0}>\n"+h+"<data>\n";o&&o.forEach(t=>u+=d+`<import type="${t}" />\n`),r&&r.forEach(t=>u+=d+`<variable name="${t.name}" type="${t.type}" />\n`),u+=h+"</data>\n",a.addBeforeOutsideTemplate(l,u),a.addAfterOutsideTemplate(l,c+"</layout>\n"),n.depth=s-1,i.delete(t);break}})}}}const Ss=squared.lib,{XML:As}=Ss.regex,{convertUnderscore:vs,fromLastIndexOf:xs,safeNestedArray:ws,safeNestedMap:_s}=Ss.util,Ns=B.STORED,Is=/\dpx$/,Rs=/:(\w+)="(-?[\d.]+px)"/;function Cs(t,e,a){if(t.get(e)===a)return e;for(const[i,n]of t.entries())if(a===n&&i.startsWith(e))return i;return B.generateId("dimen",e)}function Ls(t,e,a){const i=e.namespace(t);for(const n in i)if("text"!==n){const o=i[n];Is.test(o)&&ws(a,`${t},${n},${o}`).push(e)}}const Ps=t=>xs(t,".");class Os extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){const t=Ns.dimens,e={};this.cache.each(t=>{if(t.visible){const a=t.containerName.toLowerCase(),i=_s(e,a);Ls("android",t,i),Ls("app",t,i)}});for(const a in e){const i=e[a];for(const e in i){const[n,o,r]=e.split(As.SEPARATOR),s=Cs(t,Ps(a)+"_"+vs(o),r);i[e].forEach(t=>t[n](o,"@dimen/"+s)),t.set(s,r)}}}afterFinalize(){if(this.controller.hasAppendProcessing()){const t=Ns.dimens;this.application.layouts.forEach(e=>{let a,i=e.content;while(null!==(a=Rs.exec(i))){const[e,n,o]=a;if("text"!==n){const a=Cs(t,"custom_"+vs(n),o);i=i.replace(e,e.replace(o,"@dimen/"+a)),t.set(a,o)}}e.content=i})}}}const ks=squared.lib,{XML:Ds}=ks.regex,{capitalize:Ms,convertInt:Ws,convertWord:Bs,safeNestedArray:Xs,safeNestedMap:Gs,objectMap:Hs,spliceArray:Vs,trimBoth:Fs}=ks.util,{NODE_RESOURCE:zs}=squared.base.lib.enumeration,Us=B.STORED,qs=/^(\w*?)(?:_(\d+))?$/,Ys=/"/g,js={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},Ks={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},$s={"arial black":"sans-serif","ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},Zs={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},Js={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'},Qs=Object.keys(Js);function tl(t,e,a){const i=t.length;e.split(";").forEach(e=>{for(let n=0;n<i;++n){let o=t[n],r=-1,s="";for(const t in o)if(t===e){r=n,s=t,n=i;break}if(-1!==r){o=t[r],o[s]=o[s].filter(t=>!a.includes(t)),0===o[s].length&&delete o[s];break}}})}class el extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:false},this.eventOnly=true}afterParseDocument(){const t=this.resource,e=this.options.disableFontAlias,a="dp"===t.userSettings.convertPixels,{fonts:i,styles:n}=Us,o={},r={};let s=[];this.cache.each(t=>{t.data(B.KEY_NAME,"fontStyle")&&t.hasResource(zs.FONT_STYLE)&&Xs(o,t.containerName).push(t)});for(const n in o){const l=[],c=o[n];s=s.concat(c),c.forEach(n=>{const{id:o,companion:r,api:s}=n,c=n.data(B.KEY_NAME,"fontStyle");let{fontFamily:h,fontStyle:d,fontWeight:u}=c;"LABEL"!==(null==r?void 0:r.tagName)||r.visible||(n=r),h.replace(Ys,"").split(Ds.SEPARATOR).some((a,o,r)=>{let l=a=Fs(a,"'").toLowerCase(),c="";if(!e&&$s[l]&&(l=this.options.systemDefaultFont),s>=js[l]||!e&&s>=js[Ks[l]])h=l;else{if(!d||!u)return false;{let e=false;if(t.getFont(a,d,u))e=true;else{const i=t.getFont(a,d);if(i)c=u,u=i.fontWeight.toString(),e=true;else{if(o<r.length-1)return false;h=this.options.systemDefaultFont}}if(e){l=Bs(l);const t=i.get(l)||{};t[a+"|"+d+"|"+u]=Zs[u]||u,i.set(l,t),h="@font/"+l}}}return"normal"===d&&(d=""),""!==c?u=c:("400"===u||n.api<26)&&(u=""),parseInt(u)>500&&(d+=(d?"|":"")+"bold"),true});const f={fontFamily:h,fontStyle:d,fontWeight:u,fontSize:c.fontSize,color:B.addColor(c.color),backgroundColor:B.addColor(c.backgroundColor)};for(let t=0;t<6;++t){const e=Qs[t];let i=f[e];i&&(3===t&&a&&(i=Z(i,true)),Xs(Gs(l,t),Js[e]+i+'"').push(o))}}),r[n]=l}const l={};for(const t in r){const e={};l[t]=e;const a=r[t].filter(t=>!!t).sort((t,e)=>{let a=0,i=0,n=0,o=0;for(const e in t){const i=t[e].length;a=Math.max(i,a),n+=i}for(const t in e){const a=e[t];if(a){const t=a.length;i=Math.max(t,i),o+=t}}return a!==i?a>i?-1:1:n!==o?n>o?-1:1:0});do{if(1===a.length){const t=a[0];for(const a in t){const i=t[a];i.length&&(e[a]=i)}break}{const i={};for(let n=0;n<a.length;++n){const r={},s=a[n];for(const e in s){const l=s[e];if(0===l.length)continue;if(l.length===o[t].length){i[e]=l,a[n]={};break}const c={};let h=false;for(let t=0;t<a.length;++t)if(n!==t){const e=a[t];for(const t in e){const a=e[t];a.length&&l.forEach(e=>{a.includes(e)&&Xs(c,t).push(e)})}}for(const t in c){const a=c[t];a.length>1&&(r[e<t?e+";"+t:t+";"+e]=a,h=true)}h||(r[e]=l)}if(Object.keys(r).length){const t={},i=new Set,n={};for(const t in r)n[t]=r[t].join(",");for(const e in r)for(const a in r){const o=n[e];if(e!==a&&o===n[a]){let n=t[o];n||(n=new Set(e.split(";")),t[o]=n),a.split(";").forEach(t=>n.add(t)),i.add(e).add(a)}}for(const t of i)delete r[t];for(const t in r)tl(a,t,r[t]),e[t]=r[t];for(const i in t){const n=Array.from(t[i]).sort().join(";"),o=Hs(i.split(Ds.SEPARATOR),t=>parseInt(t));tl(a,n,o),e[n]=o}}}const n=Object.keys(i);n.length&&(e[n.join(";")]=i[n[0]]),Vs(a,t=>{for(const e in t)if(t[e].length)return false;return true})}}while(a.length)}const c={},h={},d=new Set;for(const t in l){const e=l[t],a=[];for(const t in e){const i=[];t.split(";").forEach(t=>{const e=Ds.ATTRIBUTE.exec(t);e&&i.push({key:e[1],value:e[2]})}),a.push({name:"",parent:"",items:i,ids:e[t]})}a.sort((t,e)=>{let a=t.ids.length,i=e.ids.length;return a===i&&(a=t.items.length,i=e.items.length,a===i&&(a=t.name,i=e.name)),a<=i?1:-1});const i=a.length;for(let e=0;e<i;++e)a[e].name=Ms(t)+(e>0?"_"+e:"");c[t]=a}for(const t in c)c[t].forEach(t=>{var e;return null===(e=t.ids)||void 0===e?void 0:e.forEach(e=>Xs(h,e).push(t.name))});s.forEach(t=>{const e=h[t.id];e&&(e.length>1?(d.add(e.join(".")),e.shift()):d.add(e[0]),t.attr("_","style","@style/"+e.join(".")))}),d.forEach(t=>{const e=[];let a,i="";if(t.split(".").forEach((t,o,r)=>{const s=qs.exec(t);if(s){const l=c[s[1].toUpperCase()][Ws(s[2])];l&&(0===o?(i=t,1===r.length?a=l.items:n.has(t)||n.set(t,{name:t,parent:"",items:l.items})):(a?l.items.forEach(t=>{const e=t.key,i=a.findIndex(t=>t.key===e);-1!==i?a[i]=t:a.push(t)}):a=l.items.slice(0),e.push(t)))}}),a)if(0===e.length)n.set(i,{name:i,parent:"",items:a});else{const t=e.join(".");n.set(t,{name:t,parent:i,items:a})}})}}const{NODE_TEMPLATE:al}=squared.base.lib.enumeration;class il extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){this.cache.each(t=>{const e=t.renderTemplates;if(e){let a,i;if(t.renderEach((t,e)=>{const n=t.dataset,o=n.androidInclude,r="true"===n.androidIncludeEnd;if(o||r){if(t.documentRoot)return;const s={item:t,name:o,index:e,include:"false"===n.androidIncludeMerge};o&&(a||(a=[]),a.push(s)),r&&(i||(i=[]),i.push(s))}}),a&&i){const t=this.application,n=this.controller,o=Math.min(a.length,i.length),r=i.length-o;r>0&&i.splice(0,r);let s=o-1;while(s>=0){const{index:o,include:r,item:l,name:c}=a[s--];for(let a=0;a<i.length;++a){const s=i[a].index;if(s>=o){const h=[];let d=o;while(d<=s)h.push(e[d++]);const u=!r||h.length>1,f=u?1:0;e.splice(o,h.length,{type:2,node:h[0].node,content:n.renderNodeStatic({controlName:"include",width:"match_parent"},{layout:"@layout/"+c,android:{}}),indent:true});let p=n.cascadeDocument(h,f);u?p=n.getEnclosingXmlTag("merge",st(p),p):l.documentRoot=true,t.saveDocument(c,p,"",Number.POSITIVE_INFINITY),i.splice(a,1);break}}}}}})}}const nl=squared.lib,{formatPX:ol}=nl.css,{measureTextWidth:rl}=nl.dom,{capitalizeString:sl,lowerCaseString:ll,isNumber:cl,isString:hl}=nl.util,{STRING_SPACE:dl,replaceCharacterData:ul}=nl.xml,{NODE_RESOURCE:fl}=squared.base.lib.enumeration;class pl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:false,fontVariantSmallCapsReduction:.7},this.eventOnly=true}afterResources(){const t=this.options.numberResourceValue,e=(e,a,i,n)=>{""!==(i=B.addString(n,i,t))&&e.android(a,t||!cl(i)?"@string/"+i:i,false)};this.cacheProcessing.each(t=>{if(t.hasResource(fl.VALUE_STRING)){switch(t.tagName){case"SELECT":{const e=this.createOptionArray(t.element,t.controlId);""!==e&&t.android("entries","@array/"+e);break}case"IFRAME":{const e=t.data(B.KEY_NAME,"valueString");e&&B.addString(ul(e.value),e.key);break}default:if(!t.layoutFrame){const a=t.data(B.KEY_NAME,"valueString");if(a){let i=a.value;const n=a.key||i;if(t.naturalChild&&t.alignParent("left")&&t.pageFlow&&!(t.preserveWhiteSpace&&!t.plainText||t.plainText&&t.actualParent.preserveWhiteSpace)){let e=0;const a=t.textContent,n=a.length;let o=0;while(o<n)switch(a.charCodeAt(o++)){case 160:e++;case 32:continue}0===e&&(i=i.replace(/^(\s|&#160;)+/,""))}if("small-caps"===t.css("fontVariant"))if(t.api>=21)t.android("fontFeatureSettings","smcp");else{t.android("textAllCaps","true");const e=t.data(B.KEY_NAME,"fontStyle");e&&(e.fontSize*=this.options.fontVariantSmallCapsReduction)}switch(t.css("textTransform")){case"uppercase":t.android("textAllCaps","true");break;case"lowercase":i=ll(i);break;case"capitalize":i=sl(i)}const o=t.tagName;i=ul(i,t.preserveWhiteSpace||"CODE"===o);const r=t.css("textDecorationLine");"none"!==r&&r.split(" ").forEach(t=>{switch(t){case"underline":i=`<u>${i}</u>`;break;case"line-through":i=`<strike>${i}</strike>`}}),"INS"!==o||r.includes("line-through")||(i=`<strike>${i}</strike>`);let s=0;if(t.blockDimension||"table-cell"===t.display){const e=t.css("textIndent");s=t.parseUnit(e),("100%"===e||s+t.bounds.width<0)&&(i="",t.delete("android","ellipsize","maxLines"))}if(""!==i){if(0===s){const e=t.actualParent;(null==e?void 0:e.firstChild)!==t||!e.blockDimension&&"table-cell"!==e.display||(s=e.parseUnit(e.css("textIndent")))}if(s>0){const e=rl(" ",t.css("fontFamily"),t.fontSize)||t.fontSize/2;i=dl.repeat(Math.max(Math.floor(s/e),1))+i}e(t,"text",n,i)}}if(t.inputElement){if(t.controlName===n.EDIT_LIST){const e=t.element.list;e&&(this.createOptionArray(e,t.controlId),t.hasPX("width")||t.css("width",ol(t.actualWidth)))}const a=t.data(B.KEY_NAME,"hintString");hl(a)&&e(t,"hint","",a)}}}if(t.styleElement){const a=t.data(B.KEY_NAME,"titleString")||t.toElementString("title");""!==a&&e(t,"tooltipText",t.controlId.toLowerCase()+"_title",a)}}})}createOptionArray(t,e){const[a,i]=B.getOptionArray(t),n=this.options.numberResourceValue;let o;if(!n&&i)o=i;else{const t=a||i;t&&(o=[],t.forEach(t=>{""!==(t=B.addString(ul(t),"",n))&&o.push("@string/"+t)}))}return(null==o?void 0:o.length)?B.insertStoredAsset("arrays",e+"_array",o):""}}const gl=squared.lib,{XML:ml}=gl.regex,{capitalize:yl,trimString:bl}=gl.util,Tl=B.STORED,El=/(\w+):(\w+)="([^"]+)"/;class Sl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){const t={},e={};this.cache.each(a=>{if(a.controlId&&a.visible){const i=a.renderChildren,n=i.length;if(n>1){const o=new Map;let r=true,s="",l=0;while(l<n){let t=false;const e=i[l++].combine("_","android"),a=e.length;let n=0;while(n<a){const a=e[n++];if(!t&&a.startsWith("style=")){if(0===l)s=a;else if(""===s||a!==s){r=false;break}t=true}else o.set(a,(o.get(a)||0)+1)}if(!r||!t&&""!==s){r=false;break}}if(r){for(const[t,e]of o.entries())e!==n&&o.delete(t);if(o.size>1){""!==s&&(s=bl(s.substring(s.indexOf("/")+1),'"'));const n=[];for(const t of o.keys()){const e=El.exec(t);e&&(i.forEach(t=>t.delete(e[1],e[2])),n.push(e[0]))}n.sort();const r=n.join(";");let l="";for(const t in e)if(e[t]===r){l=t;break}""!==s&&l.startsWith(s+".")||(l=(""!==s?s+".":"")+yl(a.controlId),t[l]=n,e[l]=r),i.forEach(t=>t.attr("_","style","@style/"+l))}}}}});for(const e in t){const a=[];t[e].forEach(t=>{const e=ml.ATTRIBUTE.exec(t);e&&a.push({key:e[1],value:e[2]})}),Tl.styles.set(e,Object.assign(Object.assign({},nt()),{name:e,items:a}))}}}var Al={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const vl={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var xl={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":["ordering"],">":{set:{"^":"android","@":["ordering"],">":{objectAnimator:vl.objectAnimator}},objectAnimator:vl.objectAnimator}},objectAnimator:vl.objectAnimator}}};squared.svg||Object.assign(squared,{svg:{lib:{constant:{},util:{}}}});var wl=squared.svg.Svg,_l=squared.svg.SvgAnimate,Nl=squared.svg.SvgAnimateTransform,Il=squared.svg.SvgBuild,Rl=squared.svg.SvgG,Cl=squared.svg.SvgPath,Ll=squared.svg.SvgShape;const Pl=squared.lib,Ol=squared.svg.lib,{extractURL:kl,formatPX:Dl,isPercent:Ml}=Pl.css,{truncate:Wl}=Pl.math,{CHAR:Bl,FILE:Xl}=Pl.regex,{convertCamelCase:Gl,convertInt:Hl,convertWord:Vl,formatString:Fl,isArray:zl,isNumber:Ul,isString:ql,objectMap:Yl,partitionArray:jl,replaceMap:Kl}=Pl.util,{applyTemplate:$l}=Pl.xml,{KEYSPLINE_NAME:Zl,SYNCHRONIZE_MODE:Jl}=Ol.constant,{MATRIX:Ql,SVG:tc,TRANSFORM:ec}=Ol.util,ac=squared.base.NodeUI,ic=B.STORED,nc={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"},oc=["name","value","fill","stroke","fillPattern","fillRule","strokeWidth","fillOpacity","strokeOpacity","strokeLinecap","strokeLinejoin","strokeLineJoin","strokeMiterlimit"];Zl&&Object.assign(nc,{[Zl["ease-in"]]:nc.accelerate,[Zl["ease-out"]]:nc.decelerate,[Zl["ease-in-out"]]:nc.accelerate_decelerate,[Zl.linear]:nc.linear});const rc={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function sc(t,e){const a=null==t?void 0:t[e];return a?nc[a]||cc(a):""}function lc(t){for(const e in rc)if(rc[e].includes(t))return Gl(e);return""}function cc(t){const e=nc[t];if(e)return e;{const e="path_interpolator_"+Vl(t);return ic.animators.has(e)||ic.animators.set(e,Fl('<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',...t.split(Bl.SPACE))),"@anim/"+e}}function hc(t){const e={};return t.forEach(t=>{const{matrix:a,origin:i,type:n}=t;switch(n){case SVGTransform.SVG_TRANSFORM_SCALE:e.scaleX=a.a.toString(),e.scaleY=a.d.toString(),i&&(e.pivotX=i.x.toString(),e.pivotY=i.y.toString());break;case SVGTransform.SVG_TRANSFORM_ROTATE:e.rotation=t.angle.toString(),i?(e.pivotX=i.x.toString(),e.pivotY=i.y.toString()):(e.pivotX="0",e.pivotY="0");break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:e.translateX=a.e.toString(),e.translateY=a.f.toString()}}),e}function dc(t,e){let a=0,i=0;return function(t){const e=[];let a=t.parentElement;while(a)if(e.push(a),a=a.parentElement,a instanceof HTMLElement)break;return e}(t).forEach(t=>{(tc.svg(t)||tc.use(t))&&t!==e&&(a+=t.x.baseVal.value,i+=t.y.baseVal.value)}),{x:a,y:i}}function uc(t,e,a=1,i=1){const n=e.length;return n&&(tc.circle(t)||tc.ellipse(t))&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(a!==i||n>1&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_SCALE&&t.matrix.a!==t.matrix.d))?fc(t,e):[[],e]}function fc(t,e,a=false){if(e.length){const i=[],n=[],o=e[0].fromCSS?[]:ec.rotateOrigin(t).reverse(),r=e.slice(0).reverse(),s=[],l=()=>{i.push(s.slice(0)),s.length=0};for(let t=1;t<r.length;++t){const e=r[t],a=r[t-1];if(e.type===a.type){let i;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:i=Ql.clone(e.matrix),i.e+=a.matrix.e,i.f+=a.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:i=Ql.clone(e.matrix),i.a*=a.matrix.a,i.d*=a.matrix.d}i&&(e.matrix=i,r.splice(--t,1))}}return r.forEach(t=>{switch(t.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:n.push(t);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:a||0!==i.length||0!==s.length?(s.push(t),l()):n.push(t);break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(o.length){const e=o.shift();if(e.angle===t.angle){0===e.x&&0===e.y||(t.origin=e);break}}if(!t.origin&&1===s.length&&s[0].type===SVGTransform.SVG_TRANSFORM_SCALE)return void s.push(t);case SVGTransform.SVG_TRANSFORM_SCALE:s.length&&l(),s.push(t)}}),s.length&&i.push(s),[i.reverse(),n]}return[[],e]}function pc(t,e,a,i=false,n){const o=t[e];let r;return o?r=Array.isArray(o)?o[a].toString():o:i||0!==e||(r=n),r||""}function gc(t){switch(t){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:return Ec(t)?"floatType":void 0}}function mc(t,e,a,i){const n=new _l;return n.attributeName=t,n.delay=e,n.duration=1,n.from=i||a,n.to=a,n.fillForwards=true,n.convertToValues(),n}function yc(t,e=true){let a=rc[t];return!a&&e&&Ec(t)&&(a=[t]),a}function bc(t){switch(t){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Tc(t){switch(t.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return Nl.toRotateList(t.values);case SVGTransform.SVG_TRANSFORM_SCALE:return Nl.toScaleList(t.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return Nl.toTranslateList(t.values)}}function Ec(t){switch(t){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Sc(t,e=false){const a="@color/"+B.addColor(t);return e?[a]:a}function Ac(t,e){return Nc(t.attributeName)?Sc(e):e.trim()||void 0}function vc(t){switch(t){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function xc(t,e){const a=t.synchronized,i=e.synchronized;return a&&i?a.key>=i.key?1:-1:0}function wc(t,e,a,i,n){const o=a.set,r=o.length;if(r){let s=false;if(r>1&&o.every(t=>""===t.ordering)){const t={set:[],objectAnimator:[]};o.forEach(e=>{t.set=t.set.concat(e.set),t.objectAnimator=t.objectAnimator.concat(e.objectAnimator)}),a=t}while(1===a.set.length){const t=a.set[0];if(s&&""!==t.ordering||0!==t.objectAnimator.length)break;a=t,s=true}a["xmlns:android"]=h.android,s&&(a["android:ordering"]=a.ordering,a.ordering=void 0);const l={name:e,animation:B.insertStoredAsset("animators",_c(i,n,"anim",e),$l("set",xl,[a]))};""!==l.animation&&(l.animation="@anim/"+l.animation,t[0].target.push(l))}}const _c=(t,e,a,i)=>t+(a?"_"+a:"")+(e?"_vector":"")+(i?"_"+i.toLowerCase():""),Nc=t=>"fill"===t||"stroke"===t,Ic=(t,e,a=-1)=>t.name+"_"+e+(-1!==a?"_"+(a+1):""),Rc=t=>Ml(t)?parseFloat(t)/100:.5,Cc=t=>"@drawable/"+t,Lc=(t="")=>({ordering:t,objectAnimator:[]});class Pc extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=true,this._vectorData=new Map,this._animateData=new Map,this._animateTarget=new Map,this._imageData=[],this._synchronizeMode=0,this._namespaceAapt=false}beforeParseDocument(){Il&&(Il.setName(),this.controller.localSettings.svg.enabled=true)}afterResources(){if(Il){let t,e;this.cacheProcessing.each(a=>{if(a.imageElement?[t,e]=this.createSvgElement(a,a.src):a.svgElement&&(e=a.element),e){const i=this.createSvgDrawable(a,e);""!==i&&(a.api>=21?a.android("src",Cc(i)):a.app("srcCompat",Cc(i))),a.hasWidth||a.setLayoutWidth("wrap_content"),a.hasHeight||a.setLayoutHeight("wrap_content"),a.baseline&&a.android("baselineAlignBottom","true"),t&&(t.removeChild(e),t=void 0),e=void 0}})}}afterFinalize(){this.controller.localSettings.svg.enabled=false}createSvgElement(t,e){const a=kl(e);if(""!==a&&(e=a),Xl.SVG.test(e)||e.startsWith("data:image/svg+xml")){const a=this.resource.getRawData(e);if(a){const e=(t.actualParent||t.documentParent).element;e.insertAdjacentHTML("beforeend",a.content);const i=e.lastElementChild;if(i instanceof SVGSVGElement){const a=i;return 0===a.width.baseVal.value&&a.setAttribute("width",t.actualWidth.toString()),0===a.height.baseVal.value&&a.setAttribute("height",t.actualHeight.toString()),[e,a]}}}return[]}createSvgDrawable(t,e){const{floatPrecisionValue:a,floatPrecisionKeyTime:i,transformExclude:n}=this.options,o=new wl(e),r=t.api>=23,s=2|(r?32:64),l=this._animateData,c=this._imageData;this._svgInstance=o,this._vectorData.clear(),l.clear(),this._animateTarget.clear(),c.length=0,this._namespaceAapt=false,this._synchronizeMode=s;const d=`${t.tagName}_${Vl(t.controlId,true)}_viewbox`.toLowerCase();o.build({exclude:n,residual:uc,precision:a}),o.synchronize({keyTimeMode:s,framesPerSecond:this.controller.userSettings.framesPerSecond,precision:a}),this.queueAnimations(o,o.name,t=>"opacity"===t.attributeName);const u=this.parseVectorData(o),f=o.viewBox,p=c.length;let g,m;{const{width:e,height:a}=ac.refitScreen(t,{width:o.width,height:o.height});m=B.insertStoredAsset("drawables",_c(d,p),$l("vector",kr,[{"xmlns:android":h.android,"xmlns:aapt":this._namespaceAapt?h.aapt:"","android:name":l.size?o.name:"","android:width":Dl(e),"android:height":Dl(a),"android:viewportWidth":(f.width||e).toString(),"android:viewportHeight":(f.height||a).toString(),"android:alpha":parseFloat(o.opacity)<1?o.opacity.toString():"",include:u}]))}if(l.size){const t=[{"xmlns:android":h.android,"android:drawable":Cc(m),target:[]}];for(const[e,n]of l.entries()){const o=new Map,s=new Map,l=[],c=[],h=[],u=[],f=[],[g,m]=jl(n.animate,t=>"companion"in t),y={set:[],objectAnimator:[]},b=m.length;let T=0;while(T<b){const t=m[T++];if(t.setterType)rc[t.attributeName]&&ql(t.to)&&(t.fillReplace&&t.duration>0?c.push(t):l.push(t));else if(Il.isAnimate(t)){const e=g.filter(e=>e.companion.value===t);if(e.length){e.sort((t,e)=>t.companion.key>=e.companion.key?1:0);const a=[],i=[],n=e.length;for(let o=0;o<n;++o){const n=e[o];n.companion.key<=0?(a.push(n),0===o&&(n.delay+=t.delay,t.delay=0)):i.push(n)}a.push(t),o.set("sequentially_companion_"+T,a.concat(i))}else{const e=t.synchronized;if(e){const a=e.value;if(Il.isAnimateTransform(t)){const e=s.get(a);e?e.push(t):s.set(a,[t])}else{const e=o.get(a);e?e.push(t):o.set(a,[t])}}else Il.isAnimateTransform(t)&&t.expandToValues(),-1===t.iterationCount?c.push(t):!(!t.fromToType||Il.isAnimateTransform(t)&&t.transformOrigin)||r&&"pathType"!==gc(t.attributeName)?t.fillReplace?c.push(t):l.push(t):h.push([t])}}}l.length&&h.push(l);for(const[t,e]of o.entries())t.startsWith("sequentially_companion")?h.push(e):h.push(e.sort(xc));for(const t of s.values())f.push(t.sort(xc));c.forEach(t=>u.push([[t]])),[h,f,...u].forEach((t,e)=>{if(0===t.length)return;const o={ordering:0===e||1===t.length?"":"sequentially",set:[],objectAnimator:[]};t.forEach(t=>{let s="",l=false,c=false,h=true;e<=1&&t.some(t=>!!t.synchronized&&""!==t.synchronized.value)?(Il.isAnimateTransform(t[0])||(s="sequentially"),l=true,h=false):e<=1&&t.some(t=>!!t.synchronized&&""===t.synchronized.value)?(s="sequentially",l=true,c=true):e<=1&&t.some(t=>"companion"in t)?s="sequentially":(e>0&&(s="sequentially"),e>1&&Il.isAnimateTransform(t[0])&&(c=true));const d=Lc(),u=Lc(),f=Lc(),p=Lc(),g=u.objectAnimator,m=f.objectAnimator;let y=d.objectAnimator,b=p.objectAnimator,T=[];(l?jl(t,t=>-1!==t.iterationCount):[t]).forEach((t,d)=>{1===d&&t.length>1&&(f.ordering="sequentially");const u=new Map;t.forEach(f=>{var p;const E=gc(f.attributeName);if(void 0===E)return;const S=f.delay>0;let A,v=false;const x=(t,e)=>{ql(e)&&-1===y.findIndex(e=>e.propertyName===t)&&y.push(this.createPropertyValue(t,e,"0",E))},w=(t,e,a)=>{if(!l&&f.fillReplace){let i,n=f.replaceValue;if(!n){if(v)n=Ec(t);else{const e=f.parent;if(e&&Il.isShape(e)){const a=e.path;a&&(n="pathData"===t?a.value:a[lc(t)])}}n||(n=f.baseValue)}if(null==e?void 0:e.length){const t=e[e.length-1];if(zl(t.propertyValuesHolder)){const e=t.propertyValuesHolder[t.propertyValuesHolder.length-1];i=e.keyframe[e.keyframe.length-1].value}else i=t.valueTo}if(ql(n)&&n!==i&&(n=Ac(f,n),n)){switch(t){case"trimPathStart":case"trimPathEnd":n=n.split(" ")["trimPathStart"===t?0:1]}b.push(this.createPropertyValue(t,n,"1",E,"pathType"===E?i:"",a?a.toString():""))}A&&(t.endsWith("X")?b.push(this.createPropertyValue("translateX","0","1",E)):t.endsWith("Y")&&b.push(this.createPropertyValue("translateY","0","1",E)))}};if(f.setterType){const t=yc(f.attributeName);if(t){const a=Nc(f.attributeName)?Sc(f.to,true):f.to.trim().split(" "),i=t.length;if(a.length===i&&!a.some(t=>""===t)){let n,o;for(let r=0;r<i;++r){let i;if("pathType"===E)i=a[r];else if(S){const t=f.baseValue;t&&(i=Ac(f,t.trim().split(" ")[r]))}const s=this.createPropertyValue(t[r],a[r],"1",E,i,f.delay>0?f.delay.toString():"");if(e>1)m.push(s),w(t[r],void 0,e>1?f.duration:0);else{const t=f.companion;t?t.key<=0?(n||(n=[]),n.push(s)):t.key>0&&(o||(o=[]),o.push(s)):T.push(s)}}n&&(y=y.concat(n)),o&&(b=b.concat(o))}}}else if(Il.isAnimate(f)){let y,b=c;y=1===d?t.length>1?"0":"-1":-1!==f.iterationCount?Math.ceil(f.iterationCount-1).toString():"-1";const T=this.createPropertyValue("","",f.duration.toString(),E,"",f.delay>0?f.delay.toString():"",y);let _,N,I;if(l||"pathType"!==E)if(Il.asAnimateTransform(f))N=bc(f.type),I=Tc(f),N&&I&&(c&&0===f.keyTimes[0]&&(b=false),(b||S)&&(_=Yl(N,t=>Ec(t)||"0")),A=f.transformOrigin),v=true;else if(Il.asAnimateMotion(f)){if(N=bc(f.type),I=Tc(f),N&&I){const t=f.rotateValues,e=I.length;if((null==t?void 0:t.length)===e){N.push("rotation");let a=0;while(a<e)I[a].push(t[a++])}}v=true}else switch(N=yc(f.attributeName),E){case"intType":if(I=Yl(f.values,t=>Hl(t).toString()),S){const t=f.baseValue;t&&(_=Kl(Il.parseCoordinates(t),t=>Math.trunc(t).toString()))}break;case"floatType":if(I="stroke-dasharray"===f.attributeName?Yl(f.values,t=>Kl(t.split(" "),t=>parseFloat(t))):f.values,S){const t=f.baseValue;t&&(_=Kl(Il.parseCoordinates(t),t=>t.toString()))}break;default:if(I=f.values.slice(0),Nc(f.attributeName)){if(S){const t=f.baseValue;t&&(_=Sc(t,true))}const t=I.length;for(let e=0;e<t;++e)""!==I[e]&&(I[e]=Sc(I[e]))}}else if(n.pathData){const t=f.parent;let e,i;t&&Il.isShape(t)&&(i=t,e=null===(p=t.path)||void 0===p?void 0:p.transformed),N=["pathData"],I=Cl.extrapolate(f.attributeName,n.pathData,f.values,e,i,a)}if(!f.keySplines){const t=f.timingFunction;T.interpolator=ql(t)?cc(t):this.options.animateInterpolator}if(I&&N){const{keyTimes:t,synchronized:p}=f,y=N.length,v=t.length,R=p?p.key+p.value:0!==e||y>1?JSON.stringify(T):"";for(let e=0;e<y;++e){const p=N[e];if(b&&_&&x(p,_[e]),h&&v>1)if(r&&"pathType"!==E){!b&&S&&_&&x(p,_[e]);const n=u.get(R)||[],o=[];for(let n=0;n<v;++n){let r=pc(I,n,e,true);r&&"floatType"===E&&(r=Wl(r,a)),o.push({interpolator:n>0&&""!==r&&"pivotX"!==p&&"pivotY"!==p?sc(f.keySplines,n-1):"",fraction:0===t[n]&&""===r?"":Wl(t[n],i),value:r})}n.push({propertyName:p,keyframe:o}),u.has(R)||(""!==R&&u.set(R,n),(0===d?g:m).push(Object.assign(Object.assign({},T),{propertyValuesHolder:n}))),A=void 0}else{s="sequentially";const i=Lc("sequentially");for(let o=0;o<v;++o){const r=t[o],s=Object.assign(Object.assign({},T),{propertyName:p,startOffset:0===o?(f.delay+(r>0?Math.floor(r*f.duration):0)).toString():"",propertyValuesHolder:false});let l=pc(I,o,e,false,"pathType"===E?n.pathData:f.baseValue);if(l){let h;0===o?(s.valueFrom=!c&&S&&_?_[e]:"pathType"===E?n.pathData||I[0].toString():f.baseValue||f.replaceValue||"",h=0):(s.valueFrom=pc(I,o-1,e).toString(),h=Math.floor((r-t[o-1])*f.duration)),"floatType"===E&&(l=Wl(l,a));const d=null==A?void 0:A[o];if(d){let t,e=0;if(p.endsWith("X")?(t="translateX",e=d.x):p.endsWith("Y")&&(t="translateY",e=d.y),t){const n=this.createPropertyValue(t,Wl(e,a),h.toString(),"floatType");n.interpolator=cc(Zl["step-start"]),i.objectAnimator.push(n)}}o>0&&(s.interpolator=sc(f.keySplines,o-1)),s.duration=h.toString(),s.valueTo=l,g.push(s)}}i.objectAnimator.length&&o.set.push(i)}else{const t=Object.assign(Object.assign({},T),{propertyName:p,interpolator:f.duration>1?sc(f.keySplines,0):"",propertyValuesHolder:false}),i=I.length;if(Array.isArray(I[0])){const a=I[i-1][e];if(i>1){const i=I[0][e];i!==a&&(t.valueFrom=i.toString())}t.valueTo=a.toString()}else{let a;i>1?(a=I[0].toString(),t.valueTo=I[i-1].toString()):(a=f.from||(!c&&S&&_?_[e]:""),t.valueTo=f.to),"pathType"===E?t.valueFrom=a||n.pathData||t.valueTo:a!==t.valueTo&&a&&(t.valueFrom=Ac(f,a))}const o=t.valueTo;o&&("floatType"===E&&(t.valueTo=Wl(o,a)),(0===d?g:m).push(t))}0!==d||l||-1===f.iterationCount||w(p,g)}S&&(null==A?void 0:A.length)&&(x("translateX","0"),x("translateY","0"))}}})});const E=g.length>0||m.length>0;"sequentially"===s&&(E&&1===y.length&&(g.unshift(y[0]),y.length=0),1===m.length&&(g.push(m[0]),m.length=0),E&&1===b.length&&(g.push(b[0]),b.length=0)),0===y.length&&0===m.length&&0===b.length&&("sequentially"===s&&1===g.length&&(s=""),"sequentially"!==o.ordering&&"sequentially"!==s&&(T=T.concat(g),g.length=0)),(g.length||m.length)&&(y.length&&(o.ordering="sequentially",o.set.push(d)),g.length&&(u.ordering=s,o.set.push(u)),m.length&&(o.ordering="sequentially",o.set.push(f)),b.length&&(o.ordering="sequentially",o.set.push(p))),T.length&&(o.objectAnimator=o.objectAnimator.concat(T))}),(o.set.length||o.objectAnimator.length)&&y.set.push(o)}),wc(t,e,y,d,p)}for(const[e,a]of this._animateTarget.entries()){let i;const n=(t,e,a,n,o)=>{i||(i=[]),i.push(this.createPropertyValue(t,e,"0",a,n,o))};a.animate.forEach(t=>{if(Il.asAnimateMotion(t)){const e=t.parent;if(e&&Il.isShape(e)){const a=e.path;if(a){const{value:e,baseValue:i}=a;e!==i&&(n("pathData",i,"pathType",e),-1===t.iterationCount||t.setterType||n("pathData",e,"pathType",i,t.getTotalDuration().toString()))}}}}),i&&wc(t,e,{set:[{set:void 0,objectAnimator:i}],objectAnimator:void 0},d,p)}t[0].target&&(m=B.insertStoredAsset("drawables",_c(d,p,"anim"),$l("animated-vector",Al,t)))}if(p){const t=this.resource,e=[],a=[{"xmlns:android":h.android,item:e}];""!==m&&e.push({drawable:Cc(m)}),c.forEach(a=>{const i=o.viewBox,n=o.width/i.width,r=o.height/i.height;let s=a.getBaseValue("x",0)*n,l=a.getBaseValue("y",0)*r,c=a.getBaseValue("width",0),h=a.getBaseValue("height",0);const d=dc(a.element,o.element);s+=d.x,l+=d.y,c*=n,h*=r;const u={width:Dl(c),height:Dl(h),left:0!==s?Dl(s):"",top:0!==l?Dl(l):""},f=Cc(t.addImageSet({mdpi:a.href}));a.rotateAngle?u.rotate={drawable:f,fromDegrees:a.rotateAngle.toString(),visible:a.visible?"true":"false"}:u.drawable=f,e.push(u)}),g=B.insertStoredAsset("drawables",d,$l("layer-list",Lr,a))}else g=m;return t.data(B.KEY_NAME,"svgViewBox",f),g}createPropertyValue(t,e,a,i,n="",o="",r="0"){const s=this.options.floatPrecisionValue;return{propertyName:t,startOffset:o,duration:a,repeatCount:r,valueType:i,valueFrom:Ul(n)?Wl(n,s):n,valueTo:Ul(e)?Wl(e,s):e,propertyValuesHolder:false}}parseVectorData(t,e=0){const a=this.options.floatPrecisionValue,i=this.createGroup(t),n=i.length,o=e+n;let r="";return t.each(e=>{if(e.visible)if(Il.isShape(e)){const t=e.path;if(null==t?void 0:t.value){const[i,n]=this.createPath(e,t),s=[];if(parseFloat(t.strokeWidth)>0&&(t.strokeDasharray||t.strokeDashoffset)){const o=this._animateData.get(e.name);if(!o||o.animate.every(t=>t.attributeName.startsWith("stroke-dash"))){const[r,l,c,h]=t.extractStrokeDash(null==o?void 0:o.animate,a);if(l){o&&(this._animateData.delete(e.name),r&&(o.animate=r));const t=Ic(e,"stroke"),d={name:t};""!==c&&(i.pathData=c),""!==h&&(d["clip-path"]=[{pathData:h}]);const u=l.length;for(let e=0;e<u;++e){const n=0===e?i:Object.assign({},i),r=l[e];n.name=`${t}_${e}`,o&&this._animateData.set(n.name,{element:o.element,animate:o.animate.filter(t=>void 0===t.id||t.id===e)}),n.trimPathStart=Wl(r.start,a),n.trimPathEnd=Wl(r.end,a),s.push(n)}n.unshift(d)}}}if(0===s.length&&s.push(i),n.length){n[n.length-1].path=s,r+=$l("group",Or,n,o+1)}else r+=$l("path",Pr,s,o+1)}}else Il.isContainer(e)?e.length&&(r+=this.parseVectorData(e,o)):Il.asImage(e)&&(Il.asPattern(t)||(e.extract(this.options.transformExclude.image),this._imageData.push(e)))}),n?(i[n-1].include=r,$l("group",Or,i,e+1)):r}createGroup(t){const e=[],a=[],i={"clip-path":e},n={"clip-path":a},o=[],r={};if(!(Il.asSvg(t)&&!t.documentRoot||Il.asUseSymbol(t)||Il.asUsePattern(t))||0===t.x&&0===t.y||(r.name=Ic(t,"main"),r.translateX=t.x.toString(),r.translateY=t.y.toString()),""!==t.clipRegion&&this.createClipPath(t,e,t.clipRegion),(e.length||Object.keys(r).length)&&(Object.assign(i,r),o.push(i)),t!==this._svgInstance){const e={},[i]=fc(t.element,t.transforms,true),r=Ic(t,"animate");if((Il.asG(t)||Il.asUseSymbol(t))&&ql(t.clipPath)&&this.createClipPath(t,a,t.clipPath)&&(e.name=r),this.queueAnimations(t,r,t=>Il.asAnimateTransform(t))&&(e.name=r),Object.keys(e).length&&(Object.assign(n,e),o.push(n)),i.length){let e=[];i.forEach(t=>{o.push(hc(t)),e=e.concat(t)}),t.transformed=e.reverse()}}return o}createPath(t,e){var a,i;const n=this.options.floatPrecisionValue,o={name:t.name},r=[],s=[],l={},c=Ic(t,"group"),h=function(t){let e=parseFloat(t.opacity),a=t.parent;while(a){const t=parseFloat(a.opacity||"1");!isNaN(t)&&t<1&&(e*=t),a=a.parent}return e}(t),d=Il.asUse(t);if(Il.asUse(t)&&ql(t.clipPath)&&this.createClipPath(t,s,t.clipPath),ql(e.clipPath)){const t=new Ll(e.element);t.build({exclude:this.options.transformExclude,residual:uc,precision:n}),t.synchronize({keyTimeMode:this._synchronizeMode,precision:n}),this.createClipPath(t,s,e.clipPath)}this.queueAnimations(t,c,t=>Il.isAnimateTransform(t),"",t.name)?l.name=c:s.length&&(l.name=""),!Il.asUse(t)||0===t.x&&0===t.y||(l.translateX=t.x.toString(),l.translateY=t.y.toString()),s.length&&(l["clip-path"]=s),Object.keys(l).length&&r.push(l),null===(a=e.transformResidual)||void 0===a||a.forEach(t=>r.push(hc(t))),oc.forEach(a=>{let i=d&&t[a]||e[a];if(i){switch(a){case"name":break;case"value":a="pathData";break;case"fill":if(a="fillColor","none"===i||o["aapt:attr"])return;{const t=B.addColor(i);""!==t&&(i="@color/"+t)}break;case"stroke":if(a="strokeColor","none"===i)return;{const t=B.addColor(i);""!==t&&(i="@color/"+t)}break;case"fillPattern":{const t=this._svgInstance.definitions.gradient.get(i);let r=false;if(t)switch(e.element.tagName){case"path":if(!/[zZ]\s*$/.test(e.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const a=function(t,e,a){const{colorStops:i,type:n}=t,o={type:n,item:ms(i,a),positioning:false};switch(n){case"radial":{const{cxAsString:a,cyAsString:i,rAsString:n,spreadMethod:r}=t,s=e.element;let l,c,h,d,u=[];switch(s.tagName){case"path":Il.getPathCommands(e.value).forEach(t=>u=u.concat(t.value));case"polygon":if(tc.polygon(s)&&(u=u.concat(Il.clonePoints(s.points))),!u.length)return;[l,c,h,d]=Il.minMaxPoints(u),h-=l,d-=c;break;default:if(tc.rect(s))l=s.x.baseVal.value,c=s.y.baseVal.value,h=s.width.baseVal.value,d=s.height.baseVal.value;else if(tc.circle(s))h=s.r.baseVal.value,l=s.cx.baseVal.value-h,c=s.cy.baseVal.value-h,h*=2,d=h;else{if(!tc.ellipse(s))return;h=s.rx.baseVal.value,d=s.ry.baseVal.value,l=s.cx.baseVal.value-h,c=s.cy.baseVal.value-d,h*=2,d*=2}}o.centerX=(l+h*Rc(a)).toString(),o.centerY=(c+d*Rc(i)).toString(),o.gradientRadius=((h+d)/2*(Ml(n)?parseFloat(n)/100:1)).toString(),r&&(o.tileMode=vc(r));break}case"linear":{const{x1:e,y1:a,x2:i,y2:n,spreadMethod:r}=t;o.startX=e.toString(),o.startY=a.toString(),o.endX=i.toString(),o.endY=n.toString(),r&&(o.tileMode=vc(r))}}return o}(t,e,n);a&&(i={name:"android:fillColor",gradient:a},r=true);break}}if(!r)return;a="aapt:attr",o.fillColor="",this._namespaceAapt=true;break}case"fillRule":if("evenodd"!==i)return;a="fillType",i="evenOdd";break;case"strokeWidth":if("0"===i)return;break;case"fillOpacity":case"strokeOpacity":if(i=((Ul(i)?parseFloat(i):1)*h).toString(),"1"===i)return;a="fillOpacity"===a?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===i)return;a="strokeLineCap";break;case"strokeLinejoin":if("miter"===i)return;a="strokeLineJoin";break;case"strokeMiterlimit":if("4"===i)return;a="strokeMiterLimit";break;default:return}o[a]=i}}),o.strokeWidth?o.strokeColor||(o.strokeWidth=""):o.strokeColor="";const u=new Map,f=[],p=[],g=e.value;let m=g,y=0;t.animations.forEach(t=>{if(Il.asAnimateTransform(t)&&!t.additiveSum&&t.transformFrom){let e=Math.max(0,t.delay-1);u.set(e,{index:y,time:e,to:t.transformFrom,reset:false,animate:t}),-1!==t.iterationCount&&t.fillReplace&&(e=t.delay+t.iterationCount*t.duration,u.has(e)||u.set(e,{index:y,time:e,to:g,reset:true})),y++}});const b=Array.from(u.values()).sort((t,e)=>t.time<e.time?-1:1),T=b.length;for(let t=0;t<T;++t){const e=b[t];if(!e.reset||e.to!==m){let a=true;if(e.reset)t:{let i=0;while(i<t){const n=b[i++];if(!n.reset){let i=t+1;while(i<T)switch(b[i++].index){case n.index:a=false;case e.index:break t}}}}else{const a=[],n=new Set;let o=0;while(o<t){const t=b[o++];a[t.index]=a[t.index]?2:1}const r=a.length;for(o=0;o<r;++o)if(1===a[o]){const t=null===(i=b.find(t=>t.index===o&&"animate"in t))||void 0===i?void 0:i.animate;t&&n.add(t.type)}n.forEach(t=>{const a=bc(t);if(a){const i=ec.typeAsValue(t).split(" "),n=i.length;o=0;while(o<n)f.push(mc(a[o],e.time,i[o++],""))}})}a&&(p.push(mc("d",e.time,e.to)),m=e.to)}}this.queueAnimations(t,o.name,t=>(Il.asAnimate(t)||Il.asSet(t))&&"clip-path"!==t.attributeName,g)||0!==p.length||l.name===c||(o.name="");const E=this._animateData;if(f.length){const t=E.get(c);t&&(t.animate=t.animate.concat(f))}if(p.length){const e=E.get(o.name);e?e.animate=e.animate.concat(p):E.set(o.name,{element:t.element,animate:p,pathData:g})}return[o,r]}createClipPath(t,e,a){const{transformExclude:i,floatPrecisionValue:n}=this.options,o=this._svgInstance.definitions,r=this._synchronizeMode;let s=0;return a.split(";").forEach((a,l,c)=>{if("#"===a.charAt(0)){const t=o.clipPath.get(a);if(t){const a=new Rl(t);a.build({exclude:i,residual:uc,precision:n}),a.synchronize({keyTimeMode:r,precision:n}),a.each(t=>{const a=t.path;if(a){const i=a.value;if(i){let a=Ic(t,"clip_path",c.length>1?l+1:-1);this.queueAnimations(t,a,t=>Il.asAnimate(t)||Il.asSet(t),i)||(a=""),e.push({name:a,pathData:i})}}})}s++}else{let i=Ic(t,"clip_path",c.length>1?l+1:-1);this.queueAnimations(t,i,t=>(Il.asAnimate(t)||Il.asSet(t))&&"clip-path"===t.attributeName,a)||(i=""),e.push({name:i,pathData:a}),s++}}),s>0}queueAnimations(t,e,a,i="",n){if(t.animations.length){const o=t.animations.filter((t,e,i)=>!t.paused&&(t.duration>=0||t.setterType)&&a(t,e,i));if(o.length){const a=t.element;return this._animateData.set(e,{element:a,animate:o,pathData:i}),n&&this._animateTarget.set(n,{element:a,animate:o,pathData:i}),true}}return false}}const Oc={builtInExtensions:["android.delegate.background","android.delegate.negative-x","android.delegate.positive-x","android.delegate.max-width-height","android.delegate.percent","android.delegate.css-grid","android.delegate.scrollbar","android.delegate.radiogroup","squared.accessibility","squared.relative","squared.css-grid","squared.flexbox","squared.table","squared.column","squared.list","squared.verticalalign","squared.grid","squared.sprite","squared.whitespace","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.data","android.resource.includes"],targetAPI:29,resolutionDPI:160,resolutionScreenWidth:1280,resolutionScreenHeight:900,framesPerSecond:60,supportRTL:true,preloadImages:true,compressImages:false,convertImages:"",supportNegativeLeftTop:true,exclusionsDisabled:false,customizationsOverwritePrivilege:true,showAttributes:true,createQuerySelectorMap:false,convertPixels:"dp",insertSpaces:4,autoCloseOnWrite:true,showErrorMessages:true,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputMainFileName:"activity_main.xml",outputDirectory:"app/src/main",outputEmptyCopyDirectory:false,outputArchiveName:"android-xml",outputArchiveFormat:"zip"},kc=squared.base.lib;let Dc,Mc,Wc,Bc=false;function Xc(t,e,a){return Object.assign(Object.assign({},t),{directory:e,filename:a})}const Gc=t=>Bc&&(t.closed||!(!Bc||Dc.initializing||Dc.closed||!Dc.userSettings.autoCloseOnWrite)&&(Dc.finalize(),true)),Hc={base:{ExtensionManager:va,Controller:Aa,File:Ka,Resource:B,View:de},extensions:{Accessibility:Ja,Column:fi,CssGrid:qi,External:Yi,Flexbox:pn,Grid:xn,List:Mn,Relative:Bn,Sprite:jn,Substitute:Jn,Table:ho,VerticalAlign:po,WhiteSpace:go,constraint:{Guideline:Ao},delegate:{Background:Xo,CssGrid:Yo,MaxWidthHeight:$o,NegativeX:er,Percent:pr,PositiveX:lr,RadioGroup:vr,ScrollBar:Rr},resource:{Background:bs,Data:Es,Dimens:Os,Fonts:el,Includes:il,Strings:pl,Styles:Sl,Svg:Pc}},lib:{constant:p,customization:F,enumeration:a,util:lt},system:{customize(t,e,a){if(H[t]){const i=H[t].assign;return i[e]?Object.assign(i[e],a):i[e]=a,i[e]}},addXmlNs(t,e){h[t]=e},copyLayoutAllXml(t,e){Gc(Dc)&&Mc.layoutAllToXml(Dc.layouts,Xc(e,t))},copyResourceAllXml(t,e){Gc(Dc)&&Mc.resourceAllToXml(Xc(e,t))},copyResourceStringXml(t,e){Gc(Dc)&&Mc.resourceStringToXml(Xc(e,t))},copyResourceArrayXml(t,e){Gc(Dc)&&Mc.resourceStringArrayToXml(Xc(e,t))},copyResourceFontXml(t,e){Gc(Dc)&&Mc.resourceFontToXml(Xc(e,t))},copyResourceColorXml(t,e){Gc(Dc)&&Mc.resourceColorToXml(Xc(e,t))},copyResourceStyleXml(t,e){Gc(Dc)&&Mc.resourceStyleToXml(Xc(e,t))},copyResourceDimenXml(t,e){Gc(Dc)&&Mc.resourceDimenToXml(Xc(e,t))},copyResourceDrawableXml(t,e){Gc(Dc)&&Mc.resourceDrawableToXml(Xc(e,t))},copyResourceAnimXml(t,e){Gc(Dc)&&Mc.resourceAnimToXml(Xc(e,t))},copyResourceDrawableImage(t,e){Gc(Dc)&&Mc.resourceDrawableImageToString(Xc(e,t))},copyResourceRawVideo(t,e){Gc(Dc)&&Mc.resourceRawVideoToString(Xc(e,t))},copyResourceRawAudio(t,e){Gc(Dc)&&Mc.resourceRawAudioToString(Xc(e,t))},saveLayoutAllXml(t,e){Gc(Dc)&&Mc.layoutAllToXml(Dc.layouts,Xc(e,void 0,t||Wc.outputArchiveName+"-layouts"))},saveResourceAllXml(t,e){Gc(Dc)&&Mc.resourceAllToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-resources"))},saveResourceStringXml(t,e){Gc(Dc)&&Mc.resourceStringToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-string"))},saveResourceArrayXml(t,e){Gc(Dc)&&Mc.resourceStringArrayToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-array"))},saveResourceFontXml(t,e){Gc(Dc)&&Mc.resourceFontToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-font"))},saveResourceColorXml(t,e){Gc(Dc)&&Mc.resourceColorToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-color"))},saveResourceStyleXml(t,e){Gc(Dc)&&Mc.resourceStyleToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-style"))},saveResourceDimenXml(t,e){Gc(Dc)&&Mc.resourceDimenToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-dimen"))},saveResourceDrawableXml(t,e){Gc(Dc)&&Mc.resourceDrawableToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-drawable"))},saveResourceAnimXml(t,e){Gc(Dc)&&Mc.resourceAnimToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-anim"))},saveResourceDrawableImage(t,e){Gc(Dc)&&Mc.resourceDrawableImageToString(Xc(e,void 0,t||Wc.outputArchiveName+"-drawable-image"))},saveResourceRawVideo(t,e){Gc(Dc)&&Mc.resourceRawVideoToString(Xc(e,void 0,t||Wc.outputArchiveName+"-raw-video"))},saveResourceRawAudio(t,e){Gc(Dc)&&Mc.resourceRawAudioToString(Xc(e,void 0,t||Wc.outputArchiveName+"-raw-audio"))},writeLayoutAllXml:t=>Gc(Dc)?Mc.layoutAllToXml(Dc.layouts,t):{},writeResourceAllXml:t=>Gc(Dc)?Mc.resourceAllToXml(t):{},writeResourceStringXml:t=>Gc(Dc)?Mc.resourceStringToXml(t):[],writeResourceArrayXml:t=>Gc(Dc)?Mc.resourceStringArrayToXml(t):[],writeResourceFontXml:t=>Gc(Dc)?Mc.resourceFontToXml(t):[],writeResourceColorXml:t=>Gc(Dc)?Mc.resourceColorToXml(t):[],writeResourceStyleXml:t=>Gc(Dc)?Mc.resourceStyleToXml(t):[],writeResourceDimenXml:t=>Gc(Dc)?Mc.resourceDimenToXml(t):[],writeResourceDrawableXml:t=>Gc(Dc)?Mc.resourceDrawableToXml(t):[],writeResourceAnimXml:t=>Gc(Dc)?Mc.resourceAnimToXml(t):[],writeResourceDrawableImage:t=>Gc(Dc)?Mc.resourceDrawableImageToString(t):[],writeResourceRawVideo:t=>Gc(Dc)?Mc.resourceRawVideoToString(t):[],writeResourceRawAudio:t=>Gc(Dc)?Mc.resourceRawAudioToString(t):[]},create(){const e=kc.constant.EXT_NAME,a=i;return Dc=new t(2,de,Aa,B,va),Mc=new Ka,Dc.resourceHandler.setFileHandler(Mc),Wc=Object.assign({},Oc),Object.assign(Dc.builtInExtensions,{[e.TABLE]:new ho(e.TABLE,2,void 0,["TABLE"]),[e.LIST]:new Mn(e.LIST,2,void 0,["DIV","UL","OL","DL"]),[e.GRID]:new xn(e.GRID,2,void 0,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[e.CSS_GRID]:new qi(e.CSS_GRID,2),[e.FLEXBOX]:new pn(e.FLEXBOX,2),[e.COLUMN]:new fi(e.COLUMN,2),[e.SPRITE]:new jn(e.SPRITE,2),[e.ACCESSIBILITY]:new Ja(e.ACCESSIBILITY,2),[e.RELATIVE]:new Bn(e.RELATIVE,2),[e.VERTICAL_ALIGN]:new po(e.VERTICAL_ALIGN,2),[e.WHITESPACE]:new go(e.WHITESPACE,2),[a.EXTERNAL]:new Yi(a.EXTERNAL,2),[a.SUBSTITUTE]:new Jn(a.SUBSTITUTE,2),[a.DELEGATE_BACKGROUND]:new Xo(a.DELEGATE_BACKGROUND,2),[a.DELEGATE_CSS_GRID]:new Yo(a.DELEGATE_CSS_GRID,2),[a.DELEGATE_MAXWIDTHHEIGHT]:new $o(a.DELEGATE_MAXWIDTHHEIGHT,2),[a.DELEGATE_NEGATIVEX]:new er(a.DELEGATE_NEGATIVEX,2),[a.DELEGATE_PERCENT]:new pr(a.DELEGATE_PERCENT,2),[a.DELEGATE_POSITIVEX]:new lr(a.DELEGATE_POSITIVEX,2),[a.DELEGATE_RADIOGROUP]:new vr(a.DELEGATE_RADIOGROUP,2),[a.DELEGATE_SCROLLBAR]:new Rr(a.DELEGATE_SCROLLBAR,2),[a.RESOURCE_BACKGROUND]:new bs(a.RESOURCE_BACKGROUND,2),[a.RESOURCE_DATA]:new Es(a.RESOURCE_DATA,2),[a.RESOURCE_DIMENS]:new Os(a.RESOURCE_DIMENS,2),[a.RESOURCE_FONTS]:new el(a.RESOURCE_FONTS,2),[a.RESOURCE_INCLUDES]:new il(a.RESOURCE_INCLUDES,2),[a.RESOURCE_STRINGS]:new pl(a.RESOURCE_STRINGS,2),[a.RESOURCE_STYLES]:new Sl(a.RESOURCE_STYLES,2),[a.RESOURCE_SVG]:new Pc(a.RESOURCE_SVG,2),[a.CONSTRAINT_GUIDELINE]:new Ao(a.CONSTRAINT_GUIDELINE,2)}),Bc=true,{application:Dc,framework:2,userSettings:Wc}},cached:()=>Bc?{application:Dc,framework:2,userSettings:Wc}:Hc.create()};return Hc}();
