var android=function(){"use strict";const e=(e,t)=>e.element===t||e.elementId===t||e.controlId===t;class t extends squared.base.ApplicationUI{constructor(){super(...arguments),this.systemName="android"}resolveTarget(t){if(t){for(const i of this.processing.cache)if(e(i,t))return i;for(const i of this.session.cache)if(e(i,t))return i}}set viewModel(e){this._viewModel=e}get viewModel(){return this._viewModel}}var i;!function(e){e[e.RADIO=1]="RADIO",e[e.CHECKBOX=2]="CHECKBOX",e[e.SELECT=3]="SELECT",e[e.SVG=4]="SVG",e[e.IMAGE=5]="IMAGE",e[e.BUTTON=6]="BUTTON",e[e.PROGRESS=7]="PROGRESS",e[e.RANGE=8]="RANGE",e[e.EDIT=9]="EDIT",e[e.TEXT=10]="TEXT",e[e.INLINE=11]="INLINE",e[e.LINE=12]="LINE",e[e.SPACE=13]="SPACE",e[e.BLOCK=14]="BLOCK",e[e.FRAME=15]="FRAME",e[e.LINEAR=16]="LINEAR",e[e.GRID=17]="GRID",e[e.RELATIVE=18]="RELATIVE",e[e.CONSTRAINT=19]="CONSTRAINT",e[e.WEBVIEW=20]="WEBVIEW",e[e.VIDEOVIEW=21]="VIDEOVIEW",e[e.UNKNOWN=22]="UNKNOWN"}(i||(i={}));var a=Object.freeze({__proto__:null,get CONTAINER_NODE(){return i}});const n={EXTERNAL:"android.external",SUBSTITUTE:"android.substitute",DELEGATE_BACKGROUND:"android.delegate.background",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_POSITIVEX:"android.delegate.positive-x",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_DATA:"android.resource.data",RESOURCE_STYLES:"android.resource.styles"},o={RADIO:"RadioButton",CHECKBOX:"CheckBox",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",EDIT:"EditText",SVG:"ImageView",IMAGE:"ImageView",BUTTON:"Button",RANGE:"SeekBar",METER:"ProgressBar",PROGRESS:"ProgressBar",TEXT:"TextView",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",VIDEOVIEW:"VideoView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},r={VERTICAL_SCROLL:"androidx.core.widget.NestedScrollView",CONSTRAINT:"androidx.constraintlayout.widget.ConstraintLayout",GUIDELINE:"androidx.constraintlayout.widget.Guideline",BARRIER:"androidx.constraintlayout.widget.Barrier"},s={DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},l={DRAWER:"androidx.drawerlayout.widget.DrawerLayout",NAVIGATION_VIEW:"com.google.android.material.navigation.NavigationView",COORDINATOR:"androidx.coordinatorlayout.widget.CoordinatorLayout",APPBAR:"com.google.android.material.appbar.AppBarLayout",COLLAPSING_TOOLBAR:"com.google.android.material.appbar.CollapsingToolbarLayout",TOOLBAR:"androidx.appcompat.widget.Toolbar",FLOATING_ACTION_BUTTON:"com.google.android.material.floatingactionbutton.FloatingActionButton",BOTTOM_NAVIGATION:"com.google.android.material.bottomnavigation.BottomNavigationView"},c={PLAINTEXT:i.TEXT,HR:i.LINE,SVG:i.SVG,IMG:i.IMAGE,BUTTON:i.BUTTON,SELECT:i.SELECT,TEXTAREA:i.EDIT,METER:i.PROGRESS,PROGRESS:i.PROGRESS,AUDIO:i.VIDEOVIEW,VIDEO:i.VIDEOVIEW,IFRAME:i.WEBVIEW,INPUT_RANGE:i.RANGE,INPUT_TEXT:i.EDIT,INPUT_PASSWORD:i.EDIT,INPUT_NUMBER:i.EDIT,INPUT_EMAIL:i.EDIT,INPUT_SEARCH:i.EDIT,INPUT_URL:i.EDIT,INPUT_DATE:i.EDIT,INPUT_TEL:i.EDIT,INPUT_TIME:i.EDIT,INPUT_WEEK:i.EDIT,INPUT_MONTH:i.EDIT,INPUT_BUTTON:i.BUTTON,INPUT_FILE:i.BUTTON,INPUT_IMAGE:i.BUTTON,INPUT_COLOR:i.BUTTON,INPUT_SUBMIT:i.BUTTON,INPUT_RESET:i.BUTTON,INPUT_CHECKBOX:i.CHECKBOX,INPUT_RADIO:i.RADIO,INPUT_DATETIME_LOCAL:i.EDIT},h={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},f={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},d={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},u={left:"start",right:"end",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toLeftOf:"layout_toStartOf",layout_toRightOf:"layout_toEndOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},p=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var g=Object.freeze({__proto__:null,EXT_ANDROID:n,CONTAINER_ANDROID:o,CONTAINER_ANDROID_X:r,SUPPORT_ANDROID:s,SUPPORT_ANDROID_X:l,ELEMENT_ANDROID:c,LAYOUT_ANDROID:h,XMLNS_ANDROID:f,STRING_ANDROID:d,LOCALIZE_ANDROID:u,RESERVED_JAVA:p});const m=squared.lib,{findColorShade:y,parseColor:b}=m.color,{extractURL:T,getSrcSet:S}=m.css,{CHAR:E,COMPONENT:A,FILE:w,XML:x}=m.regex,{fromLastIndexOf:v,hasMimeType:_,isNumber:N,isPlainObject:R,isString:I,resolvePath:C,safeNestedArray:L,spliceArray:k,trimString:P}=m.util,O=squared.base.ResourceUI.STORED,M=/[^\w]+/g;let D={};function W(e,t=false){var i;for(const a in e)if(R(e[a]))W(e,t);else{let n=null===(i=e[a])||void 0===i?void 0:i.toString();if(n){switch(a){case"text":if(n.startsWith("@string/"))continue;if(n=B.addString(n,"",t),""!==n)e[a]="@string/"+n;break;case"src":case"srcCompat":if(A.PROTOCOL.test(n))if(n=B.addImage({mdpi:n}),""!==n)e[a]="@drawable/"+n;continue}const i=b(n);if(i){const t=B.addColor(i);if(""!==t)e[a]="@color/"+t}}}}class B extends squared.base.ResourceUI{constructor(e,t){super(),this.application=e,this.cache=t,O.styles=new Map,O.themes=new Map,O.dimens=new Map,O.drawables=new Map,O.animators=new Map;const i=this.controllerSettings.mimeType.image;if("*"!==i)this._imageFormat=k(i.slice(0),e=>"image/svg+xml"===e)}static formatOptions(e,t=false){for(const i in e){const a=e[i];if(R(a))W(a,t)}return e}static formatName(e){if(E.LEADINGNUMBER.test(e))e="__"+e;return e.replace(M,"_")}static addTheme(e){const t=O.themes,{items:i,output:a}=e;let n="res/values",o="themes.xml";if(a){if(I(a.path))n=P(a.path.trim(),"/");if(I(a.file))o=P(a.file.trim(),"/")}const r=n+"/"+o,s=t.get(r)||new Map;let l=e.name,c="";if(""===l||"."===l.charAt(0)){e:for(const e of t.values())for(const t of e.values())if(t.name){c=t.name;break e}if(""===c)return false}else c=l;l=c+("."===l.charAt(0)?l:""),e.name=l,B.formatOptions(i);const h=s.get(l);if(h){const e=h.items;for(const t in i)e[t]=i[t]}else s.set(l,e);return t.set(r,s),true}static addString(e,t,i=false){if(""!==e){if(!t)t=e.trim();const a=N(e);if(!a||i){const i=O.strings;for(const[t,a]of i.entries())if(a===e)return t;const n=P(t.replace(x.NONWORD_G,"_"),"_").split(/_+/);if(n.length>1){if(n.length>4)n.length=4;t=n.join("_")}else t=n[0];if(t=t.toLowerCase(),a||E.LEADINGNUMBER.test(t)||p.includes(t))t="__"+t;else if(!t)t="__symbol"+ ++B.SYMBOL_COUNTER;if(i.has(t))t=B.generateId("string",t);i.set(t,e)}return t}return""}static addImage(e,t="",i){const a=e.mdpi;if(a){if(1===Object.keys(e).length){const e=D[a];if(e)return e}const n=v(a,"/");if(!i||_(i,n)){const i=B.insertStoredAsset("images",B.formatName(t+n.substring(0,n.length-v(n,".").length-1)).toLowerCase(),e);return D[a]=i,i}}return""}static addColor(e,t=false){if("string"==typeof e)e=b(e,1,t);if(e&&(!e.transparent||t)){const t=e.opacity<1?e.valueAsARGB:e.value;let i=O.colors.get(t);if(i)return i;const a=y(e.value);if(a)return i=t===a.value?a.key:B.generateId("color",a.key),O.colors.set(t,i),i}return""}reset(){super.reset(),D={},B.UUID_COUNTER=0,B.SYMBOL_COUNTER=0}addImageSrc(e,t="",i){const a={};let n;if("string"==typeof e){if(n=T(e),""!==n&&!n.startsWith("data:image/"))return this.addImageSet({mdpi:C(n)},t)}else{if(e.srcset)(i||S(e,this._imageFormat)).forEach(e=>{const t=e.pixelRatio;if(t>0){const i=e.src;if(t<1)a.ldpi=i;else if(1===t){if(!n||e.actualWidth)n=i}else if(t<=1.5)a.hdpi=i;else if(t<=2)a.xhdpi=i;else if(t<=3)a.xxhdpi=i;else a.xxxhdpi=i}});if(!n)n=e.src}if(n){const e=this.application.resourceHandler;a.mdpi=n;const i=e.getRawData(n);if(i){const{base64:a,filename:n}=i;if(a)if(w.SVG.test(n))return"";else return e.writeRawImage(t+n,a),n.substring(0,n.lastIndexOf("."))}}return this.addImageSet(a,t)}addImageSet(e,t){return B.addImage(e,t,this._imageFormat)}writeRawImage(e,t){const i=super.writeRawImage(e,t);if(i&&this.userSettings.compressImages&&B.canCompressImage(e))L(i,"compress").unshift({format:"png"});return i}get userSettings(){return this.application.userSettings}get randomUUID(){return"__"+(++B.UUID_COUNTER).toString().padStart(5,"0")}}B.UUID_COUNTER=0,B.SYMBOL_COUNTER=0;const{isString:X}=squared.lib.util;function G(e,t,i,a=0){if(!i||i>=a)return e.attr=t,true;else return false}const H={29:{android:{},assign:{}},28:{android:{allowAudioPlaybackCapture:false,enforceNavigationBarContrast:false,enforceStatusBarContrast:false,forceDarkAllowed:false,forceUriPermissions:false,foregroundServiceType:false,hasFragileUserData:false,identifier:false,inheritShowWhenLocked:false,interactiveUiTimeout:false,isLightTheme:false,isSplitRequired:false,minAspectRatio:false,nonInteractiveUiTimeout:false,opticalInsetBottom:false,opticalInsetLeft:false,opticalInsetRight:false,opticalInsetTop:false,packageType:false,requestLegacyExternalStorage:false,secureElementName:false,selectionDividerHeight:false,settingsSliceUri:false,shell:false,supportsMultipleDisplays:false,textLocale:false,useAppZygote:false,useEmbeddedDex:false,zygotePreloadName:false},assign:{}},27:{android:{accessibilityHeading:false,accessibilityPaneTitle:false,appComponentFactory:false,buttonCornerRadius:false,cantSaveState:false,dialogCornerRadius:false,fallbackLineSpacing:false,firstBaselineToTopHeight:false,fontVariationSettings:false,lastBaselineToBottomHeight:false,lineHeight:false,maxLongVersionCode:false,outlineAmbientShadowColor:false,outlineSpotShadowColor:false,screenReaderFocusable:false,textFontWeight:false,ttcIndex:false,versionCodeMajor:false,versionMajor:false,widgetFeatures:false,windowLayoutInDisplayCutoutMode:false},assign:{}},26:{android:{classLoader:false,navigationBarDividerColor:false,showWhenLocked:false,turnScreenOn:false,windowLightNavigationBar:false},assign:{}},25:{android:{fontWeight:false,justificationMode:false,layout_marginHorizontal:false,layout_marginVertical:false,paddingHorizontal:false,paddingVertical:false,tooltipText:false},assign:{}},24:{android:{colorSecondary:false,contextDescription:false,contextUri:false,roundIcon:false,shortcutDisabledMessage:false,shortcutId:false,shortcutLongLabel:false,shortcutShortLabel:false,showMetadataInPreview:false},assign:{}},23:{android:{backupInForeground:false,bitmap:false,buttonGravity:false,canControlMagnification:false,canPerformGestures:false,canRecord:false,collapseIcon:false,contentInsetEndWithActions:false,contentInsetStartWithNavigation:false,contextPopupMenuStyle:false,countDown:false,defaultHeight:false,defaultToDeviceProtectedStorage:false,defaultWidth:false,directBootAware:false,enableVrMode:false,endX:false,endY:false,externalService:false,fillType:false,forceHasOverlappingRendering:false,hotSpotX:false,hotSpotY:false,languageTag:false,level:false,listMenuViewStyle:false,maxButtonHeight:false,networkSecurityConfig:false,numberPickerStyle:false,offset:false,pointerIcon:false,popupEnterTransition:false,popupExitTransition:false,preferenceFragmentStyle:false,resizeableActivity:false,startX:false,startY:false,subMenuArrow:false,supportsLocalInteraction:false,supportsPictureInPicture:false,textAppearancePopupMenuHeader:false,tickMark:false,tickMarkTint:false,tickMarkTintMode:false,titleMargin:false,titleMarginBottom:false,titleMarginEnd:false,titleMarginStart:false,titleMarginTop:false,tunerCount:false,use32bitAbi:false,version:false,windowBackgroundFallback:false},assign:{}},22:{android:{allowUndo:false,autoVerify:false,breakStrategy:false,colorBackgroundFloating:false,contextClickable:false,drawableTint:false,drawableTintMode:false,end:e=>G(e,"right"),extractNativeLibs:false,fingerprintAuthDrawable:false,fraction:false,fullBackupContent:false,hyphenationFrequency:false,lockTaskMode:false,logoDescription:false,numbersInnerTextColor:false,scrollIndicators:false,showForAllUsers:false,start:e=>G(e,"left"),subtitleTextColor:false,supportsAssist:false,supportsLaunchVoiceAssistFromKeyguard:false,thumbPosition:false,titleTextColor:false,trackTint:false,trackTintMode:false,usesCleartextTraffic:false,windowLightStatusBar:false},assign:{}},21:{android:{accessibilityTraversalAfter:false,accessibilityTraversalBefore:false,collapseContentDescription:false,dialogPreferredPadding:false,resizeClip:false,revisionCode:false,searchHintIcon:false},assign:{}},20:{android:{actionBarPopupTheme:false,actionBarTheme:false,actionModeFindDrawable:false,actionModeShareDrawable:false,actionModeWebSearchDrawable:false,actionOverflowMenuStyle:false,amPmBackgroundColor:false,amPmTextColor:false,ambientShadowAlpha:false,autoRemoveFromRecents:false,backgroundTint:false,backgroundTintMode:false,banner:false,buttonBarNegativeButtonStyle:false,buttonBarNeutralButtonStyle:false,buttonBarPositiveButtonStyle:false,buttonTint:false,buttonTintMode:false,calendarTextColor:false,checkMarkTint:false,checkMarkTintMode:false,closeIcon:false,colorAccent:false,colorButtonNormal:false,colorControlActivated:false,colorControlHighlight:false,colorControlNormal:false,colorEdgeEffect:false,colorPrimary:false,colorPrimaryDark:false,commitIcon:false,contentAgeHint:false,contentInsetEnd:false,contentInsetLeft:false,contentInsetRight:false,contentInsetStart:false,controlX1:false,controlX2:false,controlY1:false,controlY2:false,country:false,datePickerDialogTheme:false,datePickerMode:false,dayOfWeekBackground:false,dayOfWeekTextAppearance:false,documentLaunchMode:false,elegantTextHeight:false,elevation:false,excludeClass:false,excludeId:false,excludeName:false,fastScrollStyle:false,fillAlpha:false,fillColor:false,fontFeatureSettings:false,foregroundTint:false,foregroundTintMode:false,fragmentAllowEnterTransitionOverlap:false,fragmentAllowReturnTransitionOverlap:false,fragmentEnterTransition:false,fragmentExitTransition:false,fragmentReenterTransition:false,fragmentReturnTransition:false,fragmentSharedElementEnterTransition:false,fragmentSharedElementReturnTransition:false,fromId:false,fullBackupOnly:false,goIcon:false,headerAmPmTextAppearance:false,headerDayOfMonthTextAppearance:false,headerMonthTextAppearance:false,headerTimeTextAppearance:false,headerYearTextAppearance:false,hideOnContentScroll:false,indeterminateTint:false,indeterminateTintMode:false,inset:false,isGame:false,launchTaskBehindSourceAnimation:false,launchTaskBehindTargetAnimation:false,layout_columnWeight:false,layout_rowWeight:false,letterSpacing:false,matchOrder:false,maxRecentsv:false,maximumAngle:false,minimumHorizontalAngle:false,minimumVerticalAngle:false,multiArch:false,navigationBarColor:false,navigationContentDescription:false,navigationIcon:false,nestedScrollingEnabled:false,numbersBackgroundColor:false,numbersSelectorColor:false,numbersTextColor:false,outlineProvider:false,overlapAnchor:false,paddingMode:false,pathData:false,patternPathData:false,persistableMode:false,popupElevation:false,popupTheme:false,progressBackgroundTint:false,progressBackgroundTintMode:false,progressTint:false,progressTintMode:false,propertyXName:false,propertyYName:false,queryBackground:false,recognitionService:false,relinquishTaskIdentity:false,reparent:false,reparentWithOverlay:false,restrictionType:false,resumeWhilePausing:false,reversible:false,searchIcon:false,searchViewStyle:false,secondaryProgressTint:false,secondaryProgressTintMode:false,selectableItemBackgroundBorderless:false,sessionService:false,setupActivity:false,showText:false,slideEdge:false,splitTrack:false,spotShadowAlpha:false,src:(e,t,i)=>{if(i.svgElement)e.obj="app",e.attr="srcCompat";return true},stackViewStyle:false,stateListAnimator:false,statusBarColor:false,strokeAlpha:false,strokeColor:false,strokeLineCap:false,strokeLineJoin:false,strokeMiterLimit:false,strokeWidth:false,submitBackground:false,subtitleTextAppearance:false,suggestionRowLayout:false,switchStyle:false,targetName:false,textAppearanceListItemSecondary:false,thumbTint:false,thumbTintMode:false,tileModeX:false,tileModeY:false,timePickerDialogTheme:false,timePickerMode:false,timePickerStyle:false,tintMode:false,titleTextAppearance:false,toId:false,toolbarStyle:false,touchscreenBlocksFocus:false,transitionGroup:false,transitionName:false,transitionVisibilityMode:false,translateX:false,translateY:false,translationZ:false,trimPathEnd:false,trimPathOffset:false,trimPathStart:false,viewportHeight:false,viewportWidth:false,voiceIcon:false,windowActivityTransitions:false,windowAllowEnterTransitionOverlap:false,windowAllowReturnTransitionOverlap:false,windowClipToOutline:false,windowContentTransitionManager:false,windowContentTransitions:false,windowDrawsSystemBarBackgrounds:false,windowElevation:false,windowEnterTransition:false,windowExitTransition:false,windowReenterTransition:false,windowReturnTransition:false,windowSharedElementEnterTransition:false,windowSharedElementExitTransition:false,windowSharedElementReenterTransition:false,windowSharedElementReturnTransition:false,windowSharedElementsUseOverlay:false,windowTransitionBackgroundFadeDuration:false,yearListItemTextAppearance:false,yearListSelectorColor:false},assign:{}},19:{android:{allowEmbedded:false,windowSwipeToDismiss:false},assign:{}},18:{android:{accessibilityLiveRegion:false,addPrintersActivity:false,advancedPrintOptionsActivity:false,apduServiceBanner:false,autoMirrored:false,category:false,fadingMode:false,fromScene:false,isAsciiCapable:false,keySet:false,requireDeviceUnlock:false,ssp:false,sspPattern:false,sspPrefix:false,startDelay:false,supportsSwitchingToNextInputMethod:false,targetId:false,toScene:false,transition:false,transitionOrdering:false,vendor:false,windowTranslucentNavigation:false,windowTranslucentStatus:false},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(e,t)=>t<26,canRequestFilterKeyEvents:false,canRequestTouchExplorationMode:false,childIndicatorEnd:false,childIndicatorStart:false,indicatorEnd:false,indicatorStart:false,layoutMode:false,mipMap:false,mirrorForRtl:false,requiredAccountType:false,requiredForAllUsers:false,restrictedAccountType:false,windowOverscan:false},assign:{}},16:{android:{checkedTextViewStyle:false,format12Hour:false,format24Hour:false,initialKeyguardLayout:false,labelFor:false,layoutDirection:false,layout_alignEnd:e=>G(e,"layout_alignRight"),layout_alignParentEnd:e=>G(e,"layout_alignParentRight"),layout_alignParentStart:e=>G(e,"layout_alignParentLeft"),layout_alignStart:e=>G(e,"layout_alignLeft"),layout_marginEnd:e=>G(e,"layout_marginRight"),layout_marginStart:e=>G(e,"layout_marginLeft"),layout_toEndOf:e=>G(e,"layout_toRightOf"),layout_toStartOf:e=>G(e,"layout_toLeftOf"),listPreferredItemPaddingEnd:e=>G(e,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:e=>G(e,"listPreferredItemPaddingLeft"),paddingEnd:e=>G(e,d.PADDING_RIGHT),paddingStart:e=>G(e,d.PADDING_LEFT),permissionFlags:false,permissionGroupFlags:false,presentationTheme:false,showOnLockScreen:false,singleUser:false,subtypeId:false,supportsRtl:false,textAlignment:false,textDirection:false,timeZone:false,widgetCategory:false},assign:{}},15:{android:{fontFamily:false,importantForAccessibility:false,isolatedProcess:false,keyboardLayout:false,mediaRouteButtonStyle:false,mediaRouteTypes:false,parentActivityName:false},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},V={android:{amPmBackgroundColor:(e,t)=>G(e,"headerBackground",t,23),amPmTextColor:(e,t)=>G(e,"headerTextColor",t,23),animationResolution:(e,t)=>t<16,canRequestEnhancedWebAccessibility:(e,t)=>t<26,dayOfWeekBackground:(e,t)=>t<23,dayOfWeekTextAppearance:(e,t)=>t<23,directionDescriptions:(e,t)=>t<23,headerAmPmTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),headerDayOfMonthTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),headerMonthTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),headerTimeTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),headerYearTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),showOnLockScreen:(e,t)=>G(e,"showForAllUsers",t,23),targetDescriptions:(e,t)=>t<23,yearListItemTextAppearance:(e,t)=>G(e,"yearListTextColor",t,23),yearListSelectorColor:(e,t)=>t<23}};var F=Object.freeze({__proto__:null,API_ANDROID:H,DEPRECATED_ANDROID:V,getValue:function(e,t,i,a){var n,o;for(const r of[H[e],H[0]]){const e=null===(o=null===(n=r.assign[t])||void 0===n?void 0:n[i])||void 0===o?void 0:o[a];if(X(e))return e}return""}});const z=squared.lib,{truncate:U}=z.math,{capitalize:q,isPlainObject:Y}=z.util,{BOX_STANDARD:j}=squared.base.lib.enumeration,K=/^@\+?id\//;function $(e,t,i=3){if(0===e)return 0;else if(0===t)return 1;return parseFloat(U(Math.max(e/(e+t),0),i))}function Z(e,t=false,i=3){if("string"==typeof e)e=parseFloat(e)||0;return!t?Math.round(e)+"dp":U(e,i)+"sp"}function J(e){return e.replace(K,"")}function Q(e){switch(e){case"left":case"start":case"right":case"end":case"center_horizontal":return true}return false}function ee(e){switch(e){case"top":case"bottom":case"center_vertical":return true}return false}function te(e,t){let i;for(const a in e)if(a.startsWith(t)){if(void 0===i)i={};i[q(a.substring(t.length),false)]=e[a]}return i}function ie(e,t,i){if(i>0){if(e.documentBody)switch(t){case 32:if(0===e.getBox(2)[0])i-=e.marginTop;break;case 64:i-=e.marginRight;break;case 128:if(0===e.getBox(8)[0])i-=e.marginBottom;break;case 256:i-=e.marginLeft;break}if(0===e.getBox(t)[0])switch(t){case 32:i+=e.borderTopWidth-e.paddingTop;break;case 64:i+=e.borderRightWidth-e.paddingRight;break;case 128:i+=e.borderBottomWidth-e.paddingBottom;break;case 256:i+=e.borderLeftWidth-e.paddingLeft;break}return Math.max(i,0)}else if(i<0){switch(t){case 32:i+=e.marginTop;break;case 64:i+=e.marginRight;break;case 128:i+=e.marginBottom;break;case 256:i+=e.marginLeft;break}return i}return 0}function ae(e,t){if(!t)t={android:{}};else if(!t.android)t.android={};if(e){const{android:i,app:a}=e;if(i)Object.assign(t.android,i);if(a){if(!t.app)t.app={};Object.assign(t.app,a)}}return t}function ne(e){const t={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(Y(e))for(const i in t)if(typeof e[i]==typeof t[i])t[i]=e[i];return t}function oe(e,t,i){return t&&i>=17&&u[e]||e}function re(e){return f[e]?`xmlns:${e}="${f[e]}"`:""}function se(e){let t="";for(const i in f)if(e.includes(i+":"))t+="\n\t"+re(i);return t}var le=Object.freeze({__proto__:null,convertLength:Z,getDocumentId:J,isHorizontalAlign:Q,isVerticalAlign:ee,getDataSet:te,getHorizontalBias:function(e){const t=e.documentParent.box;return $(Math.max(0,e.actualRect("left","bounds")-t.left),Math.max(0,t.right-e.actualRect("right","bounds")),e.localSettings.floatPrecision)},getVerticalBias:function(e){const t=e.documentParent.box;return $(Math.max(0,e.actualRect("top","bounds")-t.top),Math.max(0,t.bottom-e.actualRect("bottom","bounds")),e.localSettings.floatPrecision)},adjustAbsolutePaddingOffset:ie,createViewAttribute:ae,createStyleAttribute:ne,localizeString:oe,getXmlNs:re,getRootNs:se});const{lib:ce,base:he}=squared,{BOX_MARGIN:fe,BOX_PADDING:de,CSS_UNIT:ue,formatPX:pe,isLength:ge,isPercent:me}=ce.css,{createElement:ye,getNamedItem:be,newBoxModel:Te}=ce.dom,{clamp:Se,truncate:Ee}=ce.math,{actualTextRangeRect:Ae}=ce.session,{capitalize:we,convertFloat:xe,convertInt:ve,convertWord:_e,fromLastIndexOf:Ne,isNumber:Re,isPlainObject:Ie,isString:Ce,replaceMap:Le}=ce.util,{EXT_NAME:ke}=he.lib.constant,{BOX_STANDARD:Pe,NODE_ALIGNMENT:Oe}=he.lib.enumeration,Me=he.ResourceUI,{constraint:De,relative:We,relativeParent:Be}=h,Xe=V.android,Ge=/^attr[A-Z]/,He=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,Ve=/[^\w$\-_.]/g,Fe=/^rect\(0[a-z]*,\s+0[a-z]*,\s+0[a-z]*,\s+0[a-z]*\)$/;function ze(e,t){switch(e){case"left":case"start":return!t?e:"";case"center":return"center_horizontal";case"justify":case"initial":case"inherit":return""}return e}function Ue(e,t){if(t.horizontal&&(!e.blockWidth||e.hasWidth||e.hasPX("maxWidth")||e.innerMostWrapped.has("width",{type:4,not:"100%"})))return e.mergeGravity((e.blockWidth||!e.pageFlow)&&!e.outerWrapper?"gravity":"layout_gravity",t.leftRight?"center_horizontal":t.left?"right":"left"),true;else return false}function qe(e,t,i){const a=$e(e,t);if(e.api>=28)e.android("lineHeight",pe(t),i);else if(a>0)e.android("lineSpacingExtra",pe(a),i);else return;const n=Math.round(a);if(n>0)if(e.modifyBox(e.inline?2:32,n),!(e.block&&!e.floating))e.modifyBox(e.inline?8:128,Math.floor(a))}function Ye(e,t,i,a,n){const o=e.cssInitial("lineHeight");if(!e.imageOrSvgElement&&!e.renderChildren.length&&0!==e.actualHeight&&"initial"!==o)if(e.multiline)qe(e,t,false);else{const r=e.height;if(t===r)e.mergeGravity("gravity","center_vertical",false);else{const s=(s,l=false)=>{let c=Math.round(s);if(c>0){const h=(i||r>t)&&(e.styleText||l)&&!e.inline&&!(e.inputElement&&!ge(o,true));if(a)if(h){if(c>0)e.modifyBox(32,c)}else if(i||!e.baselineAltered)if(c-=e.paddingTop,c>0)e.modifyBox(2,c);if(n)if(s=Math.floor(s),h){if(s>0)e.modifyBox(128,s)}else if((s-=e.paddingBottom)>0)e.modifyBox(8,s)}};if(r>0)if(e.styleText)s($e(e,t));else{const i=t/2-e.paddingTop;if(i>0)e.modifyBox(32,i)}else if(e.textElement)s($e(e,t));else if(e.inputElement){const i=ye(document.body,"div",Object.assign(Object.assign({},e.textStyle),{visibility:"hidden"}));i.innerText="AgjpyZ";const a=Ae(i).height;document.body.removeChild(i);let n=1;switch(e.tagName){case"SELECT":n=e.toElementInt("size",1);break;case"TEXTAREA":n=e.toElementInt("rows",1);break}s((t-a*Math.max(n,1))/2,true)}else s((t-e.bounds.height)/2)}}}function je(e,t){if("0px"===t){const t=e.renderParent;return!!t&&(t.layoutConstraint||t.layoutGrid)}return false}function Ke(e,t){const i=e+"_horizontal",a=e+"_vertical";if(t.has(e)||t.has(i)&&t.has(a))t.delete(i),t.delete(a),t.add(e)}function $e(e,t){let i=NaN;if(e.styleText){const t=e.cssTryAll({display:"inline-block",height:"auto","max-height":"none","min-height":"auto","line-height":"normal","white-space":"nowrap"});if(t)i=Ae(e.element).height,e.cssFinally(t)}else if(e.plainText){const t=e.bounds;i=t.height/(t.numberOfLines||1)}return(t-(!isNaN(i)?i:e.boundingClientRect.height))/2}function Ze(e,t){if(e.support.maxDimension&&(t&&e.floating||!t))return;if(!e.hasPX(t?"width":"height",false)){const i=e.cssInitial(t?"minWidth":"minHeight",true);if(ge(i,true)&&parseFloat(i)>0)if(t){if(at(e))if(e.setLayoutWidth("0px",false),e.flexibleWidth)e.app("layout_constraintWidth_min",pe(e.parseWidth(i)+e.contentBoxWidth)),e.css("minWidth","auto")}else if(nt(e))if(e.setLayoutHeight("0px",false),e.flexibleHeight)e.app("layout_constraintHeight_min",pe(e.parseHeight(i)+e.contentBoxHeight)),e.css(t?"minWidth":"minHeight","auto")}const i=e.cssInitial(t?"maxWidth":"maxHeight",true);if(ge(i,true)&&"100%"!==i)if(t){if(at(e)){const t=e.parseWidth(i);if(t>e.width||e.percentWidth>0)e.setLayoutWidth("0px"),e.app("layout_constraintWidth_max",pe(t+(e.contentBox?e.contentBoxWidth:0))),e.css("maxWidth","auto")}}else if(nt(e)){const t=e.parseHeight(i);if(t>e.height||e.percentHeight>0)e.setLayoutHeight("0px"),e.app("layout_constraintHeight_max",pe(t+(e.contentBox?e.contentBoxHeight:0))),e.css("maxHeight","auto")}}function Je(e,t,i,a){if(t<1&&!isNaN(a)&&e.pageFlow){const n=e.actualParent||e.documentParent;let o,r;if(i){const t=n.box.width;o=!n.gridElement?e.contentBoxWidth/t:0,r=(Math.max(e.marginLeft,0)+e.marginRight)/t}else{const t=n.box.height;o=!n.gridElement?e.contentBoxHeight/t:0,r=(Math.max(e.marginTop,0)+e.marginBottom)/t}if(1===a&&t+r>=a)t=a-r;else{if(o>0)if(a<o)o=Math.max(a,0),a=0;else a-=o;if(0===a)o-=r;else a=Math.max(a-r,0);t=Math.min(t+o,1)}}if(1===t&&!e.hasPX(i?"maxWidth":"maxHeight"))Qe(e,"match_parent",i,false);else e.app(i?"layout_constraintWidth_percent":"layout_constraintHeight_percent",Ee(t,e.localSettings.floatPrecision)),Qe(e,"0px",i,false);return a}function Qe(e,t,i,a){if(i)e.setLayoutWidth(t,a);else e.setLayoutHeight(t,a)}function et(e,t,i){const a=t?e.percentWidth:e.percentHeight;return a>0?Je(e,a,t,i):i}function tt(e,t=1){const i=e.percentWidth;if(i>0)if(e.renderParent.hasPX("width",false)&&!(e.actualParent||e.documentParent).layoutElement)if(i<1)e.setLayoutWidth(pe(e.actualWidth));else e.setLayoutWidth("match_parent",false);else if(!e.inputElement)return et(e,true,t);return t}function it(e,t=1){const i=e.percentHeight;if(i>0)if(e.renderParent.hasPX("height",false)&&!(e.actualParent||e.documentParent).layoutElement)if(i<1)e.setLayoutHeight(pe(e.actualHeight));else e.setLayoutHeight("match_parent",false);else if(!e.inputElement)return et(e,false,t);return t}function at(e){if(e.documentRoot&&(e.hasWidth||e.blockStatic||e.blockWidth))return true;let t=e.renderParent,a=0;while(t){if(!t.inlineWidth&&(t.hasWidth||parseInt(t.layoutWidth)>0||t.of(i.CONSTRAINT,64)||t.documentRoot&&(t.blockWidth||t.blockStatic)))return true;else if(t.flexibleWidth){if(++a>1)return false}else if(t.inlineWidth||t.naturalElement&&t.inlineVertical)return false;t=t.renderParent}return false}function nt(e){var t;if(e.documentRoot&&e.hasHeight)return true;const i=e.renderParent;return!!i&&(i.hasHeight||i.layoutConstraint&&i.blockHeight)||true===(null===(t=e.absoluteParent)||void 0===t?void 0:t.hasHeight)}function ot(e,t){const i=e.anchorChain("left").shift(),a=e.anchorChain("right").shift(),n=e.anchorChain("top").shift(),o=e.anchorChain("bottom").shift();if(i&&a)i.anchor("rightLeft",a.documentId,true),a.anchor("leftRight",i.documentId,true);else if(i){if(i.anchorDelete("rightLeft"),e.alignParent("right"))i.anchor("right",t),rt(e,i)}else if(a)if(a.anchorDelete("leftRight"),e.alignParent("left"))a.anchor("left",t),rt(e,a);if(n&&o)n.anchor("bottomTop",o.documentId,true),o.anchor("topBottom",n.documentId,true);else if(n){if(n.anchorDelete("bottomTop"),e.alignParent("bottom"))n.anchor("bottom",t),st(e,n)}else if(o)if(o.anchorDelete("topBottom"),e.alignParent("top"))o.anchor("top",t),st(e,o)}function rt(e,t){t.app("layout_constraintHorizontal_bias",e.app("layout_constraintHorizontal_bias")),t.app("layout_constraintHorizontal_chainStyle",e.app("layout_constraintHorizontal_chainStyle"))}function st(e,t){t.app("layout_constraintVertical_bias",e.app("layout_constraintVertical_bias")),t.app("layout_constraintVertical_chainStyle",e.app("layout_constraintVertical_chainStyle"))}function lt(e,t){t.anchorClear();for(const i of e.unsafe("namespaces")){const a=e.namespace(i);for(const e in a){switch(e){case"layout_width":case"layout_height":continue;default:if(e.includes("margin"))continue;break}if(e.startsWith("layout_"))t.attr(i,e,a[e],true)}}}function ct(e,t){const i=dt(e,t);if(i.size>1)Ke("center",i),Ke("fill",i);let a="",n="",o="",r="";for(const e of i.values())if(Q(e))n=e;else if(ee(e))o=e;else r+=(""!==r?"|":"")+e;if(a=""!==n&&""!==o?n+"|"+o:n||o,""!==r)a+=(""!==a?"|":"")+r;if(""!==a)e.android(t,a);else e.delete("android",t)}function ht(e,t,i,a,n){if(i>0)return e.app(t?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",Ee(i,e.localSettings.floatPrecision)),true;else if(a){if(n)if(n>1)a/=n;else if(n>0)a*=1-n;e.app(t?"layout_constraintWidth_min":"layout_constraintHeight_min",pe(a))}return false}function ft(e,t,i){if(t)for(const a in t){const n=t[a];for(const t in n)e.attr(a,t,n[t],i)}}const dt=(e,t)=>new Set(e.android(t).split("|")),ut=e=>0===e.bounds.width&&0===e.contentBoxWidth&&e.textEmpty&&0===e.marginLeft&&0===e.marginRight&&!e.visibleStyle.background,pt=e=>0===e.bounds.height&&0===e.contentBoxHeight&&(0===e.marginTop&&0===e.marginBottom||"hidden"===e.css("overflow"));function gt(e,t,a,n){let r=0,s=0,l=0,c=0;for(let i=0;i<4;++i){const n=e[i];let o=0===t[n]?this[n]:0;if(0!==o)switch(n){case"marginRight":if(this.inline){const e=this.documentParent.box.right,t=this.bounds.right;if(Math.floor(t)>e){if(!this.onlyChild&&!this.alignParent("left"))this.setSingleLine(true);continue}else if(t+o>e)o=Se(e-t,0,o)}break;case"marginBottom":if(o<0&&this.pageFlow&&!this.blockStatic)o=0;break;case"paddingTop":o=this.actualPadding(n,o);break;case"paddingBottom":if(this.hasPX("height",false,true)&&(!this.layoutElement&&(this.layoutVertical||this.layoutFrame)||!this.pageFlow)||this.documentParent.gridElement&&this.hasPX("height",false))continue;else if(this.floatContainer){let e=-1/0;this.naturalChildren.forEach(t=>{if(t.floating)e=Math.max(t.bounds.bottom,e)}),o=Se(this.bounds.bottom-e,0,o)}else o=this.actualPadding(n,o);break}if(a)o+=a[n];switch(i){case 0:r=o;break;case 1:s=o;break;case 2:l=o;break;case 3:c=o;break}}if(n){if(this.floating){let e=this.renderParent.renderChildren.find(e=>!e.floating);if(e){const t=Math.floor(this.bounds.top);let i;while(Math.floor(e.bounds.top)===t){i=e;const t=e.innerWrapped;if(t)e=t;else break}if(i){const[e,t]=i.getBox(2);r+=(0===e?i.marginTop:0)+t}}}if(this.positionStatic&&!this.blockWidth&&(c<0||s<0))switch(this.cssAscend("textAlign")){case"center":if(c<s)s+=Math.abs(c),s/=2,c=0;else c+=Math.abs(s),c/=2,s=0;break;case"right":case"end":if(c<0)c=0;break}switch(this.controlName){case o.RADIO:case o.CHECKBOX:r=Math.max(r-4,0),l=Math.max(l-4,0);break;case o.SELECT:r=Math.max(r-2,0),l=Math.max(l-2,0);break}if(r<0)if(!this.pageFlow){if(l>=0&&this.leftTopAxis&&(this.hasPX("top")||!this.hasPX("bottom"))&&this.translateY(r))r=0}else if(this.blockDimension&&!this.inputElement&&this.translateY(r))this.anchorChain("bottom").forEach(e=>e.translateY(r)),r=0;if(l<0)if(!this.pageFlow){if(r>=0&&this.leftTopAxis&&this.hasPX("bottom")&&!this.hasPX("top")&&this.translateY(-l))l=0}else if(this.blockDimension&&!this.inputElement&&this.renderParent.layoutConstraint)this.anchorChain("bottom").forEach(e=>e.translateY(-l)),l=0;if(c<0)if(!this.pageFlow){if(s>=0&&this.leftTopAxis&&(this.hasPX("left")||!this.hasPX("right"))&&this.translateX(c))c=0}else if("right"===this.float){const e=this.anchorChain("left");c=Math.min(-c,-this.bounds.width),e.forEach(e=>e.translateX(-c)),c=0}else if(this.blockDimension&&this.translateX(c))this.anchorChain("right").forEach(e=>e.translateX(c)),c=0;if(s<0)if(!this.pageFlow){if(c>=0&&this.leftTopAxis&&this.hasPX("right")&&!this.hasPX("left")&&this.translateX(-s))s=0}else if(this.rightAligned){if(this.translateX(-s))s=0}else if(this.blockDimension&&this.renderParent.layoutConstraint)this.anchorChain("right").forEach(e=>e.translateX(s)),s=0}else if(this.visibleStyle.borderWidth&&!this.is(i.LINE))r+=this.borderTopWidth,l+=this.borderBottomWidth,s+=this.borderRightWidth,c+=this.borderLeftWidth;if(0!==r||0!==c||0!==l||0!==s){let e=0,t=0,i=0;if((!n||!this.renderParent.layoutGrid)&&this.api>=26)if(r===s&&s===l&&l===c)e=r;else{if(c===s)t=c;if(r===l)i=r}if(0!==e)this.android(n?d.MARGIN:d.PADDING,pe(e));else{if(0!==t)this.android(n?d.MARGIN_HORIZONTAL:d.PADDING_HORIZONTAL,pe(t));else{if(0!==c)this.android(this.localizeString(n?d.MARGIN_LEFT:d.PADDING_LEFT),pe(c));if(0!==s)this.android(this.localizeString(n?d.MARGIN_RIGHT:d.PADDING_RIGHT),pe(s))}if(0!==i)this.android(n?d.MARGIN_VERTICAL:d.PADDING_VERTICAL,pe(i));else{if(0!==r)this.android(n?d.MARGIN_TOP:d.PADDING_TOP,pe(r));if(0!==l)this.android(n?d.MARGIN_BOTTOM:d.PADDING_BOTTOM,pe(l))}}}}var mt=e=>class t extends e{constructor(e=0,t,i){super(e,t,i),this.api=29,this.renderChildren=[],this.constraint={horizontal:false,vertical:false,current:{}},this._namespaces=["android","app"],this._cached={},this._containerType=0,this._controlName="",this._boxAdjustment=Te(),this._boxReset=Te(),this._positioned=false,this.__android={},this.__app={},this.init()}static setConstraintDimension(e,t=NaN){if(t=tt(e,t),it(e,1),!e.inputElement)Ze(e,true),Ze(e,false);return t}static setFlexDimension(e,t){const{grow:i,basis:a,shrink:n}=e.flexbox,o="width"===t;if(ge(a))ht(e,o,i,e.parseUnit(a,t),n),Qe(e,"0px",o,true);else if("0%"!==a&&me(a)){ht(e,o,i);const t=parseFloat(a)/100;if(o)Je(e,t,true,NaN);else Je(e,t,false,NaN)}else{let a=false;if(e.hasFlex(o?"row":"column"))if(a=ht(e,o,i,e.hasPX(t,false)?o?e.actualWidth:e.actualHeight:0,n),a)Qe(e,"0px",o,true);if(!a)if(o)tt(e,0);else it(e,0)}if(n>1)e.app(o?"layout_constrainedWidth":"layout_constrainedHeight","true");if(o)it(e);if(!e.inputElement&&!e.imageOrSvgElement)Ze(e,true),Ze(e,false)}static availablePercent(e,t,i){const a="width"===t;let n=1,o=0;return e.forEach(e=>{if((e=e.innerMostWrapped).pageFlow){if(++o,e.hasPX(t,true,true)){const o=e.cssInitial(t);if(me(o))return void(n-=parseFloat(o)/100);else if(ge(o)){if(a)n-=Math.max(e.actualWidth+e.marginLeft+e.marginRight,0)/i;else n-=Math.max(e.actualHeight+e.marginTop+e.marginBottom,0)/i;return}}n-=e.linear[t]/i}}),o>0?Math.max(0,n):1}static getControlName(e,t=29){const a=i[e];return t>=29&&r[a]||o[a]}setControlType(e,t){if(this.controlName=e,t)this._containerType=t;else if(0===this._containerType)this._containerType=i.UNKNOWN}setLayout(){if(this.plainText)return this.setLayoutWidth("wrap_content",false),void this.setLayoutHeight("wrap_content",false);switch(this.css("visibility")){case"visible":break;case"hidden":this.hide({hidden:true});break;case"collapse":this.hide({collapse:true});break}if(!this.pageFlow&&Fe.test(this.css("clip")))this.hide({hidden:true});const e=this.actualParent||this.documentParent,a=this.renderParent,n=!a.inlineWidth,o=!a.inlineHeight,r=this.support.maxDimension,s=a.layoutConstraint&&!a.flexibleWidth&&(!a.inlineWidth||this.renderChildren.length)&&!this.onlyChild&&(!this.textElement&&!this.inputElement&&!this.controlElement&&this.alignParent("left")&&this.alignParent("right")||this.alignSibling("leftRight")||this.alignSibling("rightLeft"))?"0px":"match_parent";let{layoutWidth:l,layoutHeight:c}=this;if(""===l){if(this.hasPX("width")&&(!this.inlineStatic||""===this.cssInitial("width"))){const i=this.css("width");let o=-1;if(me(i)){const c=()=>"100%"===i&&n&&(r||!this.hasPX("maxWidth"));if(this.inputElement)if(c())l=s;else o=this.actualWidth;else if(a.layoutConstraint)if(n)if(c())l=s;else t.setConstraintDimension(this,1),l=this.layoutWidth;else o=this.actualWidth;else if(a.layoutGrid)l="0px",this.android("layout_columnWeight",Ee(parseFloat(i)/100,this.localSettings.floatPrecision));else if(this.imageElement)if(c())l=s;else o=this.bounds.width;else if("100%"===i){if(!r&&this.hasPX("maxWidth")){const t=this.css("maxWidth"),i=this.parseWidth(t),a=this.absoluteParent||e;if("100%"===t)if(n&&Math.ceil(i)>=a.box.width)l=s;else o=Math.min(this.actualWidth,i);else if(i>0)if(this.blockDimension)o=Math.min(this.actualWidth,i);else l=Math.floor(i)<a.box.width?"wrap_content":s}if(""===l&&(this.documentRoot||n))l=s}else o=this.actualWidth}else if(ge(i))o=this.actualWidth;if(-1!==o)l=pe(o)}else if(this.length)switch(this.cssInitial("width")){case"max-content":case"fit-content":this.renderEach(e=>{if(!e.hasPX("width")&&!e.hasPX("maxWidth"))e.setLayoutWidth("wrap_content")}),l="wrap_content";break;case"min-content":{const e=[];let t=0;if(this.renderEach(i=>{if(!i.textElement||i.hasPX("width"))t=Math.max(i.actualWidth,t);else if(t=Math.max(i.width,t),i.support.maxDimension)e.push(i)}),t>0&&e.length){const i=pe(t);e.forEach(e=>{if(!e.hasPX("maxWidth"))e.css("maxWidth",i)})}l="wrap_content";break}}if(""===l)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage)l=pe(this.actualWidth);else if(this.imageElement&&this.hasHeight)l="wrap_content";else if(n&&(this.nodeGroup&&(a.layoutFrame&&(this.hasAlign(512)||this.hasAlign(2048))||this.hasAlign(32768))||this.layoutGrid&&this.some(e=>e.flexibleWidth)))l="match_parent";else if(!this.imageElement&&!this.inputElement&&!this.controlElement){const t=t=>{var i;if(e.pageFlow||!this.some(e=>e.textElement)){if(this.styleText){if((null===(i=this.textBounds)||void 0===i?void 0:i.numberOfLines)>1){if(t)l="match_parent";return}else if(this.cssTry("display","inline-block")){const t=Math.ceil(Ae(this.element).width);return l=t>=e.box.width?"wrap_content":"match_parent",void this.cssFinally("display")}}l=s}};if(a.layoutGrid){if(this.blockStatic&&"1"===a.android("columnCount"))l=s}else if(this.blockStatic){if(!e.layoutElement)if(this.nodeGroup||a.hasWidth||this.hasAlign(64)||this.originalRoot||this.documentRoot)l=s;else t(true);else if(n&&e.gridElement&&!a.layoutElement)l=s}else if(this.floating&&this.block&&!this.rightAligned&&this.alignParent("left")&&this.alignParent("right"))l="match_parent";else if(this.inlineStatic&&!this.blockDimension&&this.naturalElement&&this.some(e=>e.naturalElement&&e.blockStatic)&&!e.layoutElement&&(a.layoutVertical||!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft")))t(false)}this.setLayoutWidth(l||"wrap_content")}if(""===c){if(this.hasPX("height")&&(!this.inlineStatic||""===this.cssInitial("height"))){const t=this.css("height");let n=-1;if(me(t)){if(this.inputElement)n=this.bounds.height;else if(this.imageElement)if("100%"===t&&o)c="match_parent";else n=this.bounds.height;else if("100%"===t){if(!r){const t=this.css("maxHeight"),i=this.parseHeight(t),a=this.absoluteParent||e;if("100%"===t)if(o&&Math.ceil(i)>=a.box.height)c="match_parent";else n=Math.min(this.actualHeight,i);else if(i>0)if(this.blockDimension)n=Math.min(this.actualHeight,i);else c=Math.floor(i)<a.box.height?"wrap_content":"match_parent"}if(""===c)if(!this.pageFlow){if("fixed"===this.css("position"))c="match_parent";else if(a.layoutConstraint&&(this.hasPX("top")||this.hasPX("bottom")))c="0px"}else if(this.documentRoot||o&&this.onlyChild)c="match_parent"}if(""===c&&this.hasHeight)n=this.actualHeight}else if(ge(t))n=this.actualHeight;if(-1!==n){if(this.is(i.LINE)&&"HR"!==this.tagName&&this.hasPX("height",true,true))n+=this.borderTopWidth+this.borderBottomWidth;if(this.styleText&&this.multiline&&!e.layoutElement&&!this.hasPX("minHeight"))this.android("minHeight",pe(n)),c="wrap_content";else c=pe(n)}}if(""===c)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage){if(a.layoutConstraint&&!this.floating&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||e).box.height)c="0px",this.anchor("bottom","parent");else if(this.naturalChild&&!this.pseudoElement)c=pe(this.actualHeight)}else if(this.imageElement&&this.hasWidth)c="wrap_content";else if("table-cell"===this.display&&e.hasHeight)c="match_parent";this.setLayoutHeight(c||"wrap_content")}else if("0px"===c&&a.inlineHeight&&""===a.android("minHeight")&&!e.layoutElement&&e===this.absoluteParent)this.setLayoutHeight("wrap_content");if(this.hasPX("minWidth")&&(!this.hasFlex("row")||e.flexElement&&!this.flexibleWidth)){const e=this.css("minWidth");if("100%"===e&&this.inlineWidth)this.setLayoutWidth(s);else this.android("minWidth",pe(this.parseWidth(e)+(this.contentBox?this.contentBoxWidth:0)),false)}if(this.hasPX("minHeight")&&"table-cell"!==this.display&&(!this.hasFlex("column")||e.flexElement&&!this.flexibleHeight)){const e=this.css("minHeight");if("100%"===e&&o&&this.inlineHeight)this.setLayoutHeight("match_parent");else this.android("minHeight",pe(this.parseHeight(e)+(this.contentBox?this.contentBoxHeight:0)),false)}if(r){const e=this.css("maxWidth");let t=this.css("maxHeight"),i=-1;if(ge(e,true))if("100%"===e){if(this.svgElement)i=this.bounds.width;else if(this.imageElement){if(i=this.toElementInt("naturalWidth"),i>this.documentParent.actualWidth)this.setLayoutWidth("match_parent"),this.setLayoutHeight("wrap_content"),i=-1,t=""}else if(n)this.setLayoutWidth("match_parent")}else i=this.parseWidth(e);else if(!this.pageFlow&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&(this.ascend({condition:e=>e.hasPX("width")}).length||!this.textContent.includes("\n")))i=this.actualWidth;if(i>=0)this.android("maxWidth",pe(i),false);if(ge(t,true)){let e=-1;if("100%"===t&&!this.svgElement)if(o)this.setLayoutHeight("match_parent");else e=this.imageElement?this.toElementInt("naturalHeight"):this.parseHeight(t);else e=this.parseHeight(t);if(e>=0)this.android("maxHeight",pe(e))}}}setAlignment(){const e=this.outerMostWrapper,t=this.renderParent,i=e.renderParent||t,a=this.autoMargin;let n=ze(this.cssInitial("textAlign",true),false),o=ze(this.cssAscend("textAlign"),true);if(this.nodeGroup&&""===n&&!this.hasAlign(512)){const e=this.actualParent;if(e)n=ze(e.cssInitial("textAlign",true),false)}if(this.pageFlow){let r="";if(this.inlineVertical&&(i.layoutFrame||i.layoutGrid)||"table-cell"===this.display){const t="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",true)){case"top":e.mergeGravity(t,"top");break;case"middle":e.mergeGravity(t,"center_vertical");break;case"bottom":e.mergeGravity(t,"bottom");break}}if(!this.blockWidth){if(i.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))if(this.floating)e.mergeGravity("layout_gravity",this.float);else if(!Ue(e,a)&&""!==n&&this.hasWidth&&!this.blockStatic&&!this.inputElement&&"table"!==this.display)e.mergeGravity("layout_gravity",n,false);if(this.rightAligned)r="right";else if(this.nodeGroup)if(this.renderChildren.every(e=>e.rightAligned))r="right";else if(this.hasAlign(512)&&!this.renderChildren.some(e=>e.rightAligned))r="left"}else if(this.rightAligned&&e.nodeGroup&&e.layoutVertical)e.renderEach(e=>{if(e.rightAligned)e.mergeGravity("layout_gravity","right")});if(t.layoutFrame){if(!Ue(this,a)){if(!this.innerWrapped){if(this.floating)r=this.float;if(""!==r&&!t.naturalElement&&(t.inlineWidth||!t.documentRoot&&this.onlyChild))t.mergeGravity("layout_gravity",r),r=""}if(this.centerAligned)this.mergeGravity("layout_gravity",ze("center",false));else if(this.rightAligned&&t.blockWidth)this.mergeGravity("layout_gravity","right")}if(this.onlyChild&&"table-cell"===t.display){let e;switch(t.css("verticalAlign")){case"top":e="top";break;case"bottom":e="bottom";break;default:e="center_vertical";break}this.mergeGravity("layout_gravity",e)}}if(""!==r)if(this.blockWidth){if(""===n||"right"===r)n=r}else(e.blockWidth&&this!==e?this:e).mergeGravity("layout_gravity",r);else if(Ue(e.inlineWidth?e:this,a)&&""!==n)o=""}if(""!==o&&this.blockStatic&&!this.centerAligned&&!this.rightAligned)e.mergeGravity("layout_gravity","left",false);if(!(this.layoutConstraint||this.layoutFrame||this.layoutElement||this.layoutGrid))if(""!==n){if(!this.imageOrSvgElement)this.mergeGravity("gravity",n)}else if(""!==o&&!this.inputElement)if(this.imageOrSvgElement){if(this.pageFlow)this.mergeGravity("layout_gravity",o)}else if(!this.nodeGroup||!this.hasAlign(512))this.mergeGravity("gravity",o);if(a.vertical&&(t.layoutFrame||t.layoutVertical&&t.layoutLinear))e.mergeGravity("layout_gravity",a.topBottom?"center_vertical":a.top?"bottom":"top")}setBoxSpacing(){gt.call(this,fe,this._boxReset,this._boxAdjustment,true),gt.call(this,de,this._boxReset,this._boxAdjustment,false)}apply(e){for(const t in e){const i=e[t];if(Ie(i))for(const e in i)this.attr(t,e,i[e]);else if(i)this.attr("_",t,i.toString())}}clone(e,i=true,a=false){const n=new t(e||this.id,this.sessionId,this.element||void 0);if(n.unsafe("localization",this.localSettings.supportRTL),n.localSettings=Object.assign({},this.localSettings),void 0!==e)n.setControlType(this.controlName,this.containerType);else n.controlId=this.controlId,n.controlName=this.controlName,n.containerType=this.containerType;if(this.cloneBase(n),i)Object.assign(n.unsafe("boxReset"),this._boxReset),Object.assign(n.unsafe("boxAdjustment"),this._boxAdjustment),this._namespaces.forEach(e=>{const t=this["__"+e];for(const i in t)n.attr(e,i,"id"===i&&"android"===e?n.documentId:t[i])});if(a){n.anchorClear();const e=this.documentId;if(n.anchor("left",e))n.setBox(16,{reset:1,adjustment:0});if(n.anchor("top",e))n.setBox(2,{reset:1,adjustment:0})}return n.saveAsInitial(true),n}extractAttributes(e){if("rtl"===this.dir&&!this.imageOrSvgElement)if(this.textElement)this.android("textDirection","rtl");else if(this.renderChildren.length)this.android("layoutDirection","rtl");if(this.styleElement||this.hasAlign(16384)){const e=te(this.dataset,"android");if(e)for(const t in e){const i="attr"===t?"android":Ge.test(t)?we(t.substring(4),false):"";if(""!==i)e[t].split(";").forEach(e=>{const[t,a]=e.split("::");if(a)this.attr(i,t,a)})}if(!this.svgElement){const e=this.css("opacity");if("1"!==e&&Re(e))this.android("alpha",e)}}const t="\n"+"\t".repeat(e);let i="";return this.combine().forEach(e=>i+=t+e),i}alignParent(e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint){const i=De[e];if(i)return"parent"===t.app(this.localizeString(i))}else if(i.layoutRelative){const i=Be[e];if(i)return"true"===t.android(this.localizeString(i))}else if(i.layoutLinear){const a=i.renderChildren;if(i.layoutVertical)switch(e){case"top":return t===a[0];case"bottom":return t===a[a.length-1]}else switch(e){case"left":case"start":return t===a[0];case"right":case"end":return t===a[a.length-1]}}return false}alignSibling(e,t){const i=this.anchorTarget,a=i.renderParent;if(a)if(t){if(a.layoutConstraint){const a=De[e];if(a)i.app(this.localizeString(a),t)}else if(a.layoutRelative){const a=We[e];if(a)i.android(this.localizeString(a),t)}}else if(a.layoutConstraint){const t=De[e];if(t){const e=i.app(this.localizeString(t));return"parent"!==e&&e!==a.documentId?e:""}}else if(a.layoutRelative){const t=We[e];if(t)return i.android(this.localizeString(t))}return""}actualRect(e,t="linear"){let i=this[t][e];if(this.positionRelative&&this.floating)switch(e){case"top":if(this.hasPX("top"))i+=this.top;else i-=this.bottom;break;case"bottom":if(!this.hasPX("top"))i-=this.bottom;else i+=this.top;break;case"left":if(this.hasPX("left"))i+=this.left;else i-=this.right;break;case"right":if(!this.hasPX("left"))i-=this.right;else i+=this.left;break}if(this.inputElement){const a=this.companion;if((null==a?void 0:a.labelFor)===this&&!a.visible){const n=a[t][e];switch(e){case"top":case"left":return Math.min(n,i);case"right":case"bottom":return Math.max(n,i)}}}return i}translateX(e,t){const i=this.anchorTarget,a=i.renderParent;if(null==a?void 0:a.layoutConstraint){let n,o,r;if(t)({oppose:n,accumulate:o,contain:r}=t);let s=ve(i.android("translationX"));if(false===n&&(s>0&&e<0||s<0&&e>0))return false;else if(false!==o)s+=e;if(r){const{left:e,right:t}=a.box,{left:i,right:n}=this.linear;if(i+s<e)s=Math.max(i-e,0);else if(n+s>t)s=Math.max(t-n,0)}if(0!==s)i.android("translationX",pe(s));else i.delete("android","translationX");return true}return false}translateY(e,t){const i=this.anchorTarget,a=i.renderParent;if(null==a?void 0:a.layoutConstraint){let n,o,r;if(t)({oppose:n,accumulate:o,contain:r}=t);let s=ve(i.android("translationY"));if(false===n&&(s>0&&e<0||s<0&&e>0))return false;else if(false!==o)s+=e;if(r){const{top:e,bottom:t}=a.box,{top:i,bottom:n}=this.linear;if(i+s<e)s=Math.max(i-e,0);else if(n+s>t)s=Math.max(t-n,0)}if(0!==s)i.android("translationY",pe(s));else i.delete("android","translationY");return true}return false}localizeString(e){return oe(e,this.localSettings.supportRTL,this.api)}removeTry(e){if(e&&!e.beforeReplace){const t=e.replaceWith||e.alignSiblings;if(t)e.beforeReplace=()=>this.anchorClear(t)}return super.removeTry(e)}hasFlex(e){const t=this.actualParent;if(true===(null==t?void 0:t.flexdata[e])){if("column"===e&&!t.hasHeight){const e=t.actualParent;if(e){if(e.flexElement&&!e.flexdata.column){if(!e.hasHeight){let i=0,a=0;for(const n of e){const e=(n.data(ke.FLEXBOX,"boundsData")||n.bounds).height;if(e>i)i=e;if(n===t)if(a=e,a<i)break}if(a>=i)return false}}else if(!e.gridElement)return false}else return false}const{grow:i,shrink:a}=this.flexbox;return i>0||1!==a}return false}hide(e){if(e)if(e.hidden)return void this.android("visibility","invisible");else if(e.collapse)return void this.android("visibility","gone");super.hide(e)}android(e,t,i=true){if(t)if(""!==(t=this.attr("android",e,t,i)))return t;return this.__android[e]||""}app(e,t,i=true){if(t)if(""!==(t=this.attr("app",e,t,i)))return t;return this.__app[e]||""}formatted(e,t=true){const i=He.exec(e);if(i)this.attr(i[1]||"_",i[2],i[3],t)}anchor(e,t="",i){const a=this.anchorTarget,n=a.renderParent;if(n&&a.documentId!==t)if(n.layoutConstraint){if(""===t||void 0===a.constraint.current[e]||i){const n="parent"===t;if(void 0===i&&""!==t)i=n;const o=De[e];if(o){let r=false;switch(a.app(this.localizeString(o),t,i),e){case"left":case"right":if(n)a.constraint.horizontal=true;case"leftRight":case"rightLeft":r=true;break;case"top":case"bottom":case"baseline":if(n)a.constraint.vertical=true;break}return a.constraint.current[e]={documentId:t,horizontal:r},true}}}else if(n.layoutRelative){const n="true"===t;if(void 0===i&&""!==t)i=n;const o=(n?Be:We)[e];if(o)return a.android(this.localizeString(o),t,i),true}return false}anchorParent(e,t,i="",a){const n=this.anchorTarget,o=n.renderParent;if(o){const r="horizontal"===e;if(o.layoutConstraint){if(a||!n.constraint[e]){if(r)n.anchor("left","parent",a),n.anchor("right","parent",a),n.constraint.horizontal=true;else n.anchor("top","parent",a),n.anchor("bottom","parent",a),n.constraint.vertical=true;if(void 0!==t)n.anchorStyle(e,t,i,a);return true}}else if(o.layoutRelative)return n.anchor(r?"centerHorizontal":"centerVertical","true",a),true}return false}anchorStyle(e,t,i,a=true){const n=this.anchorTarget;if("horizontal"===e){if(n.app("layout_constraintHorizontal_bias",t.toString(),a),i)n.app("layout_constraintHorizontal_chainStyle",i,a)}else if(n.app("layout_constraintVertical_bias",t.toString(),a),i)n.app("layout_constraintVertical_chainStyle",i,a)}anchorChain(e){const t=[],i=this.anchorTarget,a=i.renderParent;if(a&&(a.layoutConstraint||a.layoutRelative)){let n,o;switch(e){case"top":n="topBottom",o="bottomTop";break;case"right":n="rightLeft",o="leftRight";break;case"bottom":n="bottomTop",o="topBottom";break;case"left":n="leftRight",o="rightLeft";break}const r=a.renderChildren;let s=i;do{const e=s.alignSibling(n);if(""!==e){const i=r.find(t=>t.documentId===e);if((null==i?void 0:i.alignSibling(o))===s.documentId)t.push(i),s=i;else break}else break}while(true)}return t}anchorDelete(...e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint)t.delete("app",...Le(e,e=>this.localizeString(De[e])));else if(i.layoutRelative){const i=[];e.forEach(e=>{let t=We[e];if(t)i.push(this.localizeString(t));if(t=Be[e],t)i.push(this.localizeString(t))}),t.delete("android",...i)}}anchorClear(e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint){if(true===e)ot(t,"parent");else if(e)lt(t,e);t.anchorDelete(...Object.keys(De)),t.delete("app","layout_constraintHorizontal_bias","layout_constraintHorizontal_chainStyle","layout_constraintVertical_bias","layout_constraintVertical_chainStyle")}else if(i.layoutRelative){if(true===e)ot(t,"true");else if(e)lt(t,e);t.anchorDelete(...Object.keys(Be)),t.anchorDelete(...Object.keys(We))}}supported(e,t={}){var i;if("function"==typeof Xe[e]){const i=Xe[e](t,this.api,this);if(!i||Object.keys(t).length)return i}let a=this.api;while(a<=29){const n=null===(i=H[a++])||void 0===i?void 0:i.android[e];switch(typeof n){case"boolean":return n;case"function":return n(t,this.api,this)}}return true}combine(...e){const t=0===e.length,i=[];let a=false,n="";if(this._namespaces.forEach(o=>{if(t||e.includes(o)){const e=this["__"+o];if(e){let t=o+":";switch(o){case"android":if(this.api<29)for(let a in e)if("id"===a)n=e[a];else{const n={};let o=e[a];if(!this.supported(a,n))continue;if(Object.keys(n).length){if(Ce(n.attr))a=n.attr;if(Ce(n.value))o=n.value}i.push(t+`${a}="${o}"`)}else for(const a in e)if("id"===a)n=e[a];else i.push(t+`${a}="${e[a]}"`);a=true;break;case"_":t="";default:for(const a in e)i.push(t+`${a}="${e[a]}"`);break}}}}),i.sort((e,t)=>e>t?1:-1),a)i.unshift(`android:id="${n||"@+id/"+this.controlId}"`);return i}mergeGravity(e,t,a=true){if("layout_gravity"===e){const e=this.renderParent;if(e)if(Q(t)&&(this.blockWidth||e.inlineWidth&&this.onlyChild||!a&&this.outerWrapper&&this.hasPX("maxWidth")))return;else if(e.layoutRelative){if("center_horizontal"===t&&!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))return this.anchorDelete("left","right"),void this.anchor("centerHorizontal","true")}else if(e.layoutConstraint){if(!e.layoutHorizontal&&!this.positioned)switch(t){case"top":this.anchorStyle("vertical",0);break;case"right":case"end":if(!this.alignSibling("rightLeft"))if(this.anchor("right","parent",false),this.alignParent("left")||this.alignSibling("left"))this.anchorStyle("horizontal",1);break;case"bottom":this.anchorStyle("vertical",1);break;case"left":case"start":if(!this.alignSibling("leftRight"))if(this.anchor("left","parent",false),this.alignParent("right")||this.alignSibling("right"))this.anchorStyle("horizontal",0);break;case"center_horizontal":if(!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))this.anchorParent("horizontal",.5);break}return}}else switch(this.tagName){case"#text":case"IMG":case"SVG":case"HR":return;case"INPUT":switch(this.toElementString("type")){case"radio":case"checkbox":case"image":case"range":return}break;default:if(this.controlElement||this.is(i.TEXT)&&this.textEmpty||this.length&&(this.layoutFrame||this.layoutConstraint||this.layoutGrid))return;break}const n=dt(this,e),o=this.localizeString(t);if(!n.has(o)){n.add(o);let t="",i="",r="",s="";for(const e of n.values())if(Q(e)){if(""===i||a)i=e}else if(ee(e)){if(""===r||a)r=e}else s+=(""!==s?"|":"")+e;if(t=""!==i&&""!==r?i+"|"+r:i||r,""!==s)t+=(""!==t?"|":"")+s;if(""!==t)this.android(e,t)}}applyOptimizations(){const e=this.renderParent;if(e)if(this.alignLayout(e),function(e,t){var i;const a=e.lineHeight;if(a>0){const n=e.has("lineHeight",{map:"initial"});if(e.multiline)qe(e,a,n);else if(e.renderChildren.length)if(!n&&e.layoutHorizontal&&e.alignSibling("baseline"));else if(e.layoutVertical||e.layoutFrame)e.renderChildren.forEach(e=>{if(0===e.length&&!e.multiline&&!isNaN(e.lineHeight)&&!e.has("lineHeight"))Ye(e,a,true,true,true)});else{const t=e.horizontalRows||[e.renderChildren];let n=false;const o=t.length;for(let e=0;e<o;++e){const r=t[e],s=t[e+1],l=!!s&&(1===s.length&&s[0].multiline||s[0].lineBreakLeading||e<o-1&&!!(null===(i=s.find(e=>e.baselineActive))||void 0===i?void 0:i.has("lineHeight"))),c=r[0],h=1===r.length,f=h&&!c.multiline,d=!h&&r.find(e=>e.baselineActive&&0===e.renderChildren.length),u=f||!n&&(e>0||1===o)||c.lineBreakLeading,p=f||!l&&(e<o-1||1===o);if(d)if(!isNaN(d.lineHeight)&&!d.has("lineHeight"))Ye(d,a,false,u,p);else{n=true;continue}else r.forEach(e=>{if(0===e.length&&!e.multiline&&!isNaN(e.lineHeight)&&!e.has("lineHeight"))Ye(e,a,h,u,p)});n=h&&c.multiline}}else if(n||0===t.lineHeight)Ye(e,a,n,true,true)}}(this,e),ct(this,"layout_gravity"),ct(this,"gravity"),this.imageElement){const{layoutWidth:e,layoutHeight:t}=this;if("wrap_content"===e&&"wrap_content"!==t||"wrap_content"!==e&&"wrap_content"===t||"match_parent"===e||"match_parent"===t||"0px"===e||"0px"===t||""!==this.android("minWidth")||""!==this.android("minHeight")||""!==this.android("maxWidth")||""!==this.android("maxHeight"))this.android("adjustViewBounds","true")}}applyCustomizations(e=true){const{tagName:t,controlName:i}=this;let a=H[0].assign;ft(this,a[t],e),ft(this,a[i],e);const n=H[this.api];if(n)a=n.assign,ft(this,a[t],e),ft(this,a[i],e)}setSingleLine(e=false){if(this.textElement&&this.naturalChild){const t=this.actualParent;if(!(t.preserveWhiteSpace||"CODE"===t.tagName||this.multiline&&"nowrap"!==t.css("whiteSpace")))this.android("maxLines","1");if(e&&this.textContent.trim().length>1)this.android("ellipsize","end")}}setLayoutWidth(e,t=true){this.android("layout_width",e,t)}setLayoutHeight(e,t=true){this.android("layout_height",e,t)}alignLayout(e){if(this.layoutLinear){const t=this.renderChildren;if(this.layoutVertical){if(!e.layoutFrame&&!this.documentRoot&&t.length&&(this.baselineElement||t.every(e=>e.textElement)))this.android("baselineAlignedChildIndex","0")}else{let e=!this.baselineActive;if(t.some(e=>e.floating)&&!t.some(e=>e.imageElement&&e.baseline))this.android("baselineAligned","false"),e=false;const i=t.length;for(let a=0;a<i;++a){const n=t[a];if(n.setSingleLine(a===i-1),e&&n.baselineElement)this.android("baselineAlignedChildIndex",a.toString()),e=false}}}}get controlElement(){switch(this.tagName){case"PROGRESS":case"METER":return true;case"INPUT":return"range"===this.toElementString("type")}return false}set containerType(e){this._containerType=e}get containerType(){if(0===this._containerType){const e=c[this.containerName];if(e>0)this._containerType=e}return this._containerType}set controlId(e){this._controlId=e}get controlId(){var e;let t=this._controlId;if(void 0===t){const i=this.controlName;if(i){let a;if(this.styleElement){const t=(null===(e=this.elementId)||void 0===e?void 0:e.trim())||be(this.element,"name");if(""!==t)if(a=t.replace(Ve,"_").toLowerCase(),"parent"===a||p.includes(a))a="_"+a}t=_e(Me.generateId("android",a||Ne(i,".").toLowerCase(),a?0:1)),this._controlId=t}else if(0===this.id)return"baseroot";else return""}return t}get documentId(){const e=this.controlId;return""!==e?"@id/"+e:""}get support(){let e=this._cached.support;if(void 0===e)if(e={positionTranslation:this.layoutConstraint,positionRelative:this.layoutRelative,maxDimension:this.textElement||this.imageOrSvgElement},0!==this.containerType)this._cached.support=e;return e}set renderExclude(e){this._cached.renderExclude=e}get renderExclude(){let e=this._cached.renderExclude;if(void 0===e){if(this.naturalChild&&!this.originalRoot){const t=this.renderParent;if(t)if(!this.onlyChild&&0===this.length&&this.styleElement&&!this.imageElement&&!this.pseudoElement)if(this.pageFlow)if(t.layoutVertical)e=pt(this)&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop");else e=ut(this)&&(t.layoutHorizontal||pt(this))&&""===this.alignSibling("leftRight")&&""===this.alignSibling("rightLeft")&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop");else e=ut(this)||pt(this);else e=false;else return false}else e=false;this._cached.renderExclude=e}return e}get baselineHeight(){var e;let t=this._cached.baselineHeight;if(void 0===t){if(t=0,this.plainText){const{height:e,numberOfLines:i}=this.bounds;t=e/(i||1)}else{if(this.multiline&&this.cssTry("white-space","nowrap"))t=this.boundingClientRect.height,this.cssFinally("white-space");else if(this.hasHeight)t=this.actualHeight;else if("PICTURE"===this.tagName)t=Math.max((null===(e=this.naturalElements.find(e=>"IMG"===e.tagName))||void 0===e?void 0:e.height)||0,this.bounds.height);else t=this.bounds.height;if(this.naturalElement&&!this.pseudoElement&&this.lineHeight>t)t=this.lineHeight;else if(this.inputElement)switch(this.controlName){case o.RADIO:case o.CHECKBOX:t+=8;break;case o.SELECT:t/=this.toElementInt("size")||1,t+=4;break;default:t+=Math.max(-1*xe(this.verticalAlign),0);break}}this._cached.baselineHeight=t}return t}get innerWrapped(){return this._innerWrapped}set innerWrapped(e){if(e)e=e.outerMostWrapper,this._innerWrapped=e,e.outerWrapper=this}get anchorTarget(){let e=this;do{const t=e.renderParent;if(t){if(t.layoutConstraint||t.layoutRelative)return e}else break;e=e.outerWrapper}while(e);return this}set anchored(e){const t=this.constraint;t.horizontal=e,t.vertical=e}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this._containerType===i.FRAME}get layoutLinear(){return this._containerType===i.LINEAR}get layoutGrid(){return this._containerType===i.GRID}get layoutRelative(){return this._containerType===i.RELATIVE}get layoutConstraint(){return this._containerType===i.CONSTRAINT}get layoutWidth(){return this.__android.layout_width||""}get layoutHeight(){return this.__android.layout_height||""}get inlineWidth(){return"wrap_content"===this.layoutWidth}get inlineHeight(){return"wrap_content"===this.layoutHeight}get blockWidth(){return"match_parent"===this.layoutWidth}get blockHeight(){return"match_parent"===this.layoutHeight}get flexibleWidth(){return je(this,this.layoutWidth)}get flexibleHeight(){return je(this,this.layoutHeight)}get labelFor(){return this._labelFor}set labelFor(e){if(e)e.companion=this;this._labelFor=e}set localSettings(e){if(this._localSettings)Object.assign(this._localSettings,e);else this._localSettings=Object.assign({},e)}get localSettings(){return this._localSettings}set positioned(e){this._positioned=e}get positioned(){return this._positioned||null!==this.target}get target(){const e=this.dataset.androidTarget;return e&&document.getElementById(e)||null}};class yt extends(mt(squared.base.NodeUI)){}class bt extends(mt(squared.base.NodeGroupUI)){constructor(e,t,i){super(e,t.sessionId),this.depth=t.depth,this.containerName=t.containerName+"_GROUP",this.actualParent=t.actualParent,this.documentParent=t.documentParent,this.retain(i)}set containerType(e){this._containerType=e}get containerType(){return this._containerType}set renderExclude(e){}get renderExclude(){return false}}const{lib:Tt,base:St}=squared,{PLATFORM:Et,isPlatform:At}=Tt.client,{parseColor:wt}=Tt.color,{formatPX:xt,getSrcSet:vt,hasComputedStyle:_t,isLength:Nt,isPercent:Rt}=Tt.css,{getElementsBetweenSiblings:It,getRangeClientRect:Ct}=Tt.dom,{truncate:Lt}=Tt.math,{CHAR:kt}=Tt.regex,{getElementAsNode:Pt,getPseudoElt:Ot}=Tt.session,{assignEmptyValue:Mt,convertFloat:Dt,hasBit:Wt,hasMimeType:Bt,isString:Xt,iterateArray:Gt,objectMap:Ht,parseMimeType:Vt,partitionArray:Ft,safeNestedArray:zt,withinRange:Ut}=Tt.util,{STRING_XMLENCODING:qt,replaceTab:Yt}=Tt.xml,{APP_SECTION:jt,BOX_STANDARD:Kt,NODE_ALIGNMENT:$t,NODE_PROCEDURE:Zt,NODE_RESOURCE:Jt,NODE_TEMPLATE:Qt}=St.lib.enumeration,ei=St.NodeUI,ti=/((?:rgb|hsl)a?\([^)]+\)|[a-z]{4,})?\s*(-?[\d.]+[a-z]+)\s+(-?[\d.]+[a-z]+)\s*([\d.]+[a-z]+)?/;function ii(e){e.sort((e,t)=>{const i=e.float,a=t.float;if("none"!==i&&"none"!==a){if(i!==a)return"left"===i?-1:1;else if("right"===i&&"right"===a)return 1}else if("none"!==i)return"left"===i?-1:1;else if("none"!==a)return"left"===a?1:-1;return 0})}function ai(e,t){const i=e.actualParent;if(e===t.actualParent)return-1;else if(i===t)return 1;const{pageFlow:a,zIndex:n}=e,{pageFlow:o,zIndex:r}=t;if(!a&&o)return n>=0?1:-1;else if(!o&&a)return r>=0?-1:1;else if(n===r)return e.childIndex<t.childIndex?-1:1;return n<r?-1:1}function ni(e,t,a,n){const o=e.baselineHeight;let r,s=0;const l=t.length;let c=0;while(c<l){const l=t[c++];if(l.baselineAltered)continue;let h=l.baselineHeight;if(h>0||l.textElement){if(l.blockVertical&&e.blockVertical){l.anchor("bottom",e.documentId);continue}else{const e=l.renderChildren.filter(e=>xi(e));if(l.imageOrSvgElement||e.length)if(e.forEach(e=>h=Math.max(e.baselineHeight,h)),h>o){if(!r||h>=s)null==r||r.anchor(vi(l),l.documentId),s=h,r=l;else l.anchor(vi(r),r.documentId);continue}else if(Ut(l.linear.top,n)){l.anchor("top","true");continue}}if(a&&l.is(i.BUTTON))l.anchor("centerVertical","true");else if(l.naturalChild&&l.isEmpty)l.anchor("baseline",e.documentId);else if(l.baselineElement)l.anchor(l.naturalElements.find(e=>xi(e))?"bottom":"baseline",e.documentId)}else if(xi(l))r=l}if(r)e.anchor(vi(r),r.documentId)}function oi(e,t){if("left"===t.float){if(t.marginRight<0){const i=Math.abs(t.marginRight);return e.modifyBox(16,t.actualWidth+(t.hasWidth?t.paddingLeft+t.borderLeftWidth:0)-i),e.anchor("left",t.documentId),t.setBox(4,{reset:1}),true}}else if("right"===e.float&&t.marginLeft<0){const i=Math.abs(t.marginLeft),a=t.actualWidth;if(i<a)e.modifyBox(4,a-i);return e.anchor("right",t.documentId),t.setBox(16,{reset:1}),true}return false}function ri(e){return e.filter(e=>(e.baseline||Nt(e.verticalAlign,true))&&("TEXTAREA"===e.tagName||"SELECT"===e.tagName&&e.toElementInt("size")>1)||"text-bottom"===e.verticalAlign&&"INPUT_IMAGE"!==e.containerName).sort((e,t)=>{if(e.baselineHeight===t.baselineHeight)return"SELECT"===e.tagName?1:0;else return e.baselineHeight>t.baselineHeight?-1:1})}function si(e){if("BR"===e.tagName)return true;else if(_t(e)){const t=getComputedStyle(e),i=t.getPropertyValue("position");if(!("absolute"===i||"fixed"===i)){const e=t.getPropertyValue("display"),i="none"!==t.getPropertyValue("float");switch(e){case"block":case"flex":case"grid":return!i||_i(t)}return(e.startsWith("inline-")||"table"===e)&&_i(t)}}return false}function li(e){const t=e.element;if(t.readOnly)e.android("focusable","false");if(t.disabled)e.android("enabled","false")}function ci(e,t,i){const[a,n,o,r,s,l,c,h]=i?["horizontal","width","left","right",16,4,256,64]:["vertical","height","top","bottom",2,8,32,128],f=e.autoMargin,d=e.hasPX(n);if(d&&f[a])if(e.hasPX(o)&&f[r])e.anchor(o,"parent"),e.modifyBox(s,e[o]);else if(e.hasPX(r)&&f[o])e.anchor(r,"parent"),e.modifyBox(l,e[r]);else e.anchorParent(a,.5),e.modifyBox(s,e[o]),e.modifyBox(l,e[r]);else{const u="100%"===e.css(n)||"100%"===e.css(i?"minWidth":"minHeight");let p=0;if(e.hasPX(o)){if(e.anchor(o,"parent"),!e.hasPX(r)&&u)e.anchor(r,"parent"),++p;e.modifyBox(s,ie(t,c,e[o])),++p}if(e.hasPX(r)){if(u||!d||!e.hasPX(o))e.anchor(r,"parent"),e.modifyBox(l,ie(t,h,e[r]));++p}if(0===p){if(i)if(e.centerAligned)e.anchorParent("horizontal",.5);else if(e.rightAligned)if(e.blockStatic)e.anchorParent("horizontal",1);else e.anchor("right","parent")}else if(!(2!==p||d||f[a]&&!f[o]&&!f[r]))if(i)e.setLayoutWidth("0px");else e.setLayoutHeight("0px")}}function hi(e,t,i,a){if(e.css("width",xt(t),true),a&&a.width>0&&a.height>0)i=a.height*(t/a.width),e.css("height",xt(i),true);return[t,i]}function fi(e,t){const{minLength:i,maxLength:a}=t;if(-1!==i)e.android("minLength",i.toString());if(a>0)e.android("maxLength",a.toString())}function di(e,t){const{min:i,max:a}=t;if(Xt(i))e.android("min",i);if(Xt(a))e.android("max",a)}function ui(e,t){if(e.naturalChild)return t.has(e);else if(e.nodeGroup)return e.some(e=>e.naturalChild&&t.has(e),{cascade:true});else return t.has(e.innerMostWrapped)}function pi(e,t){const i=e.parent;if(i.flexElement&&("baseline"===i.css("alignItems")||e.some(e=>"baseline"===e.flexbox.alignSelf)))return false;const a=e.length>1;return e.some(t=>a&&(t.rightAligned||t.centerAligned)&&e.singleRowAligned||t.percentWidth>0&&t.percentWidth<1||t.hasPX("maxWidth"))&&(!t||e.every(e=>e.marginTop>=0))}function gi(e,t){if(e.leftTopAxis){const i=e.absoluteParent;if(i.documentBody)switch(t){case"top":if(0===i.getBox(2)[0])return i.marginTop;break;case"left":return i.marginLeft}}return 0}function mi(e){const{centerAligned:t,rightAligned:i}=e;e.css("display","inline-block",true),e.setCacheValue("centerAligned",t),e.setCacheValue("rightAligned",i)}function yi(e){e.addAlign(16),e.removeAlign(2)}function bi(e,t,i,a,n,o){e.anchor(n,a,true),e.setBox(t?16:2,{reset:1,adjustment:o}),e.constraint[i]=true}function Ti(e){return Ft(e,e=>"right"===e.float||true===e.autoMargin.left)}function Si(e,t,i,a,n,o){let r=0,s=n+e.marginLeft;if(a&&!o.items.includes(a))s+=a.linear.width;if(!a||!e.plainText||i||!o.items.includes(a)||o.clearMap.has(e))s+=t.width;if(e.marginRight<0)s+=e.marginRight;if(r=o.boxWidth,0!==o.textIndent)if(o.textIndent<0){if(o.rowLength<=1)r+=o.textIndent}else if(o.textIndent>0&&1===o.rowLength)r-=o.textIndent;if(e.styleElement&&e.inlineStatic)s-=e.contentBoxWidth;return r=Math.ceil(r),Math.floor(s)>r}function Ei(e,t,i,a,n,o,r,s){var l;if(t.textElement)if(1===o&&e.plainText&&e.previousSibling===t&&!kt.TRAILINGSPACE.test(t.textContent)&&!kt.LEADINGSPACE.test(e.textContent))return s.retainMultiline=true,false;else if(s.lineWrap&&t.multiline&&(t.bounds.width>=s.boxWidth||e.plainText&&B.hasLineBreak(t,false,true)))return true;if(wi(e,t,n,r,s))return false;else if(s.lineWrap)if(Si(e,a,n,i,r,s))return true;else if(!("CODE"===(null===(l=e.actualParent)||void 0===l?void 0:l.tagName)))return n&&e.plainText||Ci(e);return false}function Ai(e,t){return t.anchorParent("vertical",0),t.setBox(2,{reset:1,adjustment:Math.max(t.bounds.top-e.box.top,Math.min(-1*Dt(t.verticalAlign),0))}),t.baselineAltered=true,false}const wi=(e,t,i,a,n)=>t.floating&&t.alignParent(t.float)&&(i||Math.floor(a+e.actualWidth)<n.boxWidth),xi=e=>e.imageOrSvgElement&&e.baseline,vi=e=>e.imageOrSvgElement?"baseline":"bottom",_i=e=>("100%"===e.getPropertyValue("width")||"100%"===e.getPropertyValue("minWidth"))&&"none"===e.getPropertyValue("max-width"),Ni=(e,t)=>function(e,t){const i=e.depth,a=t.depth;if(i===a){const i=e.actualParent,a=t.actualParent;if(e===a)return-1;else if(i===t)return 1;else if(i&&a)if(i===a)return ai(e,t);else if(i.actualParent===a.actualParent)return ai(i,a);return e.id<t.id?-1:1}return i<a?-1:1}(e.node.innerMostWrapped,t.node.innerMostWrapped),Ri=(e,t)=>ai(e.node.innerMostWrapped,t.node.innerMostWrapped),Ii=(e,t,i=true)=>t.size&&e.some((e,a)=>(a>0||!i)&&t.has(e)),Ci=e=>e.plainText&&B.hasLineBreak(e,false,true)||e.preserveWhiteSpace&&kt.LEADINGNEWLINE.test(e.textContent),Li=e=>Math.max(e.actualHeight,e.lineHeight),ki=e=>pi(e,true)?i.CONSTRAINT:e.some(e=>e.positionRelative||!e.pageFlow&&e.autoPosition)?i.RELATIVE:i.LINEAR,Pi=e=>pi(e,true)?i.CONSTRAINT:e.some(e=>e.positionRelative)?i.RELATIVE:i.LINEAR,Oi=(e=false)=>e?{anchorStart:"right",anchorEnd:"left",chainStart:"rightLeft",chainEnd:"leftRight"}:{anchorStart:"left",anchorEnd:"right",chainStart:"leftRight",chainEnd:"rightLeft"},Mi=(e,t,i)=>e.containerType===t&&e.length===i&&(0===e.alignmentType||e.hasAlign(2));function Di(e,t){const i=e.renderParent;if(i.overflowY)return i.box.width;else{const a=e.actualParent;if(a)if(e.naturalElement&&e.inlineStatic&&a.blockStatic&&a===i){const{left:t,width:i}=a.box;return i-(e.linear.left-t)}else if(a.floatContainer){const{containerType:i,alignmentType:n}=this.containerTypeVerticalMargin;if(e.ascend({condition:e=>e.of(i,n),including:a,attr:"renderParent"}).length){const{left:i,right:n,width:o}=e.box;let r=0,s=0;return a.naturalChildren.forEach(a=>{const o=a.linear;if(a.floating&&!t.includes(a)&&e.intersectY(o))if("left"===a.float){if(Math.floor(o.right)>i)r=Math.max(r,o.right-i)}else if(n>Math.ceil(o.left))s=Math.max(s,n-o.left)}),o-r-s}}}}function Wi(e,t,i,a){var n,s;if(e.constraint[i])return;let l,c,h;if(a)({orientation:l,percent:c,opposing:h}=a);if(l&&i!==l)return;let f=e.documentParent;if(t.nodeGroup&&!f.hasAlign(4))f=t;const d="horizontal"===i,u=e.linear,p=f.box;let g,m;if(d)if(!h)g="left",m="right";else g="right",m="left";else if(!h)g="top",m="bottom";else g="bottom",m="top";if(!c&&!h){if(Ut(u[g],p[g]))return void e.anchor(g,"parent",true);if(e.autoPosition){const t=e.siblingsLeading,a=t.length;if(a&&!e.alignedVertically()){const n=t[a-1];if(n.pageFlow&&n.renderParent===e.renderParent)return e.anchor(d?"leftRight":"top",n.documentId,true),void(e.constraint[i]=true)}}if(!e.pageFlow&&"fixed"!==e.css("position")&&!t.hasAlign(4)){const a=e.innerMostWrapped.bounds,n=t.renderChildren,o=n.length;let r=0;while(r<o){const t=n[r++];if(t===e||t.plainText||t.pseudoElement||t.originalRoot)continue;const o=t.innerMostWrapped;if(o.pageFlow||t.constraint[i]){const{linear:n,bounds:r}=o;let s,l=NaN;if(Ut(a[g],r[g]))s=g;else if(Ut(u[g],n[g]))s=g,l=(d?a.left-r.left:a.top-r.top)+gi(e,g);else if(Ut(u[g],n[m]))if(d)if(!e.hasPX("left")&&!e.hasPX("right")||!t.inlineStatic&&t.hasPX("width",false,true))s="leftRight",l=a.left-r.right;else continue;else if(!e.hasPX("top")&&!e.hasPX("bottom")||!t.inlineStatic&&t.hasPX("height",false,true))s="topBottom",l=a.top-r.bottom;else continue;else continue;if(d){if(!isNaN(l))if(e.setBox(16,{reset:1,adjustment:0}),0!==l)e.translateX(l)}else if(!isNaN(l))if(e.setBox(2,{reset:1,adjustment:0}),0!==l)e.translateY(l);return e.anchor(s,t.documentId,true),void(e.constraint[i]=true)}}const s=d?"top":"left";let l,c;r=0;while(r<o){const t=n[r++];if(t===e||t.pageFlow||t.originalRoot||!t.constraint[i])continue;const o=t.innerMostWrapped,h=o.bounds;if(Ut(a[s],h[s])||Ut(u[s],o.linear[s])){const n=a[g]-h[m];if(n>=0)return void bi(e,d,i,t.documentId,d?"leftRight":"topBottom",n)}else if(h[g]<=a[g])if(h[s]<=a[s])l=o;else c=o}if(!l)l=c;if(l){const t=a[g]-l.bounds[g]+gi(e,g);if(t>=0)return void bi(e,d,i,l.documentId,g,t)}}}const y=e.absoluteParent,b=e.positionStatic?e.bounds:u;let T="layout_constraintGuide_",S=0;if(!e.leftTopAxis&&f.originalRoot){const t=e.renderParent;if(f.ascend({condition:e=>e===t,attr:"renderParent"}).length)if(d)S=!h?f.marginLeft:f.marginRight;else S=!h?f.marginTop:f.marginBottom}if(c){const t=Math.abs(b[g]-p[g])/(d?p.width:p.height);S+=parseFloat(Lt(!h?t:1-t,e.localSettings.floatPrecision)),T+="percent"}else S+=b[g]-p[!h?g:m],T+="begin";if(!e.pageFlow){if(f.outerWrapper&&e.parent===f.outerMostWrapper)S+=f[!h?d?"paddingLeft":"paddingTop":d?"paddingRight":"paddingBottom"];else if(y===e.documentParent){let e;if(d)e=!h?256:64;else e=!h?32:128;S=ie(f,e,S)}}else if(e.inlineVertical){const t=Dt(e.verticalAlign);if(t<0)S+=t}if(!d&&e.marginTop<0)S-=e.marginTop,e.setBox(2,{reset:1});if(e.constraint[i]=true,S<=0)e.anchor(g,"parent",true);else if(d&&S+b.width>=p.right&&f.hasPX("width")&&!e.hasPX("right")||!d&&S+b.height>=p.bottom&&f.hasPX("height")&&!e.hasPX("bottom"))e.anchor(m,"parent",true);else{const a=t.constraint.guideline||{},l=null===(s=null===(n=a[i])||void 0===n?void 0:n[T])||void 0===s?void 0:s[g];if(l)for(const t in l)if(parseInt(l[t])===S)return e.anchor(g,t,true),void e.anchorDelete(m);const f=ae(void 0,{android:{orientation:d?"vertical":"horizontal"},app:{[T]:c?S.toString():"@dimen/"+B.insertStoredAsset("dimens","constraint_guideline_"+(!h?g:m),xt(S))}});this.addAfterOutsideTemplate(e.id,this.renderNodeStatic({controlName:e.api<29?o.GUIDELINE:r.GUIDELINE},f),false);const u=f.documentId;if(u)if(e.anchor(g,u,true),e.anchorDelete(m),S>0)Mt(a,i,T,g,u,S.toString()),t.constraint.guideline=a}}function Bi(e){if(e.centerAligned)e.anchorParent("horizontal",.5);else{const t=e.autoMargin;if(t.horizontal)e.anchorParent("horizontal",t.left?1:t.leftRight?.5:0);else{const t=e.rightAligned;if(t)e.anchor("right","parent"),e.anchorStyle("horizontal",1);else e.anchor("left","parent"),e.anchorStyle("horizontal",0);if(e.blockStatic||e.percentWidth>0||e.block&&e.multiline&&e.floating)e.anchor(t?"left":"right","parent")}}}function Xi(e,t=true,i=false){const a=e.autoMargin;let n=t?0:NaN;if(e.floating)n=0;else if(a.vertical)n=a.top?1:a.topBottom?.5:0;else if(e.imageOrSvgElement||e.inlineVertical)switch(e.verticalAlign){case"baseline":n=t?0:1;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=0;break}else{const t=e.actualParent;if("table-cell"===(null==t?void 0:t.display))switch(t.verticalAlign){case"middle":n=.5;break;case"bottom":n=1;break;default:n=0;break}}if(!isNaN(n))if(i)e.app("layout_constraintVertical_bias",n.toString(),false),e.delete("layout_constraintVertical_chainStyle");else e.anchorStyle("vertical",n,t?"":"packed",false)}class Gi extends squared.base.ControllerUI{constructor(e,t){super(),this.application=e,this.cache=t,this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:qt},directory:{string:"res/values",font:"res/font",image:"res/drawable",video:"res/raw",audio:"res/raw"},svg:{enabled:false},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:At(4)?"rgb(255, 255, 255)":"rgb(221, 221, 221)",inputColorBorderColor:"rgb(119, 119, 199)",meterForegroundColor:"rgb(99, 206, 68)",meterBackgroundColor:"rgb(237, 237, 237)",progressForegroundColor:"rgb(138, 180, 248)",progressBackgroundColor:"rgb(237, 237, 237)"},mimeType:{font:["font/ttf","font/otf"],image:["image/jpeg","image/png","image/gif","image/bmp","image/webp","image/svg+xml","image/heic","image/heif","image/x-icon"],audio:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","audio/aac","audio/flac","audio/gsm","audio/midi","audio/mpeg","audio/wav","audio/ogg"],video:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","video/webm"]},unsupported:{cascade:new Set(["SELECT","svg"]),tagName:new Set(["HEAD","TITLE","META","SCRIPT","STYLE","LINK","OPTION","INPUT:hidden","COLGROUP","MAP","AREA","SOURCE","TEMPLATE","DATALIST","TRACK"]),excluded:new Set(["BR","WBR"])},precision:{standardFloat:3},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.35,superscriptTopOffset:.35,legendBottomOffset:.25}}}init(){const{resolutionDPI:e,resolutionScreenWidth:t,resolutionScreenHeight:i,supportRTL:a,targetAPI:n}=this.userSettings,o=160/e,r={width:t*o,height:i*o};this._targetAPI=n||29,this._screenDimension=r,this._defaultViewSettings={systemName:this.application.systemName,screenDimension:r,supportRTL:a,floatPrecision:this.localSettings.precision.standardFloat},super.init()}optimize(e){const t=e.length;let i=0;while(i<t){const t=e[i++];if(t.applyOptimizations(),t.hasProcedure(Zt.CUSTOMIZATION))t.applyCustomizations(this.userSettings.customizationsOverwritePrivilege);const a=t.target;if(a){const e=t.outerMostWrapper;if(t!==e&&a===e.target)continue;const i=this.application.resolveTarget(a);if(i){const e=t.removeTry({alignSiblings:true});if(e){const a=i.renderChildren,n=zt(i,"renderTemplates"),o=parseInt(t.dataset.androidTargetIndex);if(!isNaN(o)&&o>=0&&o<a.length)a.splice(o,0,t),n.splice(o,0,e);else a.push(t),n.push(e);t.renderParent=i}}}}}finalize(e){const t=this.userSettings.insertSpaces;e.forEach(e=>{const i=e.content;e.content=Yt(i.replace("{#0}",se(i)),t)})}processUnknownParent(e){const t=e.node;if(e.some(e=>!e.pageFlow&&!e.autoPosition))e.setContainerType(i.CONSTRAINT,34);else if(e.length<=1){const a=t.item(0);if(a){if(t.originalRoot&&a.target)return t.hide(),{layout:e,next:true};else if(t.naturalElement&&a.plainText)a.hide(),t.clear(),t.inlineText=true,t.textContent=a.textContent,e.setContainerType(i.TEXT),e.add(1024);else if(e.parent.flexElement&&a.baselineElement&&"baseline"===t.flexbox.alignSelf)e.setContainerType(i.LINEAR,8);else if(a.percentWidth>0&&a.percentWidth<1)e.setContainerType(i.CONSTRAINT,32768);else if(t.autoMargin.leftRight||t.autoMargin.left)e.setContainerType(i.CONSTRAINT);else if(a.baselineElement)e.setContainerType(Pi(e),16);else e.setContainerType(i.FRAME);e.add(4096)}else return this.processUnknownChild(e)}else if(B.hasLineBreak(t,true))e.setContainerType(Pi(e),18);else if(this.checkConstraintFloat(e))if(e.setContainerType(i.CONSTRAINT),e.every(e=>e.floating))e.add(512);else if(e.linearY)e.add(16);else if(e.some(e=>e.floating||e.rightAligned)&&e.singleRowAligned)e.add(8);else e.add(e.some(e=>e.blockStatic)?16:1024),e.add(2);else if(e.linearX||e.singleRowAligned){if(this.checkFrameHorizontal(e))e.addRender(512),e.addRender(8);else if(this.checkConstraintHorizontal(e))e.setContainerType(i.CONSTRAINT);else if(this.checkLinearHorizontal(e)){if(e.setContainerType(i.LINEAR),e.floated.size)ii(e.children)}else e.setContainerType(pi(e,false)?i.CONSTRAINT:i.RELATIVE);e.add(8)}else if(e.linearY)e.setContainerType(ki(e),16|(t.originalRoot||e.some((t,i)=>i>0&&t.inlineFlow&&e.item(i-1).inlineFlow)?2:0));else if(e.every(e=>e.inlineFlow))if(this.checkFrameHorizontal(e))e.addRender(512),e.addRender(8);else e.setContainerType(ki(e),18);else{const t=e.children,a=this.application.clearMap;if(e.some((e,i)=>e.alignedVertically(i>0?t.slice(0,i):void 0,a)>0))e.setContainerType(ki(e),18);else e.setContainerType(i.CONSTRAINT,2)}return{layout:e}}processUnknownChild(e){const t=e.node,a=t.visibleStyle.background;if(t.inlineText&&(!t.textEmpty||a))e.setContainerType(i.TEXT);else if(t.blockStatic&&0===t.naturalChildren.length&&(a||t.contentBoxHeight>0))e.setContainerType(i.FRAME);else if(0===t.bounds.height&&t.naturalChild&&0===t.naturalElements.length&&""===t.elementId&&0===t.marginTop&&0===t.marginRight&&0===t.marginBottom&&0===t.marginLeft&&!a&&!t.originalRoot&&!t.use)return t.hide(),{layout:e,next:true};else switch(t.tagName){case"OUTPUT":e.setContainerType(i.TEXT);break;default:if(""!==t.textContent&&(a||t.pseudoElement&&"::after"===Ot(t.element,t.sessionId)))e.setContainerType(i.TEXT),t.inlineText=true;else e.setContainerType(i.FRAME)}return{layout:e}}processTraverseHorizontal(e,t){const a=e.parent;if(1===e.floated.size&&e.every(e=>e.floating))if(Mi(a,i.CONSTRAINT,e.length))return a.addAlign(512),void a.removeAlign(2);else e.node=this.createNodeGroup(e.node,e.children,{parent:a}),e.setContainerType(i.CONSTRAINT,512);else if(this.checkFrameHorizontal(e))e.node=this.createNodeGroup(e.node,e.children,{parent:a}),e.addRender(512),e.addRender(8);else if(e.length!==t.length||a.hasAlign(16))e.node=this.createNodeGroup(e.node,e.children,{parent:a}),this.processLayoutHorizontal(e);else{if(!a.hasAlign(1024))a.addAlign(8);a.removeAlign(2)}return e}processTraverseVertical(e){const t=e.parent,a=this.application.clearMap,n=e.floated.size,o=e.length;if(e.some((e,t)=>e.lineBreakTrailing&&t<o-1)){if(!t.hasAlign(16)){const i=ki(e);if(Mi(t,i,o))return void yi(t);else{if(t.layoutConstraint)if(t.addAlign(16),!t.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(i,18)}}}else if(1===n&&e.every((e,t)=>0===t||t===o-1||a.has(e)))if(e.same(e=>e.float))if(Mi(t,i.CONSTRAINT,o))return void yi(t);else e.node=this.createLayoutGroup(e),e.setContainerType(i.CONSTRAINT,512);else if(Ii(e,a)||this.checkFrameHorizontal(e))e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(8);else{const i=Pi(e);if(Mi(t,i,o))return void yi(t);else{if(t.layoutConstraint)if(t.addAlign(16),!t.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(i,16)}}else if(n)if(Ii(e,a))e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(16);else if(e.item(0).floating)e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(8);if(!t.hasAlign(16)){const i=Pi(e);if(Mi(t,i,o))return void yi(t);else{if(t.layoutConstraint)if(t.addAlign(16),!t.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(i,16)}}return e}processLayoutHorizontal(e){if(this.checkConstraintFloat(e))e.setContainerType(i.CONSTRAINT,e.every(e=>e.floating)?512:1024);else if(this.checkConstraintHorizontal(e))e.setContainerType(i.CONSTRAINT,8);else if(this.checkLinearHorizontal(e)){if(e.setContainerType(i.LINEAR,8),e.floated.size)ii(e.children)}else e.setContainerType(i.RELATIVE,8);return e}sortRenderPosition(e,t){if(e.layoutRelative){if(t.some(e=>0!==e.node.zIndex))t.sort(Ri)}else if(e.layoutConstraint)if(t.some(e=>{return 0!==(t=e.node).zIndex||!t.pageFlow;var t})){let i=[];const a=e.innerMostWrapped,n=[],o=[];if(t.forEach(e=>{const t=e.node.innerMostWrapped;if(t.pageFlow||t.actualParent===t.documentParent||t===a)i.push(e),n.push(t);else o.push(e)}),i.sort(Ri),o.length){const e=new Map,t=[],a=[];o.forEach(i=>{var o;const r=i.node.innerMostWrapped,s=r.ascend({condition:e=>n.includes(e),error:e=>e.originalRoot})[0];if(s)(null===(o=e.get(s))||void 0===o?void 0:o.push(i))||e.set(s,[i]);else if(r.zIndex<0)a.push(i);else t.push(i)});for(const[n,o]of e.entries()){o.sort(Ri);const e=i.findIndex(e=>e.node.innerMostWrapped===n);if(-1!==e)i.splice(e+1,0,...o);else o.forEach(e=>{if(e.node.innerMostWrapped.zIndex<0)a.push(e);else t.push(e)})}if(a.length)a.sort(Ni),i=a.concat(i);if(t.length)t.sort(Ni),i=i.concat(t)}return i}return t}checkFrameHorizontal(e){switch(e.floated.size){case 1:if("center"===e.node.cssAscend("textAlign",true)&&e.some(e=>e.pageFlow))return true;else if(e.floated.has("right")){let t=0,i=false;for(const a of e)if(!a.floating){if(a.multiline)i=true;++t}else if(i)return false;return t>0&&!e.singleRowAligned}return e.item(0).floating&&(e.linearY||e.length>2&&!e.singleRowAligned&&!e.every(e=>e.inlineFlow)||e.every(e=>e.floating||e.block&&(!e.isEmpty||!(e.textElement||e.inputElement||e.imageElement||e.svgElement||e.controlElement))));case 2:return true}return false}checkConstraintFloat(e){if(e.length>1){const t=this.application.clearMap;let i=true,a=true;for(const n of e)if(!t.has(n)){const e=n.inputElement||n.controlElement;if(i&&!(n.floating||n.autoMargin.horizontal||n.inlineDimension&&!e||n.imageOrSvgElement||n.marginTop<0))i=false;if(a&&0===n.percentWidth)a=false;if(!i&&!a)return false}return true}return false}checkConstraintHorizontal(e){if(e.length>1&&e.singleRowAligned){const t=e.floated.size;if(t&&(2===t||Ii(e,this.application.clearMap)||e.some(e=>"left"===e.float)&&e.some(e=>true===e.autoMargin.left)||e.some(e=>"right"===e.float)&&e.some(e=>true===e.autoMargin.right)))return false;else return e.some(t=>t.blockVertical||t.percentWidth>0&&t.percentWidth<1&&!t.inputElement&&!t.controlElement||t.marginTop<0||"bottom"===t.verticalAlign&&!e.parent.hasHeight)}return false}checkLinearHorizontal(e){const t=e.floated,i=t.size;if((0===i||1===i&&t.has("left"))&&0===e.node.lineHeight&&e.singleRowAligned){const{fontSize:t,lineHeight:i}=e.item(0),a=e.parent.actualBoxWidth();let n=0;for(const o of e){if(!(o.naturalChild&&o.isEmpty&&!o.inputElement&&!o.controlElement&&!o.positionRelative&&o.baseline&&!o.blockVertical&&0===o.zIndex&&o.lineHeight===i&&o.fontSize===t))return false;else n+=o.linear.width;if(n>=a)return false}return true}return false}setConstraints(){this.cache.each(e=>{const t=e.renderChildren;if(t.length&&e.hasProcedure(Zt.CONSTRAINT))if(e.hasAlign(4)){if(e.layoutConstraint&&!e.layoutElement)this.evaluateAnchors(t)}else if(e.layoutRelative)this.processRelativeHorizontal(e,t);else if(e.layoutConstraint){let i=0;const a=t.length,n=new Array(a);if(t.forEach(t=>{if(!t.positioned)if(t.pageFlow||t.autoPosition)n[i++]=t;else{const i=t.constraint;if(t.outerWrapper===e){if(!i.horizontal)t.anchorParent("horizontal",0);if(!i.vertical)t.anchorParent("vertical",0)}else{if(t.leftTopAxis){if(!i.horizontal)ci(t,e,true);if(!i.vertical)ci(t,e,false)}if(!i.horizontal)this.addGuideline(t,e,{orientation:"horizontal"});if(!i.vertical)this.addGuideline(t,e,{orientation:"vertical"});t.positioned=true}}}),i>0){if(n.length=i,e.layoutHorizontal)this.processConstraintHorizontal(e,n);else if(i>1)this.processConstraintChain(e,n);else{const e=n[0],{horizontal:t,vertical:i}=e.constraint;if(!t)Bi(e);if(!i)e.anchorParent("vertical"),Xi(e);yt.setConstraintDimension(e,1)}this.evaluateAnchors(n)}}})}renderNodeGroup(e){const{node:t,containerType:a}=e,n=ae();let o=false;switch(a){case i.LINEAR:n.android.orientation=Wt(e.alignmentType,16)?"vertical":"horizontal",o=true;break;case i.GRID:{const{columnCount:t,rowCount:i}=e,a=n.android;if(i>0)a.rowCount=i.toString();a.columnCount=t>0?t.toString():"1",o=true;break}case i.FRAME:case i.RELATIVE:case i.CONSTRAINT:o=true;break;default:if(e.isEmpty)return this.renderNode(e);break}if(o)return t.setControlType(yt.getControlName(a,t.api),a),t.addAlign(e.alignmentType),t.render(e.parent),t.apply(n),{type:1,node:t,controlName:t.controlName}}renderNode(e){var t;let{parent:a,containerType:n}=e;const r=e.node;let s=yt.getControlName(n,r.api);switch(r.tagName){case"IMG":{const t=this.application,n=r.element,s=r.absoluteParent||r.documentParent;let l=r.toFloat("width",0),c=r.toFloat("height",0),h=r.percentWidth>0?l:-1;const f=r.percentHeight>0?c:-1;let d,u="fitXY";if(Xt(n.srcset)||"PICTURE"===r.actualParent.tagName){const e=this.localSettings.mimeType.image;if(d=vt(n,"*"===e?void 0:e),d.length){const e=d[0],i=e.actualWidth;if(i)if(-1===h)[l,c]=hi(r,i,c,t.resourceHandler.getImage(n.src));else l=r.bounds.width,h=-1;else{const i=t.resourceHandler.getImage(e.src);if(i)if(-1===h)[l,c]=hi(r,i.width,c,i);else l=r.bounds.width,h=-1}}else d=void 0}if(-1!==h||-1!==f){const e=s.box;if(h>=0)if(l*=e.width/100,h<100&&!a.layoutConstraint)r.css("width",xt(l));if(f>=0)if(c*=e.height/100,f<100&&!(a.layoutConstraint&&s.hasHeight))r.css("height",xt(c))}else switch(r.css("objectFit")){case"contain":u="centerInside";break;case"cover":u="centerCrop";break;case"scale-down":u="fitCenter";break;case"none":u="center";break}if(r.android("scaleType",u),l>0&&a.hasPX("maxWidth",false)&&(-1===h||100===h)){const e=a.parseWidth(a.css("maxWidth"));if(e<=l)l=e,r.css("width",xt(l))}else if(c>0&&a.hasPX("maxHeight",false)&&(-1===f||100===f)){const e=a.parseHeight(a.css("maxHeight"));if(e<=c)c=e,r.css("maxHeight",xt(c)),r.setLayoutHeight("wrap_content")}if(r.baseline)if(r.android("baselineAlignBottom","true"),r.marginBottom>0&&a.layoutLinear&&a.layoutHorizontal)r.mergeGravity("layout_gravity","bottom");if(r.hasResource(Jt.IMAGE_SOURCE)){const e=t.resourceHandler.addImageSrc(n,"",d);if(""!==e)r.android("src","@drawable/"+e)}if(!r.pageFlow&&a===s&&(r.left<0&&"hidden"===a.css("overflowX")||r.top<0&&"hidden"===a.css("overflowY"))){const n=s.box,h=t.createNode({parent:a,innerWrap:r});if(h.setControlType(o.FRAME,i.FRAME),h.inherit(r,"base"),h.cssCopy(r,"position","zIndex"),h.exclude({resource:Jt.ALL,procedure:Zt.ALL}),h.autoPosition=false,l>0)h.setLayoutWidth(l<n.width?xt(l):"match_parent");else h.setLayoutWidth("wrap_content");if(c>0)h.setLayoutHeight(c<n.height?xt(c):"match_parent");else h.setLayoutHeight("wrap_content");if(h.render(a),h.saveAsInitial(),!a.layoutConstraint)r.modifyBox(2,r.top),r.modifyBox(16,r.left);t.addLayoutTemplate(a,h,{type:1,node:h,controlName:o.FRAME}),a=h,e.parent=h}break}case"INPUT":{const e=r.element;switch(e.type){case"radio":case"checkbox":if(e.checked)r.android("checked","true");break;case"text":r.android("inputType","text");break;case"password":r.android("inputType","textPassword");break;case"number":case"range":r.android("inputType","number"),r.android("progress",e.value),di(r,e);break;case"time":r.android("inputType","time"),di(r,e);break;case"date":r.android("inputType","date"),di(r,e);break;case"datetime-local":r.android("inputType","datetime"),di(r,e);break;case"email":r.android("inputType","textEmailAddress"),fi(r,e);break;case"tel":r.android("inputType","phone"),fi(r,e);break;case"url":r.android("inputType","textUri"),fi(r,e);break;case"week":case"month":case"search":r.android("inputType","text"),fi(r,e);break;case"image":case"color":if(0===r.width)r.css("width",xt(r.bounds.width));break}break}case"BUTTON":r.naturalChildren.forEach(e=>{if(!e.pageFlow||!e.textElement)e.android("elevation","2px")});break;case"TEXTAREA":{const{cols:e,maxLength:t,placeholder:i,rows:a}=r.element;switch(r.android("minLines",a>0?a.toString():"2"),r.css("verticalAlign")){case"middle":r.mergeGravity("gravity","center_vertical");break;case"bottom":r.mergeGravity("gravity","bottom");break;default:r.mergeGravity("gravity","top");break}if(t>0)r.android("maxLength",t.toString());if(!r.hasPX("width")&&e>0)r.css("width",xt(8*e));if(r.android("hint",i),r.android("scrollbars","vertical"),r.android("inputType","textMultiLine"),r.overflowX)r.android("scrollHorizontally","true");break}case"LEGEND":{if(!r.hasWidth)r.css("minWidth",xt(r.actualWidth)),mi(r);const e=r.actualHeight*this.localSettings.deviations.legendBottomOffset;r.modifyBox(8,e),r.linear.bottom+=e;break}case"METER":case"PROGRESS":{const{min:e,max:t,value:i}=r.element;let a,n;if("METER"===r.tagName){if(({meterForegroundColor:a,meterBackgroundColor:n}=this.localSettings.style),t){if(i)r.android("progress",Math.round(i/t*100).toString());if(100===t)r.android("min",e.toString()),r.android("max",t.toString())}}else{if(({progressForegroundColor:a,progressBackgroundColor:n}=this.localSettings.style),i)r.android("progress",i.toString());if(t)r.android("max",t.toString())}if(!r.hasWidth)r.css("width",xt(r.bounds.width));if(!r.hasHeight)r.css("height",xt(r.bounds.height));r.android("progressTint","@color/"+B.addColor(a)),r.android("progressBackgroundTint","@color/"+B.addColor(n)),r.attr("_","style","@android:style/Widget.ProgressBar.Horizontal"),r.exclude({resource:Jt.BOX_STYLE|Jt.FONT_STYLE});break}case"AUDIO":case"VIDEO":{const t=this.localSettings.mimeType.video,a=r.element;let o,l=a.src;if(Bt(t,l))o=Vt(l);else l="",Gt(a.children,e=>{if("SOURCE"===e.tagName)if(Bt(t,e.src))return l=e.src,o=Vt(l),true;else if(o=e.type.trim().toLowerCase(),t.includes(o))return l=e.src,true});if(!r.hasPX("width"))r.css("width",xt(r.actualWidth),true);if(!r.hasPX("height"))r.css("height",xt(r.actualHeight),true);if(r.inline)mi(r);if(Xt(l))this.application.resourceHandler.addVideo(l,o),r.inlineText=false,r.exclude({resource:Jt.FONT_STYLE});else if(Xt(a.poster)){r.setCacheValue("tagName","IMG"),l=a.src,a.src=a.poster,e.containerType=i.IMAGE;const t=this.renderNode(e);return a.src=l,t}else n=i.TEXT,s=yt.getControlName(n,r.api),e.containerType=n,r.inlineText=true}}switch(s){case o.TEXT:{let e="";if(r.overflowX)e+="horizontal";if(r.overflowY)e+=(""!==e?"|":"")+"vertical";if(""!==e)r.android("scrollbars",e);if(r.has("letterSpacing"))r.android("letterSpacing",Lt(r.toFloat("letterSpacing")/r.fontSize,r.localSettings.floatPrecision));if("justify"===r.css("textAlign"))r.android("justificationMode","inter_word");if(r.has("textShadow")){const e=ti.exec(r.css("textShadow"));if(e){const t=B.addColor(wt(e[1]||r.css("color")));if(""!==t){const i=r.localSettings.floatPrecision;r.android("shadowColor","@color/"+t),r.android("shadowDx",Lt(2*r.parseWidth(e[2]),i)),r.android("shadowDy",Lt(2*r.parseHeight(e[3]),i)),r.android("shadowRadius",Lt(Xt(e[4])?Math.max(r.parseWidth(e[4]),0):.01,i))}}}if("nowrap"===r.css("whiteSpace"))if(r.android("maxLines","1"),"ellipsis"===r.css("textOverflow")&&"hidden"===r.css("overflow"))r.android("ellipsize","end");break}case o.BUTTON:if(!r.hasHeight)r.android("minHeight",xt(Math.ceil(r.actualHeight)));r.mergeGravity("gravity","center_vertical"),li(r);break;case o.SELECT:case o.CHECKBOX:case o.RADIO:li(r);break;case o.EDIT:if(!r.companion&&r.hasProcedure(Zt.ACCESSIBILITY))[r.previousSibling,r.nextSibling].some(e=>{if((null==e?void 0:e.visible)&&e.pageFlow){const t=r.element,i=e.element,a="LABEL"===e.documentParent.tagName&&e.documentParent;if(t.id&&t.id===i.htmlFor)return e.android("labelFor",r.documentId),true;else if(a&&e.textElement)return a.android("labelFor",r.documentId),true}return false});if(null===(t=r.element.list)||void 0===t?void 0:t.children.length)s=o.EDIT_LIST;else if(r.api>=26)r.android("importantForAutofill","no");li(r);case o.RANGE:if(!r.hasPX("width"))r.css("width",xt(r.bounds.width));break;case o.LINE:if(!r.hasHeight)r.setLayoutHeight(xt(r.contentBoxHeight||1));break}return r.setControlType(s,n),r.addAlign(e.alignmentType),r.render(a),{type:1,node:r,parent:a,controlName:s}}renderNodeStatic(e,t){const{controlType:i,width:a,height:n,content:o}=e;let r=e.controlName;if(!Xt(r))if(i)r=yt.getControlName(i,this.userSettings.targetAPI);else return"";const s=new yt;if(this.afterInsertNode(s),s.setControlType(r),s.setLayoutWidth(a||"wrap_content"),s.setLayoutHeight(n||"wrap_content"),t)s.apply(t),t.documentId=s.documentId;return this.getEnclosingXmlTag(r,this.userSettings.showAttributes?s.extractAttributes(1):void 0,o)}renderSpace(e){const{android:t,app:i,column:a,columnSpan:n,row:r,rowSpan:s}=e;let{width:l,height:c}=e;if(l){if(Rt(l))t.layout_columnWeight=Lt(parseFloat(l)/100,this.localSettings.precision.standardFloat),l="0px"}else l="wrap_content";if(c){if(Rt(c))t.layout_rowWeight=Lt(parseFloat(c)/100,this.localSettings.precision.standardFloat),c="0px"}else c="wrap_content";if(void 0!==a)t.layout_column=a.toString();if(n)t.layout_columnSpan=n.toString();if(void 0!==r)t.layout_row=r.toString();if(s)t.layout_rowSpan=s.toString();const h={android:t,app:i},f=this.renderNodeStatic({controlName:o.SPACE,width:l,height:c},h);return e.documentId=h.documentId,f}addGuideline(e,t,i){Wi.call(this,e,t,"horizontal",i),Wi.call(this,e,t,"vertical",i)}addBarrier(e,t){const i=[];if(e.forEach(e=>{const a=e.constraint.barrier;if(!a)e.constraint.barrier={};else if(a[t])return;i.push(e)}),i.length){const e=ae(void 0,{android:{},app:{barrierDirection:t,constraint_referenced_ids:Ht(i,e=>J(e.anchorTarget.documentId)).join(",")}}),{api:a,anchorTarget:n}=i[i.length-1],s=this.renderNodeStatic({controlName:a<29?o.BARRIER:r.BARRIER},e);switch(t){case"top":case"left":this.addBeforeOutsideTemplate(n.id,s,false);break;default:this.addAfterOutsideTemplate(n.id,s,false);break}const l=e.documentId;if(l)return i.forEach(e=>e.constraint.barrier[t]=l),l}return""}evaluateAnchors(e){const t=[],i=[],a=e.length;let n=0;while(n<a){const a=e[n++],{horizontal:o,vertical:r}=a.constraint;if(o)t.push(a);if(r)i.push(a);if(a.alignParent("top")||a.alignSibling("top")){let t=a;do{const i=t.alignSibling("bottomTop");if(""!==i){const a=e.find(e=>e.documentId===i);if((null==a?void 0:a.alignSibling("topBottom"))===t.documentId)if(a.alignParent("bottom"))break;else t=a;else break}else{if(t!==a&&!t.alignParent("bottom"))if(t.blockHeight)t.anchor("bottom","parent");else{const e=t.constraint.barrier,i=!e||!Xt(e.bottom)?this.addBarrier([t],"bottom"):e.bottom;if(i)t.anchor("bottomTop",i)}break}}while(true)}}n=0;while(n<a){const a=e[n++],o=a.constraint,r=o.current;if(!o.horizontal)for(const e in r){const{documentId:i,horizontal:s}=r[e];if(s&&t.some(e=>e.documentId===i)){o.horizontal=true,t.push(a),n=0;break}}if(!o.vertical)for(const e in r){const{documentId:t,horizontal:s}=r[e];if(!s&&i.some(e=>e.documentId===t)){o.vertical=true,i.push(a),n=0;break}}}}createNodeGroup(e,t,i={}){const{parent:a,delegate:n,cascade:o}=i,r=new bt(this.cache.nextId,e,t);if(this.afterInsertNode(r),a)a.replaceTry({child:e,replaceWith:r,notFoundAppend:true}),r.init();else r.containerIndex=e.containerIndex;return this.cache.append(r,true===n,true===o),r}createNodeWrapper(e,t,i={}){const{children:a,containerType:n,alignmentType:o,resource:r,procedure:s,section:l}=i,c=this.application.createNode({parent:t,children:a,append:true,innerWrap:e,delegate:true,cascade:true===i.cascade||!!a&&a.length>0&&!e.originalRoot});if(c.inherit(e,"base","alignment"),e.documentRoot)c.documentRoot=true,e.documentRoot=false;if(null===c.actualParent&&t.naturalElement)c.actualParent=t;if(n)c.setControlType(yt.getControlName(n,e.api),n);if(o)c.addAlign(o);if(c.addAlign(16384),c.exclude({resource:void 0===r?Jt.BOX_STYLE|Jt.ASSET:r,procedure:void 0===s?Zt.CUSTOMIZATION:s,section:void 0===l?jt.ALL:l}),c.saveAsInitial(),c.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),false!==i.inheritContentBox)c.setCacheValue("contentBoxWidth",e.contentBoxWidth),c.setCacheValue("contentBoxHeight",e.contentBoxHeight);if(i.resetMargin)e.resetBox(30,c);if(i.inheritDataset&&e.naturalElement)Object.assign(c.dataset,e.dataset);if(e.documentParent.layoutElement){const t=e.namespace("android");for(const e in t)if(e.startsWith("layout_"))c.android(e,t[e]),delete t[e]}if(e.renderParent&&e.removeTry({alignSiblings:true}))e.rendered=false;return c}processRelativeHorizontal(e,t){const a=[];let n,r=false,s=false;if(e.hasAlign(16)){let e;t.forEach(t=>{if(e)t.anchor("topBottom",e.documentId);else t.anchor("top","true");if(t.pageFlow)a.push([t]),e=t;else r=true})}else{const i=e.nodeGroup?e.documentParent:e,o=this.application.clearMap,s="nowrap"!==e.css("whiteSpace");let l=i.actualBoxWidth(Di.call(this,e,t)),c=0;if(e.naturalElement){if(e.blockDimension)c=e.parseUnit(e.css("textIndent"));if(e.floating){const t=e.nextSibling;if((null==t?void 0:t.floating)&&t.float!==e.float&&t.hasWidth)if(l=Math.max(l,e.actualParent.box.width-t.linear.width),!e.visibleStyle.background&&!e.hasPX("maxWidth")&&l>e.width)e.css("width",xt(l),true)}}else{const i=e.actualParent;if((null==i?void 0:i.blockDimension)&&i.has("textIndent")){const e=t[0];if(!e.rightAligned){const t=i.css("textIndent");if(c=i.parseUnit(t),0!==c){if(c<0)i.setCacheValue("paddingLeft",Math.max(0,i.paddingLeft+c));e.setCacheValue("blockDimension",true),e.css("textIndent",t),i.css("textIndent","0px")}}}}const h={boxWidth:l,clearMap:o,lineWrap:s,textIndent:c,rowLength:0,retainMultiline:false};if(Ti(t).forEach((t,i)=>{const s=t.length;if(0===s)return;const f=1===i;let d,u,p,g,m,y=true,b=0,T=false;if(f){if((!e.naturalElement&&t[0].actualParent||e).cssInitialAny("textAlign","right","end"))u="right",y=false,t[s-1].anchor(u,"true");else u="left";if(t.some(e=>e.floating))ii(t);p=a}else u="right",h.rowLength=0,n=[],p=n;for(let i=0;i<s;++i){const a=t[i];let n;if(f&&y){if(n="leftRight",0===i&&a.inline&&Math.abs(c)>=a.actualWidth&&"right"!==a.float&&!a.positionRelative)if(T=true,!a.floating)a.setCacheValue("float","left"),a.setCacheValue("floating",true)}else n="rightLeft";if(!a.pageFlow){if(g){const e=g.documentId;a.anchor(n,e),a.anchor("top",e)}else a.anchor(u,"true"),a.anchor("top","true");r=true;continue}let s,S=a.bounds;if(a.styleText&&!a.hasPX("width")){const e=a.textBounds;if(e&&(e.numberOfLines>1||Math.ceil(e.width)<a.box.width))S=e}let E=a.multiline;if(E&&Math.floor(S.width)<=l&&!a.hasPX("width")&&!Ci(a))E=false,a.multiline=false;let A=true===a.autoMargin.horizontal;if(A)if(a.autoMargin.leftRight)a.anchorParent("horizontal");else a.anchor(a.autoMargin.left?"right":"left","true");if(g){h.retainMultiline=false;const t=a.textElement&&Ei(a,g,d,S,E,i,b,h);if(s=a.inlineVertical&&g.inlineVertical&&a.previousSibling!==g?It(g.element,a.element):void 0,g.floating&&oi(a,g))n="";if(t||a.nodeGroup&&!a.hasAlign(128)||Math.ceil(a.bounds.top)>=g.bounds.bottom&&(a.blockStatic||a.floating&&g.float===a.float)||!a.textElement&&Si(a,S,E,d,b,h)&&!wi(a,g,E,b,h)||!a.floating&&(g.blockStatic||a.previousSiblings().some(e=>e.excluded&&e.blockStatic)||(null==s?void 0:s.some(e=>si(e))))||g.autoMargin.horizontal||o.has(a)||B.checkPreIndent(g)){if(o.has(a)&&!d)a.setBox(2,{reset:1});if(y){if(d&&(a.bounds.bottom<=d.bounds.bottom||T)){if(!A)a.anchor(n,d.documentId)}else{if(!A)a.anchor(u,"true");d=void 0}A=true}else{if(d&&a.linear.bottom>d.bounds.bottom)d=void 0;g.anchor(u,"true")}b=Math.min(0,t&&!g.multiline&&E&&!o.has(a)?a.linear.right-e.box.right:0),m=[a],p.push(m),h.items=m,++h.rowLength}else{if(""!==n)if(y){if(!A)a.anchor(n,g.documentId),A=true}else g.anchor(n,a.documentId);if(E&&!a.hasPX("width")&&!g.floating&&!h.retainMultiline)a.multiline=false;m.push(a)}}else{if(y)if(!A)a.anchor(u,"true");m=[a],p.push(m),h.items=m,++h.rowLength}if("left"===a.float&&f)if(d){if(a.linear.bottom>d.linear.bottom)d=a}else d=a;if(false===(null==s?void 0:s.some(e=>!!Pt(e,a.sessionId)||si(e)))){const e=Ct(s[0]);if(!e.numberOfLines){const t=s.length>1&&Ct(s.pop());if(!t||!t.numberOfLines)b+=t?e.left-t.right:e.width}}b+=a.marginLeft+S.width+a.marginRight,g=a}}),c<0&&1===a.length)e.setCacheValue("paddingLeft",Math.max(0,e.paddingLeft+c))}if(a.length>1||n&&n.length>1)s=true;const l=a=>{let n=null;const r=a.length,l=1===r&&!e.hasHeight;for(let c=0;c<r;++c){const h=a[c];let f;const d=h.length;if(d>1){const a=ri(h);let u=a[0];if(f=ei.baseline(a.length?h.filter(e=>!a.includes(e)):h),f&&u)if(f!==u&&f.bounds.height<u.bounds.height)f.anchor("bottom",u.documentId);else f=ei.baseline(h),u=void 0;const p=[];let g=0===c?"true":null==f?void 0:f.documentId,m=0,y=null,b=0;while(b<d){const t=h[b++];if(t===f||t===u)continue;const i=t.inlineVertical?t.css("verticalAlign"):"";if(t.controlElement){let i=t.bounds.top;if(n)i-=n.linear.bottom;else t.anchor("top","true"),i-=e.box.top;t.setBox(2,{reset:1,adjustment:i}),t.baselineAltered=true;continue}let a=false;if(t.baseline)if(t.naturalElements.length&&(Nt(t.verticalAlign)||!t.baselineElement))a=true;else p.push(t);else switch(i){case"text-top":if(null===y)y=ei.baseline(h,true);if(y&&t!==y)t.anchor("top",y.documentId);break;case"super":if(!t.baselineAltered)t.modifyBox(2,-1*Math.floor(t.baselineHeight*this.localSettings.deviations.superscriptTopOffset));case"top":if(g&&g!==t.documentId)t.anchor("top",g);else if(f)t.anchor("top",f.documentId);break;case"middle":{const e=Math.max(t.actualHeight,t.lineHeight);if(!s){if(t.anchor("centerVertical","true"),t.imageElement)m=Math.max(e,m)}else if(f){const i=Math.max(f.actualHeight,f.lineHeight);if(e<i)t.anchor("top",f.documentId),t.setBox(2,{reset:1,adjustment:Math.round((i-e)/2)}),t.baselineAltered=true;else if(e>m)m=e}break}case"text-bottom":if(null===y)y=ei.baseline(h,true);if(y!==t&&y)t.anchor("bottom",y.documentId);else if(f)t.anchor("bottom",f.documentId);break;case"sub":if(!t.baselineAltered)t.modifyBox(8,-1*Math.ceil(t.baselineHeight*this.localSettings.deviations.subscriptBottomOffset));case"bottom":if(g&&!Ut(e.bounds.height,t.bounds.height)){if(!e.hasHeight&&"true"===g)if(!s)e.css("height",xt(e.bounds.height));else if(f)g=f.documentId;t.anchor("bottom",g)}break;default:a=!t.baselineAltered;break}if(0===c&&a)t.anchor("top","true")}const T=p.length;if(f){if(f.baselineActive=true,T){if(ni(f,p,l,e.box.top),l&&f.is(i.BUTTON))f.anchor("centerVertical","true"),f=null}else if(f.textElement)if(m>Math.max(f.actualHeight,f.lineHeight))f.anchor("centerVertical","true"),f=null;else if(f.multiline){const{left:e,height:t}=f.bounds;let i=0;while(i<d){const a=h[i++];if(a===f)break;else if(e<a.bounds.right&&t<a.bounds.height){f.anchor("bottom",a.documentId);break}}}}else if(T>0&&T<d)if(u=ri(h)[0],u){let e=0;while(e<T){const t=p[e++];if(t.baseline&&!t.multiline&&u.bounds.height>t.bounds.height)t.anchor("bottom",u.documentId)}}let S=true,E=d-1;while(E>=0){const e=h[E--];if(e.textElement)e.setSingleLine(S&&!e.rightAligned&&!e.centerAligned),S=false}if("center"===e.cssInitial("textAlign")&&r>1){const a=this.application,r=this.createNodeGroup(h[0],h,{parent:e});r.setControlType(o.RELATIVE,i.RELATIVE),r.render(e),r.anchorParent("horizontal"),r.setLayoutWidth("wrap_content"),r.setLayoutHeight("wrap_content");let s=-1;if(h.forEach(e=>{const i=t.indexOf(e);if(-1!==i)if(-1===s)s=i;else s=Math.min(i,s);e.removeTry(),e.render(r),a.addLayoutTemplate(r,e,{type:1,node:e,controlName:e.controlName})}),a.addLayoutTemplate(e,r,{type:1,node:r,controlName:r.controlName},s),n)r.anchor("topBottom",n.documentId);else n=r;continue}}else if(f=h[0],f.centerAligned)f.anchorParent("horizontal"),f.anchorDelete("left","right");let u=false;if(null===f)f=h[0],u=true;let p=0;while(p<d){const e=h[p++];if(n&&!e.alignSibling("baseline"))e.anchor("topBottom",n.documentId);if(u&&e.linear.bottom>=f.linear.bottom)f=e}n=f}};if(l(a),n)l(n);if(e.horizontalRows=n?a.concat(n):a,r){const t=e.renderChildren,i=e.renderTemplates,a=[];for(let e=0;e<t.length;++e)if(!t[e].pageFlow)a.push(i[e]),t.splice(e,1),i.splice(e--,1);a.forEach(e=>{t.push(e.node),i.push(e)})}}processConstraintHorizontal(e,t){const i=e.hasAlign(2048),{anchorStart:a,anchorEnd:n,chainStart:o,chainEnd:r}=Oi(i);let s,l,c,h=0,f=true,d=null,u=0;if(!i)switch(e.cssAscend("textAlign",true)){case"center":h=.5;break;case"right":case"end":h=1;break}if(t.some(e=>e.floating)){if(!i)switch(h){case.5:{let i;if([i,t]=Ft(t,e=>e.floating||true===e.autoMargin.horizontal),i.length)this.processConstraintChain(e,i);break}case 1:{let i;if([i,t]=function(e){return Ft(e,e=>"left"===e.float||true===e.autoMargin.right)}(t),i.length)this.processConstraintChain(e,i);break}default:{let i;if([i,t]=Ti(t),i.length)this.processConstraintChain(e,i);break}}ii(t)}if(!e.hasPX("width")&&t.some(e=>e.percentWidth>0))e.setLayoutWidth("match_parent");const p=ei.baseline(t),g=ri(t)[0],m=null==p?void 0:p.documentId;let y=yt.availablePercent(t,"width",e.box.width);const b=t.length;for(let i=0;i<b;++i){const T=t[i];if(c){if(T.pageFlow){if(c.anchor(r,T.documentId),T.anchor(o,c.documentId),i===b-1)T.anchor(n,"parent")}else if(T.autoPosition)T.anchor(o,c.documentId)}else if(1===b)if(h=T.centerAligned?.5:T.rightAligned?1:0,T.blockStatic||.5===h)T.anchorParent("horizontal",h);else T.anchor(a,"parent"),T.anchorStyle("horizontal",0);else T.anchor(a,"parent"),T.anchorStyle("horizontal",h,"packed");if(T.pageFlow){if(T!==p){if(T.controlElement)f=Ai(e,T);else if(T.inlineVertical){if(!s||Li(T)>Li(s))s=T;switch(T.css("verticalAlign")){case"text-top":if(null===d)d=ei.baseline(t,true);if(d&&T!==d)T.anchor("top",d.documentId);else f=Ai(e,T);break;case"middle":if(false===(null==p?void 0:p.textElement)||g)f=Ai(e,T);else T.anchorParent("vertical",.5);break;case"text-bottom":if(null===d)d=ei.baseline(t,true);if(d&&T!==d){if(T!==g)T.anchor("bottom",d.documentId);else if(g)f=Ai(e,T);break}case"bottom":if(!l)t.forEach(e=>{if(!e.baseline&&(!l||e.linear.bottom>l.linear.bottom))l=e});if(T===l)f=Ai(e,T);else T.anchor("bottom","parent");break;case"baseline":if(null===p||T.blockVertical||!T.textElement&&Li(T)>Li(p))f=Ai(e,T);else T.anchor("baseline",m||"parent"),++u;break;default:f=Ai(e,T);break}}else if(T.plainText)T.anchor("baseline",m||"parent"),++u;else f=Ai(e,T);T.anchored=true}y=yt.setConstraintDimension(T,y),c=T}else if(T.autoPosition)if(m)T.anchor("top",m);else T.anchorParent("vertical",0),T.anchored=true,f=false}if(p){if(s&&s!==p&&p.textElement&&Li(s)>Li(p))switch(s.verticalAlign){case"middle":p.anchorParent("vertical",.5,"",true);break;case"baseline":p.anchor("baseline",s.documentId);break;case"bottom":case"text-bottom":p.anchor("bottom",s.documentId);break;default:Ai(e,p);break}else if(f&&p.baselineElement&&!p.imageOrSvgElement&&e.ascend({condition:e=>e.layoutHorizontal,error:e=>e.naturalChild&&e.layoutVertical||e.layoutGrid,attr:"renderParent"}).length)p.anchorParent("vertical"),p.anchor("baseline","parent");else Ai(e,p);p.baselineActive=u>0,p.anchored=true}}processConstraintChain(e,t){const i=this.application.clearMap,a=e.hasAlign(512),n=t[0].actualParent||e,o=ei.partitionRows(t,i);if(!e.hasWidth&&t.some(e=>e.percentWidth>0))e.setLayoutWidth("match_parent",false);let r,s=[];const l=o.length;for(let t=0;t<l;++t){const c=o[t],[h,f]=Ft(c,e=>"right"===e.float||true===e.autoMargin.left);let d,u,p,g=false;const m=(o,h)=>{const f=o.length;if(0===f)return;const{anchorStart:m,anchorEnd:y,chainStart:b,chainEnd:T}=Oi(h),S=o[0],E=o[f-1];if(f>1){if(S.anchor(m,"parent"),h)E.anchorStyle("horizontal",1,"packed");else S.anchorStyle("horizontal",!a&&"center"===n.css("textAlign")?.5:0,"packed");E.anchor(y,"parent")}else Bi(S);let A=yt.availablePercent(c,"width",e.box.width);g=!((1!==t||S.floating||true!==(null==r?void 0:r.every(e=>e.floating))||0!==i.size&&c.some(e=>ui(e,i)))&&(S.pageFlow||S.autoPosition&&1!==f)),p=void 0;for(let e=0;e<f;++e){const c=o[e];if(0===t||g)if(1===l)c.anchorParent("vertical"),Xi(c,1===f,true);else c.anchor("top","parent"),c.anchorStyle("vertical",0,"packed");else if(t===l-1&&!u)c.anchor("bottom","parent");if(c.autoMargin.leftRight)c.anchorParent("horizontal");else if(f>1){const t=o[e-1],i=o[e+1];if(t)if(!t.pageFlow&&t.autoPosition){let t,i=e-2;while(i>=0)if(t=o[i--],t.pageFlow)break;else t=void 0;if(t)c.anchor(b,t.documentId);else c.anchor(m,"parent")}else c.anchor(b,t.documentId);if(i)c.anchor(T,i.documentId)}if(A=yt.setConstraintDimension(c,A),r&&0===e){if(i.has(c)&&!c.floating)c.modifyBox(2,-r[r.length-1].bounds.height,false);if(a){let e=false;for(const t of s)if(c.bounds.top<Math.floor(t.bounds.bottom)){e=true;break}if(e){d=r[r.length-1];let e=s.length-2;while(e>=0){const t=s[e--];if(t.linear.bottom>d.linear.bottom){if(h&&Math.ceil(t.linear[y])-Math.floor(n.box[y])<c.linear.width)continue;if(c.anchorDelete(m),c.anchor(b,t.documentId,true),h)c.modifyBox(4,t.marginLeft);else c.modifyBox(16,t.marginRight);if(S.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),S.anchorDelete(T),E.anchorDelete(y),!u)u=c;break}}}}}if(!p||c.linear.height>p.linear.height)p=c}};if(m(f,false),m(h,true),a)s=s.concat(f,h);if(!g){if(r){const e=c[0],t=r.length,i=c.length;if(1===t&&1===i){const t=r[0];t.anchor("bottomTop",e.documentId),e.anchor("topBottom",t.documentId),e.app("layout_constraintVertical_bias","0")}else{if(!d||!u){d=r[0];let e=1;while(e<t){const t=r[e++];if(t.linear.bottom>d.linear.bottom)d=t}}if(!u){u=c[0];let e=u.linear.top,t=1;while(t<i){const i=c[t++],a=i.linear.top;if(a<e||a===e&&i.linear.height>u.linear.height)u=i,e=a}}const e=u.documentId;d.anchor("bottomTop",e),u.anchor("topBottom",d.documentId),Xi(u,1===t,true);const a=u.marginTop;c.forEach(t=>{if(t!==u)Xi(t,1===i),t.anchor("top",e),t.modifyBox(2,-1*a)})}}r=c}}e.horizontalRows=o}createLayoutGroup(e){return this.createNodeGroup(e.node,e.children,{parent:e.parent})}get containerTypeHorizontal(){return{containerType:i.RELATIVE,alignmentType:8}}get containerTypeVertical(){return{containerType:i.CONSTRAINT,alignmentType:16}}get containerTypeVerticalMargin(){return{containerType:i.FRAME,alignmentType:256}}get containerTypePercent(){return{containerType:i.CONSTRAINT,alignmentType:32768}}get afterInsertNode(){return e=>{if(e.localSettings=this._defaultViewSettings,e.api=this._targetAPI,e.setExclusions(),!e.hasProcedure(Zt.LOCALIZATION))e.localSettings.supportRTL=false}}get userSettings(){return this.application.userSettings}get screenDimension(){return this._screenDimension}}var Hi={resources:{">":{color:{"@":["name"],"~":true}}}},Vi={resources:{">":{dimen:{"@":["name"],"~":true}}}},Fi={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},zi={resources:{">":{string:{"@":["name"],"~":true}}}},Ui={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":true}}}}}},qi={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":true}}}}}};const Yi=squared.lib,{fromLastIndexOf:ji,objectMap:Ki,parseMimeType:$i,trimEnd:Zi}=Yi.util,{applyTemplate:Ji,replaceTab:Qi}=Yi.xml,ea=B.ASSETS,ta=B.STORED,ia=/^(.+)\/(.+?\.\w+)$/,aa=/"(-?[\d.]+)px"/g,na=/>(-?[\d.]+)px</g;function oa(e,t){const i=t.length;if(i){const a=new Array(i/3);for(let n=0,o=0;n<i;n+=3)a[o++]={pathname:e+t[n+1],filename:t[n+2],content:t[n]};return a}return t}function ra(e,t,i,a){const n=t.length;if(n){i=i.toLowerCase();let o=$i(i);if(!o.startsWith("image/"))o="";if(!/^[a-z\d]/.test(i))i="@"+i;const r=new Array(n/3);for(let s=0,l=0;s<n;s+=3){const n=t[s+2].split("?")[0].trim().toLowerCase();let c;if(""!==o){const e=$i(n);if(e.startsWith("image/")&&e!==o)c=i+":"+e}r[l++]={pathname:e+t[s+1],filename:n,mimeType:c,compress:a&&B.canCompressImage(n)?[{format:"png"}]:void 0,uri:t[s]}}return r}return t}function sa(e,t){const i=t.length;if(i){const a=new Array(i/3);for(let n=0,o=0;n<i;n+=3)a[o++]={pathname:e,filename:t[n+2].toLowerCase(),mimeType:t[n+1],uri:t[n]};return a}return t}function la(e){if((e=e.trim()).endsWith("\\"))return Zi(e,"\\")+"/";else if(!e.endsWith("/"))return e+"/";return e}const ca=(e,t,i)=>({pathname:e,filename:t,content:i}),ha=(e,t)=>"dp"===t?e.replace(aa,(e,...t)=>'"'+Z(t[0],false)+'"'):e,fa=(e,t)=>e.toString().toLowerCase()>=t.toString().toLowerCase()?1:-1;class da extends squared.base.FileUI{copyToDisk(e,t){return this.copying(Object.assign(Object.assign({},t),{assets:this.getAssetsAll(null==t?void 0:t.assets),directory:e}))}appendToArchive(e,t){return this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{assets:this.getAssetsAll(null==t?void 0:t.assets),appendTo:e}))}saveToArchive(e,t){return this.archiving(Object.assign(Object.assign({},t),{assets:this.getAssetsAll(null==t?void 0:t.assets),filename:e}))}resourceAllToXml(e={}){const{directory:t,filename:i}=e,a={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),anim:this.resourceAnimToXml(),drawableImage:this.resourceDrawableImageToString(),rawVideo:this.resourceRawVideoToString(),rawAudio:this.resourceRawAudioToString()};for(const e in a)if(0===a[e].length)delete a[e];if(t||i){const n=this.userSettings,o=la(n.outputDirectory);let r=[];for(const e in a)switch(e){case"drawableImage":r=r.concat(ra(o,a[e],n.convertImages,n.compressImages));break;case"rawVideo":r=r.concat(sa(o+this.directory.video,a[e]));break;case"rawAudio":r=r.concat(sa(o+this.directory.audio,a[e]));break;default:r=r.concat(oa(o,a[e]));break}if(e.assets=r.concat(e.assets||[]),t)this.copying(e);if(i)this.archiving(e)}return a}resourceStringToXml(e={}){const t={string:[]},i=t.string;if(!ta.strings.has("app_name"))i.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[e,t]of Array.from(ta.strings.entries()).sort(fa))i.push({name:e,innerText:t});return this.checkFileAssets([Qi(Ji("resources",zi,[t]),this.userSettings.insertSpaces,true),this.directory.string,"strings.xml"],e)}resourceStringArrayToXml(e={}){if(ta.arrays.size){const t={"string-array":[]},i=t["string-array"];for(const[e,t]of Array.from(ta.arrays.entries()).sort())i.push({name:e,item:Ki(t,e=>({innerText:e}))});return this.checkFileAssets([Qi(Ji("resources",Ui,[t]),this.userSettings.insertSpaces,true),this.directory.string,"string_arrays.xml"],e)}return[]}resourceFontToXml(e={}){var t;if(ta.fonts.size){const i=this.resource,{insertSpaces:a,targetAPI:n}=this.userSettings,o=n<26?f.app:f.android,r=la(this.userSettings.outputDirectory),s=this.directory.font,l=[];for(const[e,c]of Array.from(ta.fonts.entries()).sort()){const h={"xmlns:android":o,font:[]},f=h.font;for(const a in c){const[n,o,l]=a.split("|");let h=e;if("normal"===o)h+="400"===l?"_normal":"_"+c[a];else h+="_"+o+("400"!==l?c[a]:"");f.push({font:"@font/"+h,fontStyle:o,fontWeight:l});const d=null===(t=i.getFont(n,o,l))||void 0===t?void 0:t.srcUrl;if(d)this.addAsset({pathname:r+s,filename:h+"."+ji(d.split("?")[0],".").toLowerCase(),uri:d})}let d=Qi(Ji("font-family",Fi,[h]),a);if(n<26)d=d.replace(/\s+android:/g," app:");l.push(d,s,e+".xml")}return this.checkFileAssets(l,e)}return[]}resourceColorToXml(e={}){if(ta.colors.size){const t={color:[]},i=t.color;for(const[e,t]of Array.from(ta.colors.entries()).sort())i.push({name:t,innerText:e});return this.checkFileAssets([Qi(Ji("resources",Hi,[t]),this.userSettings.insertSpaces),this.directory.string,"colors.xml"],e)}return[]}resourceStyleToXml(e={}){const t=[];if(ta.styles.size){const e={style:[]},i=e.style;Array.from(ta.styles.values()).sort((e,t)=>e.name.toString().toLowerCase()>=t.name.toString().toLowerCase()?1:-1).forEach(e=>{const t=e.items;if(Array.isArray(t))i.push({name:e.name,parent:e.parent,item:Ki(t.sort((e,t)=>e.key>=t.key?1:-1),e=>({name:e.key,innerText:e.value}))})}),t.push(Qi(Ji("resources",qi,[e]),this.userSettings.insertSpaces),this.directory.string,"styles.xml")}if(ta.themes.size){const{convertPixels:e,insertSpaces:a,manifestThemeName:n}=this.userSettings,o={};for(const[r,s]of ta.themes.entries()){const l=ia.exec(r);if(l){const c={style:[]},h=c.style;for(const[e,t]of s.entries()){const i=[],a=t.items;for(const e in a)i.push({name:e,innerText:a[e]});if(!o[r]||e!==n||c.length)h.push({name:e,parent:t.parent,item:i});if(e===n)o[r]=true}t.push(Qi((i=Ji("resources",qi,[c]),"dp"===e?i.replace(na,(e,...t)=>">"+Z(t[0],false)+"<"):i),a),l[1],l[2])}}}var i;return this.checkFileAssets(t,e)}resourceDimenToXml(e={}){if(ta.dimens.size){const t=this.userSettings.convertPixels,i={dimen:[]},a=i.dimen;for(const[e,i]of Array.from(ta.dimens.entries()).sort())a.push({name:e,innerText:t?Z(i,false):i});return this.checkFileAssets([Qi(Ji("resources",Vi,[i])),this.directory.string,"dimens.xml"],e)}return[]}resourceDrawableToXml(e={}){if(ta.drawables.size){const{convertPixels:t,insertSpaces:i}=this.userSettings,a=this.directory.image,n=[];for(const[e,o]of ta.drawables.entries())n.push(Qi(ha(o,t),i),a,e+".xml");return this.checkFileAssets(n,e)}return[]}resourceAnimToXml(e={}){if(ta.animators.size){const t=this.userSettings.insertSpaces,i=[];for(const[e,a]of ta.animators.entries())i.push(Qi(a,t),"res/anim",e+".xml");return this.checkFileAssets(i,e)}return[]}resourceDrawableImageToString(e={}){if(ta.images.size){const{directory:t,filename:i}=e,a=this.directory.image,n=[];for(const[e,t]of ta.images.entries())if(Object.keys(t).length>1)for(const i in t){const o=t[i];n.push(o,a+"-"+i,e+"."+ji(o,".").toLowerCase())}else{const i=t.mdpi;if(i)n.push(i,a,e+"."+ji(i,".").toLowerCase())}if(t||i){const{outputDirectory:a,convertImages:o,compressImages:r}=this.userSettings;if(e.assets=ra(la(a),n,o,r).concat(e.assets||[]),t)this.copying(e);if(i)this.archiving(e)}return n}return[]}resourceRawVideoToString(e={}){if(ea.video.size){const{directory:t,filename:i}=e,a=this.directory.video,n=[];for(const e of ea.video.values()){const t=e.uri;n.push(t,e.mimeType||"",ji(t,"/","\\"))}if(t||i){if(e.assets=sa(la(this.userSettings.outputDirectory)+a,n).concat(e.assets||[]),t)this.copying(e);if(i)this.archiving(e)}return n}return[]}resourceRawAudioToString(e={}){if(ea.video.size){const{directory:t,filename:i}=e,a=this.directory.audio,n=[];for(const e of ea.audio.values()){const t=e.uri;n.push(t,e.mimeType||"",ji(t,"/","\\"))}if(t||i){if(e.assets=sa(la(this.userSettings.outputDirectory)+a,n).concat(e.assets||[]),t)this.copying(e);if(i)this.archiving(e)}return n}return[]}layoutAllToXml(e,t={}){const{directory:i,filename:a}=t,n=i||a,o={},r=[],s=e.length;for(let t=0;t<s;++t){const{content:i,filename:a,pathname:s}=e[t];if(o[a]=[i],n)r.push(ca(s,0===t?this.userSettings.outputMainFileName:a+".xml",i))}if(n){if(t.assets=t.assets?r.concat(t.assets):r,i)this.copying(t);if(a)this.archiving(t)}return o}getAssetsAll(e){const t=this.userSettings;let i=[];if(e){const a=e.length;let n=true,o=0;while(o<a){const i=e[o++];if(!i.uri)if(n)i.filename=t.outputMainFileName,n=false;else{const e=i.filename;if(!e.endsWith(".xml"))i.filename=e+".xml"}}i=i.concat(e)}const a=la(t.outputDirectory);return i.concat(oa(a,this.resourceStringToXml()),oa(a,this.resourceStringArrayToXml()),oa(a,this.resourceFontToXml()),oa(a,this.resourceColorToXml()),oa(a,this.resourceDimenToXml()),oa(a,this.resourceStyleToXml()),oa(a,this.resourceDrawableToXml()),ra(a,this.resourceDrawableImageToString(),t.convertImages,t.compressImages),oa(a,this.resourceAnimToXml()),sa(a+this.directory.video,this.resourceRawVideoToString()),sa(a+this.directory.audio,this.resourceRawAudioToString()))}checkFileAssets(e,t){const{directory:i,filename:a}=t;if(i||a){if(t.assets=oa(la(this.userSettings.outputDirectory),e).concat(t.assets||[]),i)this.copying(t);if(a)this.archiving(t)}return e}get userSettings(){return this.resource.userSettings}}const{NODE_PROCEDURE:ua,NODE_RESOURCE:pa}=squared.base.lib.enumeration;class ga extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=true,this.options={displayLabel:false}}beforeBaseLayout(){this.cacheProcessing.each(e=>{if(e.inputElement&&e.hasProcedure(ua.ACCESSIBILITY)){const t=e.attributes["aria-describedby"];if(t){const i=this.cacheProcessing.find(e=>e.elementId===t);if(i){const t=i.textContent.trim();if(""!==t)e.data(B.KEY_NAME,"titleString",t)}}switch(e.containerName){case"INPUT_RADIO":case"INPUT_CHECKBOX":if(!e.rightAligned&&!e.centerAligned){const t=e.elementId;[e.nextSibling,e.previousSibling].some(i=>{if((null==i?void 0:i.pageFlow)&&!i.visibleStyle.backgroundImage&&i.visible){let a=false;if(t&&t===i.toElementString("htmlFor"))a=true;else if(i.textElement){const t=i.actualParent;if("LABEL"===t.tagName)t.renderAs=e,a=true;else if(i.plainText)a=true}if(a){if(i.labelFor=e,!this.options.displayLabel)i.hide();return true}}return false})}break;case"INPUT_IMAGE":if(e.hasResource(pa.IMAGE_SOURCE))e.data(B.KEY_NAME,"embedded",[e]);break;case"BUTTON":if(e.length){const t=e.extract(e=>!e.textElement);if(t.length&&e.hasResource(pa.IMAGE_SOURCE))e.data(B.KEY_NAME,"embedded",t);e.clear()}break}}})}}const ma=squared.lib,ya=squared.base.lib,{formatPX:ba}=ma.css,{createElement:Ta}=ma.dom,{maxArray:Sa,truncate:Ea}=ma.math,{safeNestedArray:Aa}=ma.util,{APP_SECTION:wa,BOX_STANDARD:xa,NODE_ALIGNMENT:va,NODE_PROCEDURE:_a,NODE_RESOURCE:Na,NODE_TEMPLATE:Ra}=ya.enumeration,Ia=ya.constant.EXT_NAME.COLUMN;class Ca extends squared.base.extensions.Column{processNode(e,t){return super.processNode(e,t),e.containerType=i.CONSTRAINT,e.addAlign(4),{complete:true,subscribe:true}}postBaseLayout(e){const t=e.data(Ia,"mainData");if(t){const a=this.application,{columnCount:n,columnGap:r,columnWidth:s,columnRule:l,columnSized:c,boxWidth:h,rows:f,multiline:d}=t,{borderLeftWidth:u,borderLeftColor:p,borderLeftStyle:g}=l,m=e.parseUnit(u),y="none"!==g&&m>0,b=()=>{const t=a.createNode({parent:e,append:true});let n;if(t.inherit(e,"base"),t.containerName=e.containerName+"_COLUMNRULE",t.setControlType(o.LINE,i.LINE),t.exclude({resource:Na.ASSET,procedure:_a.ALL}),y)n=ba(m),t.cssApply({width:n,paddingLeft:n,borderLeftStyle:g,borderLeftWidth:u,borderLeftColor:p,lineHeight:"initial",boxSizing:"border-box",display:"inline-block"});else n=ba(r),t.cssApply({width:n,lineHeight:"initial",display:"inline-block"});return t.saveAsInitial(),t.setLayoutWidth(n),t.setLayoutHeight("0px"),t.render(e),t.positioned=true,t.renderExclude=false,a.addLayoutTemplate(e,t,{type:1,node:t,controlName:t.controlName}),t};let T;const S=f.length;for(let t=0;t<S;++t){const i=f[t],a=i.length;if(1===a){const e=i[0];if(0===t)e.anchor("top","parent"),e.anchorStyle("vertical",0,"packed");else T.anchor("bottomTop",e.documentId),e.anchor("topBottom",T.documentId);if(t===S-1)e.anchor("bottom","parent");else T=i[0];e.anchorParent("horizontal",e.rightAligned?1:e.centerAligned?.5:0),e.anchored=true,e.positioned=true}else{const o=[];let l=Math.min(a,c,n||1/0),f=0;if(l>1){const e=Math.floor(i.reduce((e,t)=>e+t.bounds.height,0)/l);let t=a>=l?Math.ceil(a/l):1,s=d||t>1&&(a%t!=0||!isNaN(n)&&t*n%a>1),c=s&&a%l!=0?a-l:1/0,u=0;for(let n=0,r=0,h=0;n<a;++n,++h){const f=i[n],d=h%t==0;if(r<l-1&&(d||c<=0||n>0&&(i[n-1].bounds.height>=e||o[r].length&&n<a-2&&a-n+1==l-r&&i[n-1].bounds.height>i[n+1].bounds.height))){if(n>0)if(++r,d)--c;else++c;if(h=0,!d&&c>0)s=true}const p=Aa(o,r);if(p.push(f),f.length)u+=Sa(f.map(e=>e.marginLeft+e.marginRight));if(n>0&&/^H\d/.test(f.tagName)){if(1===p.length&&n===a-2)--l,c=0;else if((h+1)%t==0&&a-n>l&&!i[n+1].multiline&&i[n+1].bounds.height<e)p.push(i[++n]),h=-1}else if(s&&a-n==l-r&&c!==1/0)t=1}f=l>1?Math.max((u+r*(l-1))/h/l,.01):0}else o.push(i);const u=o.length,p=new Array(u);let g=0;while(g<u){const t=o[g];t.forEach(t=>{t.app("layout_constraintWidth_percent",Ea(1/l-f,e.localSettings.floatPrecision)),t.setLayoutWidth("0px"),t.setBox(4,{reset:1}),t.exclude({section:wa.EXTENSION}),t.anchored=true,t.positioned=true}),p[g++]=t[0]}for(g=0;g<u;++g){const e=o[g];if(g<u-1&&e.length>1){const t=e[e.length-1];if(/^H\d/.test(t.tagName)){e.pop();const i=g+1;p[i]=t,o[i].unshift(t)}}}const m=new Array(u);g=0;while(g<u){const t=o[g],i=[];let a=0;const n=t.length;let r=0;while(r<n){const e=t[r++];if(e.naturalChild){const t=e.element.cloneNode(true);if(e.styleElement)if(e.imageOrSvgElement)t.style.height=ba(e.bounds.height);else{const i=e.textStyle;for(const e in i)t.style[e]=i[e]}i.push(t)}else a+=e.linear.height}if(i.length){const t=Ta(document.body,"div",{width:ba(s||e.box.width/l),visibility:"hidden"});i.forEach(e=>t.appendChild(e)),a+=t.getBoundingClientRect().height,document.body.removeChild(t)}m[g++]=a}let y,E,A=0;for(g=0;g<u;++g){const e=m[g];if(e>=A){const t=o[g];y=t[0],E=t[t.length-1],A=e}}for(g=0;g<u;++g){const e=p[g];if(0===g)e.anchor("left","parent"),e.anchorStyle("horizontal",0,"spread_inside");else{const t=p[g-1];e.anchor("leftRight",t.documentId),e.modifyBox(16,r)}if(g===u-1)e.anchor("right","parent");else e.anchor("rightLeft",p[g+1].documentId)}const w=[];for(g=0;g<u;++g){const e=o[g],i=e.length;for(let a=0;a<i;++a){const n=e[a];if(0===a){if(g>0){const e=b();e.anchor("top",y.documentId),e.anchor("left",o[g-1][0].documentId),e.anchor("right",n.documentId),w.push(e)}if(0===t)n.anchor("top","parent");else if(n!==y)n.anchor("top",y.documentId);else T.anchor("bottomTop",n.documentId),n.anchor("topBottom",T.documentId);n.anchorStyle("vertical",0,"packed"),n.setBox(2,{reset:1})}else{const t=e[a-1];t.anchor("bottomTop",n.documentId),n.anchor("topBottom",t.documentId),n.app("layout_constraintVertical_bias","0"),n.anchor("left",e[0].documentId)}if(a===i-1){if(t===S-1)n.anchor("bottom","parent");n.setBox(8,{reset:1})}}}const x=t<S-1?E.documentId:"parent";w.forEach(e=>e.anchor("bottom",x)),T=E}}}}}var La=squared.base.LayoutUI;const{lib:ka,base:Pa}=squared,Oa=Pa.lib,{formatPercent:Ma,formatPX:Da,isLength:Wa,isPercent:Ba}=ka.css,{maxArray:Xa,truncate:Ga}=ka.math,{CHAR:Ha}=ka.regex,{conditionArray:Va,flatArray:Fa,hasValue:za,isArray:Ua}=ka.util,{BOX_STANDARD:qa,NODE_ALIGNMENT:Ya,NODE_PROCEDURE:ja,NODE_RESOURCE:Ka}=Oa.enumeration,$a=Pa.extensions.CssGrid,Za=Oa.constant.EXT_NAME.CSS_GRID,Ja=/start|left|center|right|end/,Qa=/(start|left|baseline)$/,en=/(right|end)$/,tn=/start|end|center|baseline/,an=/(start|baseline)$/;function nn(e,t,i,a,n){const o=i?t.column:t.row,r=o.unit,s=r.length;let l=0;if(s){const e=i?"width":"height";for(let i=0;i<s;++i){const a=r[i];if($a.isPx(a))l+=parseFloat(a);else{let a=0;Va(t.rowData[i],e=>Ua(e),t=>a=Math.min(a,...t.map(t=>t.bounds[e]))),l+=a}}}else if(l=Xa(o.unitTotal),l<=0)return 0;if(l+=o.gap*(o.length-1),i)return l+=e.contentBox?e.borderLeftWidth+e.borderRightWidth:e.contentBoxWidth,(a>l?Math.min(a,e.actualWidth):e.actualWidth)-l;else return l+=e.contentBox?e.borderTopWidth+e.borderBottomWidth:e.contentBoxHeight,(n>l&&e.documentBody?Math.min(n,e.actualHeight):e.actualHeight)-l}function on(e,t){const i=Math.floor(t/e);return[i,t-i*e]}function rn(e,t,i,a,n,o,r,s,l,c){const h=a?t.column:t.row;if(i.startsWith("space")){const f=nn(e,t,a,l,c);if(f>0){const e=function(e,t){const i=e.rowData;if(t){const t=e.column.length,a=e.row.length,n=new Array(t);let o=0;while(o<t){const e=new Array(a);let t=0;while(t<a)e[t]=i[t++][o];n[o++]=e}return n}else return i}(t,a),l=h.length,c=new Set;switch(i){case"space-around":{const[t,i]=on(2*l,f);for(let a=0;a<l;++a)for(const o of new Set(Fa(e[a],1/0))){const e=(a>0&&a<=i?1:0)+t;if(!c.has(o))o.modifyBox(r,e),o.modifyBox(s,t),c.add(o);else o.cssPX(n,f/l,false,true)}break}case"space-between":if(l>1){const[t,i]=on(l-1,f);for(let o=0;o<l;++o)for(const r of new Set(Fa(e[o],1/0)))if(o<l-1){const e=t+(o<i?1:0);if(!c.has(r))r.modifyBox(s,e),c.add(r);else r.cssPX(n,e,false,true)}else{if(parseInt(r.android(a?"layout_columnSpan":"layout_rowSpan"))>1){const e=t+(i>0?Math.max(i-1,1):0);if(r.cssPX(n,e,false,true),c.has(r))r.modifyBox(s,-e,false)}}}else return;break;case"space-evenly":{const[t,i]=on(l+1,f);for(let a=0;a<l;++a)for(const l of new Set(Fa(e[a],1/0))){let e=t+(a<i?1:0);if(!c.has(l)){if(o)e/=2,l.modifyBox(r,e),l.modifyBox(s,e);else{if(0===a)l.modifyBox(r,t);l.modifyBox(s,e)}c.add(l)}else l.cssPX(n,e,false,true)}break}}}}else if(!o){let n=nn(e,t,a,l,c);if(n>0)switch(i){case"center":if(n/=2,a)e.modifyBox(256,Math.floor(n));else e.modifyBox(32,Math.floor(n)),e.modifyBox(128,Math.ceil(n));break;case"right":if(!a)break;case"end":case"flex-end":e.modifyBox(a?256:32,n);break}}}function sn(e,t,i,a){let n,o,r,s;if(i.every(e=>$a.isPx(e))){let e=a;i.forEach(t=>e+=parseFloat(t));const r=Da(e);if(t)n=r;else o=r}else if(i.every(e=>$a.isFr(e))){let a=0;i.forEach(e=>a+=parseFloat(e));const l=Ga(a,e.localSettings.floatPrecision);if(t)n="0px",r=l;else o="0px",s=l}else if(i.every(e=>Ba(e))){const r=Ma((i.reduce((e,t)=>e+parseFloat(t),0)+a/(t?e.actualWidth:e.actualHeight))/100);if(t)n=r;else o=r}else if(t)n="wrap_content";else o="wrap_content";return[n,o,r,s]}function ln(e,t){const i=e.unit,a=i.length;if(a&&i.every(e=>"auto"===e))e.unit=new Array(a).fill(t?"1fr":"")}function cn(e){const t=e.actualParent;if(null==t?void 0:t.gridElement){const i=t.data(Za,"mainData"),a=e.data(Za,"cellData");if(i&&a){const e=i.column.unit,{columnStart:t,columnSpan:n}=a;let o=false,r=0;while(r<n){const i=e[t+r++];if($a.isFr(i)||Ba(i))o=true;else if("auto"===i){o=false;break}}return o}}else if(e.hasFlex("row")&&e.flexbox.grow>0)return true;return false}function hn(e,t){const{gap:i,length:a,unit:n}=e;let o=0,r=0;for(const e of n)if($a.isPx(e))o+=parseFloat(e);else if(Ba(e))r+=parseFloat(e);else if($a.isFr(e))return 0;const s=Math.ceil(o+(a-1)*i);if(r>0)return r+s/t*100;else if(o>0)return s<t?-1:0;return 0}const fn=e=>"space-between"===e?"match_parent":"wrap_content";class dn extends squared.base.extensions.CssGrid{processNode(e,t){let a,n,o;if($a.isJustified(e)||$a.isAligned(e)){if(a=this.controller.createNodeWrapper(e,t,{containerType:i.CONSTRAINT,resource:Ka.ASSET}),a.inherit(e,"styleMap","boxStyle"),e.resetBox(30,a),e.resetBox(480,a),e.data(Za,"unsetContentBox",true),$a.isJustified(e))e.setLayoutWidth(fn(e.css("justifyContent")));else if(e.hasPX("width",false))e.setLayoutWidth("match_parent");else a.setLayoutWidth(e.blockStatic?"match_parent":"wrap_content");if($a.isAligned(e))e.setLayoutHeight(fn(e.css("alignContent")));else if(e.hasPX("height",false))e.setLayoutHeight("match_parent");else a.setLayoutHeight("wrap_content");n=a,o=this.application.renderNode(new La(t,a,i.CONSTRAINT,4096,a.children))}super.processNode(e,t);const r=e.data(Za,"mainData");if(r){const{column:s,row:l}=r,c=s.unit,h=s.length,f=La.create({parent:a||t,node:e,containerType:i.GRID,alignmentType:4,children:e.children,rowCount:l.length,columnCount:h});if(!e.originalRoot&&!e.hasWidth&&0===r.rowSpanMultiple.length&&c.length===h&&c.every(e=>$a.isFr(e))&&(e=>e.ascend({condition:cn,error:e=>e.hasWidth}).length>0)(e)){const t=r.rowData,a=t.length,n=new Array(a);let o=true;e:{let e=0;while(e<a){const i=[],a=t[e],r=a.length;let s=0;while(s<r){const e=a[s++];if(1===(null==e?void 0:e.length))i.push(e[0]);else{o=false;break e}}n[e++]=i}}if(o)s.frTotal=c.reduce((e,t)=>e+parseFloat(t),0),l.frTotal=l.unit.reduce((e,t)=>e+($a.isFr(t)?parseFloat(t):0),0),e.setLayoutWidth("match_parent"),e.lockAttr("android","layout_width"),e.data(Za,"constraintData",n),f.setContainerType(i.CONSTRAINT)}if(f.containerType===i.GRID)ln(s,true),ln(l,false);return{parent:a,renderAs:n,outputAs:o,outerParent:a,output:this.application.renderNode(f),include:true,complete:true}}}processChild(e,t){var a;const n=t.data(Za,"mainData"),r=e.data(Za,"cellData");let s,l;if(n&&r){const{alignContent:c,column:h,row:f}=n,d=e.has("alignSelf")?e.css("alignSelf"):n.alignItems,u=e.has("justifySelf")?e.css("justifySelf"):n.justifyItems,p=t.layoutConstraint,g=(i,a,o)=>{const[s,l,c,d]=a?[h,r.columnStart,r.columnSpan,"minWidth"]:[f,r.rowStart,r.rowSpan,"minHeight"],{unit:u,unitMin:g}=s;let m=0,y=0,b=0,T=0,S=false,E=false,A=0,w=0;while(A<c){const r=l+A++,h=g[r];if(""!==h)b+=t.parseUnit(h,a?"width":"height");let f=u[r];if(!za(f)){const e=s.auto;if(e[w]){if(f=e[w],e[w+1])++w}else continue}if("auto"===f||"max-content"===f){if(E=true,c<u.length&&(!t.hasPX(o)||u.some(e=>Wa(e))||"max-content"===f)){m=e.bounds[o],y=0,T=0;break}else if(a){m=0,y=0,T=-1;break}}else if("min-content"===f){if(!i.hasPX(o)){if(a)i.setLayoutWidth("wrap_content",false);else i.setLayoutHeight("wrap_content",false);break}}else if($a.isFr(f)){if(a||t.hasHeight){if(-1===T)T=0;T+=parseFloat(f),y=m}else T=0,y+=n.minCellHeight*parseFloat(f);m=0}else if(Ba(f)){if(-1===T)T=0;T+=parseFloat(f)/100,y=m,m=0}else{const e=i.parseUnit(f,a?"width":"height");if(0===y)m+=e;else y+=e}if(e.textElement&&Ha.UNITZERO.test(h))S=true}if(c>1){const e=(c-1)*s.gap;if(m>0&&0===y)m+=e;else if(y>0)y+=e;if(b>0)b+=e}if(b>0)if(s.autoFill&&0===m&&1===(a?f.length:h.length))m=Math.max(e.actualWidth,b),T=0;else y=b;if(y>0&&!i.hasPX(d))i.css(d,Da(y),true);if(p){if(a){if(!i.hasPX("width",false))i.app("layout_constraintWidth_percent",Ga(T/h.frTotal,i.localSettings.floatPrecision)),i.setLayoutWidth("0px");if(0===l)i.anchor("left","parent"),i.anchorStyle("horizontal",0,"spread");else{const e=i.innerMostWrapped.previousSibling;if(e)e.anchor("rightLeft",i.documentId),i.anchor("leftRight",e.anchorTarget.documentId)}if(l+c===h.length)i.anchor("right","parent");i.positioned=true}else if(!i.hasPX("height",false))if(T>0)if(1===f.length)i.setLayoutHeight("match_parent");else i.app("layout_constraintHeight_percent",Ga(T/f.frTotal,i.localSettings.floatPrecision)),i.setLayoutHeight("0px");else if(m>0){if(i.contentBox)m-=i.contentBoxHeight;i.css(E?"minHeight":"height",Da(m),true)}}else{i.android(a?"layout_column":"layout_row",l.toString()),i.android(a?"layout_columnSpan":"layout_rowSpan",c.toString());let n=a&&h.flexible;if(0!==T){if(!i.hasPX(o))if(a){if(r.columnSpan===h.length)i.setLayoutWidth("match_parent");else i.setLayoutWidth("0px"),i.android("layout_columnWeight",-1===T?"0.01":Ga(T,e.localSettings.floatPrecision)),i.mergeGravity("layout_gravity","fill_horizontal");n=false}else if(r.rowSpan===f.length)i.setLayoutHeight("match_parent");else i.setLayoutHeight("0px"),i.android("layout_rowWeight",Ga(T,e.localSettings.floatPrecision)),i.mergeGravity("layout_gravity","fill_vertical")}else if(m>0){const e=a?"maxWidth":"maxHeight";if(S&&!i.hasPX(e))i.css(e,Da(m),true),i.mergeGravity("layout_gravity",a?"fill_horizontal":"fill_vertical");else if(!i.hasPX(o)){if(i.contentBox)m-=a?i.contentBoxWidth:i.contentBoxHeight;if(E&&!t.hasPX(e))if(i.css(d,Da(m),true),a)i.setLayoutWidth("wrap_content");else i.setLayoutHeight("wrap_content");else i.css(o,Da(m),true)}}else if(0===u.length&&!i.hasPX(o))if(a)i.setLayoutWidth("match_parent",false);else i.setLayoutHeight("wrap_content",false);if(n)i.android("layout_columnWeight","0")}return[l,c]};if(tn.test(d)||Ja.test(u)||p){s=this.application.createNode({parent:t,innerWrap:e}),s.containerName=e.containerName,s.setControlType(o.FRAME,i.FRAME),s.inherit(e,"base","initial"),s.exclude({resource:Ka.BOX_STYLE|Ka.ASSET,procedure:ja.CUSTOMIZATION}),s.resetBox(30),s.resetBox(480),s.render(t),e.transferBox(30,s);let a=true;if(Qa.test(u))e.mergeGravity("layout_gravity","left");else if(en.test(u))e.mergeGravity("layout_gravity","right");else if("center"===u)e.mergeGravity("layout_gravity","center_horizontal");else a=false;if(!e.hasWidth)e.setLayoutWidth(a?"wrap_content":"match_parent",false);if(an.test(d))e.mergeGravity("layout_gravity","top");else if(d.endsWith("end"))e.mergeGravity("layout_gravity","bottom");else if("center"===d)e.mergeGravity("layout_gravity","center_vertical");else if(!e.hasHeight)e.setLayoutHeight("match_parent",false);l=this.application.renderNode(new La(t,s,i.FRAME,4096,s.children))}else e.mergeGravity("layout_gravity","top");const m=s||e;if(g(m,true,"width"),m!==e||e.hasPX("maxHeight"))m.mergeGravity("layout_gravity","fill");else if(!m.hasPX("width"))m.mergeGravity("layout_gravity","fill_horizontal");const[y,b]=g(m,false,"height");if("normal"===c&&!t.hasPX("height")&&!e.hasPX("minHeight")&&(!f.unit[y]||"auto"===f.unit[y])&&Math.floor(e.bounds.height)>(null===(a=e.data(Za,"boundsData"))||void 0===a?void 0:a.height)&&function(e,t,i,a){if(1===i&&t.rowSpanMultiple[a]){const n=t.rowData,o=n.length;for(const t of Fa(n[a],1/0))if(t!==e){const e=t.data(Za,"cellData");if(e&&e.rowSpan>i&&(0===a||e.rowSpan<o))return true}}return false}(e,n,b,y))m.css("minHeight",Da(e.box.height));else if(!(m.hasPX("height")||m.hasPX("maxHeight")||1===f.length&&c.startsWith("space")&&!tn.test(n.alignItems)))m.mergeGravity("layout_gravity","fill_vertical")}return{parent:s,renderAs:s,outputAs:l}}postBaseLayout(e){const t=e.data(Za,"mainData");if(t){const i=this.controller,{alignContent:a,children:n,column:o,emptyRows:r,justifyContent:s,row:l,rowDirection:c,rowData:h}=t,f=true===e.data(Za,"unsetContentBox"),u=n[n.length-1].id;if($a.isJustified(e)){switch(rn(e,t,s,true,"width",f,16,4,i.userSettings.resolutionScreenWidth-e.bounds.left,0),s){case"center":case"space-around":case"space-evenly":if(f)e.anchorParent("horizontal",.5,"",true);break;case"end":case"flex-end":if(f)e.anchorParent("horizontal",1,"",true);break;default:if(1===t.column.length)e.setLayoutWidth("match_parent");break}if(f)if(o.unit.some(e=>$a.isFr(e)))e.setLayoutWidth("match_parent")}else{const t=o.length;if(e.blockStatic||e.hasWidth){const a=hn(o,e.actualWidth);if(0!==a&&a<100){if(a>0)i.addAfterOutsideTemplate(u,i.renderSpace({width:Ma((100-a)/100),height:"match_parent",rowSpan:l.length,android:{layout_row:"0",layout_column:t.toString(),layout_columnWeight:o.flexible?"0.01":""}}),false);e.android("columnCount",(t+1).toString())}}if(f)if(e.contentBoxWidth>0&&e.hasPX("width",false))e.anchorParent("horizontal",.5,"",true);else if(1===t)e.setLayoutWidth("match_parent");else e.setLayoutWidth("wrap_content",false)}if($a.isAligned(e)){if(rn(e,t,a,false,"height",f,2,8,0,this.controller.userSettings.resolutionScreenHeight),f)switch(a){case"center":case"space-around":case"space-evenly":e.anchorParent("vertical",.5,"",true);break;case"end":case"flex-end":e.anchorParent("vertical",1,"",true);break}}else{if(e.hasHeight){const t=hn(l,e.actualHeight);if(0!==t&&t<100){const a=l.length;if(t>0)i.addAfterOutsideTemplate(u,i.renderSpace({width:"match_parent",height:Ma((100-t)/100),columnSpan:o.length,android:{layout_row:a.toString(),layout_column:"0",layout_rowWeight:l.flexible?"0.01":""}}),false);e.android("rowCount",(a+1).toString())}}if(f)if(e.contentBoxHeight>0&&e.hasPX("height",false))e.anchorParent("vertical",.5,"",true);else e.setLayoutHeight("wrap_content",false)}const p=e.data(Za,"constraintData");if(p){const{gap:t,length:a}=o,n=p.length,r=new Array(n-1);let s=1,l=0;while(s<n)r[l++]=i.addBarrier(p[s++],"top");for(s=0;s<n;++s){const c=p[s],h=r[s-1],f=r[s];let d;for(l=0;l<a;++l){const r=c[l];if(r){if(0===s)r.anchor("top","parent"),r.anchor("bottomTop",f),r.anchorStyle("vertical",0,"packed");else{if(s===n-1)r.anchor("bottom","parent");else r.anchor("bottomTop",f);r.anchor("topBottom",h)}if(l===a-1)r.anchor("right","parent");else r.modifyBox(4,-t);if(d)d.anchor("rightLeft",r.documentId),r.anchor("leftRight",d.documentId);else r.anchor("left","parent"),r.anchorStyle("horizontal",0,"packed");r.anchored=true,r.positioned=true,d=r}else if(d){const t={width:"0px",height:"wrap_content",android:{},app:{layout_constraintTop_toTopOf:0===s?"parent":"",layout_constraintTop_toBottomOf:h,layout_constraintBottom_toTopOf:s<a-1?f:"",layout_constraintBottom_toBottomOf:s===a-1?"parent":"",layout_constraintStart_toEndOf:d.anchorTarget.documentId,layout_constraintEnd_toEndOf:"parent",layout_constraintVertical_bias:0===s?"0":"",layout_constraintVertical_chainStyle:0===s?"packed":"",layout_constraintWidth_percent:(o.unit.slice(l,a).reduce((e,t)=>e+parseFloat(t),0)/o.frTotal).toString()}};i.addAfterInsideTemplate(e.id,i.renderSpace(t),false),d.anchor("rightLeft",t.documentId);break}}}}else{const{flexible:t,gap:a,unit:n}=c?o:l,s=n.length;let f=-1,p=0;const g=(a,n,o,r,s="wrap_content",l="",c=0)=>{if(-1!==f){const h=o.slice(f,f+p);let g,m,y="",b="",T="",S="",E=1,A=1;if(n)g=a.toString(),m=f.toString(),b=s,T=t?"0.01":"",S=l,A=p;else g=f.toString(),m=a.toString(),S=t?"0.01":"",T=l,y=s,E=p;if(h.length===o.length){if(n)y="match_parent",T="";else b="match_parent",S="";r=0}else{const[t,i,a,o]=sn(e,n,h,r*(h.length-1));if(t)y=t;if(i)b=i;if(a)T=a;if(o)S=o}i.addAfterOutsideTemplate(u,i.renderSpace({width:y,height:b,rowSpan:E,columnSpan:A,android:{[n?e.localizeString(d.MARGIN_RIGHT):"bottom"]:r>0&&f+p<o.length?"@dimen/"+B.insertStoredAsset("dimens",`${e.controlId}_cssgrid_${n?"column":"row"}_gap`,Da(r)):"",[n?"bottom":e.localizeString(d.MARGIN_RIGHT)]:c>0?"@dimen/"+B.insertStoredAsset("dimens",`${e.controlId}_cssgrid_${n?"row":"column"}_gap`,Da(c)):"",layout_row:g,layout_column:m,layout_rowWeight:S,layout_columnWeight:T,layout_gravity:"fill"}}),$a.isPx(y)||$a.isPx(b)),f=-1}p=0};let m=Math.max(h.length,1);for(let e=0;e<m;++e)if(void 0===r[e]){const t=h[e];for(let i=0;i<s;++i)if(t[i])g(e,c,n,a);else{if(-1===f)f=i;++p}g(e,c,n,a)}m=r.length;for(let t=0;t<m;++t){const i=r[t];if(i){const a=i.length;for(let n=0;n<a;++n){const a=i[n];if(a>0){f=n;const{unit:i,gap:r}=c?l:o,{unit:s,gap:h}=!c?l:o,d=sn(e,!c,[i[n]],0);p=a===1/0?s.length:1,g(t,c,s,h,d[c?1:0],d[c?3:2],t<m-1?r:0)}}}}}}}postOptimize(e){var t;const i=e.data(Za,"mainData");if(i)if(e.blockStatic&&!e.hasPX("minWidth",false)&&false===(null===(t=e.actualParent)||void 0===t?void 0:t.layoutElement)){const{gap:t,length:a,unit:n}=i.column;let o=t*(a-1);for(const e of n)if($a.isPx(e))o+=parseFloat(e);else return;if(o>e.width)if(e.android("minWidth",Da(o)),!e.flexibleWidth&&!e.blockWidth)e.setLayoutWidth("wrap_content")}}}class un extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}init(e){if(this.included(e))this.application.rootElements.add(e);return false}}var pn=squared.base.LayoutUI;const{lib:gn,base:mn}=squared,yn=mn.lib,{isLength:bn}=gn.css,{truncate:Tn}=gn.math,{capitalize:Sn,sameArray:En,withinRange:An}=gn.util,{BOX_STANDARD:wn,NODE_ALIGNMENT:xn}=yn.enumeration,vn=mn.NodeUI,_n=yn.constant.EXT_NAME.FLEXBOX,Nn={orientation:"horizontal",orientationInverse:"vertical",WHL:"width",HWL:"height",LT:"left",TL:"top",RB:"right",BR:"bottom",LRTB:"leftRight",RLBT:"rightLeft"},Rn={orientation:"vertical",orientationInverse:"horizontal",WHL:"height",HWL:"width",LT:"top",TL:"left",RB:"bottom",BR:"right",LRTB:"topBottom",RLBT:"bottomTop"};function In(e,t,i){const a="width"===i,n=a?"hasWidth":"hasHeight";let o=e[n]||a&&e.blockStatic&&An(e.parseWidth(e.css("maxWidth")),e.box.width),r=0,s=0;const l=t.length;let c=0;while(c<l){const e=t[c++];if(o)if(a){if(e.innerMostWrapped.autoMargin.horizontal){o=false;break}}else if(e.innerMostWrapped.autoMargin.vertical){o=false;break}r+=e.flexbox.grow}if(l>1&&(a||o)){const a=[],r=[];let h,f=0,d=0,u=NaN;c=0;while(c<l){const e=t[c++],{alignSelf:l,basis:p,shrink:g,grow:m}=e.flexbox,y=e.bounds[i];let b=false;if(m>0||1!==g){const t=e.parseUnit("auto"===p?e.css(i):p,i);if(t>0){let i=false;if(y<t){if(isNaN(u)||g<u)u=g,i=true,s=1}else if(isNaN(u)||m>u)u=m,i=true,s=2;if(i)h=e,f=t,d=y;a.push({item:e,basis:t,dimension:y,shrink:g,grow:m});continue}else if(m>0)b=true}else if(bn(p)){a.push({item:e,basis:Math.min(y,e.parseUnit(p,i)),dimension:y,shrink:g,grow:m}),e.flexbox.basis="auto";continue}if("auto"===l&&(o&&!e[n]||b))r.push(e)}if(s){if(a.length>1)a.forEach(e=>{const{basis:t,item:i}=e;if(i===h||t===f&&(1===s&&u===e.shrink||2===s&&u===e.grow))i.flexbox.grow=1;else if(t>0)i.flexbox.grow=e.dimension/t/(d/f)*t/f});r.forEach(t=>On(e,t,i))}}if(a&&0===s){c=0;while(c<l){if(t[c++].find(t=>t.multiline&&0===t.ascend({condition:e=>e[n],including:e}).length,{cascade:true})){t.forEach(t=>On(e,t,i));break}}}return r}function Cn(e){const t=e.length;let i=0;while(i<t){const t=e[i++];if(t.textElement&&t.baseline)return t}return vn.baseline(e)}function Ln(e,t,i){if(!i)e.setLayoutWidth(t);else e.setLayoutHeight(t)}function kn(e){while(e){if(e.layoutFrame)return e.innerWrapped;e=e.innerWrapped}}function Pn(e,t,i,a,n){if(0===e[i])if(e.app(a,Tn(n,e.localSettings.floatPrecision)),t)e.setLayoutWidth("0px");else e.setLayoutHeight("0px")}const On=(e,t,i)=>t.flexbox.basis=t.bounds[i]/e.box[i]*100+"%";class Mn extends squared.base.extensions.Flexbox{processNode(e,t){super.processNode(e,t);const a=e.data(_n,"mainData"),{column:n,row:o,rowCount:r,columnCount:s}=a;if(o&&1===r||n&&1===s)return e.containerType=i.CONSTRAINT,e.addAlign(4),e.addAlign(n?16:8),a.wrap=false,{include:true,complete:true};else{const a=o&&e.hasHeight||n&&e.hasWidth||e.some(e=>!e.pageFlow)?i.CONSTRAINT:i.LINEAR;return{output:this.application.renderNode(pn.create({parent:t,node:e,containerType:a,alignmentType:4|(n?8:16),itemCount:e.length,rowCount:r,columnCount:s})),include:true,complete:true}}}processChild(e,t){if(e.hasAlign(128))return{output:this.application.renderNode(new pn(t,e,i.CONSTRAINT,4,e.children)),complete:true,subscribe:true};else{const a=e.autoMargin;if(a.horizontal||a.vertical&&t.hasHeight){const n=t.data(_n,"mainData");if(n){const o=n.children.findIndex(t=>t===e);if(-1!==o){const r=this.controller.createNodeWrapper(e,t);if(r.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},true),r.saveAsInitial(true),r.setCacheValue("flexbox",e.flexbox),n.children[o]=r,a.horizontal&&!e.hasWidth)e.setLayoutWidth("wrap_content");return{parent:r,renderAs:r,outputAs:this.application.renderNode(new pn(t,r,i.FRAME,4096,r.children))}}}}}}postBaseLayout(e){const t=e.data(_n,"mainData");if(t){const i=this.controller,{row:a,column:n,reverse:o,wrap:r,wrapReverse:s,alignContent:l,justifyContent:c,children:h}=t,f=e.hasPX("height",false)||e.percentHeight>0?e.linear.bottom:0,d=[],u=[],p=[];let g=0;if(r){let t;if(e.each(e=>{if(e.hasAlign(128)){const i=e.renderChildren.filter(e=>e.pageFlow);if(i.length){if(a)e.setLayoutWidth("match_parent"),d.push(i);else{if(e.setLayoutHeight("match_parent"),t){const i=t.length;let a=t[0],n=1;while(n<i){const e=t[n++];if(e.linear.right>a.linear.right)a=e}if(s){const t=e.linear.left-a.actualRect("right");if(t>0)e.modifyBox(16,t)}e.constraint.horizontal=true}u.push(i),t=i}p.push(e)}}}),e.layoutLinear){if(s&&n)e.mergeGravity("gravity","right")}else if(p.length)if(a)u.push(p);else d.push(p)}else if(a){if(o)h.reverse();d[0]=h}else{if(o)h.reverse();u[0]=h}const m=(t,a)=>{const h=t.length;if(0===h)return;const{orientation:d,orientationInverse:u,WHL:m,HWL:y,LT:b,TL:T,RB:S,BR:E,LRTB:A,RLBT:w}=a?Nn:Rn,[x,v]=a?[e.hasHeight,e.hasWidth]:[e.hasWidth,e.hasHeight],_=`layout_constraint${Sn(d)}_weight`;for(let N=0;N<h;++N){const R=t[N],I=R.length,C=R[0],L=R[I-1],k=R===p,P=!k&&R.every(e=>0===e.flexbox.grow),O=P&&("space-between"===c||"space-around"===c&&I>1),M=[];let D,W=0,B=0,X=true,G=null;if(C.anchor(b,"parent"),L.anchor(S,"parent"),k)if(D=false,v){let e="spread",t=0;switch(l){case"left":case"right":case"flex-end":t=1;case"baseline":case"start":case"end":case"flex-start":e="packed",X=false;break}C.anchorStyle(d,t,e)}else C.anchorStyle(d,0,"packed");else if(D=a||v,B=1-In(e,R,m),I>1){let e=0;if(R.forEach(t=>{const i=(t.data(_n,"boundsData")||t.bounds)[y];if(0===e)W=i,++e;else if(i===W)++e;else if(i>W)W=i,e=1}),e===I)W=NaN}for(let e=0;e<I;++e){const t=R[e],i=R[e-1],n=R[e+1];if(n)t.anchor(w,n.documentId);if(i)t.anchor(A,i.documentId);if(k){if(X&&I>1&&v)Pn(t,a,m,_,1);t.anchor(T,"parent")}else{const o=kn(t),c=t.innerMostWrapped.autoMargin;if(a){if(c.horizontal)if(o){if(o.mergeGravity("layout_gravity",c.leftRight?"center_horizontal":t.localizeString(c.left?"right":"left")),B>0)t.flexbox.basis="0%",M.push(t)}else if(!c.leftRight)if(c.left){if(i)t.anchorDelete(A)}else if(n)t.anchorDelete(w)}else if(c.vertical)if(o){if(o.mergeGravity("layout_gravity",c.topBottom?"center_vertical":t.localizeString(c.top?"bottom":"top")),B>0)t.flexbox.basis="0%",M.push(t)}else if(!c.topBottom)if(c.top){if(i)t.anchorDelete(A)}else if(n)t.anchorDelete(w);switch(t.flexbox.alignSelf){case"start":case"flex-start":t.anchor(T,"parent");break;case"end":case"flex-end":t.anchor(E,"parent");break;case"baseline":if(a){if(null===G)G=Cn(R);if(G)if(G!==t)t.anchor("baseline",G.documentId);else t.anchorParent(u,0)}break;case"center":if(t.anchorParent(u,.5),!a&&t.textElement)t.mergeGravity("gravity","center");break;default:{const i=kn(t);switch(l){case"center":if(h%2==1&&N===Math.floor(h/2))t.anchorParent(u);else if(N<h/2)t.anchor(E,"parent");else if(N>=h/2)t.anchor(T,"parent");break;case"space-evenly":case"space-around":if(i)i.mergeGravity("layout_gravity",a?"center_vertical":"center_horizontal");else t.anchorParent(u);break;case"space-between":if(O&&2===I)t.anchorDelete(0===e?w:A);if(0===N)if(i)i.mergeGravity("layout_gravity",s?E:T);else t.anchor(s?E:T,"parent");else if(h>2&&N<h-1)if(i)i.mergeGravity("layout_gravity",a?"center_vertical":"center_horizontal");else t.anchorParent(u);else if(i)i.mergeGravity("layout_gravity",s?T:E);else t.anchor(s?T:E,"parent");break;default:if(t.anchorParent(u),!o||!t.innerMostWrapped.autoMargin[u])t.anchorStyle(u,s?1:0);if(0===t[y])if(!a&&t.blockStatic)Ln(t,"match_parent",a);else if(isNaN(W))if(!a&&!r&&t.length||x&&"normal"===l)Ln(t,x?"0px":"match_parent",a);else Ln(t,"wrap_content",a);else if(1===I)if(!a)Ln(t,x?"0px":"match_parent",a);else Ln(t,"wrap_content",a);else if((t.naturalElement?(t.data(_n,"boundsData")||t.bounds)[y]:1/0)<W){if(Ln(t,t.flexElement&&t.css("flexDirection").startsWith(a?"row":"column")?"match_parent":"0px",a),o&&!o.autoMargin[d])Ln(o,"match_parent",a)}else if(x)Ln(t,"0px",a);else Ln(t,"wrap_content",a),t.lockAttr("android","layout_"+y);break}break}}if(yt.setFlexDimension(t,m),!t.innerMostWrapped.has("flexGrow"))D=false;if(f>0&&N===h-1){if(t.linear.bottom-f>0)g=Math.max(t.linear.bottom-f,g);t.setBox(8,{reset:1})}}t.anchored=true,t.positioned=true}if(!k){if(D)R.forEach(e=>Pn(e,a,m,_,e.flexbox.grow));else if(B>0)M.forEach(e=>{const t=e.innerMostWrapped.autoMargin;let i=1;if(a){if(t.leftRight)i=2}else if(t.topBottom)i=2;Pn(e,a,m,_,Math.max(e.flexbox.grow,B*i/M.length))});if(g>0)e.modifyBox(8,g);if(a||n){let t=false;if(P)switch(c){case"normal":if(n){C.anchorStyle(d,o?1:0,"packed");continue}break;case"left":if(!a)break;case"start":case"flex-start":C.anchorStyle(d,o?1:0,"packed");continue;case"center":if(I>1){C.anchorStyle(d,.5,"packed");continue}t=true;break;case"right":if(!a)break;case"end":case"flex-end":C.anchorStyle(d,1,"packed");continue;case"space-between":if(1===I){L.anchorDelete(S);continue}break;case"space-evenly":if(I>1){C.anchorStyle(d,0,"spread");continue}t=true;break;case"space-around":if(I>1){C.constraint[d]=false,L.constraint[d]=false,i.addGuideline(C,e,{orientation:d,percent:true}),i.addGuideline(L,e,{orientation:d,percent:true,opposing:true}),C.anchorStyle(d,0,"spread_inside");continue}t=true;break}if(O||!r&&R.some(e=>""!==e.app(_))&&!En(R,e=>e.app(_)))C.anchorStyle(d,0,"spread_inside",false);else if(!t)C.anchorStyle(d,o?1:0,"packed",false)}}}};m(d,true),m(u,false)}}}var Dn=squared.base.LayoutUI;const Wn=squared.lib,Bn=squared.base.lib,{formatPX:Xn}=Wn.css,{withinRange:Gn}=Wn.util,{BOX_STANDARD:Hn,NODE_ALIGNMENT:Vn}=Bn.enumeration,Fn=squared.base.extensions.Grid,zn=Bn.constant.EXT_NAME.GRID;class Un extends squared.base.extensions.Grid{processNode(e,t){super.processNode(e,t);const a=e.data(zn,"columnCount");if(a)return{output:this.application.renderNode(Dn.create({parent:t,node:e,containerType:i.GRID,alignmentType:256,children:e.children,columnCount:a})),include:true,complete:true}}processChild(e,t){var i;const a=e.data(zn,"cellData");if(a){const n=null===(i=a.siblings)||void 0===i?void 0:i.slice(0);let o;if(n){const i=this.controller;n.unshift(e),o=i.processLayoutHorizontal(new Dn(t,i.createNodeGroup(e,n,{parent:t,delegate:true,cascade:true}),0,0,n)),function(e,t){const i=Fn.createDataCellAttribute();t.forEach(e=>{const t=e.data(zn,"cellData");if(t){if(t.cellStart)i.cellStart=true;if(t.cellEnd)i.cellEnd=true;if(t.rowEnd)i.rowEnd=true;if(t.rowStart)i.rowStart=true;e.data(zn,"cellData",null)}}),e.data(zn,"cellData",i)}(e=o.node,n)}if(a.rowSpan>1)e.android("layout_rowSpan",a.rowSpan.toString());if(a.columnSpan>1)e.android("layout_columnSpan",a.columnSpan.toString());if("table-cell"===e.display)e.mergeGravity("layout_gravity","fill");if(o)return{parent:o.node,renderAs:o.node,outputAs:this.application.renderNode(o)}}}postConstraints(e){if("collapse"!==e.css("borderCollapse")){const t=e.data(zn,"columnCount");if(t){let i=0,a=0,n=0,o=0;e.renderEach(r=>{const s=r.data(zn,"cellData");if(s){const l=r.actualParent;if(false===(null==l?void 0:l.visible)){const c=0===l.getBox(2)[0]?l.marginTop:0,h=0===l.getBox(8)[0]?l.marginBottom:0;if(s.cellStart)i=c+l.paddingTop;if(s.rowStart)o=Math.max(l.marginLeft+l.paddingLeft,o);if(s.rowEnd){const i=h+l.paddingBottom+(s.cellEnd?0:c+l.paddingTop);if(i>0)if(s.cellEnd)n=i;else{const a=this.controller;a.addAfterOutsideTemplate(r.id,a.renderSpace({width:"match_parent",height:"@dimen/"+B.insertStoredAsset("dimens",e.controlId+"_grid_space",Xn(i)),columnSpan:t,android:{}}),false)}a=Math.max(l.marginRight+l.paddingRight,a)}}}}),e.modifyBox(32,i),e.modifyBox(64,a),e.modifyBox(128,n),e.modifyBox(256,o)}}if(!e.hasWidth){let t=-1/0;if(e.renderEach(e=>{if(e.inlineFlow||!e.blockStatic)t=Math.max(t,e.linear.right)}),Gn(e.box.right,t))e.setLayoutWidth("wrap_content")}}}var qn=squared.base.LayoutUI;const Yn=squared.lib,jn=squared.base.lib,{formatPX:Kn,getBackgroundPosition:$n}=Yn.css,{convertInt:Zn}=Yn.util,{STRING_SPACE:Jn}=Yn.xml,{BOX_STANDARD:Qn,NODE_ALIGNMENT:eo,NODE_TEMPLATE:to}=jn.enumeration,io=jn.constant.EXT_NAME.LIST;class ao extends squared.base.extensions.List{processNode(e,t){const a=new qn(t,e,0,0,e.children);if(!a.unknownAligned||a.singleRowAligned){if(super.processNode(e,t),a.linearY)a.rowCount=e.length,a.columnCount=e.some(e=>"inside"===e.css("listStylePosition"))?3:2,a.setContainerType(i.GRID,16);else if(a.linearX||a.singleRowAligned)a.rowCount=1,a.columnCount=a.length,a.setContainerType(i.LINEAR,8);else return;return{output:this.application.renderNode(a),complete:true,include:true}}}processChild(e,t){const a=e.data(io,"mainData");if(a){const n=this.application,r=this.controller,s=t.firstStaticChild===e,l=e.marginTop;let c,h,f=a.ordinal||"",d=e.marginLeft,u=0,p=0,g=false,m=NaN;if(e.setBox(16,{reset:1}),t.layoutGrid)p=Zn(t.android("columnCount"))||1,g=true;else if(s)g=true;if(g)if(t.paddingLeft>0)d+=t.paddingLeft;else d+=t.marginLeft;if(0===e.length)c=r.createNodeWrapper(e,t,Object.assign({},r.containerTypeVertical)),e.resetBox(10,c);else c=e;if(""===f)h=e.find(e=>"left"===e.float&&e.marginLeft<0&&Math.abs(e.marginLeft)<=e.documentParent.marginLeft);if(h){if(3===p)e.android("layout_columnSpan","2");if(!h.hasWidth)if(d+=h.marginLeft,d>0)h.android("minWidth",Kn(d));h.parent=t,h.setControlType(o.TEXT,i.INLINE),h.setBox(16,{reset:1}),h.render(t);const a=new qn(t,h);if(h.inlineText||0===h.length)a.setContainerType(i.TEXT);else{if(a.singleRowAligned)a.setContainerType(i.RELATIVE,8);else a.setContainerType(i.CONSTRAINT,2);a.retain(h.children)}n.addLayoutTemplate(t,h,n.renderNode(a))}else{let r,s="right",l=0,y=0,b=0;if(""!==a.imageSrc){const i=this.resource;if(a.imagePosition){if(({top:y,left:b}=$n(a.imagePosition,e.actualDimension,{fontSize:e.fontSize,imageDimension:i.getImage(a.imageSrc),screenDimension:e.localSettings.screenDimension})),e.marginLeft<0)m=e.marginLeft+(t.paddingLeft>0?t.paddingLeft:t.marginLeft);else g=false,u=e.marginLeft;d=e.paddingLeft-b,e.setBox(256,{reset:1}),s=""}r=i.addImageSrc(a.imageSrc)}const T=ae();if(h=n.createNode({parent:t}),h.childIndex=e.childIndex,h.containerName=e.containerName+"_ORDINAL",h.inherit(e,"textStyle"),""!==f&&!f.endsWith("."))h.setCacheValue("fontSize",.75*h.fontSize);if("right"===s)if(r)l=Math.max(d/6,4),d-=l;else if(""!==f)f+=Jn.repeat(1===f.length?3:2);if(3===p)c.android("layout_columnSpan","2");if("DT"===e.tagName&&!r)c.android("layout_columnSpan",p.toString());else{if(r)h.setControlType(o.IMAGE,i.IMAGE),Object.assign(T.android,{src:"@drawable/"+r,scaleType:"right"===s?"fitEnd":"fitStart",baselineAlignBottom:g?"true":""});else if(""!==f){if(h.textContent=f,h.inlineText=true,h.setControlType(o.TEXT,i.TEXT),"DFN"===e.tagName)d+=8,h.modifyBox(64,8)}else h.setControlType(o.SPACE,i.SPACE),h.renderExclude=false,e.setBox(256,{reset:1});const{paddingTop:a,lineHeight:c}=e;if(h.cssApply({minWidth:d>0?Kn(d):"",marginLeft:u>0?Kn(u):"",paddingTop:a>0&&0===e.getBox(32)[0]?Kn(a):"",paddingRight:l>0?Kn(l):"",lineHeight:c>0?Kn(c):""}),h.apply(T),h.modifyBox(256,2),h.cssTry("display","block"))h.setBounds(),h.cssFinally("display");if(h.saveAsInitial(),""!==s)h.mergeGravity("gravity",e.localizeString(s));if(0!==y)h.modifyBox(2,y);if(0!==b)h.modifyBox(16,b);h.render(t),n.addLayoutTemplate(t,h,{type:1,node:h,controlName:h.controlName})}}if(0!==l)h.modifyBox(2,l),h.companion=c,this.subscribers.add(h);if(h.positioned=true,g){if(isNaN(m)||m<=0)t.setBox(t.paddingLeft>0?256:16,{reset:1});if(m<0)t.modifyBox(16,m)}if(p>0)c.setLayoutWidth("0px"),c.android("layout_columnWeight","1");if(e!==c)return{parent:c,renderAs:c,outputAs:n.renderNode(new qn(t,c,i.LINEAR,18,c.children)),subscribe:true}}}postConstraints(e){const t=!e.naturalChild&&e.companion;if(t){const[i,a]=t.getBox(2);if(0===i)e.modifyBox(2,a-e.getBox(2)[1],false);else e.setBox(2,{adjustment:0})}}}const{BOX_STANDARD:no}=squared.base.lib.enumeration;class oo extends squared.base.extensions.Relative{is(e){if(e.inlineStatic||e.imageOrSvgElement)switch(e.verticalAlign){case"sub":case"super":return true}return super.is(e)}postOptimize(e){if(!e.baselineAltered)switch(e.verticalAlign){case"sub":if(!e.outerMostWrapper.renderParent.layoutHorizontal)e.modifyBox(8,-1*Math.floor(e.baselineHeight*this.controller.localSettings.deviations.subscriptBottomOffset));break;case"super":if(!e.outerMostWrapper.renderParent.layoutHorizontal)e.modifyBox(2,-1*Math.floor(e.baselineHeight*this.controller.localSettings.deviations.superscriptTopOffset));break}super.postOptimize(e)}}var ro=squared.base.LayoutUI;const{formatPX:so}=squared.lib.css,lo=squared.base.lib,{APP_SECTION:co,BOX_STANDARD:ho,NODE_ALIGNMENT:fo,NODE_PROCEDURE:uo,NODE_RESOURCE:po}=lo.enumeration,go=lo.constant.EXT_NAME.SPRITE;class mo extends squared.base.extensions.Sprite{processNode(e,t){const a=e.data(go,"mainData");if(a){const n=this.resource.addImageSrc(e.backgroundImage);if(""!==n){const{width:r,height:s}=a.image,{top:l,left:c}=a.position,h=this.application.createNode({parent:t,innerWrap:e});return h.inherit(e,"base","initial","styleMap"),h.setControlType(o.FRAME,i.FRAME),h.exclude({resource:po.ASSET,procedure:uo.CUSTOMIZATION,section:co.ALL}),e.setControlType(o.IMAGE,i.IMAGE),e.resetBox(30),e.resetBox(480),e.registerBox(2,h),e.registerBox(4,h),e.registerBox(8,h),e.registerBox(16,h),e.exclude({resource:po.FONT_STYLE|po.BOX_STYLE|po.BOX_SPACING}),e.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:r>0?so(r):"auto",height:s>0?so(s):"auto",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"transparent"}),e.unsetCache(),e.android("src","@drawable/"+n),e.android("layout_marginTop",so(l)),e.android(e.localizeString("layout_marginLeft"),so(c)),{renderAs:h,outputAs:this.application.renderNode(new ro(t,h,i.FRAME,4096,h.children)),parent:h,complete:true}}}}}const{convertCamelCase:yo}=squared.lib.util,{NODE_ALIGNMENT:bo,NODE_TEMPLATE:To}=squared.base.lib.enumeration;class So extends squared.base.ExtensionUI{constructor(e,t,i,a){super(e,t,i,a),this.require(n.EXTERNAL,true)}processNode(e,t){const a=te(e.dataset,yo(this.name,"."));if(a){const n=a.tag;if(n){e.setControlType(n,e.blockStatic?i.BLOCK:i.INLINE),e.render(t);const o=a.tagChild;if(o){const t=this.name;e.addAlign(4),e.each(e=>{if(e.styleElement)e.use=t,e.dataset.androidSubstituteTag=o})}return{output:{type:1,node:e,controlName:n},include:true}}}}postOptimize(e){e.apply(B.formatOptions(ae(this.options[e.elementId]),this.application.extensionManager.optionValueAsBoolean(n.RESOURCE_STRINGS,"numberResourceValue")))}}var Eo=squared.base.LayoutUI;const Ao=squared.lib,wo=squared.base.lib,{CSS_UNIT:xo,formatPX:vo}=Ao.css,{convertFloat:_o,convertInt:No,trimEnd:Ro}=Ao.util,{NODE_ALIGNMENT:Io}=wo.enumeration,Co=wo.constant.EXT_NAME.TABLE;function Lo(e){if(e.hasPX("height")&&e.height+e.contentBoxHeight<Math.floor(e.bounds.height)&&"top"!==e.css("verticalAlign"))e.setLayoutHeight("wrap_content")}class ko extends squared.base.extensions.Table{processNode(e,t){super.processNode(e,t);const a=e.data(Co,"mainData");let n=false;if(a.columnCount>1)n=a.expand,e.each(e=>{const t=e.data(Co,"cellData");if(t.flexible)e.android("layout_columnWeight",t.colSpan.toString()),e.setLayoutWidth("0px"),n=true;else{const{downsized:i,expand:a,percent:o}=t;if(a){if(o){const t=_o(o)/100;if(t>0)e.setLayoutWidth("0px"),e.android("layout_columnWeight",Ro(t.toPrecision(3),"0")),n=true}}else if(false===a)e.android("layout_columnWeight","0");if(i)if(t.exceed)e.setLayoutWidth("0px"),e.android("layout_columnWeight","0.01"),n=true;else if(e.hasPX("width")){const t=e.bounds.width;if(e.actualWidth<t)e.setLayoutWidth(vo(t))}}if("TD"===e.tagName)e.setSingleLine(true);Lo(e)});else e.each(e=>{if(e.has("width",{type:4}))e.setLayoutWidth("wrap_content"),n=true;Lo(e)});if(e.hasWidth){if(e.width<Math.floor(e.bounds.width))if(a.layoutFixed)e.android("width",vo(e.bounds.width));else{if(!e.hasPX("minWidth"))e.android("minWidth",vo(e.actualWidth));e.css("width","auto")}}else if(n)if((t.blockStatic||t.hasPX("width"))&&Math.ceil(e.bounds.width)>=t.box.width)e.setLayoutWidth("match_parent");else e.css("width",vo(e.actualWidth));if(e.hasHeight&&e.height<Math.floor(e.bounds.height)){if(!e.hasPX("minHeight"))e.android("minHeight",vo(e.actualHeight));e.css("height","auto")}return{output:this.application.renderNode(Eo.create({parent:t,node:e,containerType:i.GRID,alignmentType:4,children:e.children,rowCount:a.rowCount,columnCount:a.columnCount})),include:true,complete:true}}processChild(e,t){const i=e.data(Co,"cellData");if(i){const{rowSpan:a,colSpan:n,spaceSpan:o}=i;if(a>1)e.android("layout_rowSpan",a.toString());if(n>1)e.android("layout_columnSpan",n.toString());if(o){const t=this.controller;t.addAfterOutsideTemplate(e.id,t.renderSpace({width:"wrap_content",height:"wrap_content",columnSpan:o,android:{}}),false)}if(e.mergeGravity("layout_gravity","fill"),"hide"===t.css("empty-cells")&&0===e.naturalChildren.length&&""===e.textContent)e.hide({hidden:true})}}postOptimize(e){const t=No(e.layoutWidth);if(t>0){const i=e.bounds.width;if(i>t)e.setLayoutWidth(vo(i));if("auto"===e.cssInitial("width")&&e.renderChildren.every(e=>e.inlineWidth))e.renderEach(e=>{e.setLayoutWidth("0px"),e.android("layout_columnWeight","1")})}}}var Po=squared.base.LayoutUI;const{NODE_ALIGNMENT:Oo}=squared.base.lib.enumeration;class Mo extends squared.base.extensions.VerticalAlign{processNode(e,t){return super.processNode(e,t),{output:this.application.renderNode(new Po(t,e,i.RELATIVE,8,e.children)),subscribe:true}}}class Do extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=true}}var Wo=squared.base.LayoutUI;const Bo=squared.lib,{formatPX:Xo}=Bo.css,{hypotenuse:Go}=Bo.math,{withinRange:Ho}=Bo.util,{NODE_ALIGNMENT:Vo}=squared.base.lib.enumeration;class Fo extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:false}}is(e){return this.included(e.element)}condition(e){return e.length>0}processNode(e,t){return{output:this.application.renderNode(new Wo(t,e,i.CONSTRAINT,32,e.children))}}postBaseLayout(e){const t=this.controller,i=this.options.circlePosition,{left:a,top:n}=e.box;let o;if(e.each(e=>{const t=e.linear;if(Ho(t.left,a))e.anchorParent("horizontal",0);if(Ho(t.top,n))e.anchorParent("vertical",0);if(i)if(e.anchored)o=e;else{const{horizontal:t,vertical:i}=e.constraint;if(o){if(i&&!o.constraint.vertical)o=e}else if(i)o=e;else if(t)o=e}e.positioned=true}),i){if(!o)o=e.item(0);if(!o.anchored)t.addGuideline(o,e);const{x:i,y:a}=o.center;e.each(e=>{if(e!==o){const{x:t,y:n}=e.center,r=Math.abs(t-i),s=Math.abs(n-a),l=Math.round(Go(r,s));let c=Math.round(Math.atan(Math.min(r,s)/Math.max(r,s))*(180/Math.PI));if(n>a)if(t>i)if(r>s)c+=90;else c=180-c;else if(r>s)c=270-c;else c+=180;else if(n<a){if(i>t)if(r>s)c+=270;else c=360-c;else if(r>s)c=90-c}else c=t>i?90:270;e.app("layout_constraintCircle",o.documentId),e.app("layout_constraintCircleRadius",Xo(l)),e.app("layout_constraintCircleAngle",c.toString())}})}else e.each(i=>{if(!i.anchored)t.addGuideline(i,e)})}}var zo=squared.base.LayoutUI;const Uo=squared.base,{CSS_UNIT:qo,isLength:Yo}=squared.lib.css,{BOX_STANDARD:jo,NODE_ALIGNMENT:Ko,NODE_RESOURCE:$o,NODE_TEMPLATE:Zo}=Uo.lib.enumeration,Jo=Uo.extensions.CssGrid,Qo=$o.BOX_SPACING|$o.FONT_STYLE|$o.VALUE_STRING,er=e=>!e.blockStatic&&!e.hasPX("width")||e.has("width",{type:6,not:"100%"})&&"100%"!==e.css("minWidth")||e.has("maxWidth",{type:6,not:"100%"}),tr=e=>"100%"===e.css("height")||"100%"===e.css("minHeight"),ir=e=>e.marginTop>0||e.marginRight>0||e.marginBottom>0||e.marginLeft>0,ar=(e,t)=>t.visibleStyle.background&&(er(e)||!tr(t)||!tr(e)),nr=e=>"HTML"===e.tagName&&(e.contentBoxWidth>0||e.contentBoxHeight>0||ir(e)),or=(e,t,i,a,n,o,r)=>i&&a&&((!n||!o)&&(e.has("backgroundPositionX")||e.has("backgroundPositionY")||r&&(er(e)||!tr(t)||!tr(e)))||"fixed"===e.css("backgroundAttachment"));class rr extends squared.base.ExtensionUI{is(e){return e.documentBody}condition(e,t){const{backgroundColor:i,backgroundImage:a,backgroundRepeatX:n,backgroundRepeatY:o,borderWidth:r}=e.visibleStyle;return((e,t,i,a,n)=>(i||a)&&!ar(e,t)&&(n||e.gridElement&&(Jo.isJustified(e)||Jo.isAligned(e))))(e,t,i,a,r)||or(e,t,i,a,n,o,r)||((e,t)=>t&&ir(e))(e,a)||nr(t)}processNode(e,t){const a=this.controller,{backgroundColor:n,backgroundImage:o,visibleStyle:r}=e,{backgroundColor:s,backgroundImage:l,backgroundRepeatX:c,backgroundRepeatY:h,borderWidth:f}=r,d=or(e,t,s,l,c,h,f),u=e.hasHeight||true===e.actualParent.hasHeight;let p,g,m=t;const y=ar(e,t),b="fixed"===e.css("backgroundAttachment");if(""!==n){if(!(l&&c&&h)){if(p=a.createNodeWrapper(e,m,{resource:Qo}),p.css("backgroundColor",n),p.setCacheValue("backgroundColor",n),!y)p.setLayoutWidth("match_parent"),p.setLayoutHeight("match_parent");else if(!er(e))p.setLayoutWidth("match_parent");p.unsetCache("visibleStyle")}e.css("backgroundColor","transparent"),e.setCacheValue("backgroundColor",""),r.backgroundColor=false}if(""!==o&&(y||d||h||t.visibleStyle.background||ir(e))){if(p){if(d||b)p.setControlType(yt.getControlName(i.CONSTRAINT,e.api),i.CONSTRAINT),p.addAlign(16),p.render(m),this.application.addLayoutTemplate(m,p,{type:1,node:p,controlName:p.controlName}),g=p,m=p,p=a.createNodeWrapper(e,g,{resource:$o.BOX_SPACING})}else p=a.createNodeWrapper(e,m,{resource:Qo});p.setLayoutWidth("match_parent");const n=t.cssInitial("height"),s=t.cssInitial("minHeight");let l=e.css("backgroundSize");if(""===n&&""===s)p.setLayoutHeight(!y&&(b||!(d&&u)&&(h||e.has("backgroundSize")||e.css("backgroundPosition").split(" ").some(e=>Yo(e)&&parseInt(e)>0)))?"match_parent":"wrap_content");else{if("100%"!==n&&"100%"!==s){const e=t.toElementInt("offsetHeight");if(e<window.innerHeight)l=`auto ${e}px`}p.setLayoutHeight("match_parent")}if(p.cssApply({backgroundImage:o,backgroundSize:l,border:"0px none solid",borderRadius:"0px"}),p.cssApply(e.cssAsObject("backgroundRepeat","backgroundPositionX","backgroundPositionY","backgroundClip")),p.setCacheValue("backgroundImage",o),p.unsetCache("visibleStyle"),b)p.android("scrollbars","vertical");e.css("backgroundImage","none"),e.setCacheValue("backgroundImage",""),r.backgroundImage=false,r.backgroundRepeatX=false,r.backgroundRepeatY=false}if(nr(t)){if(!p)p=a.createNodeWrapper(e,m);p.unsafe("excludeResource",$o.FONT_STYLE|$o.VALUE_STRING),t.resetBox(30,p),t.resetBox(480,p),p.setLayoutWidth("match_parent",false),p.setLayoutHeight("wrap_content",false)}if(p)return r.background=r.borderWidth||r.backgroundImage||r.backgroundColor,{parent:p,parentAs:g,renderAs:p,outputAs:this.application.renderNode(new zo(g||t,p,i.CONSTRAINT,16,p.children)),remove:true};else return{remove:true}}}var sr=squared.base.LayoutUI;const{NODE_ALIGNMENT:lr}=squared.base.lib.enumeration;class cr extends squared.base.ExtensionUI{is(e){return!e.inputElement&&!e.support.maxDimension}condition(e,t){const i=e.hasPX("maxWidth")&&!t.layoutConstraint&&!t.layoutElement&&(t.layoutVertical||t.layoutFrame||e.blockStatic||e.onlyChild&&(t.blockStatic||t.hasWidth)),a=e.hasPX("maxHeight")&&(t.hasHeight||t.gridElement||t.tableElement);if(i||a)return e.data(n.DELEGATE_MAXWIDTHHEIGHT,"mainData",{maxWidth:i,maxHeight:a}),true;else return false}processNode(e,t){const a=e.data(n.DELEGATE_MAXWIDTHHEIGHT,"mainData");if(a){const n=this.controller.createNodeWrapper(e,t,{containerType:i.CONSTRAINT,alignmentType:64,resetMargin:true});if(a.maxWidth)if(e.setLayoutWidth("0px"),n.setLayoutWidth("match_parent"),t.layoutElement){const t=e.autoMargin;t.horizontal=false,t.left=false,t.right=false,t.leftRight=false}if(a.maxHeight)if(e.setLayoutHeight("0px"),n.setLayoutHeight("match_parent"),t.layoutElement){const t=e.autoMargin;if(t.vertical=false,t.top=false,t.bottom=false,t.topBottom=false,!a.maxHeight&&e.blockStatic&&!e.hasWidth)e.setLayoutWidth("match_parent",false)}return{parent:n,renderAs:n,outputAs:this.application.renderNode(new sr(t,n,n.containerType,4096,n.children))}}}}var hr=squared.base.LayoutUI;const{BOX_STANDARD:fr,NODE_ALIGNMENT:dr}=squared.base.lib.enumeration;function ur(e,t){if(e.pageFlow)return e===t.firstStaticChild&&e.inlineFlow&&!e.centerAligned&&!e.rightAligned&&e.marginLeft<0&&Math.abs(e.marginLeft)<=t.marginLeft+t.paddingLeft&&!t.some(e=>e.multiline);else return e.leftTopAxis&&(e.left<0||!e.hasPX("left")&&e.right<0)}class pr extends squared.base.ExtensionUI{is(e){return e.length>0&&!e.originalRoot&&"hidden"!==e.css("overflowX")}condition(e){return e.some(t=>ur(t,e))}processNode(e,t){const a=e.children.filter(t=>ur(t,e)),o=this.controller.createNodeWrapper(e,t,{children:a,containerType:i.CONSTRAINT});e.resetBox(10,o);let r,s=NaN,l=NaN;if(a.forEach(e=>{const t=e.linear;if(e.pageFlow){if(isNaN(s)||t.left<s)s=t.left;r=e}else if(e.hasPX("left")){if(e.left<0&&(isNaN(s)||t.left<s))s=t.left}else if(e.right<0&&(isNaN(l)||t.right>l))l=t.right}),!e.pageFlow){if(!isNaN(s)&&!e.has("left")){const t=e.linear.left-s;if(t>0)e.modifyBox(16,t)}if(!isNaN(l)&&!e.has("right")){const t=l-e.linear.right;if(t>0)e.modifyBox(4,t)}}else if(e.hasWidth)o.setLayoutWidth("wrap_content");return e.data(n.DELEGATE_NEGATIVEX,"mainData",{container:o,children:a,offsetLeft:e.marginLeft+e.paddingLeft,firstChild:r}),{parent:o,renderAs:o,outputAs:this.application.renderNode(new hr(t,o,o.containerType,4104,o.children)),subscribe:true}}postBaseLayout(e){const t=e.data(n.DELEGATE_NEGATIVEX,"mainData");if(t){let i=t.firstChild;if(i)i=i.ascend({excluding:e,attr:"outerWrapper"}).pop()||i,i.anchor("left","parent"),i.anchorStyle("horizontal",0),i.anchorParent("vertical",0),i.modifyBox(16,t.offsetLeft),yt.setConstraintDimension(i),i.positioned=true;t.children.forEach(t=>{if(t!==i)if(t.hasPX("left"))t.translateX(t.left),t.alignSibling("left",e.documentId),t.constraint.horizontal=true;else if(t.hasPX("right"))t.translateX(-t.right),t.alignSibling("right",e.documentId),t.constraint.horizontal=true}),e.anchorParent("horizontal",0),e.anchorParent("vertical",0),yt.setConstraintDimension(e),e.positioned=true}}beforeCascade(){for(const e of this.subscribers){const t=e.data(n.DELEGATE_NEGATIVEX,"mainData");if(t){const i=e.android("translationX"),a=e.android("translationY");if(""!==i||""!==a){const e=parseInt(i),n=parseInt(a);t.children.forEach(t=>{if(!isNaN(e))t.translateX(e);if(!isNaN(n))t.translateY(n)})}}}}}var gr=squared.base.LayoutUI;const{BOX_STANDARD:mr,NODE_ALIGNMENT:yr}=squared.base.lib.enumeration,br=(e,t)=>t.marginLeft<0&&(e.originalRoot||t.linear.left<Math.floor(e.box.left)),Tr=(e,t)=>t.marginTop<0&&(e.originalRoot||t.linear.top<Math.floor(e.box.top));class Sr extends squared.base.ExtensionUI{is(e){return e.length>0}condition(e){var t,i;const{documentBody:a,lastStaticChild:o}=e;let r=e.contentBoxWidth>0||e.contentBoxHeight>0||0!==e.marginTop||0!==e.marginRight||0!==e.marginBottom||0!==e.marginLeft,s=false,l=false;if(null===(t=e.firstStaticChild)||void 0===t?void 0:t.lineBreak)s=true,r=true;if((null==o?void 0:o.lineBreak)&&(null===(i=o.previousSibling)||void 0===i?void 0:i.blockStatic))r=true,l=true;if(!a&&!r)return false;const c=e.originalRoot,h=a&&e.positionStatic,f=new Set,d=e.paddingTop+(a?e.marginTop:0),u=e.paddingRight+(a?e.marginRight:0),p=e.paddingBottom+(a?e.marginBottom:0),g=e.paddingLeft+(a?e.marginLeft:0);let m=false,y=false;if(e.each(t=>{const i=c&&"fixed"===t.css("position");if(t.pageFlow||!r&&!i)return;const n=i&&t.autoPosition;if(t.hasPX("left")||n)if(a&&("100%"===t.css("width")||"100%"===t.css("minWidth")))f.add(t),m=true;else{const i=t.left;if((i>=0||c)&&i<g)f.add(t);else if(i<0&&e.marginLeft>0)f.add(t);else if(!t.hasPX("right")&&br(e,t))f.add(t)}else if(t.hasPX("right"))if(h)f.add(t),m=true;else{const i=t.right;if((i>=0||c)&&i<u)f.add(t);else if(i<0&&e.marginRight>0)f.add(t);else if(((e,t)=>t.marginRight<0&&(e.originalRoot||t.linear.right>Math.ceil(e.box.right)))(e,t))f.add(t)}else if(br(e,t))f.add(t);if(t.hasPX("top")||n)if(a&&("100%"===t.css("height")||"100%"===t.css("minHeight")))f.add(t),y=true;else{const i=t.top;if((i>=0||c)&&(i<d||s))f.add(t);else if(i<0&&e.marginTop>0)f.add(t);else if(!t.hasPX("bottom")&&Tr(e,t))f.add(t)}else if(t.hasPX("bottom"))if(h)f.add(t),y=true;else{const i=t.bottom;if((i>=0||c)&&(i<p||l))f.add(t);else if(i<0&&e.marginBottom>0)f.add(t);else if(((e,t)=>t.marginBottom<0&&(e.originalRoot||t.linear.bottom>Math.ceil(e.box.bottom)))(e,t))f.add(t)}else if(Tr(e,t))f.add(t)}),f.size)return e.data(n.DELEGATE_POSITIVEX,"mainData",{children:Array.from(f),right:m,bottom:y}),true;else return false}processNode(e,t){const a=e.data(n.DELEGATE_POSITIVEX,"mainData");if(a){const n=this.controller.createNodeWrapper(e,t,{children:a.children,resetMargin:!e.originalRoot&&!e.pageFlow||t.layoutGrid,cascade:true,inheritDataset:true});if(e.documentBody){if(a.right)n.setLayoutWidth("match_parent");if(a.bottom)n.setLayoutHeight("match_parent")}else if(!e.pageFlow){if(!e.hasPX("width")&&e.hasPX("left")&&e.hasPX("right"))e.setLayoutWidth("match_parent");if(!e.hasPX("height")&&e.hasPX("top")&&e.hasPX("bottom"))e.setLayoutHeight("match_parent")}return{parent:n,renderAs:n,outputAs:this.application.renderNode(new gr(t,n,i.CONSTRAINT,32,n.children)),subscribe:true}}}postBaseLayout(e){const t=e.data(n.DELEGATE_POSITIVEX,"mainData");if(t){const i=e.documentId;t.children.forEach(t=>{const a=!t.pageFlow&&(t.absoluteParent!==t.documentParent||"fixed"===t.css("position")||e.documentBody),n=t.outerMostWrapper;if(t.hasPX("left")){if(!a)t.translateX(t.left),t.alignSibling("left",i),t.constraint.horizontal=true;n.modifyBox(16,e.borderLeftWidth)}if(t.hasPX("right")){if(!a){if(t.translateX(-t.right),e.originalRoot)t.anchor("right","parent");else t.alignSibling("right",i);t.constraint.horizontal=true}n.modifyBox(4,e.borderRightWidth)}else if(t.marginLeft<0&&br(e,t))n.alignSibling("left",i),n.translateX(t.linear.left-e.bounds.left),n.modifyBox(16,e.borderLeftWidth),n.constraint.horizontal=true,t.setBox(16,{reset:1});if(t.hasPX("top")){if(!a)t.translateY(t.top),t.alignSibling("top",i),t.constraint.vertical=true;n.modifyBox(2,e.borderTopWidth)}if(t.hasPX("bottom")){if(!a){if(t.translateY(-t.bottom),e.originalRoot)t.anchor("bottom","parent");else t.alignSibling("bottom",i);t.constraint.vertical=true}n.modifyBox(8,e.borderBottomWidth)}else if(t.marginTop<0&&Tr(e,t))n.alignSibling("top",i),n.translateY(t.linear.top-e.bounds.top),n.modifyBox(2,e.borderTopWidth),n.constraint.vertical=true,t.setBox(2,{reset:1})})}}}var Er=squared.base.LayoutUI;const{CSS_UNIT:Ar}=squared.lib.css,{NODE_ALIGNMENT:wr}=squared.base.lib.enumeration;function xr(e){const t=e.percentWidth;return t>0&&t<1}function vr(e){const t=e.percentHeight;return t>0&&t<1}class _r extends squared.base.ExtensionUI{is(e){return e.pageFlow}condition(e,t){return(e=>!e.documentParent.layoutElement&&!e.display.startsWith("table"))(e)&&(xr(e)&&!t.layoutConstraint&&("100%"!==e.cssInitial("width")||e.has("maxWidth",{type:4,not:"100%"}))&&(e.originalRoot||e.hasPX("height")||(t.layoutVertical||e.onlyChild)&&(t.blockStatic||t.hasPX("width")))||vr(e)&&("100%"!==e.cssInitial("height")||e.has("maxHeight",{type:4,not:"100%"}))&&(e.originalRoot||t.hasHeight))}processNode(e,t){const a=this.controller.createNodeWrapper(e,t,{resetMargin:true});if(xr(e))a.setCacheValue("hasWidth",true),a.css("display","block"),a.setLayoutWidth("match_parent"),e.setLayoutWidth("100%"===e.cssInitial("width")&&!e.hasPX("maxWidth")?"match_parent":"0px");else a.setLayoutWidth("wrap_content");if(vr(e))a.setCacheValue("hasHeight",true),a.setLayoutHeight("match_parent"),e.setLayoutHeight("100%"===e.cssInitial("height")&&!e.hasPX("maxHeight")?"match_parent":"0px");else a.setLayoutHeight("wrap_content");return{parent:a,renderAs:a,outputAs:this.application.renderNode(new Er(t,a,i.CONSTRAINT,4096,a.children))}}}const Nr=squared.base,{getElementAsNode:Rr}=squared.lib.session,{NODE_ALIGNMENT:Ir,NODE_RESOURCE:Cr,NODE_TEMPLATE:Lr}=Nr.lib.enumeration,kr=Nr.NodeUI;function Pr(e,t,i){let a=false;const n=e.length;let o=0;while(o<n){const n=e[o++];if(n.toElementBoolean("checked"))n.android("checked","true");if(!a&&n.baseline&&n.parent===t&&t.layoutLinear&&(0===o||t.layoutHorizontal))t.android("baselineAlignedChildIndex",o.toString()),a=true;n.data(i,"siblings",e)}return a}const Or=e=>{var t;return(null===(t=e.name)||void 0===t?void 0:t.trim())||""};class Mr extends squared.base.ExtensionUI{is(e){return e.is(i.RADIO)}condition(e){return""!==Or(e.element)&&!e.data(this.name,"siblings")}processNode(e,t){var a,n;const r=Or(e.element),s=[],l=[];let c=-1,h=-1;t.each((t,a)=>{const n=t.renderAs;let o;if(n){if(n!==e)o=t;t=n}if(t.is(i.RADIO)&&!t.rendered&&Or(t.element)===r){if(s.push(t),-1===c)c=a;h=a}else if(!t.visible&&s.includes(t.labelFor))h=a;if(o)l.push(o)});let f=s.length;if(f>1){const a=kr.linearData(t.children.slice(c,h+1)).linearX,n=this.controller.createNodeGroup(e,s,{parent:t,delegate:true}),r=o.RADIOGROUP;if(n.setControlType(r,i.LINEAR),a)n.addAlign(136),n.android("orientation","horizontal");else n.addAlign(16),n.android("orientation","vertical");if(n.inherit(e,"alignment"),n.exclude({resource:Cr.ASSET}),n.render(t),!Pr(s,n,this.name))n.css("verticalAlign","middle"),n.setCacheValue("baseline",false),n.setCacheValue("verticalAlign","middle");return l.forEach(e=>e.hide({remove:true})),this.subscribers.add(n),{renderAs:n,outputAs:{type:1,node:n,controlName:r},parent:n,complete:true}}else{s.length=0;const t=Or(e.element),r=e.sessionId;if(document.querySelectorAll(`input[type=radio][name=${t}]`).forEach(e=>{const t=Rr(e,r);if(t)s.push(t)}),f=s.length,f>1&&s.includes(e)){const e=o.RADIOGROUP,t=new Map;let r=0;while(r<f){const i=s[r++].ascend({condition:e=>e.layoutLinear,error:t=>t.controlName===e,every:true});if(i.length)i.forEach(e=>t.set(e,(t.get(e)||0)+1));else{t.clear();break}}for(const[o,r]of t.entries())if(r===f){o.unsafe("controlName",e),o.containerType=i.RADIO;const t=null===(n=null===(a=o.renderParent)||void 0===a?void 0:a.renderTemplates)||void 0===n?void 0:n.find(e=>e.node===o);if(t)t.controlName=e;return void Pr(s,o,this.name)}}}}postBaseLayout(e){e.renderEach(t=>{if(t.naturalElement&&t.toElementBoolean("checked"))e.android("checkedButton",t.documentId)})}}const Dr=squared.lib,{formatPX:Wr}=Dr.css,{BOX_STANDARD:Br,NODE_RESOURCE:Xr,NODE_TEMPLATE:Gr}=squared.base.lib.enumeration;class Hr extends squared.base.ExtensionUI{is(e){return e.length>0}condition(e){return e.overflowX&&e.hasPX("width")||e.overflowY&&e.hasPX("height")&&e.hasHeight}processNode(e,t){const a=[],n=[],s=o.HORIZONTAL_SCROLL,l=e.api<29?o.VERTICAL_SCROLL:r.VERTICAL_SCROLL,c=[];let h=NaN;if(e.overflowX&&e.overflowY)a.push(s,l);else if(e.overflowX)a.push(s);else if(e.overflowY)a.push(l);if(a.includes(s)){h=e.actualWidth-e.contentBoxWidth;let t=true,i=0;if(e.each(e=>{if(e.textElement&&"nowrap"!==e.css("whiteSpace"))c.push(e);else{const t=e.actualWidth;if(t<=h)return;else if(t>i)i=t}t=false}),!t){if(i>h)h=i}else a.shift()}const f=a.length;if(f){for(let o=0;o<f;++o){const r=this.application.createNode({parent:t});if(0===o){if(r.inherit(e,"base","initial","styleMap"),!t.replaceTry({child:e,replaceWith:r}))return}else r.inherit(e,"base"),r.exclude({resource:Xr.BOX_STYLE});r.setControlType(a[o],i.BLOCK),r.exclude({resource:Xr.ASSET}),r.resetBox(480),r.childIndex=e.childIndex,n.push(r)}for(let i=0;i<f;++i){const a=n[i];switch(a.controlName){case l:e.setLayoutHeight("wrap_content"),a.setLayoutHeight(Wr(e.actualHeight)),a.android("scrollbars","vertical"),a.cssApply({width:1===f&&e.css("width")||"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case s:e.setLayoutWidth("wrap_content"),a.setLayoutWidth(Wr(e.actualWidth)),a.android("scrollbars","horizontal"),a.cssApply({height:1===f&&e.css("height")||"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"});break}if(0===i)a.render(t);else a.render(n[i-1]);a.unsetCache(),this.application.addLayoutTemplate(a.renderParent||t,a,{type:1,node:a,controlName:a.controlName})}c.forEach(e=>{if(e.textElement)e.css("maxWidth",Wr(h))});let o,r=true;do{if(o=n.pop(),r)t=o,o.innerWrapped=e,r=false;else o.innerWrapped=t}while(n.length);return e.exclude({resource:Xr.BOX_STYLE}),e.resetBox(30,o),e.parent=t,{parent:t}}}}var Vr={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},Fr={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","start","top","right","end","bottom","drawable","width","height","gravity"],">":{shape:Vr.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const zr={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},Ur={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":true,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:zr.path},"#":"include"}};var qr={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:zr.path},"#":"include"}};const Yr=squared.lib,jr=squared.base,{reduceRGBA:Kr}=Yr.color,{extractURL:$r,formatPercent:Zr,formatPX:Jr,getBackgroundPosition:Qr}=Yr.css,{truncate:es}=Yr.math,{CHAR:ts,XML:is}=Yr.regex,{delimitString:as,flatArray:ns,isEqual:os,objectMap:rs,resolvePath:ss}=Yr.util,{applyTemplate:ls}=Yr.xml,{BOX_STANDARD:cs,NODE_RESOURCE:hs}=jr.lib.enumeration,fs=jr.NodeUI;function ds(e,t=-1,i=false){const{style:a,color:n}=e,o=vs(e.width),r=_s(n);switch(a){case"solid":break;case"dotted":r.dashWidth=Jr(o),r.dashGap=r.dashWidth;break;case"dashed":{let e,t;switch(o){case 1:case 2:e=3*o,t=e-1;break;case 3:e=6,t=3;break;default:e=2*o,t=4;break}r.dashWidth=Jr(e),r.dashGap=Jr(t);break}case"inset":case"outset":case"groove":case"ridge":{const e=n.rgba;let r=1;if(1===o){if("inset"===a||"outset"===a)r=.5}else{const n=e.r===e.g&&e.g===e.b;let o=0;if("ridge"===a)i=!i,o+=.25;else if("groove"===a)o+=.25;else if(n){if("inset"===a)i=!i}else if("outset"===a)i=!i;if(i)switch(t){case 0:case 3:t=1;break;case 1:case 2:t=0;break}switch(t){case 0:case 3:if(n)r=.5+o;break;case 1:case 2:r=n?.75+o:-.75;break}}if(1!==r){const t=Kr(e,r,n.valueAsRGBA);if(t)return _s(t)}break}}return r}function us(e,t=-1,i=false,a=false){if(e){let n;if(ms(e.style)){const o=parseFloat(e.width);if(n=ds(e,t,!a),a)n.width=Jr(2*Math.ceil(o/2));else n.width=Jr(i?Math.ceil(o/2):vs(e.width))}else n=ds(e),n.width=Jr(vs(e.width));return n}}function ps(e){const[t,i,a,n]=e,o={};let r=false;if("0px"!==t)o.topLeftRadius=t,r=true;if("0px"!==i)o.topRightRadius=i,r=true;if("0px"!==a)o.bottomRightRadius=a,r=true;if("0px"!==n)o.bottomLeftRadius=n,r=true;return r?o:void 0}function gs(e){const t=Es(e,false);return""!==t?{color:t}:void 0}function ms(e,t=0){switch(e){case"groove":case"ridge":case"inset":case"outset":return 1!==t;default:return false}}function ys(e,t,i,a,n,o,r=0,s){const l=vs(t.width),c=Math.max(1,Math.floor(l/3)),h=r>0?Jr(r):"";let f="-"+Jr(c+r+1);e.push({top:i?h:f,right:a?h:f,bottom:n?h:f,left:o?h:f,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Jr(c)},ds(t)),corners:s}});const d=l-c+r,u=Jr(d);f="-"+Jr(d+1),e.push({top:i?u:f,right:a?u:f,bottom:n?u:f,left:o?u:f,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Jr(c)},ds(t)),corners:s}})}function bs(e,t,i){if(!e.includes(" ")&&t.includes(" "))return ts.LOWERCASE.test(e)?("initial"===e?i:e)+" 0px":i+" "+e;else if("initial"===e)return"0px";return e}function Ts(e,t=29,i,a){const{colorStops:n,type:o}=e,r=n.length;let s=t>=21;const l={type:o,positioning:s};switch(o){case"conic":{const t=e.center;if(l.type="sweep",s)l.centerX=(2*t.left).toString(),l.centerY=(2*t.top).toString();else l.centerX=Zr(t.leftAsPercent),l.centerY=Zr(t.topAsPercent);break}case"radial":{const{center:t,radius:i}=e;if(s)l.gradientRadius=i.toString(),l.centerX=t.left.toString(),l.centerY=t.top.toString();else l.gradientRadius=Jr(i),l.centerX=Zr(t.leftAsPercent),l.centerY=Zr(t.topAsPercent);break}case"linear":if(!s||i&&1===n[r-1].offset&&(2===r||3===r&&.5===n[1].offset))l.angle=(e.angle+90).toString(),l.positioning=false,s=false;else{const{angle:t,angleExtent:i,dimension:n}=e,{width:o,height:r}=n;let{x:s,y:c}=i;if(t<=90)c+=r,l.startX="0",l.startY=r.toString();else if(t<=180)l.startX="0",l.startY="0";else if(t<=270)s+=o,l.startX=o.toString(),l.startY="0";else s+=o,c+=r,l.startX=o.toString(),l.startY=r.toString();l.endX=es(s,a),l.endY=es(c,a)}break}if(s)l.item=Is(n);else if(l.startColor=Es(n[0].color),l.endColor=Es(n[r-1].color),r>2)l.centerColor=Es(n[Math.floor(r/2)].color);return l}function Ss(e,t=[],i=true,a,n,o){const r=[],s=[{"xmlns:android":f.android,item:r}],l=!i&&gs(e.backgroundColor);if(l&&!t.find(e=>!!e.gradient))r.push({shape:{"android:shape":"rectangle",solid:l,corners:n}});if(t.forEach(e=>{const t=e.gradient;r.push(t?{shape:{"android:shape":"rectangle",gradient:t,corners:n}}:e)}),a)r.push({top:o,right:o,left:o,bottom:o,shape:{"android:shape":"rectangle",stroke:a,corners:n}});return s}function Es(e,t=true){const i=B.addColor(e,t);return""!==i?"@color/"+i:""}function As(e,t){while(e.length<t)e=e.concat(e.slice(0));return e.length=t,e}function ws(e,t,i,a,n,o){const r=t[i];if(r){const t=vs(r.width);if("double"===r.style&&t>1)ys(e.item,r,0===i,1===i,2===i,3===i,n,a);else{const s=t>1&&Ns(r);if(s){const a="-"+Jr(t+n+1);e.item.push({top:0===i?"":a,right:1===i?"":a,bottom:2===i?"":a,left:3===i?"":a,shape:{"android:shape":"rectangle",stroke:us(r,i,s,true)}})}const l="-"+Jr((s?Math.ceil(t/2):t)+n+1);e.item.push({top:0===i?o:l,right:1===i?o:l,bottom:2===i?o:l,left:3===i?o:l,shape:{"android:shape":"rectangle",corners:a,stroke:us(r,i,s)}})}}}function xs(e,t){if(e!==t&&!t.hasResource(hs.BOX_SPACING)&&0===e.percentWidth)switch(e.cssInitial("maxWidth")){case"":case"auto":case"100%":{const e=t.renderChildren;if(1===e.length)t.removeTry({replaceWith:e[0]});break}}}const vs=e=>Math.round(parseFloat(e)),_s=e=>({color:Es(e),dashWidth:"",dashGap:""}),Ns=e=>"groove"===e.style||"ridge"===e.style||"double"===e.style&&vs(e.width)>1,Rs=(e,t)=>`${e}px ${t}px`;function Is(e,t){return rs(e,e=>({color:Es(e.color),offset:es(e.offset,t)}))}function Cs(e,t,i=0,a=0,n){if(n)i=es(i,n),a=es(a,n),e=es(i+e,n),t=es(a+t,n);else e+=i,t+=a;return`M${i},${a} ${e},${a} ${e},${t} ${i},${t} Z`}class Ls extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={drawOutlineAsInsetBorder:true},this.eventOnly=true}beforeParseDocument(){this._resourceSvgInstance=this.controller.localSettings.svg.enabled?this.application.builtInExtensions[n.RESOURCE_SVG]:void 0}afterResources(){const e=this.application.userSettings,t=this.options.drawOutlineAsInsetBorder;let i=false;const a=(e,t,a)=>{B.addTheme({name:e,parent:t,items:{"android:windowBackground":a,"android:windowFullscreen":"true","android:fitsSystemWindows":"true"}}),i=true},n=(t,n)=>{if(""!==n){const o="@drawable/"+B.insertStoredAsset("drawables",t.containerName.toLowerCase()+"_"+t.controlId,n);if(!i)if("HTML"===t.tagName)return void a(e.manifestThemeName,e.manifestParentThemeName,o);else{const i=t.innerMostWrapped;if(i.documentBody&&(""!==t.backgroundColor||t.visibleStyle.backgroundRepeatY))return a(e.manifestThemeName,e.manifestParentThemeName,o),void xs(i,t)}t.android("background",o,false)}};this.cacheProcessing.each(o=>{var r;const s=o.data(B.KEY_NAME,"boxStyle");if(s){if(o.inputElement){const e=o.companion;if("LABEL"===(null==e?void 0:e.tagName)&&!e.visible){const t=null===(r=e.data(B.KEY_NAME,"boxStyle"))||void 0===r?void 0:r.backgroundColor;if(t)s.backgroundColor=t}}const l=this.getDrawableImages(o,s),c=s.outline;let[h,f]=this.getDrawableBorder(s,void 0,l,t&&c?function(e){const t=vs(e.width);return 2===t&&"double"===e.style?3:t}(c):0);const d=void 0===h&&void 0===f;if(c&&(t||d)){const[e,t]=this.getDrawableBorder(s,c,d?l:void 0,void 0,!d);if(e){if(!h)h=e}else if(t)if(f)f[0].item=f[0].item.concat(t[0].item);else f=t}if(h)n(o,ls("shape",Vr,h));else if(f)n(o,ls("layer-list",Fr,f));else{const t=s.backgroundColor;if(t){const n=Es(t,false);if(""!==n){if(!i)if("HTML"===o.tagName)return void a(e.manifestThemeName,e.manifestParentThemeName,n);else{const t=o.innerMostWrapped;if(t.documentBody)return a(e.manifestThemeName,e.manifestParentThemeName,n),void xs(t,o)}const r=o.data(B.KEY_NAME,"fontStyle");if(r)r.backgroundColor=t;else o.android("background",n,false)}}}}})}getDrawableBorder(e,t,i,a=0,n=false){const o=new Array(4),r=new Array(4),s=!n?function(e){if(e){const t=e.length;if(1===t)return{radius:e[0]};else if(8===t){const t=new Array(4);let i=0,a=0;while(i<8)t[a++]=Jr((parseFloat(e[i++])+parseFloat(e[i++]))/2);return ps(t)}else return ps(e)}}(e.borderRadius):void 0,l=a>0?Jr(a):"";let c,h,d,u,p=true,g=true;if(t){h=t;for(let e=0;e<4;++e)o[e]=t,r[e]=true}else{o[0]=e.borderTop,o[1]=e.borderRight,o[2]=e.borderBottom,o[3]=e.borderLeft;for(let e=0;e<4;++e){const t=o[e];if(t){if(p&&h)if(p=os(h,t),!p)g=false;h=t,r[e]=true}else r[e]=false,g=false}}if(g)c=h;if(c&&!ms(c.style,vs(c.width))&&!("double"===c.style&&parseInt(c.width)>1)||!h&&(s||(null==i?void 0:i.length))){const t=c?us(c):false;if((null==i?void 0:i.length)||a>0||n)u=Ss(e,i,n,t,s,l);else d=function(e,t,i){return[{"xmlns:android":f.android,"android:shape":"rectangle",stroke:e,solid:t,corners:i}]}(t,!n&&gs(e.backgroundColor),s)}else if(h)if(u=Ss(e,i,n),p&&!ms(h.style)){const e=vs(h.width);if("double"===h.style&&e>1)ys(u[0].item,h,r[0],r[1],r[2],r[3],a,s);else{const t="-"+Jr(e+a+1);u[0].item.push({top:r[0]?l:t,right:r[1]?l:t,bottom:r[2]?l:t,left:r[3]?l:t,shape:{"android:shape":"rectangle",corners:s,stroke:us(h)}})}}else{const e=u[0];ws(e,o,0,s,a,l),ws(e,o,3,s,a,l),ws(e,o,2,s,a,l),ws(e,o,1,s,a,l)}return[d,u]}getDrawableImages(e,t){const a=t.backgroundImage,n=e.data(B.KEY_NAME,"embedded");if(a||n){const o=this.resource,r=e.localSettings.screenDimension,{bounds:c,fontSize:h}=e,{width:d,height:u}=c,p=[],g=[],m=[],y=[],b=[],T=t.backgroundPositionX.split(is.SEPARATOR),S=t.backgroundPositionY.split(is.SEPARATOR);let E=t.backgroundRepeat.split(is.SEPARATOR),A=t.backgroundSize.split(is.SEPARATOR),w=0;if(a){const i=this._resourceSvgInstance,n=a.length;E=As(E,n),A=As(A,n);let s=false;for(let l=0;l<n;++l){let n=a[l],c=false;if("string"==typeof n){if("initial"!==n){if(i){const[t,a]=i.createSvgElement(e,n);if(t&&a){const n=i.createSvgDrawable(e,a);if(""!==n){const t=e.data(B.KEY_NAME,"svgViewBox")||{width:a.width.baseVal.value,height:a.height.baseVal.value};if(!e.svgElement){let{width:e,height:i}=t;if(e>d||i>u){const t=e/d,a=i/u;if(t>a)if(t>1)e=d,i/=t;else i=u*(a/t);else if(a>1)i=u,e/=a;else e=d*(t/a)}t.width=e,t.height=i}g[w]=n,y[w]=t,m[w]=true,c=true}t.removeChild(a)}}if(!c){const e=$r(n);if(""!==e)if(e.startsWith("data:image/")){const t=o.getRawData(e);if(t){const{base64:e,filename:i}=t;if(e)g[w]=i.substring(0,i.lastIndexOf(".")),y[w]=t.width&&t.height?t:void 0,o.writeRawImage(i,e),c=true}}else{n=ss(e);const t=o.addImageSet({mdpi:n});if(g[w]=t,""!==t)y[w]=o.getImage(n),c=true}}}}else if(n.colorStops.length>1){const i=Ts(n,e.api,t.borderRadius);if(i)g[w]=i,y[w]=n.dimension,c=true}if(c){const t=T[l]||T[l-1],i=S[l]||S[l-1];b[w]=Qr(bs(t,i,"left")+" "+bs(i,t,"top"),e.actualDimension,{fontSize:h,imageDimension:y[w],imageSize:A[l],screenDimension:r}),++w}else E[l]=void 0,A[l]=void 0,s=true}if(s)E=ns(E),A=ns(A)}if(n){if(0===w)E.length=0,A.length=0;n.filter(e=>e.visible&&(e.imageElement||"INPUT_IMAGE"===e.containerName)).forEach(t=>{const i=t.element,a=o.addImageSrc(i);if(""!==a){const n=t.bounds;g[w]=a,E[w]="no-repeat",A[w]=Rs(t.actualWidth,t.actualHeight);const s=Qr("INPUT_IMAGE"===t.containerName?Rs(0,0):Rs(n.left-c.left+e.borderLeftWidth,n.top-c.top+e.borderTopWidth),e.actualDimension,{fontSize:h,imageDimension:n,screenDimension:r}),l=o.getImage(i.src);if(!e.hasPX("width")){const t=((null==l?void 0:l.width)||i.naturalWidth)+s.left-(e.paddingLeft+e.borderLeftWidth);if(t>0)e.modifyBox(256,t)}y[w]=l,b[w]=s,++w}})}const{backgroundClip:x,backgroundOrigin:v}=t,_=e.innerMostWrapped.documentBody;for(let t=w-1,a=0;t>=0;--t){const n=g[t],o={order:1/0};if("object"==typeof n&&!n.positioning){o.gravity="fill",o.gradient=n,o.order=a++,p.push(o);continue}const h=b[t],T=A[t],S=4===h.orientation.length;let w=y[t],N=NaN,R=NaN;if(w)if(!w.width||!w.height)w=void 0;else N=w.width,R=w.height;let I=0,C=0,L=0,k=0,P=NaN,O=NaN,M=NaN,D=NaN,W=false,X=false,G=0,H=0,V="",F="",z="",U="",q="",Y=0,j=E[t];if(j.includes(" ")){const[e,t]=j.split(" ");if("no-repeat"===e)j="no-repeat"===t?"no-repeat":"repeat-y";else if("no-repeat"===t)j="repeat-x";else j="repeat"}else if("space"===j||"round"===j)j="repeat";switch(j){case"repeat":V="repeat",F="repeat";break;case"repeat-x":V="repeat",F="disabled";break;case"repeat-y":V="disabled",F="repeat";break;default:V="disabled",F="disabled";break}switch(h.horizontal){case"left":case"0%":case"0px":if(z=e.localizeString("left"),S)D=0,W=true;break;case"center":case"50%":z="center_horizontal";break;case"right":case"100%":if(z=e.localizeString("right"),O=0,S)W=true;break;default:if(h.leftAsPercent<1)z="left",D=0,W=true;else z="right",O=0,W=true;break}switch(h.vertical){case"top":case"0%":case"0px":if(U="top",S)P=0,X=true;break;case"center":case"50%":U="center_vertical";break;case"bottom":case"100%":if(U="bottom",M=0,S)X=true;break;default:if(h.topAsPercent<1)U="top",P=0,X=true;else U="bottom",M=0,X=true;break}switch(T){case"auto":case"auto auto":case"initial":if("string"!=typeof n)q="fill";break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(e.ascend({condition:e=>e.hasPX("width"),startSelf:true}).length)z="",U="";case"contain":case"cover":case"round":if(V="",F="",q="fill",_){const t=e.visibleStyle;t.backgroundRepeat=true,t.backgroundRepeatY=true}break;default:if(""!==T)T.split(" ").forEach((t,i)=>{if("100%"===t)q=0===i?"fill_horizontal":as({value:q},"fill_vertical");else if("auto"!==t)if(0===i){if("repeat"!==V)G=e.parseWidth(t,false)}else if("repeat"!==F)H=e.parseHeight(t,false)});break}let K,$=true!==m[t],Z=e.is(i.IMAGE)||"string"!=typeof n,J=false,Q=false,ee=false,te=false,ie=true;if(w){let t=d,i=u;if("contain"!==T)if(!e.hasWidth){const a=window.innerWidth,n=r.width,o=()=>u*(t/d);if(d===a)if(a>=n)t=n,i=o();else({width:t,height:i}=fs.refitScreen(e,c));else if(a>=n)t=e.actualBoxWidth(d),i=o()}const a=N/t,n=R/i,o=()=>N*H/R,s=()=>R*G/N,l=()=>t*(a/n),f=()=>i*(n/a),p=(e,t)=>{if(V="",F="",q="",e)z="",U="";if(t)P=NaN,O=NaN,M=NaN,D=NaN,W=false,X=false;ie=false};switch(T){case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(R>=u){ee=true,te=true,H=u,Z=true;break}case"cover":{const o="cover"===T;if(p(o,!o),a<n)if(G=t,H=f(),H>u){const t=h.topAsPercent;if(0!==t)I=Math.round((u-H)*t);if(!e.hasPX("height"))e.css("height",Jr(u-e.contentBoxHeight));if(!W)q="center_horizontal|fill_horizontal"}else{if(H<u)G=t*u/H,H=u;if(!W)q="center_horizontal|fill"}else if(a>n){if(G=l(),H=i,G>d){if(e.hasWidth){const e=h.leftAsPercent;if(0!==e)k=Math.round((d-G)*e)}if(!X)q="center_vertical|fill_vertical"}else{if(G<d)G=d,H=i*d/G;if(!X)q="center_vertical|fill"}W=false}else q="fill";X=false;break}case"contain":if(p(true,true),a>n)H=f(),G=N<d?o():d,U="center_vertical",q="fill_horizontal";else if(a<n)G=l(),H=R<u?s():u,z="center_horizontal",q="fill_vertical";else q="fill";break;default:if(0===G&&H>0)G=o();if(0===H&&G>0)H=s();break}}if(x){const{top:t,right:i,left:a,bottom:n}=x;if(0===G)G=d;else G+=e.contentBoxWidth;if(0===H)H=u;else H+=e.contentBoxHeight;if(G-=a+i,H-=t+n,!isNaN(O))C+=i;else k+=a;if(!isNaN(M))L+=n;else I+=t;z="",U=""}else if(ie){if(v){if("repeat"!==V)if(!isNaN(O))C+=v.right;else k+=v.left;if("repeat"!==F)if(!isNaN(M))L+=v.bottom;else I+=v.top}if(!Z&&!_){if(0===G&&N>d){G=d-(W?Math.min(h.left,0):0);let t=true;if("repeat"===F&&""!==z){switch(z){case"start":case"left":if(C+=d-N,W){const e=h.left;if(e<0)Y=e;G=0,C-=e,t=false,z="right",F=""}else z="";D=NaN,O=0;break;case"center_horizontal":z+="|fill_vertical",F="";break;case"right":if(k+=d-N,W){const i=h.right;if(i<0)Y=i;G=0,k-=i,t=false,z=e.localizeString("left"),F=""}else z="";D=0,O=NaN;break}W=false,U=""}if(t)q=as({value:q,not:["fill"]},"fill_horizontal");if("disabled"!==V)V="";J=true}if(0===H&&R>u){H=u;let e=true;if("repeat"===V&&""!==U){switch(U){case"top":if(X){L+=u-R;const t=h.top;if(t<0)Y=t;H=0,L-=t,e=false,U="bottom",V="",P=NaN,M=0}break;case"center_vertical":U+="|fill_horizontal",V="";break;case"bottom":if(I+=u-R,X){const t=h.bottom;if(t<0)Y=t;H=0,I-=t,e=false,U="top"}else U="";V="",P=0,M=NaN;break}z="",X=false}if(e)q=as({value:q,not:["fill"]},"fill_vertical");if("disabled"!==F)F="";Q=true}}}switch(e.controlName){case s.TOOLBAR:case l.TOOLBAR:z="",U="",q="fill";break}if(!Z){if(0===G&&N<d&&"disabled"===V)G=N,ee=true;if(0===H&&R<u&&"disabled"===F)H=R,te=true;const t=z;if("repeat"===V){switch(U){case"top":if(!isNaN(P))V="";U="";break;case"bottom":if(G>0&&!ee)V="";else if(te)if(G=N,q=as({value:q,not:["fill"]},"fill_horizontal"),R>=N)V="";break}z=""}if("repeat"===F){switch(t){case"start":case"left":if(!isNaN(D))F="";z="";break;case"center_horizontal":if(e.renderChildren.length)F="";break;case"right":case"end":if(H>0&&!te)F="";else if(ee)if(H=R,q=as({value:q,not:["fill"]},"fill_vertical"),N>=R)F="";break}U=""}if(""!==z&&!J)q=as({value:q},z),z="";if(""!==U&&!Q)q=as({value:q},U),U=""}else if(0===G&&0===H&&"fill"===q)$=false;if("string"==typeof n)K="@drawable/"+n;else if(n.item){if(0===G)G=(null==w?void 0:w.width)||fs.refitScreen(e,e.actualDimension).width;if(0===H)H=(null==w?void 0:w.height)||fs.refitScreen(e,e.actualDimension).height;const i=B.insertStoredAsset("drawables",`${e.controlId}_gradient_${t+1}`,ls("vector",qr,[{"xmlns:android":f.android,"xmlns:aapt":f.aapt,"android:width":Jr(G),"android:height":Jr(H),"android:viewportWidth":G.toString(),"android:viewportHeight":H.toString(),path:{pathData:Cs(G,H),"aapt:attr":{name:"android:fillColor",gradient:n}}}]));if(""!==i)K="@drawable/"+i,o.order=a++;if("left"===z||"start"===z)z="";if("top"===U)U="";if("fill"!==q)if("repeat"===V&&"repeat"===F)q="fill";else if("repeat"===V)if("fill_vertical"===q)q="fill";else q="fill_horizontal";else if("repeat"===F)if("fill_horizontal"===q)q="fill";else q="fill_vertical"}const ae="center_horizontal"===z&&"center_vertical"===U?"center":as({value:z},U);if(K){if($&&(!Z&&(""!==q&&""!==ae||"repeat"===V||"repeat"===F||_)||ee||te)){let e="";if("disabled"===V&&"disabled"===F)e="disabled",V="",F="";else if("repeat"===V&&"repeat"===F)e="repeat",V="",F="";o.gravity=q,o.bitmap=[{src:K,gravity:ae,tileMode:e,tileModeX:V,tileModeY:F}]}else o.gravity=as({value:ae},q),o.drawable=K;if(o.drawable||o.bitmap||o.gradient){if(!isNaN(M)){if(X)L+=h.bottom;if(L+=M,0!==L)o.bottom=Jr(L);if(Y<0)o.top=Jr(Y)}else{if(X)I+=h.top;if(!isNaN(P))I+=P;if(0!==I)o.top=Jr(I);if(Y<0)o.bottom=Jr(Y)}if(!isNaN(O)){if(W)C+=h.right;if(C+=O,0!==C)o[e.localizeString("right")]=Jr(C);if(Y<0)o[e.localizeString("left")]=Jr(Y)}else{if(W)k+=h.left;if(!isNaN(D))k+=D;if(0!==k)o[e.localizeString("left")]=Jr(k);if(Y<0)o[e.localizeString("right")]=Jr(Y)}if(G>0)o.width=Jr(G);if(H>0)o.height=Jr(H);p.push(o)}}}return p.sort((e,t)=>{const i=e.order,a=t.order;if(i===a)return 0;else return i<a?-1:1})}}}const{capitalize:ks}=squared.lib.util;class Ps extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e){const t=this.application.viewModel;if(t){const i=this.controller,a=new Set;if(this.cache.each(e=>{if(e.styleElement&&e.visible)e.unsafe("namespaces").forEach(t=>{const i=te(e.dataset,"viewmodel"+ks(t));if(i){for(const a in i)e.attr(t,a,`@{${i[a]}}`,true);a.add(e)}})}),a.size)e.forEach(e=>{const n=e.node;for(const e of a)if(e.ascend({condition:e=>e===n,attr:"renderParent"}).length){const{import:o,variable:r}=t,{depth:s,id:l}=n,c="\t".repeat(s),h="\t".repeat(s+1),f="\t".repeat(s+2);let d=c+"<layout {#0}>\n"+h+"<data>\n";if(o)o.forEach(e=>d+=f+`<import type="${e}" />\n`);if(r)r.forEach(e=>d+=f+`<variable name="${e.name}" type="${e.type}" />\n`);d+=h+"</data>\n",i.addBeforeOutsideTemplate(l,d),i.addAfterOutsideTemplate(l,c+"</layout>\n"),n.depth=s-1,a.delete(e);break}})}}}const Os=squared.lib,{XML:Ms}=Os.regex,{convertUnderscore:Ds,fromLastIndexOf:Ws,safeNestedArray:Bs,safeNestedMap:Xs}=Os.util,Gs=B.STORED,Hs=/\dpx$/,Vs=/:(\w+)="(-?[\d.]+px)"/;function Fs(e,t,i){if(e.get(t)===i)return t;for(const[a,n]of e.entries())if(i===n&&a.startsWith(t))return a;return B.generateId("dimen",t)}function zs(e,t,i){const a=t.namespace(e);for(const n in a)if("text"!==n){const o=a[n];if(Hs.test(o))Bs(i,`${e},${n},${o}`).push(t)}}const Us=e=>Ws(e,".");class qs extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){const e=Gs.dimens,t={};this.cache.each(e=>{if(e.visible){const i=e.containerName.toLowerCase(),a=Xs(t,i);zs("android",e,a),zs("app",e,a)}});for(const i in t){const a=t[i];for(const t in a){const[n,o,r]=t.split(Ms.SEPARATOR),s=Fs(e,Us(i)+"_"+Ds(o),r);a[t].forEach(e=>e[n](o,"@dimen/"+s)),e.set(s,r)}}}afterFinalize(){if(this.controller.hasAppendProcessing()){const e=Gs.dimens;this.application.layouts.forEach(t=>{let i,a=t.content;while(null!==(i=Vs.exec(a))){const[t,n,o]=i;if("text"!==n){const i=Fs(e,"custom_"+Ds(n),o);a=a.replace(t,t.replace(o,"@dimen/"+i)),e.set(i,o)}}t.content=a})}}}const Ys=squared.lib,{XML:js}=Ys.regex,{capitalize:Ks,convertInt:$s,convertWord:Zs,safeNestedArray:Js,safeNestedMap:Qs,objectMap:el,spliceArray:tl,trimBoth:il}=Ys.util,{NODE_RESOURCE:al}=squared.base.lib.enumeration,nl=B.STORED,ol=/^(\w*?)(?:_(\d+))?$/,rl=/"/g,sl={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},ll={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},cl={"arial black":"sans-serif","ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},hl={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},fl={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'},dl=Object.keys(fl);function ul(e,t,i){const a=e.length;t.split(";").forEach(t=>{for(let n=0;n<a;++n){let o=e[n],r=-1,s="";for(const e in o)if(e===t){r=n,s=e,n=a;break}if(-1!==r){if(o=e[r],o[s]=o[s].filter(e=>!i.includes(e)),0===o[s].length)delete o[s];break}}})}class pl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:false},this.eventOnly=true}afterParseDocument(){const e=this.resource,t=this.options.disableFontAlias,i="dp"===e.userSettings.convertPixels,{fonts:a,styles:n}=nl,o={},r={};let s=[];this.cache.each(e=>{if(e.data(B.KEY_NAME,"fontStyle")&&e.hasResource(al.FONT_STYLE))Js(o,e.containerName).push(e)});for(const n in o){const l=[],c=o[n];s=s.concat(c),c.forEach(n=>{const{id:o,companion:r,api:s}=n,c=n.data(B.KEY_NAME,"fontStyle");let{fontFamily:h,fontStyle:f,fontWeight:d}=c;if("LABEL"===(null==r?void 0:r.tagName)&&!r.visible)n=r;h.replace(rl,"").split(js.SEPARATOR).some((i,o,r)=>{let l=i=il(i,"'").toLowerCase(),c="";if(!t&&cl[l])l=this.options.systemDefaultFont;if(s>=sl[l]||!t&&s>=sl[ll[l]])h=l;else if(f&&d){let t=false;if(e.getFont(i,f,d))t=true;else{const a=e.getFont(i,f);if(a)c=d,d=a.fontWeight.toString(),t=true;else if(o<r.length-1)return false;else h=this.options.systemDefaultFont}if(t){l=Zs(l);const e=a.get(l)||{};e[i+"|"+f+"|"+d]=hl[d]||d,a.set(l,e),h="@font/"+l}}else return false;if("normal"===f)f="";if(""!==c)d=c;else if("400"===d||n.api<26)d="";if(parseInt(d)>500)f+=(f?"|":"")+"bold";return true});const u={fontFamily:h,fontStyle:f,fontWeight:d,fontSize:c.fontSize,color:B.addColor(c.color),backgroundColor:B.addColor(c.backgroundColor)};for(let e=0;e<6;++e){const t=dl[e];let a=u[t];if(a){if(3===e&&i)a=Z(a,true);Js(Qs(l,e),fl[t]+a+'"').push(o)}}}),r[n]=l}const l={};for(const e in r){const t={};l[e]=t;const i=r[e].filter(e=>!!e).sort((e,t)=>{let i=0,a=0,n=0,o=0;for(const t in e){const a=e[t].length;i=Math.max(a,i),n+=a}for(const e in t){const i=t[e];if(i){const e=i.length;a=Math.max(e,a),o+=e}}if(i!==a)return i>a?-1:1;else if(n!==o)return n>o?-1:1;return 0});do{if(1===i.length){const e=i[0];for(const i in e){const a=e[i];if(a.length)t[i]=a}break}else{const a={};for(let n=0;n<i.length;++n){const r={},s=i[n];for(const t in s){const l=s[t];if(0===l.length)continue;else if(l.length===o[e].length){a[t]=l,i[n]={};break}const c={};let h=false;for(let e=0;e<i.length;++e)if(n!==e){const t=i[e];for(const e in t){const i=t[e];if(i.length)l.forEach(t=>{if(i.includes(t))Js(c,e).push(t)})}}for(const e in c){const i=c[e];if(i.length>1)r[t<e?t+";"+e:e+";"+t]=i,h=true}if(!h)r[t]=l}if(Object.keys(r).length){const e={},a=new Set,n={};for(const e in r)n[e]=r[e].join(",");for(const t in r)for(const i in r){const o=n[t];if(t!==i&&o===n[i]){let n=e[o];if(!n)n=new Set(t.split(";")),e[o]=n;i.split(";").forEach(e=>n.add(e)),a.add(t).add(i)}}for(const e of a)delete r[e];for(const e in r)ul(i,e,r[e]),t[e]=r[e];for(const a in e){const n=Array.from(e[a]).sort().join(";"),o=el(a.split(js.SEPARATOR),e=>parseInt(e));ul(i,n,o),t[n]=o}}}const n=Object.keys(a);if(n.length)t[n.join(";")]=a[n[0]];tl(i,e=>{for(const t in e)if(e[t].length)return false;return true})}}while(i.length)}const c={},h={},f=new Set;for(const e in l){const t=l[e],i=[];for(const e in t){const a=[];e.split(";").forEach(e=>{const t=js.ATTRIBUTE.exec(e);if(t)a.push({key:t[1],value:t[2]})}),i.push({name:"",parent:"",items:a,ids:t[e]})}i.sort((e,t)=>{let i=e.ids.length,a=t.ids.length;if(i===a)if(i=e.items.length,a=t.items.length,i===a)i=e.name,a=t.name;return i<=a?1:-1});const a=i.length;for(let t=0;t<a;++t)i[t].name=Ks(e)+(t>0?"_"+t:"");c[e]=i}for(const e in c)c[e].forEach(e=>{var t;return null===(t=e.ids)||void 0===t?void 0:t.forEach(t=>Js(h,t).push(e.name))});s.forEach(e=>{const t=h[e.id];if(t){if(t.length>1)f.add(t.join(".")),t.shift();else f.add(t[0]);e.attr("_","style","@style/"+t.join("."))}}),f.forEach(e=>{const t=[];let i,a="";if(e.split(".").forEach((e,o,r)=>{const s=ol.exec(e);if(s){const l=c[s[1].toUpperCase()][$s(s[2])];if(l)if(0===o){if(a=e,1===r.length)i=l.items;else if(!n.has(e))n.set(e,{name:e,parent:"",items:l.items})}else{if(i)l.items.forEach(e=>{const t=e.key,a=i.findIndex(e=>e.key===t);if(-1!==a)i[a]=e;else i.push(e)});else i=l.items.slice(0);t.push(e)}}}),i)if(0===t.length)n.set(a,{name:a,parent:"",items:i});else{const e=t.join(".");n.set(e,{name:e,parent:a,items:i})}})}}const{NODE_TEMPLATE:gl}=squared.base.lib.enumeration;class ml extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){this.cache.each(e=>{const t=e.renderTemplates;if(t){let i,a;if(e.renderEach((e,t)=>{const n=e.dataset,o=n.androidInclude,r="true"===n.androidIncludeEnd;if(o||r){if(e.documentRoot)return;const s={item:e,name:o,index:t,include:"false"===n.androidIncludeMerge};if(o){if(!i)i=[];i.push(s)}if(r){if(!a)a=[];a.push(s)}}}),i&&a){const e=this.application,n=this.controller,o=Math.min(i.length,a.length),r=a.length-o;if(r>0)a.splice(0,r);let s=o-1;while(s>=0){const{index:o,include:r,item:l,name:c}=i[s--];for(let i=0;i<a.length;++i){const s=a[i].index;if(s>=o){const h=[];let f=o;while(f<=s)h.push(t[f++]);const d=!r||h.length>1,u=d?1:0;t.splice(o,h.length,{type:2,node:h[0].node,content:n.renderNodeStatic({controlName:"include",width:"match_parent"},{layout:"@layout/"+c,android:{}}),indent:true});let p=n.cascadeDocument(h,u);if(d)p=n.getEnclosingXmlTag("merge",se(p),p);else l.documentRoot=true;e.saveDocument(c,p,"",1/0),a.splice(i,1);break}}}}}})}}const yl=squared.lib,{formatPX:bl}=yl.css,{measureTextWidth:Tl}=yl.dom,{capitalizeString:Sl,lowerCaseString:El,isNumber:Al,isString:wl}=yl.util,{STRING_SPACE:xl,replaceCharacterData:vl}=yl.xml,{NODE_RESOURCE:_l}=squared.base.lib.enumeration;function Nl(e,t,i,a,n){if(""!==(i=B.addString(a,i,n)))e.android(t,n||!Al(i)?"@string/"+i:i,false)}class Rl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:false,fontVariantSmallCapsReduction:.7},this.eventOnly=true}afterResources(){const e=this.options.numberResourceValue;this.cacheProcessing.each(t=>{if(t.hasResource(_l.VALUE_STRING)){switch(t.tagName){case"SELECT":{const e=this.createOptionArray(t.element,t.controlId);if(""!==e)t.android("entries","@array/"+e);break}case"IFRAME":{const e=t.data(B.KEY_NAME,"valueString");if(e)B.addString(vl(e.value),e.key);break}default:if(!t.layoutFrame){const i=t.data(B.KEY_NAME,"valueString");if(i){let a=i.value;const n=i.key||a;if(t.naturalChild&&t.alignParent("left")&&t.pageFlow&&!(t.preserveWhiteSpace&&!t.plainText||t.plainText&&t.actualParent.preserveWhiteSpace)){let e=0;const i=t.textContent,n=i.length;let o=0;while(o<n)switch(i.charCodeAt(o++)){case 160:++e;case 32:continue;default:break}if(0===e)a=a.replace(/^(\s|&#160;)+/,"")}if("small-caps"===t.css("fontVariant"))if(t.api>=21)t.android("fontFeatureSettings","smcp");else{t.android("textAllCaps","true");const e=t.data(B.KEY_NAME,"fontStyle");if(e)e.fontSize*=this.options.fontVariantSmallCapsReduction}switch(t.css("textTransform")){case"uppercase":t.android("textAllCaps","true");break;case"lowercase":a=El(a);break;case"capitalize":a=Sl(a);break}const o=t.tagName;a=vl(a,t.preserveWhiteSpace||"CODE"===o);const r=t.css("textDecorationLine");if("none"!==r)r.split(" ").forEach(e=>{switch(e){case"underline":a=`<u>${a}</u>`;break;case"line-through":a=`<strike>${a}</strike>`;break}});if("INS"===o&&!r.includes("line-through"))a=`<strike>${a}</strike>`;let s=0;if(t.blockDimension||"table-cell"===t.display){const e=t.css("textIndent");if(s=t.parseUnit(e),"100%"===e||s+t.bounds.width<0)a="",t.delete("android","ellipsize","maxLines")}if(""!==a){if(0===s){const e=t.actualParent;if((null==e?void 0:e.firstChild)===t&&(e.blockDimension||"table-cell"===e.display))s=e.parseUnit(e.css("textIndent"))}if(s>0){const e=Tl(" ",t.css("fontFamily"),t.fontSize)||t.fontSize/2;a=xl.repeat(Math.max(Math.floor(s/e),1))+a}Nl(t,"text",n,a,e)}}if(t.inputElement){if(t.controlName===o.EDIT_LIST){const e=t.element.list;if(e)if(this.createOptionArray(e,t.controlId),!t.hasPX("width"))t.css("width",bl(t.actualWidth))}const i=t.data(B.KEY_NAME,"hintString");if(wl(i))Nl(t,"hint","",i,e)}}}if(t.styleElement){const i=t.data(B.KEY_NAME,"titleString")||t.toElementString("title");if(""!==i)Nl(t,"tooltipText",t.controlId.toLowerCase()+"_title",i,e)}}})}createOptionArray(e,t){const[i,a]=B.getOptionArray(e),n=this.options.numberResourceValue;let o;if(!n&&a)o=a;else{const e=i||a;if(e)o=[],e.forEach(e=>{if(""!==(e=B.addString(vl(e),"",n)))o.push("@string/"+e)})}return(null==o?void 0:o.length)?B.insertStoredAsset("arrays",t+"_array",o):""}}const Il=squared.lib,{XML:Cl}=Il.regex,{capitalize:Ll,trimString:kl}=Il.util,Pl=B.STORED,Ol=/(\w+):(\w+)="([^"]+)"/;class Ml extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){const e={},t={};this.cache.each(i=>{if(i.controlId&&i.visible){const a=i.renderChildren,n=a.length;if(n>1){const o=new Map;let r=true,s="",l=0;while(l<n){let e=false;const t=a[l++].combine("_","android"),i=t.length;let n=0;while(n<i){const i=t[n++];if(!e&&i.startsWith("style=")){if(0===l)s=i;else if(""===s||i!==s){r=false;break}e=true}else o.set(i,(o.get(i)||0)+1)}if(!r||!e&&""!==s){r=false;break}}if(r){for(const[e,t]of o.entries())if(t!==n)o.delete(e);if(o.size>1){if(""!==s)s=kl(s.substring(s.indexOf("/")+1),'"');const n=[];for(const e of o.keys()){const t=Ol.exec(e);if(t)a.forEach(e=>e.delete(t[1],t[2])),n.push(t[0])}n.sort();const r=n.join(";");let l="";for(const e in t)if(t[e]===r){l=e;break}if(""===s||!l.startsWith(s+"."))l=(""!==s?s+".":"")+Ll(i.controlId),e[l]=n,t[l]=r;a.forEach(e=>e.attr("_","style","@style/"+l))}}}}});for(const t in e){const i=[];e[t].forEach(e=>{const t=Cl.ATTRIBUTE.exec(e);if(t)i.push({key:t[1],value:t[2]})}),Pl.styles.set(t,Object.assign(ne(),{name:t,items:i}))}}}var Dl={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const Wl={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var Bl={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":["ordering"],">":{set:{"^":"android","@":["ordering"],">":{objectAnimator:Wl.objectAnimator}},objectAnimator:Wl.objectAnimator}},objectAnimator:Wl.objectAnimator}}};if(!squared.svg)Object.assign(squared,{svg:{lib:{constant:{},util:{}}}});var Xl=squared.svg.Svg,Gl=squared.svg.SvgAnimate,Hl=squared.svg.SvgAnimateTransform,Vl=squared.svg.SvgBuild,Fl=squared.svg.SvgG,zl=squared.svg.SvgPath,Ul=squared.svg.SvgShape;const ql=squared.lib,Yl=squared.svg.lib,{extractURL:jl,formatPX:Kl,isPercent:$l}=ql.css,{truncate:Zl}=ql.math,{CHAR:Jl,FILE:Ql}=ql.regex,{convertCamelCase:ec,convertInt:tc,convertWord:ic,formatString:ac,isArray:nc,isNumber:oc,isString:rc,objectMap:sc,partitionArray:lc,replaceMap:cc}=ql.util,{applyTemplate:hc}=ql.xml,{KEYSPLINE_NAME:fc,SYNCHRONIZE_MODE:dc}=Yl.constant,{MATRIX:uc,SVG:pc,TRANSFORM:gc}=Yl.util,mc=squared.base.NodeUI,yc=B.STORED,bc={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"},Tc=["name","value","fill","stroke","fillPattern","fillRule","strokeWidth","fillOpacity","strokeOpacity","strokeLinecap","strokeLinejoin","strokeLineJoin","strokeMiterlimit"];if(fc)Object.assign(bc,{[fc["ease-in"]]:bc.accelerate,[fc["ease-out"]]:bc.decelerate,[fc["ease-in-out"]]:bc.accelerate_decelerate,[fc.linear]:bc.linear});const Sc={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function Ec(e,t){const i=null==e?void 0:e[t];return i?bc[i]||wc(i):""}function Ac(e){for(const t in Sc)if(Sc[t].includes(e))return ec(t);return""}function wc(e){const t=bc[e];if(t)return t;else{const t="path_interpolator_"+ic(e);if(!yc.animators.has(t))yc.animators.set(t,ac('<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',...e.split(Jl.SPACE)));return"@anim/"+t}}function xc(e){const t={};return e.forEach(e=>{const{matrix:i,origin:a,type:n}=e;switch(n){case SVGTransform.SVG_TRANSFORM_SCALE:if(t.scaleX=i.a.toString(),t.scaleY=i.d.toString(),a)t.pivotX=a.x.toString(),t.pivotY=a.y.toString();break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(t.rotation=e.angle.toString(),a)t.pivotX=a.x.toString(),t.pivotY=a.y.toString();else t.pivotX="0",t.pivotY="0";break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:t.translateX=i.e.toString(),t.translateY=i.f.toString();break}}),t}function vc(e,t){let i=0,a=0;return function(e){const t=[];let i=e.parentElement;while(i)if(t.push(i),i=i.parentElement,i instanceof HTMLElement)break;return t}(e).forEach(e=>{if((pc.svg(e)||pc.use(e))&&e!==t)i+=e.x.baseVal.value,a+=e.y.baseVal.value}),{x:i,y:a}}function _c(e,t,i=1,a=1){const n=t.length;if(n&&(pc.circle(e)||pc.ellipse(e)))if(t.some(e=>e.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(i!==a||n>1&&t.some(e=>e.type===SVGTransform.SVG_TRANSFORM_SCALE&&e.matrix.a!==e.matrix.d)))return Nc(e,t);return[[],t]}function Nc(e,t,i=false){if(t.length){const a=[],n=[],o=t[0].fromCSS?[]:gc.rotateOrigin(e).reverse(),r=t.slice(0).reverse(),s=[],l=()=>{a.push(s.slice(0)),s.length=0};for(let e=1;e<r.length;++e){const t=r[e],i=r[e-1];if(t.type===i.type){let a;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:a=uc.clone(t.matrix),a.e+=i.matrix.e,a.f+=i.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:a=uc.clone(t.matrix),a.a*=i.matrix.a,a.d*=i.matrix.d;break}if(a)t.matrix=a,r.splice(--e,1)}}if(r.forEach(e=>{switch(e.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:n.push(e);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(!i&&0===a.length&&0===s.length)n.push(e);else s.push(e),l();break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(o.length){const t=o.shift();if(t.angle===e.angle){if(0!==t.x||0!==t.y)e.origin=t;break}}if(!e.origin&&1===s.length&&s[0].type===SVGTransform.SVG_TRANSFORM_SCALE)return void s.push(e);case SVGTransform.SVG_TRANSFORM_SCALE:if(s.length)l();s.push(e);break}}),s.length)a.push(s);return[a.reverse(),n]}return[[],t]}function Rc(e,t,i,a=false,n){const o=e[t];let r;if(o)r=Array.isArray(o)?o[i].toString():o;else if(!a&&0===t)r=n;return r||""}function Ic(e){switch(e){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:if(Oc(e))return"floatType";else return}}function Cc(e,t,i,a){const n=new Gl;return n.attributeName=e,n.delay=t,n.duration=1,n.from=a||i,n.to=i,n.fillForwards=true,n.convertToValues(),n}function Lc(e,t=true){let i=Sc[e];if(!i&&t&&Oc(e))i=[e];return i}function kc(e){switch(e){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Pc(e){switch(e.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return Hl.toRotateList(e.values);case SVGTransform.SVG_TRANSFORM_SCALE:return Hl.toScaleList(e.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return Hl.toTranslateList(e.values)}}function Oc(e){switch(e){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Mc(e,t=false){const i="@color/"+B.addColor(e);return t?[i]:i}function Dc(e,t){if(Hc(e.attributeName))return Mc(t);else return t.trim()||void 0}function Wc(e){switch(e){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function Bc(e,t){const i=e.synchronized,a=t.synchronized;if(i&&a)return i.key>=a.key?1:-1;else return 0}function Xc(e,t,i,a,n){const o=i.set,r=o.length;if(r){let s=false;if(r>1&&o.every(e=>""===e.ordering)){const e={set:[],objectAnimator:[]};o.forEach(t=>{e.set=e.set.concat(t.set),e.objectAnimator=e.objectAnimator.concat(t.objectAnimator)}),i=e}while(1===i.set.length){const e=i.set[0];if((!s||""===e.ordering)&&0===e.objectAnimator.length)i=e,s=true;else break}if(i["xmlns:android"]=f.android,s)i["android:ordering"]=i.ordering,i.ordering=void 0;const l={name:t,animation:B.insertStoredAsset("animators",Gc(a,n,"anim",t),hc("set",Bl,[i]))};if(""!==l.animation)l.animation="@anim/"+l.animation,e[0].target.push(l)}}const Gc=(e,t,i,a)=>e+(i?"_"+i:"")+(t?"_vector":"")+(a?"_"+a.toLowerCase():""),Hc=e=>"fill"===e||"stroke"===e,Vc=(e,t,i=-1)=>e.name+"_"+t+(-1!==i?"_"+(i+1):""),Fc=e=>$l(e)?parseFloat(e)/100:.5,zc=e=>"@drawable/"+e,Uc=(e="")=>({ordering:e,objectAnimator:[]});class qc extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=true,this._vectorData=new Map,this._animateData=new Map,this._animateTarget=new Map,this._imageData=[],this._synchronizeMode=0,this._namespaceAapt=false}beforeParseDocument(){if(Vl)Vl.setName(),this.controller.localSettings.svg.enabled=true}afterResources(){if(Vl){let e,t;this.cacheProcessing.each(i=>{if(i.imageElement)[e,t]=this.createSvgElement(i,i.toElementString("src"));else if(i.svgElement)t=i.element;if(t){const a=this.createSvgDrawable(i,t);if(""!==a)if(i.api>=21)i.android("src",zc(a));else i.app("srcCompat",zc(a));if(!i.hasWidth)i.setLayoutWidth("wrap_content");if(!i.hasHeight)i.setLayoutHeight("wrap_content");if(i.baseline)i.android("baselineAlignBottom","true");if(e)e.removeChild(t),e=void 0;t=void 0}})}}afterFinalize(){this.controller.localSettings.svg.enabled=false}createSvgElement(e,t){const i=jl(t);if(""!==i)t=i;if(Ql.SVG.test(t)||t.startsWith("data:image/svg+xml")){const i=this.resource.getRawData(t);if(i){const t=(e.actualParent||e.documentParent).element;t.insertAdjacentHTML("beforeend",i.content);const a=t.lastElementChild;if(a instanceof SVGSVGElement){const i=a;if(0===i.width.baseVal.value)i.setAttribute("width",e.actualWidth.toString());if(0===i.height.baseVal.value)i.setAttribute("height",e.actualHeight.toString());return[t,i]}}}return[]}createSvgDrawable(e,t){const{floatPrecisionValue:i,floatPrecisionKeyTime:a,transformExclude:n}=this.options,o=new Xl(t),r=e.api>=23,s=2|(r?32:64),l=this._animateData,c=this._imageData;this._svgInstance=o,this._vectorData.clear(),l.clear(),this._animateTarget.clear(),c.length=0,this._namespaceAapt=false,this._synchronizeMode=s;const h=(e.tagName+"_"+ic(e.controlId,true)+"_viewbox").toLowerCase();o.build({exclude:n,residual:_c,precision:i}),o.synchronize({keyTimeMode:s,framesPerSecond:this.controller.userSettings.framesPerSecond,precision:i}),this.queueAnimations(o,o.name,e=>"opacity"===e.attributeName);const d=this.parseVectorData(o),u=o.viewBox,p=c.length;let g,m;{const{width:t,height:i}=mc.refitScreen(e,{width:o.width,height:o.height});m=B.insertStoredAsset("drawables",Gc(h,p),hc("vector",qr,[{"xmlns:android":f.android,"xmlns:aapt":this._namespaceAapt?f.aapt:"","android:name":l.size?o.name:"","android:width":Kl(t),"android:height":Kl(i),"android:viewportWidth":(u.width||t).toString(),"android:viewportHeight":(u.height||i).toString(),"android:alpha":parseFloat(o.opacity)<1?o.opacity.toString():"",include:d}]))}if(l.size){const e=[{"xmlns:android":f.android,"android:drawable":zc(m),target:[]}];for(const[t,n]of l.entries()){const o=new Map,s=new Map,l=[],c=[],f=[],d=[],u=[],[g,m]=lc(n.animate,e=>"companion"in e),y={set:[],objectAnimator:[]},b=m.length;let T=0;while(T<b){const e=m[T++];if(e.setterType){if(Sc[e.attributeName]&&rc(e.to))if(e.fillReplace&&e.duration>0)c.push(e);else l.push(e)}else if(Vl.isAnimate(e)){const t=g.filter(t=>t.companion.value===e);if(t.length){t.sort((e,t)=>e.companion.key>=t.companion.key?1:0);const i=[],a=[],n=t.length;for(let o=0;o<n;++o){const n=t[o];if(n.companion.key<=0){if(i.push(n),0===o)n.delay+=e.delay,e.delay=0}else a.push(n)}i.push(e),o.set("sequentially_companion_"+T,i.concat(a))}else{const t=e.synchronized;if(t){const i=t.value;if(Vl.isAnimateTransform(e)){const t=s.get(i);if(t)t.push(e);else s.set(i,[e])}else{const t=o.get(i);if(t)t.push(e);else o.set(i,[e])}}else{if(Vl.isAnimateTransform(e))e.expandToValues();if(-1===e.iterationCount)c.push(e);else if((!e.fromToType||Vl.isAnimateTransform(e)&&e.transformOrigin)&&!(r&&"pathType"!==Ic(e.attributeName)))f.push([e]);else if(e.fillReplace)c.push(e);else l.push(e)}}}}if(l.length)f.push(l);for(const[e,t]of o.entries())if(e.startsWith("sequentially_companion"))f.push(t);else f.push(t.sort(Bc));for(const e of s.values())u.push(e.sort(Bc));c.forEach(e=>d.push([[e]])),[f,u,...d].forEach((e,t)=>{if(0===e.length)return;const o={ordering:0===t||1===e.length?"":"sequentially",set:[],objectAnimator:[]};if(e.forEach(e=>{let s="",l=false,c=false,h=true;if(t<=1&&e.some(e=>!!e.synchronized&&""!==e.synchronized.value)){if(!Vl.isAnimateTransform(e[0]))s="sequentially";l=true,h=false}else if(t<=1&&e.some(e=>!!e.synchronized&&""===e.synchronized.value))s="sequentially",l=true,c=true;else if(t<=1&&e.some(e=>"companion"in e))s="sequentially";else{if(t>0)s="sequentially";if(t>1&&Vl.isAnimateTransform(e[0]))c=true}const f=Uc(),d=Uc(),u=Uc(),p=Uc(),g=d.objectAnimator,m=u.objectAnimator;let y=f.objectAnimator,b=p.objectAnimator,T=[];(l?lc(e,e=>-1!==e.iterationCount):[e]).forEach((e,f)=>{if(1===f&&e.length>1)u.ordering="sequentially";const d=new Map;e.forEach(u=>{var p;const S=Ic(u.attributeName);if(void 0===S)return;const E=u.delay>0;let A,w=false;const x=(e,t,i)=>{if(!l&&u.fillReplace){let a,n=u.replaceValue;if(!n){if(w)n=Oc(e);else{const t=u.parent;if(t)if(Vl.isShape(t)){const i=t.path;if(i)n="pathData"===e?i.value:i[Ac(e)]}}if(!n)n=u.baseValue}if(null==t?void 0:t.length){const e=t[t.length-1];if(nc(e.propertyValuesHolder)){const t=e.propertyValuesHolder[e.propertyValuesHolder.length-1];a=t.keyframe[t.keyframe.length-1].value}else a=e.valueTo}if(rc(n)&&n!==a)if(n=Dc(u,n),n){switch(e){case"trimPathStart":case"trimPathEnd":n=n.split(" ")["trimPathStart"===e?0:1];break}b.push(this.createPropertyValue(e,n,"1",S,"pathType"===S?a:"",i?i.toString():""))}if(A)if(e.endsWith("X"))b.push(this.createPropertyValue("translateX","0","1",S));else if(e.endsWith("Y"))b.push(this.createPropertyValue("translateY","0","1",S))}};if(u.setterType){const e=Lc(u.attributeName);if(e){const i=Hc(u.attributeName)?Mc(u.to,true):u.to.trim().split(" "),a=e.length;if(i.length===a&&!i.some(e=>""===e)){let n,o;for(let r=0;r<a;++r){let a;if("pathType"===S)a=i[r];else if(E){const e=u.baseValue;if(e)a=Dc(u,e.trim().split(" ")[r])}const s=this.createPropertyValue(e[r],i[r],"1",S,a,u.delay>0?u.delay.toString():"");if(t>1)m.push(s),x(e[r],void 0,t>1?u.duration:0);else{const e=u.companion;if(e){if(e.key<=0){if(!n)n=[];n.push(s)}else if(e.key>0){if(!o)o=[];o.push(s)}}else T.push(s)}}if(n)y=y.concat(n);if(o)b=b.concat(o)}}}else if(Vl.isAnimate(u)){let b,T=c;if(1===f)b=e.length>1?"0":"-1";else b=-1!==u.iterationCount?Math.ceil(u.iterationCount-1).toString():"-1";const v=this.createPropertyValue("","",u.duration.toString(),S,"",u.delay>0?u.delay.toString():"",b);let _,N,R;if(!l&&"pathType"===S){if(n.pathData){const e=u.parent;let t,a;if(e&&Vl.isShape(e))a=e,t=null===(p=e.path)||void 0===p?void 0:p.transformed;N=["pathData"],R=zl.extrapolate(u.attributeName,n.pathData,u.values,t,a,i)}}else if(Vl.asAnimateTransform(u)){if(N=kc(u.type),R=Pc(u),N&&R){if(c&&0===u.keyTimes[0])T=false;if(T||E)_=sc(N,e=>Oc(e)||"0");A=u.transformOrigin}w=true}else if(Vl.asAnimateMotion(u)){if(N=kc(u.type),R=Pc(u),N&&R){const e=u.rotateValues,t=R.length;if((null==e?void 0:e.length)===t){N.push("rotation");let i=0;while(i<t)R[i].push(e[i++])}}w=true}else switch(N=Lc(u.attributeName),S){case"intType":if(R=sc(u.values,e=>tc(e).toString()),E){const e=u.baseValue;if(e)_=cc(Vl.parseCoordinates(e),e=>Math.trunc(e).toString())}break;case"floatType":if("stroke-dasharray"===u.attributeName)R=sc(u.values,e=>cc(e.split(" "),e=>parseFloat(e)));else R=u.values;if(E){const e=u.baseValue;if(e)_=cc(Vl.parseCoordinates(e),e=>e.toString())}break;default:if(R=u.values.slice(0),Hc(u.attributeName)){if(E){const e=u.baseValue;if(e)_=Mc(e,true)}const e=R.length;for(let t=0;t<e;++t)if(""!==R[t])R[t]=Mc(R[t])}break}if(!u.keySplines){const e=u.timingFunction;v.interpolator=rc(e)?wc(e):this.options.animateInterpolator}if(R&&N){const{keyTimes:e,synchronized:p}=u,b=N.length,w=e.length,I=p?p.key+p.value:0!==t||b>1?JSON.stringify(v):"";for(let t=0;t<b;++t){const p=N[t];if(T&&_)this.resetBeforeValue(y,p,_[t],S);if(h&&w>1)if(r&&"pathType"!==S){if(!T&&E&&_)this.resetBeforeValue(y,p,_[t],S);const n=d.get(I)||[],o=[];for(let n=0;n<w;++n){let r=Rc(R,n,t,true);if(r&&"floatType"===S)r=Zl(r,i);o.push({interpolator:n>0&&""!==r&&"pivotX"!==p&&"pivotY"!==p?Ec(u.keySplines,n-1):"",fraction:0===e[n]&&""===r?"":Zl(e[n],a),value:r})}if(n.push({propertyName:p,keyframe:o}),!d.has(I)){if(""!==I)d.set(I,n);(0===f?g:m).push(Object.assign(Object.assign({},v),{propertyValuesHolder:n}))}A=void 0}else{s="sequentially";const a=Uc("sequentially");for(let o=0;o<w;++o){const r=e[o],s=Object.assign(Object.assign({},v),{propertyName:p,startOffset:0===o?(u.delay+(r>0?Math.floor(r*u.duration):0)).toString():"",propertyValuesHolder:false});let l=Rc(R,o,t,false,"pathType"===S?n.pathData:u.baseValue);if(l){let h;if(0===o){if(!c&&E&&_)s.valueFrom=_[t];else if("pathType"===S)s.valueFrom=n.pathData||R[0].toString();else s.valueFrom=u.baseValue||u.replaceValue||"";h=0}else s.valueFrom=Rc(R,o-1,t).toString(),h=Math.floor((r-e[o-1])*u.duration);if("floatType"===S)l=Zl(l,i);const f=null==A?void 0:A[o];if(f){let e,t=0;if(p.endsWith("X"))e="translateX",t=f.x;else if(p.endsWith("Y"))e="translateY",t=f.y;if(e){const n=this.createPropertyValue(e,Zl(t,i),h.toString(),"floatType");n.interpolator=wc(fc["step-start"]),a.objectAnimator.push(n)}}if(o>0)s.interpolator=Ec(u.keySplines,o-1);s.duration=h.toString(),s.valueTo=l,g.push(s)}}if(a.objectAnimator.length)o.set.push(a)}else{const e=Object.assign(Object.assign({},v),{propertyName:p,interpolator:u.duration>1?Ec(u.keySplines,0):"",propertyValuesHolder:false}),a=R.length;if(Array.isArray(R[0])){const i=R[a-1][t];if(a>1){const a=R[0][t];if(a!==i)e.valueFrom=a.toString()}e.valueTo=i.toString()}else{let i;if(a>1)i=R[0].toString(),e.valueTo=R[a-1].toString();else i=u.from||(!c&&E&&_?_[t]:""),e.valueTo=u.to;if("pathType"===S)e.valueFrom=i||n.pathData||e.valueTo;else if(i!==e.valueTo&&i)e.valueFrom=Dc(u,i)}const o=e.valueTo;if(o){if("floatType"===S)e.valueTo=Zl(o,i);(0===f?g:m).push(e)}}if(0===f&&!l&&-1!==u.iterationCount)x(p,g)}if(E&&(null==A?void 0:A.length))this.resetBeforeValue(y,"translateX","0",S),this.resetBeforeValue(y,"translateY","0",S)}}})});const S=g.length>0||m.length>0;if("sequentially"===s){if(S&&1===y.length)g.unshift(y[0]),y.length=0;if(1===m.length)g.push(m[0]),m.length=0;if(S&&1===b.length)g.push(b[0]),b.length=0}if(0===y.length&&0===m.length&&0===b.length){if("sequentially"===s&&1===g.length)s="";if("sequentially"!==o.ordering&&"sequentially"!==s)T=T.concat(g),g.length=0}if(g.length||m.length){if(y.length)o.ordering="sequentially",o.set.push(f);if(g.length)d.ordering=s,o.set.push(d);if(m.length)o.ordering="sequentially",o.set.push(u);if(b.length)o.ordering="sequentially",o.set.push(p)}if(T.length)o.objectAnimator=o.objectAnimator.concat(T)}),o.set.length||o.objectAnimator.length)y.set.push(o)}),Xc(e,t,y,h,p)}for(const[t,i]of this._animateTarget.entries()){let a;const n=(e,t,i,n,o)=>{if(!a)a=[];a.push(this.createPropertyValue(e,t,"0",i,n,o))};if(i.animate.forEach(e=>{if(Vl.asAnimateMotion(e)){const t=e.parent;if(t&&Vl.isShape(t)){const i=t.path;if(i){const{value:t,baseValue:a}=i;if(t!==a)if(n("pathData",a,"pathType",t),-1!==e.iterationCount&&!e.setterType)n("pathData",t,"pathType",a,e.getTotalDuration().toString())}}}}),a)Xc(e,t,{set:[{set:void 0,objectAnimator:a}],objectAnimator:void 0},h,p)}if(e[0].target)m=B.insertStoredAsset("drawables",Gc(h,p,"anim"),hc("animated-vector",Dl,e))}if(p){const e=this.resource,t=[],i=[{"xmlns:android":f.android,item:t}];if(""!==m)t.push({drawable:zc(m)});c.forEach(i=>{const a=o.viewBox,n=o.width/a.width,r=o.height/a.height,s=vc(i.element,o.element);let l=i.getBaseValue("x",0)*n,c=i.getBaseValue("y",0)*r,h=i.getBaseValue("width",0),f=i.getBaseValue("height",0);l+=s.x,c+=s.y,h*=n,f*=r;const d={width:Kl(h),height:Kl(f),left:0!==l?Kl(l):"",top:0!==c?Kl(c):""},u=zc(e.addImageSet({mdpi:i.href}));if(i.rotateAngle)d.rotate={drawable:u,fromDegrees:i.rotateAngle.toString(),visible:i.visible?"true":"false"};else d.drawable=u;t.push(d)}),g=B.insertStoredAsset("drawables",h,hc("layer-list",Fr,i))}else g=m;return e.data(B.KEY_NAME,"svgViewBox",u),g}createPropertyValue(e,t,i,a,n="",o="",r="0"){const s=this.options.floatPrecisionValue;return{propertyName:e,startOffset:o,duration:i,repeatCount:r,valueType:a,valueFrom:oc(n)?Zl(n,s):n,valueTo:oc(t)?Zl(t,s):t,propertyValuesHolder:false}}parseVectorData(e,t=0){const i=this.options.floatPrecisionValue,a=this.createGroup(e),n=a.length,o=t+n;let r="";if(e.each(t=>{if(t.visible)if(Vl.isShape(t)){const e=t.path;if(null==e?void 0:e.value){const[a,n]=this.createPath(t,e),s=[];if(parseFloat(e.strokeWidth)>0&&(e.strokeDasharray||e.strokeDashoffset)){const o=this._animateData.get(t.name);if(!o||o.animate.every(e=>e.attributeName.startsWith("stroke-dash"))){const[r,l,c,h]=e.extractStrokeDash(null==o?void 0:o.animate,i);if(l){if(o)if(this._animateData.delete(t.name),r)o.animate=r;const e=Vc(t,"stroke"),f={name:e};if(""!==c)a.pathData=c;if(""!==h)f["clip-path"]=[{pathData:h}];const d=l.length;for(let t=0;t<d;++t){const n=0===t?a:Object.assign({},a),r=l[t];if(n.name=e+"_"+t,o)this._animateData.set(n.name,{element:o.element,animate:o.animate.filter(e=>void 0===e.id||e.id===t)});n.trimPathStart=Zl(r.start,i),n.trimPathEnd=Zl(r.end,i),s.push(n)}n.unshift(f)}}}if(0===s.length)s.push(a);if(n.length){n[n.length-1].path=s,r+=hc("group",Ur,n,o+1)}else r+=hc("path",zr,s,o+1)}}else if(Vl.isContainer(t)){if(t.length)r+=this.parseVectorData(t,o)}else if(Vl.asImage(t))if(!Vl.asPattern(e))t.extract(this.options.transformExclude.image),this._imageData.push(t)}),n)return a[n-1].include=r,hc("group",Ur,a,t+1);else return r}createGroup(e){const t=[],i=[],a={"clip-path":t},n={"clip-path":i},o=[],r={};if((Vl.asSvg(e)&&!e.documentRoot||Vl.asUseSymbol(e)||Vl.asUsePattern(e))&&(0!==e.x||0!==e.y))r.name=Vc(e,"main"),r.translateX=e.x.toString(),r.translateY=e.y.toString();if(""!==e.clipRegion)this.createClipPath(e,t,e.clipRegion);if(t.length||Object.keys(r).length)Object.assign(a,r),o.push(a);if(e!==this._svgInstance){const t={},[a]=Nc(e.element,e.transforms,true),r=Vc(e,"animate");if((Vl.asG(e)||Vl.asUseSymbol(e))&&rc(e.clipPath)&&this.createClipPath(e,i,e.clipPath))t.name=r;if(this.queueAnimations(e,r,e=>Vl.asAnimateTransform(e)))t.name=r;if(Object.keys(t).length)Object.assign(n,t),o.push(n);if(a.length){let t=[];a.forEach(e=>{o.push(xc(e)),t=t.concat(e)}),e.transformed=t.reverse()}}return o}createPath(e,t){var i,a;const n=this.options.floatPrecisionValue,o={name:e.name},r=[],s=[],l={},c=Vc(e,"group"),h=function(e){let t=parseFloat(e.opacity),i=e.parent;while(i){const e=parseFloat(i.opacity||"1");if(!isNaN(e)&&e<1)t*=e;i=i.parent}return t}(e),f=Vl.asUse(e);if(Vl.asUse(e)&&rc(e.clipPath))this.createClipPath(e,s,e.clipPath);if(rc(t.clipPath)){const e=new Ul(t.element);e.build({exclude:this.options.transformExclude,residual:_c,precision:n}),e.synchronize({keyTimeMode:this._synchronizeMode,precision:n}),this.createClipPath(e,s,t.clipPath)}if(this.queueAnimations(e,c,e=>Vl.isAnimateTransform(e),"",e.name))l.name=c;else if(s.length)l.name="";if(Vl.asUse(e)&&(0!==e.x||0!==e.y))l.translateX=e.x.toString(),l.translateY=e.y.toString();if(s.length)l["clip-path"]=s;if(Object.keys(l).length)r.push(l);if(null===(i=t.transformResidual)||void 0===i||i.forEach(e=>r.push(xc(e))),Tc.forEach(i=>{let a=f&&e[i]||t[i];if(a){switch(i){case"name":break;case"value":i="pathData";break;case"fill":if(i="fillColor","none"!==a&&!o["aapt:attr"]){const e=B.addColor(a);if(""!==e)a="@color/"+e}else return;break;case"stroke":if(i="strokeColor","none"!==a){const e=B.addColor(a);if(""!==e)a="@color/"+e}else return;break;case"fillPattern":{const e=this._svgInstance.definitions.gradient.get(a);let r=false;if(e)switch(t.element.tagName){case"path":if(!/[zZ]\s*$/.test(t.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const i=function(e,t,i){const{colorStops:a,type:n}=e,o={type:n,item:Is(a,i),positioning:false};switch(n){case"radial":{const{cxAsString:i,cyAsString:a,rAsString:n,spreadMethod:r}=e,s=t.element;let l,c,h,f,d=[];switch(s.tagName){case"path":Vl.getPathCommands(t.value).forEach(e=>d=d.concat(e.value));case"polygon":if(pc.polygon(s))d=d.concat(Vl.clonePoints(s.points));if(!d.length)return;[l,c,h,f]=Vl.minMaxPoints(d),h-=l,f-=c;break;default:if(pc.rect(s))l=s.x.baseVal.value,c=s.y.baseVal.value,h=s.width.baseVal.value,f=s.height.baseVal.value;else if(pc.circle(s))h=s.r.baseVal.value,l=s.cx.baseVal.value-h,c=s.cy.baseVal.value-h,h*=2,f=h;else if(pc.ellipse(s))h=s.rx.baseVal.value,f=s.ry.baseVal.value,l=s.cx.baseVal.value-h,c=s.cy.baseVal.value-f,h*=2,f*=2;else return;break}if(o.centerX=(l+h*Fc(i)).toString(),o.centerY=(c+f*Fc(a)).toString(),o.gradientRadius=((h+f)/2*($l(n)?parseFloat(n)/100:1)).toString(),r)o.tileMode=Wc(r);break}case"linear":{const{x1:t,y1:i,x2:a,y2:n,spreadMethod:r}=e;if(o.startX=t.toString(),o.startY=i.toString(),o.endX=a.toString(),o.endY=n.toString(),r)o.tileMode=Wc(r)}}return o}(e,t,n);if(i)a={name:"android:fillColor",gradient:i},r=true;break}}if(r)i="aapt:attr",o.fillColor="",this._namespaceAapt=true;else return;break}case"fillRule":if("evenodd"===a)i="fillType",a="evenOdd";else return;break;case"strokeWidth":if("0"===a)return;break;case"fillOpacity":case"strokeOpacity":if(a=((oc(a)?parseFloat(a):1)*h).toString(),"1"===a)return;i="fillOpacity"===i?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===a)return;i="strokeLineCap";break;case"strokeLinejoin":if("miter"===a)return;i="strokeLineJoin";break;case"strokeMiterlimit":if("4"===a)return;i="strokeMiterLimit";break;default:return}o[i]=a}}),!o.strokeWidth)o.strokeColor="";else if(!o.strokeColor)o.strokeWidth="";const d=new Map,u=[],p=[],g=t.value;let m=g,y=0;e.animations.forEach(e=>{if(Vl.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);if(d.set(t,{index:y,time:t,to:e.transformFrom,reset:false,animate:e}),-1!==e.iterationCount&&e.fillReplace)if(t=e.delay+e.iterationCount*e.duration,!d.has(t))d.set(t,{index:y,time:t,to:g,reset:true});++y}});const b=Array.from(d.values()).sort((e,t)=>e.time<t.time?-1:1),T=b.length;for(let e=0;e<T;++e){const t=b[e];if(!t.reset||t.to!==m){let i=true;if(t.reset)e:{let a=0;while(a<e){const n=b[a++];if(!n.reset){let a=e+1;while(a<T)switch(b[a++].index){case n.index:i=false;case t.index:break e}}}}else{const i=[],n=new Set;let o=0;while(o<e){const e=b[o++];i[e.index]=i[e.index]?2:1}const r=i.length;for(o=0;o<r;++o)if(1===i[o]){const e=null===(a=b.find(e=>e.index===o&&"animate"in e))||void 0===a?void 0:a.animate;if(e)n.add(e.type)}n.forEach(e=>{const i=kc(e);if(i){const a=gc.typeAsValue(e).split(" "),n=a.length;o=0;while(o<n)u.push(Cc(i[o],t.time,a[o++],""))}})}if(i)p.push(Cc("d",t.time,t.to)),m=t.to}}if(!this.queueAnimations(e,o.name,e=>(Vl.asAnimate(e)||Vl.asSet(e))&&"clip-path"!==e.attributeName,g)&&0===p.length&&l.name!==c)o.name="";const S=this._animateData;if(u.length){const e=S.get(c);if(e)e.animate=e.animate.concat(u)}if(p.length){const t=S.get(o.name);if(t)t.animate=t.animate.concat(p);else S.set(o.name,{element:e.element,animate:p,pathData:g})}return[o,r]}createClipPath(e,t,i){const{transformExclude:a,floatPrecisionValue:n}=this.options,o=this._svgInstance.definitions,r=this._synchronizeMode;let s=0;return i.split(";").forEach((i,l,c)=>{if("#"===i.charAt(0)){const e=o.clipPath.get(i);if(e){const i=new Fl(e);i.build({exclude:a,residual:_c,precision:n}),i.synchronize({keyTimeMode:r,precision:n}),i.each(e=>{const i=e.path;if(i){const a=i.value;if(a){let i=Vc(e,"clip_path",c.length>1?l+1:-1);if(!this.queueAnimations(e,i,e=>Vl.asAnimate(e)||Vl.asSet(e),a))i="";t.push({name:i,pathData:a})}}})}++s}else{let a=Vc(e,"clip_path",c.length>1?l+1:-1);if(!this.queueAnimations(e,a,e=>(Vl.asAnimate(e)||Vl.asSet(e))&&"clip-path"===e.attributeName,i))a="";t.push({name:a,pathData:i}),++s}}),s>0}queueAnimations(e,t,i,a="",n){if(e.animations.length){const o=e.animations.filter((e,t,a)=>!e.paused&&(e.duration>=0||e.setterType)&&i(e,t,a));if(o.length){const i=e.element;if(this._animateData.set(t,{element:i,animate:o,pathData:a}),n)this._animateTarget.set(n,{element:i,animate:o,pathData:a});return true}}return false}resetBeforeValue(e,t,i,a){if(rc(i)&&-1===e.findIndex(e=>e.propertyName===t))e.push(this.createPropertyValue(t,i,"0",a))}}const Yc={builtInExtensions:["android.delegate.background","android.delegate.negative-x","android.delegate.positive-x","android.delegate.max-width-height","android.delegate.percent","android.delegate.scrollbar","android.delegate.radiogroup","squared.accessibility","squared.relative","squared.css-grid","squared.flexbox","squared.table","squared.column","squared.list","squared.verticalalign","squared.grid","squared.sprite","squared.whitespace","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.data","android.resource.includes"],targetAPI:29,resolutionDPI:160,resolutionScreenWidth:1280,resolutionScreenHeight:900,framesPerSecond:60,supportRTL:true,preloadImages:true,compressImages:false,convertImages:"",supportNegativeLeftTop:true,customizationsOverwritePrivilege:true,showAttributes:true,createQuerySelectorMap:false,convertPixels:"dp",insertSpaces:4,autoCloseOnWrite:true,showErrorMessages:true,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputMainFileName:"activity_main.xml",outputDirectory:"app/src/main",outputEmptyCopyDirectory:false,outputArchiveName:"android-xml",outputArchiveFormat:"zip"},jc=squared.base.lib;let Kc,$c,Zc=false;function Jc(e,t,i){return Object.assign(Object.assign({},e),{directory:t,filename:i})}const Qc=e=>Zc&&(e.closed||function(){if(Zc&&!Kc.initializing&&!Kc.closed&&Kc.userSettings.autoCloseOnWrite)return Kc.finalize(),true;else return false}()),eh={base:{Controller:Gi,File:da,Resource:B,View:yt},extensions:{Accessibility:ga,Column:Ca,CssGrid:dn,External:un,Flexbox:Mn,Grid:Un,List:ao,Relative:oo,Sprite:mo,Substitute:So,Table:ko,VerticalAlign:Mo,WhiteSpace:Do,constraint:{Guideline:Fo},delegate:{Background:rr,MaxWidthHeight:cr,NegativeX:pr,Percent:_r,PositiveX:Sr,RadioGroup:Mr,ScrollBar:Hr},resource:{Background:Ls,Data:Ps,Dimens:qs,Fonts:pl,Includes:ml,Strings:Rl,Styles:Ml,Svg:qc}},lib:{constant:g,customization:F,enumeration:a,util:le},system:{customize(e,t,i){if(H[e]){const a=H[e].assign;if(a[t])Object.assign(a[t],i);else a[t]=i;return a[t]}},addXmlNs(e,t){f[e]=t},copyLayoutAllXml(e,t){if(Qc(Kc))$c.layoutAllToXml(Kc.layouts,Jc(t,e))},copyResourceAllXml(e,t){if(Qc(Kc))$c.resourceAllToXml(Jc(t,e))},copyResourceStringXml(e,t){if(Qc(Kc))$c.resourceStringToXml(Jc(t,e))},copyResourceArrayXml(e,t){if(Qc(Kc))$c.resourceStringArrayToXml(Jc(t,e))},copyResourceFontXml(e,t){if(Qc(Kc))$c.resourceFontToXml(Jc(t,e))},copyResourceColorXml(e,t){if(Qc(Kc))$c.resourceColorToXml(Jc(t,e))},copyResourceStyleXml(e,t){if(Qc(Kc))$c.resourceStyleToXml(Jc(t,e))},copyResourceDimenXml(e,t){if(Qc(Kc))$c.resourceDimenToXml(Jc(t,e))},copyResourceDrawableXml(e,t){if(Qc(Kc))$c.resourceDrawableToXml(Jc(t,e))},copyResourceAnimXml(e,t){if(Qc(Kc))$c.resourceAnimToXml(Jc(t,e))},copyResourceDrawableImage(e,t){if(Qc(Kc))$c.resourceDrawableImageToString(Jc(t,e))},copyResourceRawVideo(e,t){if(Qc(Kc))$c.resourceRawVideoToString(Jc(t,e))},copyResourceRawAudio(e,t){if(Qc(Kc))$c.resourceRawAudioToString(Jc(t,e))},saveLayoutAllXml(e,t){if(Qc(Kc))$c.layoutAllToXml(Kc.layouts,Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-layouts"))},saveResourceAllXml(e,t){if(Qc(Kc))$c.resourceAllToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-resources"))},saveResourceStringXml(e,t){if(Qc(Kc))$c.resourceStringToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-string"))},saveResourceArrayXml(e,t){if(Qc(Kc))$c.resourceStringArrayToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-array"))},saveResourceFontXml(e,t){if(Qc(Kc))$c.resourceFontToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-font"))},saveResourceColorXml(e,t){if(Qc(Kc))$c.resourceColorToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-color"))},saveResourceStyleXml(e,t){if(Qc(Kc))$c.resourceStyleToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-style"))},saveResourceDimenXml(e,t){if(Qc(Kc))$c.resourceDimenToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-dimen"))},saveResourceDrawableXml(e,t){if(Qc(Kc))$c.resourceDrawableToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-drawable"))},saveResourceAnimXml(e,t){if(Qc(Kc))$c.resourceAnimToXml(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-anim"))},saveResourceDrawableImage(e,t){if(Qc(Kc))$c.resourceDrawableImageToString(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-drawable-image"))},saveResourceRawVideo(e,t){if(Qc(Kc))$c.resourceRawVideoToString(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-raw-video"))},saveResourceRawAudio(e,t){if(Qc(Kc))$c.resourceRawAudioToString(Jc(t,void 0,e||Kc.userSettings.outputArchiveName+"-raw-audio"))},writeLayoutAllXml:e=>Qc(Kc)?$c.layoutAllToXml(Kc.layouts,e):{},writeResourceAllXml:e=>Qc(Kc)?$c.resourceAllToXml(e):{},writeResourceStringXml:e=>Qc(Kc)?$c.resourceStringToXml(e):[],writeResourceArrayXml:e=>Qc(Kc)?$c.resourceStringArrayToXml(e):[],writeResourceFontXml:e=>Qc(Kc)?$c.resourceFontToXml(e):[],writeResourceColorXml:e=>Qc(Kc)?$c.resourceColorToXml(e):[],writeResourceStyleXml:e=>Qc(Kc)?$c.resourceStyleToXml(e):[],writeResourceDimenXml:e=>Qc(Kc)?$c.resourceDimenToXml(e):[],writeResourceDrawableXml:e=>Qc(Kc)?$c.resourceDrawableToXml(e):[],writeResourceAnimXml:e=>Qc(Kc)?$c.resourceAnimToXml(e):[],writeResourceDrawableImage:e=>Qc(Kc)?$c.resourceDrawableImageToString(e):[],writeResourceRawVideo:e=>Qc(Kc)?$c.resourceRawVideoToString(e):[],writeResourceRawAudio:e=>Qc(Kc)?$c.resourceRawAudioToString(e):[]},create(){const e=jc.constant.EXT_NAME,i=n;return Kc=new t(2,yt,Gi,B),$c=new da,Kc.resourceHandler.setFileHandler($c),Object.assign(Kc.builtInExtensions,{[e.TABLE]:new ko(e.TABLE,2,void 0,["TABLE"]),[e.LIST]:new ao(e.LIST,2,void 0,["DIV","UL","OL","DL"]),[e.GRID]:new Un(e.GRID,2,void 0,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[e.CSS_GRID]:new dn(e.CSS_GRID,2),[e.FLEXBOX]:new Mn(e.FLEXBOX,2),[e.COLUMN]:new Ca(e.COLUMN,2),[e.SPRITE]:new mo(e.SPRITE,2),[e.ACCESSIBILITY]:new ga(e.ACCESSIBILITY,2),[e.RELATIVE]:new oo(e.RELATIVE,2),[e.VERTICAL_ALIGN]:new Mo(e.VERTICAL_ALIGN,2),[e.WHITESPACE]:new Do(e.WHITESPACE,2),[i.EXTERNAL]:new un(i.EXTERNAL,2),[i.SUBSTITUTE]:new So(i.SUBSTITUTE,2),[i.DELEGATE_BACKGROUND]:new rr(i.DELEGATE_BACKGROUND,2),[i.DELEGATE_MAXWIDTHHEIGHT]:new cr(i.DELEGATE_MAXWIDTHHEIGHT,2),[i.DELEGATE_NEGATIVEX]:new pr(i.DELEGATE_NEGATIVEX,2),[i.DELEGATE_PERCENT]:new _r(i.DELEGATE_PERCENT,2),[i.DELEGATE_POSITIVEX]:new Sr(i.DELEGATE_POSITIVEX,2),[i.DELEGATE_RADIOGROUP]:new Mr(i.DELEGATE_RADIOGROUP,2),[i.DELEGATE_SCROLLBAR]:new Hr(i.DELEGATE_SCROLLBAR,2),[i.RESOURCE_BACKGROUND]:new Ls(i.RESOURCE_BACKGROUND,2),[i.RESOURCE_DATA]:new Ps(i.RESOURCE_DATA,2),[i.RESOURCE_DIMENS]:new qs(i.RESOURCE_DIMENS,2),[i.RESOURCE_FONTS]:new pl(i.RESOURCE_FONTS,2),[i.RESOURCE_INCLUDES]:new ml(i.RESOURCE_INCLUDES,2),[i.RESOURCE_STRINGS]:new Rl(i.RESOURCE_STRINGS,2),[i.RESOURCE_STYLES]:new Ml(i.RESOURCE_STYLES,2),[i.RESOURCE_SVG]:new qc(i.RESOURCE_SVG,2),[i.CONSTRAINT_GUIDELINE]:new Fo(i.CONSTRAINT_GUIDELINE,2)}),Zc=true,{application:Kc,framework:2,userSettings:Object.assign({},Yc)}},cached(){if(Zc)return{application:Kc,framework:2,userSettings:Kc.userSettings};else return eh.create()}};return eh}();
