var android=function(){"use strict";class t extends squared.base.ApplicationUI{}var e;!function(t){t[t.EDIT=1]="EDIT",t[t.RANGE=2]="RANGE",t[t.RADIO=3]="RADIO",t[t.CHECKBOX=4]="CHECKBOX",t[t.SELECT=5]="SELECT",t[t.TEXT=6]="TEXT",t[t.SVG=7]="SVG",t[t.IMAGE=8]="IMAGE",t[t.BUTTON=9]="BUTTON",t[t.INLINE=10]="INLINE",t[t.LINE=11]="LINE",t[t.SPACE=12]="SPACE",t[t.BLOCK=13]="BLOCK",t[t.FRAME=14]="FRAME",t[t.LINEAR=15]="LINEAR",t[t.GRID=16]="GRID",t[t.RELATIVE=17]="RELATIVE",t[t.CONSTRAINT=18]="CONSTRAINT",t[t.WEBVIEW=19]="WEBVIEW",t[t.UNKNOWN=20]="UNKNOWN"}(e||(e={}));var n=Object.freeze({get CONTAINER_NODE(){return e}});const i={DELEGATE_FIXED:"android.delegate.fixed",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEVIEWPORT:"android.delegate.negative-viewport",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_STYLES:"android.resource.styles"},a={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",RANGE:"SeekBar",SVG:"ImageView",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},o={PLAINTEXT:e.TEXT,HR:e.LINE,SVG:e.SVG,IMG:e.IMAGE,BUTTON:e.BUTTON,SELECT:e.SELECT,TEXTAREA:e.EDIT,IFRAME:e.WEBVIEW,INPUT_RANGE:e.RANGE,INPUT_TEXT:e.EDIT,INPUT_PASSWORD:e.EDIT,INPUT_NUMBER:e.EDIT,INPUT_EMAIL:e.EDIT,INPUT_SEARCH:e.EDIT,INPUT_URL:e.EDIT,INPUT_DATE:e.EDIT,INPUT_TEL:e.EDIT,INPUT_TIME:e.EDIT,INPUT_WEEK:e.EDIT,INPUT_MONTH:e.EDIT,INPUT_BUTTON:e.BUTTON,INPUT_FILE:e.BUTTON,INPUT_IMAGE:e.BUTTON,INPUT_SUBMIT:e.BUTTON,INPUT_RESET:e.BUTTON,INPUT_CHECKBOX:e.CHECKBOX,INPUT_RADIO:e.RADIO,"INPUT_DATETIME-LOCAL":e.EDIT},r={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},s={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},l={ANDROID:"android",APP:"app",HORIZONTAL:"horizontal",VERTICAL:"vertical",PARENT:"parent",GRAVITY:"gravity",LAYOUT_GRAVITY:"layout_gravity",MATCH_PARENT:"match_parent",WRAP_CONTENT:"wrap_content",MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft",CENTER_HORIZONTAL:"center_horizontal",CENTER_VERTICAL:"center_vertical"},c={left:"start",right:"end",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toRightOf:"layout_toEndOf",layout_toLeftOf:"layout_toStartOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},d=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var h=Object.freeze({EXT_ANDROID:i,CONTAINER_ANDROID:a,ELEMENT_ANDROID:o,SUPPORT_ANDROID:{DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},LAYOUT_ANDROID:r,XMLNS_ANDROID:s,STRING_ANDROID:l,LOCALIZE_ANDROID:c,RESERVED_JAVA:d});const u=squared.base.ResourceUI,p=squared.lib.color,m=squared.lib.css,f=squared.lib.regex,g=squared.lib.util,T=u.STORED,S=/[^\w+]/g;let E;function A(t,e=!1){if(t)for(const n in t)if(g.isPlainObject(t[n]))A(t,e);else{let i=""+t[n];switch(n){case"text":if(!i.startsWith("@string/")&&""!==(i=b.addString(i,"",e))){t[n]=`@string/${i}`;continue}break;case"src":case"srcCompat":if(f.PREFIX.PROTOCOL.test(i)&&""!==(i=b.addImage({mdpi:i}))){t[n]=`@drawable/${i}`;continue}}const a=p.parseColor(i);if(a){const e=b.addColor(a);""!==e&&(t[n]=`@color/${e}`)}}}class b extends squared.base.ResourceUI{constructor(t,e){super(t,e),T.styles=new Map,T.themes=new Map,T.dimens=new Map,T.drawables=new Map,T.animators=new Map,E=t.controllerHandler.localSettings.supported.imageFormat}static formatOptions(t,e=!1){for(const n in t){const i=t[n];g.isPlainObject(i)&&A(i,e)}return t}static formatName(t){return f.CHAR.LEADINGNUMBER.test(t)&&(t="__"+t),t.replace(S,"_")}static addTheme(...t){for(const e of t){const t=e.output&&g.isString(e.output.path)?e.output.path.trim():"res/values",n=e.output&&g.isString(e.output.file)?e.output.file.trim():"themes.xml",i=`${g.trimString(t.trim(),"/")}/${g.trimString(n.trim(),"/")}`,a=T.themes.get(i)||new Map;let o="";if(""===e.name||"."===e.name.charAt(0)){t:for(const t of T.themes.values())for(const e of t.values())if(e.name){o=e.name;break t}if(""===o)continue}else o=e.name;e.name=o+("."===e.name.charAt(0)?e.name:""),b.formatOptions(e.items);const r=a.get(e.name);if(r)for(const t in e.items)r.items[t]=e.items[t];else a.set(e.name,e);T.themes.set(i,a)}}static addString(t,e="",n=!1){if(""!==t){""===e&&(e=t.trim());const i=g.isNumber(t);if(!i||n){for(const[e,n]of T.strings.entries())if(n===t)return e;const n=g.trimString(e.replace(f.XML.NONWORD_G,"_"),"_").split(/_+/);n.length>1?(n.length>4&&(n.length=4),e=n.join("_")):e=n[0],e=e.toLowerCase(),i||f.CHAR.LEADINGNUMBER.test(e)||d.includes(e)?e=`__${e}`:""===e&&(e=`__symbol${Math.ceil(1e5*Math.random())}`),T.strings.has(e)&&(e=b.generateId("string",e)),T.strings.set(e,t)}return e}return""}static addImage(t,e=""){if(t.mdpi){const n=g.fromLastIndexOf(t.mdpi,"/"),i=g.fromLastIndexOf(n,".").toLowerCase();if("svg"!==i&&E.includes(i))return b.insertStoredAsset("images",b.formatName(e+n.substring(0,n.length-i.length-1)),t)}return""}static addColor(t,e=!1){if("string"==typeof t&&(t=p.parseColor(t,void 0,e)),t&&(!t.transparent||e)){const e=t.semiopaque||t.transparent?t.valueAsARGB:t.value;let n=T.colors.get(e);if(n)return n;const i=p.findColorShade(t.value);if(i)return n=e===i.value?i.key:b.generateId("color",i.key),T.colors.set(e,n),n}return""}addImageSrc(t,e="",n){const i={};if("string"==typeof t){const n=f.CSS.URL.exec(t);if(n){if(!n[1].startsWith("data:image"))return b.addImage({mdpi:g.resolvePath(n[1])},e);i.mdpi=n[1]}}else{if(t.srcset){void 0===n&&(n=m.getSrcSet(t,E));for(const t of n){const e=t.pixelRatio;if(e>0){const n=t.src;e<1?i.ldpi=n:1===e?(void 0===i.mdpi||t.actualWidth)&&(i.mdpi=n):e<=1.5?i.hdpi=n:e<=2?i.xhdpi=n:e<=3?i.xxhdpi=n:i.xxxhdpi=n}}}void 0===i.mdpi&&(i.mdpi=t.src)}if(i.mdpi){const t=this.application.resourceHandler.getRawData(i.mdpi);if(t&&t.base64){if(t.filename.toLowerCase().endsWith(".svg"))return"";const n=e+t.filename;return this.application.resourceHandler.writeRawImage(n,t.base64),n.substring(0,n.lastIndexOf("."))}}return b.addImage(i,e)}get userSettings(){return this.application.userSettings}}const C=squared.lib.constant,y=squared.lib.util;function R(t,e,n,i=0){return(!n||n>=i)&&(t.attr=e,!0)}const I={28:{android:{},assign:{}},27:{android:{accessibilityHeading:!1,accessibilityPaneTitle:!1,appComponentFactory:!1,buttonCornerRadius:!1,cantSaveState:!1,dialogCornerRadius:!1,fallbackLineSpacing:!1,firstBaselineToTopHeight:!1,fontVariationSettings:!1,lastBaselineToBottomHeight:!1,lineHeight:!1,maxLongVersionCode:!1,outlineAmbientShadowColor:!1,outlineSpotShadowColor:!1,screenReaderFocusable:!1,textFontWeight:!1,ttcIndex:!1,versionCodeMajor:!1,versionMajor:!1,widgetFeatures:!1,windowLayoutInDisplayCutoutMode:!1},assign:{}},26:{android:{classLoader:!1,navigationBarDividerColor:!1,showWhenLocked:!1,turnScreenOn:!1,windowLightNavigationBar:!1},assign:{}},25:{android:{fontWeight:!1,justificationMode:!1,layout_marginHorizontal:!1,layout_marginVertical:!1,paddingHorizontal:!1,paddingVertical:!1},assign:{}},24:{android:{colorSecondary:!1,contextDescription:!1,contextUri:!1,roundIcon:!1,shortcutDisabledMessage:!1,shortcutId:!1,shortcutLongLabel:!1,shortcutShortLabel:!1,showMetadataInPreview:!1},assign:{}},23:{android:{backupInForeground:!1,bitmap:!1,buttonGravity:!1,canControlMagnification:!1,canPerformGestures:!1,canRecord:!1,collapseIcon:!1,contentInsetEndWithActions:!1,contentInsetStartWithNavigation:!1,contextPopupMenuStyle:!1,countDown:!1,defaultHeight:!1,defaultToDeviceProtectedStorage:!1,defaultWidth:!1,directBootAware:!1,enableVrMode:!1,endX:!1,endY:!1,externalService:!1,fillType:!1,forceHasOverlappingRendering:!1,hotSpotX:!1,hotSpotY:!1,languageTag:!1,level:!1,listMenuViewStyle:!1,maxButtonHeight:!1,networkSecurityConfig:!1,numberPickerStyle:!1,offset:!1,pointerIcon:!1,popupEnterTransition:!1,popupExitTransition:!1,preferenceFragmentStyle:!1,resizeableActivity:!1,startX:!1,startY:!1,subMenuArrow:!1,supportsLocalInteraction:!1,supportsPictureInPicture:!1,textAppearancePopupMenuHeader:!1,tickMark:!1,tickMarkTint:!1,tickMarkTintMode:!1,titleMargin:!1,titleMarginBottom:!1,titleMarginEnd:!1,titleMarginStart:!1,titleMarginTop:!1,tunerCount:!1,use32bitAbi:!1,version:!1,windowBackgroundFallback:!1},assign:{}},22:{android:{allowUndo:!1,autoVerify:!1,breakStrategy:!1,colorBackgroundFloating:!1,contextClickable:!1,drawableTint:!1,drawableTintMode:!1,end:t=>R(t,C.CSS.RIGHT),extractNativeLibs:!1,fingerprintAuthDrawable:!1,fraction:!1,fullBackupContent:!1,hyphenationFrequency:!1,lockTaskMode:!1,logoDescription:!1,numbersInnerTextColor:!1,scrollIndicators:!1,showForAllUsers:!1,start:t=>R(t,C.CSS.LEFT),subtitleTextColor:!1,supportsAssist:!1,supportsLaunchVoiceAssistFromKeyguard:!1,thumbPosition:!1,titleTextColor:!1,trackTint:!1,trackTintMode:!1,usesCleartextTraffic:!1,windowLightStatusBar:!1},assign:{}},21:{android:{accessibilityTraversalAfter:!1,accessibilityTraversalBefore:!1,collapseContentDescription:!1,dialogPreferredPadding:!1,resizeClip:!1,revisionCode:!1,searchHintIcon:!1},assign:{}},20:{android:{actionBarPopupTheme:!1,actionBarTheme:!1,actionModeFindDrawable:!1,actionModeShareDrawable:!1,actionModeWebSearchDrawable:!1,actionOverflowMenuStyle:!1,amPmBackgroundColor:!1,amPmTextColor:!1,ambientShadowAlpha:!1,autoRemoveFromRecents:!1,backgroundTint:!1,backgroundTintMode:!1,banner:!1,buttonBarNegativeButtonStyle:!1,buttonBarNeutralButtonStyle:!1,buttonBarPositiveButtonStyle:!1,buttonTint:!1,buttonTintMode:!1,calendarTextColor:!1,checkMarkTint:!1,checkMarkTintMode:!1,closeIcon:!1,colorAccent:!1,colorButtonNormal:!1,colorControlActivated:!1,colorControlHighlight:!1,colorControlNormal:!1,colorEdgeEffect:!1,colorPrimary:!1,colorPrimaryDark:!1,commitIcon:!1,contentAgeHint:!1,contentInsetEnd:!1,contentInsetLeft:!1,contentInsetRight:!1,contentInsetStart:!1,controlX1:!1,controlX2:!1,controlY1:!1,controlY2:!1,country:!1,datePickerDialogTheme:!1,datePickerMode:!1,dayOfWeekBackground:!1,dayOfWeekTextAppearance:!1,documentLaunchMode:!1,elegantTextHeight:!1,elevation:!1,excludeClass:!1,excludeId:!1,excludeName:!1,fastScrollStyle:!1,fillAlpha:!1,fillColor:!1,fontFeatureSettings:!1,foregroundTint:!1,foregroundTintMode:!1,fragmentAllowEnterTransitionOverlap:!1,fragmentAllowReturnTransitionOverlap:!1,fragmentEnterTransition:!1,fragmentExitTransition:!1,fragmentReenterTransition:!1,fragmentReturnTransition:!1,fragmentSharedElementEnterTransition:!1,fragmentSharedElementReturnTransition:!1,fromId:!1,fullBackupOnly:!1,goIcon:!1,headerAmPmTextAppearance:!1,headerDayOfMonthTextAppearance:!1,headerMonthTextAppearance:!1,headerTimeTextAppearance:!1,headerYearTextAppearance:!1,hideOnContentScroll:!1,indeterminateTint:!1,indeterminateTintMode:!1,inset:!1,isGame:!1,launchTaskBehindSourceAnimation:!1,launchTaskBehindTargetAnimation:!1,layout_columnWeight:!1,layout_rowWeight:!1,letterSpacing:!1,matchOrder:!1,maxRecentsv:!1,maximumAngle:!1,minimumHorizontalAngle:!1,minimumVerticalAngle:!1,multiArch:!1,navigationBarColor:!1,navigationContentDescription:!1,navigationIcon:!1,nestedScrollingEnabled:!1,numbersBackgroundColor:!1,numbersSelectorColor:!1,numbersTextColor:!1,outlineProvider:!1,overlapAnchor:!1,paddingMode:!1,pathData:!1,patternPathData:!1,persistableMode:!1,popupElevation:!1,popupTheme:!1,progressBackgroundTint:!1,progressBackgroundTintMode:!1,progressTint:!1,progressTintMode:!1,propertyXName:!1,propertyYName:!1,queryBackground:!1,recognitionService:!1,relinquishTaskIdentity:!1,reparent:!1,reparentWithOverlay:!1,restrictionType:!1,resumeWhilePausing:!1,reversible:!1,searchIcon:!1,searchViewStyle:!1,secondaryProgressTint:!1,secondaryProgressTintMode:!1,selectableItemBackgroundBorderless:!1,sessionService:!1,setupActivity:!1,showText:!1,slideEdge:!1,splitTrack:!1,spotShadowAlpha:!1,src:(t,e,n)=>(n.svgElement&&(t.obj="app",t.attr="srcCompat"),!0),stackViewStyle:!1,stateListAnimator:!1,statusBarColor:!1,strokeAlpha:!1,strokeColor:!1,strokeLineCap:!1,strokeLineJoin:!1,strokeMiterLimit:!1,strokeWidth:!1,submitBackground:!1,subtitleTextAppearance:!1,suggestionRowLayout:!1,switchStyle:!1,targetName:!1,textAppearanceListItemSecondary:!1,thumbTint:!1,thumbTintMode:!1,tileModeX:!1,tileModeY:!1,timePickerDialogTheme:!1,timePickerMode:!1,timePickerStyle:!1,tintMode:!1,titleTextAppearance:!1,toId:!1,toolbarStyle:!1,touchscreenBlocksFocus:!1,transitionGroup:!1,transitionName:!1,transitionVisibilityMode:!1,translateX:!1,translateY:!1,translationZ:!1,trimPathEnd:!1,trimPathOffset:!1,trimPathStart:!1,viewportHeight:!1,viewportWidth:!1,voiceIcon:!1,windowActivityTransitions:!1,windowAllowEnterTransitionOverlap:!1,windowAllowReturnTransitionOverlap:!1,windowClipToOutline:!1,windowContentTransitionManager:!1,windowContentTransitions:!1,windowDrawsSystemBarBackgrounds:!1,windowElevation:!1,windowEnterTransition:!1,windowExitTransition:!1,windowReenterTransition:!1,windowReturnTransition:!1,windowSharedElementEnterTransition:!1,windowSharedElementExitTransition:!1,windowSharedElementReenterTransition:!1,windowSharedElementReturnTransition:!1,windowSharedElementsUseOverlay:!1,windowTransitionBackgroundFadeDuration:!1,yearListItemTextAppearance:!1,yearListSelectorColor:!1},assign:{}},19:{android:{allowEmbedded:!1,windowSwipeToDismiss:!1},assign:{}},18:{android:{accessibilityLiveRegion:!1,addPrintersActivity:!1,advancedPrintOptionsActivity:!1,apduServiceBanner:!1,autoMirrored:!1,category:!1,fadingMode:!1,fromScene:!1,isAsciiCapable:!1,keySet:!1,requireDeviceUnlock:!1,ssp:!1,sspPattern:!1,sspPrefix:!1,startDelay:!1,supportsSwitchingToNextInputMethod:!1,targetId:!1,toScene:!1,transition:!1,transitionOrdering:!1,vendor:!1,windowTranslucentNavigation:!1,windowTranslucentStatus:!1},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(t,e)=>e<26,canRequestFilterKeyEvents:!1,canRequestTouchExplorationMode:!1,childIndicatorEnd:!1,childIndicatorStart:!1,indicatorEnd:!1,indicatorStart:!1,layoutMode:!1,mipMap:!1,mirrorForRtl:!1,requiredAccountType:!1,requiredForAllUsers:!1,restrictedAccountType:!1,windowOverscan:!1},assign:{}},16:{android:{checkedTextViewStyle:!1,format12Hour:!1,format24Hour:!1,initialKeyguardLayout:!1,labelFor:!1,layoutDirection:!1,layout_alignEnd:t=>R(t,"layout_alignRight"),layout_alignParentEnd:t=>R(t,"layout_alignParentRight"),layout_alignParentStart:t=>R(t,"layout_alignParentLeft"),layout_alignStart:t=>R(t,"layout_alignLeft"),layout_marginEnd:t=>R(t,"layout_marginRight"),layout_marginStart:t=>R(t,"layout_marginLeft"),layout_toEndOf:t=>R(t,"layout_toRightOf"),layout_toStartOf:t=>R(t,"layout_toLeftOf"),listPreferredItemPaddingEnd:t=>R(t,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:t=>R(t,"listPreferredItemPaddingLeft"),paddingEnd:t=>R(t,l.PADDING_RIGHT),paddingStart:t=>R(t,l.PADDING_LEFT),permissionFlags:!1,permissionGroupFlags:!1,presentationTheme:!1,showOnLockScreen:!1,singleUser:!1,subtypeId:!1,supportsRtl:!1,textAlignment:!1,textDirection:!1,timeZone:!1,widgetCategory:!1},assign:{}},15:{android:{fontFamily:!1,importantForAccessibility:!1,isolatedProcess:!1,keyboardLayout:!1,mediaRouteButtonStyle:!1,mediaRouteTypes:!1,parentActivityName:!1},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},N={android:{amPmBackgroundColor:(t,e)=>R(t,"headerBackground",e,23),amPmTextColor:(t,e)=>R(t,"headerTextColor",e,23),animationResolution:(t,e)=>e<16,canRequestEnhancedWebAccessibility:(t,e)=>e<26,dayOfWeekBackground:(t,e)=>e<23,dayOfWeekTextAppearance:(t,e)=>e<23,directionDescriptions:(t,e)=>e<23,headerAmPmTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),headerDayOfMonthTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),headerMonthTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),headerTimeTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),headerYearTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),showOnLockScreen:(t,e)=>R(t,"showForAllUsers",e,23),targetDescriptions:(t,e)=>e<23,yearListItemTextAppearance:(t,e)=>R(t,"yearListTextColor",e,23),yearListSelectorColor:(t,e)=>e<23}};var P=Object.freeze({API_ANDROID:I,DEPRECATED_ANDROID:N,getValue:function(t,e,n,i){for(const a of[I[t],I[0]]){const t=y.optionalAsString(a,`assign.${e}.${n}.${i}`);if(y.isString(t))return t}return""}});const _=squared.lib.constant,O=squared.lib.math,x=squared.lib.util,L=/^@\+?id\//;function w(t,e,n=4){return 0===t?0:0===e?1:parseFloat(Math.max(t/(t+e),0).toPrecision(n))}function v(t,e=160,n=!1,i=3){let a=parseFloat(t);return isNaN(a)?"0dp":160!==e?(0!==(a/=e/160)&&a>-1&&a<1?a.toPrecision(i):O.truncate(a,i-1))+(n?"sp":"dp"):Math.round(a)+(n?"sp":"dp")}function H(t){return t.replace(L,"")}function M(t,e={},n={}){return Object.assign({android:e,app:n},t)}function G(t){const e={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(x.isPlainObject(t))for(const n in e)typeof t[n]==typeof e[n]&&(e[n]=t[n]);return e}function D(t,e,n){return e&&n>=17&&c[t]||t}function B(t){return s[t]?`xmlns:${t}="${s[t]}"`:""}function X(t){let e="";for(const n in s)-1!==t.indexOf(`${n}:`)&&(e+=`\n\t${B(n)}`);return e}var W=Object.freeze({convertLength:v,getDocumentId:H,getHorizontalBias:function(t){const e=t.documentParent;return w(Math.max(0,t.actualRect(_.CSS.LEFT,"bounds")-e.box.left),Math.max(0,e.box.right-t.actualRect(_.CSS.RIGHT,"bounds")),t.localSettings.floatPrecision)},getVerticalBias:function(t){const e=t.documentParent;return w(Math.max(0,t.actualRect(_.CSS.TOP,"bounds")-e.box.top),Math.max(0,e.box.bottom-t.actualRect(_.CSS.BOTTOM,"bounds")),t.localSettings.floatPrecision)},createViewAttribute:M,createStyleAttribute:G,localizeString:D,getXmlNs:B,getRootNs:X}),k=squared.base.NodeUI,V=squared.base.ResourceUI;const F=squared.lib.client,U=squared.lib.constant,z=squared.lib.css,q=squared.lib.dom,Y=squared.lib.math,j=squared.lib.util,$=squared.base.lib.constant,Z=squared.base.lib.enumeration,K=/^attr[A-Z]/,J=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,Q=/[^\w$\-_.]/g;function tt(t,e=!1){switch(t){case"justify":case"initial":case"inherit":return"";case U.CSS.CENTER:return l.CENTER_HORIZONTAL;case U.CSS.START:case U.CSS.LEFT:if(e)return"";default:return t}}function et(t){if(!t.blockWidth||t.hasWidth||t.hasPX("maxWidth")||t.innerWrapped&&t.innerWrapped.has(U.CSS.WIDTH,4,{not:U.CSS.PERCENT_100})){const e=[];if(t.autoMargin.leftRight?e.push(l.CENTER_HORIZONTAL):t.autoMargin.left?e.push(U.CSS.RIGHT):t.autoMargin.right&&e.push(U.CSS.LEFT),t.autoMargin.topBottom?e.push(l.CENTER_VERTICAL):t.autoMargin.top?e.push(U.CSS.BOTTOM):t.autoMargin.bottom&&e.push(U.CSS.TOP),e.length){const n=void 0!==t.outerWrapper||!t.blockWidth&&t.pageFlow?l.LAYOUT_GRAVITY:l.GRAVITY;for(const i of e)t.mergeGravity(n,i);return!0}}return!1}function nt(t,e,n){if(t.localSettings.targetAPI>=28)t.android("lineHeight",z.formatPX(e),n);else{const i=(e-t.actualHeight)/2;i>0&&t.android("lineSpacingExtra",z.formatPX(i),n)}if(t.styleElement&&!t.hasPX(U.CSS.HEIGHT)&&t.cssTry("line-height","normal")){if(t.cssTry("white-space","nowrap")){const n=(e-t.element.getBoundingClientRect().height)/2;Math.floor(n)>0&&(t.modifyBox(32,Math.round(n)),t.blockStatic||t.modifyBox(128,Math.floor(n))),t.cssFinally("white-space")}t.cssFinally("line-height")}}function it(t,n,i,a=!0,o=!0){if(!t.is(e.IMAGE)&&0!==t.actualHeight)if(t.multiline)nt(t,n,!1);else if(0===t.length&&(t.pageFlow||t.textContent.length)){let e=0,r=!0;if(t.styleElement&&!i&&!t.hasPX(U.CSS.HEIGHT)&&t.cssTry("line-height","normal"))t.cssTry("white-space","nowrap")&&(e=(n-(t.element.getBoundingClientRect().height||t.actualHeight))/2,r=!1,t.cssFinally("white-space")),t.cssFinally("line-height");else{if(i&&t.inlineText&&!t.inline)return void at(t,n);e=(n-t.actualHeight)/2}Math.floor(e)>0&&(a&&t.modifyBox(r&&t.textElement&&!t.plainText&&!i?32:2,Math.round(e)),o&&t.modifyBox(r&&t.textElement&&!t.plainText&&!i?128:8,Math.floor(e)))}else i&&(!t.hasHeight||n>t.height)&&(t.layoutHorizontal&&void 0===t.horizontalRows||t.hasAlign(4096))&&at(t,n)}function at(t,e){t.inlineText&&(e+=t.contentBoxHeight,t.mergeGravity(l.GRAVITY,l.CENTER_VERTICAL,!1)),e>t.height&&t.android("minHeight",z.formatPX(e))}function ot(t){t.textElement&&(t.android("maxLines","1"),t.android("ellipsize",U.CSS.END))}const rt=(t,n)=>!!t.renderParent&&n===U.CSS.PX_0&&(t.renderParent.layoutConstraint||t.renderParent.is(e.GRID));var st=t=>(class n extends t{constructor(t=0,e="0",n,i){super(t,e,n),this.renderChildren=[],this.constraint={horizontal:!1,vertical:!1,current:{}},this._namespaces=[l.ANDROID,l.APP],this._cached={},this._controlName="",this._containerType=0,this.__android={},this.__app={},n&&this.init(),i&&i(this)}static getControlName(t){return a[e[t]]}android(t,e,n=!0){if(e){if(this.localSettings.targetAPI<28){const i={};if(!this.supported(t,i))return"";Object.keys(i).length&&(j.isString(i.attr)&&(t=i.attr),j.isString(i.value)&&(e=i.value),"boolean"==typeof i.overwrite&&(n=i.overwrite))}this.attr(l.ANDROID,t,e,n)}return this.__android[t]||""}app(t,e,n=!0){return e&&this.attr(l.APP,t,e,n),this.__app[t]||""}apply(t){const e=Object.assign({},t);super.apply(e);for(const t in e)this.formatted(`${t}="${e[t]}"`)}formatted(t,e=!0){const n=J.exec(t);n&&this.attr(n[1]||"_",n[2],n[3],e)}anchor(t,e="",n){const i=this.anchorTarget,a=i.renderParent;if(a&&i.documentId!==e)if(a.layoutConstraint){if(""===e||void 0===i.constraint.current[t]||n){e&&void 0===n&&(n=e===l.PARENT);const a=r.constraint[t];if(a){let o=!1;switch(i.app(this.localizeString(a),e,n),t){case U.CSS.LEFT:case U.CSS.RIGHT:e===l.PARENT&&(i.constraint.horizontal=!0);case $.STRING_BASE.LEFT_RIGHT:case $.STRING_BASE.RIGHT_LEFT:o=!0;break;case U.CSS.TOP:case U.CSS.BOTTOM:case"baseline":e===l.PARENT&&(i.constraint.vertical=!0)}return i.constraint.current[t]={documentId:e,horizontal:o},!0}}}else if(a.layoutRelative){return e&&void 0===n&&(n="true"===e),i.android(this.localizeString(r["true"===e?"relativeParent":"relative"][t]),e,n),!0}return!1}anchorParent(t,e,n,i){const a=this.anchorTarget,o=a.renderParent;if(o){const r=t===l.HORIZONTAL;if(o.layoutConstraint){if(i||!this.constraint[t])return a.anchor(r?U.CSS.LEFT:U.CSS.TOP,l.PARENT,i),a.anchor(r?U.CSS.RIGHT:U.CSS.BOTTOM,l.PARENT,i),a.constraint[t]=!0,e&&a.anchorStyle(t,e,n,i),!0}else if(o.layoutRelative)return a.anchor(r?U.CSS.LEFT:U.CSS.TOP,"true",i),a.anchor(r?U.CSS.RIGHT:U.CSS.BOTTOM,"true",i),!0}return!1}anchorStyle(t,e="packed",n=0,i=!0){const a=this.anchorTarget,o=t===l.HORIZONTAL;a.app(o?"layout_constraintHorizontal_chainStyle":"layout_constraintVertical_chainStyle",e,i),a.app(o?"layout_constraintHorizontal_bias":"layout_constraintVertical_bias",""+n,i)}anchorDelete(...t){const e=this.anchorTarget,n=e.renderParent;if(n)if(n.layoutConstraint)e.delete(l.APP,...j.replaceMap(t,t=>this.localizeString(r.constraint[t])));else if(n.layoutRelative)for(const n of t)""!==e.alignSibling(n)?e.delete(l.ANDROID,r.relative[n],this.localizeString(r.relative[n])):r.relativeParent[n]&&e.delete(l.ANDROID,this.localizeString(r.relativeParent[n]))}anchorClear(){const t=this.anchorTarget,e=t.renderParent;e&&(e.layoutConstraint?t.anchorDelete(...Object.keys(r.constraint)):e.layoutRelative&&(t.anchorDelete(...Object.keys(r.relativeParent)),t.anchorDelete(...Object.keys(r.relative))))}alignParent(t){const e=this.anchorTarget,n=e.renderParent;if(n)if(n.layoutConstraint){const n=r.constraint[t];if(n)return e.app(this.localizeString(n))===l.PARENT||e.app(n)===l.PARENT}else if(n.layoutRelative){const n=r.relativeParent[t];if(n)return"true"===e.android(this.localizeString(n))||"true"===e.android(n)}return!1}alignSibling(t,e){const n=this.anchorTarget,i=n.renderParent;if(i)if(e){if(i.layoutConstraint){const i=r.constraint[t];i&&n.app(this.localizeString(i),e)}else if(i.layoutRelative){const i=r.relative[t];i&&n.android(this.localizeString(i),e)}}else if(i.layoutConstraint){const e=r.constraint[t];if(e){const t=n.app(this.localizeString(e))||n.app(e);return t!==l.PARENT&&t!==i.documentId?t:""}}else if(i.layoutRelative){const e=r.relative[t];if(e)return n.android(this.localizeString(e))||n.android(e)}return""}supported(t,e={}){if(this.localSettings.targetAPI<28){const n=N.android;if(n&&"function"==typeof n[t]){const i=n[t](e,this.localSettings.targetAPI,this);if(!i||Object.keys(e).length)return i}for(let n=this.localSettings.targetAPI;n<=28;n++){const i=I[n];if(i&&void 0!==i.android[t]){const n=i.android[t];return"function"==typeof n?n(e,this.localSettings.targetAPI,this):n}}}return!0}combine(...t){const e=[];let n;for(const i of this._namespaces)if(0===t.length||t.includes(i)){const t=this[`__${i}`];if(t)for(const a in t){const o=("_"!==i?`${i}:`:"")+`${a}="${t[a]}"`;"id"===a?n=o:e.push(o)}}return e.sort((t,e)=>t>e?1:-1),n&&e.unshift(n),e}localizeString(t){return this.hasProcedure(Z.NODE_PROCEDURE.LOCALIZATION)?D(t,this.localSettings.supportRTL,this.localSettings.targetAPI):t}hide(t){t?this.android("visibility","invisible"):super.hide()}clone(t,e=!1,i=!1){const a=new n(t||this.id,this.sessionId,this.element||void 0);if(a.localSettings=Object.assign({},this.localSettings),void 0!==t?a.setControlType(this.controlName,this.containerType):(a.controlId=this.controlId,a.controlName=this.controlName,a.containerType=this.containerType),this.cloneBase(a),e){this._boxReset&&Object.assign(a.unsafe("boxReset"),this._boxReset),this._boxAdjustment&&Object.assign(a.unsafe("boxAdjustment"),this._boxAdjustment);for(const t of this._namespaces){const e=this[`__${t}`];for(const n in e)a.attr(t,n,t===l.ANDROID&&"id"===n?a.documentId:e[n])}}return i&&(a.anchorClear(),a.anchor(U.CSS.LEFT,this.documentId)&&(a.modifyBox(16),Object.assign(a.unsafe("boxAdjustment"),{marginLeft:0})),a.anchor(U.CSS.TOP,this.documentId)&&(a.modifyBox(2),Object.assign(a.unsafe("boxAdjustment"),{marginTop:0}))),a}setControlType(t,n){if(this.controlName=t,n?this.containerType=n:0===this.containerType&&(this.containerType=e.UNKNOWN),""===this.controlId){let t;this.styleElement&&((t=(t=>t?t.trim().replace(Q,"_").toLowerCase():"")(this.elementId||q.getNamedItem(this.element,"name")))===l.PARENT||d.includes(t))&&(t=`_${t}`),this.controlId=j.convertWord(V.generateId(l.ANDROID,t||j.fromLastIndexOf(this.controlName,".").toLowerCase(),t?0:1)),this.android("id",this.documentId)}}setLayout(){const t=this.renderParent;if(t){switch(this.cssAscend("visibility",!0)){case"hidden":case"collapse":this.hide(!0)}if(this.plainText)return this.setLayoutWidth(l.WRAP_CONTENT,!1),void this.setLayoutHeight(l.WRAP_CONTENT,!1);const n=this.documentParent;let i=!1;if(this.documentBody&&(!this.hasWidth&&this.renderChildren.some(t=>t.alignParent(U.CSS.RIGHT))&&this.setLayoutWidth(l.MATCH_PARENT,!1),!this.hasHeight&&this.renderChildren.some(t=>t.alignParent(U.CSS.BOTTOM))&&this.setLayoutHeight(l.MATCH_PARENT,!1)),""===this.layoutWidth){let a="";if(!this.hasPX(U.CSS.WIDTH)||this.inlineStatic&&""!==this.cssInitial(U.CSS.WIDTH))this.imageElement&&this.hasPX(U.CSS.HEIGHT)&&(a=l.WRAP_CONTENT,i=!0);else{const o=this.css(U.CSS.WIDTH);let r=-1;if(z.isLength(o))r=this.actualWidth;else if(z.isPercent(o))if(this.inputElement)r=this.bounds.width;else if(t.layoutConstraint&&!t.hasPX(U.CSS.WIDTH,!1))o===U.CSS.PERCENT_100?a=l.MATCH_PARENT:(this.app("layout_constraintWidth_percent",Y.truncate(parseFloat(o)/100,this.localSettings.floatPrecision)),a=U.CSS.PX_0),i=!0;else if(t.is(e.GRID))a=U.CSS.PX_0,this.android("layout_columnWeight",Y.truncate(parseFloat(o)/100,this.localSettings.floatPrecision)),i=!0;else if(this.imageElement)o!==U.CSS.PERCENT_100||t.inlineWidth?(r=this.bounds.width,i=!0):a=l.MATCH_PARENT;else if(o===U.CSS.PERCENT_100){if(!this.support.maxWidth){const e=this.css("maxWidth"),i=this.parseUnit(e),o=this.absoluteParent||n;e===U.CSS.PERCENT_100?!t.inlineWidth&&j.aboveRange(i,o.box.width)?a=l.MATCH_PARENT:r=Math.min(this.actualWidth,i):i>0&&(this.blockDimension?r=Math.min(this.actualWidth,i):a=Math.ceil(i)<Math.floor(o.width)?l.WRAP_CONTENT:l.MATCH_PARENT)}""!==a||!this.documentRoot&&t.inlineWidth||(a=l.MATCH_PARENT)}else r=this.actualWidth;r>0&&(a=z.formatPX(r))}""===a&&(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage?a=z.formatPX(this.actualWidth):(!this.blockStatic||this.inputElement||t.is(e.GRID)||(n.layoutElement&&"flex"!==this.display?!n.flexElement&&t.layoutConstraint&&this.alignParent(U.CSS.LEFT)&&this.alignParent(U.CSS.RIGHT)&&(a=this.autoMargin.horizontal||this.ascend(t=>t.hasPX(U.CSS.WIDTH)||t.blockStatic).length?U.CSS.PX_0:l.MATCH_PARENT):a=l.MATCH_PARENT),""===a&&(t.blockWidth&&this.layoutVertical&&(t.layoutFrame&&this.rightAligned||this.layoutLinear&&this.naturalElements.some(t=>t.lineBreak)||this.renderChildren.some(t=>t.layoutConstraint&&t.blockStatic))||!this.pageFlow&&this.absoluteParent===n&&this.hasPX(U.CSS.LEFT)&&this.hasPX(U.CSS.RIGHT)||n.flexElement&&this.flexbox.grow>0&&t.flexibleWidth&&"row"===n.css("flexDirection"))&&(a=l.MATCH_PARENT))),this.setLayoutWidth(a||l.WRAP_CONTENT)}if(""===this.layoutHeight){let a="";if(!this.hasPX(U.CSS.HEIGHT)||this.inlineStatic&&""!==this.cssInitial(U.CSS.HEIGHT))this.imageElement&&this.hasPX(U.CSS.WIDTH)&&(a=l.WRAP_CONTENT,i=!0);else{const o=this.css(U.CSS.HEIGHT);let r=-1;if(z.isLength(o))r=this.actualHeight;else if(z.isPercent(o)){if(this.inputElement)r=this.bounds.height;else if(this.imageElement)o!==U.CSS.PERCENT_100||t.inlineHeight?(r=this.bounds.height,i=!0):a=l.MATCH_PARENT;else if(o===U.CSS.PERCENT_100){if(!this.support.maxHeight){const e=this.css("maxHeight"),i=this.parseUnit(e),o=this.absoluteParent||n;e===U.CSS.PERCENT_100?!t.inlineHeight&&j.aboveRange(i,o.box.height)?a=l.MATCH_PARENT:r=Math.min(this.actualHeight,i):i>0&&(this.blockDimension?r=Math.min(this.actualHeight,i):a=Math.ceil(i)<Math.floor(o.box.height)?l.WRAP_CONTENT:l.MATCH_PARENT)}""!==a||!this.documentRoot&&t.inlineHeight||(a=l.MATCH_PARENT)}""===a&&this.hasHeight&&(r=this.actualHeight)}r>0&&(this.is(e.LINE)&&"HR"!==this.tagName&&this.hasPX(U.CSS.HEIGHT,!0,!0)&&(r+=this.borderTopWidth+this.borderBottomWidth),a=z.formatPX(r))}""===a&&(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage?t.layoutConstraint&&this.alignParent(U.CSS.TOP)&&this.actualHeight>=(this.absoluteParent||n).box.height?(a=U.CSS.PX_0,this.anchor(U.CSS.BOTTOM,l.PARENT)):a=z.formatPX(this.actualHeight):("table-cell"===this.display||!this.pageFlow&&this.leftTopAxis&&this.hasPX(U.CSS.TOP)&&this.hasPX(U.CSS.BOTTOM)||void 0===this.outerWrapper&&this.onlyChild&&t.flexElement&&!t.inlineHeight&&"row"===t.css("flexDirection"))&&(a=l.MATCH_PARENT)),this.setLayoutHeight(a||l.WRAP_CONTENT)}if(!this.hasPX("minWidth")||n.flexElement&&this.flexbox.grow>0&&"column"===n.css("flexDirection")||this.android("minWidth",this.convertPX(this.css("minWidth")),!1),!this.hasPX("minHeight")||n.flexElement&&this.flexbox.grow>0&&"row"===n.css("flexDirection")||this.android("minHeight",this.convertPX(this.css("minHeight"),U.CSS.HEIGHT),!1),this.support.maxWidth){const t=this.css("maxWidth");let e=-1;z.isLength(t,!0)?t===U.CSS.PERCENT_100?this.imageElement?e=this.element.naturalWidth:this.svgElement&&(e=this.bounds.width):e=this.parseUnit(this.css("maxWidth")):!this.pageFlow&&this.textElement&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&!/\n/.test(this.textContent)&&(e=Math.ceil(this.bounds.width)),-1!==e&&(this.android("maxWidth",z.formatPX(e),!1),this.imageElement&&(i=!0))}if(this.support.maxHeight){const t=this.css("maxHeight");if(z.isLength(t,!0)){let e=-1;(e=t===U.CSS.PERCENT_100&&this.imageElement?this.element.naturalHeight:this.parseUnit(this.css("maxHeight"),U.CSS.HEIGHT))>=0&&(this.android("maxHeight",z.formatPX(e)),this.imageElement&&(i=!0))}}this.imageElement&&(i||this.blockWidth||this.blockHeight)&&this.android("adjustViewBounds","true")}}setAlignment(){const t=this.renderParent;if(t){const n=this.hasAlign(512),i=this.outerWrapper||this,a=i.renderParent||t;let o=tt(this.cssInitial("textAlign",!0)),r=tt(this.cssAscend("textAlign"),!0);if(this.nodeGroup&&!n&&""===o){const t=this.actualParent;t&&(o=tt(t.cssInitial("textAlign",!0)))}if(this.pageFlow){let s="";if(this.inlineVertical&&(a.layoutHorizontal&&!a.support.container.positionRelative||a.is(e.GRID)||"table-cell"===this.display)){const t="table-cell"===this.display?l.GRAVITY:l.LAYOUT_GRAVITY;switch(this.cssInitial("verticalAlign",!0)){case U.CSS.TOP:i.mergeGravity(t,U.CSS.TOP);break;case U.CSS.MIDDLE:i.mergeGravity(t,l.CENTER_VERTICAL);break;case U.CSS.BOTTOM:i.mergeGravity(t,U.CSS.BOTTOM)}}if(this.blockWidth?i.nodeGroup&&i.layoutVertical&&this.rightAligned&&i.renderEach(t=>{t.rightAligned&&t.mergeGravity(l.LAYOUT_GRAVITY,U.CSS.RIGHT)}):((a.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))&&(this.floating?i.mergeGravity(l.LAYOUT_GRAVITY,this.float):et(i)||""===o||!this.hasWidth||this.blockStatic||"table"===this.display||i.mergeGravity(l.LAYOUT_GRAVITY,o,!1)),this.rightAligned||this.renderChildren.length&&this.renderChildren.every(t=>t.rightAligned)?s=U.CSS.RIGHT:this.nodeGroup&&n&&!this.renderChildren.some(t=>t.rightAligned)&&(s=U.CSS.LEFT)),t.layoutFrame&&void 0===this.innerWrapped){if(et(this)||(this.floating&&(s=this.float),""!==s&&(t.inlineWidth||!t.documentRoot&&this.onlyChild)&&t.mergeGravity(l.LAYOUT_GRAVITY,s)),this.onlyChild&&"table-cell"===t.display){let e;switch(t.css("verticalAlign")){case U.CSS.TOP:e=U.CSS.TOP;break;case U.CSS.BOTTOM:e=U.CSS.BOTTOM;break;default:e=l.CENTER_VERTICAL}this.mergeGravity(l.LAYOUT_GRAVITY,e)}}else a.layoutFrame&&t.blockWidth&&this.rightAligned&&this.mergeGravity(l.LAYOUT_GRAVITY,U.CSS.RIGHT);""!==s?this.blockWidth?""!==o&&s!==U.CSS.RIGHT||(o=s):(i.blockWidth&&this!==i?this:i).mergeGravity(l.LAYOUT_GRAVITY,s):et(i.inlineWidth?i:this)&&""!==o&&(r="")}""!==r&&(!this.blockStatic||this.centerAligned||this.rightAligned||i.mergeGravity(l.LAYOUT_GRAVITY,U.CSS.LEFT,!1)),this.layoutConstraint||this.layoutFrame||this.is(e.GRID)||this.layoutElement||(""!==o?this.imageOrSvgElement||this.mergeGravity(l.GRAVITY,o):""===r||this.inputElement||(this.imageOrSvgElement?this.pageFlow&&this.mergeGravity(l.LAYOUT_GRAVITY,r):this.mergeGravity(l.GRAVITY,r)))}}mergeGravity(t,e,n=!0){if(t===l.LAYOUT_GRAVITY){const t=this.renderParent;if(t){if(function(t){switch(t){case U.CSS.LEFT:case U.CSS.START:case U.CSS.RIGHT:case U.CSS.END:case l.CENTER_HORIZONTAL:return!0}return!1}(e)&&(this.blockWidth||t.inlineWidth&&this.onlyChild||!n&&this.outerWrapper&&this.hasPX("maxWidth")))return;if(t.layoutConstraint){if(!t.layoutHorizontal&&!this.positioned)switch(e){case U.CSS.TOP:this.anchor(U.CSS.TOP,l.PARENT,!1);break;case U.CSS.RIGHT:case U.CSS.END:this.anchor(U.CSS.RIGHT,l.PARENT,!1);break;case U.CSS.BOTTOM:this.anchor(U.CSS.BOTTOM,l.PARENT,!1);break;case U.CSS.LEFT:case U.CSS.START:this.anchor(U.CSS.LEFT,l.PARENT,!1);break;case l.CENTER_HORIZONTAL:this.anchorParent(l.HORIZONTAL,void 0,void 0,!0)}return}}}const i=new Set,a=this.android(t);if(""!==a)for(const t of a.split("|"))i.add(t);i.add(this.localizeString(e));let o="";switch(i.size){case 0:break;case 1:o=tt(i.values().next().value);default:function r(t){const e=`${t}_horizontal`,n=`${t}_vertical`;(i.has(t)||i.has(e)&&i.has(n))&&(i.delete(e),i.delete(n),i.add(t))}r(U.CSS.CENTER),r("fill");let t="",e="",a="";for(const o of i.values())switch(o){case U.CSS.LEFT:case U.CSS.START:case U.CSS.RIGHT:case U.CSS.END:case l.CENTER_HORIZONTAL:(""===t||n)&&(t=o);break;case U.CSS.TOP:case U.CSS.BOTTOM:case l.CENTER_VERTICAL:(""===e||n)&&(e=o);break;default:a+=(""!==a?"|":"")+o}o=""!==t&&""!==e?`${t}|${e}`:t||e,""!==a&&(o+=(""!==o?"|":"")+a)}""!==o&&this.android(t,o)}applyOptimizations(){const t=this.renderParent;if(t){!(this.tableElement?"content-box"===this.css("boxSizing")||F.isUserAgent(8):this.styleElement)||!this.visibleStyle.borderWidth||this.is(e.LINE)||0!==this.renderChildren.length&&this.naturalChildren.every(t=>!t.pageFlow&&t.absoluteParent===this)||(this.modifyBox(256,this.borderLeftWidth),this.modifyBox(64,this.borderRightWidth),this.modifyBox(32,this.borderTopWidth),this.modifyBox(128,this.borderBottomWidth)),this.alignLayout(t),this.setLineHeight(t),this.inlineWidth&&this.renderChildren.some(t=>t.blockWidth&&t.some(t=>t.flexibleWidth))&&this.setLayoutWidth(this.documentRoot||t.inlineWidth?z.formatPX(this.actualWidth):l.MATCH_PARENT)}}applyCustomizations(t=!0){const e=(e,n)=>{const i=e.assign[n];if(i)for(const e in i){const n=i[e];for(const i in n)this.attr(e,i,n[i],t)}};e(I[0],this.tagName),e(I[0],this.controlName);const n=I[this.localSettings.targetAPI];n&&(e(n,this.tagName),e(n,this.controlName))}setBoxSpacing(){const t=(t,e,n=!1)=>{let i=0,a=0,o=0,r=0;for(let e=0;e<4;e++){const n=t[e];let s=void 0===this._boxReset||0===this._boxReset[n]?this[n]:0;if(0!==s&&"marginRight"===n)if(s<0)this.float===U.CSS.RIGHT&&(s=0);else if(this.inline){const t=this.documentParent.box.right;if(Math.floor(this.bounds.right)>t){!this.textElement||this.onlyChild||this.alignParent(U.CSS.LEFT)||ot(this);continue}this.bounds.right+s>t&&(s=Math.max(0,t-this.bounds.right))}switch(this._boxAdjustment&&(s+=this._boxAdjustment[n]),e){case 0:i=s;break;case 1:a=s;break;case 2:o=s;break;case 3:r=s}}if(0!==i||0!==r||0!==o||0!==a){let t=0,s=0,c=0;if(e&&this.positionStatic&&!this.blockWidth&&(r<0||a<0))switch(this.cssAscend("textAlign")){case U.CSS.CENTER:r<a?(a+=Math.abs(r),a/=2,r=0):(r+=Math.abs(a),r/=2,a=0);break;case U.CSS.RIGHT:case U.CSS.END:r<0&&(r=0)}!n&&this.localSettings.targetAPI>=26&&(i===a&&a===o&&o===r?t=i:(r===a&&(s=r),i===o&&(c=i))),0!==t?this.android(e?l.MARGIN:l.PADDING,z.formatPX(t)):(0!==s?this.android(e?l.MARGIN_HORIZONTAL:l.PADDING_HORIZONTAL,z.formatPX(s)):(0!==r&&this.android(this.localizeString(e?l.MARGIN_LEFT:l.PADDING_LEFT),z.formatPX(r)),0!==a&&this.android(this.localizeString(e?l.MARGIN_RIGHT:l.PADDING_RIGHT),z.formatPX(a))),0!==c?this.android(e?l.MARGIN_VERTICAL:l.PADDING_VERTICAL,z.formatPX(c)):(0!==i&&this.android(e?l.MARGIN_TOP:l.PADDING_TOP,z.formatPX(i)),0!==o&&this.android(e?l.MARGIN_BOTTOM:l.PADDING_BOTTOM,z.formatPX(o))))}};t(z.BOX_MARGIN,!0,!!this.renderParent&&this.renderParent.is(e.GRID)),t(z.BOX_PADDING,!1)}extractAttributes(t){if("rtl"!==this.dir||this.imageOrSvgElement||(this.textElement?this.android("textDirection","rtl"):this.renderChildren.length&&this.android("layoutDirection","rtl")),this.styleElement){const t=z.getDataSet(this.element,l.ANDROID);for(const e in t){const n="attr"===e?l.ANDROID:K.test(e)?j.capitalize(e.substring(4),!1):"";if(""!==n)for(const i of t[e].split(";")){const[t,e]=i.split("::");t&&e&&this.attr(n,t,e)}}}const e="\n"+"\t".repeat(t);let n="";for(const t of this.combine())n+=e+t;return n}setLayoutWidth(t,e=!0){this.android("layout_width",t,e)}setLayoutHeight(t,e=!0){this.android("layout_height",t,e)}alignLayout(t){if(this.layoutLinear){const e=this.renderChildren;if(this.layoutVertical){if(!(t.layoutVertical||t.layoutFrame||this.documentRoot||this.hasAlign(1024))){let t=e[0];t.baseline&&(t.renderChildren.length&&(t=t.renderChildren[0]),t.baseline&&(t.textElement||t.inputElement)&&this.android("baselineAlignedChildIndex","0"))}}else{if(e.some(t=>t.floating)&&!e.some(t=>t.imageElement&&t.baseline))this.android("baselineAligned","false");else{const t=k.baseline(e,!0);t&&(t.textElement||t.inputElement)&&this.android("baselineAlignedChildIndex",""+e.indexOf(t))}if(e.length>1){const t=e[e.length-1];t.textElement&&ot(t)}}}}setLineHeight(t){const e=this.lineHeight;if(e>0){const n=this.has("lineHeight");if(this.multiline)nt(this,e,n);else if(n||this.renderChildren.length||0===t.lineHeight)if(0===this.length)it(this,e,n);else if(this.renderChildren.length){const t=this.horizontalRows||[this.renderChildren];let n=!1;const i=t.length;for(let a=0;a<i;a++){const o=t[a],r=t[a+1];let s=r&&(1===r.length&&r[0].multiline||r[0].lineBreakLeading);if(!s&&a<i-1){const e=t[a+1].find(t=>t.baselineActive);e&&e.has("lineHeight")&&(s=!0)}const l=o.find(t=>t.baselineActive),c=!n&&(a>0||1===i)||o[0].lineBreakLeading,d=!s&&(a<i-1||1===i);if(l){if(l.has("lineHeight")){n=!0;continue}it(l,e,!1,c,d)}else for(const t of o)0!==t.length||t.has("lineHeight")||t.multiline||t.baselineAltered||it(t,e,!1,c,d);n=1===o.length&&o[0].multiline}}}}get documentId(){return this.controlId?`@+id/${this.controlId}`:""}get anchorTarget(){const t=this.renderParent;return t&&(t.layoutConstraint||t.layoutRelative)?this:this.outerWrapper||this}set anchored(t){this.constraint.horizontal=t,this.constraint.vertical=t}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}set containerType(t){this._containerType=t}get containerType(){if(0===this._containerType){const t=o[this.containerName];t&&(this._containerType=t)}return this._containerType}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this.is(e.FRAME)}get layoutLinear(){return this.is(e.LINEAR)}get layoutRelative(){return this.is(e.RELATIVE)}get layoutConstraint(){return this.is(e.CONSTRAINT)}set renderExclude(t){this._cached.renderExclude=t}get renderExclude(){if(void 0===this._cached.renderExclude){if(this.styleElement&&0===this.length&&!this.imageElement)return this.blockStatic||this.layoutVertical?0===this.contentBoxHeight&&(0===this.bounds.height&&this.marginTop<=0&&this.marginBottom<=0||"0px"===this.css(U.CSS.HEIGHT)&&"hidden"===this.css("overflow")):0===this.bounds.width&&0===this.contentBoxWidth&&this.textEmpty&&this.marginLeft<=0&&this.marginRight<=0;this._cached.renderExclude=!1}return this._cached.renderExclude}get baselineHeight(){if(void 0===this._cached.baselineHeight){let t=0;if(!this.plainText||!this.multiline)if(this.multiline&&this.cssTry("white-space","nowrap")?(t=this.element.getBoundingClientRect().height,this.cssFinally("white-space")):t=this.hasHeight?this.actualHeight:this.bounds.height,this.has("lineHeight")&&this.lineHeight>t)t=this.lineHeight;else if(this.inputElement)switch(this.controlName){case a.BUTTON:t+=2;break;case a.RADIO:case a.CHECKBOX:t+=8;break;case a.SELECT:t+=4,t/=this.element.size||1}this._cached.baselineHeight=t}return this._cached.baselineHeight}get support(){if(void 0===this._cached.support){const t=this.textElement||this.imageOrSvgElement,e={container:{positionRelative:this.layoutRelative||this.layoutConstraint},maxWidth:t,maxHeight:t};return 0!==this.containerType&&(this._cached.support=e),e}return this._cached.support}get layoutWidth(){return this.android("layout_width")}get layoutHeight(){return this.android("layout_height")}get inlineWidth(){return this.layoutWidth===l.WRAP_CONTENT}get inlineHeight(){return this.layoutHeight===l.WRAP_CONTENT}get blockWidth(){return this.layoutWidth===l.MATCH_PARENT}get blockHeight(){return this.layoutHeight===l.MATCH_PARENT}get flexibleWidth(){return rt(this,this.layoutWidth)}get flexibleHeight(){return rt(this,this.layoutHeight)}set localSettings(t){this._localSettings?Object.assign(this._localSettings,t):this._localSettings=Object.assign({},t)}get localSettings(){return this._localSettings}});class lt extends(st(squared.base.NodeUI)){}class ct extends(st(squared.base.NodeGroupUI)){constructor(t,e,n,i){super(t,e.sessionId,void 0,i),this.depth=e.depth,this.containerName=`${e.containerName}_GROUP`,this.actualParent=e.actualParent,this.documentParent=e.documentParent,this.retain(n)}}var dt=squared.base.NodeUI;const ht=squared.lib.client,ut=squared.lib.color,pt=squared.lib.constant,mt=squared.lib.css,ft=squared.lib.dom,gt=squared.lib.math,Tt=squared.lib.regex,St=squared.lib.session,Et=squared.lib.util,At=squared.lib.xml,bt=squared.base.lib.constant,Ct=squared.base.lib.enumeration,yt=[l.HORIZONTAL,l.VERTICAL],Rt={};let It;function Nt(t){t.some(t=>t.floating)&&t.sort((t,e)=>{if(t.floating&&!e.floating)return t.float===pt.CSS.LEFT?-1:1;if(!t.floating&&e.floating)return e.float===pt.CSS.LEFT?1:-1;if(t.floating&&e.floating){if(t.float!==e.float)return t.float===pt.CSS.LEFT?-1:1;if(t.float===pt.CSS.RIGHT&&e.float===pt.CSS.RIGHT)return 1}return 0})}function Pt(t){return t.length>1&&t.sort((t,e)=>{const n=t.node.innerWrapped||t.node,i=e.node.innerWrapped||e.node;return n.absoluteParent===i.absoluteParent?n.zIndex===i.zIndex?n.childIndex<i.childIndex?-1:1:n.zIndex<i.zIndex?-1:1:n.intersectX(i.bounds,"bounds")&&n.intersectY(i.bounds,"bounds")?n.depth===i.depth?0:n.id<i.id?-1:1:0}),t}function _t(t,e){let n;for(const i of e)i===t||i.baselineAltered||(i.bounds.height>0||i.textElement?i.blockVertical&&t.blockVertical?i.anchor("bottom",t.documentId):!i.textElement&&!i.inputElement&&i.bounds.height>t.bounds.height?(Et.withinRange(i.linear.top,i.documentParent.box.top)&&i.anchor(pt.CSS.TOP,"true"),i.imageOrSvgElement&&(void 0===n||i.bounds.height>=n.bounds.height)&&(n&&n.anchor("baseline",i.documentId),n=i)):(i.naturalChild&&0===i.length||i.layoutHorizontal&&i.renderChildren.every(t=>t.baseline))&&i.anchor("baseline",t.documentId):i.imageOrSvgElement&&i.baseline&&(n=i));n&&t.anchor("baseline",n.documentId)}function Ot(t,e,n){return!(!t.textElement||t.centerAligned||t.hasPX(pt.CSS.WIDTH)||t.multiline&&!n||!e&&-1===t.textContent.trim().indexOf(" "))&&(t.android("maxLines","1"),t.android("ellipsize",pt.CSS.END),!0)}function xt(t,e,n){if(n>0){if(t.documentBody)switch(e){case 32:n-=t.marginTop;break;case 64:n-=t.marginRight;break;case 128:n-=t.marginBottom;break;case 256:n-=t.marginLeft}if(1!==t.getBox(e)[0])switch(e){case 32:n+=t.borderTopWidth-t.paddingTop;break;case 64:n+=t.borderRightWidth-t.paddingRight;break;case 128:n+=t.borderBottomWidth-t.paddingBottom;break;case 256:n+=t.borderLeftWidth-t.paddingLeft}return Math.max(n,0)}return n}function Lt(t,e){if(e.float===pt.CSS.LEFT){if(e.marginRight<0){return t.modifyBox(16,e.actualWidth+(e.hasWidth?e.paddingLeft+e.borderLeftWidth:0)-Math.abs(e.marginRight)),t.anchor(pt.CSS.LEFT,e.documentId),e.modifyBox(4),!0}}else if(t.float===pt.CSS.RIGHT&&e.float===pt.CSS.RIGHT&&e.marginLeft<0){const n=Math.abs(e.marginLeft),i=e.actualWidth;return n<i&&t.modifyBox(4,i-n),t.anchor(pt.CSS.RIGHT,e.documentId),e.modifyBox(16),!0}return!1}function wt(t,e,n){if(!t.inputElement&&!t.imageOrSvgElement){const a=t.documentParent,o=t.renderParent;if(o){function i(){o.nodeGroup&&(o.addAlign(64),o.unsetCache("blockStatic"))}if(!t.blockWidth&&!a.flexElement){const o=t.cssInitial(n?"minWidth":"minHeight",!0);if(mt.isLength(o,!0)&&o!==pt.CSS.PX_0){let r=!1;n?t.ascend(t=>t.hasPX(pt.CSS.WIDTH)||t.blockStatic).length&&(t.setLayoutWidth(pt.CSS.PX_0,!1),r=t.flexibleWidth,i()):(t.absoluteParent||a).hasHeight&&!t.hasPX(pt.CSS.HEIGHT)&&(t.setLayoutHeight(pt.CSS.PX_0,!1),r=t.flexibleHeight),r&&(t.app(n?"layout_constraintWidth_min":"layout_constraintHeight_min",mt.formatPX(t.parseUnit(o,e.toLowerCase()))),t.css(n?"minWidth":"minHeight",pt.CSS.AUTO))}}const r=t.cssInitial(n?"maxWidth":"maxHeight",!0);let s=0;if(mt.isLength(r,!0)){let c=!1;if(n?(t.outerWrapper||t.ascend(t=>t.hasPX(pt.CSS.WIDTH)||t.blockStatic).length)&&(t.setLayoutWidth(o.flexibleWidth?l.MATCH_PARENT:pt.CSS.PX_0,t.innerWrapped&&t.innerWrapped.naturalChild),c=t.flexibleWidth,i(),c&&!mt.isPercent(r)&&(s+=t.contentBoxWidth)):(t.absoluteParent||a).hasHeight&&!t.hasPX(pt.CSS.HEIGHT)&&(t.setLayoutHeight(o.flexibleHeight?l.MATCH_PARENT:pt.CSS.PX_0,t.innerWrapped&&t.innerWrapped.naturalChild),(c=t.flexibleHeight)&&!mt.isPercent(r)&&(s+=t.contentBoxHeight)),c){const i=t.parseUnit(r,e.toLowerCase());t.app(n?"layout_constraintWidth_max":"layout_constraintHeight_max",mt.formatPX(i+s)),n&&t.layoutVertical&&t.each(t=>{t.textElement&&!t.hasPX("maxWidth")&&t.css("maxWidth",mt.formatPX(i))})}}}}}function vt(t,e,n,i){const a=t.cssInitial(e,!0);let o;if(i){if(mt.isLength(a,!0)&&(o=mt.formatPX(t.bounds[e]),t.imageElement)){const i=t.element;if(i&&i.naturalWidth>0&&i.naturalHeight>0){const a=t.bounds[e]/(n?i.naturalWidth:i.naturalHeight)*(n?i.naturalHeight:i.naturalWidth);n?t.setLayoutHeight(mt.formatPX(a),!1):t.setLayoutWidth(mt.formatPX(a),!1)}}}else if(mt.isPercent(a)&&a!==pt.CSS.PERCENT_100){t.app(n?"layout_constraintWidth_percent":"layout_constraintHeight_percent",gt.truncate(parseFloat(a)/100,t.localSettings.floatPrecision)),o=pt.CSS.PX_0}return!!o&&(n?t.setLayoutWidth(o,!1):t.setLayoutHeight(o,!1),!0)}function Ht(t,e){if(e||t.documentParent.layoutElement||!t.documentParent.hasPX(pt.CSS.WIDTH,!1))vt(t,pt.CSS.WIDTH,!0,e);else{const e=t.cssInitial(pt.CSS.WIDTH,!0);mt.isPercent(e)&&e!==pt.CSS.PERCENT_100&&t.setLayoutWidth(mt.formatPX(t.bounds.width))}}function Mt(t,e){if(t.documentParent.hasPX(pt.CSS.HEIGHT,!1))if(e||t.documentParent.layoutElement)vt(t,pt.CSS.HEIGHT,!1,e);else{const e=t.cssInitial(pt.CSS.HEIGHT,!0);mt.isPercent(e)&&e!==pt.CSS.PERCENT_100&&t.setLayoutHeight(mt.formatPX(t.bounds.height))}else mt.isLength(t.cssInitial(pt.CSS.HEIGHT),!0)&&t.setLayoutHeight(mt.formatPX(t.bounds.height),!1)}function Gt(t){return Et.filterArray(t,t=>!!((t.baseline||mt.isLength(t.verticalAlign,!0))&&("TEXTAREA"===t.tagName||"SELECT"===t.tagName&&t.element.size>1)||"text-bottom"===t.verticalAlign&&"INPUT_IMAGE"!==t.containerName)).sort((t,e)=>t.baselineHeight===e.baselineHeight?"SELECT"===t.tagName?1:0:t.baselineHeight>e.baselineHeight?-1:1)[0]}function Dt(t){return t?[pt.CSS.RIGHT,pt.CSS.LEFT,bt.STRING_BASE.RIGHT_LEFT,bt.STRING_BASE.LEFT_RIGHT]:[pt.CSS.LEFT,pt.CSS.RIGHT,bt.STRING_BASE.LEFT_RIGHT,bt.STRING_BASE.RIGHT_LEFT]}const Bt=t=>t.some(t=>t.positionRelative||!t.pageFlow&&t.positionAuto)?e.RELATIVE:e.LINEAR,Xt=t=>Math.max(t.actualHeight,t.lineHeight);class Wt extends squared.base.ControllerUI{constructor(){super(...arguments),this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:At.STRING_XMLENCODING},directory:{string:"res/values",font:"res/font",image:"res/drawable"},svg:{enabled:!1},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:ht.isPlatform(4)?"rgb(255, 255, 255)":"rgb(221, 221, 221)"},supported:{fontFormat:["truetype","opentype"],imageFormat:["jpg","jpeg","png","gif","bmp","webp","svg","ico","cur"]},unsupported:{cascade:new Set(["SELECT","svg"]),tagName:new Set(["SCRIPT","STYLE","OPTION","INPUT:hidden","MAP","AREA","SOURCE","TEMPLATE","DATALIST","WBR"]),excluded:new Set(["BR"])},precision:{standardFloat:4},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.25,superscriptTopOffset:.25,legendBottomOffset:.25}}}static setConstraintDimension(t){Ht(t,!1),Mt(t,!1),wt(t,"Width",!0),wt(t,"Height",!1)}static setFlexDimension(t,e){const n=e===pt.CSS.WIDTH,i=t.flexbox,a=i.basis;function o(e,a){t.android(n?"layout_width":"layout_height",pt.CSS.PX_0),a>0?(t.app(n?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",gt.truncate(a,t.localSettings.floatPrecision)),""!==e&&t.css(n?"minWidth":"minHeight",e,!0)):""!==e&&(i.shrink<1?(t.app(n?"layout_constraintWidth_min":"layout_constraintHeight_min",mt.formatPX((1-i.shrink)*parseFloat(e))),t.app(n?"layout_constraintWidth_max":"layout_constraintHeight_max",e)):t.app(n?"layout_constraintWidth_min":"layout_constraintHeight_min",e))}mt.isLength(a)?o(t.convertPX(a),t.flexbox.grow):a!==pt.CSS.PERCENT_0&&mt.isPercent(a)?(t.app(n?"layout_constraintWidth_percent":"layout_constraintHeight_percent",(parseFloat(a)/100).toPrecision(t.localSettings.floatPrecision)),o("",t.flexbox.grow)):i.grow>0?o(t.hasPX(e,!1)?mt.formatPX(t[n?"actualWidth":"actualHeight"]):"",t.flexbox.grow):n?Ht(t,!1):Mt(t,!1),i.shrink>1&&t.app(n?"layout_constrainedWidth":"layout_constrainedHeight","true"),wt(t,"Width",!0),n?Mt(t,!0):Ht(t,!0),wt(t,"Height",!1)}init(){const t=this.userSettings;It={targetAPI:t.targetAPI||28,supportRTL:"boolean"!=typeof t.supportRTL||t.supportRTL,floatPrecision:this.localSettings.precision.standardFloat}}optimize(t){for(const e of t)e.applyOptimizations(),e.hasProcedure(Ct.NODE_PROCEDURE.CUSTOMIZATION)&&e.applyCustomizations(this.userSettings.customizationsOverwritePrivilege)}finalize(t){for(const e of t)e.content=At.replaceTab(e.content.replace(/{#0}/,X(e.content)),this.userSettings.insertSpaces)}processUnknownParent(t){const n=t.node;if(n.has("columnCount")||n.hasPX("columnWidth"))t.setType(e.CONSTRAINT,260);else if(t.some(t=>!t.pageFlow&&!t.positionAuto))t.setType(e.CONSTRAINT,34);else if(t.visible.length<=1){const i=n.find(t=>t.visible);if(!i)return this.processUnknownChild(t);if(n.documentRoot&&function(t,e){if(t.element&&e.dataset.target){const n=document.getElementById(e.dataset.target);return null!==n&&n!==t.element}return!1}(n,i))return n.hide(),{layout:t,next:!0};n.naturalElement&&i.plainText?(n.clear(),n.inlineText=!0,n.textContent=i.textContent,i.hide(),t.setType(e.TEXT)):n.autoMargin.horizontal||t.parent.layoutConstraint&&t.parent.flexElement&&"baseline"===n.flexbox.alignSelf&&i.textElement?t.setType(e.LINEAR,4104):i.percentWidth?(n.hasPX(pt.CSS.WIDTH)||n.setLayoutWidth(l.MATCH_PARENT),t.setType(e.CONSTRAINT,4160)):i.baseline&&(i.textElement||i.inputElement)?t.setType(e.LINEAR,16):t.setType(e.FRAME,4096)}else b.hasLineBreak(n,!0)?t.setType(t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,18):this.checkConstraintFloat(t)?t.setType(e.CONSTRAINT,512):t.linearX?(this.checkFrameHorizontal(t)?t.renderType|=520:this.checkConstraintHorizontal(t)?t.setType(e.CONSTRAINT):this.checkLinearHorizontal(t)?(t.setType(e.LINEAR),t.floated.size&&Nt(t.children)):t.setType(e.RELATIVE),t.add(8)):t.linearY?t.setType(Bt(t),16|(n.documentRoot?2:0)):t.every(t=>t.inlineFlow)?this.checkFrameHorizontal(t)?t.renderType|=520:t.setType(Bt(t),18):t.some(e=>e.alignedVertically(e.childIndex>0?t.children.slice(0,e.childIndex):void 0,t.cleared)>0)?t.setType(Bt(t),18):t.setType(e.CONSTRAINT,2);return{layout:t}}processUnknownChild(t){const n=t.node,i=n.visibleStyle;if(!n.inlineText||n.textEmpty&&!i.borderWidth)if(n.blockStatic&&(i.borderWidth||i.backgroundImage||n.paddingTop+n.paddingBottom>0)&&0===n.naturalElements.length)t.setType(e.FRAME);else{if(n.naturalElement&&!n.documentRoot&&""===n.elementId&&0===n.bounds.height&&0===n.marginTop&&0===n.marginRight&&0===n.marginBottom&&0===n.marginLeft&&!i.background&&!n.dataset.use)return n.hide(),{layout:t,next:!0};t.setType(i.background?e.TEXT:e.FRAME)}else t.setType(e.TEXT);return{layout:t}}processTraverseHorizontal(t,n){const i=t.node,a=t.parent,o=t.children;return 1===t.floated.size&&t.same((t,e)=>t.floating&&(t.positiveAxis||t.renderExclude)?-1:e)?(t.node=this.createNodeGroup(i,o,a),t.setType(e.CONSTRAINT,512)):this.checkFrameHorizontal(t)?(t.node=this.createNodeGroup(i,o,a),t.renderType|=520):t.length!==n.length||a.hasAlign(16)?(t.node=this.createNodeGroup(i,o,a),this.processLayoutHorizontal(t)):a.addAlign(8),t}processTraverseVertical(t){const n=t.floated,i=t.cleared;return t.some((e,n)=>e.lineBreakTrailing&&n<t.length-1)?t.parent.hasAlign(16)||(t.node=this.createLayoutNodeGroup(t),t.setType(Bt(t),18)):1===n.size&&t.every((e,n)=>0===n||n===t.length-1||i.has(e))?(t.node=this.createLayoutNodeGroup(t),t.same(t=>t.float)?t.setType(e.CONSTRAINT,512):t.renderType|=520):n.size&&i.size?(t.node=this.createLayoutNodeGroup(t),t.renderType|=528):n.size&&t.children[0].floating?(t.node=this.createLayoutNodeGroup(t),t.renderType|=520):t.parent.hasAlign(16)||(t.node=this.createLayoutNodeGroup(t),t.setType(t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,16)),t}processLayoutHorizontal(t){return this.checkConstraintFloat(t,!0)?t.setType(e.CONSTRAINT,512):this.checkConstraintHorizontal(t)?t.setType(e.CONSTRAINT,8):this.checkLinearHorizontal(t)?(t.setType(e.LINEAR,8),t.floated.size&&Nt(t.children)):t.setType(e.RELATIVE,8),t}sortRenderPosition(t,e){if(t.layoutConstraint&&e.some(t=>!t.node.pageFlow||0!==t.node.zIndex)){const t=[],n=[],i=[];for(const a of e){const e=a.node;e.pageFlow?n.push(a):e.zIndex>=0?i.push(a):t.push(a)}return Pt(t),Pt(i),t.concat(n,i)}return e}checkFrameHorizontal(t){const e=t.floated;if(2===e.size)return!0;if((e.has(pt.CSS.RIGHT)||1===e.size&&t.node.cssAscend("textAlign",!0)===pt.CSS.CENTER)&&t.some(t=>t.pageFlow))return!0;if(e.has(pt.CSS.LEFT)&&!t.linearX){const e=t.item(0);return e.pageFlow&&e.floating}return!1}checkConstraintFloat(t,e=!1){let n=0,i=0;for(const a of t){const o=t.cleared.has(a)||a.renderExclude;if(-1!==n&&(a.positiveAxis&&(!a.positionRelative||a.positionAuto)&&(a.floating||a.autoMargin.horizontal)||o)?n++:n=-1,-1!==i&&(a.percentWidth||o)?i++:e||(i=-1),n<=0&&i<=0)return!1}return!0}checkConstraintHorizontal(t){const e=t.floated;let n=!1;switch(t.node.cssInitial("textAlign")){case pt.CSS.CENTER:n=0===e.size;break;case pt.CSS.END:case pt.CSS.RIGHT:n=0===e.size||e.has(pt.CSS.RIGHT)&&1===e.size&&0===t.cleared.size}return!(!n&&!t.some(e=>e.blockVertical||e.percentWidth||(e.verticalAlign===pt.CSS.MIDDLE||e.verticalAlign===pt.CSS.BOTTOM)&&!t.parent.hasHeight))&&(t.singleRowAligned&&t.every(t=>t.positiveAxis||t.renderExclude))}checkLinearHorizontal(t){const e=t.floated;if((0===e.size||1===e.size&&e.has(pt.CSS.LEFT))&&t.singleRowAligned){const e=t.children[0].lineHeight;for(const n of t)if(!n.naturalChild||0!==n.length||n.inputElement||n.positionRelative||n.blockVertical||n.positionAuto||n.lineHeight!==e||!n.baseline&&!n.cssAny("verticalAlign",pt.CSS.TOP,pt.CSS.MIDDLE,pt.CSS.BOTTOM))return!1;return!0}return!1}setConstraints(){for(const t of this.cache)if(t.layoutRelative)this.processRelativeHorizontal(t,t.renderChildren);else if(t.layoutConstraint&&t.hasProcedure(Ct.NODE_PROCEDURE.CONSTRAINT)){const e=t.renderFilter(t=>!t.positioned);if(e.length){const[n,i]=Et.partitionArray(e,t=>t.pageFlow||t.positionAuto);if(i.length)for(const e of i)e.leftTopAxis&&(e.hasWidth&&e.autoMargin.horizontal?e.hasPX(pt.CSS.LEFT)&&e.autoMargin.right?(e.anchor(pt.CSS.LEFT,l.PARENT),e.modifyBox(16,e.left)):e.hasPX(pt.CSS.RIGHT)&&e.autoMargin.left?(e.anchor(pt.CSS.RIGHT,l.PARENT),e.modifyBox(4,e.right)):(e.anchorParent(l.HORIZONTAL),e.modifyBox(16,e.left),e.modifyBox(4,e.right)):(e.hasPX(pt.CSS.LEFT)&&(e.anchor(pt.CSS.LEFT,l.PARENT),e.hasPX(pt.CSS.RIGHT)||e.css(pt.CSS.WIDTH)!==pt.CSS.PERCENT_100||e.anchor(pt.CSS.RIGHT,l.PARENT),e.modifyBox(16,xt(t,256,e.left))),!e.hasPX(pt.CSS.RIGHT)||e.hasPX(pt.CSS.WIDTH)&&e.css(pt.CSS.WIDTH)!==pt.CSS.PERCENT_100&&e.hasPX(pt.CSS.LEFT)||(e.anchor(pt.CSS.RIGHT,l.PARENT),e.modifyBox(4,xt(t,64,e.right)))),e.hasHeight&&e.autoMargin.vertical?e.hasPX(pt.CSS.TOP)&&e.autoMargin.bottom?(e.anchor(pt.CSS.TOP,l.PARENT),e.modifyBox(2,e.top)):e.hasPX(pt.CSS.BOTTOM)&&e.autoMargin.top?(e.anchor(pt.CSS.BOTTOM,l.PARENT),e.modifyBox(8,e.bottom)):(e.anchorParent(l.VERTICAL),e.modifyBox(2,e.top),e.modifyBox(8,e.bottom)):(e.hasPX(pt.CSS.TOP)&&(e.anchor(pt.CSS.TOP,l.PARENT),e.hasPX(pt.CSS.BOTTOM)||e.css(pt.CSS.HEIGHT)!==pt.CSS.PERCENT_100||e.anchor(pt.CSS.BOTTOM,l.PARENT),e.modifyBox(2,xt(t,32,e.top))),!e.hasPX(pt.CSS.BOTTOM)||e.hasPX(pt.CSS.HEIGHT)&&e.css(pt.CSS.HEIGHT)!==pt.CSS.PERCENT_100&&e.hasPX(pt.CSS.TOP)||(e.anchor(pt.CSS.BOTTOM,l.PARENT),e.modifyBox(8,xt(t,128,e.bottom)))),e.positioned=!0);if(n.length){if(t.layoutHorizontal)this.processConstraintHorizontal(t,n);else if(t.hasAlign(256))this.processConstraintColumn(t,n);else if(n.length>1)this.processConstraintChain(t,n);else{const t=n[0];t.anchorParent(l.HORIZONTAL),t.anchorParent(l.VERTICAL),t.rightAligned?t.anchorStyle(l.HORIZONTAL,"packed",1):t.centerAligned||t.anchorStyle(l.HORIZONTAL),t.autoMargin.topBottom||t.anchorStyle(l.VERTICAL),Wt.setConstraintDimension(t)}this.evaluateAnchors(n)}for(const n of e)n.anchored||(n.outerWrapper?(n.constraint.horizontal&&n.anchorParent(l.HORIZONTAL),n.constraint.vertical&&n.anchorParent(l.VERTICAL)):this.addGuideline(n,t))}}}renderNodeGroup(t){const n=t.node,i=t.containerType,a=t.alignmentType,o=M();let r=!1;switch(i){case e.LINEAR:Et.hasBit(a,16)?(o.android.orientation=l.VERTICAL,r=!0):Et.hasBit(a,8)&&(o.android.orientation=l.HORIZONTAL,r=!0);break;case e.GRID:o.android.rowCount=t.rowCount?""+t.rowCount:"",o.android.columnCount=t.columnCount?""+t.columnCount:"2",r=!0;break;case e.FRAME:case e.RELATIVE:case e.CONSTRAINT:r=!0;break;default:if(0===t.length)return this.renderNode(t)}if(r)return n.setControlType(lt.getControlName(i),i),n.addAlign(a),n.render(!n.dataset.use&&n.dataset.target?this.application.resolveTarget(n.dataset.target):t.parent),n.apply(o),{type:1,node:n,controlName:n.controlName}}renderNode(t){const n=t.node;let i=lt.getControlName(t.containerType);n.setControlType(i,t.containerType),n.addAlign(t.alignmentType);let o=t.parent,r=n.dataset.use?void 0:n.dataset.target;switch(n.tagName){case"IMG":{const i=n.element,s=n.absoluteParent||n.documentParent;let c=n.toFloat(pt.CSS.WIDTH),d=n.toFloat(pt.CSS.HEIGHT),h=n.percentWidth?c:-1;const u=n.percentHeight?d:-1;let p,m="fitXY";if(i.srcset)if((p=mt.getSrcSet(i,this.localSettings.supported.imageFormat)).length){if(p[0].actualWidth){if(-1===h){n.css(pt.CSS.WIDTH,mt.formatPX(c=p[0].actualWidth),!0);const t=this.application.resourceHandler.getImage(i.src);t&&t.width>0&&t.height>0?n.css(pt.CSS.HEIGHT,mt.formatPX(d=t.height*(c/t.width)),!0):n.android("adjustViewBounds","true")}else c=o.box.width,n.android("adjustViewBounds","true");h=-1}}else p=void 0;if(n.hasResource(Ct.NODE_RESOURCE.IMAGE_SOURCE)){const t=this.application.resourceHandler.addImageSrc(i,"",p);""!==t&&n.android("src",`@drawable/${t}`)}if(-1!==h||-1!==u)h>=0&&(c*=s.box.width/100,h<100&&!o.layoutConstraint&&(n.css(pt.CSS.WIDTH,mt.formatPX(c)),n.android("adjustViewBounds","true"))),u>=0&&(d*=s.box.height/100,!(u<100)||o.layoutConstraint&&s.hasHeight||(n.css(pt.CSS.HEIGHT,mt.formatPX(d)),n.android("adjustViewBounds","true")));else{switch(n.css("objectFit")){case"contain":m="centerInside";break;case"cover":m="centerCrop";break;case"scale-down":m="fitCenter";break;case"none":m=pt.CSS.CENTER}(0===c&&d>0||0===d&&c>0)&&n.android("adjustViewBounds","true")}if(n.android("scaleType",m),n.baseline&&(n.android("baselineAlignBottom","true"),n.marginBottom>0&&o.layoutLinear&&o.layoutHorizontal&&n.mergeGravity(l.LAYOUT_GRAVITY,pt.CSS.BOTTOM)),!n.pageFlow&&o===n.absoluteParent&&(n.left<0&&"hidden"===o.css("overflowX")||n.top<0&&"hidden"===o.css("overflowY"))){const i=this.application,h=i.createNode();h.setControlType(a.FRAME,e.FRAME),h.inherit(n,"base"),h.positionAuto=!1,h.exclude(Ct.NODE_RESOURCE.ALL,Ct.NODE_PROCEDURE.ALL),h.cssApply({position:n.css("position"),zIndex:""+n.zIndex}),o.appendTry(n,h),n.parent=h,h.setLayoutWidth(c>0?c<s.box.width?mt.formatPX(c):l.MATCH_PARENT:l.WRAP_CONTENT),h.setLayoutHeight(d>0?d<s.box.height?mt.formatPX(d):l.MATCH_PARENT:l.WRAP_CONTENT),h.render(r?i.resolveTarget(r):o),h.saveAsInitial(),h.innerWrapped=n,n.outerWrapper=h,o.layoutConstraint||(n.modifyBox(2,n.top),n.modifyBox(16,n.left)),i.addLayoutTemplate(o,h,{type:1,node:h,controlName:a.FRAME}),o=h,t.parent=h,r=void 0}break}case"INPUT":{const t=n.element;switch(t.type){case"checkbox":t.checked&&n.android("checked","true");break;case"text":n.android("inputType","text");break;case"password":n.android("inputType","textPassword");break;case"range":case"time":case"number":case"date":case"datetime-local":switch(t.type){case"number":case"range":n.android("inputType","number");break;case"date":n.android("inputType","date");break;case"time":n.android("inputType","time");break;case"datetime-local":n.android("inputType","datetime")}Et.isString(t.min)&&n.android("min",t.min),Et.isString(t.max)&&n.android("max",t.max);break;case"email":case"tel":case"url":case"week":case"month":case"search":switch(t.type){case"email":n.android("inputType","textEmailAddress");break;case"tel":n.android("inputType","phone");break;case"url":n.android("inputType","textUri");break;default:n.android("inputType","text")}-1!==t.minLength&&n.android("minLength",""+t.minLength),t.maxLength>0&&n.android("maxLength",""+t.maxLength)}break}case"TEXTAREA":{const t=n.element;switch(n.android("minLines",t.rows?""+t.rows:"2"),n.css("verticalAlign")){case pt.CSS.MIDDLE:n.mergeGravity(l.GRAVITY,l.CENTER_VERTICAL);break;case pt.CSS.BOTTOM:n.mergeGravity(l.GRAVITY,pt.CSS.BOTTOM);break;default:n.mergeGravity(l.GRAVITY,pt.CSS.TOP)}t.maxLength>0&&n.android("maxLength",""+t.maxLength),!n.hasPX(pt.CSS.WIDTH)&&t.cols>0&&n.css(pt.CSS.WIDTH,mt.formatPX(8*t.cols),!0),n.android("hint",t.placeholder),n.android("scrollbars",l.VERTICAL),n.android("inputType","textMultiLine"),n.overflowX&&n.android("scrollHorizontally","true");break}case"LEGEND":n.hasWidth||(n.css("minWidth",mt.formatPX(n.actualWidth),!0),n.css("display","inline-block",!0)),n.modifyBox(8,n.actualHeight*this.localSettings.deviations.legendBottomOffset)}switch(i){case a.TEXT:let t="";if(n.overflowX&&(t+=l.HORIZONTAL),n.overflowY&&(t+=(""!==t?"|":"")+l.VERTICAL),""!==t&&n.android("scrollbars",t),n.has("letterSpacing")&&n.android("letterSpacing",gt.truncate(n.toFloat("letterSpacing")/n.fontSize,this.localSettings.precision.standardFloat)),"justify"===n.css("textAlign")&&n.android("justificationMode","inter_word"),n.has("textShadow")){void 0===Rt.TEXT_SHADOW&&(Rt.TEXT_SHADOW=/^(rgba?\(\d+, \d+, \d+(?:, [\d.]+)?\)) (-?[\d.]+[a-z]+) (-?[\d.]+[a-z]+)\s*(-?[\d.]+[a-z]+)?$/);const t=Rt.TEXT_SHADOW.exec(n.css("textShadow"));if(t){const e=b.addColor(ut.parseColor(t[1]));""!==e&&(n.android("shadowColor",`@color/${e}`),n.android("shadowDx",gt.truncate(2*mt.parseUnit(t[2],n.fontSize))),n.android("shadowDy",gt.truncate(2*mt.parseUnit(t[3],n.fontSize))),n.android("shadowRadius",t[4]?gt.truncate(Math.max(mt.parseUnit(t[4],n.fontSize),1)):"1"))}}"nowrap"===n.css("whiteSpace")&&(n.android("maxLines","1"),n.android("ellipsize",pt.CSS.END));break;case a.BUTTON:n.hasHeight||n.android("minHeight",mt.formatPX(Math.ceil(n.actualHeight))),n.mergeGravity(l.GRAVITY,l.CENTER_VERTICAL);break;case a.EDIT:{const t=n.element;t.list&&t.list.children.length&&(n.controlName=i=a.EDIT_LIST)}case a.RANGE:n.hasPX(pt.CSS.WIDTH)||n.css(pt.CSS.WIDTH,mt.formatPX(n.bounds.width),!0);break;case a.LINE:n.hasHeight||n.setLayoutHeight(mt.formatPX(n.contentBoxHeight||1))}return n.render(r?this.application.resolveTarget(r):o),{type:1,node:n,parent:o,controlName:i}}renderNodeStatic(t,e,n,i,a){const o=new lt(0,"0",void 0,this.afterInsertNode);return o.setControlType(t),""!==n&&o.setLayoutWidth(n||l.WRAP_CONTENT),""!==i&&o.setLayoutHeight(i||l.WRAP_CONTENT),e&&(o.apply(e),e.documentId=o.documentId),this.getEnclosingXmlTag(t,this.userSettings.showAttributes?o.extractAttributes(1):void 0,a)}renderSpace(t,e,n,i,o){return void 0===o&&(o=M()),mt.isPercent(t)&&(o.android.layout_columnWeight=gt.truncate(parseFloat(t)/100,this.localSettings.precision.standardFloat),t=pt.CSS.PX_0),e&&mt.isPercent(e)&&(o.android.layout_rowWeight=gt.truncate(parseFloat(e)/100,this.localSettings.precision.standardFloat),e=pt.CSS.PX_0),n&&(o.android.layout_columnSpan=""+n),i&&(o.android.layout_rowSpan=""+i),this.renderNodeStatic(a.SPACE,o,t,e||void 0)}addGuideline(t,e,n,i=!1,o=!1){const r=t.absoluteParent,s=e.nodeGroup&&!t.documentParent.hasAlign(4)?e:t.documentParent;yt.forEach(c=>{if(!(t.constraint[c]||n&&c!==n)){const n=c===l.HORIZONTAL,d=s.box;let h,u,p,m;if(n?(h=o?pt.CSS.RIGHT:pt.CSS.LEFT,u=o?pt.CSS.LEFT:pt.CSS.RIGHT,p=o?bt.STRING_BASE.RIGHT_LEFT:bt.STRING_BASE.LEFT_RIGHT,m=o?bt.STRING_BASE.LEFT_RIGHT:bt.STRING_BASE.RIGHT_LEFT):(h=o?pt.CSS.BOTTOM:pt.CSS.TOP,u=o?pt.CSS.TOP:pt.CSS.BOTTOM,p=o?bt.STRING_BASE.BOTTOM_TOP:bt.STRING_BASE.TOP_BOTTOM,m=o?bt.STRING_BASE.TOP_BOTTOM:bt.STRING_BASE.BOTTOM_TOP),Et.withinRange(t.linear[h],d[h]))return void t.anchor(h,l.PARENT,!0);const f=t.positionStatic?t.bounds:t.linear;let g,T="layout_constraintGuide_";if(!i&&!e.hasAlign(4)){if(e.renderChildren.some(e=>{if(e!==t&&e.constraint[c]){let i=!1;if(t.pageFlow&&e.pageFlow&&(Et.withinRange(t.linear[h],e.linear[u])?(t.anchor(p,e.documentId,!0),i=!0):Et.withinRange(t.linear[u],e.linear[h])&&(t.anchor(m,e.documentId,!0),i=!0)),i||(Et.withinRange(t.bounds[h],e.bounds[h])?(!n&&t.textElement&&t.baseline&&e.textElement&&e.baseline?t.anchor("baseline",e.documentId,!0):(t.anchor(h,e.documentId,!0),n?t.modifyBox(16,-e.marginLeft,!1):t.modifyBox(2,-e.marginTop,!1)),i=!0):Et.withinRange(t.bounds[u],e.bounds[u])?(t.anchor(u,e.documentId,!0),t.modifyBox(n?4:8),i=!0):!t.pageFlow&&e.pageFlow&&Et.withinRange(t.bounds[h]+t[h],e.bounds[h])&&(t.anchor(h,e.documentId,!0),t.modifyBox(n?16:2,t[h]),i=!0)),i)return e.constraint[c]=!0,!0}return!1}))return}if(t.positionAuto){const e=t.siblingsLeading;if(e.length&&!t.alignedVertically()){const i=e[0];if(i.renderParent===t.renderParent)return t.anchor(n?bt.STRING_BASE.RIGHT_LEFT:pt.CSS.TOP,i.documentId,!0),void(t.constraint[c]=i.constraint[c])}}if(i){const t=Math.abs(f[h]-d[h])/d[n?pt.CSS.WIDTH:pt.CSS.HEIGHT];g=parseFloat(gt.truncate(o?1-t:t,this.localSettings.precision.standardFloat)),T+="percent"}else g=f[h]-d[o?u:h],n||s.nodeGroup||s===r||1!==r.getBox(2)[0]||(g-=r.marginTop),T+="begin";const S=e.constraint.guideline||{};if(t.pageFlow){if(t.inlineVertical){const e=Et.convertFloat(t.verticalAlign);e<0&&(g+=e)}}else if(t.parent===s.outerWrapper)g+=s[o?n?"paddingRight":"paddingBottom":n?"paddingLeft":"paddingTop"];else if(r===t.documentParent){let t;g=xt(s,t=n?o?64:256:o?128:32,g)}if(!n&&t.marginTop<0&&(g-=t.marginTop,t.modifyBox(2)),t.constraint[c]=!0,g<=0){if(t.anchor(h,l.PARENT,!0),g<0){const e=t.innerWrapped;if(e&&!e.pageFlow){let t=0;switch(h){case pt.CSS.TOP:t=2;break;case pt.CSS.LEFT:t=16;break;case pt.CSS.BOTTOM:t=8;break;case pt.CSS.RIGHT:t=4}e.modifyBox(t,g)}}}else if(n&&g+f.width>=d.right&&s.hasPX(pt.CSS.WIDTH)&&!t.hasPX(pt.CSS.RIGHT)||!n&&g+f.height>=d.bottom&&s.hasPX(pt.CSS.HEIGHT)&&!t.hasPX(pt.CSS.BOTTOM))t.anchor(u,l.PARENT,!0);else{const r=Et.optionalAsObject(S,`${c}.${T}.${h}`);if(r)for(const e in r)if(parseInt(r[e])===g)return t.anchor(h,e,!0),void t.anchorDelete(u);let s;s=i?""+g:`@dimen/${b.insertStoredAsset("dimens",`constraint_guideline_${o?u:h}`,mt.formatPX(g))}`;const d=M(void 0,{orientation:n?l.VERTICAL:l.HORIZONTAL},{[T]:s});this.addAfterOutsideTemplate(t.id,this.renderNodeStatic(a.GUIDELINE,d),!1);const p=d.documentId;p&&(t.anchor(h,p,!0),t.anchorDelete(u),g>0&&(Et.assignEmptyValue(S,c,T,h,p,""+g),e.constraint.guideline=S))}}})}addBarrier(t,e){const n=[];for(const i of t){if(void 0===i.constraint.barrier)i.constraint.barrier={};else if(i.constraint.barrier[e])continue;n.push(i)}if(n.length){const t=M(void 0,void 0,{barrierDirection:e,constraint_referenced_ids:Et.objectMap(n,t=>H(t.documentId)).join(",")});this.addAfterOutsideTemplate(n[n.length-1].id,this.renderNodeStatic(a.BARRIER,t),!1);for(const i of n)i.constraint.barrier[e]=t.documentId;return t.documentId}return""}evaluateAnchors(t){const e=[],n=[];for(const i of t)if(i.constraint.horizontal&&e.push(i),i.constraint.vertical&&n.push(i),i.alignParent(pt.CSS.TOP)){let e=i;for(;;){const n=e.alignSibling(bt.STRING_BASE.BOTTOM_TOP);if(""===n){if(e!==i){let t;(t=void 0!==e.constraint.barrier&&e.constraint.barrier.bottom?e.constraint.barrier.bottom:this.addBarrier([e],pt.CSS.BOTTOM))&&e.anchor(bt.STRING_BASE.BOTTOM_TOP,t)}break}{const a=t.find(t=>t.documentId===n);if(!a||a.alignSibling(bt.STRING_BASE.TOP_BOTTOM)!==e.documentId)break;if(a.alignParent(pt.CSS.BOTTOM)){i.anchorStyle(l.VERTICAL,"packed",0,!1);break}e=a}}}let i=-1;for(;++i<t.length;){const a=t[i];if(!a.constraint.horizontal)for(const t in a.constraint.current){const n=a.constraint.current[t];if(n.horizontal&&e.some(t=>t.documentId===n.documentId)){a.constraint.horizontal=!0,e.push(a),i=-1;break}}if(!a.constraint.vertical)for(const t in a.constraint.current){const e=a.constraint.current[t];if(!e.horizontal&&n.some(t=>t.documentId===e.documentId)){a.constraint.vertical=!0,n.push(a),i=-1;break}}}}createNodeGroup(t,e,n,i=!1){const a=new ct(this.cache.nextId,t,e,this.afterInsertNode);return n?(n.appendTry(t,a),a.init()):a.containerIndex=t.containerIndex,this.cache.append(a,i),a}createNodeWrapper(t,e,n,i,a){const o=this.application.createNode(void 0,!0,e,n);o.addAlign(16384),t.documentRoot&&(o.documentRoot=!0,t.documentRoot=!1),o.inherit(t,"base","alignment"),i&&o.setControlType(i,a),o.exclude(Ct.NODE_RESOURCE.BOX_STYLE|Ct.NODE_RESOURCE.ASSET,Ct.NODE_PROCEDURE.CUSTOMIZATION,Ct.APP_SECTION.ALL),e.appendTry(t,o),t.parent=o;const r=t.outerWrapper;if(r&&(o.outerWrapper=r,r.innerWrapped=o),t.renderParent){const e=t.renderParent.renderTemplates;if(e){const n=e.length;for(let i=0;i<n;i++){const n=e[i];if(n&&n.node===t){t.renderChildren.splice(i,1),e.splice(i,1);break}}}t.rendered=!1,t.renderParent=void 0}if(o.saveAsInitial(),o.cssApply({marginTop:pt.CSS.PX_0,marginRight:pt.CSS.PX_0,marginBottom:pt.CSS.PX_0,marginLeft:pt.CSS.PX_0,paddingTop:pt.CSS.PX_0,paddingRight:pt.CSS.PX_0,paddingBottom:pt.CSS.PX_0,paddingLeft:pt.CSS.PX_0,borderTopStyle:pt.CSS.NONE,borderRightStyle:pt.CSS.NONE,borderBottomStyle:pt.CSS.NONE,borderLeftStyle:pt.CSS.NONE,borderRadius:pt.CSS.PX_0}),t.documentParent.layoutElement){const e=t.namespace("android");for(const t in e)t.startsWith("layout_")&&(o.android(t,e[t]),delete e[t]);t.transferBox(30,o)}return o.innerWrapped=t,t.outerWrapper=o,o}processRelativeHorizontal(t,e){const n=[];let i,a=!1,o=!1;if(t.hasAlign(16)){let t;for(const i of e)t?i.anchor(bt.STRING_BASE.TOP_BOTTOM,t.documentId):i.anchor(pt.CSS.TOP,"true"),i.pageFlow?(n.push([i]),t=i):o=!0}else{const a=(()=>{const n=t.renderParent;if(n){if(n.overflowY)return n.box.width;{const i=t.actualParent;if(i){if(i===n&&i.blockStatic&&t.naturalElement&&t.inlineStatic)return i.box.width-(t.linear.left-i.box.left);if(i.floatContainer){const{containerType:n,alignmentType:a}=this.containerTypeVerticalMargin;if(t.ascend(t=>t.of(n,a),i,"renderParent").length){let n=0,a=0;for(const o of i.naturalElements)o.floating&&!e.includes(o)&&t.intersectY(o.linear)&&(o.float===pt.CSS.LEFT?Math.floor(o.linear.right)>t.box.left&&(n=Math.max(n,o.linear.right-t.box.left)):o.float===pt.CSS.RIGHT&&t.box.right>Math.ceil(o.linear.left)&&(a=Math.max(a,t.box.right-o.linear.left)));return t.box.width-n-a}}}}}return t.box.width})(),r="nowrap"!==t.css("whiteSpace"),s=dt.linearData(e,!0).cleared,l=t.blockDimension?t.parseUnit(t.css("textIndent")):0;let c,d=0;Et.partitionArray(e,t=>t.float!==pt.CSS.RIGHT).forEach((e,h)=>{const u=e.length;if(0===u)return;const p=0===h;let m,f,g=!0;if(p){const t=e[0].actualParent;t&&t.cssInitialAny("textAlign",pt.CSS.RIGHT,pt.CSS.END)?(g=!1,e[u-1].anchor(m=pt.CSS.RIGHT,"true")):m=pt.CSS.LEFT,Nt(e),f=n}else m=pt.CSS.RIGHT,f=i=[];let T,S=!1;for(let n=0;n<u;n++){const i=e[n];let h=p&&g?bt.STRING_BASE.LEFT_RIGHT:bt.STRING_BASE.RIGHT_LEFT;if(!i.pageFlow){T?(i.anchor(h,T.documentId),i.anchor(pt.CSS.TOP,T.documentId)):(i.anchor(m,"true"),i.anchor(pt.CSS.TOP,"true")),o=!0;continue}let u=i.bounds;if(i.naturalElement&&i.inlineText&&!i.hasPX(pt.CSS.WIDTH)){const t=St.getRangeClientRect(i.element,i.sessionId);(t.numberOfLines||t.width<i.box.width)&&(u=t,i.multiline||(i.multiline=!!t.numberOfLines&&t.numberOfLines>0))}let E=i.multiline;E&&Math.floor(u.width)<=a&&(E=!1);let A,C=!0;if(i.autoMargin.leftRight?i.anchor("centerHorizontal","true"):i.autoMargin.left?i.anchor(pt.CSS.RIGHT,"true"):i.autoMargin.right?i.anchor(pt.CSS.LEFT,"true"):C=!1,T){const e=f[f.length-1];let o=0,p=0;const y=()=>T.floating&&T.alignParent(pt.CSS.LEFT)&&(i.multiline||Math.floor(d+i.width)<a),R=()=>(p=d+i.marginLeft,c&&!e.includes(c)&&(p+=c.linear.width),void 0!==c&&i.plainText&&!E&&e.includes(c)&&!s.has(i)||(p+=u.width),i.marginRight<0&&(p+=i.marginRight),o=a,l<0?o+=f.length>1?0:l:l>0&&(o-=1===f.length?l:0),i.styleElement&&i.inlineStatic&&(p-=i.contentBoxWidth),!0);Lt(i,T)&&(h="");const I=i.nodeGroup&&!i.hasAlign(128);let N=!1;A=!I&&i.inlineVertical&&T.inlineVertical?ft.getElementsBetweenSiblings(T.element,i.element,!0):void 0;const P=()=>{if(T.textElement){if(1===n&&void 0===A&&i.plainText&&!Tt.CHAR.TRAILINGSPACE.test(T.textContent)&&!Tt.CHAR.LEADINGSPACE.test(i.textContent))return N=!0,!1;if(r&&S&&(T.bounds.width>=a||b.hasLineBreak(T,!1,!0)))return!0}if(y())return!1;if(r){if(R(),p>o)return T&&T.textElement&&Ot(T,!1,S),!0;if(Et.aboveRange(p,o)&&!i.alignParent(m)&&Ot(i,!0,E),E&&b.hasLineBreak(i)||i.preserveWhiteSpace&&Tt.CHAR.LEADINGNEWLINE.test(i.textContent))return!0}return!1},_=i.textElement&&P();_||I||Et.aboveRange(i.linear.top,T.linear.bottom)&&(i.blockStatic||i.floating&&T.float===i.float)||T.autoMargin.horizontal||s.has(i)||!i.textElement&&!y()&&R()&&Math.floor(p)>o||!i.floating&&(T.blockStatic||i.previousSiblings().some(t=>t.lineBreak||!0===t.excluded&&t.blockStatic)||A&&A.some(e=>Wt.causesLineBreak(e,t.sessionId)))?(g?(c&&i.linear.bottom<=c.bounds.bottom?C||i.anchor(h,c.documentId):(C||i.anchor(m,"true"),c=void 0),C=!0):(c&&i.linear.bottom>c.bounds.bottom&&(c=void 0),T.anchor(m,"true")),_&&E&&Ot(T,r,!1),d=Math.min(0,_&&!T.multiline&&E&&!s.has(i)?i.linear.right-t.box.right:0),f.push([i])):(""!==h&&(g?C||(i.anchor(h,T.documentId),C=!0):T.anchor(h,i.documentId)),T.floating||N||!i.multiline||i.hasPX(pt.CSS.WIDTH)||(E=!1,i.multiline=!1),e.push(i))}else g&&(C||i.anchor(m,"true")),f.push([i]);i.float===pt.CSS.LEFT&&p&&(c?Et.aboveRange(i.linear.bottom,c.linear.bottom)&&(c=i):c=i);let y=0;if(A&&!A.some(t=>!!St.getElementAsNode(t,i.sessionId)||Wt.causesLineBreak(t,i.sessionId))){const t=St.getRangeClientRect(A[0],"0");if(!t.numberOfLines){const e=A.length>1?St.getRangeClientRect(A[A.length-1],"0"):void 0;void 0!==e&&e.numberOfLines||(y=e?t.left-e.right:t.width)}}d+=y+i.marginLeft+u.width+i.marginRight,T=i,S=E}})}(n.length>1||i&&i.length>1)&&(a=!0);const r=e=>{let n=null;const i=e.length;for(let o=0;o<i;o++){const i=e[o];let r;if(i.length>1){let e=Gt(i);(r=dt.baseline(e?i.filter(t=>t!==e):i))&&e&&(r!==e&&e.bounds.height>r.bounds.height?r.anchor(pt.CSS.BOTTOM,e.documentId):(r=dt.baseline(i),e=void 0));const n=[];let s=0===o?"true":r?r.documentId:"",l=0,c=null;for(const o of i)if(o!==r&&o!==e)if(o.baseline)n.push(o);else if(o.inlineVertical)switch(o.verticalAlign){case"text-top":if(null===c&&(c=dt.baseline(i,!0)),c&&o!==c){o.anchor(pt.CSS.TOP,c.documentId);break}break;case"super":o.baselineAltered||o.modifyBox(2,-1*Math.ceil(o.fontSize*this.localSettings.deviations.superscriptTopOffset));case"top":""!==s&&s!==o.documentId?o.anchor(pt.CSS.TOP,s):r&&o.anchor(pt.CSS.TOP,r.documentId);break;case"middle":const e=Math.max(o.actualHeight,o.lineHeight);if(a){if(r){const t=Math.max(r.actualHeight,r.lineHeight);e<t?(o.anchor(pt.CSS.TOP,r.documentId),o.modifyBox(2),o.modifyBox(2,Math.round((t-e)/2))):e>l&&(l=e)}}else o.anchor("centerVertical","true"),o.imageElement&&(l=Math.max(e,l));break;case"text-bottom":null===c&&(c=dt.baseline(i,!0)),c&&c!==o?o.anchor(pt.CSS.BOTTOM,c.documentId):r&&o.anchor(pt.CSS.BOTTOM,r.documentId);break;case"sub":o.baselineAltered||o.modifyBox(8,-1*Math.ceil(o.fontSize*this.localSettings.deviations.subscriptBottomOffset));case"bottom":""===s||Et.withinRange(t.bounds.height,o.bounds.height)||(t.hasHeight||"true"!==s||(a?r&&(s=r.documentId):t.css(pt.CSS.HEIGHT,mt.formatPX(t.bounds.height),!0)),o.anchor(pt.CSS.BOTTOM,s));break;default:o.baselineAltered||n.push(o)}if(r)r.baselineActive=!0,n.length?_t(r,n):r.textElement&&l>r.actualHeight&&(r.anchor("centerVertical","true"),r=null);else if(n.length&&n.length<i.length&&(e=Gt(i)))for(const t of n)t.baseline&&!t.multiline&&e.bounds.height>t.bounds.height&&t.anchor(pt.CSS.BOTTOM,e.documentId);const d=i[i.length-1];!d.textElement||d.multiline||Ot(d,!1,!1)||d.android("maxLines","1")}else(r=i[0]).baselineActive=!0;if(o>0){if(null===n){const t=e[o-1];n=t.find(t=>!t.floating)||t[0];let i=!1;for(const e of t)i||e!==n?e.linear.bottom>=n.linear.bottom&&(!e.floating||n.floating)&&(n=e):i=!0}for(const t of i)""===t.alignSibling("baseline")&&t.anchor(bt.STRING_BASE.TOP_BOTTOM,n.documentId)}n=r}};if(r(n),i&&r(i),a&&(t.horizontalRows=i?n.concat(i):n),o){const e=t.renderChildren,n=t.renderTemplates,i=[];for(let t=0;t<e.length;t++)e[t].pageFlow||(i.push(n[t]),e.splice(t,1),n.splice(t--,1));for(const t of i)e.push(t.node),n.push(t)}}processConstraintHorizontal(t,e){const n=dt.baseline(e),i=dt.baseline(e,!0),a=t.hasAlign(2048),o=Gt(e),[r,s,c,d]=Dt(a);let h,u,p,m=0;switch(t.cssAscend("textAlign",!0)){case pt.CSS.CENTER:m=.5;break;case pt.CSS.RIGHT:case pt.CSS.END:a||(m=1)}Nt(e),!t.hasPX(pt.CSS.WIDTH)&&e.some(t=>t.percentWidth)&&t.setLayoutWidth(l.MATCH_PARENT);const f=e.length;for(let a=0;a<f;a++){const g=e[a];if(p?g.pageFlow?(p.anchor(d,g.documentId),g.anchor(c,p.documentId),a===f-1&&g.anchor(s,l.PARENT)):g.positionAuto&&g.anchor(c,p.documentId):(g.anchor(r,l.PARENT),g.anchorStyle(l.HORIZONTAL,"packed",m)),g.pageFlow){if(g!==n){if(g.inlineVertical){let a=!1;switch((void 0===h||Xt(g)>Xt(h))&&(h=g),g.verticalAlign){case"text-top":i&&g!==i?g.anchor(pt.CSS.TOP,i.documentId):a=!0;break;case"middle":n&&!n.textElement||o?a=!0:g.anchorParent(l.VERTICAL);break;case"text-bottom":if(i&&g!==i){g!==o?g.anchor(pt.CSS.BOTTOM,i.documentId):o&&(a=!0);break}case"bottom":if(void 0===u)for(const t of e)!t.baseline&&(void 0===u||t.linear.bottom>u.linear.bottom)&&(u=t);g===u?a=!0:g.anchor(pt.CSS.BOTTOM,l.PARENT);break;case"baseline":null===n||g.blockVertical||!g.textElement&&Xt(g)>Xt(n)?a=!0:g.anchor("baseline",n.documentId);break;default:a=!0}a&&(g.anchorParent(l.VERTICAL,"packed"),g.modifyBox(2,g.linear.top-t.box.top),g.baselineAltered=!0)}else g.plainText&&n?g.anchor("baseline",n.documentId):g.anchorParent(l.VERTICAL,"packed");g.anchored=!0}else n.baselineActive=!0;Wt.setConstraintDimension(g),p=g}else g.positionAuto&&(g.anchorParent(l.VERTICAL,"packed"),g.anchored=!0)}if(n){if(h&&h!==n&&n.textElement&&Xt(h)>Xt(n))switch(h.verticalAlign){case"middle":n.anchorParent(l.VERTICAL,void 0,void 0,!0);break;case"baseline":n.anchor("baseline",h.documentId);break;case"bottom":case"text-bottom":n.anchor(pt.CSS.BOTTOM,h.documentId);break;case"sub":h.textElement||(n.anchor(pt.CSS.BOTTOM,h.documentId),n.modifyBox(8,-1*Math.ceil(n.fontSize*this.localSettings.deviations.subscriptBottomOffset)));break;case"super":h.textElement||(n.anchor(pt.CSS.BOTTOM,h.documentId),n.modifyBox(2,-1*Math.ceil(n.fontSize*this.localSettings.deviations.superscriptTopOffset)))}else n.anchorParent(l.VERTICAL,"packed"),n.modifyBox(2,Math.floor(n.linear.top-t.box.top));n.anchored=!0}}processConstraintColumn(t,e){let n=[];const i=[n];for(const t of e)"all"===t.css("columnSpan")?(n.length?i.push([t]):n.push(t),i.push(n=[])):n.push(t);0===n.length&&i.pop();const a=t.parseUnit(t.css("columnGap"))||t.fontSize,o=t.parseUnit(t.css("columnWidth"),pt.CSS.WIDTH),r=t.toInt("columnCount");let s,c=0;if(o>0){let e;for(e=ht.isUserAgent(4)?Math.min(t.width>0?t.width-t.contentBoxWidth:1/0,t.box.width*(r||1),t.documentParent.box.width-t.contentBoxWidth):t.box.width;e-o>=0;)c++,e-=o+a}else c=1/0;function d(t){const e=t.length;for(let n=0;n<e;n++){const i=t[n];n>0&&i.anchor(bt.STRING_BASE.LEFT_RIGHT,t[n-1].documentId),n<e-1&&i.anchor(bt.STRING_BASE.RIGHT_LEFT,t[n+1].documentId),i.anchored=!0}const n=t[0],i=t[e-1];n.anchor(pt.CSS.LEFT,l.PARENT),i.anchor(pt.CSS.RIGHT,l.PARENT),n.anchorStyle(l.HORIZONTAL,"spread_inside")}function h(t,e){const n=t[0][0],i=t.length;for(let a=0;a<i;a++){const i=t[a],o=i.length;for(let r=0;r<o;r++){const c=i[r];if(0===r?0===a?s?(s.anchor(bt.STRING_BASE.BOTTOM_TOP,c.documentId),c.anchor(bt.STRING_BASE.TOP_BOTTOM,"string"==typeof s?s:s.documentId)):(c.anchor(pt.CSS.TOP,l.PARENT),c.anchorStyle(l.VERTICAL)):(c.anchor(pt.CSS.TOP,n.documentId),c.anchorStyle(l.VERTICAL),c.modifyBox(2)):(i[r-1].anchor(bt.STRING_BASE.BOTTOM_TOP,c.documentId),c.anchor(bt.STRING_BASE.TOP_BOTTOM,i[r-1].documentId)),r>0&&c.anchor(pt.CSS.LEFT,i[0].documentId),r===o-1){if(e)c.anchor(pt.CSS.BOTTOM,l.PARENT);else if(a>0&&!c.multiline){const e=t[a-1][r];e&&!e.multiline&&Et.withinRange(c.bounds.top,e.bounds.top)&&(c.anchor(pt.CSS.TOP,e.documentId),c.modifyBox(2,-e.marginTop))}c.modifyBox(8)}c.anchored=!0,c.positioned=!0}}}const u=i.length;for(let e=0;e<u;e++){const n=i[e],p=n[0];if(1===n.length)0===e?(p.anchor(pt.CSS.TOP,l.PARENT),p.anchorStyle(l.VERTICAL)):s&&(s.anchor(bt.STRING_BASE.BOTTOM_TOP,p.documentId),p.anchor(bt.STRING_BASE.TOP_BOTTOM,"string"==typeof s?s:s.documentId)),p.rightAligned?p.anchorParent(l.HORIZONTAL,"packed",1):p.centerAligned?p.anchorParent(l.HORIZONTAL):p.anchorParent(l.HORIZONTAL,"packed"),e===u-1?p.anchor(pt.CSS.BOTTOM,l.PARENT):s=n[0];else{const i=[],l=n.length;let p=Math.min(l,c,r||1/0),m=0;if(p>1){let e=l>=p?Math.ceil(l/p):1;const o=Math.floor(n.reduce((t,e)=>t+e.bounds.height,0)/p);let r=e>1&&l%p!=0?l-p:1/0,s=0;for(let t=0,a=0,c=0;t<l;t++,c++){const l=n[t],d=c%e==0;a<p-1&&(d||r<=0||t>0&&(n[t-1].bounds.height>=o||i[a].length&&n.length-t+1==p-a&&n[t-1].bounds.height>n[t+1].bounds.height))&&(t>0&&(a++,d?r--:r++),void 0===i[a]&&(i[a]=[]),c=0),i[a].push(l),l.length&&(s+=gt.maxArray(Et.objectMap(l.children,t=>t.marginLeft+t.marginRight))),t>0&&/H\d/.test(l.tagName)?1===i[a].length&&t===n.length-2?(p--,r=0):(c+1)%e==0&&n.length-t>p&&!n[t+1].multiline&&n[t+1].bounds.height<o&&(i[a].push(n[++t]),c=-1):n.length-t==p-a&&r!==1/0&&(e=1)}m=p>1?Math.max((s+a*(p-1))/t.box.width/p,.01):0}else i.push(n);const f=[],g=i.length;for(let t=0;t<g;t++){const e=i[t];for(const t of e)t.setLayoutWidth(pt.CSS.PX_0),t.app("layout_constraintWidth_percent",gt.truncate(1/p-m,this.localSettings.precision.standardFloat));f.push(e[0])}const T=Array(g).fill(0),S=[];for(let e=0;e<g;e++){const n=i[e];if(e<g-1&&n.length>1){const t=n[n.length-1];/H\d/.test(t.tagName)&&(n.pop(),f[e+1]=t,i[e+1].unshift(t))}const a=[];for(let t=0;t<n.length;t++){const i=n[t];i.naturalChild?a.push(i.element.cloneNode(!0)):T[e]+=i.linear.height}if(a.length){const n=ft.createElement(document.body,"div",{width:mt.formatPX(o||t.box.width/p),visibility:"hidden"});for(const t of a)n.appendChild(t);T[e]+=n.getBoundingClientRect().height,document.body.removeChild(n)}}const E=f.length;for(let t=1;t<E;t++)f[t].modifyBox(16,a);if(d(f),h(i,e===u-1),s=void 0,i.every(t=>1===t.length)){for(const t of i)S.push(t[t.length-1]);s=this.addBarrier(S,"bottom")}if(!s){let t=0;const e=T.length;for(let n=0;n<e;n++)T[n]>=t&&(s=i[n].pop(),t=T[n])}}}}processConstraintChain(t,e){const n=e[0].actualParent||t,i=dt.partitionRows(e),a=t.hasAlign(512),o=i.length;o>1&&(t.horizontalRows=i),!t.hasWidth&&e.some(t=>t.percentWidth)&&t.setLayoutWidth(l.MATCH_PARENT);let r=[],s=!1;for(let t=0;t<o;t++){const e=i[t],c=i[t-1],[d,h]=Et.partitionArray(e,t=>t.float===pt.CSS.RIGHT||!0===t.autoMargin.left);let u,p;if([h,d].forEach(e=>{const i=e.length;if(0===i)return;const h=e===d,[m,f,g,T]=Dt(h),S=e[0],E=e[i-1];S.anchor(m,l.PARENT),a||n.css("textAlign")!==pt.CSS.CENTER?i>1&&(h?E.anchorStyle(l.HORIZONTAL,"packed",1):S.anchorStyle(l.HORIZONTAL)):S.anchorStyle(l.HORIZONTAL,"spread"),(i>1||E.autoMargin.leftRight)&&E.anchor(f,l.PARENT);for(let d=0;d<i;d++){const i=e[d],A=e[d-1],b=e[d+1];if(0===t?1===o?(i.anchorParent(l.VERTICAL),i.autoMargin.topBottom||i.anchorStyle(l.VERTICAL,"packed",i.autoMargin.top?1:0)):i.anchor(pt.CSS.TOP,l.PARENT):s||t!==o-1||i.anchor(pt.CSS.BOTTOM,l.PARENT),i.autoMargin.leftRight?i.anchorParent(l.HORIZONTAL):(A&&i.anchor(g,A.documentId),b&&i.anchor(T,b.documentId)),Wt.setConstraintDimension(i),a&&t>0&&0===d){let t=!1;for(const e of r)if(Math.ceil(i.linear.top)<Math.floor(e.linear.bottom)){t=!0;break}if(t){u=c[c.length-1];for(let t=r.length-2;t>=0;t--){const e=r[t];if(e.linear.bottom>u.linear.bottom){if(h&&Math.ceil(e.linear[f])-Math.floor(n.box[f])<i.linear.width)continue;const a=r[t+1];i.anchor(m,a.documentId,!0),h?i.modifyBox(4,-a.marginRight,!1):i.modifyBox(16,-a.marginLeft,!1),S.anchorDelete(T),E.anchorDelete(f),S.delete(l.APP,"layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),void 0===p&&(p=i,s=!0);break}}}}}}),a&&(r=r.concat(h,d)),t>0){if(void 0===u){u=c[0];const t=c.length;for(let e=1;e<t;e++)c[e].linear.bottom>=u.linear.bottom&&(u=c[e])}if(void 0===p){p=e[0];const t=e.length;for(let n=1;n<t;n++)e[n].linear.bottom>=p.linear.bottom&&(p=e[n]);s=!1}p.anchor(bt.STRING_BASE.TOP_BOTTOM,u.documentId),u.anchor(bt.STRING_BASE.BOTTOM_TOP,p.documentId);for(const t of e)t!==p&&(t.anchor(pt.CSS.TOP,p.documentId),t.autoMargin.topBottom||t.anchorStyle(l.VERTICAL,"packed",t.autoMargin.top?1:0),t.modifyBox(2,-1*p.marginTop))}}}createLayoutNodeGroup(t){return this.createNodeGroup(t.node,t.children,t.parent)}get userSettings(){return this.application.userSettings}get containerTypeHorizontal(){return{containerType:e.LINEAR,alignmentType:8,renderType:0}}get containerTypeVertical(){return{containerType:e.LINEAR,alignmentType:16,renderType:0}}get containerTypeVerticalMargin(){return{containerType:e.FRAME,alignmentType:256,renderType:0}}get containerTypePercent(){return{containerType:e.CONSTRAINT,alignmentType:8,renderType:0}}get afterInsertNode(){return t=>{this.userSettings.exclusionsDisabled||t.setExclusions(),t.localSettings=It}}}class kt extends squared.base.ExtensionManager{}var Vt={resources:{">":{color:{"@":["name"],"~":!0}}}},Ft={resources:{">":{dimen:{"@":["name"],"~":!0}}}},Ut={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},zt={resources:{">":{string:{"@":["name"],"~":!0}}}},qt={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":!0}}}}}},Yt={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":!0}}}}}};const jt=squared.lib.util,$t=squared.lib.xml,Zt=/^(.+)\/(.+?\.\w+)$/,Kt=/"(-?[\d.]+)px"/g,Jt=/>(-?[\d.]+)px</g;function Qt(t){const e=[],n=t.length;for(let i=0;i<n;i+=3)e.push({pathname:t[i+1],filename:t[i+2],content:t[i]});return e}function te(t){const e=[],n=t.length;for(let i=0;i<n;i+=3)e.push({pathname:t[i+1],filename:t[i+2],content:"",uri:t[i]});return e}const ee=(t,e,n)=>"dp"===n?t.replace(Kt,(t,...n)=>'"'+v(n[0],e,!1)+'"'):t,ne=(t,e,n)=>"dp"===n?t.replace(Jt,(t,...n)=>">"+v(n[0],e,!1)+"<"):t,ie=(t,e,n)=>({pathname:t,filename:e,content:n}),ae=(t,e)=>(""+t).toLowerCase()>=(""+e).toLowerCase()?1:-1;class oe extends squared.base.FileUI{saveAllToDisk(t){const e=[],n=t.length;for(let i=0;i<n;i++)e.push(ie(t[i].pathname,0===i?this.userSettings.outputMainFileName:`${t[i].filename}.xml`,t[i].content));this.saveToDisk(e.concat(Qt(this.resourceStringToXml()),Qt(this.resourceStringArrayToXml()),Qt(this.resourceFontToXml()),Qt(this.resourceColorToXml()),Qt(this.resourceDimenToXml()),Qt(this.resourceStyleToXml()),Qt(this.resourceDrawableToXml()),te(this.resourceDrawableImageToXml()),Qt(this.resourceAnimToXml())),this.userSettings.manifestLabelAppName)}layoutAllToXml(t,e=!1){const n={},i=[],a=t.length;for(let o=0;o<a;o++){const a=t[o];n[a.filename]=[a.content],e&&i.push(ie(a.pathname,0===o?this.userSettings.outputMainFileName:`${a.filename}.xml`,a.content))}return e&&this.saveToDisk(i,this.userSettings.manifestLabelAppName),n}resourceAllToXml(t=!1){const e={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),drawableImage:this.resourceDrawableImageToXml(),anim:this.resourceAnimToXml()};for(const t in e)0===e[t].length&&delete e[t];if(t){let t=[];for(const n in e)t=t.concat("image"===n?te(e[n]):Qt(e[n]));this.saveToDisk(t,this.userSettings.manifestLabelAppName)}return e}resourceStringToXml(t=!1){const e=[],n=[{string:[]}];this.stored.strings.has("app_name")||n[0].string.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[t,e]of Array.from(this.stored.strings.entries()).sort(ae))n[0].string.push({name:t,innerText:e});return e.push($t.replaceTab($t.applyTemplate("resources",zt,n),this.userSettings.insertSpaces),this.directory.string,"strings.xml"),t&&this.saveToDisk(Qt(e),this.userSettings.manifestLabelAppName),e}resourceStringArrayToXml(t=!1){const e=[];if(this.stored.arrays.size){const n=[{"string-array":[]}];for(const[t,e]of Array.from(this.stored.arrays.entries()).sort())n[0]["string-array"].push({name:t,item:jt.objectMap(e,t=>({innerText:t}))});e.push($t.replaceTab($t.applyTemplate("resources",qt,n),this.userSettings.insertSpaces),this.directory.string,"string_arrays.xml"),t&&this.saveToDisk(Qt(e),this.userSettings.manifestLabelAppName)}return e}resourceFontToXml(t=!1){const e=[];if(this.stored.fonts.size){const n=this.userSettings,i=s[n.targetAPI<26?l.APP:l.ANDROID],a=this.directory.font;for(const[t,o]of Array.from(this.stored.fonts.entries()).sort()){const r=[{"xmlns:android":i,font:[]}];for(const e in o){const[n,i,s]=e.split("|");let l=t;"normal"===i?l+="400"===s?"_normal":`_${o[e]}`:(l+=`_${i}`,"400"!==s&&(l+=`_${o[e]}`)),r[0].font.push({font:`@font/${l}`,fontStyle:i,fontWeight:s});const c=this.resource.getFont(n,i,s);c&&c.srcUrl&&this.addAsset({pathname:a,filename:l+"."+jt.fromLastIndexOf(c.srcUrl,".").toLowerCase(),uri:c.srcUrl})}let s=$t.replaceTab($t.applyTemplate("font-family",Ut,r),n.insertSpaces);n.targetAPI<26&&(s=s.replace(/\s+android:/g," app:")),e.push(s,a,`${t}.xml`)}t&&this.saveToDisk(Qt(e),n.manifestLabelAppName)}return e}resourceColorToXml(t=!1){const e=[];if(this.stored.colors.size){const n=[{color:[]}];for(const[t,e]of Array.from(this.stored.colors.entries()).sort())n[0].color.push({name:e,innerText:t});e.push($t.replaceTab($t.applyTemplate("resources",Vt,n),this.userSettings.insertSpaces),this.directory.string,"colors.xml"),t&&this.saveToDisk(Qt(e),this.userSettings.manifestLabelAppName)}return e}resourceStyleToXml(t=!1){const e=this.userSettings,n=[];if(this.stored.styles.size){const t=[{style:[]}];for(const e of Array.from(this.stored.styles.values()).sort((t,e)=>(""+t.name).toLowerCase()>=(""+e.name).toLowerCase()?1:-1))if(Array.isArray(e.items)){const n=[];for(const t of e.items.sort((t,e)=>t.key>=e.key?1:-1))n.push({name:t.key,innerText:t.value});t[0].style.push({name:e.name,parent:e.parent,item:n})}n.push($t.replaceTab($t.applyTemplate("resources",Yt,t),e.insertSpaces),this.directory.string,"styles.xml")}if(this.stored.themes.size){const t={};for(const[i,a]of this.stored.themes.entries()){const o=[{style:[]}];for(const[n,r]of a.entries()){const a=[];for(const t in r.items)a.push({name:t,innerText:r.items[t]});t[i]&&n===e.manifestThemeName&&!a.length||o[0].style.push({name:n,parent:r.parent,item:a}),n===e.manifestThemeName&&(t[i]=!0)}const r=Zt.exec(i);r&&n.push($t.replaceTab(ne($t.applyTemplate("resources",Yt,o),e.resolutionDPI,e.convertPixels),e.insertSpaces),r[1],r[2])}}return t&&this.saveToDisk(Qt(n),this.userSettings.manifestLabelAppName),n}resourceDimenToXml(t=!1){const e=[];if(this.stored.dimens.size){const n=[{dimen:[]}],i=this.userSettings,a=i.resolutionDPI,o=i.convertPixels;for(const[t,e]of Array.from(this.stored.dimens.entries()).sort())n[0].dimen.push({name:t,innerText:o?v(e,a,!1):e});e.push($t.replaceTab($t.applyTemplate("resources",Ft,n)),this.directory.string,"dimens.xml"),t&&this.saveToDisk(Qt(e),i.manifestLabelAppName)}return e}resourceDrawableToXml(t=!1){const e=[];if(this.stored.drawables.size){const n=this.userSettings,i=this.directory.image;for(const[t,a]of this.stored.drawables.entries())e.push($t.replaceTab(ee(a,n.resolutionDPI,n.convertPixels),n.insertSpaces),i,`${t}.xml`);t&&this.saveToDisk(Qt(e),n.manifestLabelAppName)}return e}resourceDrawableImageToXml(t=!1){const e=[];if(this.stored.images.size){const n=this.directory.image;for(const[t,i]of this.stored.images.entries())if(Object.keys(i).length>1)for(const a in i)e.push(i[a],`${n}-${a}`,`${t}.${jt.fromLastIndexOf(i[a],".")}`);else i.mdpi&&e.push(i.mdpi,n,`${t}.${jt.fromLastIndexOf(i.mdpi,".")}`);t&&this.saveToDisk(te(e),this.userSettings.manifestLabelAppName)}return e}resourceAnimToXml(t=!1){const e=[];if(this.stored.animators.size){const n=this.userSettings;for(const[t,i]of this.stored.animators.entries())e.push($t.replaceTab(i,n.insertSpaces),"res/anim",`${t}.xml`);t&&this.saveToDisk(Qt(e),n.manifestLabelAppName)}return e}get userSettings(){return this.resource.userSettings}get stored(){return this.resource.stored}}const re=squared.base.lib.enumeration;class se extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=!0}afterBaseLayout(){for(const t of this.application.processing.cache)if(t.visible&&t.hasProcedure(re.NODE_PROCEDURE.ACCESSIBILITY))switch(t.controlName){case a.EDIT:t.companion||[t.previousSibling,t.nextSibling].some(e=>{if(e&&e.visible&&e.pageFlow){const n=t.element,i=e.element,a="LABEL"===e.documentParent.tagName?e.documentParent:void 0;if(n.id&&n.id===i.htmlFor)return e.android("labelFor",t.documentId),!0;if(a&&e.textElement)return a.android("labelFor",t.documentId),!0}return!1});case a.SELECT:case a.CHECKBOX:case a.RADIO:case a.BUTTON:{const e=t.element;e.readOnly&&t.android("focusable","false"),e.disabled&&t.android("enabled","false");break}}}}var le=squared.base.LayoutUI;const ce=squared.lib.css,de=squared.lib.constant,he=squared.lib.math,ue=squared.lib.util,pe=squared.base.lib.constant,me=squared.base.lib.enumeration,fe=/(start|end|center|baseline)/,ge=/(start|end|center|baseline|left|right)/;function Te(t,e,n){const i="column"===e,a=t[e],o=a.unit.length;let r=0;if(o){const e=i?de.CSS.WIDTH:de.CSS.HEIGHT;for(let n=0;n<o;n++){const i=a.unit[n];if(i.endsWith("px"))r+=parseFloat(i);else{let i=0;ue.captureMap(t.rowData[n],t=>t&&t.length>0,t=>i=Math.min(i,...ue.objectMap(t,t=>t.bounds[e]))),r+=i}}}else if((r=he.maxArray(a.unitTotal))<=0)return 0;return r+=a.gap*(a.length-1),i?n.actualWidth-(r+=n.contentBox?n.borderLeftWidth+n.borderRightWidth:n.contentBoxWidth):n.actualHeight-(r+=n.contentBox?n.borderTopWidth+n.borderBottomWidth:n.contentBoxHeight)}function Se(t,e,n,i){const a=t[i];if(n.startsWith("space")){const r=Te(t,i,e);if(r>0){let e,s,l;"column"===i?(e=16,s=4,l=de.CSS.WIDTH):(e=2,s=8,l=de.CSS.HEIGHT);const c=function(t,e){const n=[];if("column"===e)for(let e=0;e<t.column.length;e++){n[e]=[];for(let i=0;i<t.row.length;i++)n[e].push(t.rowData[i][e])}else for(let e=0;e<t.row.length;e++)n.push(t.rowData[e]);return n}(t,i),d=t[i].length,h=new Set;function o(t){const e=Math.floor(r/t);return[e,r-e*t]}switch(n){case"space-around":{const[t,n]=o(2*d);for(let i=0;i<d;i++)for(const a of new Set(ue.flatMultiArray(c[i]))){const o=(i>0&&i<=n?1:0)+t;h.has(a)?a.cssPX(l,r/d):(a.modifyBox(e,o),a.modifyBox(s,t),h.add(a))}a.normal=!1;break}case"space-between":if(d>1){const[t,e]=o(d-1);for(let n=0;n<d;n++)for(const a of new Set(ue.flatMultiArray(c[n]))){const o=t+(n<e?1:0);n<d-1?h.has(a)?a.cssPX(l,o):(a.modifyBox(s,o),h.add(a)):ue.convertInt(a.android("column"===i?"layout_columnSpan":"layout_rowSpan"))>1&&(a.cssPX(l,o),h.has(a)&&a.modifyBox(s,-o))}}a.normal=!1;break;case"space-evenly":{const[t,n]=o(d+1);for(let i=0;i<d;i++)for(const a of new Set(ue.flatMultiArray(c[i]))){const o=t+(i<n?1:0);h.has(a)?a.cssPX(l,o):(0===i&&a.modifyBox(e,t),a.modifyBox(s,o),h.add(a))}a.normal=!1;break}}}}else{const o=Te(t,i,e);if(o>0){const t="column"===i?256:32;switch(n){case de.CSS.CENTER:e.modifyBox(t,Math.floor(o/2)),a.normal=!1;break;case de.CSS.RIGHT:if("row"===i)break;case de.CSS.END:case"flex-end":e.modifyBox(t,o),a.normal=!1}}}}class Ee extends squared.base.extensions.CssGrid{processNode(t,n){super.processNode(t,n);const i=t.data(pe.EXT_NAME.CSS_GRID,pe.STRING_BASE.EXT_DATA);if(i){const a=new le(n,t,e.GRID,4,t.children);return a.rowCount=i.row.length,a.columnCount=i.column.length,{output:this.application.renderNode(a),complete:!0}}}processChild(t,n){const i=n.data(pe.EXT_NAME.CSS_GRID,pe.STRING_BASE.EXT_DATA),o=t.data(pe.EXT_NAME.CSS_GRID,"cellData");let r,s;if(i&&o){function c(e,a,r){const s=i[a],c=o[`${a}Start`],d=o[`${a}Span`],h=ue.capitalize(r);let u=0,p=0,m=!1,f=0,g=0;s.unit.length&&s.unit.every(t=>t===de.CSS.AUTO)&&(r===de.CSS.WIDTH?s.unit=Array(s.unit.length).fill("1fr"):s.unit.length=0);for(let i=0,a=0;i<d;i++){const o=s.unitMin[c+i];""!==o&&(f+=n.parseUnit(o));let h=s.unit[c+i];if(!h){if(!s.auto[a])continue;h=s.auto[a],s.auto[a+1]&&a++}if(h===de.CSS.AUTO||"max-content"===h){if(d<s.unit.length&&(!n.hasPX(r)||s.unit.some(t=>ce.isLength(t))||"max-content"===h)){u=t.bounds[r],p=0,g=0;break}if(r===de.CSS.WIDTH){u=0,p=0,g=.01;break}}else if("min-content"===h){if(!e.hasPX(r)){e.android(`layout_${r}`,l.WRAP_CONTENT,!1);break}}else if(ce.isPercent(h))g+=parseFloat(h)/100,p=u,u=0;else if(h.endsWith("fr"))r===de.CSS.WIDTH||t.hasHeight?(g+=parseFloat(h),p=u):(g=0,p=t.bounds[r]),u=0;else if(h.endsWith("px")){const t=parseFloat(h);0===p?u+=t:p+=t}o===de.CSS.PX_0&&t.textElement&&(m=!0)}if(d>1){const t=(d-1)*s.gap;u>0&&0===p?u+=t:p>0&&(p+=t),f>0&&(f+=t)}return f>0&&(s.autoFill&&0===u&&1===i["column"===a?"row":"column"].length?(u=Math.max(t.actualWidth,f),g=0):p=f),e.android(`layout_${a}`,""+c),d>1&&e.android(`layout_${a}Span`,""+d),p>0&&!e.hasPX(`min${h}`)&&e.css(`min${h}`,ce.formatPX(p),!0),g>0?e.hasPX(r)||(e.android(`layout_${r}`,de.CSS.PX_0),e.android(`layout_${a}Weight`,he.truncate(g,t.localSettings.floatPrecision)),e.mergeGravity(l.LAYOUT_GRAVITY,"column"===a?"fill_horizontal":"fill_vertical")):u>0&&(e.contentBox&&(u-=e[`contentBox${h}`]),m&&!e.hasPX(`max${h}`)?(e.css(`max${h}`,ce.formatPX(u),!0),e.mergeGravity(l.LAYOUT_GRAVITY,"column"===a?"fill_horizontal":"fill_vertical")):e.hasPX(r)||e.css(r,ce.formatPX(u),!0)),[c,d]}const{alignSelf:d,justifySelf:h}=t.flexbox;if(fe.test(d)||ge.test(h)){(r=this.application.createNode()).containerName=t.containerName,r.setControlType(a.FRAME,e.FRAME),r.inherit(t,"base","initial"),r.resetBox(510),r.exclude(me.NODE_RESOURCE.BOX_STYLE|me.NODE_RESOURCE.ASSET,me.NODE_PROCEDURE.CUSTOMIZATION),n.appendTry(t,r),r.render(n),t.transferBox(30,r),c(r,"column",de.CSS.WIDTH),c(r,"row",de.CSS.HEIGHT);let i=!1;h.endsWith(de.CSS.START)||h.endsWith(de.CSS.LEFT)||h.endsWith("baseline")?(t.mergeGravity(l.LAYOUT_GRAVITY,de.CSS.LEFT),i=!0):h.endsWith(de.CSS.END)||h.endsWith(de.CSS.RIGHT)?(t.mergeGravity(l.LAYOUT_GRAVITY,de.CSS.RIGHT),i=!0):h.endsWith(de.CSS.CENTER)&&(t.mergeGravity(l.LAYOUT_GRAVITY,l.CENTER_HORIZONTAL),i=!0),t.hasWidth||t.setLayoutWidth(i?l.WRAP_CONTENT:l.MATCH_PARENT,!1),d.endsWith(de.CSS.START)||d.endsWith("baseline")?t.mergeGravity(l.LAYOUT_GRAVITY,de.CSS.TOP):d.endsWith(de.CSS.END)?t.mergeGravity(l.LAYOUT_GRAVITY,de.CSS.BOTTOM):d.endsWith(de.CSS.CENTER)?t.mergeGravity(l.LAYOUT_GRAVITY,l.CENTER_VERTICAL):t.hasHeight||t.setLayoutHeight(l.MATCH_PARENT,!1),r.innerWrapped=t,t.outerWrapper=r,t.parent=r,s=this.application.renderNode(new le(n,r,e.FRAME,4096,r.children))}const u=r||t;c(u,"column",de.CSS.WIDTH),u.hasPX(de.CSS.WIDTH)||u.mergeGravity(l.LAYOUT_GRAVITY,"fill_horizontal");const[p,m]=c(u,"row",de.CSS.HEIGHT);"normal"===i.alignContent&&!n.hasPX(de.CSS.HEIGHT)&&1===m&&!0===i.rowSpanMultiple[p]&&(!i.row.unit[p]||i.row.unit[p]===de.CSS.AUTO)&&t.initial.bounds&&t.bounds.height>t.initial.bounds.height?u.css("minHeight",ce.formatPX(t.actualHeight),!0):u.hasPX(de.CSS.HEIGHT)||1===i.row.length&&"space-between"===i.alignContent||(fe.test(i.alignItems)||u.mergeGravity(l.LAYOUT_GRAVITY,"fill_vertical"),"normal"===i.alignContent&&n.hasHeight&&0===i.rowSpanMultiple.length&&u.mergeGravity("layout_rowWeight","1"))}return{parent:r,renderAs:r,outputAs:s}}postBaseLayout(t){const e=t.data(pe.EXT_NAME.CSS_GRID,pe.STRING_BASE.EXT_DATA);if(e){if(t.hasWidth&&"normal"!==e.justifyContent&&Se(e,t,e.justifyContent,"column"),t.hasHeight&&"normal"!==e.alignContent&&(Se(e,t,e.alignContent,"row"),e.rowWeight.length>1)){const t=this.application.controllerHandler.localSettings.precision.standardFloat;for(let n=0;n<e.row.length;n++)if(e.rowWeight[n]>0){const i=e.rowData[n],a=i.length;for(let o=0;o<a;o++){const a=i[o];if(a)for(let i of a)i.outerWrapper&&(i=i.outerWrapper),i.android("layout_rowWeight",""+he.truncate(e.rowWeight[n],t)),i.setLayoutHeight(de.CSS.PX_0)}}}if(e.column.normal&&!e.column.unit.includes(de.CSS.AUTO)){const n=e.column.gap*(e.column.length-1);n>0&&(t.renderParent&&!t.renderParent.hasAlign(4)&&(t.cssPX("minWidth",n),t.cssPX(de.CSS.WIDTH,n,!1,!0)),!t.hasPX(de.CSS.WIDTH)&&t.hasPX("maxWidth")&&t.css(de.CSS.WIDTH,ce.formatPX(t.actualWidth+n),!0))}}}postOptimize(t){const e=t.data(pe.EXT_NAME.CSS_GRID,pe.STRING_BASE.EXT_DATA);if(e){const n=this.application.controllerHandler,i=Array.from(e.children)[e.children.size-1];if(e.column.unit.length&&e.column.unit.every(t=>ce.isPercent(t))){const a=e.column.unit.reduce((t,e)=>t+parseFloat(e),0)+e.column.gap*e.column.length*100/t.actualWidth;if(a<100){t.android("columnCount",""+(e.column.length+1));for(let o=0;o<e.row.length;o++)n.addAfterOutsideTemplate(i.id,n.renderSpace(ce.formatPercent((100-a)/100),l.WRAP_CONTENT,0,0,M(void 0,{[t.localizeString(l.MARGIN_LEFT)]:`@dimen/${b.insertStoredAsset("dimens",`${t.controlId}_cssgrid_column_gap_`,ce.formatPX(e.column.gap))}`,layout_row:""+o,layout_column:""+e.column.length})),!1)}}const a=e.emptyRows,o=a.length;for(let r=0;r<o;r++){const o=a[r];if(o){const a=o.length;for(let s=0;s<a;s++)if(1===o[s]){n.addAfterOutsideTemplate(i.id,n.renderSpace(l.WRAP_CONTENT,`@dimen/${b.insertStoredAsset("dimens",`${t.controlId}_cssgrid_row_gap_`,ce.formatPX(e.row.gap))}`,0,0,M(void 0,{layout_row:""+r,layout_column:""+s})),!1);break}}}}}}class Ae extends squared.base.extensions.External{constructor(){super(...arguments),this.eventOnly=!0}}var be=squared.base.LayoutUI,Ce=squared.base.NodeUI;const ye=squared.lib.constant,Re=squared.lib.math,Ie=squared.lib.util,Ne=squared.base.lib.constant,Pe=(squared,{leftTop:[ye.CSS.LEFT,ye.CSS.TOP],rightBottom:[ye.CSS.RIGHT,ye.CSS.BOTTOM],rightLeftBottomTop:[Ne.STRING_BASE.RIGHT_LEFT,Ne.STRING_BASE.BOTTOM_TOP],leftRightTopBottom:[Ne.STRING_BASE.LEFT_RIGHT,Ne.STRING_BASE.TOP_BOTTOM],widthHeight:["Width","Height"],horizontalVertical:[l.HORIZONTAL,l.VERTICAL]});function _e(t,e,n){const i=n===ye.CSS.WIDTH,a=`has${Ie.capitalize(n)}`,o=e.reduce((t,e)=>t+e.flexbox.grow,0),r=e=>e.flexbox.basis=`${e.bounds[n]/t.box[n]*100}%`;let s=t[a]||t.blockStatic&&Ie.withinRange(t.parseUnit(t.css(i?"maxWidth":"maxHeight")),t.box.width),l=0;if(s)for(const t of e){const e=t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin;if(i){if(e.horizontal){s=!1;break}}else if(e.vertical){s=!1;break}}if(e.length>1&&(i||s)){const t=[],i=[];let o,c=0,d=0,h=NaN;for(const r of e){const e=r.bounds[n];let u=!1;if(r.flexbox.grow>0||1!==r.flexbox.shrink){const i=r.parseUnit(r.flexbox.basis===ye.CSS.AUTO?r.css(n):r.flexbox.basis,n);if(i>0){const{shrink:n,grow:a}=r.flexbox;let s=!1;e<i?(isNaN(h)||n<h)&&(h=n,s=!0,l=1):(isNaN(h)||a>h)&&(h=a,s=!0,l=2),s&&(o=r,c=i,d=e),t.push({item:r,basis:i,dimension:e,shrink:n,grow:a});continue}r.flexbox.grow>0&&e>r[n]&&(u=!0)}r.flexbox.alignSelf===ye.CSS.AUTO&&(s&&!r[a]||u)&&i.push(r)}if(0!==l){if(t.length>1)for(const e of t){const t=e.item;t.flexbox.grow=t===o||e.basis===c&&(1===l&&h===e.shrink||2===l&&h===e.grow)?1:e.dimension/e.basis/(d/c)*e.basis/c}if(i.length)for(const t of i)r(t)}}if(i&&0===l)for(const n of e)n.cascadeSome(e=>e.multiline&&0===e.ascend(t=>t[a],t).length)&&r(n);return o}const Oe=t=>t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin;class xe extends squared.base.extensions.Flexbox{processNode(t,n){super.processNode(t,n);const i=t.data(Ne.EXT_NAME.FLEXBOX,Ne.STRING_BASE.EXT_DATA);if(i.directionRow&&1===i.rowCount||i.directionColumn&&1===i.columnCount)return t.containerType=e.CONSTRAINT,t.addAlign(4),i.wrap=!1,{include:!0};{const a=new be(n,t,0,4);return a.itemCount=t.length,a.rowCount=i.rowCount,a.columnCount=i.columnCount,i.directionRow&&t.hasHeight||i.directionColumn&&t.hasWidth||t.some(t=>!t.pageFlow)?a.containerType=e.CONSTRAINT:a.setType(e.LINEAR,i.directionColumn?8:16),{output:this.application.renderNode(a),complete:!0}}}processChild(t,n){if(t.hasAlign(128))return{output:this.application.renderNode(new be(n,t,e.CONSTRAINT,4,t.children)),complete:!0};if(t.autoMargin.horizontal||t.autoMargin.vertical&&t.hasHeight){const i=n.data(Ne.EXT_NAME.FLEXBOX,Ne.STRING_BASE.EXT_DATA);if(i){const a=i.children.findIndex(e=>e===t);if(-1!==a){const o=this.application.controllerHandler.createNodeWrapper(t,n);return o.cssApply({marginTop:ye.CSS.PX_0,marginRight:ye.CSS.PX_0,marginBottom:ye.CSS.PX_0,marginLeft:ye.CSS.PX_0,display:"block"},!0),o.saveAsInitial(!0),o.flexbox=Object.assign({},t.flexbox),i.children[a]=o,t.autoMargin.horizontal&&!t.hasWidth&&t.setLayoutWidth(l.WRAP_CONTENT),{parent:o,renderAs:o,outputAs:this.application.renderNode(new be(n,o,e.FRAME,4096,o.children))}}}}}postBaseLayout(t){const e=t.data(Ne.EXT_NAME.FLEXBOX,Ne.STRING_BASE.EXT_DATA);if(e){const n=[],i=[],a=[];if(e.wrap){let o;t.each(t=>{if(t.hasAlign(128)){const r=t.renderFilter(t=>t.pageFlow);if(r.length){if(e.directionRow)t.setLayoutWidth(l.MATCH_PARENT),n.push(r);else{if(t.setLayoutHeight(l.MATCH_PARENT),o){const n=o.length;let i=o[0];for(let t=1;t<n;t++)o[t].linear.right>i.linear.right&&(i=o[t]);if(e.wrapReverse){const e=t.linear.left-i.actualRect(ye.CSS.RIGHT);e>0&&t.modifyBox(16,e)}t.constraint.horizontal=!0}i.push(r),o=r}a.push(t)}}}),t.layoutLinear?e.directionColumn&&e.wrapReverse&&t.mergeGravity(l.GRAVITY,ye.CSS.RIGHT):a.length&&(e.directionRow?i.push(a):n.push(a))}else e.directionRow?(e.directionReverse&&e.children.reverse(),n[0]=e.children):(e.directionReverse&&e.children.reverse(),i[0]=e.children);[n,i].forEach((n,i)=>{const o=0===i,r=o?1:0,s=Pe.horizontalVertical[i],c=Pe.horizontalVertical[r],d=Pe.widthHeight[i],h=Pe.widthHeight[r],u=Pe.leftTop[i],p=Pe.leftTop[r],m=Pe.rightBottom[i],f=Pe.rightBottom[r],g=Pe.leftRightTopBottom[i],T=Pe.rightLeftBottomTop[i],S=d.toLowerCase(),E=h.toLowerCase(),A=t[`has${h}`],b=t[`has${d}`],C=`layout_constraint${Ie.capitalize(s)}_weight`;function y(t,e){t.app(C,Re.truncate(e,t.localSettings.floatPrecision)),t.android(`layout_${d.toLowerCase()}`,ye.CSS.PX_0)}const R=n.length;for(let i=0;i<R;i++){const r=n[i],d=r.length,h=r[0],R=r[d-1],I=r===a,N=!I&&r.every(t=>0===t.flexbox.grow),P=N&&("space-between"===e.justifyContent||"space-around"===e.justifyContent&&d>1),_=[];let O=0,x=0,L=!0,w=null;if(I)if(b){let t="spread",n=0;switch(e.alignContent){case ye.CSS.LEFT:case ye.CSS.RIGHT:case"flex-end":t="packed",n=1,L=!1;break;case"baseline":case ye.CSS.START:case ye.CSS.END:case"flex-start":t="packed",L=!1}h.anchorStyle(s,t,n)}else h.anchorStyle(s);else if(x=1-_e(t,r,S),d>1){const t=new Set(Ie.objectMap(r,t=>t.initial.bounds?t.initial.bounds[E]:0));t.size>1&&(O=Re.maxArray(Array.from(t)))}for(let t=0;t<d;t++){const a=r[t],h=r[t-1],u=r[t+1];if(u&&a.anchor(T,(u.outerWrapper||u).documentId),h&&a.anchor(g,(h.outerWrapper||h).documentId),I)L&&d>1&&b&&y(a,1),a.anchor(p,l.PARENT);else{const m=Oe(a),b=a.innerWrapped;if(o){if(m.horizontal)if(b){let t;t=m.leftRight?l.CENTER_HORIZONTAL:a.localizeString(m.left?ye.CSS.RIGHT:ye.CSS.LEFT),b.mergeGravity(l.LAYOUT_GRAVITY,t),x>0&&(a.flexbox.basis=ye.CSS.PERCENT_0,_.push(a))}else m.leftRight||(m.left?h&&a.anchorDelete(g):u&&a.anchorDelete(T))}else if(m.vertical)if(b){let t;t=m.topBottom?l.CENTER_VERTICAL:a.localizeString(m.top?ye.CSS.BOTTOM:ye.CSS.TOP),b.mergeGravity(l.LAYOUT_GRAVITY,t),x>0&&(a.flexbox.basis=ye.CSS.PERCENT_0,_.push(a))}else m.topBottom||(m.top?h&&a.anchorDelete(g):u&&a.anchorDelete(T));switch(a.flexbox.alignSelf){case ye.CSS.START:case"flex-start":a.anchor(p,l.PARENT);break;case ye.CSS.END:case"flex-end":a.anchor(f,l.PARENT);break;case"baseline":o&&(null===w&&(w=Ce.baseline(r)),w&&a!==w&&a.anchor("baseline",w.documentId));break;case ye.CSS.CENTER:a.anchorParent(c,"packed",.5),0!==a[E]||o||A||!a.cascadeSome(t=>t.multiline)||a.android(`layout_${E}`,ye.CSS.PX_0);break;default:const h=a.innerWrapped,u=e.wrapReverse;switch(e.alignContent){case ye.CSS.CENTER:n.length%2==1&&i===Math.floor(n.length/2)?a.anchorParent(c):i<n.length/2?a.anchor(f,l.PARENT):i>=n.length/2&&a.anchor(p,l.PARENT);break;case"space-evenly":case"space-around":a.layoutFrame&&h?h.mergeGravity(l.LAYOUT_GRAVITY,o?l.CENTER_VERTICAL:l.CENTER_HORIZONTAL):a.anchorParent(c);break;case"space-between":P&&2===d&&a.anchorDelete(0===t?T:g),0===i?a.layoutFrame&&h?h.mergeGravity(l.LAYOUT_GRAVITY,u?f:p):a.anchor(u?f:p,l.PARENT):n.length>2&&i<n.length-1?a.layoutFrame&&h?h.mergeGravity(l.LAYOUT_GRAVITY,o?l.CENTER_VERTICAL:l.CENTER_HORIZONTAL):a.anchorParent(c):a.layoutFrame&&h?h.mergeGravity(l.LAYOUT_GRAVITY,u?p:f):a.anchor(u?p:f,l.PARENT);break;default:if(a.anchorParent(c),void 0!==a.innerWrapped&&a.innerWrapped.autoMargin[c]||a.anchorStyle(c,"packed",u?1:0),0===a[E]){const t=a.initial.bounds&&a.initial.bounds[E],n=t<O,i=`layout_${E}`;if(n){if(A||0===O||n){if(0===O&&(!A&&d>1||e.wrap))break;a.android(i,o&&!A?n?ye.CSS.PX_0:l.MATCH_PARENT:ye.CSS.PX_0),b&&!b.autoMargin[s]&&b.android(i,l.MATCH_PARENT)}}else A&&(0===O&&a.bounds[E]>t||a.flexElement&&(o&&"column"===a.css("flexDirection")||!o&&"row"===a.css("flexDirection")))&&a.android(i,ye.CSS.PX_0)}}}Wt.setFlexDimension(a,S)}a.anchored=!0,a.positioned=!0}if(x>0)for(const t of _){const e=Oe(t);let n=1;o?e.leftRight&&(n=2):e.topBottom&&(n=2),y(t,Math.max(t.flexbox.grow,x*n/_.length))}if(h.anchor(u,l.PARENT),R.anchor(m,l.PARENT),!I&&(o||e.directionColumn)){let a=!1;if(N)switch(e.justifyContent){case"normal":e.directionColumn&&h.anchorStyle(s,"packed",e.directionReverse?1:0);break;case ye.CSS.LEFT:if(!o)break;case ye.CSS.START:case"flex-start":h.anchorStyle(s,"packed",e.directionReverse?1:0);break;case ye.CSS.CENTER:d>1&&h.anchorStyle(s,"packed",.5),a=!0;break;case ye.CSS.RIGHT:if(!o)break;case ye.CSS.END:case"flex-end":h.anchorStyle(s,"packed",1);break;case"space-between":1===d&&R.anchorDelete(m);break;case"space-evenly":if(d>1){h.anchorStyle(s,"spread");const t=Ie.capitalize(s);for(const e of r)e.app(`layout_constraint${t}_weight`,""+(e.flexbox.grow||1))}else a=!0;break;case"space-around":if(d>1){const e=this.application.controllerHandler;h.constraint[s]=!1,R.constraint[s]=!1,e.addGuideline(h,t,s,!0,!1),e.addGuideline(R,t,s,!0,!0)}else a=!0}P||!e.wrap&&n[i].some(t=>""!==t.app(C))&&!Ie.sameArray(n[i],t=>t.app(C))?h.anchorStyle(s,"spread_inside",0,!1):a||h.anchorStyle(s,"packed",e.directionReverse?1:0,!1)}}})}}}var Le=squared.base.LayoutUI;const we=squared.lib.constant,ve=squared.lib.css,He=squared.lib.util,Me=squared.base.lib.constant;squared;class Ge extends squared.base.extensions.Grid{processNode(t,n){super.processNode(t,n);const i=t.data(Me.EXT_NAME.GRID,Me.STRING_BASE.EXT_DATA);if(i){const a=new Le(n,t,e.GRID,4,t.children);return a.columnCount=i.columnCount,{output:this.application.renderNode(a),complete:!0}}}processChild(t,e){const n=e.data(Me.EXT_NAME.GRID,Me.STRING_BASE.EXT_DATA),i=t.data(Me.EXT_NAME.GRID,"cellData");if(n&&i){const n=i.siblings&&i.siblings.slice(0);let a;if(n){const o=this.application.controllerHandler;if(n.unshift(t),t=(a=o.processLayoutHorizontal(new Le(e,o.createNodeGroup(t,n,e,!0),0,i.block?64:0,n))).node,i.block)t.css("display","block");else for(const t of n)t.percentWidth&&t.css(we.CSS.WIDTH,ve.formatPX(t.bounds.width),!0);!function(t,e){const n=squared.base.extensions.Grid.createDataCellAttribute();for(const t of e){const e=t.data(Me.EXT_NAME.GRID,"cellData");e&&(e.cellStart&&(n.cellStart=!0),e.cellEnd&&(n.cellEnd=!0),e.rowEnd&&(n.rowEnd=!0),e.rowStart&&(n.rowStart=!0),t.data(Me.EXT_NAME.GRID,"cellData",null))}t.data(Me.EXT_NAME.GRID,"cellData",n)}(t,n)}if(i.rowSpan>1&&t.android("layout_rowSpan",""+i.rowSpan),i.columnSpan>1&&t.android("layout_columnSpan",""+i.columnSpan),"table-cell"===t.display&&t.mergeGravity(l.LAYOUT_GRAVITY,"fill"),a)return{parent:a.node,renderAs:a.node,outputAs:this.application.renderNode(a),complete:!0}}}postBaseLayout(t){if("collapse"!==t.css("borderCollapse")){const e=t.data(Me.EXT_NAME.GRID,Me.STRING_BASE.EXT_DATA);e&&t.renderEach(n=>{const i=n.data(Me.EXT_NAME.GRID,"cellData");if(i){const a=n.actualParent;if(a&&!a.visible&&(i.cellStart&&(e.paddingTop=a.paddingTop+a.marginTop),i.rowStart&&(e.paddingLeft=Math.max(a.marginLeft+a.paddingLeft,e.paddingLeft)),i.rowEnd)){const o=a.marginBottom+a.paddingBottom+(i.cellEnd?0:a.marginTop+a.paddingTop);if(o>0)if(i.cellEnd)e.paddingBottom=o;else{const i=this.application.controllerHandler;i.addAfterOutsideTemplate(n.id,i.renderSpace(l.MATCH_PARENT,`@dimen/${b.insertStoredAsset("dimens",`${t.controlId}_grid_space`,ve.formatPX(o))}`,e.columnCount),!1)}e.paddingRight=Math.max(a.marginRight+a.paddingRight,e.paddingRight)}}}),t.modifyBox(32,e.paddingTop),t.modifyBox(64,e.paddingRight),t.modifyBox(128,e.paddingBottom),t.modifyBox(256,e.paddingLeft)}if(!t.hasWidth){let e=-1/0;He.captureMap(t.renderChildren,t=>t.inlineFlow||!t.blockStatic,t=>e=Math.max(e,t.linear.right)),He.withinRange(t.box.right,e)&&t.setLayoutWidth(l.WRAP_CONTENT)}}}var De=squared.base.LayoutUI,Be=squared.base.NodeUI;const Xe=squared.lib.constant,We=squared.lib.css,ke=squared.lib.util,Ve=squared.base.lib.constant,Fe=(squared,24),Ue=8;class ze extends squared.base.extensions.List{processNode(t,n){const i=new De(n,t,0,0,t.children);if((!i.unknownAligned||i.singleRowAligned)&&(super.processNode(t,n),i.linearY?(i.rowCount=t.length,i.columnCount=t.some(t=>"inside"===t.css("listStylePosition"))?3:2,i.setType(e.GRID,4)):(i.linearX||i.singleRowAligned)&&(i.rowCount=1,i.columnCount=i.length,i.setType(e.RELATIVE,8)),0!==i.containerType))return{output:this.application.renderNode(i),complete:!0}}processChild(t,n){const i=t.data(Ve.EXT_NAME.LIST,Ve.STRING_BASE.EXT_DATA);if(i){const o=this.application,r=o.controllerHandler;let s=t.marginLeft,c=0,d=!1,h=NaN;t.modifyBox(16),n.is(e.GRID)?(c=ke.convertInt(n.android("columnCount")),d=!0):n.item(0)===t&&(d=!0),d&&(s+=n.paddingLeft>0?n.paddingLeft:n.marginLeft);const u=0===t.length?r.createNodeGroup(t,[t],n):t;let p=i.ordinal?void 0:t.find(t=>t.float===Xe.CSS.LEFT&&t.marginLeft<0&&Math.abs(t.marginLeft)<=t.documentParent.marginLeft);if(p){const i=new De(n,p);p.inlineText||0===p.length?i.containerType=e.TEXT:(i.singleRowAligned?i.setType(e.RELATIVE,8):i.setType(e.CONSTRAINT,2),i.retain(p.children)),p.parent=n,p.render(n),3===c&&t.android("layout_columnSpan","2"),(s+=p.marginLeft)>0&&!p.hasWidth&&p.android("minWidth",We.formatPX(s)),p.modifyBox(16),o.addLayoutTemplate(n,p,o.renderNode(i))}else{const m="inside"===t.css("listStylePosition");let f,g=Xe.CSS.RIGHT,T=0,S=0;if(""!==i.imageSrc){if(i.imagePosition){const e=We.getBackgroundPosition(i.imagePosition,t.actualDimension,t.fontSize);({top:T,left:S}=e),g=Xe.CSS.LEFT,t.marginLeft<0?(h=t.marginLeft,h+=n.paddingLeft>0?n.paddingLeft:n.marginLeft):d=!1,s=0}f=o.resourceHandler.addImageSrc(i.imageSrc)}let E=0;if(g===Xe.CSS.LEFT)s+=t.paddingLeft-S,t.modifyBox(256);else{const t=i.ordinal?i.ordinal.length:1;E=Math.max(s/(f?6:4*t),4)}const A=M();(p=o.createNode()).containerName=`${t.containerName}_ORDINAL`,m?(r.addBeforeOutsideTemplate(p.id,r.renderNodeStatic(a.SPACE,M(void 0,{minWidth:`@dimen/${b.insertStoredAsset("dimens",`${t.tagName.toLowerCase()}_space_`,We.formatPX(s))}`})),!1),s=Fe):3===c&&u.android("layout_columnSpan","2"),"DT"!==t.tagName||f?(f?(p.setControlType(a.IMAGE,e.IMAGE),Object.assign(A.android,{src:`@drawable/${f}`,scaleType:m||g!==Xe.CSS.RIGHT?"fitStart":"fitEnd",baselineAlignBottom:d?"true":""})):i.ordinal?(p.textContent=i.ordinal,p.inlineText=!0,p.setControlType(a.TEXT,e.TEXT),"DFN"===t.tagName&&(s+=Ue,p.modifyBox(64,Ue))):(p.setControlType(a.SPACE,e.SPACE),p.renderExclude=!1,t.modifyBox(256)),p.inherit(t,"textStyle"),p.depth=t.depth,p.cssApply({minWidth:s>0?We.formatPX(s):"",marginTop:0!==t.marginTop?We.formatPX(t.marginTop):"",paddingTop:t.paddingTop>0&&0===t.getBox(32)[0]?We.formatPX(t.paddingTop):"",paddingRight:E>0&&g===Xe.CSS.RIGHT?We.formatPX(E):"",paddingLeft:E>0&&g===Xe.CSS.LEFT&&(!f||i.imagePosition)?We.formatPX(E):"",fontSize:i.ordinal&&!i.ordinal.endsWith(".")?We.formatPX(.75*p.toFloat("fontSize")):"",lineHeight:t.lineHeight>0?We.formatPX(t.lineHeight):""}),p.apply(A),p.cssTry("display","block")&&(p.setBounds(),p.cssFinally("display")),p.saveAsInitial(),m||p.mergeGravity(l.GRAVITY,t.localizeString(g)),0!==T&&p.modifyBox(2,T),0!==S&&p.modifyBox(16,S),p.render(n),o.addLayoutTemplate(n,p,{type:1,node:p,controlName:p.controlName}),t.companion=p):u.android("layout_columnSpan",""+c)}if(p.positioned=!0,d&&((isNaN(h)||h<=0)&&n.modifyBox(n.paddingLeft>0?256:16),"number"==typeof h&&h<0&&n.modifyBox(16,h)),c>0&&(u.setLayoutWidth(Xe.CSS.PX_0),u.android("layout_columnWeight","1"),u!==t?t.baseline&&u.android("baselineAlignedChildIndex","0"):t.filter(t=>t.visible).length>1&&Be.linearData(t.children).linearY&&t.addAlign(1024)),u!==t)return 0!==t.marginTop&&(u.modifyBox(2,t.marginTop),t.modifyBox(2),t.outerWrapper=u,u.innerWrapped=t),{parent:u,renderAs:u,outputAs:o.renderNode(new De(n,u,e.LINEAR,18,u.children))}}}}const qe=squared.lib.util;class Ye extends squared.base.extensions.Relative{postOptimize(t){super.postOptimize(t),t.imageOrSvgElement&&t.alignSibling("baseline")&&0!==qe.convertFloat(t.verticalAlign)&&"invisible"===t.android("visibility")&&t.android("baselineAlignBottom","true")}}var je=squared.base.LayoutUI;const $e=squared.lib.constant,Ze=squared.lib.css,Ke=squared.base.lib.constant,Je=squared.base.lib.enumeration;class Qe extends squared.base.extensions.Sprite{processNode(t,n){const i=t.data(Ke.EXT_NAME.SPRITE,Ke.STRING_BASE.EXT_DATA);if(i){const o=this.application.resourceHandler.addImageSrc(t.backgroundImage);if(""!==o){const r=this.application.createNode();return r.inherit(t,"base","initial","styleMap"),r.setControlType(a.FRAME,e.FRAME),r.exclude(Je.NODE_RESOURCE.IMAGE_SOURCE,Je.NODE_PROCEDURE.CUSTOMIZATION),n.appendTry(t,r),t.setControlType(a.IMAGE,e.IMAGE),t.exclude(Je.NODE_RESOURCE.FONT_STYLE|Je.NODE_RESOURCE.BOX_STYLE),t.cssApply({position:"static",top:$e.CSS.AUTO,right:$e.CSS.AUTO,bottom:$e.CSS.AUTO,left:$e.CSS.AUTO,display:"inline-block",width:i.image.width>0?Ze.formatPX(i.image.width):"auto",height:i.image.height>0?Ze.formatPX(i.image.height):"auto",marginTop:Ze.formatPX(i.position.top),marginRight:$e.CSS.PX_0,marginBottom:$e.CSS.PX_0,marginLeft:Ze.formatPX(i.position.left),paddingTop:$e.CSS.PX_0,paddingRight:$e.CSS.PX_0,paddingBottom:$e.CSS.PX_0,paddingLeft:$e.CSS.PX_0,borderTopStyle:$e.CSS.NONE,borderRightStyle:$e.CSS.NONE,borderBottomStyle:$e.CSS.NONE,borderLeftStyle:$e.CSS.NONE,borderRadius:$e.CSS.PX_0,backgroundPositionX:$e.CSS.PX_0,backgroundPositionY:$e.CSS.PX_0,backgroundColor:"rgba(0, 0, 0, 0)"}),t.unsetCache(),t.android("src",`@drawable/${o}`),r.innerWrapped=t,t.outerWrapper=r,t.parent=r,{renderAs:r,outputAs:this.application.renderNode(new je(n,r,e.FRAME,4096,r.children)),parent:r,complete:!0}}}}}class tn extends squared.base.extensions.Substitute{processNode(t,n){return t.containerType=t.blockStatic?e.BLOCK:e.INLINE,super.processNode(t,n)}postOptimize(t){t.apply(b.formatOptions(M(this.options[t.elementId]),this.application.extensionManager.optionValueAsBoolean(i.RESOURCE_STRINGS,"numberResourceValue")))}}var en=squared.base.LayoutUI;const nn=squared.lib.constant,an=squared.lib.css,on=squared.lib.util,rn=squared.base.lib.constant;squared;class sn extends squared.base.extensions.Table{processNode(t,n){super.processNode(t,n);const i=t.data(rn.EXT_NAME.TABLE,rn.STRING_BASE.EXT_DATA);if(i){let a=!1;i.columnCount>1&&(a=!0===t.data(rn.EXT_NAME.TABLE,"expand"),t.each(e=>{if(e.css(nn.CSS.WIDTH)===nn.CSS.PX_0)e.setLayoutWidth(nn.CSS.PX_0),e.android("layout_columnWeight",""+(e.element.colSpan||1));else{const n=e.data(rn.EXT_NAME.TABLE,"expand");if(void 0!==n)if(n){const n=on.convertFloat(e.data(rn.EXT_NAME.TABLE,"percent"))/100;n>0&&(e.setLayoutWidth(nn.CSS.PX_0),e.android("layout_columnWeight",on.trimEnd(n.toPrecision(3),"0")),a=!t.hasWidth)}else e.android("layout_columnWeight","0");!0===e.data(rn.EXT_NAME.TABLE,"downsized")&&(!0===e.data(rn.EXT_NAME.TABLE,"exceed")?(e.setLayoutWidth(nn.CSS.PX_0),e.android("layout_columnWeight","0.01")):e.hasPX(nn.CSS.WIDTH)&&e.actualWidth<e.bounds.width&&e.setLayoutWidth(an.formatPX(e.bounds.width)))}e.textElement&&e.textContent.length>1&&!/[\s\n\-]/.test(e.textContent.trim())&&e.android("maxLines","1")}),a&&(n.hasPX(nn.CSS.WIDTH)&&on.aboveRange(t.actualWidth,n.actualWidth)?t.setLayoutWidth(l.MATCH_PARENT):t.css(nn.CSS.WIDTH,an.formatPX(t.actualWidth),!0))),!a&&t.hasPX(nn.CSS.WIDTH)&&t.actualWidth<Math.floor(t.bounds.width)&&(i.layoutFixed?t.android(nn.CSS.WIDTH,an.formatPX(t.bounds.width),!0):(t.hasPX("minWidth")||t.android("minWidth",an.formatPX(t.actualWidth)),t.css(nn.CSS.WIDTH,nn.CSS.AUTO,!0))),t.hasPX(nn.CSS.HEIGHT)&&t.actualHeight<Math.floor(t.bounds.height)&&(t.hasPX("minHeight")||t.android("minHeight",an.formatPX(t.actualHeight)),t.css(nn.CSS.HEIGHT,nn.CSS.AUTO,!0));const o=new en(n,t,e.GRID,4,t.children);return o.rowCount=i.rowCount,o.columnCount=i.columnCount,{output:this.application.renderNode(o),complete:!0}}}processChild(t,e){const n=on.convertInt(t.data(rn.EXT_NAME.TABLE,"rowSpan")),i=on.convertInt(t.data(rn.EXT_NAME.TABLE,"colSpan")),a=on.convertInt(t.data(rn.EXT_NAME.TABLE,"spaceSpan"));if(n>1&&t.android("layout_rowSpan",""+n),i>1&&t.android("layout_columnSpan",""+i),t.mergeGravity(l.LAYOUT_GRAVITY,"fill"),a>0){const e=this.application.controllerHandler;e.addAfterOutsideTemplate(t.id,e.renderSpace(l.WRAP_CONTENT,l.WRAP_CONTENT,a),!1)}"hide"===e.css("empty-cells")&&0===t.naturalChildren.length&&""===t.textContent&&t.hide(!0)}postOptimize(t){const e=on.convertInt(t.layoutWidth);e>0&&(t.bounds.width>e&&t.setLayoutWidth(an.formatPX(t.bounds.width)),e>0&&t.cssInitial(nn.CSS.WIDTH)===nn.CSS.AUTO&&t.renderChildren.every(t=>t.inlineWidth)&&t.renderEach(t=>{t.setLayoutWidth(nn.CSS.PX_0),t.android("layout_columnWeight","1")}))}}var ln=squared.base.LayoutUI;squared;class cn extends squared.base.extensions.VerticalAlign{processNode(t,n){return super.processNode(t,n),{output:this.application.renderNode(new ln(n,t,e.RELATIVE,8,t.children))}}}class dn extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=!0}}var hn=squared.base.LayoutUI;const un=squared.lib.constant,pn=squared.lib.css,mn=squared.lib.util,fn=squared.base.lib.enumeration;class gn extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:!1}}condition(t){return this.included(t.element)&&t.length>0}processNode(t,n){return t.exclude(0,fn.NODE_PROCEDURE.CONSTRAINT),{output:this.application.renderNode(new hn(n,t,e.CONSTRAINT,32,t.children))}}afterConstraints(){const t=this.application.controllerHandler;for(const e of this.subscribers){let n;e.each(t=>{mn.withinRange(t.linear.left,e.box.left)&&(t.anchor(un.CSS.LEFT,l.PARENT),t.anchorStyle(l.HORIZONTAL)),mn.withinRange(t.linear.top,e.box.top)&&(t.anchor(un.CSS.TOP,l.PARENT),t.anchorStyle(l.VERTICAL)),this.options.circlePosition&&(t.anchored?n=t:n?!n.constraint.vertical&&t.constraint.vertical&&(n=t):t.constraint.vertical?n=t:t.constraint.horizontal&&(n=t))}),this.options.circlePosition?(void 0===n&&(n=e.item(0)),n.anchored||t.addGuideline(n,e),e.each(t=>{if(t!==n){const e=t.center,i=n.center,a=Math.abs(e.x-i.x),o=Math.abs(e.y-i.y),r=Math.round(Math.sqrt(Math.pow(a,2)+Math.pow(o,2)));let s=Math.round(Math.atan(Math.min(a,o)/Math.max(a,o))*(180/Math.PI));e.y>i.y?e.x>i.x?a>o?s+=90:s=180-s:a>o?s=270-s:s+=180:e.y<i.y?i.x>e.x?a>o?s+=270:s=360-s:a>o&&(s=90-s):s=e.x>i.x?90:270,t.app("layout_constraintCircle",n.documentId),t.app("layout_constraintCircleRadius",pn.formatPX(r)),t.app("layout_constraintCircleAngle",""+s)}})):e.each(n=>{n.anchored||t.addGuideline(n,e)})}}}var Tn=squared.base.LayoutUI;const Sn=squared.lib.constant,En=squared.lib.util,An=squared.base.lib.constant;squared;class bn extends squared.base.ExtensionUI{condition(t){if(t.naturalElement&&(t.documentBody||t.contentBoxWidth>0||t.contentBoxHeight>0)){const e=t.filter(t=>!t.pageFlow&&t.leftTopAxis&&t.left>=0&&t.right>=0);if(e.length){const n=t.paddingTop+(t.documentBody?t.marginTop:0),a=t.paddingRight+(t.documentBody?t.marginRight:0),o=t.paddingBottom+(t.documentBody?t.marginBottom:0),r=t.paddingLeft+(t.documentBody?t.marginLeft:0),s=new Set;let l=!1,c=!1;for(const i of e){const e="fixed"===i.css("position");i.hasPX(Sn.CSS.LEFT)?i.left>=0&&i.left<r&&s.add(i):i.hasPX(Sn.CSS.RIGHT)&&i.right>=0&&(e||i.right<a||t.documentBody&&t.hasPX(Sn.CSS.WIDTH))?(s.add(i),l=!0):i.rightAligned?i.marginRight<0&&(t.documentRoot||En.aboveRange(i.linear.right,t.bounds.right))&&s.add(i):i.marginLeft<0&&(t.documentRoot||En.belowRange(i.linear.left,t.bounds.left))&&s.add(i),i.hasPX(Sn.CSS.TOP)?i.top>=0&&i.top<n&&s.add(i):i.hasPX(Sn.CSS.BOTTOM)&&i.bottom>=0&&(e||i.bottom<o||t.documentBody&&t.hasPX(Sn.CSS.HEIGHT))&&(s.add(i),c=!0)}if(s.size)return t.data(i.DELEGATE_FIXED,An.STRING_BASE.EXT_DATA,{children:Array.from(s),right:l,bottom:c}),!0}}return!1}processNode(t,n){const a=t.data(i.DELEGATE_FIXED,An.STRING_BASE.EXT_DATA);if(a){const o=this.application.controllerHandler.createNodeWrapper(t,n,a.children);t.documentBody&&(a.right||a.bottom)?(o.cssApply({width:Sn.CSS.AUTO,height:Sn.CSS.AUTO,display:"block",float:Sn.CSS.NONE}),a.right&&o.setLayoutWidth(l.MATCH_PARENT),a.bottom&&o.setLayoutHeight(l.MATCH_PARENT)):t.pageFlow||t.resetBox(30,o);for(const e of a.children)e.hasPX(Sn.CSS.TOP)?e.modifyBox(2,t.borderTopWidth):e.hasPX(Sn.CSS.BOTTOM)&&e.modifyBox(8,t.borderBottomWidth),e.hasPX(Sn.CSS.LEFT)?e.modifyBox(16,t.borderLeftWidth):e.hasPX(Sn.CSS.RIGHT)&&e.modifyBox(4,t.borderRightWidth);const r=t.data(i.DELEGATE_MAXWIDTHHEIGHT,An.STRING_BASE.EXT_DATA);if(r){r.container&&(r.width&&(o.css("maxWidth",t.css("maxWidth")),o.setLayoutWidth(Sn.CSS.PX_0),o.contentBoxWidth=t.contentBoxWidth,t.setLayoutWidth(l.WRAP_CONTENT)),r.height&&(o.css("maxHeight",t.css("maxHeight")),o.setLayoutHeight(Sn.CSS.PX_0),o.contentBoxHeight=t.contentBoxHeight,t.setLayoutHeight(l.WRAP_CONTENT)))}return this.subscribers.add(o),{parent:o,renderAs:o,outputAs:this.application.renderNode(new Tn(n,o,e.CONSTRAINT,32,o.children))}}}postConstraints(t){t.each(t=>{t.constraint.horizontal||t.anchor(Sn.CSS.LEFT,l.PARENT),t.constraint.vertical||t.anchor(Sn.CSS.TOP,l.PARENT)})}}var Cn=squared.base.LayoutUI;const yn=squared.lib.constant,Rn=squared.base.lib.constant;squared;class In extends squared.base.ExtensionUI{condition(t,e){if(!t.inputElement){let n=!1,a=!1;if(t.support.maxWidth||isNaN(t.width)||!t.hasPX("maxWidth")||e.hasAlign(256)||(n=!0),!t.support.maxHeight&&!isNaN(t.height)&&t.hasPX("maxHeight")&&e.hasHeight&&(a=!0),n||a)return t.data(i.DELEGATE_MAXWIDTHHEIGHT,Rn.STRING_BASE.EXT_DATA,{width:n,height:a}),!0}return!1}processNode(t,n){const o=t.data(i.DELEGATE_MAXWIDTHHEIGHT,Rn.STRING_BASE.EXT_DATA);if(o){const i=n.layoutConstraint?n:this.application.controllerHandler.createNodeWrapper(t,n,void 0,a.CONSTRAINT,e.CONSTRAINT);if(o.width&&(t.setLayoutWidth(yn.CSS.PX_0),i.setLayoutWidth(l.MATCH_PARENT),n.layoutElement&&(t.autoMargin.horizontal=!1,t.autoMargin.left=!1,t.autoMargin.right=!1,t.autoMargin.leftRight=!1)),o.height&&(t.setLayoutHeight(yn.CSS.PX_0),i.setLayoutHeight(l.MATCH_PARENT),n.layoutElement&&(t.autoMargin.vertical=!1,t.autoMargin.top=!1,t.autoMargin.bottom=!1,t.autoMargin.topBottom=!1)),o.container=i,n!==i)return{parent:i,renderAs:i,outputAs:this.application.renderNode(new Cn(n,i,i.containerType,4096,i.children))}}}}var Nn=squared.base.LayoutUI;const Pn=squared.lib.constant;squared;class _n extends squared.base.ExtensionUI{condition(t,e){return!t.pageFlow&&e.naturalElement&&e.documentRoot&&(Math.ceil(t.linear.left)<Math.floor(e.box.left)&&(t.left<0||t.marginLeft<0||!t.hasPX(Pn.CSS.LEFT)&&t.right>0)||Math.floor(t.linear.right)>Math.ceil(e.box.right)&&(t.left>0||t.marginLeft>0||!t.hasPX(Pn.CSS.LEFT)&&t.right<0)||Math.ceil(t.linear.top)<Math.floor(e.box.top)&&(t.top<0||t.marginTop<0||!t.hasPX(Pn.CSS.TOP)&&t.bottom>0)||Math.floor(t.linear.bottom)>Math.ceil(e.box.bottom)&&(t.top>0||t.marginTop>0||!t.hasPX(Pn.CSS.TOP)&&t.bottom<0)&&e.hasPX(Pn.CSS.HEIGHT))}processNode(t,n){const i=this.application.controllerHandler.createNodeWrapper(t,n);return{parent:i,renderAs:i,outputAs:this.application.renderNode(new Nn(n,i,e.FRAME,4096,i.children)),include:!0}}}var On=squared.base.LayoutUI;const xn=squared.lib.constant,Ln=squared.lib.css,wn=squared.base.lib.constant;squared;function vn(t,e){return t.pageFlow?t===e.firstChild&&t.inlineFlow&&!t.centerAligned&&!t.rightAligned&&t.marginLeft<0&&Math.abs(t.marginLeft)<=e.marginLeft+e.paddingLeft&&!e.some(t=>t.multiline):t.absoluteParent===e&&(t.left<0||!t.hasPX(xn.CSS.LEFT)&&t.right<0)}class Hn extends squared.base.ExtensionUI{condition(t){return this.application.userSettings.supportNegativeLeftTop&&!t.documentRoot&&"hidden"!==t.css("overflowX")&&t.some(e=>vn(e,t))}processNode(t,n){const o=t.filter(e=>vn(e,t)),r=this.application.controllerHandler.createNodeWrapper(t,n,o,a.CONSTRAINT,e.CONSTRAINT);t.marginTop>0&&(r.modifyBox(2,t.marginTop),t.modifyBox(2)),t.marginBottom>0&&(r.modifyBox(8,t.marginBottom),t.modifyBox(8));let s,l=NaN,c=NaN;for(const t of o)t.pageFlow?((isNaN(l)||t.linear.left<l)&&(l=t.linear.left),s=t):t.hasPX(xn.CSS.LEFT)?t.left<0&&(isNaN(l)||t.linear.left<l)&&(l=t.linear.left):t.right<0&&(isNaN(c)||t.linear.right>c)&&(c=t.linear.right);if(r.inherit(t,"styleMap"),!isNaN(l)){let e=t.linear.left-l;if(e>0){t.modifyBox(16,e);for(const t of o)!t.pageFlow&&t.left<0&&t.css(xn.CSS.LEFT,Ln.formatPX(t.left+e),!0)}else{for(const e of o)!e.pageFlow&&e.left<0&&e.css(xn.CSS.LEFT,Ln.formatPX(t.marginLeft+e.left),!0);e=Math.abs(e)}t.hasPX(xn.CSS.WIDTH,!1)?r.cssPX(xn.CSS.WIDTH,(t.marginLeft>0?t.marginLeft:0)+e,!1,!0):t.hasPX(xn.CSS.WIDTH)&&r.css(xn.CSS.WIDTH,xn.CSS.AUTO,!0)}if(!isNaN(c)){let e=c-t.linear.right;e>t.marginRight?t.modifyBox(4,e-=t.marginRight):e=0;const n=t.linear.right+e;t.marginRight>0&&(e+=t.marginRight),e>0&&(t.hasPX(xn.CSS.WIDTH,!1)||!t.blockStatic&&!t.hasPX(xn.CSS.WIDTH))&&r.css(r.hasPX(xn.CSS.WIDTH)?xn.CSS.WIDTH:"minWidth",Ln.formatPX(t.actualWidth+e),!0);for(const t of o)t.right<0&&t.css(xn.CSS.RIGHT,Ln.formatPX(n-t.linear.right),!0)}return this.subscribers.add(r),r.data(i.DELEGATE_NEGATIVEX,wn.STRING_BASE.EXT_DATA,{offsetLeft:t.marginLeft+t.paddingLeft,firstChild:s,nextSibling:t}),{parent:r,renderAs:r,outputAs:this.application.renderNode(new On(n,r,r.containerType,4104,r.children))}}postBaseLayout(t){const e=t.data(i.DELEGATE_NEGATIVEX,wn.STRING_BASE.EXT_DATA);if(e){let n=e.firstChild;n&&((n=n.ascend(e=>e!==t,t,"outerWrapper").pop()||n).anchorParent(l.HORIZONTAL,"packed"),n.anchorParent(l.VERTICAL,"packed"),n.modifyBox(16,e.offsetLeft),Wt.setConstraintDimension(n),n.positioned=!0);const i=e.nextSibling.ascend(e=>e!==t,t,"outerWrapper").pop()||e.nextSibling;i.anchorParent(l.HORIZONTAL,"packed"),i.anchorParent(l.VERTICAL,"packed"),Wt.setConstraintDimension(i),i.positioned=!0}}}var Mn=squared.base.LayoutUI;const Gn=squared.lib.constant,Dn=(squared,t=>!t.documentParent.layoutElement&&!t.display.startsWith("table"));class Bn extends squared.base.ExtensionUI{condition(t,e){if(t.pageFlow){if(t.has(Gn.CSS.WIDTH,4,{not:Gn.CSS.PERCENT_100})&&!e.layoutConstraint&&(t.documentRoot||t.hasPX(Gn.CSS.HEIGHT)||(e.layoutVertical||t.onlyChild)&&(e.blockStatic||e.hasPX(Gn.CSS.WIDTH))))return Dn(t);if(t.has(Gn.CSS.HEIGHT,4,{not:Gn.CSS.PERCENT_100})&&(t.documentRoot||e.hasHeight&&t.onlyChild))return Dn(t)}return!1}processNode(t,n){const i=this.application.controllerHandler.createNodeWrapper(t,n);return t.percentWidth?(i.css("display","block"),i.setLayoutWidth(l.MATCH_PARENT),t.setLayoutWidth(Gn.CSS.PX_0)):i.setLayoutWidth(l.WRAP_CONTENT),t.percentHeight?(i.setLayoutHeight(l.MATCH_PARENT),t.setLayoutHeight(Gn.CSS.PX_0)):i.setLayoutHeight(l.WRAP_CONTENT),{parent:i,renderAs:i,outputAs:this.application.renderNode(new Mn(n,i,e.CONSTRAINT,4096,i.children)),include:!0}}postConstraints(t){const e=t.renderParent;e&&t.resetBox(30,e,!0)}}var Xn=squared.base.NodeUI;const Wn=squared.base.lib.enumeration,kn=t=>t.name?t.name.trim():"";class Vn extends squared.base.ExtensionUI{condition(t){return t.is(e.RADIO)&&""!==kn(t.element)&&!t.positioned}processNode(t,n){const i=kn(t.element),o=[],r=[],s=[];n.each(n=>{let a;if(n.renderAs&&(n.renderAs!==t&&(a=n),n=n.renderAs),n.is(e.RADIO)&&!n.rendered&&kn(n.element)===i)o.push(n),s.push(n);else{if(!o.length||n.visible||n.is(e.RADIO))return;o.push(n)}a&&r.push(a)});for(let t=o.length-1;t>=0;t--)if(s.includes(o[t])){o.splice(t+1);break}if(o.length>1){const i=this.application.controllerHandler.createNodeGroup(t,o,n,!0);Xn.linearData(o).linearX?(i.addAlign(136),i.android("orientation",l.HORIZONTAL)):(i.addAlign(16),i.android("orientation",l.VERTICAL)),n.layoutConstraint&&(i.companion=t),i.setControlType(a.RADIOGROUP,e.LINEAR),i.inherit(t,"alignment"),i.baseline&&(i.css("verticalAlign","middle"),i.baseline=!1),i.exclude(Wn.NODE_RESOURCE.ASSET),i.render(!t.dataset.use&&t.dataset.target?this.application.resolveTarget(t.dataset.target):n);for(const t of r)t.hide();return this.subscribers.add(i),{renderAs:i,outputAs:{type:1,node:i,controlName:a.RADIOGROUP},parent:i,complete:!0}}}postBaseLayout(t){t.renderEach(e=>{e.naturalElement&&e.element.checked&&t.android("checkedButton",e.documentId)})}}const Fn=squared.lib.constant,Un=squared.lib.css,zn=squared.base.lib.enumeration;class qn extends squared.base.ExtensionUI{condition(t){return t.length>0&&(t.overflowX&&t.hasPX(Fn.CSS.WIDTH)||t.overflowY&&t.hasHeight&&t.hasPX(Fn.CSS.HEIGHT)||this.included(t.element))}processNode(t,n){const i=[],o=[],r=a.HORIZONTAL_SCROLL,s=a.VERTICAL_SCROLL;if(t.overflowX&&t.overflowY)i.push(a.HORIZONTAL_SCROLL,s);else if(t.overflowX)i.push(r);else if(t.overflowY)i.push(s);else{let e=0;t.hasPX(Fn.CSS.WIDTH)&&(e|=8,i.push(r)),t.hasHeight&&t.hasPX(Fn.CSS.HEIGHT)&&(e|=16,i.push(s)),t.overflow=e}const c=i.length;for(let a=0;a<c;a++){let r;0===a?((r=this.application.createNode(t.element)).inherit(t,"base","initial","styleMap"),n.appendTry(t,r),r.innerWrapped=t,t.outerWrapper=r):((r=this.application.createNode()).inherit(t,"base"),r.exclude(zn.NODE_RESOURCE.BOX_STYLE),o[0].outerWrapper=r,r.innerWrapped=o[0]),r.setControlType(i[a],e.BLOCK),r.exclude(zn.NODE_RESOURCE.ASSET),r.resetBox(480),o.push(r)}const d=o.length;for(let e=0;e<d;e++){const i=o[e],a=o[e-1];switch(i.controlName){case s:t.setLayoutWidth(l.WRAP_CONTENT),i.setLayoutHeight(Un.formatPX(t.actualHeight)),i.android("scrollbars",l.VERTICAL),i.cssApply({width:Fn.CSS.AUTO,overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case r:t.setLayoutHeight(l.WRAP_CONTENT),i.setLayoutWidth(Un.formatPX(t.actualWidth)),i.android("scrollbars",l.HORIZONTAL),i.cssApply({height:Fn.CSS.AUTO,overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"})}i.render(0===e?!t.dataset.use&&t.dataset.target?this.application.resolveTarget(t.dataset.target):n:a),i.unsetCache(),this.application.addLayoutTemplate(i.renderParent||n,i,{type:1,node:i,controlName:i.controlName})}2===d?(t.setLayoutWidth(l.WRAP_CONTENT),t.setLayoutHeight(l.WRAP_CONTENT)):t.overflowX?(t.setLayoutWidth(l.WRAP_CONTENT),t.setLayoutHeight(l.MATCH_PARENT)):(t.setLayoutWidth(l.MATCH_PARENT),t.setLayoutHeight(l.WRAP_CONTENT));const h=o.pop();return t.parent=h,n.layoutConstraint&&(h.companion=t),t.overflow=0,t.resetBox(30),t.exclude(zn.NODE_RESOURCE.BOX_STYLE),{parent:t.parent}}}var Yn={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},jn={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","top","right","bottom","drawable","width","height","gravity"],">":{shape:Yn.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const $n={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},Zn={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":!0,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:$n.path},"#":"include"}};var Kn={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:$n.path},"#":"include"}};const Jn=squared.lib.color,Qn=squared.lib.constant,ti=squared.lib.css,ei=squared.lib.math,ni=squared.lib.regex,ii=squared.lib.util,ai=squared.lib.xml,oi=squared.base.lib.enumeration;function ri(t,e=-1,n=!1){const i=t.style,a=Ti(t.width);switch(i){case"inset":case"outset":case"groove":case"ridge":const o=t.color.rgba;let r=1;if(1===a)"inset"!==i&&"outset"!==i||(r=.5);else{const t=0!==o.r&&o.r===o.g&&o.g===o.b;if(("inset"===i||t&&"groove"===i||!t&&"ridge"===i)&&(n=!n),n)switch(e){case 0:case 3:e=1;break;case 1:case 2:e=0}switch(e){case 0:case 3:t&&(r=.5);break;case 1:case 2:r=t?.8:-.75}}if(1!==r){const e=Jn.reduceRGBA(o,r,t.color.valueAsARGB);if(e){const t=b.addColor(e,!0);if(""!==t)return Si(t)}}}const o=Si(b.addColor(t.color,!0));switch(i){case"dotted":case"dashed":o.dashWidth=ti.formatPX(a*("dashed"===i?2:1)),o.dashGap=ti.formatPX(a)}return o}function si(t,e=-1,n=!1,i=!1){if(t){if(ci(t.style)){const a=parseFloat(t.width);return i?Object.assign({width:ti.formatPX(2*Math.ceil(a/2))},ri(t,e)):Object.assign({width:ti.formatPX(n?Math.ceil(a/2):Ti(t.width))},ri(t,e,!0))}return Object.assign({width:ti.formatPX(Ti(t.width))},ri(t))}}function li(t){const e=b.addColor(t);return""!==e?{color:`@color/${e}`}:void 0}function ci(t){switch(t){case"groove":case"ridge":case"inset":case"outset":return!0;default:return!1}}function di(t,e,n,i,a,o,r=0,s){const l=Ti(e.width),c=Math.max(1,Math.floor(l/3)),d=r>0?ti.formatPX(r):"";let h="-"+ti.formatPX(c+r+1);t.push({top:n?d:h,right:i?d:h,bottom:a?d:h,left:o?d:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:ti.formatPX(c)},ri(e)),corners:s}});const u=l-c+r,p=ti.formatPX(u);h="-"+ti.formatPX(u+1),t.push({top:n?p:h,right:i?p:h,bottom:a?p:h,left:o?p:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:ti.formatPX(c)},ri(e)),corners:s}})}function hi(t,e,n){const i="initial"===t||"unset"===t;return-1===t.indexOf(" ")&&-1!==e.indexOf(" ")?ni.CHAR.LOWERCASE.test(t)?`${i?n:t} 0px`:`${n} ${t}`:i?Qn.CSS.PX_0:t}function ui(t,e=21,n){const i={type:t.type,item:!1},a=e>=21;switch(t.type){case"conic":{const e=t.center;i.type="sweep",a?(i.centerX=""+2*e.left,i.centerY=""+2*e.top):(i.centerX=ti.formatPercent(e.leftAsPercent),i.centerY=ti.formatPercent(e.topAsPercent));break}case"radial":{const e=t,n=e.center;a?(i.gradientRadius=""+e.radius,i.centerX=""+n.left,i.centerY=""+n.top):(i.gradientRadius=ti.formatPX(e.radius),i.centerX=ti.formatPercent(n.leftAsPercent),i.centerY=ti.formatPercent(n.topAsPercent));break}case"linear":{const e=t,{width:a,height:o}=e.dimension,r=e.angle;let s=e.angleExtent.x,l=e.angleExtent.y;r<=90?(l+=o,i.startX="0",i.startY=""+o):r<=180?(i.startX="0",i.startY="0"):r<=270?(s+=a,i.startX=""+a,i.startY="0"):(s+=a,l+=o,i.startX=""+a,i.startY=""+o),i.endX=ei.truncate(s,n),i.endY=ei.truncate(l,n);break}}const o=t.colorStops;return a?i.item=Ai(o):(i.startColor=`@color/${b.addColor(o[0].color,!0)}`,i.endColor=`@color/${b.addColor(o[o.length-1].color,!0)}`,o.length>2&&(i.centerColor=`@color/${b.addColor(o[Math.floor(o.length/2)].color,!0)}`)),i}function pi(t,e,n,i,a){if(a){const o=e.orientation,r="cover"===n||"contain"===n?-1:1;if(t===Qn.CSS.LEFT||t===Qn.CSS.RIGHT){if("cover"===n)return 0;if(ti.isPercent(4===o.length?o[1]:o[0])){const n=t===Qn.CSS.LEFT?e.leftAsPercent:e.rightAsPercent;let o=n*(i.width-a.width);return-1===r&&(o=Math.abs(o),n>0&&(o*=-1)),o}}else{if("contain"===n)return 0;if(ti.isPercent(4===o.length?o[3]:o[1])){const n=t===Qn.CSS.TOP?e.topAsPercent:e.bottomAsPercent;let o=n*(i.height-a.height);return-1===r&&(o=Math.abs(o),n>0&&(o*=-1)),o}}}return e[t]}function mi(t,e,n=!0){const i=[{"xmlns:android":s.android,item:[]}],a=n?void 0:li(t.backgroundColor);if(a&&i[0].item.push({shape:{"android:shape":"rectangle",solid:a}}),e)for(const t of e)i[0].item.push(t.gradient?{shape:{"android:shape":"rectangle",gradient:t.gradient}}:t);return i}function fi(t,e,n){b.addTheme({name:t,parent:e,items:{"android:windowBackground":n,"android:windowFullscreen":"true"}})}function gi(t){const e=Ti(t.width);return"double"===t.style&&2===e?3:e}const Ti=t=>Math.round(parseFloat(t)),Si=t=>({color:`@color/${t}`,dashWidth:"",dashGap:""}),Ei=t=>"groove"===t.style||"ridge"===t.style||"double"===t.style&&Ti(t.width)>1;function Ai(t,e){const n=[];for(const i of t)n.push({color:`@color/${b.addColor(i.color,!0)}`,offset:ei.truncate(i.offset,e)});return n}function bi(t,e,n=0,i=0,a){return a?(n=ei.truncate(n,a),i=ei.truncate(i,a),t=ei.truncate(n+t,a),e=ei.truncate(i+e,a)):(t+=n,e+=i),`M${n},${i} ${t},${i} ${t},${e} ${n},${e} Z`}class Ci extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={autoSizeBackgroundImage:!0,drawOutlineAsInsetBorder:!0},this.eventOnly=!0}afterInit(){this._resourceSvgInstance=this.application.controllerHandler.localSettings.svg.enabled?this.application.builtInExtensions[i.RESOURCE_SVG]:void 0}afterResources(){const t=this.application.userSettings;function e(e,n){let i=b.insertStoredAsset("drawables",`${e.containerName.toLowerCase()}_${e.controlId}`,n);""!==i&&(i=`@drawable/${i}`,e.documentBody?fi(t.manifestThemeName,t.manifestParentThemeName,i):e.android("background",i,!1))}for(const n of this.application.processing.cache){const i=n.data(b.KEY_NAME,"boxStyle");if(i&&n.hasResource(oi.NODE_RESOURCE.BOX_STYLE)){if(n.inputElement){const t=n.companion;if(t&&!t.visible&&"LABEL"===t.tagName&&!b.isInheritedStyle(t,"backgroundColor")){const e=t.data(b.KEY_NAME,"boxStyle");e&&e.backgroundColor&&(i.backgroundColor=e.backgroundColor)}}const a=this.getDrawableImages(n,i);let[o,r]=this.getDrawableBorder(i,[i.borderTop,i.borderRight,i.borderBottom,i.borderLeft],i.border,a,this.options.drawOutlineAsInsetBorder&&i.outline?gi(i.outline):0,!1);const s=void 0===o&&void 0===r;if(i.outline&&(this.options.drawOutlineAsInsetBorder||s)){const[t,e]=this.getDrawableBorder(i,[i.outline,i.outline,i.outline,i.outline],s?i.outline:void 0);s?(o=t,r=e):r&&e&&(r[0].item=r[0].item.concat(e[0].item))}if(o)e(n,ai.applyTemplate("shape",Yn,o));else if(r)e(n,ai.applyTemplate("layer-list",jn,r));else if(i.backgroundColor){let e=b.addColor(i.backgroundColor);if(""!==e)if(e=`@color/${e}`,n.documentBody)fi(t.manifestThemeName,t.manifestParentThemeName,e);else{const t=n.data(b.KEY_NAME,"fontStyle");t?t.backgroundColor=i.backgroundColor:n.android("background",e,!1)}}}}}getDrawableBorder(t,e,n,i,a=0,o=!0){const r=[],l=o?void 0:function(t){if(t){const e=t.length;if(1===e)return{radius:t[0]};{let n;if(8===e){n=[];for(let i=0;i<e;i+=2)n.push(ti.formatPX((parseFloat(t[i])+parseFloat(t[i+1]))/2))}else n=t;const i=["topLeft","topRight","bottomRight","bottomLeft"],a={};let o=!1;const r=n.length;for(let t=0;t<r;t++)n[t]!==Qn.CSS.PX_0&&(a[`${i[t]}Radius`]=n[t],o=!0);if(o)return a}}}(t.borderRadius),c=a>0?ti.formatPX(a):"";let d,h,u,p=!0;for(let t=0;t<4;t++){const n=e[t];n?(p&&d&&(p=ii.isEqual(d,n)),d=n,r[t]=!0):r[t]=!1}if(n&&!ci(n.style)&&!("double"===n.style&&parseInt(n.width)>1)||void 0===d&&(l||i&&i.length)){const e=!!n&&si(n);i&&i.length||a>0?(u=mi(t,i,o),(l||e)&&u[0].item.push({top:c,right:c,left:c,bottom:c,shape:{"android:shape":"rectangle",corners:l,stroke:e}})):h=function(t,e,n){return[{"xmlns:android":s.android,"android:shape":"rectangle",stroke:t,solid:e,corners:n}]}(e,o?void 0:li(t.backgroundColor),l)}else if(d)if(u=mi(t,i,o),p&&!ci(d.style)){const t=Ti(d.width);if("double"===d.style&&t>1)di(u[0].item,d,r[0],r[1],r[2],r[3],a,l);else{const e="-"+ti.formatPX(t+a+1);u[0].item.push({top:r[0]?c:e,right:r[1]?c:e,bottom:r[2]?c:e,left:r[3]?c:e,shape:{"android:shape":"rectangle",corners:l,stroke:si(d)}})}}else{function m(t,n){const i=e[n];if(i){const e=Ti(i.width);if("double"===i.style&&e>1)di(t.item,i,0===n,1===n,2===n,3===n,a,l);else{const o=e>1&&Ei(i);if(o){const r="-"+ti.formatPX(e+a+1);t.item.push({top:0===n?"":r,right:1===n?"":r,bottom:2===n?"":r,left:3===n?"":r,shape:{"android:shape":"rectangle",stroke:si(i,n,o,!0)}})}const r="-"+ti.formatPX((o?Math.ceil(e/2):e)+a+1);t.item.push({top:0===n?c:r,right:1===n?c:r,bottom:2===n?c:r,left:3===n?c:r,shape:{"android:shape":"rectangle",corners:l,stroke:si(i,n,o)}})}}}m(u[0],0),m(u[0],3),m(u[0],2),m(u[0],1)}return[h,u]}getDrawableImages(t,n){const i=n.backgroundRepeat.split(ni.XML.SEPARATOR),a=n.backgroundPositionX.split(ni.XML.SEPARATOR),o=n.backgroundPositionY.split(ni.XML.SEPARATOR),r=[],c=[],d=[],h=[];let u=n.backgroundSize.split(ni.XML.SEPARATOR),p=0,m=!0;if(t.hasResource(oi.NODE_RESOURCE.IMAGE_SOURCE)){const e=n.backgroundImage;if(e){for(p=e.length;u.length<p;)u=u.concat(u.slice(0));u.length=p;const n=this.application.resourceHandler,s=this._resourceSvgInstance;for(let l=0,h=0;l<p;l++){let m=e[l],f=!1;if("string"==typeof m){if("initial"!==m){if(s){const[e,n]=s.createSvgElement(t,m);if(e&&n){const i=s.createSvgDrawable(t,n);""!==i&&(r[h]=i,d[h]={width:n.width.baseVal.value,height:n.height.baseVal.value},f=!0),e.removeChild(n)}}if(!f){const t=ni.CSS.URL.exec(m);if(t)if(t[1].startsWith("data:image")){const e=n.getRawData(t[1]);e&&e.base64&&(r[h]=e.filename.substring(0,e.filename.lastIndexOf(".")),d[h]={width:e.width,height:e.height},n.writeRawImage(e.filename,e.base64),f=!0)}else m=ii.resolvePath(t[1]),r[h]=b.addImage({mdpi:m}),""!==r[h]&&(d[h]=n.getImage(m),f=!0)}}}else if(m.colorStops.length>1){const e=ui(m,t.localSettings.targetAPI);e&&(r[h]=e,d[h]=m.dimension,f=!0)}if(f){const e=a[l]||a[l-1],n=o[l]||o[l-1];c[h]=ti.getBackgroundPosition(`${hi(e,n,Qn.CSS.LEFT)} ${hi(n,e,Qn.CSS.TOP)}`,t.actualDimension,t.fontSize),h++}else i.splice(l,1),u.splice(l,1),p--}}if(t.extracted){0===p&&(i.length=0,u.length=0);const e=t.extracted.filter(t=>t.visible&&(t.imageElement||"INPUT_IMAGE"===t.containerName));for(let n=0,a=p;n<e.length;n++){const o=e[n],s=o.element,l=this.application.resourceHandler.addImageSrc(s);""!==l&&(r[a]=l,i[a]="no-repeat",u[a]=`${o.actualWidth}px ${o.actualHeight}px`,c[a]=ti.getBackgroundPosition("INPUT_IMAGE"===o.containerName?"0px 0px":`${o.bounds.left-t.bounds.left+t.borderLeftWidth}px ${o.bounds.top-t.bounds.top+t.borderTopWidth}px`,t.actualDimension,t.fontSize),d[a]=this.application.resourceHandler.getImage(s.src),a++)}}p=r.length}let f=!1,g=!1;for(let e=p-1;e>=0;e--){const a=r[e];if(!ii.hasValue(a))continue;const o=t.bounds,p=c[e],S={bitmap:!1,rotate:!1,gradient:!1};let E=d[e];!E||0!==E.width&&0!==E.height||(E=void 0);let A=0,C=0,y=0,R=0;if("string"==typeof a){function T(t,e,n=!1){(2===p.orientation.length||n)&&(p[t]=0),p[e]=0}const r=`@drawable/${a}`;let s="",c="";if("repeat-x"!==i[e])switch(p.horizontal){case Qn.CSS.PERCENT_0:case Qn.CSS.LEFT:T(Qn.CSS.LEFT,Qn.CSS.RIGHT),s=t.localizeString(Qn.CSS.LEFT);break;case Qn.CSS.PERCENT_50:case Qn.CSS.CENTER:T(Qn.CSS.LEFT,Qn.CSS.RIGHT,!0),s=l.CENTER_HORIZONTAL;break;case Qn.CSS.PERCENT_100:case Qn.CSS.RIGHT:T(Qn.CSS.RIGHT,Qn.CSS.LEFT),s=t.localizeString(Qn.CSS.RIGHT);break;default:s+=t.localizeString(0!==p.right?Qn.CSS.RIGHT:Qn.CSS.LEFT)}else{if(E)for(;p.left>0;)p.left-=E.width;else p.left=0;p.right=0,s=t.localizeString(Qn.CSS.LEFT)}if("repeat-y"!==i[e])switch(p.vertical){case Qn.CSS.PERCENT_0:case Qn.CSS.TOP:T(Qn.CSS.TOP,Qn.CSS.BOTTOM),c+=Qn.CSS.TOP;break;case Qn.CSS.PERCENT_50:case Qn.CSS.CENTER:T(Qn.CSS.TOP,Qn.CSS.BOTTOM,!0),c+=l.CENTER_VERTICAL;break;case Qn.CSS.PERCENT_100:case Qn.CSS.BOTTOM:T(Qn.CSS.BOTTOM,Qn.CSS.TOP),c+=Qn.CSS.BOTTOM;break;default:c+=0!==p.bottom?Qn.CSS.BOTTOM:Qn.CSS.TOP}else{if(E)for(;p.top>0;)p.top-=E.height;else p.top=0;p.bottom=0,c=Qn.CSS.TOP}let d,h=0,b=0,I="",N="",P="";switch(i[e]){case"repeat":I="repeat";break;case"repeat-x":N="repeat";break;case"repeat-y":P="repeat";break;default:I="disabled"}if(E){if(""!==s&&"repeat"===P&&E.width<o.width){switch(s){case Qn.CSS.START:case Qn.CSS.LEFT:p.left=t.borderLeftWidth,p.right=0;break;case Qn.CSS.END:case Qn.CSS.RIGHT:p.left=0,p.right=t.borderRightWidth;break;case l.CENTER_HORIZONTAL:p.left=0,p.right=0}h=E.width}if(""!==c&&"repeat"===N&&E.height<o.height){switch(c){case Qn.CSS.TOP:p.top=t.borderTopWidth,p.bottom=0,S.gravity=c,c="";break;case Qn.CSS.BOTTOM:p.top=0,p.bottom=t.borderBottomWidth,S.gravity=c,c="";break;case l.CENTER_VERTICAL:p.top=0,p.bottom=0,S.gravity=c,c=""}b=E.height}t.blockStatic&&!t.hasWidth||(E.width>=o.width&&(N="","repeat"===I&&(P="repeat",I="")),E.height>=o.height&&(P="","repeat"===I&&(N="repeat",I="")))}switch(u[e]){case"auto":case"auto auto":case"initial":case"contain":break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":s="fill_horizontal",c="fill_vertical",N="","repeat"===I&&(I="",P="repeat");case"cover":d="",I="",N="",P="";break;default:u[e].split(" ").forEach((e,n)=>{e!==Qn.CSS.AUTO?0===n?e===Qn.CSS.PERCENT_100?s="fill_horizontal":h=t.parseUnit(e,Qn.CSS.WIDTH,!1):e===Qn.CSS.PERCENT_100?c="fill_vertical":b=t.parseUnit(e,Qn.CSS.HEIGHT,!1):0===n?s="fill_horizontal":c="fill_vertical"})}if(E){const i=n.backgroundClip,a=()=>"fill_horizontal"!==s&&"repeat"!==I&&"repeat"!==N,r=()=>"fill_vertical"!==c&&"repeat"!==I&&"repeat"!==P;switch(u[e]){case"cover":if(E.width<o.width||E.height<o.height){if(h=0,E.height<o.height){b=E.height*Math.max(o.width/E.width,o.height/E.height)}else b=0;d="top|center_horizontal|fill_horizontal"}else h=0,b=0,d="fill";m=!1;break;case"contain":if(E.width!==o.width&&E.height!==o.height){const t=Math.min(o.width/E.width,o.height/E.height);h=E.width*t,b=E.height*t}else h=0,b=0;m=!1;break;default:0===h&&b>0&&a()&&(h=E.width*(0===b?o.height:b)/E.height),0===b&&h>0&&r()&&(b=E.height*(0===h?o.width:h)/E.width)}i?(0===h?h=o.width:h+=t.contentBoxWidth,0===b?b=o.height:b+=t.contentBoxHeight,h-=i.left+i.right,b-=i.top+i.bottom,i.left>i.right?R=i.left-i.right:i.left<i.right&&(C=i.right-i.left),i.top>i.bottom?A=i.top-i.bottom:i.top<i.bottom&&(y=i.bottom-i.top)):0===h&&0===b&&E.width<t.bounds.width&&E.height<t.bounds.height&&a()&&r()&&(h=E.width,b=E.height),h>0&&(S.width=ti.formatPX(h)),b>0&&(S.height=ti.formatPX(b))}void 0===d&&(s===l.CENTER_HORIZONTAL&&c===l.CENTER_VERTICAL?d=Qn.CSS.CENTER:"fill_horizontal"===s&&"fill_vertical"===c?d="fill":(d="",""!==s&&(d+=s),""!==c&&(d+=(""!==d?"|":"")+c))),t.documentBody||"repeat"===I||"repeat"===N||"repeat"===P?(t.documentBody&&(""!==d?(/fill(?!_)/.test(d)||(d+="|fill"),S.gravity=d,d=""):S.gravity="fill"),S.bitmap=[{src:r,gravity:d,tileMode:I,tileModeX:N,tileModeY:P}]):(S.drawable=r,S.gravity=d,(d===Qn.CSS.CENTER||d.startsWith(l.CENTER_HORIZONTAL))&&(f=!0)),g=!0}else if(a.item){let n,i;E?(n=Math.round(E.width),i=Math.round(E.height)):(n=Math.round(t.actualWidth),i=Math.round(t.actualHeight)),u[e].split(" ").some(t=>t!==Qn.CSS.PERCENT_100&&ti.isLength(t,!0))&&(S.width=ti.formatPX(n),S.height=ti.formatPX(i));const o=b.insertStoredAsset("drawables",`${t.containerName.toLowerCase()}_${t.controlId}_gradient_${e+1}`,ai.applyTemplate("vector",Kn,[{"xmlns:android":s.android,"xmlns:aapt":s.aapt,"android:width":S.width||ti.formatPX(n),"android:height":S.height||ti.formatPX(i),"android:viewportWidth":""+n,"android:viewportHeight":""+i,path:{pathData:bi(n,i),"aapt:attr":{name:"android:fillColor",gradient:a}}}]));""!==o&&(S.drawable=`@drawable/${o}`,p.static&&(S.gravity="fill"))}else S.gradient=a,p.static&&(S.gravity="fill");(S.drawable||S.bitmap||S.gradient)&&(0!==p.bottom?(S.bottom=ti.formatPX(pi(Qn.CSS.BOTTOM,p,u[e],t.bounds,E)+y),y=0):0!==p.top&&(S.top=ti.formatPX(pi(Qn.CSS.TOP,p,u[e],t.bounds,E)+A),A=0),0!==p.right?(S.right=ti.formatPX(pi(Qn.CSS.RIGHT,p,u[e],t.bounds,E)+C),C=0):0!==p.left&&(S.left=ti.formatPX(pi(Qn.CSS.LEFT,p,u[e],t.bounds,E)+R),R=0),0!==A&&(S.top=ti.formatPX(A)),0!==C&&(S.right=ti.formatPX(C)),0!==y&&(S.bottom=ti.formatPX(y)),0!==R&&(S.left=ti.formatPX(R)),h.push(S))}if(this.options.autoSizeBackgroundImage&&g&&m&&!t.is(e.IMAGE)&&!t.documentRoot&&t.renderParent&&!t.renderParent.tableElement){let e=0,n=0;for(const t of d)t&&(e=Math.max(e,t.width),n=Math.max(n,t.height));if(0===e){let i=t;for(;i&&(i.hasWidth&&(e=i.bounds.width),i.hasHeight&&(n=i.bounds.height),!(e>0&&n>0||i.documentBody)&&i.pageFlow);)i=i.actualParent}if(!((t.has(Qn.CSS.WIDTH,2,{map:"initial",not:Qn.CSS.PERCENT_100})||t.blockStatic&&f)&&t.pageFlow||!(0===e||t.bounds.width<e))){const e=t.bounds.width-(t.contentBox?t.contentBoxWidth:0);e>0&&t.css(Qn.CSS.WIDTH,ti.formatPX(Math.ceil(e)),!0)}if((!t.has(Qn.CSS.HEIGHT,2,{map:"initial",not:Qn.CSS.PERCENT_100})||!t.pageFlow)&&(0===n||t.bounds.height<n)){const e=t.bounds.height-(t.contentBox?t.contentBoxHeight:0);e>0&&(t.css(Qn.CSS.HEIGHT,ti.formatPX(Math.ceil(e)),!0),t.marginBottom<0&&t.modifyBox(8))}}return h}}const yi=squared.lib.regex,Ri=squared.lib.util,Ii=b.STORED,Ni=[l.ANDROID,l.APP],Pi=/\dpx$/,_i=/:(\w+)="(-?[\d.]+px)"/;function Oi(t,e,n){for(const[i,a]of t.entries())if(i.startsWith(e)&&n===a)return i;return t.has(e)&&t.get(e)!==n?b.generateId("dimen",e):e}const xi=t=>Ri.fromLastIndexOf(t,".");class Li extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={};for(const e of this.application.session.cache)if(e.visible){const n=e.containerName.toLowerCase();void 0===t[n]&&(t[n]={});for(const i of Ni){const a=e.namespace(i);for(const o in a){const r=a[o];if(Pi.test(r)&&"text"!==o){const a=`${i},${o},${r}`;void 0===t[n][a]&&(t[n][a]=[]),t[n][a].push(e)}}}}for(const e in t){const n=t[e];for(const t in n){const[i,a,o]=t.split(yi.XML.SEPARATOR),r=Oi(Ii.dimens,`${xi(e)}_${Ri.convertUnderscore(a)}`,o),s=n[t];for(const t of s)t[i](a,`@dimen/${r}`);Ii.dimens.set(r,o)}}}afterFinalize(){if(this.application.controllerHandler.hasAppendProcessing())for(const t of this.application.layouts){let e,n=t.content;for(;null!==(e=_i.exec(n));)if("text"!==e[1]){const t=e[2],i=Oi(Ii.dimens,`custom_${Ri.convertUnderscore(e[1])}`,t);Ii.dimens.set(i,t),n=n.replace(e[0],e[0].replace(e[2],`@dimen/${i}`))}t.content=n}}}const wi=squared.lib.regex,vi=squared.lib.util,Hi=squared.base.lib.enumeration,Mi=b.STORED,Gi=/^(\w*?)(?:_(\d+))?$/,Di=/"/g,Bi={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},Xi={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},Wi={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},ki={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},Vi={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'};function Fi(t,e,n){const i=t.length;for(const a of e.split(";"))for(let e=0;e<i;e++){let o=-1,r="";const s=t[e];for(const t in s)if(t===a){o=e,r=t,e=i;break}if(-1!==o){t[o][r]=vi.filterArray(t[o][r],t=>!n.includes(t)),0===t[o][r].length&&delete t[o][r];break}}}class Ui extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:!1},this.eventOnly=!0}afterParseDocument(){const t=this.application.resourceHandler,e=t.userSettings,n=e.resolutionDPI,i="dp"===e.convertPixels,a={},o={};for(const t of this.application.session.cache)t.visible&&t.data(b.KEY_NAME,"fontStyle")&&t.hasResource(Hi.NODE_RESOURCE.FONT_STYLE)&&(void 0===a[t.containerName]&&(a[t.containerName]=[]),a[t.containerName].push(t));const r=Object.keys(Vi),s=r.length;for(const e in a){const l=[],c=a[e];for(let e of c){const a=Object.assign({},e.data(b.KEY_NAME,"fontStyle")),o=e.id;e.companion&&!e.companion.visible&&"LABEL"===e.companion.tagName&&(e=e.companion),a.backgroundColor&&(a.backgroundColor=b.addColor(a.backgroundColor)),a.fontFamily&&a.fontFamily.replace(Di,"").split(wi.XML.SEPARATOR).some((n,i,o)=>{let r=(n=vi.trimString(n,"'")).toLowerCase();if(!this.options.disableFontAlias&&Wi[r]&&(r=this.options.systemDefaultFont||Wi[r]),Bi[r]&&e.localSettings.targetAPI>=Bi[r]||!this.options.disableFontAlias&&Xi[r]&&e.localSettings.targetAPI>=Bi[Xi[r]])return a.fontFamily=r,"normal"===a.fontStyle&&(a.fontStyle=""),("400"===a.fontWeight||e.localSettings.targetAPI<26)&&(a.fontWeight=""),!0;if(a.fontStyle&&a.fontWeight){let e=!0;if(void 0===t.getFont(n,a.fontStyle,a.fontWeight))if(t.getFont(n,a.fontStyle))e=!1;else{if(i<o.length-1)return!1;i>0&&(r=(n=vi.trimString(o[0],"'")).toLowerCase())}if(r=vi.convertWord(r),e){const t=b.STORED.fonts.get(r)||{};t[n+"|"+a.fontStyle+"|"+a.fontWeight]=ki[a.fontWeight]||a.fontWeight,b.STORED.fonts.set(r,t)}return a.fontFamily=`@font/${r}`,a.fontStyle="",a.fontWeight="",!0}return!1}),a.color=b.addColor(a.color);for(let t=0;t<s;t++){const e=r[t];let s=a[e];if(s){i&&"fontSize"===e&&(s=v(s,n,!0));const a=Vi[e]+s+'"';void 0===l[t]&&(l[t]={}),void 0===l[t][a]&&(l[t][a]=[]),l[t][a].push(o)}}}o[e]=l}const l={};for(const t in o){l[t]={};const e=vi.filterArray(o[t],t=>void 0!==t).sort((t,e)=>{let n=0,i=0,a=0,o=0;for(const e in t)n=Math.max(t[e].length,n),a+=t[e].length;for(const t in e)e[t]&&(i=Math.max(e[t].length,i),o+=e[t].length);return n!==i?n>i?-1:1:a!==o?a>o?-1:1:0});do{if(1===e.length){const n=e[0];for(const e in n)n[e].length&&(l[t][e]=n[e]);e.length=0}else{const n={};for(let i=0;i<e.length;i++){const o={},r=e[i];for(const s in r){const l=r[s];if(0===l.length)continue;if(l.length===a[t].length){n[s]=l,e[i]={};break}const c={};let d=!1;for(let t=0;t<e.length;t++)if(i!==t){const n=e[t];for(const t in n){const e=n[t];if(e.length)for(const n of l)e.includes(n)&&(void 0===c[t]&&(c[t]=[]),c[t].push(n))}}for(const t in c)c[t].length>1&&(o[[s,t].sort().join(";")]=c[t],d=!0);d||(o[s]=l)}if(Object.keys(o).length){const n={},i=new Set,a={};for(const t in o)a[t]=o[t].join(",");for(const t in o)for(const e in o){const o=a[t];if(t!==e&&o===a[e]){void 0===n[o]&&(n[o]=new Set(t.split(";")));for(const t of e.split(";"))n[o].add(t);i.add(t).add(e)}}for(const t of i)delete o[t];for(const n in o)Fi(e,n,o[n]),l[t][n]=o[n];for(const i in n){const a=Array.from(n[i]).sort().join(";"),o=vi.objectMap(i.split(wi.XML.SEPARATOR),t=>parseInt(t));Fi(e,a,o),l[t][a]=o}}}const i=Object.keys(n);i.length&&(l[t][i.join(";")]=n[i[0]]),vi.spliceArray(e,t=>{for(const e in t)if(t[e].length)return!1;return!0})}}while(e.length)}const c={},d={},h=new Set;for(const t in l){const e=l[t],n=[];for(const t in e){const i=[];for(const e of t.split(";")){const t=wi.XML.ATTRIBUTE.exec(e);t&&i.push({key:t[1],value:t[2]})}n.push({name:"",parent:"",items:i,ids:e[t]})}n.sort((t,e)=>{let n=0,i=0;return t.ids&&e.ids&&(n=t.ids.length,i=e.ids.length),n===i&&(n=t.items.length)===(i=e.items.length)&&(n=t.items[0].name)===(i=e.items[0].name)&&(n=t.items[0].value,i=e.items[0].value),n<=i?1:-1});const i=n.length;for(let e=0;e<i;e++)n[e].name=vi.capitalize(t)+(e>0?`_${e}`:"");c[t]=n}for(const t in c)for(const e of c[t])if(e.ids)for(const t of e.ids)void 0===d[t]&&(d[t]=[]),d[t].push(e.name);for(const t of this.application.session.cache){const e=d[t.id];e&&e.length&&(e.length>1?(h.add(e.join(".")),e.shift()):h.add(e[0]),t.attr("_","style",`@style/${e.join(".")}`))}for(const t of h){const e=[];let n,i="";if(t.split(".").forEach((t,a,o)=>{const r=Gi.exec(t);if(r){const s=c[r[1].toUpperCase()][vi.convertInt(r[2])];if(s)if(0===a)i=t,1===o.length?n=s.items:Mi.styles.has(t)||Mi.styles.set(t,{name:t,parent:"",items:s.items});else{if(n)for(const t of s.items){const e=n.findIndex(e=>e.key===t.key);-1!==e?n[e]=t:n.push(t)}else n=s.items.slice(0);e.push(t)}}}),n)if(0===e.length)Mi.styles.set(i,{name:i,parent:"",items:n});else{const t=e.join(".");Mi.styles.set(t,{name:t,parent:i,items:n})}}}}squared;class zi extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){for(const t of this.application.session.cache)if(t.renderTemplates){let e,n;if(t.renderEach((t,i)=>{const a=t.dataset.androidInclude,o="true"===t.dataset.androidIncludeEnd;if(a||o){const r={item:t,name:a,index:i,merge:"true"===t.dataset.androidIncludeMerge};a&&(void 0===e&&(e=[]),e.push(r)),o&&(void 0===n&&(n=[]),n.push(r))}}),e&&n){const i=this.application,a=i.controllerHandler;e.length=Math.min(e.length,n.length);for(let t=e.length;t<n.length;t++)n.shift();for(let o=e.length-1;o>=0;o--){const r=e[o];for(let e=0;e<n.length;e++){const o=n[e].index;if(o>=r.index){const s=[];for(let e=r.index;e<=o;e++)s.push(t.renderTemplates[e]),t.renderTemplates[e]=null;const l=r.merge||s.length>1,c=l?1:0;t.renderTemplates[r.index]={type:2,node:s[0].node,content:a.renderNodeStatic("include",{layout:`@layout/${r.name}`},"",""),indent:!0},l||r.item.documentRoot||(r.item.documentRoot=!0);let d=a.cascadeDocument(s,c);l&&(d=a.getEnclosingXmlTag("merge",X(d),d)),i.saveDocument(r.name,d,"",1/0),n.splice(e,1);break}}}}}}}const qi=squared.lib.constant,Yi=squared.lib.css,ji=squared.lib.dom,$i=squared.lib.util,Zi=squared.lib.xml,Ki=squared.base.lib.enumeration;class Ji extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:!1,fontVariantSmallCapsReduction:.7},this.eventOnly=!0}afterResources(){for(const t of this.application.processing.cache)if(t.hasResource(Ki.NODE_RESOURCE.VALUE_STRING))switch(t.tagName){case"SELECT":{const e=this.createOptionArray(t.element,t.controlId);""!==e&&t.android("entries",`@array/${e}`);break}case"IFRAME":{const e=t.data(b.KEY_NAME,"valueString");e&&b.addString(Zi.replaceCharacterData(e.value),e.key);break}default:{const e=t.data(b.KEY_NAME,"valueString"),n=(e,n,i)=>{""!==(n=b.addString(i,n,this.options.numberResourceValue))&&t.android(e,this.options.numberResourceValue||!$i.isNumber(n)?`@string/${n}`:n,!1)};if(e){const i=e.key||e.value;let a=e.value;if(t.naturalChild&&t.alignParent(qi.CSS.LEFT)&&!(!t.plainText&&t.preserveWhiteSpace||t.plainText&&t.actualParent.preserveWhiteSpace)){const e=t.textContent;let n=0;const i=e.length;for(let t=0;t<i;t++)switch(e.charCodeAt(t)){case 160:n++;case 32:continue}0===n&&(a=a.replace(/^(\s|&#160;)+/,""))}if("small-caps"===t.css("fontVariant")){t.android("textAllCaps","true");const e=t.data(b.KEY_NAME,"fontStyle");e&&(e.fontSize=`${parseFloat(e.fontSize)*this.options.fontVariantSmallCapsReduction}px`)}switch(t.css("textTransform")){case"uppercase":t.android("textAllCaps","true");break;case"lowercase":a=$i.lowerCaseString(a);break;case"capitalize":a=$i.capitalizeString(a)}a=Zi.replaceCharacterData(a);for(const e of t.css("textDecorationLine").split(" "))switch(e){case"underline":a=`<u>${a}</u>`;break;case"line-through":a=`<strike>${a}</strike>`}let o=0;if((t.blockDimension||"table-cell"===t.display)&&(o=t.parseUnit(t.css("textIndent")))+t.bounds.width<0&&(a=""),0===o){const e=t.actualParent;e&&(e.blockDimension||"table-cell"===e.display)&&t===e.firstChild&&(o=e.parseUnit(e.css("textIndent")))}if(o>0){const e=ji.measureTextWidth(" ",t.css("fontFamily"),t.fontSize)||t.fontSize/2;a="&#160;".repeat(Math.max(Math.floor(o/e),1))+a}n("text",i,a)}if(t.inputElement){if(t.controlName===a.EDIT_LIST){const e=t.element;e.list&&(this.createOptionArray(e.list,t.controlId),t.hasPX(qi.CSS.WIDTH)||t.css("width",Yi.formatPX(Math.max(t.bounds.width,t.width)),!0))}const e=t.data(b.KEY_NAME,"hintString");e&&n("hint",`${t.containerName.toLowerCase()}_hint`,e)}}}}createOptionArray(t,e){const n=b.getOptionArray(t);let i;if(!this.options.numberResourceValue&&n[1])i=n[1];else{const t=n[0]||n[1];if(t){i=[];for(let e of t)""!==(e=b.addString(Zi.replaceCharacterData(e),"",this.options.numberResourceValue))&&i.push(`@string/${e}`)}}return i&&i.length?b.insertStoredAsset("arrays",`${e}_array`,i):""}}const Qi=squared.lib.regex,ta=squared.lib.util,ea=b.STORED,na=/(\w+):(\w+)="([^"]+)"/;class ia extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={},e={};for(const n of this.application.session.cache)if(n.visible&&n.controlId){const i=n.renderChildren,a=i.length;if(a>1){const o=new Map;let r=!0,s="";for(let t=0;t<a;t++){const e=i[t];let n=!1;for(const i of e.combine("_",l.ANDROID))if(!n&&i.startsWith("style=")){if(0===t)s=i;else if(""===s||i!==s){r=!1;break}n=!0}else o.set(i,(o.get(i)||0)+1);if(!r||!n&&""!==s){r=!1;break}}if(r){for(const[t,e]of o.entries())e!==a&&o.delete(t);if(o.size>1){""!==s&&(s=ta.trimString(s.substring(s.indexOf("/")+1),'"'));const a=[];for(const t of o.keys()){const e=na.exec(t);if(e){for(const t of i)t.delete(e[1],e[2]);a.push(e[0])}}a.sort();const r=a.join(";");let l="";for(const t in e)if(e[t]===r){l=t;break}""!==s&&l.startsWith(`${s}.`)||(t[l=(""!==s?s+".":"")+ta.capitalize(n.controlId)]=a,e[l]=r);for(const t of i)t.attr("_","style",`@style/${l}`)}}}}for(const e in t){const n=[],i=t[e];for(const t in i){const e=Qi.XML.ATTRIBUTE.exec(i[t]);e&&n.push({key:e[1],value:e[2]})}ea.styles.set(e,Object.assign({},G(),{name:e,items:n}))}}}var aa={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const oa=["ordering"],ra={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var sa={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":oa,">":{set:{"^":"android","@":oa,">":{objectAnimator:ra.objectAnimator}},objectAnimator:ra.objectAnimator}},objectAnimator:ra.objectAnimator}}};squared.svg||(squared.svg={lib:{}});var la=squared.svg.Svg,ca=squared.svg.SvgAnimate,da=squared.svg.SvgAnimateTransform,ha=squared.svg.SvgBuild,ua=squared.svg.SvgG,pa=squared.svg.SvgPath,ma=squared.svg.SvgShape;const fa=squared.lib.constant,ga=squared.lib.css,Ta=squared.lib.math,Sa=squared.lib.regex,Ea=squared.lib.util,Aa=squared.lib.xml,ba=squared.svg.lib.constant,Ca=squared.svg.lib.util,ya=b.STORED,Ra={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"};ba&&Object.assign(Ra,{[ba.KEYSPLINE_NAME["ease-in"]]:Ra.accelerate,[ba.KEYSPLINE_NAME["ease-out"]]:Ra.decelerate,[ba.KEYSPLINE_NAME["ease-in-out"]]:Ra.accelerate_decelerate,[ba.KEYSPLINE_NAME.linear]:Ra.linear});const Ia='<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',Na={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function Pa(t,e){return t&&t[e]?Ra[t[e]]||Oa(t[e]):""}function _a(t){for(const e in Na)if(Na[e].includes(t))return Ea.convertCamelCase(e);return""}function Oa(t){if(Ra[t])return Ra[t];{const e=`path_interpolator_${Ea.convertWord(t)}`;if(!ya.animators.has(e)){const n=Ea.formatString(Ia,...t.split(" "));ya.animators.set(e,n)}return`@anim/${e}`}}function xa(t){const e={};for(const n of t){const t=n.matrix;switch(n.type){case SVGTransform.SVG_TRANSFORM_SCALE:e.scaleX=""+t.a,e.scaleY=""+t.d,n.origin&&(e.pivotX=""+n.origin.x,e.pivotY=""+n.origin.y);break;case SVGTransform.SVG_TRANSFORM_ROTATE:e.rotation=""+n.angle,n.origin?(e.pivotX=""+n.origin.x,e.pivotY=""+n.origin.y):(e.pivotX="0",e.pivotY="0");break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:e.translateX=""+t.e,e.translateY=""+t.f}}return e}function La(t,e){let n=0,i=0;for(const a of function(t){const e=[];let n=t.parentElement;for(;n&&(e.push(n),!((n=n.parentElement)instanceof HTMLElement)););return e}(t))(Ca.SVG.svg(a)||Ca.SVG.use(a))&&a!==e&&(n+=a.x.baseVal.value,i+=a.y.baseVal.value);return{x:n,y:i}}function wa(t,e,n=1,i=1){return e.length&&(Ca.SVG.circle(t)||Ca.SVG.ellipse(t))&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(n!==i||e.length>1&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_SCALE&&t.matrix.a!==t.matrix.d))?va(t,e):[[],e]}function va(t,e,n=!1){if(e.length){const a=[],o=[],r=e[0].fromCSS?[]:Ca.TRANSFORM.rotateOrigin(t).reverse(),s=e.slice(0).reverse();for(let t=1;t<s.length;t++){const e=s[t],n=s[t-1];if(e.type===n.type){let i;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:(i=Ca.MATRIX.clone(e.matrix)).e+=n.matrix.e,i.f+=n.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:(i=Ca.MATRIX.clone(e.matrix)).a*=n.matrix.a,i.d*=n.matrix.d}i&&(e.matrix=i,s.splice(--t,1))}}const l=[];function i(){a.push(l.slice(0)),l.length=0}for(const t of s)switch(t.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:o.push(t);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:n||0!==a.length||0!==l.length?(l.push(t),i()):o.push(t);break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;r.length;){const e=r.shift();if(e.angle===t.angle){0===e.x&&0===e.y||(t.origin=e);break}}if(void 0===t.origin&&1===l.length&&l[0].type===SVGTransform.SVG_TRANSFORM_SCALE){l.push(t);continue}case SVGTransform.SVG_TRANSFORM_SCALE:l.length&&i(),l.push(t)}return l.length&&a.push(l),[a.reverse(),o]}return[[],e]}function Ha(t,e,n,i=!1,a){let o;const r=t[e];return r?o=Array.isArray(r)?""+r[n]:r:i||0!==e||(o=a),o||""}function Ma(t){switch(t){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:return Wa(t)?"floatType":void 0}}function Ga(t,e,n,i){const a=new ca;return a.attributeName=t,a.delay=e,a.duration=1,a.from=i||n,a.to=n,a.fillForwards=!0,a.convertToValues(),a}function Da(t,e=!0){let n=Na[t];return void 0===n&&e&&Wa(t)&&(n=[t]),n}function Ba(t){switch(t){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Xa(t){switch(t.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return da.toRotateList(t.values);case SVGTransform.SVG_TRANSFORM_SCALE:return da.toScaleList(t.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return da.toTranslateList(t.values)}}function Wa(t){switch(t){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function ka(t,e=!1){const n=`@color/${b.addColor(t)}`;return e?[n]:n}function Va(t,e){return za(t.attributeName)?ka(e):e.trim()||void 0}function Fa(t){switch(t){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function Ua(t,e,n){const i={type:t.type,item:Ai(t.colorStops,n)};switch(t.type){case"radial":{const n=t;let a,o,r,s,l=[];switch(e.element.tagName){case"path":for(const t of ha.getPathCommands(e.value))l=l.concat(t.value);case"polygon":if(Ca.SVG.polygon(e.element)&&(l=l.concat(ha.clonePoints(e.element.points))),!l.length)return;[a,o,r,s]=ha.minMaxPoints(l),r-=a,s-=o;break;default:if(Ca.SVG.rect(e.element)){const t=e.element;a=t.x.baseVal.value,o=t.y.baseVal.value,r=t.width.baseVal.value,s=t.height.baseVal.value}else if(Ca.SVG.circle(e.element)){const t=e.element;a=t.cx.baseVal.value-t.r.baseVal.value,o=t.cy.baseVal.value-t.r.baseVal.value,s=r=2*t.r.baseVal.value}else{if(!Ca.SVG.ellipse(e.element))return;{const t=e.element;a=t.cx.baseVal.value-t.rx.baseVal.value,o=t.cy.baseVal.value-t.ry.baseVal.value,r=2*t.rx.baseVal.value,s=2*t.ry.baseVal.value}}}i.centerX=""+(a+r*Ya(n.cxAsString)),i.centerY=""+(o+s*Ya(n.cyAsString)),i.gradientRadius=""+(r+s)/2*(ga.isPercent(n.rAsString)?parseFloat(n.rAsString)/100:1),n.spreadMethod&&(i.tileMode=Fa(n.spreadMethod));break}case"linear":{const e=t;i.startX=""+e.x1,i.startY=""+e.y1,i.endX=""+e.x2,i.endY=""+e.y2,e.spreadMethod&&(i.tileMode=Fa(e.spreadMethod))}}return i}const za=t=>"fill"===t||"stroke"===t,qa=(t,e,n=-1)=>`${t.name}_${e+(-1!==n?`_${n+1}`:"")}`,Ya=t=>ga.isPercent(t)?parseFloat(t)/100:.5,ja=t=>`@drawable/${t}`,$a=(t="")=>({ordering:t,objectAnimator:[]});class Za extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=!0,this.VECTOR_DATA=new Map,this.ANIMATE_DATA=new Map,this.ANIMATE_TARGET=new Map,this.IMAGE_DATA=[],this.SYNCHRONIZE_MODE=0,this.NAMESPACE_AAPT=!1}beforeInit(){ha&&(ha.setName(),this.application.controllerHandler.localSettings.svg.enabled=!0)}afterResources(){for(const t of this.application.processing.cache){let e,n;if(t.imageElement?[e,n]=this.createSvgElement(t,t.src):t.svgElement&&(n=t.element),n){const i=this.createSvgDrawable(t,n);""!==i&&(t.localSettings.targetAPI>=21?t.android("src",ja(i)):t.app("srcCompat",ja(i))),t.hasWidth||t.setLayoutWidth(l.WRAP_CONTENT),t.hasHeight||t.setLayoutHeight(l.WRAP_CONTENT),t.baseline&&t.android("baselineAlignBottom","true"),e&&e.removeChild(n)}}}createSvgElement(t,e){let n,i;const a=Sa.CSS.URL.exec(e);if(a&&(e=a[1]),e.toLowerCase().endsWith(".svg")||e.startsWith("data:image/svg+xml")){const a=this.application.resourceHandler.getRawData(e);a&&((n=(t.actualParent||t.documentParent).element).insertAdjacentHTML("beforeend",a.content),n.lastElementChild instanceof SVGSVGElement&&(0===(i=n.lastElementChild).width.baseVal.value&&i.setAttribute(fa.CSS.WIDTH,""+t.actualWidth),0===i.height.baseVal.value&&i.setAttribute(fa.CSS.HEIGHT,""+t.actualHeight)))}return[n,i]}createSvgDrawable(t,e){const n=new la(e),i=t.localSettings.targetAPI>=23;this.SVG_INSTANCE=n,this.VECTOR_DATA.clear(),this.ANIMATE_DATA.clear(),this.ANIMATE_TARGET.clear(),this.IMAGE_DATA.length=0,this.NAMESPACE_AAPT=!1,this.SYNCHRONIZE_MODE=2|(i?32:64);const a=`${t.tagName}_${Ea.convertWord(t.controlId,!0)}_viewbox`.toLowerCase(),o=(t,e)=>a+(t?`_${t}`:"")+(this.IMAGE_DATA.length?"_vector":"")+(e?`_${e.toLowerCase()}`:"");n.build({exclude:this.options.transformExclude,residual:wa,precision:this.options.floatPrecisionValue}),n.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,framesPerSecond:this.application.controllerHandler.userSettings.framesPerSecond,precision:this.options.floatPrecisionValue}),this.queueAnimations(n,n.name,t=>"opacity"===t.attributeName);const r=this.parseVectorData(n);let l=b.insertStoredAsset("drawables",o(),Aa.applyTemplate("vector",Kn,[{"xmlns:android":s.android,"xmlns:aapt":this.NAMESPACE_AAPT?s.aapt:"","android:name":n.name,"android:width":ga.formatPX(n.width),"android:height":ga.formatPX(n.height),"android:viewportWidth":""+(n.viewBox.width||n.width),"android:viewportHeight":""+(n.viewBox.height||n.height),"android:alpha":parseFloat(n.opacity)<1?""+n.opacity:"",include:r}])),c="";if(this.ANIMATE_DATA.size){const t=[{"xmlns:android":s.android,"android:drawable":ja(l),target:[]}];function d(e,n){if(n.set.length){let i=!1;if(n.set.length>1&&n.set.every(t=>""===t.ordering)){const t={set:[],objectAnimator:[]};for(const e of n.set)t.set=t.set.concat(e.set),t.objectAnimator=t.objectAnimator.concat(e.objectAnimator);n=t}for(;1===n.set.length;){const t=n.set[0];if(i&&""!==t.ordering||0!==t.objectAnimator.length)break;n=t,i=!0}n["xmlns:android"]=s.android,i&&(n["android:ordering"]=n.ordering,n.ordering=void 0);const a={name:e,animation:b.insertStoredAsset("animators",o("anim",e),Aa.applyTemplate("set",sa,[n]))};""!==a.animation&&(a.animation=`@anim/${a.animation}`,t[0].target.push(a))}}for(const[t,e]of this.ANIMATE_DATA.entries()){const n=new Map,a=new Map,o=[],r=[],s=[],l=[],c=[],[h,u]=Ea.partitionArray(e.animate,t=>void 0!==t.companion),p={set:[],objectAnimator:[]},m=u.length;for(let t=0;t<m;t++){const e=u[t];if(e.setterType)Na[e.attributeName]&&Ea.isString(e.to)&&(e.duration>0&&e.fillReplace?r.push(e):o.push(e));else if(ha.isAnimate(e)){const l=Ea.filterArray(h,t=>t.companion.value===e);if(l.length){l.sort((t,e)=>t.companion.key>=e.companion.key?1:0);const i=[],a=[],o=l.length;for(let t=0;t<o;t++){const n=l[t];n.companion.key<=0?(i.push(n),0===t&&e.delay>0&&(n.delay+=e.delay,e.delay=0)):a.push(n)}i.push(e),n.set(`sequentially_companion_${t}`,i.concat(a))}else{const t=e.synchronized;if(t)if(ha.isAnimateTransform(e)){const n=a.get(t.value)||[];n.push(e),a.set(t.value,n)}else{const i=n.get(t.value)||[];i.push(e),n.set(t.value,i)}else ha.isAnimateTransform(e)&&e.expandToValues(),-1===e.iterationCount?r.push(e):!(!e.fromToType||ha.isAnimateTransform(e)&&e.transformOrigin)||i&&"pathType"!==Ma(e.attributeName)?e.fillReplace?r.push(e):o.push(e):s.push([e])}}}o.length&&s.push(o);for(const[t,e]of n.entries())t.startsWith("sequentially_companion")?s.push(e):s.push(e.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of a.values())c.push(t.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of r)l.push([[t]]);[s,c,...l].forEach((t,n)=>{if(0===t.length)return;const a={ordering:0===n||1===t.length?"":"sequentially",set:[],objectAnimator:[]};for(const o of t){let t="",r=!1,s=!1,l=!0;n<=1&&o.some(t=>!!t.synchronized&&""!==t.synchronized.value)?(ha.isAnimateTransform(o[0])||(t="sequentially"),r=!0,l=!1):n<=1&&o.some(t=>!!t.synchronized&&""===t.synchronized.value)?(t="sequentially",r=!0,s=!0):n<=1&&o.some(t=>void 0!==t.companion)?t="sequentially":(n>0&&(t="sequentially"),n>1&&ha.isAnimateTransform(o[0])&&(s=!0));const c=$a(),d=$a(),h=$a(),u=$a();let p=[];(r?Ea.partitionArray(o,t=>-1!==t.iterationCount):[o]).forEach((o,m)=>{1===m&&o.length>1&&(h.ordering="sequentially");const f=new Map;for(const g of o){const T=Ma(g.attributeName);if(void 0===T)continue;const S=g.delay>0;let E,A=!1;const b=(t,e)=>{Ea.isString(e)&&-1===c.objectAnimator.findIndex(e=>e.propertyName===t)&&c.objectAnimator.push(this.createPropertyValue(t,e,"0",T))},C=(t,e,n)=>{if(!r&&g.fillReplace&&void 0!==T){let i,a=g.replaceValue;if(a||(A?a=Wa(t):g.parent&&ha.isShape(g.parent)&&g.parent.path&&(a="pathData"===t?g.parent.path.value:g.parent.path[_a(t)]),a||(a=g.baseValue)),e&&e.length){const t=e[e.length-1];if(Ea.isArray(t.propertyValuesHolder)){const e=t.propertyValuesHolder[t.propertyValuesHolder.length-1];i=e.keyframe[e.keyframe.length-1].value}else i=t.valueTo}if(Ea.isString(a)&&a!==i&&(a=Va(g,a))){switch(t){case"trimPathStart":case"trimPathEnd":a=a.split(" ")["trimPathStart"===t?0:1]}u.objectAnimator.push(this.createPropertyValue(t,a,"1",T,"pathType"===T?i:"",n?""+n:""))}E&&(t.endsWith("X")?u.objectAnimator.push(this.createPropertyValue("translateX","0","1",T)):t.endsWith("Y")&&u.objectAnimator.push(this.createPropertyValue("translateY","0","1",T)))}};if(g.setterType){const t=Da(g.attributeName);if(t){const e=za(g.attributeName)?ka(g.to,!0):g.to.trim().split(" "),i=t.length;if(e.length===i&&!e.some(t=>""===t)){let a,o;for(let r=0;r<i;r++){let i;"pathType"===T?i=e[r]:S&&g.baseValue&&(i=Va(g,g.baseValue.trim().split(" ")[r]));const s=this.createPropertyValue(t[r],e[r],"1",T,i,g.delay>0?""+g.delay:"");n>1?(h.objectAnimator.push(s),C(t[r],void 0,n>1?g.duration:0)):g.companion&&g.companion.key<=0?(void 0===a&&(a=[]),a.push(s)):g.companion&&g.companion.key>0?(void 0===o&&(o=[]),o.push(s)):p.push(s)}a&&(c.objectAnimator=c.objectAnimator.concat(a)),o&&(u.objectAnimator=u.objectAnimator.concat(o))}}}else if(ha.isAnimate(g)){let c,u=s;const p=this.createPropertyValue("","",""+g.duration,T,"",g.delay>0?""+g.delay:"",c=1===m?o.length>1?"0":"-1":-1!==g.iterationCount?""+Math.ceil(g.iterationCount-1):"-1");let y,R,I;if(r||"pathType"!==p.valueType)if(ha.asAnimateTransform(g))R=Ba(g.type),I=Xa(g),R&&I&&(s&&0===g.keyTimes[0]&&(u=!1),(u||S)&&(y=Ea.objectMap(R,t=>Wa(t)||"0")),E=g.transformOrigin),A=!0;else if(ha.asAnimateMotion(g)){if(R=Ba(g.type),I=Xa(g),R&&I){const t=g.rotateValues,e=I.length;if(t&&t.length===e){R.push("rotation");for(let n=0;n<e;n++)I[n].push(t[n])}}A=!0}else switch(R=Da(g.attributeName),p.valueType){case"intType":I=Ea.objectMap(g.values,t=>""+Ea.convertInt(t)),S&&g.baseValue&&(y=Ea.replaceMap(ha.parseCoordinates(g.baseValue),t=>""+Math.trunc(t)));break;case"floatType":I="stroke-dasharray"===g.attributeName?Ea.objectMap(g.values,t=>Ea.replaceMap(t.split(" "),t=>parseFloat(t))):g.values,S&&g.baseValue&&(y=Ea.replaceMap(ha.parseCoordinates(g.baseValue),t=>""+t));break;default:if(I=g.values.slice(0),za(g.attributeName)){S&&g.baseValue&&(y=ka(g.baseValue,!0));const t=I.length;for(let e=0;e<t;e++)""!==I[e]&&(I[e]=ka(I[e]))}}else if(e.pathData){let t,n;g.parent&&ha.isShape(g.parent)&&(n=g.parent,g.parent.path&&(t=g.parent.path.transformed)),R=["pathData"],I=pa.extrapolate(g.attributeName,e.pathData,g.values,t,n,this.options.floatPrecisionValue)}if(void 0===g.keySplines&&(g.timingFunction?p.interpolator=Oa(g.timingFunction):""!==this.options.animateInterpolator&&(p.interpolator=this.options.animateInterpolator)),I&&R){const o=R.length,c=g.synchronized?g.synchronized.key+g.synchronized.value:0!==n||o>1?JSON.stringify(p):"",T=g.keyTimes;for(let n=0;n<o;n++){const o=R[n];u&&y&&b(o,y[n]);const A=T.length;if(l&&A>1)if(i&&"pathType"!==p.valueType){!u&&S&&y&&b(o,y[n]);const t=f.get(c)||[],e=[];for(let t=0;t<A;t++){let i=Ha(I,t,n,!0);i&&"floatType"===p.valueType&&(i=Ta.truncate(i,this.options.floatPrecisionValue)),e.push({interpolator:t>0&&""!==i&&"pivotX"!==o&&"pivotY"!==o?Pa(g.keySplines,t-1):"",fraction:0===T[t]&&""===i?"":Ta.truncate(T[t],this.options.floatPrecisionKeyTime),value:i})}t.push({propertyName:o,keyframe:e}),f.has(c)||(""!==c&&f.set(c,t),(0===m?d:h).objectAnimator.push(Object.assign({},p,{propertyValuesHolder:t}))),E=void 0}else{t="sequentially";const i=$a("sequentially"),r=d.objectAnimator;for(let t=0;t<A;t++){const a=Object.assign({},p,{propertyName:o,startOffset:0===t?""+(g.delay+(T[t]>0?Math.floor(T[t]*g.duration):0)):"",propertyValuesHolder:!1});let l=Ha(I,t,n,!1,"pathType"===p.valueType?e.pathData:g.baseValue);if(l){let c;if(0===t?(a.valueFrom=!s&&S&&y?y[n]:"pathType"===p.valueType?e.pathData||""+I[0]:g.baseValue||g.replaceValue||"",c=0):(a.valueFrom=""+Ha(I,t-1,n),c=Math.floor((T[t]-T[t-1])*g.duration)),"floatType"===p.valueType&&(l=Ta.truncate(l,this.options.floatPrecisionValue)),E&&E[t]){let e,n=0;if(o.endsWith("X")?(e="translateX",n=E[t].x):o.endsWith("Y")&&(e="translateY",n=E[t].y),e){const t=this.createPropertyValue(e,Ta.truncate(n,this.options.floatPrecisionValue),""+c,"floatType");t.interpolator=Oa(ba.KEYSPLINE_NAME["step-start"]),i.objectAnimator.push(t)}}t>0&&(a.interpolator=Pa(g.keySplines,t-1)),a.duration=""+c,a.valueTo=l,r.push(a)}}i.objectAnimator.length&&a.set.push(i)}else{const t=Object.assign({},p,{propertyName:o,interpolator:g.duration>1?Pa(g.keySplines,0):"",propertyValuesHolder:!1});if(Array.isArray(I[0])){const e=I[I.length-1][n];if(I.length>1){const i=I[0][n];i!==e&&(t.valueFrom=""+i)}t.valueTo=""+e}else{let i;I.length>1?(i=""+I[0],t.valueTo=""+I[I.length-1]):(i=g.from||(!s&&S&&y?y[n]:""),t.valueTo=g.to),"pathType"===p.valueType?t.valueFrom=i||e.pathData||t.valueTo:i&&i!==t.valueTo&&(t.valueFrom=Va(g,i))}t.valueTo&&("floatType"===p.valueType&&(t.valueTo=Ta.truncate(t.valueTo,this.options.floatPrecisionValue)),(0===m?d:h).objectAnimator.push(t))}0!==m||r||-1===g.iterationCount||C(o,d.objectAnimator)}S&&E&&E.length&&(b("translateX","0"),b("translateY","0"))}}}});const m=d.objectAnimator.length>0||h.objectAnimator.length>0;"sequentially"===t&&(m&&1===c.objectAnimator.length&&(d.objectAnimator.unshift(c.objectAnimator[0]),c.objectAnimator.length=0),1===h.objectAnimator.length&&(d.objectAnimator.push(h.objectAnimator[0]),h.objectAnimator.length=0),m&&1===u.objectAnimator.length&&(d.objectAnimator.push(u.objectAnimator[0]),u.objectAnimator.length=0)),0===c.objectAnimator.length&&0===h.objectAnimator.length&&0===u.objectAnimator.length&&("sequentially"===t&&1===d.objectAnimator.length&&(t=""),"sequentially"!==a.ordering&&"sequentially"!==t&&(p=p.concat(d.objectAnimator),d.objectAnimator.length=0)),(d.objectAnimator.length||h.objectAnimator.length)&&(c.objectAnimator.length&&(a.ordering="sequentially",a.set.push(c)),d.objectAnimator.length&&(d.ordering=t,a.set.push(d)),h.objectAnimator.length&&(a.ordering="sequentially",a.set.push(h)),u.objectAnimator.length&&(a.ordering="sequentially",a.set.push(u))),p.length&&(a.objectAnimator=a.objectAnimator.concat(p))}(a.set.length||a.objectAnimator.length)&&p.set.push(a)}),d(t,p)}for(const[t,e]of this.ANIMATE_TARGET.entries()){let n;const i=(t,e,i,a,o)=>{void 0===n&&(n=[]),n.push(this.createPropertyValue(t,e,"0",i,a,o))};for(const t of e.animate)if(ha.asAnimateMotion(t)&&t.parent&&ha.isShape(t.parent)){const e=t.parent.path;e&&e.value!==e.baseValue&&(i("pathData",e.baseValue,"pathType",e.value),-1===t.iterationCount||t.setterType||i("pathData",e.value,"pathType",e.baseValue,""+t.getTotalDuration()))}n&&d(t,{set:[{set:void 0,objectAnimator:n}],objectAnimator:void 0})}t[0].target&&(l=b.insertStoredAsset("drawables",o("anim"),Aa.applyTemplate("animated-vector",aa,t)))}if(this.IMAGE_DATA.length){const t=[];""!==l&&t.push({drawable:ja(l)});const e=[{"xmlns:android":s.android,item:t}];for(const e of this.IMAGE_DATA){const i=n.width/n.viewBox.width,a=n.height/n.viewBox.height;let o=e.getBaseValue("x",0)*i,r=e.getBaseValue("y",0)*a,s=e.getBaseValue(fa.CSS.WIDTH,0),l=e.getBaseValue(fa.CSS.HEIGHT,0);const c=La(e.element,n.element);o+=c.x,r+=c.y,l*=a;const d={width:ga.formatPX(s*=i),height:ga.formatPX(l),left:0!==o?ga.formatPX(o):"",top:0!==r?ga.formatPX(r):""},h=ja(b.addImage({mdpi:e.href}));e.rotateAngle?d.rotate={drawable:h,fromDegrees:""+e.rotateAngle,visible:e.visible?"true":"false"}:d.drawable=h,t.push(d)}c=b.insertStoredAsset("drawables",a,Aa.applyTemplate("layer-list",jn,e))}else c=l;return c}afterFinalize(){this.application.controllerHandler.localSettings.svg.enabled=!1}parseVectorData(t,e=0){const n=this.createGroup(t),i=e+n.length;let a="";for(const e of t)if(e.visible)if(ha.isShape(e)){if(e.path&&e.path.value){const[t,n]=this.createPath(e,e.path),o=[];if(e.path.strokeWidth&&(e.path.strokeDasharray||e.path.strokeDashoffset)){const i=this.ANIMATE_DATA.get(e.name);if(void 0===i||i.animate.every(t=>t.attributeName.startsWith("stroke-dash"))){const[a,r,s,l]=e.path.extractStrokeDash(i&&i.animate,this.options.floatPrecisionValue);if(r){i&&(this.ANIMATE_DATA.delete(e.name),a&&(i.animate=a));const c=qa(e,"stroke"),d={name:c};""!==s&&(t.pathData=s),""!==l&&(d["clip-path"]=[{pathData:l}]);const h=r.length;for(let e=0;e<h;e++){const n=0===e?t:Object.assign({},t);n.name=`${c}_${e}`,i&&this.ANIMATE_DATA.set(n.name,{element:i.element,animate:Ea.filterArray(i.animate,t=>void 0===t.id||t.id===e)}),n.trimPathStart=Ta.truncate(r[e].start,this.options.floatPrecisionValue),n.trimPathEnd=Ta.truncate(r[e].end,this.options.floatPrecisionValue),o.push(n)}n.unshift(d)}}}if(0===o.length&&o.push(t),n.length){n[n.length-1].path=o,a+=Aa.applyTemplate("group",Zn,n,i+1)}else a+=Aa.applyTemplate("path",$n,o,i+1)}}else if(ha.isContainer(e))e.length&&(a+=this.parseVectorData(e,i));else if(ha.asImage(e)&&!ha.asPattern(t)){if(0===e.width||0===e.height){const t=this.application.resourceHandler.getImage(e.href);t&&t.width>0&&t.height>0&&(e.width=t.width,e.height=t.height,e.setRect())}e.extract(this.options.transformExclude.image),this.IMAGE_DATA.push(e)}return n.length?(n[n.length-1].include=a,Aa.applyTemplate("group",Zn,n,e+1)):a}createGroup(t){const e=[],n=[],i={"clip-path":e},a={"clip-path":n},o=[],r={};if(!(t!==this.SVG_INSTANCE&&ha.asSvg(t)||ha.asUseSymbol(t)||ha.asUsePattern(t))||0===t.x&&0===t.y||(r.name=qa(t,"main"),r.translateX=""+t.x,r.translateY=""+t.y),""!==t.clipRegion&&this.createClipPath(t,e,t.clipRegion),(e.length||Object.keys(r).length)&&(Object.assign(i,r),o.push(i)),t!==this.SVG_INSTANCE){const e={},[i]=va(t.element,t.transforms,!0),r=qa(t,"animate");if((ha.asG(t)||ha.asUseSymbol(t))&&Ea.isString(t.clipPath)&&this.createClipPath(t,n,t.clipPath)&&(e.name=r),this.queueAnimations(t,r,t=>ha.asAnimateTransform(t))&&(e.name=r),Object.keys(e).length&&(Object.assign(a,e),o.push(a)),i.length){let e=[];for(const t of i)o.push(xa(t)),e=e.concat(t);t.transformed=e.reverse()}}return o}createPath(t,e){const n={name:t.name},i=[],a=[];if(ha.asUse(t)&&Ea.isString(t.clipPath)&&this.createClipPath(t,a,t.clipPath),Ea.isString(e.clipPath)){const t=new ma(e.element);t.build({exclude:this.options.transformExclude,residual:wa,precision:this.options.floatPrecisionValue}),t.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),this.createClipPath(t,a,e.clipPath)}const o={},r=qa(t,"group");if(this.queueAnimations(t,r,t=>ha.isAnimateTransform(t),"",t.name)?o.name=r:a.length&&(o.name=""),!ha.asUse(t)||0===t.x&&0===t.y||(o.translateX=""+t.x,o.translateY=""+t.y),a.length&&(o["clip-path"]=a),Object.keys(o).length&&i.push(o),e.transformResidual)for(const t of e.transformResidual)i.push(xa(t));const s=function(t){let e=parseFloat(t.opacity),n=t.parent;for(;n;){const t=parseFloat(n.opacity||"1");!isNaN(t)&&t<1&&(e*=t),n=n.parent}return e}(t),l=ha.asUse(t);for(let i in e){let a=l&&t[i]||e[i];if(Ea.isString(a)){switch(i){case"name":break;case"value":i="pathData";break;case"fill":case"stroke":if(i+="Color",a===fa.CSS.NONE||"stroke"!==i&&void 0!==n["aapt:attr"])continue;{const t=b.addColor(a);""!==t&&(a=`@color/${t}`)}break;case"fillPattern":const t=this.SVG_INSTANCE.definitions.gradient.get(a);let o=!1;if(t)switch(e.element.tagName){case"path":if(!/[zZ]\s*$/.test(e.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const n=Ua(t,e,this.options.floatPrecisionValue);n&&(a={name:"android:fillColor",gradient:n},o=!0);break}}if(!o)continue;i="aapt:attr",n.fillColor="",this.NAMESPACE_AAPT=!0;break;case"fillRule":if("evenodd"!==a)continue;i="fillType",a="evenOdd";break;case"strokeWidth":if("0"===a)continue;break;case"fillOpacity":case"strokeOpacity":if("1"===(a=""+(Ea.isNumber(a)?parseFloat(a):1)*s))continue;i="fillOpacity"===i?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===a)continue;i="strokeLineCap";break;case"strokeLinejoin":if("miter"===a)continue;i="strokeLineJoin";break;case"strokeMiterlimit":if("4"===a)continue;i="strokeMiterLimit";break;default:continue}n[i]=a}}const c=new Map,d=[],h=[],u=e.value;let p=u,m=0;for(const e of t.animations)if(ha.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);c.set(t,{index:m,time:t,to:e.transformFrom,reset:!1,animate:e}),-1!==e.iterationCount&&e.fillReplace&&(c.has(t=e.delay+e.iterationCount*e.duration)||c.set(t,{index:m,time:t,to:u,reset:!0})),m++}const f=Array.from(c.values()).sort((t,e)=>t.time<e.time?-1:1),g=f.length;for(let t=0;t<g;t++){const e=f[t];if(!e.reset||e.to!==p){let n=!0;if(e.reset)t:for(let i=0;i<t;i++){const a=f[i];if(!a.reset)for(let i=t+1;i<g;i++)switch(f[i].index){case a.index:n=!1;case e.index:break t}}else{const n=[],i=new Set;for(let e=0;e<t;e++){const t=f[e];n[t.index]=n[t.index]?2:1}const a=n.length;for(let t=0;t<a;t++)if(1===n[t]){const e=f.find(e=>e.index===t&&void 0!==e.animate);e&&e.animate&&i.add(e.animate.type)}for(const t of i){const n=Ba(t);if(n){const i=Ca.TRANSFORM.typeAsValue(t).split(" "),a=i.length;for(let t=0;t<a;t++)d.push(Ga(n[t],e.time,i[t],""))}}}n&&(h.push(Ga("d",e.time,e.to)),p=e.to)}}if(this.queueAnimations(t,n.name,t=>(ha.asAnimate(t)||ha.asSet(t))&&"clip-path"!==t.attributeName,u)||0!==h.length||o.name!==r&&(n.name=""),d.length){const t=this.ANIMATE_DATA.get(r);t&&(t.animate=t.animate.concat(d))}if(h.length){const e=this.ANIMATE_DATA.get(n.name);e?e.animate=e.animate.concat(h):this.ANIMATE_DATA.set(n.name,{element:t.element,animate:h,pathData:u})}return[n,i]}createClipPath(t,e,n){let i=0;return n.split(";").forEach((n,a,o)=>{if("#"===n.charAt(0)){const t=this.SVG_INSTANCE.definitions.clipPath.get(n);if(t){const n=new ua(t);n.build({exclude:this.options.transformExclude,residual:wa,precision:this.options.floatPrecisionValue}),n.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),n.each(t=>{if(t.path&&t.path.value){let n=qa(t,"clip_path",o.length>1?a+1:-1);this.queueAnimations(t,n,t=>ha.asAnimate(t)||ha.asSet(t),t.path.value)||(n=""),e.push({name:n,pathData:t.path.value})}})}i++}else{let r=qa(t,"clip_path",o.length>1?a+1:-1);this.queueAnimations(t,r,t=>(ha.asAnimate(t)||ha.asSet(t))&&"clip-path"===t.attributeName,n)||(r=""),e.push({name:r,pathData:n}),i++}}),i>0}queueAnimations(t,e,n,i="",a){if(t.animations.length){const o=Ea.filterArray(t.animations,(t,e,i)=>!t.paused&&(t.duration>=0||t.setterType)&&n(t,e,i));if(o.length)return this.ANIMATE_DATA.set(e,{element:t.element,animate:o,pathData:i}),a&&this.ANIMATE_TARGET.set(a,{element:t.element,animate:o,pathData:i}),!0}return!1}createPropertyValue(t,e,n,i,a="",o="",r="0"){return{propertyName:t,startOffset:o,duration:n,repeatCount:r,valueType:i,valueFrom:Ea.isNumber(a)?Ta.truncate(a,this.options.floatPrecisionValue):a,valueTo:Ea.isNumber(e)?Ta.truncate(e,this.options.floatPrecisionValue):e,propertyValuesHolder:!1}}}const Ka={builtInExtensions:["android.delegate.max-width-height","android.delegate.fixed","android.delegate.negative-x","android.delegate.negative-viewport","android.delegate.percent","android.delegate.scrollbar","android.delegate.radiogroup","squared.external","squared.substitute","squared.sprite","squared.css-grid","squared.flexbox","squared.table","squared.list","squared.grid","squared.relative","squared.verticalalign","squared.whitespace","squared.accessibility","android.constraint.guideline","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.includes"],targetAPI:28,resolutionDPI:160,framesPerSecond:60,supportRTL:!0,preloadImages:!0,supportNegativeLeftTop:!0,exclusionsDisabled:!1,customizationsOverwritePrivilege:!0,showAttributes:!0,createQuerySelectorMap:!1,convertPixels:"dp",insertSpaces:4,handleExtensionsAsync:!0,autoCloseOnWrite:!0,showErrorMessages:!0,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputDirectory:"app/src/main",outputMainFileName:"activity_main.xml",outputArchiveFormat:"zip",outputArchiveTimeout:30};let Ja,Qa,to,eo=!1;const no=t=>eo&&!!t&&(t.closed||!(!Ja||!Ja.userSettings.autoCloseOnWrite||Ja.initialized||Ja.closed||(Ja.finalize(),0))),io={base:{Controller:Wt,File:oe,Resource:b,View:lt},extensions:{Accessibility:se,CssGrid:Ee,External:Ae,Flexbox:xe,Grid:Ge,List:ze,Relative:Ye,Sprite:Qe,Substitute:tn,Table:sn,VerticalAlign:cn,WhiteSpace:dn,constraint:{Guideline:gn},delegate:{Fixed:bn,MaxWidthHeight:In,NegativeViewport:_n,NegativeX:Hn,Percent:Bn,RadioGroup:Vn,ScrollBar:qn},resource:{Background:Ci,Dimens:Li,Fonts:Ui,Includes:zi,Strings:Ji,Styles:ia,Svg:Za}},lib:{constant:h,customization:P,enumeration:n,util:W},system:{customize(t,e,n){if(I[t]){const i=I[t].assign;return i[e]?Object.assign(i[e],n):i[e]=n,i[e]}},addXmlNs(t,e){s[t]=e},writeLayoutAllXml:(t=!1)=>Qa&&no(Ja)?Qa.layoutAllToXml(Ja.layouts,t):{},writeResourceAllXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceAllToXml(t):{},writeResourceStringXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceStringToXml(t):[],writeResourceArrayXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceStringArrayToXml(t):[],writeResourceFontXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceFontToXml(t):[],writeResourceColorXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceColorToXml(t):[],writeResourceStyleXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceStyleToXml(t):[],writeResourceDimenXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceDimenToXml(t):[],writeResourceDrawableXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceDrawableToXml(t):[],writeResourceDrawableImageXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceDrawableImageToXml(t):[],writeResourceAnimXml:(t=!1)=>Qa&&no(Ja)?Qa.resourceAnimToXml(t):[]},create(){const e=squared.base.lib.constant.EXT_NAME,n=i;return Ja=new t(2,lt,Wt,b,kt),Qa=new oe(Ja.resourceHandler),to=Object.assign({},Ka),Object.assign(Ja.builtInExtensions,{[e.EXTERNAL]:new Ae(e.EXTERNAL,2),[e.SUBSTITUTE]:new tn(e.SUBSTITUTE,2),[e.SPRITE]:new Qe(e.SPRITE,2),[e.CSS_GRID]:new Ee(e.CSS_GRID,2),[e.FLEXBOX]:new xe(e.FLEXBOX,2),[e.TABLE]:new sn(e.TABLE,2,["TABLE"]),[e.LIST]:new ze(e.LIST,2,["DIV","UL","OL","DL"]),[e.GRID]:new Ge(e.GRID,2,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[e.RELATIVE]:new Ye(e.RELATIVE,2),[e.VERTICAL_ALIGN]:new cn(e.VERTICAL_ALIGN,2),[e.WHITESPACE]:new dn(e.WHITESPACE,2),[e.ACCESSIBILITY]:new se(e.ACCESSIBILITY,2),[n.CONSTRAINT_GUIDELINE]:new gn(n.CONSTRAINT_GUIDELINE,2),[n.DELEGATE_FIXED]:new bn(n.DELEGATE_FIXED,2),[n.DELEGATE_MAXWIDTHHEIGHT]:new In(n.DELEGATE_MAXWIDTHHEIGHT,2),[n.DELEGATE_NEGATIVEVIEWPORT]:new _n(n.DELEGATE_NEGATIVEVIEWPORT,2),[n.DELEGATE_NEGATIVEX]:new Hn(n.DELEGATE_NEGATIVEX,2),[n.DELEGATE_PERCENT]:new Bn(n.DELEGATE_PERCENT,2),[n.DELEGATE_RADIOGROUP]:new Vn(n.DELEGATE_RADIOGROUP,2),[n.DELEGATE_SCROLLBAR]:new qn(n.DELEGATE_SCROLLBAR,2),[n.RESOURCE_INCLUDES]:new zi(n.RESOURCE_INCLUDES,2),[n.RESOURCE_BACKGROUND]:new Ci(n.RESOURCE_BACKGROUND,2),[n.RESOURCE_SVG]:new Za(n.RESOURCE_SVG,2),[n.RESOURCE_STRINGS]:new Ji(n.RESOURCE_STRINGS,2),[n.RESOURCE_FONTS]:new Ui(n.RESOURCE_FONTS,2),[n.RESOURCE_DIMENS]:new Li(n.RESOURCE_DIMENS,2),[n.RESOURCE_STYLES]:new ia(n.RESOURCE_STYLES,2)}),eo=!0,{application:Ja,framework:2,userSettings:to}},cached:()=>eo?{application:Ja,framework:2,userSettings:to}:io.create()};return io}();
