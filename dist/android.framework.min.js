var android=function(){"use strict";class t extends squared.base.ApplicationUI{}var e;!function(t){t[t.EDIT=1]="EDIT",t[t.RANGE=2]="RANGE",t[t.RADIO=3]="RADIO",t[t.CHECKBOX=4]="CHECKBOX",t[t.SELECT=5]="SELECT",t[t.TEXT=6]="TEXT",t[t.SVG=7]="SVG",t[t.IMAGE=8]="IMAGE",t[t.BUTTON=9]="BUTTON",t[t.PROGRESS=10]="PROGRESS",t[t.INLINE=11]="INLINE",t[t.LINE=12]="LINE",t[t.SPACE=13]="SPACE",t[t.BLOCK=14]="BLOCK",t[t.FRAME=15]="FRAME",t[t.LINEAR=16]="LINEAR",t[t.GRID=17]="GRID",t[t.RELATIVE=18]="RELATIVE",t[t.CONSTRAINT=19]="CONSTRAINT",t[t.WEBVIEW=20]="WEBVIEW",t[t.UNKNOWN=21]="UNKNOWN"}(e||(e={}));var o=Object.freeze({get CONTAINER_NODE(){return e}});const n={DELEGATE_FIXED:"android.delegate.fixed",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEVIEWPORT:"android.delegate.negative-viewport",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_STYLES:"android.resource.styles"},i={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",RANGE:"SeekBar",SVG:"ImageView",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",METER:"ProgressBar",PROGRESS:"ProgressBar",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},a={PLAINTEXT:e.TEXT,HR:e.LINE,SVG:e.SVG,IMG:e.IMAGE,BUTTON:e.BUTTON,SELECT:e.SELECT,TEXTAREA:e.EDIT,METER:e.PROGRESS,PROGRESS:e.PROGRESS,IFRAME:e.WEBVIEW,INPUT_RANGE:e.RANGE,INPUT_TEXT:e.EDIT,INPUT_PASSWORD:e.EDIT,INPUT_NUMBER:e.EDIT,INPUT_EMAIL:e.EDIT,INPUT_SEARCH:e.EDIT,INPUT_URL:e.EDIT,INPUT_DATE:e.EDIT,INPUT_TEL:e.EDIT,INPUT_TIME:e.EDIT,INPUT_WEEK:e.EDIT,INPUT_MONTH:e.EDIT,INPUT_BUTTON:e.BUTTON,INPUT_FILE:e.BUTTON,INPUT_IMAGE:e.BUTTON,INPUT_SUBMIT:e.BUTTON,INPUT_RESET:e.BUTTON,INPUT_CHECKBOX:e.CHECKBOX,INPUT_RADIO:e.RADIO,"INPUT_DATETIME-LOCAL":e.EDIT},r={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},s={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},l={HORIZONTAL:"horizontal",VERTICAL:"vertical",MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft",CENTER_HORIZONTAL:"center_horizontal",CENTER_VERTICAL:"center_vertical"},c={left:"start",right:"end",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toRightOf:"layout_toEndOf",layout_toLeftOf:"layout_toStartOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},d=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var h=Object.freeze({EXT_ANDROID:n,CONTAINER_ANDROID:i,ELEMENT_ANDROID:a,SUPPORT_ANDROID:{DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},LAYOUT_ANDROID:r,XMLNS_ANDROID:s,STRING_ANDROID:l,LOCALIZE_ANDROID:c,RESERVED_JAVA:d});const{color:u,css:p,regex:m,util:g}=squared.lib,f=squared.base.ResourceUI.STORED,T=/[^\w+]/g;let y,b={};function A(t,e=!1){if(t)for(const o in t)if(g.isPlainObject(t[o]))A(t,e);else{let n=""+t[o];switch(o){case"text":if(!n.startsWith("@string/")&&""!==(n=E.addString(n,"",e))){t[o]=`@string/${n}`;continue}break;case"src":case"srcCompat":if(m.COMPONENT.PROTOCOL.test(n)&&""!==(n=E.addImage({mdpi:n}))){t[o]=`@drawable/${n}`;continue}}const i=u.parseColor(n);if(i){const e=E.addColor(i);""!==e&&(t[o]=`@color/${e}`)}}}class E extends squared.base.ResourceUI{constructor(t,e){super(),this.application=t,this.cache=e,f.styles=new Map,f.themes=new Map,f.dimens=new Map,f.drawables=new Map,f.animators=new Map,this.controllerSettings=t.controllerHandler.localSettings,y=this.controllerSettings.supported.imageFormat}static formatOptions(t,e=!1){for(const o in t){const n=t[o];g.isPlainObject(n)&&A(n,e)}return t}static formatName(t){return m.CHAR.LEADINGNUMBER.test(t)&&(t="__"+t),t.replace(T,"_")}static addTheme(...t){for(const e of t){const t=e.output&&g.isString(e.output.path)?e.output.path.trim():"res/values",o=e.output&&g.isString(e.output.file)?e.output.file.trim():"themes.xml",n=`${g.trimString(t.trim(),"/")}/${g.trimString(o.trim(),"/")}`,i=f.themes.get(n)||new Map;let a="";if(""===e.name||"."===e.name.charAt(0)){t:for(const t of f.themes.values())for(const e of t.values())if(e.name){a=e.name;break t}if(""===a)continue}else a=e.name;e.name=a+("."===e.name.charAt(0)?e.name:""),E.formatOptions(e.items);const r=i.get(e.name);if(r)for(const t in e.items)r.items[t]=e.items[t];else i.set(e.name,e);f.themes.set(n,i)}}static addString(t,e="",o=!1){if(""!==t){""===e&&(e=t.trim());const n=g.isNumber(t);if(!n||o){for(const[e,o]of f.strings.entries())if(o===t)return e;const o=g.trimString(e.replace(m.XML.NONWORD_G,"_"),"_").split(/_+/);o.length>1?(o.length>4&&(o.length=4),e=o.join("_")):e=o[0],e=e.toLowerCase(),n||m.CHAR.LEADINGNUMBER.test(e)||d.includes(e)?e=`__${e}`:""===e&&(e=`__symbol${Math.ceil(1e5*Math.random())}`),f.strings.has(e)&&(e=E.generateId("string",e)),f.strings.set(e,t)}return e}return""}static addImage(t,e=""){const o=t.mdpi;if(o){if(b[o])return b[o];const n=g.fromLastIndexOf(o,"/"),i=g.fromLastIndexOf(n,".").toLowerCase();if("svg"!==i&&y.includes(i))return b[o]=E.insertStoredAsset("images",E.formatName(e+n.substring(0,n.length-i.length-1)),t),b[o]}return""}static addColor(t,e=!1){if("string"==typeof t&&(t=u.parseColor(t,1,e)),t&&(!t.transparent||e)){const e=t.opacity<1?t.valueAsARGB:t.value;let o=f.colors.get(e);if(o)return o;const n=u.findColorShade(t.value);if(n)return o=e===n.value?n.key:E.generateId("color",n.key),f.colors.set(e,o),o}return""}reset(){super.reset(),b={}}addImageSrc(t,e="",o){const n={};if("string"==typeof t){const o=m.CSS.URL.exec(t);if(o){if(!o[1].startsWith("data:image"))return E.addImage({mdpi:g.resolvePath(o[1])},e);n.mdpi=o[1]}}else{if(t.srcset){void 0===o&&(o=p.getSrcSet(t,y));for(const t of o){const e=t.pixelRatio;if(e>0){const o=t.src;e<1?n.ldpi=o:1===e?(void 0===n.mdpi||t.actualWidth)&&(n.mdpi=o):e<=1.5?n.hdpi=o:e<=2?n.xhdpi=o:e<=3?n.xxhdpi=o:n.xxxhdpi=o}}}void 0===n.mdpi&&(n.mdpi=t.src)}if(n.mdpi){const t=this.application.resourceHandler,o=t.getRawData(n.mdpi);if(o&&o.base64){if(o.filename.toLowerCase().endsWith(".svg"))return"";const n=e+o.filename;return t.writeRawImage(n,o.base64),n.substring(0,n.lastIndexOf("."))}}return E.addImage(n,e)}get userSettings(){return this.application.userSettings}}const S=squared.lib.util;function R(t,e,o,n=0){return(!o||o>=n)&&(t.attr=e,!0)}const x={28:{android:{},assign:{}},27:{android:{accessibilityHeading:!1,accessibilityPaneTitle:!1,appComponentFactory:!1,buttonCornerRadius:!1,cantSaveState:!1,dialogCornerRadius:!1,fallbackLineSpacing:!1,firstBaselineToTopHeight:!1,fontVariationSettings:!1,lastBaselineToBottomHeight:!1,lineHeight:!1,maxLongVersionCode:!1,outlineAmbientShadowColor:!1,outlineSpotShadowColor:!1,screenReaderFocusable:!1,textFontWeight:!1,ttcIndex:!1,versionCodeMajor:!1,versionMajor:!1,widgetFeatures:!1,windowLayoutInDisplayCutoutMode:!1},assign:{}},26:{android:{classLoader:!1,navigationBarDividerColor:!1,showWhenLocked:!1,turnScreenOn:!1,windowLightNavigationBar:!1},assign:{}},25:{android:{fontWeight:!1,justificationMode:!1,layout_marginHorizontal:!1,layout_marginVertical:!1,paddingHorizontal:!1,paddingVertical:!1,tooltipText:!1},assign:{}},24:{android:{colorSecondary:!1,contextDescription:!1,contextUri:!1,roundIcon:!1,shortcutDisabledMessage:!1,shortcutId:!1,shortcutLongLabel:!1,shortcutShortLabel:!1,showMetadataInPreview:!1},assign:{}},23:{android:{backupInForeground:!1,bitmap:!1,buttonGravity:!1,canControlMagnification:!1,canPerformGestures:!1,canRecord:!1,collapseIcon:!1,contentInsetEndWithActions:!1,contentInsetStartWithNavigation:!1,contextPopupMenuStyle:!1,countDown:!1,defaultHeight:!1,defaultToDeviceProtectedStorage:!1,defaultWidth:!1,directBootAware:!1,enableVrMode:!1,endX:!1,endY:!1,externalService:!1,fillType:!1,forceHasOverlappingRendering:!1,hotSpotX:!1,hotSpotY:!1,languageTag:!1,level:!1,listMenuViewStyle:!1,maxButtonHeight:!1,networkSecurityConfig:!1,numberPickerStyle:!1,offset:!1,pointerIcon:!1,popupEnterTransition:!1,popupExitTransition:!1,preferenceFragmentStyle:!1,resizeableActivity:!1,startX:!1,startY:!1,subMenuArrow:!1,supportsLocalInteraction:!1,supportsPictureInPicture:!1,textAppearancePopupMenuHeader:!1,tickMark:!1,tickMarkTint:!1,tickMarkTintMode:!1,titleMargin:!1,titleMarginBottom:!1,titleMarginEnd:!1,titleMarginStart:!1,titleMarginTop:!1,tunerCount:!1,use32bitAbi:!1,version:!1,windowBackgroundFallback:!1},assign:{}},22:{android:{allowUndo:!1,autoVerify:!1,breakStrategy:!1,colorBackgroundFloating:!1,contextClickable:!1,drawableTint:!1,drawableTintMode:!1,end:t=>R(t,"right"),extractNativeLibs:!1,fingerprintAuthDrawable:!1,fraction:!1,fullBackupContent:!1,hyphenationFrequency:!1,lockTaskMode:!1,logoDescription:!1,numbersInnerTextColor:!1,scrollIndicators:!1,showForAllUsers:!1,start:t=>R(t,"left"),subtitleTextColor:!1,supportsAssist:!1,supportsLaunchVoiceAssistFromKeyguard:!1,thumbPosition:!1,titleTextColor:!1,trackTint:!1,trackTintMode:!1,usesCleartextTraffic:!1,windowLightStatusBar:!1},assign:{}},21:{android:{accessibilityTraversalAfter:!1,accessibilityTraversalBefore:!1,collapseContentDescription:!1,dialogPreferredPadding:!1,resizeClip:!1,revisionCode:!1,searchHintIcon:!1},assign:{}},20:{android:{actionBarPopupTheme:!1,actionBarTheme:!1,actionModeFindDrawable:!1,actionModeShareDrawable:!1,actionModeWebSearchDrawable:!1,actionOverflowMenuStyle:!1,amPmBackgroundColor:!1,amPmTextColor:!1,ambientShadowAlpha:!1,autoRemoveFromRecents:!1,backgroundTint:!1,backgroundTintMode:!1,banner:!1,buttonBarNegativeButtonStyle:!1,buttonBarNeutralButtonStyle:!1,buttonBarPositiveButtonStyle:!1,buttonTint:!1,buttonTintMode:!1,calendarTextColor:!1,checkMarkTint:!1,checkMarkTintMode:!1,closeIcon:!1,colorAccent:!1,colorButtonNormal:!1,colorControlActivated:!1,colorControlHighlight:!1,colorControlNormal:!1,colorEdgeEffect:!1,colorPrimary:!1,colorPrimaryDark:!1,commitIcon:!1,contentAgeHint:!1,contentInsetEnd:!1,contentInsetLeft:!1,contentInsetRight:!1,contentInsetStart:!1,controlX1:!1,controlX2:!1,controlY1:!1,controlY2:!1,country:!1,datePickerDialogTheme:!1,datePickerMode:!1,dayOfWeekBackground:!1,dayOfWeekTextAppearance:!1,documentLaunchMode:!1,elegantTextHeight:!1,elevation:!1,excludeClass:!1,excludeId:!1,excludeName:!1,fastScrollStyle:!1,fillAlpha:!1,fillColor:!1,fontFeatureSettings:!1,foregroundTint:!1,foregroundTintMode:!1,fragmentAllowEnterTransitionOverlap:!1,fragmentAllowReturnTransitionOverlap:!1,fragmentEnterTransition:!1,fragmentExitTransition:!1,fragmentReenterTransition:!1,fragmentReturnTransition:!1,fragmentSharedElementEnterTransition:!1,fragmentSharedElementReturnTransition:!1,fromId:!1,fullBackupOnly:!1,goIcon:!1,headerAmPmTextAppearance:!1,headerDayOfMonthTextAppearance:!1,headerMonthTextAppearance:!1,headerTimeTextAppearance:!1,headerYearTextAppearance:!1,hideOnContentScroll:!1,indeterminateTint:!1,indeterminateTintMode:!1,inset:!1,isGame:!1,launchTaskBehindSourceAnimation:!1,launchTaskBehindTargetAnimation:!1,layout_columnWeight:!1,layout_rowWeight:!1,letterSpacing:!1,matchOrder:!1,maxRecentsv:!1,maximumAngle:!1,minimumHorizontalAngle:!1,minimumVerticalAngle:!1,multiArch:!1,navigationBarColor:!1,navigationContentDescription:!1,navigationIcon:!1,nestedScrollingEnabled:!1,numbersBackgroundColor:!1,numbersSelectorColor:!1,numbersTextColor:!1,outlineProvider:!1,overlapAnchor:!1,paddingMode:!1,pathData:!1,patternPathData:!1,persistableMode:!1,popupElevation:!1,popupTheme:!1,progressBackgroundTint:!1,progressBackgroundTintMode:!1,progressTint:!1,progressTintMode:!1,propertyXName:!1,propertyYName:!1,queryBackground:!1,recognitionService:!1,relinquishTaskIdentity:!1,reparent:!1,reparentWithOverlay:!1,restrictionType:!1,resumeWhilePausing:!1,reversible:!1,searchIcon:!1,searchViewStyle:!1,secondaryProgressTint:!1,secondaryProgressTintMode:!1,selectableItemBackgroundBorderless:!1,sessionService:!1,setupActivity:!1,showText:!1,slideEdge:!1,splitTrack:!1,spotShadowAlpha:!1,src:(t,e,o)=>(o.svgElement&&(t.obj="app",t.attr="srcCompat"),!0),stackViewStyle:!1,stateListAnimator:!1,statusBarColor:!1,strokeAlpha:!1,strokeColor:!1,strokeLineCap:!1,strokeLineJoin:!1,strokeMiterLimit:!1,strokeWidth:!1,submitBackground:!1,subtitleTextAppearance:!1,suggestionRowLayout:!1,switchStyle:!1,targetName:!1,textAppearanceListItemSecondary:!1,thumbTint:!1,thumbTintMode:!1,tileModeX:!1,tileModeY:!1,timePickerDialogTheme:!1,timePickerMode:!1,timePickerStyle:!1,tintMode:!1,titleTextAppearance:!1,toId:!1,toolbarStyle:!1,touchscreenBlocksFocus:!1,transitionGroup:!1,transitionName:!1,transitionVisibilityMode:!1,translateX:!1,translateY:!1,translationZ:!1,trimPathEnd:!1,trimPathOffset:!1,trimPathStart:!1,viewportHeight:!1,viewportWidth:!1,voiceIcon:!1,windowActivityTransitions:!1,windowAllowEnterTransitionOverlap:!1,windowAllowReturnTransitionOverlap:!1,windowClipToOutline:!1,windowContentTransitionManager:!1,windowContentTransitions:!1,windowDrawsSystemBarBackgrounds:!1,windowElevation:!1,windowEnterTransition:!1,windowExitTransition:!1,windowReenterTransition:!1,windowReturnTransition:!1,windowSharedElementEnterTransition:!1,windowSharedElementExitTransition:!1,windowSharedElementReenterTransition:!1,windowSharedElementReturnTransition:!1,windowSharedElementsUseOverlay:!1,windowTransitionBackgroundFadeDuration:!1,yearListItemTextAppearance:!1,yearListSelectorColor:!1},assign:{}},19:{android:{allowEmbedded:!1,windowSwipeToDismiss:!1},assign:{}},18:{android:{accessibilityLiveRegion:!1,addPrintersActivity:!1,advancedPrintOptionsActivity:!1,apduServiceBanner:!1,autoMirrored:!1,category:!1,fadingMode:!1,fromScene:!1,isAsciiCapable:!1,keySet:!1,requireDeviceUnlock:!1,ssp:!1,sspPattern:!1,sspPrefix:!1,startDelay:!1,supportsSwitchingToNextInputMethod:!1,targetId:!1,toScene:!1,transition:!1,transitionOrdering:!1,vendor:!1,windowTranslucentNavigation:!1,windowTranslucentStatus:!1},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(t,e)=>e<26,canRequestFilterKeyEvents:!1,canRequestTouchExplorationMode:!1,childIndicatorEnd:!1,childIndicatorStart:!1,indicatorEnd:!1,indicatorStart:!1,layoutMode:!1,mipMap:!1,mirrorForRtl:!1,requiredAccountType:!1,requiredForAllUsers:!1,restrictedAccountType:!1,windowOverscan:!1},assign:{}},16:{android:{checkedTextViewStyle:!1,format12Hour:!1,format24Hour:!1,initialKeyguardLayout:!1,labelFor:!1,layoutDirection:!1,layout_alignEnd:t=>R(t,"layout_alignRight"),layout_alignParentEnd:t=>R(t,"layout_alignParentRight"),layout_alignParentStart:t=>R(t,"layout_alignParentLeft"),layout_alignStart:t=>R(t,"layout_alignLeft"),layout_marginEnd:t=>R(t,"layout_marginRight"),layout_marginStart:t=>R(t,"layout_marginLeft"),layout_toEndOf:t=>R(t,"layout_toRightOf"),layout_toStartOf:t=>R(t,"layout_toLeftOf"),listPreferredItemPaddingEnd:t=>R(t,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:t=>R(t,"listPreferredItemPaddingLeft"),paddingEnd:t=>R(t,l.PADDING_RIGHT),paddingStart:t=>R(t,l.PADDING_LEFT),permissionFlags:!1,permissionGroupFlags:!1,presentationTheme:!1,showOnLockScreen:!1,singleUser:!1,subtypeId:!1,supportsRtl:!1,textAlignment:!1,textDirection:!1,timeZone:!1,widgetCategory:!1},assign:{}},15:{android:{fontFamily:!1,importantForAccessibility:!1,isolatedProcess:!1,keyboardLayout:!1,mediaRouteButtonStyle:!1,mediaRouteTypes:!1,parentActivityName:!1},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},I={android:{amPmBackgroundColor:(t,e)=>R(t,"headerBackground",e,23),amPmTextColor:(t,e)=>R(t,"headerTextColor",e,23),animationResolution:(t,e)=>e<16,canRequestEnhancedWebAccessibility:(t,e)=>e<26,dayOfWeekBackground:(t,e)=>e<23,dayOfWeekTextAppearance:(t,e)=>e<23,directionDescriptions:(t,e)=>e<23,headerAmPmTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),headerDayOfMonthTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),headerMonthTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),headerTimeTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),headerYearTextAppearance:(t,e)=>R(t,"headerTextColor",e,23),showOnLockScreen:(t,e)=>R(t,"showForAllUsers",e,23),targetDescriptions:(t,e)=>e<23,yearListItemTextAppearance:(t,e)=>R(t,"yearListTextColor",e,23),yearListSelectorColor:(t,e)=>e<23}};var _=Object.freeze({API_ANDROID:x,DEPRECATED_ANDROID:I,getValue:function(t,e,o,n){for(const i of[x[t],x[0]]){const t=S.optionalAsString(i,`assign.${e}.${o}.${n}`);if(S.isString(t))return t}return""}});const{math:w,util:v}=squared.lib,N=/^@\+?id\//;function P(t,e,o=4){return 0===t?0:0===e?1:parseFloat(Math.max(t/(t+e),0).toPrecision(o))}function C(t,e=160,o=!1,n=3){let i=parseFloat(t);return isNaN(i)?"0dp":160!==e?(0!==(i/=e/160)&&i>-1&&i<1?i.toPrecision(n):w.truncate(i,n-1))+(o?"sp":"dp"):Math.round(i)+(o?"sp":"dp")}function L(t){return t.replace(N,"")}function O(t,e={},o={}){const n={android:e,app:o};return t&&Object.assign(n,t),n}function k(t){const e={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(v.isPlainObject(t))for(const o in e)typeof t[o]==typeof e[o]&&(e[o]=t[o]);return e}function M(t,e,o){return e&&o>=17&&c[t]||t}function X(t){return s[t]?`xmlns:${t}="${s[t]}"`:""}function B(t){let e="";for(const o in s)-1!==t.indexOf(`${o}:`)&&(e+=`\n\t${X(o)}`);return e}var D=Object.freeze({convertLength:C,getDocumentId:L,getHorizontalBias:function(t){const e=t.documentParent;return P(Math.max(0,t.actualRect("left","bounds")-e.box.left),Math.max(0,e.box.right-t.actualRect("right","bounds")),t.localSettings.floatPrecision)},getVerticalBias:function(t){const e=t.documentParent;return P(Math.max(0,t.actualRect("top","bounds")-e.box.top),Math.max(0,e.box.bottom-t.actualRect("bottom","bounds")),t.localSettings.floatPrecision)},createViewAttribute:O,createStyleAttribute:k,localizeString:M,getXmlNs:X,getRootNs:B});const{client:G,css:W,dom:H,math:V,util:F}=squared.lib,{constant:z,enumeration:U}=squared.base.lib,$=/^attr[A-Z]/,q=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,j=/[^\w$\-_.]/g;function Y(t,e=!1){switch(t){case"justify":case"initial":case"inherit":return"";case"center":return l.CENTER_HORIZONTAL;case"start":case"left":if(e)return"";default:return t}}function Z(t){if(!t.blockWidth||t.hasWidth||t.hasPX("maxWidth")||t.innerWrapped&&t.innerWrapped.has("width",4,{not:"100%"})){const e=[];if(t.autoMargin.leftRight?e.push(l.CENTER_HORIZONTAL):t.autoMargin.left?e.push("right"):t.autoMargin.right&&e.push("left"),t.autoMargin.topBottom?e.push(l.CENTER_VERTICAL):t.autoMargin.top?e.push("bottom"):t.autoMargin.bottom&&e.push("top"),e.length){const o=void 0!==t.outerWrapper||!t.blockWidth&&t.pageFlow?"layout_gravity":"gravity";for(const n of e)t.mergeGravity(o,n);return!0}}return!1}function K(t,e,o){if(t.localSettings.targetAPI>=28)t.android("lineHeight",W.formatPX(e),o);else{const n=(e-t.actualHeight)/2;n>0&&t.android("lineSpacingExtra",W.formatPX(n),o)}if(t.styleElement&&!t.hasPX("height")&&t.cssTry("line-height","normal")){if(t.cssTry("white-space","nowrap")){const o=(e-t.element.getBoundingClientRect().height)/2;Math.floor(o)>0&&(t.modifyBox(32,Math.round(o)),t.blockStatic||t.modifyBox(128,Math.floor(o))),t.cssFinally("white-space")}t.cssFinally("line-height")}}function J(t,o,n,i=!0,a=!0){if(!t.is(e.IMAGE)&&0!==t.actualHeight)if(t.multiline)K(t,o,!1);else if(0===t.length&&(t.pageFlow||t.textContent.length)){let e=0,r=!0;if(t.styleElement&&!n&&!t.hasPX("height")&&t.cssTry("line-height","normal"))t.cssTry("white-space","nowrap")&&(e=(o-(t.element.getBoundingClientRect().height||t.actualHeight))/2,r=!1,t.cssFinally("white-space")),t.cssFinally("line-height");else{if(n&&t.inlineText&&!t.inline)return void Q(t,o);e=(o-t.actualHeight)/2}if(Math.floor(e)>0){const o=r&&t.textElement&&!t.plainText&&!n;i&&t.modifyBox(o?32:2,Math.round(e)),a&&t.modifyBox(o?128:8,Math.floor(e))}}else n&&(!t.hasHeight||o>t.height)&&(t.layoutHorizontal&&void 0===t.horizontalRows||t.hasAlign(4096))&&Q(t,o)}function Q(t,e){t.inlineText&&(e+=t.contentBoxHeight,t.mergeGravity("gravity",l.CENTER_VERTICAL,!1)),e>t.height&&t.android("minHeight",W.formatPX(e))}function tt(t){t.textElement&&-1!==t.textContent.trim().indexOf(" ")&&(t.android("maxLines","1"),t.android("ellipsize","end"))}const et=(t,o)=>!!t.renderParent&&"0px"===o&&(t.renderParent.layoutConstraint||t.renderParent.is(e.GRID));var ot=t=>(class o extends t{constructor(t=0,e="0",o,n){super(t,e,o),this.renderChildren=[],this.constraint={horizontal:!1,vertical:!1,current:{}},this._namespaces=["android","app"],this._cached={},this._controlName="",this._containerType=0,this.__android={},this.__app={},this.init(),n&&n(this)}static getControlName(t){return i[e[t]]}android(t,e,o=!0){if(e){if(this.localSettings.targetAPI<28){const n={};if(!this.supported(t,n))return"";Object.keys(n).length&&(F.isString(n.attr)&&(t=n.attr),F.isString(n.value)&&(e=n.value),"boolean"==typeof n.overwrite&&(o=n.overwrite))}this.attr("android",t,e,o)}return this.__android[t]||""}app(t,e,o=!0){return e&&this.attr("app",t,e,o),this.__app[t]||""}apply(t){const e=Object.assign({},t);super.apply(e);for(const t in e)this.formatted(`${t}="${e[t]}"`)}formatted(t,e=!0){const o=q.exec(t);o&&this.attr(o[1]||"_",o[2],o[3],e)}anchor(t,e="",o){const n=this.anchorTarget,i=n.renderParent;if(i&&n.documentId!==e)if(i.layoutConstraint){if(""===e||void 0===n.constraint.current[t]||o){e&&void 0===o&&(o="parent"===e);const i=r.constraint[t];if(i){let a=!1;switch(n.app(this.localizeString(i),e,o),t){case"left":case"right":"parent"===e&&(n.constraint.horizontal=!0);case z.STRING_BASE.LEFT_RIGHT:case z.STRING_BASE.RIGHT_LEFT:a=!0;break;case"top":case"bottom":case"baseline":"parent"===e&&(n.constraint.vertical=!0)}return n.constraint.current[t]={documentId:e,horizontal:a},!0}}}else if(i.layoutRelative){return e&&void 0===o&&(o="true"===e),n.android(this.localizeString(r["true"===e?"relativeParent":"relative"][t]),e,o),!0}return!1}anchorParent(t,e,o,n){const i=this.anchorTarget,a=i.renderParent;if(a){const r=t===l.HORIZONTAL;if(a.layoutConstraint){if(n||!this.constraint[t])return i.anchor(r?"left":"top","parent",n),i.anchor(r?"right":"bottom","parent",n),i.constraint[t]=!0,e&&i.anchorStyle(t,e,o,n),!0}else if(a.layoutRelative)return i.anchor(r?"left":"top","true",n),i.anchor(r?"right":"bottom","true",n),!0}return!1}anchorStyle(t,e="packed",o=0,n=!0){const i=this.anchorTarget,a=t===l.HORIZONTAL;i.app(a?"layout_constraintHorizontal_chainStyle":"layout_constraintVertical_chainStyle",e,n),i.app(a?"layout_constraintHorizontal_bias":"layout_constraintVertical_bias",""+o,n)}anchorDelete(...t){const e=this.anchorTarget,o=e.renderParent;if(o)if(o.layoutConstraint)e.delete("app",...F.replaceMap(t,t=>this.localizeString(r.constraint[t])));else if(o.layoutRelative)for(const o of t)""!==e.alignSibling(o)?e.delete("android",r.relative[o],this.localizeString(r.relative[o])):r.relativeParent[o]&&e.delete("android",this.localizeString(r.relativeParent[o]))}anchorClear(){const t=this.anchorTarget,e=t.renderParent;e&&(e.layoutConstraint?t.anchorDelete(...Object.keys(r.constraint)):e.layoutRelative&&(t.anchorDelete(...Object.keys(r.relativeParent)),t.anchorDelete(...Object.keys(r.relative))))}alignParent(t){const e=this.anchorTarget,o=e.renderParent;if(o)if(o.layoutConstraint){const o=r.constraint[t];if(o)return"parent"===e.app(this.localizeString(o))||"parent"===e.app(o)}else if(o.layoutRelative){const o=r.relativeParent[t];if(o)return"true"===e.android(this.localizeString(o))||"true"===e.android(o)}return!1}alignSibling(t,e){const o=this.anchorTarget,n=o.renderParent;if(n)if(e){if(n.layoutConstraint){const n=r.constraint[t];n&&o.app(this.localizeString(n),e)}else if(n.layoutRelative){const n=r.relative[t];n&&o.android(this.localizeString(n),e)}}else if(n.layoutConstraint){const e=r.constraint[t];if(e){const t=o.app(this.localizeString(e))||o.app(e);return"parent"!==t&&t!==n.documentId?t:""}}else if(n.layoutRelative){const e=r.relative[t];if(e)return o.android(this.localizeString(e))||o.android(e)}return""}supported(t,e={}){if(this.localSettings.targetAPI<28){const o=I.android;if(o&&"function"==typeof o[t]){const n=o[t](e,this.localSettings.targetAPI,this);if(!n||Object.keys(e).length)return n}for(let o=this.localSettings.targetAPI;o<=28;o++){const n=x[o];if(n&&void 0!==n.android[t]){const o=n.android[t];return"function"==typeof o?o(e,this.localSettings.targetAPI,this):o}}}return!0}combine(...t){const e=[];let o;for(const n of this._namespaces)if(0===t.length||t.includes(n)){const t=this[`__${n}`];if(t)for(const i in t){const a=("_"!==n?`${n}:`:"")+`${i}="${t[i]}"`;"id"===i?o=a:e.push(a)}}return e.sort((t,e)=>t>e?1:-1),o&&e.unshift(o),e}localizeString(t){return this.hasProcedure(U.NODE_PROCEDURE.LOCALIZATION)?M(t,this.localSettings.supportRTL,this.localSettings.targetAPI):t}hide(t){t?this.android("visibility","invisible"):super.hide()}clone(t,e=!1,n=!1){const i=new o(t||this.id,this.sessionId,this.element||void 0);if(i.localSettings=Object.assign({},this.localSettings),void 0!==t?i.setControlType(this.controlName,this.containerType):(i.controlId=this.controlId,i.controlName=this.controlName,i.containerType=this.containerType),this.cloneBase(i),e){this._boxReset&&Object.assign(i.unsafe("boxReset"),this._boxReset),this._boxAdjustment&&Object.assign(i.unsafe("boxAdjustment"),this._boxAdjustment);for(const t of this._namespaces){const e=this[`__${t}`];for(const o in e)i.attr(t,o,"android"===t&&"id"===o?i.documentId:e[o])}}return n&&(i.anchorClear(),i.anchor("left",this.documentId)&&(i.modifyBox(16),Object.assign(i.unsafe("boxAdjustment"),{marginLeft:0})),i.anchor("top",this.documentId)&&(i.modifyBox(2),Object.assign(i.unsafe("boxAdjustment"),{marginTop:0}))),i}setControlType(t,o){if(this.controlName=t,o?this.containerType=o:0===this.containerType&&(this.containerType=e.UNKNOWN),""===this.controlId){let t;this.styleElement&&("parent"===(t=(t=>t?t.trim().replace(j,"_").toLowerCase():"")(this.elementId||H.getNamedItem(this.element,"name")))||d.includes(t))&&(t=`_${t}`),this.controlId=F.convertWord(squared.base.ResourceUI.generateId("android",t||F.fromLastIndexOf(this.controlName,".").toLowerCase(),t?0:1)),this.android("id",this.documentId)}}setLayout(){const t=this.renderParent;if(t){switch(this.cssAscend("visibility",!0)){case"hidden":case"collapse":this.hide(!0)}if(this.plainText)return this.setLayoutWidth("wrap_content",!1),void this.setLayoutHeight("wrap_content",!1);const o=this.documentParent;let n=!1;if(this.documentBody&&(!this.hasWidth&&this.renderChildren.some(t=>t.alignParent("right"))&&this.setLayoutWidth("match_parent",!1),!this.hasHeight&&this.renderChildren.some(t=>t.alignParent("bottom"))&&this.setLayoutHeight("match_parent",!1)),""===this.layoutWidth){let i="";if(!this.hasPX("width")||this.inlineStatic&&""!==this.cssInitial("width"))this.imageElement&&this.hasPX("height")&&(i="wrap_content",n=!0);else{const a=this.css("width");let r=-1;if(W.isLength(a))r=this.actualWidth;else if(W.isPercent(a))if(this.inputElement)r=this.bounds.width;else if(t.layoutConstraint&&!t.hasPX("width",!1))"100%"===a?i="match_parent":(this.app("layout_constraintWidth_percent",V.truncate(parseFloat(a)/100,this.localSettings.floatPrecision)),i="0px"),n=!0;else if(t.is(e.GRID))i="0px",this.android("layout_columnWeight",V.truncate(parseFloat(a)/100,this.localSettings.floatPrecision)),n=!0;else if(this.imageElement)"100%"!==a||t.inlineWidth?(r=this.bounds.width,n=!0):i="match_parent";else if("100%"===a){if(!this.support.maxWidth){const e=this.css("maxWidth"),n=this.parseUnit(e),a=this.absoluteParent||o;"100%"===e?!t.inlineWidth&&F.aboveRange(n,a.box.width)?i="match_parent":r=Math.min(this.actualWidth,n):n>0&&(this.blockDimension?r=Math.min(this.actualWidth,n):i=Math.ceil(n)<Math.floor(a.width)?"wrap_content":"match_parent")}""!==i||!this.documentRoot&&t.inlineWidth||(i="match_parent")}else r=this.actualWidth;r>0&&(i=W.formatPX(r))}if(""===i)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage)i=W.formatPX(this.actualWidth);else if(!this.blockStatic||this.inputElement||t.is(e.GRID)||(o.layoutElement&&"flex"!==this.display?!o.flexElement&&t.layoutConstraint&&this.alignParent("left")&&this.alignParent("right")&&(i=this.autoMargin.horizontal||this.ascend(t=>t.hasPX("width")||t.blockStatic).length?"0px":"match_parent"):i="match_parent"),""===i)if(this.layoutVertical&&!this.documentRoot&&t.blockStatic&&(t.layoutFrame&&this.rightAligned||this.layoutLinear&&this.naturalElements.some(t=>t.lineBreak)||this.renderChildren.some(t=>t.layoutConstraint&&t.blockStatic))||!this.pageFlow&&this.absoluteParent===o&&this.hasPX("left")&&this.hasPX("right")||o.flexElement&&this.flexbox.grow>0&&t.flexibleWidth&&"row"===o.css("flexDirection"))i="match_parent";else if(this.naturalElement&&!this.floating&&this.some(t=>t.naturalElement&&t.blockStatic&&t.textElement)){let t=this.actualParent;for(;t;){if(t.has("width")){i="match_parent";break}if(!t.blockStatic)break;t=t.actualParent}}this.setLayoutWidth(i||"wrap_content")}if(""===this.layoutHeight){let i="";if(!this.hasPX("height")||this.inlineStatic&&""!==this.cssInitial("height"))this.imageElement&&this.hasPX("width")&&(i="wrap_content",n=!0);else{const a=this.css("height");let r=-1;if(W.isLength(a))r=this.actualHeight;else if(W.isPercent(a)){if(this.inputElement)r=this.bounds.height;else if(this.imageElement)"100%"!==a||t.inlineHeight?(r=this.bounds.height,n=!0):i="match_parent";else if("100%"===a){if(!this.support.maxHeight){const e=this.css("maxHeight"),n=this.parseUnit(e),a=this.absoluteParent||o;"100%"===e?!t.inlineHeight&&F.aboveRange(n,a.box.height)?i="match_parent":r=Math.min(this.actualHeight,n):n>0&&(this.blockDimension?r=Math.min(this.actualHeight,n):i=Math.ceil(n)<Math.floor(a.box.height)?"wrap_content":"match_parent")}""!==i||!this.documentRoot&&t.inlineHeight||(i="match_parent")}""===i&&this.hasHeight&&(r=this.actualHeight)}r>0&&(this.is(e.LINE)&&"HR"!==this.tagName&&this.hasPX("height",!0,!0)&&(r+=this.borderTopWidth+this.borderBottomWidth),i=W.formatPX(r))}""===i&&(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage?t.layoutConstraint&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||o).box.height?(i="0px",this.anchor("bottom","parent")):i=W.formatPX(this.actualHeight):("table-cell"===this.display||!this.pageFlow&&this.leftTopAxis&&this.hasPX("top")&&this.hasPX("bottom")||void 0===this.outerWrapper&&this.onlyChild&&t.flexElement&&!t.inlineHeight&&"row"===t.css("flexDirection"))&&(i="match_parent")),this.setLayoutHeight(i||"wrap_content")}if(!this.hasPX("minWidth")||o.flexElement&&this.flexbox.grow>0&&"column"===o.css("flexDirection")||this.android("minWidth",this.convertPX(this.css("minWidth")),!1),!this.hasPX("minHeight")||o.flexElement&&this.flexbox.grow>0&&"row"===o.css("flexDirection")||this.android("minHeight",this.convertPX(this.css("minHeight"),"height"),!1),this.support.maxWidth){const t=this.css("maxWidth");let e=-1;W.isLength(t,!0)?"100%"===t?this.imageElement?e=this.element.naturalWidth:this.svgElement&&(e=this.bounds.width):e=this.parseUnit(this.css("maxWidth")):!this.pageFlow&&this.textElement&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&!/\n/.test(this.textContent)&&(e=Math.ceil(this.bounds.width)),-1!==e&&(this.android("maxWidth",W.formatPX(e),!1),this.imageElement&&(n=!0))}if(this.support.maxHeight){const t=this.css("maxHeight");if(W.isLength(t,!0)){let e=-1;(e="100%"===t&&this.imageElement?this.element.naturalHeight:this.parseUnit(this.css("maxHeight"),"height"))>=0&&(this.android("maxHeight",W.formatPX(e)),this.imageElement&&(n=!0))}}this.imageElement&&(n||this.blockWidth||this.blockHeight)&&this.android("adjustViewBounds","true")}}setAlignment(){const t=this.renderParent;if(t){const o=this.hasAlign(512),n=this.outerWrapper||this,i=n.renderParent||t;let a=Y(this.cssInitial("textAlign",!0)),r=Y(this.cssAscend("textAlign"),!0);if(this.nodeGroup&&!o&&""===a){const t=this.actualParent;t&&(a=Y(t.cssInitial("textAlign",!0)))}if(this.pageFlow){let s="";if(this.inlineVertical&&(i.layoutHorizontal&&!i.support.container.positionRelative||i.is(e.GRID)||"table-cell"===this.display)){const t="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",!0)){case"top":n.mergeGravity(t,"top");break;case"middle":n.mergeGravity(t,l.CENTER_VERTICAL);break;case"bottom":n.mergeGravity(t,"bottom")}}if(this.blockWidth?n.nodeGroup&&n.layoutVertical&&this.rightAligned&&n.renderEach(t=>{t.rightAligned&&t.mergeGravity("layout_gravity","right")}):((i.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))&&(this.floating?n.mergeGravity("layout_gravity",this.float):Z(n)||""===a||!this.hasWidth||this.blockStatic||"table"===this.display||n.mergeGravity("layout_gravity",a,!1)),this.rightAligned||this.nodeGroup&&this.renderChildren.length&&this.renderChildren.every(t=>t.rightAligned)?s="right":this.nodeGroup&&o&&!this.renderChildren.some(t=>t.rightAligned)&&(s="left")),t.layoutFrame&&void 0===this.innerWrapped){if(Z(this)||(this.floating&&(s=this.float),""!==s&&(t.inlineWidth||!t.documentRoot&&this.onlyChild)&&t.mergeGravity("layout_gravity",s),this.centerAligned&&this.mergeGravity("layout_gravity",Y("center"))),this.onlyChild&&"table-cell"===t.display){let e;switch(t.css("verticalAlign")){case"top":e="top";break;case"bottom":e="bottom";break;default:e=l.CENTER_VERTICAL}this.mergeGravity("layout_gravity",e)}}else i.layoutFrame&&t.blockWidth&&this.rightAligned&&this.mergeGravity("layout_gravity","right");""!==s?this.blockWidth?""!==a&&"right"!==s||(a=s):(n.blockWidth&&this!==n?this:n).mergeGravity("layout_gravity",s):Z(n.inlineWidth?n:this)&&""!==a&&(r="")}""!==r&&(!this.blockStatic||this.centerAligned||this.rightAligned||n.mergeGravity("layout_gravity","left",!1)),this.layoutConstraint||this.layoutFrame||this.is(e.GRID)||this.layoutElement||(""!==a?this.imageOrSvgElement||this.mergeGravity("gravity",a):""===r||this.inputElement||(this.imageOrSvgElement?this.pageFlow&&this.mergeGravity("layout_gravity",r):this.mergeGravity("gravity",r)))}}mergeGravity(t,o,n=!0){if("layout_gravity"===t){const t=this.renderParent;if(t){if(function(t){switch(t){case"left":case"start":case"right":case"end":case l.CENTER_HORIZONTAL:return!0}return!1}(o)&&(this.blockWidth||t.inlineWidth&&this.onlyChild||!n&&this.outerWrapper&&this.hasPX("maxWidth")))return;if(t.layoutConstraint){if(!t.layoutHorizontal&&!this.positioned)switch(o){case"top":this.anchor("top","parent",!1);break;case"right":case"end":this.anchor("right","parent",!1);break;case"bottom":this.anchor("bottom","parent",!1);break;case"left":case"start":this.anchor("left","parent",!1);break;case l.CENTER_HORIZONTAL:this.anchorParent(l.HORIZONTAL,void 0,void 0,!0)}return}}}else if(this.is(e.TEXT)&&this.textEmpty)return;const i=new Set,a=this.android(t);if(""!==a)for(const t of a.split("|"))i.add(t);i.add(this.localizeString(o));let r="";switch(i.size){case 0:break;case 1:r=Y(i.values().next().value);default:function s(t){const e=`${t}_horizontal`,o=`${t}_vertical`;(i.has(t)||i.has(e)&&i.has(o))&&(i.delete(e),i.delete(o),i.add(t))}s("center"),s("fill");let t="",e="",o="";for(const a of i.values())switch(a){case"left":case"start":case"right":case"end":case l.CENTER_HORIZONTAL:(""===t||n)&&(t=a);break;case"top":case"bottom":case l.CENTER_VERTICAL:(""===e||n)&&(e=a);break;default:o+=(""!==o?"|":"")+a}r=""!==t&&""!==e?`${t}|${e}`:t||e,""!==o&&(r+=(""!==r?"|":"")+o)}""!==r&&this.android(t,r)}applyOptimizations(){const t=this.renderParent;if(t){!(this.tableElement?"content-box"===this.css("boxSizing")||G.isUserAgent(8):this.styleElement)||!this.visibleStyle.borderWidth||this.is(e.LINE)||0!==this.renderChildren.length&&this.naturalChildren.every(t=>!t.pageFlow&&t.absoluteParent===this)||(this.modifyBox(256,this.borderLeftWidth),this.modifyBox(64,this.borderRightWidth),this.modifyBox(32,this.borderTopWidth),this.modifyBox(128,this.borderBottomWidth)),this.alignLayout(t),this.setLineHeight(t),this.inlineWidth&&this.renderChildren.some(t=>t.blockWidth&&t.some(t=>t.flexibleWidth))&&this.setLayoutWidth(this.documentRoot||t.inlineWidth?W.formatPX(this.actualWidth):"match_parent")}}applyCustomizations(t=!0){const e=(e,o)=>{const n=e.assign[o];if(n)for(const e in n){const o=n[e];for(const n in o)this.attr(e,n,o[n],t)}};e(x[0],this.tagName),e(x[0],this.controlName);const o=x[this.localSettings.targetAPI];o&&(e(o,this.tagName),e(o,this.controlName))}setBoxSpacing(){const t=this._boxReset,o=this._boxAdjustment,n=(e,n,i=!1)=>{let a=0,r=0,s=0,c=0;for(let n=0;n<4;n++){const i=e[n];let l=void 0===t||0===t[i]?this[i]:0;if(0!==l&&"marginRight"===i)if(l<0)"right"===this.float&&(l=0);else if(this.inline){const t=this.documentParent.box.right,e=this.bounds.right;if(Math.floor(e)>t){this.onlyChild||this.alignParent("left")||tt(this);continue}e+l>t&&(l=Math.max(0,t-e))}switch(o&&(l+=o[i]),n){case 0:a=l;break;case 1:r=l;break;case 2:s=l;break;case 3:c=l}}if(0!==a||0!==c||0!==s||0!==r){let t=0,e=0,o=0;if(n&&this.positionStatic&&!this.blockWidth&&(c<0||r<0))switch(this.cssAscend("textAlign")){case"center":c<r?(r+=Math.abs(c),r/=2,c=0):(c+=Math.abs(r),c/=2,r=0);break;case"right":case"end":c<0&&(c=0)}!i&&this.localSettings.targetAPI>=26&&(a===r&&r===s&&s===c?t=a:(c===r&&(e=c),a===s&&(o=a))),0!==t?this.android(n?l.MARGIN:l.PADDING,W.formatPX(t)):(0!==e?this.android(n?l.MARGIN_HORIZONTAL:l.PADDING_HORIZONTAL,W.formatPX(e)):(0!==c&&this.android(this.localizeString(n?l.MARGIN_LEFT:l.PADDING_LEFT),W.formatPX(c)),0!==r&&this.android(this.localizeString(n?l.MARGIN_RIGHT:l.PADDING_RIGHT),W.formatPX(r))),0!==o?this.android(n?l.MARGIN_VERTICAL:l.PADDING_VERTICAL,W.formatPX(o)):(0!==a&&this.android(n?l.MARGIN_TOP:l.PADDING_TOP,W.formatPX(a)),0!==s&&this.android(n?l.MARGIN_BOTTOM:l.PADDING_BOTTOM,W.formatPX(s))))}};n(W.BOX_MARGIN,!0,!!this.renderParent&&this.renderParent.is(e.GRID)),n(W.BOX_PADDING,!1)}extractAttributes(t){if("rtl"!==this.dir||this.imageOrSvgElement||(this.textElement?this.android("textDirection","rtl"):this.renderChildren.length&&this.android("layoutDirection","rtl")),this.styleElement){const t=W.getDataSet(this.element,"android");for(const e in t){const o="attr"===e?"android":$.test(e)?F.capitalize(e.substring(4),!1):"";if(""!==o)for(const n of t[e].split(";")){const[t,e]=n.split("::");t&&e&&this.attr(o,t,e)}}if(this.naturalElement){const t=this.css("opacity");"1"!==t&&this.android("alpha",t)}}const e="\n"+"\t".repeat(t);let o="";for(const t of this.combine())o+=e+t;return o}setLayoutWidth(t,e=!0){this.android("layout_width",t,e)}setLayoutHeight(t,e=!0){this.android("layout_height",t,e)}alignLayout(t){if(this.layoutLinear){const e=this.renderChildren;if(this.layoutVertical){if(!(t.layoutVertical||t.layoutFrame||this.documentRoot||this.hasAlign(1024))){let t=e[0];t.baseline&&(t.renderChildren.length&&(t=t.renderChildren[0]),t.baseline&&(t.textElement||t.inputElement)&&this.android("baselineAlignedChildIndex","0"))}}else{if(e.some(t=>t.floating)&&!e.some(t=>t.imageElement&&t.baseline))this.android("baselineAligned","false");else{const t=squared.base.NodeUI.baseline(e,!0);t&&(t.textElement||t.inputElement)&&this.android("baselineAlignedChildIndex",""+e.indexOf(t))}if(e.length>1){tt(e[e.length-1])}}}}setLineHeight(t){const e=this.lineHeight;if(e>0){const o=this.has("lineHeight");if(this.multiline)K(this,e,o);else if(o||this.renderChildren.length||0===t.lineHeight)if(0===this.length)J(this,e,o);else if(this.renderChildren.length){const t=this.horizontalRows||[this.renderChildren];let o=!1;const n=t.length;for(let i=0;i<n;i++){const a=t[i],r=t[i+1];let s=r&&(1===r.length&&r[0].multiline||r[0].lineBreakLeading);if(!s&&i<n-1){const e=t[i+1].find(t=>t.baselineActive);e&&e.has("lineHeight")&&(s=!0)}const l=a.find(t=>t.baselineActive),c=!o&&(i>0||1===n)||a[0].lineBreakLeading,d=!s&&(i<n-1||1===n);if(l){if(l.has("lineHeight")){o=!0;continue}J(l,e,!1,c,d)}else for(const t of a)0!==t.length||t.has("lineHeight")||t.multiline||t.baselineAltered||J(t,e,!1,c,d);o=1===a.length&&a[0].multiline}}}}get documentId(){return this.controlId?`@+id/${this.controlId}`:""}get anchorTarget(){const t=this.renderParent;return t&&(t.layoutConstraint||t.layoutRelative)?this:this.outerWrapper||this}set anchored(t){this.constraint.horizontal=t,this.constraint.vertical=t}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}set containerType(t){this._containerType=t}get containerType(){if(0===this._containerType){const t=a[this.containerName];t&&(this._containerType=t)}return this._containerType}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this.is(e.FRAME)}get layoutLinear(){return this.is(e.LINEAR)}get layoutRelative(){return this.is(e.RELATIVE)}get layoutConstraint(){return this.is(e.CONSTRAINT)}set renderExclude(t){this._cached.renderExclude=t}get renderExclude(){let t=this._cached.renderExclude;return void 0===t&&(t=!(!this.styleElement||0!==this.length||this.imageElement)&&(this.blockStatic||this.layoutVertical?0===this.contentBoxHeight&&(0===this.bounds.height&&this.marginTop<=0&&this.marginBottom<=0||"0px"===this.css("height")&&"hidden"===this.css("overflow")):0===this.bounds.width&&0===this.contentBoxWidth&&this.textEmpty&&this.marginLeft<=0&&this.marginRight<=0),this._cached.renderExclude=t),t}get baselineHeight(){let t=this._cached.baselineHeight;if(void 0===t){if(t=0,!this.plainText||!this.multiline)if(this.multiline&&this.cssTry("white-space","nowrap")?(t=this.element.getBoundingClientRect().height,this.cssFinally("white-space")):t=this.hasHeight?this.actualHeight:this.bounds.height,this.has("lineHeight")&&this.lineHeight>t)t=this.lineHeight;else if(this.inputElement)switch(this.controlName){case i.BUTTON:t+=2;break;case i.RADIO:case i.CHECKBOX:t+=8;break;case i.SELECT:t+=4,t/=this.element.size||1}else this.is(e.PROGRESS)&&(t+=4);this._cached.baselineHeight=t}return t}get support(){let t=this._cached.support;if(void 0===t){const e=this.textElement||this.imageOrSvgElement;t={container:{positionRelative:this.layoutRelative||this.layoutConstraint},maxWidth:e,maxHeight:e},0!==this.containerType&&(this._cached.support=t)}return t}get layoutWidth(){return this.android("layout_width")}get layoutHeight(){return this.android("layout_height")}get inlineWidth(){return"wrap_content"===this.layoutWidth}get inlineHeight(){return"wrap_content"===this.layoutHeight}get blockWidth(){return"match_parent"===this.layoutWidth}get blockHeight(){return"match_parent"===this.layoutHeight}get flexibleWidth(){return et(this,this.layoutWidth)}get flexibleHeight(){return et(this,this.layoutHeight)}set localSettings(t){this._localSettings?Object.assign(this._localSettings,t):this._localSettings=Object.assign({},t)}get localSettings(){return this._localSettings}});class nt extends(ot(squared.base.NodeUI)){}class it extends(ot(squared.base.NodeGroupUI)){constructor(t,e,o,n){super(t,e.sessionId,void 0,n),this.depth=e.depth,this.containerName=`${e.containerName}_GROUP`,this.actualParent=e.actualParent,this.documentParent=e.documentParent,this.retain(o)}}const{client:at,color:rt,css:st,dom:lt,math:ct,regex:dt,session:ht,util:ut,xml:pt}=squared.lib,{constant:mt,enumeration:gt}=squared.base.lib,ft=squared.base.NodeUI,Tt=[l.HORIZONTAL,l.VERTICAL],yt={};let bt;function At(t){t.some(t=>t.floating)&&t.sort((t,e)=>{if(t.floating&&!e.floating)return"left"===t.float?-1:1;if(!t.floating&&e.floating)return"left"===e.float?1:-1;if(t.floating&&e.floating){if(t.float!==e.float)return"left"===t.float?-1:1;if("right"===t.float&&"right"===e.float)return 1}return 0})}function Et(t){return t.length>1&&t.sort((t,e)=>{const o=t.node.innerWrapped||t.node,n=e.node.innerWrapped||e.node;return o.absoluteParent===n.absoluteParent?o.zIndex===n.zIndex?o.childIndex<n.childIndex?-1:1:o.zIndex<n.zIndex?-1:1:o.intersectX(n.bounds,"bounds")&&o.intersectY(n.bounds,"bounds")?o.depth===n.depth?0:o.id<n.id?-1:1:0}),t}function St(t,e){let o,n=0;for(const i of e)if(i!==t&&!i.baselineAltered){let e=i.bounds.height;if(e>0||i.textElement){if(i.blockVertical&&t.blockVertical){i.anchor("bottom",t.documentId);continue}if(!i.textElement&&!i.inputElement){for(const t of i.renderChildren.filter(t=>t.imageOrSvgElement&&t.baseline))t.bounds.height>e&&(e=t.bounds.height);if(e>t.bounds.height){void 0===o||e>=n?(o&&o.anchor(i.imageOrSvgElement?"baseline":"bottom",i.documentId),o=i,n=e):i.anchor(o.imageOrSvgElement?"baseline":"bottom",o.documentId);continue}if(ut.withinRange(i.linear.top,i.documentParent.box.top)){i.anchor("top","true");continue}}(i.naturalChild&&0===i.length||Rt(i))&&i.anchor("baseline",t.documentId)}else i.imageOrSvgElement&&i.baseline&&(o=i)}o&&t.anchor(o.imageOrSvgElement?"baseline":"bottom",o.documentId)}function Rt(t){if(t.layoutHorizontal){const e=t.renderChildren;return e.length&&e.every(t=>t.baseline&&!t.baselineAltered&&(!t.positionRelative||t.positionRelative&&0===t.top&&0===t.bottom))}if(t.layoutVertical){const e=t.renderChildren,o=e[0];return o&&o.baseline&&(1===e.length||o.textElement)}return!1}function xt(t,e,o){if(t.textElement&&!t.hasPX("width")&&(!t.multiline||o)&&(e||-1!==t.textContent.trim().indexOf(" "))){const e=t.actualParent;return e.preserveWhiteSpace||"CODE"===e.tagName||t.android("maxLines","1"),t.floating||t.centerAligned||t.android("ellipsize","end"),!0}return!1}function It(t,e,o){if(o>0){if(t.documentBody)switch(e){case 32:o-=t.marginTop;break;case 64:o-=t.marginRight;break;case 128:o-=t.marginBottom;break;case 256:o-=t.marginLeft}if(1!==t.getBox(e)[0])switch(e){case 32:o+=t.borderTopWidth-t.paddingTop;break;case 64:o+=t.borderRightWidth-t.paddingRight;break;case 128:o+=t.borderBottomWidth-t.paddingBottom;break;case 256:o+=t.borderLeftWidth-t.paddingLeft}return Math.max(o,0)}return o}function _t(t,e){if("left"===e.float){if(e.marginRight<0){return t.modifyBox(16,e.actualWidth+(e.hasWidth?e.paddingLeft+e.borderLeftWidth:0)-Math.abs(e.marginRight)),t.anchor("left",e.documentId),e.modifyBox(4),!0}}else if("right"===t.float&&"right"===e.float&&e.marginLeft<0){const o=Math.abs(e.marginLeft),n=e.actualWidth;return o<n&&t.modifyBox(4,n-o),t.anchor("right",e.documentId),e.modifyBox(16),!0}return!1}function wt(t,e,o){if(!t.inputElement&&!t.imageOrSvgElement){const i=t.documentParent,a=t.renderParent;if(a){function n(){a.nodeGroup&&(a.addAlign(64),a.unsetCache("blockStatic"))}if(!t.blockWidth&&!i.flexElement){const a=t.cssInitial(o?"minWidth":"minHeight",!0);if(st.isLength(a,!0)&&"0px"!==a){let r=!1;o?t.ascend(t=>t.hasPX("width")||t.blockStatic).length&&(t.setLayoutWidth("0px",!1),r=t.flexibleWidth,n()):(t.absoluteParent||i).hasHeight&&!t.hasPX("height")&&(t.setLayoutHeight("0px",!1),r=t.flexibleHeight),r&&(t.app(o?"layout_constraintWidth_min":"layout_constraintHeight_min",st.formatPX(t.parseUnit(a,e.toLowerCase()))),t.css(o?"minWidth":"minHeight","auto"))}}const r=t.cssInitial(o?"maxWidth":"maxHeight",!0);let s=0;if(st.isLength(r,!0)){let l=!1;if(o?(t.outerWrapper||t.ascend(t=>t.hasPX("width")||t.blockStatic).length)&&(t.setLayoutWidth(a.flexibleWidth?"match_parent":"0px",t.innerWrapped&&t.innerWrapped.naturalChild),l=t.flexibleWidth,n(),l&&!st.isPercent(r)&&(s+=t.contentBoxWidth)):(t.absoluteParent||i).hasHeight&&!t.hasPX("height")&&(t.setLayoutHeight(a.flexibleHeight?"match_parent":"0px",t.innerWrapped&&t.innerWrapped.naturalChild),(l=t.flexibleHeight)&&!st.isPercent(r)&&(s+=t.contentBoxHeight)),l){const n=t.parseUnit(r,e.toLowerCase());t.app(o?"layout_constraintWidth_max":"layout_constraintHeight_max",st.formatPX(n+s)),o&&t.layoutVertical&&t.each(t=>{t.textElement&&!t.hasPX("maxWidth")&&t.css("maxWidth",st.formatPX(n))})}}}}}function vt(t,e,o,n){const i=t.cssInitial(e,!0);let a;if(n){if(st.isLength(i,!0)&&(a=st.formatPX(t.bounds[e]),t.imageElement)){const n=t.element;if(n&&n.naturalWidth>0&&n.naturalHeight>0){const i=t.bounds[e]/(o?n.naturalWidth:n.naturalHeight)*(o?n.naturalHeight:n.naturalWidth);o?t.setLayoutHeight(st.formatPX(i),!1):t.setLayoutWidth(st.formatPX(i),!1)}}}else if(st.isPercent(i)&&"100%"!==i){t.app(o?"layout_constraintWidth_percent":"layout_constraintHeight_percent",ct.truncate(parseFloat(i)/100,t.localSettings.floatPrecision)),a="0px"}return!!a&&(o?t.setLayoutWidth(a,!1):t.setLayoutHeight(a,!1),!0)}function Nt(t,e){if(e||t.documentParent.layoutElement||!t.documentParent.hasPX("width",!1))vt(t,"width",!0,e);else{const e=t.cssInitial("width",!0);st.isPercent(e)&&"100%"!==e&&t.setLayoutWidth(st.formatPX(t.bounds.width))}}function Pt(t,e){if(t.documentParent.hasPX("height",!1))if(e||t.documentParent.layoutElement)vt(t,"height",!1,e);else{const e=t.cssInitial("height",!0);st.isPercent(e)&&"100%"!==e&&t.setLayoutHeight(st.formatPX(t.bounds.height))}else st.isLength(t.cssInitial("height"),!0)&&t.setLayoutHeight(st.formatPX(t.bounds.height),!1)}function Ct(t){return ut.filterArray(t,t=>(t.baseline||st.isLength(t.verticalAlign,!0))&&("TEXTAREA"===t.tagName||"SELECT"===t.tagName&&t.element.size>1)||"text-bottom"===t.verticalAlign&&"INPUT_IMAGE"!==t.containerName).sort((t,e)=>t.baselineHeight===e.baselineHeight?"SELECT"===t.tagName?1:0:t.baselineHeight>e.baselineHeight?-1:1)}function Lt(t){return t?["right","left",mt.STRING_BASE.RIGHT_LEFT,mt.STRING_BASE.LEFT_RIGHT]:["left","right",mt.STRING_BASE.LEFT_RIGHT,mt.STRING_BASE.RIGHT_LEFT]}function Ot(t,e){if("BR"===t.tagName)return!0;{const o=ht.getElementAsNode(t,e);if(o)return!o.excluded&&o.blockStatic}return!1}function kt(t){const e=t.length;for(let o=0;o<e;o++){const n=t[o];o>0&&n.anchor(mt.STRING_BASE.LEFT_RIGHT,t[o-1].documentId),o<e-1&&n.anchor(mt.STRING_BASE.RIGHT_LEFT,t[o+1].documentId),n.anchored=!0}const o=t[0],n=t[e-1];o.anchor("left","parent"),n.anchor("right","parent"),o.anchorStyle(l.HORIZONTAL,"spread_inside")}function Mt(t,e,o){const n=t[0][0],i=t.length;for(let a=0;a<i;a++){const i=t[a],r=i.length;for(let s=0;s<r;s++){const c=i[s];if(0===s?0===a?o?(o.anchor(mt.STRING_BASE.BOTTOM_TOP,c.documentId),c.anchor(mt.STRING_BASE.TOP_BOTTOM,"string"==typeof o?o:o.documentId)):(c.anchor("top","parent"),c.anchorStyle(l.VERTICAL)):(c.anchor("top",n.documentId),c.anchorStyle(l.VERTICAL),c.modifyBox(2)):(i[s-1].anchor(mt.STRING_BASE.BOTTOM_TOP,c.documentId),c.anchor(mt.STRING_BASE.TOP_BOTTOM,i[s-1].documentId)),s>0&&c.anchor("left",i[0].documentId),s===r-1){if(e)c.anchor("bottom","parent");else if(a>0&&!c.multiline){const e=t[a-1][s];e&&!e.multiline&&ut.withinRange(c.bounds.top,e.bounds.top)&&(c.anchor("top",e.documentId),c.modifyBox(2,-e.marginTop))}c.modifyBox(8)}c.anchored=!0,c.positioned=!0}}}const Xt=t=>t.some(t=>t.positionRelative||!t.pageFlow&&t.positionAuto)?e.RELATIVE:e.LINEAR,Bt=t=>Math.max(t.actualHeight,t.lineHeight);class Dt extends squared.base.ControllerUI{constructor(t,e){super(),this.application=t,this.cache=e,this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:pt.STRING_XMLENCODING},directory:{string:"res/values",font:"res/font",image:"res/drawable"},svg:{enabled:!1},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:at.isPlatform(4)?"rgb(255, 255, 255)":"rgb(221, 221, 221)",meterForegroundColor:"rgb(99, 206, 68)",meterBackgroundColor:"rgb(237, 237, 237)",progressForegroundColor:"rgb(153, 153, 158)",progressBackgroundColor:"rgb(237, 237, 237)"},supported:{fontFormat:["truetype","opentype"],imageFormat:["jpg","jpeg","png","gif","bmp","webp","svg","ico","cur"]},unsupported:{cascade:new Set(["SELECT","svg"]),tagName:new Set(["HEAD","TITLE","META","SCRIPT","STYLE","LINK","OPTION","INPUT:hidden","MAP","AREA","SOURCE","TEMPLATE","DATALIST"]),excluded:new Set(["BR","WBR","RP"])},precision:{standardFloat:4},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.25,superscriptTopOffset:.25,legendBottomOffset:.25}}}static setConstraintDimension(t){Nt(t,!1),Pt(t,!1),wt(t,"Width",!0),wt(t,"Height",!1)}static setFlexDimension(t,e){const o="width"===e,n=t.flexbox,i=n.basis;function a(e,i){t.android(o?"layout_width":"layout_height","0px"),i>0?(t.app(o?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",ct.truncate(i,t.localSettings.floatPrecision)),""!==e&&t.css(o?"minWidth":"minHeight",e,!0)):""!==e&&(n.shrink<1?(t.app(o?"layout_constraintWidth_min":"layout_constraintHeight_min",st.formatPX((1-n.shrink)*parseFloat(e))),t.app(o?"layout_constraintWidth_max":"layout_constraintHeight_max",e)):t.app(o?"layout_constraintWidth_min":"layout_constraintHeight_min",e))}st.isLength(i)?a(t.convertPX(i),t.flexbox.grow):"0%"!==i&&st.isPercent(i)?(t.app(o?"layout_constraintWidth_percent":"layout_constraintHeight_percent",(parseFloat(i)/100).toPrecision(t.localSettings.floatPrecision)),a("",t.flexbox.grow)):n.grow>0?a(t.hasPX(e,!1)?st.formatPX(t[o?"actualWidth":"actualHeight"]):"",t.flexbox.grow):o?Nt(t,!1):Pt(t,!1),n.shrink>1&&t.app(o?"layout_constrainedWidth":"layout_constrainedHeight","true"),wt(t,"Width",!0),o?Pt(t,!0):Nt(t,!0),wt(t,"Height",!1)}init(){const t=this.userSettings;bt={targetAPI:t.targetAPI||28,supportRTL:"boolean"!=typeof t.supportRTL||t.supportRTL,floatPrecision:this.localSettings.precision.standardFloat}}optimize(t){for(const e of t)e.applyOptimizations(),e.hasProcedure(gt.NODE_PROCEDURE.CUSTOMIZATION)&&e.applyCustomizations(this.userSettings.customizationsOverwritePrivilege)}finalize(t){const e=this.userSettings.insertSpaces;for(const o of t)o.content=pt.replaceTab(o.content.replace(/{#0}/,B(o.content)),e)}processUnknownParent(t){const o=t.node;if(o.has("columnCount")||o.hasPX("columnWidth"))t.setType(e.CONSTRAINT,260);else if(t.some(t=>!t.pageFlow&&!t.positionAuto))t.setType(e.CONSTRAINT,34);else if(t.visible.length<=1){const n=o.find(t=>t.visible);if(!n)return this.processUnknownChild(t);if(o.documentRoot&&function(t,e){if(t.element&&e.dataset.target){const o=document.getElementById(e.dataset.target);return null!==o&&o!==t.element}return!1}(o,n))return o.hide(),{layout:t,next:!0};o.naturalElement&&n.plainText?(o.clear(),o.inlineText=!0,o.textContent=n.textContent,n.hide(),t.setType(e.TEXT)):o.autoMargin.horizontal||t.parent.layoutConstraint&&t.parent.flexElement&&"baseline"===o.flexbox.alignSelf&&n.textElement?t.setType(e.LINEAR,4104):n.percentWidth?(o.hasPX("width")||o.setLayoutWidth("match_parent"),t.setType(e.CONSTRAINT,4160)):n.baseline&&(n.textElement||n.inputElement)?t.setType(e.LINEAR,16):t.setType(e.FRAME,4096)}else E.hasLineBreak(o,!0)?t.setType(t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,18):this.checkConstraintFloat(t)?t.setType(e.CONSTRAINT,512):t.linearX?(this.checkFrameHorizontal(t)?t.renderType|=520:this.checkConstraintHorizontal(t)?t.setType(e.CONSTRAINT):this.checkLinearHorizontal(t)?(t.setType(e.LINEAR),t.floated.size&&At(t.children)):t.setType(e.RELATIVE),t.add(8)):t.linearY?t.setType(Xt(t),16|(o.documentRoot?2:0)):t.every(t=>t.inlineFlow)?this.checkFrameHorizontal(t)?t.renderType|=520:t.setType(Xt(t),18):t.some(e=>e.alignedVertically(e.childIndex>0?t.children.slice(0,e.childIndex):void 0,t.cleared)>0)?t.setType(Xt(t),18):t.setType(e.CONSTRAINT,2);return{layout:t}}processUnknownChild(t){const o=t.node,n=o.visibleStyle;if(!o.inlineText||o.textEmpty&&!n.borderWidth)if(o.blockStatic&&(n.borderWidth||n.backgroundImage||o.paddingTop+o.paddingBottom>0)&&0===o.naturalElements.length)t.setType(e.FRAME);else{if(o.naturalElement&&!o.documentRoot&&""===o.elementId&&0===o.bounds.height&&0===o.marginTop&&0===o.marginRight&&0===o.marginBottom&&0===o.marginLeft&&!n.background&&!o.dataset.use)return o.hide(),{layout:t,next:!0};n.background?(t.setType(e.TEXT),o.inlineText=!0):t.setType(e.FRAME)}else t.setType(e.TEXT);return{layout:t}}processTraverseHorizontal(t,o){const n=t.parent;return 1===t.floated.size&&t.same((t,e)=>t.floating&&(t.positiveAxis||t.renderExclude)?-1:e)?(t.node=this.createNodeGroup(t.node,t.children,n),t.setType(e.CONSTRAINT,512)):this.checkFrameHorizontal(t)?(t.node=this.createNodeGroup(t.node,t.children,n),t.renderType|=520):t.length!==o.length||n.hasAlign(16)?(t.node=this.createNodeGroup(t.node,t.children,n),this.processLayoutHorizontal(t)):n.addAlign(8),t}processTraverseVertical(t){const{floated:o,cleared:n}=t;return t.some((e,o)=>e.lineBreakTrailing&&o<t.length-1)?t.parent.hasAlign(16)||(t.node=this.createLayoutNodeGroup(t),t.setType(Xt(t),18)):1===o.size&&t.every((e,o)=>0===o||o===t.length-1||n.has(e))?(t.node=this.createLayoutNodeGroup(t),t.same(t=>t.float)?t.setType(e.CONSTRAINT,512):t.renderType|=520):o.size&&n.size?(t.node=this.createLayoutNodeGroup(t),t.renderType|=528):o.size&&t.children[0].floating?(t.node=this.createLayoutNodeGroup(t),t.renderType|=520):t.parent.hasAlign(16)||(t.node=this.createLayoutNodeGroup(t),t.setType(t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,16)),t}processLayoutHorizontal(t){return this.checkConstraintFloat(t,!0)?t.setType(e.CONSTRAINT,512):this.checkConstraintHorizontal(t)?t.setType(e.CONSTRAINT,8):this.checkLinearHorizontal(t)?(t.setType(e.LINEAR,8),t.floated.size&&At(t.children)):t.setType(e.RELATIVE,8),t}sortRenderPosition(t,e){if(t.layoutConstraint&&e.some(t=>!t.node.pageFlow||0!==t.node.zIndex)){const t=[],o=[],n=[];for(const i of e){const e=i.node;e.pageFlow?o.push(i):e.zIndex>=0?n.push(i):t.push(i)}return Et(t),Et(n),t.concat(o,n)}return e}checkFrameHorizontal(t){const e=t.floated;if(2===e.size)return!0;if((e.has("right")||1===e.size&&"center"===t.node.cssAscend("textAlign",!0))&&t.some(t=>t.pageFlow))return!0;if(e.has("left")&&!t.linearX){const e=t.item(0);return e.pageFlow&&e.floating}return!1}checkConstraintFloat(t,e=!1){if(t.length>1){let o=0,n=0;for(const i of t){const a=t.cleared.has(i)||i.renderExclude;if(-1!==o&&(i.positiveAxis&&(!i.positionRelative||i.positionAuto)&&(i.floating||i.autoMargin.horizontal)||a)?o++:o=-1,-1!==n&&(i.percentWidth||a)?n++:e||(n=-1),o<=0&&n<=0)return!1}return!0}return!1}checkConstraintHorizontal(t){const e=t.floated;let o=!1;switch(t.node.cssInitial("textAlign")){case"center":o=0===e.size;break;case"end":case"right":o=0===e.size||e.has("right")&&1===e.size&&0===t.cleared.size}return!(!o&&!t.some(e=>e.blockVertical||e.percentWidth||("middle"===e.verticalAlign||"bottom"===e.verticalAlign)&&!t.parent.hasHeight))&&(t.singleRowAligned&&t.every(t=>t.positiveAxis||t.renderExclude))}checkLinearHorizontal(t){const e=t.floated;if((0===e.size||1===e.size&&e.has("left"))&&t.singleRowAligned){const{fontSize:e,lineHeight:o}=t.children[0];for(const n of t)if(!n.naturalChild||0!==n.length||n.inputElement||n.positionRelative||n.blockVertical||n.positionAuto||0!==o&&(n.lineHeight!==o||n.fontSize!==e)||"WBR"===n.tagName||!n.baseline&&!n.cssAny("verticalAlign","top","middle","bottom"))return!1;return!0}return!1}setConstraints(){for(const t of this.cache)if(t.layoutRelative)this.processRelativeHorizontal(t,t.renderChildren);else if(t.layoutConstraint&&t.hasProcedure(gt.NODE_PROCEDURE.CONSTRAINT)){const e=t.renderFilter(t=>!t.positioned);if(e.length){const[o,n]=ut.partitionArray(e,t=>t.pageFlow||t.positionAuto);if(n.length)for(const e of n)e.leftTopAxis&&(e.hasWidth&&e.autoMargin.horizontal?e.hasPX("left")&&e.autoMargin.right?(e.anchor("left","parent"),e.modifyBox(16,e.left)):e.hasPX("right")&&e.autoMargin.left?(e.anchor("right","parent"),e.modifyBox(4,e.right)):(e.anchorParent(l.HORIZONTAL),e.modifyBox(16,e.left),e.modifyBox(4,e.right)):(e.hasPX("left")&&(e.anchor("left","parent"),e.hasPX("right")||"100%"!==e.css("width")||e.anchor("right","parent"),e.modifyBox(16,It(t,256,e.left))),!e.hasPX("right")||e.hasPX("width")&&"100%"!==e.css("width")&&e.hasPX("left")||(e.anchor("right","parent"),e.modifyBox(4,It(t,64,e.right)))),e.hasHeight&&e.autoMargin.vertical?e.hasPX("top")&&e.autoMargin.bottom?(e.anchor("top","parent"),e.modifyBox(2,e.top)):e.hasPX("bottom")&&e.autoMargin.top?(e.anchor("bottom","parent"),e.modifyBox(8,e.bottom)):(e.anchorParent(l.VERTICAL),e.modifyBox(2,e.top),e.modifyBox(8,e.bottom)):(e.hasPX("top")&&(e.anchor("top","parent"),e.hasPX("bottom")||"100%"!==e.css("height")||e.anchor("bottom","parent"),e.modifyBox(2,It(t,32,e.top))),!e.hasPX("bottom")||e.hasPX("height")&&"100%"!==e.css("height")&&e.hasPX("top")||(e.anchor("bottom","parent"),e.modifyBox(8,It(t,128,e.bottom)))),e.positioned=!0);if(o.length){if(t.layoutHorizontal)this.processConstraintHorizontal(t,o);else if(t.hasAlign(256))this.processConstraintColumn(t,o);else if(o.length>1)this.processConstraintChain(t,o);else{const t=o[0];t.anchorParent(l.HORIZONTAL),t.anchorParent(l.VERTICAL),t.rightAligned?t.anchorStyle(l.HORIZONTAL,"packed",1):t.centerAligned||t.anchorStyle(l.HORIZONTAL),t.autoMargin.topBottom||t.anchorStyle(l.VERTICAL),Dt.setConstraintDimension(t)}this.evaluateAnchors(o)}for(const o of e)o.anchored||(o.outerWrapper?(o.constraint.horizontal&&o.anchorParent(l.HORIZONTAL),o.constraint.vertical&&o.anchorParent(l.VERTICAL)):this.addGuideline(o,t))}}}renderNodeGroup(t){const{node:o,containerType:n,alignmentType:i}=t,a=O();let r=!1;switch(n){case e.LINEAR:ut.hasBit(i,16)?(a.android.orientation=l.VERTICAL,r=!0):ut.hasBit(i,8)&&(a.android.orientation=l.HORIZONTAL,r=!0);break;case e.GRID:a.android.rowCount=t.rowCount?""+t.rowCount:"",a.android.columnCount=t.columnCount?""+t.columnCount:"2",r=!0;break;case e.FRAME:case e.RELATIVE:case e.CONSTRAINT:r=!0;break;default:if(0===t.length)return this.renderNode(t)}if(r)return o.setControlType(nt.getControlName(n),n),o.addAlign(i),o.render(!o.dataset.use&&o.dataset.target?this.application.resolveTarget(o.dataset.target):t.parent),o.apply(a),{type:1,node:o,controlName:o.controlName}}renderNode(t){const o=t.node;let n=nt.getControlName(t.containerType);o.setControlType(n,t.containerType),o.addAlign(t.alignmentType);let a=t.parent,r=o.dataset.use?void 0:o.dataset.target;switch(o.tagName){case"IMG":{const n=o.element,s=o.absoluteParent||o.documentParent;let l=o.toFloat("width"),c=o.toFloat("height"),d=o.percentWidth?l:-1;const h=o.percentHeight?c:-1;let u,p="fitXY";if(n.srcset)if((u=st.getSrcSet(n,this.localSettings.supported.imageFormat)).length){if(u[0].actualWidth){if(-1===d){o.css("width",st.formatPX(l=u[0].actualWidth),!0);const t=this.application.resourceHandler.getImage(n.src);t&&t.width>0&&t.height>0?o.css("height",st.formatPX(c=t.height*(l/t.width)),!0):o.android("adjustViewBounds","true")}else l=a.box.width,o.android("adjustViewBounds","true");d=-1}}else u=void 0;if(o.hasResource(gt.NODE_RESOURCE.IMAGE_SOURCE)){const t=this.application.resourceHandler.addImageSrc(n,"",u);""!==t&&o.android("src",`@drawable/${t}`)}if(-1!==d||-1!==h)d>=0&&(l*=s.box.width/100,d<100&&!a.layoutConstraint&&(o.css("width",st.formatPX(l)),o.android("adjustViewBounds","true"))),h>=0&&(c*=s.box.height/100,!(h<100)||a.layoutConstraint&&s.hasHeight||(o.css("height",st.formatPX(c)),o.android("adjustViewBounds","true")));else{switch(o.css("objectFit")){case"contain":p="centerInside";break;case"cover":p="centerCrop";break;case"scale-down":p="fitCenter";break;case"none":p="center"}(0===l&&c>0||0===c&&l>0)&&o.android("adjustViewBounds","true")}if(o.android("scaleType",p),o.baseline&&(o.android("baselineAlignBottom","true"),o.marginBottom>0&&a.layoutLinear&&a.layoutHorizontal&&o.mergeGravity("layout_gravity","bottom")),!o.pageFlow&&a===o.absoluteParent&&(o.left<0&&"hidden"===a.css("overflowX")||o.top<0&&"hidden"===a.css("overflowY"))){const n=this.application,d=n.createNode();d.setControlType(i.FRAME,e.FRAME),d.inherit(o,"base"),d.positionAuto=!1,d.exclude(gt.NODE_RESOURCE.ALL,gt.NODE_PROCEDURE.ALL),d.cssApply({position:o.css("position"),zIndex:""+o.zIndex}),a.appendTry(o,d),o.parent=d,d.setLayoutWidth(l>0?l<s.box.width?st.formatPX(l):"match_parent":"wrap_content"),d.setLayoutHeight(c>0?c<s.box.height?st.formatPX(c):"match_parent":"wrap_content"),d.render(r?n.resolveTarget(r):a),d.saveAsInitial(),d.innerWrapped=o,o.outerWrapper=d,a.layoutConstraint||(o.modifyBox(2,o.top),o.modifyBox(16,o.left)),n.addLayoutTemplate(a,d,{type:1,node:d,controlName:i.FRAME}),a=d,t.parent=d,r=void 0}break}case"INPUT":{const t=o.element,e=t.type;switch(e){case"checkbox":t.checked&&o.android("checked","true");break;case"text":o.android("inputType","text");break;case"password":o.android("inputType","textPassword");break;case"range":case"time":case"number":case"date":case"datetime-local":switch(e){case"number":case"range":o.android("inputType","number");break;case"date":o.android("inputType","date");break;case"time":o.android("inputType","time");break;case"datetime-local":o.android("inputType","datetime")}ut.isString(t.min)&&o.android("min",t.min),ut.isString(t.max)&&o.android("max",t.max);break;case"email":case"tel":case"url":case"week":case"month":case"search":switch(e){case"email":o.android("inputType","textEmailAddress");break;case"tel":o.android("inputType","phone");break;case"url":o.android("inputType","textUri");break;default:o.android("inputType","text")}-1!==t.minLength&&o.android("minLength",""+t.minLength),t.maxLength>0&&o.android("maxLength",""+t.maxLength)}break}case"TEXTAREA":{const t=o.element;switch(o.android("minLines",t.rows>0?""+t.rows:"2"),o.css("verticalAlign")){case"middle":o.mergeGravity("gravity",l.CENTER_VERTICAL);break;case"bottom":o.mergeGravity("gravity","bottom");break;default:o.mergeGravity("gravity","top")}t.maxLength>0&&o.android("maxLength",""+t.maxLength),!o.hasPX("width")&&t.cols>0&&o.css("width",st.formatPX(8*t.cols),!0),o.android("hint",t.placeholder),o.android("scrollbars",l.VERTICAL),o.android("inputType","textMultiLine"),o.overflowX&&o.android("scrollHorizontally","true");break}case"LEGEND":o.hasWidth||(o.css("minWidth",st.formatPX(o.actualWidth),!0),o.css("display","inline-block",!0)),o.modifyBox(8,o.actualHeight*this.localSettings.deviations.legendBottomOffset);break;case"METER":case"PROGRESS":{let t,e;if("METER"===o.tagName){({meterForegroundColor:t,meterBackgroundColor:e}=this.localSettings.style);const n=o.element,{value:i,max:a}=n;a&&(i&&o.android("progress",""+Math.round(i/a*100)),100===a&&(o.android("min",""+n.min),o.android("max",""+a)))}else{({progressForegroundColor:t,progressBackgroundColor:e}=this.localSettings.style);const n=o.element,{value:i,max:a}=n;i&&o.android("progress",""+i),a&&o.android("max",""+a)}o.hasWidth||o.css("width",st.formatPX(o.bounds.width),!0),o.hasHeight||o.css("height",st.formatPX(o.bounds.height),!0),o.android("progressTint",`@color/${E.addColor(t)}`),o.android("progressBackgroundTint",`@color/${E.addColor(e)}`),o.inlineText=!1;break}}switch(n){case i.TEXT:let t="";if(o.overflowX&&(t+=l.HORIZONTAL),o.overflowY&&(t+=(""!==t?"|":"")+l.VERTICAL),""!==t&&o.android("scrollbars",t),o.has("letterSpacing")&&o.android("letterSpacing",ct.truncate(o.toFloat("letterSpacing")/o.fontSize,this.localSettings.precision.standardFloat)),"justify"===o.css("textAlign")&&o.android("justificationMode","inter_word"),o.has("textShadow")){void 0===yt.TEXT_SHADOW&&(yt.TEXT_SHADOW=/^(rgba?\([^)]+\)|[a-z]+) (-?[\d.]+[a-z]+) (-?[\d.]+[a-z]+)\s*(-?[\d.]+[a-z]+)?$/);const t=yt.TEXT_SHADOW.exec(o.css("textShadow"));if(t){const e=E.addColor(rt.parseColor(t[1]));""!==e&&(o.android("shadowColor",`@color/${e}`),o.android("shadowDx",ct.truncate(2*st.parseUnit(t[2],o.fontSize))),o.android("shadowDy",ct.truncate(2*st.parseUnit(t[3],o.fontSize))),o.android("shadowRadius",t[4]?ct.truncate(Math.max(st.parseUnit(t[4],o.fontSize),1)):"1"))}}"nowrap"===o.css("whiteSpace")&&o.textContent.length>1&&(o.android("maxLines","1"),o.android("ellipsize","end"));break;case i.BUTTON:o.hasHeight||o.android("minHeight",st.formatPX(Math.ceil(o.actualHeight))),o.mergeGravity("gravity",l.CENTER_VERTICAL);break;case i.EDIT:{const t=o.element;t.list&&t.list.children.length&&(o.controlName=n=i.EDIT_LIST)}case i.RANGE:o.hasPX("width")||o.css("width",st.formatPX(o.bounds.width),!0);break;case i.LINE:o.hasHeight||o.setLayoutHeight(st.formatPX(o.contentBoxHeight||1))}if(o.inlineVertical&&(!a.layoutHorizontal||a.layoutLinear))switch(o.verticalAlign){case"sub":o.modifyBox(8,-1*Math.ceil(o.fontSize*this.localSettings.deviations.subscriptBottomOffset));break;case"super":o.modifyBox(2,-1*Math.ceil(o.fontSize*this.localSettings.deviations.superscriptTopOffset))}return o.render(r?this.application.resolveTarget(r):a),{type:1,node:o,parent:a,controlName:n}}renderNodeStatic(t,e,o,n,i){const a=new nt(0,"0",void 0,this.afterInsertNode);return a.setControlType(t),""!==o&&a.setLayoutWidth(o||"wrap_content"),""!==n&&a.setLayoutHeight(n||"wrap_content"),e&&(a.apply(e),e.documentId=a.documentId),this.getEnclosingXmlTag(t,this.userSettings.showAttributes?a.extractAttributes(1):void 0,i)}renderSpace(t,e,o,n,a){return void 0===a&&(a=O()),st.isPercent(t)&&(a.android.layout_columnWeight=ct.truncate(parseFloat(t)/100,this.localSettings.precision.standardFloat),t="0px"),e&&st.isPercent(e)&&(a.android.layout_rowWeight=ct.truncate(parseFloat(e)/100,this.localSettings.precision.standardFloat),e="0px"),o&&(a.android.layout_columnSpan=""+o),n&&(a.android.layout_rowSpan=""+n),this.renderNodeStatic(i.SPACE,a,t,e||void 0)}addGuideline(t,e,o,n=!1,a=!1){const r=t.absoluteParent,s=e.nodeGroup&&!t.documentParent.hasAlign(4)?e:t.documentParent;Tt.forEach(c=>{if(!(t.constraint[c]||o&&c!==o)){const o=c===l.HORIZONTAL,d=s.box;let h,u,p,m;if(o?(h=a?"right":"left",u=a?"left":"right",p=a?mt.STRING_BASE.RIGHT_LEFT:mt.STRING_BASE.LEFT_RIGHT,m=a?mt.STRING_BASE.LEFT_RIGHT:mt.STRING_BASE.RIGHT_LEFT):(h=a?"bottom":"top",u=a?"top":"bottom",p=a?mt.STRING_BASE.BOTTOM_TOP:mt.STRING_BASE.TOP_BOTTOM,m=a?mt.STRING_BASE.TOP_BOTTOM:mt.STRING_BASE.BOTTOM_TOP),ut.withinRange(t.linear[h],d[h]))return void t.anchor(h,"parent",!0);const g=t.positionStatic?t.bounds:t.linear;let f,T="layout_constraintGuide_";if(!n&&!e.hasAlign(4)){if(e.renderChildren.some(e=>{if(e!==t&&e.constraint[c]){let n=!1;if(t.pageFlow&&e.pageFlow&&(ut.withinRange(t.linear[h],e.linear[u])?(t.anchor(p,e.documentId,!0),n=!0):ut.withinRange(t.linear[u],e.linear[h])&&(t.anchor(m,e.documentId,!0),n=!0)),n||(ut.withinRange(t.bounds[h],e.bounds[h])?(!o&&t.textElement&&t.baseline&&e.textElement&&e.baseline?t.anchor("baseline",e.documentId,!0):(t.anchor(h,e.documentId,!0),o?t.modifyBox(16,-e.marginLeft,!1):t.modifyBox(2,-e.marginTop,!1)),n=!0):ut.withinRange(t.bounds[u],e.bounds[u])?(t.anchor(u,e.documentId,!0),t.modifyBox(o?4:8),n=!0):!t.pageFlow&&e.pageFlow&&ut.withinRange(t.bounds[h]+t[h],e.bounds[h])&&(t.anchor(h,e.documentId,!0),t.modifyBox(o?16:2,t[h]),n=!0)),n)return e.constraint[c]=!0,!0}return!1}))return}if(t.positionAuto){const e=t.siblingsLeading;if(e.length&&!t.alignedVertically()){const n=e[0];if(n.renderParent===t.renderParent)return t.anchor(o?mt.STRING_BASE.RIGHT_LEFT:"top",n.documentId,!0),void(t.constraint[c]=n.constraint[c])}}if(n){const t=Math.abs(g[h]-d[h])/d[o?"width":"height"];f=parseFloat(ct.truncate(a?1-t:t,this.localSettings.precision.standardFloat)),T+="percent"}else f=g[h]-d[a?u:h],o||s.nodeGroup||s===r||1!==r.getBox(2)[0]||(f-=r.marginTop),T+="begin";const y=e.constraint.guideline||{};if(t.pageFlow){if(t.inlineVertical){const e=ut.convertFloat(t.verticalAlign);e<0&&(f+=e)}}else if(t.parent===s.outerWrapper)f+=s[a?o?"paddingRight":"paddingBottom":o?"paddingLeft":"paddingTop"];else if(r===t.documentParent){let t;f=It(s,t=o?a?64:256:a?128:32,f)}if(!o&&t.marginTop<0&&(f-=t.marginTop,t.modifyBox(2)),t.constraint[c]=!0,f<=0){if(t.anchor(h,"parent",!0),f<0){const e=t.innerWrapped;if(e&&!e.pageFlow){let t=0;switch(h){case"top":t=2;break;case"left":t=16;break;case"bottom":t=8;break;case"right":t=4}e.modifyBox(t,f)}}}else if(o&&f+g.width>=d.right&&s.hasPX("width")&&!t.hasPX("right")||!o&&f+g.height>=d.bottom&&s.hasPX("height")&&!t.hasPX("bottom"))t.anchor(u,"parent",!0);else{const r=ut.optionalAsObject(y,`${c}.${T}.${h}`);if(r)for(const e in r)if(parseInt(r[e])===f)return t.anchor(h,e,!0),void t.anchorDelete(u);let s;s=n?""+f:`@dimen/${E.insertStoredAsset("dimens",`constraint_guideline_${a?u:h}`,st.formatPX(f))}`;const d=O(void 0,{orientation:o?l.VERTICAL:l.HORIZONTAL},{[T]:s});this.addAfterOutsideTemplate(t.id,this.renderNodeStatic(i.GUIDELINE,d),!1);const p=d.documentId;p&&(t.anchor(h,p,!0),t.anchorDelete(u),f>0&&(ut.assignEmptyValue(y,c,T,h,p,""+f),e.constraint.guideline=y))}}})}addBarrier(t,e){const o=[];for(const n of t){const t=n.constraint.barrier;if(void 0===t)n.constraint.barrier={};else if(t[e])continue;o.push(n)}if(o.length){const t=O(void 0,void 0,{barrierDirection:e,constraint_referenced_ids:ut.objectMap(o,t=>L(t.documentId)).join(",")});this.addAfterOutsideTemplate(o[o.length-1].id,this.renderNodeStatic(i.BARRIER,t),!1);for(const n of o)n.constraint.barrier[e]=t.documentId;return t.documentId}return""}evaluateAnchors(t){const e=[],o=[];for(const n of t)if(n.constraint.horizontal&&e.push(n),n.constraint.vertical&&o.push(n),n.alignParent("top")){let e=n;for(;;){const o=e.alignSibling(mt.STRING_BASE.BOTTOM_TOP);if(""===o){if(e!==n){const t=e.constraint.barrier;let o;(o=void 0!==t&&t.bottom?t.bottom:this.addBarrier([e],"bottom"))&&e.anchor(mt.STRING_BASE.BOTTOM_TOP,o)}break}{const i=t.find(t=>t.documentId===o);if(!i||i.alignSibling(mt.STRING_BASE.TOP_BOTTOM)!==e.documentId)break;if(i.alignParent("bottom")){n.anchorStyle(l.VERTICAL,"packed",0,!1);break}e=i}}}let n=-1;for(;++n<t.length;){const i=t[n],a=i.constraint;if(!a.horizontal)for(const t in a.current){const o=a.current[t];if(o.horizontal&&e.some(t=>t.documentId===o.documentId)){a.horizontal=!0,e.push(i),n=-1;break}}if(!a.vertical)for(const t in a.current){const e=a.current[t];if(!e.horizontal&&o.some(t=>t.documentId===e.documentId)){a.vertical=!0,o.push(i),n=-1;break}}}}createNodeGroup(t,e,o,n=!1){const i=new it(this.cache.nextId,t,e,this.afterInsertNode);return o?(o.appendTry(t,i),i.init()):i.containerIndex=t.containerIndex,this.cache.append(i,n),i}createNodeWrapper(t,e,o,n,i){const a=this.application.createNode(void 0,!0,e,o);a.addAlign(16384),t.documentRoot&&(a.documentRoot=!0,t.documentRoot=!1),a.inherit(t,"base","alignment"),n&&a.setControlType(n,i),a.exclude(gt.NODE_RESOURCE.BOX_STYLE|gt.NODE_RESOURCE.ASSET,gt.NODE_PROCEDURE.CUSTOMIZATION,gt.APP_SECTION.ALL),e.appendTry(t,a),t.parent=a;const r=t.outerWrapper;if(r&&(a.outerWrapper=r,r.innerWrapped=a),t.renderParent){const e=t.renderParent.renderTemplates;if(e){const o=e.length;for(let n=0;n<o;n++){const o=e[n];if(o&&o.node===t){t.renderChildren.splice(n,1),e.splice(n,1);break}}}t.rendered=!1,t.renderParent=void 0}if(a.saveAsInitial(),a.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),t.documentParent.layoutElement){const e=t.namespace("android");for(const t in e)t.startsWith("layout_")&&(a.android(t,e[t]),delete e[t]);t.transferBox(30,a)}return a.innerWrapped=t,t.outerWrapper=a,a}processRelativeHorizontal(t,e){const o=[];let n,i=!1,a=!1;if(t.hasAlign(16)){let t;for(const n of e)t?n.anchor(mt.STRING_BASE.TOP_BOTTOM,t.documentId):n.anchor("top","true"),n.pageFlow?(o.push([n]),t=n):a=!0}else{const i=(()=>{const o=t.renderParent;if(o){if(o.overflowY)return o.box.width;{const n=t.actualParent;if(n){if(n===o&&n.blockStatic&&t.naturalElement&&t.inlineStatic)return n.box.width-(t.linear.left-n.box.left);if(n.floatContainer){const{containerType:o,alignmentType:i}=this.containerTypeVerticalMargin;if(t.ascend(t=>t.of(o,i),n,"renderParent").length){let o=0,i=0;for(const a of n.naturalElements)a.floating&&!e.includes(a)&&t.intersectY(a.linear)&&("left"===a.float?Math.floor(a.linear.right)>t.box.left&&(o=Math.max(o,a.linear.right-t.box.left)):"right"===a.float&&t.box.right>Math.ceil(a.linear.left)&&(i=Math.max(i,t.box.right-a.linear.left)));return t.box.width-o-i}}}}}return t.box.width})(),r="nowrap"!==t.css("whiteSpace"),s=ft.linearData(e,!0).cleared,l=t.blockDimension?t.parseUnit(t.css("textIndent")):0,c="center"===t.cssInitial("textAlign");let d,h=0;ut.partitionArray(e,t=>"right"!==t.float).forEach((e,u)=>{const p=e.length;if(0===p)return;const m=0===u;let g,f,T=!0;if(m){const t=e[0].actualParent;t&&t.cssInitialAny("textAlign","right","end")?(T=!1,e[p-1].anchor(g="right","true")):g="left",At(e),f=o}else g="right",f=n=[];let y,b=!1;for(let o=0;o<p;o++){const n=e[o];let u=m&&T?mt.STRING_BASE.LEFT_RIGHT:mt.STRING_BASE.RIGHT_LEFT;if(!n.pageFlow){y?(n.anchor(u,y.documentId),n.anchor("top",y.documentId)):(n.anchor(g,"true"),n.anchor("top","true")),a=!0;continue}let p=n.bounds;if(n.naturalElement&&n.inlineText&&!n.hasPX("width")){const t=ht.getRangeClientRect(n.element,n.sessionId);(t.numberOfLines||t.width<n.box.width)&&(p=t,n.multiline||(n.multiline=!!t.numberOfLines&&t.numberOfLines>0))}let A=n.multiline;A&&Math.floor(p.width)<=i&&(A=!1);let S,R=!0;if(n.autoMargin.leftRight?n.anchor("centerHorizontal","true"):n.autoMargin.left?n.anchor("right","true"):n.autoMargin.right?n.anchor("left","true"):R=!1,y){const e=f[f.length-1];let a=0,m=0;const x=()=>y.floating&&y.alignParent("left")&&(n.multiline||Math.floor(h+n.width)<i),I=()=>(m=h+n.marginLeft,d&&!e.includes(d)&&(m+=d.linear.width),void 0!==d&&n.plainText&&!A&&e.includes(d)&&!s.has(n)||(m+=p.width),n.marginRight<0&&(m+=n.marginRight),a=i,l<0?a+=f.length>1?0:l:l>0&&(a-=1===f.length?l:0),n.styleElement&&n.inlineStatic&&(m-=n.contentBoxWidth),!0);_t(n,y)&&(u="");const _=n.nodeGroup&&!n.hasAlign(128);let w=!1;S=!_&&n.inlineVertical&&y.inlineVertical?lt.getElementsBetweenSiblings(y.element,n.element,!0):void 0;const v=()=>{if(y.textElement){if(1===o&&void 0===S&&n.plainText&&!dt.CHAR.TRAILINGSPACE.test(y.textContent)&&!dt.CHAR.LEADINGSPACE.test(n.textContent))return w=!0,!1;if(r&&b&&(y.bounds.width>=i||E.hasLineBreak(y,!1,!0)))return!0}if(x())return!1;if(r){if(I(),m>a)return y&&y.textElement&&xt(y,!1,b),!0;if(ut.aboveRange(m,a)&&!n.alignParent(g)&&xt(n,!0,A),A&&E.hasLineBreak(n)||n.preserveWhiteSpace&&dt.CHAR.LEADINGNEWLINE.test(n.textContent))return!0}return!1},N=n.textElement&&v();N||_||ut.aboveRange(n.linear.top,y.linear.bottom)&&(n.blockStatic||n.floating&&y.float===n.float)||y.autoMargin.horizontal||s.has(n)||!n.textElement&&!x()&&I()&&Math.floor(m)>a||!n.floating&&(y.blockStatic||n.previousSiblings().some(t=>t.lineBreak||t.excluded&&t.blockStatic)||S&&S.some(e=>Ot(e,t.sessionId)))?(T?(d&&n.linear.bottom<=d.bounds.bottom?R||n.anchor(u,d.documentId):(R||n.anchor(g,"true"),d=void 0),c&&1===e.length&&!y.blockStatic&&(y.anchorDelete(g),y.anchor("centerHorizontal","true")),R=!0):(d&&n.linear.bottom>d.bounds.bottom&&(d=void 0),y.anchor(g,"true")),N&&A&&xt(y,r,!1),h=Math.min(0,N&&!y.multiline&&A&&!s.has(n)?n.linear.right-t.box.right:0),f.push([n])):(""!==u&&(T?R||(n.anchor(u,y.documentId),R=!0):y.anchor(u,n.documentId)),y.floating||w||!n.multiline||n.hasPX("width")||(A=!1,n.multiline=!1),e.push(n))}else T&&(R||n.anchor(g,"true")),f.push([n]);"left"===n.float&&m&&(d?ut.aboveRange(n.linear.bottom,d.linear.bottom)&&(d=n):d=n);let x=0;if(S&&!S.some(t=>!!ht.getElementAsNode(t,n.sessionId)||Ot(t,n.sessionId))){const t=ht.getRangeClientRect(S[0],"0");if(!t.numberOfLines){const e=S.length>1?ht.getRangeClientRect(S[S.length-1],"0"):void 0;void 0!==e&&e.numberOfLines||(x=e?t.left-e.right:t.width)}}h+=x+n.marginLeft+p.width+n.marginRight,y=n,b=A}})}(o.length>1||n&&n.length>1)&&(i=!0);const r=e=>{let o=null;const n=e.length;for(let a=0;a<n;a++){const n=e[a];let r;if(n.length>1){const e=Ct(n);let o=e[0];(r=ft.baseline(e.length?n.filter(t=>!e.includes(t)):n))&&o&&(r!==o&&o.bounds.height>r.bounds.height?r.anchor("bottom",o.documentId):(r=ft.baseline(n),o=void 0));const s=[];let l=0===a?"true":r?r.documentId:"",c=0,d=null;for(const e of n)if(e!==r&&e!==o)if(e.baseline)s.push(e);else if(e.inlineVertical)switch(e.verticalAlign){case"text-top":if(null===d&&(d=ft.baseline(n,!0)),d&&e!==d){e.anchor("top",d.documentId);break}break;case"super":e.baselineAltered||e.modifyBox(2,-1*Math.ceil(e.fontSize*this.localSettings.deviations.superscriptTopOffset));case"top":""!==l&&l!==e.documentId?e.anchor("top",l):r&&e.anchor("top",r.documentId);break;case"middle":const o=Math.max(e.actualHeight,e.lineHeight);if(i){if(r){const t=Math.max(r.actualHeight,r.lineHeight);o<t?(e.anchor("top",r.documentId),e.modifyBox(2),e.modifyBox(2,Math.round((t-o)/2))):o>c&&(c=o)}}else e.anchor("centerVertical","true"),e.imageElement&&(c=Math.max(o,c));break;case"text-bottom":null===d&&(d=ft.baseline(n,!0)),d&&d!==e?e.anchor("bottom",d.documentId):r&&e.anchor("bottom",r.documentId);break;case"sub":e.baselineAltered||e.modifyBox(8,-1*Math.ceil(e.fontSize*this.localSettings.deviations.subscriptBottomOffset));case"bottom":""===l||ut.withinRange(t.bounds.height,e.bounds.height)||(t.hasHeight||"true"!==l||(i?r&&(l=r.documentId):t.css("height",st.formatPX(t.bounds.height),!0)),e.anchor("bottom",l));break;default:e.baselineAltered||s.push(e)}else Rt(e)&&s.push(e);if(r)r.baselineActive=!0,s.length?St(r,s):r.textElement&&c>r.actualHeight&&(r.anchor("centerVertical","true"),r=null);else if(s.length&&s.length<n.length&&(o=Ct(n)[0]))for(const t of s)t.baseline&&!t.multiline&&o.bounds.height>t.bounds.height&&t.anchor("bottom",o.documentId);const h=n[n.length-1];!h.textElement||h.multiline||xt(h,!1,!1)||h.android("maxLines","1")}else(r=n[0]).baselineActive=!0;if(a>0){if(null===o){const t=e[a-1];o=t.find(t=>!t.floating)||t[0];let n=!1;for(const e of t)n||e!==o?e.linear.bottom>=o.linear.bottom&&(!e.floating||o.floating)&&(o=e):n=!0}for(const t of n)""===t.alignSibling("baseline")&&t.anchor(mt.STRING_BASE.TOP_BOTTOM,o.documentId)}o=r}};if(r(o),n&&r(n),i&&(t.horizontalRows=n?o.concat(n):o),a){const e=t.renderChildren,o=t.renderTemplates,n=[];for(let t=0;t<e.length;t++)e[t].pageFlow||(n.push(o[t]),e.splice(t,1),o.splice(t--,1));for(const t of n)e.push(t.node),o.push(t)}}processConstraintHorizontal(t,e){const o=ft.baseline(e),n=ft.baseline(e,!0),i=t.hasAlign(2048),a=Ct(e)[0],[r,s,c,d]=Lt(i);let h,u,p,m=0;switch(t.cssAscend("textAlign",!0)){case"center":m=.5;break;case"right":case"end":i||(m=1)}At(e),!t.hasPX("width")&&e.some(t=>t.percentWidth)&&t.setLayoutWidth("match_parent");const g=e.length;for(let i=0;i<g;i++){const f=e[i];if(p?f.pageFlow?(p.anchor(d,f.documentId),f.anchor(c,p.documentId),i===g-1&&f.anchor(s,"parent")):f.positionAuto&&f.anchor(c,p.documentId):(f.anchor(r,"parent"),f.anchorStyle(l.HORIZONTAL,"packed",m)),f.pageFlow){if(f!==o){if(f.inlineVertical){let i=!1;switch((void 0===h||Bt(f)>Bt(h))&&(h=f),f.verticalAlign){case"text-top":n&&f!==n?f.anchor("top",n.documentId):i=!0;break;case"middle":o&&!o.textElement||a?i=!0:f.anchorParent(l.VERTICAL);break;case"text-bottom":if(n&&f!==n){f!==a?f.anchor("bottom",n.documentId):a&&(i=!0);break}case"bottom":if(void 0===u)for(const t of e)!t.baseline&&(void 0===u||t.linear.bottom>u.linear.bottom)&&(u=t);f===u?i=!0:f.anchor("bottom","parent");break;case"baseline":null===o||f.blockVertical||!f.textElement&&Bt(f)>Bt(o)?i=!0:f.anchor("baseline",o.documentId);break;default:i=!0}i&&(f.anchorParent(l.VERTICAL,"packed"),f.modifyBox(2,f.linear.top-t.box.top),f.baselineAltered=!0)}else f.plainText&&o?f.anchor("baseline",o.documentId):f.anchorParent(l.VERTICAL,"packed");f.anchored=!0}else o.baselineActive=!0;Dt.setConstraintDimension(f),p=f}else f.positionAuto&&(f.anchorParent(l.VERTICAL,"packed"),f.anchored=!0)}if(o){if(h&&h!==o&&o.textElement&&Bt(h)>Bt(o))switch(h.verticalAlign){case"middle":o.anchorParent(l.VERTICAL,void 0,void 0,!0);break;case"baseline":o.anchor("baseline",h.documentId);break;case"bottom":case"text-bottom":o.anchor("bottom",h.documentId);break;case"sub":h.textElement||(o.anchor("bottom",h.documentId),o.modifyBox(8,-1*Math.ceil(o.fontSize*this.localSettings.deviations.subscriptBottomOffset)));break;case"super":h.textElement||(o.anchor("bottom",h.documentId),o.modifyBox(2,-1*Math.ceil(o.fontSize*this.localSettings.deviations.superscriptTopOffset)))}else o.anchorParent(l.VERTICAL,"packed"),o.modifyBox(2,Math.floor(o.linear.top-t.box.top));o.anchored=!0}}processConstraintColumn(t,e){let o=[];const n=[o];for(const t of e)"all"===t.css("columnSpan")?(o.length?n.push([t]):o.push(t),n.push(o=[])):o.push(t);0===o.length&&n.pop();const i=t.parseUnit(t.css("columnGap"))||t.fontSize,a=t.parseUnit(t.css("columnWidth"),"width"),r=t.toInt("columnCount");let s,c=0;if(a>0){let e;for(e=at.isUserAgent(4)?Math.min(t.width>0?t.width-t.contentBoxWidth:1/0,t.box.width*(r||1),t.documentParent.box.width-t.contentBoxWidth):t.box.width;e-a>=0;)c++,e-=a+i}else c=1/0;const d=n.length;for(let e=0;e<d;e++){const o=n[e],h=o[0];if(1===o.length)0===e?(h.anchor("top","parent"),h.anchorStyle(l.VERTICAL)):s&&(s.anchor(mt.STRING_BASE.BOTTOM_TOP,h.documentId),h.anchor(mt.STRING_BASE.TOP_BOTTOM,"string"==typeof s?s:s.documentId)),h.rightAligned?h.anchorParent(l.HORIZONTAL,"packed",1):h.centerAligned?h.anchorParent(l.HORIZONTAL):h.anchorParent(l.HORIZONTAL,"packed"),e===d-1?h.anchor("bottom","parent"):s=o[0];else{const n=[],l=o.length;let h=Math.min(l,c,r||1/0),u=0;if(h>1){let e=l>=h?Math.ceil(l/h):1;const a=Math.floor(o.reduce((t,e)=>t+e.bounds.height,0)/h);let r=e>1&&l%h!=0?l-h:1/0,s=0;for(let t=0,i=0,c=0;t<l;t++,c++){const l=o[t],d=c%e==0;i<h-1&&(d||r<=0||t>0&&(o[t-1].bounds.height>=a||n[i].length&&o.length-t+1==h-i&&o[t-1].bounds.height>o[t+1].bounds.height))&&(t>0&&(i++,d?r--:r++),void 0===n[i]&&(n[i]=[]),c=0),n[i].push(l),l.length&&(s+=ct.maxArray(ut.objectMap(l.children,t=>t.marginLeft+t.marginRight))),t>0&&/H\d/.test(l.tagName)?1===n[i].length&&t===o.length-2?(h--,r=0):(c+1)%e==0&&o.length-t>h&&!o[t+1].multiline&&o[t+1].bounds.height<a&&(n[i].push(o[++t]),c=-1):o.length-t==h-i&&r!==1/0&&(e=1)}u=h>1?Math.max((s+i*(h-1))/t.box.width/h,.01):0}else n.push(o);const p=[],m=n.length;for(let t=0;t<m;t++){const e=n[t];for(const t of e)t.setLayoutWidth("0px"),t.app("layout_constraintWidth_percent",ct.truncate(1/h-u,this.localSettings.precision.standardFloat));p.push(e[0])}const g=Array(m).fill(0),f=[];for(let e=0;e<m;e++){const o=n[e];if(e<m-1&&o.length>1){const t=o[o.length-1];/H\d/.test(t.tagName)&&(o.pop(),p[e+1]=t,n[e+1].unshift(t))}const i=[];for(let t=0;t<o.length;t++){const n=o[t];n.naturalChild?i.push(n.element.cloneNode(!0)):g[e]+=n.linear.height}if(i.length){const o=lt.createElement(document.body,"div",{width:st.formatPX(a||t.box.width/h),visibility:"hidden"});for(const t of i)o.appendChild(t);g[e]+=o.getBoundingClientRect().height,document.body.removeChild(o)}}const T=p.length;for(let t=1;t<T;t++)p[t].modifyBox(16,i);if(kt(p),Mt(n,e===d-1,s),s=void 0,n.every(t=>1===t.length)){for(const t of n)f.push(t[t.length-1]);s=this.addBarrier(f,"bottom")}if(!s){let t=0;const e=g.length;for(let o=0;o<e;o++)g[o]>=t&&(s=n[o].pop(),t=g[o])}}}}processConstraintChain(t,e){const o=e[0].actualParent||t,n=ft.partitionRows(e),i=t.hasAlign(512),a=n.length;a>1&&(t.horizontalRows=n),!t.hasWidth&&e.some(t=>t.percentWidth)&&t.setLayoutWidth("match_parent");let r=[],s=!1;for(let t=0;t<a;t++){const e=n[t],c=n[t-1],[d,h]=ut.partitionArray(e,t=>"right"===t.float||!0===t.autoMargin.left);let u,p;if([h,d].forEach(e=>{const n=e.length;if(0===n)return;const h=e===d,[m,g,f,T]=Lt(h),y=e[0],b=e[n-1];y.anchor(m,"parent"),i||"center"!==o.css("textAlign")?n>1&&(h?b.anchorStyle(l.HORIZONTAL,"packed",1):y.anchorStyle(l.HORIZONTAL)):y.anchorStyle(l.HORIZONTAL,"spread"),(n>1||b.autoMargin.leftRight)&&b.anchor(g,"parent");for(let d=0;d<n;d++){const n=e[d],A=e[d-1],E=e[d+1];if(0===t?1===a?(n.anchorParent(l.VERTICAL),n.autoMargin.topBottom||n.anchorStyle(l.VERTICAL,"packed",n.autoMargin.top?1:0)):n.anchor("top","parent"):s||t!==a-1||n.anchor("bottom","parent"),n.autoMargin.leftRight?n.anchorParent(l.HORIZONTAL):(A&&n.anchor(f,A.documentId),E&&n.anchor(T,E.documentId)),Dt.setConstraintDimension(n),i&&t>0&&0===d){let t=!1;for(const e of r)if(Math.ceil(n.linear.top)<Math.floor(e.linear.bottom)){t=!0;break}if(t){u=c[c.length-1];for(let t=r.length-2;t>=0;t--){const e=r[t];if(e.linear.bottom>u.linear.bottom){if(h&&Math.ceil(e.linear[g])-Math.floor(o.box[g])<n.linear.width)continue;const i=r[t+1];n.anchor(m,i.documentId,!0),h?n.modifyBox(4,-i.marginRight,!1):n.modifyBox(16,-i.marginLeft,!1),y.anchorDelete(T),b.anchorDelete(g),y.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),void 0===p&&(p=n,s=!0);break}}}}}}),i&&(r=r.concat(h,d)),t>0){if(void 0===u){u=c[0];const t=c.length;for(let e=1;e<t;e++)c[e].linear.bottom>=u.linear.bottom&&(u=c[e])}if(void 0===p){p=e[0];const t=e.length;for(let o=1;o<t;o++)e[o].linear.bottom>=p.linear.bottom&&(p=e[o]);s=!1}p.anchor(mt.STRING_BASE.TOP_BOTTOM,u.documentId),u.anchor(mt.STRING_BASE.BOTTOM_TOP,p.documentId);for(const t of e)t!==p&&(t.anchor("top",p.documentId),t.autoMargin.topBottom||t.anchorStyle(l.VERTICAL,"packed",t.autoMargin.top?1:0),t.modifyBox(2,-1*p.marginTop))}}}createLayoutNodeGroup(t){return this.createNodeGroup(t.node,t.children,t.parent)}get containerTypeHorizontal(){return{containerType:e.LINEAR,alignmentType:8,renderType:0}}get containerTypeVertical(){return{containerType:e.LINEAR,alignmentType:16,renderType:0}}get containerTypeVerticalMargin(){return{containerType:e.FRAME,alignmentType:256,renderType:0}}get containerTypePercent(){return{containerType:e.CONSTRAINT,alignmentType:8,renderType:0}}get afterInsertNode(){return t=>{this.userSettings.exclusionsDisabled||t.setExclusions(),t.localSettings=bt}}get userSettings(){return this.application.userSettings}}class Gt extends squared.base.ExtensionManager{}var Wt={resources:{">":{color:{"@":["name"],"~":!0}}}},Ht={resources:{">":{dimen:{"@":["name"],"~":!0}}}},Vt={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},Ft={resources:{">":{string:{"@":["name"],"~":!0}}}},zt={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":!0}}}}}},Ut={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":!0}}}}}};const{util:$t,xml:qt}=squared.lib,jt=E.STORED,Yt=/^(.+)\/(.+?\.\w+)$/,Zt=/"(-?[\d.]+)px"/g,Kt=/>(-?[\d.]+)px</g;function Jt(t){const e=[],o=t.length;for(let n=0;n<o;n+=3)e.push({pathname:t[n+1],filename:t[n+2],content:t[n]});return e}function Qt(t){const e=[],o=t.length;for(let n=0;n<o;n+=3)e.push({pathname:t[n+1],filename:t[n+2],content:"",uri:t[n]});return e}const te=(t,e,o)=>({pathname:t,filename:e,content:o}),ee=(t,e,o)=>"dp"===o?t.replace(Zt,(t,...o)=>'"'+C(o[0],e,!1)+'"'):t,oe=(t,e,o)=>"dp"===o?t.replace(Kt,(t,...o)=>">"+C(o[0],e,!1)+"<"):t,ne=(t,e)=>(""+t).toLowerCase()>=(""+e).toLowerCase()?1:-1;class ie extends squared.base.FileUI{copyToDisk(t,e,o){this.copying(t,this.getAssetsAll(e),o)}appendToArchive(t,e){this.archiving(this.userSettings.outputArchiveName,this.getAssetsAll(e),t)}saveToArchive(t,e){this.archiving(t,this.getAssetsAll(e))}resourceAllToXml({copyTo:t,archiveTo:e,callback:o}={}){const n={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),drawableImage:this.resourceDrawableImageToXml(),anim:this.resourceAnimToXml()};for(const t in n)0===n[t].length&&delete n[t];if(t||e){let i=[];for(const t in n)i=i.concat("image"===t?Qt(n[t]):Jt(n[t]));t&&this.copying(t,i,o),e&&this.archiving(e,i)}return n}resourceStringToXml(t={}){const e=[],o=[{string:[]}];jt.strings.has("app_name")||o[0].string.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[t,e]of Array.from(jt.strings.entries()).sort(ne))o[0].string.push({name:t,innerText:e});return e.push(qt.replaceTab(qt.applyTemplate("resources",Ft,o),this.userSettings.insertSpaces,!0),this.directory.string,"strings.xml"),this.checkFileAssets(e,t),e}resourceStringArrayToXml(t={}){const e=[];if(jt.arrays.size){const o=[{"string-array":[]}];for(const[t,e]of Array.from(jt.arrays.entries()).sort())o[0]["string-array"].push({name:t,item:$t.objectMap(e,t=>({innerText:t}))});e.push(qt.replaceTab(qt.applyTemplate("resources",zt,o),this.userSettings.insertSpaces,!0),this.directory.string,"string_arrays.xml"),this.checkFileAssets(e,t)}return e}resourceFontToXml(t={}){const e=[];if(jt.fonts.size){const o=this.userSettings,n=s[o.targetAPI<26?"app":"android"],i=this.directory.font;for(const[t,a]of Array.from(jt.fonts.entries()).sort()){const r=[{"xmlns:android":n,font:[]}];for(const e in a){const[o,n,s]=e.split("|");let l=t;"normal"===n?l+="400"===s?"_normal":`_${a[e]}`:(l+=`_${n}`,"400"!==s&&(l+=`_${a[e]}`)),r[0].font.push({font:`@font/${l}`,fontStyle:n,fontWeight:s});const c=this.resource.getFont(o,n,s);c&&c.srcUrl&&this.addAsset({pathname:i,filename:l+"."+$t.fromLastIndexOf(c.srcUrl,".").toLowerCase(),uri:c.srcUrl})}let s=qt.replaceTab(qt.applyTemplate("font-family",Vt,r),o.insertSpaces);o.targetAPI<26&&(s=s.replace(/\s+android:/g," app:")),e.push(s,i,`${t}.xml`)}this.checkFileAssets(e,t)}return e}resourceColorToXml(t={}){const e=[];if(jt.colors.size){const o=[{color:[]}];for(const[t,e]of Array.from(jt.colors.entries()).sort())o[0].color.push({name:e,innerText:t});e.push(qt.replaceTab(qt.applyTemplate("resources",Wt,o),this.userSettings.insertSpaces),this.directory.string,"colors.xml"),this.checkFileAssets(e,t)}return e}resourceStyleToXml(t={}){const e=this.userSettings,o=[];if(jt.styles.size){const t=[{style:[]}];for(const e of Array.from(jt.styles.values()).sort((t,e)=>(""+t.name).toLowerCase()>=(""+e.name).toLowerCase()?1:-1))if(Array.isArray(e.items)){const o=[];for(const t of e.items.sort((t,e)=>t.key>=e.key?1:-1))o.push({name:t.key,innerText:t.value});t[0].style.push({name:e.name,parent:e.parent,item:o})}o.push(qt.replaceTab(qt.applyTemplate("resources",Ut,t),e.insertSpaces),this.directory.string,"styles.xml")}if(jt.themes.size){const t={};for(const[n,i]of jt.themes.entries()){const a=[{style:[]}];for(const[o,r]of i.entries()){const i=[];for(const t in r.items)i.push({name:t,innerText:r.items[t]});t[n]&&o===e.manifestThemeName&&!i.length||a[0].style.push({name:o,parent:r.parent,item:i}),o===e.manifestThemeName&&(t[n]=!0)}const r=Yt.exec(n);r&&o.push(qt.replaceTab(oe(qt.applyTemplate("resources",Ut,a),e.resolutionDPI,e.convertPixels),e.insertSpaces),r[1],r[2])}}return this.checkFileAssets(o,t),o}resourceDimenToXml(t={}){const e=[];if(jt.dimens.size){const o=[{dimen:[]}],n=this.userSettings,i=n.resolutionDPI,a=n.convertPixels;for(const[t,e]of Array.from(jt.dimens.entries()).sort())o[0].dimen.push({name:t,innerText:a?C(e,i,!1):e});e.push(qt.replaceTab(qt.applyTemplate("resources",Ht,o)),this.directory.string,"dimens.xml"),this.checkFileAssets(e,t)}return e}resourceDrawableToXml(t={}){const e=[];if(jt.drawables.size){const o=this.userSettings,n=this.directory.image;for(const[t,i]of jt.drawables.entries())e.push(qt.replaceTab(ee(i,o.resolutionDPI,o.convertPixels),o.insertSpaces),n,`${t}.xml`);this.checkFileAssets(e,t)}return e}resourceDrawableImageToXml({copyTo:t,archiveTo:e,callback:o}={}){const n=[];if(jt.images.size){const i=this.directory.image;for(const[t,e]of jt.images.entries())if(Object.keys(e).length>1)for(const o in e)n.push(e[o],`${i}-${o}`,`${t}.${$t.fromLastIndexOf(e[o],".")}`);else e.mdpi&&n.push(e.mdpi,i,`${t}.${$t.fromLastIndexOf(e.mdpi,".")}`);if(t||e){const i=Qt(n);t&&this.copying(t,i,o),e&&this.archiving(e,i)}}return n}resourceAnimToXml(t={}){const e=[];if(jt.animators.size){const o=this.userSettings;for(const[t,n]of jt.animators.entries())e.push(qt.replaceTab(n,o.insertSpaces),"res/anim",`${t}.xml`);this.checkFileAssets(e,t)}return e}layoutAllToXml(t={}){const{assets:e,copyTo:o,archiveTo:n,callback:i}=t,a={};if(e){const t=[],r=e.length;for(let o=0;o<r;o++){const i=e[o];a[i.filename]=[i.content],n&&t.push(te(i.pathname,0===o?this.userSettings.outputMainFileName:`${i.filename}.xml`,i.content))}o&&this.copying(o,t,i),n&&this.archiving(n,t)}return a}getAssetsAll(t){const e=[],o=t.length;for(let n=0;n<o;n++)e.push(te(t[n].pathname,0===n?this.userSettings.outputMainFileName:`${t[n].filename}.xml`,t[n].content));return e.concat(Jt(this.resourceStringToXml()),Jt(this.resourceStringArrayToXml()),Jt(this.resourceFontToXml()),Jt(this.resourceColorToXml()),Jt(this.resourceDimenToXml()),Jt(this.resourceStyleToXml()),Jt(this.resourceDrawableToXml()),Qt(this.resourceDrawableImageToXml()),Jt(this.resourceAnimToXml()))}checkFileAssets(t,{copyTo:e,archiveTo:o,callback:n}={}){if(e||o){const i=Jt(t);e&&this.copying(e,i,n),o&&this.archiving(o,i)}}get userSettings(){return this.resource.userSettings}}const ae=squared.base.lib.enumeration;class re extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=!0}afterBaseLayout(){for(const t of this.application.processing.cache)if(t.visible&&t.hasProcedure(ae.NODE_PROCEDURE.ACCESSIBILITY))switch(t.controlName){case i.EDIT:t.companion||[t.previousSibling,t.nextSibling].some(e=>{if(e&&e.visible&&e.pageFlow){const o=t.element,n=e.element,i="LABEL"===e.documentParent.tagName?e.documentParent:void 0;if(o.id&&o.id===n.htmlFor)return e.android("labelFor",t.documentId),!0;if(i&&e.textElement)return i.android("labelFor",t.documentId),!0}return!1});case i.SELECT:case i.CHECKBOX:case i.RADIO:case i.BUTTON:{const e=t.element;e.readOnly&&t.android("focusable","false"),e.disabled&&t.android("enabled","false");break}}}}var se=squared.base.LayoutUI;const{css:le,math:ce,util:de}=squared.lib,{constant:he,enumeration:ue}=squared.base.lib,pe=/(start|end|center|baseline)/,me=/(start|end|center|baseline|left|right)/;function ge(t,e,o){const n="column"===e,i=t[e],a=i.unit.length;let r=0;if(a){const e=n?"width":"height";for(let o=0;o<a;o++){const n=i.unit[o];if(n.endsWith("px"))r+=parseFloat(n);else{let n=0;de.captureMap(t.rowData[o],t=>t&&t.length>0,t=>n=Math.min(n,...de.objectMap(t,t=>t.bounds[e]))),r+=n}}}else if((r=ce.maxArray(i.unitTotal))<=0)return 0;return r+=i.gap*(i.length-1),n?o.actualWidth-(r+=o.contentBox?o.borderLeftWidth+o.borderRightWidth:o.contentBoxWidth):o.actualHeight-(r+=o.contentBox?o.borderTopWidth+o.borderBottomWidth:o.contentBoxHeight)}function fe(t,e,o,n){const i=t[n];if(o.startsWith("space")){const r=ge(t,n,e);if(r>0){let e,s,l;"column"===n?(e=16,s=4,l="width"):(e=2,s=8,l="height");const c=function(t,e){const o=[];if("column"===e)for(let e=0;e<t.column.length;e++){o[e]=[];for(let n=0;n<t.row.length;n++)o[e].push(t.rowData[n][e])}else for(let e=0;e<t.row.length;e++)o.push(t.rowData[e]);return o}(t,n),d=t[n].length,h=new Set;function a(t){const e=Math.floor(r/t);return[e,r-e*t]}switch(o){case"space-around":{const[t,o]=a(2*d);for(let n=0;n<d;n++)for(const i of new Set(de.flatMultiArray(c[n]))){const a=(n>0&&n<=o?1:0)+t;h.has(i)?i.cssPX(l,r/d):(i.modifyBox(e,a),i.modifyBox(s,t),h.add(i))}i.normal=!1;break}case"space-between":if(d>1){const[t,e]=a(d-1);for(let o=0;o<d;o++)for(const i of new Set(de.flatMultiArray(c[o]))){const a=t+(o<e?1:0);o<d-1?h.has(i)?i.cssPX(l,a):(i.modifyBox(s,a),h.add(i)):de.convertInt(i.android("column"===n?"layout_columnSpan":"layout_rowSpan"))>1&&(i.cssPX(l,a),h.has(i)&&i.modifyBox(s,-a))}}i.normal=!1;break;case"space-evenly":{const[t,o]=a(d+1);for(let n=0;n<d;n++)for(const i of new Set(de.flatMultiArray(c[n]))){const a=t+(n<o?1:0);h.has(i)?i.cssPX(l,a):(0===n&&i.modifyBox(e,t),i.modifyBox(s,a),h.add(i))}i.normal=!1;break}}}}else{const a=ge(t,n,e);if(a>0){const t="column"===n?256:32;switch(o){case"center":e.modifyBox(t,Math.floor(a/2)),i.normal=!1;break;case"right":if("row"===n)break;case"end":case"flex-end":e.modifyBox(t,a),i.normal=!1}}}}class Te extends squared.base.extensions.CssGrid{processNode(t,o){super.processNode(t,o);const n=t.data(he.EXT_NAME.CSS_GRID,he.STRING_BASE.EXT_DATA);if(n){const i=new se(o,t,e.GRID,4,t.children);return i.rowCount=n.row.length,i.columnCount=n.column.length,{output:this.application.renderNode(i),complete:!0}}}processChild(t,o){const n=o.data(he.EXT_NAME.CSS_GRID,he.STRING_BASE.EXT_DATA),a=t.data(he.EXT_NAME.CSS_GRID,"cellData");let r,s;if(n&&a){function c(e,i,r){const s=n[i],l=a[`${i}Start`],c=a[`${i}Span`],d="width"===r;let h=0,u=0,p=!1,m=0,g=0;s.unit.length&&s.unit.every(t=>"auto"===t)&&(d?s.unit=Array(s.unit.length).fill("1fr"):s.unit.length=0);for(let n=0,i=0;n<c;n++){const a=s.unitMin[l+n];""!==a&&(m+=o.parseUnit(a));let f=s.unit[l+n];if(!f){if(!s.auto[i])continue;f=s.auto[i],s.auto[i+1]&&i++}if("auto"===f||"max-content"===f){if(c<s.unit.length&&(!o.hasPX(r)||s.unit.some(t=>le.isLength(t))||"max-content"===f)){h=t.bounds[r],u=0,g=0;break}if(d){h=0,u=0,g=.01;break}}else if("min-content"===f){if(!e.hasPX(r)){d?e.setLayoutWidth("wrap_content",!1):e.setLayoutHeight("wrap_content",!1);break}}else if(le.isPercent(f))g+=parseFloat(f)/100,u=h,h=0;else if(f.endsWith("fr"))d||t.hasHeight?(g+=parseFloat(f),u=h):(g=0,u=t.bounds[r]),h=0;else if(f.endsWith("px")){const t=parseFloat(f);0===u?h+=t:u+=t}"0px"===a&&t.textElement&&(p=!0)}if(c>1){const t=(c-1)*s.gap;h>0&&0===u?h+=t:u>0&&(u+=t),m>0&&(m+=t)}m>0&&(s.autoFill&&0===h&&1===n["column"===i?"row":"column"].length?(h=Math.max(t.actualWidth,m),g=0):u=m);const f=de.capitalize(r);return e.android(`layout_${i}`,""+l),c>1&&e.android(`layout_${i}Span`,""+c),u>0&&!e.hasPX(`min${f}`)&&e.css(`min${f}`,le.formatPX(u),!0),g>0?e.hasPX(r)||(e.android(`layout_${r}`,"0px"),e.android(`layout_${i}Weight`,ce.truncate(g,t.localSettings.floatPrecision)),e.mergeGravity("layout_gravity","column"===i?"fill_horizontal":"fill_vertical")):h>0&&(e.contentBox&&(h-=e[`contentBox${f}`]),p&&!e.hasPX(`max${f}`)?(e.css(`max${f}`,le.formatPX(h),!0),e.mergeGravity("layout_gravity","column"===i?"fill_horizontal":"fill_vertical")):e.hasPX(r)||e.css(r,le.formatPX(h),!0)),[l,c]}const{alignSelf:d,justifySelf:h}=t.flexbox;if(pe.test(d)||me.test(h)){(r=this.application.createNode()).containerName=t.containerName,r.setControlType(i.FRAME,e.FRAME),r.inherit(t,"base","initial"),r.resetBox(510),r.exclude(ue.NODE_RESOURCE.BOX_STYLE|ue.NODE_RESOURCE.ASSET,ue.NODE_PROCEDURE.CUSTOMIZATION),o.appendTry(t,r),r.render(o),t.transferBox(30,r),c(r,"column","width"),c(r,"row","height");let n=!1;h.endsWith("start")||h.endsWith("left")||h.endsWith("baseline")?(t.mergeGravity("layout_gravity","left"),n=!0):h.endsWith("end")||h.endsWith("right")?(t.mergeGravity("layout_gravity","right"),n=!0):h.endsWith("center")&&(t.mergeGravity("layout_gravity",l.CENTER_HORIZONTAL),n=!0),t.hasWidth||t.setLayoutWidth(n?"wrap_content":"match_parent",!1),d.endsWith("start")||d.endsWith("baseline")?t.mergeGravity("layout_gravity","top"):d.endsWith("end")?t.mergeGravity("layout_gravity","bottom"):d.endsWith("center")?t.mergeGravity("layout_gravity",l.CENTER_VERTICAL):t.hasHeight||t.setLayoutHeight("match_parent",!1),r.innerWrapped=t,t.outerWrapper=r,t.parent=r,s=this.application.renderNode(new se(o,r,e.FRAME,4096,r.children))}const u=r||t;c(u,"column","width"),u.hasPX("width")||u.mergeGravity("layout_gravity","fill_horizontal");const[p,m]=c(u,"row","height");"normal"===n.alignContent&&!o.hasPX("height")&&(!n.row.unit[p]||"auto"===n.row.unit[p])&&t.initial.bounds&&t.bounds.height>t.initial.bounds.height&&function(){if(1===m&&!0===n.rowSpanMultiple[p]){const e=de.flatMultiArray(n.rowData[p]),o=n.rowData.length;for(const n of e)if(n!==t){const t=n.data(he.EXT_NAME.CSS_GRID,"cellData");if(t&&(0===p||t.rowSpan<o)&&t.rowSpan>m)return!0}}return!1}()?u.css("minHeight",le.formatPX(t.actualHeight),!0):u.hasPX("height")||1===n.row.length&&"space-between"===n.alignContent||(pe.test(n.alignItems)||u.mergeGravity("layout_gravity","fill_vertical"),"normal"===n.alignContent&&o.hasHeight&&0===n.rowSpanMultiple.length&&u.mergeGravity("layout_rowWeight","1"))}return{parent:r,renderAs:r,outputAs:s}}postBaseLayout(t){const e=t.data(he.EXT_NAME.CSS_GRID,he.STRING_BASE.EXT_DATA);if(e){if(t.hasWidth&&"normal"!==e.justifyContent&&fe(e,t,e.justifyContent,"column"),t.hasHeight&&"normal"!==e.alignContent&&(fe(e,t,e.alignContent,"row"),e.rowWeight.length>1)){const t=this.controller.localSettings.precision.standardFloat;for(let o=0;o<e.row.length;o++)if(e.rowWeight[o]>0){const n=e.rowData[o],i=n.length;for(let a=0;a<i;a++){const i=n[a];if(i)for(let n of i)n.outerWrapper&&(n=n.outerWrapper),n.android("layout_rowWeight",""+ce.truncate(e.rowWeight[o],t)),n.setLayoutHeight("0px")}}}if(e.column.normal&&!e.column.unit.includes("auto")){const o=e.column.gap*(e.column.length-1);o>0&&(t.renderParent&&!t.renderParent.hasAlign(4)&&(t.cssPX("minWidth",o),t.cssPX("width",o,!1,!0)),!t.hasPX("width")&&t.hasPX("maxWidth")&&t.css("width",le.formatPX(t.actualWidth+o),!0))}}}postOptimize(t){const e=t.data(he.EXT_NAME.CSS_GRID,he.STRING_BASE.EXT_DATA);if(e){const o=this.controller,n=Array.from(e.children)[e.children.size-1];if(e.column.unit.length&&e.column.unit.every(t=>le.isPercent(t))){const i=e.column.unit.reduce((t,e)=>t+parseFloat(e),0)+e.column.gap*e.column.length*100/t.actualWidth;if(i<100){t.android("columnCount",""+(e.column.length+1));for(let a=0;a<e.row.length;a++)o.addAfterOutsideTemplate(n.id,o.renderSpace(le.formatPercent((100-i)/100),"wrap_content",0,0,O(void 0,{[t.localizeString(l.MARGIN_LEFT)]:`@dimen/${E.insertStoredAsset("dimens",`${t.controlId}_cssgrid_column_gap_`,le.formatPX(e.column.gap))}`,layout_row:""+a,layout_column:""+e.column.length})),!1)}}const i=e.emptyRows,a=i.length;for(let r=0;r<a;r++){const a=i[r];if(a){const i=a.length;for(let s=0;s<i;s++)if(1===a[s]){o.addAfterOutsideTemplate(n.id,o.renderSpace("wrap_content",`@dimen/${E.insertStoredAsset("dimens",`${t.controlId}_cssgrid_row_gap_`,le.formatPX(e.row.gap))}`,0,0,O(void 0,{layout_row:""+r,layout_column:""+s})),!1);break}}}}}}class ye extends squared.base.extensions.External{constructor(){super(...arguments),this.eventOnly=!0}}var be=squared.base.LayoutUI;const{math:Ae,util:Ee}=squared.lib,{constant:Se}=squared.base.lib,Re=squared.base.NodeUI,xe={leftTop:["left","top"],rightBottom:["right","bottom"],rightLeftBottomTop:[Se.STRING_BASE.RIGHT_LEFT,Se.STRING_BASE.BOTTOM_TOP],leftRightTopBottom:[Se.STRING_BASE.LEFT_RIGHT,Se.STRING_BASE.TOP_BOTTOM],widthHeight:["Width","Height"],horizontalVertical:[l.HORIZONTAL,l.VERTICAL]};function Ie(t,e,o){const n="width"===o,i=`has${Ee.capitalize(o)}`,a=e.reduce((t,e)=>t+e.flexbox.grow,0),r=e=>e.flexbox.basis=`${e.bounds[o]/t.box[o]*100}%`;let s=t[i]||t.blockStatic&&Ee.withinRange(t.parseUnit(t.css(n?"maxWidth":"maxHeight")),t.box.width),l=0;if(s)for(const t of e){const e=t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin;if(n){if(e.horizontal){s=!1;break}}else if(e.vertical){s=!1;break}}if(e.length>1&&(n||s)){const t=[],n=[];let a,c=0,d=0,h=NaN;for(const r of e){const e=r.bounds[o];let u=!1;if(r.flexbox.grow>0||1!==r.flexbox.shrink){const n=r.parseUnit("auto"===r.flexbox.basis?r.css(o):r.flexbox.basis,o);if(n>0){const{shrink:o,grow:i}=r.flexbox;let s=!1;e<n?(isNaN(h)||o<h)&&(h=o,s=!0,l=1):(isNaN(h)||i>h)&&(h=i,s=!0,l=2),s&&(a=r,c=n,d=e),t.push({item:r,basis:n,dimension:e,shrink:o,grow:i});continue}r.flexbox.grow>0&&e>r[o]&&(u=!0)}"auto"===r.flexbox.alignSelf&&(s&&!r[i]||u)&&n.push(r)}if(0!==l){if(t.length>1)for(const e of t){const t=e.item;t.flexbox.grow=t===a||e.basis===c&&(1===l&&h===e.shrink||2===l&&h===e.grow)?1:e.dimension/e.basis/(d/c)*e.basis/c}if(n.length)for(const t of n)r(t)}}if(n&&0===l)for(const o of e)o.cascadeSome(e=>e.multiline&&0===e.ascend(t=>t[i],t).length)&&r(o);return a}const _e=t=>t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin;class we extends squared.base.extensions.Flexbox{processNode(t,o){super.processNode(t,o);const n=t.data(Se.EXT_NAME.FLEXBOX,Se.STRING_BASE.EXT_DATA);if(n.directionRow&&1===n.rowCount||n.directionColumn&&1===n.columnCount)return t.containerType=e.CONSTRAINT,t.addAlign(4),n.wrap=!1,{include:!0};{const i=new be(o,t,0,4);return i.itemCount=t.length,i.rowCount=n.rowCount,i.columnCount=n.columnCount,n.directionRow&&t.hasHeight||n.directionColumn&&t.hasWidth||t.some(t=>!t.pageFlow)?i.containerType=e.CONSTRAINT:i.setType(e.LINEAR,n.directionColumn?8:16),{output:this.application.renderNode(i),complete:!0}}}processChild(t,o){if(t.hasAlign(128))return{output:this.application.renderNode(new be(o,t,e.CONSTRAINT,4,t.children)),complete:!0};if(t.autoMargin.horizontal||t.autoMargin.vertical&&t.hasHeight){const n=o.data(Se.EXT_NAME.FLEXBOX,Se.STRING_BASE.EXT_DATA);if(n){const i=n.children.findIndex(e=>e===t);if(-1!==i){const a=this.controller.createNodeWrapper(t,o);return a.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},!0),a.saveAsInitial(!0),a.flexbox=Object.assign({},t.flexbox),n.children[i]=a,t.autoMargin.horizontal&&!t.hasWidth&&t.setLayoutWidth("wrap_content"),{parent:a,renderAs:a,outputAs:this.application.renderNode(new be(o,a,e.FRAME,4096,a.children))}}}}}postBaseLayout(t){const e=t.data(Se.EXT_NAME.FLEXBOX,Se.STRING_BASE.EXT_DATA);if(e){const o=[],n=[],i=[];if(e.wrap){let a;t.each(t=>{if(t.hasAlign(128)){const r=t.renderFilter(t=>t.pageFlow);if(r.length){if(e.directionRow)t.setLayoutWidth("match_parent"),o.push(r);else{if(t.setLayoutHeight("match_parent"),a){const o=a.length;let n=a[0];for(let t=1;t<o;t++)a[t].linear.right>n.linear.right&&(n=a[t]);if(e.wrapReverse){const e=t.linear.left-n.actualRect("right");e>0&&t.modifyBox(16,e)}t.constraint.horizontal=!0}n.push(r),a=r}i.push(t)}}}),t.layoutLinear?e.directionColumn&&e.wrapReverse&&t.mergeGravity("gravity","right"):i.length&&(e.directionRow?n.push(i):o.push(i))}else e.directionRow?(e.directionReverse&&e.children.reverse(),o[0]=e.children):(e.directionReverse&&e.children.reverse(),n[0]=e.children);[o,n].forEach((o,n)=>{const a=0===n,r=a?1:0,s=xe.horizontalVertical[n],c=xe.horizontalVertical[r],d=xe.widthHeight[n],h=xe.widthHeight[r],u=xe.leftTop[n],p=xe.leftTop[r],m=xe.rightBottom[n],g=xe.rightBottom[r],f=xe.leftRightTopBottom[n],T=xe.rightLeftBottomTop[n],y=d.toLowerCase(),b=h.toLowerCase(),A=t[`has${h}`],E=t[`has${d}`],S=`layout_constraint${Ee.capitalize(s)}_weight`;function R(t,e){t.app(S,Ae.truncate(e,t.localSettings.floatPrecision)),t.android(`layout_${d.toLowerCase()}`,"0px")}const x=o.length;for(let n=0;n<x;n++){const r=o[n],d=r.length,h=r[0],x=r[d-1],I=r===i,_=!I&&r.every(t=>0===t.flexbox.grow),w=_&&("space-between"===e.justifyContent||"space-around"===e.justifyContent&&d>1),v=[];let N=0,P=0,C=!0,L=null;if(I)if(E){let t="spread",o=0;switch(e.alignContent){case"left":case"right":case"flex-end":t="packed",o=1,C=!1;break;case"baseline":case"start":case"end":case"flex-start":t="packed",C=!1}h.anchorStyle(s,t,o)}else h.anchorStyle(s);else if(P=1-Ie(t,r,y),d>1){const t=new Set(Ee.objectMap(r,t=>t.initial.bounds?t.initial.bounds[b]:0));t.size>1&&(N=Ae.maxArray(Array.from(t)))}for(let t=0;t<d;t++){const i=r[t],h=r[t-1],u=r[t+1];if(u&&i.anchor(T,(u.outerWrapper||u).documentId),h&&i.anchor(f,(h.outerWrapper||h).documentId),I)C&&d>1&&E&&R(i,1),i.anchor(p,"parent");else{const m=_e(i),E=i.innerWrapped;if(a){if(m.horizontal)if(E){let t;t=m.leftRight?l.CENTER_HORIZONTAL:i.localizeString(m.left?"right":"left"),E.mergeGravity("layout_gravity",t),P>0&&(i.flexbox.basis="0%",v.push(i))}else m.leftRight||(m.left?h&&i.anchorDelete(f):u&&i.anchorDelete(T))}else if(m.vertical)if(E){let t;t=m.topBottom?l.CENTER_VERTICAL:i.localizeString(m.top?"bottom":"top"),E.mergeGravity("layout_gravity",t),P>0&&(i.flexbox.basis="0%",v.push(i))}else m.topBottom||(m.top?h&&i.anchorDelete(f):u&&i.anchorDelete(T));switch(i.flexbox.alignSelf){case"start":case"flex-start":i.anchor(p,"parent");break;case"end":case"flex-end":i.anchor(g,"parent");break;case"baseline":a&&(null===L&&(L=Re.baseline(r)),L&&i!==L&&i.anchor("baseline",L.documentId));break;case"center":i.anchorParent(c,"packed",.5),0!==i[b]||a||A||!i.cascadeSome(t=>t.multiline)||i.android(`layout_${b}`,"0px");break;default:const h=i.innerWrapped,u=e.wrapReverse;switch(e.alignContent){case"center":o.length%2==1&&n===Math.floor(o.length/2)?i.anchorParent(c):n<o.length/2?i.anchor(g,"parent"):n>=o.length/2&&i.anchor(p,"parent");break;case"space-evenly":case"space-around":i.layoutFrame&&h?h.mergeGravity("layout_gravity",a?l.CENTER_VERTICAL:l.CENTER_HORIZONTAL):i.anchorParent(c);break;case"space-between":w&&2===d&&i.anchorDelete(0===t?T:f),0===n?i.layoutFrame&&h?h.mergeGravity("layout_gravity",u?g:p):i.anchor(u?g:p,"parent"):o.length>2&&n<o.length-1?i.layoutFrame&&h?h.mergeGravity("layout_gravity",a?l.CENTER_VERTICAL:l.CENTER_HORIZONTAL):i.anchorParent(c):i.layoutFrame&&h?h.mergeGravity("layout_gravity",u?p:g):i.anchor(u?p:g,"parent");break;default:if(i.anchorParent(c),void 0!==i.innerWrapped&&i.innerWrapped.autoMargin[c]||i.anchorStyle(c,"packed",u?1:0),0===i[b]){const t=i.initial.bounds&&i.initial.bounds[b],o=t<N,n=`layout_${b}`;if(o){if(A||0===N||o){if(0===N&&(!A&&d>1||e.wrap))break;i.android(n,a&&!A?o?"0px":"match_parent":"0px"),E&&!E.autoMargin[s]&&E.android(n,"match_parent")}}else A&&(0===N&&i.bounds[b]>t||i.flexElement&&(a&&"column"===i.css("flexDirection")||!a&&"row"===i.css("flexDirection")))&&i.android(n,"0px")}}}Dt.setFlexDimension(i,y)}i.anchored=!0,i.positioned=!0}if(P>0)for(const t of v){const e=_e(t);let o=1;a?e.leftRight&&(o=2):e.topBottom&&(o=2),R(t,Math.max(t.flexbox.grow,P*o/v.length))}if(h.anchor(u,"parent"),x.anchor(m,"parent"),!I&&(a||e.directionColumn)){let i=!1;if(_)switch(e.justifyContent){case"normal":e.directionColumn&&h.anchorStyle(s,"packed",e.directionReverse?1:0);break;case"left":if(!a)break;case"start":case"flex-start":h.anchorStyle(s,"packed",e.directionReverse?1:0);break;case"center":d>1&&h.anchorStyle(s,"packed",.5),i=!0;break;case"right":if(!a)break;case"end":case"flex-end":h.anchorStyle(s,"packed",1);break;case"space-between":1===d&&x.anchorDelete(m);break;case"space-evenly":if(d>1){h.anchorStyle(s,"spread");const t=Ee.capitalize(s);for(const e of r)e.app(`layout_constraint${t}_weight`,""+(e.flexbox.grow||1))}else i=!0;break;case"space-around":if(d>1){const e=this.controller;h.constraint[s]=!1,x.constraint[s]=!1,e.addGuideline(h,t,s,!0,!1),e.addGuideline(x,t,s,!0,!0)}else i=!0}w||!e.wrap&&o[n].some(t=>""!==t.app(S))&&!Ee.sameArray(o[n],t=>t.app(S))?h.anchorStyle(s,"spread_inside",0,!1):i||h.anchorStyle(s,"packed",e.directionReverse?1:0,!1)}}})}}}var ve=squared.base.LayoutUI;const{css:Ne,util:Pe}=squared.lib,{constant:Ce}=squared.base.lib;class Le extends squared.base.extensions.Grid{processNode(t,o){super.processNode(t,o);const n=t.data(Ce.EXT_NAME.GRID,"columnCount");if(n){const i=new ve(o,t,e.GRID,4,t.children);return i.columnCount=n,{output:this.application.renderNode(i),complete:!0}}}processChild(t,e){const o=t.data(Ce.EXT_NAME.GRID,"cellData");if(o){const n=o.siblings&&o.siblings.slice(0);let i;if(n){const a=this.controller;if(n.unshift(t),t=(i=a.processLayoutHorizontal(new ve(e,a.createNodeGroup(t,n,e,!0),0,o.block?64:0,n))).node,o.block)t.css("display","block");else for(const t of n)t.percentWidth&&t.css("width",Ne.formatPX(t.bounds.width),!0);!function(t,e){const o=squared.base.extensions.Grid.createDataCellAttribute();for(const t of e){const e=t.data(Ce.EXT_NAME.GRID,"cellData");e&&(e.cellStart&&(o.cellStart=!0),e.cellEnd&&(o.cellEnd=!0),e.rowEnd&&(o.rowEnd=!0),e.rowStart&&(o.rowStart=!0),t.data(Ce.EXT_NAME.GRID,"cellData",null))}t.data(Ce.EXT_NAME.GRID,"cellData",o)}(t,n)}if(o.rowSpan>1&&t.android("layout_rowSpan",""+o.rowSpan),o.columnSpan>1&&t.android("layout_columnSpan",""+o.columnSpan),"table-cell"===t.display&&t.mergeGravity("layout_gravity","fill"),i)return{parent:i.node,renderAs:i.node,outputAs:this.application.renderNode(i),complete:!0}}}postConstraints(t){if("collapse"!==t.css("borderCollapse")){const e=t.data(Ce.EXT_NAME.GRID,"columnCount");if(e){let o=0,n=0,i=0,a=0;t.renderEach(r=>{const s=r.data(Ce.EXT_NAME.GRID,"cellData");if(s){const l=r.actualParent;if(l&&!l.visible){const c=1!==l.getBox(2)[0]?l.marginTop:0,d=1!==l.getBox(8)[0]?l.marginBottom:0;if(s.cellStart&&(o=c+l.paddingTop),s.rowStart&&(a=Math.max(l.marginLeft+l.paddingLeft,a)),s.rowEnd){const o=d+l.paddingBottom+(s.cellEnd?0:c+l.paddingTop);if(o>0)if(s.cellEnd)i=o;else{const n=this.controller;n.addAfterOutsideTemplate(r.id,n.renderSpace("match_parent",`@dimen/${E.insertStoredAsset("dimens",`${t.controlId}_grid_space`,Ne.formatPX(o))}`,e),!1)}n=Math.max(l.marginRight+l.paddingRight,n)}}}}),t.modifyBox(32,o),t.modifyBox(64,n),t.modifyBox(128,i),t.modifyBox(256,a)}}if(!t.hasWidth){let e=-1/0;Pe.captureMap(t.renderChildren,t=>t.inlineFlow||!t.blockStatic,t=>e=Math.max(e,t.linear.right)),Pe.withinRange(t.box.right,e)&&t.setLayoutWidth("wrap_content")}}}var Oe=squared.base.LayoutUI;const{css:ke,util:Me}=squared.lib,{constant:Xe}=squared.base.lib,Be=squared.base.NodeUI,De=24,Ge=8;class We extends squared.base.extensions.List{processNode(t,o){const n=new Oe(o,t,0,0,t.children);if((!n.unknownAligned||n.singleRowAligned)&&(super.processNode(t,o),n.linearY?(n.rowCount=t.length,n.columnCount=t.some(t=>"inside"===t.css("listStylePosition"))?3:2,n.setType(e.GRID,4)):(n.linearX||n.singleRowAligned)&&(n.rowCount=1,n.columnCount=n.length,n.setType(e.LINEAR,8)),0!==n.containerType))return{output:this.application.renderNode(n),complete:!0}}processChild(t,o){const n=t.data(Xe.EXT_NAME.LIST,Xe.STRING_BASE.EXT_DATA);if(n){const a=this.application,r=this.controller;let s=t.marginLeft,l=0,c=!1,d=NaN;t.modifyBox(16),o.is(e.GRID)?(l=Me.convertInt(o.android("columnCount")),c=!0):o.item(0)===t&&(c=!0),c&&(s+=o.paddingLeft>0?o.paddingLeft:o.marginLeft);const h=0===t.length?r.createNodeGroup(t,[t],o):t;let u=n.ordinal?void 0:t.find(t=>"left"===t.float&&t.marginLeft<0&&Math.abs(t.marginLeft)<=t.documentParent.marginLeft);if(u){const n=new Oe(o,u);u.inlineText||0===u.length?n.containerType=e.TEXT:(n.singleRowAligned?n.setType(e.RELATIVE,8):n.setType(e.CONSTRAINT,2),n.retain(u.children)),u.parent=o,u.render(o),3===l&&t.android("layout_columnSpan","2"),(s+=u.marginLeft)>0&&!u.hasWidth&&u.android("minWidth",ke.formatPX(s)),u.modifyBox(16),a.addLayoutTemplate(o,u,a.renderNode(n))}else{const p="inside"===t.css("listStylePosition");let m,g="right",f=0,T=0,y=0,b=0;if(""!==n.imageSrc&&(n.imagePosition&&(({top:y,left:b}=ke.getBackgroundPosition(n.imagePosition,t.actualDimension,this.resource.getImage(n.imageSrc),t.fontSize)),g="left",t.marginLeft<0?(d=t.marginLeft,d+=o.paddingLeft>0?o.paddingLeft:o.marginLeft):(c=!1,T=t.marginLeft),s=0),m=this.resource.addImageSrc(n.imageSrc)),"left"===g)s+=t.paddingLeft-b,t.modifyBox(256);else{const t=n.ordinal?n.ordinal.length:1;f=Math.max(s/(m?6:4*t),4)}const A=O();(u=a.createNode()).containerName=`${t.containerName}_ORDINAL`,p?(r.addBeforeOutsideTemplate(u.id,r.renderNodeStatic(i.SPACE,O(void 0,{minWidth:`@dimen/${E.insertStoredAsset("dimens",`${t.tagName.toLowerCase()}_space_`,ke.formatPX(s))}`})),!1),s=De):3===l&&h.android("layout_columnSpan","2"),"DT"!==t.tagName||m?(m?(u.setControlType(i.IMAGE,e.IMAGE),Object.assign(A.android,{src:`@drawable/${m}`,scaleType:p||"right"!==g?"fitStart":"fitEnd",baselineAlignBottom:c?"true":""})):n.ordinal?(u.textContent=n.ordinal,u.inlineText=!0,u.setControlType(i.TEXT,e.TEXT),"DFN"===t.tagName&&(s+=Ge,u.modifyBox(64,Ge))):(u.setControlType(i.SPACE,e.SPACE),u.renderExclude=!1,t.modifyBox(256)),u.depth=t.depth,u.inherit(t,"textStyle"),n.ordinal&&!n.ordinal.endsWith(".")&&(u.fontSize*=.75),u.cssApply({minWidth:s>0?ke.formatPX(s):"",marginTop:0!==t.marginTop?ke.formatPX(t.marginTop):"",marginLeft:T>0?ke.formatPX(T):"",paddingTop:t.paddingTop>0&&0===t.getBox(32)[0]?ke.formatPX(t.paddingTop):"",paddingRight:f>0&&"right"===g?ke.formatPX(f):"",paddingLeft:f>0&&"left"===g&&(!m||n.imagePosition)?ke.formatPX(f):"",lineHeight:t.lineHeight>0?ke.formatPX(t.lineHeight):""}),u.apply(A),u.cssTry("display","block")&&(u.setBounds(),u.cssFinally("display")),u.saveAsInitial(),p||u.mergeGravity("gravity",t.localizeString(g)),0!==y&&u.modifyBox(2,y),0!==b&&u.modifyBox(16,b),u.render(o),a.addLayoutTemplate(o,u,{type:1,node:u,controlName:u.controlName}),t.companion=u):h.android("layout_columnSpan",""+l)}if(u.positioned=!0,c&&((isNaN(d)||d<=0)&&o.modifyBox(o.paddingLeft>0?256:16),d<0&&o.modifyBox(16,d)),l>0&&(h.setLayoutWidth("0px"),h.android("layout_columnWeight","1"),h!==t?t.baseline&&h.android("baselineAlignedChildIndex","0"):t.filter(t=>t.visible).length>1&&Be.linearData(t.children).linearY&&t.addAlign(1024)),h!==t)return 0!==t.marginTop&&(h.modifyBox(2,t.marginTop),t.modifyBox(2),t.outerWrapper=h,h.innerWrapped=t),{parent:h,renderAs:h,outputAs:a.renderNode(new Oe(o,h,e.LINEAR,18,h.children))}}}}const He=squared.lib.util;class Ve extends squared.base.extensions.Relative{postOptimize(t){super.postOptimize(t),t.imageOrSvgElement&&t.alignSibling("baseline")&&0!==He.convertFloat(t.verticalAlign)&&"invisible"===t.android("visibility")&&t.android("baselineAlignBottom","true")}}var Fe=squared.base.LayoutUI;const ze=squared.lib.css,{constant:Ue,enumeration:$e}=squared.base.lib;class qe extends squared.base.extensions.Sprite{processNode(t,o){const n=t.data(Ue.EXT_NAME.SPRITE,Ue.STRING_BASE.EXT_DATA);if(n){const a=this.resource.addImageSrc(t.backgroundImage);if(""!==a){const r=this.application.createNode();return r.inherit(t,"base","initial","styleMap"),r.setControlType(i.FRAME,e.FRAME),r.exclude($e.NODE_RESOURCE.IMAGE_SOURCE,$e.NODE_PROCEDURE.CUSTOMIZATION),o.appendTry(t,r),t.setControlType(i.IMAGE,e.IMAGE),t.exclude($e.NODE_RESOURCE.FONT_STYLE|$e.NODE_RESOURCE.BOX_STYLE),t.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:n.image.width>0?ze.formatPX(n.image.width):"auto",height:n.image.height>0?ze.formatPX(n.image.height):"auto",marginTop:ze.formatPX(n.position.top),marginRight:"0px",marginBottom:"0px",marginLeft:ze.formatPX(n.position.left),paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"rgba(0, 0, 0, 0)"}),t.unsetCache(),t.android("src",`@drawable/${a}`),r.innerWrapped=t,t.outerWrapper=r,t.parent=r,{renderAs:r,outputAs:this.application.renderNode(new Fe(o,r,e.FRAME,4096,r.children)),parent:r,complete:!0}}}}}class je extends squared.base.extensions.Substitute{processNode(t,o){return t.containerType=t.blockStatic?e.BLOCK:e.INLINE,super.processNode(t,o)}postOptimize(t){t.apply(E.formatOptions(O(this.options[t.elementId]),this.application.extensionManager.optionValueAsBoolean(n.RESOURCE_STRINGS,"numberResourceValue")))}}var Ye=squared.base.LayoutUI;const{css:Ze,util:Ke}=squared.lib,{constant:Je}=squared.base.lib;class Qe extends squared.base.extensions.Table{processNode(t,o){super.processNode(t,o);const n=t.data(Je.EXT_NAME.TABLE,Je.STRING_BASE.EXT_DATA);if(n){let i=!1;n.columnCount>1&&(i=n.expand,t.each(t=>{const e=t.data(Je.EXT_NAME.TABLE,"cellData");if("0px"===t.css("width"))t.setLayoutWidth("0px"),t.android("layout_columnWeight",""+(t.element.colSpan||1));else{const o=e.expand;if(o){const o=Ke.convertFloat(e.percent)/100;o>0&&(t.setLayoutWidth("0px"),t.android("layout_columnWeight",Ke.trimEnd(o.toPrecision(3),"0")),i||(i=!t.hasWidth))}else!1===o&&(t.android("layout_columnWeight","0"),t.textElement&&t.textContent.length>1&&t.android("ellipsize","end"));e.downsized&&(e.exceed?(t.setLayoutWidth("0px"),t.android("layout_columnWeight","0.01")):t.hasPX("width")&&t.actualWidth<t.bounds.width&&t.setLayoutWidth(Ze.formatPX(t.bounds.width)))}t.textElement&&t.textContent.length>1&&!/[\s\n\-]/.test(t.textContent.trim())&&t.android("maxLines","1")}),i&&(o.hasPX("width")&&Ke.aboveRange(t.actualWidth,o.actualWidth)?t.setLayoutWidth("match_parent"):t.css("width",Ze.formatPX(t.actualWidth),!0))),i||(t.hasPX("width")&&t.actualWidth<Math.floor(t.bounds.width)?n.layoutFixed?t.android("width",Ze.formatPX(t.bounds.width),!0):(t.hasPX("minWidth")||t.android("minWidth",Ze.formatPX(t.actualWidth)),t.css("width","auto",!0)):n.block&&t.setLayoutWidth("match_parent")),t.hasPX("height")&&t.actualHeight<Math.floor(t.bounds.height)&&(t.hasPX("minHeight")||t.android("minHeight",Ze.formatPX(t.actualHeight)),t.css("height","auto",!0));const a=new Ye(o,t,e.GRID,4,t.children);return a.rowCount=n.rowCount,a.columnCount=n.columnCount,{output:this.application.renderNode(a),complete:!0}}}processChild(t,e){const o=t.data(Je.EXT_NAME.TABLE,"cellData");if(o){const n=o.rowSpan,i=o.colSpan,a=o.spaceSpan||0;if(n>1&&t.android("layout_rowSpan",""+n),i>1&&t.android("layout_columnSpan",""+i),t.mergeGravity("layout_gravity","fill"),a>0){const e=this.controller;e.addAfterOutsideTemplate(t.id,e.renderSpace("wrap_content","wrap_content",a),!1)}"hide"===e.css("empty-cells")&&0===t.naturalChildren.length&&""===t.textContent&&t.hide(!0)}}postOptimize(t){const e=Ke.convertInt(t.layoutWidth);e>0&&(t.bounds.width>e&&t.setLayoutWidth(Ze.formatPX(t.bounds.width)),e>0&&"auto"===t.cssInitial("width")&&t.renderChildren.every(t=>t.inlineWidth)&&t.renderEach(t=>{t.setLayoutWidth("0px"),t.android("layout_columnWeight","1")}))}}var to=squared.base.LayoutUI;squared;class eo extends squared.base.extensions.VerticalAlign{processNode(t,o){return super.processNode(t,o),{output:this.application.renderNode(new to(o,t,e.RELATIVE,8,t.children))}}}class oo extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=!0}}var no=squared.base.LayoutUI;const{css:io,util:ao}=squared.lib,ro=squared.base.lib.enumeration;class so extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:!1}}condition(t){return this.included(t.element)&&t.length>0}processNode(t,o){return t.exclude(0,ro.NODE_PROCEDURE.CONSTRAINT),{output:this.application.renderNode(new no(o,t,e.CONSTRAINT,32,t.children))}}postBaseLayout(t){const e=this.controller,o=this.options.circlePosition;let n;t.each(e=>{ao.withinRange(e.linear.left,t.box.left)&&(e.anchor("left","parent"),e.anchorStyle(l.HORIZONTAL)),ao.withinRange(e.linear.top,t.box.top)&&(e.anchor("top","parent"),e.anchorStyle(l.VERTICAL)),o&&(e.anchored?n=e:n?!n.constraint.vertical&&e.constraint.vertical&&(n=e):e.constraint.vertical?n=e:e.constraint.horizontal&&(n=e))}),o?(void 0===n&&(n=t.item(0)),n.anchored||e.addGuideline(n,t),t.each(t=>{if(t!==n){const e=t.center,o=n.center,i=Math.abs(e.x-o.x),a=Math.abs(e.y-o.y),r=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(a,2)));let s=Math.round(Math.atan(Math.min(i,a)/Math.max(i,a))*(180/Math.PI));e.y>o.y?e.x>o.x?i>a?s+=90:s=180-s:i>a?s=270-s:s+=180:e.y<o.y?o.x>e.x?i>a?s+=270:s=360-s:i>a&&(s=90-s):s=e.x>o.x?90:270,t.app("layout_constraintCircle",n.documentId),t.app("layout_constraintCircleRadius",io.formatPX(r)),t.app("layout_constraintCircleAngle",""+s)}})):t.each(o=>{o.anchored||e.addGuideline(o,t)})}}var lo=squared.base.LayoutUI;const{util:co}=squared.lib,{constant:ho}=squared.base.lib;class uo extends squared.base.ExtensionUI{condition(t){if(t.naturalElement&&(t.documentBody||t.contentBoxWidth>0||t.contentBoxHeight>0)){const e=t.filter(t=>!t.pageFlow&&t.leftTopAxis&&t.left>=0&&t.right>=0);if(e.length){const o=t.paddingTop+(t.documentBody?t.marginTop:0),i=t.paddingRight+(t.documentBody?t.marginRight:0),a=t.paddingBottom+(t.documentBody?t.marginBottom:0),r=t.paddingLeft+(t.documentBody?t.marginLeft:0),s=new Set;let l=!1,c=!1;for(const n of e){const e="fixed"===n.css("position");n.hasPX("left")?n.left>=0&&n.left<r&&s.add(n):n.hasPX("right")&&n.right>=0&&(e||n.right<i||t.documentBody&&t.hasPX("width"))?(s.add(n),l=!0):n.rightAligned?n.marginRight<0&&(t.documentRoot||co.aboveRange(n.linear.right,t.bounds.right))&&s.add(n):n.marginLeft<0&&(t.documentRoot||co.belowRange(n.linear.left,t.bounds.left))&&s.add(n),n.hasPX("top")?n.top>=0&&n.top<o&&s.add(n):n.hasPX("bottom")&&n.bottom>=0&&(e||n.bottom<a||t.documentBody&&t.hasPX("height"))&&(s.add(n),c=!0)}if(s.size)return t.data(n.DELEGATE_FIXED,ho.STRING_BASE.EXT_DATA,{children:Array.from(s),right:l,bottom:c}),!0}}return!1}processNode(t,o){const i=t.data(n.DELEGATE_FIXED,ho.STRING_BASE.EXT_DATA);if(i){const a=this.controller.createNodeWrapper(t,o,i.children);t.documentBody&&(i.right||i.bottom)?(a.cssApply({width:"auto",height:"auto",display:"block",float:"none"}),i.right&&a.setLayoutWidth("match_parent"),i.bottom&&a.setLayoutHeight("match_parent")):t.pageFlow||t.resetBox(30,a);for(const e of i.children)e.hasPX("top")?e.modifyBox(2,t.borderTopWidth):e.hasPX("bottom")&&e.modifyBox(8,t.borderBottomWidth),e.hasPX("left")?e.modifyBox(16,t.borderLeftWidth):e.hasPX("right")&&e.modifyBox(4,t.borderRightWidth);const r=t.data(n.DELEGATE_MAXWIDTHHEIGHT,ho.STRING_BASE.EXT_DATA);if(r){r.container&&(r.width&&(a.css("maxWidth",t.css("maxWidth")),a.setLayoutWidth("0px"),a.contentBoxWidth=t.contentBoxWidth,t.setLayoutWidth("wrap_content")),r.height&&(a.css("maxHeight",t.css("maxHeight")),a.setLayoutHeight("0px"),a.contentBoxHeight=t.contentBoxHeight,t.setLayoutHeight("wrap_content")))}return this.subscribers.add(a),{parent:a,renderAs:a,outputAs:this.application.renderNode(new lo(o,a,e.CONSTRAINT,32,a.children))}}}postConstraints(t){t.each(t=>{t.constraint.horizontal||t.anchor("left","parent"),t.constraint.vertical||t.anchor("top","parent")})}}var po=squared.base.LayoutUI;const{constant:mo}=squared.base.lib;class go extends squared.base.ExtensionUI{condition(t,e){if(!t.inputElement){let o=!1,i=!1;if(t.support.maxWidth||isNaN(t.width)||!t.hasPX("maxWidth")||e.hasAlign(256)||(o=!0),!t.support.maxHeight&&!isNaN(t.height)&&t.hasPX("maxHeight")&&e.hasHeight&&(i=!0),o||i)return t.data(n.DELEGATE_MAXWIDTHHEIGHT,mo.STRING_BASE.EXT_DATA,{width:o,height:i}),!0}return!1}processNode(t,o){const a=t.data(n.DELEGATE_MAXWIDTHHEIGHT,mo.STRING_BASE.EXT_DATA);if(a){const n=o.layoutConstraint?o:this.controller.createNodeWrapper(t,o,void 0,i.CONSTRAINT,e.CONSTRAINT);if(a.width&&(t.setLayoutWidth("0px"),n.setLayoutWidth("match_parent"),o.layoutElement&&(t.autoMargin.horizontal=!1,t.autoMargin.left=!1,t.autoMargin.right=!1,t.autoMargin.leftRight=!1)),a.height&&(t.setLayoutHeight("0px"),n.setLayoutHeight("match_parent"),o.layoutElement&&(t.autoMargin.vertical=!1,t.autoMargin.top=!1,t.autoMargin.bottom=!1,t.autoMargin.topBottom=!1)),a.container=n,o!==n)return{parent:n,renderAs:n,outputAs:this.application.renderNode(new po(o,n,n.containerType,4096,n.children))}}}}var fo=squared.base.LayoutUI;squared;class To extends squared.base.ExtensionUI{condition(t,e){return!t.pageFlow&&e.naturalElement&&e.documentRoot&&(Math.ceil(t.linear.left)<Math.floor(e.box.left)&&(t.left<0||t.marginLeft<0||!t.hasPX("left")&&t.right>0)||Math.floor(t.linear.right)>Math.ceil(e.box.right)&&(t.left>0||t.marginLeft>0||!t.hasPX("left")&&t.right<0)||Math.ceil(t.linear.top)<Math.floor(e.box.top)&&(t.top<0||t.marginTop<0||!t.hasPX("top")&&t.bottom>0)||Math.floor(t.linear.bottom)>Math.ceil(e.box.bottom)&&(t.top>0||t.marginTop>0||!t.hasPX("top")&&t.bottom<0)&&e.hasPX("height"))}processNode(t,o){const n=this.controller.createNodeWrapper(t,o);return{parent:n,renderAs:n,outputAs:this.application.renderNode(new fo(o,n,e.FRAME,4096,n.children)),include:!0}}}var yo=squared.base.LayoutUI;const bo=squared.lib.css,{constant:Ao}=squared.base.lib;function Eo(t,e){return t.pageFlow?t===e.firstChild&&t.inlineFlow&&!t.centerAligned&&!t.rightAligned&&t.marginLeft<0&&Math.abs(t.marginLeft)<=e.marginLeft+e.paddingLeft&&!e.some(t=>t.multiline):t.absoluteParent===e&&(t.left<0||!t.hasPX("left")&&t.right<0)}class So extends squared.base.ExtensionUI{condition(t){return this.application.userSettings.supportNegativeLeftTop&&!t.documentRoot&&"hidden"!==t.css("overflowX")&&t.some(e=>Eo(e,t))}processNode(t,o){const a=t.filter(e=>Eo(e,t)),r=this.controller.createNodeWrapper(t,o,a,i.CONSTRAINT,e.CONSTRAINT);t.marginTop>0&&(r.modifyBox(2,t.marginTop),t.modifyBox(2)),t.marginBottom>0&&(r.modifyBox(8,t.marginBottom),t.modifyBox(8));let s,l=NaN,c=NaN;for(const t of a)t.pageFlow?((isNaN(l)||t.linear.left<l)&&(l=t.linear.left),s=t):t.hasPX("left")?t.left<0&&(isNaN(l)||t.linear.left<l)&&(l=t.linear.left):t.right<0&&(isNaN(c)||t.linear.right>c)&&(c=t.linear.right);if(r.inherit(t,"styleMap"),!isNaN(l)){let e=t.linear.left-l;if(e>0){t.modifyBox(16,e);for(const t of a)!t.pageFlow&&t.left<0&&t.css("left",bo.formatPX(t.left+e),!0)}else{for(const e of a)!e.pageFlow&&e.left<0&&e.css("left",bo.formatPX(t.marginLeft+e.left),!0);e=Math.abs(e)}t.hasPX("width",!1)?r.cssPX("width",(t.marginLeft>0?t.marginLeft:0)+e,!1,!0):t.hasPX("width")&&r.css("width","auto",!0)}if(!isNaN(c)){let e=c-t.linear.right;e>t.marginRight?t.modifyBox(4,e-=t.marginRight):e=0;const o=t.linear.right+e;t.marginRight>0&&(e+=t.marginRight),e>0&&(t.hasPX("width",!1)||!t.blockStatic&&!t.hasPX("width"))&&r.css(r.hasPX("width")?"width":"minWidth",bo.formatPX(t.actualWidth+e),!0);for(const t of a)t.right<0&&t.css("right",bo.formatPX(o-t.linear.right),!0)}return this.subscribers.add(r),r.data(n.DELEGATE_NEGATIVEX,Ao.STRING_BASE.EXT_DATA,{offsetLeft:t.marginLeft+t.paddingLeft,firstChild:s,nextSibling:t}),{parent:r,renderAs:r,outputAs:this.application.renderNode(new yo(o,r,r.containerType,4104,r.children))}}postBaseLayout(t){const e=t.data(n.DELEGATE_NEGATIVEX,Ao.STRING_BASE.EXT_DATA);if(e){let o=e.firstChild;o&&((o=o.ascend(e=>e!==t,t,"outerWrapper").pop()||o).anchorParent(l.HORIZONTAL,"packed"),o.anchorParent(l.VERTICAL,"packed"),o.modifyBox(16,e.offsetLeft),Dt.setConstraintDimension(o),o.positioned=!0);const n=e.nextSibling.ascend(e=>e!==t,t,"outerWrapper").pop()||e.nextSibling;n.anchorParent(l.HORIZONTAL,"packed"),n.anchorParent(l.VERTICAL,"packed"),Dt.setConstraintDimension(n),n.positioned=!0}}}var Ro=squared.base.LayoutUI;squared;const xo=t=>!t.documentParent.layoutElement&&!t.display.startsWith("table");class Io extends squared.base.ExtensionUI{condition(t,e){if(t.pageFlow){if(t.has("width",4,{not:"100%"})&&!e.layoutConstraint&&(t.documentRoot||t.hasPX("height")||(e.layoutVertical||t.onlyChild)&&(e.blockStatic||e.hasPX("width"))))return xo(t);if(t.has("height",4,{not:"100%"})&&(t.documentRoot||e.hasHeight&&t.onlyChild))return xo(t)}return!1}processNode(t,o){const n=this.controller.createNodeWrapper(t,o);return t.percentWidth?(n.css("display","block"),n.setLayoutWidth("match_parent"),t.setLayoutWidth("0px")):n.setLayoutWidth("wrap_content"),t.percentHeight?(n.setLayoutHeight("match_parent"),t.setLayoutHeight("0px")):n.setLayoutHeight("wrap_content"),{parent:n,renderAs:n,outputAs:this.application.renderNode(new Ro(o,n,e.CONSTRAINT,4096,n.children)),include:!0}}postConstraints(t){const e=t.renderParent;e&&t.resetBox(30,e,!0)}}const _o=squared.base.NodeUI,wo=squared.base.lib.enumeration,vo=t=>t.name?t.name.trim():"";class No extends squared.base.ExtensionUI{condition(t){return t.is(e.RADIO)&&""!==vo(t.element)&&!t.positioned}processNode(t,o){const n=vo(t.element),a=[],r=[],s=[];o.each(o=>{let i;if(o.renderAs&&(o.renderAs!==t&&(i=o),o=o.renderAs),o.is(e.RADIO)&&!o.rendered&&vo(o.element)===n)a.push(o),s.push(o);else{if(!a.length||o.visible||o.is(e.RADIO))return;a.push(o)}i&&r.push(i)});for(let t=a.length-1;t>=0;t--)if(s.includes(a[t])){a.splice(t+1);break}if(a.length>1){const n=this.controller.createNodeGroup(t,a,o,!0);_o.linearData(a).linearX?(n.addAlign(136),n.android("orientation",l.HORIZONTAL)):(n.addAlign(16),n.android("orientation",l.VERTICAL)),o.layoutConstraint&&(n.companion=t),n.setControlType(i.RADIOGROUP,e.LINEAR),n.inherit(t,"alignment"),n.baseline&&(n.css("verticalAlign","middle"),n.baseline=!1),n.exclude(wo.NODE_RESOURCE.ASSET),n.render(!t.dataset.use&&t.dataset.target?this.application.resolveTarget(t.dataset.target):o);for(const t of r)t.hide();return this.subscribers.add(n),{renderAs:n,outputAs:{type:1,node:n,controlName:i.RADIOGROUP},parent:n,complete:!0}}}postBaseLayout(t){t.renderEach(e=>{e.naturalElement&&e.element.checked&&t.android("checkedButton",e.documentId)})}}const Po=squared.lib.css,Co=squared.base.lib.enumeration;class Lo extends squared.base.ExtensionUI{condition(t){return t.length>0&&(t.overflowX&&t.hasPX("width")||t.overflowY&&t.hasHeight&&t.hasPX("height")||this.included(t.element))}processNode(t,o){const n=[],a=[],r=i.HORIZONTAL_SCROLL,s=i.VERTICAL_SCROLL;if(t.overflowX&&t.overflowY)n.push(r,s);else if(t.overflowX)n.push(r);else if(t.overflowY)n.push(s);else{let e=0;t.hasPX("width")&&(e|=8,n.push(r)),t.hasHeight&&t.hasPX("height")&&(e|=16,n.push(s)),t.overflow=e}if(n.includes(r)){const e=[];let o=t.actualWidth-t.contentBoxWidth,i=!0,a=0;if(t.each(t=>{if(t.textElement&&"nowrap"!==t.css("whiteSpace"))e.push(t);else{const e=t.actualWidth;if(e<=o)return;e>a&&(a=e)}i=!1}),i?n.shift():a>o&&(o=a),n.length)for(const t of e)t.css("maxWidth",Po.formatPX(o),!0)}const c=n.length;if(c>0){for(let i=0;i<c;i++){let r;0===i?((r=this.application.createNode(t.element)).inherit(t,"base","initial","styleMap"),o.appendTry(t,r),r.innerWrapped=t,t.outerWrapper=r):((r=this.application.createNode()).inherit(t,"base"),r.exclude(Co.NODE_RESOURCE.BOX_STYLE),a[0].outerWrapper=r,r.innerWrapped=a[0]),r.setControlType(n[i],e.BLOCK),r.exclude(Co.NODE_RESOURCE.ASSET),r.resetBox(480),a.push(r)}for(let e=0;e<c;e++){const n=a[e],i=a[e-1];switch(n.controlName){case s:t.setLayoutHeight("wrap_content"),n.setLayoutHeight(Po.formatPX(t.actualHeight)),n.android("scrollbars",l.VERTICAL),n.cssApply({width:1===c&&t.css("width")||"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case r:t.setLayoutWidth("wrap_content"),n.setLayoutWidth(Po.formatPX(t.actualWidth)),n.android("scrollbars",l.HORIZONTAL),n.cssApply({height:1===c&&t.css("height")||"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"})}n.render(0===e?!t.dataset.use&&t.dataset.target?this.application.resolveTarget(t.dataset.target):o:i),n.unsetCache(),this.application.addLayoutTemplate(n.renderParent||o,n,{type:1,node:n,controlName:n.controlName})}const i=a.pop();return t.parent=i,o.layoutConstraint&&(i.companion=t),t.overflow=0,t.resetBox(30),t.exclude(Co.NODE_RESOURCE.BOX_STYLE),{parent:t.parent}}}}var Oo={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},ko={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","top","right","bottom","drawable","width","height","gravity"],">":{shape:Oo.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const Mo={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},Xo={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":!0,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:Mo.path},"#":"include"}};var Bo={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:Mo.path},"#":"include"}};const{color:Do,css:Go,math:Wo,regex:Ho,util:Vo,xml:Fo}=squared.lib,zo=squared.base.lib.enumeration;function Uo(t,e=-1,o=!1){const{style:n,color:i}=t,a=nn(t.width),r=an(i);switch(n){case"solid":break;case"dotted":r.dashWidth=Go.formatPX(a),r.dashGap=r.dashWidth;break;case"dashed":{let t,e;switch(a){case 1:case 2:e=(t=3*a)-1;break;case 3:t=6,e=3;break;default:t=2*a,e=4}r.dashWidth=Go.formatPX(t),r.dashGap=Go.formatPX(e);break}case"inset":case"outset":case"groove":case"ridge":const t=i.rgba;let s=1;if(1===a)"inset"!==n&&"outset"!==n||(s=.5);else{const i=0!==t.r&&t.r===t.g&&t.g===t.b;if(("inset"===n||i&&"groove"===n||!i&&"ridge"===n)&&(o=!o),o)switch(e){case 0:case 3:e=1;break;case 1:case 2:e=0}switch(e){case 0:case 3:i&&(s=.5);break;case 1:case 2:s=i?.8:-.75}}if(1!==s){const e=Do.reduceRGBA(t,s,i.valueAsRGBA);if(e)return an(e)}}return r}function $o(t,e=-1,o=!1,n=!1){let i;if(t)if(jo(t.style)){const a=parseFloat(t.width);(i=Uo(t,e,!n)).width=Go.formatPX(n?2*Math.ceil(a/2):o?Math.ceil(a/2):nn(t.width))}else(i=Uo(t)).width=Go.formatPX(nn(t.width));return i}function qo(t){const e=on(t,!1);return""!==e?{color:e}:void 0}function jo(t){switch(t){case"groove":case"ridge":case"inset":case"outset":return!0;default:return!1}}function Yo(t,e,o,n,i,a,r=0,s){const l=nn(e.width),c=Math.max(1,Math.floor(l/3)),d=r>0?Go.formatPX(r):"";let h="-"+Go.formatPX(c+r+1);t.push({top:o?d:h,right:n?d:h,bottom:i?d:h,left:a?d:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Go.formatPX(c)},Uo(e)),corners:s}});const u=l-c+r,p=Go.formatPX(u);h="-"+Go.formatPX(u+1),t.push({top:o?p:h,right:n?p:h,bottom:i?p:h,left:a?p:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Go.formatPX(c)},Uo(e)),corners:s}})}function Zo(t,e,o){const n="initial"===t||"unset"===t;return-1===t.indexOf(" ")&&-1!==e.indexOf(" ")?Ho.CHAR.LOWERCASE.test(t)?`${n?o:t} 0px`:`${o} ${t}`:n?"0px":t}function Ko(t,e=21,o){const n={type:t.type,item:!1},i=e>=21;switch(t.type){case"conic":{const e=t.center;n.type="sweep",i?(n.centerX=""+2*e.left,n.centerY=""+2*e.top):(n.centerX=Go.formatPercent(e.leftAsPercent),n.centerY=Go.formatPercent(e.topAsPercent));break}case"radial":{const e=t,o=e.center;i?(n.gradientRadius=""+e.radius,n.centerX=""+o.left,n.centerY=""+o.top):(n.gradientRadius=Go.formatPX(e.radius),n.centerX=Go.formatPercent(o.leftAsPercent),n.centerY=Go.formatPercent(o.topAsPercent));break}case"linear":{const e=t,{width:i,height:a}=e.dimension,r=e.angle;let s=e.angleExtent.x,l=e.angleExtent.y;r<=90?(l+=a,n.startX="0",n.startY=""+a):r<=180?(n.startX="0",n.startY="0"):r<=270?(s+=i,n.startX=""+i,n.startY="0"):(s+=i,l+=a,n.startX=""+i,n.startY=""+a),n.endX=Wo.truncate(s,o),n.endY=Wo.truncate(l,o);break}}const a=t.colorStops;return i?n.item=sn(a):(n.startColor=on(a[0].color),n.endColor=on(a[a.length-1].color),a.length>2&&(n.centerColor=on(a[Math.floor(a.length/2)].color))),n}function Jo(t,e,o,n,i){if(i){const a=e.orientation,r="cover"===o||"contain"===o?-1:1;if("left"===t||"right"===t){if("cover"===o)return 0;if(Go.isPercent(4===a.length?a[1]:a[0])){const o="left"===t?e.leftAsPercent:e.rightAsPercent;let a=o*(n.width-i.width);return-1===r&&(a=Math.abs(a),o>0&&(a*=-1)),a}}else{if("contain"===o)return 0;if(Go.isPercent(4===a.length?a[3]:a[1])){const o="top"===t?e.topAsPercent:e.bottomAsPercent;let a=o*(n.height-i.height);return-1===r&&(a=Math.abs(a),o>0&&(a*=-1)),a}}}return e[t]}function Qo(t,e,o=!0){const n=[{"xmlns:android":s.android,item:[]}],i=!o&&qo(t.backgroundColor);if(i&&n[0].item.push({shape:{"android:shape":"rectangle",solid:i}}),e)for(const t of e)n[0].item.push(t.gradient?{shape:{"android:shape":"rectangle",gradient:t.gradient}}:t);return n}function tn(t,e,o){E.addTheme({name:t,parent:e,items:{"android:windowBackground":o,"android:windowFullscreen":"true","android:fitsSystemWindows":"true"}})}function en(t){const e=nn(t.width);return"double"===t.style&&2===e?3:e}function on(t,e=!0){const o=E.addColor(t,e);return""!==o?`@color/${o}`:""}const nn=t=>Math.round(parseFloat(t)),an=t=>({color:on(t),dashWidth:"",dashGap:""}),rn=t=>"groove"===t.style||"ridge"===t.style||"double"===t.style&&nn(t.width)>1;function sn(t,e){const o=[];for(const n of t)o.push({color:on(n.color),offset:Wo.truncate(n.offset,e)});return o}function ln(t,e,o=0,n=0,i){return i?(o=Wo.truncate(o,i),n=Wo.truncate(n,i),t=Wo.truncate(o+t,i),e=Wo.truncate(n+e,i)):(t+=o,e+=n),`M${o},${n} ${t},${n} ${t},${e} ${o},${e} Z`}class cn extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={drawOutlineAsInsetBorder:!0},this.eventOnly=!0}afterResources(){const t=this.application,e=t.userSettings;function o(t,o){let n=E.insertStoredAsset("drawables",`${t.containerName.toLowerCase()}_${t.controlId}`,o);if(""!==n){if(n=`@drawable/${n}`,t.documentBody){const o="no-repeat"!==t.css("backgroundRepeat");if(t.blockStatic&&(t.visibleStyle.backgroundImage&&o||!t.has("width")&&!t.has("maxWidth")&&(""!==t.backgroundColor||"no-repeat"!==t.css("backgroundRepeat")||"cover"===t.css("backgroundSize"))))return void tn(e.manifestThemeName,e.manifestParentThemeName,n);const i=t.parent;if(!i.visible){const t=i.android("background");""!==t&&tn(e.manifestThemeName,e.manifestParentThemeName,t)}}t.android("background",n,!1)}}this._resourceSvgInstance=this.controller.localSettings.svg.enabled?t.builtInExtensions[n.RESOURCE_SVG]:void 0;const i=this.options.drawOutlineAsInsetBorder;for(const n of t.processing.cache){const t=n.data(E.KEY_NAME,"boxStyle");if(t&&n.hasResource(zo.NODE_RESOURCE.BOX_STYLE)){if(n.inputElement){const e=n.companion;if(e&&!e.visible&&"LABEL"===e.tagName&&!E.isInheritedStyle(e,"backgroundColor")){const o=e.data(E.KEY_NAME,"boxStyle");o&&o.backgroundColor&&(t.backgroundColor=o.backgroundColor)}}let[a,r]=this.getDrawableBorder(t,[t.borderTop,t.borderRight,t.borderBottom,t.borderLeft],t.border,this.getDrawableImages(n,t),i&&t.outline?en(t.outline):0,!1);const s=void 0===a&&void 0===r;if(t.outline&&(i||s)){const e=t.outline,[o,n]=this.getDrawableBorder(t,[e,e,e,e],s?e:void 0);s?(a=o,r=n):r&&n&&(r[0].item=r[0].item.concat(n[0].item))}if(a)o(n,Fo.applyTemplate("shape",Oo,a));else if(r)o(n,Fo.applyTemplate("layer-list",ko,r));else if(t.backgroundColor){const o=on(t.backgroundColor,!1);if(""!==o)if(n.documentBody)tn(e.manifestThemeName,e.manifestParentThemeName,o);else{const e=n.data(E.KEY_NAME,"fontStyle");e?e.backgroundColor=t.backgroundColor:n.android("background",o,!1)}}}}this._resourceSvgInstance=void 0}getDrawableBorder(t,e,o,n,i=0,a=!0){const r=[],l=a?void 0:function(t){if(t){const e=t.length;if(1===e)return{radius:t[0]};{let o;if(8===e){o=[];for(let n=0;n<e;n+=2)o.push(Go.formatPX((parseFloat(t[n])+parseFloat(t[n+1]))/2))}else o=t;const n=["topLeft","topRight","bottomRight","bottomLeft"],i={};let a=!1;const r=o.length;for(let t=0;t<r;t++)"0px"!==o[t]&&(i[`${n[t]}Radius`]=o[t],a=!0);if(a)return i}}}(t.borderRadius),c=i>0?Go.formatPX(i):"";let d,h,u,p=!0;for(let t=0;t<4;t++){const o=e[t];o?(p&&d&&(p=Vo.isEqual(d,o)),d=o,r[t]=!0):r[t]=!1}if(o&&!jo(o.style)&&!("double"===o.style&&parseInt(o.width)>1)||void 0===d&&(l||n&&n.length)){const e=!!o&&$o(o);n&&n.length||i>0?(u=Qo(t,n,a),(l||e)&&u[0].item.push({top:c,right:c,left:c,bottom:c,shape:{"android:shape":"rectangle",corners:l,stroke:e}})):h=function(t,e,o){return[{"xmlns:android":s.android,"android:shape":"rectangle",stroke:t,solid:e,corners:o}]}(e,!a&&qo(t.backgroundColor),l)}else if(d)if(u=Qo(t,n,a),p&&!jo(d.style)){const t=nn(d.width);if("double"===d.style&&t>1)Yo(u[0].item,d,r[0],r[1],r[2],r[3],i,l);else{const e="-"+Go.formatPX(t+i+1);u[0].item.push({top:r[0]?c:e,right:r[1]?c:e,bottom:r[2]?c:e,left:r[3]?c:e,shape:{"android:shape":"rectangle",corners:l,stroke:$o(d)}})}}else{function m(t,o){const n=e[o];if(n){const e=nn(n.width);if("double"===n.style&&e>1)Yo(t.item,n,0===o,1===o,2===o,3===o,i,l);else{const a=e>1&&rn(n);if(a){const r="-"+Go.formatPX(e+i+1);t.item.push({top:0===o?"":r,right:1===o?"":r,bottom:2===o?"":r,left:3===o?"":r,shape:{"android:shape":"rectangle",stroke:$o(n,o,a,!0)}})}const r="-"+Go.formatPX((a?Math.ceil(e/2):e)+i+1);t.item.push({top:0===o?c:r,right:1===o?c:r,bottom:2===o?c:r,left:3===o?c:r,shape:{"android:shape":"rectangle",corners:l,stroke:$o(n,o,a)}})}}}m(u[0],0),m(u[0],3),m(u[0],2),m(u[0],1)}return[h,u]}getDrawableImages(t,o){const n=o.backgroundImage,i=t.extracted;if((n||i)&&t.hasResource(zo.NODE_RESOURCE.IMAGE_SOURCE)){const u=this.resource,p=[],{width:m,height:g}=t.bounds,f=o.backgroundRepeat.split(Ho.XML.SEPARATOR),T=o.backgroundPositionX.split(Ho.XML.SEPARATOR),y=o.backgroundPositionY.split(Ho.XML.SEPARATOR),b=[],A=[],S=[];let R=o.backgroundSize.split(Ho.XML.SEPARATOR),x=0,I=!0;if(n){for(x=n.length;R.length<x;)R=R.concat(R.slice(0));R.length=x;const e=this._resourceSvgInstance;for(let o=0,i=0;o<x;o++){let a=n[o],r=!1;if("string"==typeof a){if("initial"!==a){if(e){const[o,n]=e.createSvgElement(t,a);if(o&&n){const a=e.createSvgDrawable(t,n);""!==a&&(b[i]=a,S[i]={width:n.width.baseVal.value,height:n.height.baseVal.value},r=!0),o.removeChild(n)}}if(!r){const t=Ho.CSS.URL.exec(a);if(t)if(t[1].startsWith("data:image")){const e=u.getRawData(t[1]);e&&e.base64&&(b[i]=e.filename.substring(0,e.filename.lastIndexOf(".")),S[i]={width:e.width,height:e.height},u.writeRawImage(e.filename,e.base64),r=!0)}else a=Vo.resolvePath(t[1]),b[i]=E.addImage({mdpi:a}),""!==b[i]&&(S[i]=u.getImage(a),r=!0)}}}else if(a.colorStops.length>1){const e=Ko(a,t.localSettings.targetAPI);e&&(b[i]=e,S[i]=a.dimension,r=!0)}if(r){const e=T[o]||T[o-1],n=y[o]||y[o-1];A[i]=Go.getBackgroundPosition(`${Zo(e,n,"left")} ${Zo(n,e,"top")}`,t.actualDimension,S[i],t.fontSize),i++}else f.splice(o,1),R.splice(o,1),x--}}if(i){0===x&&(f.length=0,R.length=0);const e=i.filter(t=>t.visible&&(t.imageElement||"INPUT_IMAGE"===t.containerName));for(let o=0,n=x;o<e.length;o++){const i=e[o],a=i.element,r=u.addImageSrc(a);""!==r&&(b[n]=r,f[n]="no-repeat",R[n]=`${i.actualWidth}px ${i.actualHeight}px`,A[n]=Go.getBackgroundPosition("INPUT_IMAGE"===i.containerName?"0px 0px":`${i.bounds.left-t.bounds.left+t.borderLeftWidth}px ${i.bounds.top-t.bounds.top+t.borderTopWidth}px`,t.actualDimension,i.bounds,t.fontSize),S[n]=u.getImage(a.src),n++)}}let _=!1;for(let n=(x=b.length)-1;n>=0;n--){const i=b[n];if(!i)continue;const u=A[n],T=R[n],y={bitmap:!1,rotate:!1,gradient:!1};let x=S[n],w=0,v=0;x&&(x.width&&x.height?(w=x.width,v=x.height):x=void 0);let N=0,P=0,C=0,L=0,O=!0,k=!0;if("string"==typeof i){function a(t,e,o=!1){(2===u.orientation.length||o)&&(u[t]=0),u[e]=0}const s=`@drawable/${i}`,p=f[n],b="repeat"===p;let A="",E="";if(b||"repeat-x"===p){if(x)for(;u.left>0;)u.left-=w;else u.left=0;u.right=0,O=!0}else switch(u.horizontal){case"left":case"0%":a("left","right"),A=t.localizeString("left");break;case"center":case"50%":a("left","right",!0),A=l.CENTER_HORIZONTAL;break;case"right":case"100%":a("right","left"),A=t.localizeString("right");break;default:A+=t.localizeString(0!==u.right?"right":"left")}if(b||"repeat-y"===p){if(x)for(;u.top>0;)u.top-=v;else u.top=0;u.bottom=0,k=!0}else switch(u.vertical){case"top":case"0%":a("top","bottom"),E+="top";break;case"center":case"50%":a("top","bottom",!0),E+=l.CENTER_VERTICAL;break;case"bottom":case"100%":a("bottom","top"),E+="bottom";break;default:E+=0!==u.bottom?"bottom":"top"}let S,R=0,M=0,X="",B="",D="",G="";function r(){B="","repeat"===X&&(D="repeat",X="")}function c(){D="","repeat"===X&&(B="repeat",X="")}switch(p){case"repeat":X="repeat";break;case"repeat-x":t.documentBody?x&&w<m?B="repeat":A="fill_horizontal":(B="repeat",!t.blockStatic&&w>m&&(R=w));break;case"repeat-y":t.documentBody?x&&v<g?D="repeat":E="fill_vertical":(D="repeat",v>g&&(M=v));break;default:X="disabled"}if(x){if(""!==A&&"repeat"===D&&w<m){function d(){G=A,A="",B="disabled",""===E&&(D="disabled")}switch(A){case"start":case"left":u.left+=t.borderLeftWidth,u.right=0,d();break;case"end":case"right":u.left=0,u.right+=t.borderRightWidth,d();break;case l.CENTER_HORIZONTAL:u.left=0,u.right=0,d()}}if(""!==E&&"repeat"===B&&v<g){function h(){G+=(""!==G?"|":"")+E,E="",D="disabled",""===A&&(B="disabled")}switch(E){case"top":u.top+=t.borderTopWidth,u.bottom=0,h();break;case"bottom":u.top=0,u.bottom+=t.borderBottomWidth,h();break;case l.CENTER_VERTICAL:u.top=0,u.bottom=0,h()}}t.blockStatic&&!t.hasWidth||(w+u.left>=m&&r(),v+u.top>=g&&c())}switch(T){case"auto":case"auto auto":case"initial":case"contain":break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":A="fill_horizontal",E="fill_vertical";case"cover":S="",X="",B="",D="",u.left=0,u.top=0;break;default:T.split(" ").forEach((e,o)=>{"auto"!==e&&"100%"!==e?0===o?R=t.parseUnit(e,"width",!1):M=t.parseUnit(e,"height",!1):A=0===o?"fill_horizontal":"fill_vertical"})}if(x){const n=o.backgroundClip,i=()=>"fill_horizontal"!==A&&"repeat"!==X&&""===B,a=()=>"fill_vertical"!==E&&"repeat"!==X&&""===D;switch(T){case"cover":if(w<m||v<g){if(R=0,v<g){M=v*Math.max(m/w,g/v)}else M=0;S="top|center_horizontal|fill_horizontal"}else R=0,M=0,S="fill";I=!1;break;case"contain":if(w!==m&&v!==g){const t=Math.min(m/w,g/v);R=w*t,M=v*t}else R=0,M=0;I=!1;break;default:0===R&&M>0&&i()&&(R=w*(0===M?g:M)/v),0===M&&R>0&&a()&&(M=v*(0===R?m:R)/w)}if(n){const{top:e,right:o,left:i,bottom:a}=n;0===R?R=m:R+=t.contentBoxWidth,0===M?M=g:M+=t.contentBoxHeight,R-=i+o,M-=e+a,i>o?L=i-o:i<o&&(P=o-i),e>a?N=e-a:e<a&&(C=a-e)}else 0===R&&0===M&&w<m&&v<g&&i()&&a()&&(R=w,M=v);if(I&&!t.documentRoot&&!t.is(e.IMAGE)){let e=!1,o=!1;!(m<w)||(t.has("width",2,{map:"initial",not:"100%"})||t.blockStatic&&_)&&t.pageFlow||!t.renderParent||t.renderParent.tableElement||(R=m-(t.contentBox?t.contentBoxWidth:0),e=!0,r()),!(g<v)||t.has("height",2,{map:"initial",not:"100%"})&&t.pageFlow||(M=g-(t.contentBox?t.contentBoxHeight:0),o=!0,c()),(e||o)&&(""!==G&&(G+="|"),G+=e&&o?"fill":e?"fill_horizontal":"fill_vertical")}R>0&&(y.width=Go.formatPX(R)),M>0&&(y.height=Go.formatPX(M))}""===G&&"repeat"!==X&&(""!==B?""===D&&""!==E&&"fill_vertical"!==E&&(G=E,E="",B=""):""!==D&&""!==A&&"fill_horizontal"!==A&&(G=A,A="",D="")),void 0===S&&(A===l.CENTER_HORIZONTAL&&E===l.CENTER_VERTICAL?x&&w<=m&&v<=g?(G+=(""!==G?"|":"")+"center",S=""):S="center":"fill_horizontal"===A&&"fill_vertical"===E?S="fill":(S="",""!==A&&(S+=A),""!==E&&(S+=(S?"|":"")+E)),"fill_horizontal"===A&&(A=""),"fill_vertical"===E&&(E="")),t.documentBody||"repeat"===X||""!==B||""!==D||G?(G&&(y.gravity=G),y.bitmap=[{src:s,gravity:S,tileMode:X,tileModeX:B,tileModeY:D}]):(y.gravity=S,y.drawable=s,("center"===S||S.startsWith(l.CENTER_HORIZONTAL))&&(_=!0))}else if(i.item){let e,o;x?(e=Math.round(w),o=Math.round(v)):(e=Math.round(t.actualWidth),o=Math.round(t.actualHeight)),T.split(" ").some(t=>"100%"!==t&&Go.isLength(t,!0))&&(y.width=Go.formatPX(e),y.height=Go.formatPX(o));const a=E.insertStoredAsset("drawables",`${t.containerName.toLowerCase()}_${t.controlId}_gradient_${n+1}`,Fo.applyTemplate("vector",Bo,[{"xmlns:android":s.android,"xmlns:aapt":s.aapt,"android:width":y.width||Go.formatPX(e),"android:height":y.height||Go.formatPX(o),"android:viewportWidth":""+e,"android:viewportHeight":""+o,path:{pathData:ln(e,o),"aapt:attr":{name:"android:fillColor",gradient:i}}}]));""!==a&&(y.drawable=`@drawable/${a}`,u.static&&(y.gravity="fill"))}else y.gradient=i,u.static&&(y.gravity="fill");if(y.drawable||y.bitmap||y.gradient){const e=t.bounds;0!==u.bottom?(y.bottom=Go.formatPX((k?u.bottom:Jo("bottom",u,T,e,x))+C),C=0):0!==u.top&&(y.top=Go.formatPX((k?u.top:Jo("top",u,T,e,x))+N),N=0),0!==u.right?(y.right=Go.formatPX((O?u.right:Jo("right",u,T,e,x))+P),P=0):0!==u.left&&(y.left=Go.formatPX((O?u.left:Jo("left",u,T,e,x))+L),L=0),0!==N&&(y.top=Go.formatPX(N)),0!==P&&(y.right=Go.formatPX(P)),0!==C&&(y.bottom=Go.formatPX(C)),0!==L&&(y.left=Go.formatPX(L)),p.push(y)}}return p}}}const{regex:dn,util:hn}=squared.lib,un=E.STORED,pn=["android","app"],mn=/\dpx$/,gn=/:(\w+)="(-?[\d.]+px)"/;function fn(t,e,o){for(const[n,i]of t.entries())if(n.startsWith(e)&&o===i)return n;return t.has(e)&&t.get(e)!==o?E.generateId("dimen",e):e}const Tn=t=>hn.fromLastIndexOf(t,".");class yn extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={};for(const e of this.application.session.cache)if(e.visible){const o=e.containerName.toLowerCase();void 0===t[o]&&(t[o]={});for(const n of pn){const i=e.namespace(n);for(const a in i){const r=i[a];if(mn.test(r)&&"text"!==a){const i=`${n},${a},${r}`;void 0===t[o][i]&&(t[o][i]=[]),t[o][i].push(e)}}}}for(const e in t){const o=t[e];for(const t in o){const[n,i,a]=t.split(dn.XML.SEPARATOR),r=fn(un.dimens,`${Tn(e)}_${hn.convertUnderscore(i)}`,a),s=o[t];for(const t of s)t[n](i,`@dimen/${r}`);un.dimens.set(r,a)}}}afterFinalize(){if(this.controller.hasAppendProcessing())for(const t of this.application.layouts){let e,o=t.content;for(;null!==(e=gn.exec(o));)if("text"!==e[1]){const t=e[2],n=fn(un.dimens,`custom_${hn.convertUnderscore(e[1])}`,t);un.dimens.set(n,t),o=o.replace(e[0],e[0].replace(e[2],`@dimen/${n}`))}t.content=o}}}const{regex:bn,util:An}=squared.lib,En=squared.base.lib.enumeration,Sn=E.STORED,Rn=/^(\w*?)(?:_(\d+))?$/,xn=/"/g,In={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},_n={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},wn={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},vn={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},Nn={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'};function Pn(t,e,o){const n=t.length;for(const i of e.split(";"))for(let e=0;e<n;e++){let a=-1,r="";const s=t[e];for(const t in s)if(t===i){a=e,r=t,e=n;break}if(-1!==a){t[a][r]=An.filterArray(t[a][r],t=>!o.includes(t)),0===t[a][r].length&&delete t[a][r];break}}}class Cn extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:!1},this.eventOnly=!0}afterParseDocument(){const t=this.resource,e=t.userSettings,o=e.resolutionDPI,n="dp"===e.convertPixels,i={},a={};for(const t of this.application.session.cache)t.data(E.KEY_NAME,"fontStyle")&&t.hasResource(En.NODE_RESOURCE.FONT_STYLE)&&(void 0===i[t.containerName]&&(i[t.containerName]=[]),i[t.containerName].push(t));const r=Object.keys(Nn),s=r.length;for(const e in i){const l=[],c=i[e];for(let e of c){const i=Object.assign({},e.data(E.KEY_NAME,"fontStyle")),a=e.id;e.companion&&!e.companion.visible&&"LABEL"===e.companion.tagName&&(e=e.companion),i.backgroundColor&&(i.backgroundColor=E.addColor(i.backgroundColor)),i.fontFamily&&i.fontFamily.replace(xn,"").split(bn.XML.SEPARATOR).some((o,n,a)=>{let r=(o=An.trimString(o,"'")).toLowerCase(),s=!1;if(!this.options.disableFontAlias&&wn[r]&&(r=this.options.systemDefaultFont||wn[r]),In[r]&&e.localSettings.targetAPI>=In[r]||!this.options.disableFontAlias&&_n[r]&&e.localSettings.targetAPI>=In[_n[r]])i.fontFamily=r,s=!0;else if(i.fontStyle&&i.fontWeight){let e=!0;if(void 0===t.getFont(o,i.fontStyle,i.fontWeight))if(t.getFont(o,i.fontStyle))e=!1;else{if(n<a.length-1)return!1;n>0&&(r=(o=An.trimString(a[0],"'")).toLowerCase())}if(r=An.convertWord(r),e){const t=E.STORED.fonts.get(r)||{};t[o+"|"+i.fontStyle+"|"+i.fontWeight]=vn[i.fontWeight]||i.fontWeight,E.STORED.fonts.set(r,t)}i.fontFamily=`@font/${r}`,s=!0}if(s){const t=i.fontWeight;return"normal"===i.fontStyle&&(i.fontStyle=""),"400"===t||e.localSettings.targetAPI<26?i.fontWeight="":parseInt(t)>500&&(i.fontStyle+=(i.fontStyle?"|":"")+"bold"),!0}return!1}),i.color=E.addColor(i.color);for(let t=0;t<s;t++){const e=r[t];let s=i[e];if(s){n&&"fontSize"===e&&(s=C(s,o,!0));const i=Nn[e]+s+'"';void 0===l[t]&&(l[t]={}),void 0===l[t][i]&&(l[t][i]=[]),l[t][i].push(a)}}}a[e]=l}const l={};for(const t in a){l[t]={};const e=An.filterArray(a[t],t=>void 0!==t).sort((t,e)=>{let o=0,n=0,i=0,a=0;for(const e in t)o=Math.max(t[e].length,o),i+=t[e].length;for(const t in e)e[t]&&(n=Math.max(e[t].length,n),a+=e[t].length);return o!==n?o>n?-1:1:i!==a?i>a?-1:1:0});do{if(1===e.length){const o=e[0];for(const e in o)o[e].length&&(l[t][e]=o[e]);e.length=0}else{const o={};for(let n=0;n<e.length;n++){const a={},r=e[n];for(const s in r){const l=r[s];if(0===l.length)continue;if(l.length===i[t].length){o[s]=l,e[n]={};break}const c={};let d=!1;for(let t=0;t<e.length;t++)if(n!==t){const o=e[t];for(const t in o){const e=o[t];if(e.length)for(const o of l)e.includes(o)&&(void 0===c[t]&&(c[t]=[]),c[t].push(o))}}for(const t in c)c[t].length>1&&(a[[s,t].sort().join(";")]=c[t],d=!0);d||(a[s]=l)}if(Object.keys(a).length){const o={},n=new Set,i={};for(const t in a)i[t]=a[t].join(",");for(const t in a)for(const e in a){const a=i[t];if(t!==e&&a===i[e]){void 0===o[a]&&(o[a]=new Set(t.split(";")));for(const t of e.split(";"))o[a].add(t);n.add(t).add(e)}}for(const t of n)delete a[t];for(const o in a)Pn(e,o,a[o]),l[t][o]=a[o];for(const n in o){const i=Array.from(o[n]).sort().join(";"),a=An.objectMap(n.split(bn.XML.SEPARATOR),t=>parseInt(t));Pn(e,i,a),l[t][i]=a}}}const n=Object.keys(o);n.length&&(l[t][n.join(";")]=o[n[0]]),An.spliceArray(e,t=>{for(const e in t)if(t[e].length)return!1;return!0})}}while(e.length)}const c={},d={},h=new Set;for(const t in l){const e=l[t],o=[];for(const t in e){const n=[];for(const e of t.split(";")){const t=bn.XML.ATTRIBUTE.exec(e);t&&n.push({key:t[1],value:t[2]})}o.push({name:"",parent:"",items:n,ids:e[t]})}o.sort((t,e)=>{let o=0,n=0;return t.ids&&e.ids&&(o=t.ids.length,n=e.ids.length),o===n&&(o=t.items.length)===(n=e.items.length)&&(o=t.items[0].name)===(n=e.items[0].name)&&(o=t.items[0].value,n=e.items[0].value),o<=n?1:-1});const n=o.length;for(let e=0;e<n;e++)o[e].name=An.capitalize(t)+(e>0?`_${e}`:"");c[t]=o}for(const t in c)for(const e of c[t])if(e.ids)for(const t of e.ids)void 0===d[t]&&(d[t]=[]),d[t].push(e.name);for(const t of this.application.session.cache){const e=d[t.id];if(e&&e.length)switch(t.tagName){case"METER":case"PROGRESS":t.attr("_","style","@android:style/Widget.ProgressBar.Horizontal");break;default:e.length>1?(h.add(e.join(".")),e.shift()):h.add(e[0]),t.attr("_","style",`@style/${e.join(".")}`)}}for(const t of h){const e=[];let o,n="";if(t.split(".").forEach((t,i,a)=>{const r=Rn.exec(t);if(r){const s=c[r[1].toUpperCase()][An.convertInt(r[2])];if(s)if(0===i)n=t,1===a.length?o=s.items:Sn.styles.has(t)||Sn.styles.set(t,{name:t,parent:"",items:s.items});else{if(o)for(const t of s.items){const e=o.findIndex(e=>e.key===t.key);-1!==e?o[e]=t:o.push(t)}else o=s.items.slice(0);e.push(t)}}}),o)if(0===e.length)Sn.styles.set(n,{name:n,parent:"",items:o});else{const t=e.join(".");Sn.styles.set(t,{name:t,parent:n,items:o})}}}}squared;class Ln extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){for(const t of this.application.session.cache)if(t.renderTemplates){let e,o;if(t.renderEach((t,n)=>{const i=t.dataset.androidInclude,a="true"===t.dataset.androidIncludeEnd;if(i||a){const r={item:t,name:i,index:n,merge:"true"===t.dataset.androidIncludeMerge};i&&(void 0===e&&(e=[]),e.push(r)),a&&(void 0===o&&(o=[]),o.push(r))}}),e&&o){const n=this.application,i=this.controller;e.length=Math.min(e.length,o.length);for(let t=e.length;t<o.length;t++)o.shift();for(let a=e.length-1;a>=0;a--){const r=e[a];for(let e=0;e<o.length;e++){const a=o[e].index;if(a>=r.index){const s=[];for(let e=r.index;e<=a;e++)s.push(t.renderTemplates[e]),t.renderTemplates[e]=null;const l=r.merge||s.length>1,c=l?1:0;t.renderTemplates[r.index]={type:2,node:s[0].node,content:i.renderNodeStatic("include",{layout:`@layout/${r.name}`},"",""),indent:!0},l||r.item.documentRoot||(r.item.documentRoot=!0);let d=i.cascadeDocument(s,c);l&&(d=i.getEnclosingXmlTag("merge",B(d),d)),n.saveDocument(r.name,d,"",1/0),o.splice(e,1);break}}}}}}}const{css:On,dom:kn,util:Mn,xml:Xn}=squared.lib,Bn=squared.base.lib.enumeration;class Dn extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:!1,fontVariantSmallCapsReduction:.7},this.eventOnly=!0}afterResources(){const t=(t,e,o,n)=>{""!==(o=E.addString(n,o,this.options.numberResourceValue))&&t.android(e,this.options.numberResourceValue||!Mn.isNumber(o)?`@string/${o}`:o,!1)};for(const e of this.application.processing.cache)if(e.hasResource(Bn.NODE_RESOURCE.VALUE_STRING)){switch(e.tagName){case"SELECT":{const t=this.createOptionArray(e.element,e.controlId);""!==t&&e.android("entries",`@array/${t}`);break}case"IFRAME":{const t=e.data(E.KEY_NAME,"valueString");t&&E.addString(Xn.replaceCharacterData(t.value),t.key);break}default:{const o=e.data(E.KEY_NAME,"valueString");if(o){const n=o.key||o.value;let i=o.value;if(e.naturalChild&&e.alignParent("left")&&!(!e.plainText&&e.preserveWhiteSpace||e.plainText&&e.actualParent.preserveWhiteSpace)){const t=e.textContent;let o=0;const n=t.length;for(let e=0;e<n;e++)switch(t.charCodeAt(e)){case 160:o++;case 32:continue}0===o&&(i=i.replace(/^(\s|&#160;)+/,""))}if("small-caps"===e.css("fontVariant"))if(e.localSettings.targetAPI>=21)e.android("fontFeatureSettings","smcp");else{e.android("textAllCaps","true");const t=e.data(E.KEY_NAME,"fontStyle");t&&(t.fontSize=`${parseFloat(t.fontSize)*this.options.fontVariantSmallCapsReduction}px`)}switch(e.css("textTransform")){case"uppercase":e.android("textAllCaps","true");break;case"lowercase":i=Mn.lowerCaseString(i);break;case"capitalize":i=Mn.capitalizeString(i)}const a=e.tagName;i=Xn.replaceCharacterData(i,e.preserveWhiteSpace||"CODE"===a);const r=e.css("textDecorationLine");if("none"!==r)for(const t of r.split(" "))switch(t){case"underline":i=`<u>${i}</u>`;break;case"line-through":i=`<strike>${i}</strike>`}"INS"===a&&-1===r.indexOf("line-through")&&(i=`<strike>${i}</strike>`);let s=0;if((e.blockDimension||"table-cell"===e.display)&&(s=e.parseUnit(e.css("textIndent")))+e.bounds.width<0&&(i=""),0===s){const t=e.actualParent;t&&(t.blockDimension||"table-cell"===t.display)&&e===t.firstChild&&(s=t.parseUnit(t.css("textIndent")))}if(s>0){const t=kn.measureTextWidth(" ",e.css("fontFamily"),e.fontSize)||e.fontSize/2;i="&#160;".repeat(Math.max(Math.floor(s/t),1))+i}t(e,"text",n,i)}if(e.inputElement){if(e.controlName===i.EDIT_LIST){const t=e.element;t.list&&(this.createOptionArray(t.list,e.controlId),e.hasPX("width")||e.css("width",On.formatPX(Math.max(e.bounds.width,e.width)),!0))}const o=e.data(E.KEY_NAME,"hintString");o&&t(e,"hint",`${e.controlId.toLowerCase()}_hint`,o)}}}if(e.styleElement){const o=e.element.title;""!==o&&t(e,"tooltipText",`${e.controlId.toLowerCase()}_title`,o)}}}createOptionArray(t,e){const o=E.getOptionArray(t);let n;if(!this.options.numberResourceValue&&o[1])n=o[1];else{const t=o[0]||o[1];if(t){n=[];for(let e of t)""!==(e=E.addString(Xn.replaceCharacterData(e),"",this.options.numberResourceValue))&&n.push(`@string/${e}`)}}return n&&n.length?E.insertStoredAsset("arrays",`${e}_array`,n):""}}const{regex:Gn,util:Wn}=squared.lib,Hn=E.STORED,Vn=/(\w+):(\w+)="([^"]+)"/;class Fn extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={},e={};for(const o of this.application.session.cache)if(o.visible&&o.controlId){const n=o.renderChildren,i=n.length;if(i>1){const a=new Map;let r=!0,s="";for(let t=0;t<i;t++){const e=n[t];let o=!1;for(const n of e.combine("_","android"))if(!o&&n.startsWith("style=")){if(0===t)s=n;else if(""===s||n!==s){r=!1;break}o=!0}else a.set(n,(a.get(n)||0)+1);if(!r||!o&&""!==s){r=!1;break}}if(r){for(const[t,e]of a.entries())e!==i&&a.delete(t);if(a.size>1){""!==s&&(s=Wn.trimString(s.substring(s.indexOf("/")+1),'"'));const i=[];for(const t of a.keys()){const e=Vn.exec(t);if(e){for(const t of n)t.delete(e[1],e[2]);i.push(e[0])}}i.sort();const r=i.join(";");let l="";for(const t in e)if(e[t]===r){l=t;break}""!==s&&l.startsWith(`${s}.`)||(t[l=(""!==s?s+".":"")+Wn.capitalize(o.controlId)]=i,e[l]=r);for(const t of n)t.attr("_","style",`@style/${l}`)}}}}for(const e in t){const o=[],n=t[e];for(const t in n){const e=Gn.XML.ATTRIBUTE.exec(n[t]);e&&o.push({key:e[1],value:e[2]})}Hn.styles.set(e,Object.assign({},k(),{name:e,items:o}))}}}var zn={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const Un=["ordering"],$n={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var qn={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":Un,">":{set:{"^":"android","@":Un,">":{objectAnimator:$n.objectAnimator}},objectAnimator:$n.objectAnimator}},objectAnimator:$n.objectAnimator}}};void 0===squared.svg&&Object.assign(squared,{svg:{lib:{}}});var jn=squared.svg.Svg,Yn=squared.svg.SvgAnimate,Zn=squared.svg.SvgAnimateTransform,Kn=squared.svg.SvgBuild,Jn=squared.svg.SvgG,Qn=squared.svg.SvgPath,ti=squared.svg.SvgShape;const{css:ei,math:oi,regex:ni,util:ii,xml:ai}=squared.lib,{constant:ri,util:si}=squared.svg.lib,li=E.STORED,ci={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"};ri&&Object.assign(ci,{[ri.KEYSPLINE_NAME["ease-in"]]:ci.accelerate,[ri.KEYSPLINE_NAME["ease-out"]]:ci.decelerate,[ri.KEYSPLINE_NAME["ease-in-out"]]:ci.accelerate_decelerate,[ri.KEYSPLINE_NAME.linear]:ci.linear});const di='<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',hi={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function ui(t,e){return t&&t[e]?ci[t[e]]||mi(t[e]):""}function pi(t){for(const e in hi)if(hi[e].includes(t))return ii.convertCamelCase(e);return""}function mi(t){if(ci[t])return ci[t];{const e=`path_interpolator_${ii.convertWord(t)}`;if(!li.animators.has(e)){const o=ii.formatString(di,...t.split(" "));li.animators.set(e,o)}return`@anim/${e}`}}function gi(t){const e={};for(const o of t){const t=o.matrix;switch(o.type){case SVGTransform.SVG_TRANSFORM_SCALE:e.scaleX=""+t.a,e.scaleY=""+t.d,o.origin&&(e.pivotX=""+o.origin.x,e.pivotY=""+o.origin.y);break;case SVGTransform.SVG_TRANSFORM_ROTATE:e.rotation=""+o.angle,o.origin?(e.pivotX=""+o.origin.x,e.pivotY=""+o.origin.y):(e.pivotX="0",e.pivotY="0");break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:e.translateX=""+t.e,e.translateY=""+t.f}}return e}function fi(t,e){let o=0,n=0;for(const i of function(t){const e=[];let o=t.parentElement;for(;o&&(e.push(o),!((o=o.parentElement)instanceof HTMLElement)););return e}(t))(si.SVG.svg(i)||si.SVG.use(i))&&i!==e&&(o+=i.x.baseVal.value,n+=i.y.baseVal.value);return{x:o,y:n}}function Ti(t,e,o=1,n=1){return e.length&&(si.SVG.circle(t)||si.SVG.ellipse(t))&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(o!==n||e.length>1&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_SCALE&&t.matrix.a!==t.matrix.d))?yi(t,e):[[],e]}function yi(t,e,o=!1){if(e.length){const i=[],a=[],r=e[0].fromCSS?[]:si.TRANSFORM.rotateOrigin(t).reverse(),s=e.slice(0).reverse();for(let t=1;t<s.length;t++){const e=s[t],o=s[t-1];if(e.type===o.type){let n;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:(n=si.MATRIX.clone(e.matrix)).e+=o.matrix.e,n.f+=o.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:(n=si.MATRIX.clone(e.matrix)).a*=o.matrix.a,n.d*=o.matrix.d}n&&(e.matrix=n,s.splice(--t,1))}}const l=[];function n(){i.push(l.slice(0)),l.length=0}for(const t of s)switch(t.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:a.push(t);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:o||0!==i.length||0!==l.length?(l.push(t),n()):a.push(t);break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;r.length;){const e=r.shift();if(e.angle===t.angle){0===e.x&&0===e.y||(t.origin=e);break}}if(void 0===t.origin&&1===l.length&&l[0].type===SVGTransform.SVG_TRANSFORM_SCALE){l.push(t);continue}case SVGTransform.SVG_TRANSFORM_SCALE:l.length&&n(),l.push(t)}return l.length&&i.push(l),[i.reverse(),a]}return[[],e]}function bi(t,e,o,n=!1,i){let a;const r=t[e];return r?a=Array.isArray(r)?""+r[o]:r:n||0!==e||(a=i),a||""}function Ai(t){switch(t){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:return Ii(t)?"floatType":void 0}}function Ei(t,e,o,n){const i=new Yn;return i.attributeName=t,i.delay=e,i.duration=1,i.from=n||o,i.to=o,i.fillForwards=!0,i.convertToValues(),i}function Si(t,e=!0){let o=hi[t];return void 0===o&&e&&Ii(t)&&(o=[t]),o}function Ri(t){switch(t){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function xi(t){switch(t.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return Zn.toRotateList(t.values);case SVGTransform.SVG_TRANSFORM_SCALE:return Zn.toScaleList(t.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return Zn.toTranslateList(t.values)}}function Ii(t){switch(t){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function _i(t,e=!1){const o=`@color/${E.addColor(t)}`;return e?[o]:o}function wi(t,e){return Pi(t.attributeName)?_i(e):e.trim()||void 0}function vi(t){switch(t){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function Ni(t,e,o){const n={type:t.type,item:sn(t.colorStops,o)};switch(t.type){case"radial":{const o=t;let i,a,r,s,l=[];switch(e.element.tagName){case"path":for(const t of Kn.getPathCommands(e.value))l=l.concat(t.value);case"polygon":if(si.SVG.polygon(e.element)&&(l=l.concat(Kn.clonePoints(e.element.points))),!l.length)return;[i,a,r,s]=Kn.minMaxPoints(l),r-=i,s-=a;break;default:if(si.SVG.rect(e.element)){const t=e.element;i=t.x.baseVal.value,a=t.y.baseVal.value,r=t.width.baseVal.value,s=t.height.baseVal.value}else if(si.SVG.circle(e.element)){const t=e.element;i=t.cx.baseVal.value-t.r.baseVal.value,a=t.cy.baseVal.value-t.r.baseVal.value,s=r=2*t.r.baseVal.value}else{if(!si.SVG.ellipse(e.element))return;{const t=e.element;i=t.cx.baseVal.value-t.rx.baseVal.value,a=t.cy.baseVal.value-t.ry.baseVal.value,r=2*t.rx.baseVal.value,s=2*t.ry.baseVal.value}}}n.centerX=""+(i+r*Li(o.cxAsString)),n.centerY=""+(a+s*Li(o.cyAsString)),n.gradientRadius=""+(r+s)/2*(ei.isPercent(o.rAsString)?parseFloat(o.rAsString)/100:1),o.spreadMethod&&(n.tileMode=vi(o.spreadMethod));break}case"linear":{const e=t;n.startX=""+e.x1,n.startY=""+e.y1,n.endX=""+e.x2,n.endY=""+e.y2,e.spreadMethod&&(n.tileMode=vi(e.spreadMethod))}}return n}const Pi=t=>"fill"===t||"stroke"===t,Ci=(t,e,o=-1)=>`${t.name}_${e+(-1!==o?`_${o+1}`:"")}`,Li=t=>ei.isPercent(t)?parseFloat(t)/100:.5,Oi=t=>`@drawable/${t}`,ki=(t="")=>({ordering:t,objectAnimator:[]});class Mi extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=!0,this.VECTOR_DATA=new Map,this.ANIMATE_DATA=new Map,this.ANIMATE_TARGET=new Map,this.IMAGE_DATA=[],this.SYNCHRONIZE_MODE=0,this.NAMESPACE_AAPT=!1}beforeParseDocument(){Kn&&(Kn.setName(),this.controller.localSettings.svg.enabled=!0)}afterResources(){for(const t of this.application.processing.cache){let e,o;if(t.imageElement?[e,o]=this.createSvgElement(t,t.src):t.svgElement&&(o=t.element),o){const n=this.createSvgDrawable(t,o);""!==n&&(t.localSettings.targetAPI>=21?t.android("src",Oi(n)):t.app("srcCompat",Oi(n))),t.hasWidth||t.setLayoutWidth("wrap_content"),t.hasHeight||t.setLayoutHeight("wrap_content"),t.baseline&&t.android("baselineAlignBottom","true"),e&&e.removeChild(o)}}}createSvgElement(t,e){let o,n;const i=ni.CSS.URL.exec(e);if(i&&(e=i[1]),e.toLowerCase().endsWith(".svg")||e.startsWith("data:image/svg+xml")){const i=this.resource.getRawData(e);i&&((o=(t.actualParent||t.documentParent).element).insertAdjacentHTML("beforeend",i.content),o.lastElementChild instanceof SVGSVGElement&&(0===(n=o.lastElementChild).width.baseVal.value&&n.setAttribute("width",""+t.actualWidth),0===n.height.baseVal.value&&n.setAttribute("height",""+t.actualHeight)))}return[o,n]}createSvgDrawable(t,e){const o=new jn(e),n=t.localSettings.targetAPI>=23;this.SVG_INSTANCE=o,this.VECTOR_DATA.clear(),this.ANIMATE_DATA.clear(),this.ANIMATE_TARGET.clear(),this.IMAGE_DATA.length=0,this.NAMESPACE_AAPT=!1,this.SYNCHRONIZE_MODE=2|(n?32:64);const i=`${t.tagName}_${ii.convertWord(t.controlId,!0)}_viewbox`.toLowerCase(),a=(t,e)=>i+(t?`_${t}`:"")+(this.IMAGE_DATA.length?"_vector":"")+(e?`_${e.toLowerCase()}`:"");o.build({exclude:this.options.transformExclude,residual:Ti,precision:this.options.floatPrecisionValue}),o.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,framesPerSecond:this.controller.userSettings.framesPerSecond,precision:this.options.floatPrecisionValue}),this.queueAnimations(o,o.name,t=>"opacity"===t.attributeName);const r=this.parseVectorData(o);let l=E.insertStoredAsset("drawables",a(),ai.applyTemplate("vector",Bo,[{"xmlns:android":s.android,"xmlns:aapt":this.NAMESPACE_AAPT?s.aapt:"","android:name":o.name,"android:width":ei.formatPX(o.width),"android:height":ei.formatPX(o.height),"android:viewportWidth":""+(o.viewBox.width||o.width),"android:viewportHeight":""+(o.viewBox.height||o.height),"android:alpha":parseFloat(o.opacity)<1?""+o.opacity:"",include:r}])),c="";if(this.ANIMATE_DATA.size){const t=[{"xmlns:android":s.android,"android:drawable":Oi(l),target:[]}];function d(e,o){if(o.set.length){let n=!1;if(o.set.length>1&&o.set.every(t=>""===t.ordering)){const t={set:[],objectAnimator:[]};for(const e of o.set)t.set=t.set.concat(e.set),t.objectAnimator=t.objectAnimator.concat(e.objectAnimator);o=t}for(;1===o.set.length;){const t=o.set[0];if(n&&""!==t.ordering||0!==t.objectAnimator.length)break;o=t,n=!0}o["xmlns:android"]=s.android,n&&(o["android:ordering"]=o.ordering,o.ordering=void 0);const i={name:e,animation:E.insertStoredAsset("animators",a("anim",e),ai.applyTemplate("set",qn,[o]))};""!==i.animation&&(i.animation=`@anim/${i.animation}`,t[0].target.push(i))}}for(const[t,e]of this.ANIMATE_DATA.entries()){const o=new Map,i=new Map,a=[],r=[],s=[],l=[],c=[],[h,u]=ii.partitionArray(e.animate,t=>void 0!==t.companion),p={set:[],objectAnimator:[]},m=u.length;for(let t=0;t<m;t++){const e=u[t];if(e.setterType)hi[e.attributeName]&&ii.isString(e.to)&&(e.duration>0&&e.fillReplace?r.push(e):a.push(e));else if(Kn.isAnimate(e)){const l=ii.filterArray(h,t=>t.companion.value===e);if(l.length){l.sort((t,e)=>t.companion.key>=e.companion.key?1:0);const n=[],i=[],a=l.length;for(let t=0;t<a;t++){const o=l[t];o.companion.key<=0?(n.push(o),0===t&&e.delay>0&&(o.delay+=e.delay,e.delay=0)):i.push(o)}n.push(e),o.set(`sequentially_companion_${t}`,n.concat(i))}else{const t=e.synchronized;if(t)if(Kn.isAnimateTransform(e)){const o=i.get(t.value)||[];o.push(e),i.set(t.value,o)}else{const n=o.get(t.value)||[];n.push(e),o.set(t.value,n)}else Kn.isAnimateTransform(e)&&e.expandToValues(),-1===e.iterationCount?r.push(e):!(!e.fromToType||Kn.isAnimateTransform(e)&&e.transformOrigin)||n&&"pathType"!==Ai(e.attributeName)?e.fillReplace?r.push(e):a.push(e):s.push([e])}}}a.length&&s.push(a);for(const[t,e]of o.entries())t.startsWith("sequentially_companion")?s.push(e):s.push(e.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of i.values())c.push(t.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of r)l.push([[t]]);[s,c,...l].forEach((t,o)=>{if(0===t.length)return;const i={ordering:0===o||1===t.length?"":"sequentially",set:[],objectAnimator:[]};for(const a of t){let t="",r=!1,s=!1,l=!0;o<=1&&a.some(t=>!!t.synchronized&&""!==t.synchronized.value)?(Kn.isAnimateTransform(a[0])||(t="sequentially"),r=!0,l=!1):o<=1&&a.some(t=>!!t.synchronized&&""===t.synchronized.value)?(t="sequentially",r=!0,s=!0):o<=1&&a.some(t=>void 0!==t.companion)?t="sequentially":(o>0&&(t="sequentially"),o>1&&Kn.isAnimateTransform(a[0])&&(s=!0));const c=ki(),d=ki(),h=ki(),u=ki();let p=[];(r?ii.partitionArray(a,t=>-1!==t.iterationCount):[a]).forEach((a,m)=>{1===m&&a.length>1&&(h.ordering="sequentially");const g=new Map;for(const f of a){const T=Ai(f.attributeName);if(void 0===T)continue;const y=f.delay>0;let b,A=!1;const E=(t,e)=>{ii.isString(e)&&-1===c.objectAnimator.findIndex(e=>e.propertyName===t)&&c.objectAnimator.push(this.createPropertyValue(t,e,"0",T))},S=(t,e,o)=>{if(!r&&f.fillReplace&&void 0!==T){let n,i=f.replaceValue;if(i||(A?i=Ii(t):f.parent&&Kn.isShape(f.parent)&&f.parent.path&&(i="pathData"===t?f.parent.path.value:f.parent.path[pi(t)]),i||(i=f.baseValue)),e&&e.length){const t=e[e.length-1];if(ii.isArray(t.propertyValuesHolder)){const e=t.propertyValuesHolder[t.propertyValuesHolder.length-1];n=e.keyframe[e.keyframe.length-1].value}else n=t.valueTo}if(ii.isString(i)&&i!==n&&(i=wi(f,i))){switch(t){case"trimPathStart":case"trimPathEnd":i=i.split(" ")["trimPathStart"===t?0:1]}u.objectAnimator.push(this.createPropertyValue(t,i,"1",T,"pathType"===T?n:"",o?""+o:""))}b&&(t.endsWith("X")?u.objectAnimator.push(this.createPropertyValue("translateX","0","1",T)):t.endsWith("Y")&&u.objectAnimator.push(this.createPropertyValue("translateY","0","1",T)))}};if(f.setterType){const t=Si(f.attributeName);if(t){const e=Pi(f.attributeName)?_i(f.to,!0):f.to.trim().split(" "),n=t.length;if(e.length===n&&!e.some(t=>""===t)){let i,a;for(let r=0;r<n;r++){let n;"pathType"===T?n=e[r]:y&&f.baseValue&&(n=wi(f,f.baseValue.trim().split(" ")[r]));const s=this.createPropertyValue(t[r],e[r],"1",T,n,f.delay>0?""+f.delay:"");o>1?(h.objectAnimator.push(s),S(t[r],void 0,o>1?f.duration:0)):f.companion&&f.companion.key<=0?(void 0===i&&(i=[]),i.push(s)):f.companion&&f.companion.key>0?(void 0===a&&(a=[]),a.push(s)):p.push(s)}i&&(c.objectAnimator=c.objectAnimator.concat(i)),a&&(u.objectAnimator=u.objectAnimator.concat(a))}}}else if(Kn.isAnimate(f)){let c,u=s;const p=this.createPropertyValue("","",""+f.duration,T,"",f.delay>0?""+f.delay:"",c=1===m?a.length>1?"0":"-1":-1!==f.iterationCount?""+Math.ceil(f.iterationCount-1):"-1");let R,x,I;if(r||"pathType"!==p.valueType)if(Kn.asAnimateTransform(f))x=Ri(f.type),I=xi(f),x&&I&&(s&&0===f.keyTimes[0]&&(u=!1),(u||y)&&(R=ii.objectMap(x,t=>Ii(t)||"0")),b=f.transformOrigin),A=!0;else if(Kn.asAnimateMotion(f)){if(x=Ri(f.type),I=xi(f),x&&I){const t=f.rotateValues,e=I.length;if(t&&t.length===e){x.push("rotation");for(let o=0;o<e;o++)I[o].push(t[o])}}A=!0}else switch(x=Si(f.attributeName),p.valueType){case"intType":I=ii.objectMap(f.values,t=>""+ii.convertInt(t)),y&&f.baseValue&&(R=ii.replaceMap(Kn.parseCoordinates(f.baseValue),t=>""+Math.trunc(t)));break;case"floatType":I="stroke-dasharray"===f.attributeName?ii.objectMap(f.values,t=>ii.replaceMap(t.split(" "),t=>parseFloat(t))):f.values,y&&f.baseValue&&(R=ii.replaceMap(Kn.parseCoordinates(f.baseValue),t=>""+t));break;default:if(I=f.values.slice(0),Pi(f.attributeName)){y&&f.baseValue&&(R=_i(f.baseValue,!0));const t=I.length;for(let e=0;e<t;e++)""!==I[e]&&(I[e]=_i(I[e]))}}else if(e.pathData){let t,o;f.parent&&Kn.isShape(f.parent)&&(o=f.parent,f.parent.path&&(t=f.parent.path.transformed)),x=["pathData"],I=Qn.extrapolate(f.attributeName,e.pathData,f.values,t,o,this.options.floatPrecisionValue)}if(void 0===f.keySplines&&(f.timingFunction?p.interpolator=mi(f.timingFunction):""!==this.options.animateInterpolator&&(p.interpolator=this.options.animateInterpolator)),I&&x){const a=x.length,c=f.synchronized?f.synchronized.key+f.synchronized.value:0!==o||a>1?JSON.stringify(p):"",T=f.keyTimes;for(let o=0;o<a;o++){const a=x[o];u&&R&&E(a,R[o]);const A=T.length;if(l&&A>1)if(n&&"pathType"!==p.valueType){!u&&y&&R&&E(a,R[o]);const t=g.get(c)||[],e=[];for(let t=0;t<A;t++){let n=bi(I,t,o,!0);n&&"floatType"===p.valueType&&(n=oi.truncate(n,this.options.floatPrecisionValue)),e.push({interpolator:t>0&&""!==n&&"pivotX"!==a&&"pivotY"!==a?ui(f.keySplines,t-1):"",fraction:0===T[t]&&""===n?"":oi.truncate(T[t],this.options.floatPrecisionKeyTime),value:n})}t.push({propertyName:a,keyframe:e}),g.has(c)||(""!==c&&g.set(c,t),(0===m?d:h).objectAnimator.push(Object.assign({},p,{propertyValuesHolder:t}))),b=void 0}else{t="sequentially";const n=ki("sequentially"),r=d.objectAnimator;for(let t=0;t<A;t++){const i=Object.assign({},p,{propertyName:a,startOffset:0===t?""+(f.delay+(T[t]>0?Math.floor(T[t]*f.duration):0)):"",propertyValuesHolder:!1});let l=bi(I,t,o,!1,"pathType"===p.valueType?e.pathData:f.baseValue);if(l){let c;if(0===t?(i.valueFrom=!s&&y&&R?R[o]:"pathType"===p.valueType?e.pathData||""+I[0]:f.baseValue||f.replaceValue||"",c=0):(i.valueFrom=""+bi(I,t-1,o),c=Math.floor((T[t]-T[t-1])*f.duration)),"floatType"===p.valueType&&(l=oi.truncate(l,this.options.floatPrecisionValue)),b&&b[t]){let e,o=0;if(a.endsWith("X")?(e="translateX",o=b[t].x):a.endsWith("Y")&&(e="translateY",o=b[t].y),e){const t=this.createPropertyValue(e,oi.truncate(o,this.options.floatPrecisionValue),""+c,"floatType");t.interpolator=mi(ri.KEYSPLINE_NAME["step-start"]),n.objectAnimator.push(t)}}t>0&&(i.interpolator=ui(f.keySplines,t-1)),i.duration=""+c,i.valueTo=l,r.push(i)}}n.objectAnimator.length&&i.set.push(n)}else{const t=Object.assign({},p,{propertyName:a,interpolator:f.duration>1?ui(f.keySplines,0):"",propertyValuesHolder:!1});if(Array.isArray(I[0])){const e=I[I.length-1][o];if(I.length>1){const n=I[0][o];n!==e&&(t.valueFrom=""+n)}t.valueTo=""+e}else{let n;I.length>1?(n=""+I[0],t.valueTo=""+I[I.length-1]):(n=f.from||(!s&&y&&R?R[o]:""),t.valueTo=f.to),"pathType"===p.valueType?t.valueFrom=n||e.pathData||t.valueTo:n&&n!==t.valueTo&&(t.valueFrom=wi(f,n))}t.valueTo&&("floatType"===p.valueType&&(t.valueTo=oi.truncate(t.valueTo,this.options.floatPrecisionValue)),(0===m?d:h).objectAnimator.push(t))}0!==m||r||-1===f.iterationCount||S(a,d.objectAnimator)}y&&b&&b.length&&(E("translateX","0"),E("translateY","0"))}}}});const m=d.objectAnimator.length>0||h.objectAnimator.length>0;"sequentially"===t&&(m&&1===c.objectAnimator.length&&(d.objectAnimator.unshift(c.objectAnimator[0]),c.objectAnimator.length=0),1===h.objectAnimator.length&&(d.objectAnimator.push(h.objectAnimator[0]),h.objectAnimator.length=0),m&&1===u.objectAnimator.length&&(d.objectAnimator.push(u.objectAnimator[0]),u.objectAnimator.length=0)),0===c.objectAnimator.length&&0===h.objectAnimator.length&&0===u.objectAnimator.length&&("sequentially"===t&&1===d.objectAnimator.length&&(t=""),"sequentially"!==i.ordering&&"sequentially"!==t&&(p=p.concat(d.objectAnimator),d.objectAnimator.length=0)),(d.objectAnimator.length||h.objectAnimator.length)&&(c.objectAnimator.length&&(i.ordering="sequentially",i.set.push(c)),d.objectAnimator.length&&(d.ordering=t,i.set.push(d)),h.objectAnimator.length&&(i.ordering="sequentially",i.set.push(h)),u.objectAnimator.length&&(i.ordering="sequentially",i.set.push(u))),p.length&&(i.objectAnimator=i.objectAnimator.concat(p))}(i.set.length||i.objectAnimator.length)&&p.set.push(i)}),d(t,p)}for(const[t,e]of this.ANIMATE_TARGET.entries()){let o;const n=(t,e,n,i,a)=>{void 0===o&&(o=[]),o.push(this.createPropertyValue(t,e,"0",n,i,a))};for(const t of e.animate)if(Kn.asAnimateMotion(t)&&t.parent&&Kn.isShape(t.parent)){const e=t.parent.path;e&&e.value!==e.baseValue&&(n("pathData",e.baseValue,"pathType",e.value),-1===t.iterationCount||t.setterType||n("pathData",e.value,"pathType",e.baseValue,""+t.getTotalDuration()))}o&&d(t,{set:[{set:void 0,objectAnimator:o}],objectAnimator:void 0})}t[0].target&&(l=E.insertStoredAsset("drawables",a("anim"),ai.applyTemplate("animated-vector",zn,t)))}if(this.IMAGE_DATA.length){const t=[];""!==l&&t.push({drawable:Oi(l)});const e=[{"xmlns:android":s.android,item:t}];for(const e of this.IMAGE_DATA){const n=o.width/o.viewBox.width,i=o.height/o.viewBox.height;let a=e.getBaseValue("x",0)*n,r=e.getBaseValue("y",0)*i,s=e.getBaseValue("width",0),l=e.getBaseValue("height",0);const c=fi(e.element,o.element);a+=c.x,r+=c.y,l*=i;const d={width:ei.formatPX(s*=n),height:ei.formatPX(l),left:0!==a?ei.formatPX(a):"",top:0!==r?ei.formatPX(r):""},h=Oi(E.addImage({mdpi:e.href}));e.rotateAngle?d.rotate={drawable:h,fromDegrees:""+e.rotateAngle,visible:e.visible?"true":"false"}:d.drawable=h,t.push(d)}c=E.insertStoredAsset("drawables",i,ai.applyTemplate("layer-list",ko,e))}else c=l;return c}afterParseDocument(){this.controller.localSettings.svg.enabled=!1}parseVectorData(t,e=0){const o=this.createGroup(t),n=e+o.length;let i="";for(const e of t)if(e.visible)if(Kn.isShape(e)){if(e.path&&e.path.value){const[t,o]=this.createPath(e,e.path),a=[];if(e.path.strokeWidth&&(e.path.strokeDasharray||e.path.strokeDashoffset)){const n=this.ANIMATE_DATA.get(e.name);if(void 0===n||n.animate.every(t=>t.attributeName.startsWith("stroke-dash"))){const[i,r,s,l]=e.path.extractStrokeDash(n&&n.animate,this.options.floatPrecisionValue);if(r){n&&(this.ANIMATE_DATA.delete(e.name),i&&(n.animate=i));const c=Ci(e,"stroke"),d={name:c};""!==s&&(t.pathData=s),""!==l&&(d["clip-path"]=[{pathData:l}]);const h=r.length;for(let e=0;e<h;e++){const o=0===e?t:Object.assign({},t);o.name=`${c}_${e}`,n&&this.ANIMATE_DATA.set(o.name,{element:n.element,animate:ii.filterArray(n.animate,t=>void 0===t.id||t.id===e)}),o.trimPathStart=oi.truncate(r[e].start,this.options.floatPrecisionValue),o.trimPathEnd=oi.truncate(r[e].end,this.options.floatPrecisionValue),a.push(o)}o.unshift(d)}}}if(0===a.length&&a.push(t),o.length){o[o.length-1].path=a,i+=ai.applyTemplate("group",Xo,o,n+1)}else i+=ai.applyTemplate("path",Mo,a,n+1)}}else if(Kn.isContainer(e))e.length&&(i+=this.parseVectorData(e,n));else if(Kn.asImage(e)&&!Kn.asPattern(t)){if(0===e.width||0===e.height){const t=this.resource.getImage(e.href);t&&t.width>0&&t.height>0&&(e.width=t.width,e.height=t.height,e.setRect())}e.extract(this.options.transformExclude.image),this.IMAGE_DATA.push(e)}return o.length?(o[o.length-1].include=i,ai.applyTemplate("group",Xo,o,e+1)):i}createGroup(t){const e=[],o=[],n={"clip-path":e},i={"clip-path":o},a=[],r={};if(!(t!==this.SVG_INSTANCE&&Kn.asSvg(t)||Kn.asUseSymbol(t)||Kn.asUsePattern(t))||0===t.x&&0===t.y||(r.name=Ci(t,"main"),r.translateX=""+t.x,r.translateY=""+t.y),""!==t.clipRegion&&this.createClipPath(t,e,t.clipRegion),(e.length||Object.keys(r).length)&&(Object.assign(n,r),a.push(n)),t!==this.SVG_INSTANCE){const e={},[n]=yi(t.element,t.transforms,!0),r=Ci(t,"animate");if((Kn.asG(t)||Kn.asUseSymbol(t))&&ii.isString(t.clipPath)&&this.createClipPath(t,o,t.clipPath)&&(e.name=r),this.queueAnimations(t,r,t=>Kn.asAnimateTransform(t))&&(e.name=r),Object.keys(e).length&&(Object.assign(i,e),a.push(i)),n.length){let e=[];for(const t of n)a.push(gi(t)),e=e.concat(t);t.transformed=e.reverse()}}return a}createPath(t,e){const o={name:t.name},n=[],i=[];if(Kn.asUse(t)&&ii.isString(t.clipPath)&&this.createClipPath(t,i,t.clipPath),ii.isString(e.clipPath)){const t=new ti(e.element);t.build({exclude:this.options.transformExclude,residual:Ti,precision:this.options.floatPrecisionValue}),t.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),this.createClipPath(t,i,e.clipPath)}const a={},r=Ci(t,"group");if(this.queueAnimations(t,r,t=>Kn.isAnimateTransform(t),"",t.name)?a.name=r:i.length&&(a.name=""),!Kn.asUse(t)||0===t.x&&0===t.y||(a.translateX=""+t.x,a.translateY=""+t.y),i.length&&(a["clip-path"]=i),Object.keys(a).length&&n.push(a),e.transformResidual)for(const t of e.transformResidual)n.push(gi(t));const s=function(t){let e=parseFloat(t.opacity),o=t.parent;for(;o;){const t=parseFloat(o.opacity||"1");!isNaN(t)&&t<1&&(e*=t),o=o.parent}return e}(t),l=Kn.asUse(t);for(let n in e){let i=l&&t[n]||e[n];if(ii.isString(i)){switch(n){case"name":break;case"value":n="pathData";break;case"fill":case"stroke":if(n+="Color","none"===i||"stroke"!==n&&void 0!==o["aapt:attr"])continue;{const t=E.addColor(i);""!==t&&(i=`@color/${t}`)}break;case"fillPattern":const t=this.SVG_INSTANCE.definitions.gradient.get(i);let a=!1;if(t)switch(e.element.tagName){case"path":if(!/[zZ]\s*$/.test(e.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const o=Ni(t,e,this.options.floatPrecisionValue);o&&(i={name:"android:fillColor",gradient:o},a=!0);break}}if(!a)continue;n="aapt:attr",o.fillColor="",this.NAMESPACE_AAPT=!0;break;case"fillRule":if("evenodd"!==i)continue;n="fillType",i="evenOdd";break;case"strokeWidth":if("0"===i)continue;break;case"fillOpacity":case"strokeOpacity":if("1"===(i=""+(ii.isNumber(i)?parseFloat(i):1)*s))continue;n="fillOpacity"===n?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===i)continue;n="strokeLineCap";break;case"strokeLinejoin":if("miter"===i)continue;n="strokeLineJoin";break;case"strokeMiterlimit":if("4"===i)continue;n="strokeMiterLimit";break;default:continue}o[n]=i}}const c=new Map,d=[],h=[],u=e.value;let p=u,m=0;for(const e of t.animations)if(Kn.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);c.set(t,{index:m,time:t,to:e.transformFrom,reset:!1,animate:e}),-1!==e.iterationCount&&e.fillReplace&&(c.has(t=e.delay+e.iterationCount*e.duration)||c.set(t,{index:m,time:t,to:u,reset:!0})),m++}const g=Array.from(c.values()).sort((t,e)=>t.time<e.time?-1:1),f=g.length;for(let t=0;t<f;t++){const e=g[t];if(!e.reset||e.to!==p){let o=!0;if(e.reset)t:for(let n=0;n<t;n++){const i=g[n];if(!i.reset)for(let n=t+1;n<f;n++)switch(g[n].index){case i.index:o=!1;case e.index:break t}}else{const o=[],n=new Set;for(let e=0;e<t;e++){const t=g[e];o[t.index]=o[t.index]?2:1}const i=o.length;for(let t=0;t<i;t++)if(1===o[t]){const e=g.find(e=>e.index===t&&void 0!==e.animate);e&&e.animate&&n.add(e.animate.type)}for(const t of n){const o=Ri(t);if(o){const n=si.TRANSFORM.typeAsValue(t).split(" "),i=n.length;for(let t=0;t<i;t++)d.push(Ei(o[t],e.time,n[t],""))}}}o&&(h.push(Ei("d",e.time,e.to)),p=e.to)}}if(this.queueAnimations(t,o.name,t=>(Kn.asAnimate(t)||Kn.asSet(t))&&"clip-path"!==t.attributeName,u)||0!==h.length||a.name!==r&&(o.name=""),d.length){const t=this.ANIMATE_DATA.get(r);t&&(t.animate=t.animate.concat(d))}if(h.length){const e=this.ANIMATE_DATA.get(o.name);e?e.animate=e.animate.concat(h):this.ANIMATE_DATA.set(o.name,{element:t.element,animate:h,pathData:u})}return[o,n]}createClipPath(t,e,o){let n=0;return o.split(";").forEach((o,i,a)=>{if("#"===o.charAt(0)){const t=this.SVG_INSTANCE.definitions.clipPath.get(o);if(t){const o=new Jn(t);o.build({exclude:this.options.transformExclude,residual:Ti,precision:this.options.floatPrecisionValue}),o.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),o.each(t=>{if(t.path&&t.path.value){let o=Ci(t,"clip_path",a.length>1?i+1:-1);this.queueAnimations(t,o,t=>Kn.asAnimate(t)||Kn.asSet(t),t.path.value)||(o=""),e.push({name:o,pathData:t.path.value})}})}n++}else{let r=Ci(t,"clip_path",a.length>1?i+1:-1);this.queueAnimations(t,r,t=>(Kn.asAnimate(t)||Kn.asSet(t))&&"clip-path"===t.attributeName,o)||(r=""),e.push({name:r,pathData:o}),n++}}),n>0}queueAnimations(t,e,o,n="",i){if(t.animations.length){const a=ii.filterArray(t.animations,(t,e,n)=>!t.paused&&(t.duration>=0||t.setterType)&&o(t,e,n));if(a.length)return this.ANIMATE_DATA.set(e,{element:t.element,animate:a,pathData:n}),i&&this.ANIMATE_TARGET.set(i,{element:t.element,animate:a,pathData:n}),!0}return!1}createPropertyValue(t,e,o,n,i="",a="",r="0"){return{propertyName:t,startOffset:a,duration:o,repeatCount:r,valueType:n,valueFrom:ii.isNumber(i)?oi.truncate(i,this.options.floatPrecisionValue):i,valueTo:ii.isNumber(e)?oi.truncate(e,this.options.floatPrecisionValue):e,propertyValuesHolder:!1}}}const Xi={builtInExtensions:["android.delegate.max-width-height","android.delegate.fixed","android.delegate.negative-x","android.delegate.negative-viewport","android.delegate.percent","android.delegate.scrollbar","android.delegate.radiogroup","squared.external","squared.substitute","squared.sprite","squared.css-grid","squared.flexbox","squared.table","squared.list","squared.grid","squared.relative","squared.verticalalign","squared.whitespace","squared.accessibility","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.includes"],targetAPI:28,resolutionDPI:160,framesPerSecond:60,supportRTL:!0,preloadImages:!0,supportNegativeLeftTop:!0,exclusionsDisabled:!1,customizationsOverwritePrivilege:!0,showAttributes:!0,createQuerySelectorMap:!1,convertPixels:"dp",insertSpaces:4,handleExtensionsAsync:!0,autoCloseOnWrite:!0,showErrorMessages:!0,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputMainFileName:"activity_main.xml",outputDirectory:"app/src/main",outputArchiveName:"android-xml",outputArchiveFormat:"zip",outputArchiveTimeout:30};let Bi,Di,Gi,Wi=!1;const Hi=t=>Wi&&!!t&&(t.closed||!(!Bi||!Bi.userSettings.autoCloseOnWrite||Bi.initializing||Bi.closed||(Bi.finalize(),0))),Vi={base:{Controller:Dt,File:ie,Resource:E,View:nt},extensions:{Accessibility:re,CssGrid:Te,External:ye,Flexbox:we,Grid:Le,List:We,Relative:Ve,Sprite:qe,Substitute:je,Table:Qe,VerticalAlign:eo,WhiteSpace:oo,constraint:{Guideline:so},delegate:{Fixed:uo,MaxWidthHeight:go,NegativeViewport:To,NegativeX:So,Percent:Io,RadioGroup:No,ScrollBar:Lo},resource:{Background:cn,Dimens:yn,Fonts:Cn,Includes:Ln,Strings:Dn,Styles:Fn,Svg:Mi}},lib:{constant:h,customization:_,enumeration:o,util:D},system:{customize(t,e,o){if(x[t]){const n=x[t].assign;return n[e]?Object.assign(n[e],o):n[e]=o,n[e]}},addXmlNs(t,e){s[t]=e},copyLayoutAllXml(t,e){Hi(Bi)&&Di.layoutAllToXml({assets:Bi.layouts,copyTo:t,callback:e})},copyResourceAllXml(t,e){Hi(Bi)&&Di.resourceAllToXml({copyTo:t,callback:e})},copyResourceStringXml(t,e){Hi(Bi)&&Di.resourceStringToXml({copyTo:t,callback:e})},copyResourceArrayXml(t,e){Hi(Bi)&&Di.resourceStringArrayToXml({copyTo:t,callback:e})},copyResourceFontXml(t,e){Hi(Bi)&&Di.resourceFontToXml({copyTo:t,callback:e})},copyResourceColorXml(t,e){Hi(Bi)&&Di.resourceColorToXml({copyTo:t,callback:e})},copyResourceStyleXml(t,e){Hi(Bi)&&Di.resourceStyleToXml({copyTo:t,callback:e})},copyResourceDimenXml(t,e){Hi(Bi)&&Di.resourceDimenToXml({copyTo:t,callback:e})},copyResourceDrawableXml(t,e){Hi(Bi)&&Di.resourceDrawableToXml({copyTo:t,callback:e})},copyResourceDrawableImageXml(t,e){Hi(Bi)&&Di.resourceDrawableImageToXml({copyTo:t,callback:e})},copyResourceAnimXml(t,e){Hi(Bi)&&Di.resourceAnimToXml({copyTo:t,callback:e})},saveLayoutAllXml(t){Hi(Bi)&&Di.layoutAllToXml({assets:Bi.layouts,archiveTo:t||`${Gi.outputArchiveName}-layouts`})},saveResourceAllXml(t){Hi(Bi)&&Di.resourceAllToXml({archiveTo:t||`${Gi.outputArchiveName}-resources`})},saveResourceStringXml(t){Hi(Bi)&&Di.resourceStringToXml({archiveTo:t||`${Gi.outputArchiveName}-string`})},saveResourceArrayXml(t){Hi(Bi)&&Di.resourceStringArrayToXml({archiveTo:t||`${Gi.outputArchiveName}-array`})},saveResourceFontXml(t){Hi(Bi)&&Di.resourceFontToXml({archiveTo:t||`${Gi.outputArchiveName}-font`})},saveResourceColorXml(t){Hi(Bi)&&Di.resourceColorToXml({archiveTo:t||`${Gi.outputArchiveName}-color`})},saveResourceStyleXml(t){Hi(Bi)&&Di.resourceStyleToXml({archiveTo:t||`${Gi.outputArchiveName}-style`})},saveResourceDimenXml(t){Hi(Bi)&&Di.resourceDimenToXml({archiveTo:t||`${Gi.outputArchiveName}-dimen`})},saveResourceDrawableXml(t){Hi(Bi)&&Di.resourceDrawableToXml({archiveTo:t||`${Gi.outputArchiveName}-drawable`})},saveResourceDrawableImageXml(t){Hi(Bi)&&Di.resourceDrawableImageToXml({archiveTo:t||`${Gi.outputArchiveName}-drawable-image`})},saveResourceAnimXml(t){Hi(Bi)&&Di.resourceAnimToXml({archiveTo:t||`${Gi.outputArchiveName}-anim`})},writeLayoutAllXml:()=>Hi(Bi)?Di.layoutAllToXml({assets:Bi.layouts}):{},writeResourceAllXml:()=>Hi(Bi)?Di.resourceAllToXml():{},writeResourceStringXml:()=>Hi(Bi)?Di.resourceStringToXml():[],writeResourceArrayXml:()=>Hi(Bi)?Di.resourceStringArrayToXml():[],writeResourceFontXml:()=>Hi(Bi)?Di.resourceFontToXml():[],writeResourceColorXml:()=>Hi(Bi)?Di.resourceColorToXml():[],writeResourceStyleXml:()=>Hi(Bi)?Di.resourceStyleToXml():[],writeResourceDimenXml:()=>Hi(Bi)?Di.resourceDimenToXml():[],writeResourceDrawableXml:()=>Hi(Bi)?Di.resourceDrawableToXml():[],writeResourceDrawableImageXml:()=>Hi(Bi)?Di.resourceDrawableImageToXml():[],writeResourceAnimXml:()=>Hi(Bi)?Di.resourceAnimToXml():[]},create(){const e=squared.base.lib.constant.EXT_NAME,o=n;return Bi=new t(2,nt,Dt,E,Gt),Di=new ie,Bi.resourceHandler.setFileHandler(Di),Gi=Object.assign({},Xi),Object.assign(Bi.builtInExtensions,{[e.EXTERNAL]:new ye(e.EXTERNAL,2),[e.SUBSTITUTE]:new je(e.SUBSTITUTE,2),[e.SPRITE]:new qe(e.SPRITE,2),[e.CSS_GRID]:new Te(e.CSS_GRID,2),[e.FLEXBOX]:new we(e.FLEXBOX,2),[e.TABLE]:new Qe(e.TABLE,2,void 0,["TABLE"]),[e.LIST]:new We(e.LIST,2,void 0,["DIV","UL","OL","DL"]),[e.GRID]:new Le(e.GRID,2,void 0,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[e.RELATIVE]:new Ve(e.RELATIVE,2),[e.VERTICAL_ALIGN]:new eo(e.VERTICAL_ALIGN,2),[e.WHITESPACE]:new oo(e.WHITESPACE,2),[e.ACCESSIBILITY]:new re(e.ACCESSIBILITY,2),[o.CONSTRAINT_GUIDELINE]:new so(o.CONSTRAINT_GUIDELINE,2),[o.DELEGATE_FIXED]:new uo(o.DELEGATE_FIXED,2),[o.DELEGATE_MAXWIDTHHEIGHT]:new go(o.DELEGATE_MAXWIDTHHEIGHT,2),[o.DELEGATE_NEGATIVEVIEWPORT]:new To(o.DELEGATE_NEGATIVEVIEWPORT,2),[o.DELEGATE_NEGATIVEX]:new So(o.DELEGATE_NEGATIVEX,2),[o.DELEGATE_PERCENT]:new Io(o.DELEGATE_PERCENT,2),[o.DELEGATE_RADIOGROUP]:new No(o.DELEGATE_RADIOGROUP,2),[o.DELEGATE_SCROLLBAR]:new Lo(o.DELEGATE_SCROLLBAR,2),[o.RESOURCE_INCLUDES]:new Ln(o.RESOURCE_INCLUDES,2),[o.RESOURCE_BACKGROUND]:new cn(o.RESOURCE_BACKGROUND,2),[o.RESOURCE_SVG]:new Mi(o.RESOURCE_SVG,2),[o.RESOURCE_STRINGS]:new Dn(o.RESOURCE_STRINGS,2),[o.RESOURCE_FONTS]:new Cn(o.RESOURCE_FONTS,2),[o.RESOURCE_DIMENS]:new yn(o.RESOURCE_DIMENS,2),[o.RESOURCE_STYLES]:new Fn(o.RESOURCE_STYLES,2)}),Wi=!0,{application:Bi,framework:2,userSettings:Gi}},cached:()=>Wi?{application:Bi,framework:2,userSettings:Gi}:Vi.create()};return Vi}();
