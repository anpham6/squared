var android=function(){"use strict";var t;!function(t){t[t.CHECKBOX=1]="CHECKBOX",t[t.RADIO=2]="RADIO",t[t.EDIT=3]="EDIT",t[t.SELECT=4]="SELECT",t[t.RANGE=5]="RANGE",t[t.SVG=6]="SVG",t[t.TEXT=7]="TEXT",t[t.IMAGE=8]="IMAGE",t[t.BUTTON=9]="BUTTON",t[t.INLINE=10]="INLINE",t[t.LINE=11]="LINE",t[t.SPACE=12]="SPACE",t[t.BLOCK=13]="BLOCK",t[t.FRAME=14]="FRAME",t[t.LINEAR=15]="LINEAR",t[t.GRID=16]="GRID",t[t.RELATIVE=17]="RELATIVE",t[t.CONSTRAINT=18]="CONSTRAINT",t[t.WEBVIEW=19]="WEBVIEW",t[t.UNKNOWN=20]="UNKNOWN"}(t||(t={}));var e=Object.freeze({get CONTAINER_NODE(){return t}});const n={DELEGATE_FIXED:"android.delegate.fixed",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEVIEWPORT:"android.delegate.negative-viewport",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_STYLES:"android.resource.styles"},a={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",SELECT:"Spinner",RANGE:"SeekBar",SVG:"ImageView",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},i={PLAINTEXT:t.TEXT,HR:t.LINE,SVG:t.SVG,IMG:t.IMAGE,BUTTON:t.BUTTON,SELECT:t.SELECT,TEXTAREA:t.EDIT,IFRAME:t.WEBVIEW,INPUT_RANGE:t.RANGE,INPUT_TEXT:t.EDIT,INPUT_PASSWORD:t.EDIT,INPUT_NUMBER:t.EDIT,INPUT_EMAIL:t.EDIT,INPUT_SEARCH:t.EDIT,INPUT_URL:t.EDIT,INPUT_DATE:t.EDIT,INPUT_TEL:t.EDIT,INPUT_TIME:t.EDIT,INPUT_WEEK:t.EDIT,INPUT_MONTH:t.EDIT,INPUT_BUTTON:t.BUTTON,INPUT_FILE:t.BUTTON,INPUT_IMAGE:t.BUTTON,INPUT_SUBMIT:t.BUTTON,INPUT_RESET:t.BUTTON,INPUT_CHECKBOX:t.CHECKBOX,INPUT_RADIO:t.RADIO,"INPUT_DATETIME-LOCAL":t.EDIT},o={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},r={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},s={ANDROID:"android",APP:"app",HORIZONTAL:"horizontal",VERTICAL:"vertical",PARENT:"parent",GRAVITY:"gravity",LAYOUT_GRAVITY:"layout_gravity",MATCH_PARENT:"match_parent",WRAP_CONTENT:"wrap_content",MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft",CENTER_HORIZONTAL:"center_horizontal",CENTER_VERTICAL:"center_vertical"},l={left:"start",right:"end",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toRightOf:"layout_toEndOf",layout_toLeftOf:"layout_toStartOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},c=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var d=Object.freeze({EXT_ANDROID:n,CONTAINER_ANDROID:a,ELEMENT_ANDROID:i,SUPPORT_ANDROID:{DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},LAYOUT_ANDROID:o,XMLNS_ANDROID:r,STRING_ANDROID:s,LOCALIZE_ANDROID:l,RESERVED_JAVA:c});const h=squared.base.Resource,u=squared.lib.color,p=squared.lib.css,m=squared.lib.regex,f=squared.lib.util,g=/[^\w+]/g,T="res/values",S="themes.xml",E=h.STORED;let A;function b(t,e=!1){if(t)for(const n in t)if(f.isPlainObject(t[n]))b(t,e);else{let a=""+t[n];switch(n){case"text":if(!a.startsWith("@string/")&&""!==(a=C.addString(a,"",e))){t[n]=`@string/${a}`;continue}break;case"src":case"srcCompat":if(m.PREFIX.PROTOCOL.test(a)&&""!==(a=C.addImage({mdpi:a}))){t[n]=`@drawable/${a}`;continue}}const i=u.parseColor(a);if(i){const e=C.addColor(i);""!==e&&(t[n]=`@color/${e}`)}}}class C extends squared.base.Resource{constructor(t,e){super(t,e),E.styles=new Map,E.themes=new Map,E.dimens=new Map,E.drawables=new Map,E.animators=new Map,A=t.controllerHandler.localSettings.supported.imageFormat}static formatOptions(t,e=!1){for(const n in t){const a=t[n];f.isPlainObject(a)&&b(a,e)}return t}static formatName(t){return m.CHAR.LEADINGNUMBER.test(t)&&(t="__"+t),t.replace(g,"_")}static addTheme(...t){for(const e of t){const t=e.output&&f.isString(e.output.path)?e.output.path.trim():T,n=e.output&&f.isString(e.output.file)?e.output.file.trim():S,a=`${f.trimString(t.trim(),"/")}/${f.trimString(n.trim(),"/")}`,i=E.themes.get(a)||new Map;let o="";if(""===e.name||"."===e.name.charAt(0)){t:for(const t of E.themes.values())for(const e of t.values())if(e.name){o=e.name;break t}if(""===o)continue}else o=e.name;e.name=o+("."===e.name.charAt(0)?e.name:""),C.formatOptions(e.items);const r=i.get(e.name);if(r)for(const t in e.items)r.items[t]=e.items[t];else i.set(e.name,e);E.themes.set(a,i)}}static addString(t,e="",n=!1){if(""!==t){""===e&&(e=t.trim());const a=f.isNumber(t);if(!a||n){for(const[e,n]of E.strings.entries())if(n===t)return e;const n=f.trimString(e.replace(m.XML.NONWORD_G,"_"),"_").split(/_+/);n.length>1?(n.length>4&&(n.length=4),e=n.join("_")):e=n[0],e=e.toLowerCase(),a||m.CHAR.LEADINGNUMBER.test(e)||c.includes(e)?e=`__${e}`:""===e&&(e=`__symbol${Math.ceil(1e5*Math.random())}`),E.strings.has(e)&&(e=C.generateId("string",e)),E.strings.set(e,t)}return e}return""}static addImage(t,e=""){if(t.mdpi){const n=f.fromLastIndexOf(t.mdpi,"/"),a=f.fromLastIndexOf(n,".").toLowerCase();if("svg"!==a&&A.includes(a))return C.insertStoredAsset("images",C.formatName(e+n.substring(0,n.length-a.length-1)),t)}return""}static addColor(t,e=!1){if("string"==typeof t&&(t=u.parseColor(t,void 0,e)),t&&(!t.transparent||e)){const e=t.semiopaque||t.transparent?t.valueAsARGB:t.value;let n=E.colors.get(e);if(n)return n;const a=u.findColorShade(t.value);if(a)return n=e===a.value?a.key:C.generateId("color",a.key),E.colors.set(e,n),n}return""}addImageSrc(t,e="",n){const a={};if("string"==typeof t){const n=m.CSS.URL.exec(t);if(n){if(!n[1].startsWith("data:image/"))return C.addImage({mdpi:f.resolvePath(n[1])},e);a.mdpi=n[1]}}else{if(t.srcset){void 0===n&&(n=p.getSrcSet(t,A));for(const t of n){const e=t.pixelRatio;if(e>0){const n=t.src;e<1?a.ldpi=n:1===e?(void 0===a.mdpi||t.actualWidth)&&(a.mdpi=n):e<=1.5?a.hdpi=n:e<=2?a.xhdpi=n:e<=3?a.xxhdpi=n:a.xxxhdpi=n}}}void 0===a.mdpi&&(a.mdpi=t.src)}if(a.mdpi){const t=this.application.resourceHandler.getRawData(a.mdpi);if(t&&t.base64){const n=e+t.filename;return this.application.resourceHandler.writeRawImage(n,t.base64),n.substring(0,n.lastIndexOf("."))}}return C.addImage(a,e)}get userSettings(){return this.application.userSettings}}const y=squared.lib.constant,R=squared.lib.util;function I(t,e,n,a=0){return(!n||n>=a)&&(t.attr=e,!0)}const N={28:{android:{},assign:{}},27:{android:{accessibilityHeading:!1,accessibilityPaneTitle:!1,appComponentFactory:!1,buttonCornerRadius:!1,cantSaveState:!1,dialogCornerRadius:!1,fallbackLineSpacing:!1,firstBaselineToTopHeight:!1,fontVariationSettings:!1,lastBaselineToBottomHeight:!1,lineHeight:!1,maxLongVersionCode:!1,outlineAmbientShadowColor:!1,outlineSpotShadowColor:!1,screenReaderFocusable:!1,textFontWeight:!1,ttcIndex:!1,versionCodeMajor:!1,versionMajor:!1,widgetFeatures:!1,windowLayoutInDisplayCutoutMode:!1},assign:{}},26:{android:{classLoader:!1,navigationBarDividerColor:!1,showWhenLocked:!1,turnScreenOn:!1,windowLightNavigationBar:!1},assign:{}},25:{android:{fontWeight:!1,justificationMode:!1,layout_marginHorizontal:!1,layout_marginVertical:!1,paddingHorizontal:!1,paddingVertical:!1},assign:{}},24:{android:{colorSecondary:!1,contextDescription:!1,contextUri:!1,roundIcon:!1,shortcutDisabledMessage:!1,shortcutId:!1,shortcutLongLabel:!1,shortcutShortLabel:!1,showMetadataInPreview:!1},assign:{}},23:{android:{backupInForeground:!1,bitmap:!1,buttonGravity:!1,canControlMagnification:!1,canPerformGestures:!1,canRecord:!1,collapseIcon:!1,contentInsetEndWithActions:!1,contentInsetStartWithNavigation:!1,contextPopupMenuStyle:!1,countDown:!1,defaultHeight:!1,defaultToDeviceProtectedStorage:!1,defaultWidth:!1,directBootAware:!1,enableVrMode:!1,endX:!1,endY:!1,externalService:!1,fillType:!1,forceHasOverlappingRendering:!1,hotSpotX:!1,hotSpotY:!1,languageTag:!1,level:!1,listMenuViewStyle:!1,maxButtonHeight:!1,networkSecurityConfig:!1,numberPickerStyle:!1,offset:!1,pointerIcon:!1,popupEnterTransition:!1,popupExitTransition:!1,preferenceFragmentStyle:!1,resizeableActivity:!1,startX:!1,startY:!1,subMenuArrow:!1,supportsLocalInteraction:!1,supportsPictureInPicture:!1,textAppearancePopupMenuHeader:!1,tickMark:!1,tickMarkTint:!1,tickMarkTintMode:!1,titleMargin:!1,titleMarginBottom:!1,titleMarginEnd:!1,titleMarginStart:!1,titleMarginTop:!1,tunerCount:!1,use32bitAbi:!1,version:!1,windowBackgroundFallback:!1},assign:{}},22:{android:{allowUndo:!1,autoVerify:!1,breakStrategy:!1,colorBackgroundFloating:!1,contextClickable:!1,drawableTint:!1,drawableTintMode:!1,end:t=>I(t,y.CSS.RIGHT),extractNativeLibs:!1,fingerprintAuthDrawable:!1,fraction:!1,fullBackupContent:!1,hyphenationFrequency:!1,lockTaskMode:!1,logoDescription:!1,numbersInnerTextColor:!1,scrollIndicators:!1,showForAllUsers:!1,start:t=>I(t,y.CSS.LEFT),subtitleTextColor:!1,supportsAssist:!1,supportsLaunchVoiceAssistFromKeyguard:!1,thumbPosition:!1,titleTextColor:!1,trackTint:!1,trackTintMode:!1,usesCleartextTraffic:!1,windowLightStatusBar:!1},assign:{}},21:{android:{accessibilityTraversalAfter:!1,accessibilityTraversalBefore:!1,collapseContentDescription:!1,dialogPreferredPadding:!1,resizeClip:!1,revisionCode:!1,searchHintIcon:!1},assign:{}},20:{android:{actionBarPopupTheme:!1,actionBarTheme:!1,actionModeFindDrawable:!1,actionModeShareDrawable:!1,actionModeWebSearchDrawable:!1,actionOverflowMenuStyle:!1,amPmBackgroundColor:!1,amPmTextColor:!1,ambientShadowAlpha:!1,autoRemoveFromRecents:!1,backgroundTint:!1,backgroundTintMode:!1,banner:!1,buttonBarNegativeButtonStyle:!1,buttonBarNeutralButtonStyle:!1,buttonBarPositiveButtonStyle:!1,buttonTint:!1,buttonTintMode:!1,calendarTextColor:!1,checkMarkTint:!1,checkMarkTintMode:!1,closeIcon:!1,colorAccent:!1,colorButtonNormal:!1,colorControlActivated:!1,colorControlHighlight:!1,colorControlNormal:!1,colorEdgeEffect:!1,colorPrimary:!1,colorPrimaryDark:!1,commitIcon:!1,contentAgeHint:!1,contentInsetEnd:!1,contentInsetLeft:!1,contentInsetRight:!1,contentInsetStart:!1,controlX1:!1,controlX2:!1,controlY1:!1,controlY2:!1,country:!1,datePickerDialogTheme:!1,datePickerMode:!1,dayOfWeekBackground:!1,dayOfWeekTextAppearance:!1,documentLaunchMode:!1,elegantTextHeight:!1,elevation:!1,excludeClass:!1,excludeId:!1,excludeName:!1,fastScrollStyle:!1,fillAlpha:!1,fillColor:!1,fontFeatureSettings:!1,foregroundTint:!1,foregroundTintMode:!1,fragmentAllowEnterTransitionOverlap:!1,fragmentAllowReturnTransitionOverlap:!1,fragmentEnterTransition:!1,fragmentExitTransition:!1,fragmentReenterTransition:!1,fragmentReturnTransition:!1,fragmentSharedElementEnterTransition:!1,fragmentSharedElementReturnTransition:!1,fromId:!1,fullBackupOnly:!1,goIcon:!1,headerAmPmTextAppearance:!1,headerDayOfMonthTextAppearance:!1,headerMonthTextAppearance:!1,headerTimeTextAppearance:!1,headerYearTextAppearance:!1,hideOnContentScroll:!1,indeterminateTint:!1,indeterminateTintMode:!1,inset:!1,isGame:!1,launchTaskBehindSourceAnimation:!1,launchTaskBehindTargetAnimation:!1,layout_columnWeight:!1,layout_rowWeight:!1,letterSpacing:!1,matchOrder:!1,maxRecentsv:!1,maximumAngle:!1,minimumHorizontalAngle:!1,minimumVerticalAngle:!1,multiArch:!1,navigationBarColor:!1,navigationContentDescription:!1,navigationIcon:!1,nestedScrollingEnabled:!1,numbersBackgroundColor:!1,numbersSelectorColor:!1,numbersTextColor:!1,outlineProvider:!1,overlapAnchor:!1,paddingMode:!1,pathData:!1,patternPathData:!1,persistableMode:!1,popupElevation:!1,popupTheme:!1,progressBackgroundTint:!1,progressBackgroundTintMode:!1,progressTint:!1,progressTintMode:!1,propertyXName:!1,propertyYName:!1,queryBackground:!1,recognitionService:!1,relinquishTaskIdentity:!1,reparent:!1,reparentWithOverlay:!1,restrictionType:!1,resumeWhilePausing:!1,reversible:!1,searchIcon:!1,searchViewStyle:!1,secondaryProgressTint:!1,secondaryProgressTintMode:!1,selectableItemBackgroundBorderless:!1,sessionService:!1,setupActivity:!1,showText:!1,slideEdge:!1,splitTrack:!1,spotShadowAlpha:!1,src:(t,e,n)=>(n.svgElement&&(t.obj="app",t.attr="srcCompat"),!0),stackViewStyle:!1,stateListAnimator:!1,statusBarColor:!1,strokeAlpha:!1,strokeColor:!1,strokeLineCap:!1,strokeLineJoin:!1,strokeMiterLimit:!1,strokeWidth:!1,submitBackground:!1,subtitleTextAppearance:!1,suggestionRowLayout:!1,switchStyle:!1,targetName:!1,textAppearanceListItemSecondary:!1,thumbTint:!1,thumbTintMode:!1,tileModeX:!1,tileModeY:!1,timePickerDialogTheme:!1,timePickerMode:!1,timePickerStyle:!1,tintMode:!1,titleTextAppearance:!1,toId:!1,toolbarStyle:!1,touchscreenBlocksFocus:!1,transitionGroup:!1,transitionName:!1,transitionVisibilityMode:!1,translateX:!1,translateY:!1,translationZ:!1,trimPathEnd:!1,trimPathOffset:!1,trimPathStart:!1,viewportHeight:!1,viewportWidth:!1,voiceIcon:!1,windowActivityTransitions:!1,windowAllowEnterTransitionOverlap:!1,windowAllowReturnTransitionOverlap:!1,windowClipToOutline:!1,windowContentTransitionManager:!1,windowContentTransitions:!1,windowDrawsSystemBarBackgrounds:!1,windowElevation:!1,windowEnterTransition:!1,windowExitTransition:!1,windowReenterTransition:!1,windowReturnTransition:!1,windowSharedElementEnterTransition:!1,windowSharedElementExitTransition:!1,windowSharedElementReenterTransition:!1,windowSharedElementReturnTransition:!1,windowSharedElementsUseOverlay:!1,windowTransitionBackgroundFadeDuration:!1,yearListItemTextAppearance:!1,yearListSelectorColor:!1},assign:{}},19:{android:{allowEmbedded:!1,windowSwipeToDismiss:!1},assign:{}},18:{android:{accessibilityLiveRegion:!1,addPrintersActivity:!1,advancedPrintOptionsActivity:!1,apduServiceBanner:!1,autoMirrored:!1,category:!1,fadingMode:!1,fromScene:!1,isAsciiCapable:!1,keySet:!1,requireDeviceUnlock:!1,ssp:!1,sspPattern:!1,sspPrefix:!1,startDelay:!1,supportsSwitchingToNextInputMethod:!1,targetId:!1,toScene:!1,transition:!1,transitionOrdering:!1,vendor:!1,windowTranslucentNavigation:!1,windowTranslucentStatus:!1},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(t,e)=>e<26,canRequestFilterKeyEvents:!1,canRequestTouchExplorationMode:!1,childIndicatorEnd:!1,childIndicatorStart:!1,indicatorEnd:!1,indicatorStart:!1,layoutMode:!1,mipMap:!1,mirrorForRtl:!1,requiredAccountType:!1,requiredForAllUsers:!1,restrictedAccountType:!1,windowOverscan:!1},assign:{}},16:{android:{checkedTextViewStyle:!1,format12Hour:!1,format24Hour:!1,initialKeyguardLayout:!1,labelFor:!1,layoutDirection:!1,layout_alignEnd:t=>I(t,"layout_alignRight"),layout_alignParentEnd:t=>I(t,"layout_alignParentRight"),layout_alignParentStart:t=>I(t,"layout_alignParentLeft"),layout_alignStart:t=>I(t,"layout_alignLeft"),layout_marginEnd:t=>I(t,"layout_marginRight"),layout_marginStart:t=>I(t,"layout_marginLeft"),layout_toEndOf:t=>I(t,"layout_toRightOf"),layout_toStartOf:t=>I(t,"layout_toLeftOf"),listPreferredItemPaddingEnd:t=>I(t,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:t=>I(t,"listPreferredItemPaddingLeft"),paddingEnd:t=>I(t,s.PADDING_RIGHT),paddingStart:t=>I(t,s.PADDING_LEFT),permissionFlags:!1,permissionGroupFlags:!1,presentationTheme:!1,showOnLockScreen:!1,singleUser:!1,subtypeId:!1,supportsRtl:!1,textAlignment:!1,textDirection:!1,timeZone:!1,widgetCategory:!1},assign:{}},15:{android:{fontFamily:!1,importantForAccessibility:!1,isolatedProcess:!1,keyboardLayout:!1,mediaRouteButtonStyle:!1,mediaRouteTypes:!1,parentActivityName:!1},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},_={android:{amPmBackgroundColor:(t,e)=>I(t,"headerBackground",e,23),amPmTextColor:(t,e)=>I(t,"headerTextColor",e,23),animationResolution:(t,e)=>e<16,canRequestEnhancedWebAccessibility:(t,e)=>e<26,dayOfWeekBackground:(t,e)=>e<23,dayOfWeekTextAppearance:(t,e)=>e<23,directionDescriptions:(t,e)=>e<23,headerAmPmTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),headerDayOfMonthTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),headerMonthTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),headerTimeTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),headerYearTextAppearance:(t,e)=>I(t,"headerTextColor",e,23),showOnLockScreen:(t,e)=>I(t,"showForAllUsers",e,23),targetDescriptions:(t,e)=>e<23,yearListItemTextAppearance:(t,e)=>I(t,"yearListTextColor",e,23),yearListSelectorColor:(t,e)=>e<23}};var O=Object.freeze({API_ANDROID:N,DEPRECATED_ANDROID:_,getValue:function(t,e,n,a){for(const i of[N[t],N[0]]){const t=R.optionalAsString(i,`assign.${e}.${n}.${a}`);if(R.isString(t))return t}return""}});const P=squared.lib.constant,x=squared.lib.util,L=/^@\+?id\//;function v(t,e,n=4){return 0===t?0:0===e?1:parseFloat(Math.max(t/(t+e),0).toPrecision(n))}function w(t){return t.replace(L,"")}function H(t,e={},n={}){return Object.assign({android:e,app:n},t)}function M(t){const e={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(x.isPlainObject(t))for(const n in e)typeof t[n]==typeof e[n]&&(e[n]=t[n]);return e}function D(t,e,n){return e&&n>=17&&l[t]||t}function G(t){return r[t]?`xmlns:${t}="${r[t]}"`:""}function B(t){let e="";for(const n in r)-1!==t.indexOf(`${n}:`)&&(e+=`\n\t${G(n)}`);return e}var k=Object.freeze({getDocumentId:w,getHorizontalBias:function(t){const e=t.documentParent;return v(Math.max(0,t.actualRect(P.CSS.LEFT,"bounds")-e.box.left),Math.max(0,e.box.right-t.actualRect(P.CSS.RIGHT,"bounds")),t.localSettings.floatPrecision)},getVerticalBias:function(t){const e=t.documentParent;return v(Math.max(0,t.actualRect(P.CSS.TOP,"bounds")-e.box.top),Math.max(0,e.box.bottom-t.actualRect(P.CSS.BOTTOM,"bounds")),t.localSettings.floatPrecision)},createViewAttribute:H,createStyleAttribute:M,localizeString:D,getXmlNs:G,getRootNs:B}),W=squared.base.NodeList,X=squared.base.Resource;const V=squared.lib.client,F=squared.lib.constant,z=squared.lib.css,q=squared.lib.dom,U=squared.lib.math,Y=squared.lib.util,$=squared.base.lib.constant,j=squared.base.lib.enumeration,Z=/^attr[A-Z]/,K=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,J=/[^\w$\-_.]/g;function Q(t,e=!1){switch(t){case"justify":case"initial":case"inherit":return"";case F.CSS.CENTER:return s.CENTER_HORIZONTAL;case F.CSS.START:case F.CSS.LEFT:if(e)return"";default:return t}}function tt(t){if(!t.blockWidth||t.hasWidth||t.has("maxWidth")||t.innerWrapped&&t.innerWrapped.has(F.CSS.WIDTH,32,{not:F.CSS.PERCENT_100})){const e=[];if(t.autoMargin.leftRight?e.push(s.CENTER_HORIZONTAL):t.autoMargin.left?e.push(F.CSS.RIGHT):t.autoMargin.right&&e.push(F.CSS.LEFT),t.autoMargin.topBottom?e.push(s.CENTER_VERTICAL):t.autoMargin.top?e.push(F.CSS.BOTTOM):t.autoMargin.bottom&&e.push(F.CSS.TOP),e.length){const n=void 0!==t.outerWrapper||!t.blockWidth&&t.pageFlow?s.LAYOUT_GRAVITY:s.GRAVITY;for(const a of e)t.mergeGravity(n,a);return!0}}return!1}function et(t,e,n){if(t.localSettings.targetAPI>=28)t.android("lineHeight",z.formatPX(e),n);else{const a=(e-t.actualHeight)/2;a>0&&t.android("lineSpacingExtra",z.formatPX(a),n)}if(t.styleElement&&!t.has(F.CSS.HEIGHT)&&t.cssTry("lineHeight","normal")){if(t.cssTry("whiteSpace","nowrap")){const n=(e-t.element.getBoundingClientRect().height)/2;Math.floor(n)>0&&(t.modifyBox(32,Math.round(n)),t.blockStatic||t.modifyBox(128,Math.floor(n))),t.cssFinally("whiteSpace")}t.cssFinally("lineHeight")}}function nt(e,n,a,i=!0,o=!0){if(!e.is(t.IMAGE)&&0!==e.actualHeight)if(e.multiline)et(e,n,!1);else if(0===e.length&&(e.pageFlow||e.textContent.length)){let t=0,r=!0;if(e.styleElement&&!a&&!e.has(F.CSS.HEIGHT)&&e.cssTry("lineHeight","normal"))e.cssTry("whiteSpace","nowrap")&&(t=(n-(e.element.getBoundingClientRect().height||e.actualHeight))/2,e.cssFinally("whiteSpace"),r=!1),e.cssFinally("lineHeight");else{if(a&&e.inlineText&&!e.inline)return void at(e,n);t=(n-e.actualHeight)/2}Math.floor(t)>0&&(i&&e.modifyBox(r&&e.textElement&&!e.plainText&&!a?32:2,Math.round(t)),o&&e.modifyBox(r&&e.textElement&&!e.plainText&&!a?128:8,Math.floor(t)))}else a&&(!e.hasHeight||n>e.height)&&(e.layoutHorizontal&&void 0===e.horizontalRows||e.hasAlign(2048))&&at(e,n)}function at(t,e){t.inlineText&&(e+=t.contentBoxHeight,t.mergeGravity(s.GRAVITY,s.CENTER_VERTICAL,!1)),e>t.height&&t.android("minHeight",z.formatPX(e))}function it(t){t.android("maxLines","1"),t.android("ellipsize",F.CSS.END)}const ot=(e,n)=>!!e.renderParent&&n===F.CSS.PX_0&&(e.renderParent.layoutConstraint||e.renderParent.is(t.GRID));var rt=e=>(class n extends e{constructor(t=0,e="0",n,a){super(t,e,n),this.renderChildren=[],this.constraint={horizontal:!1,vertical:!1,current:{}},this._namespaces=[s.ANDROID,s.APP],this._cached={},this._controlName="",this._fontSize=0,this._boxAdjustment=q.newBoxModel(),this._boxReset=q.newBoxModel(),this._containerType=0,this._localSettings={targetAPI:28,supportRTL:!1,floatPrecision:3},this.__android={},this.__app={},a&&a(this)}static documentBody(){if(void 0===n._documentBody){const t=new n(0,"0",document.body);t.hide(),t.setBounds(),n._documentBody=t}return n._documentBody}static getControlName(e){return a[t[e]]}attr(t,e,n,a=!0){return super.attr(t,e,n,a)}android(t,e,n=!0){if(e){if(this.localSettings.targetAPI<28){const a={};if(!this.supported(t,a))return"";Object.keys(a).length&&(Y.isString(a.attr)&&(t=a.attr),Y.isString(a.value)&&(e=a.value),"boolean"==typeof a.overwrite&&(n=a.overwrite))}this.attr(s.ANDROID,t,e,n)}return this.__android[t]||""}app(t,e,n=!0){return e&&this.attr(s.APP,t,e,n),this.__app[t]||""}apply(t){const e=Object.assign({},t);super.apply(e);for(const t in e)this.formatted(`${t}="${e[t]}"`)}formatted(t,e=!0){const n=K.exec(t);n&&this.attr(n[1]||"_",n[2],n[3],e)}anchor(t,e="",n){const a=this.anchorTarget,i=a.renderParent;if(i&&a.documentId!==e)if(i.layoutConstraint){if(""===e||void 0===a.constraint.current[t]||n){e&&void 0===n&&(n=e===s.PARENT);const i=o.constraint[t];if(i){a.app(this.localizeString(i),e,n);let o=!1;switch(t){case F.CSS.LEFT:case F.CSS.RIGHT:e===s.PARENT&&(a.constraint.horizontal=!0);case $.STRING_BASE.LEFT_RIGHT:case $.STRING_BASE.RIGHT_LEFT:o=!0;break;case F.CSS.TOP:case F.CSS.BOTTOM:case"baseline":e===s.PARENT&&(a.constraint.vertical=!0)}return a.constraint.current[t]={documentId:e,horizontal:o},!0}}}else if(i.layoutRelative){return e&&void 0===n&&(n="true"===e),a.android(this.localizeString(o["true"===e?"relativeParent":"relative"][t]),e,n),!0}return!1}anchorParent(t,e,n,a){const i=this.anchorTarget,o=i.renderParent;if(o){const r=t===s.HORIZONTAL;if(o.layoutConstraint){if(a||!this.constraint[t])return i.anchor(r?F.CSS.LEFT:F.CSS.TOP,s.PARENT,a),i.anchor(r?F.CSS.RIGHT:F.CSS.BOTTOM,s.PARENT,a),i.constraint[t]=!0,void 0!==e&&i.anchorStyle(t,e,n,a),!0}else if(o.layoutRelative)return i.anchor(r?F.CSS.LEFT:F.CSS.TOP,"true",a),i.anchor(r?F.CSS.RIGHT:F.CSS.BOTTOM,"true",a),!0}return!1}anchorStyle(t,e="packed",n=0,a=!0){const i=this.anchorTarget;i.app(t===s.HORIZONTAL?"layout_constraintHorizontal_chainStyle":"layout_constraintVertical_chainStyle",e,a),i.app(t===s.HORIZONTAL?"layout_constraintHorizontal_bias":"layout_constraintVertical_bias",""+n,a)}anchorDelete(...t){const e=this.anchorTarget,n=e.renderParent;if(n)if(n.layoutConstraint)e.delete(s.APP,...Y.replaceMap(t,t=>this.localizeString(o.constraint[t])));else if(n.layoutRelative)for(const n of t)""!==e.alignSibling(n)?e.delete(s.ANDROID,o.relative[n],this.localizeString(o.relative[n])):o.relativeParent[n]&&e.delete(s.ANDROID,this.localizeString(o.relativeParent[n]))}anchorClear(){const t=this.anchorTarget,e=t.renderParent;e&&(e.layoutConstraint?t.anchorDelete(...Object.keys(o.constraint)):e.layoutRelative&&(t.anchorDelete(...Object.keys(o.relativeParent)),t.anchorDelete(...Object.keys(o.relative))))}alignParent(t){const e=this.anchorTarget,n=e.renderParent;if(n)if(n.layoutConstraint){const n=o.constraint[t];if(n)return e.app(this.localizeString(n))===s.PARENT||e.app(n)===s.PARENT}else if(n.layoutRelative){const n=o.relativeParent[t];if(n)return"true"===e.android(this.localizeString(n))||"true"===e.android(n)}return!1}alignSibling(t,e){const n=this.anchorTarget,a=n.renderParent;if(a)if(e){if(a.layoutConstraint){const a=o.constraint[t];a&&n.app(this.localizeString(a),e)}else if(a.layoutRelative){const a=o.relative[t];a&&n.android(this.localizeString(a),e)}}else if(a.layoutConstraint){const e=o.constraint[t];if(e){const t=n.app(this.localizeString(e))||n.app(e);return t!==s.PARENT&&t!==a.documentId?t:""}}else if(a.layoutRelative){const e=o.relative[t];if(e)return n.android(this.localizeString(e))||n.android(e)}return""}supported(t,e={}){if(this.localSettings.targetAPI<28){const n=_.android;if(n&&"function"==typeof n[t]){const a=n[t](e,this.localSettings.targetAPI,this);if(!a||Object.keys(e).length)return a}for(let n=this.localSettings.targetAPI;n<=28;n++){const a=N[n];if(a&&void 0!==a.android[t]){const n=a.android[t];return"function"==typeof n?n(e,this.localSettings.targetAPI,this):n}}}return!0}combine(...t){const e=[];let n;for(const a of this._namespaces)if(0===t.length||t.includes(a)){const t=this[`__${a}`];if(t)for(const i in t){const o=("_"!==a?`${a}:`:"")+`${i}="${t[i]}"`;"id"===i?n=o:e.push(o)}}return e.sort((t,e)=>t>e?1:-1),n&&e.unshift(n),e}localizeString(t){return this.hasProcedure(j.NODE_PROCEDURE.LOCALIZATION)?D(t,this.localSettings.supportRTL,this.localSettings.targetAPI):t}hide(t){t?this.android("visibility","invisible"):super.hide()}clone(t,e=!1,a=!1){const i=new n(t||this.id,this.sessionId,this.element||void 0);if(void 0!==t?i.setControlType(this.controlName,this.containerType):(i.controlId=this.controlId,i.controlName=this.controlName,i.containerType=this.containerType),this.cloneBase(i),e){Object.assign(i.unsafe("boxReset"),this._boxReset),Object.assign(i.unsafe("boxAdjustment"),this._boxAdjustment);for(const t of this._namespaces){const e=this[`__${t}`];for(const n in e)i.attr(t,n,t===s.ANDROID&&"id"===n?i.documentId:e[n])}}return a&&(i.anchorClear(),i.anchor(F.CSS.LEFT,this.documentId)&&(i.modifyBox(16),Object.assign(i.unsafe("boxAdjustment"),{marginLeft:0})),i.anchor(F.CSS.TOP,this.documentId)&&(i.modifyBox(2),Object.assign(i.unsafe("boxAdjustment"),{marginTop:0}))),i}setControlType(e,n){if(this.controlName=e,n?this.containerType=n:0===this.containerType&&(this.containerType=t.UNKNOWN),""===this.controlId){let t;this.styleElement&&this.naturalElement&&((t=(t=>t?t.trim().replace(J,"_"):"")(this.elementId||q.getNamedItem(this.element,"name")))===s.PARENT||c.includes(t))&&(t=`_${t}`),this.controlId=Y.convertWord(X.generateId(s.ANDROID,t||Y.fromLastIndexOf(this.controlName,".").toLowerCase(),t?0:1)),this.android("id",this.documentId)}}setLayout(){const e=this.renderParent;if(e){switch(this.cssAscend("visibility",!0)){case"hidden":case"collapse":this.hide(!0)}if(this.plainText)return this.setLayoutWidth(s.WRAP_CONTENT,!1),void this.setLayoutHeight(s.WRAP_CONTENT,!1);const n=this.documentParent;let a=!1;if(this.documentBody&&(!this.hasWidth&&this.renderChildren.some(t=>t.alignParent(F.CSS.RIGHT))&&this.setLayoutWidth(s.MATCH_PARENT,!1),!this.hasHeight&&this.renderChildren.some(t=>t.alignParent(F.CSS.BOTTOM))&&this.setLayoutHeight(s.MATCH_PARENT,!1)),""===this.layoutWidth){let i="";if(!this.inlineStatic&&this.has(F.CSS.WIDTH)||this.toInt(F.CSS.WIDTH)>0&&""===this.cssInitial(F.CSS.WIDTH)){const o=this.css(F.CSS.WIDTH);let r=-1;if(z.isLength(o))r=this.actualWidth;else if(z.isPercent(o))if(e.is(t.GRID))i=F.CSS.PX_0,this.android("layout_columnWeight",U.truncate(parseFloat(o)/100,this.localSettings.floatPrecision));else if(this.imageElement)o!==F.CSS.PERCENT_100||e.flexibleWidth||e.inlineWidth?(r=this.bounds.width,a=!0):i=s.MATCH_PARENT;else if(this.inputElement)r=this.bounds.width;else if(o===F.CSS.PERCENT_100){if(!this.support.maxWidth){const t=this.css("maxWidth"),a=this.parseUnit(t),o=this.absoluteParent||n;t===F.CSS.PERCENT_100?!e.inlineWidth&&Y.aboveRange(a,o.box.width)?i=s.MATCH_PARENT:r=Math.min(this.actualWidth,a):a>0&&(this.blockDimension?r=Math.min(this.actualWidth,a):i=Math.ceil(a)<Math.floor(o.width)?s.WRAP_CONTENT:s.MATCH_PARENT)}""!==i||!this.documentRoot&&e.inlineWidth||(i=s.MATCH_PARENT)}else r=this.actualWidth;r>0&&(i=z.formatPX(r))}else this.imageElement&&this.has(F.CSS.HEIGHT)&&(i=s.WRAP_CONTENT,a=!0);""===i&&(this.textElement&&this.inlineText&&this.textEmpty&&!this.visibleStyle.backgroundImage?i=z.formatPX(this.actualWidth):(!this.blockStatic||this.inputElement||e.is(t.GRID)||(n.layoutElement&&"flex"!==this.display?!n.flexElement&&e.layoutConstraint&&this.alignParent(F.CSS.LEFT)&&this.alignParent(F.CSS.RIGHT)&&(i=this.autoMargin.horizontal||this.ascend(!1,t=>t.has(F.CSS.WIDTH)||t.blockStatic).length?F.CSS.PX_0:s.MATCH_PARENT):i=s.MATCH_PARENT),""===i&&(e.blockWidth&&this.layoutVertical&&(e.layoutFrame&&this.rightAligned||this.layoutLinear&&this.actualChildren.some(t=>t.lineBreak)||this.renderChildren.some(t=>t.layoutConstraint&&t.blockStatic))||!this.pageFlow&&this.absoluteParent===n&&this.has(F.CSS.LEFT)&&this.has(F.CSS.RIGHT)||n.flexElement&&this.flexbox.grow>0&&e.flexibleWidth&&"column"!==n.css("flexDirection"))&&(i=s.MATCH_PARENT))),this.setLayoutWidth(i||s.WRAP_CONTENT)}if(""===this.layoutHeight){let i="";if(!this.inlineStatic&&this.has(F.CSS.HEIGHT)||this.toInt(F.CSS.HEIGHT)>0&&""===this.cssInitial(F.CSS.HEIGHT)){const o=this.css(F.CSS.HEIGHT);let r=-1;if(z.isLength(o))r=this.actualHeight;else if(z.isPercent(o)){if(this.imageElement)o!==F.CSS.PERCENT_100||e.flexibleHeight||e.inlineHeight?(r=this.bounds.height,a=!0):i=s.MATCH_PARENT;else if(this.inputElement)r=this.bounds.height;else if(o===F.CSS.PERCENT_100){if(!this.support.maxHeight){const t=this.css("maxHeight"),a=this.parseUnit(t),o=this.absoluteParent||n;t===F.CSS.PERCENT_100?!e.inlineHeight&&Y.aboveRange(a,o.box.height)?i=s.MATCH_PARENT:r=Math.min(this.actualHeight,a):a>0&&(this.blockDimension?r=Math.min(this.actualHeight,a):i=Math.ceil(a)<Math.floor(o.box.height)?s.WRAP_CONTENT:s.MATCH_PARENT)}""!==i||!this.documentRoot&&e.inlineHeight||(i=s.MATCH_PARENT)}""===i&&this.hasHeight&&(r=this.actualHeight)}r>0&&(this.is(t.LINE)&&"HR"!==this.tagName&&this.has(F.CSS.HEIGHT,0,{map:"initial"})&&(r+=this.borderTopWidth+this.borderBottomWidth),i=z.formatPX(r))}else this.imageElement&&this.has(F.CSS.WIDTH)&&(i=s.WRAP_CONTENT,a=!0);""===i&&(this.textEmpty&&!this.visibleStyle.backgroundImage?e.layoutConstraint&&this.alignParent(F.CSS.TOP)&&this.actualHeight>=(this.absoluteParent||n).box.height?(i=F.CSS.PX_0,this.anchor(F.CSS.BOTTOM,s.PARENT)):i=z.formatPX(this.actualHeight):("table-cell"===this.display||!this.pageFlow&&this.leftTopAxis&&this.has(F.CSS.TOP)&&this.has(F.CSS.BOTTOM)||void 0===this.outerWrapper&&this.singleChild&&e.flexElement&&!e.inlineHeight&&"row"===e.css("flexDirection"))&&(i=s.MATCH_PARENT)),this.setLayoutHeight(i||s.WRAP_CONTENT)}if(this.has("minWidth")&&this.android("minWidth",this.convertPX(this.css("minWidth")),!1),this.has("minHeight")&&this.android("minHeight",this.convertPX(this.css("minHeight"),F.CSS.HEIGHT),!1),this.support.maxWidth){const t=this.css("maxWidth");let e=-1;z.isLength(t,!0)?t===F.CSS.PERCENT_100?this.imageElement?e=this.element.naturalWidth:this.svgElement&&(e=this.bounds.width):e=this.parseUnit(this.css("maxWidth")):!this.pageFlow&&this.textElement&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&!/\n/.test(this.textContent)&&(e=Math.ceil(this.bounds.width)),-1!==e&&(this.android("maxWidth",z.formatPX(e),!1),this.imageElement&&(a=!0))}if(this.support.maxHeight){const t=this.css("maxHeight");if(z.isLength(t,!0)){let e=-1;(e=t===F.CSS.PERCENT_100&&this.imageElement?this.element.naturalHeight:this.parseUnit(this.css("maxHeight"),F.CSS.HEIGHT))>=0&&(this.android("maxHeight",z.formatPX(e)),this.imageElement&&(a=!0))}}(a||this.imageElement&&(this.blockWidth||this.blockHeight))&&this.android("adjustViewBounds","true")}}setAlignment(){const e=this.renderParent;if(e){const n=this.hasAlign(512),a=this.outerWrapper||this,i=a.renderParent||e;let o=Q(this.cssInitial("textAlign",!0)),r=Q(this.cssAscend("textAlign"),!0);if(this.groupParent&&!n&&""===o){const t=W.actualParent(this.renderChildren);t&&(o=Q(t.cssInitial("textAlign",!0)))}if(this.pageFlow){let l="";if(this.inlineVertical&&(i.layoutHorizontal&&!i.support.container.positionRelative||i.is(t.GRID))){const t="table-cell"===this.display?s.GRAVITY:s.LAYOUT_GRAVITY;switch(this.cssInitial("verticalAlign",!0)){case F.CSS.TOP:a.mergeGravity(t,F.CSS.TOP);break;case F.CSS.MIDDLE:a.mergeGravity(t,s.CENTER_VERTICAL);break;case F.CSS.BOTTOM:a.mergeGravity(t,F.CSS.BOTTOM)}}if(this.blockWidth?a.groupParent&&a.layoutVertical&&this.rightAligned&&a.renderEach(t=>{t.rightAligned&&t.mergeGravity(s.LAYOUT_GRAVITY,F.CSS.RIGHT)}):((i.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))&&(this.floating?a.mergeGravity(s.LAYOUT_GRAVITY,this.float):tt(a)||""===o||!this.hasWidth||this.blockStatic||"table"===this.display||a.mergeGravity(s.LAYOUT_GRAVITY,o,!1)),this.rightAligned||this.renderChildren.length&&this.renderChildren.every(t=>t.rightAligned)?l=F.CSS.RIGHT:this.groupParent&&n&&!this.renderChildren.some(t=>t.rightAligned)&&(l=F.CSS.LEFT)),e.layoutFrame&&void 0===this.innerWrapped){if(tt(this)||(this.floating&&(l=this.float),""!==l&&(e.inlineWidth||!e.documentRoot&&this.singleChild)&&e.mergeGravity(s.LAYOUT_GRAVITY,l)),this.singleChild&&"table-cell"===e.display){let t;switch(e.css("verticalAlign")){case F.CSS.TOP:t=F.CSS.TOP;break;case F.CSS.BOTTOM:t=F.CSS.BOTTOM;break;default:t=s.CENTER_VERTICAL}this.mergeGravity(s.LAYOUT_GRAVITY,t)}}else i.layoutFrame&&e.blockWidth&&this.rightAligned&&this.mergeGravity(s.LAYOUT_GRAVITY,F.CSS.RIGHT);""!==l?this.blockWidth?""!==o&&l!==F.CSS.RIGHT||(o=l):(a.blockWidth&&this!==a?this:a).mergeGravity(s.LAYOUT_GRAVITY,l):tt(a.inlineWidth?a:this)&&""!==o&&(r="")}if(""!==r)if(this.blockStatic)a.mergeGravity(s.LAYOUT_GRAVITY,F.CSS.LEFT,!1);else if(!this.blockWidth&&this.naturalElement&&(e.layoutFrame||e.layoutVertical&&e.layoutLinear)){const t=e.inlineWidth?e:a;t.documentRoot||t.mergeGravity(s.LAYOUT_GRAVITY,r,!1)}if(!(this.layoutConstraint||this.layoutFrame||this.is(t.GRID)||this.layoutElement)){let t=!1;""===o&&(o=r,t=!0),""!==o&&this.mergeGravity(s.GRAVITY,o,!t)}}}mergeGravity(t,e,n=!0){if(t===s.LAYOUT_GRAVITY){const t=this.renderParent;if(t){if(function(t){switch(t){case F.CSS.LEFT:case F.CSS.START:case F.CSS.RIGHT:case F.CSS.END:case s.CENTER_HORIZONTAL:return!0}return!1}(e)&&(this.blockWidth||t.inlineWidth&&this.singleChild||!n&&this.outerWrapper&&this.has("maxWidth")))return;if(t.layoutConstraint){if(!t.layoutHorizontal&&!this.positioned)switch(e){case F.CSS.TOP:this.anchor(F.CSS.TOP,s.PARENT,!1);break;case F.CSS.RIGHT:case F.CSS.END:this.anchor(F.CSS.RIGHT,s.PARENT,!1);break;case F.CSS.BOTTOM:this.anchor(F.CSS.BOTTOM,s.PARENT,!1);break;case F.CSS.LEFT:case F.CSS.START:this.anchor(F.CSS.LEFT,s.PARENT,!1);break;case s.CENTER_HORIZONTAL:this.anchorParent(s.HORIZONTAL,void 0,void 0,!0)}return}}}const a=new Set,i=this.android(t);if(""!==i)for(const t of i.split("|"))a.add(t);a.add(this.localizeString(e));let o="";switch(a.size){case 0:break;case 1:o=Q(a.values().next().value);default:function r(t){const e=`${t}_horizontal`,n=`${t}_vertical`;(a.has(t)||a.has(e)&&a.has(n))&&(a.delete(e),a.delete(n),a.add(t))}r(F.CSS.CENTER),r("fill");let t="",e="",i="";for(const o of a.values())switch(o){case F.CSS.LEFT:case F.CSS.START:case F.CSS.RIGHT:case F.CSS.END:case s.CENTER_HORIZONTAL:(""===t||n)&&(t=o);break;case F.CSS.TOP:case F.CSS.BOTTOM:case s.CENTER_VERTICAL:(""===e||n)&&(e=o);break;default:i+=(""!==i?"|":"")+o}o=""!==t&&""!==e?`${t}|${e}`:t||e,""!==i&&(o+=(""!==o?"|":"")+i)}""!==o&&this.android(t,o)}applyOptimizations(){const e=this.renderParent;if(e){!(this.tableElement?"content-box"===this.css("boxSizing")||V.isUserAgent(8):this.styleElement)||!this.visibleStyle.borderWidth||this.is(t.LINE)||0!==this.actualChildren.length&&this.actualChildren.every(t=>!t.pageFlow&&t.absoluteParent===this)||(this.modifyBox(256,this.borderLeftWidth),this.modifyBox(64,this.borderRightWidth),this.modifyBox(32,this.borderTopWidth),this.modifyBox(128,this.borderBottomWidth)),this.alignLayout(),this.setLineHeight(e),this.inlineWidth&&this.renderChildren.some(t=>t.blockWidth&&t.some(t=>t.flexibleWidth))&&this.setLayoutWidth(this.documentRoot||e.inlineWidth?z.formatPX(this.actualWidth):s.MATCH_PARENT)}}applyCustomizations(t=!0){const e=(e,n)=>{const a=e.assign[n];if(a)for(const e in a)for(const n in a[e])this.attr(e,n,a[e][n],t)};e(N[0],this.tagName),e(N[0],this.controlName);const n=N[this.localSettings.targetAPI];n&&(e(n,this.tagName),e(n,this.controlName))}setBoxSpacing(){const e=(t,e,n=!1)=>{let a=0,i=0,o=0,r=0;for(let e=0;e<t.length;e++){const n=t[e];let s=0===this._boxReset[n]?this[n]:0;if(0!==s&&"marginRight"===n)if(s<0)this.float===F.CSS.RIGHT&&(s=0);else if(this.inline){const t=this.documentParent.box.right;if(Math.floor(this.bounds.right)>t){!this.textElement||this.singleChild||this.alignParent(F.CSS.LEFT)||it(this);continue}this.bounds.right+s>t&&(s=Math.max(0,t-this.bounds.right))}switch(s+=this._boxAdjustment[n],e){case 0:a=s;break;case 1:i=s;break;case 2:o=s;break;case 3:r=s}}if(0!==a||0!==r||0!==o||0!==i){let t=0,l=0,c=0;if(e&&this.positionStatic&&!this.blockWidth&&(r<0||i<0))switch(this.cssAscend("textAlign")){case F.CSS.CENTER:r<i?(i+=Math.abs(r),i/=2,r=0):(r+=Math.abs(i),r/=2,i=0);break;case F.CSS.RIGHT:case F.CSS.END:r<0&&(r=0)}!n&&this.localSettings.targetAPI>=26&&(a===i&&i===o&&o===r?t=a:(r===i&&(l=r),a===o&&(c=a))),0!==t?this.android(e?s.MARGIN:s.PADDING,z.formatPX(t)):(0!==l?this.android(e?s.MARGIN_HORIZONTAL:s.PADDING_HORIZONTAL,z.formatPX(l)):(0!==r&&this.android(this.localizeString(e?s.MARGIN_LEFT:s.PADDING_LEFT),z.formatPX(r)),0!==i&&this.android(this.localizeString(e?s.MARGIN_RIGHT:s.PADDING_RIGHT),z.formatPX(i))),0!==c?this.android(e?s.MARGIN_VERTICAL:s.PADDING_VERTICAL,z.formatPX(c)):(0!==a&&this.android(e?s.MARGIN_TOP:s.PADDING_TOP,z.formatPX(a)),0!==o&&this.android(e?s.MARGIN_BOTTOM:s.PADDING_BOTTOM,z.formatPX(o))))}};e(z.BOX_MARGIN,!0,!!this.renderParent&&this.renderParent.is(t.GRID)),e(z.BOX_PADDING,!1)}extractAttributes(t){if("rtl"!==this.dir||this.imageOrSvgElement||this.android(this.length?"layoutDirection":"textDirection","rtl"),this.styleElement){const t=z.getDataSet(this.element,s.ANDROID);for(const e in t){const n="attr"===e?s.ANDROID:Z.test(e)?Y.capitalize(e.substring(4),!1):"";if(""!==n)for(const a of t[e].split(";")){const[t,e]=a.split("::");t&&e&&this.attr(n,t,e)}}}const e="\n"+"\t".repeat(t);let n="";for(const t of this.combine())n+=e+t;return n}setLayoutWidth(t,e=!0){this.android("layout_width",t,e)}setLayoutHeight(t,e=!0){this.android("layout_height",t,e)}alignLayout(){if(this.layoutLinear){const t=this.renderChildren;if(this.layoutVertical){let e=t[0];e.baseline&&(e.renderChildren.length&&(e=e.renderChildren[0]),e.baseline&&(e.textElement||e.inputElement)&&this.android("baselineAlignedChildIndex","0"))}else{if(t.some(t=>t.floating)&&!t.some(t=>t.imageElement&&t.baseline))this.android("baselineAligned","false");else{const e=W.baseline(t,!0)[0];e&&(e.textElement||e.inputElement)&&this.android("baselineAlignedChildIndex",""+t.indexOf(e))}if(t.length>1){const e=t[t.length-1];e.textElement&&it(e)}}}}setLineHeight(t){const e=this.lineHeight;if(e>0){const n=this.has("lineHeight");if(this.multiline)et(this,e,n);else if(n||this.renderChildren.length||0===t.lineHeight)if(0===this.length)nt(this,e,n);else if(this.renderChildren.length){const t=this.horizontalRows||[this.renderChildren],n=t.length;let a=!1;for(let i=0;i<n;i++){const o=t[i],r=t[i+1];let s=r&&(1===r.length&&r[0].multiline||r[0].lineBreakLeading);if(!s&&i<n-1){const e=t[i+1].find(t=>t.baselineActive);e&&e.has("lineHeight")&&(s=!0)}const l=o.find(t=>t.baselineActive),c=!a&&(i>0||1===n)||o[0].lineBreakLeading,d=!s&&(i<n-1||1===n);if(l){if(l.has("lineHeight")){a=!0;continue}nt(l,e,!1,c,d)}else for(let t=0;t<o.length;t++){const n=o[t];0!==n.length||n.has("lineHeight")||n.multiline||n.baselineAltered||nt(n,e,!1,c,d)}a=1===o.length&&o[0].multiline}}}}get documentId(){return this.controlId?`@+id/${this.controlId}`:""}get anchorTarget(){const t=this.renderParent;return t&&(t.layoutConstraint||t.layoutRelative)?this:this.outerWrapper||this}set anchored(t){this.constraint.horizontal=t,this.constraint.vertical=t}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}set containerType(t){this._containerType=t}get containerType(){if(0===this._containerType){const t=i[this.tagName]||0;0!==t&&(this._containerType=t)}return this._containerType||0}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this.is(t.FRAME)}get layoutLinear(){return this.is(t.LINEAR)}get layoutRelative(){return this.is(t.RELATIVE)}get layoutConstraint(){return this.is(t.CONSTRAINT)}get support(){if(void 0===this._cached.support){const t=this.textElement||this.imageOrSvgElement,e={container:{positionRelative:this.layoutRelative||this.layoutConstraint},maxWidth:t,maxHeight:t};return 0!==this.containerType&&(this._cached.support=e),e}return this._cached.support}get layoutWidth(){return this.android("layout_width")}get layoutHeight(){return this.android("layout_height")}get inlineWidth(){return this.layoutWidth===s.WRAP_CONTENT}get inlineHeight(){return this.layoutHeight===s.WRAP_CONTENT}get blockWidth(){return this.layoutWidth===s.MATCH_PARENT}get blockHeight(){return this.layoutHeight===s.MATCH_PARENT}get flexibleWidth(){return ot(this,this.layoutWidth)}get flexibleHeight(){return ot(this,this.layoutHeight)}get fontSize(){return 0===this._fontSize&&(this._fontSize=z.parseUnit(this.css("fontSize"))||16),this._fontSize}set localSettings(t){Object.assign(this._localSettings,t)}get localSettings(){return this._localSettings}});class st extends(rt(squared.base.Node)){}class lt extends(rt(squared.base.NodeGroup)){constructor(t,e,n,a){super(t,e.sessionId,void 0,a),this.depth=e.depth,this.tagName=`${e.tagName}_GROUP`,this.documentParent=e.documentParent,this.retain(n)}}var ct=squared.base.NodeList;const dt=squared.lib.color,ht=squared.lib.constant,ut=squared.lib.css,pt=squared.lib.dom,mt=squared.lib.math,ft=squared.lib.regex,gt=squared.lib.session,Tt=squared.lib.util,St=squared.lib.xml,Et=squared.base.lib.constant,At=squared.base.lib.enumeration,bt=[s.HORIZONTAL,s.VERTICAL];function Ct(t){t.some(t=>t.floating)&&t.sort((t,e)=>{if(t.floating&&!e.floating)return t.float===ht.CSS.LEFT?-1:1;if(!t.floating&&e.floating)return e.float===ht.CSS.LEFT?1:-1;if(t.floating&&e.floating){if(t.float!==e.float)return t.float===ht.CSS.LEFT?-1:1;if(t.float===ht.CSS.RIGHT&&e.float===ht.CSS.RIGHT)return 1}return 0})}function yt(t){return t.length>1&&t.sort((t,e)=>{const n=t.node.innerWrapped||t.node,a=e.node.innerWrapped||e.node;return n.absoluteParent===a.absoluteParent?n.zIndex===a.zIndex?n.siblingIndex<a.siblingIndex?-1:1:n.zIndex<a.zIndex?-1:1:n.intersectX(a.bounds,"bounds")&&n.intersectY(a.bounds,"bounds")?n.depth===a.depth?0:n.id<a.id?-1:1:0}),t}function Rt(t,e){let n;for(const a of e)a===t||a.baselineAltered||(a.bounds.height>0||a.textElement?a.blockVertical&&t.blockVertical?a.anchor("bottom",t.documentId):!a.textElement&&a.bounds.height>t.bounds.height?(Tt.withinRange(a.linear.top,a.documentParent.box.top)&&a.anchor(ht.CSS.TOP,"true"),a.imageOrSvgElement&&(void 0===n||a.bounds.height>=n.bounds.height)&&(n&&n.anchor("baseline",a.documentId),n=a)):(a.naturalElement&&0===a.length||a.layoutHorizontal&&a.renderChildren.every(t=>t.baseline))&&a.anchor("baseline",t.documentId):a.imageOrSvgElement&&a.baseline&&(n=a));n&&t.anchor("baseline",n.documentId)}function It(t,e=!1,n=!1){!t.textElement||t.cssAscend("textAlign",!0)===ht.CSS.CENTER||t.has(ht.CSS.WIDTH)||t.multiline&&!n||!e&&-1===t.textContent.trim().indexOf(" ")||(t.android("maxLines","1"),t.android("ellipsize",ht.CSS.END))}function Nt(t,e,n){if(n>0){if(t.documentBody)switch(e){case 32:n-=t.marginTop;break;case 64:n-=t.marginRight;break;case 128:n-=t.marginBottom;break;case 256:n-=t.marginLeft}if(1!==t.getBox(e)[0])switch(e){case 32:n+=t.borderTopWidth-t.paddingTop;break;case 64:n+=t.borderRightWidth-t.paddingRight;break;case 128:n+=t.borderBottomWidth-t.paddingBottom;break;case 256:n+=t.borderLeftWidth-t.paddingLeft}return Math.max(n,0)}return n}function _t(t,e){if(e.float===ht.CSS.LEFT){if(e.marginRight<0){return t.modifyBox(16,e.actualWidth+(e.hasWidth?e.paddingLeft+e.borderLeftWidth:0)-Math.abs(e.marginRight)),t.anchor(ht.CSS.LEFT,e.documentId),e.modifyBox(4),!0}}else if(t.float===ht.CSS.RIGHT&&e.float===ht.CSS.RIGHT&&e.marginLeft<0){const n=Math.abs(e.marginLeft),a=e.actualWidth;return n<a&&t.modifyBox(4,a-n),t.anchor(ht.CSS.RIGHT,e.documentId),e.modifyBox(16),!0}return!1}function Ot(t,e,n){if(!t.inputElement&&!t.imageOrSvgElement){const i=t.documentParent,o=t.renderParent;if(o){function a(){o.groupParent&&(o.alignmentType|=64,o.unsetCache("blockStatic"))}if(!t.blockWidth&&!i.flexElement){const o=t.cssInitial(`min${e}`,!0);if(ut.isLength(o,!0)&&o!==ht.CSS.PX_0){let r=!1;n?t.ascend(!1,t=>t.has(ht.CSS.WIDTH)||t.blockStatic).length&&(t.setLayoutWidth(ht.CSS.PX_0,!1),r=t.flexibleWidth,a()):(t.absoluteParent||i).hasHeight&&!t.has(ht.CSS.HEIGHT)&&(t.setLayoutHeight(ht.CSS.PX_0,!1),r=t.flexibleHeight),r&&(t.app(`layout_constraint${e}_min`,ut.formatPX(t.parseUnit(o,e.toLowerCase()))),t.css(`min${e}`,ht.CSS.AUTO))}}const r=t.cssInitial(`max${e}`,!0);let l=0;if(ut.isLength(r,!0)){let c=!1;if(n?(t.outerWrapper||t.ascend(!1,t=>t.has(ht.CSS.WIDTH)||t.blockStatic).length)&&(t.setLayoutWidth(o.flexibleWidth?s.MATCH_PARENT:ht.CSS.PX_0,t.innerWrapped&&t.innerWrapped.naturalElement),c=t.flexibleWidth,a(),c&&!ut.isPercent(r)&&(l+=t.contentBoxWidth)):(t.absoluteParent||i).hasHeight&&!t.has(ht.CSS.HEIGHT)&&(t.setLayoutHeight(o.flexibleHeight?s.MATCH_PARENT:ht.CSS.PX_0,t.innerWrapped&&t.innerWrapped.naturalElement),(c=t.flexibleHeight)&&!ut.isPercent(r)&&(l+=t.contentBoxHeight)),c){const a=t.parseUnit(r,e.toLowerCase());t.app(`layout_constraint${e}_max`,ut.formatPX(a+l)),n&&t.layoutVertical&&t.each(t=>{t.textElement&&!t.has("maxWidth")&&t.css("maxWidth",ut.formatPX(a))})}}}}}function Pt(t,e,n){const a=e===ht.CSS.WIDTH,i=t.cssInitial(e,!0);let o;if(n){if(ut.isLength(i,!0)&&(o=ut.formatPX(t.bounds[e]),t.imageElement)){const n=t.element;if(n&&n.naturalWidth>0&&n.naturalHeight>0){const i=t.bounds[e]/(a?n.naturalWidth:n.naturalHeight)*(a?n.naturalHeight:n.naturalWidth);a?t.setLayoutHeight(ut.formatPX(i),!1):t.setLayoutWidth(ut.formatPX(i),!1)}}}else if(ut.isPercent(i)&&i!==ht.CSS.PERCENT_100){const n=parseFloat(i)/100;t.app(`layout_constraint${Tt.capitalize(e)}_percent`,mt.truncate(n,t.localSettings.floatPrecision)),o=ht.CSS.PX_0}return!!o&&(a?t.setLayoutWidth(o,!1):t.setLayoutHeight(o,!1),!0)}function xt(t,e=!1){return t.documentParent.has(ht.CSS.HEIGHT,2)?Pt(t,ht.CSS.HEIGHT,e):!!ut.isLength(t.cssInitial(ht.CSS.HEIGHT),!0)&&(t.setLayoutHeight(ut.formatPX(t.bounds.height),!1),!0)}function Lt(e){return Tt.filterArray(e,t=>"text-bottom"===t.verticalAlign||t.blockVertical).sort((e,n)=>e.bounds.height===n.bounds.height?e.is(t.SELECT)?1:0:e.bounds.height>n.bounds.height?-1:1)[0]}function vt(t){return t?{anchorStart:ht.CSS.RIGHT,anchorEnd:ht.CSS.LEFT,chainStart:Et.STRING_BASE.RIGHT_LEFT,chainEnd:Et.STRING_BASE.LEFT_RIGHT}:{anchorStart:ht.CSS.LEFT,anchorEnd:ht.CSS.RIGHT,chainStart:Et.STRING_BASE.LEFT_RIGHT,chainEnd:Et.STRING_BASE.RIGHT_LEFT}}const wt=(t,e=!1)=>Pt(t,ht.CSS.WIDTH,e),Ht=t=>Math.max(t.actualHeight,t.lineHeight);class Mt extends squared.base.Controller{constructor(){super(...arguments),this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:St.STRING_XMLENCODING},directory:{font:"res/font",image:"res/drawable"},svg:{enabled:!1},supported:{fontFormat:["truetype","opentype"],imageFormat:["jpg","jpeg","png","gif","bmp","webp","svg","ico","cur"]},unsupported:{excluded:new Set(["BR"]),tagName:new Set(["SCRIPT","STYLE","OPTION","INPUT:hidden","MAP","AREA","SOURCE"])},precision:{standardFloat:4},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.25,superscriptTopOffset:.25,legendBottomOffset:.25}}}static setConstraintDimension(t){wt(t),xt(t),Ot(t,"Width",!0),Ot(t,"Height",!1)}static setFlexDimension(t,e){const n=e===ht.CSS.WIDTH,a=Tt.capitalize(e),i=t.flexbox,o=i.basis;function r(o,r){t.android(`layout_${e}`,ht.CSS.PX_0),r>0?(t.app(`layout_constraint${n?"Horizontal":"Vertical"}_weight`,mt.truncate(r,t.localSettings.floatPrecision)),""!==o&&t.css(`min${a}`,o,!0)):""!==o&&(i.shrink<1?(t.app(`layout_constraint${a}_min`,ut.formatPX((1-i.shrink)*parseFloat(o))),t.app(`layout_constraint${a}_max`,o)):t.app(`layout_constraint${a}_min`,o))}ut.isLength(o)?r(t.convertPX(o),t.flexbox.grow):o!==ht.CSS.PERCENT_0&&ut.isPercent(o)?(t.app(`layout_constraint${a}_percent`,(parseFloat(o)/100).toPrecision(t.localSettings.floatPrecision)),r("",t.flexbox.grow)):i.grow>0?r(t.has(e,2)?ut.formatPX(t[`actual${a}`]):"",t.flexbox.grow):n?wt(t):xt(t),i.shrink>1&&t.app(`layout_constrained${a}`,"true"),Ot(t,"Width",!0),n?xt(t,!0):wt(t,!0),Ot(t,"Height",!1)}optimize(t){for(const e of t)e.applyOptimizations(),e.hasProcedure(At.NODE_PROCEDURE.CUSTOMIZATION)&&e.applyCustomizations(this.userSettings.customizationsOverwritePrivilege)}finalize(t){for(const e of t)e.content=St.replaceTab(e.content.replace(/{#0}/,B(e.content)),this.userSettings.insertSpaces)}processUnknownParent(e){const n=e.node;if(n.has("columnCount")||n.has("columnWidth"))e.setType(t.CONSTRAINT,256,4);else if(e.some(t=>!t.pageFlow&&!t.positionAuto))e.setType(t.CONSTRAINT,32,2);else if(1===e.length){const a=n.item(0);if(n.documentRoot&&function(t,e){if(t.element&&e.dataset.target){const n=document.getElementById(e.dataset.target);return null!==n&&n!==t.element}return!1}(n,a))return n.hide(),{layout:e,next:!0};n.naturalElement&&a.plainText?(n.clear(),n.setInlineText(!0),n.textContent=a.textContent,a.hide(),e.setType(t.TEXT)):n.autoMargin.horizontal||e.parent.layoutConstraint&&e.parent.flexElement&&"baseline"===n.flexbox.alignSelf&&a.textElement?e.setType(t.LINEAR,2056):e.setType(t.FRAME,2048)}else C.hasLineBreak(n,!0)?e.setType(e.some(t=>t.positionRelative)?t.RELATIVE:t.LINEAR,16,2):this.checkConstraintFloat(e)?e.setType(t.CONSTRAINT,512):e.linearX?(this.checkFrameHorizontal(e)?e.renderType|=520:this.checkConstraintHorizontal(e)?e.setType(t.CONSTRAINT):this.checkLinearHorizontal(e)?(e.setType(t.LINEAR),e.floated.size&&Ct(e.children)):e.setType(t.RELATIVE),e.add(8)):e.linearY?e.setType(e.some(t=>t.positionRelative||!t.pageFlow&&t.positionAuto)?t.RELATIVE:t.LINEAR,16,n.documentRoot?2:0):e.every(t=>t.inlineFlow)?this.checkFrameHorizontal(e)?e.renderType|=520:e.setType(t.RELATIVE,8,2):e.some(t=>t.alignedVertically(t.previousSiblings(),t.siblingIndex>0?e.children.slice(0,t.siblingIndex):void 0,e.cleared)>0)?e.setType(e.some(t=>t.positionRelative||!t.pageFlow&&t.positionAuto)?t.RELATIVE:t.LINEAR,16,2):e.setType(t.CONSTRAINT,2);return{layout:e}}processUnknownChild(e){const n=e.node,a=n.visibleStyle;if(n.textContent.length&&(n.inlineText||a.borderWidth))e.setType(t.TEXT);else if(n.blockStatic&&(a.borderWidth||a.backgroundImage||n.paddingTop+n.paddingBottom>0))e.setType(t.LINE);else{if(n.naturalElement&&!n.documentRoot&&""===n.elementId&&0===n.bounds.height&&0===n.marginTop&&0===n.marginRight&&0===n.marginBottom&&0===n.marginLeft&&!a.background&&!n.dataset.use)return n.hide(),{layout:e,next:!0};e.setType(a.background?t.TEXT:t.FRAME)}return{layout:e}}processTraverseHorizontal(t,e){const n=t.node,a=t.parent,i=t.children;return this.checkFrameHorizontal(t)?(t.node=this.createNodeGroup(n,i,a),t.renderType|=520):t.length!==e.length||a.hasAlign(16)?(t.node=this.createNodeGroup(n,i,a),this.processLayoutHorizontal(t)):a.hasAlign(8)||(a.alignmentType|=8),{layout:t}}processTraverseVertical(e){const n=e.floated,a=e.cleared;let i=!1;return 1===n.size&&e.every((t,n)=>0===n||n===e.length-1||a.has(t))?i=!0:n.size&&a.size?(e.node=this.createNodeGroup(e.node,e.children,e.parent),e.renderType|=528):n.size&&e.children[0].floating?(e.node=this.createNodeGroup(e.node,e.children,e.parent),e.renderType|=520):i=!0,i&&!e.parent.hasAlign(16)&&(e.node=this.createNodeGroup(e.node,e.children,e.parent),e.setType(e.some(t=>t.positionRelative)?t.RELATIVE:t.LINEAR,16)),{layout:e}}processLayoutHorizontal(e){return this.checkConstraintFloat(e,!0)?e.setType(t.CONSTRAINT,512):this.checkConstraintHorizontal(e)?e.setType(t.CONSTRAINT,8):this.checkLinearHorizontal(e)?(e.setType(t.LINEAR,8),e.floated.size&&Ct(e.children)):e.setType(t.RELATIVE,8),{layout:e}}sortRenderPosition(t,e){if(t.layoutConstraint&&e.some(t=>!t.node.pageFlow||0!==t.node.zIndex)){const t=[],n=[],a=[];for(const i of e){const e=i.node;e.pageFlow?n.push(i):e.zIndex>=0?a.push(i):t.push(i)}return yt(t),yt(a),Tt.concatMultiArray(t,n,a)}return e}checkFrameHorizontal(t){const e=t.floated;if(2===e.size)return!0;if((e.has(ht.CSS.RIGHT)||1===e.size&&t.node.cssAscend("textAlign",!0)===ht.CSS.CENTER)&&t.some(t=>t.pageFlow))return!0;if(e.has(ht.CSS.LEFT)&&!t.linearX){const[e,n]=t.partition(t=>t.floating);let a=1/0;for(const t of n)a=Math.min(a,t.siblingIndex);return Tt.replaceMap(e,t=>t.siblingIndex).some(t=>t<a)}return!1}checkConstraintFloat(t,e=!1){let n=0,a=0;for(const i of t){const o=t.cleared.has(i)||i.renderExclude;if(-1!==n&&(i.positiveAxis&&(!i.positionRelative||i.positionAuto)&&(i.floating||i.autoMargin.horizontal)||o)?n++:n=-1,-1!==a&&(i.has(ht.CSS.WIDTH,32)||o)?a++:e||(a=-1),n<=0&&a<=0)return!1}return!0}checkConstraintHorizontal(t){const e=t.floated;let n=!1;switch(t.node.cssInitial("textAlign")){case ht.CSS.CENTER:n=0===e.size;break;case ht.CSS.END:case ht.CSS.RIGHT:n=0===e.size||e.has(ht.CSS.RIGHT)&&1===e.size&&0===t.cleared.size}return!(!n&&!t.some(e=>e.blockVertical||(e.verticalAlign===ht.CSS.MIDDLE||e.verticalAlign===ht.CSS.BOTTOM)&&!t.parent.hasHeight))&&(t.singleRowAligned&&t.every(t=>t.positiveAxis||t.renderExclude))}checkLinearHorizontal(t){const e=t.floated;if((0===e.size||1===e.size&&e.has(ht.CSS.LEFT))&&t.singleRowAligned){const{lineHeight:e}=t.children[0];let n=0,a=0;for(const i of t){if(!i.naturalElement||0!==i.length||i.positionRelative||i.blockVertical||i.positionAuto||i.lineHeight!==e||!i.baseline&&!i.cssAny("verticalAlign",ht.CSS.TOP,ht.CSS.MIDDLE,ht.CSS.BOTTOM))return!1;if(i.inputElement&&n++,i.textElement&&a++,n>0&&a>0)return!1}return!0}return!1}setConstraints(){for(const t of this.cache)if((t.layoutRelative||t.layoutConstraint)&&t.hasProcedure(At.NODE_PROCEDURE.CONSTRAINT)){const e=t.renderFilter(t=>!t.positioned);if(e.length)if(t.layoutRelative)this.processRelativeHorizontal(t,e);else{const[n,a]=Tt.partitionArray(e,t=>t.pageFlow||t.positionAuto);if(a.length)for(const e of a)e.leftTopAxis&&(e.hasWidth&&e.autoMargin.horizontal?e.has(ht.CSS.LEFT)&&e.autoMargin.right?(e.anchor(ht.CSS.LEFT,s.PARENT),e.modifyBox(16,e.left)):e.has(ht.CSS.RIGHT)&&e.autoMargin.left?(e.anchor(ht.CSS.RIGHT,s.PARENT),e.modifyBox(4,e.right)):(e.anchorParent(s.HORIZONTAL),e.modifyBox(16,e.left),e.modifyBox(4,e.right)):(e.has(ht.CSS.LEFT)&&(e.anchor(ht.CSS.LEFT,s.PARENT),e.has(ht.CSS.RIGHT)||e.css(ht.CSS.WIDTH)!==ht.CSS.PERCENT_100||e.anchor(ht.CSS.RIGHT,s.PARENT),e.modifyBox(16,Nt(t,256,e.left))),!e.has(ht.CSS.RIGHT)||e.has(ht.CSS.WIDTH)&&e.css(ht.CSS.WIDTH)!==ht.CSS.PERCENT_100&&e.has(ht.CSS.LEFT)||(e.anchor(ht.CSS.RIGHT,s.PARENT),e.modifyBox(4,Nt(t,64,e.right)))),e.hasHeight&&e.autoMargin.vertical?e.has(ht.CSS.TOP)&&e.autoMargin.bottom?(e.anchor(ht.CSS.TOP,s.PARENT),e.modifyBox(2,e.top)):e.has(ht.CSS.BOTTOM)&&e.autoMargin.top?(e.anchor(ht.CSS.BOTTOM,s.PARENT),e.modifyBox(8,e.bottom)):(e.anchorParent(s.VERTICAL),e.modifyBox(2,e.top),e.modifyBox(8,e.bottom)):(e.has(ht.CSS.TOP)&&(e.anchor(ht.CSS.TOP,s.PARENT),e.has(ht.CSS.BOTTOM)||e.css(ht.CSS.HEIGHT)!==ht.CSS.PERCENT_100||e.anchor(ht.CSS.BOTTOM,s.PARENT),e.modifyBox(2,Nt(t,32,e.top))),!e.has(ht.CSS.BOTTOM)||e.has(ht.CSS.HEIGHT)&&e.css(ht.CSS.HEIGHT)!==ht.CSS.PERCENT_100&&e.has(ht.CSS.TOP)||(e.anchor(ht.CSS.BOTTOM,s.PARENT),e.modifyBox(8,Nt(t,128,e.bottom))))),e.positioned=!0;if(n.length){if(t.layoutHorizontal)this.processConstraintHorizontal(t,n);else if(t.hasAlign(256))this.processConstraintColumn(t,n);else if(n.length>1)this.processConstraintChain(t,n);else{const t=n[0];t.anchorParent(s.HORIZONTAL),t.anchorParent(s.VERTICAL),t.rightAligned?t.anchorStyle(s.HORIZONTAL,"packed",1):t.centerAligned||t.anchorStyle(s.HORIZONTAL),t.autoMargin.topBottom||t.anchorStyle(s.VERTICAL),Mt.setConstraintDimension(t)}this.evaluateAnchors(n)}for(const n of e)n.anchored||(n.outerWrapper?(n.constraint.horizontal&&n.anchorParent(s.HORIZONTAL),n.constraint.vertical&&n.anchorParent(s.VERTICAL)):this.addGuideline(n,t))}}}renderNodeGroup(e){const n=e.node,a=e.containerType,i=e.alignmentType,o=H();let r=!1;switch(a){case t.LINEAR:Tt.hasBit(i,16)?(o.android.orientation=s.VERTICAL,r=!0):Tt.hasBit(i,8)&&(o.android.orientation=s.HORIZONTAL,r=!0);break;case t.GRID:o.android.rowCount=e.rowCount?""+e.rowCount:"",o.android.columnCount=e.columnCount?""+e.columnCount:"2",r=!0;break;case t.FRAME:case t.RELATIVE:case t.CONSTRAINT:r=!0;break;default:if(0===e.length)return this.renderNode(e)}if(r)return n.setControlType(st.getControlName(a),a),n.alignmentType|=i,n.render(!n.dataset.use&&n.dataset.target?this.application.resolveTarget(n.dataset.target):e.parent),n.apply(o),{type:1,node:n,controlName:n.controlName}}renderNode(e){const n=e.node,i=st.getControlName(e.containerType);n.setControlType(i,e.containerType),n.alignmentType|=e.alignmentType;let o=e.parent,r=n.dataset.use?void 0:n.dataset.target;if(n.element)switch(n.element.tagName){case"IMG":{const i=n.element,l=n.absoluteParent||n.documentParent;let c=n.toFloat(ht.CSS.WIDTH),d=n.toFloat(ht.CSS.HEIGHT),h=n.has(ht.CSS.WIDTH,32)?c:-1;const u=n.has(ht.CSS.HEIGHT,32)?d:-1;let p,m="fitXY";if(i.srcset)if((p=ut.getSrcSet(i,this.localSettings.supported.imageFormat)).length){if(p[0].actualWidth){if(-1===h||c<100){n.css(ht.CSS.WIDTH,ut.formatPX(c=p[0].actualWidth),!0);const t=this.application.resourceHandler.getImage(i.src);t&&t.width>0&&t.height>0?n.css(ht.CSS.HEIGHT,ut.formatPX(d=t.height*(c/t.width)),!0):n.android("adjustViewBounds","true")}else c=o.box.width,n.android("adjustViewBounds","true");h=-1}}else p=void 0;if(n.hasResource(At.NODE_RESOURCE.IMAGE_SOURCE)){const t=this.application.resourceHandler.addImageSrc(i,"",p);""!==t&&n.android("src",`@drawable/${t}`)}if(-1!==h||-1!==u)h>=0&&(c*=l.box.width/100,h<100&&!o.layoutConstraint&&(n.css(ht.CSS.WIDTH,ut.formatPX(c)),n.android("adjustViewBounds","true"))),u>=0&&(d*=l.box.height/100,!(u<100)||o.layoutConstraint&&l.hasHeight||(n.css(ht.CSS.HEIGHT,ut.formatPX(d)),n.android("adjustViewBounds","true")));else{switch(n.css("objectFit")){case"contain":m="centerInside";break;case"cover":m="centerCrop";break;case"scale-down":m="fitCenter";break;case"none":m=ht.CSS.CENTER}(0===c&&d>0||0===d&&c>0)&&n.android("adjustViewBounds","true")}if(n.android("scaleType",m),n.baseline&&(n.android("baselineAlignBottom","true"),n.marginBottom>0&&o.layoutLinear&&o.layoutHorizontal&&n.mergeGravity(s.LAYOUT_GRAVITY,ht.CSS.BOTTOM)),!n.pageFlow&&o===n.absoluteParent&&(n.left<0&&"hidden"===o.css("overflowX")||n.top<0&&"hidden"===o.css("overflowY"))){const i=this.application.createNode(pt.createElement(n.actualParent&&n.actualParent.element));i.setControlType(a.FRAME,t.FRAME),i.inherit(n,"base"),i.positionAuto=!1,i.exclude(At.NODE_RESOURCE.ALL,At.NODE_PROCEDURE.ALL),i.cssApply({position:n.css("position"),zIndex:""+n.zIndex}),o.appendTry(n,i),n.parent=i,i.setLayoutWidth(c>0?c<l.box.width?ut.formatPX(c):s.MATCH_PARENT:s.WRAP_CONTENT),i.setLayoutHeight(d>0?d<l.box.height?ut.formatPX(d):s.MATCH_PARENT:s.WRAP_CONTENT),i.render(r?this.application.resolveTarget(r):o),i.saveAsInitial(),i.innerWrapped=n,n.outerWrapper=i,o.layoutConstraint||(n.modifyBox(2,n.top),n.modifyBox(16,n.left)),this.application.addLayoutTemplate(o,i,{type:1,node:i,controlName:a.FRAME}),o=i,e.parent=i,r=void 0}break}case"INPUT":{const t=n.element;switch(t.type){case"checkbox":t.checked&&n.android("checked","true");break;case"text":n.android("inputType","text");break;case"password":n.android("inputType","textPassword");break;case"range":case"time":case"number":case"datetime-local":switch(t.type){case"number":case"range":n.android("inputType","number");break;case"time":n.android("inputType","time");break;case"datetime-local":n.android("inputType","datetime")}Tt.isString(t.min)&&n.android("min",t.min),Tt.isString(t.max)&&n.android("max",t.max);break;case"email":case"tel":case"url":case"week":case"month":case"search":switch(t.type){case"email":n.android("inputType","textEmailAddress");break;case"tel":n.android("inputType","phone");break;case"url":n.android("inputType","textUri");break;default:n.android("inputType","text")}-1!==t.minLength&&n.android("minLength",""+t.minLength),t.maxLength>0&&n.android("maxLength",""+t.maxLength)}break}case"TEXTAREA":{const t=n.element;switch(n.android("minLines",t.rows?""+t.rows:"2"),n.css("verticalAlign")){case ht.CSS.MIDDLE:n.mergeGravity(s.GRAVITY,s.CENTER_VERTICAL);break;case ht.CSS.BOTTOM:n.mergeGravity(s.GRAVITY,ht.CSS.BOTTOM);break;default:n.mergeGravity(s.GRAVITY,ht.CSS.TOP)}t.maxLength>0&&n.android("maxLength",""+t.maxLength),!n.hasWidth&&t.cols>0&&n.css(ht.CSS.WIDTH,ut.formatPX(8*t.cols),!0),n.android("hint",t.placeholder),n.android("scrollbars",s.VERTICAL),n.android("inputType","textMultiLine"),n.overflowX&&n.android("scrollHorizontally","true");break}case"LEGEND":n.hasWidth||(n.css("minWidth",ut.formatPX(n.actualWidth),!0),n.css("display","inline-block",!0)),n.modifyBox(8,n.actualHeight*this.localSettings.deviations.legendBottomOffset)}switch(i){case a.TEXT:let t="";if(n.overflowX&&(t+=s.HORIZONTAL),n.overflowY&&(t+=(""!==t?"|":"")+s.VERTICAL),""!==t&&n.android("scrollbars",t),n.has("letterSpacing")&&n.android("letterSpacing",mt.truncate(n.toFloat("letterSpacing")/n.fontSize,this.localSettings.precision.standardFloat)),"justify"===n.css("textAlign")&&n.android("justificationMode","inter_word"),n.has("textShadow")){const t=/^(rgba?\(\d+, \d+, \d+(?:, [\d.]+)?\)) (-?[\d.]+[a-z]+) (-?[\d.]+[a-z]+)\s*(-?[\d.]+[a-z]+)?$/.exec(n.css("textShadow"));if(t){const e=C.addColor(dt.parseColor(t[1]));""!==e&&(n.android("shadowColor",`@color/${e}`),n.android("shadowDx",mt.truncate(2*ut.parseUnit(t[2],n.fontSize))),n.android("shadowDy",mt.truncate(2*ut.parseUnit(t[3],n.fontSize))),n.android("shadowRadius",t[4]?mt.truncate(Math.max(ut.parseUnit(t[4],n.fontSize),1)):"1"))}}"nowrap"===n.css("whiteSpace")&&(n.android("maxLines","1"),n.android("ellipsize",ht.CSS.END));break;case a.BUTTON:n.hasHeight||n.android("minHeight",ut.formatPX(Math.ceil(n.actualHeight))),n.mergeGravity(s.GRAVITY,s.CENTER_VERTICAL);break;case a.EDIT:case a.RANGE:n.hasWidth||n.css(ht.CSS.WIDTH,ut.formatPX(n.bounds.width),!0);break;case a.LINE:n.hasHeight||n.setLayoutHeight(ut.formatPX(n.contentBoxHeight||1))}return n.render(r?this.application.resolveTarget(r):o),{type:1,node:n,parent:o,controlName:i}}renderNodeStatic(t,e,n,a,i){const o=new st(0,"0",void 0,this.afterInsertNode);return o.setControlType(t),""!==n&&o.setLayoutWidth(n||s.WRAP_CONTENT),""!==a&&o.setLayoutHeight(a||s.WRAP_CONTENT),e&&(o.apply(e),e.documentId=o.documentId),this.getEnclosingXmlTag(t,this.userSettings.showAttributes?o.extractAttributes(1):void 0,i)}renderSpace(t,e,n,i,o){return void 0===o&&(o=H()),ut.isPercent(t)&&(o.android.layout_columnWeight=mt.truncate(parseFloat(t)/100,this.localSettings.precision.standardFloat),t=ht.CSS.PX_0),e&&ut.isPercent(e)&&(o.android.layout_rowWeight=mt.truncate(parseFloat(e)/100,this.localSettings.precision.standardFloat),e=ht.CSS.PX_0),n&&(o.android.layout_columnSpan=""+n),i&&(o.android.layout_rowSpan=""+i),this.renderNodeStatic(a.SPACE,o,t,e||void 0)}addGuideline(t,e,n,i=!1,o=!1){const r=e.groupParent&&!t.documentParent.hasAlign(4)?e:t.documentParent,l=t.absoluteParent;bt.forEach(c=>{if(!(t.constraint[c]||n&&c!==n)){const n=c===s.HORIZONTAL,d=r.box;let h,u,p,m;if(n?(h=o?ht.CSS.RIGHT:ht.CSS.LEFT,u=o?ht.CSS.LEFT:ht.CSS.RIGHT,p=o?Et.STRING_BASE.RIGHT_LEFT:Et.STRING_BASE.LEFT_RIGHT,m=o?Et.STRING_BASE.LEFT_RIGHT:Et.STRING_BASE.RIGHT_LEFT):(h=o?ht.CSS.BOTTOM:ht.CSS.TOP,u=o?ht.CSS.TOP:ht.CSS.BOTTOM,p=o?Et.STRING_BASE.BOTTOM_TOP:Et.STRING_BASE.TOP_BOTTOM,m=o?Et.STRING_BASE.TOP_BOTTOM:Et.STRING_BASE.BOTTOM_TOP),Tt.withinRange(t.linear[h],d[h]))return void t.anchor(h,s.PARENT,!0);const f=t.positionStatic?t.bounds:t.linear;let g,T="layout_constraintGuide_",S=!1;if(!t.pageFlow&&ut.isPercent(t.css(h)))g=parseFloat(t.css(h))/100,S=!0,T+="percent";else{if(!i&&!e.hasAlign(4)){if(e.renderChildren.some(e=>{if(e!==t&&e.constraint[c]){let a=!1;if(t.pageFlow&&e.pageFlow&&(Tt.withinRange(t.linear[h],e.linear[u])?(t.anchor(p,e.documentId,!0),a=!0):Tt.withinRange(t.linear[u],e.linear[h])&&(t.anchor(m,e.documentId,!0),a=!0)),a||(Tt.withinRange(t.bounds[h],e.bounds[h])?(!n&&t.textElement&&t.baseline&&e.textElement&&e.baseline?t.anchor("baseline",e.documentId,!0):(t.anchor(h,e.documentId,!0),n?t.modifyBox(16,-e.marginLeft,!1):t.modifyBox(2,-e.marginTop,!1)),a=!0):Tt.withinRange(t.bounds[u],e.bounds[u])?(t.anchor(u,e.documentId,!0),t.modifyBox(n?4:8),a=!0):!t.pageFlow&&e.pageFlow&&Tt.withinRange(t.bounds[h]+t[h],e.bounds[h])&&(t.anchor(h,e.documentId,!0),t.modifyBox(n?16:2,t[h]),a=!0)),a)return e.constraint[c]=!0,!0}return!1}))return}if(t.positionAuto){const e=t.previousSiblings();if(e.length&&!t.alignedVertically(e)){const a=e.pop();if(a.renderParent===t.renderParent)return t.anchor(n?Et.STRING_BASE.RIGHT_LEFT:ht.CSS.TOP,a.documentId,!0),void(t.constraint[c]=a.constraint[c])}}if(i){const t=Math.abs(f[h]-d[h])/d[n?ht.CSS.WIDTH:ht.CSS.HEIGHT];g=parseFloat(mt.truncate(o?1-t:t,this.localSettings.precision.standardFloat)),S=!0,T+="percent"}else g=f[h]-d[o?u:h],n||r.groupParent||r===l||1!==l.getBox(2)[0]||(g-=l.marginTop),T+="begin"}const E=e.constraint.guideline||{};if(t.pageFlow){if(t.inlineVertical){const e=Tt.convertFloat(t.verticalAlign);e<0&&(g+=e)}}else if(t.parent===r.outerWrapper)g+=r[o?n?"paddingRight":"paddingBottom":n?"paddingLeft":"paddingTop"];else if(l===t.documentParent){let t;g=Nt(r,t=n?o?64:256:o?128:32,g)}if(!n&&t.marginTop<0&&(g-=t.marginTop,t.modifyBox(2)),t.constraint[c]=!0,g<=0){if(t.anchor(h,s.PARENT,!0),g<0){const e=t.innerWrapped;if(e&&!e.pageFlow){let t=0;switch(h){case ht.CSS.TOP:t=2;break;case ht.CSS.LEFT:t=16;break;case ht.CSS.BOTTOM:t=8;break;case ht.CSS.RIGHT:t=4}e.modifyBox(t,g)}}}else if(n&&g+f.width>=d.right&&r.has(ht.CSS.WIDTH)&&!t.has(ht.CSS.RIGHT)||!n&&g+f.height>=d.bottom&&r.has(ht.CSS.HEIGHT)&&!t.has(ht.CSS.BOTTOM))t.anchor(u,s.PARENT,!0);else{const i=Tt.optionalAsObject(E,`${c}.${T}.${h}`);if(i)for(const e in i)if(parseInt(i[e])===g)return t.anchor(h,e,!0),void t.anchorDelete(u);const o=H(void 0,{orientation:n?s.VERTICAL:s.HORIZONTAL},{[T]:S?""+g:ut.formatPX(g)});this.addAfterOutsideTemplate(t.id,this.renderNodeStatic(a.GUIDELINE,o));const r=o.documentId;r&&(t.anchor(h,r,!0),t.anchorDelete(u),g>0&&(Tt.assignEmptyValue(E,c,T,h,r,""+g),e.constraint.guideline=E))}}})}addBarrier(t,e){const n=H(void 0,void 0,{barrierDirection:e,constraint_referenced_ids:Tt.objectMap(t,t=>w(t.documentId)).join(",")});return this.addAfterOutsideTemplate(t[t.length-1].id,this.renderNodeStatic(a.BARRIER,n)),n.documentId}evaluateAnchors(t){const e=[],n=[];for(const a of t)if(a.constraint.horizontal&&e.push(a),a.constraint.vertical&&n.push(a),a.alignParent(ht.CSS.TOP)){let e=a;for(;;){const n=e.alignSibling(Et.STRING_BASE.BOTTOM_TOP);if(""===n){if(e!==a){const t=this.addBarrier([e],ht.CSS.BOTTOM);t&&e.anchor(Et.STRING_BASE.BOTTOM_TOP,t)}break}{const i=t.find(t=>t.documentId===n);if(!i||i.alignSibling(Et.STRING_BASE.TOP_BOTTOM)!==e.documentId)break;if(i.alignParent(ht.CSS.BOTTOM)){a.anchorStyle(s.VERTICAL,"packed",0,!1);break}e=i}}}let a=-1;for(;++a<t.length;){const i=t[a];if(!i.constraint.horizontal)for(const t in i.constraint.current){const n=i.constraint.current[t];if(n.horizontal&&e.some(t=>t.documentId===n.documentId)){i.constraint.horizontal=!0,e.push(i),a=-1;break}}if(!i.constraint.vertical)for(const t in i.constraint.current){const e=i.constraint.current[t];if(!e.horizontal&&n.some(t=>t.documentId===e.documentId)){i.constraint.vertical=!0,n.push(i),a=-1;break}}}}createNodeGroup(t,e,n,a){const i=new lt(this.cache.nextId,t,e,this.afterInsertNode);return n?(n.appendTry(a||t,i),i.init()):i.siblingIndex=t.siblingIndex,this.cache.append(i),i}createNodeWrapper(t,e,n,a,i){const o=this.application.createNode(pt.createElement(t.actualParent&&t.actualParent.element,t.block?"div":"span"),!0,e,n);if(t.documentRoot&&(o.documentRoot=!0,t.documentRoot=!1),o.inherit(t,"base","alignment"),a&&o.setControlType(a,i),o.exclude(At.NODE_RESOURCE.BOX_STYLE|At.NODE_RESOURCE.ASSET,At.NODE_PROCEDURE.CUSTOMIZATION,At.APP_SECTION.ALL),e.appendTry(t,o),t.parent=o,t.outerWrapper&&(o.outerWrapper=t.outerWrapper,t.outerWrapper.innerWrapped=o),t.renderParent){const e=t.renderParent.renderTemplates;if(e)for(let n=0;n<e.length;n++)if(e[n].node===t){t.renderChildren.splice(n,1),e.splice(n,1);break}t.rendered=!1,t.renderParent=void 0}if(o.saveAsInitial(),o.cssApply({marginTop:ht.CSS.PX_0,marginRight:ht.CSS.PX_0,marginBottom:ht.CSS.PX_0,marginLeft:ht.CSS.PX_0,paddingTop:ht.CSS.PX_0,paddingRight:ht.CSS.PX_0,paddingBottom:ht.CSS.PX_0,paddingLeft:ht.CSS.PX_0,borderTopStyle:ht.CSS.NONE,borderRightStyle:ht.CSS.NONE,borderBottomStyle:ht.CSS.NONE,borderLeftStyle:ht.CSS.NONE,borderRadius:ht.CSS.PX_0}),t.documentParent.layoutElement){const e=t.namespace("android");for(const t in e)t.startsWith("layout_")&&(o.android(t,e[t]),delete e[t]);t.transferBox(30,o)}return o.innerWrapped=t,t.outerWrapper=o,o}processRelativeHorizontal(t,e){const n=[],a=[];let i=!1,o=!1;if(t.hasAlign(16)){let t;for(let a=0;a<e.length;a++){const i=e[a];void 0===t?i.anchor(ht.CSS.TOP,"true"):i.anchor(Et.STRING_BASE.TOP_BOTTOM,t.documentId),i.pageFlow?(n.push([i]),t=i):o=!0}}else{const i=(()=>{const n=t.renderParent;if(n){if(n.overflowX)return n.box.width;if(n.groupParent){let n=-1/0;for(const a of t.documentParent.actualChildren)a.float===ht.CSS.LEFT&&a.linear.right>n&&!e.includes(a)&&(n=a.linear.right);if(n!==-1/0)for(const a of t.documentParent.actualChildren)if(a.linear.right===n&&e.some(t=>Tt.withinRange(t.linear.left,n)&&t.intersectY(a.linear)))return t.box.right-n}else if(n===t.documentParent&&n.blockStatic&&t.naturalElement&&t.inlineStatic)return n.box.width-(t.linear.left-n.box.left)}return t.box.width})(),r="nowrap"!==t.css("whiteSpace"),s=ct.linearData(e,!0).cleared,l=t.blockDimension?t.toFloat("textIndent"):0;let c,d=0;Tt.partitionArray(e,t=>t.float!==ht.CSS.RIGHT).forEach((e,h)=>{if(0===e.length)return;const u=0===h;let p,m,f=!0;if(u){const t=ct.actualParent(e);t&&t.cssInitialAny("textAlign",ht.CSS.RIGHT,ht.CSS.END)?(f=!1,e[e.length-1].anchor(p=ht.CSS.RIGHT,"true")):p=ht.CSS.LEFT,Ct(e),m=n}else p=ht.CSS.RIGHT,m=a;let g,T=!1;for(let n=0;n<e.length;n++){const a=e[n];let h=u&&f?Et.STRING_BASE.LEFT_RIGHT:Et.STRING_BASE.RIGHT_LEFT;if(!a.pageFlow){g?(a.anchor(h,g.documentId),a.anchor(ht.CSS.TOP,g.documentId)):(a.anchor(p,"true"),a.anchor(ht.CSS.TOP,"true")),o=!0;continue}let S=a.bounds;if(a.naturalElement&&a.inlineText&&!a.has(ht.CSS.WIDTH)){const t=gt.getRangeClientRect(a.element,a.sessionId);(t.numberOfLines||t.width<a.box.width)&&(S=t,a.multiline||(a.multiline=!!t.numberOfLines&&t.numberOfLines>0))}let E=a.multiline;E&&Math.floor(S.width)<=i&&(E=!1);let A,b=!0;if(a.autoMargin.leftRight?a.anchor("centerHorizontal","true"):a.autoMargin.left?a.anchor(ht.CSS.RIGHT,"true"):a.autoMargin.right?a.anchor(ht.CSS.LEFT,"true"):b=!1,void 0===g)f?(b||a.anchor(p,"true"),m.push([a])):m.push([]);else{const e=m[m.length-1];let o=0,u=0;const y=()=>(u=d+a.marginLeft,c&&!e.includes(c)&&(u+=c.linear.width),void 0!==c&&a.plainText&&!E&&e.includes(c)&&!s.has(a)||(u+=S.width),a.marginRight<0&&(u+=a.marginRight),o=i,l<0?o+=m.length>1?0:l:l>0&&(o-=1===m.length?l:0),a.styleElement&&a.inlineStatic&&(u-=a.paddingLeft+a.paddingRight),!0);_t(a,g)&&(h="");const R=a.groupParent&&!a.hasAlign(128);let I=!1;A=!R&&a.inlineVertical&&g.inlineVertical?pt.getElementsBetweenSiblings(g.element,a.element,!0):void 0;const N=()=>{if(g.textElement){if(1===n&&void 0===A&&a.plainText&&!ft.CHAR.TRAILINGSPACE.test(g.textContent)&&!ft.CHAR.LEADINGSPACE.test(a.textContent))return I=!0,!1;if(r&&T&&(g.bounds.width>=i||C.hasLineBreak(g,!1,!0)))return!0}if(g.floating&&d<i&&g.alignParent(ht.CSS.LEFT))return!1;if(r){if(y(),u>o)return g&&g.textElement&&It(g,!1,T),!0;if(Tt.aboveRange(u,o)&&!a.alignParent(p)&&It(a,!0,E),E&&C.hasLineBreak(a)||a.preserveWhiteSpace&&ft.CHAR.LEADINGNEWLINE.test(a.textContent))return!0}return!1},_=a.textElement&&N();_||R||Tt.aboveRange(a.linear.top,g.linear.bottom)&&(a.blockStatic||a.floating&&g.float===a.float)||g.autoMargin.horizontal||s.has(a)||!a.textElement&&y()&&Math.floor(u)>o||!a.floating&&(g.blockStatic||a.previousSiblings().some(t=>t.lineBreak||t.excluded&&t.blockStatic)||A&&A.some(e=>gt.causesLineBreak(e,t.sessionId)))?(f?(c&&a.linear.bottom<=c.bounds.bottom?b||a.anchor(h,c.documentId):(b||a.anchor(p,"true"),c=void 0),b=!0):(c&&a.linear.bottom>c.bounds.bottom&&(c=void 0),g.anchor(p,"true")),_&&E&&It(g,r),d=Math.min(0,_&&!g.multiline&&E&&!s.has(a)?a.linear.right-t.box.right:0),m.push([a])):(""!==h&&(f?b||(a.anchor(h,g.documentId),b=!0):g.anchor(h,a.documentId)),g.floating||I||!a.multiline||a.has(ht.CSS.WIDTH)||(a.multiline=!1,E=!1),e.push(a))}a.float===ht.CSS.LEFT&&u&&(c?Tt.aboveRange(a.linear.bottom,c.linear.bottom)&&(c=a):c=a);let y=0;if(A&&!A.some(t=>!!gt.getElementAsNode(t,a.sessionId)||gt.causesLineBreak(t,a.sessionId))){const t=gt.getRangeClientRect(A[0],"0");if(!t.numberOfLines){const e=A.length>1?gt.getRangeClientRect(A[A.length-1],"0"):void 0;void 0!==e&&e.numberOfLines||(y=e?t.left-e.right:t.width)}}d+=y+a.marginLeft+S.width+a.marginRight,g=a,T=E}})}if((n.length>1||a.length>1)&&(i=!0),[n,a].forEach(e=>{let n;for(let a=0;a<e.length;a++){const o=e[a];let r;if(o.length>1){let e;(r=ct.baseline(o)[0])&&(e=Lt(o))&&(r!==e&&e.bounds.height>r.bounds.height?r.anchor(ht.CSS.BOTTOM,e.documentId):e=void 0);const n=[];let s=0===a?"true":r?r.documentId:"",l=0,c=null;for(const a of o)if(a.baseline)a!==r&&(e&&a.inputElement?a!==e&&a.anchor(ht.CSS.BOTTOM,e.documentId):n.push(a));else if(a.inlineVertical){const d=a!==r?r:void 0;switch(a.verticalAlign){case"text-top":if(null===c&&(c=ct.baseline(o,!0)[0]),c&&a!==c){a.anchor(ht.CSS.TOP,c.documentId);break}break;case"super":a.baselineAltered||a.modifyBox(2,-1*Math.ceil(a.fontSize*this.localSettings.deviations.superscriptTopOffset));case ht.CSS.TOP:""!==s&&s!==a.documentId?a.anchor(ht.CSS.TOP,s):d&&a.anchor(ht.CSS.TOP,d.documentId);break;case ht.CSS.MIDDLE:const r=Math.max(a.actualHeight,a.lineHeight);if(i){if(d){const t=Math.max(d.actualHeight,d.lineHeight);r<t?(a.anchor(ht.CSS.TOP,d.documentId),a.modifyBox(2),a.modifyBox(2,Math.round((t-r)/2))):r>l&&(l=r)}}else a.anchor("centerVertical","true"),a.imageElement&&(l=Math.max(r,l));break;case"text-bottom":e?a!==e&&a.anchor(ht.CSS.BOTTOM,e.documentId):(null===c&&(c=ct.baseline(o,!0)[0]),c&&c!==a&&a.anchor(ht.CSS.BOTTOM,c.documentId));break;case"sub":a.baselineAltered||a.modifyBox(8,-1*Math.ceil(a.fontSize*this.localSettings.deviations.subscriptBottomOffset));case ht.CSS.BOTTOM:""===s||Tt.withinRange(t.bounds.height,a.bounds.height)||(t.hasHeight||"true"!==s||(i?d&&(s=d.documentId):t.css(ht.CSS.HEIGHT,ut.formatPX(t.bounds.height),!0)),a.anchor(ht.CSS.BOTTOM,s));break;default:a.baselineAltered||n.push(a)}}if(r)r.baselineActive=!0,n.length&&Rt(r,n),r.textElement&&l>r.actualHeight&&(r.anchor("centerVertical","true"),r=void 0);else if(n.length&&n.length<o.length&&(e=Lt(o)))for(const t of n)t.baseline&&!t.multiline&&t.anchor(ht.CSS.BOTTOM,e.documentId);It(o[o.length-1])}else(r=o[0]).baselineActive=!0;if(a>0){if(void 0===n){const t=e[a-1];n=t.find(t=>!t.floating)||t[0];let i=!1;for(const e of t)i||e!==n?e.linear.bottom>=n.linear.bottom&&(!e.floating||n.floating)&&(n=e):i=!0}for(const t of o)""===t.alignSibling("baseline")&&t.anchor(Et.STRING_BASE.TOP_BOTTOM,n.documentId)}n=r}}),i&&(t.horizontalRows=Tt.concatArray(n,a)),o){const e=t.renderChildren,n=t.renderTemplates,a=[];for(let t=0;t<e.length;t++)e[t].pageFlow||(a.push(n[t]),e.splice(t,1),n.splice(t--,1));for(const t of a)e.push(t.node),n.push(t)}}processConstraintHorizontal(t,e){const n=ct.baseline(e)[0],a=ct.baseline(e,!0)[0],i=t.hasAlign(1024),o=Lt(e),{anchorStart:r,anchorEnd:l,chainStart:c,chainEnd:d}=vt(i);!t.hasWidth&&e.some(t=>t.has(ht.CSS.WIDTH,32))&&t.setLayoutWidth(s.MATCH_PARENT);let h,u,p=0;switch(t.cssAscend("textAlign",!0)){case ht.CSS.CENTER:p=.5;break;case ht.CSS.RIGHT:case ht.CSS.END:i||(p=1)}Ct(e);for(let i=0;i<e.length;i++){const m=e[i];if(0===i)m.anchor(r,s.PARENT),m.anchorStyle(s.HORIZONTAL,"packed",p);else{const t=e[i-1];t.anchor(d,m.documentId),m.anchor(c,t.documentId),i===e.length-1&&m.anchor(l,s.PARENT)}if(m!==n){if(m.inlineVertical){let i=!1;switch((void 0===h||Ht(m)>Ht(h))&&(h=m),m.verticalAlign){case"text-top":a&&m!==a?m.anchor(ht.CSS.TOP,a.documentId):i=!0;break;case ht.CSS.MIDDLE:n&&!n.textElement||o?i=!0:m.anchorParent(s.VERTICAL);break;case"text-bottom":if(a&&m!==a){m!==o?m.anchor(ht.CSS.BOTTOM,a.documentId):o&&(i=!0);break}case ht.CSS.BOTTOM:if(void 0===u)for(let t=0;t<e.length;t++){const n=e[t];!n.baseline&&(void 0===u||n.linear.bottom>u.linear.bottom)&&(u=n)}m===u?i=!0:m.anchor(ht.CSS.BOTTOM,s.PARENT);break;case"baseline":void 0===n||m.blockVertical?i=!0:m.anchor("baseline",n.documentId);break;default:i=!0}i&&(m.anchorParent(s.VERTICAL,"packed"),m.modifyBox(2,m.linear.top-t.box.top),m.baselineAltered=!0)}else m.plainText&&n?m.anchor("baseline",n.documentId):m.anchorParent(s.VERTICAL,"packed");m.anchored=!0}else n.baselineActive=!0;Mt.setConstraintDimension(m)}if(n){if(h&&h!==n&&n.textElement&&Ht(h)>Ht(n))switch(h.verticalAlign){case ht.CSS.MIDDLE:n.anchorParent(s.VERTICAL,void 0,void 0,!0);break;case"baseline":n.anchor("baseline",h.documentId);break;case ht.CSS.BOTTOM:case"text-bottom":n.anchor(ht.CSS.BOTTOM,h.documentId);break;case"sub":h.textElement||(n.anchor(ht.CSS.BOTTOM,h.documentId),n.modifyBox(8,-1*Math.ceil(n.fontSize*this.localSettings.deviations.subscriptBottomOffset)));break;case"super":h.textElement||(n.anchor(ht.CSS.BOTTOM,h.documentId),n.modifyBox(2,-1*Math.ceil(n.fontSize*this.localSettings.deviations.superscriptTopOffset)))}else n.anchorParent(s.VERTICAL,"packed"),n.modifyBox(2,n.linear.top-t.box.top);n.anchored=!0}}processConstraintColumn(t,e){let n=[];const a=[n];for(let t=0;t<e.length;t++){const i=e[t];"all"===i.css("columnSpan")?(n.length?a.push([i]):n.push(i),a.push(n=[])):n.push(i)}0===n.length&&a.pop();const i=t.toFloat("columnGap")||ut.getFontSize(document.body)||16,o=t.toFloat("columnWidth"),r=t.toInt("columnCount");let l,c=0;if(o>0){let e=t.box.width;for(;e-o>=0;)c++,e-=o+i}else c=1/0;function d(t){const e=t[0],n=t[t.length-1];for(let e=0;e<t.length;e++){const n=t[e];e>0&&n.anchor(Et.STRING_BASE.LEFT_RIGHT,t[e-1].documentId),e<t.length-1&&n.anchor(Et.STRING_BASE.RIGHT_LEFT,t[e+1].documentId),n.anchored=!0}e.anchor(ht.CSS.LEFT,s.PARENT),n.anchor(ht.CSS.RIGHT,s.PARENT),e.anchorStyle(s.HORIZONTAL,"spread_inside")}function h(t,e){const n=t[0][0];for(let a=0;a<t.length;a++){const i=t[a];for(let o=0;o<i.length;o++){const r=i[o];if(0===o?0===a?l?(l.anchor(Et.STRING_BASE.BOTTOM_TOP,r.documentId),r.anchor(Et.STRING_BASE.TOP_BOTTOM,l.documentId)):(r.anchor(ht.CSS.TOP,s.PARENT),r.anchorStyle(s.VERTICAL)):(r.anchor(ht.CSS.TOP,n.documentId),r.anchorStyle(s.VERTICAL),r.modifyBox(2)):(i[o-1].anchor(Et.STRING_BASE.BOTTOM_TOP,r.documentId),r.anchor(Et.STRING_BASE.TOP_BOTTOM,i[o-1].documentId)),o>0&&r.anchor(ht.CSS.LEFT,i[0].documentId),o===i.length-1){if(e)r.anchor(ht.CSS.BOTTOM,s.PARENT);else if(a>0&&!r.multiline){const e=t[a-1][o];e&&!e.multiline&&Tt.withinRange(r.bounds.top,e.bounds.top)&&(r.anchor(ht.CSS.TOP,e.documentId),r.modifyBox(2,-e.marginTop))}r.modifyBox(8)}r.anchored=!0,r.positioned=!0}}}for(let e=0;e<a.length;e++){const n=a[e],u=n[0];if(1===n.length)0===e?(u.anchor(ht.CSS.TOP,s.PARENT),u.anchorStyle(s.VERTICAL)):l&&(l.anchor(Et.STRING_BASE.BOTTOM_TOP,u.documentId),u.anchor(Et.STRING_BASE.TOP_BOTTOM,l.documentId)),t.rightAligned?t.anchor(ht.CSS.RIGHT,s.PARENT):t.centerAligned?t.anchorParent(s.HORIZONTAL):t.anchor(ht.CSS.LEFT,s.PARENT),e===a.length-1?u.anchor(ht.CSS.BOTTOM,s.PARENT):l=n[0];else{const s=[];let u=Math.min(n.length,c,r||1/0),p=0;if(u>1){let e=n.length>=u?Math.ceil(n.length/u):1;const a=Math.floor(n.reduce((t,e)=>t+e.bounds.height,0)/u);let o=e>1&&n.length%u!=0?n.length-u:1/0,r=0;for(let t=0,i=0,l=0;t<n.length;t++,l++){const c=n[t],d=l%e==0;i<u-1&&(d||o<=0||t>0&&(n[t-1].bounds.height>=a||s[i].length&&n.length-t+1==u-i&&n[t-1].bounds.height>n[t+1].bounds.height))&&(t>0&&(i++,d?o--:o++),void 0===s[i]&&(s[i]=[]),l=0),s[i].push(c),c.length&&(r+=mt.maxArray(Tt.objectMap(c.children,t=>t.marginLeft+t.marginRight))),t>0&&/H\d/.test(c.tagName)?1===s[i].length&&t===n.length-2?(u--,o=0):(l+1)%e==0&&n.length-t>u&&!n[t+1].multiline&&n[t+1].bounds.height<a&&(s[i].push(n[++t]),l=-1):n.length-t==u-i&&o!==1/0&&(e=1)}p=u>1?Math.max((r+i*(u-1))/t.box.width/u,.01):0}else s.push(n);const m=[];for(let t=0;t<s.length;t++){for(const e of s[t])e.setLayoutWidth(ht.CSS.PX_0),e.app("layout_constraintWidth_percent",mt.truncate(1/u-p,this.localSettings.precision.standardFloat));m.push(s[t][0])}const f=[].fill(0);for(let e=0;e<s.length;e++){const n=s[e];if(e<s.length-1&&n.length>1){const t=n[n.length-1];/H\d/.test(t.tagName)&&(n.pop(),m[e+1]=t,s[e+1].unshift(t))}const a=[];for(let t=0;t<n.length;t++){const i=n[t];i.naturalElement?a.push(i.element.cloneNode(!0)):f[e]+=i.linear.height}if(a.length){const n=pt.createStyleElement(document.body,"div",{width:ut.formatPX(o||t.box.width/u),visibility:"hidden"});for(const t of a)n.appendChild(t);f[e]+=n.getBoundingClientRect().height,document.body.removeChild(n)}}for(let t=0;t<m.length;t++){const e=m[t];t>0&&e.modifyBox(16,i)}d(m),h(s,e===a.length-1);let g=0;for(let t=0;t<f.length;t++)f[t]>=g&&(l=s[t].pop(),g=f[t])}}}processConstraintChain(t,e){const n=ct.actualParent(e)||t,a=ct.partitionRows(e),i=t.hasAlign(512);a.length>1&&(t.horizontalRows=a),!t.hasWidth&&e.some(t=>t.has(ht.CSS.WIDTH,32))&&t.setLayoutWidth(s.MATCH_PARENT);const o=[];let r=!1;for(let t=0;t<a.length;t++){const e=a[t],l=a[t-1],[c,d]=Tt.partitionArray(e,t=>t.float===ht.CSS.RIGHT||t.autoMargin.left);let h,u;if([d,c].forEach(e=>{if(0===e.length)return;const d=e===c,{anchorStart:p,anchorEnd:m,chainStart:f,chainEnd:g}=vt(d),T=e[0],S=e[e.length-1];T.anchor(p,s.PARENT),i||n.css("textAlign")!==ht.CSS.CENTER?e.length>1&&(d?S.anchorStyle(s.HORIZONTAL,"packed",1):T.anchorStyle(s.HORIZONTAL)):T.anchorStyle(s.HORIZONTAL,"spread"),(e.length>1||S.autoMargin.leftRight)&&S.anchor(m,s.PARENT);for(let c=0;c<e.length;c++){const E=e[c],A=e[c-1],b=e[c+1];if(0===t?1===a.length?(E.anchorParent(s.VERTICAL),E.autoMargin.topBottom||E.anchorStyle(s.VERTICAL,"packed",E.autoMargin.top?1:0)):E.anchor(ht.CSS.TOP,s.PARENT):r||t!==a.length-1||E.anchor(ht.CSS.BOTTOM,s.PARENT),E.autoMargin.leftRight?E.anchorParent(s.HORIZONTAL):(A&&E.anchor(f,A.documentId),b&&E.anchor(g,b.documentId)),Mt.setConstraintDimension(E),i&&t>0&&0===c){let t=!1;for(const e of o)if(Math.ceil(E.linear.top)<Math.floor(e.linear.bottom)){t=!0;break}if(t){h=l[l.length-1];for(let t=o.length-2;t>=0;t--){const e=o[t];if(e.linear.bottom>h.linear.bottom){if(d&&Math.ceil(e.linear[m])-Math.floor(n.box[m])<E.linear.width)continue;const a=o[t+1];E.anchor(p,a.documentId,!0),d?E.modifyBox(4,-a.marginRight,!1):E.modifyBox(16,-a.marginLeft,!1),T.anchorDelete(g),S.anchorDelete(m),T.delete(s.APP,"layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),void 0===u&&(u=E,r=!0);break}}}}}}),i&&Tt.concatMultiArray(o,d,c),t>0){if(void 0===h){h=l[0];for(let t=1;t<l.length;t++)l[t].linear.bottom>=h.linear.bottom&&(h=l[t])}if(void 0===u){u=e[0];for(let t=1;t<e.length;t++)e[t].linear.bottom>=u.linear.bottom&&(u=e[t]);r=!1}u.anchor(Et.STRING_BASE.TOP_BOTTOM,h.documentId),h.anchor(Et.STRING_BASE.BOTTOM_TOP,u.documentId);for(const t of e)t!==u&&(t.anchor(ht.CSS.TOP,u.documentId),t.autoMargin.topBottom||t.anchorStyle(s.VERTICAL,"packed",t.autoMargin.top?1:0),t.modifyBox(2,-1*u.marginTop))}}}get userSettings(){return this.application.userSettings}get containerTypeHorizontal(){return{containerType:t.LINEAR,alignmentType:8,renderType:0}}get containerTypeVertical(){return{containerType:t.LINEAR,alignmentType:16,renderType:0}}get containerTypeVerticalMargin(){return{containerType:t.FRAME,alignmentType:256,renderType:0}}get containerTypePercent(){return{containerType:t.CONSTRAINT,alignmentType:8,renderType:0}}get afterInsertNode(){const t=this.userSettings;return e=>{e.localSettings={targetAPI:void 0!==t.targetAPI?t.targetAPI:28,supportRTL:void 0===t.supportRTL||t.supportRTL,floatPrecision:this.localSettings.precision.standardFloat}}}}class Dt extends squared.base.ExtensionManager{}var Gt={resources:{">":{color:{"@":["name"],"~":!0}}}},Bt={resources:{">":{dimen:{"@":["name"],"~":!0}}}},kt={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},Wt={resources:{">":{string:{"@":["name"],"~":!0}}}},Xt={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":!0}}}}}},Vt={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":!0}}}}}};const Ft=squared.lib.math,zt=squared.lib.util,qt=squared.lib.xml,Ut=/([">])(-?[\d.]+)px(["<])/g,Yt=/^(.+)\/(.+?\.\w+)$/;function $t(t){const e=[];for(let n=0;n<t.length;n+=3)e.push({pathname:t[n+1],filename:t[n+2],content:t[n]});return e}function jt(t){const e=[];for(let n=0;n<t.length;n+=3)e.push({pathname:t[n+1],filename:t[n+2],content:"",uri:t[n]});return e}function Zt(t,e=160,n="dp",a=!1,i=3){return"dp"===n?t.replace(Ut,(t,...n)=>n[0]+function(t,e=160,n=!1,a=3){let i=parseFloat(t);return isNaN(i)?"0dp":160!==e?(0!=(i/=e/160)&&i>-1&&i<1?i.toPrecision(a):Ft.truncate(i,a-1))+(n?"sp":"dp"):Math.round(i)+(n?"sp":"dp")}(n[1],e,a,i)+n[2]):t}const Kt=(t,e,n)=>({pathname:t,filename:e,content:n}),Jt=(t,e)=>(""+t).toLowerCase()>=(""+e).toLowerCase()?1:-1;class Qt extends squared.base.File{saveAllToDisk(t){const e=[];for(let n=0;n<t.length;n++)e.push(Kt(t[n].pathname,0===n?this.userSettings.outputMainFileName:`${t[n].filename}.xml`,t[n].content));this.saveToDisk(zt.concatMultiArray(e,$t(this.resourceStringToXml()),$t(this.resourceStringArrayToXml()),$t(this.resourceFontToXml()),$t(this.resourceColorToXml()),$t(this.resourceDimenToXml()),$t(this.resourceStyleToXml()),$t(this.resourceDrawableToXml()),jt(this.resourceDrawableImageToXml()),$t(this.resourceAnimToXml())),this.userSettings.manifestLabelAppName)}layoutAllToXml(t,e=!1){const n={},a=[];for(let i=0;i<t.length;i++){const o=t[i];n[o.filename]=[o.content],e&&a.push(Kt(o.pathname,0===i?this.userSettings.outputMainFileName:`${o.filename}.xml`,o.content))}return e&&this.saveToDisk(a,this.userSettings.manifestLabelAppName),n}resourceAllToXml(t=!1){const e={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),drawableImage:this.resourceDrawableImageToXml(),anim:this.resourceAnimToXml()};for(const t in e)0===e[t].length&&delete e[t];if(t){const t=[];for(const n in e)zt.concatArray(t,"image"===n?jt(e[n]):$t(e[n]));this.saveToDisk(t,this.userSettings.manifestLabelAppName)}return e}resourceStringToXml(t=!1){const e=[],n=[{string:[]}];this.stored.strings.has("app_name")||n[0].string.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[t,e]of Array.from(this.stored.strings.entries()).sort(Jt))n[0].string.push({name:t,innerText:e});return e.push(qt.replaceTab(qt.applyTemplate("resources",Wt,n),this.userSettings.insertSpaces),"res/values","strings.xml"),t&&this.saveToDisk($t(e),this.userSettings.manifestLabelAppName),e}resourceStringArrayToXml(t=!1){const e=[];if(this.stored.arrays.size){const n=[{"string-array":[]}];for(const[t,e]of Array.from(this.stored.arrays.entries()).sort())n[0]["string-array"].push({name:t,item:zt.objectMap(e,t=>({innerText:t}))});e.push(qt.replaceTab(qt.applyTemplate("resources",Xt,n),this.userSettings.insertSpaces),"res/values","string_arrays.xml"),t&&this.saveToDisk($t(e),this.userSettings.manifestLabelAppName)}return e}resourceFontToXml(t=!1){const e=[];if(this.stored.fonts.size){const n=this.userSettings,a=r[n.targetAPI<26?s.APP:s.ANDROID],i=this.resource.application.controllerHandler.localSettings.directory.font;for(const[t,o]of Array.from(this.stored.fonts.entries()).sort()){const r=[{"xmlns:android":a,font:[]}];for(const e in o){const[n,a,s]=e.split("|");let l=t;"normal"===a?l+="400"===s?"_normal":`_${o[e]}`:(l+=`_${a}`,"400"!==s&&(l+=`_${o[e]}`)),r[0].font.push({font:`@font/${l}`,fontStyle:a,fontWeight:s});const c=this.resource.getFont(n,a,s);c&&c.srcUrl&&this.addAsset({pathname:i,filename:l+"."+zt.fromLastIndexOf(c.srcUrl,".").toLowerCase(),uri:c.srcUrl})}let s=qt.replaceTab(qt.applyTemplate("font-family",kt,r),n.insertSpaces);n.targetAPI<26&&(s=s.replace(/\s+android:/g," app:")),e.push(s,i,`${t}.xml`)}t&&this.saveToDisk($t(e),n.manifestLabelAppName)}return e}resourceColorToXml(t=!1){const e=[];if(this.stored.colors.size){const n=[{color:[]}];for(const[t,e]of Array.from(this.stored.colors.entries()).sort())n[0].color.push({name:e,innerText:t});e.push(qt.replaceTab(qt.applyTemplate("resources",Gt,n),this.userSettings.insertSpaces),"res/values","colors.xml"),t&&this.saveToDisk($t(e),this.userSettings.manifestLabelAppName)}return e}resourceStyleToXml(t=!1){const e=this.userSettings,n=[],a=[];if(this.stored.styles.size){const t=[{style:[]}];for(const e of Array.from(this.stored.styles.values()).sort((t,e)=>(""+t.name).toLowerCase()>=(""+e.name).toLowerCase()?1:-1))if(Array.isArray(e.items)){const n=[];for(const t of e.items.sort((t,e)=>t.key>=e.key?1:-1))n.push({name:t.key,innerText:t.value});t[0].style.push({name:e.name,parent:e.parent,item:n})}a.push({data:t,pathname:"res/values",filename:"styles.xml"})}if(this.stored.themes.size){const t={};for(const[n,i]of this.stored.themes.entries()){const o=[{style:[]}];for(const[a,r]of i.entries()){const i=[];for(const t in r.items)i.push({name:t,innerText:r.items[t]});t[n]&&a===e.manifestThemeName&&!i.length||o[0].style.push({name:a,parent:r.parent,item:i}),a===e.manifestThemeName&&(t[n]=!0)}const r=Yt.exec(n);r&&a.push({data:o,pathname:r[1],filename:r[2]})}}for(const t of a)n.push(qt.replaceTab(Zt(qt.applyTemplate("resources",Vt,t.data),e.resolutionDPI,e.convertPixels,!0),e.insertSpaces),t.pathname,t.filename);return t&&this.saveToDisk($t(n),this.userSettings.manifestLabelAppName),n}resourceDimenToXml(t=!1){const e=[];if(this.stored.dimens.size){const n=[{dimen:[]}],a=this.userSettings;for(const[t,e]of Array.from(this.stored.dimens.entries()).sort())n[0].dimen.push({name:t,innerText:e});e.push(qt.replaceTab(Zt(qt.applyTemplate("resources",Bt,n),a.resolutionDPI,a.convertPixels),a.insertSpaces),"res/values","dimens.xml"),t&&this.saveToDisk($t(e),a.manifestLabelAppName)}return e}resourceDrawableToXml(t=!1){const e=[];if(this.stored.drawables.size){const n=this.userSettings;for(const[t,a]of this.stored.drawables.entries())e.push(qt.replaceTab(Zt(a,n.resolutionDPI,n.convertPixels),n.insertSpaces),"res/drawable",`${t}.xml`);t&&this.saveToDisk($t(e),n.manifestLabelAppName)}return e}resourceDrawableImageToXml(t=!1){const e=[];if(this.stored.images.size){for(const[t,n]of this.stored.images.entries())if(Object.keys(n).length>1)for(const a in n)e.push(n[a],`res/drawable-${a}`,`${t}.${zt.fromLastIndexOf(n[a],".")}`);else n.mdpi&&e.push(n.mdpi,"res/drawable",`${t}.${zt.fromLastIndexOf(n.mdpi,".")}`);t&&this.saveToDisk(jt(e),this.userSettings.manifestLabelAppName)}return e}resourceAnimToXml(t=!1){const e=[];if(this.stored.animators.size){const n=this.userSettings;for(const[t,a]of this.stored.animators.entries())e.push(qt.replaceTab(a,n.insertSpaces),"res/anim",`${t}.xml`);t&&this.saveToDisk($t(e),n.manifestLabelAppName)}return e}get userSettings(){return this.resource.userSettings}get stored(){return this.resource.stored}}const te=squared.base.lib.enumeration;class ee extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=!0}afterBaseLayout(){for(const t of this.application.processing.cache)if(t.visible&&t.hasProcedure(te.NODE_PROCEDURE.ACCESSIBILITY))switch(t.controlName){case a.EDIT:t.companion||[t.previousSibling,t.previousSibling].some(e=>{if(e&&e.visible&&e.pageFlow){const n=t.element,a=e.element,i="LABEL"===e.documentParent.tagName?e.documentParent:void 0;if(n.id&&n.id===a.htmlFor)return e.android("labelFor",t.documentId),!0;if(i&&e.textElement)return i.android("labelFor",t.documentId),!0}return!1});case a.SELECT:case a.CHECKBOX:case a.RADIO:case a.BUTTON:{const e=t.element;e.readOnly&&t.android("focusable","false"),e.disabled&&t.android("enabled","false");break}}}}var ne=squared.base.Layout;const ae=squared.lib.css,ie=squared.lib.constant,oe=squared.lib.dom,re=squared.lib.math,se=squared.lib.util,le=squared.base.lib.constant,ce=squared.base.lib.enumeration,de=/(start|end|center|baseline)/,he=/(start|end|center|baseline|left|right)/;function ue(t,e,n){const a="column"===e,i=a?ie.CSS.WIDTH:ie.CSS.HEIGHT,o=t[e];let r=0;if(o.unit.length)for(let e=0;e<o.unit.length;e++){const n=o.unit[e];if(n.endsWith("px"))r+=parseFloat(n);else{let n=0;se.captureMap(t.rowData[e],t=>t&&t.length>0,t=>n=Math.min(n,...se.objectMap(t,t=>t.bounds[i]))),r+=n}}else if((r=re.maxArray(o.unitTotal))<=0)return 0;return r+=o.gap*(o.count-1),(a?n.actualWidth:n.actualHeight)-(r+=n.contentBox?a?n.borderLeftWidth+n.borderRightWidth:n.borderTopWidth+n.borderBottomWidth:a?n.contentBoxWidth:n.contentBoxHeight)}function pe(t,e,n,a){const i=t[a];if(n.startsWith("space")){const r=ue(t,a,e);if(r>0){let e,s,l;"column"===a?(e=16,s=4,l=ie.CSS.WIDTH):(e=2,s=8,l=ie.CSS.HEIGHT);const c=function(t,e){const n=[];if("column"===e)for(let e=0;e<t.column.count;e++){n[e]=[];for(let a=0;a<t.row.count;a++)n[e].push(t.rowData[a][e])}else for(let e=0;e<t.row.count;e++)n.push(t.rowData[e]);return n}(t,a),d=t[a].count,h=new Set;function o(t){const e=Math.floor(r/t);return[e,r-e*t]}switch(n){case"space-around":{const[t,n]=o(2*d);for(let a=0;a<d;a++)for(const i of new Set(se.flatArray(c[a]))){const o=(a>0&&a<=n?1:0)+t;h.has(i)?i.cssPX(l,r/d):(i.modifyBox(e,o),i.modifyBox(s,t),h.add(i))}i.normal=!1;break}case"space-between":if(d>1){const[t,e]=o(d-1);for(let n=0;n<d;n++)for(const i of new Set(se.flatArray(c[n]))){const o=t+(n<e?1:0);n<d-1?h.has(i)?i.cssPX(l,o):(i.modifyBox(s,o),h.add(i)):se.convertInt(i.android("column"===a?"layout_columnSpan":"layout_rowSpan"))>1&&(i.cssPX(l,o),h.has(i)&&i.modifyBox(s,-o))}}i.normal=!1;break;case"space-evenly":{const[t,n]=o(d+1);for(let a=0;a<d;a++)for(const i of new Set(se.flatArray(c[a]))){const o=t+(a<n?1:0);h.has(i)?i.cssPX(l,o):(0===a&&i.modifyBox(e,t),i.modifyBox(s,o),h.add(i))}i.normal=!1;break}}}}else{const o=ue(t,a,e);if(o>0){const t="column"===a?256:32;switch(n){case ie.CSS.CENTER:e.modifyBox(t,Math.floor(o/2)),i.normal=!1;break;case ie.CSS.RIGHT:if("row"===a)break;case ie.CSS.END:case"flex-end":e.modifyBox(t,o),i.normal=!1}}}}class me extends squared.base.extensions.CssGrid{processNode(e,n){super.processNode(e,n);const a=e.data(le.EXT_NAME.CSS_GRID,le.STRING_BASE.EXT_DATA);if(a){const i=new ne(n,e,t.GRID,4,e.children);return i.rowCount=a.row.count,i.columnCount=a.column.count,{output:this.application.renderNode(i),complete:!0}}}processChild(e,n){const i=n.data(le.EXT_NAME.CSS_GRID,le.STRING_BASE.EXT_DATA),o=e.data(le.EXT_NAME.CSS_GRID,"cellData");let r,l;if(i&&o){function c(t,a,r){const l=i[a],c=o[`${a}Start`],d=o[`${a}Span`],h=se.capitalize(r);let u=0,p=0,m=!1,f=0,g=0;l.unit.length&&l.unit.every(t=>t===ie.CSS.AUTO)&&(r===ie.CSS.WIDTH?l.unit=[].fill("1fr"):l.unit.length=0);for(let a=0,i=0;a<d;a++){const o=l.unitMin[c+a];""!==o&&(f+=n.parseUnit(o));let h=l.unit[c+a];if(!h){if(!l.auto[i])continue;h=l.auto[i],l.auto[i+1]&&i++}if(h===ie.CSS.AUTO||"max-content"===h){if(d<l.unit.length&&(!n.has(r)||l.unit.some(t=>ae.isLength(t))||"max-content"===h)){u=e.bounds[r],p=0,g=0;break}if(r===ie.CSS.WIDTH){u=0,p=0,g=.01;break}}else if("min-content"===h){if(!t.has(r)){t.android(`layout_${r}`,s.WRAP_CONTENT,!1);break}}else if(ae.isPercent(h))g+=parseFloat(h)/100,p=u,u=0;else if(h.endsWith("fr"))r===ie.CSS.WIDTH||e.hasHeight?(g+=parseFloat(h),p=u):(g=0,p=e.bounds[r]),u=0;else if(h.endsWith("px")){const t=parseFloat(h);0===p?u+=t:p+=t}o===ie.CSS.PX_0&&e.textElement&&(m=!0)}if(d>1){const t=(d-1)*l.gap;u>0&&0===p?u+=t:p>0&&(p+=t),f>0&&(f+=t)}return f>0&&(l.autoFill&&0===u&&1===i["column"===a?"row":"column"].count?(u=Math.max(e.actualWidth,f),g=0):p=f),t.android(`layout_${a}`,""+c),d>1&&t.android(`layout_${a}Span`,""+d),p>0&&!t.has(`min${h}`)&&t.css(`min${h}`,ae.formatPX(p),!0),g>0?(t.android(`layout_${a}Weight`,re.truncate(g,e.localSettings.floatPrecision)),t.has(r,34)||(t.android(`layout_${r}`,ie.CSS.PX_0),t.mergeGravity(s.LAYOUT_GRAVITY,"column"===a?"fill_horizontal":"fill_vertical"))):u>0&&(t.contentBox&&(u-=t[`contentBox${h}`]),m&&!t.has(`max${h}`)?(t.css(`max${h}`,ae.formatPX(u),!0),t.mergeGravity(s.LAYOUT_GRAVITY,"column"===a?"fill_horizontal":"fill_vertical")):t.has(r)||t.css(r,ae.formatPX(u),!0)),[c,d]}const{alignSelf:d,justifySelf:h}=e.flexbox;if(de.test(d)||he.test(h)){(r=this.application.createNode(oe.createElement(e.actualParent&&e.actualParent.element))).tagName=e.tagName,r.setControlType(a.FRAME,t.FRAME),r.inherit(e,"initial","base"),r.resetBox(510),r.exclude(ce.NODE_RESOURCE.BOX_STYLE|ce.NODE_RESOURCE.ASSET,ce.NODE_PROCEDURE.CUSTOMIZATION),n.appendTry(e,r),r.render(n),e.transferBox(30,r),c(r,"column",ie.CSS.WIDTH),c(r,"row",ie.CSS.HEIGHT);let i=!1;h.endsWith(ie.CSS.START)||h.endsWith(ie.CSS.LEFT)||h.endsWith("baseline")?(e.mergeGravity(s.LAYOUT_GRAVITY,ie.CSS.LEFT),i=!0):h.endsWith(ie.CSS.END)||h.endsWith(ie.CSS.RIGHT)?(e.mergeGravity(s.LAYOUT_GRAVITY,ie.CSS.RIGHT),i=!0):h.endsWith(ie.CSS.CENTER)&&(e.mergeGravity(s.LAYOUT_GRAVITY,s.CENTER_HORIZONTAL),i=!0),e.hasWidth||e.setLayoutWidth(i?s.WRAP_CONTENT:s.MATCH_PARENT,!1),d.endsWith(ie.CSS.START)||d.endsWith("baseline")?e.mergeGravity(s.LAYOUT_GRAVITY,ie.CSS.TOP):d.endsWith(ie.CSS.END)?e.mergeGravity(s.LAYOUT_GRAVITY,ie.CSS.BOTTOM):d.endsWith(ie.CSS.CENTER)?e.mergeGravity(s.LAYOUT_GRAVITY,s.CENTER_VERTICAL):e.hasHeight||e.setLayoutHeight(s.MATCH_PARENT,!1),e.outerWrapper=r,e.parent=r,l=this.application.renderNode(new ne(n,r,t.FRAME,2048,r.children))}const u=r||e;c(u,"column",ie.CSS.WIDTH),u.has(ie.CSS.WIDTH)||u.mergeGravity(s.LAYOUT_GRAVITY,"fill_horizontal");const[p,m]=c(u,"row",ie.CSS.HEIGHT);"normal"===i.alignContent&&!n.has(ie.CSS.HEIGHT)&&1===m&&!0===i.rowSpanMultiple[p]&&(!i.row.unit[p]||i.row.unit[p]===ie.CSS.AUTO)&&e.initial.bounds&&e.bounds.height>e.initial.bounds.height?u.css("minHeight",ae.formatPX(e.actualHeight),!0):u.has(ie.CSS.HEIGHT)||1===i.row.count&&"space-between"===i.alignContent||(u.mergeGravity(s.LAYOUT_GRAVITY,"fill_vertical"),"normal"===i.alignContent&&n.hasHeight&&0===i.rowSpanMultiple.length&&u.mergeGravity("layout_rowWeight","1"))}return{parent:r,renderAs:r,outputAs:l}}postBaseLayout(t){const e=t.data(le.EXT_NAME.CSS_GRID,le.STRING_BASE.EXT_DATA);if(e){if(t.hasWidth&&"normal"!==e.justifyContent&&pe(e,t,e.justifyContent,"column"),t.hasHeight&&"normal"!==e.alignContent&&(pe(e,t,e.alignContent,"row"),e.rowWeight.length>1))for(let t=0;t<e.row.count;t++)if(e.rowWeight[t]>0){const n=this.application.controllerHandler.localSettings.precision.standardFloat;for(let a=0;a<e.rowData[t].length;a++){const i=e.rowData[t][a];if(i)for(let a of i)a.outerWrapper&&(a=a.outerWrapper),a.android("layout_rowWeight",""+re.truncate(e.rowWeight[t],n)),a.setLayoutHeight(ie.CSS.PX_0)}}if(e.column.normal&&!e.column.unit.includes(ie.CSS.AUTO)){const n=e.column.gap*(e.column.count-1);n>0&&(t.renderParent&&!t.renderParent.hasAlign(4)&&(t.cssPX("minWidth",n),t.cssPX(ie.CSS.WIDTH,n,!1,!0)),!t.has(ie.CSS.WIDTH)&&t.has("maxWidth")&&t.css(ie.CSS.WIDTH,ae.formatPX(t.actualWidth+n),!0))}}}postOptimize(t){const e=t.data(le.EXT_NAME.CSS_GRID,le.STRING_BASE.EXT_DATA);if(e){const n=this.application.controllerHandler,a=Array.from(e.children)[e.children.size-1];if(e.column.unit.length&&e.column.unit.every(t=>ae.isPercent(t))){const i=e.column.unit.reduce((t,e)=>t+parseFloat(e),0)+e.column.gap*e.column.count*100/t.actualWidth;if(i<100){t.android("columnCount",""+(e.column.count+1));for(let o=0;o<e.row.count;o++)n.addAfterOutsideTemplate(a.id,n.renderSpace(ae.formatPercent((100-i)/100),s.WRAP_CONTENT,0,0,H(void 0,{[t.localizeString(s.MARGIN_LEFT)]:ae.formatPX(e.column.gap),layout_row:""+o,layout_column:""+e.column.count})))}}for(let t=0;t<e.emptyRows.length;t++){const i=e.emptyRows[t];if(i)for(let o=0;o<i.length;o++)if(1===i[o]){n.addAfterOutsideTemplate(a.id,n.renderSpace(s.WRAP_CONTENT,ae.formatPX(e.row.gap),0,0,H(void 0,{layout_row:""+t,layout_column:""+o})));break}}}}}class fe extends squared.base.extensions.External{constructor(){super(...arguments),this.eventOnly=!0}}var ge=squared.base.Layout,Te=squared.base.NodeList;const Se=squared.lib.constant,Ee=squared.lib.math,Ae=squared.lib.util,be=squared.base.lib.constant,Ce=(squared,{leftTop:[Se.CSS.LEFT,Se.CSS.TOP],rightBottom:[Se.CSS.RIGHT,Se.CSS.BOTTOM],rightLeftBottomTop:[be.STRING_BASE.RIGHT_LEFT,be.STRING_BASE.BOTTOM_TOP],leftRightTopBottom:[be.STRING_BASE.LEFT_RIGHT,be.STRING_BASE.TOP_BOTTOM],widthHeight:["Width","Height"],horizontalVertical:[s.HORIZONTAL,s.VERTICAL]});function ye(t,e,n){const a=n===Se.CSS.WIDTH,i=`has${Ae.capitalize(n)}`;let o=t[i]||t.blockStatic&&Ae.withinRange(t.parseUnit(t.css(a?"maxWidth":"maxHeight")),t.box.width);if(o)for(const t of e){const e=t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin;if(a){if(e.horizontal){o=!1;break}}else if(e.vertical){o=!1;break}}const r=e.reduce((t,e)=>t+e.flexbox.grow,0);let s=0;function l(e){e.flexbox.basis=`${e.bounds[n]/t.box[n]*100}%`}if(e.length>1&&(a||o)){const t=[],a=[];let r,c=0,d=0,h=NaN;for(const l of e){const e=l.bounds[n];let u=!1;if(l.flexbox.grow>0||1!==l.flexbox.shrink){const a=l.parseUnit(l.flexbox.basis===Se.CSS.AUTO?l.css(n):l.flexbox.basis,n);if(a>0){const{shrink:n,grow:i}=l.flexbox;let o=!1;e<a?(isNaN(h)||n<h)&&(h=n,o=!0,s=1):(isNaN(h)||i>h)&&(h=i,o=!0,s=2),o&&(r=l,c=a,d=e),t.push({item:l,basis:a,dimension:e,shrink:n,grow:i});continue}l.flexbox.grow>0&&e>l[n]&&(u=!0)}l.flexbox.alignSelf===Se.CSS.AUTO&&(o&&!l[i]||u)&&a.push(l)}if(0!==s){if(t.length>1)for(const e of t){const t=e.item;t.flexbox.grow=t===r||e.basis===c&&(1===s&&h===e.shrink||2===s&&h===e.grow)?1:e.dimension/e.basis/(d/c)*e.basis/c}if(a.length)for(const t of a)l(t)}}if(a&&0===s)for(const n of e)n.cascadeSome(e=>e.multiline&&0===e.ascend(!1,t=>t[i],t).length)&&l(n);return r}function Re(t){return t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin}class Ie extends squared.base.extensions.Flexbox{processNode(e,n){super.processNode(e,n);const a=e.data(be.EXT_NAME.FLEXBOX,be.STRING_BASE.EXT_DATA);if(a.directionRow&&1===a.rowCount||a.directionColumn&&1===a.columnCount)return e.containerType=t.CONSTRAINT,e.alignmentType|=4,a.wrap=!1,{include:!0};{const i=new ge(n,e,0,4);return i.itemCount=e.length,i.rowCount=a.rowCount,i.columnCount=a.columnCount,a.directionRow&&e.hasHeight||a.directionColumn&&e.hasWidth||e.some(t=>!t.pageFlow)?i.containerType=t.CONSTRAINT:i.setType(t.LINEAR,a.directionColumn?8:16),{output:this.application.renderNode(i),complete:!0}}}processChild(e,n){if(e.hasAlign(128))return{output:this.application.renderNode(new ge(n,e,t.CONSTRAINT,4,e.children)),complete:!0};if(e.autoMargin.horizontal||e.autoMargin.vertical&&e.hasHeight){const a=n.data(be.EXT_NAME.FLEXBOX,be.STRING_BASE.EXT_DATA);if(a){const i=a.children.findIndex(t=>t===e);if(-1!==i){const o=this.application.controllerHandler.createNodeWrapper(e,n);return o.cssApply({marginTop:Se.CSS.PX_0,marginRight:Se.CSS.PX_0,marginBottom:Se.CSS.PX_0,marginLeft:Se.CSS.PX_0,display:"block"},!0),o.saveAsInitial(!0),o.flexbox=Object.assign({},e.flexbox),a.children[i]=o,e.autoMargin.horizontal&&!e.hasWidth&&e.setLayoutWidth(s.WRAP_CONTENT),{parent:o,renderAs:o,outputAs:this.application.renderNode(new ge(n,o,t.FRAME,2048,o.children))}}}}}postBaseLayout(t){const e=t.data(be.EXT_NAME.FLEXBOX,be.STRING_BASE.EXT_DATA);if(e){const n=[],a=[],i=[];if(e.wrap){let o;t.each(t=>{if(t.hasAlign(128)){const r=t.renderFilter(t=>t.pageFlow);if(r.length){if(e.directionRow)t.setLayoutWidth(s.MATCH_PARENT),n.push(r);else{if(t.setLayoutHeight(s.MATCH_PARENT),o){let n=o[0];for(let t=1;t<o.length;t++)o[t].linear.right>n.linear.right&&(n=o[t]);if(e.wrapReverse){const e=t.linear.left-n.actualRect(Se.CSS.RIGHT);e>0&&t.modifyBox(16,e)}t.constraint.horizontal=!0}a.push(r),o=r}i.push(t)}}}),t.layoutLinear?e.directionColumn&&e.wrapReverse&&t.mergeGravity(s.GRAVITY,Se.CSS.RIGHT):i.length&&(e.directionRow?a.push(i):n.push(i))}else e.directionRow?(e.directionReverse&&e.children.reverse(),n[0]=e.children):(e.directionReverse&&e.children.reverse(),a[0]=e.children);[n,a].forEach((n,a)=>{const o=0===a,r=o?1:0,l=Ce.horizontalVertical[a],c=Ce.horizontalVertical[r],d=Ce.widthHeight[a],h=Ce.widthHeight[r],u=Ce.leftTop[a],p=Ce.leftTop[r],m=Ce.rightBottom[a],f=Ce.rightBottom[r],g=Ce.leftRightTopBottom[a],T=Ce.rightLeftBottomTop[a],S=d.toLowerCase(),E=h.toLowerCase(),A=t[`has${h}`],b=t[`has${d}`],C=`layout_constraint${Ae.capitalize(l)}_weight`;function y(t,e){t.app(C,Ee.truncate(e,t.localSettings.floatPrecision)),t.android(`layout_${d.toLowerCase()}`,Se.CSS.PX_0)}for(let a=0;a<n.length;a++){const r=n[a],d=r[0],h=r[r.length-1],R=r===i,I=!R&&r.every(t=>0===t.flexbox.grow),N=I&&("space-between"===e.justifyContent||"space-around"===e.justifyContent&&r.length>1),_=[];let O,P=0,x=0,L=!0;if(R)if(b){let t="spread",n=0;switch(e.alignContent){case Se.CSS.LEFT:case Se.CSS.RIGHT:case"flex-end":t="packed",n=1,L=!1;break;case"baseline":case Se.CSS.START:case Se.CSS.END:case"flex-start":t="packed",L=!1}d.anchorStyle(l,t,n)}else d.anchorStyle(l);else if(x=1-ye(t,r,S),r.length>1){const t=new Set(Ae.objectMap(r,t=>t.initial.bounds?t.initial.bounds[E]:0));t.size>1&&(P=Ee.maxArray(Array.from(t)))}for(let t=0;t<r.length;t++){const i=r[t],d=r[t-1],h=r[t+1];if(h&&i.anchor(T,(h.outerWrapper||h).documentId),d&&i.anchor(g,(d.outerWrapper||d).documentId),R)L&&r.length>1&&b&&y(i,1),i.anchor(p,s.PARENT);else{const u=Re(i),m=i.innerWrapped;if(o){if(u.horizontal)if(m){let t;t=u.leftRight?s.CENTER_HORIZONTAL:i.localizeString(u.left?Se.CSS.RIGHT:Se.CSS.LEFT),m.mergeGravity(s.LAYOUT_GRAVITY,t),x>0&&(i.flexbox.basis=Se.CSS.PERCENT_0,_.push(i))}else u.leftRight||(u.left?d&&i.anchorDelete(g):h&&i.anchorDelete(T))}else if(u.vertical)if(m){let t;t=u.topBottom?s.CENTER_VERTICAL:i.localizeString(u.top?Se.CSS.BOTTOM:Se.CSS.TOP),m.mergeGravity(s.LAYOUT_GRAVITY,t),x>0&&(i.flexbox.basis=Se.CSS.PERCENT_0,_.push(i))}else u.topBottom||(u.top?d&&i.anchorDelete(g):h&&i.anchorDelete(T));switch(i.flexbox.alignSelf){case Se.CSS.START:case"flex-start":i.anchor(p,s.PARENT);break;case Se.CSS.END:case"flex-end":i.anchor(f,s.PARENT);break;case"baseline":o&&(void 0===O&&(O=Te.baseline(r)[0]),O&&i!==O&&i.anchor("baseline",O.documentId));break;case Se.CSS.CENTER:i.anchorParent(c,"packed",.5),0!==i[E]||o||A||!i.cascadeSome(t=>t.multiline)||i.android(`layout_${E}`,Se.CSS.PX_0);break;default:const d=i.innerWrapped,h=e.wrapReverse;switch(e.alignContent){case Se.CSS.CENTER:n.length%2==1&&a===Math.floor(n.length/2)?i.anchorParent(c):a<n.length/2?i.anchor(f,s.PARENT):a>=n.length/2&&i.anchor(p,s.PARENT);break;case"space-evenly":case"space-around":i.layoutFrame&&d?d.mergeGravity(s.LAYOUT_GRAVITY,o?s.CENTER_VERTICAL:s.CENTER_HORIZONTAL):i.anchorParent(c);break;case"space-between":N&&2===r.length&&i.anchorDelete(0===t?T:g),0===a?i.layoutFrame&&d?d.mergeGravity(s.LAYOUT_GRAVITY,h?f:p):i.anchor(h?f:p,s.PARENT):n.length>2&&a<n.length-1?i.layoutFrame&&d?d.mergeGravity(s.LAYOUT_GRAVITY,o?s.CENTER_VERTICAL:s.CENTER_HORIZONTAL):i.anchorParent(c):i.layoutFrame&&d?d.mergeGravity(s.LAYOUT_GRAVITY,h?p:f):i.anchor(h?p:f,s.PARENT);break;default:if(i.anchorParent(c),void 0!==i.innerWrapped&&i.innerWrapped.autoMargin[c]||i.anchorStyle(c,"packed",h?1:0),0===i[E]){const t=i.initial.bounds&&i.initial.bounds[E],n=t<P,a=`layout_${E}`;if(n){if(A||0===P||n){if(0===P&&(!A&&r.length>1||e.wrap))break;i.android(a,o&&!A?n?Se.CSS.PX_0:s.MATCH_PARENT:Se.CSS.PX_0),m&&!m.autoMargin[l]&&m.android(a,s.MATCH_PARENT)}}else A&&(0===P&&i.bounds[E]>t||i.flexElement&&(o&&"column"===i.css("flexDirection")||!o&&"row"===i.css("flexDirection")))&&i.android(a,Se.CSS.PX_0)}}}Mt.setFlexDimension(i,S)}i.anchored=!0,i.positioned=!0}if(x>0)for(const t of _){const e=Re(t);let n=1;o?e.leftRight&&(n=2):e.topBottom&&(n=2),y(t,Math.max(t.flexbox.grow,x*n/_.length))}if(d.anchor(u,s.PARENT),h.anchor(m,s.PARENT),!R&&(o||e.directionColumn)){let i=!1;if(I)switch(e.justifyContent){case"normal":e.directionColumn&&d.anchorStyle(l,"packed",e.directionReverse?1:0);break;case Se.CSS.LEFT:if(!o)break;case Se.CSS.START:case"flex-start":d.anchorStyle(l,"packed",e.directionReverse?1:0);break;case Se.CSS.CENTER:r.length>1&&d.anchorStyle(l,"packed",.5),i=!0;break;case Se.CSS.RIGHT:if(!o)break;case Se.CSS.END:case"flex-end":d.anchorStyle(l,"packed",1);break;case"space-between":1===r.length&&h.anchorDelete(m);break;case"space-evenly":if(r.length>1){d.anchorStyle(l,"spread");const t=Ae.capitalize(l);for(const e of r)e.app(`layout_constraint${t}_weight`,""+(e.flexbox.grow||1))}else i=!0;break;case"space-around":if(r.length>1){const e=this.application.controllerHandler;d.constraint[l]=!1,h.constraint[l]=!1,e.addGuideline(d,t,l,!0,!1),e.addGuideline(h,t,l,!0,!0)}else i=!0}N||n[a].some(t=>""!==t.app(C))&&!Ae.sameArray(n[a],t=>t.app(C))?d.anchorStyle(l,"spread_inside",0,!1):i||d.anchorStyle(l,"packed",e.directionReverse?1:0,!1)}}})}}}var Ne=squared.base.Layout;const _e=squared.lib.constant,Oe=squared.lib.css,Pe=squared.lib.util,xe=squared.base.lib.constant;squared;class Le extends squared.base.extensions.Grid{processNode(e,n){super.processNode(e,n);const a=e.data(xe.EXT_NAME.GRID,xe.STRING_BASE.EXT_DATA);if(a){const i=new Ne(n,e,t.GRID,4,e.children);return i.columnCount=a.columnCount,{output:this.application.renderNode(i),complete:!0}}}processChild(t,e){const n=e.data(xe.EXT_NAME.GRID,xe.STRING_BASE.EXT_DATA),a=t.data(xe.EXT_NAME.GRID,"cellData");if(n&&a){const n=a.siblings?a.siblings.slice(0):void 0;let i;if(n){if(n.unshift(t),t=(i=this.application.controllerHandler.processLayoutHorizontal(new Ne(e,this.application.controllerHandler.createNodeGroup(t,n,e),0,a.block?64:0,n)).layout).node,a.block)t.css("display","block");else for(const t of n)t.has(_e.CSS.WIDTH,32)&&t.css(_e.CSS.WIDTH,Oe.formatPX(t.bounds.width),!0);!function(t,e){const n=squared.base.extensions.Grid.createDataCellAttribute();for(const t of e){const e=t.data(xe.EXT_NAME.GRID,"cellData");e&&(e.cellStart&&(n.cellStart=!0),e.cellEnd&&(n.cellEnd=!0),e.rowEnd&&(n.rowEnd=!0),e.rowStart&&(n.rowStart=!0),t.data(xe.EXT_NAME.GRID,"cellData",null))}t.data(xe.EXT_NAME.GRID,"cellData",n)}(t,n)}if(a.rowSpan>1&&t.android("layout_rowSpan",""+a.rowSpan),a.columnSpan>1&&t.android("layout_columnSpan",""+a.columnSpan),"table-cell"===t.display&&t.mergeGravity(s.LAYOUT_GRAVITY,"fill"),i)return{parent:i.node,renderAs:i.node,outputAs:this.application.renderNode(i),complete:!0}}}postBaseLayout(t){if("collapse"!==t.css("borderCollapse")){const e=t.data(xe.EXT_NAME.GRID,xe.STRING_BASE.EXT_DATA);e&&t.renderEach(t=>{const n=t.data(xe.EXT_NAME.GRID,"cellData");if(n){const a=t.actualParent;if(a&&!a.visible&&(n.cellStart&&(e.paddingTop=a.paddingTop+a.marginTop),n.rowStart&&(e.paddingLeft=Math.max(a.marginLeft+a.paddingLeft,e.paddingLeft)),n.rowEnd)){const i=a.marginBottom+a.paddingBottom+(n.cellEnd?0:a.marginTop+a.paddingTop);if(i>0)if(n.cellEnd)e.paddingBottom=i;else{const n=this.application.controllerHandler;n.addAfterOutsideTemplate(t.id,n.renderSpace(s.MATCH_PARENT,Oe.formatPX(i),e.columnCount))}e.paddingRight=Math.max(a.marginRight+a.paddingRight,e.paddingRight)}}}),t.modifyBox(32,e.paddingTop),t.modifyBox(64,e.paddingRight),t.modifyBox(128,e.paddingBottom),t.modifyBox(256,e.paddingLeft)}if(!t.hasWidth){let e=-1/0;Pe.captureMap(t.renderChildren,t=>t.inlineFlow||!t.blockStatic,t=>e=Math.max(e,t.linear.right)),Pe.withinRange(t.box.right,e)&&t.setLayoutWidth(s.WRAP_CONTENT)}}}var ve=squared.base.Layout;const we=squared.lib.constant,He=squared.lib.css,Me=squared.lib.dom,De=squared.lib.util,Ge=squared.base.lib.constant,Be=(squared,24),ke=8;class We extends squared.base.extensions.List{processNode(e,n){super.processNode(e,n);const a=new ve(n,e,0,0,e.children);if(a.linearY&&!a.linearX?(a.rowCount=e.length,a.columnCount=e.some(t=>"inside"===t.css("listStylePosition"))?3:2,a.setType(t.GRID,4)):a.singleRowAligned&&(a.rowCount=1,a.columnCount=a.length,a.setType(t.RELATIVE,8)),0!==a.containerType)return{output:this.application.renderNode(a),complete:!0}}processChild(e,n){const i=e.data(Ge.EXT_NAME.LIST,Ge.STRING_BASE.EXT_DATA);if(i){const o=this.application.controllerHandler;let r=e.marginLeft,l=0,c=!1,d=null;e.modifyBox(16),n.is(t.GRID)?(l=De.convertInt(n.android("columnCount")),c=!0):n.item(0)===e&&(c=!0),c&&(r+=n.paddingLeft>0?n.paddingLeft:n.marginLeft);const h=e.length?e:this.application.controllerHandler.createNodeGroup(e,[e],n);let u=i.ordinal?void 0:e.find(t=>t.float===we.CSS.LEFT&&t.marginLeft<0&&Math.abs(t.marginLeft)<=t.documentParent.marginLeft);if(u){const a=new ve(n,u);u.inlineText||0===u.length?a.containerType=t.TEXT:(a.singleRowAligned?a.setType(t.RELATIVE,8):a.setType(t.CONSTRAINT,2),a.retain(u.children)),u.parent=n,u.render(n),3===l&&e.android("layout_columnSpan","2"),(r+=u.marginLeft)>0&&!u.hasWidth&&u.android("minWidth",He.formatPX(r)),u.modifyBox(16),this.application.addLayoutTemplate(n,u,this.application.renderNode(a))}else{const p=l>0?"0":"",m="inside"===e.css("listStylePosition");let f,g=we.CSS.RIGHT,T=0,S=0;if(""!==i.imageSrc){if(i.imagePosition){const t=He.getBackgroundPosition(i.imagePosition,e.actualDimension,e.fontSize);({top:T,left:S}=t),g=we.CSS.LEFT,e.marginLeft<0?(d=e.marginLeft,d+=n.paddingLeft>0?n.paddingLeft:n.marginLeft):c=!1,r=0}f=this.application.resourceHandler.addImageSrc(i.imageSrc)}let E=0;if(g===we.CSS.LEFT)r+=e.paddingLeft-S,e.modifyBox(256);else{const t=i.ordinal?i.ordinal.length:1;E=Math.max(r/(f?6:4*t),4)}const A=H(void 0,{layout_columnWeight:p}),b=Me.createElement(e.actualParent&&e.actualParent.element,f?"img":"span");u=this.application.createNode(b),m?(o.addBeforeOutsideTemplate(u.id,o.renderNodeStatic(a.SPACE,H(void 0,{minWidth:He.formatPX(r),layout_columnWeight:p}))),r=Be):3===l&&h.android("layout_columnSpan","2"),"DT"!==e.tagName||f?(u.tagName=`${e.tagName}_ORDINAL`,f?(Object.assign(A.android,{src:`@drawable/${f}`,scaleType:m||g!==we.CSS.RIGHT?"fitStart":"fitEnd",baselineAlignBottom:c?"true":""}),u.setControlType(a.IMAGE,t.IMAGE),b.src=He.resolveURL(i.imageSrc)):i.ordinal?(b.textContent=i.ordinal,u.setInlineText(!0),u.setControlType(a.TEXT,t.TEXT),"DFN"===e.tagName&&(r+=ke,u.modifyBox(64,ke))):(u.setControlType(a.SPACE,t.SPACE),e.modifyBox(256)),u.inherit(e,"textStyle"),u.cssApply({minWidth:r>0?He.formatPX(r):"",marginTop:0!==e.marginTop?He.formatPX(e.marginTop):"",paddingTop:e.paddingTop>0&&0===e.getBox(32)[0]?He.formatPX(e.paddingTop):"",paddingRight:E>0&&g===we.CSS.RIGHT?He.formatPX(E):"",paddingLeft:E>0&&g===we.CSS.LEFT&&(!f||i.imagePosition)?He.formatPX(E):"",fontSize:i.ordinal&&!i.ordinal.endsWith(".")?He.formatPX(.75*u.toFloat("fontSize")):"",lineHeight:e.lineHeight>0?He.formatPX(e.lineHeight):""}),u.apply(A),u.cssTry("display","block")&&(u.setBounds(),u.cssFinally("display")),u.saveAsInitial(),m||u.mergeGravity(s.GRAVITY,e.localizeString(g)),0!==T&&u.modifyBox(2,T),0!==S&&u.modifyBox(16,S),u.positioned=!0,u.render(n),this.application.addLayoutTemplate(n,u,{type:1,node:u,controlName:u.controlName}),e.companion=u):h.android("layout_columnSpan",""+l)}c&&((null===d||d<=0)&&n.modifyBox(n.paddingLeft>0?256:16),"number"==typeof d&&d<0&&n.modifyBox(16,d)),l>0&&(h.setLayoutWidth(we.CSS.PX_0),h.android("layout_columnWeight","1"),e!==h&&e.baseline&&h.android("baselineAlignedChildIndex","0")),h!==e&&0!==e.marginTop&&(h.modifyBox(2,e.marginTop),e.modifyBox(2),e.outerWrapper=h,h.innerWrapped=e);const p=new ve(n,h,t.LINEAR,18,h.children);return{parent:h,renderAs:h,outputAs:this.application.renderNode(p)}}}postOptimize(t){t.blockStatic&&t.inlineWidth&&t.setLayoutWidth(s.MATCH_PARENT)}}const Xe=squared.lib.util;class Ve extends squared.base.extensions.Relative{postOptimize(t){super.postOptimize(t),t.imageOrSvgElement&&t.alignSibling("baseline")&&0!==Xe.convertFloat(t.verticalAlign)&&"invisible"===t.android("visibility")&&t.android("baselineAlignBottom","true")}}var Fe=squared.base.Layout;const ze=squared.lib.constant,qe=squared.lib.css,Ue=squared.base.lib.constant,Ye=squared.base.lib.enumeration;class $e extends squared.base.extensions.Sprite{processNode(e,n){const i=e.data(Ue.EXT_NAME.SPRITE,Ue.STRING_BASE.EXT_DATA);if(i){const o=this.application.resourceHandler.addImageSrc(e.backgroundImage);if(""!==o){const r=this.application.createNode(e.element);return r.inherit(e,"initial","base","styleMap"),r.setControlType(a.FRAME,t.FRAME),r.exclude(Ye.NODE_RESOURCE.IMAGE_SOURCE,Ye.NODE_PROCEDURE.CUSTOMIZATION),n.appendTry(e,r),e.setControlType(a.IMAGE,t.IMAGE),e.exclude(Ye.NODE_RESOURCE.FONT_STYLE|Ye.NODE_RESOURCE.BOX_STYLE),e.cssApply({position:"static",top:ze.CSS.AUTO,right:ze.CSS.AUTO,bottom:ze.CSS.AUTO,left:ze.CSS.AUTO,display:"inline-block",width:qe.formatPX(i.image.width),height:qe.formatPX(i.image.height),marginTop:qe.formatPX(i.position.top),marginRight:ze.CSS.PX_0,marginBottom:ze.CSS.PX_0,marginLeft:qe.formatPX(i.position.left),paddingTop:ze.CSS.PX_0,paddingRight:ze.CSS.PX_0,paddingBottom:ze.CSS.PX_0,paddingLeft:ze.CSS.PX_0,borderTopStyle:ze.CSS.NONE,borderRightStyle:ze.CSS.NONE,borderBottomStyle:ze.CSS.NONE,borderLeftStyle:ze.CSS.NONE,borderRadius:ze.CSS.PX_0,backgroundPositionX:ze.CSS.PX_0,backgroundPositionY:ze.CSS.PX_0,backgroundColor:"rgba(0, 0, 0, 0)"}),e.unsetCache(),e.android("src",`@drawable/${o}`),e.outerWrapper=r,r.innerWrapped=e,e.parent=r,{renderAs:r,outputAs:this.application.renderNode(new Fe(n,r,t.FRAME,2048,r.children)),parent:r,complete:!0}}}}}squared;class je extends squared.base.extensions.Substitute{processNode(e,n){return e.containerType=e.blockStatic?t.BLOCK:t.INLINE,e.alignmentType=8192,super.processNode(e,n)}postOptimize(t){t.apply(C.formatOptions(H(this.options[t.elementId]),this.application.extensionManager.optionValueAsBoolean(n.RESOURCE_STRINGS,"numberResourceValue")))}}var Ze=squared.base.Layout;const Ke=squared.lib.constant,Je=squared.lib.css,Qe=squared.lib.util,tn=squared.base.lib.constant;squared;class en extends squared.base.extensions.Table{processNode(e,n){super.processNode(e,n);const a=e.data(tn.EXT_NAME.TABLE,tn.STRING_BASE.EXT_DATA);if(a){let i=!1;if(a.columnCount>1&&(i=!0===e.data(tn.EXT_NAME.TABLE,"expand"),e.each(t=>{if(t.css(Ke.CSS.WIDTH)===Ke.CSS.PX_0)t.setLayoutWidth(Ke.CSS.PX_0),t.android("layout_columnWeight",""+(t.element.colSpan||1));else{const n=t.data(tn.EXT_NAME.TABLE,"expand");if(void 0!==n)if(n){const n=Qe.convertFloat(t.data(tn.EXT_NAME.TABLE,"percent"))/100;n>0&&(t.setLayoutWidth(Ke.CSS.PX_0),t.android("layout_columnWeight",Qe.trimEnd(n.toPrecision(3),"0")),i=!e.hasWidth)}else t.android("layout_columnWeight","0");!0===t.data(tn.EXT_NAME.TABLE,"downsized")&&(!0===t.data(tn.EXT_NAME.TABLE,"exceed")?(t.setLayoutWidth(Ke.CSS.PX_0),t.android("layout_columnWeight","0.01")):t.has(Ke.CSS.WIDTH)&&t.actualWidth<t.bounds.width&&t.setLayoutWidth(Je.formatPX(t.bounds.width)))}t.textElement&&t.textContent.length>1&&!/[\s\n\-]/.test(t.textContent.trim())&&t.android("maxLines","1")}),i)){const t=e.ascend(!1,t=>t.hasWidth);t.length&&e.actualWidth>=t[0].actualWidth?e.setLayoutWidth(s.MATCH_PARENT):e.css(Ke.CSS.WIDTH,Je.formatPX(e.actualWidth),!0)}!i&&e.has(Ke.CSS.WIDTH)&&e.actualWidth<Math.floor(e.bounds.width)&&(a.layoutFixed?e.android(Ke.CSS.WIDTH,Je.formatPX(e.bounds.width),!0):(e.has("minWidth")||e.android("minWidth",Je.formatPX(e.actualWidth)),e.css(Ke.CSS.WIDTH,Ke.CSS.AUTO,!0))),e.has(Ke.CSS.HEIGHT)&&e.actualHeight<Math.floor(e.bounds.height)&&(e.has("minHeight")||e.android("minHeight",Je.formatPX(e.actualHeight)),e.css(Ke.CSS.HEIGHT,Ke.CSS.AUTO,!0));const o=new Ze(n,e,t.GRID,4,e.children);return o.rowCount=a.rowCount,o.columnCount=a.columnCount,{output:this.application.renderNode(o),complete:!0}}}processChild(t,e){const n=Qe.convertInt(t.data(tn.EXT_NAME.TABLE,"rowSpan")),a=Qe.convertInt(t.data(tn.EXT_NAME.TABLE,"colSpan")),i=Qe.convertInt(t.data(tn.EXT_NAME.TABLE,"spaceSpan"));if(n>1&&t.android("layout_rowSpan",""+n),a>1&&t.android("layout_columnSpan",""+a),t.mergeGravity(s.LAYOUT_GRAVITY,"fill"),i>0){const e=this.application.controllerHandler;e.addAfterOutsideTemplate(t.id,e.renderSpace(s.WRAP_CONTENT,s.WRAP_CONTENT,i))}"hide"===e.css("empty-cells")&&0===t.actualChildren.length&&""===t.textContent&&t.hide(!0)}postOptimize(t){const e=Qe.convertInt(t.layoutWidth);e>0&&(t.bounds.width>e&&t.setLayoutWidth(Je.formatPX(t.bounds.width)),e>0&&t.cssInitial(Ke.CSS.WIDTH)===Ke.CSS.AUTO&&t.renderChildren.every(t=>t.inlineWidth)&&t.renderEach(t=>{t.setLayoutWidth(Ke.CSS.PX_0),t.android("layout_columnWeight","1")}))}}var nn=squared.base.Layout;squared;class an extends squared.base.extensions.VerticalAlign{processNode(e,n){return super.processNode(e,n),{output:this.application.renderNode(new nn(n,e,t.RELATIVE,8,e.children))}}}class on extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=!0}}var rn=squared.base.Layout;const sn=squared.lib.constant,ln=squared.lib.css,cn=squared.lib.util,dn=squared.base.lib.enumeration;class hn extends squared.base.Extension{constructor(){super(...arguments),this.options={circlePosition:!1}}condition(t){return this.included(t.element)&&t.length>0}processNode(e,n){return e.exclude(0,dn.NODE_PROCEDURE.CONSTRAINT),{output:this.application.renderNode(new rn(n,e,t.CONSTRAINT,32,e.children))}}afterConstraints(){const t=this.application.controllerHandler;for(const e of this.subscribers){let n;e.each(t=>{cn.withinRange(t.linear.left,e.box.left)&&(t.anchor(sn.CSS.LEFT,s.PARENT),t.anchorStyle(s.HORIZONTAL)),cn.withinRange(t.linear.top,e.box.top)&&(t.anchor(sn.CSS.TOP,s.PARENT),t.anchorStyle(s.VERTICAL)),this.options.circlePosition&&(t.anchored?n=t:n?!n.constraint.vertical&&t.constraint.vertical&&(n=t):t.constraint.vertical?n=t:t.constraint.horizontal&&(n=t))}),this.options.circlePosition?(void 0===n&&(n=e.item(0)),n.anchored||t.addGuideline(n,e),e.each(t=>{if(t!==n){const e=t.center,a=n.center,i=Math.abs(e.x-a.x),o=Math.abs(e.y-a.y),r=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(o,2)));let s=Math.round(Math.atan(Math.min(i,o)/Math.max(i,o))*(180/Math.PI));e.y>a.y?e.x>a.x?i>o?s+=90:s=180-s:i>o?s=270-s:s+=180:e.y<a.y?a.x>e.x?i>o?s+=270:s=360-s:i>o&&(s=90-s):s=e.x>a.x?90:270,t.app("layout_constraintCircle",n.documentId),t.app("layout_constraintCircleRadius",ln.formatPX(r)),t.app("layout_constraintCircleAngle",""+s)}})):e.each(n=>{n.anchored||t.addGuideline(n,e)})}}}var un=squared.base.Layout;const pn=squared.lib.constant,mn=squared.lib.util,fn=squared.base.lib.constant;squared;class gn extends squared.base.Extension{condition(t){if(t.naturalElement&&(t.documentBody||t.contentBoxWidth>0||t.contentBoxHeight>0)){const e=t.filter(t=>!t.pageFlow&&t.leftTopAxis&&t.left>=0&&t.right>=0);if(e.length){const a=t.paddingTop+(t.documentBody?t.marginTop:0),i=t.paddingRight+(t.documentBody?t.marginRight:0),o=t.paddingBottom+(t.documentBody?t.marginBottom:0),r=t.paddingLeft+(t.documentBody?t.marginLeft:0),s=new Set;let l=!1,c=!1;for(const n of e){const e="fixed"===n.css("position");n.has(pn.CSS.LEFT)?n.left>=0&&n.left<r&&s.add(n):n.has(pn.CSS.RIGHT)&&n.right>=0&&(e||n.right<i||t.documentBody&&t.has(pn.CSS.WIDTH))?(s.add(n),l=!0):n.rightAligned?n.marginRight<0&&(t.documentRoot||mn.aboveRange(n.linear.right,t.bounds.right))&&s.add(n):n.marginLeft<0&&(t.documentRoot||mn.belowRange(n.linear.left,t.bounds.left))&&s.add(n),n.has(pn.CSS.TOP)?n.top>=0&&n.top<a&&s.add(n):n.has(pn.CSS.BOTTOM)&&n.bottom>=0&&(e||n.bottom<o||t.documentBody&&t.has(pn.CSS.HEIGHT))&&(s.add(n),c=!0)}if(s.size)return t.data(n.DELEGATE_FIXED,fn.STRING_BASE.EXT_DATA,{children:Array.from(s),right:l,bottom:c}),!0}}return!1}processNode(e,a){const i=e.data(n.DELEGATE_FIXED,fn.STRING_BASE.EXT_DATA);if(i){const o=this.application.controllerHandler.createNodeWrapper(e,a,i.children);e.documentBody&&(i.right||i.bottom)?(o.cssApply({width:pn.CSS.AUTO,height:pn.CSS.AUTO,display:"block",float:pn.CSS.NONE}),i.right&&o.setLayoutWidth(s.MATCH_PARENT),i.bottom&&o.setLayoutHeight(s.MATCH_PARENT)):e.pageFlow||e.resetBox(30,o);for(const t of i.children)t.has(pn.CSS.TOP)?t.modifyBox(2,e.borderTopWidth):t.has(pn.CSS.BOTTOM)&&t.modifyBox(8,e.borderBottomWidth),t.has(pn.CSS.LEFT)?t.modifyBox(16,e.borderLeftWidth):t.has(pn.CSS.RIGHT)&&t.modifyBox(4,e.borderRightWidth);const r=e.data(n.DELEGATE_MAXWIDTHHEIGHT,fn.STRING_BASE.EXT_DATA);if(r){r.container&&(r.width&&(o.css("maxWidth",e.css("maxWidth")),o.setLayoutWidth(pn.CSS.PX_0),o.contentBoxWidth=e.contentBoxWidth,e.setLayoutWidth(s.WRAP_CONTENT)),r.height&&(o.css("maxHeight",e.css("maxHeight")),o.setLayoutHeight(pn.CSS.PX_0),o.contentBoxHeight=e.contentBoxHeight,e.setLayoutHeight(s.WRAP_CONTENT)))}return{parent:o,renderAs:o,outputAs:this.application.renderNode(new un(a,o,t.CONSTRAINT,32,o.children))}}}}var Tn=squared.base.Layout;const Sn=squared.lib.constant,En=squared.base.lib.constant;squared;class An extends squared.base.Extension{condition(t,e){let a=!1,i=!1;if(!t.support.maxWidth&&!isNaN(t.width)&&t.has("maxWidth")&&!e.hasAlign(256)){const e=t.css(Sn.CSS.WIDTH)===Sn.CSS.PERCENT_100;(0===t.width||e)&&(t.blockStatic&&!t.autoMargin.horizontal||e)?t.css(Sn.CSS.WIDTH,t.css("maxWidth")):a=!0}return!t.support.maxHeight&&!isNaN(t.height)&&t.has("maxHeight")&&e.hasHeight&&(t.hasHeight&&t.css(Sn.CSS.HEIGHT)===Sn.CSS.PERCENT_100?t.css(Sn.CSS.HEIGHT,t.css("maxHeight")):i=!0),!(!a&&!i)&&(t.data(n.DELEGATE_MAXWIDTHHEIGHT,En.STRING_BASE.EXT_DATA,{width:a,height:i}),!0)}processNode(e,i){const o=e.data(n.DELEGATE_MAXWIDTHHEIGHT,En.STRING_BASE.EXT_DATA);if(o){const n=i.layoutConstraint?i:this.application.controllerHandler.createNodeWrapper(e,i,void 0,a.CONSTRAINT,t.CONSTRAINT);if(o.width&&(e.setLayoutWidth(Sn.CSS.PX_0),n.setLayoutWidth(s.MATCH_PARENT),i.layoutElement&&(e.autoMargin.horizontal=!1,e.autoMargin.left=!1,e.autoMargin.right=!1,e.autoMargin.leftRight=!1)),o.height&&(e.setLayoutHeight(Sn.CSS.PX_0),n.setLayoutHeight(s.MATCH_PARENT),i.layoutElement&&(e.autoMargin.vertical=!1,e.autoMargin.top=!1,e.autoMargin.bottom=!1,e.autoMargin.topBottom=!1)),o.container=n,i!==n)return{parent:n,renderAs:n,outputAs:this.application.renderNode(new Tn(i,n,n.containerType,2048,n.children))}}}}var bn=squared.base.Layout;const Cn=squared.lib.constant;squared;class yn extends squared.base.Extension{condition(t,e){return!t.pageFlow&&e.naturalElement&&e.documentRoot&&(Math.ceil(t.linear.left)<Math.floor(e.box.left)&&(t.left<0||t.marginLeft<0||!t.has(Cn.CSS.LEFT)&&t.right>0)||Math.floor(t.linear.right)>Math.ceil(e.box.right)&&(t.left>0||t.marginLeft>0||!t.has(Cn.CSS.LEFT)&&t.right<0)||Math.ceil(t.linear.top)<Math.floor(e.box.top)&&(t.top<0||t.marginTop<0||!t.has(Cn.CSS.TOP)&&t.bottom>0)||Math.floor(t.linear.bottom)>Math.ceil(e.box.bottom)&&(t.top>0||t.marginTop>0||!t.has(Cn.CSS.TOP)&&t.bottom<0)&&e.has(Cn.CSS.HEIGHT))}processNode(e,n){const a=this.application.controllerHandler.createNodeWrapper(e,n);return{parent:a,renderAs:a,outputAs:this.application.renderNode(new bn(n,a,t.FRAME,2048,a.children)),include:!0}}}var Rn=squared.base.Layout;const In=squared.lib.constant,Nn=squared.lib.css,_n=squared.base.lib.constant;squared;function On(t,e){return t.pageFlow?t===e.firstChild&&t.inlineFlow&&!t.centerAligned&&!t.rightAligned&&t.marginLeft<0&&Math.abs(t.marginLeft)<=e.marginLeft+e.paddingLeft&&!e.some(t=>t.multiline):t.absoluteParent===e&&(t.left<0||!t.has(In.CSS.LEFT)&&t.right<0)}class Pn extends squared.base.Extension{condition(t){return this.application.userSettings.supportNegativeLeftTop&&!t.documentRoot&&"hidden"!==t.css("overflowX")&&t.some(e=>On(e,t))}processNode(e,i){const o=e.filter(t=>On(t,e)),r=this.application.controllerHandler.createNodeWrapper(e,i,o,a.CONSTRAINT,t.CONSTRAINT);e.marginTop>0&&(r.modifyBox(2,e.marginTop),e.modifyBox(2)),e.marginBottom>0&&(r.modifyBox(8,e.marginBottom),e.modifyBox(8));let s,l=NaN,c=NaN;for(const t of o)t.pageFlow?((isNaN(l)||t.linear.left<l)&&(l=t.linear.left),s=t):t.has(In.CSS.LEFT)?t.left<0&&(isNaN(l)||t.linear.left<l)&&(l=t.linear.left):t.right<0&&(isNaN(c)||t.linear.right>c)&&(c=t.linear.right);if(r.inherit(e,"styleMap"),!isNaN(l)){let t=e.linear.left-l;if(t>0){e.modifyBox(16,t);for(const e of o)!e.pageFlow&&e.left<0&&e.css(In.CSS.LEFT,Nn.formatPX(e.left+t),!0)}else{for(const t of o)!t.pageFlow&&t.left<0&&t.css(In.CSS.LEFT,Nn.formatPX(e.marginLeft+t.left),!0);t=Math.abs(t)}e.has(In.CSS.WIDTH,2)?r.cssPX(In.CSS.WIDTH,(e.marginLeft>0?e.marginLeft:0)+t,!1,!0):e.has(In.CSS.WIDTH)&&r.css(In.CSS.WIDTH,In.CSS.AUTO,!0)}if(!isNaN(c)){let t=c-e.linear.right;t>e.marginRight?e.modifyBox(4,t-=e.marginRight):t=0;const n=e.linear.right+t;e.marginRight>0&&(t+=e.marginRight),t>0&&(e.has(In.CSS.WIDTH,2)||!e.blockStatic&&!e.has(In.CSS.WIDTH))&&r.css(r.has(In.CSS.WIDTH)?In.CSS.WIDTH:"minWidth",Nn.formatPX(e.actualWidth+t),!0);for(const t of o)t.right<0&&t.css(In.CSS.RIGHT,Nn.formatPX(n-t.linear.right),!0)}return this.subscribers.add(r),r.data(n.DELEGATE_NEGATIVEX,_n.STRING_BASE.EXT_DATA,{offsetLeft:e.marginLeft+e.paddingLeft,firstChild:s,nextSibling:e}),{parent:r,renderAs:r,outputAs:this.application.renderNode(new Rn(i,r,r.containerType,2056,r.children))}}postBaseLayout(t){const e=t.data(n.DELEGATE_NEGATIVEX,_n.STRING_BASE.EXT_DATA);if(e){let n=e.firstChild;n&&((n=n.ascendOuter(void 0,t).pop()||n).anchorParent(s.HORIZONTAL,"packed"),n.anchorParent(s.VERTICAL,"packed"),n.modifyBox(16,e.offsetLeft),Mt.setConstraintDimension(n),n.positioned=!0);const a=e.nextSibling.ascendOuter(void 0,t).pop()||e.nextSibling;a.anchorParent(s.HORIZONTAL,"packed"),a.anchorParent(s.VERTICAL,"packed"),Mt.setConstraintDimension(a),a.positioned=!0}}}var xn=squared.base.Layout;const Ln=squared.lib.constant;squared;class vn extends squared.base.Extension{condition(t,e){if(t.pageFlow&&!t.documentParent.layoutElement){if(t.has(Ln.CSS.WIDTH,32,{not:Ln.CSS.PERCENT_100})&&(t.documentRoot||(e.layoutVertical||e.layoutFrame&&t.singleChild)&&(t.has(Ln.CSS.HEIGHT)||e.blockStatic||e.has(Ln.CSS.WIDTH))))return!0;if(t.has(Ln.CSS.HEIGHT,32,{not:Ln.CSS.PERCENT_100})&&(t.documentRoot||e.hasHeight))return!0}return!1}processNode(e,n){const a=this.application.controllerHandler.createNodeWrapper(e,n);return e.has(Ln.CSS.WIDTH,32)?(a.css("display","block"),a.setLayoutWidth(s.MATCH_PARENT),e.setLayoutWidth(Ln.CSS.PX_0)):a.setLayoutWidth(s.WRAP_CONTENT),e.hasHeight&&e.has(Ln.CSS.HEIGHT,32)?(a.setLayoutHeight(s.MATCH_PARENT),e.setLayoutHeight(Ln.CSS.PX_0)):a.setLayoutHeight(s.WRAP_CONTENT),{parent:a,renderAs:a,outputAs:this.application.renderNode(new xn(n,a,t.CONSTRAINT,2048,a.children)),include:!0}}postConstraints(t){const e=t.renderParent;e&&t.resetBox(30,e,!0)}}var wn=squared.base.NodeList;const Hn=squared.lib.constant,Mn=squared.base.lib.enumeration,Dn=t=>t.name?t.name.trim():"";class Gn extends squared.base.Extension{condition(e){if(e.length>1){const n=new Set;let a=0,i=!0;for(let o of e){if(!o.baseline){i=!1;break}if(o.renderAs&&(o=o.renderAs),o.containerType===t.RADIO){const t=Dn(o.element);""!==t&&(n.add(t),a++)}}if(i&&1===n.size&&a>1){const t=wn.linearData(e.children);if(t.linearX&&!t.floated.has(Hn.CSS.RIGHT))return!0}return!1}return e.containerType===t.RADIO&&""!==Dn(e.element)&&!e.positioned}processNode(e,n){const i=a.RADIOGROUP;if(e.length)return e.setControlType(i,t.LINEAR),e.alignmentType|=8,e.android("orientation",s.HORIZONTAL),e.baseline&&(e.css("verticalAlign",Hn.CSS.MIDDLE,!0),e.baseline=!1),e.render(n),{output:{type:1,node:e,controlName:i},complete:!0};if(n.controlName!==i){const o=Dn(e.element),r=[],l=[];let c;for(let a of n.children){let n;a.renderAs&&(a.renderAs===e?c=a:n=a,a=a.renderAs),e.containerType!==t.RADIO||Dn(a.element)!==o||a.rendered||(r.push(a),n&&l.push(n))}if(r.length>1){const o=this.application.controllerHandler.createNodeGroup(e,r,n,c);o.alignmentType|=8|(n.length!==r.length?128:0),n.layoutConstraint&&(o.companion=c||e),o.setControlType(i,t.LINEAR),o.inherit(e,"alignment"),o.css("verticalAlign",Hn.CSS.MIDDLE),o.baseline=!1,o.modifyBox(2,-4),o.exclude(Mn.NODE_RESOURCE.ASSET),o.each(n=>{n!==e&&n.setControlType(a.RADIO,t.RADIO),n.positioned=!0}),o.render(!e.dataset.use&&e.dataset.target?this.application.resolveTarget(e.dataset.target):n),o.android("orientation",wn.linearData(r).linearX?s.HORIZONTAL:s.VERTICAL);for(const t of l)t.hide();return this.subscribers.add(o),{renderAs:o,outputAs:{type:1,node:o,controlName:i},parent:o,complete:!0}}}}postBaseLayout(t){t.some(e=>!(!e.element||!e.element.checked)&&(t.android("checkedButton",e.documentId),!0))}}const Bn=squared.lib.constant,kn=squared.lib.css,Wn=squared.lib.dom,Xn=squared.base.lib.enumeration;class Vn extends squared.base.Extension{condition(t){return t.length>0&&(t.overflowX&&t.has(Bn.CSS.WIDTH)||t.overflowY&&t.hasHeight&&t.has(Bn.CSS.HEIGHT)||this.included(t.element))}processNode(e,n){const i=[],o=[],r=a.HORIZONTAL_SCROLL,l=a.VERTICAL_SCROLL;if(e.overflowX&&e.overflowY)i.push(a.HORIZONTAL_SCROLL,l);else if(e.overflowX)i.push(r);else if(e.overflowY)i.push(l);else{let t=0;e.has(Bn.CSS.WIDTH)&&(t|=8,i.push(r)),e.hasHeight&&e.has(Bn.CSS.HEIGHT)&&(t|=16,i.push(l)),e.overflow=t}for(let a=0;a<i.length;a++){const r=this.application.createNode(0===a?e.element:Wn.createElement(e.actualParent&&e.actualParent.element,e.block?"div":"span"));r.setControlType(i[a],t.BLOCK),0===a?(r.inherit(e,"initial","base","styleMap"),n.appendTry(e,r)):(r.inherit(e,"base"),r.exclude(Xn.NODE_RESOURCE.BOX_STYLE)),r.exclude(Xn.NODE_RESOURCE.ASSET),r.resetBox(480),o.push(r)}for(let t=0;t<o.length;t++){const a=o[t],i=o[t-1];switch(a.controlName){case l:e.setLayoutWidth(s.WRAP_CONTENT),a.setLayoutHeight(kn.formatPX(e.actualHeight)),a.android("scrollbars",s.VERTICAL),a.cssApply({width:Bn.CSS.AUTO,overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case r:e.setLayoutHeight(s.WRAP_CONTENT),a.setLayoutWidth(kn.formatPX(e.actualWidth)),a.android("scrollbars",s.HORIZONTAL),a.cssApply({height:Bn.CSS.AUTO,overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"})}a.render(0===t?!e.dataset.use&&e.dataset.target?this.application.resolveTarget(e.dataset.target):n:i),a.unsetCache(),this.application.addLayoutTemplate(a.renderParent||n,a,{type:1,node:a,controlName:a.controlName})}2===o.length?(e.setLayoutWidth(s.WRAP_CONTENT),e.setLayoutHeight(s.WRAP_CONTENT)):e.overflowX?(e.setLayoutWidth(s.WRAP_CONTENT),e.setLayoutHeight(s.MATCH_PARENT)):(e.setLayoutWidth(s.MATCH_PARENT),e.setLayoutHeight(s.WRAP_CONTENT));const c=o.pop();return e.parent=c,n.layoutConstraint&&(c.companion=e),e.overflow=0,e.resetBox(30),e.exclude(Xn.NODE_RESOURCE.BOX_STYLE),{parent:e.parent}}}var Fn={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},zn={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","top","right","bottom","drawable","width","height","gravity"],">":{shape:Fn.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const qn={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},Un={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":!0,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:qn.path},"#":"include"}};var Yn={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:qn.path},"#":"include"}};const $n=squared.lib.color,jn=squared.lib.constant,Zn=squared.lib.css,Kn=squared.lib.math,Jn=squared.lib.regex,Qn=squared.lib.util,ta=squared.lib.xml,ea=squared.base.lib.enumeration;function na(t,e=-1,n=!1){const a=t.style,i=pa(t.width);let o=!1;switch(a){case"inset":case"outset":o=!0;case"groove":case"ridge":if("outset"!==a&&"groove"!==a||(n=!n),n)switch(e){case 0:case 3:e=1;break;case 1:case 2:e=0}let r=1;switch(e){case 0:case 3:o&&(r=1===i?-.5:-.25);break;case 1:case 2:r=o?-.5:-.75}if(1!==r){const e=$n.reduceRGBA(t.color.rgba,r,t.color.valueAsARGB);if(e){const t=C.addColor(e,!0);if(""!==t)return ma(t)}}}const r=ma(C.addColor(t.color,!0));switch(a){case"dotted":case"dashed":r.dashWidth=Zn.formatPX(i*("dashed"===a?2:1)),r.dashGap=Zn.formatPX(i)}return r}function aa(t,e=-1,n=0,a=!1,i=!1){if(t){if(oa(t.style)){const o=parseFloat(t.width);return i?Object.assign({width:Zn.formatPX(2*Math.ceil(o/2)+n)},na(t,e)):Object.assign({width:Zn.formatPX(a?Math.ceil(o/2)+n:pa(t.width)+n)},na(t,e,!0))}return Object.assign({width:Zn.formatPX(pa(t.width)+n)},na(t))}}function ia(t){const e=C.addColor(t);return""!==e?{color:`@color/${e}`}:void 0}function oa(t){switch(t){case"groove":case"ridge":case"inset":case"outset":return!0;default:return!1}}function ra(t,e,n,a,i,o,r=0,s){const l=pa(e.width),c=Math.max(1,Math.floor(l/3)),d=r>0?Zn.formatPX(r):"";let h="-"+Zn.formatPX(c+r);t.push({top:n?d:h,right:a?d:h,bottom:i?d:h,left:o?d:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Zn.formatPX(c)},na(e)),corners:s}});const u=Zn.formatPX(l-c+r);h="-"+u,t.push({top:n?u:h,right:a?u:h,bottom:i?u:h,left:o?u:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Zn.formatPX(c)},na(e)),corners:s}})}function sa(t,e,n){const a="initial"===t||"unset"===t;return-1===t.indexOf(" ")&&-1!==e.indexOf(" ")?Jn.CHAR.LOWERCASE.test(t)?`${a?n:t} 0px`:`${n} ${t}`:a?jn.CSS.PX_0:t}function la(t,e=21,n){const a={type:t.type,item:!1},i=e>=21;switch(t.type){case"conic":{const e=t.center;a.type="sweep",i?(a.centerX=""+2*e.left,a.centerY=""+2*e.top):(a.centerX=Zn.formatPercent(e.leftAsPercent),a.centerY=Zn.formatPercent(e.topAsPercent));break}case"radial":{const e=t,n=e.center;i?(a.gradientRadius=""+e.radius,a.centerX=""+n.left,a.centerY=""+n.top):(a.gradientRadius=Zn.formatPX(e.radius),a.centerX=Zn.formatPercent(n.leftAsPercent),a.centerY=Zn.formatPercent(n.topAsPercent));break}case"linear":{const e=t,{width:i,height:o}=e.dimension,r=e.angle;let s=e.angleExtent.x,l=e.angleExtent.y;r<=90?(l+=o,a.startX="0",a.startY=""+o):r<=180?(a.startX="0",a.startY="0"):r<=270?(s+=i,a.startX=""+i,a.startY="0"):(s+=i,l+=o,a.startX=""+i,a.startY=""+o),a.endX=Kn.truncate(s,n),a.endY=Kn.truncate(l,n);break}}const o=t.colorStops;return i?a.item=ga(o):(a.startColor=`@color/${C.addColor(o[0].color,!0)}`,a.endColor=`@color/${C.addColor(o[o.length-1].color,!0)}`,o.length>2&&(a.centerColor=`@color/${C.addColor(o[Math.floor(o.length/2)].color,!0)}`)),a}function ca(t,e,n,a,i){if(i){const o=e.orientation,r="cover"===n||"contain"===n?-1:1;if(t===jn.CSS.LEFT||t===jn.CSS.RIGHT){if("cover"===n)return 0;if(Zn.isPercent(4===o.length?o[1]:o[0])){const n=t===jn.CSS.LEFT?e.leftAsPercent:e.rightAsPercent;let o=n*(a.width-i.width);return-1===r&&(o=Math.abs(o),n>0&&(o*=-1)),o}}else{if("contain"===n)return 0;if(Zn.isPercent(4===o.length?o[3]:o[1])){const n=t===jn.CSS.TOP?e.topAsPercent:e.bottomAsPercent;let o=n*(a.height-i.height);return-1===r&&(o=Math.abs(o),n>0&&(o*=-1)),o}}}return e[t]}function da(t,e,n=!0){const a=[{"xmlns:android":r.android,item:[]}],i=n?void 0:ia(t.backgroundColor);if(i&&a[0].item.push({shape:{"android:shape":"rectangle",solid:i}}),e)for(const t of e)a[0].item.push(t.gradient?{shape:{"android:shape":"rectangle",gradient:t.gradient}}:t);return a}function ha(t,e,n){C.addTheme({name:t,parent:e,items:{"android:windowBackground":n,"android:windowFullscreen":"true"}})}function ua(t){const e=pa(t.width);return"double"===t.style&&2===e?3:e}const pa=t=>Math.round(parseFloat(t)),ma=t=>({color:`@color/${t}`,dashWidth:"",dashGap:""}),fa=t=>oa(t.style)||"double"===t.style&&pa(t.width)>1;function ga(t,e){const n=[];for(const a of t)n.push({color:`@color/${C.addColor(a.color,!0)}`,offset:Kn.truncate(a.offset,e)});return n}function Ta(t,e,n=0,a=0,i){return i?(n=Kn.truncate(n,i),a=Kn.truncate(a,i),t=Kn.truncate(n+t,i),e=Kn.truncate(a+e,i)):(t+=n,e+=a),`M${n},${a} ${t},${a} ${t},${e} ${n},${e} Z`}class Sa extends squared.base.Extension{constructor(){super(...arguments),this.options={autoSizeBackgroundImage:!0,drawOutlineAsInsetBorder:!0},this.eventOnly=!0}afterInit(){this._resourceSvgInstance=this.application.controllerHandler.localSettings.svg.enabled?this.application.builtInExtensions[n.RESOURCE_SVG]:void 0}afterResources(){const t=this.application.userSettings;function e(e,n){let a=C.insertStoredAsset("drawables",`${e.tagName.toLowerCase()}_${e.controlId}`,n);""!==a&&(a=`@drawable/${a}`,e.documentBody?ha(t.manifestThemeName,t.manifestParentThemeName,a):e.android("background",a,!1))}for(const n of this.application.processing.cache){const a=n.data(C.KEY_NAME,"boxStyle");if(a&&n.hasResource(ea.NODE_RESOURCE.BOX_STYLE)){if(n.inputElement){const t=n.companion;if(t&&!t.visible&&"LABEL"===t.tagName&&!C.isInheritedStyle(t,"backgroundColor")){const e=t.data(C.KEY_NAME,"boxStyle");e&&e.backgroundColor&&(a.backgroundColor=e.backgroundColor)}}const i=this.getDrawableImages(n,a);let[o,r]=this.getDrawableBorder(a,[a.borderTop,a.borderRight,a.borderBottom,a.borderLeft],a.border,i,this.options.drawOutlineAsInsetBorder&&a.outline?ua(a.outline):0,!1);const s=void 0===o&&void 0===r;if(a.outline&&(this.options.drawOutlineAsInsetBorder||s)){const[t,e]=this.getDrawableBorder(a,[a.outline,a.outline,a.outline,a.outline],s?a.outline:void 0);s?(o=t,r=e):r&&e&&Qn.concatArray(r[0].item,e[0].item)}if(o)e(n,ta.applyTemplate("shape",Fn,o));else if(r)e(n,ta.applyTemplate("layer-list",zn,r));else if(a.backgroundColor){let e=C.addColor(a.backgroundColor);if(""!==e)if(e=`@color/${e}`,n.documentBody)ha(t.manifestThemeName,t.manifestParentThemeName,e);else{const t=n.data(C.KEY_NAME,"fontStyle");t?t.backgroundColor=a.backgroundColor:n.android("background",e,!1)}}}}}getDrawableBorder(t,e,n,a,i=0,o=!0){const s=[],l=o?void 0:function(t){if(t){if(1===t.length)return{radius:t[0]};{let e;if(8===t.length){e=[];for(let n=0;n<t.length;n+=2)e.push(Zn.formatPX((parseFloat(t[n])+parseFloat(t[n+1]))/2))}else e=t;const n=["topLeft","topRight","bottomRight","bottomLeft"],a={};let i=!1;for(let t=0;t<e.length;t++)e[t]!==jn.CSS.PX_0&&(a[`${n[t]}Radius`]=e[t],i=!0);if(i)return a}}}(t.borderRadius),c=i>0?Zn.formatPX(i):"";let d,h,u,p=!0;for(let t=0;t<e.length;t++){const n=e[t];n?(p&&d&&(p=Qn.isEqual(d,n)),d=n,s[t]=!0):s[t]=!1}if(n&&!fa(n)||void 0===d&&(l||a&&a.length)){const e=!!n&&aa(n);a&&a.length||i>0?(u=da(t,a,o),(l||e)&&u[0].item.push({top:c,right:c,left:c,bottom:c,shape:{"android:shape":"rectangle",corners:l,stroke:e}})):h=function(t,e,n){return[{"xmlns:android":r.android,"android:shape":"rectangle",stroke:t,solid:e,corners:n}]}(e,o?void 0:ia(t.backgroundColor),l)}else if(d)if(u=da(t,a,o),p&&!oa(d.style)){const t=pa(d.width);if("double"===d.style&&t>1)ra(u[0].item,d,s[0],s[1],s[2],s[3],i,l);else{const e="-"+Zn.formatPX(t+i);u[0].item.push({top:s[0]?c:e,right:s[1]?c:e,bottom:s[2]?c:e,left:s[3]?c:e,shape:{"android:shape":"rectangle",corners:l,stroke:aa(d)}})}}else{function m(t,n,a=0){const o=e[n];if(o){const e=pa(o.width);if("double"===o.style&&e>1)ra(t.item,o,0===n,1===n,2===n,3===n,i,l);else{const r=e>1&&oa(o.style);if(r){const s="-"+Zn.formatPX(e+i);t.item.push({top:0===n?"":s,right:1===n?"":s,bottom:2===n?"":s,left:3===n?"":s,shape:{"android:shape":"rectangle",stroke:aa(o,n,a,r,!0)}})}const s="-"+Zn.formatPX((r?Math.ceil(e/2):e)+i);t.item.push({top:0===n?c:s,right:1===n?c:s,bottom:2===n?c:s,left:3===n?c:s,shape:{"android:shape":"rectangle",corners:l,stroke:aa(o,n,a,r)}})}}}m(u[0],0),m(u[0],1),m(u[0],3),m(u[0],2)}return[h,u]}getDrawableImages(e,n){const a=n.backgroundRepeat.split(Jn.XML.SEPARATOR),i=n.backgroundSize.split(Jn.XML.SEPARATOR),o=n.backgroundPositionX.split(Jn.XML.SEPARATOR),l=n.backgroundPositionY.split(Jn.XML.SEPARATOR),c=[],d=[],h=[],u=[];let p=0,m=!0;if(e.hasResource(ea.NODE_RESOURCE.IMAGE_SOURCE)){if(n.backgroundImage){for(p=n.backgroundImage.length;i.length<p;)Qn.concatArray(i,i.slice(0));i.length=p;for(let t=0,r=0;t<p;t++){let s=n.backgroundImage[t],u=!1;if("string"==typeof s){if("initial"!==s){if(this._resourceSvgInstance){const[t,n]=this._resourceSvgInstance.createSvgElement(e,s);if(t&&n){const a=this._resourceSvgInstance.createSvgDrawable(e,n);""!==a&&(c[r]=a,h[r]={width:n.width.baseVal.value,height:n.height.baseVal.value},u=!0),t.removeChild(n)}}if(!u){const t=Jn.CSS.URL.exec(s);if(t)if(t[1].startsWith("data:image/")){const e=this.application.resourceHandler.getRawData(t[1]);e&&e.base64&&(c[r]=e.filename.substring(0,e.filename.lastIndexOf(".")),h[r]={width:e.width,height:e.height},this.application.resourceHandler.writeRawImage(e.filename,e.base64),u=!0)}else s=Qn.resolvePath(t[1]),c[r]=C.addImage({mdpi:s}),""!==c[r]&&(h[r]=this.application.resourceHandler.getImage(s),u=!0)}}}else if(s.colorStops.length>1){const t=la(s,e.localSettings.targetAPI);t&&(c[r]=t,h[r]=s.dimension,u=!0)}if(u){const n=o[t]||o[t-1],a=l[t]||l[t-1];d[r]=Zn.getBackgroundPosition(`${sa(n,a,jn.CSS.LEFT)} ${sa(a,n,jn.CSS.TOP)}`,e.actualDimension,e.fontSize),r++}else a.splice(t,1),i.splice(t,1),p--}}if(e.extracted){0===p&&(a.length=0,i.length=0);const t=e.extracted.filter(t=>t.visible&&(t.imageElement||"INPUT_IMAGE"===t.tagName));for(let n=0,o=p;n<t.length;n++){const r=t[n],s=r.element,l=this.application.resourceHandler.addImageSrc(s);""!==l&&(c[o]=l,a[o]="no-repeat",i[o]=`${r.actualWidth}px ${r.actualHeight}px`,d[o]=Zn.getBackgroundPosition("INPUT_IMAGE"===r.tagName?"0px 0px":`${r.bounds.left-e.bounds.left}px ${r.bounds.top-e.bounds.top}px`,e.actualDimension,e.fontSize),h[o]=this.application.resourceHandler.getImage(s.src),o++)}}p=c.length}let f=!1,g=!1;for(let t=p-1;t>=0;t--){const o=c[t];if(!Qn.hasValue(o))continue;const l=e.bounds,p=d[t],S={bitmap:!1,rotate:!1,gradient:!1};let E=h[t];!E||0!==E.width&&0!==E.height||(E=void 0);let A=0,b=0,y=0,R=0;if("string"==typeof o){function T(t,e,n=!1){(2===p.orientation.length||n)&&(p[t]=0),p[e]=0}const r=`@drawable/${o}`;let c="",d="";if("repeat-x"!==a[t])switch(p.horizontal){case jn.CSS.PERCENT_0:case jn.CSS.LEFT:T(jn.CSS.LEFT,jn.CSS.RIGHT),c=e.localizeString(jn.CSS.LEFT);break;case jn.CSS.PERCENT_50:case jn.CSS.CENTER:T(jn.CSS.LEFT,jn.CSS.RIGHT,!0),c=s.CENTER_HORIZONTAL;break;case jn.CSS.PERCENT_100:case jn.CSS.RIGHT:T(jn.CSS.RIGHT,jn.CSS.LEFT),c=e.localizeString(jn.CSS.RIGHT);break;default:c+=e.localizeString(0!==p.right?jn.CSS.RIGHT:jn.CSS.LEFT)}else{if(E)for(;p.left>0;)p.left-=E.width;else p.left=0;p.right=0,c=e.localizeString(jn.CSS.LEFT)}if("repeat-y"!==a[t])switch(p.vertical){case jn.CSS.PERCENT_0:case jn.CSS.TOP:T(jn.CSS.TOP,jn.CSS.BOTTOM),d+=jn.CSS.TOP;break;case jn.CSS.PERCENT_50:case jn.CSS.CENTER:T(jn.CSS.TOP,jn.CSS.BOTTOM,!0),d+=s.CENTER_VERTICAL;break;case jn.CSS.PERCENT_100:case jn.CSS.BOTTOM:T(jn.CSS.BOTTOM,jn.CSS.TOP),d+=jn.CSS.BOTTOM;break;default:d+=0!==p.bottom?jn.CSS.BOTTOM:jn.CSS.TOP}else{if(E)for(;p.top>0;)p.top-=E.height;else p.top=0;p.bottom=0,d=jn.CSS.TOP}let h,u=0,C=0,I="",N="",_="";switch(a[t]){case"repeat":I="repeat";break;case"repeat-x":N="repeat";break;case"repeat-y":_="repeat";break;default:I="disabled"}if(E){if(""!==c&&"repeat"===_&&E.width<l.width){switch(c){case jn.CSS.START:case jn.CSS.LEFT:p.left=e.borderLeftWidth,p.right=0;break;case jn.CSS.END:case jn.CSS.RIGHT:p.left=0,p.right=e.borderRightWidth;break;case s.CENTER_HORIZONTAL:p.left=0,p.right=0}u=E.width}if(""!==d&&"repeat"===N&&E.height<l.height){switch(d){case jn.CSS.TOP:p.top=e.borderTopWidth,p.bottom=0,S.gravity=d,d="";break;case jn.CSS.BOTTOM:p.top=0,p.bottom=e.borderBottomWidth,S.gravity=d,d="";break;case s.CENTER_VERTICAL:p.top=0,p.bottom=0,S.gravity=d,d=""}C=E.height}e.blockStatic&&!e.hasWidth||(E.width>=l.width&&(N="","repeat"===I&&(_="repeat",I="")),E.height>=l.height&&(_="","repeat"===I&&(N="repeat",I="")))}switch(i[t]){case"auto":case"auto auto":case"initial":case"contain":break;case"100% 100%":c="fill_horizontal",d="fill_vertical";case"cover":h="",I="",N="",_="";break;case jn.CSS.PERCENT_100:c="fill_horizontal",N="","repeat"===I&&(I="",_="repeat");break;default:i[t].split(" ").forEach((t,n)=>{t!==jn.CSS.AUTO&&(0===n?t===jn.CSS.PERCENT_100?c="fill_horizontal":u=e.parseUnit(t,jn.CSS.WIDTH,!1):t===jn.CSS.PERCENT_100?d="fill_vertical":C=e.parseUnit(t,jn.CSS.HEIGHT,!1))})}if(E){const a=n.backgroundClip,o=()=>"fill_horizontal"!==c&&"repeat"!==I&&"repeat"!==N,r=()=>"fill_vertical"!==d&&"repeat"!==I&&"repeat"!==_;switch(i[t]){case"cover":if(E.width<l.width||E.height<l.height){if(u=0,E.height<l.height){C=E.height*Math.max(l.width/E.width,l.height/E.height)}else C=0;h="top|center_horizontal|fill_horizontal"}else u=0,C=0,h="fill";m=!1;break;case"contain":if(E.width!==l.width&&E.height!==l.height){const t=Math.min(l.width/E.width,l.height/E.height);u=E.width*t,C=E.height*t}else u=0,C=0;m=!1;break;default:0===u&&C>0&&o()&&(u=E.width*(0===C?l.height:C)/E.height),0===C&&u>0&&r()&&(C=E.height*(0===u?l.width:u)/E.width)}a?(0===u?u=l.width:u+=e.contentBoxWidth,0===C?C=l.height:C+=e.contentBoxHeight,u-=a.left+a.right,C-=a.top+a.bottom,a.left>a.right?R=a.left-a.right:a.left<a.right&&(b=a.right-a.left),a.top>a.bottom?A=a.top-a.bottom:a.top<a.bottom&&(y=a.bottom-a.top)):0===u&&0===C&&E.width<e.bounds.width&&E.height<e.bounds.height&&o()&&r()&&(u=E.width,C=E.height),u>0&&(S.width=Zn.formatPX(u)),C>0&&(S.height=Zn.formatPX(C))}void 0===h&&(c===s.CENTER_HORIZONTAL&&d===s.CENTER_VERTICAL?h=jn.CSS.CENTER:"fill_horizontal"===c&&"fill_vertical"===d?h="fill":(h="",""!==c&&(h+=c),""!==d&&(h+=(""!==h?"|":"")+d))),e.documentBody||"repeat"===I||"repeat"===N||"repeat"===_?(e.documentBody&&(""!==h?(/fill(?!_)/.test(h)||(h+="|fill"),S.gravity=h,h=""):S.gravity="fill"),S.bitmap=[{src:r,gravity:h,tileMode:I,tileModeX:N,tileModeY:_}]):(S.drawable=r,S.gravity=h,(h===jn.CSS.CENTER||h.startsWith(s.CENTER_HORIZONTAL))&&(f=!0)),g=!0}else if(o.item){let n,a;E?(n=Math.round(E.width),a=Math.round(E.height)):(n=Math.round(e.actualWidth),a=Math.round(e.actualHeight)),i[t].split(" ").some(t=>t!==jn.CSS.PERCENT_100&&Zn.isLength(t,!0))&&(S.width=Zn.formatPX(n),S.height=Zn.formatPX(a));const s=C.insertStoredAsset("drawables",`${e.tagName.toLowerCase()}_${e.controlId}_gradient_${t+1}`,ta.applyTemplate("vector",Yn,[{"xmlns:android":r.android,"xmlns:aapt":r.aapt,"android:width":S.width||Zn.formatPX(n),"android:height":S.height||Zn.formatPX(a),"android:viewportWidth":""+n,"android:viewportHeight":""+a,path:{pathData:Ta(n,a),"aapt:attr":{name:"android:fillColor",gradient:o}}}]));""!==s&&(S.drawable=`@drawable/${s}`,p.static&&(S.gravity="fill"))}else S.gradient=o,p.static&&(S.gravity="fill");(S.drawable||S.bitmap||S.gradient)&&(0!==p.bottom?(S.bottom=Zn.formatPX(ca(jn.CSS.BOTTOM,p,i[t],e.bounds,E)+y),y=0):0!==p.top&&(S.top=Zn.formatPX(ca(jn.CSS.TOP,p,i[t],e.bounds,E)+A),A=0),0!==p.right?(S.right=Zn.formatPX(ca(jn.CSS.RIGHT,p,i[t],e.bounds,E)+b),b=0):0!==p.left&&(S.left=Zn.formatPX(ca(jn.CSS.LEFT,p,i[t],e.bounds,E)+R),R=0),0!==A&&(S.top=Zn.formatPX(A)),0!==b&&(S.right=Zn.formatPX(b)),0!==y&&(S.bottom=Zn.formatPX(y)),0!==R&&(S.left=Zn.formatPX(R)),u.push(S))}if(this.options.autoSizeBackgroundImage&&g&&m&&!e.is(t.IMAGE)&&!e.documentRoot&&e.renderParent&&!e.renderParent.tableElement){let t=0,n=0;for(const e of h)e&&(t=Math.max(t,e.width),n=Math.max(n,e.height));if(0===t){let a=e;for(;a&&(a.hasWidth&&(t=a.bounds.width),a.hasHeight&&(n=a.bounds.height),!(t>0&&n>0||a.documentBody)&&a.pageFlow);)a=a.actualParent}if(!((e.has(jn.CSS.WIDTH,2,{map:"initial",not:jn.CSS.PERCENT_100})||e.blockStatic&&f)&&e.pageFlow||!(0===t||e.bounds.width<t))){const t=e.bounds.width-(e.contentBox?e.contentBoxWidth:0);t>0&&e.css(jn.CSS.WIDTH,Zn.formatPX(Math.ceil(t)),!0)}if((!e.has(jn.CSS.HEIGHT,2,{map:"initial",not:jn.CSS.PERCENT_100})||!e.pageFlow)&&(0===n||e.bounds.height<n)){const t=e.bounds.height-(e.contentBox?e.contentBoxHeight:0);t>0&&(e.css(jn.CSS.HEIGHT,Zn.formatPX(Math.ceil(t)),!0),e.marginBottom<0&&e.modifyBox(8))}}return u}}const Ea=squared.lib.regex,Aa=squared.lib.util,ba=C.STORED,Ca=/[\s\n]*<([\w\-.]+)[^<]*?(\w+):(\w+)="(-?[\d.]+(?:px|dp|sp))"/,ya=/\d(px|dp|sp)$/,Ra=[s.ANDROID,s.APP];function Ia(t,e,n){for(const[a,i]of t.entries())if(a.startsWith(e)&&n===i)return a;return t.has(e)&&t.get(e)!==n?C.generateId("dimen",e):e}const Na=t=>Aa.fromLastIndexOf(t,".");class _a extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={};for(const e of this.application.session.cache)if(e.visible){const n=e.tagName.toLowerCase();void 0===t[n]&&(t[n]={});for(const a of Ra){const i=e.namespace(a);for(const o in i)if("text"!==o){const r=i[o].trim();if(ya.test(r)){const i=`${a},${o},${r}`;void 0===t[n][i]&&(t[n][i]=[]),t[n][i].push(e)}}}}for(const e in t){const n=t[e];for(const t in n){const[a,i,o]=t.split(Ea.XML.SEPARATOR),r=Ia(ba.dimens,`${Na(e)}_${Aa.convertUnderscore(i)}`,o);for(const e of n[t])e[a](i,`@dimen/${r}`);ba.dimens.set(r,o)}}}afterFinalize(){if(this.application.controllerHandler.hasAppendProcessing())for(const t of this.application.layouts){let e,n=t.content;for(;null!==(e=Ca.exec(n));)if("text"!==e[3]){const t=Ia(ba.dimens,`${Na(e[1]).toLowerCase()}_${Aa.convertUnderscore(e[3])}`,e[4]);ba.dimens.set(t,e[4]),n=n.replace(e[0],e[0].replace(e[4],`@dimen/${t}`))}t.content=n}}}const Oa=squared.lib.regex,Pa=squared.lib.util,xa=squared.base.lib.enumeration,La=/"/g,va=/^(\w*?)(?:_(\d+))?$/,wa={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},Ha={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},Ma={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},Da={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},Ga={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'},Ba=C.STORED;function ka(t,e,n){for(const a of e.split(";"))for(let e=0;e<t.length;e++){let i=-1,o="";for(const n in t[e])if(n===a){i=e,o=n,e=t.length;break}if(-1!==i){t[i][o]=Pa.filterArray(t[i][o],t=>!n.includes(t)),0===t[i][o].length&&delete t[i][o];break}}}class Wa extends squared.base.Extension{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:!1},this.eventOnly=!0}afterParseDocument(){const t={},e={};for(const e of this.application.session.cache)e.visible&&e.data(C.KEY_NAME,"fontStyle")&&e.hasResource(xa.NODE_RESOURCE.FONT_STYLE)&&(void 0===t[e.tagName]&&(t[e.tagName]=[]),t[e.tagName].push(e));const n=Object.keys(Ga);for(const a in t){const i=[];for(let e of t[a]){const t=Object.assign({},e.data(C.KEY_NAME,"fontStyle")),a=e.id;e.companion&&!e.companion.visible&&"LABEL"===e.companion.tagName&&(e=e.companion),t.backgroundColor&&(t.backgroundColor=C.addColor(t.backgroundColor)),t.fontFamily&&t.fontFamily.replace(La,"").split(Oa.XML.SEPARATOR).some((n,a,i)=>{let o=(n=Pa.trimString(n,"'")).toLowerCase();if(!this.options.disableFontAlias&&Ma[o]&&(o=this.options.systemDefaultFont||Ma[o]),wa[o]&&e.localSettings.targetAPI>=wa[o]||!this.options.disableFontAlias&&Ha[o]&&e.localSettings.targetAPI>=wa[Ha[o]])return t.fontFamily=o,"normal"===t.fontStyle&&(t.fontStyle=""),("400"===t.fontWeight||e.localSettings.targetAPI<26)&&(t.fontWeight=""),!0;if(t.fontStyle&&t.fontWeight){let e=!0;if(void 0===this.application.resourceHandler.getFont(n,t.fontStyle,t.fontWeight))if(this.application.resourceHandler.getFont(n,t.fontStyle))e=!1;else{if(a<i.length-1)return!1;a>0&&(o=(n=Pa.trimString(i[0],"'")).toLowerCase())}if(o=Pa.convertWord(o),e){const e=C.STORED.fonts.get(o)||{};e[n+"|"+t.fontStyle+"|"+t.fontWeight]=Da[t.fontWeight]||t.fontWeight,C.STORED.fonts.set(o,e)}return t.fontFamily=`@font/${o}`,t.fontStyle="",t.fontWeight="",!0}return!1}),t.color=C.addColor(t.color);for(let e=0;e<n.length;e++){const o=t[n[e]];if(o){const t=Ga[n[e]]+o+'"';void 0===i[e]&&(i[e]={}),void 0===i[e][t]&&(i[e][t]=[]),i[e][t].push(a)}}}e[a]=i}const a={};for(const n in e){a[n]={};const i=Pa.filterArray(e[n],t=>void 0!==t).sort((t,e)=>{let n=0,a=0,i=0,o=0;for(const e in t)n=Math.max(t[e].length,n),i+=t[e].length;for(const t in e)e[t]&&(a=Math.max(e[t].length,a),o+=e[t].length);return n!==a?n>a?-1:1:i!==o?i>o?-1:1:0});do{if(1===i.length){for(const t in i[0])i[0][t].length&&(a[n][t]=i[0][t]);i.length=0}else{const e={};for(let o=0;o<i.length;o++){const r={};for(const a in i[o]){const s=i[o][a];if(0===s.length)continue;if(s.length===t[n].length){e[a]=s,i[o]={};break}const l={};let c=!1;for(let t=0;t<i.length;t++)if(o!==t)for(const e in i[t]){const n=i[t][e];if(n.length)for(const t of s)n.includes(t)&&(void 0===l[e]&&(l[e]=[]),l[e].push(t))}for(const t in l)l[t].length>1&&(r[[a,t].sort().join(";")]=l[t],c=!0);c||(r[a]=s)}if(Object.keys(r).length){const t={},e=new Set,o={};for(const t in r)o[t]=r[t].join(",");for(const n in r)for(const a in r){const i=o[n];if(n!==a&&i===o[a]){void 0===t[i]&&(t[i]=new Set(n.split(";")));for(const e of a.split(";"))t[i].add(e);e.add(n).add(a)}}for(const t of e)delete r[t];for(const t in r)ka(i,t,r[t]),a[n][t]=r[t];for(const e in t){const o=Array.from(t[e]).sort().join(";"),r=Pa.objectMap(e.split(Oa.XML.SEPARATOR),t=>parseInt(t));ka(i,o,r),a[n][o]=r}}}const o=Object.keys(e);o.length&&(a[n][o.join(";")]=e[o[0]]),Pa.spliceArray(i,t=>{for(const e in t)if(t[e].length)return!1;return!0})}}while(i.length)}const i={},o={},r=new Set;for(const t in a){const e=a[t],n=[];for(const t in e){const a=[];for(const e of t.split(";")){const t=Oa.XML.ATTRIBUTE.exec(e);t&&a.push({key:t[1],value:t[2]})}n.push({name:"",parent:"",items:a,ids:e[t]})}n.sort((t,e)=>{let n=0,a=0;return t.ids&&e.ids&&(n=t.ids.length,a=e.ids.length),n===a&&(n=t.items.length,a=e.items.length),n===a&&(n=t.items[0].name,a=e.items[0].name),n===a&&(n=t.items[0].value,a=e.items[0].value),n<=a?1:-1});for(let e=0;e<n.length;e++)n[e].name=Pa.capitalize(t)+(e>0?`_${e}`:"");i[t]=n}for(const t in i)for(const e of i[t])if(e.ids)for(const t of e.ids)void 0===o[t]&&(o[t]=[]),o[t].push(e.name);for(const t of this.application.session.cache){const e=o[t.id];e&&e.length&&(e.length>1?(r.add(e.join(".")),e.shift()):r.add(e[0]),t.attr("_","style",`@style/${e.join(".")}`))}for(const t of r){const e=[];let n,a="";if(t.split(".").forEach((t,o,r)=>{const s=va.exec(t);if(s){const l=i[s[1].toUpperCase()][Pa.convertInt(s[2])];if(l)if(0===o)a=t,1===r.length?n=l.items:Ba.styles.has(t)||Ba.styles.set(t,{name:t,parent:"",items:l.items});else{if(n)for(const t of l.items){const e=n.findIndex(e=>e.key===t.key);-1!==e?n[e]=t:n.push(t)}else n=l.items.slice(0);e.push(t)}}}),n)if(0===e.length)Ba.styles.set(a,{name:a,parent:"",items:n});else{const t=e.join(".");Ba.styles.set(t,{name:t,parent:a,items:n})}}}}squared;class Xa extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){for(const t of this.application.session.cache)if(t.renderParent&&t.renderTemplates){let e,n;if(t.renderEach((t,a)=>{const i=t.dataset.androidInclude||"",o="true"===t.dataset.androidIncludeEnd;if(i||o){const r={item:t,name:i,index:a,merge:"true"===t.dataset.androidIncludeMerge};i&&(void 0===e&&(e=[]),e.push(r)),o&&(void 0===n&&(n=[]),n.push(r))}}),e&&n){const a=this.application.controllerHandler;e.length=Math.min(e.length,n.length);for(let t=e.length;t<n.length;t++)n.shift();for(let i=e.length-1;i>=0;i--){const o=e[i];for(let e=0;e<n.length;e++){const i=n[e].index;if(i>=o.index){const r=[];for(let e=o.index;e<=i;e++)r.push(t.renderTemplates[e]),t.renderTemplates[e]=null;const s=o.merge||r.length>1,l=s?1:0;t.renderTemplates[o.index]={type:2,node:r[0].node,content:a.renderNodeStatic("include",{layout:`@layout/${o.name}`},"",""),indent:!0},s||o.item.documentRoot||(o.item.documentRoot=!0);let c=a.cascadeDocument(r,l);s&&(c=a.getEnclosingXmlTag("merge",B(c),c)),this.application.saveDocument(o.name,c,"",1/0),n.splice(e,1);break}}}}}}}const Va=squared.lib.constant,Fa=squared.lib.css,za=squared.lib.dom,qa=squared.lib.util,Ua=squared.lib.xml,Ya=squared.base.lib.enumeration;class $a extends squared.base.Extension{constructor(){super(...arguments),this.options={numberResourceValue:!1,fontVariantSmallCapsReduction:.7},this.eventOnly=!0}afterResources(){for(const t of this.application.processing.cache)if(t.hasResource(Ya.NODE_RESOURCE.VALUE_STRING))switch(t.tagName){case"SELECT":{const e=C.getOptionArray(t.element);let n;if(!this.options.numberResourceValue&&e[1])n=e[1];else{const t=e[0]||e[1];if(t){n=[];for(let e of t)""!==(e=C.addString(Ua.replaceCharacterData(e),"",this.options.numberResourceValue))&&n.push(`@string/${e}`)}}if(n&&n.length){const e=C.insertStoredAsset("arrays",`${t.controlId}_array`,n);""!==e&&t.android("entries",`@array/${e}`)}break}case"IFRAME":{const e=t.data(C.KEY_NAME,"valueString");e&&C.addString(Ua.replaceCharacterData(e.value),e.key);break}default:{const e=t.data(C.KEY_NAME,"valueString");if(e){const n=t.renderParent;let a=e.key||e.value,i=e.value;if(n&&n.layoutRelative&&t.alignParent(Va.CSS.LEFT)&&!Fa.isParentStyle(t.element,"whiteSpace","pre","pre-wrap")){const e=t.textContent;let n=0;for(let t=0;t<e.length;t++)switch(e.charCodeAt(t)){case 160:n++;case 32:continue}0===n&&(i=i.replace(/^(\s|&#160;)+/,""))}if("small-caps"===t.css("fontVariant")){t.android("textAllCaps","true");const e=t.data(C.KEY_NAME,"fontStyle");e&&(e.fontSize=`${parseFloat(e.fontSize)*this.options.fontVariantSmallCapsReduction}px`)}switch(t.css("textTransform")){case"uppercase":t.android("textAllCaps","true");break;case"lowercase":i=qa.lowerCaseString(i);break;case"capitalize":i=qa.capitalizeString(i)}i=Ua.replaceCharacterData(i);for(const e of t.css("textDecorationLine").split(" "))switch(e){case"underline":i=`<u>${i}</u>`;break;case"line-through":i=`<strike>${i}</strike>`}let o=0;if((t.blockDimension||"table-cell"===t.display)&&(o=t.toFloat("textIndent"))+t.bounds.width<0&&(i=""),0===o){const e=t.actualParent;e&&(e.blockDimension||"table-cell"===e.display)&&t===e.firstChild&&(o=e.toFloat("textIndent"))}if(o>0){const e=za.measureTextWidth(" ",t.css("fontFamily"),t.fontSize)||t.fontSize/2;i="&#160;".repeat(Math.max(Math.floor(o/e),1))+i}""!==(a=C.addString(i,a,this.options.numberResourceValue))&&t.android("text",this.options.numberResourceValue||!qa.isNumber(a)?`@string/${a}`:a,!1)}}}}}const ja=squared.lib.regex,Za=squared.lib.util,Ka=/(\w+):(\w+)="([^"]+)"/,Ja=C.STORED;class Qa extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={},e={};for(const n of this.application.session.cache)if(n.visible&&n.controlId){const a=n.renderChildren;if(a.length>1){const i=new Map;let o=!0,r="";for(let t=0;t<a.length;t++){const e=a[t];let n=!1;for(const a of e.combine("_",s.ANDROID))if(!n&&a.startsWith("style=")){if(0===t)r=a;else if(""===r||a!==r){o=!1;break}n=!0}else i.set(a,(i.get(a)||0)+1);if(!o||!n&&""!==r){o=!1;break}}if(o){for(const[t,e]of i.entries())e!==a.length&&i.delete(t);if(i.size>1){""!==r&&(r=Za.trimString(r.substring(r.indexOf("/")+1),'"'));const o=[];for(const t of i.keys()){const e=Ka.exec(t);if(e){for(const t of a)t.delete(e[1],e[2]);o.push(e[0])}}o.sort();const s=o.join(";");let l="";for(const t in e)if(e[t]===s){l=t;break}""!==r&&l.startsWith(`${r}.`)||(t[l=(""!==r?r+".":"")+Za.capitalize(n.controlId)]=o,e[l]=s);for(const t of a)t.attr("_","style",`@style/${l}`)}}}}for(const e in t){const n=[];for(const a in t[e]){const i=ja.XML.ATTRIBUTE.exec(t[e][a]);i&&n.push({key:i[1],value:i[2]})}Ja.styles.set(e,Object.assign({},M(),{name:e,items:n}))}}}var ti={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const ei=["ordering"],ni={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var ai={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":ei,">":{set:{"^":"android","@":ei,">":{objectAnimator:ni.objectAnimator}},objectAnimator:ni.objectAnimator}},objectAnimator:ni.objectAnimator}}};squared.svg||(squared.svg={lib:{}});var ii=squared.svg.Svg,oi=squared.svg.SvgAnimate,ri=squared.svg.SvgAnimateTransform,si=squared.svg.SvgBuild,li=squared.svg.SvgG,ci=squared.svg.SvgPath,di=squared.svg.SvgShape;const hi=squared.lib.constant,ui=squared.lib.css,pi=squared.lib.math,mi=squared.lib.regex,fi=squared.lib.util,gi=squared.lib.xml,Ti=squared.svg.lib.constant,Si=squared.svg.lib.util,Ei=C.STORED,Ai={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"};Ti&&Object.assign(Ai,{[Ti.KEYSPLINE_NAME["ease-in"]]:Ai.accelerate,[Ti.KEYSPLINE_NAME["ease-out"]]:Ai.decelerate,[Ti.KEYSPLINE_NAME["ease-in-out"]]:Ai.accelerate_decelerate,[Ti.KEYSPLINE_NAME.linear]:Ai.linear});const bi='<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',Ci={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function yi(t,e){return t&&t[e]?Ai[t[e]]||Ii(t[e]):""}function Ri(t){for(const e in Ci)if(Ci[e].includes(t))return fi.convertCamelCase(e);return""}function Ii(t){if(Ai[t])return Ai[t];{const e=`path_interpolator_${fi.convertWord(t)}`;if(!Ei.animators.has(e)){const n=fi.formatString(bi,...t.split(" "));Ei.animators.set(e,n)}return`@anim/${e}`}}function Ni(t){const e={};for(let n=0;n<t.length;n++){const a=t[n],i=a.matrix;switch(a.type){case SVGTransform.SVG_TRANSFORM_SCALE:e.scaleX=""+i.a,e.scaleY=""+i.d,a.origin&&(e.pivotX=""+a.origin.x,e.pivotY=""+a.origin.y);break;case SVGTransform.SVG_TRANSFORM_ROTATE:e.rotation=""+a.angle,a.origin?(e.pivotX=""+a.origin.x,e.pivotY=""+a.origin.y):(e.pivotX="0",e.pivotY="0");break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:e.translateX=""+i.e,e.translateY=""+i.f}}return e}function _i(t,e){let n=0,a=0;for(const i of function(t){const e=[];let n=t.parentElement;for(;n&&(e.push(n),!((n=n.parentElement)instanceof HTMLElement)););return e}(t))(Si.SVG.svg(i)||Si.SVG.use(i))&&i!==e&&(n+=i.x.baseVal.value,a+=i.y.baseVal.value);return{x:n,y:a}}function Oi(t,e,n=1,a=1){return e.length&&(Si.SVG.circle(t)||Si.SVG.ellipse(t))&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(n!==a||e.length>1&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_SCALE&&t.matrix.a!==t.matrix.d))?Pi(t,e):[[],e]}function Pi(t,e,n=!1){if(e.length){const i=[],o=[],r=e.slice(0).reverse(),s=e[0].fromCSS?[]:Si.TRANSFORM.rotateOrigin(t).reverse();for(let t=1;t<r.length;t++){const e=r[t],n=r[t-1];if(e.type===n.type){let a;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:(a=Si.MATRIX.clone(e.matrix)).e+=n.matrix.e,a.f+=n.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:(a=Si.MATRIX.clone(e.matrix)).a*=n.matrix.a,a.d*=n.matrix.d}a&&(e.matrix=a,r.splice(--t,1))}}const l=[];function a(){i.push(l.slice(0)),l.length=0}for(const t of r)switch(t.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:o.push(t);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:n||0!==i.length||0!==l.length?(l.push(t),a()):o.push(t);break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;s.length;){const e=s.shift();if(e.angle===t.angle){0===e.x&&0===e.y||(t.origin=e);break}}if(void 0===t.origin&&1===l.length&&l[0].type===SVGTransform.SVG_TRANSFORM_SCALE){l.push(t);continue}case SVGTransform.SVG_TRANSFORM_SCALE:l.length&&a(),l.push(t)}return l.length&&i.push(l),[i.reverse(),o]}return[[],e]}function xi(t,e,n,a=!1,i){let o;const r=t[e];return r?o=Array.isArray(r)?""+r[n]:r:a||0!==e||(o=i),o||""}function Li(t){switch(t){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:return Di(t)?"floatType":void 0}}function vi(t,e,n,a){const i=new oi;return i.attributeName=t,i.delay=e,i.duration=1,i.from=a||n,i.to=n,i.fillForwards=!0,i.convertToValues(),i}function wi(t,e=!0){let n=Ci[t];return void 0===n&&e&&Di(t)&&(n=[t]),n}function Hi(t){switch(t){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Mi(t){switch(t.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return ri.toRotateList(t.values);case SVGTransform.SVG_TRANSFORM_SCALE:return ri.toScaleList(t.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return ri.toTranslateList(t.values)}}function Di(t){switch(t){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Gi(t,e=!1){const n=`@color/${C.addColor(t)}`;return e?[n]:n}function Bi(t,e){return Xi(t.attributeName)?Gi(e):e.trim()||void 0}function ki(t){switch(t){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function Wi(t,e,n){const a={type:t.type,item:ga(t.colorStops,n)};switch(t.type){case"radial":{const n=t,i=[];let o,r,s,l;switch(e.element.tagName){case"path":for(const t of si.getPathCommands(e.value))fi.concatArray(i,t.value);case"polygon":if(Si.SVG.polygon(e.element)&&fi.concatArray(i,si.clonePoints(e.element.points)),!i.length)return;[o,r,s,l]=si.minMaxPoints(i),s-=o,l-=r;break;default:if(Si.SVG.rect(e.element)){const t=e.element;o=t.x.baseVal.value,r=t.y.baseVal.value,s=t.width.baseVal.value,l=t.height.baseVal.value}else if(Si.SVG.circle(e.element)){const t=e.element;o=t.cx.baseVal.value-t.r.baseVal.value,r=t.cy.baseVal.value-t.r.baseVal.value,l=s=2*t.r.baseVal.value}else{if(!Si.SVG.ellipse(e.element))return;{const t=e.element;o=t.cx.baseVal.value-t.rx.baseVal.value,r=t.cy.baseVal.value-t.ry.baseVal.value,s=2*t.rx.baseVal.value,l=2*t.ry.baseVal.value}}}a.centerX=""+(o+s*Fi(n.cxAsString)),a.centerY=""+(r+l*Fi(n.cyAsString)),a.gradientRadius=""+(s+l)/2*(ui.isPercent(n.rAsString)?parseFloat(n.rAsString)/100:1),n.spreadMethod&&(a.tileMode=ki(n.spreadMethod));break}case"linear":{const e=t;a.startX=""+e.x1,a.startY=""+e.y1,a.endX=""+e.x2,a.endY=""+e.y2,e.spreadMethod&&(a.tileMode=ki(e.spreadMethod))}}return a}const Xi=t=>"fill"===t||"stroke"===t,Vi=(t,e,n=-1)=>`${t.name}_${e+(-1!==n?`_${n+1}`:"")}`,Fi=t=>ui.isPercent(t)?parseFloat(t)/100:.5,zi=t=>`@drawable/${t}`,qi=(t="")=>({ordering:t,objectAnimator:[]});class Ui extends squared.base.Extension{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=!0,this.VECTOR_DATA=new Map,this.ANIMATE_DATA=new Map,this.ANIMATE_TARGET=new Map,this.IMAGE_DATA=[],this.SYNCHRONIZE_MODE=0,this.NAMESPACE_AAPT=!1}beforeInit(){si&&(si.setName(),this.application.controllerHandler.localSettings.svg.enabled=!0)}afterResources(){for(const t of this.application.processing.cache){let e,n;if(t.imageElement?[e,n]=this.createSvgElement(t,t.src):t.svgElement&&(n=t.element),n){const a=this.createSvgDrawable(t,n);""!==a&&(t.localSettings.targetAPI>=21?t.android("src",zi(a)):t.app("srcCompat",zi(a))),t.hasWidth||t.setLayoutWidth(s.WRAP_CONTENT),t.hasHeight||t.setLayoutHeight(s.WRAP_CONTENT),t.baseline&&t.android("baselineAlignBottom","true"),e&&e.removeChild(n)}}}createSvgElement(t,e){let n,a;const i=mi.CSS.URL.exec(e);if(i&&(e=i[1]),e.toLowerCase().endsWith(".svg")||e.startsWith("data:image/svg+xml")){const i=this.application.resourceHandler.getRawData(e);i&&((n=(t.actualParent||t.documentParent).element).insertAdjacentHTML("beforeend",i.content),n.lastElementChild instanceof SVGSVGElement&&(0===(a=n.lastElementChild).width.baseVal.value&&a.setAttribute(hi.CSS.WIDTH,""+t.actualWidth),0===a.height.baseVal.value&&a.setAttribute(hi.CSS.HEIGHT,""+t.actualHeight)))}return[n,a]}createSvgDrawable(t,e){const n=new ii(e),a=t.localSettings.targetAPI>=23;this.SVG_INSTANCE=n,this.VECTOR_DATA.clear(),this.ANIMATE_DATA.clear(),this.ANIMATE_TARGET.clear(),this.IMAGE_DATA.length=0,this.NAMESPACE_AAPT=!1,this.SYNCHRONIZE_MODE=2|(a?32:64);const i=`${t.tagName}_${fi.convertWord(t.controlId,!0)}_viewbox`.toLowerCase(),o=(t,e)=>i+(t?`_${t}`:"")+(this.IMAGE_DATA.length?"_vector":"")+(e?`_${e.toLowerCase()}`:"");n.build({exclude:this.options.transformExclude,residual:Oi,precision:this.options.floatPrecisionValue}),n.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,framesPerSecond:this.application.controllerHandler.userSettings.framesPerSecond,precision:this.options.floatPrecisionValue}),this.queueAnimations(n,n.name,t=>"opacity"===t.attributeName);const s=this.parseVectorData(n);let l=C.insertStoredAsset("drawables",o(),gi.applyTemplate("vector",Yn,[{"xmlns:android":r.android,"xmlns:aapt":this.NAMESPACE_AAPT?r.aapt:"","android:name":n.name,"android:width":ui.formatPX(n.width),"android:height":ui.formatPX(n.height),"android:viewportWidth":""+(n.viewBox.width||n.width),"android:viewportHeight":""+(n.viewBox.height||n.height),"android:alpha":parseFloat(n.opacity)<1?""+n.opacity:"",include:s}])),c="";if(this.ANIMATE_DATA.size){const t=[{"xmlns:android":r.android,"android:drawable":zi(l),target:[]}];function d(e,n){if(n.set.length){let a=!1;if(n.set.length>1&&n.set.every(t=>""===t.ordering)){const t={set:[],objectAnimator:[]};for(const e of n.set)fi.concatArray(t.set,e.set),fi.concatArray(t.objectAnimator,e.objectAnimator);n=t}for(;1===n.set.length;){const t=n.set[0];if(a&&""!==t.ordering||0!==t.objectAnimator.length)break;n=t,a=!0}n["xmlns:android"]=r.android,a&&(n["android:ordering"]=n.ordering,n.ordering=void 0);const i={name:e,animation:C.insertStoredAsset("animators",o("anim",e),gi.applyTemplate("set",ai,[n]))};""!==i.animation&&(i.animation=`@anim/${i.animation}`,t[0].target.push(i))}}for(const[t,e]of this.ANIMATE_DATA.entries()){const n=new Map,i=new Map,o=[],r=[],s=[],l=[],c=[],[h,u]=fi.partitionArray(e.animate,t=>void 0!==t.companion),p={set:[],objectAnimator:[]};for(let t=0;t<u.length;t++){const e=u[t];if(e.setterType)Ci[e.attributeName]&&fi.isString(e.to)&&(e.duration>0&&e.fillReplace?r.push(e):o.push(e));else if(si.isAnimate(e)){const l=fi.filterArray(h,t=>t.companion.value===e);if(l.length){l.sort((t,e)=>t.companion.key>=e.companion.key?1:0);const a=[],i=[];for(let t=0;t<l.length;t++){const n=l[t];n.companion.key<=0?(a.push(n),0===t&&e.delay>0&&(n.delay+=e.delay,e.delay=0)):i.push(n)}a.push(e),fi.concatArray(a,i),n.set(`sequentially_companion_${t}`,a)}else{const t=e.synchronized;if(t)if(si.isAnimateTransform(e)){const n=i.get(t.value)||[];n.push(e),i.set(t.value,n)}else{const a=n.get(t.value)||[];a.push(e),n.set(t.value,a)}else si.isAnimateTransform(e)&&e.expandToValues(),-1===e.iterationCount?r.push(e):!(!e.fromToType||si.isAnimateTransform(e)&&e.transformOrigin)||a&&"pathType"!==Li(e.attributeName)?e.fillReplace?r.push(e):o.push(e):s.push([e])}}}o.length&&s.push(o);for(const[t,e]of n.entries())t.startsWith("sequentially_companion")?s.push(e):s.push(e.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of i.values())c.push(t.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of r)l.push([[t]]);[s,c,...l].forEach((t,n)=>{if(0===t.length)return;const i={ordering:0===n||1===t.length?"":"sequentially",set:[],objectAnimator:[]};for(const o of t){let t="",r=!1,s=!1,l=!0;n<=1&&o.some(t=>!!t.synchronized&&""!==t.synchronized.value)?(si.isAnimateTransform(o[0])||(t="sequentially"),r=!0,l=!1):n<=1&&o.some(t=>!!t.synchronized&&""===t.synchronized.value)?(t="sequentially",r=!0,s=!0):n<=1&&o.some(t=>void 0!==t.companion)?t="sequentially":(n>0&&(t="sequentially"),n>1&&si.isAnimateTransform(o[0])&&(s=!0));const c=qi(),d=qi(),h=qi(),u=qi(),p=[];(r?fi.partitionArray(o,t=>-1!==t.iterationCount):[o]).forEach((o,m)=>{1===m&&o.length>1&&(h.ordering="sequentially");const f=new Map;for(const g of o){const T=Li(g.attributeName);if(void 0===T)continue;const S=g.delay>0;let E,A=!1;const b=(t,e)=>{fi.isString(e)&&-1===c.objectAnimator.findIndex(e=>e.propertyName===t)&&c.objectAnimator.push(this.createPropertyValue(t,e,"0",T))},C=(t,e,n)=>{if(!r&&g.fillReplace&&void 0!==T){let a,i=g.replaceValue;if(i||(A?i=Di(t):g.parent&&si.isShape(g.parent)&&g.parent.path&&(i="pathData"===t?g.parent.path.value:g.parent.path[Ri(t)]),i||(i=g.baseValue)),e&&e.length){const t=e[e.length-1];if(fi.isArray(t.propertyValuesHolder)){const e=t.propertyValuesHolder[t.propertyValuesHolder.length-1];a=e.keyframe[e.keyframe.length-1].value}else a=t.valueTo}if(fi.isString(i)&&i!==a&&(i=Bi(g,i))){switch(t){case"trimPathStart":case"trimPathEnd":i=i.split(" ")["trimPathStart"===t?0:1]}u.objectAnimator.push(this.createPropertyValue(t,i,"1",T,"pathType"===T?a:"",n?""+n:""))}E&&(t.endsWith("X")?u.objectAnimator.push(this.createPropertyValue("translateX","0","1",T)):t.endsWith("Y")&&u.objectAnimator.push(this.createPropertyValue("translateY","0","1",T)))}};if(g.setterType){const t=wi(g.attributeName);if(t){const e=Xi(g.attributeName)?Gi(g.to,!0):g.to.trim().split(" ");if(e.length===t.length&&!e.some(t=>""===t)){let a,i;for(let o=0;o<t.length;o++){let r;"pathType"===T?r=e[o]:S&&g.baseValue&&(r=Bi(g,g.baseValue.trim().split(" ")[o]));const s=this.createPropertyValue(t[o],e[o],"1",T,r,g.delay>0?""+g.delay:"");n>1?(h.objectAnimator.push(s),C(t[o],void 0,n>1?g.duration:0)):g.companion&&g.companion.key<=0?(void 0===a&&(a=[]),a.push(s)):g.companion&&g.companion.key>0?(void 0===i&&(i=[]),i.push(s)):p.push(s)}a&&fi.concatArray(c.objectAnimator,a),i&&fi.concatArray(u.objectAnimator,i)}}}else if(si.isAnimate(g)){let c,u=s;const p=this.createPropertyValue("","",""+g.duration,T,"",g.delay>0?""+g.delay:"",c=1===m?o.length>1?"0":"-1":-1!==g.iterationCount?""+Math.ceil(g.iterationCount-1):"-1"),y=[];let R,I;if(r||"pathType"!==p.valueType)if(si.asAnimateTransform(g))R=Hi(g.type),I=Mi(g),R&&I&&(s&&0===g.keyTimes[0]&&(u=!1),(u||S)&&fi.concatArray(y,fi.objectMap(R,t=>Di(t)||"0")),E=g.transformOrigin),A=!0;else if(si.asAnimateMotion(g)){if(R=Hi(g.type),I=Mi(g),R&&I){const t=g.rotateValues;if(t&&t.length===I.length){R.push("rotation");for(let e=0;e<I.length;e++)I[e].push(t[e])}}A=!0}else switch(R=wi(g.attributeName),p.valueType){case"intType":I=fi.objectMap(g.values,t=>""+fi.convertInt(t)),S&&g.baseValue&&fi.concatArray(y,fi.replaceMap(si.parseCoordinates(g.baseValue),t=>""+Math.trunc(t)));break;case"floatType":I="stroke-dasharray"===g.attributeName?fi.objectMap(g.values,t=>fi.replaceMap(t.split(" "),t=>parseFloat(t))):g.values,S&&g.baseValue&&fi.concatArray(y,fi.replaceMap(si.parseCoordinates(g.baseValue),t=>""+t));break;default:if(I=g.values.slice(0),Xi(g.attributeName)){S&&g.baseValue&&fi.concatArray(y,Gi(g.baseValue,!0));for(let t=0;t<I.length;t++)""!==I[t]&&(I[t]=Gi(I[t]))}}else if(e.pathData){let t,n;g.parent&&si.isShape(g.parent)&&(n=g.parent,g.parent.path&&(t=g.parent.path.transformed)),R=["pathData"],I=ci.extrapolate(g.attributeName,e.pathData,g.values,t,n,this.options.floatPrecisionValue)}if(void 0===g.keySplines&&(g.timingFunction?p.interpolator=Ii(g.timingFunction):""!==this.options.animateInterpolator&&(p.interpolator=this.options.animateInterpolator)),I&&R){const o=g.synchronized?g.synchronized.key+g.synchronized.value:0!==n||R.length>1?JSON.stringify(p):"",c=g.keyTimes;for(let n=0;n<R.length;n++){const T=R[n];if(u&&b(T,y[n]),l&&c.length>1)if(a&&"pathType"!==p.valueType){!u&&S&&b(T,y[n]);const t=f.get(o)||[],e=[];for(let t=0;t<c.length;t++){let a=xi(I,t,n,!0);a&&"floatType"===p.valueType&&(a=pi.truncate(a,this.options.floatPrecisionValue)),e.push({interpolator:t>0&&""!==a&&"pivotX"!==T&&"pivotY"!==T?yi(g.keySplines,t-1):"",fraction:0===c[t]&&""===a?"":pi.truncate(c[t],this.options.floatPrecisionKeyTime),value:a})}t.push({propertyName:T,keyframe:e}),f.has(o)||(""!==o&&f.set(o,t),(0===m?d:h).objectAnimator.push(Object.assign({},p,{propertyValuesHolder:t}))),E=void 0}else{t="sequentially";const a=qi("sequentially"),o=d.objectAnimator;for(let t=0;t<c.length;t++){const i=Object.assign({},p,{propertyName:T,startOffset:0===t?""+(g.delay+(c[t]>0?Math.floor(c[t]*g.duration):0)):"",propertyValuesHolder:!1});let r=xi(I,t,n,!1,"pathType"===p.valueType?e.pathData:g.baseValue);if(r){let l;if(0===t?(i.valueFrom=!s&&S?y[n]:"pathType"===p.valueType?e.pathData||""+I[0]:g.baseValue||g.replaceValue||"",l=0):(i.valueFrom=""+xi(I,t-1,n),l=Math.floor((c[t]-c[t-1])*g.duration)),"floatType"===p.valueType&&(r=pi.truncate(r,this.options.floatPrecisionValue)),E&&E[t]){let e,n=0;if(T.endsWith("X")?(e="translateX",n=E[t].x):T.endsWith("Y")&&(e="translateY",n=E[t].y),e){const t=this.createPropertyValue(e,pi.truncate(n,this.options.floatPrecisionValue),""+l,"floatType");t.interpolator=Ii(Ti.KEYSPLINE_NAME["step-start"]),a.objectAnimator.push(t)}}t>0&&(i.interpolator=yi(g.keySplines,t-1)),i.duration=""+l,i.valueTo=r,o.push(i)}}a.objectAnimator.length&&i.set.push(a)}else{const t=Object.assign({},p,{propertyName:T,interpolator:g.duration>1?yi(g.keySplines,0):"",propertyValuesHolder:!1});if(Array.isArray(I[0])){const e=I[I.length-1][n];if(I.length>1){const a=I[0][n];a!==e&&(t.valueFrom=""+a)}t.valueTo=""+e}else{let a;I.length>1?(a=""+I[0],t.valueTo=""+I[I.length-1]):(a=g.from||(!s&&S?y[n]:""),t.valueTo=g.to),"pathType"===p.valueType?t.valueFrom=a||e.pathData||t.valueTo:a&&a!==t.valueTo&&(t.valueFrom=Bi(g,a))}t.valueTo&&("floatType"===p.valueType&&(t.valueTo=pi.truncate(t.valueTo,this.options.floatPrecisionValue)),(0===m?d:h).objectAnimator.push(t))}0!==m||r||-1===g.iterationCount||C(T,d.objectAnimator)}S&&E&&E.length&&(b("translateX","0"),b("translateY","0"))}}}});const m=d.objectAnimator.length>0||h.objectAnimator.length>0;"sequentially"===t&&(m&&1===c.objectAnimator.length&&(d.objectAnimator.unshift(c.objectAnimator[0]),c.objectAnimator.length=0),1===h.objectAnimator.length&&(d.objectAnimator.push(h.objectAnimator[0]),h.objectAnimator.length=0),m&&1===u.objectAnimator.length&&(d.objectAnimator.push(u.objectAnimator[0]),u.objectAnimator.length=0)),0===c.objectAnimator.length&&0===h.objectAnimator.length&&0===u.objectAnimator.length&&("sequentially"===t&&1===d.objectAnimator.length&&(t=""),"sequentially"!==i.ordering&&"sequentially"!==t&&(fi.concatArray(p,d.objectAnimator),d.objectAnimator.length=0)),(d.objectAnimator.length||h.objectAnimator.length)&&(c.objectAnimator.length&&(i.ordering="sequentially",i.set.push(c)),d.objectAnimator.length&&(d.ordering=t,i.set.push(d)),h.objectAnimator.length&&(i.ordering="sequentially",i.set.push(h)),u.objectAnimator.length&&(i.ordering="sequentially",i.set.push(u))),p.length&&fi.concatArray(i.objectAnimator,p)}(i.set.length||i.objectAnimator.length)&&p.set.push(i)}),d(t,p)}for(const[t,e]of this.ANIMATE_TARGET.entries()){let n;const a=(t,e,a,i,o)=>{void 0===n&&(n=[]),n.push(this.createPropertyValue(t,e,"0",a,i,o))};for(const t of e.animate)if(si.asAnimateMotion(t)&&t.parent&&si.isShape(t.parent)){const e=t.parent.path;e&&e.value!==e.baseValue&&(a("pathData",e.baseValue,"pathType",e.value),-1===t.iterationCount||t.setterType||a("pathData",e.value,"pathType",e.baseValue,""+t.getTotalDuration()))}n&&d(t,{set:[{set:void 0,objectAnimator:n}],objectAnimator:void 0})}t[0].target&&(l=C.insertStoredAsset("drawables",o("anim"),gi.applyTemplate("animated-vector",ti,t)))}if(this.IMAGE_DATA.length){const t=[];""!==l&&t.push({drawable:zi(l)});const e=[{"xmlns:android":r.android,item:t}];for(const e of this.IMAGE_DATA){const a=n.width/n.viewBox.width,i=n.height/n.viewBox.height;let o=e.getBaseValue("x",0)*a,r=e.getBaseValue("y",0)*i,s=e.getBaseValue(hi.CSS.WIDTH,0),l=e.getBaseValue(hi.CSS.HEIGHT,0);const c=_i(e.element,n.element);o+=c.x,r+=c.y,l*=i;const d={width:ui.formatPX(s*=a),height:ui.formatPX(l),left:0!==o?ui.formatPX(o):"",top:0!==r?ui.formatPX(r):""},h=zi(C.addImage({mdpi:e.href}));e.rotateAngle?d.rotate={drawable:h,fromDegrees:""+e.rotateAngle,visible:e.visible?"true":"false"}:d.drawable=h,t.push(d)}c=C.insertStoredAsset("drawables",i,gi.applyTemplate("layer-list",zn,e))}else c=l;return c}afterFinalize(){this.application.controllerHandler.localSettings.svg.enabled=!1}parseVectorData(t,e=0){const n=this.createGroup(t),a=e+n.length;let i="";for(const e of t)if(e.visible)if(si.isShape(e)){if(e.path&&e.path.value){const[t,n]=this.createPath(e,e.path),o=[];if(e.path.strokeWidth&&(e.path.strokeDasharray||e.path.strokeDashoffset)){const a=this.ANIMATE_DATA.get(e.name);if(void 0===a||a.animate.every(t=>t.attributeName.startsWith("stroke-dash"))){const[i,r,s]=e.path.extractStrokeDash(a&&a.animate,this.options.floatPrecisionValue);if(i){const l=Vi(e,"stroke"),c={name:l};""!==r&&(t.pathData=r),""!==s&&(c["clip-path"]=[{pathData:s}]);for(let e=0;e<i.length;e++){const n=0===e?t:Object.assign({},t);n.name=`${l}_${e}`,a&&this.ANIMATE_DATA.set(n.name,{element:a.element,animate:fi.filterArray(a.animate,t=>void 0===t.id||t.id===e)}),n.trimPathStart=pi.truncate(i[e].start,this.options.floatPrecisionValue),n.trimPathEnd=pi.truncate(i[e].end,this.options.floatPrecisionValue),o.push(n)}n.unshift(c),a&&this.ANIMATE_DATA.delete(e.name)}}}if(0===o.length&&o.push(t),n.length){n[n.length-1].path=o,i+=gi.applyTemplate("group",Un,n,a+1)}else i+=gi.applyTemplate("path",qn,o,a+1)}}else if(si.isContainer(e))e.length&&(i+=this.parseVectorData(e,a));else if(si.asImage(e)&&!si.asPattern(t)){if(0===e.width||0===e.height){const t=this.application.resourceHandler.getImage(e.href);t&&t.width>0&&t.height>0&&(e.width=t.width,e.height=t.height,e.setRect())}e.extract(this.options.transformExclude.image),this.IMAGE_DATA.push(e)}return n.length?(n[n.length-1].include=i,gi.applyTemplate("group",Un,n,e+1)):i}createGroup(t){const e=[],n=[],a={"clip-path":e},i={"clip-path":n},o=[],r={};if(!(t!==this.SVG_INSTANCE&&si.asSvg(t)||si.asUseSymbol(t)||si.asUsePattern(t))||0===t.x&&0===t.y||(r.name=Vi(t,"main"),r.translateX=""+t.x,r.translateY=""+t.y),""!==t.clipRegion&&this.createClipPath(t,e,t.clipRegion),(e.length||Object.keys(r).length)&&(Object.assign(a,r),o.push(a)),t!==this.SVG_INSTANCE){const e={},[a]=Pi(t.element,t.transforms,!0),r=Vi(t,"animate");if((si.asG(t)||si.asUseSymbol(t))&&fi.isString(t.clipPath)&&this.createClipPath(t,n,t.clipPath)&&(e.name=r),this.queueAnimations(t,r,t=>si.asAnimateTransform(t))&&(e.name=r),Object.keys(e).length&&(Object.assign(i,e),o.push(i)),a.length){const e=[];for(const t of a)o.push(Ni(t)),fi.concatArray(e,t);t.transformed=e.reverse()}}return o}createPath(t,e){const n={name:t.name},a=[],i=[];if(si.asUse(t)&&fi.isString(t.clipPath)&&this.createClipPath(t,i,t.clipPath),fi.isString(e.clipPath)){const t=new di(e.element);t.build({exclude:this.options.transformExclude,residual:Oi,precision:this.options.floatPrecisionValue}),t.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),this.createClipPath(t,i,e.clipPath)}const o={},r=Vi(t,"group");if(this.queueAnimations(t,r,t=>si.isAnimateTransform(t),"",t.name)?o.name=r:i.length&&(o.name=""),!si.asUse(t)||0===t.x&&0===t.y||(o.translateX=""+t.x,o.translateY=""+t.y),i.length&&(o["clip-path"]=i),Object.keys(o).length&&a.push(o),e.transformResidual)for(const t of e.transformResidual)a.push(Ni(t));const s=function(t){let e=parseFloat(t.opacity),n=t.parent;for(;n;){const t=parseFloat(n.opacity||"1");!isNaN(t)&&t<1&&(e*=t),n=n.parent}return e}(t),l=si.asUse(t);for(let a in e){let i=l&&t[a]||e[a];if(fi.isString(i)){switch(a){case"name":break;case"value":a="pathData";break;case"fill":case"stroke":if(a+="Color",i===hi.CSS.NONE||"stroke"!==a&&void 0!==n["aapt:attr"])continue;{const t=C.addColor(i);""!==t&&(i=`@color/${t}`)}break;case"fillPattern":const t=this.SVG_INSTANCE.definitions.gradient.get(i);let o=!1;if(t)switch(e.element.tagName){case"path":if(!/[zZ]\s*$/.test(e.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const n=Wi(t,e,this.options.floatPrecisionValue);n&&(i={name:"android:fillColor",gradient:n},o=!0);break}}if(!o)continue;a="aapt:attr",n.fillColor="",this.NAMESPACE_AAPT=!0;break;case"fillRule":if("evenodd"!==i)continue;a="fillType",i="evenOdd";break;case"strokeWidth":if("0"===i)continue;break;case"fillOpacity":case"strokeOpacity":if("1"===(i=""+(fi.isNumber(i)?parseFloat(i):1)*s))continue;a="fillOpacity"===a?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===i)continue;a="strokeLineCap";break;case"strokeLinejoin":if("miter"===i)continue;a="strokeLineJoin";break;case"strokeMiterlimit":if("4"===i)continue;a="strokeMiterLimit";break;default:continue}n[a]=i}}const c=new Map,d=[],h=[],u=e.value;let p=u,m=0;for(const e of t.animations)if(si.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);c.set(t,{index:m,time:t,to:e.transformFrom,reset:!1,animate:e}),-1!==e.iterationCount&&e.fillReplace&&(c.has(t=e.delay+e.iterationCount*e.duration)||c.set(t,{index:m,time:t,to:u,reset:!0})),m++}const f=Array.from(c.values()).sort((t,e)=>t.time<e.time?-1:1);for(let t=0;t<f.length;t++){const e=f[t];if(!e.reset||e.to!==p){let n=!0;if(e.reset)t:for(let a=0;a<t;a++){const i=f[a];if(!i.reset)for(let a=t+1;a<f.length;a++)switch(f[a].index){case i.index:n=!1;case e.index:break t}}else{const n=[],a=new Set;for(let e=0;e<t;e++){const t=f[e];n[t.index]=n[t.index]?2:1}for(let t=0;t<n.length;t++)if(1===n[t]){const e=f.find(e=>e.index===t&&void 0!==e.animate);e&&e.animate&&a.add(e.animate.type)}for(const t of a){const n=Hi(t);if(n){const a=Si.TRANSFORM.typeAsValue(t).split(" ");for(let t=0;t<a.length;t++)d.push(vi(n[t],e.time,a[t],""))}}}n&&(h.push(vi("d",e.time,e.to)),p=e.to)}}if(this.queueAnimations(t,n.name,t=>(si.asAnimate(t)||si.asSet(t))&&"clip-path"!==t.attributeName,u)||0!==h.length||o.name!==r&&(n.name=""),d.length){const t=this.ANIMATE_DATA.get(r);t&&fi.concatArray(t.animate,d)}if(h.length){const e=this.ANIMATE_DATA.get(n.name);e?fi.concatArray(e.animate,h):this.ANIMATE_DATA.set(n.name,{element:t.element,animate:h,pathData:u})}return[n,a]}createClipPath(t,e,n){let a=0;return n.split(";").forEach((n,i,o)=>{if("#"===n.charAt(0)){const t=this.SVG_INSTANCE.definitions.clipPath.get(n);if(t){const n=new li(t);n.build({exclude:this.options.transformExclude,residual:Oi,precision:this.options.floatPrecisionValue}),n.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),n.each(t=>{if(t.path&&t.path.value){let n=Vi(t,"clip_path",o.length>1?i+1:-1);this.queueAnimations(t,n,t=>si.asAnimate(t)||si.asSet(t),t.path.value)||(n=""),e.push({name:n,pathData:t.path.value})}})}a++}else{let r=Vi(t,"clip_path",o.length>1?i+1:-1);this.queueAnimations(t,r,t=>(si.asAnimate(t)||si.asSet(t))&&"clip-path"===t.attributeName,n)||(r=""),e.push({name:r,pathData:n}),a++}}),a>0}queueAnimations(t,e,n,a="",i){if(t.animations.length){const o=fi.filterArray(t.animations,(t,e,a)=>!t.paused&&(t.duration>=0||t.setterType)&&n(t,e,a));if(o.length)return this.ANIMATE_DATA.set(e,{element:t.element,animate:o,pathData:a}),i&&this.ANIMATE_TARGET.set(i,{element:t.element,animate:o,pathData:a}),!0}return!1}createPropertyValue(t,e,n,a,i="",o="",r="0"){return{propertyName:t,startOffset:o,duration:n,repeatCount:r,valueType:a,valueFrom:fi.isNumber(i)?pi.truncate(i,this.options.floatPrecisionValue):i,valueTo:fi.isNumber(e)?pi.truncate(e,this.options.floatPrecisionValue):e,propertyValuesHolder:!1}}}const Yi={builtInExtensions:["android.delegate.max-width-height","android.delegate.fixed","android.delegate.negative-x","android.delegate.negative-viewport","android.delegate.percent","android.delegate.scrollbar","android.delegate.radiogroup","squared.external","squared.substitute","squared.sprite","squared.css-grid","squared.flexbox","squared.table","squared.list","squared.grid","squared.relative","squared.verticalalign","squared.whitespace","squared.accessibility","android.constraint.guideline","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.includes"],targetAPI:28,resolutionDPI:160,framesPerSecond:60,supportRTL:!0,preloadImages:!0,supportNegativeLeftTop:!0,exclusionsDisabled:!1,customizationsOverwritePrivilege:!0,showAttributes:!0,convertPixels:"dp",insertSpaces:4,handleExtensionsAsync:!0,autoCloseOnWrite:!0,showErrorMessages:!0,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputDirectory:"app/src/main",outputMainFileName:"activity_main.xml",outputArchiveFormat:"zip",outputArchiveTimeout:30};let $i,ji,Zi,Ki=!1;const Ji=t=>Ki&&!!t&&(t.closed||!(!$i||!$i.userSettings.autoCloseOnWrite||$i.initialized||$i.closed||($i.finalize(),0))),Qi={base:{Controller:Mt,File:Qt,Resource:C,View:st},extensions:{Accessibility:ee,CssGrid:me,External:fe,Flexbox:Ie,Grid:Le,List:We,Relative:Ve,Sprite:$e,Substitute:je,Table:en,VerticalAlign:an,WhiteSpace:on,constraint:{Guideline:hn},delegate:{Fixed:gn,MaxWidthHeight:An,NegativeViewport:yn,NegativeX:Pn,Percent:vn,RadioGroup:Gn,ScrollBar:Vn},resource:{Background:Sa,Dimens:_a,Fonts:Wa,Includes:Xa,Strings:$a,Styles:Qa,Svg:Ui}},lib:{constant:d,customization:O,enumeration:e,util:k},system:{customize(t,e,n){if(N[t]){const a=N[t].assign;return a[e]?Object.assign(a[e],n):a[e]=n,a[e]}},addXmlNs(t,e){r[t]=e},writeLayoutAllXml:(t=!1)=>ji&&Ji($i)?ji.layoutAllToXml($i.layouts,t):{},writeResourceAllXml:(t=!1)=>ji&&Ji($i)?ji.resourceAllToXml(t):{},writeResourceStringXml:(t=!1)=>ji&&Ji($i)?ji.resourceStringToXml(t):[],writeResourceArrayXml:(t=!1)=>ji&&Ji($i)?ji.resourceStringArrayToXml(t):[],writeResourceFontXml:(t=!1)=>ji&&Ji($i)?ji.resourceFontToXml(t):[],writeResourceColorXml:(t=!1)=>ji&&Ji($i)?ji.resourceColorToXml(t):[],writeResourceStyleXml:(t=!1)=>ji&&Ji($i)?ji.resourceStyleToXml(t):[],writeResourceDimenXml:(t=!1)=>ji&&Ji($i)?ji.resourceDimenToXml(t):[],writeResourceDrawableXml:(t=!1)=>ji&&Ji($i)?ji.resourceDrawableToXml(t):[],writeResourceDrawableImageXml:(t=!1)=>ji&&Ji($i)?ji.resourceDrawableImageToXml(t):[],writeResourceAnimXml:(t=!1)=>ji&&Ji($i)?ji.resourceAnimToXml(t):[]},create(){const t=squared.base.lib.constant.EXT_NAME,e=n;return $i=new squared.base.Application(2,st,Mt,C,Dt),ji=new Qt($i.resourceHandler),Zi=Object.assign({},Yi),Object.assign($i.builtInExtensions,{[t.EXTERNAL]:new fe(t.EXTERNAL,2),[t.SUBSTITUTE]:new je(t.SUBSTITUTE,2),[t.SPRITE]:new $e(t.SPRITE,2),[t.CSS_GRID]:new me(t.CSS_GRID,2),[t.FLEXBOX]:new Ie(t.FLEXBOX,2),[t.TABLE]:new en(t.TABLE,2,["TABLE"]),[t.LIST]:new We(t.LIST,2,["DIV","UL","OL","DL"]),[t.GRID]:new Le(t.GRID,2,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[t.RELATIVE]:new Ve(t.RELATIVE,2),[t.VERTICAL_ALIGN]:new an(t.VERTICAL_ALIGN,2),[t.WHITESPACE]:new on(t.WHITESPACE,2),[t.ACCESSIBILITY]:new ee(t.ACCESSIBILITY,2),[e.CONSTRAINT_GUIDELINE]:new hn(e.CONSTRAINT_GUIDELINE,2),[e.DELEGATE_FIXED]:new gn(e.DELEGATE_FIXED,2),[e.DELEGATE_MAXWIDTHHEIGHT]:new An(e.DELEGATE_MAXWIDTHHEIGHT,2),[e.DELEGATE_NEGATIVEVIEWPORT]:new yn(e.DELEGATE_NEGATIVEVIEWPORT,2),[e.DELEGATE_NEGATIVEX]:new Pn(e.DELEGATE_NEGATIVEX,2),[e.DELEGATE_PERCENT]:new vn(e.DELEGATE_PERCENT,2),[e.DELEGATE_RADIOGROUP]:new Gn(e.DELEGATE_RADIOGROUP,2),[e.DELEGATE_SCROLLBAR]:new Vn(e.DELEGATE_SCROLLBAR,2),[e.RESOURCE_INCLUDES]:new Xa(e.RESOURCE_INCLUDES,2),[e.RESOURCE_BACKGROUND]:new Sa(e.RESOURCE_BACKGROUND,2),[e.RESOURCE_SVG]:new Ui(e.RESOURCE_SVG,2),[e.RESOURCE_STRINGS]:new $a(e.RESOURCE_STRINGS,2),[e.RESOURCE_FONTS]:new Wa(e.RESOURCE_FONTS,2),[e.RESOURCE_DIMENS]:new _a(e.RESOURCE_DIMENS,2),[e.RESOURCE_STYLES]:new Qa(e.RESOURCE_STYLES,2)}),Ki=!0,{application:$i,framework:2,userSettings:Zi}},cached:()=>Ki?{application:$i,framework:2,userSettings:Zi}:Qi.create()};return Qi}();
