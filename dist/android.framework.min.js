var android=function(){"use strict";var t;!function(t){t[t.CHECKBOX=1]="CHECKBOX",t[t.RADIO=2]="RADIO",t[t.EDIT=3]="EDIT",t[t.SELECT=4]="SELECT",t[t.RANGE=5]="RANGE",t[t.SVG=6]="SVG",t[t.TEXT=7]="TEXT",t[t.IMAGE=8]="IMAGE",t[t.BUTTON=9]="BUTTON",t[t.INLINE=10]="INLINE",t[t.LINE=11]="LINE",t[t.SPACE=12]="SPACE",t[t.BLOCK=13]="BLOCK",t[t.FRAME=14]="FRAME",t[t.LINEAR=15]="LINEAR",t[t.GRID=16]="GRID",t[t.RELATIVE=17]="RELATIVE",t[t.CONSTRAINT=18]="CONSTRAINT",t[t.WEBVIEW=19]="WEBVIEW",t[t.UNKNOWN=20]="UNKNOWN"}(t||(t={}));var e=Object.freeze({get CONTAINER_NODE(){return t}});const a={DELEGATE_FIXED:"android.delegate.fixed",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEVIEWPORT:"android.delegate.negative-viewport",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_STYLES:"android.resource.styles"},n={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",SELECT:"Spinner",RANGE:"SeekBar",SVG:"ImageView",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},o={PLAINTEXT:t.TEXT,HR:t.LINE,SVG:t.SVG,IMG:t.IMAGE,BUTTON:t.BUTTON,SELECT:t.SELECT,TEXTAREA:t.EDIT,IFRAME:t.WEBVIEW,INPUT_RANGE:t.RANGE,INPUT_TEXT:t.EDIT,INPUT_PASSWORD:t.EDIT,INPUT_NUMBER:t.EDIT,INPUT_EMAIL:t.EDIT,INPUT_SEARCH:t.EDIT,INPUT_URL:t.EDIT,INPUT_DATE:t.EDIT,INPUT_TEL:t.EDIT,INPUT_TIME:t.EDIT,INPUT_WEEK:t.EDIT,INPUT_MONTH:t.EDIT,INPUT_FILE:t.BUTTON,INPUT_IMAGE:t.BUTTON,INPUT_SUBMIT:t.BUTTON,INPUT_RESET:t.BUTTON,INPUT_CHECKBOX:t.CHECKBOX,INPUT_RADIO:t.RADIO,"INPUT_DATETIME-LOCAL":t.EDIT},i={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},r={HORIZONTAL:"horizontal",VERTICAL:"vertical"},s={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},l={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},c={left:"start",right:"end",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toRightOf:"layout_toEndOf",layout_toLeftOf:"layout_toStartOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},d=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var h=Object.freeze({EXT_ANDROID:a,CONTAINER_ANDROID:n,ELEMENT_ANDROID:o,SUPPORT_ANDROID:{DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},BOX_ANDROID:i,AXIS_ANDROID:r,LAYOUT_ANDROID:s,XMLNS_ANDROID:l,PREFIX_ANDROID:{MENU:"ic_menu_",DIALOG:"ic_dialog_"},LOCALIZE_ANDROID:c,RESERVED_JAVA:d});const u=squared.base.Resource,p=squared.lib.color,m=squared.lib.css,g=squared.lib.regex,f=squared.lib.util,b=/[^\w+]/g,y="res/values",T="themes.xml",A=u.STORED;let E;function S(t,e=!1){if(t)for(const a in t)if("object"==typeof t[a])S(t,e);else{let n=""+t[a];switch(a){case"text":if(!n.startsWith("@string/")&&""!==(n=w.addString(n,"",e))){t[a]=`@string/${n}`;continue}break;case"src":case"srcCompat":if(g.PREFIX.PROTOCOL.test(n)&&""!==(n=w.addImage({mdpi:n}))){t[a]=`@drawable/${n}`;continue}}const o=p.parseColor(n);if(o){const e=w.addColor(o);""!==e&&(t[a]=`@color/${e}`)}}}class w extends squared.base.Resource{constructor(t,e){super(t,e),A.styles=new Map,A.themes=new Map,A.dimens=new Map,A.drawables=new Map,A.animators=new Map,E=t.controllerHandler.localSettings.supported.imageFormat}static formatOptions(t,e=!1){for(const a in t){const n=t[a];"object"==typeof n&&S(n,e)}return t}static formatName(t){return g.CHAR.LEADINGNUMBER.test(t)&&(t="__"+t),t.replace(b,"_")}static addTheme(...t){for(const e of t){const t=e.output&&f.isString(e.output.path)?e.output.path.trim():y,a=e.output&&f.isString(e.output.file)?e.output.file.trim():T,n=`${f.trimString(t.trim(),"/")}/${f.trimString(a.trim(),"/")}`,o=A.themes.get(n)||new Map;let i="";if(""===e.name||"."===e.name.charAt(0)){t:for(const t of A.themes.values())for(const e of t.values())if(e.name){i=e.name;break t}if(""===i)continue}else i=e.name;e.name=i+("."===e.name.charAt(0)?e.name:""),w.formatOptions(e.items);const r=o.get(e.name);if(r)for(const t in e.items)r.items[t]=e.items[t];else o.set(e.name,e);A.themes.set(n,o)}}static addString(t,e="",a=!1){if(""!==t){""===e&&(e=t.trim());const n=f.isNumber(t);if(!n||a){for(const[e,a]of A.strings.entries())if(a===t)return e;const a=f.trimString(e.replace(g.XML.NONWORD_G,"_"),"_").split(/_+/);a.length>1?(a.length>4&&(a.length=4),e=a.join("_")):e=a[0],e=e.toLowerCase(),n||g.CHAR.LEADINGNUMBER.test(e)||d.includes(e)?e=`__${e}`:""===e&&(e=`__symbol${Math.ceil(1e5*Math.random())}`),A.strings.has(e)&&(e=w.generateId("string",e)),A.strings.set(e,t)}return e}return""}static addImage(t,e=""){if(t.mdpi){const a=f.fromLastIndexOf(t.mdpi,"/"),n=f.fromLastIndexOf(a,".").toLowerCase();if("svg"!==n&&E.includes(n))return w.insertStoredAsset("images",w.formatName(e+a.substring(0,a.length-n.length-1)),t)}return""}static addColor(t,e=!1){if("string"==typeof t&&(t=p.parseColor(t,void 0,e)),t&&(!t.transparent||e)){const e=t.semiopaque||t.transparent?t.valueAsARGB:t.value;let a=A.colors.get(e);if(a)return a;const n=p.findColorShade(t.value);if(n)return a=e===n.value?n.key:w.generateId("color",n.key),A.colors.set(e,a),a}return""}addImageSrc(t,e="",a){const n={};if("string"==typeof t){const a=g.CSS.URL.exec(t);if(a){if(!a[1].startsWith("data:image/"))return w.addImage({mdpi:f.resolvePath(a[1])},e);n.mdpi=a[1]}}else{if(t.srcset){void 0===a&&(a=m.getSrcSet(t,E));for(const t of a){const e=t.pixelRatio;if(e>0){const a=t.src;e<1?n.ldpi=a:1===e?(void 0===n.mdpi||t.actualWidth)&&(n.mdpi=a):e<=1.5?n.hdpi=a:e<=2?n.xhdpi=a:e<=3?n.xxhdpi=a:n.xxxhdpi=a}}}void 0===n.mdpi&&(n.mdpi=t.src)}if(n.mdpi){const t=this.application.resourceHandler.getRawData(n.mdpi);if(t&&t.base64){const a=e+t.filename;return this.application.resourceHandler.writeRawImage(a,t.base64),a.substring(0,a.lastIndexOf("."))}}return w.addImage(n,e)}get userSettings(){return this.application.userSettings}}const x=squared.lib.util;function v(t,e,a,n=0){return(!a||a>=n)&&(t.attr=e,!0)}const R={28:{android:{},assign:{}},27:{android:{accessibilityHeading:!1,accessibilityPaneTitle:!1,appComponentFactory:!1,buttonCornerRadius:!1,cantSaveState:!1,dialogCornerRadius:!1,fallbackLineSpacing:!1,firstBaselineToTopHeight:!1,fontVariationSettings:!1,lastBaselineToBottomHeight:!1,lineHeight:!1,maxLongVersionCode:!1,outlineAmbientShadowColor:!1,outlineSpotShadowColor:!1,screenReaderFocusable:!1,textFontWeight:!1,ttcIndex:!1,versionCodeMajor:!1,versionMajor:!1,widgetFeatures:!1,windowLayoutInDisplayCutoutMode:!1},assign:{}},26:{android:{classLoader:!1,navigationBarDividerColor:!1,showWhenLocked:!1,turnScreenOn:!1,windowLightNavigationBar:!1},assign:{}},25:{android:{fontWeight:!1,justificationMode:!1,layout_marginHorizontal:!1,layout_marginVertical:!1,paddingHorizontal:!1,paddingVertical:!1},assign:{}},24:{android:{colorSecondary:!1,contextDescription:!1,contextUri:!1,roundIcon:!1,shortcutDisabledMessage:!1,shortcutId:!1,shortcutLongLabel:!1,shortcutShortLabel:!1,showMetadataInPreview:!1},assign:{}},23:{android:{backupInForeground:!1,bitmap:!1,buttonGravity:!1,canControlMagnification:!1,canPerformGestures:!1,canRecord:!1,collapseIcon:!1,contentInsetEndWithActions:!1,contentInsetStartWithNavigation:!1,contextPopupMenuStyle:!1,countDown:!1,defaultHeight:!1,defaultToDeviceProtectedStorage:!1,defaultWidth:!1,directBootAware:!1,enableVrMode:!1,endX:!1,endY:!1,externalService:!1,fillType:!1,forceHasOverlappingRendering:!1,hotSpotX:!1,hotSpotY:!1,languageTag:!1,level:!1,listMenuViewStyle:!1,maxButtonHeight:!1,networkSecurityConfig:!1,numberPickerStyle:!1,offset:!1,pointerIcon:!1,popupEnterTransition:!1,popupExitTransition:!1,preferenceFragmentStyle:!1,resizeableActivity:!1,startX:!1,startY:!1,subMenuArrow:!1,supportsLocalInteraction:!1,supportsPictureInPicture:!1,textAppearancePopupMenuHeader:!1,tickMark:!1,tickMarkTint:!1,tickMarkTintMode:!1,titleMargin:!1,titleMarginBottom:!1,titleMarginEnd:!1,titleMarginStart:!1,titleMarginTop:!1,tunerCount:!1,use32bitAbi:!1,version:!1,windowBackgroundFallback:!1},assign:{}},22:{android:{allowUndo:!1,autoVerify:!1,breakStrategy:!1,colorBackgroundFloating:!1,contextClickable:!1,drawableTint:!1,drawableTintMode:!1,end:t=>v(t,"right"),extractNativeLibs:!1,fingerprintAuthDrawable:!1,fraction:!1,fullBackupContent:!1,hyphenationFrequency:!1,lockTaskMode:!1,logoDescription:!1,numbersInnerTextColor:!1,scrollIndicators:!1,showForAllUsers:!1,start:t=>v(t,"left"),subtitleTextColor:!1,supportsAssist:!1,supportsLaunchVoiceAssistFromKeyguard:!1,thumbPosition:!1,titleTextColor:!1,trackTint:!1,trackTintMode:!1,usesCleartextTraffic:!1,windowLightStatusBar:!1},assign:{}},21:{android:{accessibilityTraversalAfter:!1,accessibilityTraversalBefore:!1,collapseContentDescription:!1,dialogPreferredPadding:!1,resizeClip:!1,revisionCode:!1,searchHintIcon:!1},assign:{}},20:{android:{actionBarPopupTheme:!1,actionBarTheme:!1,actionModeFindDrawable:!1,actionModeShareDrawable:!1,actionModeWebSearchDrawable:!1,actionOverflowMenuStyle:!1,amPmBackgroundColor:!1,amPmTextColor:!1,ambientShadowAlpha:!1,autoRemoveFromRecents:!1,backgroundTint:!1,backgroundTintMode:!1,banner:!1,buttonBarNegativeButtonStyle:!1,buttonBarNeutralButtonStyle:!1,buttonBarPositiveButtonStyle:!1,buttonTint:!1,buttonTintMode:!1,calendarTextColor:!1,checkMarkTint:!1,checkMarkTintMode:!1,closeIcon:!1,colorAccent:!1,colorButtonNormal:!1,colorControlActivated:!1,colorControlHighlight:!1,colorControlNormal:!1,colorEdgeEffect:!1,colorPrimary:!1,colorPrimaryDark:!1,commitIcon:!1,contentAgeHint:!1,contentInsetEnd:!1,contentInsetLeft:!1,contentInsetRight:!1,contentInsetStart:!1,controlX1:!1,controlX2:!1,controlY1:!1,controlY2:!1,country:!1,datePickerDialogTheme:!1,datePickerMode:!1,dayOfWeekBackground:!1,dayOfWeekTextAppearance:!1,documentLaunchMode:!1,elegantTextHeight:!1,elevation:!1,excludeClass:!1,excludeId:!1,excludeName:!1,fastScrollStyle:!1,fillAlpha:!1,fillColor:!1,fontFeatureSettings:!1,foregroundTint:!1,foregroundTintMode:!1,fragmentAllowEnterTransitionOverlap:!1,fragmentAllowReturnTransitionOverlap:!1,fragmentEnterTransition:!1,fragmentExitTransition:!1,fragmentReenterTransition:!1,fragmentReturnTransition:!1,fragmentSharedElementEnterTransition:!1,fragmentSharedElementReturnTransition:!1,fromId:!1,fullBackupOnly:!1,goIcon:!1,headerAmPmTextAppearance:!1,headerDayOfMonthTextAppearance:!1,headerMonthTextAppearance:!1,headerTimeTextAppearance:!1,headerYearTextAppearance:!1,hideOnContentScroll:!1,indeterminateTint:!1,indeterminateTintMode:!1,inset:!1,isGame:!1,launchTaskBehindSourceAnimation:!1,launchTaskBehindTargetAnimation:!1,layout_columnWeight:!1,layout_rowWeight:!1,letterSpacing:!1,matchOrder:!1,maxRecentsv:!1,maximumAngle:!1,minimumHorizontalAngle:!1,minimumVerticalAngle:!1,multiArch:!1,navigationBarColor:!1,navigationContentDescription:!1,navigationIcon:!1,nestedScrollingEnabled:!1,numbersBackgroundColor:!1,numbersSelectorColor:!1,numbersTextColor:!1,outlineProvider:!1,overlapAnchor:!1,paddingMode:!1,pathData:!1,patternPathData:!1,persistableMode:!1,popupElevation:!1,popupTheme:!1,progressBackgroundTint:!1,progressBackgroundTintMode:!1,progressTint:!1,progressTintMode:!1,propertyXName:!1,propertyYName:!1,queryBackground:!1,recognitionService:!1,relinquishTaskIdentity:!1,reparent:!1,reparentWithOverlay:!1,restrictionType:!1,resumeWhilePausing:!1,reversible:!1,searchIcon:!1,searchViewStyle:!1,secondaryProgressTint:!1,secondaryProgressTintMode:!1,selectableItemBackgroundBorderless:!1,sessionService:!1,setupActivity:!1,showText:!1,slideEdge:!1,splitTrack:!1,spotShadowAlpha:!1,src:(t,e,a)=>(a.svgElement&&(t.obj="app",t.attr="srcCompat"),!0),stackViewStyle:!1,stateListAnimator:!1,statusBarColor:!1,strokeAlpha:!1,strokeColor:!1,strokeLineCap:!1,strokeLineJoin:!1,strokeMiterLimit:!1,strokeWidth:!1,submitBackground:!1,subtitleTextAppearance:!1,suggestionRowLayout:!1,switchStyle:!1,targetName:!1,textAppearanceListItemSecondary:!1,thumbTint:!1,thumbTintMode:!1,tileModeX:!1,tileModeY:!1,timePickerDialogTheme:!1,timePickerMode:!1,timePickerStyle:!1,tintMode:!1,titleTextAppearance:!1,toId:!1,toolbarStyle:!1,touchscreenBlocksFocus:!1,transitionGroup:!1,transitionName:!1,transitionVisibilityMode:!1,translateX:!1,translateY:!1,translationZ:!1,trimPathEnd:!1,trimPathOffset:!1,trimPathStart:!1,viewportHeight:!1,viewportWidth:!1,voiceIcon:!1,windowActivityTransitions:!1,windowAllowEnterTransitionOverlap:!1,windowAllowReturnTransitionOverlap:!1,windowClipToOutline:!1,windowContentTransitionManager:!1,windowContentTransitions:!1,windowDrawsSystemBarBackgrounds:!1,windowElevation:!1,windowEnterTransition:!1,windowExitTransition:!1,windowReenterTransition:!1,windowReturnTransition:!1,windowSharedElementEnterTransition:!1,windowSharedElementExitTransition:!1,windowSharedElementReenterTransition:!1,windowSharedElementReturnTransition:!1,windowSharedElementsUseOverlay:!1,windowTransitionBackgroundFadeDuration:!1,yearListItemTextAppearance:!1,yearListSelectorColor:!1},assign:{}},19:{android:{allowEmbedded:!1,windowSwipeToDismiss:!1},assign:{}},18:{android:{accessibilityLiveRegion:!1,addPrintersActivity:!1,advancedPrintOptionsActivity:!1,apduServiceBanner:!1,autoMirrored:!1,category:!1,fadingMode:!1,fromScene:!1,isAsciiCapable:!1,keySet:!1,requireDeviceUnlock:!1,ssp:!1,sspPattern:!1,sspPrefix:!1,startDelay:!1,supportsSwitchingToNextInputMethod:!1,targetId:!1,toScene:!1,transition:!1,transitionOrdering:!1,vendor:!1,windowTranslucentNavigation:!1,windowTranslucentStatus:!1},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(t,e)=>e<26,canRequestFilterKeyEvents:!1,canRequestTouchExplorationMode:!1,childIndicatorEnd:!1,childIndicatorStart:!1,indicatorEnd:!1,indicatorStart:!1,layoutMode:!1,mipMap:!1,mirrorForRtl:!1,requiredAccountType:!1,requiredForAllUsers:!1,restrictedAccountType:!1,windowOverscan:!1},assign:{}},16:{android:{checkedTextViewStyle:!1,format12Hour:!1,format24Hour:!1,initialKeyguardLayout:!1,labelFor:!1,layoutDirection:!1,layout_alignEnd:t=>v(t,"layout_alignRight"),layout_alignParentEnd:t=>v(t,"layout_alignParentRight"),layout_alignParentStart:t=>v(t,"layout_alignParentLeft"),layout_alignStart:t=>v(t,"layout_alignLeft"),layout_marginEnd:t=>v(t,"layout_marginRight"),layout_marginStart:t=>v(t,"layout_marginLeft"),layout_toEndOf:t=>v(t,"layout_toRightOf"),layout_toStartOf:t=>v(t,"layout_toLeftOf"),listPreferredItemPaddingEnd:t=>v(t,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:t=>v(t,"listPreferredItemPaddingLeft"),paddingEnd:t=>v(t,"paddingRight"),paddingStart:t=>v(t,"paddingLeft"),permissionFlags:!1,permissionGroupFlags:!1,presentationTheme:!1,showOnLockScreen:!1,singleUser:!1,subtypeId:!1,supportsRtl:!1,textAlignment:!1,textDirection:!1,timeZone:!1,widgetCategory:!1},assign:{}},15:{android:{fontFamily:!1,importantForAccessibility:!1,isolatedProcess:!1,keyboardLayout:!1,mediaRouteButtonStyle:!1,mediaRouteTypes:!1,parentActivityName:!1},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{elevation:"6px",textAllCaps:"false"}}}}},_={android:{amPmBackgroundColor:(t,e)=>v(t,"headerBackground",e,23),amPmTextColor:(t,e)=>v(t,"headerTextColor",e,23),animationResolution:(t,e)=>e<16,canRequestEnhancedWebAccessibility:(t,e)=>e<26,dayOfWeekBackground:(t,e)=>e<23,dayOfWeekTextAppearance:(t,e)=>e<23,directionDescriptions:(t,e)=>e<23,headerAmPmTextAppearance:(t,e)=>v(t,"headerTextColor",e,23),headerDayOfMonthTextAppearance:(t,e)=>v(t,"headerTextColor",e,23),headerMonthTextAppearance:(t,e)=>v(t,"headerTextColor",e,23),headerTimeTextAppearance:(t,e)=>v(t,"headerTextColor",e,23),headerYearTextAppearance:(t,e)=>v(t,"headerTextColor",e,23),showOnLockScreen:(t,e)=>v(t,"showForAllUsers",e,23),targetDescriptions:(t,e)=>e<23,yearListItemTextAppearance:(t,e)=>v(t,"yearListTextColor",e,23),yearListSelectorColor:(t,e)=>e<23}};var I=Object.freeze({API_ANDROID:R,DEPRECATED_ANDROID:_,getValue:function(t,e,a,n){for(const o of[R[t],R[0]]){const t=x.optionalAsString(o,`assign.${e}.${a}.${n}`);if(x.isString(t))return t}return""}});const N=/^@\+?id\//;function C(t,e,a=4){return 0===t?0:0===e?1:parseFloat(Math.max(t/(t+e),0).toPrecision(a))}function P(t){return t?t.replace(N,""):""}function L(t,e={},a={}){return Object.assign({android:e,app:a},t)}function O(t){const e={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(t&&"object"==typeof t)for(const a in e)typeof t[a]==typeof e[a]&&(e[a]=t[a]);return e}function k(t,e,a){return e&&a>=17&&c[t]||t}function M(t){return l[t]?`xmlns:${t}="${l[t]}"`:""}function D(t){let e="";for(const a in l)-1!==t.indexOf(`${a}:`)&&(e+=`\n\t${M(a)}`);return e}var B=Object.freeze({stripId:P,getHorizontalBias:function(t){const e=t.documentParent;return C(Math.max(0,t.actualRect("left","bounds")-e.box.left),Math.max(0,e.box.right-t.actualRect("right","bounds")),t.localSettings.floatPrecision)},getVerticalBias:function(t){const e=t.documentParent;return C(Math.max(0,t.actualRect("top","bounds")-e.box.top),Math.max(0,e.box.bottom-t.actualRect("bottom","bounds")),t.localSettings.floatPrecision)},createViewAttribute:L,createStyleAttribute:O,localizeString:k,getXmlNs:M,getRootNs:D}),X=squared.base.NodeList,W=squared.base.Resource;const G=squared.base.lib.enumeration,V=squared.lib.client,H=squared.lib.css,F=squared.lib.dom,z=squared.lib.math,q=squared.lib.util,U=/^attr[A-Z]/,$=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,j=/[^\w$\-_.]/g;function Y(t,e=!1){switch(t){case"justify":case"initial":case"inherit":return"";case"center":return"center_horizontal";case"start":case"left":if(e)return"";default:return t}}function Z(t){if(!t.blockWidth||t.hasWidth||t.has("maxWidth")||(t.innerWrapped||t).has("width",32,{not:"100%"})){const e=[];if(t.autoMargin.leftRight?e.push("center_horizontal"):t.autoMargin.left?e.push("right"):t.autoMargin.right&&e.push("left"),t.autoMargin.topBottom?e.push("center_vertical"):t.autoMargin.top?e.push("bottom"):t.autoMargin.bottom&&e.push("top"),e.length){const a=void 0!==t.outerWrapper||!t.blockWidth&&t.pageFlow?"layout_gravity":"gravity";for(const n of e)t.mergeGravity(a,n);return!0}}return!1}function K(t,e,a){if(t.localSettings.targetAPI>=28)t.android("lineHeight",H.formatPX(e),a);else{const n=(e-t.actualHeight)/2;n>0&&t.android("lineSpacingExtra",H.formatPX(n),a)}if(t.styleElement&&!t.has("height")&&t.cssTry("lineHeight","normal")){if(t.cssTry("whiteSpace","nowrap")){const a=(e-t.element.getBoundingClientRect().height)/2;Math.floor(a)>0&&(t.modifyBox(32,Math.round(a)),t.blockStatic||t.modifyBox(128,Math.floor(a))),t.cssFinally("whiteSpace")}t.cssFinally("lineHeight")}}function J(e,a,n,o=!0,i=!0){if(!e.is(t.IMAGE)&&0!==e.actualHeight)if(e.multiline)K(e,a,!1);else if(0===e.length&&(e.pageFlow||e.textContent.length)){let t=0,r=!0;if(e.styleElement&&!n&&!e.has("height")&&e.cssTry("lineHeight","normal"))e.cssTry("whiteSpace","nowrap")&&(t=(a-(e.element.getBoundingClientRect().height||e.actualHeight))/2,e.cssFinally("whiteSpace"),r=!1),e.cssFinally("lineHeight");else{if(n&&e.inlineText&&!e.inline)return void Q(e,a);t=(a-e.actualHeight)/2}Math.floor(t)>0&&(o&&e.modifyBox(r&&e.textElement&&!e.plainText&&!n?32:2,Math.round(t)),i&&e.modifyBox(r&&e.textElement&&!e.plainText&&!n?128:8,Math.floor(t)))}else n&&(!e.hasHeight||a>e.height)&&(e.layoutHorizontal&&void 0===e.horizontalRows||e.hasAlign(2048))&&Q(e,a)}function Q(t,e){t.inlineText&&(e+=t.contentBoxHeight,t.mergeGravity("gravity","center_vertical",!1)),e>t.height&&t.android("minHeight",H.formatPX(e))}function tt(t){t.android("maxLines","1"),t.android("ellipsize","end")}var et=e=>(class a extends e{constructor(t=0,e="0",a,n){super(t,e,a),this.renderChildren=[],this.constraint={horizontal:!1,vertical:!1,current:{}},this._namespaces=["android","app"],this._cached={},this._controlName="",this._fontSize=0,this._boxAdjustment=F.newBoxModel(),this._boxReset=F.newBoxModel(),this._containerType=0,this._localSettings={targetAPI:28,supportRTL:!1,floatPrecision:3},this.__android={},this.__app={},n&&n(this)}static documentBody(){if(void 0===a._documentBody){const t=new a(0,"0",document.body);t.hide(),t.setBounds(),a._documentBody=t}return a._documentBody}static getControlName(e){return n[t[e]]}attr(t,e,a,n=!0){return super.attr(t,e,a,n)}android(t,e,a=!0){if(e){if(this.localSettings.targetAPI<28){const n={};if(!this.supported(t,n))return"";Object.keys(n).length&&(q.isString(n.attr)&&(t=n.attr),q.isString(n.value)&&(e=n.value),"boolean"==typeof n.overwrite&&(a=n.overwrite))}this.attr("android",t,e,a)}return this.__android[t]||""}app(t,e,a=!0){return e&&this.attr("app",t,e,a),this.__app[t]||""}apply(t){const e=Object.assign({},t);super.apply(e);for(const t in e)this.formatted(`${t}="${e[t]}"`)}formatted(t,e=!0){const a=$.exec(t);a&&this.attr(a[1]||"_",a[2],a[3],e)}anchor(t,e="",a){const n=this.anchorTarget,o=n.renderParent;if(o&&n.documentId!==e)if(o.layoutConstraint){if(""===e||void 0===n.constraint.current[t]||a){e&&void 0===a&&(a="parent"===e);const o=s.constraint[t];if(o){n.app(this.localizeString(o),e,a);let i=!1;switch(t){case"left":case"right":"parent"===e&&(n.constraint.horizontal=!0);case"leftRight":case"rightLeft":i=!0;break;case"top":case"bottom":case"baseline":"parent"===e&&(n.constraint.vertical=!0)}return n.constraint.current[t]={documentId:e,horizontal:i},!0}}}else if(o.layoutRelative){return e&&void 0===a&&(a="true"===e),n.android(this.localizeString(s["true"===e?"relativeParent":"relative"][t]),e,a),!0}return!1}anchorParent(t,e,a){const n=this.anchorTarget,o=n.renderParent;if(o){const i=t===r.HORIZONTAL;if(o.layoutConstraint){if(e||!this.constraint[t])return n.anchor(i?"left":"top","parent"),n.anchor(i?"right":"bottom","parent"),n.constraint[t]=!0,void 0!==a&&n.anchorStyle(t,"packed",a,e),!0}else if(o.layoutRelative)return n.anchor(i?"left":"top","true",e),n.anchor(i?"right":"bottom","true",e),!0}return!1}anchorStyle(t,e="packed",a=0,n=!0){const o=this.anchorTarget;o.app(t===r.HORIZONTAL?"layout_constraintHorizontal_chainStyle":"layout_constraintVertical_chainStyle",e,n),o.app(t===r.HORIZONTAL?"layout_constraintHorizontal_bias":"layout_constraintVertical_bias",""+a,n)}anchorDelete(...t){const e=this.anchorTarget,a=e.renderParent;if(a)if(a.layoutConstraint)e.delete("app",...q.replaceMap(t,t=>this.localizeString(s.constraint[t])));else if(a.layoutRelative)for(const a of t)""!==e.alignSibling(a)?e.delete("android",s.relative[a],this.localizeString(s.relative[a])):s.relativeParent[a]&&e.delete("android",this.localizeString(s.relativeParent[a]))}anchorClear(){const t=this.anchorTarget,e=t.renderParent;e&&(e.layoutConstraint?t.anchorDelete(...Object.keys(s.constraint)):e.layoutRelative&&(t.anchorDelete(...Object.keys(s.relativeParent)),t.anchorDelete(...Object.keys(s.relative))))}alignParent(t){const e=this.anchorTarget,a=e.renderParent;if(a)if(a.layoutConstraint){const a=s.constraint[t];if(a)return"parent"===e.app(this.localizeString(a))||"parent"===e.app(a)}else if(a.layoutRelative){const a=s.relativeParent[t];if(a)return"true"===e.android(this.localizeString(a))||"true"===e.android(a)}return!1}alignSibling(t,e){const a=this.anchorTarget,n=a.renderParent;if(n)if(e){if(n.layoutConstraint){const n=s.constraint[t];n&&a.app(this.localizeString(n),e)}else if(n.layoutRelative){const n=s.relative[t];n&&a.android(this.localizeString(n),e)}}else if(n.layoutConstraint){const e=s.constraint[t];if(e){const t=a.app(this.localizeString(e))||a.app(e);return"parent"!==t&&t!==n.documentId?t:""}}else if(n.layoutRelative){const e=s.relative[t];if(e)return a.android(this.localizeString(e))||a.android(e)}return""}supported(t,e={}){if(this.localSettings.targetAPI<28){const a=_.android;if(a&&"function"==typeof a[t]){const n=a[t](e,this.localSettings.targetAPI,this);if(!n||Object.keys(e).length)return n}for(let a=this.localSettings.targetAPI;a<=28;a++){const n=R[a];if(n&&void 0!==n.android[t]){const a=n.android[t];if("boolean"==typeof a)return a;if("function"==typeof a)return a(e,this.localSettings.targetAPI,this)}}}return!0}combine(...t){const e=[];let a;for(const n of this._namespaces)if(0===t.length||t.includes(n)){const t=this[`__${n}`];if(t)for(const o in t){const i=("_"!==n?`${n}:`:"")+`${o}="${t[o]}"`;"id"===o?a=i:e.push(i)}}return e.sort((t,e)=>t>e?1:-1),a&&e.unshift(a),e}localizeString(t){return this.hasProcedure(G.NODE_PROCEDURE.LOCALIZATION)?k(t,this.localSettings.supportRTL,this.localSettings.targetAPI):t}hide(t){t?this.android("visibility","invisible"):super.hide()}clone(t,e=!1,n=!1){const o=new a(t||this.id,this.sessionId,this.element||void 0);if(void 0!==t?o.setControlType(this.controlName,this.containerType):(o.controlId=this.controlId,o.controlName=this.controlName,o.containerType=this.containerType),this.cloneBase(o),e){Object.assign(o.unsafe("boxReset"),this._boxReset),Object.assign(o.unsafe("boxAdjustment"),this._boxAdjustment);for(const t of this._namespaces){const e=this[`__${t}`];for(const a in e)o.attr(t,a,"android"===t&&"id"===a?o.documentId:e[a])}}return n&&(o.anchorClear(),o.anchor("left",this.documentId)&&(o.modifyBox(16),Object.assign(o.unsafe("boxAdjustment"),{marginLeft:0})),o.anchor("top",this.documentId)&&(o.modifyBox(2),Object.assign(o.unsafe("boxAdjustment"),{marginTop:0}))),o}setControlType(e,a){if(this.controlName=e,a?this.containerType=a:0===this.containerType&&(this.containerType=t.UNKNOWN),this.controlId=P(this.android("id")),""===this.controlId){let t;this.styleElement&&this.naturalElement&&("parent"===(t=(t=>t?t.trim().replace(j,"_"):"")(this.elementId||F.getNamedItem(this.element,"name")))||d.includes(t))&&(t=`_${t}`),this.controlId=q.convertWord(W.generateId("android",t||q.fromLastIndexOf(this.controlName,".").toLowerCase(),t?0:1)),this.android("id",this.documentId)}}setLayout(){const e=this.renderParent;if(e){switch(this.cssAscend("visibility",!0)){case"hidden":case"collapse":this.hide(!0)}if(this.plainText)return this.android("layout_width","wrap_content",!1),void this.android("layout_height","wrap_content",!1);const a=this.documentParent;if(this.documentBody&&(!this.hasWidth&&this.renderChildren.some(t=>t.alignParent("right"))&&this.android("layout_width","match_parent",!1),!this.hasHeight&&this.renderChildren.some(t=>t.alignParent("bottom"))&&this.android("layout_height","match_parent",!1)),""===this.android("layout_width")){let n="";if(!this.inlineStatic&&this.has("width")||this.toInt("width")>0&&""===this.cssInitial("width")){const o=this.css("width");let i=-1;if(H.isLength(o))i=this.actualWidth;else if(H.isPercent(o))if(e.is(t.GRID))n="0px",this.android("layout_columnWeight",z.truncate(parseFloat(o)/100,this.localSettings.floatPrecision));else if(this.imageElement)"100%"!==o||e.flexibleWidth||e.inlineWidth?(i=this.bounds.width,this.android("adjustViewBounds","true")):n="match_parent";else if(this.inputElement)i=this.bounds.width;else if("100%"===o){if(!this.support.maxWidth){const t=this.css("maxWidth"),o=this.parseUnit(t),r=this.absoluteParent||a;"100%"===t?!e.inlineWidth&&q.aboveRange(o,r.box.width)?n="match_parent":i=Math.min(this.actualWidth,o):o>0&&(this.blockDimension?i=Math.min(this.actualWidth,o):n=Math.ceil(o)<Math.floor(r.width)?"wrap_content":"match_parent")}""!==n||!this.documentRoot&&e.inlineWidth||(n="match_parent")}else i=this.actualWidth;i>0&&(n=H.formatPX(i))}else this.imageElement&&this.has("height")&&(n="wrap_content",this.android("adjustViewBounds","true"));""===n&&(this.textElement&&this.inlineText&&this.textEmpty&&!this.visibleStyle.backgroundImage?n=H.formatPX(this.actualWidth):(!this.blockStatic||this.inputElement||e.is(t.GRID)||(a.layoutElement&&"flex"!==this.display?!a.flexElement&&e.layoutConstraint&&this.alignParent("left")&&this.alignParent("right")&&(n=this.autoMargin.horizontal||this.ascend(!1,t=>t.has("width")||t.blockStatic).length?"0px":"match_parent"):n="match_parent"),""===n&&(this.layoutVertical&&this.layoutLinear&&e.blockWidth&&(e.layoutFrame&&this.rightAligned||this.actualChildren.some(t=>t.lineBreak))||!this.pageFlow&&this.absoluteParent===a&&this.has("left")&&this.has("right")||a.flexElement&&this.flexbox.grow>0&&e.flexibleWidth&&"column"!==a.css("flexDirection"))&&(n="match_parent"))),""===n&&this.some(t=>t.layoutConstraint&&t.some(t=>t.flexibleWidth))&&(n=H.formatPX(this.actualWidth)),this.android("layout_width",n||"wrap_content")}if(""===this.android("layout_height")){let n="";if(!this.inlineStatic&&this.has("height")||this.toInt("height")>0&&""===this.cssInitial("height")){const o=this.css("height");let i=-1;if(H.isLength(o))i=this.actualHeight;else if(H.isPercent(o)){if(this.imageElement)"100%"!==o||e.flexibleHeight||e.inlineHeight?(i=this.bounds.height,this.android("adjustViewBounds","true")):n="match_parent";else if(this.inputElement)i=this.bounds.height;else if("100%"===o){if(!this.support.maxHeight){const t=this.css("maxHeight"),o=this.parseUnit(t),r=this.absoluteParent||a;"100%"===t?!e.inlineHeight&&q.aboveRange(o,r.box.height)?n="match_parent":i=Math.min(this.actualHeight,o):o>0&&(this.blockDimension?i=Math.min(this.actualHeight,o):n=Math.ceil(o)<Math.floor(r.box.height)?"wrap_content":"match_parent")}""!==n||!this.documentRoot&&e.inlineHeight||(n="match_parent")}""===n&&this.hasHeight&&(i=this.actualHeight)}i>0&&(this.is(t.LINE)&&"HR"!==this.tagName&&this.has("height",0,{map:"initial"})&&(i+=this.borderTopWidth+this.borderBottomWidth),n=H.formatPX(i))}else this.imageElement&&this.has("width")&&(n="wrap_content",this.android("adjustViewBounds","true"));""===n&&(this.textEmpty&&!this.visibleStyle.backgroundImage?e.layoutConstraint&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||a).box.height?(n="0px",this.anchor("bottom","parent")):n=H.formatPX(this.actualHeight):("table-cell"===this.display||!this.pageFlow&&this.leftTopAxis&&this.has("top")&&this.has("bottom")||void 0===this.outerWrapper&&this.singleChild&&e.flexElement&&!e.inlineHeight&&"row"===e.css("flexDirection"))&&(n="match_parent")),this.android("layout_height",n||"wrap_content")}if(this.has("minWidth")&&this.android("minWidth",this.convertPX(this.css("minWidth")),!1),this.has("minHeight")&&this.android("minHeight",this.convertPX(this.css("minHeight"),!1),!1),this.support.maxWidth){const t=this.css("maxWidth");let e=-1;H.isLength(t,!0)?"100%"===t?this.imageElement?e=this.element.naturalWidth:this.svgElement&&(e=this.bounds.width):e=this.parseUnit(this.css("maxWidth")):!this.pageFlow&&this.textElement&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&!/\n/.test(this.textContent)&&(e=Math.ceil(this.bounds.width)),-1!==e&&(this.android("maxWidth",H.formatPX(e),!1),this.imageElement&&this.android("adjustViewBounds","true"))}if(this.support.maxHeight){const t=this.css("maxHeight");if(H.isLength(t,!0)){let e=-1;(e="100%"===t&&this.imageElement?this.element.naturalHeight:this.parseUnit(this.css("maxHeight"),!1))>=0&&(this.android("maxHeight",H.formatPX(e)),this.imageElement&&this.android("adjustViewBounds","true"))}}this.imageElement&&(this.blockWidth||this.blockHeight)&&this.android("adjustViewBounds","true")}}setAlignment(){const e=this.renderParent;if(e){const a=this.hasAlign(512),n=this.outerWrapper||this,o=n.renderParent||e;let i=Y(this.cssInitial("textAlign",!0)),r=Y(this.cssAscend("textAlign"),!0);if(this.groupParent&&!a&&""===i){const t=X.actualParent(this.renderChildren);t&&(i=Y(t.cssInitial("textAlign",!0)))}if(this.pageFlow){let s="";if(this.inlineVertical&&(o.layoutHorizontal&&!o.support.container.positionRelative||o.is(t.GRID))){const t="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",!0)){case"top":n.mergeGravity(t,"top");break;case"middle":n.mergeGravity(t,"center_vertical");break;case"bottom":n.mergeGravity(t,"bottom")}}if(this.blockWidth||((o.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))&&(this.floating?n.mergeGravity("layout_gravity",this.float):Z(n)||""===i||!this.hasWidth||this.blockStatic||"table"===this.display||n.mergeGravity("layout_gravity",i,!1)),this.rightAligned||this.renderChildren.length&&this.renderChildren.every(t=>t.rightAligned)?s="right":a&&this.groupParent&&!this.renderChildren.some(t=>t.rightAligned)&&(s="left")),e.layoutFrame&&void 0===this.innerWrapped){if(Z(this)||(this.floating&&(s=this.float),""!==s&&(e.inlineWidth||!e.documentRoot&&this.singleChild)&&e.mergeGravity("layout_gravity",s)),this.singleChild&&"table-cell"===e.display){let t;switch(e.css("verticalAlign")){case"top":t="top";break;case"bottom":t="bottom";break;default:t="center_vertical"}this.mergeGravity("layout_gravity",t)}}else o.layoutFrame&&e.blockWidth&&this.rightAligned&&this.mergeGravity("layout_gravity","right");""!==s?this.blockWidth?""!==i&&"right"!==s||(i=s):(n.blockWidth&&this!==n?this:n).mergeGravity("layout_gravity",s):Z(n.inlineWidth?n:this)&&""!==i&&(r="")}if(""!==r)if(this.blockStatic)n.mergeGravity("layout_gravity","left",!1);else if(!this.blockWidth&&this.naturalElement&&(e.layoutFrame||e.layoutVertical&&e.layoutLinear)){const t=e.inlineWidth?e:n;t.documentRoot||t.mergeGravity("layout_gravity",r,!1)}if(!(this.layoutConstraint||this.layoutFrame||this.is(t.GRID)||this.layoutElement)){let t=!1;""===i&&(i=r,t=!0),""!==i&&this.mergeGravity("gravity",i,!t)}}}mergeGravity(t,e,a=!0){if("layout_gravity"===t){const t=this.renderParent;if(t){if(function(t){switch(t){case"left":case"start":case"right":case"end":case"center_horizontal":return!0}return!1}(e)&&(this.blockWidth||t.inlineWidth&&this.singleChild||!a&&this.outerWrapper&&this.has("maxWidth")))return;if(t.layoutConstraint){if(!t.layoutHorizontal&&!this.positioned)switch(e){case"top":this.anchor("top","parent",!1);break;case"right":case"end":this.anchor("right","parent",!1);break;case"bottom":this.anchor("bottom","parent",!1);break;case"left":case"start":this.anchor("left","parent",!1);break;case"center_horizontal":this.anchorParent(r.HORIZONTAL,!0)}return}}}const n=new Set,o=this.android(t);if(""!==o)for(const t of o.split("|"))n.add(t);n.add(this.localizeString(e));let i="";switch(n.size){case 0:break;case 1:i=Y(n.values().next().value);default:function s(t){const e=`${t}_horizontal`,a=`${t}_vertical`;(n.has(t)||n.has(e)&&n.has(a))&&(n.delete(e),n.delete(a),n.add(t))}s("center"),s("fill");let t="",e="",o="";for(const i of n.values())switch(i){case"justify":case"initial":case"inherit":continue;case"left":case"start":case"right":case"end":case"center_horizontal":(""===t||a)&&(t=i);break;case"top":case"bottom":case"center_vertical":(""===e||a)&&(e=i);break;default:o+=(""!==o?"|":"")+i}i=""!==t&&""!==e?`${t}|${e}`:t||e,""!==o&&(i+=(""!==i?"|":"")+o)}""!==i&&this.android(t,i)}applyOptimizations(){const e=this.renderParent;if(e){let a=this.styleElement;this.tableElement&&(a="content-box"===this.css("boxSizing")||V.isUserAgent(8)),!a||!this.visibleStyle.borderWidth||this.is(t.LINE)||0!==this.actualChildren.length&&this.actualChildren.every(t=>!t.pageFlow&&t.absoluteParent===this)||(this.modifyBox(256,this.borderLeftWidth),this.modifyBox(64,this.borderRightWidth),this.modifyBox(32,this.borderTopWidth),this.modifyBox(128,this.borderBottomWidth)),this.alignLayout(e),this.setLineHeight(e)}}applyCustomizations(t=!0){const e=(e,a)=>{const n=e.assign[a];if(n)for(const e in n)for(const a in n[e])this.attr(e,a,n[e][a],t)};e(R[0],this.tagName),e(R[0],this.controlName);const a=R[this.localSettings.targetAPI];a&&(e(a,this.tagName),e(a,this.controlName))}setBoxSpacing(){const e=this.localSettings.targetAPI>=26,a=(t,a,n=!0)=>{const{0:o,1:i,2:r,3:s}=t,l={};let c=0,d=0,h=0;for(const e of t)if(l[e]=this._boxAdjustment[e],0===this._boxReset[e]){let t=this[e];if(0!==t){if("marginRight"===e)if(t<0)"right"===this.float&&(t=0);else if(this.inline){const e=this.documentParent.box.right;if(Math.floor(this.bounds.right)>e){!this.textElement||this.singleChild||this.alignParent("left")||tt(this);continue}this.bounds.right+t>e&&(t=Math.max(0,e-this.bounds.right))}l[e]+=t}}if("layout_margin"===a&&this.positionStatic&&!this.blockWidth&&(l[s]<0||l[i]<0))switch(this.cssAscend("textAlign")){case"center":l[s]<l[i]?(l[i]+=Math.abs(l[s]),l[i]/=2,l[s]=0):(l[s]+=Math.abs(l[i]),l[s]/=2,l[i]=0);break;case"right":case"end":l[s]<0&&(l[s]=0)}e&&n&&(l[o]===l[i]&&l[i]===l[r]&&l[r]===l[s]?c=l[o]:(l[s]===l[i]&&(d=l[s]),l[o]===l[r]&&(h=l[o]))),0!==c?this.android(a,H.formatPX(c)):(0!==d?this.android(`${a}Horizontal`,H.formatPX(d)):(0!==l[s]&&this.android(this.localizeString(`${a}Left`),H.formatPX(l[s])),0!==l[i]&&this.android(this.localizeString(`${a}Right`),H.formatPX(l[i]))),0!==h?this.android(`${a}Vertical`,H.formatPX(h)):(0!==l[o]&&this.android(`${a}Top`,H.formatPX(l[o])),0!==l[r]&&this.android(`${a}Bottom`,H.formatPX(l[r]))))};a(H.BOX_MARGIN,"layout_margin",void 0===this.renderParent||!this.renderParent.is(t.GRID)),a(H.BOX_PADDING,"padding")}extractAttributes(t){if("rtl"===this.dir&&this.android(this.length?"layoutDirection":"textDirection","rtl"),this.styleElement){const t=H.getDataSet(this.element,"android");for(const e in t){const a="attr"===e?"android":U.test(e)?q.capitalize(e.substring(4),!1):"";if(""!==a)for(const n of t[e].split(";")){const[t,e]=n.split("::");t&&e&&this.attr(a,t,e)}}}const e="\n"+"\t".repeat(t);let a="";for(const t of this.combine())a+=e+t;return a}alignLayout(e){if(this.layoutLinear){const a=this.renderChildren;if(this.layoutVertical)!e.is(t.GRID)&&a[0].textElement&&a[0].baseline&&this.android("baselineAlignedChildIndex","0");else{if(a.some(t=>t.floating)&&!a.some(t=>t.imageElement&&t.baseline))this.android("baselineAligned","false");else if(this.actualChildren.some(t=>t.textElement&&t.baseline)){const t=X.baseline(q.filterArray(a,t=>t.baseline&&!t.layoutRelative&&!t.layoutConstraint),!0)[0];t&&this.android("baselineAlignedChildIndex",""+a.indexOf(t))}if(a.length>1){const t=a[a.length-1];t.textElement&&tt(t)}}}}setLineHeight(t){const e=this.lineHeight;if(e>0){const a=this.has("lineHeight");if(this.multiline)K(this,e,a);else if(a||this.renderChildren.length||0===t.lineHeight)if(0===this.length)J(this,e,a);else if(this.renderChildren.length){const t=this.horizontalRows||[this.renderChildren],a=t.length;let n=!1;for(let o=0;o<a;o++){const i=t[o],r=t[o+1];let s=r&&(1===r.length&&r[0].multiline||r[0].lineBreakLeading);if(!s&&o<a-1){const e=t[o+1].find(t=>t.baselineActive);e&&e.has("lineHeight")&&(s=!0)}const l=i.find(t=>t.baselineActive),c=!n&&(o>0||1===a)||i[0].lineBreakLeading,d=!s&&(o<a-1||1===a);if(l){if(l.has("lineHeight")){n=!0;continue}J(l,e,!1,c,d)}else for(let t=0;t<i.length;t++){const a=i[t];0!==a.length||a.has("lineHeight")||a.multiline||a.baselineAltered||J(a,e,!1,c,d)}n=1===i.length&&i[0].multiline}}}}get documentId(){return this.controlId?`@+id/${this.controlId}`:""}get anchorTarget(){const t=this.renderParent;return t&&(t.layoutConstraint||t.layoutRelative)?this:this.outerWrapper||this}set anchored(t){this.constraint.horizontal=t,this.constraint.vertical=t}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}set containerType(t){this._containerType=t}get containerType(){if(0===this._containerType){const t=o[this.tagName]||0;0!==t&&(this._containerType=t)}return this._containerType||0}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this.is(t.FRAME)}get layoutLinear(){return this.is(t.LINEAR)}get layoutRelative(){return this.is(t.RELATIVE)}get layoutConstraint(){return this.is(t.CONSTRAINT)}get support(){if(void 0===this._cached.support){const t=this.textElement||this.imageOrSvgElement,e={container:{positionRelative:this.layoutRelative||this.layoutConstraint},maxWidth:t,maxHeight:t};return 0!==this.containerType&&(this._cached.support=e),e}return this._cached.support}get inlineWidth(){return"wrap_content"===this.android("layout_width")}get inlineHeight(){return"wrap_content"===this.android("layout_height")}get blockWidth(){return"match_parent"===this.android("layout_width")}get blockHeight(){return"match_parent"===this.android("layout_height")}get flexibleWidth(){return!!this.renderParent&&this.renderParent.layoutConstraint&&"0px"===this.android("layout_width")}get flexibleHeight(){return!!this.renderParent&&this.renderParent.layoutConstraint&&"0px"===this.android("layout_height")}get fontSize(){return 0===this._fontSize&&(this._fontSize=H.parseUnit(this.css("fontSize"))||16),this._fontSize}set localSettings(t){Object.assign(this._localSettings,t)}get localSettings(){return this._localSettings}});class at extends(et(squared.base.Node)){}class nt extends(et(squared.base.NodeGroup)){constructor(t,e,a,n){super(t,e.sessionId,void 0,n),this.depth=e.depth,this.tagName=`${e.tagName}_GROUP`,this.documentParent=e.documentParent,this.retain(a)}}var ot=squared.base.NodeList;const it=squared.base.lib.enumeration,rt=squared.lib.color,st=squared.lib.css,lt=squared.lib.dom,ct=squared.lib.math,dt=squared.lib.regex,ht=squared.lib.session,ut=squared.lib.util,pt=squared.lib.xml,mt=[r.HORIZONTAL,r.VERTICAL];function gt(t){t.some(t=>t.floating)&&t.sort((t,e)=>{if(t.floating&&!e.floating)return"left"===t.float?-1:1;if(!t.floating&&e.floating)return"left"===e.float?1:-1;if(t.floating&&e.floating){if(t.float!==e.float)return"left"===t.float?-1:1;if("right"===t.float&&"right"===e.float)return 1}return 0})}function ft(t){return t.length>1&&t.sort((t,e)=>{const a=t.node.innerWrapped||t.node,n=e.node.innerWrapped||e.node;return a.absoluteParent===n.absoluteParent?a.zIndex===n.zIndex?a.siblingIndex<n.siblingIndex?-1:1:a.zIndex<n.zIndex?-1:1:a.intersectX(n.bounds,"bounds")&&a.intersectY(n.bounds,"bounds")?a.depth===n.depth?0:a.id<n.id?-1:1:0}),t}function bt(t,e){let a;for(const n of e)n!==t&&!n.baselineAltered&&(n.bounds.height>0||n.textElement)&&(!n.textElement&&n.bounds.height>t.bounds.height?(ut.withinRange(n.linear.top,n.documentParent.box.top)&&n.anchor("top","true"),n.imageOrSvgElement&&(void 0===a||n.bounds.height>a.bounds.height)&&(a=n)):n.imageOrSvgElement&&t.imageOrSvgElement?n.bounds.height<t.bounds.height&&n.baseline&&n.anchor("baseline",t.documentId):n.inputElement||n.blockDimension&&n.has("height")?n.baseline&&t.textElement?n.anchor("bottom",t.documentId):n.baseline||"0px"===n.verticalAlign||n.anchor("baseline",t.documentId):(n.element&&0===n.length||n.layoutHorizontal&&n.renderChildren.every(t=>t.baseline))&&n.anchor("baseline",t.documentId));a&&t.anchor("baseline",a.documentId)}function yt(t,e=!1,a=!1){!t.textElement||"center"===t.cssAscend("textAlign",!0)||t.has("width")||t.multiline&&!a||!e&&-1===t.textContent.trim().indexOf(" ")||(t.android("maxLines","1"),t.android("ellipsize","end"))}function Tt(t,e,a){if(a>0){if(t.documentBody)switch(e){case 32:a-=t.marginTop;break;case 64:a-=t.marginRight;break;case 128:a-=t.marginBottom;break;case 256:a-=t.marginLeft}if(1!==t.getBox(e)[0])switch(e){case 32:a+=t.borderTopWidth-t.paddingTop;break;case 64:a+=t.borderRightWidth-t.paddingRight;break;case 128:a+=t.borderBottomWidth-t.paddingBottom;break;case 256:a+=t.borderLeftWidth-t.paddingLeft}return Math.max(a,0)}return a}function At(t,e){if("left"===e.float){if(e.marginRight<0){return t.modifyBox(16,e.actualWidth+(e.hasWidth?e.paddingLeft+e.borderLeftWidth:0)-Math.abs(e.marginRight)),t.anchor("left",e.documentId),e.modifyBox(4),!0}}else if("right"===t.float&&"right"===e.float&&e.marginLeft<0){const a=Math.abs(e.marginLeft),n=e.actualWidth;return a<n&&t.modifyBox(4,n-a),t.anchor("right",e.documentId),e.modifyBox(16),!0}return!1}function Et(t,e,a){const n=t.documentParent;if(!t.inputElement&&!t.imageOrSvgElement){const i=t.renderParent;if(i){function o(){i.groupParent&&(i.alignmentType|=64,i.unsetCache("blockStatic"))}const r=ut.capitalize(e);if(!t.blockWidth&&!n.flexElement){const e=t.cssInitial(`min${r}`,!0);if(st.isLength(e,!0)&&"0px"!==e){let i=!1;a?t.ascend(!1,t=>t.has("width")||t.blockStatic).length&&(t.android("layout_width","0px",!1),i=t.flexibleWidth,o()):(t.absoluteParent||n).hasHeight&&!t.has("height")&&(t.android("layout_height","0px",!1),i=t.flexibleHeight),i&&(t.app(`layout_constraint${r}_min`,st.formatPX(t.parseUnit(e,a))),t.css(`min${r}`,"auto"))}}const s=t.cssInitial(`max${r}`,!0);let l=0;if(st.isLength(s,!0)){let e=!1;if(a?(t.outerWrapper||t.ascend(!1,t=>t.has("width")||t.blockStatic).length)&&(t.android("layout_width",i.flexibleWidth?"match_parent":"0px",t.innerWrapped&&t.innerWrapped.naturalElement),e=t.flexibleWidth,o(),e&&!st.isPercent(s)&&(l+=t.contentBoxWidth)):(t.absoluteParent||n).hasHeight&&!t.has("height")&&(t.android("layout_height",i.flexibleHeight?"match_parent":"0px",t.innerWrapped&&t.innerWrapped.naturalElement),(e=t.flexibleHeight)&&!st.isPercent(s)&&(l+=t.contentBoxHeight)),e){const e=t.parseUnit(s,a);t.app(`layout_constraint${r}_max`,st.formatPX(e+l)),a&&t.layoutVertical&&t.each(t=>{t.textElement&&!t.has("maxWidth")&&t.css("maxWidth",st.formatPX(e))})}}}}}function St(t,e,a){const n="width"===e,o=t.cssInitial(e,!0);if(a){if(st.isLength(o,!0)){if(t.android(`layout_${e}`,st.formatPX(t.bounds[e]),!1),t.imageElement){const a=t.element;if(a&&a.naturalWidth>0&&a.naturalHeight>0){t.android(`layout_${n?"height":"width"}`,st.formatPX(t.bounds[e]/(n?a.naturalWidth:a.naturalHeight)*(n?a.naturalHeight:a.naturalWidth)),!1)}}return!0}}else if(st.isPercent(o)&&"100%"!==o){const a=parseFloat(o)/100;return t.app(`layout_constraint${ut.capitalize(e)}_percent`,ct.truncate(a,t.localSettings.floatPrecision)),t.android(`layout_${e}`,"0px"),!0}return!1}function wt(t,e=!1){return t.documentParent.has("height",2)?St(t,"height",e):!!st.isLength(t.cssInitial("height"),!0)&&(t.android("layout_height",st.formatPX(t.bounds.height),!1),!0)}function xt(e){return ut.filterArray(e,t=>"text-bottom"===t.verticalAlign||"inline-block"===t.display&&t.baseline).sort((e,a)=>e.bounds.height===a.bounds.height?e.is(t.SELECT)?1:-1:e.bounds.height>a.bounds.height?-1:1)[0]}function vt(t){return t?{anchorStart:"right",anchorEnd:"left",chainStart:"rightLeft",chainEnd:"leftRight"}:{anchorStart:"left",anchorEnd:"right",chainStart:"leftRight",chainEnd:"rightLeft"}}const Rt=(t,e=!1)=>St(t,"width",e),_t=t=>Math.max(t.actualHeight,t.lineHeight);class It extends squared.base.Controller{constructor(){super(...arguments),this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:pt.STRING_XMLENCODING},directory:{font:"res/font",image:"res/drawable"},svg:{enabled:!1},supported:{fontFormat:["truetype","opentype"],imageFormat:["jpg","jpeg","png","gif","bmp","webp","svg","ico","cur"]},unsupported:{excluded:new Set(["BR"]),tagName:new Set(["SCRIPT","STYLE","OPTION","INPUT:hidden","MAP","AREA","SOURCE"])},precision:{standardFloat:4},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.25,superscriptTopOffset:.25,legendBottomOffset:.25}}}static setConstraintDimension(t){Rt(t),wt(t),Et(t,"width",!0),Et(t,"height",!1)}static setFlexDimension(t,e){const a="width"===e,n=ut.capitalize(e),o=t.flexbox,i=o.basis;function r(i,r){t.android(`layout_${e}`,"0px"),r>0?(t.app(`layout_constraint${a?"Horizontal":"Vertical"}_weight`,ct.truncate(r,t.localSettings.floatPrecision)),""!==i&&t.css(`min${n}`,i,!0)):""!==i&&(o.shrink<1?(t.app(`layout_constraint${n}_min`,st.formatPX((1-o.shrink)*parseFloat(i))),t.app(`layout_constraint${n}_max`,i)):t.app(`layout_constraint${n}_min`,i))}st.isLength(i)?r(t.convertPX(i),t.flexbox.grow):"0%"!==i&&st.isPercent(i)?(t.app(`layout_constraint${n}_percent`,(parseFloat(i)/100).toPrecision(t.localSettings.floatPrecision)),r("",t.flexbox.grow)):o.grow>0?r(t.has(e,2)?st.formatPX(t[`actual${n}`]):"",t.flexbox.grow):a?Rt(t):wt(t),o.shrink>1&&t.app(`layout_constrained${n}`,"true"),Et(t,"width",!0),a?wt(t,!0):Rt(t,!0),Et(t,"height",!1)}optimize(t){for(const e of t)e.applyOptimizations(),e.hasProcedure(it.NODE_PROCEDURE.CUSTOMIZATION)&&e.applyCustomizations(this.userSettings.customizationsOverwritePrivilege)}finalize(t){for(const e of t)e.content=pt.replaceTab(e.content.replace(/{#0}/,D(e.content)),this.userSettings.insertSpaces)}processUnknownParent(e){const{node:a,parent:n}=e;let o=!1;if(a.has("columnCount")||a.has("columnWidth"))e.setType(t.CONSTRAINT,256,4);else if(e.some(t=>!t.pageFlow&&!t.positionAuto))e.setType(t.CONSTRAINT,32,2);else if(1===e.length){const i=a.item(0);a.documentRoot&&function(t,e){if(t.element&&e.dataset.target){const a=document.getElementById(e.dataset.target);return null!==a&&a!==t.element}return!1}(a,i)?(a.hide(),o=!0):a.naturalElement&&i.plainText?(a.clear(),a.setInlineText(!0),a.textContent=i.textContent,i.hide(),e.setType(t.TEXT)):a.autoMargin.horizontal||n.layoutConstraint&&n.flexElement&&"baseline"===a.flexbox.alignSelf&&i.textElement?e.setType(t.LINEAR,2056):e.setType(t.FRAME,2048)}else a.element&&w.hasLineBreak(a,!0)?e.setType(e.some(t=>t.positionRelative)?t.RELATIVE:t.LINEAR,16,2):this.checkConstraintFloat(e)?e.setType(t.CONSTRAINT,512):e.linearX?(this.checkFrameHorizontal(e)?e.renderType|=520:this.checkConstraintHorizontal(e)?e.setType(t.CONSTRAINT):this.checkRelativeHorizontal(e)?e.setType(t.RELATIVE):(e.setType(t.LINEAR),e.floated.size&&gt(e.children)),e.add(8)):e.linearY?e.setType(e.some(t=>t.positionRelative||!t.pageFlow&&t.positionAuto)?t.RELATIVE:t.LINEAR,16,a.documentRoot?2:0):e.every(t=>t.inlineFlow)?this.checkFrameHorizontal(e)?e.renderType|=520:e.setType(t.RELATIVE,8,2):e.some(t=>t.alignedVertically(t.previousSiblings(),t.siblingIndex>0?e.children.slice(0,t.siblingIndex):void 0,e.cleared)>0)?e.setType(e.some(t=>t.positionRelative||!t.pageFlow&&t.positionAuto)?t.RELATIVE:t.LINEAR,16,2):e.setType(t.CONSTRAINT,2);return{layout:e,next:o}}processUnknownChild(e){const a=e.node,n=a.visibleStyle;let o=!1;return a.textContent.length&&(a.inlineText||n.borderWidth)?e.setType(t.TEXT):a.blockStatic&&(n.borderWidth||n.backgroundImage||a.paddingTop+a.paddingBottom>0)?e.setType(t.LINE):!a.naturalElement||a.documentRoot||a.elementId||a.bounds.height||a.marginTop||a.marginRight||a.marginBottom||a.marginLeft||n.background||a.dataset.use?e.setType(n.background?t.TEXT:t.FRAME):(a.hide(),o=!0),{layout:e,next:o}}processTraverseHorizontal(t,e){const{node:a,parent:n,children:o}=t;return this.checkFrameHorizontal(t)?(t.node=this.createNodeGroup(a,o,n),t.renderType|=520):void 0===e||t.length!==e.length||n.hasAlign(16)?(t.node=this.createNodeGroup(a,o,n),this.processLayoutHorizontal(t)):n.hasAlign(8)||(n.alignmentType|=8),{layout:t}}processTraverseVertical(e,a){const{node:n,parent:o,children:i,floated:r,cleared:s}=e;return!r.size||!s.size||1===r.size&&e.every((t,a)=>0===a||a===e.length-1||s.has(t))?r.size&&i[0].floating?(e.node=this.createNodeGroup(n,i,o),e.renderType|=520):void 0===a||e.length!==a.length||o.hasAlign(8)?(e.node=this.createNodeGroup(n,i,o),e.setType(e.some(t=>t.positionRelative)?t.RELATIVE:t.LINEAR,16)):o.hasAlign(16)||(o.alignmentType|=16):(e.node=this.createNodeGroup(n,i,o),e.renderType|=528),{layout:e}}processLayoutHorizontal(e){let a=0;return this.checkConstraintFloat(e,!0)?e.setType(t.CONSTRAINT,512):this.checkConstraintHorizontal(e)?a=t.CONSTRAINT:this.checkRelativeHorizontal(e)?a=t.RELATIVE:(a=t.LINEAR,e.floated.size&&gt(e.children)),0!==a&&e.setType(a,8),{layout:e}}sortRenderPosition(t,e){if(t.layoutConstraint&&e.some(t=>!t.node.pageFlow)){const t=[],a=[],n=[];for(const o of e){const e=o.node;e.pageFlow?a.push(o):e.zIndex>=0?n.push(o):t.push(o)}return ft(t),ft(n),ut.concatMultiArray(t,a,n)}return e}checkFrameHorizontal(t){const[e,a]=t.partition(t=>t.floating);if(2===t.floated.size||t.cleared.size||t.some(t=>t.pageFlow&&(t.autoMargin.left||t.autoMargin.right)))return!0;if(a.length){if(t.floated.has("right"))return!0;if(t.floated.has("left")&&!t.linearX){let t=1/0;for(const e of a)t=Math.min(t,e.siblingIndex);return ut.replaceMap(e,t=>t.siblingIndex).some(e=>e<t)}}return!1}checkConstraintFloat(t,e=!1){let a=0,n=0;for(const o of t){const i=t.cleared.has(o)||o.renderExclude;if(-1!==a&&((o.floating||o.autoMargin.horizontal)&&o.positiveAxis||i)?a++:a=-1,-1!==n&&(o.has("width",32)||i)?n++:e||(n=-1),a<=0&&n<=0)return!1}return!0}checkConstraintHorizontal(t){return!!(t.node.cssInitialAny("textAlign","center","end","right")||!t.parent.hasHeight&&t.some(t=>"middle"===t.verticalAlign||"bottom"===t.verticalAlign))&&(t.singleRowAligned&&t.every(t=>t.positiveAxis||t.renderExclude))}checkRelativeHorizontal(t){const e=t.children[0].lineHeight;return(!t.every(t=>t.baseline&&!t.positionRelative&&!t.blockDimension&&t.lineHeight===e&&(t.imageElement||t.textElement&&!t.multiline))||!t.singleRowAligned)&&t.some(t=>t.textElement||!t.baseline||t.blockDimension||t.imageElement||t.positionRelative||!t.pageFlow&&t.positionAuto)}setConstraints(){for(const t of this.cache)if((t.layoutRelative||t.layoutConstraint)&&t.hasProcedure(it.NODE_PROCEDURE.CONSTRAINT)){const e=t.renderFilter(t=>!t.positioned);if(e.length)if(t.layoutRelative)this.processRelativeHorizontal(t,e);else{const[a,n]=ut.partitionArray(e,t=>t.pageFlow);if(n.length)for(const e of n)e.leftTopAxis&&(e.positionAuto||(e.hasWidth&&e.autoMargin.horizontal?e.has("left")&&e.autoMargin.right?(e.anchor("left","parent"),e.modifyBox(16,e.left)):e.has("right")&&e.autoMargin.left?(e.anchor("right","parent"),e.modifyBox(4,e.right)):(e.anchorParent(r.HORIZONTAL),e.modifyBox(16,e.left),e.modifyBox(4,e.right)):(e.has("left")&&(e.anchor("left","parent"),e.has("right")||"100%"!==e.css("width")||e.anchor("right","parent"),e.modifyBox(16,Tt(t,256,e.left))),!e.has("right")||e.has("width")&&"100%"!==e.css("width")&&e.has("left")||(e.anchor("right","parent"),e.modifyBox(4,Tt(t,64,e.right)))),e.hasHeight&&e.autoMargin.vertical?e.has("top")&&e.autoMargin.bottom?(e.anchor("top","parent"),e.modifyBox(2,e.top)):e.has("bottom")&&e.autoMargin.top?(e.anchor("bottom","parent"),e.modifyBox(8,e.bottom)):(e.anchorParent(r.VERTICAL),e.modifyBox(2,e.top),e.modifyBox(8,e.bottom)):(e.has("top")&&(e.anchor("top","parent"),e.has("bottom")||"100%"!==e.css("height")||e.anchor("bottom","parent"),e.modifyBox(2,Tt(t,32,e.top))),!e.has("bottom")||e.has("height")&&"100%"!==e.css("height")&&e.has("top")||(e.anchor("bottom","parent"),e.modifyBox(8,Tt(t,128,e.bottom)))))),e.positioned=!0;if(a.length){if(t.layoutHorizontal)this.processConstraintHorizontal(t,a);else if(t.hasAlign(256))this.processConstraintColumn(t,a);else if(a.length>1)this.processConstraintChain(t,a);else{const t=a[0];t.anchorParent(r.HORIZONTAL),t.anchorParent(r.VERTICAL),t.rightAligned?t.anchorStyle(r.HORIZONTAL,"packed",1):t.centerAligned||t.anchorStyle(r.HORIZONTAL),t.autoMargin.topBottom||t.anchorStyle(r.VERTICAL),It.setConstraintDimension(t)}this.evaluateAnchors(a)}for(const a of e)a.anchored||(a.outerWrapper?(a.constraint.horizontal&&a.anchorParent(r.HORIZONTAL),a.constraint.vertical&&a.anchorParent(r.VERTICAL)):this.addGuideline(a,t))}}}renderNodeGroup(e){const{node:a,parent:n,containerType:o,alignmentType:i,rowCount:s,columnCount:l}=e,c=L();let d=!1;switch(o){case t.LINEAR:ut.hasBit(i,16)?(c.android.orientation=r.VERTICAL,d=!0):ut.hasBit(i,8)&&(c.android.orientation=r.HORIZONTAL,d=!0);break;case t.GRID:c.android.rowCount=s?""+s:"",c.android.columnCount=l?""+l:"2",d=!0;break;case t.FRAME:case t.RELATIVE:case t.CONSTRAINT:d=!0;break;default:if(0===e.length)return this.renderNode(e)}if(d)return a.setControlType(at.getControlName(o),o),a.alignmentType|=i,a.render(!a.dataset.use&&a.dataset.target?this.application.resolveTarget(a.dataset.target):n),a.apply(c),{type:1,node:a,controlName:a.controlName}}renderNode(e){const{node:a,containerType:o,alignmentType:i}=e,s=at.getControlName(o);a.setControlType(s,o),a.alignmentType|=i;let l=e.parent,c=a.dataset.use?void 0:a.dataset.target;if(a.element)switch(a.element.tagName){case"IMG":{const o=a.element,i=a.absoluteParent||a.documentParent;let r=a.toFloat("width"),s=a.toFloat("height"),d=a.has("width",32)?r:-1;const h=a.has("height",32)?s:-1;let u,p="fitXY";if(o.srcset)if((u=st.getSrcSet(o,this.localSettings.supported.imageFormat)).length){if(u[0].actualWidth){if(-1===d||r<100){a.css("width",st.formatPX(r=u[0].actualWidth),!0);const t=this.application.resourceHandler.getImage(o.src);t&&t.width>0&&t.height>0?a.css("height",st.formatPX(s=t.height*(r/t.width)),!0):a.android("adjustViewBounds","true")}else r=l.box.width,a.android("adjustViewBounds","true");d=-1}}else u=void 0;if(a.hasResource(it.NODE_RESOURCE.IMAGE_SOURCE)){const t=this.application.resourceHandler.addImageSrc(o,"",u);""!==t&&a.android("src",`@drawable/${t}`)}if(-1!==d||-1!==h)d>=0&&(r*=i.box.width/100,d<100&&!l.layoutConstraint&&a.css("width",st.formatPX(r))),h>=0&&(s*=i.box.height/100,!(h<100)||l.layoutConstraint&&i.has("height",2)||a.css("height",st.formatPX(s)));else{switch(a.css("objectFit")){case"contain":p="centerInside";break;case"cover":p="centerCrop";break;case"scale-down":p="fitCenter";break;case"none":p="center"}(0===r&&s>0||0===s&&r>0)&&a.android("adjustViewBounds","true")}if(a.android("scaleType",p),a.baseline&&(a.android("baselineAlignBottom","true"),a.marginBottom>0&&l.layoutLinear&&l.layoutHorizontal&&a.mergeGravity("layout_gravity","bottom")),!a.pageFlow&&l===a.absoluteParent&&(a.left<0&&"hidden"===l.css("overflowX")||a.top<0&&"hidden"===l.css("overflowY"))){const o=this.application.createNode(lt.createElement(a.actualParent&&a.actualParent.element));o.setControlType(n.FRAME,t.FRAME),o.inherit(a,"base"),o.exclude({procedure:it.NODE_PROCEDURE.ALL,resource:it.NODE_RESOURCE.ALL}),o.cssApply({position:a.css("position"),zIndex:""+a.zIndex}),l.appendTry(a,o),a.parent=o,o.android("layout_width",r>0?r<i.box.width?st.formatPX(r):"match_parent":"wrap_content"),o.android("layout_height",s>0?s<i.box.height?st.formatPX(s):"match_parent":"wrap_content"),o.render(c?this.application.resolveTarget(c):l),o.saveAsInitial(),o.innerWrapped=a,a.outerWrapper=o,l.layoutConstraint||(a.modifyBox(2,a.top),a.modifyBox(16,a.left)),this.application.addLayoutTemplate(l,o,{type:1,node:o,controlName:n.FRAME}),l=o,e.parent=o,c=void 0}break}case"INPUT":{const t=a.element;switch(t.type){case"checkbox":t.checked&&a.android("checked","true");break;case"text":a.android("inputType","text");break;case"password":a.android("inputType","textPassword");break;case"range":case"time":case"number":case"datetime-local":switch(t.type){case"number":case"range":a.android("inputType","number");break;case"time":a.android("inputType","time");break;case"datetime-local":a.android("inputType","datetime")}ut.isString(t.min)&&a.android("min",t.min),ut.isString(t.max)&&a.android("max",t.max);break;case"email":case"tel":case"url":case"week":case"month":case"search":switch(t.type){case"email":a.android("inputType","textEmailAddress");break;case"tel":a.android("inputType","phone");break;case"url":a.android("inputType","textUri");break;default:a.android("inputType","text")}-1!==t.minLength&&a.android("minLength",""+t.minLength),t.maxLength>0&&a.android("maxLength",""+t.maxLength)}break}case"TEXTAREA":{const t=a.element;switch(a.android("minLines",t.rows?""+t.rows:"2"),a.css("verticalAlign")){case"middle":a.mergeGravity("gravity","center_vertical");break;case"bottom":a.mergeGravity("gravity","bottom");break;default:a.mergeGravity("gravity","top")}t.maxLength>0&&a.android("maxLength",""+t.maxLength),!a.hasWidth&&t.cols>0&&a.css("width",st.formatPX(8*t.cols),!0),a.android("hint",t.placeholder),a.android("scrollbars",r.VERTICAL),a.android("inputType","textMultiLine"),a.overflowX&&a.android("scrollHorizontally","true");break}case"LEGEND":a.hasWidth||(a.css("minWidth",st.formatPX(a.actualWidth),!0),a.css("display","inline-block",!0)),a.modifyBox(8,a.actualHeight*this.localSettings.deviations.legendBottomOffset)}switch(s){case n.TEXT:let t="";if(a.overflowX&&(t+=r.HORIZONTAL),a.overflowY&&(t+=(""!==t?"|":"")+r.VERTICAL),""!==t&&a.android("scrollbars",t),a.has("letterSpacing")&&a.android("letterSpacing",ct.truncate(a.toFloat("letterSpacing")/a.fontSize,this.localSettings.precision.standardFloat)),"justify"===a.css("textAlign")&&a.android("justificationMode","inter_word"),a.has("textShadow")){const t=/^(rgba?\(\d+, \d+, \d+(?:, [\d.]+)?\)) (-?[\d.]+[a-z]+) (-?[\d.]+[a-z]+)\s*(-?[\d.]+[a-z]+)?$/.exec(a.css("textShadow"));if(t){const e=w.addColor(rt.parseColor(t[1]));""!==e&&(a.android("shadowColor",`@color/${e}`),a.android("shadowDx",ct.truncate(2*st.parseUnit(t[2],a.fontSize))),a.android("shadowDy",ct.truncate(2*st.parseUnit(t[3],a.fontSize))),a.android("shadowRadius",t[4]?ct.truncate(Math.max(st.parseUnit(t[4],a.fontSize),1)):"1"))}}"nowrap"===a.css("whiteSpace")&&(a.android("maxLines","1"),a.android("ellipsize","end"));break;case n.BUTTON:a.hasHeight||a.android("minHeight",st.formatPX(Math.ceil(a.actualHeight))),a.mergeGravity("gravity","center_vertical");break;case n.EDIT:case n.RANGE:a.hasWidth||a.css("width",st.formatPX(a.bounds.width),!0);break;case n.LINE:a.hasHeight||a.android("layout_height",st.formatPX(a.contentBoxHeight||1))}return a.render(c?this.application.resolveTarget(c):l),{type:1,node:a,controlName:s}}renderNodeStatic(t,e,a,n,o){const i=new at(0,"0",void 0,this.afterInsertNode);return i.setControlType(t),""!==a&&i.android("layout_width",a||"wrap_content"),""!==n&&i.android("layout_height",n||"wrap_content"),e&&(i.apply(e),e.documentId=i.documentId),this.getEnclosingTag(1,{controlName:t,attributes:this.userSettings.showAttributes?i.extractAttributes(1):void 0,content:o})}renderSpace(t,e,a,o,i){return void 0===i&&(i=L()),st.isPercent(t)&&(i.android.layout_columnWeight=ct.truncate(parseFloat(t)/100,this.localSettings.precision.standardFloat),t="0px"),e&&st.isPercent(e)&&(i.android.layout_rowWeight=ct.truncate(parseFloat(e)/100,this.localSettings.precision.standardFloat),e="0px"),a&&(i.android.layout_columnSpan=""+a),o&&(i.android.layout_rowSpan=""+o),this.renderNodeStatic(n.SPACE,i,t,e||void 0)}addGuideline(t,e,a,o=!1,i=!1){const s=e.groupParent&&!t.documentParent.hasAlign(4)?e:t.documentParent,l=t.absoluteParent;mt.forEach(c=>{if(!(t.constraint[c]||a&&c!==a)){const a=c===r.HORIZONTAL,d=s.box;let h,u,p,m;if(a?(h=i?"right":"left",u=i?"left":"right",p=i?"rightLeft":"leftRight",m=i?"leftRight":"rightLeft"):(h=i?"bottom":"top",u=i?"top":"bottom",p=i?"bottomTop":"topBottom",m=i?"topBottom":"bottomTop"),ut.withinRange(t.linear[h],d[h]))return void t.anchor(h,"parent",!0);const g=t.positionStatic?t.bounds:t.linear;let f,b="layout_constraintGuide_",y=!1;if(!t.pageFlow&&st.isPercent(t.css(h)))f=parseFloat(t.css(h))/100,y=!0,b+="percent";else{if(!o&&!e.hasAlign(4)){if(e.renderChildren.some(e=>{if(e!==t&&e.constraint[c]){let n=!1;if(t.pageFlow&&e.pageFlow&&(ut.withinRange(t.linear[h],e.linear[u])?(t.anchor(p,e.documentId,!0),n=!0):ut.withinRange(t.linear[u],e.linear[h])&&(t.anchor(m,e.documentId,!0),n=!0)),n||(ut.withinRange(t.bounds[h],e.bounds[h])?(!a&&t.textElement&&t.baseline&&e.textElement&&e.baseline?t.anchor("baseline",e.documentId,!0):(t.anchor(h,e.documentId,!0),a?t.modifyBox(16,-e.marginLeft,!1):t.modifyBox(2,-e.marginTop,!1)),n=!0):ut.withinRange(t.bounds[u],e.bounds[u])?(t.anchor(u,e.documentId,!0),t.modifyBox(a?4:8),n=!0):!t.pageFlow&&e.pageFlow&&ut.withinRange(t.bounds[h]+t[h],e.bounds[h])&&(t.anchor(h,e.documentId,!0),t.modifyBox(a?16:2,t[h]),n=!0)),n)return e.constraint[c]=!0,!0}return!1}))return}if(t.positionAuto){const e=t.previousSiblings();if(e.length&&!t.alignedVertically(e)){const n=e.pop();if(n.renderParent===t.renderParent)return t.anchor(a?"rightLeft":"top",n.documentId,!0),void(t.constraint[c]=n.constraint[c])}}if(o){const t=Math.abs(g[h]-d[h])/d[a?"width":"height"];f=parseFloat(ct.truncate(i?1-t:t,this.localSettings.precision.standardFloat)),y=!0,b+="percent"}else f=g[h]-d[i?u:h],a||s.groupParent||s===l||1!==l.getBox(2)[0]||(f-=l.marginTop),b+="begin"}const T=e.constraint.guideline||{};if(t.pageFlow){if(t.inlineVertical){const e=ut.convertFloat(t.verticalAlign);e<0&&(f+=e)}}else if(t.parent===s.outerWrapper)f+=s[i?a?"paddingRight":"paddingBottom":a?"paddingLeft":"paddingTop"];else if(l===t.documentParent){let t;f=Tt(s,t=a?i?64:256:i?128:32,f)}if(!a&&t.marginTop<0&&(f-=t.marginTop,t.modifyBox(2)),t.constraint[c]=!0,f<=0){if(t.anchor(h,"parent",!0),f<0){const e=t.innerWrapped;if(e&&!e.pageFlow){let t=0;switch(h){case"top":t=2;break;case"left":t=16;break;case"bottom":t=8;break;case"right":t=4}e.modifyBox(t,f)}}}else if(a&&f+g.width>=d.right&&s.has("width")&&!t.has("right")||!a&&f+g.height>=d.bottom&&s.has("height")&&!t.has("bottom"))t.anchor(u,"parent",!0);else{const o=ut.optionalAsObject(T,`${c}.${b}.${h}`);if(o)for(const e in o)if(parseInt(o[e])===f)return t.anchor(h,e,!0),void t.anchorDelete(u);const i=L(void 0,{orientation:a?r.VERTICAL:r.HORIZONTAL},{[b]:y?""+f:st.formatPX(f)});this.addAfterOutsideTemplate(t.id,this.renderNodeStatic(n.GUIDELINE,i));const s=i.documentId;t.anchor(h,s,!0),t.anchorDelete(u),f>0&&(ut.assignEmptyValue(T,c,b,h,s,""+f),e.constraint.guideline=T)}}})}addBarrier(t,e){const a=L(void 0,void 0,{barrierDirection:e,constraint_referenced_ids:ut.objectMap(t,t=>P(t.documentId)).join(",")});return this.addAfterOutsideTemplate(t[t.length-1].id,this.renderNodeStatic(n.BARRIER,a)),a.documentId}evaluateAnchors(t){const e=[],a=[];for(const n of t)if(n.constraint.horizontal&&e.push(n),n.constraint.vertical&&a.push(n),n.alignParent("top")){let e=n;for(;;){const a=e.alignSibling("bottomTop");if(""===a){if(e!==n){const t=this.addBarrier([e],"bottom");e.anchor("bottomTop",t)}break}{const o=t.find(t=>t.documentId===a);if(!o||o.alignSibling("topBottom")!==e.documentId)break;if(o.alignParent("bottom")){n.anchorStyle(r.VERTICAL,"packed",0,!1);break}e=o}}}let n=-1;for(;++n<t.length;){const o=t[n];if(!o.constraint.horizontal)for(const t in o.constraint.current){const a=o.constraint.current[t];if(a.horizontal&&e.some(t=>t.documentId===a.documentId)){o.constraint.horizontal=!0,e.push(o),n=-1;break}}if(!o.constraint.vertical)for(const t in o.constraint.current){const e=o.constraint.current[t];if(!e.horizontal&&a.some(t=>t.documentId===e.documentId)){o.constraint.vertical=!0,a.push(o),n=-1;break}}}}createNodeGroup(t,e,a,n){const o=new nt(this.cache.nextId,t,e,this.afterInsertNode);return a?(a.appendTry(n||t,o),o.init()):o.siblingIndex=t.siblingIndex,this.cache.append(o),o}createNodeWrapper(t,e,a,n,o){const i=this.application.createNode(lt.createElement(t.actualParent&&t.actualParent.element,t.block?"div":"span"),!0,e,a);if(t.documentRoot&&(i.documentRoot=!0,t.documentRoot=!1),i.inherit(t,"base","alignment"),n&&i.setControlType(n,o),i.exclude({section:it.APP_SECTION.ALL,procedure:it.NODE_PROCEDURE.CUSTOMIZATION,resource:it.NODE_RESOURCE.BOX_STYLE|it.NODE_RESOURCE.ASSET}),e.appendTry(t,i),t.parent=i,t.outerWrapper&&(i.outerWrapper=t.outerWrapper,t.outerWrapper.innerWrapped=i),t.renderParent){const e=t.renderParent.renderTemplates;if(e)for(let a=0;a<e.length;a++)if(e[a].node===t){t.renderChildren.splice(a,1),e.splice(a,1);break}t.rendered=!1,t.renderParent=void 0}return i.saveAsInitial(),i.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),i.innerWrapped=t,t.outerWrapper=i,i}processRelativeHorizontal(t,e){const a=[],n=[];let o=!1,i=!1;if(t.hasAlign(16)){let t;for(let n=0;n<e.length;n++){const o=e[n];void 0===t?o.anchor("top","true"):o.anchor("topBottom",t.documentId),o.pageFlow?(a.push([o]),t=o):i=!0}}else{const o=(()=>{const a=t.renderParent;if(a){if(a.overflowX)return a.box.width;if(a.groupParent){let a=-1/0;for(const n of t.documentParent.actualChildren)"left"===n.float&&n.linear.right>a&&!e.includes(n)&&(a=n.linear.right);if(a!==-1/0)for(const n of t.documentParent.actualChildren)if(n.linear.right===a&&e.some(t=>ut.withinRange(t.linear.left,a)&&t.intersectY(n.linear)))return t.box.right-a}else if(a===t.documentParent&&a.blockStatic&&t.naturalElement&&t.inlineStatic)return a.box.width-(t.linear.left-a.box.left)}return t.box.width-(t.getBox(256)[1]+t.getBox(64)[1])})(),r="nowrap"!==t.css("whiteSpace"),s=ot.linearData(e,!0).cleared,l=t.blockDimension?t.toFloat("textIndent"):0;let c,d=0;ut.partitionArray(e,t=>"right"!==t.float).forEach((e,h)=>{if(0===e.length)return;const u=0===h;let p,m,g=!0;if(u){const t=ot.actualParent(e);t&&t.cssInitialAny("textAlign","right","end")?(g=!1,e[e.length-1].anchor(p="right","true")):p="left",gt(e),m=a}else p="right",m=n;let f,b=!1;for(let a=0;a<e.length;a++){const n=e[a];let h=u&&g?"leftRight":"rightLeft";if(!n.pageFlow){f?(n.anchor(h,f.documentId),n.anchor("top",f.documentId)):(n.anchor(p,"true"),n.anchor("top","true")),i=!0;continue}let y=n.bounds;if(n.naturalElement&&n.inlineText&&!n.has("width")){const t=ht.getRangeClientRect(n.element,n.sessionId);(t.numberOfLines||t.width<n.box.width)&&(y=t,n.multiline||(n.multiline=!!t.numberOfLines&&t.numberOfLines>0))}let T=n.multiline;T&&Math.floor(y.width)<=o&&(T=!1);let A,E=!0;if(n.autoMargin.leftRight?n.anchor("centerHorizontal","true"):n.autoMargin.left?n.anchor("right","true"):n.autoMargin.right?n.anchor("left","true"):E=!1,void 0===f)g?(E||n.anchor(p,"true"),m.push([n])):m.push([]);else{const e=m[m.length-1];let i=0,u=0;const S=()=>(u=d+n.marginLeft,c&&!e.includes(c)&&(u+=c.linear.width),void 0!==c&&n.plainText&&!T&&e.includes(c)&&!s.has(n)||(u+=y.width),n.marginRight<0&&(u+=n.marginRight),i=o,l<0?i+=m.length>1?0:l:l>0&&(i-=1===m.length?l:0),n.styleElement&&n.inlineStatic&&(u-=n.paddingLeft+n.paddingRight),!0);At(n,f)&&(h="");const x=n.groupParent&&!n.hasAlign(128);let v=!1;A=!x&&n.inlineVertical&&f.inlineVertical?lt.getElementsBetweenSiblings(f.element,n.element,!0):void 0;const R=()=>{if(f.textElement){if(1===a&&void 0===A&&n.plainText&&!dt.CHAR.TRAILINGSPACE.test(f.textContent)&&!dt.CHAR.LEADINGSPACE.test(n.textContent))return v=!0,!1;if(r&&b&&(f.bounds.width>=o||w.hasLineBreak(f,!1,!0)))return!0}if(f.floating&&d<o&&f.alignParent("left"))return!1;if(r){if(S(),u>i)return f&&f.textElement&&yt(f,!1,b),!0;if(ut.aboveRange(u,i)&&!n.alignParent(p)&&yt(n,!0,T),T&&w.hasLineBreak(n)||n.preserveWhiteSpace&&dt.CHAR.LEADINGNEWLINE.test(n.textContent))return!0}return!1},_=n.textElement&&R();_||x||ut.aboveRange(n.linear.top,f.linear.bottom)&&(n.blockStatic||n.floating&&f.float===n.float)||f.autoMargin.horizontal||s.has(n)||!n.textElement&&S()&&Math.floor(u)>i||!n.floating&&(f.blockStatic||n.previousSiblings().some(t=>t.lineBreak||t.excluded&&t.blockStatic)||A&&A.some(e=>ht.causesLineBreak(e,t.sessionId)))?(g?(c&&n.linear.bottom<=c.bounds.bottom?E||n.anchor(h,c.documentId):(E||n.anchor(p,"true"),c=void 0),E=!0):(c&&n.linear.bottom>c.bounds.bottom&&(c=void 0),f.anchor(p,"true")),_&&T&&yt(f,r),d=Math.min(0,_&&!f.multiline&&T&&!s.has(n)?n.linear.right-t.box.right:0),m.push([n])):(""!==h&&(g?E||(n.anchor(h,f.documentId),E=!0):f.anchor(h,n.documentId)),f.floating||v||!n.multiline||n.has("width")||(n.multiline=!1,T=!1),e.push(n))}"left"===n.float&&u&&(c?ut.aboveRange(n.linear.bottom,c.linear.bottom)&&(c=n):c=n);let S=0;if(A&&!A.some(t=>!!ht.getElementAsNode(t,n.sessionId)||ht.causesLineBreak(t,n.sessionId))){const t=ht.getRangeClientRect(A[0],"0");if(!t.numberOfLines){const e=A.length>1?ht.getRangeClientRect(A[A.length-1],"0"):void 0;void 0!==e&&e.numberOfLines||(S=e?t.left-e.right:t.width)}}d+=S+n.marginLeft+y.width+n.marginRight,f=n,b=T}})}if((a.length>1||n.length>1)&&(o=!0),[a,n].forEach(e=>{let a;for(let n=0;n<e.length;n++){const i=e[n];let r;if(i.length>1){let e;(r=ot.baseline(i)[0])&&(e=xt(i))&&(r!==e&&(e.actualHeight>r.actualHeight||e.companion&&e.companion.actualHeight>r.actualHeight)?r.anchor("bottom",e.documentId):e=void 0);const a=[];let s=0===n?"true":r?r.documentId:"",l=0,c=null;for(const n of i)if(n.baseline)n!==r&&(e&&n.inputElement?n!==e&&n.anchor("bottom",e.documentId):a.push(n));else if(n.inlineVertical){const d=n!==r&&r;switch(n.verticalAlign){case"text-top":if(null===c&&(c=ot.baseline(i,!0)[0]),c&&n!==c){n.anchor("top",c.documentId);break}break;case"super":n.baselineAltered||n.modifyBox(2,-1*Math.ceil(n.fontSize*this.localSettings.deviations.superscriptTopOffset));case"top":""!==s&&s!==n.documentId?n.anchor("top",s):d&&n.anchor("top",d.documentId);break;case"middle":const r=Math.max(n.actualHeight,n.lineHeight);if(o){if(d){const t=Math.max(d.actualHeight,d.lineHeight);r<t&&(n.anchor("top",d.documentId),n.modifyBox(2,Math.round((t-r)/2)))}}else n.anchor("centerVertical","true"),n.imageElement&&(l=Math.max(r,l));break;case"text-bottom":e?n!==e&&n.anchor("bottom",e.documentId):(null===c&&(c=ot.baseline(i,!0)[0]),c&&c!==n&&n.anchor("bottom",c.documentId));break;case"sub":n.baselineAltered||n.modifyBox(8,-1*Math.ceil(n.fontSize*this.localSettings.deviations.subscriptBottomOffset));case"bottom":""===s||ut.withinRange(t.bounds.height,n.bounds.height)||(t.hasHeight||"true"!==s||(o?d&&(s=d.documentId):t.css("height",st.formatPX(t.bounds.height),!0)),n.anchor("bottom",s));break;default:n.baselineAltered||a.push(n)}}if(r)r.baselineActive=!0,a.length&&bt(r,a),r.textElement&&l>r.actualHeight&&(r.anchor("centerVertical","true"),r=void 0);else if(a.length&&a.length<i.length&&(e=xt(i)))for(const t of a)t.baseline&&!t.multiline&&t.anchor("bottom",e.documentId);yt(i[i.length-1])}else(r=i[0]).baselineActive=!0;if(n>0){if(void 0===a){const t=e[n-1];a=t.find(t=>!t.floating)||t[0];let o=!1;for(const e of t)o||e!==a?e.linear.bottom>=a.linear.bottom&&(!e.floating||a.floating)&&(a=e):o=!0}for(const t of i)""===t.alignSibling("baseline")&&t.anchor("topBottom",a.documentId)}a=r}}),o&&(t.horizontalRows=ut.concatArray(a,n)),i){const e=t.renderChildren,a=t.renderTemplates,n=[];for(let t=0;t<e.length;t++)e[t].pageFlow||(n.push(a[t]),e.splice(t,1),a.splice(t--,1));for(const t of n)e.push(t.node),a.push(t)}}processConstraintHorizontal(t,e){const a=ot.baseline(e)[0],n=ot.baseline(e,!0)[0],o=t.hasAlign(1024),i=xt(e),{anchorStart:s,anchorEnd:l,chainStart:c,chainEnd:d}=vt(o);let h,u,p=0;switch(t.cssInitial("textAlign")){case"center":p=.5;break;case"right":case"end":o||(p=1)}function m(t){t.anchorParent(r.VERTICAL),t.anchorStyle(r.VERTICAL)}for(let o=0;o<e.length;o++){const g=e[o];if(0===o)g.anchor(s,"parent"),g.anchorStyle(r.HORIZONTAL,"packed",p);else{const t=e[o-1];t.anchor(d,g.documentId),g.anchor(c,t.documentId),o===e.length-1&&g.anchor(l,"parent")}if(g!==a){if(g.inlineVertical){(void 0===h||_t(g)>_t(h))&&(h=g);let o=!1;switch(g.verticalAlign){case"text-top":n&&g!==n?g.anchor("top",n.documentId):o=!0;break;case"middle":a&&!a.textElement||i?o=!0:g.anchorParent(r.VERTICAL);break;case"text-bottom":if(n&&g!==n){g!==i?g.anchor("bottom",n.documentId):i&&(o=!0);break}case"bottom":if(void 0===u)for(let t=0;t<e.length;t++){const a=e[t];!a.baseline&&(void 0===u||a.linear.bottom>u.linear.bottom)&&(u=a)}g===u?o=!0:g.anchor("bottom","parent");break;case"baseline":a&&g.anchor("baseline",a.documentId);break;case"sub":case"super":o=!0;break;default:m(g)}o&&(m(g),g.modifyBox(2,g.linear.top-t.box.top),g.baselineAltered=!0)}else a&&g.plainText&&g.baseline?g.anchor("baseline",a.documentId):m(g);g.anchored=!0}else a.baselineActive=!0;It.setConstraintDimension(g)}if(a){if(h&&h!==a&&a.textElement&&_t(h)>_t(a))switch(h.verticalAlign){case"middle":a.anchorParent(r.VERTICAL,!0);break;case"baseline":a.anchor("baseline",h.documentId);break;case"bottom":case"text-bottom":a.anchor("bottom",h.documentId);break;case"sub":h.textElement||(a.anchor("bottom",h.documentId),a.modifyBox(8,-1*Math.ceil(a.fontSize*this.localSettings.deviations.subscriptBottomOffset)));break;case"super":h.textElement||(a.anchor("bottom",h.documentId),a.modifyBox(2,-1*Math.ceil(a.fontSize*this.localSettings.deviations.superscriptTopOffset)))}else m(a);a.anchored=!0}}processConstraintColumn(t,e){let a=[];const n=[a];for(let t=0;t<e.length;t++){const o=e[t];"all"===o.css("columnSpan")?(a.length?n.push([o]):a.push(o),n.push(a=[])):a.push(o)}0===a.length&&n.pop();const o=t.toFloat("columnGap")||st.getFontSize(document.body)||16,i=t.toFloat("columnWidth"),s=t.toInt("columnCount"),l=i>0?Math.floor(t.actualWidth/i):1/0;let c;function d(t){const e=t[0],a=t[t.length-1];for(let e=0;e<t.length;e++){const a=t[e];e>0&&a.anchor("leftRight",t[e-1].documentId),e<t.length-1&&a.anchor("rightLeft",t[e+1].documentId),a.anchored=!0}e.anchor("left","parent"),a.anchor("right","parent"),e.anchorStyle(r.HORIZONTAL,"spread_inside")}function h(t,e){const a=t[0][0];for(let n=0;n<t.length;n++){const o=t[n];for(let i=0;i<o.length;i++){const s=o[i];if(0===i?0===n?c?(c.anchor("bottomTop",s.documentId),s.anchor("topBottom",c.documentId)):(s.anchor("top","parent"),s.anchorStyle(r.VERTICAL)):(s.anchor("top",a.documentId),s.anchorStyle(r.VERTICAL),s.modifyBox(2)):(o[i-1].anchor("bottomTop",s.documentId),s.anchor("topBottom",o[i-1].documentId)),i>0&&s.anchor("left",o[0].documentId),i===o.length-1){if(e)s.anchor("bottom","parent");else if(n>0&&!s.multiline){const e=t[n-1][i];e&&!e.multiline&&ut.withinRange(s.bounds.top,e.bounds.top)&&(s.anchor("top",e.documentId),s.modifyBox(2,-e.marginTop))}s.modifyBox(8)}s.anchored=!0,s.positioned=!0}}}for(let e=0;e<n.length;e++){const a=n[e],u=a[0];if(1===a.length)0===e?(u.anchor("top","parent"),u.anchorStyle(r.VERTICAL)):c&&(c.anchor("bottomTop",u.documentId),u.anchor("topBottom",c.documentId)),t.rightAligned?t.anchor("right","parent"):t.centerAligned?t.anchorParent(r.HORIZONTAL):t.anchor("left","parent"),e===n.length-1?u.anchor("bottom","parent"):c=a[0];else{const r=[];let u=Math.min(a.length,l,s||1/0),p=0;if(u>1){let e=a.length>=u?Math.ceil(a.length/u):1;const n=Math.floor(a.reduce((t,e)=>t+e.bounds.height,0)/u);let i=e>1&&a.length%u!=0?a.length-u:1/0,s=0;for(let t=0,o=0,l=0;t<a.length;t++,l++){const c=a[t],d=l%e==0;o<u-1&&(d||i<=0||t>0&&(a[t-1].bounds.height>=n||r[o].length&&a.length-t+1==u-o&&a[t-1].bounds.height>a[t+1].bounds.height))&&(t>0&&(o++,d?i--:i++),void 0===r[o]&&(r[o]=[]),l=0),r[o].push(c),c.length&&(s+=ct.maxArray(ut.objectMap(c.children,t=>t.marginLeft+t.marginRight))),t>0&&/H\d/.test(c.tagName)?1===r[o].length&&t===a.length-2?(u--,i=0):(l+1)%e==0&&a.length-t>u&&!a[t+1].multiline&&a[t+1].bounds.height<n&&(r[o].push(a[++t]),l=-1):a.length-t==u-o&&i!==1/0&&(e=1)}p=u>1?Math.max((s+o*(u-1))/t.box.width/u,.01):0}else r.push(a);const m=[];for(let t=0;t<r.length;t++){m.push(r[t][0]);for(const e of r[t])e.android("layout_width","0px"),e.app("layout_constraintWidth_percent",ct.truncate(1/u-p,this.localSettings.precision.standardFloat))}const g=[].fill(0);for(let e=0;e<r.length;e++){const a=r[e];if(e<r.length-1&&a.length>1){const t=a[a.length-1];/H\d/.test(t.tagName)&&(a.pop(),m[e+1]=t,r[e+1].unshift(t),t.modifyBox(2))}const n=[];for(let t=0;t<a.length;t++){const o=a[t];o.naturalElement?n.push(o.element.cloneNode(!0)):g[e]+=o.linear.height}if(n.length){const a=lt.createStyleElement(document.body,"div",{width:st.formatPX(i||t.box.width/u),visibility:"hidden"});for(const t of n)a.appendChild(t);g[e]+=a.getBoundingClientRect().height,document.body.removeChild(a)}}for(let t=0;t<m.length;t++){const e=m[t];t>0&&e.modifyBox(16,o)}d(m),h(r,e===n.length-1);let f=0;for(let t=0;t<g.length;t++)g[t]>=f&&(c=r[t].pop(),f=g[t])}}}processConstraintChain(t,e){const a=ot.actualParent(e)||t,n=ot.partitionRows(e),o=t.hasAlign(512);n.length>1&&(t.horizontalRows=n),!t.hasWidth&&e.some(t=>t.has("width",32))&&t.android("layout_width","match_parent");const i=[];let s=!1;for(let t=0;t<n.length;t++){const e=n[t],l=n[t-1],[c,d]=ut.partitionArray(e,t=>"right"===t.float||t.autoMargin.left);let h,u;if([d,c].forEach(e=>{if(0===e.length)return;const d=e===c,{anchorStart:p,anchorEnd:m,chainStart:g,chainEnd:f}=vt(d),b=e[0],y=e[e.length-1];b.anchor(p,"parent"),o||"center"!==a.css("textAlign")?e.length>1&&(d?y.anchorStyle(r.HORIZONTAL,"packed",1):b.anchorStyle(r.HORIZONTAL)):b.anchorStyle(r.HORIZONTAL,"spread"),(e.length>1||y.autoMargin.leftRight)&&y.anchor(m,"parent");for(let c=0;c<e.length;c++){const T=e[c],A=e[c-1],E=e[c+1];if(0===t?1===n.length?(T.anchorParent(r.VERTICAL),T.autoMargin.topBottom||T.anchorStyle(r.VERTICAL,"packed",T.autoMargin.top?1:0)):T.anchor("top","parent"):s||t!==n.length-1||T.anchor("bottom","parent"),T.autoMargin.leftRight?T.anchorParent(r.HORIZONTAL):(A&&T.anchor(g,A.documentId),E&&T.anchor(f,E.documentId)),It.setConstraintDimension(T),o&&t>0&&0===c){let t=!1;for(const e of i)if(Math.ceil(T.linear.top)<Math.floor(e.linear.bottom)){t=!0;break}if(t){h=l[l.length-1];for(let t=i.length-2;t>=0;t--){const e=i[t];if(e.linear.bottom>h.linear.bottom){if(d&&Math.ceil(e.linear[m])-Math.floor(a.box[m])<T.linear.width)continue;const n=i[t+1];T.anchor(p,n.documentId,!0),d?T.modifyBox(4,-n.marginRight,!1):T.modifyBox(16,-n.marginLeft,!1),b.anchorDelete(f),y.anchorDelete(m),b.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),void 0===u&&(u=T,s=!0);break}}}}}}),o&&ut.concatMultiArray(i,d,c),t>0){if(void 0===h){h=l[0];for(let t=1;t<l.length;t++)l[t].linear.bottom>=h.linear.bottom&&(h=l[t])}if(void 0===u){u=e[0];for(let t=1;t<e.length;t++)e[t].linear.bottom>=u.linear.bottom&&(u=e[t]);s=!1}u.anchor("topBottom",h.documentId),h.anchor("bottomTop",u.documentId);for(const t of e)t!==u&&(t.anchor("top",u.documentId),t.autoMargin.topBottom||t.anchorStyle(r.VERTICAL,"packed",t.autoMargin.top?1:0),t.modifyBox(2,-1*u.marginTop))}}this.evaluateAnchors(e)}get userSettings(){return this.application.userSettings}get containerTypeHorizontal(){return{containerType:t.LINEAR,alignmentType:8,renderType:0}}get containerTypeVertical(){return{containerType:t.LINEAR,alignmentType:16,renderType:0}}get containerTypeVerticalMargin(){return{containerType:t.FRAME,alignmentType:256,renderType:0}}get containerTypePercent(){return{containerType:t.CONSTRAINT,alignmentType:8,renderType:0}}get afterInsertNode(){const t=this.userSettings;return e=>{e.localSettings={targetAPI:void 0!==t.targetAPI?t.targetAPI:28,supportRTL:void 0===t.supportRTL||t.supportRTL,floatPrecision:this.localSettings.precision.standardFloat}}}}class Nt extends squared.base.ExtensionManager{}var Ct={resources:{">":{color:{"@":["name"],"~":!0}}}},Pt={resources:{">":{dimen:{"@":["name"],"~":!0}}}},Lt={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},Ot={resources:{">":{string:{"@":["name"],"~":!0}}}},kt={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":!0}}}}}},Mt={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":!0}}}}}};const Dt=squared.lib.math,Bt=squared.lib.util,Xt=squared.lib.xml,Wt=/([">])(-?[\d.]+)px(["<])/g,Gt=/^(.+)\/(.+?\.\w+)$/;function Vt(t){const e=[];for(let a=0;a<t.length;a+=3)e.push({pathname:t[a+1],filename:t[a+2],content:t[a]});return e}function Ht(t){const e=[];for(let a=0;a<t.length;a+=3)e.push({pathname:t[a+1],filename:t[a+2],content:"",uri:t[a]});return e}function Ft(t,e=160,a="dp",n=!1,o=3){return"dp"===a?t.replace(Wt,(t,...a)=>a[0]+function(t,e=160,a=!1,n=3){let o=parseFloat(t);return isNaN(o)?"0dp":160!==e?(0!=(o/=e/160)&&o>-1&&o<1?o.toPrecision(n):Dt.truncate(o,n-1))+(a?"sp":"dp"):Math.round(o)+(a?"sp":"dp")}(a[1],e,n,o)+a[2]):t}const zt=(t,e,a)=>({pathname:t,filename:e,content:a}),qt=(t,e)=>(""+t).toLowerCase()>=(""+e).toLowerCase()?1:-1;class Ut extends squared.base.File{saveAllToDisk(t){const e=[];for(let a=0;a<t.length;a++)e.push(zt(t[a].pathname,0===a?this.userSettings.outputMainFileName:`${t[a].filename}.xml`,t[a].content));this.saveToDisk(Bt.concatMultiArray(e,Vt(this.resourceStringToXml()),Vt(this.resourceStringArrayToXml()),Vt(this.resourceFontToXml()),Vt(this.resourceColorToXml()),Vt(this.resourceDimenToXml()),Vt(this.resourceStyleToXml()),Vt(this.resourceDrawableToXml()),Ht(this.resourceDrawableImageToXml()),Vt(this.resourceAnimToXml())),this.userSettings.manifestLabelAppName)}layoutAllToXml(t,e=!1){const a={},n=[];for(let o=0;o<t.length;o++){const i=t[o];a[i.filename]=[i.content],e&&n.push(zt(i.pathname,0===o?this.userSettings.outputMainFileName:`${i.filename}.xml`,i.content))}return e&&this.saveToDisk(n,this.userSettings.manifestLabelAppName),a}resourceAllToXml(t=!1){const e={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),drawableImage:this.resourceDrawableImageToXml(),anim:this.resourceAnimToXml()};for(const t in e)0===e[t].length&&delete e[t];if(t){const t=[];for(const a in e)Bt.concatArray(t,"image"===a?Ht(e[a]):Vt(e[a]));this.saveToDisk(t,this.userSettings.manifestLabelAppName)}return e}resourceStringToXml(t=!1){const e=[],a=[{string:[]}];this.stored.strings.has("app_name")||a[0].string.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[t,e]of Array.from(this.stored.strings.entries()).sort(qt))a[0].string.push({name:t,innerText:e});return e.push(Xt.replaceTab(Xt.applyTemplate("resources",Ot,a),this.userSettings.insertSpaces),"res/values","strings.xml"),t&&this.saveToDisk(Vt(e),this.userSettings.manifestLabelAppName),e}resourceStringArrayToXml(t=!1){const e=[];if(this.stored.arrays.size){const a=[{"string-array":[]}];for(const[t,e]of Array.from(this.stored.arrays.entries()).sort())a[0]["string-array"].push({name:t,item:Bt.objectMap(e,t=>({innerText:t}))});e.push(Xt.replaceTab(Xt.applyTemplate("resources",kt,a),this.userSettings.insertSpaces),"res/values","string_arrays.xml"),t&&this.saveToDisk(Vt(e),this.userSettings.manifestLabelAppName)}return e}resourceFontToXml(t=!1){const e=[];if(this.stored.fonts.size){const a=this.userSettings,n=l[a.targetAPI<26?"app":"android"],o=this.resource.application.controllerHandler.localSettings.directory.font;for(const[t,i]of Array.from(this.stored.fonts.entries()).sort()){const r=[{"xmlns:android":n,font:[]}];for(const e in i){const[a,n,s]=e.split("|");let l=t;"normal"===n?l+="400"===s?"_normal":`_${i[e]}`:(l+=`_${n}`,"400"!==s&&(l+=`_${i[e]}`)),r[0].font.push({font:`@font/${l}`,fontStyle:n,fontWeight:s});const c=this.resource.getFont(a,n,s);c&&c.srcUrl&&this.addAsset({pathname:o,filename:l+"."+Bt.fromLastIndexOf(c.srcUrl,".").toLowerCase(),uri:c.srcUrl})}let s=Xt.replaceTab(Xt.applyTemplate("font-family",Lt,r),a.insertSpaces);a.targetAPI<26&&(s=s.replace(/\s+android:/g," app:")),e.push(s,o,`${t}.xml`)}t&&this.saveToDisk(Vt(e),a.manifestLabelAppName)}return e}resourceColorToXml(t=!1){const e=[];if(this.stored.colors.size){const a=[{color:[]}];for(const[t,e]of Array.from(this.stored.colors.entries()).sort())a[0].color.push({name:e,innerText:t});e.push(Xt.replaceTab(Xt.applyTemplate("resources",Ct,a),this.userSettings.insertSpaces),"res/values","colors.xml"),t&&this.saveToDisk(Vt(e),this.userSettings.manifestLabelAppName)}return e}resourceStyleToXml(t=!1){const e=this.userSettings,a=[],n=[];if(this.stored.styles.size){const t=[{style:[]}];for(const e of Array.from(this.stored.styles.values()).sort((t,e)=>(""+t.name).toLowerCase()>=(""+e.name).toLowerCase()?1:-1))if(Array.isArray(e.items)){const a=[];for(const t of e.items.sort((t,e)=>t.key>=e.key?1:-1))a.push({name:t.key,innerText:t.value});t[0].style.push({name:e.name,parent:e.parent,item:a})}n.push({data:t,pathname:"res/values",filename:"styles.xml"})}if(this.stored.themes.size){const t={};for(const[a,o]of this.stored.themes.entries()){const i=[{style:[]}];for(const[n,r]of o.entries()){const o=[];for(const t in r.items)o.push({name:t,innerText:r.items[t]});t[a]&&n===e.manifestThemeName&&!o.length||i[0].style.push({name:n,parent:r.parent,item:o}),n===e.manifestThemeName&&(t[a]=!0)}const r=Gt.exec(a);r&&n.push({data:i,pathname:r[1],filename:r[2]})}}for(const t of n)a.push(Xt.replaceTab(Ft(Xt.applyTemplate("resources",Mt,t.data),e.resolutionDPI,e.convertPixels,!0),e.insertSpaces),t.pathname,t.filename);return t&&this.saveToDisk(Vt(a),this.userSettings.manifestLabelAppName),a}resourceDimenToXml(t=!1){const e=[];if(this.stored.dimens.size){const a=[{dimen:[]}],n=this.userSettings;for(const[t,e]of Array.from(this.stored.dimens.entries()).sort())a[0].dimen.push({name:t,innerText:e});e.push(Xt.replaceTab(Ft(Xt.applyTemplate("resources",Pt,a),n.resolutionDPI,n.convertPixels),n.insertSpaces),"res/values","dimens.xml"),t&&this.saveToDisk(Vt(e),n.manifestLabelAppName)}return e}resourceDrawableToXml(t=!1){const e=[];if(this.stored.drawables.size){const a=this.userSettings;for(const[t,n]of this.stored.drawables.entries())e.push(Xt.replaceTab(Ft(n,a.resolutionDPI,a.convertPixels),a.insertSpaces),"res/drawable",`${t}.xml`);t&&this.saveToDisk(Vt(e),a.manifestLabelAppName)}return e}resourceDrawableImageToXml(t=!1){const e=[];if(this.stored.images.size){for(const[t,a]of this.stored.images.entries())if(Object.keys(a).length>1)for(const n in a)e.push(a[n],`res/drawable-${n}`,`${t}.${Bt.fromLastIndexOf(a[n],".")}`);else a.mdpi&&e.push(a.mdpi,"res/drawable",`${t}.${Bt.fromLastIndexOf(a.mdpi,".")}`);t&&this.saveToDisk(Ht(e),this.userSettings.manifestLabelAppName)}return e}resourceAnimToXml(t=!1){const e=[];if(this.stored.animators.size){const a=this.userSettings;for(const[t,n]of this.stored.animators.entries())e.push(Xt.replaceTab(n,a.insertSpaces),"res/anim",`${t}.xml`);t&&this.saveToDisk(Vt(e),a.manifestLabelAppName)}return e}get userSettings(){return this.resource.userSettings}get stored(){return this.resource.stored}}const $t=squared.base.lib.enumeration;class jt extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=!0}afterBaseLayout(){for(const t of this.application.processing.cache)if(t.visible&&t.hasProcedure($t.NODE_PROCEDURE.ACCESSIBILITY))switch(t.controlName){case n.EDIT:t.companion||[t.previousSibling,t.previousSibling].some(e=>{if(e&&e.visible&&e.pageFlow){const a=t.element,n=e.element,o="LABEL"===e.documentParent.tagName?e.documentParent:void 0;if(a.id&&a.id===n.htmlFor)return e.android("labelFor",t.documentId),!0;if(o&&e.textElement)return o.android("labelFor",t.documentId),!0}return!1});case n.SELECT:case n.CHECKBOX:case n.RADIO:case n.BUTTON:{const e=t.element;e.readOnly&&t.android("focusable","false"),e.disabled&&t.android("enabled","false");break}}}}var Yt=squared.base.Layout;const Zt=squared.base.lib.constant,Kt=squared.base.lib.enumeration,Jt=squared.lib.css,Qt=squared.lib.dom,te=squared.lib.math,ee=squared.lib.util,ae=/(start|end|center|baseline)/,ne=/(start|end|center|baseline|left|right)/;function oe(t,e,a){const n="column"===e,o=n?"width":"height",i=t[e];let r=0;if(i.unit.length)for(let e=0;e<i.unit.length;e++){const a=i.unit[e];if(a.endsWith("px"))r+=parseFloat(a);else{let a=0;ee.captureMap(t.rowData[e],t=>t&&t.length>0,t=>a=Math.min(a,...ee.objectMap(t,t=>t.bounds[o]))),r+=a}}else if((r=te.maxArray(i.unitTotal))<=0)return 0;return r+=i.gap*(i.count-1),(n?a.actualWidth:a.actualHeight)-(r+=a.contentBox?n?a.borderLeftWidth+a.borderRightWidth:a.borderTopWidth+a.borderBottomWidth:n?a.contentBoxWidth:a.contentBoxHeight)}function ie(t,e,a,n){const o=t[n];if(a.startsWith("space")){const r=oe(t,n,e);if(r>0){let e,s,l;"column"===n?(e=16,s=4,l="width"):(e=2,s=8,l="height");const c=function(t,e){const a=[];if("column"===e)for(let e=0;e<t.column.count;e++){a[e]=[];for(let n=0;n<t.row.count;n++)a[e].push(t.rowData[n][e])}else for(let e=0;e<t.row.count;e++)a.push(t.rowData[e]);return a}(t,n),d=t[n].count,h=new Set;function i(t){const e=Math.floor(r/t);return[e,r-e*t]}switch(a){case"space-around":{const[t,a]=i(2*d);for(let n=0;n<d;n++)for(const o of new Set(ee.flatArray(c[n]))){const i=(n>0&&n<=a?1:0)+t;h.has(o)?o.cssPX(l,r/d):(o.modifyBox(e,i),o.modifyBox(s,t),h.add(o))}o.normal=!1;break}case"space-between":if(d>1){const[t,e]=i(d-1);for(let a=0;a<d;a++)for(const o of new Set(ee.flatArray(c[a]))){const i=t+(a<e?1:0);a<d-1?h.has(o)?o.cssPX(l,i):(o.modifyBox(s,i),h.add(o)):ee.convertInt(o.android("column"===n?"layout_columnSpan":"layout_rowSpan"))>1&&(o.cssPX(l,i),h.has(o)&&o.modifyBox(s,-i))}}o.normal=!1;break;case"space-evenly":{const[t,a]=i(d+1);for(let n=0;n<d;n++)for(const o of new Set(ee.flatArray(c[n]))){const i=t+(n<a?1:0);h.has(o)?o.cssPX(l,i):(0===n&&o.modifyBox(e,t),o.modifyBox(s,i),h.add(o))}o.normal=!1;break}}}}else{const i="column"===n?256:32,r=oe(t,n,e);if(r>0)switch(a){case"center":e.modifyBox(i,Math.floor(r/2)),o.normal=!1;break;case"right":if("row"===n)break;case"end":case"flex-end":e.modifyBox(i,r),o.normal=!1}}}class re extends squared.base.extensions.CssGrid{processNode(e,a){super.processNode(e,a);const n=e.data(Zt.EXT_NAME.CSS_GRID,"mainData");if(n){const o=new Yt(a,e,t.GRID,4,e.children);return o.rowCount=n.row.count,o.columnCount=n.column.count,{output:this.application.renderNode(o),complete:!0}}}processChild(e,a){const o=a.data(Zt.EXT_NAME.CSS_GRID,"mainData"),i=e.data(Zt.EXT_NAME.CSS_GRID,"cellData");let r,s;if(o&&i){function l(t,n,r){const s=o[n],l=i[`${n}Start`],c=i[`${n}Span`],d=ee.capitalize(r),h=`min${d}`;let u=0,p=0,m=!1,g=0,f=0;s.unit.length&&s.unit.every(t=>"auto"===t)&&("width"===r?s.unit=[].fill("1fr"):s.unit.length=0);for(let t=0,n=0;t<c;t++){const o=s.unitMin[l+t];""!==o&&(g+=a.parseUnit(o));let i=s.unit[l+t];if(!i){if(!s.auto[n])continue;i=s.auto[n],s.auto[n+1]&&n++}if("auto"===i||"min-content"===i||"max-content"===i){c<s.unit.length&&(!a.has(r)||s.unit.some(t=>Jt.isLength(t))||"min-content"===i)?(u=e.bounds[r],p=0,f=0):"width"===r&&(u=0,p=0,f=.01);break}if(Jt.isPercent(i))f+=parseFloat(i)/100,p=u,u=0;else if(i.endsWith("fr"))"width"===r||e.hasHeight?(f+=parseFloat(i),p=u):(f=0,p=e.bounds[r]),u=0;else if(i.endsWith("px")){const t=parseFloat(i);0===p?u+=t:p+=t}"0px"===o&&e.textElement&&(m=!0)}if(c>1){const t=(c-1)*s.gap;u>0&&0===p?u+=t:p>0&&(p+=t),g>0&&(g+=t)}if(g>0&&(s.autoFill&&0===u&&1===o["column"===n?"row":"column"].count?(u=Math.max(e.actualWidth,g),f=0):p=g),t.android(`layout_${n}`,""+l),c>1&&t.android(`layout_${n}Span`,""+c),p>0&&!t.has(h)&&t.css(h,Jt.formatPX(p),!0),f>0)t.android(`layout_${n}Weight`,te.truncate(f,e.localSettings.floatPrecision)),t.has(r,34)||(t.android(`layout_${r}`,"0px"),t.mergeGravity("layout_gravity","column"===n?"fill_horizontal":"fill_vertical"));else if(u>0){const e=`max${d}`;t.contentBox&&(u-=t[`contentBox${d}`]),m&&!t.has(e)?(t.css(e,Jt.formatPX(u),!0),t.mergeGravity("layout_gravity","column"===n?"fill_horizontal":"fill_vertical")):t.has(r)||t.css(r,Jt.formatPX(u),!0)}return[l,c]}const c=e.flexbox.alignSelf,d=e.flexbox.justifySelf;if(ae.test(c)||ne.test(d)){(r=this.application.createNode(Qt.createElement(e.actualParent&&e.actualParent.element))).tagName=e.tagName,r.setControlType(n.FRAME,t.FRAME),r.inherit(e,"initial","base"),r.resetBox(510),r.exclude({procedure:Kt.NODE_PROCEDURE.CUSTOMIZATION,resource:Kt.NODE_RESOURCE.BOX_STYLE|Kt.NODE_RESOURCE.ASSET}),a.appendTry(e,r),r.render(a),e.inheritBox(30,r),l(r,"column","width"),l(r,"row","height");let o=!1;d.endsWith("start")||d.endsWith("left")||d.endsWith("baseline")?(e.mergeGravity("layout_gravity","left"),o=!0):d.endsWith("end")||d.endsWith("right")?(e.mergeGravity("layout_gravity","right"),o=!0):d.endsWith("center")&&(e.mergeGravity("layout_gravity","center_horizontal"),o=!0),e.hasWidth||e.android("layout_width",o?"wrap_content":"match_parent",!1),c.endsWith("start")||c.endsWith("baseline")?e.mergeGravity("layout_gravity","top"):c.endsWith("end")?e.mergeGravity("layout_gravity","bottom"):c.endsWith("center")?e.mergeGravity("layout_gravity","center_vertical"):e.hasHeight||e.android("layout_height","match_parent",!1),e.outerWrapper=r,e.parent=r,s=this.application.renderNode(new Yt(a,r,t.FRAME,2048,r.children))}const h=r||e;l(h,"column","width"),h.has("width")||h.mergeGravity("layout_gravity","fill_horizontal");const[u,p]=l(h,"row","height");"normal"===o.alignContent&&!a.has("height")&&1===p&&!0===o.rowSpanMultiple[u]&&(!o.row.unit[u]||"auto"===o.row.unit[u])&&e.initial.bounds&&e.bounds.height>e.initial.bounds.height?h.css("minHeight",Jt.formatPX(e.actualHeight),!0):h.has("height")||1===o.row.count&&"space-between"===o.alignContent||(h.mergeGravity("layout_gravity","fill_vertical"),"normal"===o.alignContent&&a.hasHeight&&0===o.rowSpanMultiple.length&&h.mergeGravity("layout_rowWeight","1"))}return{parent:r,renderAs:r,outputAs:s}}postBaseLayout(t){const e=t.data(Zt.EXT_NAME.CSS_GRID,"mainData");if(e){if(t.hasWidth&&"normal"!==e.justifyContent&&ie(e,t,e.justifyContent,"column"),t.hasHeight&&"normal"!==e.alignContent&&(ie(e,t,e.alignContent,"row"),e.rowWeight.length>1))for(let t=0;t<e.row.count;t++)if(e.rowWeight[t]>0){const a=this.application.controllerHandler.localSettings.precision.standardFloat;for(let n=0;n<e.rowData[t].length;n++){const o=e.rowData[t][n];if(o)for(let n of o)n.outerWrapper&&(n=n.outerWrapper),n.android("layout_rowWeight",""+te.truncate(e.rowWeight[t],a)),n.android("layout_height","0px")}}if(e.column.normal&&!e.column.unit.includes("auto")){const a=e.column.gap*(e.column.count-1);a>0&&(t.renderParent&&!t.renderParent.hasAlign(4)&&(t.cssPX("minWidth",a),t.cssPX("width",a,!1,!0)),!t.has("width")&&t.has("maxWidth")&&t.css("width",Jt.formatPX(t.actualWidth+a),!0))}}}postOptimize(t){const e=t.data(Zt.EXT_NAME.CSS_GRID,"mainData");if(e){const a=this.application.controllerHandler,n=Array.from(e.children)[e.children.size-1];if(e.column.unit.length&&e.column.unit.every(t=>Jt.isPercent(t))){const o=e.column.unit.reduce((t,e)=>t+parseFloat(e),0)+e.column.gap*e.column.count*100/t.actualWidth;if(o<100){t.android("columnCount",""+(e.column.count+1));for(let r=0;r<e.row.count;r++)a.addAfterOutsideTemplate(n.id,a.renderSpace(Jt.formatPercent((100-o)/100),"wrap_content",0,0,L(void 0,{[t.localizeString(i.MARGIN_LEFT)]:Jt.formatPX(e.column.gap),layout_row:""+r,layout_column:""+e.column.count})))}}for(let t=0;t<e.emptyRows.length;t++){const o=e.emptyRows[t];if(o)for(let i=0;i<o.length;i++)if(1===o[i]){a.addAfterOutsideTemplate(n.id,a.renderSpace("wrap_content",Jt.formatPX(e.row.gap),0,0,L(void 0,{layout_row:""+t,layout_column:""+i})));break}}}}}class se extends squared.base.extensions.External{constructor(){super(...arguments),this.eventOnly=!0}}var le=squared.base.Layout,ce=squared.base.NodeList;const de=squared.base.lib.constant,he=(squared,squared.lib.math),ue=squared.lib.util,pe={leftTop:["left","top"],rightBottom:["right","bottom"],rightLeftBottomTop:["rightLeft","bottomTop"],leftRightTopBottom:["leftRight","topBottom"],widthHeight:["Width","Height"],horizontalVertical:[r.HORIZONTAL,r.VERTICAL]};function me(t,e,a){const n="width"===a,o=`has${ue.capitalize(a)}`;let i=t[o]>0||t.blockStatic&&ue.withinRange(t.parseUnit(t.css(n?"maxWidth":"maxHeight")),t.box.width);if(i)for(const t of e){const e=t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin;if(n){if(e.horizontal){i=!1;break}}else if(e.vertical){i=!1;break}}const r=e.reduce((t,e)=>t+e.flexbox.grow,0);let s=0;function l(e){e.flexbox.basis=`${e.bounds[a]/t.box[a]*100}%`}if(e.length>1&&(n||i)){const t=[],r=[];let c,d=0,h=0,u=NaN;for(const l of e){const e=l.bounds[a];let p=!1;if(l.flexbox.grow>0||1!==l.flexbox.shrink){const o=l.parseUnit("auto"===l.flexbox.basis?l.css(a):l.flexbox.basis,n);if(o>0){const{shrink:a,grow:n}=l.flexbox;let i=!1;e<o?(isNaN(u)||a<u)&&(u=a,i=!0,s=1):(isNaN(u)||n>u)&&(u=n,i=!0,s=2),i&&(c=l,d=o,h=e),t.push({item:l,basis:o,dimension:e,shrink:a,grow:n});continue}l.flexbox.grow>0&&e>l[a]&&(p=!0)}"auto"===l.flexbox.alignSelf&&(i&&!l[o]||p)&&r.push(l)}if(0!==s){if(t.length>1)for(const e of t){const t=e.item;t.flexbox.grow=t===c||e.basis===d&&(1===s&&u===e.shrink||2===s&&u===e.grow)?1:e.dimension/e.basis/(h/d)*e.basis/d}if(r.length)for(const t of r)l(t)}}if(0===s&&n)for(const a of e)a.cascadeSome(e=>e.multiline&&0===e.ascend(!1,t=>t[o],t).length)&&l(a);return r}function ge(t){return t.innerWrapped?t.innerWrapped.autoMargin:t.autoMargin}class fe extends squared.base.extensions.Flexbox{processNode(e,a){super.processNode(e,a);const n=e.data(de.EXT_NAME.FLEXBOX,"mainData");if(n.directionRow&&1===n.rowCount||n.directionColumn&&1===n.columnCount)return e.containerType=t.CONSTRAINT,e.alignmentType|=4,n.wrap=!1,{include:!0};{const o=new le(a,e,0,4);return o.itemCount=e.length,o.rowCount=n.rowCount,o.columnCount=n.columnCount,n.directionRow&&e.hasHeight||n.directionColumn&&e.hasWidth||e.some(t=>!t.pageFlow)?o.containerType=t.CONSTRAINT:o.setType(t.LINEAR,n.directionColumn?8:16),{output:this.application.renderNode(o),complete:!0}}}processChild(e,a){if(e.hasAlign(128))return{output:this.application.renderNode(new le(a,e,t.CONSTRAINT,4,e.children)),complete:!0};if(e.autoMargin.horizontal||e.autoMargin.vertical&&e.hasHeight){const n=a.data(de.EXT_NAME.FLEXBOX,"mainData");if(n){const o=n.children.findIndex(t=>t===e);if(-1!==o){const i=this.application.controllerHandler.createNodeWrapper(e,a);return i.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},!0),i.saveAsInitial(!0),i.flexbox=Object.assign({},e.flexbox),n.children[o]=i,e.autoMargin.horizontal&&!e.hasWidth&&e.android("layout_width","wrap_content"),{parent:i,renderAs:i,outputAs:this.application.renderNode(new le(a,i,t.FRAME,2048,i.children))}}}}}postBaseLayout(t){const e=t.data(de.EXT_NAME.FLEXBOX,"mainData");if(e){const a=[],n=[],o=[];if(e.wrap){let i;t.each(t=>{if(t.hasAlign(128)){const r=t.renderFilter(t=>t.pageFlow);if(r.length){if(e.directionRow)t.android("layout_width","match_parent"),a.push(r);else{if(t.android("layout_height","match_parent"),i){let a=i[0];for(let t=1;t<i.length;t++)i[t].linear.right>a.linear.right&&(a=i[t]);if(e.wrapReverse){const e=t.linear.left-a.actualRect("right");e>0&&t.modifyBox(16,e)}t.constraint.horizontal=!0}n.push(r),i=r}o.push(t)}}}),t.layoutLinear?e.directionColumn&&e.wrapReverse&&t.mergeGravity("gravity","right"):o.length&&(e.directionRow?n.push(o):a.push(o))}else e.directionRow?(e.directionReverse&&e.children.reverse(),a[0]=e.children):(e.directionReverse&&e.children.reverse(),n[0]=e.children);[a,n].forEach((a,n)=>{const i=0===n,r=i?1:0,s=pe.horizontalVertical[n],l=pe.horizontalVertical[r],c=pe.widthHeight[n],d=pe.widthHeight[r],h=pe.leftTop[n],u=pe.leftTop[r],p=pe.rightBottom[n],m=pe.rightBottom[r],g=pe.leftRightTopBottom[n],f=pe.rightLeftBottomTop[n],b=c.toLowerCase(),y=d.toLowerCase(),T=t[`has${d}`],A=t[`has${c}`],E=`layout_constraint${ue.capitalize(s)}_weight`;function S(t,e){t.app(E,he.truncate(e,t.localSettings.floatPrecision)),t.android(`layout_${c.toLowerCase()}`,"0px")}for(let n=0;n<a.length;n++){const r=a[n],c=r[0],d=r[r.length-1],w=r===o,x=!w&&r.every(t=>0===t.flexbox.grow),v=x&&("space-between"===e.justifyContent||"space-around"===e.justifyContent&&r.length>1),R=[];let _,I=0,N=0,C=!0;if(w)if(A){let t="spread",a=0;switch(e.alignContent){case"left":case"right":case"flex-end":t="packed",a=1,C=!1;break;case"baseline":case"start":case"end":case"flex-start":t="packed",C=!1}c.anchorStyle(s,t,a)}else c.anchorStyle(s);else if(N=1-me(t,r,b),r.length>1){const t=new Set(ue.objectMap(r,t=>t.initial.bounds?t.initial.bounds[y]:0));t.size>1&&(I=he.maxArray(Array.from(t)))}for(let t=0;t<r.length;t++){const o=r[t],c=r[t-1],d=r[t+1];if(d&&o.anchor(f,(d.outerWrapper||d).documentId),c&&o.anchor(g,(c.outerWrapper||c).documentId),w)C&&r.length>1&&A&&S(o,1),o.anchor(u,"parent");else{const h=ge(o),p=o.innerWrapped;if(i){if(h.horizontal)if(p){let t;t=h.leftRight?"center_horizontal":o.localizeString(h.left?"right":"left"),p.mergeGravity("layout_gravity",t),N>0&&(o.flexbox.basis="0%",R.push(o))}else h.leftRight||(h.left?c&&o.anchorDelete(g):d&&o.anchorDelete(f))}else if(h.vertical)if(p){let t;t=h.topBottom?"center_vertical":o.localizeString(h.top?"bottom":"top"),p.mergeGravity("layout_gravity",t),N>0&&(o.flexbox.basis="0%",R.push(o))}else h.topBottom||(h.top?c&&o.anchorDelete(g):d&&o.anchorDelete(f));switch(o.flexbox.alignSelf){case"start":case"flex-start":o.anchor(u,"parent");break;case"end":case"flex-end":o.anchor(m,"parent");break;case"baseline":i&&(void 0===_&&(_=ce.baseline(r)[0]),_&&o!==_&&o.anchor("baseline",_.documentId));break;case"center":o.anchorParent(l),o.anchorStyle(l,"packed",.5),0!==o[y]||i||T||!o.cascadeSome(t=>t.multiline)||o.android(`layout_${y}`,"0px");break;default:const c=o.innerWrapped,d=e.wrapReverse;switch(e.alignContent){case"center":a.length%2==1&&n===Math.floor(a.length/2)?o.anchorParent(l):n<a.length/2?o.anchor(m,"parent"):n>=a.length/2&&o.anchor(u,"parent");break;case"space-evenly":case"space-around":o.layoutFrame&&c?c.mergeGravity("layout_gravity",i?"center_vertical":"center_horizontal"):o.anchorParent(l);break;case"space-between":v&&2===r.length&&o.anchorDelete(0===t?f:g),0===n?o.layoutFrame&&c?c.mergeGravity("layout_gravity",d?m:u):o.anchor(d?m:u,"parent"):a.length>2&&n<a.length-1?o.layoutFrame&&c?c.mergeGravity("layout_gravity",i?"center_vertical":"center_horizontal"):o.anchorParent(l):o.layoutFrame&&c?c.mergeGravity("layout_gravity",d?u:m):o.anchor(d?u:m,"parent");break;default:if(o.anchorParent(l),void 0!==o.innerWrapped&&o.innerWrapped.autoMargin[l]||o.anchorStyle(l,"packed",d?1:0),0===o[y]){const t=o.initial.bounds&&o.initial.bounds[y],a=t<I,n=`layout_${y}`;if(a){if(T||0===I||a){if(0===I&&(!T&&r.length>1||e.wrap))break;o.android(n,i&&!T?a?"0px":"match_parent":"0px"),p&&!p.autoMargin[s]&&p.android(n,"match_parent")}}else T&&(0===I&&o.bounds[y]>t||o.flexElement&&(i&&"column"===o.css("flexDirection")||!i&&"row"===o.css("flexDirection")))&&o.android(n,"0px")}}}It.setFlexDimension(o,b)}o.anchored=!0,o.positioned=!0}if(N>0)for(const t of R){const e=ge(t);let a=1;i?e.leftRight&&(a=2):e.topBottom&&(a=2),S(t,Math.max(t.flexbox.grow,N*a/R.length))}if(c.anchor(h,"parent"),d.anchor(p,"parent"),!w&&(i||e.directionColumn)){let o=!1;if(x)switch(e.justifyContent){case"normal":e.directionColumn&&c.anchorStyle(s,"packed",e.directionReverse?1:0);break;case"left":if(!i)break;case"start":case"flex-start":c.anchorStyle(s,"packed",e.directionReverse?1:0);break;case"center":r.length>1&&c.anchorStyle(s,"packed",.5),o=!0;break;case"right":if(!i)break;case"end":case"flex-end":c.anchorStyle(s,"packed",1);break;case"space-between":1===r.length&&d.anchorDelete(p);break;case"space-evenly":if(r.length>1){c.anchorStyle(s,"spread");const t=ue.capitalize(s);for(const e of r)e.app(`layout_constraint${t}_weight`,""+(e.flexbox.grow||1))}else o=!0;break;case"space-around":if(r.length>1){const e=this.application.controllerHandler;c.constraint[s]=!1,d.constraint[s]=!1,e.addGuideline(c,t,s,!0,!1),e.addGuideline(d,t,s,!0,!0)}else o=!0}v||a[n].some(t=>""!==t.app(E))&&!ue.sameArray(a[n],t=>t.app(E))?c.anchorStyle(s,"spread_inside",0,!1):o||c.anchorStyle(s,"packed",e.directionReverse?1:0,!1)}}})}}}var be=squared.base.Layout;const ye=squared.base.lib.constant,Te=(squared,squared.lib.css),Ae=squared.lib.util;class Ee extends squared.base.extensions.Grid{processNode(e,a){super.processNode(e,a);const n=e.data(ye.EXT_NAME.GRID,"mainData");if(n){const o=new be(a,e,t.GRID,4,e.children);return o.columnCount=n.columnCount,{output:this.application.renderNode(o),complete:!0}}}processChild(t,e){const a=e.data(ye.EXT_NAME.GRID,"mainData"),n=t.data(ye.EXT_NAME.GRID,"cellData");if(a&&n){const a=n.siblings?n.siblings.slice(0):void 0;let o;if(a){if(a.unshift(t),t=(o=this.application.controllerHandler.processLayoutHorizontal(new be(e,this.application.controllerHandler.createNodeGroup(t,a,e),0,n.block?64:0,a)).layout).node,n.block)t.css("display","block");else for(const t of a)t.has("width",32)&&t.css("width",Te.formatPX(t.bounds.width),!0);!function(t,e){const a=squared.base.extensions.Grid.createDataCellAttribute();for(const t of e){const e=t.data(ye.EXT_NAME.GRID,"cellData");e&&(e.cellStart&&(a.cellStart=!0),e.cellEnd&&(a.cellEnd=!0),e.rowEnd&&(a.rowEnd=!0),e.rowStart&&(a.rowStart=!0),t.data(ye.EXT_NAME.GRID,"cellData",null))}t.data(ye.EXT_NAME.GRID,"cellData",a)}(t,a)}if(n.rowSpan>1&&t.android("layout_rowSpan",""+n.rowSpan),n.columnSpan>1&&t.android("layout_columnSpan",""+n.columnSpan),"table-cell"===t.display&&t.mergeGravity("layout_gravity","fill"),o)return{parent:o.node,renderAs:o.node,outputAs:this.application.renderNode(o),complete:!0}}}postBaseLayout(t){if("collapse"!==t.css("borderCollapse")){const e=t.data(ye.EXT_NAME.GRID,"mainData");e&&t.renderEach(t=>{const a=t.data(ye.EXT_NAME.GRID,"cellData");if(a){const n=t.actualParent;if(n&&!n.visible&&(a.cellStart&&(e.paddingTop=n.paddingTop+n.marginTop),a.rowStart&&(e.paddingLeft=Math.max(n.marginLeft+n.paddingLeft,e.paddingLeft)),a.rowEnd)){const o=n.marginBottom+n.paddingBottom+(a.cellEnd?0:n.marginTop+n.paddingTop);if(o>0)if(a.cellEnd)e.paddingBottom=o;else{const a=this.application.controllerHandler;a.addAfterOutsideTemplate(t.id,a.renderSpace("match_parent",Te.formatPX(o),e.columnCount))}e.paddingRight=Math.max(n.marginRight+n.paddingRight,e.paddingRight)}}}),t.modifyBox(32,e.paddingTop),t.modifyBox(64,e.paddingRight),t.modifyBox(128,e.paddingBottom),t.modifyBox(256,e.paddingLeft)}if(!t.hasWidth){let e=-1/0;Ae.captureMap(t.renderChildren,t=>t.inlineFlow||!t.blockStatic,t=>e=Math.max(e,t.linear.right)),Ae.withinRange(t.box.right,e)&&t.android("layout_width","wrap_content")}}}var Se=squared.base.Layout;const we=squared.base.lib.constant,xe=(squared,squared.lib.css),ve=squared.lib.dom,Re=squared.lib.util,_e=24,Ie=8;class Ne extends squared.base.extensions.List{processNode(e,a){super.processNode(e,a);const n=new Se(a,e,0,0,e.children);if(n.linearY&&!n.linearX?(n.rowCount=e.length,n.columnCount=e.some(t=>"inside"===t.css("listStylePosition"))?3:2,n.setType(t.GRID,4)):this.application.controllerHandler.checkRelativeHorizontal(n)&&(n.rowCount=1,n.columnCount=n.length,n.setType(t.RELATIVE,8)),0!==n.containerType)return{output:this.application.renderNode(n),complete:!0}}processChild(e,a){const o=e.data(we.EXT_NAME.LIST,"mainData");if(o){const i=this.application.controllerHandler;let r=e.marginLeft,s=0,l=!1,c=null;e.modifyBox(16),a.is(t.GRID)?(s=Re.convertInt(a.android("columnCount")),l=!0):a.item(0)===e&&(l=!0),l&&(r+=a.paddingLeft>0?a.paddingLeft:a.marginLeft);const d=e.length?e:this.application.controllerHandler.createNodeGroup(e,[e],a);let h=o.ordinal?void 0:e.find(t=>"left"===t.float&&t.marginLeft<0&&Math.abs(t.marginLeft)<=t.documentParent.marginLeft);if(h){const n=new Se(a,h);h.inlineText||0===h.length?n.containerType=t.TEXT:(n.retain(h.children),i.checkRelativeHorizontal(n)?n.setType(t.RELATIVE,8):n.setType(t.CONSTRAINT,2)),h.parent=a,h.render(a),3===s&&e.android("layout_columnSpan","2"),(r+=h.marginLeft)>0&&!h.hasWidth&&h.android("minWidth",xe.formatPX(r)),h.modifyBox(16),this.application.addLayoutTemplate(a,h,this.application.renderNode(n))}else{const u=s>0?"0":"",p="inside"===e.css("listStylePosition");let m,g="right",f=0,b=0;if(""!==o.imageSrc){if(o.imagePosition){const t=xe.getBackgroundPosition(o.imagePosition,e.actualDimension,e.fontSize);({top:f,left:b}=t),g="left",e.marginLeft<0?(c=e.marginLeft,c+=a.paddingLeft>0?a.paddingLeft:a.marginLeft):l=!1,r=0}m=this.application.resourceHandler.addImageSrc(o.imageSrc)}let y=0;if("left"===g)r+=e.paddingLeft-b,e.modifyBox(256);else{const t=o.ordinal?o.ordinal.length:1;y=Math.max(r/(m?6:4*t),4)}const T=L(void 0,{layout_columnWeight:u}),A=ve.createElement(e.actualParent&&e.actualParent.element,m?"img":"span");h=this.application.createNode(A),p?(i.addBeforeOutsideTemplate(h.id,i.renderNodeStatic(n.SPACE,L(void 0,{minWidth:xe.formatPX(r),layout_columnWeight:u}))),r=_e):3===s&&d.android("layout_columnSpan","2"),"DT"!==e.tagName||m?(h.tagName=`${e.tagName}_ORDINAL`,m?(Object.assign(T.android,{src:`@drawable/${m}`,scaleType:p||"right"!==g?"fitStart":"fitEnd",baselineAlignBottom:l?"true":""}),h.setControlType(n.IMAGE,t.IMAGE),A.src=xe.resolveURL(o.imageSrc)):o.ordinal?(A.innerHTML=o.ordinal,h.setInlineText(!0),h.setControlType(n.TEXT,t.TEXT),"DFN"===e.tagName&&(r+=Ie,h.modifyBox(64,Ie))):(h.setControlType(n.SPACE,t.SPACE),e.modifyBox(256)),h.inherit(e,"textStyle"),h.cssApply({minWidth:r>0?xe.formatPX(r):"",marginTop:0!==e.marginTop?xe.formatPX(e.marginTop):"",paddingTop:e.paddingTop>0?xe.formatPX(e.paddingTop):"",paddingRight:y>0&&"right"===g?xe.formatPX(y):"",paddingLeft:y>0&&"left"===g&&(!m||o.imagePosition)?xe.formatPX(y):"",fontSize:o.ordinal&&!o.ordinal.endsWith(".")?xe.formatPX(.75*h.toFloat("fontSize")):"",lineHeight:e.lineHeight>0?xe.formatPX(e.lineHeight):""}),h.apply(T),h.cssTry("display","block")&&(h.setBounds(),h.cssFinally("display")),h.saveAsInitial(),p||h.mergeGravity("gravity",e.localizeString(g)),0!==f&&h.modifyBox(2,f),0!==b&&h.modifyBox(16,b),h.positioned=!0,h.render(a),this.application.addLayoutTemplate(a,h,{type:1,node:h,controlName:h.controlName}),e.companion=h):d.android("layout_columnSpan",""+s)}l&&((null===c||c<=0)&&a.modifyBox(a.paddingLeft>0?256:16),"number"==typeof c&&c<0&&a.modifyBox(16,c)),s>0&&(d.android("layout_width","0px"),d.android("layout_columnWeight","1"),e!==d&&e.baseline&&d.android("baselineAlignedChildIndex","0")),d!==e&&0!==e.marginTop&&(d.modifyBox(2,e.marginTop),e.modifyBox(2));const u=new Se(a,d,t.LINEAR,18,d.children);return{parent:d,renderAs:d,outputAs:this.application.renderNode(u)}}}postOptimize(t){t.blockStatic&&t.inlineWidth&&t.android("layout_width","match_parent")}}const Ce=squared.lib.util;class Pe extends squared.base.extensions.Relative{postOptimize(t){super.postOptimize(t),t.imageOrSvgElement&&t.alignSibling("baseline")&&0!==Ce.convertFloat(t.verticalAlign)&&"invisible"===t.android("visibility")&&t.android("baselineAlignBottom","true")}}var Le=squared.base.Layout;const Oe=squared.base.lib.constant,ke=squared.base.lib.enumeration,Me=squared.lib.css;class De extends squared.base.extensions.Sprite{processNode(e,a){const o=e.data(Oe.EXT_NAME.SPRITE,"mainData");if(o){const i=this.application.resourceHandler.addImageSrc(e.backgroundImage);if(""!==i){const r=this.application.createNode(e.element);return r.inherit(e,"initial","base","styleMap"),r.setControlType(n.FRAME,t.FRAME),r.exclude({procedure:ke.NODE_PROCEDURE.CUSTOMIZATION,resource:ke.NODE_RESOURCE.IMAGE_SOURCE}),a.appendTry(e,r),e.setControlType(n.IMAGE,t.IMAGE),e.exclude({resource:ke.NODE_RESOURCE.FONT_STYLE|ke.NODE_RESOURCE.BOX_STYLE}),e.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:Me.formatPX(o.image.width),height:Me.formatPX(o.image.height),marginTop:Me.formatPX(o.position.top),marginRight:"0px",marginBottom:"0px",marginLeft:Me.formatPX(o.position.left),paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"rgba(0, 0, 0, 0)"}),e.unsetCache(),e.android("src",`@drawable/${i}`),e.outerWrapper=r,r.innerWrapped=e,e.parent=r,{renderAs:r,outputAs:this.application.renderNode(new Le(a,r,t.FRAME,2048,r.children)),parent:r,complete:!0}}}}}squared;class Be extends squared.base.extensions.Substitute{processNode(e,a){return e.containerType=e.blockStatic?t.BLOCK:t.INLINE,e.alignmentType=8192,super.processNode(e,a)}postOptimize(t){t.apply(w.formatOptions(L(this.options[t.elementId]),this.application.extensionManager.optionValueAsBoolean(a.RESOURCE_STRINGS,"numberResourceValue")))}}var Xe=squared.base.Layout;const We=squared.base.lib.constant,Ge=(squared,squared.lib.css),Ve=squared.lib.util;class He extends squared.base.extensions.Table{processNode(e,a){super.processNode(e,a);const n=e.data(We.EXT_NAME.TABLE,"mainData");if(n){let o=!1;if(n.columnCount>1&&(o=!0===e.data(We.EXT_NAME.TABLE,"expand"),e.each(t=>{if("0px"===t.css("width"))t.android("layout_width","0px"),t.android("layout_columnWeight",""+(t.element.colSpan||1));else{const a=t.data(We.EXT_NAME.TABLE,"expand");if(void 0!==a)if(a){const a=Ve.convertFloat(t.data(We.EXT_NAME.TABLE,"percent"))/100;a>0&&(t.android("layout_width","0px"),t.android("layout_columnWeight",Ve.trimEnd(a.toPrecision(3),"0")),o=!e.hasWidth)}else t.android("layout_columnWeight","0");!0===t.data(We.EXT_NAME.TABLE,"downsized")&&(!0===t.data(We.EXT_NAME.TABLE,"exceed")?(t.android("layout_width","0px"),t.android("layout_columnWeight","0.01")):t.has("width")&&t.actualWidth<t.bounds.width&&t.android("layout_width",Ge.formatPX(t.bounds.width)))}t.textElement&&t.textContent.length>1&&!/[\s\n\-]/.test(t.textContent.trim())&&t.android("maxLines","1")}),o)){const t=e.ascend(!1,t=>t.hasWidth);t.length&&e.actualWidth>=t[0].actualWidth?e.android("layout_width","match_parent"):e.css("width",Ge.formatPX(e.actualWidth),!0)}!o&&e.has("width")&&e.actualWidth<Math.floor(e.bounds.width)&&(n.layoutFixed?e.android("width",Ge.formatPX(e.bounds.width),!0):(e.has("minWidth")||e.android("minWidth",Ge.formatPX(e.actualWidth)),e.css("width","auto",!0))),e.has("height")&&e.actualHeight<Math.floor(e.bounds.height)&&(e.has("minHeight")||e.android("minHeight",Ge.formatPX(e.actualHeight)),e.css("height","auto",!0));const i=new Xe(a,e,t.GRID,4,e.children);return i.rowCount=n.rowCount,i.columnCount=n.columnCount,{output:this.application.renderNode(i),complete:!0}}}processChild(t,e){const a=Ve.convertInt(t.data(We.EXT_NAME.TABLE,"rowSpan")),n=Ve.convertInt(t.data(We.EXT_NAME.TABLE,"colSpan")),o=Ve.convertInt(t.data(We.EXT_NAME.TABLE,"spaceSpan"));if(a>1&&t.android("layout_rowSpan",""+a),n>1&&t.android("layout_columnSpan",""+n),t.mergeGravity("layout_gravity","fill"),o>0){const e=this.application.controllerHandler;e.addAfterOutsideTemplate(t.id,e.renderSpace("wrap_content","wrap_content",o))}"hide"===e.css("empty-cells")&&0===t.actualChildren.length&&""===t.textContent&&t.hide(!0)}postOptimize(t){const e=Ve.convertInt(t.android("layout_width"));e>0&&(t.bounds.width>e&&t.android("layout_width",Ge.formatPX(t.bounds.width)),e>0&&"auto"===t.cssInitial("width")&&t.renderChildren.every(t=>t.inlineWidth)&&t.renderEach(t=>{t.android("layout_width","0px"),t.android("layout_columnWeight","1")}))}}var Fe=squared.base.Layout;squared;class ze extends squared.base.extensions.VerticalAlign{processNode(e,a){return super.processNode(e,a),{output:this.application.renderNode(new Fe(a,e,t.RELATIVE,8,e.children))}}}class qe extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=!0}}var Ue=squared.base.Layout;const $e=squared.base.lib.enumeration,je=squared.lib.css,Ye=squared.lib.util;class Ze extends squared.base.Extension{constructor(){super(...arguments),this.options={circlePosition:!1}}condition(t){return this.included(t.element)&&t.length>0}processNode(e,a){return e.exclude({procedure:$e.NODE_PROCEDURE.CONSTRAINT}),{output:this.application.renderNode(new Ue(a,e,t.CONSTRAINT,32,e.children))}}afterConstraints(){const t=this.application.controllerHandler;for(const e of this.subscribers){const a=new Map;if(e.each(t=>{const n=[];Ye.withinRange(t.linear.left,e.box.left)&&n.push("left"),Ye.withinRange(t.linear.top,e.box.top)&&n.push("top"),a.set(t,n)}),this.options.circlePosition){let n,o=!1;for(const t of a.values())if(2===t.length){o=!0;break}for(const[i,s]of a.entries())if(o){if(2===s.length){i.anchor("left","parent"),i.anchor("top","parent"),n=i;break}}else if(1===s.length){s.includes("left")?(i.anchor("left","parent"),t.addGuideline(i,e,r.VERTICAL),n=i):(i.anchor("top","parent"),t.addGuideline(i,e,r.HORIZONTAL),n=i);break}void 0===n&&(n=e.item(0),t.addGuideline(n,e)),e.each(t=>{if(t!==n){const e=t.center,a=n.center,o=Math.abs(e.x-a.x),i=Math.abs(e.y-a.y),r=Math.round(Math.sqrt(Math.pow(o,2)+Math.pow(i,2)));let s=Math.round(Math.atan(Math.min(o,i)/Math.max(o,i))*(180/Math.PI));e.y>a.y?e.x>a.x?o>i?s+=90:s=180-s:o>i?s=270-s:s+=180:e.y<a.y?a.x>e.x?o>i?s+=270:s=360-s:o>i&&(s=90-s):s=e.x>a.x?90:270,t.app("layout_constraintCircle",n.documentId),t.app("layout_constraintCircleRadius",je.formatPX(r)),t.app("layout_constraintCircleAngle",""+s)}})}else for(const[n,o]of a.entries())o.includes("left")&&n.anchor("left","parent"),o.includes("top")&&n.anchor("top","parent"),o.length<2&&t.addGuideline(n,e)}}}var Ke=squared.base.Layout;squared;const Je=squared.lib.util;class Qe extends squared.base.Extension{condition(t){if(t.naturalElement&&(t.documentBody||t.contentBoxWidth>0||t.contentBoxHeight>0)){const e=t.filter(t=>!t.pageFlow&&t.leftTopAxis&&t.left>=0&&t.right>=0);if(e.length){const n=t.paddingTop+(t.documentBody?t.marginTop:0),o=t.paddingRight+(t.documentBody?t.marginRight:0),i=t.paddingBottom+(t.documentBody?t.marginBottom:0),r=t.paddingLeft+(t.documentBody?t.marginLeft:0),s=new Set;let l=!1,c=!1;for(const a of e){const e="fixed"===a.css("position");a.has("left")?a.left>=0&&a.left<r&&s.add(a):a.has("right")&&a.right>=0&&(e||a.right<o||t.documentBody&&t.has("width"))?(s.add(a),l=!0):a.rightAligned?a.marginRight<0&&(t.documentRoot||Je.aboveRange(a.linear.right,t.bounds.right))&&s.add(a):a.marginLeft<0&&(t.documentRoot||Je.belowRange(a.linear.left,t.bounds.left))&&s.add(a),a.has("top")?a.top>=0&&a.top<n&&s.add(a):a.has("bottom")&&a.bottom>=0&&(e||a.bottom<i||t.documentBody&&t.has("height"))&&(s.add(a),c=!0)}if(s.size)return t.data(a.DELEGATE_FIXED,"mainData",{children:Array.from(s),right:l,bottom:c}),!0}}return!1}processNode(e,n){const o=e.data(a.DELEGATE_FIXED,"mainData");if(o){const i=this.application.controllerHandler.createNodeWrapper(e,n,o.children);e.documentBody&&(o.right||o.bottom)?(i.cssApply({width:"auto",height:"auto",display:"block",float:"none"}),o.right&&i.android("layout_width","match_parent"),o.bottom&&i.android("layout_height","match_parent")):e.pageFlow||e.resetBox(30,i);for(const t of o.children)t.has("top")?t.modifyBox(2,e.borderTopWidth):t.has("bottom")&&t.modifyBox(8,e.borderBottomWidth),t.has("left")?t.modifyBox(16,e.borderLeftWidth):t.has("right")&&t.modifyBox(4,e.borderRightWidth);const r=e.data(a.DELEGATE_MAXWIDTHHEIGHT,"mainData");if(r){r.container&&(r.width&&(i.css("maxWidth",e.css("maxWidth")),i.android("layout_width","0px"),i.contentBoxWidth=e.contentBoxWidth,e.android("layout_width","wrap_content")),r.height&&(i.css("maxHeight",e.css("maxHeight")),i.android("layout_height","0px"),i.contentBoxHeight=e.contentBoxHeight,e.android("layout_height","wrap_content")))}return{parent:i,renderAs:i,outputAs:this.application.renderNode(new Ke(n,i,t.CONSTRAINT,32,i.children))}}}}var ta=squared.base.Layout;squared;class ea extends squared.base.Extension{condition(t,e){let n=!1,o=!1;if(!t.support.maxWidth&&!isNaN(t.width)&&t.has("maxWidth")&&!e.hasAlign(256)){const e="100%"===t.css("width");(0===t.width||e)&&(t.blockStatic&&!t.autoMargin.horizontal||e)?t.css("width",t.css("maxWidth")):n=!0}return!t.support.maxHeight&&!isNaN(t.height)&&t.has("maxHeight")&&e.hasHeight&&(t.hasHeight&&"100%"===t.css("height")?t.css("height",t.css("maxHeight")):o=!0),!(!n&&!o)&&(t.data(a.DELEGATE_MAXWIDTHHEIGHT,"mainData",{width:n,height:o}),!0)}processNode(e,o){const i=e.data(a.DELEGATE_MAXWIDTHHEIGHT,"mainData");if(i){const a=o.layoutConstraint?o:this.application.controllerHandler.createNodeWrapper(e,o,void 0,n.CONSTRAINT,t.CONSTRAINT);if(i.width&&(e.android("layout_width","0px"),a.android("layout_width","match_parent"),o.layoutElement&&(e.autoMargin.horizontal=!1,e.autoMargin.left=!1,e.autoMargin.right=!1,e.autoMargin.leftRight=!1)),i.height&&(e.android("layout_height","0px"),a.android("layout_height","match_parent"),o.layoutElement&&(e.autoMargin.vertical=!1,e.autoMargin.top=!1,e.autoMargin.bottom=!1,e.autoMargin.topBottom=!1)),i.container=a,o!==a)return{parent:a,renderAs:a,outputAs:this.application.renderNode(new ta(o,a,a.containerType,2048,a.children))}}}}var aa=squared.base.Layout;squared;class na extends squared.base.Extension{condition(t,e){return!t.pageFlow&&e.documentBody&&(Math.ceil(t.linear.left)<Math.floor(e.box.left)&&(t.left<0||t.marginLeft<0||!t.has("left")&&t.right>0)||Math.floor(t.linear.right)>Math.ceil(e.box.right)&&(t.left>0||t.marginLeft>0||!t.has("left")&&t.right<0)||Math.ceil(t.linear.top)<Math.floor(e.box.top)&&(t.top<0||t.marginTop<0||!t.has("top")&&t.bottom>0)||Math.floor(t.linear.bottom)>Math.ceil(e.box.bottom)&&(t.top>0||t.marginTop>0||!t.has("top")&&t.bottom<0)&&e.has("height"))}processNode(e,a){const n=this.application.controllerHandler.createNodeWrapper(e,a);return{parent:n,renderAs:n,outputAs:this.application.renderNode(new aa(a,n,t.FRAME,2048,n.children)),include:!0}}}var oa=squared.base.Layout;squared;const ia=squared.lib.css;function ra(t,e){return t.pageFlow?t===e.firstChild&&t.inlineFlow&&!t.centerAligned&&!t.rightAligned&&t.marginLeft<0&&Math.abs(t.marginLeft)<=e.marginLeft+e.paddingLeft&&!e.some(t=>t.multiline):t.absoluteParent===e&&(t.left<0||!t.has("left")&&t.right<0)}class sa extends squared.base.Extension{condition(t){return this.application.userSettings.supportNegativeLeftTop&&!t.documentRoot&&"hidden"!==t.css("overflowX")&&t.some(e=>ra(e,t))}processNode(e,o){const i=e.filter(t=>ra(t,e)),r=this.application.controllerHandler.createNodeWrapper(e,o,i,n.CONSTRAINT,t.CONSTRAINT);e.marginTop>0&&(r.modifyBox(2,e.marginTop),e.modifyBox(2)),e.marginBottom>0&&(r.modifyBox(8,e.marginBottom),e.modifyBox(8));let s,l=NaN,c=NaN;for(const t of i)t.pageFlow?((isNaN(l)||t.linear.left<l)&&(l=t.linear.left),s=t):t.has("left")?t.left<0&&(isNaN(l)||t.linear.left<l)&&(l=t.linear.left):t.right<0&&(isNaN(c)||t.linear.right>c)&&(c=t.linear.right);if(r.inherit(e,"styleMap"),!isNaN(l)){let t=e.linear.left-l;if(t>0){e.modifyBox(16,t);for(const e of i)!e.pageFlow&&e.left<0&&e.css("left",ia.formatPX(e.left+t),!0)}else{for(const t of i)!t.pageFlow&&t.left<0&&t.css("left",ia.formatPX(e.marginLeft+t.left),!0);t=Math.abs(t)}e.has("width",2)?r.cssPX("width",(e.marginLeft>0?e.marginLeft:0)+t,!1,!0):e.has("width")&&r.css("width","auto",!0)}if(!isNaN(c)){let t=c-e.linear.right;t>e.marginRight?e.modifyBox(4,t-=e.marginRight):t=0;const a=e.linear.right+t;e.marginRight>0&&(t+=e.marginRight),t>0&&(e.has("width",2)||!e.blockStatic&&!e.has("width"))&&r.css(r.has("width")?"width":"minWidth",ia.formatPX(e.actualWidth+t),!0);for(const t of i)t.right<0&&t.css("right",ia.formatPX(a-t.linear.right),!0)}return s&&(this.subscribers.add(r),r.data(a.DELEGATE_NEGATIVEX,"mainData",{offsetLeft:e.marginLeft+e.paddingLeft,firstChild:s,adjacentChild:e})),{parent:r,renderAs:r,outputAs:this.application.renderNode(new oa(o,r,r.containerType,2056,r.children))}}postBaseLayout(t){const e=t.data(a.DELEGATE_NEGATIVEX,"mainData");if(e){const t=e.firstChild,a=e.adjacentChild;t.anchor("left","parent"),t.anchor("rightLeft",a.documentId),t.anchorStyle(r.HORIZONTAL),t.anchorParent(r.VERTICAL),t.anchorStyle(r.VERTICAL),t.modifyBox(16,e.offsetLeft),a.anchor("leftRight",t.documentId),a.anchor("right","parent"),a.anchorParent(r.VERTICAL),a.anchorStyle(r.VERTICAL),It.setConstraintDimension(t),It.setConstraintDimension(a),t.positioned=!0,a.positioned=!0}}}var la=squared.base.Layout;squared;class ca extends squared.base.Extension{condition(t,e){return t.pageFlow&&t.has("width",32,{not:"100%"})&&(e.layoutVertical||e.layoutFrame&&t.singleChild)&&(t.documentBody||t.has("height")||e.blockStatic||e.has("width"))}processNode(e,a){const n=this.application.controllerHandler.createNodeWrapper(e,a);return n.css("display","block"),n.android("layout_width","match_parent",!1),n.android("layout_height",e.has("height",32)?"match_parent":"wrap_content",!1),e.android("layout_width","0px"),{parent:n,renderAs:n,outputAs:this.application.renderNode(new la(a,n,t.CONSTRAINT,2048,n.children)),include:!0}}postConstraints(t){const e=t.renderParent;e&&t.resetBox(30,e,!0)}}var da=squared.base.NodeList;const ha=squared.base.lib.enumeration,ua="RadioGroup",pa=t=>t.name?t.name.trim():"";class ma extends squared.base.Extension{condition(e){if(e.length>1){const a=new Set;let n=0,o=!0;for(let i of e){if(!i.baseline){o=!1;break}if(i.renderAs&&(i=i.renderAs),i.containerType===t.RADIO){const t=pa(i.element);""!==t&&(a.add(t),n++)}}if(o&&1===a.size&&n>1){const t=da.linearData(e.children);if(t.linearX&&!t.floated.has("right"))return!0}return!1}return e.containerType===t.RADIO&&""!==pa(e.element)&&!e.positioned}processNode(e,a){if(e.length)return e.setControlType(ua,t.LINEAR),e.alignmentType|=8,e.android("orientation",r.HORIZONTAL),e.baseline&&(e.css("verticalAlign","text-bottom",!0),e.baseline=!1),e.render(a),{output:{type:1,node:e,controlName:ua},complete:!0};if(a.controlName!==ua){const o=pa(e.element),i=[],s=[];let l;for(let n of a.children){let a;n.renderAs&&(n.renderAs===e?l=n:a=n,n=n.renderAs),e.containerType!==t.RADIO||pa(n.element)!==o||n.rendered||(i.push(n),a&&s.push(a))}if(i.length>1){const o=this.application.controllerHandler.createNodeGroup(e,i,a,l);o.alignmentType|=8|(a.length!==i.length?128:0),a.layoutConstraint&&(o.companion=l||e),o.setControlType(ua,t.LINEAR),o.inherit(e,"alignment"),o.css("verticalAlign","text-bottom"),o.baseline=!1,o.modifyBox(2,-4),o.exclude({resource:ha.NODE_RESOURCE.ASSET}),o.each(a=>{a!==e&&a.setControlType(n.RADIO,t.RADIO),a.positioned=!0}),o.render(!e.dataset.use&&e.dataset.target?this.application.resolveTarget(e.dataset.target):a),o.android("orientation",da.linearData(i).linearX?r.HORIZONTAL:r.VERTICAL);for(const t of s)t.hide();return this.subscribers.add(o),{renderAs:o,outputAs:{type:1,node:o,controlName:ua},parent:o,complete:!0}}}}postBaseLayout(t){t.some(e=>!(!e.element||!e.element.checked)&&(t.android("checkedButton",e.documentId),!0))}}const ga=squared.base.lib.enumeration,fa=squared.lib.css,ba=squared.lib.dom,ya="HorizontalScrollView",Ta="android.support.v4.widget.NestedScrollView";class Aa extends squared.base.Extension{condition(t){return t.length>0&&(t.overflowX&&t.has("width")||t.overflowY&&t.hasHeight&&t.has("height")||this.included(t.element))}processNode(e,a){const n=[],o=[];if(e.overflowX&&e.overflowY)n.push(ya,Ta);else if(e.overflowX)n.push(ya);else if(e.overflowY)n.push(Ta);else{let t=0;e.has("width")&&(t|=8,n.push(ya)),e.hasHeight&&e.has("height")&&(t|=16,n.push(Ta)),e.overflow=t}for(let i=0;i<n.length;i++){const r=this.application.createNode(0===i?e.element:ba.createElement(e.actualParent&&e.actualParent.element,e.block?"div":"span"));r.setControlType(n[i],t.BLOCK),0===i?(r.inherit(e,"initial","base","styleMap"),a.appendTry(e,r)):(r.inherit(e,"base"),r.exclude({resource:ga.NODE_RESOURCE.BOX_STYLE})),r.exclude({resource:ga.NODE_RESOURCE.ASSET}),r.resetBox(480),o.push(r)}for(let t=0;t<o.length;t++){const n=o[t],i=o[t-1];switch(n.controlName){case Ta:e.android("layout_width","wrap_content"),n.android("layout_height",fa.formatPX(e.actualHeight)),n.android("scrollbars","vertical"),n.android("fadeScrollbars","false"),n.cssApply({width:"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case ya:e.android("layout_height","wrap_content"),n.android("layout_width",fa.formatPX(e.actualWidth)),n.android("scrollbars","horizontal"),n.android("fadeScrollbars","false"),n.cssApply({height:"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"})}n.render(0===t?!e.dataset.use&&e.dataset.target?this.application.resolveTarget(e.dataset.target):a:i),n.unsetCache(),this.application.addLayoutTemplate(n.renderParent||a,n,{type:1,node:n,controlName:n.controlName})}2===o.length?(e.android("layout_width","wrap_content"),e.android("layout_height","wrap_content")):e.overflowX?(e.android("layout_width","wrap_content"),e.android("layout_height","match_parent")):(e.android("layout_width","match_parent"),e.android("layout_height","wrap_content"));const i=o.pop();return e.parent=i,a.layoutConstraint&&(i.companion=e),e.overflow=0,e.resetBox(30),e.exclude({resource:ga.NODE_RESOURCE.BOX_STYLE}),{parent:e.parent}}}var Ea={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},Sa={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","top","right","bottom","drawable","width","height","gravity"],">":{shape:Ea.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const wa={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},xa={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":!0,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:wa.path},"#":"include"}};var va={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:wa.path},"#":"include"}};const Ra=squared.base.lib.enumeration,_a=squared.lib.color,Ia=squared.lib.css,Na=squared.lib.math,Ca=squared.lib.regex,Pa=squared.lib.util,La=squared.lib.xml;function Oa(t,e=-1,a=!1){const n=t.style,o=za(t.width);let i=!1;switch(n){case"inset":case"outset":i=!0;case"groove":case"ridge":{const o=_a.parseColor(t.color,"1",!0);if(o){if("outset"!==n&&"ridge"!==n||(a=!a),a)switch(e){case 0:case 3:e=1;break;case 1:case 2:e=0}let t=1;switch(e){case 0:case 3:i&&(t=-.15);break;case 1:case 2:t=i?-.3:-.75}if(1!==t){const e=_a.reduceColor(o.valueAsRGBA,t);if(e){const t=w.addColor(e,!0);if(""!==t)return qa(t)}}}break}}const r=qa(w.addColor(t.color,!0));switch(n){case"dotted":case"dashed":r.dashWidth=Ia.formatPX(o*("dashed"===n?2:1)),r.dashGap=Ia.formatPX(o)}return r}function ka(t,e=-1,a=0,n=!1,o=!1){if(t){if(Da(t.style)){const i=parseFloat(t.width);return o?Object.assign({width:Ia.formatPX(2*Math.ceil(i/2)+a)},Oa(t,e)):Object.assign({width:Ia.formatPX(n?Math.ceil(i/2)+a:za(t.width)+a)},Oa(t,e,!0))}return Object.assign({width:Ia.formatPX(za(t.width)+a)},Oa(t))}}function Ma(t){const e=w.addColor(t);if(""!==e)return{color:`@color/${e}`}}function Da(t){switch(t){case"groove":case"ridge":case"inset":case"outset":return!0;default:return!1}}function Ba(t,e,a,n,o,i,r=0,s){const l=za(e.width),c=Math.max(1,Math.floor(l/3)),d=r>0?Ia.formatPX(r):"";let h="-"+Ia.formatPX(c+r);t.push({top:a?d:h,right:n?d:h,bottom:o?d:h,left:i?d:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Ia.formatPX(c)},Oa(e)),corners:s}});const u=Ia.formatPX(l-c+r);h="-"+u,t.push({top:a?u:h,right:n?u:h,bottom:o?u:h,left:i?u:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Ia.formatPX(c)},Oa(e)),corners:s}})}function Xa(t,e,a){const n="initial"===t||"unset"===t;return-1===t.indexOf(" ")&&-1!==e.indexOf(" ")?Ca.CHAR.LOWERCASE.test(t)?`${n?a:t} 0px`:`${a} ${t}`:n?"0px":t}function Wa(t,e=21,a){const n={type:t.type,item:!1},o=e>=21;switch(t.type){case"conic":{const e=t.center;n.type="sweep",o?(n.centerX=""+2*e.left,n.centerY=""+2*e.top):(n.centerX=Ia.formatPercent(e.leftAsPercent),n.centerY=Ia.formatPercent(e.topAsPercent));break}case"radial":{const e=t.center,a=t.radius;o?(n.gradientRadius=""+a,n.centerX=""+e.left,n.centerY=""+e.top):(n.gradientRadius=Ia.formatPX(a),n.centerX=Ia.formatPercent(e.leftAsPercent),n.centerY=Ia.formatPercent(e.topAsPercent));break}case"linear":{const e=t.dimension,o=e.width,i=e.height,r=t.angle;let s=t.angleExtent.x,l=t.angleExtent.y;r<=90?(l+=i,n.startX="0",n.startY=""+i):r<=180?(n.startX="0",n.startY="0"):r<=270?(s+=o,n.startX=""+o,n.startY="0"):(s+=o,l+=i,n.startX=""+o,n.startY=""+i),n.endX=Na.truncate(s,a),n.endY=Na.truncate(l,a);break}}const i=t.colorStops;return o?n.item=$a(i):(n.startColor=`@color/${w.addColor(i[0].color,!0)}`,n.endColor=`@color/${w.addColor(i[i.length-1].color,!0)}`,i.length>2&&(n.centerColor=`@color/${w.addColor(i[Math.floor(i.length/2)].color,!0)}`)),n}function Ga(t,e,a,n,o){if(o){const i=e.orientation,r="cover"===a||"contain"===a?-1:1;if("left"===t||"right"===t){if("cover"===a)return 0;if(Ia.isPercent(4===i.length?i[1]:i[0])){const a="left"===t?e.leftAsPercent:e.rightAsPercent;let i=a*(n.width-o.width);return-1===r&&(i=Math.abs(i),a>0&&(i*=-1)),i}}else{if("contain"===a)return 0;if(Ia.isPercent(4===i.length?i[3]:i[1])){const a="top"===t?e.topAsPercent:e.bottomAsPercent;let i=a*(n.height-o.height);return-1===r&&(i=Math.abs(i),a>0&&(i*=-1)),i}}}return e[t]}function Va(t,e,a=!0){const n=[{"xmlns:android":l.android,item:[]}],o=a?void 0:Ma(t.backgroundColor);if(o&&n[0].item.push({shape:{"android:shape":"rectangle",solid:o}}),e)for(const t of e)n[0].item.push(t.gradient?{shape:{"android:shape":"rectangle",gradient:t.gradient}}:t);return n}function Ha(t,e,a){w.addTheme({name:t,parent:e,items:{"android:windowBackground":a,"android:windowFullscreen":"true"}})}function Fa(t){const e=za(t.width);return"double"===t.style&&2===e?3:e}const za=t=>Math.round(parseFloat(t)),qa=t=>({color:`@color/${t}`,dashWidth:"",dashGap:""}),Ua=t=>Da(t.style)||"double"===t.style&&za(t.width)>1;function $a(t,e){const a=[];for(const n of t)a.push({color:`@color/${w.addColor(n.color,!0)}`,offset:Na.truncate(n.offset,e)});return a}function ja(t,e,a=0,n=0,o){return o?(a=Na.truncate(a,o),n=Na.truncate(n,o),t=Na.truncate(a+t,o),e=Na.truncate(n+e,o)):(t+=a,e+=n),`M${a},${n} ${t},${n} ${t},${e} ${a},${e} Z`}class Ya extends squared.base.Extension{constructor(){super(...arguments),this.options={autoSizeBackgroundImage:!0,drawOutlineAsInsetBorder:!0},this.eventOnly=!0}afterInit(){this._resourceSvgInstance=this.application.controllerHandler.localSettings.svg.enabled?this.application.builtInExtensions[a.RESOURCE_SVG]:void 0}afterResources(){const t=this.application.userSettings;function e(e,a){let n=w.insertStoredAsset("drawables",`${e.tagName.toLowerCase()}_${e.controlId}`,a);""!==n&&(n=`@drawable/${n}`,e.documentBody?Ha(t.manifestThemeName,t.manifestParentThemeName,n):e.android("background",n,!1))}for(const a of this.application.processing.cache){const n=a.data(w.KEY_NAME,"boxStyle");if(n&&a.hasResource(Ra.NODE_RESOURCE.BOX_STYLE)){if(a.inputElement){const t=a.companion;if(t&&!t.visible&&"LABEL"===t.tagName&&!w.isInheritedStyle(t,"backgroundColor")){const e=t.data(w.KEY_NAME,"boxStyle");e&&e.backgroundColor&&(n.backgroundColor=e.backgroundColor)}}const o=this.getDrawableImages(a,n);let[i,r]=this.getDrawableBorder(a,n,[n.borderTop,n.borderRight,n.borderBottom,n.borderLeft],n.border,o,this.options.drawOutlineAsInsetBorder&&n.outline?Fa(n.outline):0,!1);const s=void 0===i&&void 0===r;if(n.outline&&(this.options.drawOutlineAsInsetBorder||s)){const[t,e]=this.getDrawableBorder(a,n,[n.outline,n.outline,n.outline,n.outline],s?n.outline:void 0);s?(i=t,r=e):r&&e&&Pa.concatArray(r[0].item,e[0].item)}if(i)e(a,La.applyTemplate("shape",Ea,i));else if(r)e(a,La.applyTemplate("layer-list",Sa,r));else if(n.backgroundColor){let e=w.addColor(n.backgroundColor);if(""!==e)if(e=`@color/${e}`,a.documentBody)Ha(t.manifestThemeName,t.manifestParentThemeName,e);else{const t=a.data(w.KEY_NAME,"fontStyle");t?t.backgroundColor=n.backgroundColor:a.android("background",e,!1)}}}}}getDrawableBorder(t,e,a,n,o,i=0,r=!0){const s=[],c=r?void 0:function(t){if(t){if(1===t.length)return{radius:t[0]};{let e;if(8===t.length){e=[];for(let a=0;a<t.length;a+=2)e.push(Ia.formatPX((parseFloat(t[a])+parseFloat(t[a+1]))/2))}else e=t;const a=["topLeft","topRight","bottomRight","bottomLeft"],n={};let o=!1;for(let t=0;t<e.length;t++)"0px"!==e[t]&&(n[`${a[t]}Radius`]=e[t],o=!0);if(o)return n}}}(e.borderRadius),d=i>0?Ia.formatPX(i):"";let h,u,p,m=!0;for(let t=0;t<a.length;t++){const e=a[t];e?(m&&h&&(m=Pa.isEqual(h,e)),h=e,s[t]=!0):s[t]=!1}if(n&&!Ua(n)||void 0===h&&(c||o&&o.length)){const t=!!n&&ka(n);o&&o.length||i>0?(p=Va(e,o,r),(c||t)&&p[0].item.push({top:d,right:d,left:d,bottom:d,shape:{"android:shape":"rectangle",corners:c,stroke:t}})):u=function(t,e,a){return[{"xmlns:android":l.android,"android:shape":"rectangle",stroke:t,solid:e,corners:a}]}(t,r?void 0:Ma(e.backgroundColor),c)}else if(h)if(p=Va(e,o,r),m&&!Da(h.style)){const t=za(h.width);if("double"===h.style&&t>1)Ba(p[0].item,h,s[0],s[1],s[2],s[3],i,c);else{const e="-"+Ia.formatPX(t+i);p[0].item.push({top:s[0]?d:e,right:s[1]?d:e,bottom:s[2]?d:e,left:s[3]?d:e,shape:{"android:shape":"rectangle",corners:c,stroke:ka(h)}})}}else{function g(t,e,n=0){const o=a[e];if(o){const a=za(o.width);if("double"===o.style&&a>1)Ba(t.item,o,0===e,1===e,2===e,3===e,i,c);else{const r=a>1&&Da(o.style);if(r){const s="-"+Ia.formatPX(a+i);t.item.push({top:0===e?"":s,right:1===e?"":s,bottom:2===e?"":s,left:3===e?"":s,shape:{"android:shape":"rectangle",stroke:ka(o,e,n,r,!0)}})}const s="-"+Ia.formatPX((r?Math.ceil(a/2):a)+i);t.item.push({top:0===e?d:s,right:1===e?d:s,bottom:2===e?d:s,left:3===e?d:s,shape:{"android:shape":"rectangle",corners:c,stroke:ka(o,e,n,r)}})}}}g(p[0],0),g(p[0],1),g(p[0],3),g(p[0],2)}return[u,p]}getDrawableImages(e,a){const n=a.backgroundRepeat.split(Ca.XML.SEPARATOR),o=a.backgroundSize.split(Ca.XML.SEPARATOR),i=a.backgroundPositionX.split(Ca.XML.SEPARATOR),r=a.backgroundPositionY.split(Ca.XML.SEPARATOR),s=[],c=[],d=[],h=[];let u=0,p=!0;if(e.hasResource(Ra.NODE_RESOURCE.IMAGE_SOURCE)){if(a.backgroundImage){for(u=a.backgroundImage.length;o.length<u;)Pa.concatArray(o,o.slice(0));o.length=u;for(let t=0,l=0;t<u;t++){let h=a.backgroundImage[t],p=!1;if("string"==typeof h){if("initial"!==h){if(this._resourceSvgInstance){const[t,a]=this._resourceSvgInstance.createSvgElement(e,h);if(t&&a){const n=this._resourceSvgInstance.createSvgDrawable(e,a);""!==n&&(s[l]=n,d[l]={width:a.width.baseVal.value,height:a.height.baseVal.value},p=!0),t.removeChild(a)}}if(!p){const t=Ca.CSS.URL.exec(h);if(t)if(t[1].startsWith("data:image/")){const e=this.application.resourceHandler.getRawData(t[1]);e&&e.base64&&(s[l]=e.filename.substring(0,e.filename.lastIndexOf(".")),d[l]={width:e.width,height:e.height},this.application.resourceHandler.writeRawImage(e.filename,e.base64),p=!0)}else h=Pa.resolvePath(t[1]),s[l]=w.addImage({mdpi:h}),""!==s[l]&&(d[l]=this.application.resourceHandler.getImage(h),p=!0)}}}else if(h.colorStops.length>1){const t=Wa(h,e.localSettings.targetAPI);t&&(s[l]=t,d[l]=h.dimension,p=!0)}if(p){const a=i[t]||i[t-1],n=r[t]||r[t-1];c[l]=Ia.getBackgroundPosition(`${Xa(a,n,"left")} ${Xa(n,a,"top")}`,e.actualDimension,e.fontSize),l++}else n.splice(t,1),o.splice(t,1),u--}}if(e.extracted){0===u&&(n.length=0,o.length=0);const t=e.extracted.filter(t=>t.visible&&(t.imageElement||"INPUT_IMAGE"===t.tagName));for(let a=0,i=u;a<t.length;a++){const r=t[a],l=r.element,h=this.application.resourceHandler.addImageSrc(l);""!==h&&(s[i]=h,n[i]="no-repeat",o[i]=`${r.actualWidth}px ${r.actualHeight}px`,c[i]=Ia.getBackgroundPosition("INPUT_IMAGE"===r.tagName?"0px 0px":`${r.bounds.left-e.bounds.left}px ${r.bounds.top-e.bounds.top}px`,e.actualDimension,e.fontSize),d[i]=this.application.resourceHandler.getImage(l.src),i++)}}u=s.length}let m=!1,g=!1;for(let t=u-1;t>=0;t--){const i=s[t];if(!Pa.hasValue(i))continue;const r=e.bounds,u=c[t],b={bitmap:!1,rotate:!1,gradient:!1};let y=d[t];!y||0!==y.width&&0!==y.height||(y=void 0);let T=0,A=0,E=0,S=0;if("string"==typeof i){function f(t,e,a=!1){(2===u.orientation.length||a)&&(u[t]=0),u[e]=0}const s=`@drawable/${i}`;let l="",c="";if("repeat-x"!==n[t])switch(u.horizontal){case"0%":case"left":f("left","right"),l=e.localizeString("left");break;case"50%":case"center":f("left","right",!0),l="center_horizontal";break;case"100%":case"right":f("right","left"),l=e.localizeString("right");break;default:l+=e.localizeString(0!==u.right?"right":"left")}else{if(y)for(;u.left>0;)u.left-=y.width;else u.left=0;u.right=0,l=e.localizeString("left")}if("repeat-y"!==n[t])switch(u.vertical){case"0%":case"top":f("top","bottom"),c+="top";break;case"50%":case"center":f("top","bottom",!0),c+="center_vertical";break;case"100%":case"bottom":f("bottom","top"),c+="bottom";break;default:c+=0!==u.bottom?"bottom":"top"}else{if(y)for(;u.top>0;)u.top-=y.height;else u.top=0;u.bottom=0,c="top"}let d,h=0,w=0,x="",v="",R="";switch(n[t]){case"repeat":x="repeat";break;case"repeat-x":v="repeat";break;case"repeat-y":R="repeat";break;default:x="disabled"}if(y){if(""!==l&&"repeat"===R&&y.width<r.width){switch(l){case"start":case"left":u.left=e.borderLeftWidth,u.right=0;break;case"end":case"right":u.left=0,u.right=e.borderRightWidth;break;case"center_horizontal":u.left=0,u.right=0}h=y.width}if(""!==c&&"repeat"===v&&y.height<r.height){switch(c){case"top":u.top=e.borderTopWidth,u.bottom=0,b.gravity=c,c="";break;case"bottom":u.top=0,u.bottom=e.borderBottomWidth,b.gravity=c,c="";break;case"center_vertical":u.top=0,u.bottom=0,b.gravity=c,c=""}w=y.height}e.blockStatic&&!e.hasWidth||(y.width>=r.width&&(v="","repeat"===x&&(R="repeat",x="")),y.height>=r.height&&(R="","repeat"===x&&(v="repeat",x="")))}switch(o[t]){case"auto":case"auto auto":case"initial":case"contain":break;case"100% 100%":l="fill_horizontal",c="fill_vertical";case"cover":d="",x="",v="",R="";break;case"100%":l="fill_horizontal",v="","repeat"===x&&(x="",R="repeat");break;default:o[t].split(" ").forEach((t,a)=>{"auto"!==t&&(0===a?"100%"===t?l="fill_horizontal":h=e.parseUnit(t,!0,!1):"100%"===t?c="fill_vertical":w=e.parseUnit(t,!1,!1))})}if(y){const n=a.backgroundClip,i=()=>"fill_horizontal"!==l&&"repeat"!==x&&"repeat"!==v,s=()=>"fill_vertical"!==c&&"repeat"!==x&&"repeat"!==R;switch(o[t]){case"cover":if(y.width<r.width||y.height<r.height){if(h=0,y.height<r.height){w=y.height*Math.max(r.width/y.width,r.height/y.height)}else w=0;d="top|center_horizontal|fill_horizontal"}else h=0,w=0,d="fill";p=!1;break;case"contain":if(y.width!==r.width&&y.height!==r.height){const t=Math.min(r.width/y.width,r.height/y.height);h=y.width*t,w=y.height*t}else h=0,w=0;p=!1;break;default:0===h&&w>0&&i()&&(h=y.width*(0===w?r.height:w)/y.height),0===w&&h>0&&s()&&(w=y.height*(0===h?r.width:h)/y.width)}n?(0===h?h=r.width:h+=e.contentBoxWidth,0===w?w=r.height:w+=e.contentBoxHeight,h-=n.left+n.right,w-=n.top+n.bottom,n.left>n.right?S=n.left-n.right:n.left<n.right&&(A=n.right-n.left),n.top>n.bottom?T=n.top-n.bottom:n.top<n.bottom&&(E=n.bottom-n.top)):0===h&&0===w&&y.width<e.bounds.width&&y.height<e.bounds.height&&i()&&s()&&(h=y.width,w=y.height),h>0&&(b.width=Ia.formatPX(h)),w>0&&(b.height=Ia.formatPX(w))}void 0===d&&("center_horizontal"===l&&"center_vertical"===c?d="center":"fill_horizontal"===l&&"fill_vertical"===c?d="fill":(d="",""!==l&&(d+=l),""!==c&&(d+=(""!==d?"|":"")+c))),e.documentBody||"repeat"===x||"repeat"===v||"repeat"===R?(e.documentBody&&(""!==d?(/fill(?!_)/.test(d)||(d+="|fill"),b.gravity=d,d=""):b.gravity="fill"),b.bitmap=[{src:s,gravity:d,tileMode:x,tileModeX:v,tileModeY:R}]):(b.drawable=s,b.gravity=d,("center"===d||d.startsWith("center_horizontal"))&&(m=!0)),g=!0}else if(i.item){let a,n;y?(a=Math.round(y.width),n=Math.round(y.height)):(a=Math.round(e.actualWidth),n=Math.round(e.actualHeight)),o[t].split(" ").some(t=>"100%"!==t&&Ia.isLength(t,!0))&&(b.width=Ia.formatPX(a),b.height=Ia.formatPX(n));const r=w.insertStoredAsset("drawables",`${e.tagName.toLowerCase()}_${e.controlId}_gradient_${t+1}`,La.applyTemplate("vector",va,[{"xmlns:android":l.android,"xmlns:aapt":l.aapt,"android:width":b.width||Ia.formatPX(a),"android:height":b.height||Ia.formatPX(n),"android:viewportWidth":""+a,"android:viewportHeight":""+n,path:{pathData:ja(a,n),"aapt:attr":{name:"android:fillColor",gradient:i}}}]));""!==r&&(b.drawable=`@drawable/${r}`,u.static&&(b.gravity="fill"))}else b.gradient=i,u.static&&(b.gravity="fill");(b.drawable||b.bitmap||b.gradient)&&(0!==u.bottom?(b.bottom=Ia.formatPX(Ga("bottom",u,o[t],e.bounds,y)+E),E=0):0!==u.top&&(b.top=Ia.formatPX(Ga("top",u,o[t],e.bounds,y)+T),T=0),0!==u.right?(b.right=Ia.formatPX(Ga("right",u,o[t],e.bounds,y)+A),A=0):0!==u.left&&(b.left=Ia.formatPX(Ga("left",u,o[t],e.bounds,y)+S),S=0),0!==T&&(b.top=Ia.formatPX(T)),0!==A&&(b.right=Ia.formatPX(A)),0!==E&&(b.bottom=Ia.formatPX(E)),0!==S&&(b.left=Ia.formatPX(S)),h.push(b))}if(this.options.autoSizeBackgroundImage&&g&&p&&!e.is(t.IMAGE)&&!e.documentRoot&&e.renderParent&&!e.renderParent.tableElement){let t=0,a=0;for(const e of d)e&&(t=Math.max(t,e.width),a=Math.max(a,e.height));if(0===t){let n=e;for(;n&&(n.hasWidth&&(t=n.bounds.width),n.hasHeight&&(a=n.bounds.height),!(t>0&&a>0||n.documentBody)&&n.pageFlow);)n=n.actualParent}if(!((e.has("width",2,{map:"initial",not:"100%"})||e.blockStatic&&m)&&e.pageFlow||!(0===t||e.bounds.width<t))){const t=e.bounds.width-(e.contentBox?e.contentBoxWidth:0);t>0&&e.css("width",Ia.formatPX(t),!0)}if((!e.has("height",2,{map:"initial",not:"100%"})||!e.pageFlow)&&(0===a||e.bounds.height<a)){const t=e.bounds.height-(e.contentBox?e.contentBoxHeight:0);t>0&&(e.css("height",Ia.formatPX(t),!0),e.marginBottom<0&&e.modifyBox(8))}}return h}}const Za=squared.lib.regex,Ka=squared.lib.util,Ja=w.STORED,Qa=/[\s\n]*<([\w\-.]+)[^<]*?(\w+):(\w+)="(-?[\d.]+(?:px|dp|sp))"/,tn=/\d(px|dp|sp)$/,en=["android","app"];function an(t,e,a){for(const[n,o]of t.entries())if(n.startsWith(e)&&a===o)return n;return t.has(e)&&t.get(e)!==a?w.generateId("dimen",e):e}const nn=t=>Ka.fromLastIndexOf(t,".");class on extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={};for(const e of this.application.session.cache)if(e.visible){const a=e.tagName.toLowerCase();void 0===t[a]&&(t[a]={});for(const n of en){const o=e.namespace(n);for(const i in o)if("text"!==i){const r=o[i].trim();if(tn.test(r)){const o=`${n},${i},${r}`;void 0===t[a][o]&&(t[a][o]=[]),t[a][o].push(e)}}}}for(const e in t){const a=t[e];for(const t in a){const[n,o,i]=t.split(Za.XML.SEPARATOR),r=an(Ja.dimens,`${nn(e)}_${Ka.convertUnderscore(o)}`,i);for(const e of a[t])e[n](o,`@dimen/${r}`);Ja.dimens.set(r,i)}}}afterFinalize(){for(const t of this.application.layouts){let e,a=t.content;for(;null!==(e=Qa.exec(a));)if("text"!==e[3]){const t=an(Ja.dimens,`${nn(e[1]).toLowerCase()}_${Ka.convertUnderscore(e[3])}`,e[4]);Ja.dimens.set(t,e[4]),a=a.replace(e[0],e[0].replace(e[4],`@dimen/${t}`))}t.content=a}}}const rn=squared.base.lib.enumeration,sn=squared.lib.regex,ln=squared.lib.util,cn=/^(\w*?)(?:_(\d+))?$/,dn={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},hn={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},un={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},pn={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},mn={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'},gn=w.STORED;function fn(t,e,a){for(const n of e.split(";"))for(let e=0;e<t.length;e++){let o=-1,i="";for(const a in t[e])if(a===n){o=e,i=a,e=t.length;break}if(-1!==o){t[o][i]=ln.filterArray(t[o][i],t=>!a.includes(t)),0===t[o][i].length&&delete t[o][i];break}}}class bn extends squared.base.Extension{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:!1},this.eventOnly=!0}afterParseDocument(){const t={},e={};for(const e of this.application.session.cache)e.visible&&e.data(w.KEY_NAME,"fontStyle")&&e.hasResource(rn.NODE_RESOURCE.FONT_STYLE)&&(void 0===t[e.tagName]&&(t[e.tagName]=[]),t[e.tagName].push(e));const a=Object.keys(mn);for(const n in t){const o=[];for(let e of t[n]){const t=Object.assign({},e.data(w.KEY_NAME,"fontStyle")),{id:n,companion:i}=e;i&&!i.visible&&"LABEL"===i.tagName&&(e=i),t.backgroundColor&&(t.backgroundColor=w.addColor(t.backgroundColor)),t.fontFamily&&t.fontFamily.replace(sn.ESCAPE.DOUBLEQUOTE,"").split(sn.XML.SEPARATOR).some((a,n,o)=>{let i=(a=ln.trimString(a,"'")).toLowerCase();if(!this.options.disableFontAlias&&un[i]&&(i=this.options.systemDefaultFont||un[i]),dn[i]&&e.localSettings.targetAPI>=dn[i]||!this.options.disableFontAlias&&hn[i]&&e.localSettings.targetAPI>=dn[hn[i]])return t.fontFamily=i,"normal"===t.fontStyle&&(t.fontStyle=""),("400"===t.fontWeight||e.localSettings.targetAPI<26)&&(t.fontWeight=""),!0;if(t.fontStyle&&t.fontWeight){let e=!0;if(void 0===this.application.resourceHandler.getFont(a,t.fontStyle,t.fontWeight))if(this.application.resourceHandler.getFont(a,t.fontStyle))e=!1;else{if(n<o.length-1)return!1;n>0&&(i=(a=ln.trimString(o[0],"'")).toLowerCase())}if(i=ln.convertWord(i),e){const e=w.STORED.fonts.get(i)||{};e[a+"|"+t.fontStyle+"|"+t.fontWeight]=pn[t.fontWeight]||t.fontWeight,w.STORED.fonts.set(i,e)}return t.fontFamily=`@font/${i}`,t.fontStyle="",t.fontWeight="",!0}return!1}),t.color=w.addColor(t.color);for(let e=0;e<a.length;e++){const i=t[a[e]];if(i){const t=mn[a[e]]+i+'"';void 0===o[e]&&(o[e]={}),void 0===o[e][t]&&(o[e][t]=[]),o[e][t].push(n)}}}e[n]=o}const n={};for(const a in e){n[a]={};const o=ln.filterArray(e[a],t=>void 0!==t).sort((t,e)=>{let a=0,n=0,o=0,i=0;for(const e in t)a=Math.max(t[e].length,a),o+=t[e].length;for(const t in e)e[t]&&(n=Math.max(e[t].length,n),i+=e[t].length);return a!==n?a>n?-1:1:o!==i?o>i?-1:1:0});do{if(1===o.length){for(const t in o[0])o[0][t].length&&(n[a][t]=o[0][t]);o.length=0}else{const e={};for(let i=0;i<o.length;i++){const r={};for(const n in o[i]){const s=o[i][n];if(0===s.length)continue;if(s.length===t[a].length){e[n]=s,o[i]={};break}const l={};let c=!1;for(let t=0;t<o.length;t++)if(i!==t)for(const e in o[t]){const a=o[t][e];if(a.length)for(const t of s)a.includes(t)&&(void 0===l[e]&&(l[e]=[]),l[e].push(t))}for(const t in l)l[t].length>1&&(r[[n,t].sort().join(";")]=l[t],c=!0);c||(r[n]=s)}if(Object.keys(r).length){const t={},e=new Set,i={};for(const t in r)i[t]=r[t].join(",");for(const a in r)for(const n in r){const o=i[a];if(a!==n&&o===i[n]){void 0===t[o]&&(t[o]=new Set(a.split(";")));for(const e of n.split(";"))t[o].add(e);e.add(a).add(n)}}for(const t of e)delete r[t];for(const t in r)fn(o,t,r[t]),n[a][t]=r[t];for(const e in t){const i=Array.from(t[e]).sort().join(";"),r=ln.objectMap(e.split(sn.XML.SEPARATOR),t=>parseInt(t));fn(o,i,r),n[a][i]=r}}}const i=Object.keys(e);i.length&&(n[a][i.join(";")]=e[i[0]]),ln.spliceArray(o,t=>{for(const e in t)if(t[e].length)return!1;return!0})}}while(o.length)}const o={},i={},r=new Set;for(const t in n){const e=n[t],a=[];for(const t in e){const n=[];for(const e of t.split(";")){const t=sn.XML.ATTRIBUTE.exec(e);t&&n.push({key:t[1],value:t[2]})}a.push({name:"",parent:"",items:n,ids:e[t]})}a.sort((t,e)=>{let a=0,n=0;return t.ids&&e.ids&&(a=t.ids.length,n=e.ids.length),a===n&&(a=t.items.length,n=e.items.length),a===n&&(a=t.items[0].name,n=e.items[0].name),a===n&&(a=t.items[0].value,n=e.items[0].value),a<=n?1:-1});for(let e=0;e<a.length;e++)a[e].name=ln.capitalize(t)+(e>0?`_${e}`:"");o[t]=a}for(const t in o)for(const e of o[t])if(e.ids)for(const t of e.ids)void 0===i[t]&&(i[t]=[]),i[t].push(e.name);for(const t of this.application.session.cache){const e=i[t.id];e&&e.length&&(e.length>1?(r.add(e.join(".")),e.shift()):r.add(e[0]),t.attr("_","style",`@style/${e.join(".")}`))}for(const t of r){const e=[];let a,n="";if(t.split(".").forEach((t,i,r)=>{const s=cn.exec(t);if(s){const l=o[s[1].toUpperCase()][ln.convertInt(s[2])];if(l)if(0===i)n=t,1===r.length?a=l.items:gn.styles.has(t)||gn.styles.set(t,{name:t,parent:"",items:l.items});else{if(a)for(const t of l.items){const e=a.findIndex(e=>e.key===t.key);-1!==e?a[e]=t:a.push(t)}else a=l.items.slice(0);e.push(t)}}}),a)if(0===e.length)gn.styles.set(n,{name:n,parent:"",items:a});else{const t=e.join(".");gn.styles.set(t,{name:t,parent:n,items:a})}}}}squared;class yn extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){for(const t of this.application.session.cache)if(t.renderParent&&t.renderTemplates){const e=[],a=[];if(t.renderEach((t,n)=>{const o=t.dataset.androidInclude||"",i="true"===t.dataset.androidIncludeEnd;if(o||i){const r={item:t,name:o,index:n,merge:"true"===t.dataset.androidIncludeMerge};o&&e.push(r),i&&a.push(r)}}),e.length&&a.length){const n=this.application.controllerHandler;e.length=Math.min(e.length,a.length);for(let t=e.length;t<a.length;t++)a.shift();for(let o=e.length-1;o>=0;o--){const i=e[o];for(let e=0;e<a.length;e++){const o=a[e].index;if(o>=i.index){const r=[];for(let e=i.index;e<=o;e++)r.push(t.renderTemplates[e]),t.renderTemplates[e]=null;const s=i.merge||r.length>1,l=s?1:0;t.renderTemplates[i.index]={type:2,node:r[0].node,content:n.renderNodeStatic("include",{layout:`@layout/${i.name}`},"",""),indent:!0},s||i.item.documentRoot||(i.item.documentRoot=!0);let c=n.cascadeDocument(r,l);s&&(c=n.getEnclosingTag(1,{controlName:"merge",attributes:D(c),content:c})),this.application.saveDocument(i.name,c,"",1/0),a.splice(e,1);break}}}}}}}const Tn=squared.base.lib.enumeration,An=squared.lib.css,En=squared.lib.dom,Sn=squared.lib.util,wn=squared.lib.xml;class xn extends squared.base.Extension{constructor(){super(...arguments),this.options={numberResourceValue:!1,replaceCharacterEntities:!0,fontVariantSmallCapsReduction:.7},this.eventOnly=!0}afterResources(){for(const t of this.application.processing.cache)if(t.hasResource(Tn.NODE_RESOURCE.VALUE_STRING))switch(t.tagName){case"SELECT":{const e=t.element,[a,n]=w.getOptionArray(e);let o;if(!this.options.numberResourceValue&&n&&n.length)o=n;else{const t=a||n;if(t){o=[];for(let e of t)this.options.replaceCharacterEntities&&(e=wn.replaceEntity(e)),""!==(e=w.addString(wn.escapeAmpersand(wn.replaceCharacter(e)),"",this.options.numberResourceValue))&&o.push(`@string/${e}`)}}if(o&&o.length){const e=w.insertStoredAsset("arrays",`${t.controlId}_array`,o);""!==e&&t.android("entries",`@array/${e}`)}break}case"IFRAME":{const e=t.data(w.KEY_NAME,"valueString");w.addString(wn.replaceCharacter(e.value),e.key);break}default:{const e=t.data(w.KEY_NAME,"valueString");if(e){const a=t.renderParent;let n=e.key||e.value,o=e.value;if(a&&a.layoutRelative&&t.alignParent("left")&&!An.isParentStyle(t.element,"whiteSpace","pre","pre-wrap")){const e=t.textContent;let a=0;for(let t=0;t<e.length;t++)switch(e.charCodeAt(t)){case 160:a++;case 32:continue}0===a&&(o=o.replace(/^(\s|&#160;)+/,""))}if("small-caps"===t.css("fontVariant")){t.android("textAllCaps","true");const e=t.data(w.KEY_NAME,"fontStyle");e&&(e.fontSize=`${parseFloat(e.fontSize)*this.options.fontVariantSmallCapsReduction}px`)}switch(t.css("textTransform")){case"uppercase":t.android("textAllCaps","true");break;case"lowercase":o=Sn.lowerCaseString(o);break;case"capitalize":o=Sn.capitalizeString(o)}this.options.replaceCharacterEntities&&(o=wn.replaceEntity(o)),o=wn.escapeAmpersand(wn.replaceCharacter(o));for(const e of t.css("textDecorationLine").split(" "))switch(e){case"underline":o=`<u>${o}</u>`;break;case"line-through":o=`<strike>${o}</strike>`}let i=0;if((t.blockDimension||"table-cell"===t.display)&&(i=t.toFloat("textIndent"))+t.bounds.width<0&&(o=""),0===i){const e=t.actualParent;e&&(e.blockDimension||"table-cell"===e.display)&&t===e.firstChild&&(i=e.toFloat("textIndent"))}if(i>0){const e=En.getTextMetrics(" ",t.css("fontFamily"),t.fontSize);o="&#160;".repeat(Math.max(Math.floor(i/(e&&e.width||t.fontSize/2)),1))+o}""!==(n=w.addString(o,n,this.options.numberResourceValue))&&t.android("text",this.options.numberResourceValue||!Sn.isNumber(n)?`@string/${n}`:n,!1)}}}}}const vn=squared.lib.regex,Rn=squared.lib.util,_n=/(\w+):(\w+)="([^"]+)"/,In=w.STORED;class Nn extends squared.base.Extension{constructor(){super(...arguments),this.eventOnly=!0}beforeCascade(){const t={},e={};for(const a of this.application.session.cache)if(a.visible&&a.controlId){const n=a.renderChildren;if(n.length>1){const o=new Map;let i=!0,r="";for(let t=0;t<n.length;t++){const e=n[t];let a=!1;for(const n of e.combine("_","android"))if(!a&&n.startsWith("style=")){if(0===t)r=n;else if(""===r||n!==r){i=!1;break}a=!0}else o.set(n,(o.get(n)||0)+1);if(!i||!a&&""!==r){i=!1;break}}if(i){for(const[t,e]of o.entries())e!==n.length&&o.delete(t);if(o.size>1){""!==r&&(r=Rn.trimString(r.substring(r.indexOf("/")+1),'"'));const i=[];for(const t of o.keys()){const e=_n.exec(t);if(e){for(const t of n)t.delete(e[1],e[2]);i.push(e[0])}}i.sort();const s=i.join(";");let l="";for(const t in e)if(e[t]===s){l=t;break}""!==r&&l.startsWith(`${r}.`)||(t[l=(""!==r?r+".":"")+Rn.capitalize(a.controlId)]=i,e[l]=s);for(const t of n)t.attr("_","style",`@style/${l}`)}}}}for(const e in t){const a=[];for(const n in t[e]){const o=vn.XML.ATTRIBUTE.exec(t[e][n]);o&&a.push({key:o[1],value:o[2]})}In.styles.set(e,Object.assign({},O(),{name:e,items:a,ids:[]}))}}}var Cn={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const Pn=["ordering"],Ln={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var On={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":Pn,">":{set:{"^":"android","@":Pn,">":{objectAnimator:Ln.objectAnimator}},objectAnimator:Ln.objectAnimator}},objectAnimator:Ln.objectAnimator}}};squared.svg||(squared.svg={lib:{}});var kn=squared.svg.Svg,Mn=squared.svg.SvgAnimate,Dn=squared.svg.SvgAnimateTransform,Bn=squared.svg.SvgBuild,Xn=squared.svg.SvgG,Wn=squared.svg.SvgPath,Gn=squared.svg.SvgShape;const Vn=squared.lib.util,Hn=squared.lib.css,Fn=squared.lib.math,zn=squared.lib.regex,qn=squared.lib.xml,Un=squared.svg.lib.constant,$n=squared.svg.lib.util,jn=w.STORED,Yn={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"};Un&&Object.assign(Yn,{[Un.KEYSPLINE_NAME["ease-in"]]:Yn.accelerate,[Un.KEYSPLINE_NAME["ease-out"]]:Yn.decelerate,[Un.KEYSPLINE_NAME["ease-in-out"]]:Yn.accelerate_decelerate,[Un.KEYSPLINE_NAME.linear]:Yn.linear});const Zn='<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',Kn={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function Jn(t,e){return t&&t[e]?Yn[t[e]]||to(t[e]):""}function Qn(t){for(const e in Kn)if(Kn[e].includes(t))return Vn.convertCamelCase(e);return""}function to(t){if(Yn[t])return Yn[t];{const e=`path_interpolator_${Vn.convertWord(t)}`;if(!jn.animators.has(e)){const a=Vn.formatString(Zn,...t.split(" "));jn.animators.set(e,a)}return`@anim/${e}`}}function eo(t){const e={};for(let a=0;a<t.length;a++){const n=t[a],o=n.matrix;switch(n.type){case SVGTransform.SVG_TRANSFORM_SCALE:e.scaleX=""+o.a,e.scaleY=""+o.d,n.origin&&(e.pivotX=""+n.origin.x,e.pivotY=""+n.origin.y);break;case SVGTransform.SVG_TRANSFORM_ROTATE:e.rotation=""+n.angle,n.origin?(e.pivotX=""+n.origin.x,e.pivotY=""+n.origin.y):(e.pivotX="0",e.pivotY="0");break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:e.translateX=""+o.e,e.translateY=""+o.f}}return e}function ao(t,e){let a=0,n=0;for(const o of function(t){const e=[];let a=t.parentElement;for(;a&&(e.push(a),!((a=a.parentElement)instanceof HTMLElement)););return e}(t))($n.SVG.svg(o)||$n.SVG.use(o))&&o!==e&&(a+=o.x.baseVal.value,n+=o.y.baseVal.value);return{x:a,y:n}}function no(t,e,a=1,n=1){return e.length&&($n.SVG.circle(t)||$n.SVG.ellipse(t))&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(a!==n||e.length>1&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_SCALE&&t.matrix.a!==t.matrix.d))?oo(t,e):[[],e]}function oo(t,e,a=!1){if(e.length){const o=[],i=[],r=e.slice(0).reverse(),s=e[0].fromCSS?[]:$n.TRANSFORM.rotateOrigin(t).reverse();for(let t=1;t<r.length;t++){const e=r[t],a=r[t-1];if(e.type===a.type){let n;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:(n=$n.MATRIX.clone(e.matrix)).e+=a.matrix.e,n.f+=a.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:(n=$n.MATRIX.clone(e.matrix)).a*=a.matrix.a,n.d*=a.matrix.d}n&&(e.matrix=n,r.splice(--t,1))}}const l=[];function n(){o.push(l.slice(0)),l.length=0}for(const t of r)switch(t.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:i.push(t);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:a||0!==o.length||0!==l.length?(l.push(t),n()):i.push(t);break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;s.length;){const e=s.shift();if(e.angle===t.angle){0===e.x&&0===e.y||(t.origin=e);break}}if(void 0===t.origin&&1===l.length&&l[0].type===SVGTransform.SVG_TRANSFORM_SCALE){l.push(t);continue}case SVGTransform.SVG_TRANSFORM_SCALE:l.length&&n(),l.push(t)}return l.length&&o.push(l),[o.reverse(),i]}return[[],e]}function io(t,e,a,n=!1,o){let i;const r=t[e];return r?i=Array.isArray(r)?""+r[a]:r:n||0!==e||(i=o),i||""}function ro(t){switch(t){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:return uo(t)?"floatType":void 0}}function so(t,e,a,n){const o=new Mn;return o.attributeName=t,o.delay=e,o.duration=1,o.from=n||a,o.to=a,o.fillForwards=!0,o.convertToValues(),o}function lo(t,e=!0){let a=Kn[t];return void 0===a&&e&&uo(t)&&(a=[t]),a}function co(t){switch(t){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function ho(t){switch(t.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return Dn.toRotateList(t.values);case SVGTransform.SVG_TRANSFORM_SCALE:return Dn.toScaleList(t.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return Dn.toTranslateList(t.values)}}function uo(t){switch(t){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function po(t,e=!1){const a=`@color/${w.addColor(t)}`;return e?[a]:a}function mo(t,e){return bo(t.attributeName)?po(e):e.trim()||void 0}function go(t){switch(t){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function fo(t,e,a){const n={type:t.type,item:$a(t.colorStops,a)};switch(t.type){case"radial":{const a=t,o=[];let i,r,s,l;switch(e.element.tagName){case"path":for(const t of Bn.getPathCommands(e.value))Vn.concatArray(o,t.value);case"polygon":if($n.SVG.polygon(e.element)&&Vn.concatArray(o,Bn.clonePoints(e.element.points)),!o.length)return;[i,r,s,l]=Bn.minMaxPoints(o),s-=i,l-=r;break;default:if($n.SVG.rect(e.element)){const t=e.element;i=t.x.baseVal.value,r=t.y.baseVal.value,s=t.width.baseVal.value,l=t.height.baseVal.value}else if($n.SVG.circle(e.element)){const t=e.element;i=t.cx.baseVal.value-t.r.baseVal.value,r=t.cy.baseVal.value-t.r.baseVal.value,l=s=2*t.r.baseVal.value}else{if(!$n.SVG.ellipse(e.element))return;{const t=e.element;i=t.cx.baseVal.value-t.rx.baseVal.value,r=t.cy.baseVal.value-t.ry.baseVal.value,s=2*t.rx.baseVal.value,l=2*t.ry.baseVal.value}}}n.centerX=""+(i+s*To(a.cxAsString)),n.centerY=""+(r+l*To(a.cyAsString)),n.gradientRadius=""+(s+l)/2*(Hn.isPercent(a.rAsString)?parseFloat(a.rAsString)/100:1),a.spreadMethod&&(n.tileMode=go(a.spreadMethod));break}case"linear":{const e=t;n.startX=""+e.x1,n.startY=""+e.y1,n.endX=""+e.x2,n.endY=""+e.y2,e.spreadMethod&&(n.tileMode=go(e.spreadMethod))}}return n}const bo=t=>"fill"===t||"stroke"===t,yo=(t,e,a=-1)=>`${t.name}_${e+(-1!==a?`_${a+1}`:"")}`,To=t=>Hn.isPercent(t)?parseFloat(t)/100:.5,Ao=t=>`@drawable/${t}`,Eo=(t="")=>({ordering:t,objectAnimator:[]});class So extends squared.base.Extension{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=!0,this.VECTOR_DATA=new Map,this.ANIMATE_DATA=new Map,this.ANIMATE_TARGET=new Map,this.IMAGE_DATA=[],this.SYNCHRONIZE_MODE=0,this.NAMESPACE_AAPT=!1}beforeInit(){Bn&&(Bn.setName(),this.application.controllerHandler.localSettings.svg.enabled=!0)}afterResources(){for(const t of this.application.processing.cache){let e,a;if(t.imageElement?[e,a]=this.createSvgElement(t,t.src):t.svgElement&&(a=t.element),a){const n=this.createSvgDrawable(t,a);""!==n&&(t.localSettings.targetAPI>=21?t.android("src",Ao(n)):t.app("srcCompat",Ao(n))),t.hasWidth||t.android("layout_width","wrap_content"),t.hasHeight||t.android("layout_height","wrap_content"),t.baseline&&t.android("baselineAlignBottom","true"),e&&e.removeChild(a)}}}createSvgElement(t,e){let a,n;const o=zn.CSS.URL.exec(e);if(o&&(e=o[1]),e.toLowerCase().endsWith(".svg")||e.startsWith("data:image/svg+xml")){const o=this.application.resourceHandler.getRawData(e);o&&((a=(t.actualParent||t.documentParent).element).insertAdjacentHTML("beforeend",o.content),a.lastElementChild instanceof SVGSVGElement&&(0===(n=a.lastElementChild).width.baseVal.value&&n.setAttribute("width",""+t.actualWidth),0===n.height.baseVal.value&&n.setAttribute("height",""+t.actualHeight)))}return[a,n]}createSvgDrawable(t,e){const a=new kn(e),n=t.localSettings.targetAPI>=23;this.SVG_INSTANCE=a,this.VECTOR_DATA.clear(),this.ANIMATE_DATA.clear(),this.ANIMATE_TARGET.clear(),this.IMAGE_DATA.length=0,this.NAMESPACE_AAPT=!1,this.SYNCHRONIZE_MODE=2|(n?32:64);const o=`${t.tagName}_${Vn.convertWord(t.controlId,!0)}_viewbox`.toLowerCase(),i=(t,e)=>o+(t?`_${t}`:"")+(this.IMAGE_DATA.length?"_vector":"")+(e?`_${e.toLowerCase()}`:"");a.build({exclude:this.options.transformExclude,residual:no,precision:this.options.floatPrecisionValue}),a.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,framesPerSecond:this.application.controllerHandler.userSettings.framesPerSecond,precision:this.options.floatPrecisionValue}),this.queueAnimations(a,a.name,t=>"opacity"===t.attributeName);const r=this.parseVectorData(a);let s=w.insertStoredAsset("drawables",i(),qn.applyTemplate("vector",va,[{"xmlns:android":l.android,"xmlns:aapt":this.NAMESPACE_AAPT?l.aapt:"","android:name":a.name,"android:width":Hn.formatPX(a.width),"android:height":Hn.formatPX(a.height),"android:viewportWidth":""+(a.viewBox.width||a.width),"android:viewportHeight":""+(a.viewBox.height||a.height),"android:alpha":parseFloat(a.opacity)<1?""+a.opacity:"",include:r}])),c="";if(this.ANIMATE_DATA.size){const t=[{"xmlns:android":l.android,"android:drawable":Ao(s),target:[]}];function d(e,a){if(a.set.length){let n=!1;if(a.set.length>1&&a.set.every(t=>""===t.ordering)){const t={set:[],objectAnimator:[]};for(const e of a.set)Vn.concatArray(t.set,e.set),Vn.concatArray(t.objectAnimator,e.objectAnimator);a=t}for(;1===a.set.length;){const t=a.set[0];if(n&&""!==t.ordering||0!==t.objectAnimator.length)break;a=t,n=!0}a["xmlns:android"]=l.android,n&&(a["android:ordering"]=a.ordering,a.ordering=void 0);const o={name:e,animation:w.insertStoredAsset("animators",i("anim",e),qn.applyTemplate("set",On,[a]))};""!==o.animation&&(o.animation=`@anim/${o.animation}`,t[0].target.push(o))}}for(const[t,e]of this.ANIMATE_DATA.entries()){const a=new Map,o=new Map,i=[],r=[],s=[],l=[],c=[],[h,u]=Vn.partitionArray(e.animate,t=>void 0!==t.companion),p={set:[],objectAnimator:[]};for(let t=0;t<u.length;t++){const e=u[t];if(e.setterType)Kn[e.attributeName]&&Vn.isString(e.to)&&(e.duration>0&&e.fillReplace?r.push(e):i.push(e));else if(Bn.isAnimate(e)){const l=Vn.filterArray(h,t=>t.companion.value===e);if(l.length){l.sort((t,e)=>t.companion.key>=e.companion.key?1:0);const n=[],o=[];for(let t=0;t<l.length;t++){const a=l[t];a.companion.key<=0?(n.push(a),0===t&&e.delay>0&&(a.delay+=e.delay,e.delay=0)):o.push(a)}n.push(e),Vn.concatArray(n,o),a.set(`sequentially_companion_${t}`,n)}else{const t=e.synchronized;if(t)if(Bn.isAnimateTransform(e)){const a=o.get(t.value)||[];a.push(e),o.set(t.value,a)}else{const n=a.get(t.value)||[];n.push(e),a.set(t.value,n)}else Bn.isAnimateTransform(e)&&e.expandToValues(),-1===e.iterationCount?r.push(e):!(!e.fromToType||Bn.isAnimateTransform(e)&&e.transformOrigin)||n&&"pathType"!==ro(e.attributeName)?e.fillReplace?r.push(e):i.push(e):s.push([e])}}}i.length&&s.push(i);for(const[t,e]of a.entries())t.startsWith("sequentially_companion")?s.push(e):s.push(e.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of o.values())c.push(t.sort((t,e)=>t.synchronized&&e.synchronized&&t.synchronized.key>=e.synchronized.key?1:-1));for(const t of r)l.push([[t]]);[s,c,...l].forEach((t,a)=>{if(0===t.length)return;const o={ordering:0===a||1===t.length?"":"sequentially",set:[],objectAnimator:[]};for(const i of t){let t="",r=!1,s=!1,l=!0;a<=1&&i.some(t=>!!t.synchronized&&""!==t.synchronized.value)?(Bn.isAnimateTransform(i[0])||(t="sequentially"),r=!0,l=!1):a<=1&&i.some(t=>!!t.synchronized&&""===t.synchronized.value)?(t="sequentially",r=!0,s=!0):a<=1&&i.some(t=>void 0!==t.companion)?t="sequentially":(a>0&&(t="sequentially"),a>1&&Bn.isAnimateTransform(i[0])&&(s=!0));const c=Eo(),d=Eo(),h=Eo(),u=Eo(),p=[];(r?Vn.partitionArray(i,t=>-1!==t.iterationCount):[i]).forEach((i,m)=>{1===m&&i.length>1&&(h.ordering="sequentially");const g=new Map;for(const f of i){const b=ro(f.attributeName);if(void 0===b)continue;const y=f.delay>0;let T,A=!1;const E=(t,e)=>{Vn.isString(e)&&-1===c.objectAnimator.findIndex(e=>e.propertyName===t)&&c.objectAnimator.push(this.createPropertyValue(t,e,"0",b))},S=(t,e,a)=>{if(!r&&f.fillReplace&&void 0!==b){let n,o=f.replaceValue;if(o||(A?o=uo(t):f.parent&&Bn.isShape(f.parent)&&f.parent.path&&(o="pathData"===t?f.parent.path.value:f.parent.path[Qn(t)]),o||(o=f.baseValue)),e&&e.length){const t=e[e.length-1];if(Vn.isArray(t.propertyValuesHolder)){const e=t.propertyValuesHolder[t.propertyValuesHolder.length-1];n=e.keyframe[e.keyframe.length-1].value}else n=t.valueTo}if(Vn.isString(o)&&o!==n&&(o=mo(f,o))){switch(t){case"trimPathStart":case"trimPathEnd":o=o.split(" ")["trimPathStart"===t?0:1]}u.objectAnimator.push(this.createPropertyValue(t,o,"1",b,"pathType"===b?n:"",a?""+a:""))}T&&(t.endsWith("X")?u.objectAnimator.push(this.createPropertyValue("translateX","0","1",b)):t.endsWith("Y")&&u.objectAnimator.push(this.createPropertyValue("translateY","0","1",b)))}};if(f.setterType){const t=lo(f.attributeName);if(t){const e=bo(f.attributeName)?po(f.to,!0):f.to.trim().split(" ");if(e.length===t.length&&!e.some(t=>""===t)){let n,o;for(let i=0;i<t.length;i++){let r;"pathType"===b?r=e[i]:y&&f.baseValue&&(r=mo(f,f.baseValue.trim().split(" ")[i]));const s=this.createPropertyValue(t[i],e[i],"1",b,r,f.delay>0?""+f.delay:"");a>1?(h.objectAnimator.push(s),S(t[i],void 0,a>1?f.duration:0)):f.companion&&f.companion.key<=0?(void 0===n&&(n=[]),n.push(s)):f.companion&&f.companion.key>0?(void 0===o&&(o=[]),o.push(s)):p.push(s)}n&&Vn.concatArray(c.objectAnimator,n),o&&Vn.concatArray(u.objectAnimator,o)}}}else if(Bn.isAnimate(f)){let c,u=s;const p=this.createPropertyValue("","",""+f.duration,b,"",f.delay>0?""+f.delay:"",c=1===m?i.length>1?"0":"-1":-1!==f.iterationCount?""+Math.ceil(f.iterationCount-1):"-1"),w=[];let x,v;if(r||"pathType"!==p.valueType)if(Bn.asAnimateTransform(f))x=co(f.type),v=ho(f),x&&v&&(s&&0===f.keyTimes[0]&&(u=!1),(u||y)&&Vn.concatArray(w,Vn.objectMap(x,t=>uo(t)||"0")),T=f.transformOrigin),A=!0;else if(Bn.asAnimateMotion(f)){if(x=co(f.type),v=ho(f),x&&v){const t=f.rotateValues;if(t&&t.length===v.length){x.push("rotation");for(let e=0;e<v.length;e++)v[e].push(t[e])}}A=!0}else switch(x=lo(f.attributeName),p.valueType){case"intType":v=Vn.objectMap(f.values,t=>""+Vn.convertInt(t)),y&&f.baseValue&&Vn.concatArray(w,Vn.replaceMap(Bn.parseCoordinates(f.baseValue),t=>""+Math.trunc(t)));break;case"floatType":v="stroke-dasharray"===f.attributeName?Vn.objectMap(f.values,t=>Vn.replaceMap(t.split(" "),t=>parseFloat(t))):f.values,y&&f.baseValue&&Vn.concatArray(w,Vn.replaceMap(Bn.parseCoordinates(f.baseValue),t=>""+t));break;default:if(v=f.values.slice(0),bo(f.attributeName)){y&&f.baseValue&&Vn.concatArray(w,po(f.baseValue,!0));for(let t=0;t<v.length;t++)""!==v[t]&&(v[t]=po(v[t]))}}else if(e.pathData){let t,a;f.parent&&Bn.isShape(f.parent)&&(a=f.parent,f.parent.path&&(t=f.parent.path.transformed)),x=["pathData"],v=Wn.extrapolate(f.attributeName,e.pathData,f.values,t,a,this.options.floatPrecisionValue)}if(void 0===f.keySplines&&(f.timingFunction?p.interpolator=to(f.timingFunction):""!==this.options.animateInterpolator&&(p.interpolator=this.options.animateInterpolator)),v&&x){const i=f.synchronized?f.synchronized.key+f.synchronized.value:0!==a||x.length>1?JSON.stringify(p):"",c=f.keyTimes;for(let a=0;a<x.length;a++){const b=x[a];if(u&&E(b,w[a]),l&&c.length>1)if(n&&"pathType"!==p.valueType){!u&&y&&E(b,w[a]);const t=g.get(i)||[],e=[];for(let t=0;t<c.length;t++){let n=io(v,t,a,!0);n&&"floatType"===p.valueType&&(n=Fn.truncate(n,this.options.floatPrecisionValue)),e.push({interpolator:t>0&&""!==n&&"pivotX"!==b&&"pivotY"!==b?Jn(f.keySplines,t-1):"",fraction:0===c[t]&&""===n?"":Fn.truncate(c[t],this.options.floatPrecisionKeyTime),value:n})}t.push({propertyName:b,keyframe:e}),g.has(i)||(""!==i&&g.set(i,t),(0===m?d:h).objectAnimator.push(Object.assign({},p,{propertyValuesHolder:t}))),T=void 0}else{t="sequentially";const n=Eo("sequentially"),i=d.objectAnimator;for(let t=0;t<c.length;t++){const o=Object.assign({},p,{propertyName:b,startOffset:0===t?""+(f.delay+(c[t]>0?Math.floor(c[t]*f.duration):0)):"",propertyValuesHolder:!1});let r=io(v,t,a,!1,"pathType"===p.valueType?e.pathData:f.baseValue);if(r){let l;if(0===t?(o.valueFrom=!s&&y?w[a]:"pathType"===p.valueType?e.pathData||""+v[0]:f.baseValue||f.replaceValue||"",l=0):(o.valueFrom=""+io(v,t-1,a),l=Math.floor((c[t]-c[t-1])*f.duration)),"floatType"===p.valueType&&(r=Fn.truncate(r,this.options.floatPrecisionValue)),T&&T[t]){let e,a=0;if(b.endsWith("X")?(e="translateX",a=T[t].x):b.endsWith("Y")&&(e="translateY",a=T[t].y),e){const t=this.createPropertyValue(e,Fn.truncate(a,this.options.floatPrecisionValue),""+l,"floatType");t.interpolator=to(Un.KEYSPLINE_NAME["step-start"]),n.objectAnimator.push(t)}}t>0&&(o.interpolator=Jn(f.keySplines,t-1)),o.duration=""+l,o.valueTo=r,i.push(o)}}n.objectAnimator.length&&o.set.push(n)}else{const t=Object.assign({},p,{propertyName:b,interpolator:f.duration>1?Jn(f.keySplines,0):"",propertyValuesHolder:!1});if(Array.isArray(v[0])){const e=v[v.length-1][a];if(v.length>1){const n=v[0][a];n!==e&&(t.valueFrom=""+n)}t.valueTo=""+e}else{let n;v.length>1?(n=""+v[0],t.valueTo=""+v[v.length-1]):(n=f.from||(!s&&y?w[a]:""),t.valueTo=f.to),"pathType"===p.valueType?t.valueFrom=n||e.pathData||t.valueTo:n&&n!==t.valueTo&&(t.valueFrom=mo(f,n))}t.valueTo&&("floatType"===p.valueType&&(t.valueTo=Fn.truncate(t.valueTo,this.options.floatPrecisionValue)),(0===m?d:h).objectAnimator.push(t))}0!==m||r||-1===f.iterationCount||S(b,d.objectAnimator)}y&&T&&T.length&&(E("translateX","0"),E("translateY","0"))}}}});const m=d.objectAnimator.length>0||h.objectAnimator.length>0;"sequentially"===t&&(m&&1===c.objectAnimator.length&&(d.objectAnimator.unshift(c.objectAnimator[0]),c.objectAnimator.length=0),1===h.objectAnimator.length&&(d.objectAnimator.push(h.objectAnimator[0]),h.objectAnimator.length=0),m&&1===u.objectAnimator.length&&(d.objectAnimator.push(u.objectAnimator[0]),u.objectAnimator.length=0)),0===c.objectAnimator.length&&0===h.objectAnimator.length&&0===u.objectAnimator.length&&("sequentially"===t&&1===d.objectAnimator.length&&(t=""),"sequentially"!==o.ordering&&"sequentially"!==t&&(Vn.concatArray(p,d.objectAnimator),d.objectAnimator.length=0)),(d.objectAnimator.length||h.objectAnimator.length)&&(c.objectAnimator.length&&(o.ordering="sequentially",o.set.push(c)),d.objectAnimator.length&&(d.ordering=t,o.set.push(d)),h.objectAnimator.length&&(o.ordering="sequentially",o.set.push(h)),u.objectAnimator.length&&(o.ordering="sequentially",o.set.push(u))),p.length&&Vn.concatArray(o.objectAnimator,p)}(o.set.length||o.objectAnimator.length)&&p.set.push(o)}),d(t,p)}for(const[t,e]of this.ANIMATE_TARGET.entries()){let a;const n=(t,e,n,o,i)=>{void 0===a&&(a=[]),a.push(this.createPropertyValue(t,e,"0",n,o,i))};for(const t of e.animate)if(Bn.asAnimateMotion(t)&&t.parent&&Bn.isShape(t.parent)){const e=t.parent.path;e&&e.value!==e.baseValue&&(n("pathData",e.baseValue,"pathType",e.value),-1===t.iterationCount||t.setterType||n("pathData",e.value,"pathType",e.baseValue,""+t.getTotalDuration()))}a&&d(t,{set:[{set:void 0,objectAnimator:a}],objectAnimator:void 0})}t[0].target&&(s=w.insertStoredAsset("drawables",i("anim"),qn.applyTemplate("animated-vector",Cn,t)))}if(this.IMAGE_DATA.length){const t=[];""!==s&&t.push({drawable:Ao(s)});const e=[{"xmlns:android":l.android,item:t}];for(const e of this.IMAGE_DATA){const n=a.width/a.viewBox.width,o=a.height/a.viewBox.height;let i=e.getBaseValue("x",0)*n,r=e.getBaseValue("y",0)*o,s=e.getBaseValue("width",0),l=e.getBaseValue("height",0);const c=ao(e.element,a.element);i+=c.x,r+=c.y,l*=o;const d={width:Hn.formatPX(s*=n),height:Hn.formatPX(l),left:0!==i?Hn.formatPX(i):"",top:0!==r?Hn.formatPX(r):""},h=Ao(w.addImage({mdpi:e.href}));e.rotateAngle?d.rotate={drawable:h,fromDegrees:""+e.rotateAngle,visible:e.visible?"true":"false"}:d.drawable=h,t.push(d)}c=w.insertStoredAsset("drawables",o,qn.applyTemplate("layer-list",Sa,e))}else c=s;return c}afterFinalize(){this.application.controllerHandler.localSettings.svg.enabled=!1}parseVectorData(t,e=0){const a=this.createGroup(t),n=e+a.length;let o="";for(const e of t)if(e.visible)if(Bn.isShape(e)){if(e.path&&e.path.value){const[t,a]=this.createPath(e,e.path),i=[];if(e.path.strokeWidth&&(e.path.strokeDasharray||e.path.strokeDashoffset)){const n=this.ANIMATE_DATA.get(e.name);if(void 0===n||n.animate.every(t=>t.attributeName.startsWith("stroke-dash"))){const[o,r,s]=e.path.extractStrokeDash(n&&n.animate,this.options.floatPrecisionValue);if(o){const l=yo(e,"stroke"),c={name:l};""!==r&&(t.pathData=r),""!==s&&(c["clip-path"]=[{pathData:s}]);for(let e=0;e<o.length;e++){const a=0===e?t:Object.assign({},t);a.name=`${l}_${e}`,n&&this.ANIMATE_DATA.set(a.name,{element:n.element,animate:Vn.filterArray(n.animate,t=>void 0===t.id||t.id===e)}),a.trimPathStart=Fn.truncate(o[e].start,this.options.floatPrecisionValue),a.trimPathEnd=Fn.truncate(o[e].end,this.options.floatPrecisionValue),i.push(a)}a.unshift(c),n&&this.ANIMATE_DATA.delete(e.name)}}}if(0===i.length&&i.push(t),a.length){a[a.length-1].path=i,o+=qn.applyTemplate("group",xa,a,n+1)}else o+=qn.applyTemplate("path",wa,i,n+1)}}else if(Bn.isContainer(e))e.length&&(o+=this.parseVectorData(e,n));else if(Bn.asImage(e)&&!Bn.asPattern(t)){if(0===e.width||0===e.height){const t=this.application.resourceHandler.getImage(e.href);t&&t.width>0&&t.height>0&&(e.width=t.width,e.height=t.height,e.setRect())}e.extract(this.options.transformExclude.image),this.IMAGE_DATA.push(e)}return a.length?(a[a.length-1].include=o,qn.applyTemplate("group",xa,a,e+1)):o}createGroup(t){const e=[],a=[],n={"clip-path":e},o={"clip-path":a},i=[],r={};if(!(t!==this.SVG_INSTANCE&&Bn.asSvg(t)||Bn.asUseSymbol(t)||Bn.asUsePattern(t))||0===t.x&&0===t.y||(r.name=yo(t,"main"),r.translateX=""+t.x,r.translateY=""+t.y),""!==t.clipRegion&&this.createClipPath(t,e,t.clipRegion),(e.length||Object.keys(r).length)&&(Object.assign(n,r),i.push(n)),t!==this.SVG_INSTANCE){const e={},[n]=oo(t.element,t.transforms,!0),r=yo(t,"animate");if((Bn.asG(t)||Bn.asUseSymbol(t))&&Vn.isString(t.clipPath)&&this.createClipPath(t,a,t.clipPath)&&(e.name=r),this.queueAnimations(t,r,t=>Bn.asAnimateTransform(t))&&(e.name=r),Object.keys(e).length&&(Object.assign(o,e),i.push(o)),n.length){const e=[];for(const t of n)i.push(eo(t)),Vn.concatArray(e,t);t.transformed=e.reverse()}}return i}createPath(t,e){const a={name:t.name},n=[],o=[];if(Bn.asUse(t)&&Vn.isString(t.clipPath)&&this.createClipPath(t,o,t.clipPath),Vn.isString(e.clipPath)){const t=new Gn(e.element);t.build({exclude:this.options.transformExclude,residual:no,precision:this.options.floatPrecisionValue}),t.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),this.createClipPath(t,o,e.clipPath)}const i={},r=yo(t,"group");if(this.queueAnimations(t,r,t=>Bn.isAnimateTransform(t),"",t.name)?i.name=r:o.length&&(i.name=""),!Bn.asUse(t)||0===t.x&&0===t.y||(i.translateX=""+t.x,i.translateY=""+t.y),o.length&&(i["clip-path"]=o),Object.keys(i).length&&n.push(i),e.transformResidual)for(const t of e.transformResidual)n.push(eo(t));const s=function(t){let e=parseFloat(t.opacity),a=t.parent;for(;a;){const t=parseFloat(a.opacity||"1");!isNaN(t)&&t<1&&(e*=t),a=a.parent}return e}(t),l=Bn.asUse(t);for(let n in e){let o=l&&t[n]||e[n];if(Vn.isString(o)){switch(n){case"name":break;case"value":n="pathData";break;case"fill":case"stroke":if(n+="Color","none"===o||"stroke"!==n&&void 0!==a["aapt:attr"])continue;{const t=w.addColor(o);""!==t&&(o=`@color/${t}`)}break;case"fillPattern":const t=this.SVG_INSTANCE.definitions.gradient.get(o);let i=!1;if(t)switch(e.element.tagName){case"path":if(!/[zZ]\s*$/.test(e.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const a=fo(t,e,this.options.floatPrecisionValue);a&&(o={name:"android:fillColor",gradient:a},i=!0);break}}if(!i)continue;n="aapt:attr",a.fillColor="",this.NAMESPACE_AAPT=!0;break;case"fillRule":if("evenodd"!==o)continue;n="fillType",o="evenOdd";break;case"strokeWidth":if("0"===o)continue;break;case"fillOpacity":case"strokeOpacity":if("1"===(o=""+(Vn.isNumber(o)?parseFloat(o):1)*s))continue;n="fillOpacity"===n?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===o)continue;n="strokeLineCap";break;case"strokeLinejoin":if("miter"===o)continue;n="strokeLineJoin";break;case"strokeMiterlimit":if("4"===o)continue;n="strokeMiterLimit";break;default:continue}a[n]=o}}const c=new Map,d=[],h=[],u=e.value;let p=u,m=0;for(const e of t.animations)if(Bn.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);c.set(t,{index:m,time:t,to:e.transformFrom,reset:!1,animate:e}),-1!==e.iterationCount&&e.fillReplace&&(c.has(t=e.delay+e.iterationCount*e.duration)||c.set(t,{index:m,time:t,to:u,reset:!0})),m++}const g=Array.from(c.values()).sort((t,e)=>t.time<e.time?-1:1);for(let t=0;t<g.length;t++){const e=g[t];if(!e.reset||e.to!==p){let a=!0;if(e.reset)t:for(let n=0;n<t;n++){const o=g[n];if(!o.reset)for(let n=t+1;n<g.length;n++)switch(g[n].index){case o.index:a=!1;case e.index:break t}}else{const a=[],n=new Set;for(let e=0;e<t;e++){const t=g[e];a[t.index]=a[t.index]?2:1}for(let t=0;t<a.length;t++)if(1===a[t]){const e=g.find(e=>e.index===t&&void 0!==e.animate);e&&e.animate&&n.add(e.animate.type)}for(const t of n){const a=co(t);if(a){const n=$n.TRANSFORM.typeAsValue(t).split(" ");for(let t=0;t<n.length;t++)d.push(so(a[t],e.time,n[t],""))}}}a&&(h.push(so("d",e.time,e.to)),p=e.to)}}if(this.queueAnimations(t,a.name,t=>(Bn.asAnimate(t)||Bn.asSet(t))&&"clip-path"!==t.attributeName,u)||0!==h.length||i.name!==r&&(a.name=""),d.length){const t=this.ANIMATE_DATA.get(r);t&&Vn.concatArray(t.animate,d)}if(h.length){const e=this.ANIMATE_DATA.get(a.name);e?Vn.concatArray(e.animate,h):this.ANIMATE_DATA.set(a.name,{element:t.element,animate:h,pathData:u})}return[a,n]}createClipPath(t,e,a){let n=0;return a.split(";").forEach((a,o,i)=>{if("#"===a.charAt(0)){const t=this.SVG_INSTANCE.definitions.clipPath.get(a);if(t){const a=new Xn(t);a.build({exclude:this.options.transformExclude,residual:no,precision:this.options.floatPrecisionValue}),a.synchronize({keyTimeMode:this.SYNCHRONIZE_MODE,precision:this.options.floatPrecisionValue}),a.each(t=>{if(t.path&&t.path.value){let a=yo(t,"clip_path",i.length>1?o+1:-1);this.queueAnimations(t,a,t=>Bn.asAnimate(t)||Bn.asSet(t),t.path.value)||(a=""),e.push({name:a,pathData:t.path.value})}})}n++}else{let r=yo(t,"clip_path",i.length>1?o+1:-1);this.queueAnimations(t,r,t=>(Bn.asAnimate(t)||Bn.asSet(t))&&"clip-path"===t.attributeName,a)||(r=""),e.push({name:r,pathData:a}),n++}}),n>0}queueAnimations(t,e,a,n="",o){if(t.animations.length){const i=Vn.filterArray(t.animations,(t,e,n)=>!t.paused&&(t.duration>=0||t.setterType)&&a(t,e,n));if(i.length)return this.ANIMATE_DATA.set(e,{element:t.element,animate:i,pathData:n}),o&&this.ANIMATE_TARGET.set(o,{element:t.element,animate:i,pathData:n}),!0}return!1}createPropertyValue(t,e,a,n,o="",i="",r="0"){return{propertyName:t,startOffset:i,duration:a,repeatCount:r,valueType:n,valueFrom:Vn.isNumber(o)?Fn.truncate(o,this.options.floatPrecisionValue):o,valueTo:Vn.isNumber(e)?Fn.truncate(e,this.options.floatPrecisionValue):e,propertyValuesHolder:!1}}}const wo={builtInExtensions:["android.delegate.max-width-height","android.delegate.fixed","android.delegate.negative-x","android.delegate.negative-viewport","android.delegate.percent","android.delegate.scrollbar","android.delegate.radiogroup","squared.external","squared.substitute","squared.sprite","squared.css-grid","squared.flexbox","squared.table","squared.list","squared.grid","squared.relative","squared.verticalalign","squared.whitespace","squared.accessibility","android.constraint.guideline","android.resource.includes","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles"],targetAPI:28,resolutionDPI:160,framesPerSecond:60,supportRTL:!0,preloadImages:!0,supportNegativeLeftTop:!0,exclusionsDisabled:!1,customizationsOverwritePrivilege:!0,showAttributes:!0,convertPixels:"dp",insertSpaces:4,handleExtensionsAsync:!0,autoCloseOnWrite:!0,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputDirectory:"app/src/main",outputMainFileName:"activity_main.xml",outputArchiveFileType:"zip",outputMaxProcessingTime:30};let xo,vo,Ro,_o=!1;const Io=t=>_o&&!!t&&(t.closed||!(!xo||!xo.userSettings.autoCloseOnWrite||xo.initialized||xo.closed||(xo.finalize(),0))),No={base:{Controller:It,File:Ut,Resource:w,View:at},extensions:{Accessibility:jt,CssGrid:re,External:se,Flexbox:fe,Grid:Ee,List:Ne,Relative:Pe,Sprite:De,Substitute:Be,Table:He,VerticalAlign:ze,WhiteSpace:qe,constraint:{Guideline:Ze},delegate:{Fixed:Qe,MaxWidthHeight:ea,NegativeViewport:na,NegativeX:sa,Percent:ca,RadioGroup:ma,ScrollBar:Aa},resource:{Background:Ya,Dimens:on,Fonts:bn,Includes:yn,Strings:xn,Styles:Nn,Svg:So}},lib:{constant:h,customization:I,enumeration:e,util:B},system:{customize(t,e,a){if(R[t]){const n=R[t].assign;return n[e]?Object.assign(n[e],a):n[e]=a,n[e]}},addXmlNs(t,e){l[t]=e},writeLayoutAllXml:(t=!1)=>vo&&Io(xo)?vo.layoutAllToXml(xo.layouts,t):{},writeResourceAllXml:(t=!1)=>vo&&Io(xo)?vo.resourceAllToXml(t):{},writeResourceStringXml:(t=!1)=>vo&&Io(xo)?vo.resourceStringToXml(t):[],writeResourceArrayXml:(t=!1)=>vo&&Io(xo)?vo.resourceStringArrayToXml(t):[],writeResourceFontXml:(t=!1)=>vo&&Io(xo)?vo.resourceFontToXml(t):[],writeResourceColorXml:(t=!1)=>vo&&Io(xo)?vo.resourceColorToXml(t):[],writeResourceStyleXml:(t=!1)=>vo&&Io(xo)?vo.resourceStyleToXml(t):[],writeResourceDimenXml:(t=!1)=>vo&&Io(xo)?vo.resourceDimenToXml(t):[],writeResourceDrawableXml:(t=!1)=>vo&&Io(xo)?vo.resourceDrawableToXml(t):[],writeResourceDrawableImageXml:(t=!1)=>vo&&Io(xo)?vo.resourceDrawableImageToXml(t):[],writeResourceAnimXml:(t=!1)=>vo&&Io(xo)?vo.resourceAnimToXml(t):[]},create(){const t=squared.base.lib.constant.EXT_NAME,e=a;return xo=new squared.base.Application(2,at,It,w,Nt),vo=new Ut(xo.resourceHandler),Ro=Object.assign({},wo),Object.assign(xo.builtInExtensions,{[t.EXTERNAL]:new se(t.EXTERNAL,2),[t.SUBSTITUTE]:new Be(t.SUBSTITUTE,2),[t.SPRITE]:new De(t.SPRITE,2),[t.CSS_GRID]:new re(t.CSS_GRID,2),[t.FLEXBOX]:new fe(t.FLEXBOX,2),[t.TABLE]:new He(t.TABLE,2,["TABLE"]),[t.LIST]:new Ne(t.LIST,2,["DIV","UL","OL","DL"]),[t.GRID]:new Ee(t.GRID,2,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[t.RELATIVE]:new Pe(t.RELATIVE,2),[t.VERTICAL_ALIGN]:new ze(t.VERTICAL_ALIGN,2),[t.WHITESPACE]:new qe(t.WHITESPACE,2),[t.ACCESSIBILITY]:new jt(t.ACCESSIBILITY,2),[e.CONSTRAINT_GUIDELINE]:new Ze(e.CONSTRAINT_GUIDELINE,2),[e.DELEGATE_FIXED]:new Qe(e.DELEGATE_FIXED,2),[e.DELEGATE_MAXWIDTHHEIGHT]:new ea(e.DELEGATE_MAXWIDTHHEIGHT,2),[e.DELEGATE_NEGATIVEVIEWPORT]:new na(e.DELEGATE_NEGATIVEVIEWPORT,2),[e.DELEGATE_NEGATIVEX]:new sa(e.DELEGATE_NEGATIVEX,2),[e.DELEGATE_PERCENT]:new ca(e.DELEGATE_PERCENT,2),[e.DELEGATE_RADIOGROUP]:new ma(e.DELEGATE_RADIOGROUP,2),[e.DELEGATE_SCROLLBAR]:new Aa(e.DELEGATE_SCROLLBAR,2),[e.RESOURCE_INCLUDES]:new yn(e.RESOURCE_INCLUDES,2),[e.RESOURCE_BACKGROUND]:new Ya(e.RESOURCE_BACKGROUND,2),[e.RESOURCE_SVG]:new So(e.RESOURCE_SVG,2),[e.RESOURCE_STRINGS]:new xn(e.RESOURCE_STRINGS,2),[e.RESOURCE_FONTS]:new bn(e.RESOURCE_FONTS,2),[e.RESOURCE_DIMENS]:new on(e.RESOURCE_DIMENS,2),[e.RESOURCE_STYLES]:new Nn(e.RESOURCE_STYLES,2)}),_o=!0,{application:xo,framework:2,userSettings:Ro}},cached:()=>_o?{application:xo,framework:2,userSettings:Ro}:No.create()};return No}();
