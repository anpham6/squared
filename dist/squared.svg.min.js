this.squared=this.squared||{},this.squared.svg=function(t){"use strict";var e=squared.lib.base.Pattern;const{TRANSFORM:s}=squared.lib.regex,{CSS_PROPERTIES:i,calculateStyle:n,calculateVar:a,calculateVarAsString:r,convertAngle:o,getFontSize:l,getStyle:c,hasEm:h,isLength:u,isPercent:f,parseUnit:d}=squared.lib.css,{getNamedItem:g}=squared.lib.dom,{convertRadian:p,hypotenuse:m,truncateFraction:y,truncateTrailingZero:v}=squared.lib.math,{getElementCache:S}=squared.lib.session,{convertCamelCase:b,convertPercent:k,endsWith:T,resolvePath:A,splitPair:x,startsWith:E}=squared.lib.util,R=new e(/(\w+)\([^)]+\)/g),w=new e(/rotate\((-?[\d.]+)(?:\s*,?\s+(-?[\d.]+))?(?:\s*,?\s+(-?[\d.]+))?\)/g),V=new Map;function _(t,e,s,i,n){u(i)?e[s]=d(i,C(t,i)):f(i)&&(e[s]=k(i)*n)}function P(t,e){var s;const i=t.dataset.baseValue;if(i)try{const t=JSON.parse(i);if(t)return(null===(s=t[e])||void 0===s?void 0:s.toString().trim())||""}catch(t){}return""}function N(t,e){const s=S(t,"styleMap");return s&&s[b(e)]}function M(t,e){const s=b(e);return P(t,e)||t.style[s]||N(t,s)}const B=(t,e)=>e?Math.min(t.width,t.height):m(t.width,t.height),C=(t,e)=>h(e)?{fontSize:l(t)}:void 0;Object.assign(i,{alignmentBaseline:{trait:0,value:"auto"},baselineShift:{trait:257,value:"0"},clipRule:{trait:0,value:"nonzero"},colorInterpolation:{trait:0,value:"sRGB"},colorIinterpolationFilters:{trait:0,value:"linearRGB"},cx:{trait:257,value:"0"},cy:{trait:257,value:"0"},dominantBaseline:{trait:0,value:"auto"},fill:{trait:17,value:"black"},fillOpacity:{trait:1,value:"1"},fillRule:{trait:0,value:"nonzero"},floodColor:{trait:17,value:"black"},floodOpacity:{trait:1,value:"1"},lightingColor:{trait:17,value:"white"},markerEnd:{trait:0,value:"none"},markerMid:{trait:0,value:"none"},markerStart:{trait:0,value:"none"},mask:{trait:67,value:["maskImage","maskMode","maskRepeat","maskPosition","maskClip","maskOrigin","maskSize","maskComposite"]},maskComposite:{trait:0,value:"add"},maskClip:{trait:0,value:"border-box"},maskImage:{trait:1,value:"none"},maskMode:{trait:0,value:"match-source"},maskRepeat:{trait:0,value:"no-repeat"},maskOrigin:{trait:0,value:"border-box"},maskPosition:{trait:1,value:"center"},maskSize:{trait:1,value:"auto"},pointerEvents:{trait:0,value:"visiblePainted"},r:{trait:257,value:"0"},rx:{trait:257,value:"auto"},ry:{trait:257,value:"auto"},shapeRendering:{trait:0,value:"auto"},stopColor:{trait:17,value:"black"},stopOpacity:{trait:1,value:"1"},stroke:{trait:17,value:"none"},strokeDasharray:{trait:0,value:"none"},strokeDashoffset:{trait:1,value:"0"},strokeLinecap:{trait:0,value:"butt"},strokeLinejoin:{trait:0,value:"miter"},strokeMiterlimit:{trait:1,value:"4"},strokeOpacity:{trait:1,value:"1"},strokeWidth:{trait:257,value:"1px"},textAnchor:{trait:0,value:"start"},textRendering:{trait:0,value:"auto"},vectorEffect:{trait:0,value:"none"},x:{trait:257,value:"0"},y:{trait:257,value:"0"}});const G=new Map,O="([01](?:\\.\\d+)?)\\s*,?\\s+(-?\\d+(?:\\.\\d+)?)\\s*,?\\s+([01](?:\\.\\d+)?)\\s*,?\\s+(-?\\d+(?:\\.\\d+)?)",L={svg:t=>"svg"===t.tagName,g:t=>"g"===t.tagName,symbol:t=>"symbol"===t.tagName,path:t=>"path"===t.tagName,shape:t=>{switch(t.tagName){case"path":case"line":case"rect":case"ellipse":case"circle":case"polyline":case"polygon":return!0;default:return!1}},image:t=>"image"===t.tagName,use:t=>"use"===t.tagName,line:t=>"line"===t.tagName,rect:t=>"rect"===t.tagName,circle:t=>"circle"===t.tagName,ellipse:t=>"ellipse"===t.tagName,polygon:t=>"polygon"===t.tagName,polyline:t=>"polyline"===t.tagName,clipPath:t=>"clipPath"===t.tagName,pattern:t=>"pattern"===t.tagName,linearGradient:t=>"linearGradient"===t.tagName,radialGradient:t=>"radialGradient"===t.tagName},F={applyX:(t,e,s)=>t.a*e+t.c*s+t.e,applyY:(t,e,s)=>t.b*e+t.d*s+t.f,clone:t=>({a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}),rotate(t){const e=p(t),s=Math.cos(e),i=Math.sin(e);return{a:s,b:i,c:-1*i,d:s,e:0,f:0}},skew:(t=0,e=0)=>({a:1,b:Math.tan(p(e)),c:Math.tan(p(t)),d:1,e:0,f:0}),scale:(t=1,e=1)=>({a:t,b:0,c:0,d:e,e:0,f:0}),translate:(t=0,e=0)=>({a:1,b:0,c:0,d:1,e:t,f:e})},I={create:(t,e,s=0,i=!0,n=!0)=>({type:t,matrix:e,angle:s,method:{x:i,y:n}}),parse(t,e=M(t,"transform")){if(e&&"none"!==e){const i=[];for(R.matcher(e);R.find();){const[e,n]=R.groups();if(E(n,"matrix")){const s=I.matrix(t,e);s&&i.push(I.create(SVGTransform.SVG_TRANSFORM_MATRIX,s))}else if(!T(n,"3d")){const a=T(n,"X"),r=!a&&T(n,"Y");if(E(n,"translate")){const n=s.TRANSLATE.exec(e);if(n){const e=d(n[2],C(t,n[2])),s=!a&&n[3]?d(n[3],C(t,n[3])):0,o=r?0:e,l=r?e:s;i.push(I.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,F.translate(o,l),0))}}else if(E(n,"rotate")){const t=s.ROTATE.exec(e);if(t){const e=o(t[5],t[6]);if(!isNaN(e)){const t=F.rotate(e);a?(t.a=1,t.b=0,t.c=0):r&&(t.b=0,t.c=0,t.d=1),i.push(I.create(SVGTransform.SVG_TRANSFORM_ROTATE,t,e,!a,!r))}}}else if(E(n,"scale")){const t=s.SCALE.exec(e);if(t){const e=r?1:+t[2],s=a?1:r?+t[2]:!a&&t[3]?+t[3]:e;i.push(I.create(SVGTransform.SVG_TRANSFORM_SCALE,F.scale(e,s),0,!r,!a))}}else if(E(n,"skew")){const t=s.SKEW.exec(e);if(t){const e=o(t[2],t[3],0),s=r?0:e,n=r?e:t[4]&&t[5]?o(t[4],t[5],0):0,l=F.skew(s,n);a?i.push(I.create(SVGTransform.SVG_TRANSFORM_SKEWX,l,s,!0,!1)):r?i.push(I.create(SVGTransform.SVG_TRANSFORM_SKEWY,l,n,!1,!0)):(i.push(I.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign(Object.assign({},l),{b:0}),s,!0,!1)),0!==n&&i.push(I.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign(Object.assign({},l),{c:0}),n,!1,!0)))}}}}const n=i.length;if(n){for(let t=0;t<n;++t)i[t].fromStyle=!0;return i}}return null},matrix(t,e=X(t,"transform")){const i=s.MATRIX.exec(e);if(i)switch(i[1]){case"matrix":return{a:+i[2],b:+i[3],c:+i[4],d:+i[5],e:+i[6],f:+i[7]};case"matrix3d":return{a:+i[2],b:+i[3],c:+i[6],d:+i[7],e:+i[14],f:+i[15]}}return null},origin(t,e){const s={x:0,y:0};if(e||(e=X(t,"transform-origin"))){const i=$(t);let n=0,a=0;if(i)({width:n,height:a}=i);else{const e=t.parentElement;if(e instanceof SVGGraphicsElement){const t=e.viewportElement;t&&(L.svg(t)||L.symbol(t))&&({width:n,height:a}=t.viewBox.baseVal)}}n&&a||({width:n,height:a}=t.getBoundingClientRect());const r=e.split(" ");switch(1===r.length&&r.push("center"),r[0]){case"0%":case"left":break;case"100%":case"right":s.x=n;break;case"center":r[0]="50%";default:_(t,s,"x",r[0],n)}switch(r[1]){case"0%":case"top":break;case"100%":case"bottom":s.y=a;break;case"center":r[1]="50%";default:_(t,s,"y",r[1],a)}}return s},rotateOrigin(t,e="transform"){const s=g(t,e),i=[];if(s)for(w.matcher(s);w.find();){const[t,e,s]=w.map((t=>+t||0),1);0!==t&&i.push({angle:t,x:e,y:s})}return i},typeAsName(t){switch(t){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue(t){switch(t){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}};function q(t){const e=t.getBoundingClientRect();return e.x=e.left,e.y=e.top,e}function z(t,e,s){switch(e){case"animationDelay":case"animationDuration":case"animationIterationCount":case"offsetDistance":case"offsetRotate":case"mask":return n(t,e,s);case"fill":case"stroke":case"stopColor":case"floodColor":case"lightingColor":return n(t,"fontColor",s);case"fillOpacity":case"strokeOpacity":case"stopOpacity":case"floodOpacity":return n(t,"opacity",s);case"strokeMiterlimit":{const e=a(t,s,{supportPercent:!1,unitType:32,min:1});return isNaN(e)?"":e.toString()}}const i=$(t)||(t.viewportElement||t.parentElement||t).getBoundingClientRect();switch(e){case"transform":case"transformOrigin":case"offsetAnchor":case"offsetPath":case"clipPath":case"maskImage":case"maskPosition":case"maskSize":case"width":case"height":return n(t,e,s,i);case"baselineShift":return n(t,"verticalAlign",s,i);case"cx":case"x":case"x1":case"x2":{const e=a(t,s,{boundingSize:i.width});return isNaN(e)?"":e.toString()}case"cy":case"y":case"y1":case"y2":{const e=a(t,s,{boundingSize:i.height});return isNaN(e)?"":e.toString()}case"r":{const e=a(t,s,{boundingSize:B(i,!0),min:0});return isNaN(e)?"0":e.toString()}case"rx":{const e=a(t,s,{boundingSize:i.width,min:0});return isNaN(e)?"0":L.rect(t)?Math.min(e,i.width/2).toString():e.toString()}case"ry":{const e=a(t,s,{boundingSize:i.height,min:0});return isNaN(e)?"0":L.rect(t)?Math.min(e,i.height/2).toString():e.toString()}case"strokeDasharray":return r(t,s,{boundingSize:B(i),min:0});case"strokeDashoffset":{const e=a(t,s,{boundingSize:B(i,!0),unitType:32});return isNaN(e)?"":e.toString()}case"strokeWidth":{const e=a(t,s,{boundingSize:B(i),unitType:32,min:0});return isNaN(e)?"":e.toString()}}return""}function X(t,e,s){return M(t,e)||g(t,e)||(s||Array.from(t.style).includes(e))&&c(t).getPropertyValue(e)||""}function D(t,e,s){let i=t,n;do{if(n=X(i,e,s),n&&"inherit"!==n)break;i=i.parentElement}while(i&&!(i instanceof HTMLElement));return n}function Y(t,e,s){const i=g(t,"href")||g(t,"xlink:href");if("#"===i[0]){const s=i.substring(1);if(!e){let s=t.parentElement;for(e=s;s&&!(s.parentElement instanceof HTMLElement);)e=s,s=s.parentElement}if(e){const t=e.querySelectorAll("*");for(let e=0,i=t.length;e<i;++e){const i=t[e];if(i.id.trim()===s&&i instanceof SVGElement)return i}}const n=document.getElementById(s);if(n instanceof SVGElement)return n}else if(s){const[e,n]=x(i,"#");if(e){const i=s[A(e)];if(i){if(document.body.insertAdjacentHTML("beforeend",i),(t=document.body.lastElementChild)instanceof SVGGraphicsElement)return t.style.display="none",t.querySelector(`#${n}`);t&&document.body.removeChild(t)}}}return null}function U(t,e=3){let s=V.get(e);s||(s=new RegExp(`(-?\\d+\\.\\d{${e}})(\\d)\\d*`,"g"),V.set(e,s));let i=t,n;for(;n=s.exec(t);){let t=n[1];+n[2]>=5&&(t=y(+t+1/Math.pow(10,e)).toString()),i=i.replace(n[0],v(t))}return s.lastIndex=0,i}function $(t){let e=t.parentElement;for(;e;){if(L.svg(e)||L.symbol(e)){const t=e.viewBox;if(t){const s=t.baseVal;return s&&s.width&&s.height?s:q(e)}}e=e.parentElement}return null}function W(t,e){let s=0,i=0,n=t.parentElement;for(;n&&n!==e;)(L.svg(n)||L.use(n))&&(s+=n.x.baseVal.value,i+=n.y.baseVal.value),n=n.parentElement;return{x:s,y:i}}function K(t){let e=t,s=/(\d*)\.(\d+)\.(\d+)/g,i;for(;i=s.exec(e);){let e;if(i[1])if(i[3].length>=2)e=i[1]+"."+i[2]+" ."+i[3];else{const t=i[2].length;switch(e=i[1]+".",t){case 1:e+=i[2]+" ."+i[3];break;default:e+=i[2].substring(0,t-1)+" "+i[2][t-1]+"."+i[3]}}else e="."+i[2]+" ."+i[3];t=t.replace(i[0],e+" ")}for(e=t,s=/(\d)([A-Za-z])/g;i=s.exec(e);)t=t.replace(i[0],i[1]+" "+i[2]);for(e=t,s=/([A-Za-z])\s+(\d)/g;i=s.exec(e);)t=t.replace(i[0],i[1]+i[2]);for(e=t,s=/([Aa](?:-?[\d.]+[\s,]+){3}\s*)(0|1)(0|1)(-?[\d.]+)/g;i=s.exec(e);)t=t.replace(i[0],i[1]+" "+i[2]+" "+i[3]+" "+i[4]);for(e=t,s=/((?:-?[\d.]+[\s,]+){3}\s*)0(0|1)(-?[\d.]+)/g;i=s.exec(e);)t:for(let n=s.lastIndex-1;n>=0;--n)switch(e[n]){case"A":case"a":t=t.replace(i[0],e[n]+i[1]+" 0 "+i[2]+" "+i[3]);break t}for(e=t,s=/([A-Za-z\s,])(?:(0+)(\d)|(0{2,}))/g;i=s.exec(e);)t=t.replace(i[0],i[1]+" "+(i[4]?"0 ".repeat(i[4].length):"0 ".repeat(i[2].length)+" "+i[3]));for(e=t,s=/(\d+)-/g;i=s.exec(e);)t=t.replace(i[0],i[1]+" -");return t.replace(/\s{2,}/g," ")}function j(t){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",t),e}function H(t){const e=undefined;return j(t).getTotalLength()}var Z=Object.freeze({__proto__:null,CACHE_VIEWNAME:G,PATTERN_CUBICBEZIER:O,SVG:L,MATRIX:F,TRANSFORM:I,getDOMRect:q,calculateStyle:z,getAttribute:X,getParentAttribute:D,getTargetElement:Y,truncateString:U,getNearestViewBox:$,getRootOffset:W,sanitizePath:K,createPath:j,getPathLength:H}),Q=squared.lib.base.Pattern;const{isAngle:J,parseAngle:tt}=squared.lib.css,{getNamedItem:et}=squared.lib.dom,{absoluteAngle:st,offsetAngleY:it,relativeAngle:nt,truncate:at,truncateFraction:rt}=squared.lib.math,{hasBit:ot,isArray:lt,plainMap:ct,splitPair:ht}=squared.lib.util,ut=new Q(squared.lib.regex.STRING.DECIMAL),ft=new Q(/([A-Za-z])([^A-Za-z]+)?/g);class SvgBuild{static isUse(t){return ot(t.instanceType,1)}static isContainer(t){return ot(t.instanceType,2)}static isElement(t){return ot(t.instanceType,4)}static isShape(t){return ot(t.instanceType,2052)}static isAnimate(t){return ot(t.instanceType,32776)}static isAnimateTransform(t){return ot(t.instanceType,98312)}static asSvg(t){return 18===t.instanceType}static asG(t){return 34===t.instanceType}static asPattern(t){return 258===t.instanceType}static asShapePattern(t){return 514===t.instanceType}static asImage(t){return 8196===t.instanceType}static asUseG(t){return 115===t.instanceType}static asUseSymbol(t){return 131===t.instanceType}static asUseShape(t){return 6149===t.instanceType}static asUseShapePattern(t){return 1539===t.instanceType}static asSet(t){return 8===t.instanceType}static asAnimate(t){return 32776===t.instanceType}static asAnimateTransform(t){return 98312===t.instanceType}static asAnimateMotion(t){return 229384===t.instanceType}static drawCircle(t,e,s,i){return SvgBuild.drawEllipse(t,e,s,s,i)}static drawPolygon(t,e){return t.length>0?SvgBuild.drawPolyline(t,e)+"Z":""}static drawLine(t,e,s=0,i=0,n){return n&&(t=at(t,n),e=at(e,n),s=at(s,n),i=at(i,n)),`M${t},${e} L${s},${i}`}static drawRect(t,e,s=0,i=0,n){return n?(t=at(s+t,n),e=at(i+e,n),s=at(s,n),i=at(i,n)):(t+=s,e+=i),`M${s},${i} ${t},${i} ${t},${e} ${s},${e} Z`}static drawEllipse(t,e,s,i,n){void 0===i&&(i=s);let a=2*s;return n?(t=at(t-s,n),e=at(e,n),s=at(s,n),i=at(i,n),a=at(a,n)):t-=s,`M${t},${e} a${s},${i},0,0,1,${a},0 a${s},${i},0,0,1,-${a},0`}static drawPolyline(t,e){let s="M";const i=t.length;if(e)for(let n=0;n<i;++n){const{x:i,y:a}=t[n];s+=" "+at(i,e)+","+at(a,e)}else for(let e=0;e<i;++e){const{x:i,y:n}=t[e];s+=" "+i+","+n}return s}static drawPath(t,e){let s="";for(let e=0,i=t.length;e<i;++e){const i=t[e];switch(s+=e>0?" "+i.key:i.key,i.key.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":s+=i.coordinates.join(",");break;case"H":s+=i.coordinates[0];break;case"V":s+=i.coordinates[1];break;case"A":s+=`${i.radiusX},${i.radiusY},${i.xAxisRotation},${i.largeArcFlag},${i.sweepFlag},${i.coordinates.join(",")}`}}return e?U(s,e):s}static drawRefit(t,e,s){let i;if(L.path(t)){if(i=et(t,"d"),e&&e.requireRefit){const t=SvgBuild.toPathCommands(i);if(t.length){const n=SvgBuild.toPathPoints(t);n.length&&(e.refitPoints(n),i=SvgBuild.drawPath(SvgBuild.syncPath(t,n),s))}}}else if(L.line(t)){const n=[{x:t.x1.baseVal.value,y:t.y1.baseVal.value},{x:t.x2.baseVal.value,y:t.y2.baseVal.value}];e&&e.requireRefit&&e.refitPoints(n),i=SvgBuild.drawPolyline(n,s)}else if(L.circle(t)||L.ellipse(t)){let n,a;L.ellipse(t)?(n=t.rx.baseVal.value,a=t.ry.baseVal.value):(n=t.r.baseVal.value,a=n);const r=[{x:t.cx.baseVal.value,y:t.cy.baseVal.value,rx:n,ry:a}];e&&e.requireRefit&&e.refitPoints(r);const o=r[0];i=SvgBuild.drawEllipse(o.x,o.y,o.rx,o.ry,s)}else if(L.rect(t)){let n=t.x.baseVal.value,a=t.y.baseVal.value,r=t.width.baseVal.value,o=t.height.baseVal.value;e&&e.requireRefit&&(n=e.refitX(n),a=e.refitY(a),r=e.refitSize(r),o=e.refitSize(o)),i=SvgBuild.drawRect(r,o,n,a,s)}else if(L.polygon(t)||L.polyline(t)){const n=SvgBuild.clonePoints(t.points);e&&e.requireRefit&&e.refitPoints(n),i=L.polygon(t)?SvgBuild.drawPolygon(n,s):SvgBuild.drawPolyline(n,s)}return i||""}static transformRefit(t,e){let s,i,n,a;e&&({transforms:s,parent:i,container:n,precision:a}=e);const r=SvgBuild.toPathCommands(t);if(r.length){let e=SvgBuild.toPathPoints(r);if(e.length){const o=lt(s);o&&(e=SvgBuild.applyTransforms(s,e,i&&I.origin(i.element))),n&&n.requireRefit&&n.refitPoints(e),t=SvgBuild.drawPath(SvgBuild.syncPath(r,e,o),a)}}return t}static toOffsetPath(t,e="auto 0deg"){const s=j(t),i=Math.ceil(s.getTotalLength()),n=[];if(i){const a=[],r=[];let o=0,l=0,c=0,h=0,u=null,f;if(J(e))o=tt(e,0);else{for(const e of SvgBuild.toPathCommands(t))switch(e.key.toUpperCase()){case"M":case"L":case"H":case"V":case"Z":a.push(...e.value),r.push(...new Array(e.value.length).fill(!1));break;case"C":case"S":case"Q":case"T":case"A":a.push(e.end),r.push(!0)}"auto 0deg"!==e&&(l=tt(e.split(" ").pop(),0))}for(let t=0;t<i;++t){const e=s.getPointAtLength(t);if(a.length){const t=a.findIndex((t=>{const s=t.x.toString(),i=t.y.toString();return s===e.x.toPrecision(s.length-(s.includes(".")?1:0))&&i===e.y.toPrecision(i.length-(i.includes(".")?1:0))}));if(-1!==t){const s=a[t+1];s?(f=r[t+1])?(u=SvgBuild.centerOf(a[t],s),o=0):(u=null,o=rt(st(e,s))):u=null,h=0,a.splice(0,t+1),r.splice(0,t+1)}}let i;f?(i=u?rt(nt(u,e)):0,c>0&&c%360==0&&0===Math.floor(i)&&(h=c),i+=h):i=o,i+=l,n.push({key:t,value:e,rotate:i}),c=Math.ceil(i)}}return n}static toPathCommands(t){const e=[];let s=0;for(ft.matcher(t.trim());ft.find();){let t=ft.group(1);if(0===s&&"M"!==t.toUpperCase())break;const i=ft.group(2),n=i?SvgBuild.parseCoordinates(i.trim()):[],a=[];let r=n.length,o,l;if(s>0){const t=e[s-1];o=t.key.toUpperCase(),l=t.end}switch(t.toUpperCase()){case"M":0===s&&(t="M");case"L":r>=2&&(r-=r%2,a.push(n));break;case"H":if(l)for(let e=0;e<r;++e)a.push([n[e],"h"===t?0:l.y]);break;case"V":if(l)for(let e=0;e<r;++e)a.push(["v"===t?0:l.x,n[e]]);break;case"Z":s>0&&(a.push(e[0].coordinates.slice(0,2)),t="Z");break;case"C":if(r>=6){r-=r%6;for(let t=0;t<r;t+=6)a.push(n.slice(t,t+6))}break;case"S":if(r>=4&&("C"===o||"S"===o)){r-=r%4;for(let t=0;t<r;t+=4)a.push(n.slice(t,t+4))}break;case"Q":if(r>=4){r-=r%4;for(let t=0;t<r;t+=4)a.push(n.slice(t,t+4))}break;case"T":if(r>=2&&("Q"===o||"T"===o)){r-=r%2;for(let t=0;t<r;t+=2)a.push(n.slice(t,t+2))}break;case"A":if(r>=7){r-=r%7;for(let t=0;t<r;t+=7)a.push(n.slice(t,t+7))}break;default:continue}for(let s=0,i=a.length;s<i;++s){const i=a[s],n=t.toLowerCase(),r="a"===n?i.splice(0,5):null,o=t===n,c=i.length,h=new Array(c/2);let u=0;for(let t=0;t<c;t+=2){let e=i[t],s=i[t+1];o&&l&&(e+=l.x,s+=l.y),h[u++]={x:e,y:s}}const f={key:t,value:h,start:h[0],end:h[u-1],relative:o,coordinates:i};r&&(f.radiusX=r[0],f.radiusY=r[1],f.xAxisRotation=r[2],f.largeArcFlag=r[3],f.sweepFlag=r[4]),e.push(f),l=f.end}s=e.length}return e}static toPathPoints(t){const e=[];let s=0,i=0;for(let n=0,a=t.length;n<a;++n){const a=t[n],{key:r,relative:o,coordinates:l}=a;for(let t=0,n=l.length;t<n;t+=2){o?(s+=l[t],i+=l[t+1]):(s=l[t],i=l[t+1]);const n={x:s,y:i};"A"===r.toUpperCase()&&(n.rx=a.radiusX,n.ry=a.radiusY),e.push(n)}o&&(a.key=r.toUpperCase())}return e}static syncPath(t,e,s){t:{let i;for(let n=0,a=t.length;n<a;++n){const a=t[n],{key:r,coordinates:o,value:l}=a;if(a.relative){if(!i)break;if(!s||"H"!==r&&"V"!==r){const t=o.length;for(let s=0,n=0;s<t;s+=2){const t=e.shift();if(!t)break t;o[s]=t.x-i.x,o[s+1]=t.y-i.y,"a"===r&&void 0!==t.rx&&void 0!==t.ry&&(a.radiusX=t.rx,a.radiusY=t.ry),l[n++]=t,i=t}a.key=r.toLowerCase()}else{const t=e.shift();if(!t)break t;o[0]=t.x,o[1]=t.y,l[0]=t,a.key="L",a.relative=!1}}else switch(r.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":{const s=o.length;for(let i=0,n=0;i<s;i+=2){const s=e.shift();if(!s){t=[];break t}o[i]=s.x,o[i+1]=s.y,a.value[n++]=s}break}case"A":{const s=e.shift();if(!s){t=[];break t}o[0]=s.x,o[1]=s.y,a.radiusX=s.rx,a.radiusY=s.ry,a.value[0]=s;break}}i=l[l.length-1],a.start=l[0],a.end=i}}return t}static filterTransforms(t,e){const s=[];for(let i=0,n=t.length;i<n;++i){const n=t[i],a=n.type;if(!e||!e.includes(a)){switch(a){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===n.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:{const t=n.matrix;if(1===t.a&&1===t.d)continue;break}case SVGTransform.SVG_TRANSFORM_TRANSLATE:{const t=n.matrix;if(0===t.e&&0===t.f)continue;break}}s.push(n)}}return s}static applyTransforms(t,e,s){const i=SvgBuild.clonePoints(e),n=i.length;for(const e of t.slice(0).reverse()){const t=e.matrix;let a=0,r=0,o=0,l=0;if(s){const{x:i,y:n}=s,{x:c,y:h}=e.method;switch(e.type){case SVGTransform.SVG_TRANSFORM_SCALE:c&&(o=i*(1-t.a)),h&&(l=n*(1-t.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:(c||h)&&(r-=n);break;case SVGTransform.SVG_TRANSFORM_SKEWY:(c||h)&&(a-=i);break;case SVGTransform.SVG_TRANSFORM_ROTATE:c&&(a-=i,o=i+it(e.angle,i)),h&&(r-=n,l=n+it(e.angle,n))}}for(let s=0;s<n;++s){const n=i[s],{x:c,y:h}=n;if(n.x=F.applyX(t,c,h+r)+o,n.y=F.applyY(t,c+a,h)+l,e.type===SVGTransform.SVG_TRANSFORM_SCALE){const{rx:e,ry:s}=n;void 0!==e&&void 0!==s&&(n.rx=F.applyX(t,e,s+r),n.ry=F.applyY(t,e+a,s))}}}return i}static convertTransforms(t){const e=t.numberOfItems,s=new Array(e);for(let i=0;i<e;++i){const{type:e,matrix:n,angle:a}=t.getItem(i);s[i]=I.create(e,n,a)}return s}static convertPoints(t){const e=t.length;if(e%2==0){const s=new Array(e/2);for(let i=0,n=0;i<e;i+=2)s[n++]={x:t[i],y:t[i+1]};return s}return[]}static clonePoints(t){if(Array.isArray(t)){const e=t.length,s=new Array(e);for(let i=0;i<e;++i){const{x:e,y:n,rx:a,ry:r}=t[i],o={x:e,y:n};void 0!==a&&void 0!==r&&(o.rx=a,o.ry=r),s[i]=o}return s}const e=t.numberOfItems,s=new Array(e);for(let i=0;i<e;++i){const{x:e,y:n}=t.getItem(i);s[i]={x:e,y:n}}return s}static minMaxOf(t,e){let{x:s,y:i}=t[0],n=s,a=i;for(let r=1,o=t.length;r<o;++r){const{x:o,y:l}=t[r];if(e&&r>0){const{rx:e,ry:c}=t[r];if(void 0!==e&&void 0!==c){const{x:h,y:u}=t[r-1];let f=(o+h)/2,d=(l+u)/2;o>h?d-=c:o<h&&(d+=c),l<u?f+=e:l>h&&(f-=e),s=Math.min(f,s),n=Math.max(f,n),i=Math.min(d,i),a=Math.max(d,a)}}o<s?s=o:o>n&&(n=o),l<i?i=l:l>a&&(a=l)}return{top:i,right:n,bottom:a,left:s}}static centerOf(...t){const e=this.minMaxOf(t);return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}static boxRectOf(t){const e=[];for(let s=0,i=t.length;s<i;++s)e.push(...SvgBuild.toPathPoints(SvgBuild.toPathCommands(t[s])));return this.minMaxOf(e,!0)}static parsePoints(t){return ct(t.trim().split(/\s+/),(t=>{const[e,s]=ht(t,",");return{x:+e,y:+s}}))}static parseCoordinates(t){const e=[];if(t)for(ut.matcher(t);ut.find();){const t=+ut.group();isNaN(t)||e.push(t)}return e}}const{getNamedItem:dt}=squared.lib.dom;function gt(t,e,s,i,n){for(let a=0,r=t.length;a<r;++a){const r=t[a];r.x+=e,r.y+=s,void 0!==r.rx&&void 0!==r.ry&&(r.rx*=i,r.ry*=n)}}var pt=t=>class extends t{constructor(){super(...arguments),this._baseVal={}}setBaseValue(t,e){if(void 0!==e){if(1===this.verifyBaseValue(t,e))return this._baseVal[t]=e,!0}else switch(t){case"d":return this._baseVal[t]=dt(this.element,"d"),!0;case"points":{const e=this.element[t];if(Array.isArray(e))return this._baseVal[t]=SvgBuild.clonePoints(e),!0;break}default:{const e=this.element[t];if(e){const s=e.baseVal;if(s)return this._baseVal[t]=s.value,!0}break}}return!1}getBaseValue(t,e){var s;return null!==(s=this._baseVal[t])&&void 0!==s?s:this.setBaseValue(t)?void 0:e}refitBaseValue(t,e,s,i=1,n=1){const a=this._baseVal;for(const r in a){const o=a[r];if("string"==typeof o){if("d"===r){const l=SvgBuild.toPathCommands(o),c=SvgBuild.toPathPoints(l);gt(c,t,e,i,n),a[r]=SvgBuild.drawPath(SvgBuild.syncPath(l,c),s)}}else if("number"==typeof o)switch(r){case"cx":case"x1":case"x2":case"x":a[r]+=t;break;case"cy":case"y1":case"y2":case"y":a[r]+=e;break;case"r":a[r]*=Math.min(i,n);break;case"rx":case"width":a[r]*=i;break;case"ry":case"height":a[r]*=n}else Array.isArray(o)&&"points"===r&&gt(o,t,e,i,n)}}verifyBaseValue(t,e){switch(t){case"d":return"string"==typeof e?1:0;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof e?1:0;case"points":return Array.isArray(e)?1:0;default:return 2}}};const{getFontSize:mt,hasEm:yt,isLength:vt,parseUnit:St}=squared.lib.css,{getNamedItem:bt}=squared.lib.dom,{capitalize:kt,hasValue:Tt,isString:At}=squared.lib.util,xt=/^(-)?(\d+(?:\.\d+)?)(ms|s|min|h)?$/,Et=/^(-)?(?:(\d+):)?(?:([0-5][0-9]):)?([0-5][0-9])(?:\.(\d{1,3}))?$/;function Rt(t,e){const s=this.fillMode&e;t?s||(this.fillMode|=e):s&&(this.fillMode^=e)}class SvgAnimation{constructor(t,e){if(this.element=null,this.fillMode=0,this.synchronizeState=0,this.paused=!1,this.id=null,this.baseValue="",this.animationElement=null,this.instanceType=8,this._to="",this._duration=-1,this._delay=0,this._parent=null,this._attributeName="",this._dataset=null,this._group=null,t){const e=t.dataset;for(const t in e){const s=e[t];if(At(s))try{(this._dataset||(this._dataset={}))[t]=JSON.parse(s)}catch(t){}}this.element=t}if(e){this.animationElement=e,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");const t=bt(e,"dur");if(t&&"indefinite"!==t){const e=SvgAnimation.parseClockTime(t);this.duration=!isNaN(e)&&e>0?e:0}}}static parseClockTime(t){let e=xt.exec(t=t.trim());if(e){let t=+e[2]*(e[1]?-1:1);switch(e[3]){case"ms":break;case"h":t*=60;case"min":t*=60;default:t*=1e3}return Math.round(t)}if(e=Et.exec(t)){const t=e[5];let s=+e[4]*(e[1]?-1:1);return e[1]&&(s+=60*+e[2]*60),e[2]&&(s+=60*+e[3]),1e3*s+(t?+t*(t.length<3?Math.pow(10,3-t.length):1):0)}return NaN}setAttribute(t,e){const s=this.animationElement;if(s){const i=bt(s,t);i&&(At(e)?(e=e.trim(),this[t+kt(e)]=i===e):this[t]=i)}}addState(...t){for(const e of t)~this.synchronizeState&e&&(this.synchronizeState|=e)}removeState(...t){for(const e of t)this.synchronizeState&=~e}hasState(...t){return t.some((t=>this.synchronizeState&t))}set attributeName(t){var e,s,i,n;if("transform"!==t&&!this.baseValue){let a=null===(s=null===(e=this._dataset)||void 0===e?void 0:e.baseValue)||void 0===s?void 0:s[t];if(Tt(a))this.baseValue=a.toString().trim();else{const e=this.element;if(e){switch(t){case"opacity":case"stroke-opacity":case"fill-opacity":a=X(e,t)||"1";break;default:a=X(e,t)}if(a)this.baseValue=a;else{const s=this.animationElement;if(s&&"paused"===getComputedStyle(e).animationPlayState){const e=s.parentElement;if(e){const s=null===(n=null===(i=e[t])||void 0===i?void 0:i.baseVal)||void 0===n?void 0:n.valueAsString;s&&vt(s)&&(this.baseValue=St(s,yt(s)?{fontSize:mt(e)}:void 0).toString())}}}}}}this._attributeName=t}get attributeName(){return this._attributeName}set delay(t){this._delay=t}get delay(){return this._delay}set duration(t){this._duration=Math.round(t)}get duration(){return this._duration}set to(t){this._to=t}get to(){return this._to}set fillBackwards(t){Rt.call(this,t,4)}get fillBackwards(){return(4&this.fillMode)>0}set fillForwards(t){Rt.call(this,t,2)}get fillForwards(){return(2&this.fillMode)>0}set fillFreeze(t){Rt.call(this,t,1)}get fillFreeze(){return(1&this.fillMode)>0}set parent(t){this._parent=t}get parent(){return this._parent}set group(t){this._group=t}get group(){return this._group||(this._group={id:-1/0,name:""})}set setterType(t){}get setterType(){return!0}get fillReplace(){switch(this.fillMode){case 0:case 4:return!0;default:return!1}}get parentContainer(){let t=this._parent;for(;t&&!SvgBuild.isContainer(t);)t=t.parent;return t}}const{convertHex:wt,parseColor:Vt}=squared.lib.color,{getFontSize:_t,hasEm:Pt,isLength:Nt,parseUnit:Mt}=squared.lib.css,{getNamedItem:Bt}=squared.lib.dom,{isNumber:Ct,lastItemOf:Gt,replaceMap:Ot,sortNumber:Lt,trimEnd:Ft}=squared.lib.util,It=new RegExp(`\\b${O}\\b`),qt=new RegExp(`\\bcubic-bezier\\(${O}\\)`),zt=t=>+(1-t).toPrecision(5);class SvgAnimate extends SvgAnimation{constructor(t,e){if(super(t,e),this.type=0,this.additiveSum=!1,this.accumulateSum=!1,this.instanceType=32776,this._reverse=!1,this._alternate=!1,this._values=null,this._keyTimes=null,this._keySplines=null,this._iterationCount=1,this._from="",this._setterType=!1,this._repeatDuration=-1,this._timingFunction="",e){const t=Bt(e,"values"),s=-1!==this.duration?SvgAnimate.toFractionList(Bt(e,"keyTimes")):[];if(t){const e=Ft(t,";").split(/\s*;\s*/);this.values=e;const i=e.length;i>1&&i===s.length?(this.from=e[0],this.to=e[i-1],this.keyTimes=s):1===i&&(this.to=this.values[0],this.convertToValues())}else this.from=Bt(e,"from"),this.convertToValues(s);const i=Bt(e,"repeatDur");if(i&&"indefinite"!==i){const t=SvgAnimation.parseClockTime(i);!isNaN(t)&&t>0&&(this._repeatDuration=t)}const n=Bt(e,"repeatCount");this.iterationCount="indefinite"===n?-1:+n||0,"animate"===e.tagName&&this.setCalcMode()}}static getSplitValue(t,e,s){return t+(e-t)*s}static findTimingFunction(t){const e=SvgAnimate.KEYSPLINE_NAME[t];if(e)return e;if(It.test(t))return t.trim();if(t.startsWith("step"))return SvgAnimate.KEYSPLINE_NAME.linear;const s=qt.exec(t);return s?s[1]+" "+s[2]+" "+s[3]+" "+s[4]:SvgAnimate.KEYSPLINE_NAME.ease}static fromStepTimingFunction(t,e,s,i,n,a){const r=n[a],o=n[a+1],l=e=>Pt(e)?{fontSize:_t(t)}:void 0;let c,h;switch(e){case"fill":case"stroke":{const t=Vt(r),e=Vt(o);t&&e&&(c=[t],h=[e]);break}case"points":c=SvgBuild.convertPoints(SvgBuild.parseCoordinates(r)),h=SvgBuild.convertPoints(SvgBuild.parseCoordinates(o));break;case"rotate":case"scale":case"translate":c=Ot(r.trim().split(/\s+/),(t=>+t)),h=Ot(o.trim().split(/\s+/),(t=>+t));break;default:Ct(r)?c=[+r]:Nt(r)&&(c=[Mt(r,l(r))]),Ct(o)?h=[+o]:Nt(o)&&(h=[Mt(o,l(o))])}if(c&&h){const t=c.length;if(t===h.length){switch(s){case"step-start":s="steps(1, start)";break;case"step-end":s="steps(1, end)"}const n=/steps\((\d+)(?:,\s*(start|end|jump-(?:start|end|both|none)))?\)/.exec(s);if(n){const s=i[a+1]-i[a],r=+n[1],o=100/r,l=r+1,u=new Array(l),f=new Array(l);for(let d=0;d<l;++d){let g=0;switch(n[2]){case"start":case"jump-start":0===d&&(g=1);break;case"jump-both":d<l-1&&(g=1/l);break;case"jump-none":d>0&&(g=1/r)}const p=i[a]+s*(d/r),m=o*(d+g)/100;let y="";switch(e){case"fill":case"stroke":{const t=c[0].rgba,e=h[0].rgba;y=wt({r:SvgAnimate.getSplitValue(t.r,e.r,m),g:SvgAnimate.getSplitValue(t.g,e.g,m),b:SvgAnimate.getSplitValue(t.b,e.b,m),a:SvgAnimate.getSplitValue(t.a,e.a,m)});break}case"points":for(let e=0;e<t;++e){const t=c[e],s=h[e];y+=(e>0?" ":"")+SvgAnimate.getSplitValue(t.x,s.x,m)+","+SvgAnimate.getSplitValue(t.y,s.y,m)}break;default:for(let e=0;e<t;++e)y+=(e>0?" ":"")+SvgAnimate.getSplitValue(c[e],h[e],m)}if(!y)return null;u[d]=p,f[d]=y}return[u,f]}}}return null}static toFractionList(t,e=";",s=!0){let i=0;const n=Ot(t.split(e),(t=>{const e=+t;return isNaN(e)||s&&!(e>=i&&e<=1)?-1:(i=e,e)}));return n.length>1&&(!s||0===n[0]&&n.some((t=>-1!==t)))?n:[]}setCalcMode(t,e){const s=this.animationElement;if(s)switch(e||(e=Bt(s,"calcMode")||"linear")){case"discrete":{const e=this.keyTimes;if(0===e[0]&&2===e.length){const i=this.values,n=[],a=[];for(let r=0,o=e.length-1;r<o;++r){const o=SvgAnimate.fromStepTimingFunction(s,t||this.attributeName,"step-end",e,i,r);o&&(n.push(...o[0]),a.push(...o[1]))}n.push(e.pop()),a.push(i.pop()),this._values=a,this._keyTimes=n,this._keySplines=[SvgAnimate.KEYSPLINE_NAME["step-end"]]}break}case"paced":this._keySplines=null;break;case"spline":this.keySplines=Ot(Bt(s,"keySplines").split(";"),(t=>t.trim())).filter((t=>t));case"linear":{const t=this.keyTimes;if(0!==t[0]&&1!==Gt(t)){const t=this.values.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=s/(t-1);this._keyTimes=e,this._keySplines=null}break}}}convertToValues(t){const e=this.to;if(e){if(this.values=[this.from,e],t&&2===t.length){const e=this.keyTimes;if(2!==e.length||0===e[0]&&e[1]<=1)return void(this.keyTimes=t)}this.keyTimes=[0,1]}}setGroupOrdering(t){if(this.group.ordering=t,this.fillBackwards){const e=this.group.name;let s;for(let i=t.length-1;i>=0;--i){const n=t[i];if(s){if("forwards"!==n.fillMode){this.fillBackwards=!1;break}}else n.name===e&&(s=!0)}}}getIntervalEndTime(t,e){const s=this.getTotalDuration();if(t<s){const{duration:i,keyTimes:n}=this;let a=this.delay;for(;a+i<=t;)a+=i;return Math.min(a+(e?1:Gt(n)||0)*i,s)}return s}getTotalDuration(t){let e=this.iterationCount;return t&&-1===e&&(e=1),-1!==e?Math.min(this.delay+this.duration*e,this.end||1/0):1/0}set delay(t){this._delay=t;const e=this.animationElement,s=e&&Bt(e,"end");if(s){const e=Lt(Ot(s.split(";"),(t=>SvgAnimation.parseClockTime(t))).filter((t=>!isNaN(t))))[0];if(!isNaN(e)){const{duration:s,iterationCount:i}=this;(-1===i||s>0&&e<s*i)&&(t>e?(this.end=e,-1===i&&(this.iterationCount=Math.ceil((e-t)/s))):this.duration=-1)}}}get delay(){return this._delay}set duration(t){super.duration=t}get duration(){const t=this._duration;return-1===t&&-1!==this._repeatDuration?this._repeatDuration:t}set to(t){this._to=t}get to(){return this._setterType?this.valueTo||this._to:this.setterType?this.values[0]:this._to}get from(){return this._from}set from(t){if(!this._values){const e=this.animationElement;if(e){if(!this.to){const s=Bt(e,"by"),i=SvgBuild.parseCoordinates(s);if(i.length&&(t||(t=this.baseValue||""))){const e=SvgBuild.parseCoordinates(t),s=e.length;if(i.length===s){let t="";for(let n=0;n<s;++n)t+=(n>0?",":"")+(e[n]+i[n]);this.to=t}}}SvgBuild.parseCoordinates(this.to).length&&this.setAttribute("additive","sum")}}this._from=t}set iterationCount(t){this._iterationCount=isNaN(t)?1:t;const e=this.animationElement;e&&(-1!==this.iterationCount?(this.setAttribute("accumulate","sum"),this.fillFreeze="freeze"===Bt(e,"fill")):(this.accumulateSum=!1,this.fillFreeze=!1))}get iterationCount(){const t=this.duration;if(t>0){const e=this._iterationCount,s=this._repeatDuration;return-1!==s&&(-1===e||s<e*t)?s/t:e}return 1}set values(t){this._values=t,t&&t.length!==this.keyTimes.length&&(this._keyTimes=null,this._keySplines=null)}get values(){return this._values||(this._values=[])}set keyTimes(t){const e=this._values;e&&e.length!==t.length||!t.every((t=>t>=0&&t<=1))||(this._keyTimes=t)}get keyTimes(){return this._keyTimes||(this._keyTimes=[])}set keySplines(t){if(t&&t.length){const e=this.keyTimes.length-1;if(t.length>=e&&!t.every((t=>!t||t===SvgAnimate.KEYSPLINE_NAME.linear))){const s=[];for(let i=0;i<e;++i){const e=Ot(t[i].split(/\s+/),(t=>+t));4===e.length&&!e.some((t=>isNaN(t)))&&e[0]>=0&&e[0]<=1&&e[2]>=0&&e[2]<=1?s.push(e.join(" ")):s.push(SvgAnimate.KEYSPLINE_NAME.linear)}this._keySplines=s}}else this._keySplines=null}get keySplines(){return this._keySplines}set timingFunction(t){this._timingFunction=t?SvgAnimate.findTimingFunction(t):t}get timingFunction(){var t;return this._timingFunction||(null===(t=this.keySplines)||void 0===t?void 0:t[0])||""}set reverse(t){if(this.length&&t!==this._reverse){const t=this.keyTimes,e=this._keySplines,s=t.length,i=new Array(s);for(let e=s-1,n=0;e>=0;--e)i[n++]=1-t[e];if(this.keyTimes=i,this.values.reverse(),e){const t=[];for(let s=e.length-1;s>=0;--s){const i=Ot(e[s].split(" "),(t=>+t));t.push(4===i.length?zt(i[2])+" "+zt(i[3])+" "+zt(i[0])+" "+zt(i[1]):SvgAnimate.KEYSPLINE_NAME.linear)}this._keySplines=t}}this._reverse=t}get reverse(){return this._reverse}set alternate(t){this._alternate=t}get alternate(){return this._alternate}set setterType(t){this._setterType=t}get setterType(){if(this._setterType)return!0;if(this.animationElement&&0===this.duration){const t=this.keyTimes;return t.length>=2&&0===t[0]&&""!==this.values[0]}return!1}set length(t){0===t&&(this._values=null)}get length(){return this._values?this._values.length:0}get valueTo(){return this._values&&Gt(this._values)||""}get valueFrom(){return this.values[0]||""}get playable(){return!this.paused&&this.duration>0&&this.keyTimes.length>0}get fillReplace(){return super.fillReplace||-1===this.iterationCount}get fromToType(){const t=this.keyTimes;return 2===t.length&&0===t[0]&&1===t[1]}get evaluateStart(){const t=this.keyTimes;return t.length>0&&t[0]>0}get evaluateEnd(){const t=this.keyTimes;return t.length>0&&Gt(t)<1}}SvgAnimate.KEYSPLINE_NAME={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"};const{getNamedItem:Xt}=squared.lib.dom;class SvgAnimateTransform extends SvgAnimate{constructor(t,e){if(super(t,e),this.instanceType=98312,e){const t=Xt(e,"type");this.setType(t),this.setCalcMode(t)}}static toRotateList(t){const e=t.length,s=new Array(e);for(let i=0;i<e;++i)if(t[i]){const e=SvgBuild.parseCoordinates(t[i]);if(2===e.length&&(e[2]=0),3!==e.length)return null;s[i]=e}else s[i]=[0,0,0];return s}static toScaleList(t){const e=t.length,s=new Array(e);for(let i=0;i<e;++i)if(t[i]){const e=SvgBuild.parseCoordinates(t[i]);if(1===e.length&&(e[1]=e[0]),2===e.length&&(e[2]=0,e[3]=0),4!==e.length)return null;s[i]=e}else s[i]=[1,1,0,0];return s}static toTranslateList(t){const e=t.length,s=new Array(e);for(let i=0;i<e;++i)if(t[i]){const e=SvgBuild.parseCoordinates(t[i]);if(1===e.length&&(e[1]=0),2!==e.length)return null;s[i]=e}else s[i]=[0,0];return s}static toSkewList(t){const e=t.length,s=new Array(e);for(let i=0;i<e;++i)if(t[i]){const e=SvgBuild.parseCoordinates(t[i]);if(1!==e.length)return null;s[i]=e}else s[i]=[0];return s}expandToValues(){if(this.additiveSum){const{duration:t,keyTimes:e,iterationCount:s}=this;if(-1!==s&&t>0&&e.length){const i=t*s;t:{const{type:n,keySplines:a,values:r}=this,o=[],l=[],c=[];let h;for(let u=0,f=e.length;u<s;++u){u>0&&a&&c.push("");for(let d=0;d<f;++d){const g=SvgBuild.parseCoordinates(r[d]),p=g.length;if(!p)break t;{let r;switch(n){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===p?r=[g[0],0]:2===p&&(r=g);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===p?r=[g[0],g[0]]:2===p&&(r=g);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===p?r=[g[0],0,0]:3===p&&(r=g);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===p&&(r=g)}if(!r)break t;{let n=(e[d]+u)*t;if(h)for(let t=0,e=r.length;t<e;++t)r[t]+=h[t];u<s-1&&d===f-1&&(this.accumulateSum&&(h=r),--n),o.push(n/i),l.push(r.join(" ")),a&&d<f-1&&c.push(a[d])}}}}this.values=l,this.keyTimes=o,this.keySplines=c.length?c:null,this.duration=i,this.iterationCount=1,this.accumulateSum=!1}}}}setType(t){let e=null;switch(t){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement&&(e=SvgAnimateTransform.toTranslateList(this.values));break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement&&(e=SvgAnimateTransform.toScaleList(this.values));break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement&&(e=SvgAnimateTransform.toRotateList(this.values));break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement&&(e=SvgAnimateTransform.toSkewList(this.values));break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement&&(e=SvgAnimateTransform.toSkewList(this.values));break;default:return}e&&(this.values=e.map((t=>t.join(" ")))),this.baseValue=I.typeAsValue(this.type)}set attributeName(t){}get attributeName(){return"transform"}}const{sortNumber:Dt,splitPairStart:Yt}=squared.lib.util;function Ut(t,e,s,i=0,n,a=!1,r=!1,o=0,l=!1,c){if(s){let h=t.get(e);h||(h=[],t.set(e,h)),h.push({time:e,value:s,animation:n,start:a,end:r,endTime:i,fillMode:o,infinite:l,valueFrom:c})}}class SvgAnimationIntervalMap{constructor(t,...e){var s;t=(e.length?t.filter((t=>e.includes(t.attributeName))):t.slice(0)).sort(((t,e)=>t.delay===e.delay?e.group.id-t.group.id:t.delay-e.delay));const i={},n={},a=new Set,r=t.length;for(let e=0;e<r;++e)a.add(SvgAnimationIntervalMap.getKeyName(t[e]));for(const e of a){i[e]=new Map,n[e]=new Map;const s=Yt(e,":"),a=t.filter((t=>t.fillBackwards&&t.attributeName===s)).sort(((t,e)=>e.group.id-t.group.id))[0];if(a){const t=a.delay;Ut(n[e],0,a.values[0],t,a,0===t,!1,4)}}for(let e=0;e<r;++e){const s=t[e],i=SvgAnimationIntervalMap.getKeyName(s),a=n[i];if(s.baseValue&&!n[i][-1]&&Ut(a,-1,s.baseValue),s.setterType){const{delay:t,duration:e}=s,i=s.fillReplace&&e>0;Ut(a,t,s.to,i?t+e:0,s,i,!i,1),i&&Ut(a,t+e,"",0,s,!1,!0,1)}else if(SvgBuild.isAnimate(s)&&s.duration>0){const t=-1===s.iterationCount,e=s.getTotalDuration();Ut(a,s.delay,s.valueTo,e,s,!0,!1,0,t,s.valueFrom),t||s.fillReplace||Ut(a,e,s.valueTo,0,s,!1,!0,s.fillForwards?2:1)}}for(const t in n){const e=Dt(Array.from(n[t].keys()));for(let s=0,a=e.length;s<a;++s){const a=e[s],r=n[t].get(a);for(let e=0;e<r.length;++e){const s=r[e],n=s.animation;if(!s.value||n&&s.start&&SvgBuild.isAnimate(n)&&!n.from){let a;for(const e of i[t].values())for(let t=0,s=e.length;t<s;++t){const s=e[t];if(n!==s.animation&&s.value&&(-1===s.time||2===s.fillMode||1===s.fillMode)){a=s.value;break}}a?s.value=a:s.value||r.splice(e--,1)}}r.length&&(r.sort(((t,e)=>t.animation&&e.animation?t.fillMode===e.fillMode?e.animation.group.id-t.animation.group.id:e.fillMode-t.fillMode:0)),i[t].set(a,r))}}for(const t in i)for(const[e,n]of i[t])for(let a=0,r=n.length;a<r;++a){const r=n[a],o=r.animation;if(o)if(1===r.fillMode){const s=[];for(const[n,a]of i[t])if(n<e)for(let t=0,e=a.length;t<e;++t){const e=a[t];if(e.start){const t=e.animation;t&&t.animationElement&&s.push(t)}}else for(let t=0;t<a.length;++t){const i=a[t];if(n>e)i.end&&s.includes(i.animation)&&a.splice(t--,1);else if(i.end){const e=i.animation;e&&e.animationElement&&e.group.id<o.group.id&&a.splice(t--,1)}}}else if(2===r.fillMode||r.infinite){let n;const a=o.group,r=a.ordering;if(r){const t=o.getTotalDuration(),e=a.name;for(let s=0,i=r.length;s<i;++s){const i=r[s];if(i.name===e)n=!0;else if(SvgAnimationIntervalMap.getGroupEndTime(i)>=t)break}}const l=[];for(const[a,r]of i[t])if(!n&&a<e)for(let t=0,e=r.length;t<e;++t){const e=r[t];if(e.start){const t=e.animation;t&&l.push(t)}}else for(let t=0;t<r.length;++t){const i=r[t];if(a>e){const e=i.animation;(n||e&&(i.end&&l.includes(e)||!o.animationElement&&e.group.id<o.group.id))&&r.splice(t--,1)}else if(i.end){const e=undefined;((null===(s=i.animation)||void 0===s?void 0:s.group.id)||NaN)<o.group.id&&r.splice(t--,1)}}}}for(const t in i){const e=i[t];for(const[t,s]of e)0===s.length&&e.delete(t)}this.map=i}static getGroupEndTime(t){return"infinite"===t.iterationCount?1/0:t.delay+t.duration*+t.iterationCount}static getKeyName(t){return t.attributeName+(SvgBuild.isAnimateTransform(t)?":"+I.typeAsName(t.type):"")}has(t,e,s){const i=this.map[t];return void 0!==e?!(!i||!i.has(e))&&(!s||-1!==i.get(e).findIndex((t=>t.animation===s))):!!i}get(t,e,s){const i=this.map[t];if(i){let t;for(const[n,a]of i){if(!(n<=e))break;for(let i=0,r=a.length;i<r;++i){const r=a[i];if(r.value&&(-1===r.time||r.end&&(2===r.fillMode||1===r.fillMode))||s&&r.start&&e!==n){t=r.value;break}}}return t}}paused(t,e){const s=this.map[t];if(s){let t=0;for(const[i,n]of s){if(!(i<=e))break;for(let s=0,i=n.length;s<i;++s){const i=n[s];if(i.start&&(i.infinite||0===i.fillMode&&i.endTime>e)){if(!i.animation){t=1;break}t=2}else if(i.end&&(2===i.fillMode||1===t&&1===i.fillMode)){t=0;break}}}return 0===t}return!0}evaluateStart(t,e){const s=t.values,i=s.length;if(i){const n=(t.reverse?s[i-1]:s[0])||this.get(t.attributeName,t.delay)||e||t.baseValue;n&&(t.reverse?(s[i-1]=n,t.to=n):(s[0]=n,t.from=n))}return s}}const{clamp:$t,equal:Wt,multipleOf:Kt}=squared.lib.math,{hasKeys:jt,hasValue:Ht,isEqual:Zt,isNumber:Qt,joinArray:Jt,lastItemOf:te,plainMap:ee,replaceMap:se,spliceArray:ie,sortNumber:ne}=squared.lib.util;function ae(t,e,s,i,n){let a=0,r,o,l;for(const[e,i]of t){if(s===e){o={key:e,value:i};break}if(s>a&&s<e&&void 0!==r){o={key:a,value:r},l={key:e,value:i};break}a=e,r=i}if(o&&l)ye(t,s,de(s,o.key,o.value,l.key,l.value),!0);else if(o)ye(t,s,o.value,!0);else if(!n){let n=i.get(e,s,!0);void 0!==n&&(n=oe(n,!0),""!==n&&ye(t,s,n))}}function re(t){const e=new Set,s=t.length,i=t[s-1][0];for(let n=0;n<s;++n){const s=t[n];let a=s[0]/i;if(a>0){let t=7;do{const s=+a.toString().substring(0,t);if(!e.has(s)){a=s;break}}while(++t)}s[0]=a,e.add(a)}return t}function oe(t,e){return"string"==typeof t&&(Qt(t)?t=+t:0===(t=SvgBuild.parsePoints(t)).length&&(t="")),e&&"string"==typeof t?"":t}function le(t,e){let s;if(t)for(let i=0,n=t.length;i<n;++i){const n=t[i];if(!(n.time<=e))break;s=n.value}return s}function ce(t,e,s,i,n){var a;const r=[],o=e.element.tagName;let l;switch(o){case"line":l=["x1","y1","x2","y2"];break;case"rect":l=["width","height","x","y"];break;case"polyline":case"polygon":l=["points"];break;case"circle":l=["cx","cy","r"];break;case"ellipse":l=["cx","cy","rx","ry"];break;default:return}const c=I.origin(e.element);for(let h=0,u=t.length;h<u;++h)t:{const[u,f]=t[h],d=[];for(let t=0,s=l.length;t<s;++t){const s=l[t];let n=f.get(s);if(void 0===n&&(n=null!==(a=le(i[s],u))&&void 0!==a?a:e.getBaseValue(s)),void 0===n)break t;d.push(n)}let g,p;switch(o){case"line":g=[{x:d[0],y:d[1]},{x:d[2],y:d[4]}];break;case"rect":{const[t,e,s,i]=d;g=[{x:s,y:i},{x:s+t,y:i},{x:s+t,y:i+e},{x:s,y:i+e}];break}case"polygon":case"polyline":g=d[0];break;case"circle":case"ellipse":g=[{x:d[0],y:d[1],rx:d[2],ry:te(d)}]}switch(e.transformed&&(g=SvgBuild.applyTransforms(e.transformed,g,c)),s&&s.refitPoints(g),o){case"line":case"polyline":p=SvgBuild.drawPolyline(g,n);break;case"rect":case"polygon":p=SvgBuild.drawPolygon(g,n);break;case"circle":case"ellipse":{const{x:t,y:e,rx:s,ry:i}=g[0];p=SvgBuild.drawEllipse(t,e,s,i,n);break}}void 0!==p&&r.push({key:u,value:p})}return r}function he(t,e,s){var i;const n=new Map;for(let a=0,r=e.length;a<r;++a){const r=e[a],o=new Map;for(const e in t){const n=null!==(i=t[e].get(r))&&void 0!==i?i:le(s[e],r);void 0!==n&&o.set(e,n)}n.set(r,o)}return n}function ue(t,e,s,i){e&&(t.set(s,e),void 0!==i&&t.set(i,e))}function fe(t,e,s,i,n){switch(t.alternate&&s%2!=0&&(e=e.slice(0).reverse()),t.attributeName){case"transform":if(t.additiveSum&&"string"==typeof n){const a=se(n.split(" "),(t=>+t)),r=ee(e,(t=>se(t.trim().split(" "),(t=>+t)))),o=a.length;if(r.every((t=>t.length===o))){const e=r[i];t.accumulateSum||(s=0);for(let t=0;t<o;++t)e[t]+=a[t];for(let t=0,i=r.length;t<s;++t)for(let t=0;t<i;++t){const s=r[t];for(let t=0,i=s.length;t<i;++t)e[t]+=s[t]}return e.join(" ")}}return e[i];case"points":return SvgBuild.parsePoints(e[i]);default:{let a=+e[i];if(!isNaN(a)){if(t.additiveSum&&"number"==typeof n){a+=n,t.accumulateSum||(s=0);for(let t=0,i=e.length;t<s;++t)for(let t=0;t<i;++t)a+=+e[t]}return a}}}return n||0}function de(t,e,s,i,n){if(t>e){if("number"==typeof s&&"number"==typeof n)return SvgAnimate.getSplitValue(s,n,(t-e)/(i-e));if("string"==typeof s&&"string"==typeof n){const a=se(s.split(" "),(t=>+t)),r=se(n.split(" "),(t=>+t)),o=a.length;if(o===r.length){let s="";for(let n=0;n<o;++n)s+=(n>0?" ":"")+de(t,e,a[n],i,r[n]);return s}}else if(Array.isArray(s)&&Array.isArray(n)){const a=[];for(let r=0,o=Math.min(s.length,n.length);r<o;++r){const o=s[r],l=n[r];a.push({x:de(t,e,o.x,i,l.x),y:de(t,e,o.y,i,l.y)})}return a}}return s}function ge(t,e,s,i,n,a,r,o,l,c,h,u,f,d){r<0&&(e-=r,r=0);const g=t.duration,p=e-(r+g*o),m=0===p?0===l?0:1:$t(p/g);let y=-1,v=-1,S;for(let t=0,e=i.length;t<e;++t){if(-1!==y&&m<=i[t]){v=t;break}m>=i[t]&&(y=t)}return-1!==y&&-1!==v?S=de(m,i[y],fe(t,n,o,y,s),i[v],fe(t,n,o,v,s)):(v=-1!==y?y+1:i.length-1,S=fe(t,n,o,v,s)),ve(t,c=ye(u,c,S),a,v,h,f,d),[c,S]}function pe(t,e,s,i,n,a,r,o){const l=(t-e)/a;for(let t=1,e=i.length;t<e;++t){const e=i[t-1],a=i[t];if(l>=e&&l<=a)return Me(de(l,e,fe(s,n,r,t-1,o),a,fe(s,n,r,t,o)))}}function me(t,e,s,i,n,a,r,o,l,c,h){let u=r.length;o||(o=new Array(u-1).fill(""));const{delay:f,duration:d}=n,g=f+d*i,p=n.getTotalDuration(),m=g+(h?a[0]:1)*d,y=+r[h?0:u-1];let v=g;t:{u=c.length;for(let i=0;i<u;++i){const f=c[i];if(f!==n){const n=f.getTotalDuration();if(f.addState(2),n>v){const[S,b,k]=Oe(f);Se(t,e,s,f,l,S,b,k);let T=m;e:{let t,e=Le(v,f.delay,f.duration)-1;const s=(s,i,c)=>{let u=h?v!==g||t?s%d/d:0:i===m?1:i%d/d,T=s===i?Me(fe(f,b,e,c,l)):pe(s,i,f,S,b,f.duration,e,l);if(T){u>0&&(T=Math.round((+T+y)/2).toString());const e=a.length;if(u!==a[e-1]||T!==r[e-1]){const l=t||0===u?k&&k[c]||f.timingFunction:"";if(h){!t&&u>0&&s===v&&(u+=.001);for(let t=0;t<e;++t)if(u<=a[t]){0===t||0===u?(a.unshift(u),r.unshift(T),o.unshift(l)):(a.splice(t,0,u),r.splice(t,0,T),o.splice(t,0,l));break}}else(i===n||i===m)&&i<p&&(u-=.001),a.push(u),r.push(T),o.push(l)}}};do{if(h)for(let t=i+1;t<u;++t){const e=c[t];if(e.delay>v){T=e.delay;break}}for(let i=0,a=S.length;i<a;++i){const a=Ne(f.delay,f.duration,S,e,i);if(a>=v&&(t||(s(a,v,i),t=!0),a>v)){if(h&&a>=m)break t;if(s(a,Math.min(a,n,m),i),a>=m)break t;if(v=a,a>=n){n<=p&&f.addState(8);break e}if(a>=T)break e}}}while(++e)}}}}}return[a,r,o]}function ye(t,e,s,i){if(""!==s){let n=t.get(e),a;if(void 0===n&&(n=t.get(e-1),a=!0),n!==s||i){if(!i){if("number"==typeof n&&Wt(s,n))return e;for(;e>0&&t.has(e);)++e}t.set(e,s)}else a&&!t.has(e)&&(t.delete(e-1),t.set(e,s))}return e}function ve(t,e,s,i,n,a,r){if(!Be(SvgBuild.isAnimateTransform(t),n)){if(0===i)return;--i}const o=s&&s[i];o&&a.set(e,o),r&&be(r,t,e,i)}function Se(t,e,s,i,n,a,r,o){var l;if(0!==a[0]){let s;s=i.additiveSum?Me(n):(null===(l=ke(e,i.attributeName))||void 0===l?void 0:l.value.toString())||t.get(SvgAnimationIntervalMap.getKeyName(i),i.delay)||Me(n),i.by&&Qt(s)&&(s=(+s+i.by).toString()),a.unshift(0),r.unshift(s),o&&o.unshift(i.timingFunction)}if(te(a)<1){const e=t.get(SvgAnimationIntervalMap.getKeyName(i),i.delay)||Me(s[i.attributeName])||r[0];a.push(1),r.push(e),o&&o.unshift(i.timingFunction)}}function be(t,e,s,i){var n;if(SvgBuild.asAnimateTransform(e)){const a=null===(n=e.transformOrigin)||void 0===n?void 0:n[i];a&&t.set(s,a)}}function ke(t,e){const s=t[e];return s&&te(s)}function Te(t,e,s,i,n){return void 0===i&&(i=e.delay),void 0===n&&(n=e.to),ye(t,i,s?n:oe(n))}function Ae(t,e){e&&t.push(e),t.sort(((t,e)=>t.delay===e.delay?t.group.id-e.group.id:t.delay-e.delay));for(let e=0;e<t.length-1;++e)t[e].delay===t[e+1].delay&&t.splice(e--,1)}function xe(t,e){if(!e.hasState(8,32)){const s=t.indexOf(e);-1!==s&&t.splice(s,1),t.push(e),e.addState(2)}}function Ee(t,e=1/0){t.sort(((t,s)=>{const i=t.delay,n=t.delay;if(e!==1/0){if(e===i&&e!==n)return-1;if(e!==i&&e===n)return 1;if(i>e&&n<e)return 1;if(i<e&&n>e)return-1}return i!==n?n-i:s.group.id-t.group.id}))}function Re(t,e){e?-1!==e.iterationCount&&ie(t,(t=>t===e)):ie(t,(t=>!!t.animationElement))}function we(t,e){t.sort(((t,s)=>{const i=undefined;if(t.getTotalDuration()<=e)return 1;const n=undefined;if(s.getTotalDuration()<=e)return-1;const a=t.delay,r=s.delay;return a===r?s.group.id-t.group.id:a===e?-1:r===e?1:a<e&&r<e?r-a:a-r}))}function Ve(t,e){const s=t.get("x")||0,i=t.get("y")||0;return e?e.refitX(s)+" "+e.refitX(i):s+" "+i}function _e(t,e,s){s||(e.iterationCount=-1),e.from=e.valueFrom,e.to=e.valueTo,t.push(e)}function Pe(t,e){e.length&&ie(t,(t=>e.includes(t)))}const Ne=(t,e,s,i,n)=>Math.round(t+(s[n]+i)*e),Me=t=>Array.isArray(t)?ee(t,(t=>t.x+","+t.y)).join(" "):void 0!==t?t.toString():"",Be=(t,e)=>((t?16:2)&e)>0,Ce=(t,e)=>((t?8:1)&e)>0,Ge=t=>t.playable||t.animationElement&&-1!==t.duration,Oe=t=>{var e;return[t.keyTimes.slice(0),t.values.slice(0),(null===(e=t.keySplines)||void 0===e?void 0:e.slice(0))||null]},Le=(t,e,s)=>Math.floor(Math.max(0,t-e)/s);var Fe=t=>class extends t{getAnimateShape(t){const e=[],s=this.animations;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(Ge(n))switch(n.attributeName){case"r":case"cx":case"cy":if(L.circle(t)){e.push(n);break}case"rx":case"ry":L.ellipse(t)&&e.push(n);break;case"x1":case"x2":case"y1":case"y2":L.line(t)&&e.push(n);break;case"points":(L.polyline(t)||L.polygon(t))&&e.push(n);break;case"x":case"y":case"width":case"height":L.rect(t)&&e.push(n)}}return e}getAnimateTransform(t){const e=[],s=this.animations;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(SvgBuild.isAnimateTransform(n)&&n.duration>0&&(e.push(n),t&&SvgBuild.asAnimateMotion(n))){const e=t.framesPerSecond;e&&(n.framesPerSecond=e)}}return e}getAnimateViewRect(t){t||(t=this.animations);const e=[];for(let s=0,i=t.length;s<i;++s){const i=t[s];if(Ge(i))switch(i.attributeName){case"x":case"y":e.push(i)}}return e}animateSequentially(t,e,s,i){var n,a,r;let o=9,l;i&&(i.keyTimeMode&&(o=i.keyTimeMode),l=i.precision);const c=this.animations;for(const i of[t,e]){const t=i===e;if(!i||0===i.length||!t&&4&o||t&&32&o)continue;const h=[],u={},f=new Set;let d=0;const g=t=>{var e;(u[e=t.attributeName]||(u[e]=[])).push(t),++d};{const t=[],e=i.length;for(let s=0;s<e;++s){const n=i[s];if(n.setterType)g(n);else{const a=n.getTotalDuration();for(let r=0;r<e;++r){const e=i[r];if(s!==r&&n.attributeName===e.attributeName&&n.group.id<e.group.id&&n.fillReplace&&!e.evaluateEnd)if(e.setterType){if(n.delay===e.delay){t[s]=n;break}}else if(!e.evaluateStart&&!e.evaluateEnd&&(n.delay===e.delay&&(!e.fillReplace||-1===e.iterationCount||a<=e.getTotalDuration())||e.fillBackwards&&n.delay<=e.delay&&(e.fillForwards||n.fillReplace&&a<=e.delay)||n.animationElement&&!e.animationElement&&(n.delay>=e.delay&&a<=e.getTotalDuration()||e.fillForwards))){t[s]=n;break}}}}const s=[];for(let n=0;n<e;++n){const e=i[n];t[n]?e.fillReplace?s.push(e):(e.setterType=!0,g(e)):e.setterType||(h.push(e),f.add(e.group.name))}Pe(c,s)}if(h.length+d>1||1===h.length&&(h[0].alternate||void 0!==h[0].end)){const e={},d={},g=new SvgAnimationIntervalMap(i),p={},m=new Map,y=t?new Map:null,v={},S=new Set,b={},k=new Map,T=t?new Map:null,A={},x={},E=new Map;let R=0,w=-1,V,_;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s.group.ordering;i&&ie(i,(t=>!f.has(t.name)));const n=s.attributeName;let a=e[n];a||(a=new Map,e[n]=a,d[n]=[]);const r=s.delay,o=a.get(r)||[];o.push(s),d[n].push(s),a.set(r,o)}for(const t in e){const s=new Map,i=e[t],n=ne(Array.from(i.keys()));for(let t=0,e=n.length;t<e;++t){const e=n[t],a=i.get(e);for(let t=0,e=a.length;t<e;++t)R=Math.max(R,a[t].getTotalDuration(!0));s.set(e,a.reverse())}e[t]=s,d[t].reverse()}for(const i in e){const a=new Map;if(p[i]=a,!t){let t;s?t=s.getBaseValue(i):(t=this[i],void 0===t&&"getBaseValue"in this&&(t=this.getBaseValue(i))),Ht(t)&&(A[i]=t)}const r=u[i]||[],l=[],c=[];let h=[];for(const[t,s]of e[i])l.push(t),c.push(s);let f=-1,k=0,T=1/0,w,V=null,_;const P=(e,s)=>{if(S.add(e),e.addState(8),_=e,e.fillForwards){B(k,w,e.type,e);const{name:t,ordering:s}=e.group;if(s){const i=e.getTotalDuration();for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.name===t)return!0;if(SvgAnimationIntervalMap.getGroupEndTime(n)>=i)return!1}}}else{if(e.fillFreeze&&B(k,w,e.type,e),void 0!==s){let i=f;const n=N(k,k+1);void 0!==n&&e.fillReplace&&s>k&&0===h.length&&(i=ye(a,i,n),t&&ue(E,e.type,i),w=n,f=i)}M()}return!1},N=(e,s)=>{var n;let o=null===(n=ke(x,i))||void 0===n?void 0:n.value;return ie(r,(t=>t.delay>=e&&t.delay<s),(s=>{const i=s.to;s.animationElement&&Re(h),0===h.length&&(w=i),B(s.delay,i,s.type,s),s.delay===e?o=t?i:oe(i):(f=Te(a,s,t),k=s.delay)})),o},M=(t,e)=>{h.length&&ie(h,(t=>t.getTotalDuration()<=k),(s=>{if(s.addState(8),s.fillForwards&&(B(s.getTotalDuration(),s.valueTo,s.type,s),void 0!==t&&void 0!==e))for(let i=t,n=l.length;i<n;++i){i!==t&&(e=-1);const n=c[i];for(let t=e+1,i=n.length;t<i;++t){const e=n[t];s.group.id>e.group.id&&e.addState(8)}}}))},B=(e,s,n=0,a)=>{t||(s=oe(s));const o=ke(x,i);if(""!==s&&(!o||e>=o.time)&&(x[i]||(x[i]=[])).push({key:n,value:s,time:e}),a&&SvgBuild.isAnimate(a)&&!a.fillReplace)if(a.fillForwards){ie(r,(t=>t.group.id<a.group.id||t.delay<e)),h=[];for(let t=0,e=c.length;t<e;++t){const e=c[t];for(let t=0,s=e.length;t<s;++t){const s=e[t];s.group.id<a.group.id&&s.addState(8)}}}else a.fillFreeze&&Re(h)},C=(t,e,s)=>{V&&!t&&(void 0===s&&(s=I.typeAsValue(V.type)),f=ye(a,e,s),e!==f&&ue(E,V.type,f)),V=null},G=d[i].find((t=>t.fillBackwards));if(G){w=fe(G,G.values,0,0),f=ye(a,0,w),t&&(ue(E,G.type,0),V=G);let e=!0;for(const t of d[i])if(t.group.id>G.group.id&&t.delay<=G.delay){e=!1;break}const s=G.getTotalDuration(),n=[];for(let t=0;t<l.length;++t){const i=c[t];for(let a=0;a<i.length;++a){const o=i[a];if(e){if(o===G&&(0!==t||0!==a)){i.splice(a--,1),l.unshift(G.delay),c.unshift([G]);continue}if(o.group.id<G.group.id&&(G.fillForwards||o.getTotalDuration()<=s)){o.fillForwards&&(o.setterType=!0,r.push(o)),n.push(o);continue}}o.animationElement&&o.delay<=G.delay&&(i.splice(a--,1),xe(h,o))}}for(let t=0;t<l.length;++t){const e=c[t];if(n.length)for(let t=0;t<e.length;++t)n.includes(e[t])&&e.splice(t--,1);0===e.length&&(c.splice(t,1),l.splice(t--,1))}G.addState(1)}if(!t){const t=A[i];x[i]||void 0===t||B(0,t,0),void 0===w&&(w=(null===(n=ke(x,i))||void 0===n?void 0:n.value)||t)}Ae(r);{let e;ie(r,(t=>t.delay<=l[0]),(s=>{const n=SvgBuild.isAnimate(s)&&s.fillForwards,r=s.delay;if(r<l[0]&&(!G||n))if(G&&n)B(r,s.to,s.type);else{const n=r-1;if(e)Te(a,e,t,n);else if(a.has(0))t||Te(a,s,t,n,w);else{const e=t&&SvgBuild.isAnimateTransform(s)?I.typeAsValue(s.type):A[i];void 0!==e&&(Te(a,s,t,0,e),Te(a,s,t,n,e))}f=Te(a,s,t),k=r,e=s}})),e&&Te(a,e,t,l[0]-1)}t:{for(let e=0,s=l.length;e<s;++e){let n=c[e],u=l[e];for(let d=0;d<n.length;++d){const p=n[d];if(p.hasState(8,32)||p.hasState(2)&&p.animationElement)continue;const v=-1===p.iterationCount,S=p.duration,_=p.iterationCount;let G,O,L;if(v)G=u+S;else if(G=p.getTotalDuration(),G<=f){p.fillReplace?p.addState(32):xe(h,p);continue}v?(O=Math.ceil((R-u)/S),L=0):(O=Math.ceil(_),L=_-Math.floor(_)),r.length&&k>0&&k<u&&N(k,u),-1!==f&&f<u&&(f=ye(a,u-1,w),k=u),T=1/0;const F=p.group.ordering;if(F&&F.length>1){let t=!0;for(let e=0,s=F.length;e<s;++e){const s=F[e];if(s.name===p.group.name){t=!1;break}if(!s.paused&&k<=s.delay&&s.attributes.includes(i))break}if(t)e:for(let t=e+1;t<s;++t){const e=c[t];for(let t=0,s=e.length;t<s;++t){const s=e[t];if(s.group.ordering){T=s.delay;break e}s.getTotalDuration()<=G?(s.fillFreeze&&Ae(r,s),s.addState(8)):s.delay<G&&xe(h,s)}}}else for(let t=e+1;t<s;++t){const e=l[t];if(e!==1/0){const s=c[t];if(s.length&&!s.every((t=>t.hasState(8,32)))){T=e;break}}}const q=k;let z=f+1,X=Math.min(T,p.end||1/0),D,Y,U;if(p.animationElement&&r.length){const e=Math.min(T,G,X);if(D=r.find((t=>t.delay>=k&&t.delay<=e))){switch(D.delay){case k:w=D.to,B(k,w,D.type,D),D.group.id>p.group.id&&(t&&V&&C(p.additiveSum,Math.max(u-1,f)),f=Te(a,D,t,Math.max(D.delay,f),w),X=-1);break;case T:D.addState(16);break;default:X=D.delay,D.addState(16)}ie(r,(t=>t!==D)),p.addState(2)}}if(X>f){t&&(V&&(C(p.additiveSum,Math.max(u-1,f)),z=f+1),w=I.typeAsValue(p.type),B(k,w,p.type));let r=u===1/0||(-1!==f||p.hasState(1))&&!(0===e&&0===d)||p.hasState(4);Y=!0;e:{const t=ke(x,i);for(let e=Le(k,u,S);e<O;++e){let i,l,c;if(p.evaluateStart||p.evaluateEnd){[i,l,c]=Oe(p);const t=n.length;if(p.evaluateStart){const s=h.concat(n.slice(d+1,t)).filter((t=>t.animationElement&&t.delay<X)),a=s.length;if(a){we(s,k),[i,l,c]=me(g,x,A,e,p,i,l,c,w,s,!0);for(let t=0;t<a;++t){const e=s[t];e.hasState(2)&&n.includes(e)&&xe(h,e)}}}if(p.evaluateEnd&&p.getIntervalEndTime(k)<X&&(h.length||d<t-1)){const s=h.filter((t=>t.animationElement));for(let e=d+1;e<t;++e){const t=n[e];t.animationElement&&(s.includes(t)||s.push(t),xe(h,t))}s.length&&(Ee(s,k),[i,l,c]=me(g,x,A,e,p,i,l,c,w,s,!1))}Se(g,x,A,p,w,i,l,c)}else({keyTimes:i,values:l,keySplines:c}=p);for(let n=0,h=i.length;n<h;++n){const d=i[n];let g=-1,v=fe(p,l,e,n,w);if(e===O-1&&L>0)if(L===d)L=-1;else if(n===h-1)g=G,k=g,v=de(L,i[n-1],fe(p,l,e,n-1,w),d,v),L=-1;else if(L>d)for(let t=n+1;t<h;++t)if(L<=i[t]){g=G,k=g,v=de(L,d,v,i[t],fe(p,l,e,t,w)),L=-1;break}if(-1===g){if(g=Ne(u,S,i,e,n),g<0||g<f)continue;if(g===X)Y=e===O-1&&n===h-1,k=g;else{const t=t=>[f,U]=ge(p,k,w,i,l,c,u,e,n,t,o,a,m,y);if(u<0&&-1===f)g>0&&(k=0,t(0));else{if(g>X){r&&f+1<X&&t(f),k=X,t(X+(X!==T||a.has(X-1)?0:-1)),Y=!1;break e}if(r)p.hasState(1)&&(k=q),u>=f?(g=Math.max(u,f+1),k=u):g===f?(k=g,g=f+1):(t(f),k=Math.max(g,f)),r=!1;else{if(k=g,e>0&&0===n&&p.accumulateSum){ve(p,g,c,n,o,m,y),f=g;continue}g=Math.max(g,f+1)}}}}if(g>f&&(n===s-1&&!p.accumulateSum&&(e<O-1||p.fillReplace&&(!t||v!==t.value))&&--g,f=ye(a,g,v),ve(p,f,c,n,o,m,y),U=v),!Y||-1===L)break e}}}M(e,d)}if(void 0!==U&&(w=U,t&&(ue(E,p.type,z,f),V=p)),D&&(D.hasState(16)?(U=D.to,f=Te(a,D,t,D.delay,U),k=D.delay,B(k,U,D.type,D)):p.hasState(32)&&ue(E,f,D.type),Re(h),Y=!0),ie(r,(t=>t.delay>=q&&t.delay<=k),(t=>{B(t.delay,t.to,t.type,t),t.animationElement&&Re(h)})),v){if(!Y){h=[p];continue}if(!D){b[i]=p;break t}}if(Y){if(!v&&P(p,T))break t;for(let t=e;t<s;++t)if(l[t]<k){const e=c[t];for(let t=0,s=e.length;t<s;++t){const s=e[t],i=s.getTotalDuration();i>k&&!s.hasState(2,8,32)?xe(h,s):s.fillReplace||B(i,s.valueTo,s.type,s)}l[t]=1/0,e.length=0}if(h.length&&k<T){Ee(h);const t=h.find((t=>t.delay<=k));t&&(t.removeState(2,1),t.addState(4),Re(h,t),u=t.delay,n=[t],d=-1)}}else xe(h,p)}}if(h.length)for(Ee(h);h.length;){const e=h.shift(),{delay:s,duration:n}=e,r=f-s;let l=1/0;const c=()=>{let[c,u,d]=Oe(e);const v=Le(k,s,n);if(h.length){if(e.evaluateStart){const t=h.slice(0);we(t,k),[c,u,d]=me(g,x,A,v,e,c,u,d,w,t,!0)}e.evaluateEnd&&e.getIntervalEndTime(k)<l&&([c,u,d]=me(g,x,A,v,e,c,u,d,w,h,!1))}Se(g,x,A,e,w,c,u,d);const S=f+1;let b=!1,T=Math.floor(r/n);const R=(t,n)=>ge(e,k,w,c,u,d,s,T,t,n,o,p[i],m,y);do{for(let t=0,i=c.length;t<i;++t){let r=Ne(s,n,c,T,t);if(!b&&r>=f&&([f,w]=R(t,f),b=!0),b)if(r>=l){if(l>f){const s=e.fillReplace||-1===e.iterationCount;[f,w]=R(t,l-(s?1:0)),s&&(w=fe(e,u,T,0,w),f=ye(a,l,w)),k=l}}else r>f&&(k=r,t===i-1&&r<l&&--r,w=fe(e,u,T,t,w),f=ye(a,r,w),ve(e,f,d,t,o,m,y))}}while(f<l&&++T);t&&ue(E,e.type,S,f)};if(-1===e.iterationCount){r>0&&r%e.duration!=0&&(l=s+e.duration*Math.ceil(r/n),c()),b[i]=e;break t}if(l=Math.min(s+e.duration*e.iterationCount,e.end||1/0),l>f&&(c(),P(e)))break t}if(_&&_.fillReplace&&!(i in b)){let e=0,s;if(x[i]){const t=ke(x,i);t&&({key:e,value:s}=t)}else t?(e=Array.from(E.values()).pop(),s=I.typeAsValue(e)):s=A[i];void 0===s||Zt(a.get(f),s)||(f=ye(a,f,s),t&&ue(E,e,f))}}v[i]=f}{const e=new Set;let i=0;for(const t in p){let s=0;for(const i of p[t].keys())e.add(i),s=i;i=Math.max(i,s),null===(a=x[t])||void 0===a||a.sort(((t,e)=>t.time-e.time))}if(jt(b)){const t=[],s=[];for(const e in b){const i=b[e];t.push(i.delay),s.push(i.duration)}const n=t[0];if(0===S.size&&1===new Set(t).size&&1===new Set(s).size&&n===e.values().next().value)w=n;else if(s.length>1&&s.every((t=>t%250==0)))i=Kt(s,i,t);else{const t=s[0];(i-n)%t!=0&&(i=t*Math.ceil(i/t))}}if(-1===w)for(const s in p){const n=b[s];if(n){let a=v[s];if(a<i){const r=p[s],l=n.delay,c=a+1;let h=Array.from(r.values()).pop();const[u,f,d]=Oe(n);Se(g,x,A,n,h,u,f,d);const S=u.length;let b=Math.floor((a-l)/n.duration);do{let t;for(let s=0;s<S;++s){let c=Ne(l,n.duration,u,b,s);!t&&c>=a&&([a,h]=ge(n,a,h,u,f,d,l,b,s,a,o,r,m,y),e.add(a),t=!0),t&&c>a&&(s===S-1&&c<i&&--c,h=fe(n,f,b,s,h),a=ye(r,c,h),ve(n,c,d,s,o,m,y),e.add(a))}}while(a<i&&++b);v[s]=a,t&&ue(E,n.type,c,a)}}}const n=ne(Array.from(e));if(s||t){let t;for(const e in p){const s=p[e];if(!s.has(0)){const i=A[e];if(void 0!==i){const e=s.keys().next().value-1;s.set(0,i),s.set(e,i),n.includes(0)||(n.push(0),t=!0),n.includes(e)||(n.push(e),t=!0)}}}t&&ne(n)}if(!t)for(const e in p){const s=p[e],i=s.keys().next().value,a=s.values().next().value;for(let r=0,o=n.length;r<o;++r){const o=n[r];if(!(o<=v[e]))break;if(!s.has(o)){if(g.paused(e,o))if(o<i)s.set(o,a);else{let t=g.get(e,o);if(void 0!==t&&(t=oe(t,!0),""!==t)){s.set(o,t);continue}}ae(s,e,o,g,t)}}}V=he(p,n,x)}if(-1===w&&jt(b)){const e={},s=[],i=[],n=[];for(const t in b){const e=b[t];n.push(e.duration),s.push(e)}const a=Kt(n);for(let t=0,n=s.length;t<n;++t){const n=s[t],l=n.attributeName;e[l]=new Map;let c=null!==(r=p[l].get(v[l]))&&void 0!==r?r:A[l];const[h,u,f]=Oe(n);Se(g,x,A,n,c,h,u,f);const d=h.length;let m=0,y=0;do{for(let t=0;t<d;++t){let s=Ne(0,n.duration,h,y,t);t===h.length-1&&s<a&&--s,c=fe(n,u,y,t,c),m=ye(e[l],s,c),ve(n,m,f,t,o,k,T),i.includes(m)||i.push(m)}++y}while(m<a)}if(s.every((t=>t.alternate))){let t=-1;for(const s in b){const n=e[s],r=Array.from(n.keys()),o=Array.from(n.values()).reverse();for(let e=0,s=r.length;e<s;++e){const s=r[e];if(0!==s){t=a+s;const r=k.get(s);r&&k.set(t,r),t=ye(n,t,o[e]),i.includes(t)||i.push(t)}}}}ne(i);for(const s in e){const n=e[s];for(let e=0,a=i.length;e<a;++e){const a=i[e];n.has(a)||ae(n,s,a,g,t)}}_=he(e,i,x)}if(V||_){Pe(c,h);const e=Array.from(E),i=Jt(h,(t=>SvgBuild.isAnimateTransform(t)?I.typeAsName(t.type):t.attributeName),"-"),n=this.parent;for(const a of[V,_])if(a){const r=a===V,h=r?m:k,u=r?y:T;if(Be(t,o)){const i=[];if(t){const t=[];if(r){const s=Array.from(a);let i=e[0][1];for(let n=0,a=0,r=0,o=e.length;n<o;++n){const l=n<o-1?e[n+1][1]:-1;if(i!==l){const o=new Map;for(let t=r,l=s.length;t<l;++t){const l=s[t][0];if(l>=e[a][0]&&l<=e[n][0])o.set(l,new Map([[i,s[t][1].values().next().value]])),r=t;else if(l>e[n][0])break}t.push(o),i=l,a=n+1}}}else{if(!b.transform)continue;{const e=new Map;for(const[t,s]of a)e.set(t,new Map([[b.transform.type,s.values().next().value]]));t.push(e)}}let s=0;for(let e=0,n=t.length;e<n;++e){const a=Array.from(t[e]),o=a[0];let l=o[0];const f=o[1];1===a.length&&(e<n-1?a.push([t[e+1].keys().next().value,f]):a.push([l+1,f]));const d=a.length,g=a[d-1][0];let p=g-l;const m=new SvgAnimateTransform;m.type=f.keys().next().value;for(let t=0;t<d;++t){const e=a[t];if(i.push(h.get(e[0])||""),m.type!==SVGTransform.SVG_TRANSFORM_ROTATE){const s=u.get(e[0]);s&&((m.transformOrigin||(m.transformOrigin=[]))[t]=s)}e[0]-=l}for(const[t,e]of re(a))m.keyTimes.push(t),m.values.push(e.values().next().value);l-=s,l>1?m.delay=l:1===l&&(p+1)%10==0&&++p,m.duration=p,m.keySplines=i,m.synchronized={key:e,value:""},s=g,_e(c,m,r)}}else{const t=Array.from(a),e=-1!==w?w:0;let o;for(let s=0,n=t.length;s<n;++s){const n=t[s];i.push(h.get(n[0])||""),n[0]-=e}if(s){const e=ce(re(t),s,n,x,l);if(!e)continue;o=new SvgAnimate,o.attributeName="d";for(let t=0,s=e.length;t<s;++t){const s=e[t];o.keyTimes.push(s.key),o.values.push(s.value.toString())}}else{const t=new SvgAnimateTransform;t.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;for(const[e,s]of a){const i=s.get("x")||0,a=s.get("y")||0;t.keyTimes.push(e),t.values.push(n?n.refitX(i)+" "+n.refitX(a):i+" "+a)}o=t}o.delay=e,o.keySplines=i,o.duration=te(t)[0],_e(c,o,r)}}else if(Ce(t,o)){const o=Array.from(a);for(let a=0,f=o.length-1;a<f;++a){const[f,d]=o[a],[g,p]=o[a+1];let m=i,y;if(t){const t=new SvgAnimateTransform;if(r)for(let s=0,i=e.length-1;s<i;++s){const i=e[s],n=e[s+1];if(i[1]===n[1]&&f>=i[0]&&g<=n[0]){t.type=i[1];break}if(g-f==1&&g===n[0]){t.type=n[1];break}}else b.transform&&(t.type=b.transform.type);if(0===t.type)continue;t.values=[d.values().next().value,p.values().next().value];const s=u.get(g);s&&(t.transformOrigin=[s]),y=t}else if(s){const t=ce([[f,d],[g,p]],s,n,x,l);if(!t)continue;y=new SvgAnimate,y.attributeName="d",y.values=se(t,(t=>t.value.toString()))}else{const t=new SvgAnimateTransform;t.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,t.values=[Ve(d,n),Ve(p,n)],m+=a,y=t}r&&(y.delay=0===a?f:0),y.duration=g-f,y.keyTimes=[0,1],y.synchronized={key:a,value:m};const v=h.get(g);v&&(y.keySplines=[v]),_e(c,y,r)}}}}}}}};const{isPercent:Ie,parseAngle:qe}=squared.lib.css,{getNamedItem:ze}=squared.lib.dom,{truncateFraction:Xe}=squared.lib.math,{convertPercent:De,isEqual:Ye,isNumber:Ue,iterateArray:$e,lastItemOf:We,plainMap:Ke}=squared.lib.util,je=(t,e,s,i)=>t&&t.key===e&&t.rotate===i&&Ye(t.value,s);class SvgAnimateMotion extends SvgAnimateTransform{constructor(t,e){if(super(t,e),this.path="",this.distance="0%",this.rotate="auto 0deg",this.motionPathElement=null,this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.instanceType=229384,this._offsetLength=0,this._keyPoints=[],this._offsetPath=null,e){this.setAttribute("path");const t=ze(e,"rotate");switch(t){case"auto":break;case"auto-reverse":this.rotate="auto 180deg";break;default:Ue(t)&&(this.rotate=+t+"deg")}$e(e.children,(t=>{if("mpath"===t.tagName){let e=Y(t);if(e&&(L.use(e)&&(e=Y(e)),e&&L.shape(e)))return this.motionPathElement=e,!0}})),this.setCalcMode()}else if(t){const e=/path\("([^"]+)"\)/.exec(X(t,"offset-path"));e&&(this.path=e[1]);const s=X(t,"offset-distance");s&&(this.distance=s);const i=X(t,"offset-rotate");i&&"auto"!==i&&(this.rotate=i)}}setCalcMode(){const t=this.animationElement;if(t){const e=ze(t,"calcMode")||"paced";switch(e){case"paced":case"discrete":case"spline":super.setCalcMode("translate",e);break;case"linear":{const e=SvgAnimateTransform.toFractionList(ze(t,"keyPoints"),";",!1);let s=super.keyTimes;0===s.length&&-1!==this.duration&&(s=SvgAnimateTransform.toFractionList(ze(t,"keyTimes")),this.length=0,super.keyTimes=s),e.length===s.length&&(this._keyPoints=e);break}}}}addKeyPoint(t){if(!this._offsetPath){const e=t.key;if(e>=0&&e<=1){const s=super.keyTimes,i=this._keyPoints;if(s.length===i.length){const n=t.value;let a=Ie(n)?De(n):parseFloat(n)/this.offsetLength;if(!isNaN(a)){a=Math.min(a,1);const n=s.findIndex((t=>t===e));-1!==n?(s[n]=t.key,i[n]=a):(s.push(t.key),i.push(a))}}}}}setOffsetPath(){if(!this._offsetPath&&this.path){let t=SvgBuild.toOffsetPath(this.path,this.rotate),e=t.length;if(e){const{duration:s,keyPoints:i,rotateData:n,framesPerSecond:a}=this;let r=1;if(s>=e){r=s/e;const i=e-1;for(let e=1;e<i;++e)t[e].key*=r;t[i].key=s}else if(s>0){const i=new Array(s),n=e/s;let a;for(let e=0;e<s;++e)a=t[Math.floor(e*n)],a.key=e,i[e]=a;const r=We(t);a.value!==r.value&&(r.key=s,i.push(r)),t=i,e=i.length}const o=a?1e3/a:0;if(i.length){const n=e-1,a=super.keyTimes,l=[];if(i.length>1){let e;for(let c=0,h=a.length-1;c<h;++c){const h=a[c],u=Xe(h*s),f=Xe((a[c+1]-h)*s),d=i[c],g=i[c+1];if(0===f){const s=u,{value:i,rotate:a}=t[Math.floor(g*n)];je(e,s,i,a)||(e={key:s,value:i,rotate:a},l.push(e))}else{let s=u,i=0;if(d===g){const{value:a,rotate:c}=t[Math.floor(d*n)];for(je(e,u,a,c)&&(i+=r,s+=o);i<f;i+=r){const t=u+i;t>=s&&(l.push({key:t,value:a,rotate:c}),i<f-1?s+=o:s=0)}}else{const a=Math.floor(Math.min(d,g)*n),r=Math.floor(Math.max(d,g)*n),c=[];for(let e=a;e<=r;++e)c.push(t[e]);d>g&&c.reverse();const h=c.length,p=f/h,m=c[0];for(je(e,u,m.value,m.rotate)&&(++i,s+=o);i<h;++i){const t=u+i*p;if(t>=s){const e=c[i];e.key=t,l.push(e),i<h-1?s+=o:s=0}}}We(l).key=u+f}}}else l.push(t[Math.floor(i[0]*n)]),0===a[0]&&(l[0].rotate=0);this._offsetPath=l}else if(o>0){const s=[];for(let i=0;i<e;i+=o)s.push(t[Math.floor(i)]);const i=We(t);We(s)!==i&&s.push(i),this._offsetPath=s}else this._offsetPath=t;if(n){t=this._offsetPath;for(let e=0,i=0,a=n.length-1;e<a;++e){const a=n[e],r=n[e+1],o=r.key,l=[];if(a.key===o)l.push(t[i++]);else{const e=Math.floor(Xe(o*s));do{const s=t[i];if(!(s&&s.key<=e))break;l.push(s)}while(++i)}const c=a.value,h=r.value,u=qe(We(c.split(" "))),f=qe(We(h.split(" ")));if(isNaN(u)||isNaN(f))continue;const d=c.startsWith("auto");if(c===h||u===f){const t=l.length;if(d){if(0!==u)for(let e=0;e<t;++e)l[e].rotate+=u}else for(let e=0;e<t;++e)l[e].rotate=u}else{const t=f-u,e=l.length-1,s=t/e;if(d){for(let t=0;t<e;++t)l[t].rotate+=u+t*s;l[e].rotate+=u+t}else{for(let t=0;t<e;++t)l[t].rotate=u+t*s;l[e].rotate=u+t}}}}this.keySplines=null,this.timingFunction=SvgAnimateTransform.KEYSPLINE_NAME.linear}}}reverseKeyPoints(){let t,e;return this.validKeyPoints()&&(e=this._keyPoints.slice(0).reverse(),t=Ke(super.keyTimes,(t=>1-t)).reverse()),{keyTimes:t,keyPoints:e}}validKeyPoints(){const t=this.keyPoints;return t.length>0&&t.length===super.keyTimes.length}set keyTimes(t){this.path||(super.keyTimes=t)}get keyTimes(){this.setOffsetPath();const t=this._offsetPath;if(t){const e=this.duration;return Ke(t,(t=>t.key/e))}return super.keyTimes}set values(t){this.path||(super.values=t)}get values(){return this.setOffsetPath(),this._offsetPath?Ke(this._offsetPath,(t=>`${t.value.x} ${t.value.y}`)):super.values}set reverse(t){if(t!==this._reverse){const{keyTimes:e,keyPoints:s}=this.reverseKeyPoints();e&&s&&(this.length=0,this._keyPoints=s,super.keyTimes=e,super.reverse=t)}}get reverse(){return this._reverse}set alternate(t){const e=this.iterationCount;if(t!==this._alternate&&(-1===e||e>1)){const{keyTimes:s,keyPoints:i}=this.reverseKeyPoints();if(s&&i){const n=super.keyTimes.slice(0),a=this.keyPoints.slice(0),r=n.length;if(-1===e){for(let t=0;t<r;++t)n[t]/=2,s[t]=.5+s[t]/2;n.push(...s),a.push(...i),this.duration*=2}else{for(let t=0;t<e;++t)if(0===t)for(let t=0;t<r;++t)n[t]/=e;else{const o=t*(1/e),l=t%2==0?super.keyTimes.slice(0):s.slice(0);for(let t=0;t<r;++t)l[t]=Xe(o+l[t]/e);n.push(...l),a.push(...t%2==0?this.keyPoints.slice(0):i)}this.duration=this.duration*e,this.iterationCount=1}this._keyTimes=n,this._keyPoints=a,this._alternate=t}}}get alternate(){return this._alternate}set parent(t){this._parent=t;const e=this.parentContainer;e&&e.requireRefit&&this.path&&(this.path=SvgBuild.transformRefit(this.path,{container:e}))}get parent(){return this._parent}get offsetPath(){return this._offsetPath}get playable(){return!this.paused&&-1!==this.duration&&!!this.path}get rotateValues(){return this.setOffsetPath(),this._offsetPath&&Ke(this._offsetPath,(t=>t.rotate))}get keyPoints(){return this._keyPoints}get offsetLength(){return 0===this._offsetLength&&this.path?H(this.path):this._offsetLength}}var He=squared.lib.base.Pattern;const{hasCalc:Ze,isAngle:Qe,isCustomProperty:Je,isPercent:ts,getKeyframesRules:es,parseAngle:ss,parseVar:is}=squared.lib.css,{getNamedItem:ns}=squared.lib.dom,{convertCamelCase:as,convertPercent:rs,convertWord:os,iterateArray:ls,replaceMap:cs,sortNumber:hs,splitPairEnd:us,startsWith:fs}=squared.lib.util,ds=new He(`(ease|ease-(?:in|out|in-out)|linear|step-(?:start|end)|steps\\(\\d+,\\s*(?:start|end|jump-(?:start|end|both|none))\\)|cubic-bezier\\(${O}\\))\\s*,?`),gs={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"};function ps(t,e){const s=X(t,e);if("animation-timing-function"===e){const t=[];for(ds.matcher(s);ds.find();)t.push(ds.group(1));return t}return s.split(/\s*,\s*/)}function ms(t){if(fs(t,"reverse")){const e=us(t," ",!0);return`auto ${e?Qe(e)?180+ss(e,0):"0":"180"}deg`}return t}function ys(t,e,s){var i;const n=null===(i=t["transform-origin"])||void 0===i?void 0:i.find((t=>t.key===s));if(n)return I.origin(e,n.value)}function vs(t,e,s){var i;if(s){const i=t.querySelector(`:scope > ${e}[lang="${s}"]`);if(i)return i.textContent.trim()||""}return(null===(i=t.querySelector(`:scope > ${e}`))||void 0===i?void 0:i.textContent.trim())||""}const Ss=t=>t.sort(((t,e)=>t.key-e.key));var bs=t=>class extends t{constructor(){super(...arguments),this.transformed=null,this._transforms=null,this._animations=null,this._name=null}getTransforms(t=this.element){return SvgBuild.filterTransforms(I.parse(t)||SvgBuild.convertTransforms(t.transform.baseVal))}getAnimations(t=this.element){var e,s,i,n;const a=[];let r=0;const o=(t,e,s="")=>{s||++r,t.delay=e,t.group={id:r,name:s},t.parent=this,a.push(t)};ls(t.children,(e=>{var s;if(e instanceof SVGAnimationElement){const i=ns(e,"begin"),n=i?hs(cs(i.split(";"),(t=>SvgAnimation.parseClockTime(t))).filter((t=>!isNaN(t)))):[0];if(0===n.length)return;const a=null===(s=this.viewport)||void 0===s?void 0:s.precision;switch(e.tagName){case"set":for(const s of n)o(new SvgAnimation(t,e),s);break;case"animate":for(const s of n)o(new SvgAnimate(t,e),s);break;case"animateTransform":for(const s of n){const i=new SvgAnimateTransform(t,e);SvgBuild.isShape(this)&&this.path&&(i.transformFrom=SvgBuild.drawRefit(t,this.parent,a)),o(i,s)}break;case"animateMotion":for(const s of n){const i=new SvgAnimateMotion(t,e),n=i.motionPathElement;n&&(i.path=SvgBuild.drawRefit(n,this.parent,a)),o(i,s)}}}}));const l=ps(t,"animation-name"),c=l.length;if(0===c)return a;const h=(null===(e=this.viewport)||void 0===e?void 0:e.keyframesMap)||es(),u={},f=[],d=[];for(const e in gs){const s=ps(t,e);for(0===s.length&&s.push(gs[e]);s.length<c;)s.push(...s.slice(0));s.length=c,u[e]=s}for(let e=0;e<c;++e){const a=h.get(l[e]),c=SvgAnimation.parseClockTime(u["animation-duration"][e]);if(a&&!isNaN(c)&&c>0){++r;const h={},g={},p="paused"===u["animation-play-state"][e],m=SvgAnimation.parseClockTime(u["animation-delay"][e])||0,y=u["animation-iteration-count"][e],v=u["animation-fill-mode"][e],S=l[e]+"_"+e,b=[];let k=!0;d.push({name:S,attributes:b,paused:p,delay:m,duration:c,iterationCount:y,fillMode:v});for(const e in a){const s=rs(e),i=a[e];for(const e in i){let n=i[e];if(ts(n)&&(n=`calc(${n})`),Ze(n)?n=z(t,as(e),n):Je(n)&&(n=is(t,n)),n){const t=gs[e]?g:h;(t[e]||(t[e]=[])).push({key:s,value:n})}}}if(h.transform){const e=Ss(h.transform);for(let i=0,n=e.length;i<n;++i){const n=e[i],a=n.key,r=ys(h,t,a)||I.origin(t);null===(s=I.parse(t,n.value))||void 0===s||s.forEach((t=>{const e=t.matrix;let s,i,n;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:s="translate",i=e.e+" "+e.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:s="scale",i=e.a+" "+e.d+" "+(r?r.x+" "+r.y:"0 0"),!r||0===a&&0===r.x&&0===r.y||(n={x:r.x*(1-e.a),y:r.y*(1-e.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:s="rotate",i=t.angle+" "+(r?r.x+" "+r.y:"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:s="skewX",i=t.angle.toString(),!r||0===a&&0===r.y||(n={x:r.y*e.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:s="skewY",i=t.angle.toString(),!r||0===a&&0===r.x||(n={x:0,y:r.x*e.b*-1});break;default:return}const o=h[s]||(h[s]=[]),l=o.findIndex((t=>t.key===a));if(-1!==l){const t=o[l];t.value=i,t.transformOrigin=n}else o.push({key:a,value:i,transformOrigin:n})}))}delete h.transform,delete h["transform-origin"]}if("none"===X(t,"offset-path"))delete h["offset-distance"],delete h["offset-rotate"];else if(h["offset-rotate"]){const e=h["offset-rotate"];if(h["offset-distance"]||!h.rotate){let s=X(t,"offset-rotate");s&&"auto"!==s||(s="auto 0deg"),Ss(e);const i=e[0],n=e[e.length-1];0!==i.key&&e.unshift({key:0,value:s}),1!==n.key&&e.push({key:1,value:s});for(let t=1;t<e.length;++t){const s=e[t-1],i=e[t],n=ms(s.value),a=ms(i.value);if(s.value=n,i.value=a,n.split(" ").pop()!==a.split(" ").pop()){const r=fs(n,"auto"),o=fs(a,"auto");if(r&&!o||!r&&o){const r=(s.key+i.key)/2;e.splice(t++,0,{key:r,value:n}),e.splice(t++,0,{key:r,value:a})}}}if(!h["offset-distance"]){const s=new SvgAnimateMotion(t);s.duration=0,s.iterationCount=1,s.fillForwards=!0,s.addKeyPoint({key:0,value:s.distance}),o(s,m,S);for(let t=0,s=e.length;t<s;++t){const s=e[t];s.value=ss(s.value.split(" ").pop(),0)+(fs(s.value,"auto")?90:0)+" 0 0"}h.rotate=e,delete h["offset-rotate"],k=!1}}else delete h["offset-rotate"]}for(const s in h){let a;switch(s){case"offset-rotate":continue;case"offset-distance":a=new SvgAnimateMotion(t),a.rotateData=h["offset-rotate"];break;case"rotate":case"scale":case"skewX":case"skewY":case"translate":a=new SvgAnimateTransform(t),a.setType(s);break;default:a=new SvgAnimate(t),a.attributeName=s}o(a,m,S);const r=h[s],l=u["animation-direction"][e],d=u["animation-timing-function"][e],T=r.length;if(Ss(r),"offset-distance"===s){const t=a;0!==r[0].key&&t.addKeyPoint({key:0,value:t.distance});for(let e=0;e<T;++e)t.addKeyPoint(r[e]);1!==r.pop().key&&t.addKeyPoint({key:1,value:t.distance}),d&&(t.timingFunction=d)}else{b.push(s);const e=[],o=new Array(T),l=new Array(T);for(let t=0;t<T;++t){const s=r[t],{key:c,value:h}=s;o[t]=c,l[t]=h,k&&t<T-1&&e.push((null===(n=null===(i=g["animation-timing-function"])||void 0===i?void 0:i.find((t=>t.key===c)))||void 0===n?void 0:n.value)||d);const u=s.transformOrigin;u&&SvgBuild.asAnimateTransform(a)&&((a.transformOrigin||(a.transformOrigin=[]))[t]=u)}if(k&&!e.every((t=>"linear"===t))){const i=[],n=[],r=[];for(let a=0,h=o.length;a<h;++a){const u=o[a],f=l[a];if(a<h-1){const h=e[a];if(f&&fs(h,"step")){const e=SvgAnimate.fromStepTimingFunction(t,s,h,o,l,a);if(e){const[t,s]=e,l=(o[a+1]-u)*c,f=t.length-(1===o[a+1]?1:0);for(let e=0;e<f;++e){let a=(u+t[e]*l)/c;i.includes(a)&&(a+=.001),i.push(a),n.push(s[e]),r.push(SvgAnimate.KEYSPLINE_NAME[h.includes("start")?"step-start":"step-end"])}continue}}r.push(SvgAnimate.findTimingFunction(h))}i.push(u),n.push(f)}a.values=n,a.keyTimes=i,a.keySplines=r}else a.values=l,a.keyTimes=o,k?a.keySplines=e:a.timingFunction=d}a.paused=p,a.duration=c,a.iterationCount="infinite"!==y?+y:-1,a.fillForwards="forwards"===v||"both"===v,a.fillBackwards="backwards"===v||"both"===v,a.reverse=l.endsWith("reverse"),a.alternate=(-1===a.iterationCount||a.iterationCount>1)&&fs(l,"alternate"),f.push(a)}}}d.reverse();for(let t=0,e=f.length;t<e;++t)f[t].setGroupOrdering(d);return a}getTitle(t){return vs(this.element,"title",t)}getDesc(t){return!t&&ns(this.element,"aria-describedby")||vs(this.element,"desc",t)}set name(t){this._name=t}get name(){let t=this._name;if(null===t){const e=this.element;let s=e.id.trim(),i,n;s?(s=os(s,!0),G.has(s)||(i=s),n=s):n=e.tagName;let a=G.get(n)||0;i?(G.set(i,a),t=i):(G.set(n,++a),t=n+"_"+a),this._name=t}return t}get transforms(){return this._transforms||(this._transforms=this.getTransforms())}get animations(){return this._animations||(this._animations=this.getAnimations())}get visible(){const t=X(this.element,"visibility");return"hidden"!==t&&"collapse"!==t&&"none"!==X(this.element,"display")}get opacity(){return X(this.element,"opacity")||"1"}};const{isUserAgent:ks}=squared.lib.client;function Ts(t){if("svg"===t.tagName){if(ks(4))return t.parentElement instanceof HTMLElement;if(ks(2))return!(t.parentElement instanceof HTMLElement)}return!1}var As=t=>class extends t{constructor(){super(...arguments),this._x=NaN,this._y=NaN,this._width=NaN,this._height=NaN}setRect(){const t=this.parent;let{x:e,y:s,width:i,height:n}=this;t&&(e=t.refitX(e),s=t.refitY(s),i=t.refitSize(i),n=t.refitSize(n)),this.setBaseValue("x",e),this.setBaseValue("y",s),this.setBaseValue("width",i),this.setBaseValue("height",n)}getRectElement(){const t=this.rectElement||this.element;switch(t.tagName){case"svg":case"use":case"image":return t;default:return null}}set x(t){this._x=t}get x(){var t;return isNaN(this._x)?(null===(t=this.getRectElement())||void 0===t?void 0:t.x.baseVal.value)||0:this._x}set y(t){this._y=t}get y(){var t;return isNaN(this._y)?(null===(t=this.getRectElement())||void 0===t?void 0:t.y.baseVal.value)||0:this._y}set width(t){this._width=t}get width(){if(isNaN(this._width)){const t=this.getRectElement();return t?Ts(t)?t.getBoundingClientRect().width:t.width.baseVal.value:0}return this._width}set height(t){this._height=t}get height(){if(isNaN(this._height)){const t=this.getRectElement();return t?Ts(t)?t.getBoundingClientRect().height:t.height.baseVal.value:0}return this._height}};const{cloneObject:xs,iterateArray:Es}=squared.lib.util,Rs=new RegExp(squared.lib.regex.STRING.LENGTH_PERCENTAGE);function ws(t,e,s,i){if(t){const n=e.aspectRatio,a=t.aspectRatio;if(s&&i){xs(s,{target:n});const{width:e,height:r}=n;if(e>0&&r>0){const s=e/r;let o=a.width||t.viewBox.width,l=a.height||t.viewBox.height,c=NaN,h=NaN,u;0===o&&0===l&&(({width:o,height:l}=q(t.element)),a.width=o,a.height=l,u=!0);const f=o/l,d=o/e,g=l/r,p=X(i,"width"),m=X(i,"height");if(u)c=o,h=l;else{if(L.svg(i))try{c=i.width.baseVal.value,h=i.height.baseVal.value}catch(t){}c||h||(c=+p,h=+m)}const y=Ps(p),v=Ps(m),S=c/e,b=h/r;let k=y&&v;if(c>=e&&h>=r?(n.unit=Math.min(S,b),k=!1):(d!==g||u)&&(n.unit=Math.min(d,g)),y||v){if(c&&h){const{align:t,meetOrSlice:s}=i.preserveAspectRatio.baseVal;if(S===b)k&&(n.unit*=S),n.align=SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,e>r?n.alignX=!0:n.alignY=!0;else{switch(s){case SVGPreserveAspectRatio.SVG_MEETORSLICE_MEET:b<S?(k&&(r>=e&&r>=l?n.unit=b:n.unit*=b),n.alignX=!0):(k&&(e>=r&&e>=o?n.unit=S:n.unit*=S),n.alignY=!0);break;case SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE:b>S?(k&&(r>=e&&r>=l?n.unit=b:n.unit*=b),n.alignX=!0,n.alignY=r>l):(k&&(e>=r&&e>=o?n.unit=S:n.unit*=S),n.alignX=e>o,n.alignY=!0)}n.align=t}n.meetOrSlice=s}}else f>s?n.position.x=(o-l*s)/2:f<s&&(n.position.y=(l-o*(1/s))/2)}}const{parent:r,position:o,unit:l,x:c,y:h}=a;n.parent.x=c+c*(l-1),n.position.x*=a.unit,n.position.x+=o.x-r.x,n.parent.y=h+h*(l-1),n.position.y*=l,n.position.y+=o.y-r.y,n.unit*=l}}function Vs(t){do{if(SvgBuild.asSvg(t)&&t.documentRoot)return t;t=t.parent}while(t);return null}function _s(t){do{if(t.hasViewBox())return t;t=t.parent}while(t)}const Ps=t=>Rs.test(t);class SvgContainer extends squared.lib.base.Container{constructor(t){super(),this.element=t,this.parent=null,this.viewport=null,this.instanceType=2,this.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1,meetOrSlice:SVGPreserveAspectRatio.SVG_MEETORSLICE_UNKNOWN,align:SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,alignX:!1,alignY:!1},this._clipRegion=[]}add(t,e){return t.parent=this,t.viewport=e||Vs(this),super.add(t)}build(t){let e=!0,s,i;t?(s=t.targetElement||this.element,i=t.precision,"targetElement"in(t=Object.assign({},t))&&delete t.targetElement,!1===t.initialize&&(e=!1)):s=this.element;const n=Vs(this);let a,r=null;n&&(({element:a,contentMap:r}=n),void 0===i&&(i=n.precision));const o=_s(this),l=this.aspectRatio;let c;if(this.clear(),Es(s.children,(s=>{let i;if(L.svg(s))i=new squared.svg.Svg(s,!1),ws(o,i,s.viewBox.baseVal,s),c=!0;else if(L.g(s))i=new squared.svg.SvgG(s),ws(o,i);else if(L.use(s)){const t=Y(s,a,r);if(t)if(L.symbol(t))i=new squared.svg.SvgUseSymbol(t,s),ws(o,i,t.viewBox.baseVal,t),c=!0;else if(L.g(t))i=new squared.svg.SvgUseG(t,s),ws(o,i);else if(L.image(t))i=new squared.svg.SvgImage(s,t);else if(L.shape(t)){const a=n&&n.findFill(s);a?(i=new squared.svg.SvgUseShapePattern(t,s,a),ws(o,i)):i=new squared.svg.SvgUseShape(t,s,e)}}else if(L.image(s))i=new squared.svg.SvgImage(s);else if(L.shape(s)){const t=n&&n.findFill(s);t?(i=new squared.svg.SvgShapePattern(s,t),ws(o,i)):i=new squared.svg.SvgShape(s,e)}i&&(this.add(i,n),i.build(t))})),SvgBuild.asSvg(this)&&(this.documentRoot||l.meetOrSlice))if(this.documentRoot)(l.x<0||l.y<0)&&this.clipViewBox(l.x,l.y,l.width,l.height,i,!0);else{const{x:t,y:e}=this.parent.aspectRatio;this.clipViewBox(t,e,this.width+t,this.height+e,i,!0)}else if(c&&this.hasViewBox()&&(0!==l.x||0!==l.y)){const{left:t,top:e}=SvgBuild.boxRectOf(this.getPathAll(!1)),s=this.refitX(l.x),n=this.refitY(l.y);(t<s||e<n)&&this.clipViewBox(t,e,this.refitSize(l.width),this.refitSize(l.height),i)}}hasViewBox(){return SvgBuild.asSvg(this)&&(!!this.element.viewBox.baseVal||this.documentRoot)||SvgBuild.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}clipViewBox(t,e,s,i,n,a){a&&(s-=t,i-=e,SvgBuild.asSvg(this)&&this.documentRoot?(t=t<0?-1*t:0,e=e<0?-1*e:0):(t*=-1,e*=-1)),this.clipRegion=SvgBuild.drawRect(s,i,t,e,n)}synchronize(t){this.each((e=>e.synchronize(t)))}refitX(t){const e=this.aspectRatio;return(t-e.x)*e.unit-e.parent.x+e.position.x}refitY(t){const e=this.aspectRatio;return(t-e.y)*e.unit-e.parent.y+e.position.y}refitSize(t){return t*this.aspectRatio.unit}refitPoints(t){const e=this.aspectRatio.unit,s=t.length;for(let i=0;i<s;++i){const s=t[i];s.x=this.refitX(s.x),s.y=this.refitY(s.y),void 0!==s.rx&&void 0!==s.ry&&(s.rx*=e,s.ry*=e)}if(SvgBuild.asSvg(this)&&this.aspectRatio.meetOrSlice){const{align:e,alignX:i,alignY:n,parent:a}=this.aspectRatio,{width:r,height:o}=this,{top:l,right:c,bottom:h,left:u}=SvgBuild.minMaxOf(t,!0);let f=0,d=0;i&&(f=-1*a.x),n&&(d=-1*a.y);let g=f,p=d;const m=()=>r/2-(c+u)/2,y=()=>r-u-c+f,v=()=>o/2-(l+h)/2,S=()=>o-l-h+d;switch(e){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:i&&(g-=f),n&&(p-=d);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:i&&(g-=f),n&&(p+=v());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:i&&(g-=f),n&&(p+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:i&&(g+=m()),n&&(p-=d);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_NONE:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:i&&(g+=m()),n&&(p+=v());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:i&&(g+=m()),n&&(p+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:i&&(g+=y()),n&&(p-=d);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:i&&(g+=y()),n&&(p+=v());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:i&&(g+=y()),n&&(p+=S())}for(let e=0;e<s;++e){const s=t[e];s.x+=g,s.y+=p}}return t}getPathAll(t=!0){var e;const s=[];for(const i of t?this.cascade():this.children)if(SvgBuild.isShape(i)){const t=null===(e=i.path)||void 0===e?void 0:e.value;t&&s.push(t)}return s}set clipRegion(t){t?this._clipRegion.push(t):this._clipRegion=[]}get clipRegion(){return this._clipRegion.join(";")}get requireRefit(){const t=this.aspectRatio;return 0!==t.x||0!==t.y||1!==t.unit||0!==t.position.x||0!==t.position.y||0!==t.parent.x||0!==t.parent.y}}const{parseColor:Ns}=squared.lib.color,{extractURL:Ms,getKeyframesRules:Bs}=squared.lib.css,{getNamedItem:Cs}=squared.lib.dom,{cloneObject:Gs}=squared.lib.util;function Os(t){const e=[],s=t.getElementsByTagName("stop");for(let t=0,i=s.length;t<i;++t){const i=s[t],n=Ns(Cs(i,"stop-color"),+(Cs(i,"stop-opacity")||"1"));n&&e.push({color:n,offset:parseFloat(Cs(i,"offset"))/100})}return e}function Ls(t,...e){const s={};for(let i=0,n=e.length;i<n;++i){const n=e[i],a=t[n];a&&(s[n]=a.baseVal.value,s[n+"AsString"]=a.baseVal.valueAsString)}return s}function Fs(t){return Object.assign({type:"linear",element:t,spreadMethod:t.spreadMethod.baseVal,colorStops:Os(t),dimension:null},Ls(t,"x1","x2","y1","y2"))}function Is(t){return Object.assign({type:"radial",element:t,spreadMethod:t.spreadMethod.baseVal,colorStops:Os(t),dimension:null},Ls(t,"cx","cy","r","fx","fy","fr"))}class Svg extends(Fe(As(pt(bs(SvgContainer))))){constructor(t,e=!0){super(t),this.element=t,this.documentRoot=e,this.instanceType=18,this.definitions={clipPath:new Map,pattern:new Map,gradient:new Map,contentMap:null},e&&(this.viewport=this),this.init()}build(t){this.documentRoot&&(this.keyframesMap=t.keyframesMap||Bs()),this.precision=t.precision,this.setRect(),super.build(t)}synchronize(t){!this.documentRoot&&this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}findFill(t){if("string"!=typeof t&&(t=Ms(D(t,"fill"))||""),t){const e=this.definitions.pattern.get(t);if(e)return e;const s=document.getElementById(t.substring(1));if(s instanceof SVGPatternElement)return s}}findFillPattern(t){let e;if("string"!=typeof t&&(t=Ms(D(t,"fillPattern"))||""),t&&(e=this.definitions.gradient.get(t),!e)){const s=document.getElementById(t.substring(1));s&&(L.linearGradient(s)?e=Fs(s):L.radialGradient(s)&&(e=Is(s)),e&&this.definitions.gradient.set(t,e))}return e}init(){const t=this.element;this.documentRoot&&(Gs(t.viewBox.baseVal,{target:this.aspectRatio}),t.querySelectorAll("set, animate, animateTransform, animateMotion").forEach((e=>{const s=Y(e,t);if(s){const t=e.parentElement;t&&t.removeChild(e),s.appendChild(e)}}))),this.setDefinitions(t),t.querySelectorAll("defs").forEach((t=>this.setDefinitions(t)))}setDefinitions(t){const e=this.definitions;t.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach((t=>{const s=`#${t.id.trim()}`;"#"!==s&&(L.clipPath(t)?e.clipPath.has(s)||e.clipPath.set(s,t):L.pattern(t)?e.pattern.has(s)||e.pattern.set(s,t):L.linearGradient(t)?e.gradient.has(s)||e.gradient.set(s,Fs(t)):L.radialGradient(t)&&(e.gradient.has(s)||e.gradient.set(s,Is(t))))}))}set contentMap(t){this.definitions.contentMap=t}get contentMap(){return this.definitions.contentMap}get viewBox(){return this.element.viewBox.baseVal||{x:0,y:0,width:0,height:0}}}class SvgElement{constructor(t){this.element=t,this.parent=null,this.viewport=null,this.instanceType=4}build(t){}synchronize(t){}}const{STRING:qs}=squared.lib.regex,{parseColor:zs}=squared.lib.color,{extractURL:Xs,getFontSize:Ds,hasCalc:Ys,hasEm:Us,isCustomProperty:$s,isLength:Ws,isPercent:Ks,parseUnit:js,parseVar:Hs}=squared.lib.css,{truncate:Zs}=squared.lib.math,{convertCamelCase:Qs,convertPercent:Js,isNumber:ti,joinArray:ei,plainMap:si}=squared.lib.util,ii={polygon:/polygon\(([^)]+)\)/,inset:new RegExp(`inset\\(${qs.LENGTH_PERCENTAGE}\\s?${qs.LENGTH_PERCENTAGE}?\\s?${qs.LENGTH_PERCENTAGE}?\\s?${qs.LENGTH_PERCENTAGE}?\\)`),circle:new RegExp(`circle\\(${qs.LENGTH_PERCENTAGE}(?:\\s+at\\s+${qs.LENGTH_PERCENTAGE}\\s+${qs.LENGTH_PERCENTAGE})?\\)`),ellipse:new RegExp(`ellipse\\(${qs.LENGTH_PERCENTAGE}\\s+${qs.LENGTH_PERCENTAGE}(?:\\s+at\\s+${qs.LENGTH_PERCENTAGE}\\s+${qs.LENGTH_PERCENTAGE})?\\)`)};var ni=t=>class extends t{constructor(){super(...arguments),this.fill="",this.fillPattern="",this.fillOpacity="",this.fillRule="",this.stroke="",this.strokePattern="",this.strokeOpacity="",this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit="",this.strokeDasharray="",this.strokeDashoffset="",this.color="",this.clipPath="",this.clipRule="",this._strokeWidth=""}setStroke(){this.setAttribute("stroke"),this.setAttribute("stroke-width")}setPaint(t,e){this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setStroke(),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");const s=this.getAttribute("clip-path");if(s&&"none"!==s){const i=Xs(s);if(i)this.clipPath=i;else if(t&&t.length)for(const i in ii){const n=ii[i].exec(s);if(n){const{top:s,right:a,bottom:r,left:o}=SvgBuild.boxRectOf(t),l=a-o,c=r-s,h=this.parent;switch(i){case"inset":{let t=0,i=this.convertLength(n[1],c),u=0,f=0;n[4]?(t=o+this.convertLength(n[4],l),u=a-this.convertLength(n[2],l),f=r-this.convertLength(n[3],c)):n[2]?(t=this.convertLength(n[2],l),u=a-t,f=r-(n[3]?this.convertLength(n[3],c):i),t+=o):(t=o+i,u=a-i,f=r-i),i+=s;const d=[{x:t,y:i},{x:u,y:i},{x:u,y:f},{x:t,y:f}];h&&h.refitPoints(d),this.clipPath=SvgBuild.drawPolygon(d,e);break}case"polygon":{const t=si(n[1].split(","),(t=>{let e=o,i=s;return t.trim().split(" ").forEach(((t,s)=>{0===s?e+=this.convertLength(t,l):i+=this.convertLength(t,c)})),{x:e,y:i}}));h&&h.refitPoints(t),this.clipPath=SvgBuild.drawPolygon(t,e);break}default:if("circle"===i||"ellipse"===i){const t=l<c?l:c;let a,r;"circle"===i?(a=this.convertLength(n[1],t),r=a):(a=this.convertLength(n[1],l),r=this.convertLength(n[2],c));let u=o,f=s;const d=n.length;d>=4&&(u+=this.convertLength(n[d-2],t),f+=this.convertLength(n[d-1],t)),h&&(u=h.refitX(u),f=h.refitX(f),a=h.refitSize(a),r=h.refitSize(r)),this.clipPath=SvgBuild.drawEllipse(u,f,a,r,e)}}break}}}}setAttribute(t){const e=this.element;let s=this.getAttribute(t);if(s){switch(t=Qs(t),Ys(s)?s=z(e,t,s)||getComputedStyle(e)[t]:$s(s)&&(s=Hs(e,s)||getComputedStyle(e)[t]),t){case"strokeDasharray":s="none"!==s?ei(s.replace(/[,\s]+/g,",").split(","),(t=>this.convertLength(t).toString()),", "):"";break;case"strokeDashoffset":case"strokeWidth":s=this.convertLength(s).toString();break;case"fill":case"stroke":{const i=Xs(s);if(i)this[t+"Pattern"]=i;else{let i;switch(s){case"none":case"transparent":case"rgba(0, 0, 0, 0)":return void(this[t]="none");case"currentcolor":case"currentColor":s=this.color||X(e,"color",!0);default:i=zs(s)}i&&(this[t]=i.value)}return}}this[t]=s}}getAttribute(t){let e=X(this.element,t);if(!e){if(this.patternParent)switch(t){case"fill-opacity":case"stroke-opacity":break;default:return e}let s=this.useParent||this.parent;for(;s&&!(e=X(SvgBuild.isUse(s)?s.useElement:s.element,t));)s=s.parent}return e}convertLength(t,e){return ti(t)?+t:Ws(t)?js(t,Us(t)?{fontSize:Ds(this.element)}:void 0):Ks(t)?Math.round(("number"==typeof e?e:this.element.getBoundingClientRect()[e||"width"])*Js(t)):0}resetPaint(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}set strokeWidth(t){this._strokeWidth=t}get strokeWidth(){var t;const e=this.stroke;if(e&&"none"!==e){const e=this._strokeWidth;if(e)return(null===(t=this.parent)||void 0===t?void 0:t.requireRefit)?Zs(this.parent.refitSize(+e)):e}return""}};class SvgG extends(ni(bs(SvgContainer))){constructor(t){super(t),this.element=t,this.instanceType=34}build(t){super.build(t),this.setPaint(this.getPathAll(),t&&t.precision)}}const{resolvePath:ai}=squared.lib.util;class SvgImage extends(As(pt(bs(SvgElement)))){constructor(t,e){super(t),this.element=t,this.imageElement=null,this.instanceType=8196,e&&(this.imageElement=e,this.rectElement=e)}build(){this.setRect()}renderStatic(t){let{x:e,y:s,width:i,height:n,parent:a}=this;const r=t?SvgBuild.filterTransforms(this.transforms,t):this.transforms,o=r.length;if(o){r.reverse();for(let t=0;t<o;++t){const a=r[t],o=a.matrix,l=e;e=F.applyX(o,l,s),s=F.applyY(o,l,s);let c=this.rotateAngle;switch(a.type){case SVGTransform.SVG_TRANSFORM_SCALE:i*=o.a,n*=o.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==a.angle&&(o.a<0&&(e+=o.a*i),o.c<0&&(e+=o.c*i),o.b<0&&(s+=o.b*n),o.d<0&&(s+=o.d*n),c?c+=a.angle:c=a.angle)}this.rotateAngle=c}this.transformed=r}if(a){if(this.imageElement){const t=this.element;e+=t.x.baseVal.value,s+=t.y.baseVal.value}e=a.refitX(e),s=a.refitY(s),i=a.refitSize(i),n=a.refitSize(n);do{if(SvgBuild.asSvg(a)||SvgBuild.isUse(a)){const{x:t,y:i}=a;(a=a.parent)&&(0!==t&&(e+=a.refitX(t)),0!==i&&(s+=a.refitY(i)))}else a=a.parent}while(a)}this.setBaseValue("x",e),this.setBaseValue("y",s),this.setBaseValue("width",i),this.setBaseValue("height",n)}set x(t){super.x=t}get x(){var t;return super.x||(null===(t=this.imageElement)||void 0===t?void 0:t.x.baseVal.value)||0}set y(t){super.y=t}get y(){var t;return super.y||(null===(t=this.imageElement)||void 0===t?void 0:t.y.baseVal.value)||0}set width(t){super.width=t}get width(){var t;return super.width||(null===(t=this.imageElement)||void 0===t?void 0:t.width.baseVal.value)||0}set height(t){super.height=t}get height(){var t;return super.height||(null===(t=this.imageElement)||void 0===t?void 0:t.height.baseVal.value)||0}get href(){const t=this.imageElement||this.element;return L.image(t)?ai(t.href.baseVal):""}get transforms(){return this._transforms?this._transforms:this._transforms=this.imageElement?super.transforms.concat(this.getTransforms(this.imageElement)):super.transforms}get animations(){return this._animations?this._animations:this._animations=this.imageElement?super.animations.concat(this.getAnimations(this.imageElement)):super.animations}}const{getNamedItem:ri}=squared.lib.dom,{equal:oi,lessEqual:li,multipleOf:ci,offsetAngleX:hi,offsetAngleY:ui,relativeAngle:fi,truncateFraction:di}=squared.lib.math,{cloneObject:gi,convertInt:pi,convertFloat:mi,startsWith:yi}=squared.lib.util;function vi(t,e,s,i){const n=t[0],a=t[t.length-1];if(void 0!==s)switch(e){case"x":s-=n.start.x;break;case"x1":case"cx":return n.start.x=s,void(n.coordinates[0]=s);case"x2":return a.end.x=s,void(a.coordinates[0]=s)}if(void 0!==i)switch(e){case"y":i-=n.start.y;break;case"y1":case"cy":return n.start.y=i,void(n.coordinates[1]=i);case"y2":return a.end.y=i,void(a.coordinates[1]=i)}for(let e=0,n=t.length;e<n;++e){const n=t[e],{coordinates:a,value:r}=n;for(let t=0,e=0,o=a.length;t<o;t+=2,++e)void 0!==s&&(n.relative||(a[t]+=s),r[e].x+=s),void 0!==i&&(n.relative||(a[t+1]+=i),r[e].y+=i)}}function Si(t,e,s){for(let i=0,n=t.length;i<n;++i){const n=t[i];if("A"===n.key.toUpperCase()){if(void 0!==e){const s=e-n.radiusX,a=2*e*(n.coordinates[0]<0?-1:1);if(n.radiusX=e,n.coordinates[0]=a,n.start.x=a,n.end.x=a,1===i){const e=t[0];e.coordinates[0]-=s,e.start.x-=s,e.end.x-=s}}void 0!==s&&(n.radiusY=s)}}}function bi(t,e,s,i){const n=t.get("stroke-dashoffset",s,i);return n?+n:e}function ki(t,e,s,i){const n=t.get("stroke-dasharray",s,i);return n?SvgBuild.parseCoordinates(n):e}const Ti=t=>t?t.start+" "+t.end:"1 1";class SvgPath extends(ni(pt(SvgElement))){constructor(t){super(t),this.element=t,this.name="",this.value="",this.baseValue="",this.parent=null,this.transformed=null,this.instanceType=16388,this.init()}static extrapolate(t,e,s,i,n,a){const r=n&&n.parent,o=i&&i.length>0||r&&r.requireRefit,l=[];let c;for(let h=0,u=s.length;h<u;++h){if("d"===t)l[h]=s[h];else if("points"===t){const t=SvgBuild.convertPoints(SvgBuild.parseCoordinates(s[h]));t.length&&(l[h]=n&&L.polygon(n.element)?SvgBuild.drawPolygon(t,a):SvgBuild.drawPolyline(t,a))}else if(e){c||(c=SvgBuild.toPathCommands(e));const i=+s[h];if(!isNaN(i)){const e=h<u-1?gi(c,{deep:!0}):c;switch(t){case"x":case"x1":case"x2":case"cx":vi(e,t,i);break;case"y":case"y1":case"y2":case"cy":vi(e,t,void 0,i);break;case"r":Si(e,i,i);break;case"rx":Si(e,i);break;case"ry":Si(e,void 0,i);break;case"width":for(const t of[1,2]){const s=e[t];switch(s.key){case"m":case"l":case"h":s.coordinates[0]=i*(s.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":s.coordinates[0]=e[0].end.x+i}}break;case"height":for(const t of[2,3]){const s=e[t];switch(s.key){case"m":case"l":case"v":s.coordinates[1]=i*(s.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":s.coordinates[1]=e[0].end.y+i}}break;default:l[h]="";continue}l[h]=SvgBuild.drawPath(e,a)}}l[h]?o&&(l[h]=SvgBuild.transformRefit(l[h],{transforms:i,parent:n,container:r,precision:a})):l[h]=""}return l}build(t){var e;this.draw(t&&t.transforms?SvgBuild.filterTransforms(t.transforms,null===(e=t.exclude)||void 0===e?void 0:e[this.element.tagName]):null,t)}draw(t,e){let s,i;e&&({residualHandler:s,precision:i}=e);const n=this.element,a=this.parent,r=this.patternParent,o=a&&a.requireRefit,l=r&&2===r.patternContentUnits;let c;if(this.transformed=null,L.path(n)){if(c=K(this.getBaseValue("d")),t&&t.length||o||l){const e=SvgBuild.toPathCommands(c);if(e.length){let h=SvgBuild.toPathPoints(e);h.length&&(l&&r.patternRefitPoints(h),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,n,t)),t.length&&(h=SvgBuild.applyTransforms(t,h,I.origin(this.element)),this.transformed=t)),this.baseValue=SvgBuild.drawPath(SvgBuild.syncPath(o?gi(e,{deep:!0}):e,o?gi(h,{deep:!0}):h,!!this.transformed),i),o?(a.refitPoints(h),c=SvgBuild.drawPath(SvgBuild.syncPath(e,h,!!this.transformed),i)):c=this.baseValue)}}this.baseValue||(this.baseValue=c)}else if(L.line(n)){let e=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];l&&r.patternRefitPoints(e),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,n,t)),t.length&&(e=SvgBuild.applyTransforms(t,e,I.origin(this.element)),this.transformed=t));const h=()=>SvgBuild.drawPolyline(e,i);this.baseValue=h(),o?(a.refitPoints(e),c=h()):c=this.baseValue}else if(L.circle(n)||L.ellipse(n)){const e=this.getBaseValue("cx"),h=this.getBaseValue("cy");let u,f;L.ellipse(n)?(u=this.getBaseValue("rx"),f=this.getBaseValue("ry")):(u=this.getBaseValue("r"),f=u);let d=[{x:e,y:h,rx:u,ry:f}];l&&r.patternRefitPoints(d),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,n,t,u,f)),t.length&&(d=SvgBuild.applyTransforms(t,d,I.origin(this.element)),this.transformed=t));const g=d[0],p=()=>SvgBuild.drawEllipse(g.x,g.y,g.rx,g.ry,i);this.baseValue=p(),o?(a.refitPoints(d),c=p()):c=this.baseValue}else if(L.rect(n)){let e=this.getBaseValue("x"),h=this.getBaseValue("y"),u=this.getBaseValue("width"),f=this.getBaseValue("height");if(o||t&&t.length){let d=[{x:e,y:h},{x:e+u,y:h},{x:e+u,y:h+f},{x:e,y:h+f}];l&&r.patternRefitPoints(d),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,n,t)),t.length&&(d=SvgBuild.applyTransforms(t,d,I.origin(this.element)),this.transformed=t)),this.baseValue=SvgBuild.drawPolygon(d,i),o?(a.refitPoints(d),c=SvgBuild.drawPolygon(d,i)):c=this.baseValue}else l&&(e=r.patternRefitX(e),h=r.patternRefitY(h),u=r.patternRefitX(u),f=r.patternRefitY(f)),c=SvgBuild.drawRect(u,f,e,h,i),this.baseValue=c}else if(L.polygon(n)||L.polyline(n)){let e=this.getBaseValue("points");l&&r.patternRefitPoints(e),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,n,t)),t.length&&(e=SvgBuild.applyTransforms(t,e,I.origin(this.element)),this.transformed=t));const h=()=>L.polygon(n)?SvgBuild.drawPolygon(e,i):SvgBuild.drawPolyline(e,i);this.baseValue=h(),o?(this.transformed||(e=SvgBuild.clonePoints(e)),a.refitPoints(e),c=h()):c=this.baseValue}else c="";switch(this.value=c,this.setPaint([c],i),n.tagName){case"line":case"polyline":this.fill=""}return c}extendLength(t,e){if(this.value)switch(this.element.tagName){case"path":case"line":case"polyline":{const s=SvgBuild.toPathCommands(this.value),i=s.length;if(i){const n=s[0],a=n.start,r=s[i-1],o=r.end,l=r.key.toUpperCase(),{leading:c,trailing:h}=t;let u;if("Z"!==l&&(a.x!==o.x||a.y!==o.y)){if(c>0){let t;if(n.value.length>1?t=n.value[1]:i>1&&(t=s[1].start),t){const e=n.coordinates;if(t.x===a.x)e[1]+=a.y>t.y?c:-1*c,u=!0;else if(t.y===a.y)e[0]+=a.x>t.x?c:-1*c,u=!0;else{const s=fi(t,a);e[0]-=hi(s,c),e[1]-=ui(s,c),u=!0}}}switch(l){case"M":case"L":if(h>0){let t;if(1===i){const e=n.value;e.length>1&&(t=e[e.length-2])}else{const e=r.value;t=e.length>1?e[e.length-2]:s[s.length-2].end}if(t){const e=r.coordinates;if(t.x===o.x)e[1]+=o.y>t.y?h:-1*h,u=!0;else if(t.y===o.y)e[0]+=o.x>t.x?h:-1*h,u=!0;else{const s=fi(t,o);e[0]+=hi(s,h),e[1]+=ui(s,h),u=!0}}}break;case"H":case"V":{const t=r.coordinates,e="H"===l?0:1;t[e]+=(c+h)*(t[e]>=0?1:-1),u=!0;break}}}if(u)return t.leading=c,t.trailing=h,t.path=SvgBuild.drawPath(s,e),t;break}}}return t}flattenStrokeDash(t,e,s,i,n){i||(i=s);let a=0,r,o,l,c,h,u=0;const f=t=>r[t%o];if(n)({dashArray:r,dashArrayTotal:l,extendedLength:c,startIndex:u}=n),o=r.length,n.items=[],n.leading=0;else{o=t.length,r=t.slice(0);const a=ci([2,o]);l=0;for(let e=0;e<a;++e){const s=t[e%o];l+=s,e>=o&&r.push(s)}if(o=a,e>0){let t=f(0);for(;e-t>=0;)e-=t,t=f(++u);u%=o}else if(e<0){for(r.reverse();e<0;)e+=f(u++);u=o-u%o,r.reverse()}c=i,n={dashArray:r,dashArrayTotal:l,items:[],leading:0,trailing:0,startIndex:u,extendedLength:c,lengthRatio:s/(i||s)}}for(let t=0,s=0;;t+=s,++u){let i,r;s=f(u),t<e?(n.leading=e-t,i=0,r=s-n.leading):(i=t-e,r=s);const o=di(i/c);if(h=di(o+r/c),u%2==0?o<1&&(n.items.push({start:o,end:Math.min(h,1),length:s}),a+=s):a+=s,h>=1)break}for(n.trailing=di((h-1)*c);a%l!=0;){const t=f(++u);n.trailing+=t,a+=t}return 0===n.items.length?n.items.push({start:1,end:1}):(n.leadingOffset=di(n.items[0].start*c),n.leading*=n.lengthRatio,n.trailing*=n.lengthRatio),n}extractStrokeDash(t,e){const s=+this.strokeWidth;let i="",n="",a;if(s){let r=SvgBuild.parseCoordinates(this.strokeDasharray);if(r.length){const o=this.totalLength,l=this.pathLength||o,c=[];let h=pi(this.strokeDashoffset),u=0,f;const d=(t,e,s,i=0)=>{const n=this.flattenStrokeDash(t,e,o,l);return 0===c.length&&(f=n),u=Math.max(u,n.items.length),c.push({items:n.items,delay:s,duration:i}),n.items};if(a=d(r,h,0),t){const g=t.slice(0).sort(((t,e)=>{if(yi(t.attributeName,"stroke-dash")&&yi(e.attributeName,"stroke-dash")){if(t.delay!==e.delay)return t.delay-e.delay;if(SvgBuild.asSet(t)&&SvgBuild.asAnimate(e)||!t.animationElement&&e.animationElement)return-1;if(SvgBuild.asAnimate(t)&&SvgBuild.asSet(e)||t.animationElement&&!e.animationElement)return 1}return 0})),p=new SvgAnimationIntervalMap(g,"stroke-dasharray","stroke-dashoffset"),m=t=>{let e=h;for(let s=t,i=g.length;s<i;++s){const t=g[s];if("stroke-dasharray"===t.attributeName){const s=p.get("stroke-dashoffset",t.delay);s&&(e=+s);for(const s of SvgBuild.asAnimate(t)?p.evaluateStart(t):[t.to])u=Math.max(u,this.flattenStrokeDash(SvgBuild.parseCoordinates(s),e,o,l).items.length)}}},y=[];let v,S;if(g.length>1)for(let t=0;t<g.length;++t){const e=g[t];p.has(e.attributeName,e.delay,e)||g.splice(t--,1)}for(let t=0;t<g.length;++t){const b=g[t];if(b.setterType){const t=(t,e)=>{d(t,e,b.delay,b.fillReplace&&b.duration>0?b.duration:0),S=!0};switch(b.attributeName){case"stroke-dasharray":r=SvgBuild.parseCoordinates(b.to),t(r,bi(p,h,b.delay));continue;case"stroke-dashoffset":h=pi(b.to),t(ki(p,r,b.delay),h);continue}}else if(SvgBuild.asAnimate(b)&&b.playable)switch(p.evaluateStart(b),b.attributeName){case"stroke-dasharray":{v||(m(t),v=!0);const e=bi(p,h,b.delay),s=this.flattenStrokeDash(ki(p,r,b.delay),e,o,l).items,i=[],n=[];for(let t=0;t<u;++t){const e=new SvgAnimate(this.element);e.id=t,e.baseValue=Ti(s[t]),e.attributeName="stroke-dasharray",e.delay=b.delay,e.duration=b.duration,e.iterationCount=b.iterationCount,e.fillMode=b.fillMode,n[t]=[],i.push(e)}const a=b.values;for(let t=0,s=a.length;t<s;++t){const s=this.flattenStrokeDash(SvgBuild.parseCoordinates(a[t]),e,o,l).items;for(let t=0;t<u;++t)n[t].push(Ti(s[t]))}const{keyTimes:c,keySplines:f}=b,d=b.timingFunction;for(let t=0;t<u;++t){const e=i[t];e.values=n[t],e.keyTimes=c,f?e.keySplines=f:d&&(e.timingFunction=d)}if(b.fillReplace){const t=b.getTotalDuration(),e=this.flattenStrokeDash(ki(p,r,t),bi(p,h,t),o,l).items;for(let t=0;t<u;++t)i[t].replaceValue=Ti(e[t])}y.push(...i),S=!0;continue}case"stroke-dashoffset":{const t=b.duration,r=+b.values[0];let d=0,g=0,m=o,y=1,v;if(h===r||0!==b.delay||b.fillReplace||(f=this.flattenStrokeDash(f.dashArray,r,o,l),a=f.items,c[0].items=a,u=Math.max(u,f.items.length),h=r),(f.leading>0||f.trailing>0)&&(this.extendLength(f,e),f.path)){const t=SvgBuild.boxRectOf([this.value]);m=di(H(f.path)),y=m/o,f.extendedLength=this.pathLength,f.extendedLength?f.extendedLength*=y:f.extendedLength=m;const e=undefined;a=this.flattenStrokeDash(f.dashArray,0,o,l,f).items,c[0].items=a,u=Math.max(u,a.length);const r=Math.ceil(s/2);i=f.path,n=SvgBuild.drawRect(t.right-t.left,t.bottom-t.top+2*r,t.left,t.top-r)}if(b.fillReplace&&-1!==b.iterationCount){const t=mi(p.get(b.attributeName,b.getTotalDuration()));if(t!==h){let e=Math.abs(t-h)%m/m;t>h&&(e=1-e),v=e.toString()}}const k=b.keyTimes,T=b.values,A=[],x=[];for(let e=0,s=k.length;e<s;++e){const s=0===e?h:+T[e-1],i=+T[e],n=Math.abs(i-s),a=k[e];if(0===n){if(e>0){d=a,x.push(d);const t=A.length;t?(A.push(A[t-1]),g=+A[t-1]):(A.push("0"),g=0)}continue}const r=i>s,o=e>0?(a-k[e-1])*t:0,l=n*f.lengthRatio;let c=l/m,u=l,p=0;const y=()=>{const t=r?"1":"0";e>0&&A[A.length-1]===t||(x.push(0===d?0:di(d)),A.push(t))},v=(t,e)=>{if(p=(u-t)/m,e){const t=di(p);r?t>0&&(p=1-p):0===t&&(p=1)}},S=()=>{d=a,x.push(d);const t=di(p);A.push(t.toString()),g=t>0&&t<1?p:0},b=e=>e/l*o/t;if(0===e)u%=m,v(0),r&&(p=1-p),S();else{if(g>0){const t=r?g:1-g,e=di(t*m);if(li(u,e)){v(0),r?p=g-p:p+=g,S();continue}A.push(r?"0":"1"),d+=b(e),x.push(di(d)),c=di(c-t),u=di(u-e)}if(oi(u,m)&&(u=m),u>m){c=Math.floor(c);const t=c*m;t===u&&--c,v(t,!0)}else c=0,v(0,!0);for(;c>0;)y(),A.push(r?"0":"1"),d+=b(m),x.push(di(d)),--c;y(),S()}}b.baseValue="0",b.replaceValue=v,b.values=A,b.keyTimes=x;const E=b.timingFunction;E&&(b.keySplines=null,b.timingFunction=E),S=!0;break}}y.push(b)}if(S){for(let t=0,e=c.length;t<e;++t){const{delay:s,duration:i,items:n}=c[t];if(n===a)for(let t=n.length;t<u;++t)n.push({start:1,end:1});else{const t=e>2?this.flattenStrokeDash(ki(p,r,s-1),bi(p,h,s-1),o,l).items:a;for(let e=0;e<u;++e){const a=new SvgAnimation(this.element);a.id=e,a.attributeName="stroke-dasharray",a.baseValue=Ti(t[e]),a.delay=s,a.duration=i,a.fillFreeze=0===i,a.to=Ti(n[e]),y.push(a)}}}t=y}}}}return[t,a,i,n]}init(){const t=this.element;L.path(t)?this.setBaseValue("d"):L.line(t)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):L.rect(t)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):L.circle(t)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):L.ellipse(t)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(L.polygon(t)||L.polyline(t))&&this.setBaseValue("points",SvgBuild.clonePoints(t.points))}get transforms(){return this._transforms||(this._transforms=SvgBuild.filterTransforms(I.parse(this.element)||SvgBuild.convertTransforms(this.element.transform.baseVal)))}get pathLength(){return mi(ri(this.element,"pathLength"))}get totalLength(){return this.element.getTotalLength()}}class SvgPattern extends(bs(SvgContainer)){constructor(t,e){super(t),this.element=t,this.patternElement=e,this.instanceType=258}build(t){super.build(Object.assign(Object.assign({},t),{targetElement:this.patternElement,initialize:!1}))}get animations(){return[]}}class SvgShape extends(Fe(bs(SvgElement))){constructor(t,e=!0){super(t),this.element=t,this.instanceType=2052,this._path=null,e&&this.setPath()}setPath(){this.path=new SvgPath(this.element)}build(t){const e=this.path;e&&(e.parent=this.parent,e.build(Object.assign(Object.assign({},t),{transforms:this.transforms})))}synchronize(t){if(this.animations.length){const e=this.path;if(e){const s=t&&t.element;s?this.animateSequentially(this.getAnimateShape(s),void 0,e,t):this.animateSequentially(this.getAnimateShape(this.element),this.getAnimateTransform(t),e,t)}}}set path(t){this._path=t,t&&(t.name=this.name)}get path(){return this._path}}const{getNamedItem:Ai}=squared.lib.dom,{convertPercent:xi}=squared.lib.util;class SvgShapePattern extends(ni(pt(bs(SvgContainer)))){constructor(t,e){super(t),this.element=t,this.patternElement=e,this.drawRegion=null,this.instanceType=514,this.patternUnits="userSpaceOnUse"===Ai(this.patternElement,"patternUnits")?1:2,this.patternContentUnits="objectBoundingBox"===Ai(this.patternElement,"patternContentUnits")?2:1}build(t){const e=this.element,s=new SvgPath(e);s.build(Object.assign({},t));const i=s.value;if(i){const n=t&&t.precision;this.clipRegion=i,s.clipPath&&(this.clipRegion=s.clipPath);const a=[i];this.setPaint(a,n),this.drawRegion=SvgBuild.boxRectOf(a);const{drawRegion:r,fillOpacity:o,patternWidth:l,patternHeight:c,tileWidth:h,tileHeight:u}=this,f=2===this.patternUnits;let d=this.offsetX%h,g=this.offsetY%u,p=0,m=0,y=r.right,v=r.bottom;f&&(p=r.left,m=r.top,y-=p,v-=m),0!==d&&(d=h-d,y+=h),0!==g&&(g=u-g,v+=u);for(let s=0;v>0;++s){const i=this.patternElement,a=2===this.patternContentUnits,r=m+s*u-g;let f=y,S=0;do{const s=p+S++*h-d,g=new SvgPattern(e,i);g.build(Object.assign({},t)),g.cascade((e=>{if(SvgBuild.isShape(e)){e.setPath();const i=e.path;i&&(i.patternParent=this,a?i.refitBaseValue(s/l,r/c,n):i.refitBaseValue(s,r,n),i.build(Object.assign(Object.assign({},t),{transforms:e.transforms})),i.fillOpacity=(+i.fillOpacity*+o).toString(),i.clipPath=SvgBuild.drawRect(h,u,s,r,n)+(i.clipPath?";"+i.clipPath:""))}})),this.add(g),f-=h}while(f>0);v-=u}if(this.stroke&&+this.strokeWidth>0){s.fill="",s.fillOpacity="0",s.stroke=this.stroke,s.strokeWidth=this.strokeWidth;const t=new SvgShape(e,!1);t.path=s,this.add(t)}}}patternRefitX(t){return this.drawRegion?t*this.patternWidth:t}patternRefitY(t){return this.drawRegion?t*this.patternHeight:t}patternRefitPoints(t){if(this.drawRegion){const e=this.patternWidth,s=this.patternHeight;for(let i=0,n=t.length;i<n;++i){const n=t[i];if(n.x*=e,n.y*=s,void 0!==n.rx&&void 0!==n.ry)if(n.rx===n.ry){const t=Math.min(e,s);n.rx*=t,n.ry*=t}else n.rx*=e,n.ry*=s}}return t}get patternWidth(){const t=this.drawRegion;return t?t.right-t.left:0}get patternHeight(){const t=this.drawRegion;return t?t.bottom-t.top:0}get transforms(){if(!this._transforms){this._transforms=super.transforms;const t=SvgBuild.convertTransforms(this.patternElement.patternTransform.baseVal),e=t.length;if(e){const s=I.rotateOrigin(this.patternElement,"patternTransform"),i=this.patternWidth/2,n=this.patternHeight/2;for(let a=0;a<e;++a){const e=t[a];switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;s.length;){const t=s.shift();if(t.angle===e.angle){e.origin={x:i+t.x,y:n+t.y};break}}if(e.origin)break;default:e.origin={x:i,y:n}}}this._transforms.push(...SvgBuild.filterTransforms(t))}}return this._transforms}get offsetX(){const t=this.patternElement.x.baseVal;return 2===this.patternUnits?this.patternWidth*xi(t.valueAsString):t.value}get offsetY(){const t=this.patternElement.y.baseVal;return 2===this.patternUnits?this.patternHeight*xi(t.valueAsString):t.value}get tileWidth(){const t=this.patternElement.width.baseVal;return 2===this.patternUnits?this.patternWidth*xi(t.valueAsString):t.value}get tileHeight(){const t=this.patternElement.height.baseVal;return 2===this.patternUnits?this.patternHeight*xi(t.valueAsString):t.value}}class SvgUseG extends(As(pt(SvgG))){constructor(t,e){super(t),this.element=t,this.useElement=e,this.instanceType=115,this.useParent=this,this.rectElement=e}build(t){this.setRect(),super.build(t)}}class SvgUseShape extends(ni(As(pt(SvgShape)))){constructor(t,e,s=!0){super(t,!1),this.element=t,this.useElement=e,this.instanceType=6149,this.useParent=this,this.rectElement=e,s&&this.setPath()}setPath(){const t=new SvgPath(this.element);t.useParent=this,this.path=t}build(t){super.build(t),this.setPaint(this.path&&[this.path.value],t&&t.precision)}synchronize(t){t=Object.assign(Object.assign({},t),{element:this.element}),this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}getTransforms(){return super.getTransforms(this.useElement).concat(super.getTransforms())}getAnimations(){return super.getAnimations(this.useElement).concat(super.getAnimations())}}class SvgUseShapePattern extends(Fe(As(SvgShapePattern))){constructor(t,e,s){super(t,s),this.element=t,this.useElement=e,this.instanceType=1539,this.useParent=this,this.rectElement=e}synchronize(t){const e=this.animations.filter((t=>"x"===t.attributeName||"y"===t.attributeName||this.verifyBaseValue(t.attributeName,0)>0)),s=this.getAnimateTransform(t);(e.length||s.length)&&this.animateSequentially(this.getAnimateViewRect(e),s,void 0,t),super.synchronize(t)}}class SvgUseSymbol extends(ni(Fe(As(pt(bs(SvgContainer)))))){constructor(t,e){super(e),this.symbolElement=t,this.useElement=e,this.instanceType=131,this.useParent=this,this.rectElement=e}build(t){this.setRect(),super.build(Object.assign(Object.assign({},t),{targetElement:this.symbolElement})),this.setPaint(this.getPathAll(),t&&t.precision)}synchronize(t){this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}get viewBox(){return this.symbolElement.viewBox.baseVal||{x:0,y:0,width:0,height:0}}}const Ei={util:Z};return t.Svg=Svg,t.SvgAnimate=SvgAnimate,t.SvgAnimateMotion=SvgAnimateMotion,t.SvgAnimateTransform=SvgAnimateTransform,t.SvgAnimation=SvgAnimation,t.SvgAnimationIntervalMap=SvgAnimationIntervalMap,t.SvgBaseVal=pt,t.SvgBuild=SvgBuild,t.SvgContainer=SvgContainer,t.SvgElement=SvgElement,t.SvgG=SvgG,t.SvgImage=SvgImage,t.SvgPaint=ni,t.SvgPath=SvgPath,t.SvgPattern=SvgPattern,t.SvgShape=SvgShape,t.SvgShapePattern=SvgShapePattern,t.SvgSynchronize=Fe,t.SvgUseG=SvgUseG,t.SvgUseShape=SvgUseShape,t.SvgUseShapePattern=SvgUseShapePattern,t.SvgUseSymbol=SvgUseSymbol,t.SvgView=bs,t.SvgViewRect=As,t.lib=Ei,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
