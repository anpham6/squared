!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,(function(e){"use strict";const t=squared.lib,{CSS_UNIT:i,calculateStyle:s,calculateVar:n,convertAngle:a,getFontSize:r,isLength:l,isPercent:o,parseUnit:f}=t.css,{getNamedItem:c}=t.dom,{clamp:h,convertRadian:u,hypotenuse:d}=t.math,{STRING:p}=t.regex,{getStyleValue:g}=t.session,{convertCamelCase:m,convertFloat:y,isString:v}=t.util,S=`(${p.DECIMAL})`,b={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},k={MATRIX:new RegExp(`(matrix(?:3d)?)\\(${S},\\s+${S},\\s+${S},\\s+${S},\\s+${S},\\s+${S}(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?\\)`,"g"),ROTATE:new RegExp(`(rotate[XY]?)\\(${p.CSS_ANGLE}\\)`,"g"),SKEW:new RegExp(`(skew[XY]?)\\(${p.CSS_ANGLE}(?:,\\s+${p.CSS_ANGLE})?\\)`,"g"),SCALE:new RegExp(`(scale[XY]?)\\(${S}(?:,\\s+${S})?\\)`,"g"),TRANSLATE:new RegExp(`(translate[XY]?)\\(${p.LENGTH_PERCENTAGE}(?:,\\s+${p.LENGTH_PERCENTAGE})?\\)`,"g")},T=/rotate\((-?[\d.]+)(?:,?\s+(-?[\d.]+))?(?:,?\s+(-?[\d.]+))?\)/g;function w(e,t,i,s,n){if(l(s))t[i]=f(s,r(e));else if(o(s))t[i]=parseFloat(s)/100*n}const x={svg:e=>"svg"===e.tagName,g:e=>"g"===e.tagName,symbol:e=>"symbol"===e.tagName,path:e=>"path"===e.tagName,shape:e=>e.tagName in b,image:e=>"image"===e.tagName,use:e=>"use"===e.tagName,line:e=>"line"===e.tagName,rect:e=>"rect"===e.tagName,circle:e=>"circle"===e.tagName,ellipse:e=>"ellipse"===e.tagName,polygon:e=>"polygon"===e.tagName,polyline:e=>"polyline"===e.tagName,clipPath:e=>"clipPath"===e.tagName,pattern:e=>"pattern"===e.tagName,linearGradient:e=>"linearGradient"===e.tagName,radialGradient:e=>"radialGradient"===e.tagName},R={applyX:(e,t,i)=>e.a*t+e.c*i+e.e,applyY:(e,t,i)=>e.b*t+e.d*i+e.f,clone:e=>({a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}),rotate(e){const t=u(e),i=Math.cos(t),s=Math.sin(t);return{a:i,b:s,c:-1*s,d:i,e:0,f:0}},skew:(e=0,t=0)=>({a:1,b:Math.tan(u(t)),c:Math.tan(u(e)),d:1,e:0,f:0}),scale:(e=1,t=1)=>({a:e,b:0,c:0,d:t,e:0,f:0}),translate:(e=0,t=0)=>({a:1,b:0,c:0,d:1,e:e,f:t})},A={create:(e,t,i=0,s=true,n=true)=>({type:e,matrix:t,angle:i,method:{x:s,y:n}}),parse(e,t){const i=t||e.style.getPropertyValue("transform");if(""!==i){const s=[];for(const n in k){const l=k[n];let o;while(null!==(o=l.exec(i))){const i=o.index,n=o[1],l=n.endsWith("X"),c=n.endsWith("Y");if(n.startsWith("rotate")){const e=a(o[2],o[3]),t=R.rotate(e);if(l)t.a=1,t.b=0,t.c=0;else if(c)t.b=0,t.c=0,t.d=1;s[i]=A.create(SVGTransform.SVG_TRANSFORM_ROTATE,t,e,!l,!c)}else if(n.startsWith("skew")){const e=a(o[2],o[3]),t=c?0:e,n=c?e:o[4]&&o[5]?a(o[4],o[5]):0,r=R.skew(t,n);if(l)s[i]=A.create(SVGTransform.SVG_TRANSFORM_SKEWX,r,t,true,false);else if(c)s[i]=A.create(SVGTransform.SVG_TRANSFORM_SKEWY,r,n,false,true);else if(s[i]=A.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign(Object.assign({},r),{b:0}),t,true,false),0!==n)s[i+1]=A.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign(Object.assign({},r),{c:0}),n,false,true)}else if(n.startsWith("scale")){const e=c?void 0:parseFloat(o[2]),t=c?parseFloat(o[2]):!l&&o[3]?parseFloat(o[3]):e;s[i]=A.create(SVGTransform.SVG_TRANSFORM_SCALE,R.scale(e,l?void 0:t),0,!c,!l)}else if(n.startsWith("translate")){const t=r(e),n=f(o[2],t),a=!l&&o[3]?f(o[3],t):0,h=c?0:n,u=c?n:a;s[i]=A.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,R.translate(h,u),0)}else if(n.startsWith("matrix")){const n=A.matrix(e,t);if(n)s[i]=A.create(SVGTransform.SVG_TRANSFORM_MATRIX,n)}}l.lastIndex=0}const n=[];return s.forEach(e=>{e.fromCSS=true,n.push(e)}),n}},matrix(e,t){k.MATRIX.lastIndex=0;const i=k.MATRIX.exec(t||getComputedStyle(e).transform);if(i)switch(i[1]){case"matrix":return{a:parseFloat(i[2]),b:parseFloat(i[3]),c:parseFloat(i[4]),d:parseFloat(i[5]),e:parseFloat(i[6]),f:parseFloat(i[7])};case"matrix3d":return{a:parseFloat(i[2]),b:parseFloat(i[3]),c:parseFloat(i[6]),d:parseFloat(i[7]),e:parseFloat(i[14]),f:parseFloat(i[15])}}},origin(e,t){if(!v(t))t=P(e,"transform-origin");const i={x:0,y:0};if(""!==t){const s=F(e);let n,a;if(s)({width:n,height:a}=s);else{const t=e.parentElement;if(t instanceof SVGGraphicsElement){const e=t.viewportElement;if(e&&(x.svg(e)||x.symbol(e)))({width:n,height:a}=e.viewBox.baseVal)}}if(!n||!a)({width:n,height:a}=e.getBoundingClientRect());const r=t.split(" ");if(1===r.length)r.push("center");switch(r[0]){case"0%":case"left":break;case"100%":case"right":i.x=n;break;case"center":r[0]="50%";default:w(e,i,"x",r[0],n);break}switch(r[1]){case"0%":case"top":break;case"100%":case"bottom":i.y=a;break;case"center":r[1]="50%";default:w(e,i,"y",r[1],a);break}}return i},rotateOrigin(e,t="transform"){const i=c(e,t),s=[];if(""!==i){let e;T.lastIndex=0;while(null!==(e=T.exec(i))){const t=parseFloat(e[1]);if(0!==t)s.push({angle:t,x:y(e[2]),y:y(e[3])})}}return s},typeAsName(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}};function E(e){const t=e.getBoundingClientRect();return t.x=t.left,t.y=t.top,t}function V(e,t){const{width:i,height:s}=t;return e?Math.min(i,s):d(i,s)}function _(e,t,i){switch(t=m(t)){case"clipPath":case"height":case"offsetAnchor":case"offsetPath":case"transform":case"transformOrigin":case"width":return s(e,t,i,F(e));case"animationDelay":case"animationDuration":case"animationIterationCount":case"offsetDistance":case"offsetRotate":return s(e,t,i);case"fill":case"stroke":return s(e,"fontColor",i);case"fillOpacity":case"strokeOpacity":{const t=n(e,i,{boundingSize:1,unitType:64});return!isNaN(t)?h(t).toString():""}case"strokeMiterlimit":{const t=n(e,i,{supportPercent:false,unitType:64,min:1});return!isNaN(t)?t.toString():""}}const a=F(e)||e.getBoundingClientRect();switch(t){case"cx":case"x":case"x1":case"x2":{const t=n(e,i,{boundingSize:a.width});return!isNaN(t)?t.toString():""}case"cy":case"y":case"y1":case"y2":{const t=n(e,i,{boundingSize:a.height});return!isNaN(t)?t.toString():""}case"r":{const t=n(e,i,{boundingSize:V(true,a),min:0});return!isNaN(t)?t.toString():"0"}case"rx":{const t=n(e,i,{boundingSize:a.width,min:0});if(!isNaN(t))return x.rect(e)?Math.min(t,a.width/2).toString():t.toString();else return"0"}case"ry":{const t=n(e,i,{boundingSize:a.height,min:0});if(!isNaN(t))return x.rect(e)?Math.min(t,a.height/2).toString():t.toString();else return"0"}case"strokeDashoffset":{const t=n(e,i,{boundingSize:V(true,a),unitType:64});return!isNaN(t)?t.toString():""}case"strokeWidth":{const t=n(e,i,{boundingSize:V(false,a),unitType:64,min:0});return!isNaN(t)?t.toString():""}}return""}function P(e,t,i=false){let s;if(i)s=c(e,t)||g(e,t);else s=g(e,t)||function(e,t){var i;const s=e.dataset.baseValue;if(s)try{const e=JSON.parse(s);if(e)return(null===(i=e[t])||void 0===i?void 0:i.toString().trim())||""}catch(e){}return""}(e,t)||c(e,t);if(!v(s)&&(i||Array.from(e.style).includes(t)))s=getComputedStyle(e).getPropertyValue(t);return s||""}function M(e,t,i=true){let s,n=e;do{if(s=P(n,t,i),""!==s&&"inherit"!==s)break;n=n.parentElement}while(n&&!(n instanceof HTMLElement));return s}function N(e,t){const i=c(e,"href");if("#"===i.charAt(0)){const s=i.substring(1);let n;if(t)n=t;else{n=e.parentElement;while(n&&n.parentElement instanceof SVGGraphicsElement)n=n.parentElement}if(n){const e=n.querySelectorAll("*"),t=e.length;let i=0;while(i<t){const t=e.item(i++);if(t.id===s&&t instanceof SVGElement)return t}}else{const e=document.getElementById(s);if(e instanceof SVGElement)return e}}return null}function F(e){let t=e.parentElement;while(t){if(x.svg(t)||x.symbol(t)){const e=t.viewBox;if(e){const t=e.baseVal;if(t.width>0&&t.height>0)return t}}t=t.parentElement}}function C(e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t}function G(e){return C(e).getTotalLength()}var O=Object.freeze({__proto__:null,SVG:x,MATRIX:R,TRANSFORM:A,getDOMRect:E,calculateStyle:_,getAttribute:P,getParentAttribute:M,getTargetElement:N,getNearestViewBox:F,createPath:C,getPathLength:G});const L=squared.lib,{isAngle:B,parseAngle:I}=L.css,{getNamedItem:X}=L.dom,{absoluteAngle:$,offsetAngleY:z,relativeAngle:D,truncate:W,truncateFraction:Y,truncateString:q}=L.math,{CHAR:j,STRING:U,XML:K}=L.regex,{convertWord:H,hasBit:Z,isArray:Q,isString:J,objectMap:ee}=L.util,te=new RegExp(U.DECIMAL,"g"),ie=/([A-Za-z])([^A-Za-z]+)?/g,se=new Map;class ne{static drawLine(e,t,i=0,s=0,n){if(n)e=W(e,n),t=W(t,n),i=W(i,n),s=W(s,n);return`M${e},${t} L${i},${s}`}static drawRect(e,t,i=0,s=0,n){if(n)e=W(i+e,n),t=W(s+t,n),i=W(i,n),s=W(s,n);else e+=i,t+=s;return`M${i},${s} ${e},${s} ${e},${t} ${i},${t} Z`}static drawEllipse(e,t,i,s,n){if(void 0===s)s=i;let a=2*i;if(n)e=W(e-i,n),t=W(t,n),i=W(i,n),s=W(s,n),a=W(a,n);else e-=i;return`M${e},${t} a${i},${s},0,0,1,${a},0 a${i},${s},0,0,1,-${a},0`}static drawPolyline(e,t){let i="M";if(t)e.forEach(e=>i+=` ${W(e.x,t)},${W(e.y,t)}`);else e.forEach(e=>i+=` ${e.x},${e.y}`);return i}static drawPath(e,t){let i="";return e.forEach(e=>{switch(i+=(""!==i?" ":"")+e.key,e.key.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":i+=e.coordinates.join(",");break;case"H":i+=e.coordinates[0];break;case"V":i+=e.coordinates[1];break;case"A":i+=`${e.radiusX},${e.radiusY},${e.xAxisRotation},${e.largeArcFlag},${e.sweepFlag},${e.coordinates.join(",")}`;break}}),t?q(i,t):i}static drawRefit(e,t,i){let s;if(x.path(e)){if(s=X(e,"d"),null==t?void 0:t.requireRefit){const e=ne.getPathCommands(s);if(e.length){const n=ne.getPathPoints(e);if(n.length)t.refitPoints(n),s=ne.drawPath(ne.syncPathPoints(e,n),i)}}}else if(x.line(e)){const n=[{x:e.x1.baseVal.value,y:e.y1.baseVal.value},{x:e.x2.baseVal.value,y:e.y2.baseVal.value}];if(null==t?void 0:t.requireRefit)t.refitPoints(n);s=ne.drawPolyline(n,i)}else if(x.circle(e)||x.ellipse(e)){let n,a;if(x.ellipse(e))n=e.rx.baseVal.value,a=e.ry.baseVal.value;else n=e.r.baseVal.value,a=n;const r=[{x:e.cx.baseVal.value,y:e.cy.baseVal.value,rx:n,ry:a}];if(null==t?void 0:t.requireRefit)t.refitPoints(r);const l=r[0];s=ne.drawEllipse(l.x,l.y,l.rx,l.ry,i)}else if(x.rect(e)){let n=e.x.baseVal.value,a=e.y.baseVal.value,r=e.width.baseVal.value,l=e.height.baseVal.value;if(null==t?void 0:t.requireRefit)n=t.refitX(n),a=t.refitY(a),r=t.refitSize(r),l=t.refitSize(l);s=ne.drawRect(r,l,n,a,i)}else if(x.polygon(e)||x.polyline(e)){const n=ne.clonePoints(e.points);if(null==t?void 0:t.requireRefit)t.refitPoints(n);s=x.polygon(e)?ne.drawPolygon(n,i):ne.drawPolyline(n,i)}else s="";return s}static transformRefit(e,t,i,s,n){const a=ne.getPathCommands(e);if(a.length){let r=ne.getPathPoints(a);if(r.length){const l=Q(t);if(l)r=ne.applyTransforms(t,r,i&&A.origin(i.element));if(null==s?void 0:s.requireRefit)s.refitPoints(r);e=ne.drawPath(ne.syncPathPoints(a,r,l),n)}}return e}static getOffsetPath(e,t="auto 0deg"){const i=C(e),s=Math.ceil(i.getTotalLength()),n=[];if(s){const a=[],r=[];let l=0,o=0;if(B(t))l=I(t);else if(ne.getPathCommands(e).forEach(e=>{switch(e.key.toUpperCase()){case"M":case"L":case"H":case"V":case"Z":e.value.forEach(e=>{a.push(e),r.push(false)});break;case"C":case"S":case"Q":case"T":case"A":a.push(e.end),r.push(true);break}}),"auto 0deg"!==t)o=I(t.split(" ").pop());let f,c=false,h=0,u=0,d=-1;while(++d<=s){const e=i.getPointAtLength(d);if(a.length){const t=a.findIndex(t=>{const i=t.x.toString(),s=t.y.toString();return i===e.x.toPrecision(i.length-(i.includes(".")?1:0))&&s===e.y.toPrecision(s.length-(s.includes(".")?1:0))});if(-1!==t){const i=a[t+1];if(i)if(c=r[t+1],c)f=ne.centerPoints(a[t],i),l=0;else f=void 0,l=Y($(e,i));else f=void 0;u=0,a.splice(0,t+1),r.splice(0,t+1)}}let t;if(c){if(t=f?Y(D(f,e)):0,h>0&&h%360==0&&0===Math.floor(t))u=h;t+=u}else t=l;t+=o,n.push({key:d,value:e,rotate:t}),h=Math.ceil(t)}}return n}static getPathCommands(e){e=e.trim();const t=[];let i,s=true;ie.lastIndex=0;while(null!==(i=ie.exec(e))){let e=i[1];if(s&&"M"!==e.toUpperCase())break;const n=ne.parseCoordinates((i[2]||"").trim());let a,r,l,o,f,c,h;if(!s){const e=t[t.length-1];a=e.key.toUpperCase(),r=e.end}switch(e.toUpperCase()){case"M":if(s)e="M";case"L":if(n.length>=2){if(n.length%2!=0)--n.length;break}else continue;case"H":if(r&&n.length){n[1]="h"===e?0:r.y,n.length=2;break}else continue;case"V":if(r&&n.length){const t=n[0];n[0]="v"===e?0:r.x,n[1]=t,n.length=2;break}else continue;case"Z":if(!s){const i=t[0].coordinates;n[0]=i[0],n[1]=i[1],n.length=2,e="Z";break}else continue;case"C":if(n.length>=6){n.length=6;break}else continue;case"S":if(n.length>=4&&("C"===a||"S"===a)){n.length=4;break}else continue;case"Q":if(n.length>=4){n.length=4;break}else continue;case"T":if(n.length>=2&&("Q"===a||"T"===a)){n.length=2;break}else continue;case"A":if(n.length>=7){[l,o,f,c,h]=n.splice(0,5),n.length=2;break}else continue;default:continue}const u=n.length;if(u>=2){const i=e===e.toLowerCase(),a=[];let d=0;while(d<u){let e=n[d++],t=n[d++];if(i&&r)e+=r.x,t+=r.y;a.push({x:e,y:t})}t.push({key:e,value:a,start:a[0],end:a[a.length-1],relative:i,coordinates:n,radiusX:l,radiusY:o,xAxisRotation:f,largeArcFlag:c,sweepFlag:h}),s=false}}return t}static getPathPoints(e){const t=[];let i=0,s=0;return e.forEach(e=>{const n=e.coordinates,a=n.length;let r=0;while(r<a){if(e.relative)i+=n[r++],s+=n[r++];else i=n[r++],s=n[r++];const a={x:i,y:s};if("A"===e.key.toUpperCase())a.rx=e.radiusX,a.ry=e.radiusY;t.push(a)}if(e.relative)e.key=e.key.toUpperCase()}),t}static syncPathPoints(e,t,i=false){e:{let s;const n=e.length;let a=0;while(a<n){const n=e[a++],r=n.coordinates;if(n.relative)if(s){if(i&&("H"===n.key||"V"===n.key)){const e=t.shift();if(e)r[0]=e.x,r[1]=e.y,n.value[0]=e,n.start=e,n.end=e,n.key="L",n.relative=false;else break e}else{const e=r.length;let i=0,a=0;while(i<e){const e=t.shift();if(e){if(r[i++]=e.x-s.x,r[i++]=e.y-s.y,"a"===n.key&&void 0!==e.rx&&void 0!==e.ry)n.radiusX=e.rx,n.radiusY=e.ry;n.value[a++]=e}else break e}n.key=n.key.toLowerCase()}s=n.end}else break;else{switch(n.key.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":{const i=r.length;let s=0,a=0;while(s<i){const i=t.shift();if(i)r[s++]=i.x,r[s++]=i.y,n.value[a++]=i;else{e=[];break e}}break}case"A":{const i=t.shift();if(i)r[0]=i.x,r[1]=i.y,n.radiusX=i.rx,n.radiusY=i.ry,n.value[0]=i;else{e=[];break e}break}}if(!n.relative)s=n.end}}}return e}static filterTransforms(e,t){const i=[];return e.forEach(e=>{const s=e.type;if(!t||!t.includes(s)){switch(s){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===e.angle)return;break;case SVGTransform.SVG_TRANSFORM_SCALE:{const t=e.matrix;if(1===t.a&&1===t.d)return;break}case SVGTransform.SVG_TRANSFORM_TRANSLATE:{const t=e.matrix;if(0===t.e&&0===t.f)return;break}}i.push(e)}}),i}static applyTransforms(e,t,i){const s=ne.clonePoints(t);return e.slice(0).reverse().forEach(e=>{const t=e.matrix;let n=0,a=0,r=0,l=0;if(i){const{x:s,y:o}=i,f=e.method;switch(e.type){case SVGTransform.SVG_TRANSFORM_SCALE:if(f.x)r=s*(1-t.a);if(f.y)l=o*(1-t.d);break;case SVGTransform.SVG_TRANSFORM_SKEWX:if(f.y)a-=o;break;case SVGTransform.SVG_TRANSFORM_SKEWY:if(f.x)n-=s;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(f.x)n-=s,r=s+z(e.angle,s);if(f.y)a-=o,l=o+z(e.angle,o);break}}s.forEach(i=>{const{x:s,y:o}=i;if(i.x=R.applyX(t,s,o+a)+r,i.y=R.applyY(t,s+n,o)+l,e.type===SVGTransform.SVG_TRANSFORM_SCALE){const{rx:e,ry:s}=i;if(void 0!==e&&void 0!==s)i.rx=R.applyX(t,e,s+a),i.ry=R.applyY(t,e+n,s)}})}),s}static convertTransforms(e){const t=e.numberOfItems,i=new Array(t);let s=0;while(s<t){const{type:t,matrix:n,angle:a}=e.getItem(s);i[s++]=A.create(t,n,a)}return i}static clonePoints(e){if(Array.isArray(e)){const t=e.length,i=new Array(t);let s=0;while(s<t){const{x:t,y:n,rx:a,ry:r}=e[s],l={x:t,y:n};if(void 0!==a&&void 0!==r)l.rx=a,l.ry=r;i[s++]=l}return i}else{const t=e.numberOfItems,i=new Array(t);let s=0;while(s<t){const{x:t,y:n}=e.getItem(s);i[s++]={x:t,y:n}}return i}}static minMaxPoints(e,t=false){let{x:i,y:s}=e[0],n=i,a=s;const r=e.length;for(let l=1;l<r;++l){const{x:r,y:o}=e[l];if(t&&l>0){const{rx:t,ry:f}=e[l];if(void 0!==t&&void 0!==f){const{x:c,y:h}=e[l-1];let u=(r+c)/2,d=(o+h)/2;if(r>c)d-=f;else if(r<c)d+=f;if(o<h)u+=t;else if(o>c)u-=t;i=Math.min(u,i),n=Math.max(u,n),s=Math.min(d,s),a=Math.max(d,a)}}if(r<i)i=r;else if(r>n)n=r;if(o<s)s=o;else if(o>a)a=o}return[i,s,n,a]}static centerPoints(...e){const t=this.minMaxPoints(e);return{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}}static convertPoints(e){const t=e.length;if(t%2==0){const i=new Array(t/2);let s=0,n=0;while(s<t)i[n++]={x:e[s++],y:e[s++]};return i}return[]}static parsePoints(e){return ee(e.trim().split(j.SPACE),e=>{const[t,i]=e.split(K.SEPARATOR);return{x:parseFloat(t),y:parseFloat(i)}})}static parseCoordinates(e){const t=[];let i;te.lastIndex=0;while(null!==(i=te.exec(e))){const e=parseFloat(i[0]);if(!isNaN(e))t.push(e)}return t}static getBoxRect(e){let t=[];e.forEach(e=>t=t.concat(ne.getPathPoints(ne.getPathCommands(e))));const[i,s,n,a]=this.minMaxPoints(t,true);return{top:s,right:n,bottom:a,left:i}}static setName(e){if(e){let t,i="";if(J(e.id)){const s=H(e.id,true);if(!se.has(s))i=s;t=s}else t=e.tagName;let s=se.get(t)||0;if(""!==i)return se.set(i,s),i;else return se.set(t,++s),t+"_"+s}else return se.clear(),""}}ne.isContainer=e=>Z(e.instanceType,2),ne.isElement=e=>Z(e.instanceType,4),ne.isShape=e=>Z(e.instanceType,2052),ne.isAnimate=e=>Z(e.instanceType,16392),ne.isAnimateTransform=e=>Z(e.instanceType,49160),ne.asSvg=e=>18===e.instanceType,ne.asG=e=>34===e.instanceType,ne.asPattern=e=>130===e.instanceType,ne.asShapePattern=e=>258===e.instanceType,ne.asUsePattern=e=>514===e.instanceType,ne.asImage=e=>4100===e.instanceType,ne.asUse=e=>10244===e.instanceType,ne.asUseSymbol=e=>66===e.instanceType,ne.asSet=e=>8===e.instanceType,ne.asAnimate=e=>16392===e.instanceType,ne.asAnimateTransform=e=>49160===e.instanceType,ne.asAnimateMotion=e=>114696===e.instanceType,ne.drawCircle=(e,t,i,s)=>ne.drawEllipse(e,t,i,i,s),ne.drawPolygon=(e,t)=>e.length?ne.drawPolyline(e,t)+"Z":"";const{getNamedItem:ae}=squared.lib.dom;function re(e,t,i,s,n){const a=e.length;let r=0;while(r<a){const a=e[r++];if(a.x+=t,a.y+=i,void 0!==a.rx&&void 0!==a.ry)a.rx*=s,a.ry*=n}}var le=e=>class extends e{constructor(){super(...arguments),this._baseVal={}}setBaseValue(e,t){if(void 0!==t){if(this.verifyBaseValue(e,t))return this._baseVal[e]=t,true}else switch(e){case"d":return this._baseVal[e]=ae(this.element,"d"),true;case"points":{const t=this.element[e];if(Array.isArray(t))return this._baseVal[e]=ne.clonePoints(t),true;break}default:{const t=this.element[e];if(t){const i=t.baseVal;if(i)return this._baseVal[e]=i.value,true}break}}return false}getBaseValue(e,t){var i;return null!==(i=this._baseVal[e])&&void 0!==i?i:!this.setBaseValue(e)?t:void 0}refitBaseValue(e,t,i,s=1,n=1){const a=this._baseVal;for(const r in a){const l=a[r];if("string"==typeof l){if("d"===r){const o=ne.getPathCommands(l),f=ne.getPathPoints(o);re(f,e,t,s,n),a[r]=ne.drawPath(ne.syncPathPoints(o,f),i)}}else if("number"==typeof l)switch(r){case"cx":case"x1":case"x2":case"x":a[r]+=e;break;case"cy":case"y1":case"y2":case"y":a[r]+=t;break;case"r":a[r]*=Math.min(s,n);break;case"rx":case"width":a[r]*=s;break;case"ry":case"height":a[r]*=n;break}else if(Array.isArray(l))if("points"===r)re(l,e,t,s,n)}}verifyBaseValue(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}};const oe=squared.lib,{getFontSize:fe,isLength:ce,parseUnit:he}=oe.css,{getNamedItem:ue}=oe.dom,{capitalize:de,hasBit:pe,isNumber:ge,isString:me}=oe.util,ye=/-?\d+ms$/,ve=/-?\d+s$/,Se=/-?\d+min$/,be=/-?\d+(.\d+)?h$/,ke=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/;function Te(e,t){const i=pe(this.fillMode,t);if(e){if(!i)this.fillMode|=t}else if(i)this.fillMode^=t}class we{constructor(e,t){if(this.element=null,this.baseValue="",this.fillMode=0,this.synchronizeState=0,this.paused=false,this.animationElement=null,this._attributeName="",this._duration=-1,this._delay=0,this._to="",this._dataset={},e){const t=e.dataset;for(const e in t){const i=t[e];if(me(i))try{this._dataset[e]=JSON.parse(i)}catch(e){}}this.element=e}if(t){this.animationElement=t,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");const e=ue(t,"dur");if(""!==e&&"indefinite"!==e)this.duration=we.convertClockTime(e)}}static convertClockTime(e){let t=0,i=0;if(ge(e))t=parseInt(e);else if(ye.test(e))i=parseFloat(e);else if(ve.test(e))t=parseFloat(e);else if(Se.test(e))t=60*parseFloat(e);else if(be.test(e))t=60*parseFloat(e)*60;else{const s=ke.exec(e);if(s){const e=s[2],n=s[3],a=s[4],r=s[5];if(e)t+=60*parseInt(e)*60;if(n)t+=60*parseInt(n);if(a)t+=parseInt(a);if(r)i=parseInt(r)*(r.length<3?Math.pow(10,3-r.length):1);if(s[1])t*=-1,i*=-1}}return 1e3*t+i}setAttribute(e,t){const i=this.animationElement;if(i){const s=ue(i,e);if(""!==s)if(me(t))t=t.trim(),this[e+de(t)]=s===t;else this[e]=s}}addState(...e){e.forEach(e=>{if(!pe(this.synchronizeState,e))this.synchronizeState|=e})}removeState(...e){e.forEach(e=>{if(pe(this.synchronizeState,e))this.synchronizeState^=e})}hasState(...e){return e.some(e=>pe(this.synchronizeState,e))}set attributeName(e){var t,i,s,n;if("transform"!==e&&!me(this.baseValue)){let a=null===(i=null===(t=this._dataset.baseValue)||void 0===t?void 0:t[e])||void 0===i?void 0:i.toString().trim();if(a)this.baseValue=a;else{const t=this.element;if(t){switch(e){case"opacity":case"stroke-opacity":case"fill-opacity":a=P(t,e)||"1";break;default:a=P(t,e);break}if(!me(a)){const i=this.animationElement;if(i&&"paused"===getComputedStyle(t).animationPlayState){const t=i.parentElement;if(a=null===(n=null===(s=null==t?void 0:t[e])||void 0===s?void 0:s.baseVal)||void 0===n?void 0:n.valueAsString,a&&ce(a))this.baseValue=he(a,fe(t)).toString()}}else this.baseValue=a}}}this._attributeName=e}get attributeName(){return this._attributeName}set delay(e){this._delay=e}get delay(){return this._delay}set duration(e){this._duration=Math.round(e)}get duration(){return this._duration}set to(e){this._to=e}get to(){return this._to}set fillBackwards(e){Te.call(this,e,8)}get fillBackwards(){return pe(this.fillMode,8)}set fillForwards(e){Te.call(this,e,4)}get fillForwards(){return pe(this.fillMode,4)}set fillFreeze(e){Te.call(this,e,2)}get fillFreeze(){return pe(this.fillMode,2)}set parent(e){this._parent=e}get parent(){return this._parent}set group(e){this._group=e}get group(){return this._group||{id:-1/0,name:""}}set setterType(e){}get setterType(){return true}get fillReplace(){switch(this.fillMode){case 0:case 8:return true;default:return false}}get parentContainer(){let e=this._parent;while(e&&!ne.isContainer(e))e=e.parent;return e}get dataset(){return this._dataset}get instanceType(){return 8}}const xe={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"},Re="cubic-bezier\\(([\\d.]+), ([\\d.]+), ([\\d.]+), ([\\d.]+)\\)";var Ae=Object.freeze({__proto__:null,KEYSPLINE_NAME:xe,STRING_CUBICBEZIER:Re});const Ee=squared.lib,{getHexCode:Ve,parseColor:_e}=Ee.color,{getFontSize:Pe,isLength:Me,parseUnit:Ne}=Ee.css,{getNamedItem:Fe}=Ee.dom,{CHAR:Ce,XML:Ge}=Ee.regex,{hasValue:Oe,isNumber:Le,replaceMap:Be,sortNumber:Ie,trimEnd:Xe}=Ee.util,$e=/^\s*[\d.]+\s+[\d.]+\s+[\d.]+\s+[\d.]+\s*$/;const ze=e=>parseFloat((1-e).toPrecision(5));class De extends we{constructor(e,t){if(super(e,t),this.type=0,this.additiveSum=false,this.accumulateSum=false,this._iterationCount=1,this._from="",this._reverse=false,this._alternate=false,this._setterType=false,this._repeatDuration=-1,this._timingFunction="",t){const e=Fe(t,"values"),i=-1!==this.duration?De.toFractionList(Fe(t,"keyTimes")):[];if(""!==e){const t=Xe(e,";").split(Ge.DELIMITER);this.values=t;const s=t.length;if(s>1&&s===i.length)this.from=t[0],this.to=t[s-1],this.keyTimes=i;else if(1===s)this.to=this.values[0],this.convertToValues()}else this.from=Fe(t,"from"),this.convertToValues(i);const s=Fe(t,"repeatDur");if(""!==s&&"indefinite"!==s)this._repeatDuration=we.convertClockTime(s);const n=Fe(t,"repeatCount");if(this.iterationCount="indefinite"===n?-1:parseFloat(n),"animate"===t.tagName)this.setCalcMode()}}static convertTimingFunction(e){const t=xe[e];if(t)return t;else if($e.test(e))return e;else if(e.startsWith("step"))return xe.linear;else{const t=new RegExp(Re).exec(e);return t?t[1]+" "+t[2]+" "+t[3]+" "+t[4]:xe.ease}}static convertStepTimingFunction(e,t,i,s,n,a){const r=s[n],l=s[n+1];let o,f;switch(e){case"fill":case"stroke":{const e=_e(r),t=_e(l);if(e&&t)o=[e],f=[t];break}case"points":o=ne.convertPoints(ne.parseCoordinates(r)),f=ne.convertPoints(ne.parseCoordinates(l));break;case"rotate":case"scale":case"translate":o=Be(r.trim().split(Ce.SPACE),e=>parseFloat(e)),f=Be(l.trim().split(Ce.SPACE),e=>parseFloat(e));break;default:if(Le(r))o=[parseFloat(r)];else if(Me(r))o=[Ne(r,a)];if(Le(l))f=[parseFloat(l)];else if(Me(l))f=[Ne(l,a)];break}if(o&&f){const s=o.length;if(s===f.length){switch(t){case"step-start":t="steps(1, start)";break;case"step-end":t="steps(1, end)";break}const a=/steps\((\d+)(?:, (start|end))?\)/.exec(t);if(a){const t=i[n+1]-i[n],r=parseInt(a[1]),l=100/r,c=[],h=[];for(let u=0;u<=r;++u){const d=0===u&&"start"===a[2]?1:0,p=i[n]+t*(u/r),g=l*(u+d)/100,m=[];switch(e){case"fill":case"stroke":{const e=o[0].rgba,t=f[0].rgba,i=Ve(De.getSplitValue(e.r,t.r,g),De.getSplitValue(e.g,t.g,g),De.getSplitValue(e.b,t.b,g)),s=Ve(De.getSplitValue(e.a,t.a,g));m.push("#"+(i+("FF"!==s?s:"")));break}case"points":{let e=0;while(e<s){const t=o[e],i=f[e++];m.push(De.getSplitValue(t.x,i.x,g)+","+De.getSplitValue(t.y,i.y,g))}break}default:{let e=0;while(e<s)m.push(De.getSplitValue(o[e],f[e++],g).toString());break}}if(m.length)c.push(p),h.push(m.join(" "));else return}return[c,h]}}}}static toFractionList(e,t=";",i=true){let s=0;const n=Be(e.split(t),e=>{const t=parseFloat(e);if(!isNaN(t)&&(!i||t>=s&&t<=1))return s=t,t;else return-1});return n.length>1&&(!i||0===n[0]&&n.some(e=>-1!==e))?n:[]}get from(){return this._from}set from(e){if(void 0===this._values){const t=this.animationElement;if(t){if(""===this.to){const i=Fe(t,"by"),s=ne.parseCoordinates(i);if(s.length){if(""===e)e=this.baseValue||"";if(""!==e){const t=ne.parseCoordinates(e),i=t.length;if(s.length===i){const e=[];let n=0;while(n<i)e.push(t[n]+s[n++]);this.to=e.join(",")}}}}if(ne.parseCoordinates(this.to).length)this.setAttribute("additive","sum")}}this._from=e}setCalcMode(e,t){const i=this.animationElement;if(i){if(!t)t=Fe(i,"calcMode")||"linear";const s=this.keyTimes;switch(t){case"discrete":if(0===s[0]&&2===s.length){let t=[],n=[];const a=this.values,r=s.length-1;let l=0;while(l<r){const r=De.convertStepTimingFunction(e||this.attributeName,"step-end",s,a,l++,Pe(i));if(r)t=t.concat(r[0]),n=n.concat(r[1])}t.push(s.pop()),n.push(a.pop()),this._values=n,this._keyTimes=t,this._keySplines=[xe["step-end"]]}break;case"paced":this._keySplines=void 0;break;case"spline":this.keySplines=function(e,t){const i=e.length,s=[];let n=0;while(n<i){const i=t(e[n],n++,e);if(Oe(i))s.push(i)}return s}(Fe(i,"keySplines").split(";"),e=>e.trim());case"linear":if(0!==s[0]&&1!==s[s.length-1]){const e=[],t=this.values.length;let i=0;while(i<t)e.push(i++/(t-1));this._keyTimes=e,this._keySplines=void 0}break}}}convertToValues(e){const t=this.to;if(t){if(this.values=[this.from,t],e&&2===e.length){const t=this.keyTimes;if(2!==t.length||0===t[0]&&t[1]<=1)return void(this.keyTimes=e)}this.keyTimes=[0,1]}}setGroupOrdering(e){if(this.group.ordering=e,this.fillBackwards){const t=this.group.name;let i=false,s=e.length-1;while(s>=0){const n=e[s--];if(i){if("forwards"!==n.fillMode){this.fillBackwards=false;break}}else if(n.name===t)i=true}}}getIntervalEndTime(e,t=false){const i=this.getTotalDuration();if(e<i){const{duration:s,keyTimes:n}=this;let a=this.delay;while(a+s<=e)a+=s;return Math.min(a+(t?1:n[n.length-1])*s,i)}return i}getTotalDuration(e=false){let t=this.iterationCount;if(e&&-1===t)t=1;if(-1!==t)return Math.min(this.delay+this.duration*t,this.end||1/0);else return 1/0}set delay(e){super.delay=e;const t=this.animationElement,i=t&&Fe(t,"end");if(i){const e=Ie(Be(i.split(";"),e=>we.convertClockTime(e)))[0];if(!isNaN(e)){const{duration:t,iterationCount:i}=this;if(-1===i||t>0&&e<t*i){const s=this.delay;if(s>e){if(this.end=e,-1===i)this.iterationCount=Math.ceil((e-s)/t)}else this.duration=-1}}}}get delay(){return super.delay}set duration(e){super.duration=e}get duration(){const e=super.duration;if(-1===e&&-1!==this._repeatDuration)return this._repeatDuration;else return e}set iterationCount(e){this._iterationCount=isNaN(e)?1:e;const t=this.animationElement;if(t)if(-1!==this.iterationCount)this.setAttribute("accumulate","sum"),this.fillFreeze="freeze"===Fe(t,"fill");else this.accumulateSum=false,this.fillFreeze=false}get iterationCount(){const e=this.duration;if(e>0){const t=this._iterationCount,i=this._repeatDuration;if(-1!==i&&(-1===t||i<t*e))return i/e;else return t}return 1}set to(e){super.to=e}get to(){if(this._setterType)return this.valueTo||super.to;else return this.setterType?this.values[0]:super.to}set values(e){if(this._values=e,e&&e.length!==this.keyTimes.length)this._keyTimes=void 0,this._keySplines=void 0}get values(){if(void 0===this._values)this._values=[];return this._values}set keyTimes(e){const t=this._values;if((void 0===t||t.length===e.length)&&e.every(e=>e>=0&&e<=1))this._keyTimes=e}get keyTimes(){if(void 0===this._keyTimes)this._keyTimes=[];return this._keyTimes}set keySplines(e){if(null==e?void 0:e.length){const t=this.keyTimes.length-1;if(e.length>=t&&!e.every(e=>""===e||e===xe.linear)){const i=[];let s=0;while(s<t){const t=Be(e[s++].split(Ce.SPACE),e=>parseFloat(e));if(4===t.length&&!t.some(e=>isNaN(e))&&t[0]>=0&&t[0]<=1&&t[2]>=0&&t[2]<=1)i.push(t.join(" "));else i.push(xe.linear)}this._keySplines=i}}else this._keySplines=void 0}get keySplines(){return this._keySplines}set timingFunction(e){this._timingFunction=e?De.convertTimingFunction(e):e}get timingFunction(){var e;return this._timingFunction||(null===(e=this.keySplines)||void 0===e?void 0:e[0])||""}set reverse(e){if(this.length&&e!==this._reverse){const e=this.keyTimes,t=this._keySplines,i=e.length,s=new Array(i);let n=i-1,a=0;while(n>=0)s[a++]=1-e[n--];if(this.keyTimes=s,this.values.reverse(),t){const e=[];n=t.length-1;while(n>=0){const i=Be(t[n--].split(" "),e=>parseFloat(e));e.push(4===i.length?ze(i[2])+" "+ze(i[3])+" "+ze(i[0])+" "+ze(i[1]):xe.linear)}this._keySplines=e}}this._reverse=e}get reverse(){return this._reverse}set alternate(e){this._alternate=e}get alternate(){return this._alternate}set setterType(e){this._setterType=e}get setterType(){if(this._setterType)return true;else if(this.animationElement&&0===this.duration){const e=this.keyTimes;return e.length>=2&&0===e[0]&&""!==this.values[0]}return false}set length(e){if(0===e)this._values=void 0}get length(){var e;return(null===(e=this._values)||void 0===e?void 0:e.length)||0}get valueTo(){const e=this._values;return(null==e?void 0:e[e.length-1])||""}get valueFrom(){return this.values[0]||""}get playable(){return!this.paused&&this.duration>0&&this.keyTimes.length>0}get fillReplace(){return super.fillReplace||-1===this.iterationCount}get fromToType(){const e=this.keyTimes;return 2===e.length&&0===e[0]&&1===e[1]}get evaluateStart(){const e=this.keyTimes;return e.length>0&&e[0]>0}get evaluateEnd(){const e=this.keyTimes;return e.length>0&&e[e.length-1]<1}get instanceType(){return 16392}}De.getSplitValue=(e,t,i)=>e+(t-e)*i;const We=squared.lib,{getNamedItem:Ye}=We.dom,{replaceMap:qe}=We.util;class je extends De{constructor(e,t){if(super(e,t),this.attributeName="transform",t){const e=Ye(t,"type");this.setType(e),this.setCalcMode(e)}}static toRotateList(e){const t=[],i=e.length;let s=0;while(s<i){const i=e[s++];if(""===i)t.push([0,0,0]);else{const e=ne.parseCoordinates(i);if(2===e.length)e[2]=0;if(3===e.length)t.push(e);else return}}return t}static toScaleList(e){const t=[],i=e.length;let s=0;while(s<i){const i=e[s++];if(""===i)t.push([1,1,0,0]);else{const e=ne.parseCoordinates(i);if(1===e.length)e[1]=e[0];if(2===e.length)e[2]=0,e[3]=0;if(4===e.length)t.push(e);else return}}return t}static toTranslateList(e){const t=[],i=e.length;let s=0;while(s<i){const i=e[s++];if(""===i)t.push([0,0]);else{const e=ne.parseCoordinates(i);if(1===e.length)e[1]=0;if(2===e.length)t.push(e);else return}}return t}static toSkewList(e){const t=[],i=e.length;let s=0;while(s<i){const i=e[s++];if(""===i)t.push([0]);else{const e=ne.parseCoordinates(i);if(1===e.length)t.push(e);else return}}return t}expandToValues(){if(this.additiveSum){const{duration:e,keyTimes:t,iterationCount:i}=this;if(-1!==i&&e>0&&t.length){const s=e*i;e:{const{type:n,keySplines:a,values:r}=this,l=[],o=[],f=[];let c;const h=t.length;for(let u=0;u<i;++u){if(u>0&&a)f.push("");for(let d=0;d<h;++d){const p=ne.parseCoordinates(r[d]),g=p.length;if(g){let r;switch(n){case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(1===g)r=[p[0],0];else if(2===g)r=p;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(1===g)r=[p[0],p[0]];else if(2===g)r=p;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(1===g)r=[p[0],0,0];else if(3===g)r=p;break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(1===g)r=p;break}if(r){let n=(t[d]+u)*e;if(c){const e=r.length;let t=0;while(t<e)r[t]+=c[t++]}if(u<i-1&&d===h-1){if(this.accumulateSum)c=r;--n}if(l.push(n/s),o.push(r.join(" ")),a&&d<h-1)f.push(a[d])}else break e}else break e}}this.values=o,this.keyTimes=l,this.keySplines=f.length?f:void 0,this.duration=s,this.iterationCount=1,this.accumulateSum=false}}}}setType(e){let t;switch(e){case"translate":if(this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement)t=je.toTranslateList(this.values);break;case"scale":if(this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement)t=je.toScaleList(this.values);break;case"rotate":if(this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement)t=je.toRotateList(this.values);break;case"skewX":if(this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement)t=je.toSkewList(this.values);break;case"skewY":if(this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement)t=je.toSkewList(this.values);break;default:return}if(t)this.values=qe(t,e=>e.join(" "));this.baseValue=A.typeAsValue(this.type)}get instanceType(){return 49160}}const{hasValue:Ue,safeNestedArray:Ke,sortNumber:He}=squared.lib.util;function Ze(e,t,i,s,n,a=0,r,l=false,o=false,f=0,c=false,h){if(n)Ke(e[i],s).push({time:s,value:n,animation:r,start:l,end:o,endTime:a,fillMode:f,infinite:c,valueFrom:h}),t[i].add(s)}class Qe{constructor(e,...t){e=(t.length?e.filter(e=>t.includes(e.attributeName)):e.slice(0)).sort((e,t)=>{if(e.delay===t.delay)return e.group.id<t.group.id?1:-1;else return e.delay<t.delay?-1:1}),t.length=0,e.forEach(e=>{const i=Qe.getKeyName(e);if(!t.includes(i))t.push(i)});const i={},s={},n={};t.forEach(t=>{i[t]=new Map,s[t]={},n[t]=new Set;const a=t.split(":")[0],r=e.filter(e=>e.fillBackwards&&e.attributeName===a).sort((e,t)=>e.group.id<t.group.id?1:-1)[0];if(r){const e=r.delay;Ze(s,n,t,0,r.values[0],e,r,0===e,false,8)}}),e.forEach(e=>{const t=Qe.getKeyName(e);if(e.baseValue&&void 0===s[t][-1])Ze(s,n,t,-1,e.baseValue);if(e.setterType){const{delay:i,duration:a}=e,r=e.fillReplace&&a>0;if(Ze(s,n,t,i,e.to,r?i+a:0,e,r,!r,2),r)Ze(s,n,t,i+a,"",0,e,false,true,2)}else if(ne.isAnimate(e)&&e.duration>0){const i=-1===e.iterationCount,a=e.getTotalDuration();if(Ze(s,n,t,e.delay,e.valueTo,a,e,true,false,0,i,e.valueFrom),!i&&!e.fillReplace)Ze(s,n,t,a,e.valueTo,0,e,false,true,e.fillForwards?4:2)}});for(const e in s)He(Array.from(n[e])).forEach(t=>{const n=s[e][t];for(let t=0;t<n.length;++t){const s=n[t],a=s.animation;if(""===s.value||a&&s.start&&ne.isAnimate(a)&&""===a.from){let a;for(const t of i[e].values()){const e=t.length;let i=0;while(i<e){const e=t[i++];if(s.animation!==e.animation&&""!==e.value&&(-1===e.time||4===e.fillMode||2===e.fillMode)){a=e.value;break}}}if(a)s.value=a;else if(""===s.value)n.splice(t--,1)}}if(n.length)n.sort((e,t)=>{if(e.animation&&t.animation)if(e.fillMode===t.fillMode)return e.animation.group.id<t.animation.group.id?1:-1;else return e.fillMode<t.fillMode?1:-1;return 0}),i[e].set(t,n)});for(const e in i)for(const[t,s]of i[e].entries())s.forEach(s=>{var n;const a=s.animation;if(a)if(2===s.fillMode){const s=[];for(const[n,r]of i[e].entries())if(n<t)r.forEach(e=>{if(e.start){const t=e.animation;if(null==t?void 0:t.animationElement)s.push(t)}});else for(let e=0;e<r.length;++e){const i=r[e];if(n>t){if(i.end&&s.includes(i.animation))r.splice(e--,1)}else if(i.end){const t=i.animation;if((null==t?void 0:t.animationElement)&&t.group.id<a.group.id)r.splice(e--,1)}}}else if(4===s.fillMode||s.infinite){let s=false;const r=a.group,l=r.ordering;if(l){const e=a.getTotalDuration(),t=r.name,i=l.length;let n=0;while(n<i){const i=l[n++];if(i.name===t)s=true;else if(Qe.getGroupEndTime(i)>=e)break}}const o=[];for(const[r,l]of i[e].entries())if(!s&&r<t)l.forEach(e=>{if(e.start){const t=e.animation;if(t)o.push(t)}});else for(let e=0;e<l.length;++e){const i=l[e];if(r>t){const t=i.animation;if(s||t&&(i.end&&o.includes(t)||null===a.animationElement&&t.group.id<a.group.id))l.splice(e--,1)}else if(i.end){if(((null===(n=i.animation)||void 0===n?void 0:n.group.id)||NaN)<a.group.id)l.splice(e--,1)}}}});for(const e in i){const t=i[e];for(const[e,i]of t.entries())if(0===i.length)t.delete(e)}this.map=i}has(e,t,i){const s=this.map[e];if(void 0!==t){if(s&&s.has(t))if(!i)return true;else return-1!==s.get(t).findIndex(e=>e.animation===i);return false}return!!s}get(e,t,i=false){let s;const n=this.map[e];if(n)for(const[e,a]of n.entries())if(e<=t){const n=a.length;let r=0;while(r<n){const n=a[r++];if(""!==n.value&&(-1===n.time||n.end&&(4===n.fillMode||2===n.fillMode))||i&&n.start&&t!==e){s=n.value;break}}}else break;return s}paused(e,t){let i=0;const s=this.map[e];if(s)for(const[e,n]of s.entries())if(e<=t){const e=n.length;let s=0;while(s<e){const e=n[s++];if(e.start&&(e.infinite||0===e.fillMode&&e.endTime>t))if(e.animation)i=2;else{i=1;break}else if(e.end&&(4===e.fillMode||1===i&&2===e.fillMode)){i=0;break}}}else break;return 0===i}evaluateStart(e,t){const i=e.values;let s=e.reverse?i[i.length-1]:i[0];if(""===s)if(s=this.get(e.attributeName,e.delay)||(null==t?void 0:t.toString())||e.baseValue,Ue(s))if(s=s.toString(),e.reverse)i[i.length-1]=s,e.to=s;else i[0]=s,e.from=s;return i}}Qe.getGroupEndTime=e=>"infinite"===e.iterationCount?1/0:e.delay+e.duration*parseInt(e.iterationCount),Qe.getKeyName=e=>e.attributeName+(ne.isAnimateTransform(e)?":"+A.typeAsName(e.type):"");const Je=squared.lib,{clamp:et,equal:tt,multipleOf:it}=Je.math,{CHAR:st}=Je.regex,{hasBit:nt,hasValue:at,isEqual:rt,isNumber:lt,joinArray:ot,objectMap:ft,replaceMap:ct,safeNestedArray:ht,spliceArray:ut,sortNumber:dt}=Je.util,pt=["x1","y1","x2","y2"],gt=["width","height","x","y"],mt=["points"],yt=["cx","cy","r"],vt=["cx","cy","rx","ry"];function St(e,t,i,s,n){let a,r,l,o=0;for(const[t,s]of e.entries()){if(i===t){r={key:t,value:s};break}else if(i>o&&i<t&&void 0!==a){r={key:o,value:a},l={key:t,value:s};break}o=t,a=s}if(r&&l)Ft(e,i,_t(i,r.key,r.value,l.key,l.value),true);else if(r)Ft(e,i,r.value,true);else if(!n){let n=s.get(t,i,true);if(void 0!==n)if(n=kt(n,true),""!==n)Ft(e,i,n)}}function bt(e){const t=new Set,i=e.length,s=e[i-1][0];let n=0;while(n<i){const i=e[n++];let a=i[0]/s;if(a>0){let e=7;do{const i=parseFloat(a.toString().substring(0,e));if(!t.has(i)){a=i;break}}while(++e)}i[0]=a,t.add(a)}return e}function kt(e,t=false){if("string"==typeof e)if(lt(e))e=parseFloat(e);else if(0===(e=ne.parsePoints(e)).length)e="";return t&&"string"==typeof e?"":e}function Tt(e,t){let i;if(e)for(const s of e)if(s.time<=t)i=s.value;else break;return i}function wt(e,t,i,s,n){var a;const r=[],l=t.element.tagName;let o;switch(l){case"line":o=pt;break;case"rect":o=gt;break;case"polyline":case"polygon":o=mt;break;case"circle":o=yt;break;case"ellipse":o=vt;break;default:return}const f=A.origin(t.element),c=e.length;let h=0;while(h<c){const[c,u]=e[h++],d=[],p=o.length;let g,m=0;while(m<p){const e=o[m++];let i=u.get(e);if(void 0===i)i=null!==(a=Tt(s[e],c))&&void 0!==a?a:t.getBaseValue(e);if(void 0!==i)d.push(i);else return}switch(l){case"line":g=xt(d);break;case"rect":g=Rt(d);break;case"polygon":case"polyline":g=d[0];break;case"circle":case"ellipse":g=jt(d);break}if(g){let e;if(t.transformed)g=ne.applyTransforms(t.transformed,g,f);switch(null==i||i.refitPoints(g),l){case"line":case"polyline":e=ne.drawPolyline(g,n);break;case"rect":case"polygon":e=ne.drawPolygon(g,n);break;case"circle":case"ellipse":{const{x:t,y:i,rx:s,ry:a}=g[0];e=ne.drawEllipse(t,i,s,a,n);break}}if(void 0!==e)r.push({key:c,value:e})}}return r}function xt(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}function Rt(e){const[t,i,s,n]=e;return[{x:s,y:n},{x:s+t,y:n},{x:s+t,y:n+i},{x:s,y:n+i}]}function At(e,t,i){const s=new Map,n=t.length;let a=0;while(a<n){const n=t[a++],r=new Map;for(const t in e){let s=e[t].get(n);if(void 0===s)s=Tt(i[t],n);if(void 0!==s)r.set(t,s)}s.set(n,r)}return s}function Et(e,t,i,s){if(t)if(e.set(i,t),void 0!==s)e.set(s,t)}function Vt(e,t,i,s,n){if(e.alternate&&i%2!=0)t=t.slice(0).reverse();switch(e.attributeName){case"transform":if(e.additiveSum&&"string"==typeof n){const a=ct(n.split(st.SPACE),e=>parseFloat(e)),r=ft(t,e=>ct(e.trim().split(st.SPACE),e=>parseFloat(e))),l=a.length;if(r.every(e=>e.length===l)){const t=r[s];if(!e.accumulateSum)i=0;let n=0;while(n<l)t[n]+=a[n++];const o=r.length;for(n=0;n<i;++n)for(let e=0;e<o;++e){const i=r[e],s=i.length;for(let e=0;e<s;++e)t[e]+=i[e]}return t.join(" ")}}return t[s];case"points":return ne.parsePoints(t[s]);default:{let a=parseFloat(t[s]);if(!isNaN(a)){if(e.additiveSum&&"number"==typeof n){if(a+=n,!e.accumulateSum)i=0;const s=t.length;for(let e=0;e<i;++e)for(let e=0;e<s;++e)a+=parseFloat(t[e])}return a}else return n||0}}}function _t(e,t,i,s,n){if(e>t)if("number"==typeof i&&"number"==typeof n)return De.getSplitValue(i,n,(e-t)/(s-t));else if("string"==typeof i&&"string"==typeof n){const a=ct(i.split(" "),e=>parseFloat(e)),r=ct(n.split(" "),e=>parseFloat(e)),l=a.length;if(l===r.length){const i=[];let n=0;while(n<l)i.push(_t(e,t,a[n],s,r[n++]));return i.join(" ")}}else if(Array.isArray(i)&&Array.isArray(n)){const a=[],r=Math.min(i.length,n.length);let l=0;while(l<r){const r=i[l],o=n[l++];a.push({x:_t(e,t,r.x,s,o.x),y:_t(e,t,r.y,s,o.y)})}return a}return i}function Pt(e,t,i,s,n,a,r,l,o,f,c,h,u,d){if(r<0)t-=r,r=0;const p=e.duration,g=t-(r+p*l),m=0===g?0===o?0:1:et(g/p);let y=-1,v=-1;const S=s.length;for(let e=0;e<S;++e){if(-1!==y&&m<=s[e]){v=e;break}if(m>=s[e])y=e}let b;if(-1!==y&&-1!==v)b=_t(m,s[y],Vt(e,n,l,y,i),s[v],Vt(e,n,l,v,i));else v=-1!==y?y+1:s.length-1,b=Vt(e,n,l,v,i);return Ct(e,f=Ft(h,f,b),a,v,c,u,d),[f,b]}function Mt(e,t,i,s,n,a,r,l){const o=(e-t)/a,f=s.length;for(let e=1;e<f;++e){const t=s[e-1],a=s[e];if(o>=t&&o<=a)return Ut(_t(o,t,Vt(i,n,r,e-1,l),a,Vt(i,n,r,e,l)))}}function Nt(e,t,i,s,n,a,r,l,o,f,c){let h=r.length;if(!l)l=new Array(h-1).fill("");const{delay:u,duration:d}=n,p=u+d*s,g=n.getTotalDuration(),m=p+(c?a[0]:1)*d,y=parseFloat(r[c?0:h-1]);let v=p;e:{h=f.length;for(let s=0;s<h;++s){const u=f[s];if(u!==n){const n=u.getTotalDuration();if(u.addState(4),n>v){const{delay:S,duration:b}=u,[k,T,w]=Zt(u);Gt(e,t,i,u,o,k,T,w);let x=m;t:{let e=false,t=Qt(v,S,b)-1;const i=(i,s,f)=>{let h,S;if(c)h=!e&&v===p?0:i%d/d;else h=s===m?1:s%d/d;if(i===s)S=Ut(Vt(u,T,t,f,o));else S=Mt(i,s,u,k,T,b,t,o);if(S){if(h>0)S=Math.round((parseFloat(S)+y)/2).toString();const t=a.length;if(!(h===a[t-1]&&S===r[t-1])){const o=e||0===h?(null==w?void 0:w[f])||u.timingFunction:"";if(c){if(!e&&h>0&&i===v)h+=.001;for(let e=0;e<t;++e)if(h<=a[e]){if(0===e||0===h)a.unshift(h),r.unshift(S),l.unshift(o);else a.splice(e,0,h),r.splice(e,0,S),l.splice(e,0,o);break}}else{if((s===n||s===m)&&s<g)h-=.001;a.push(h),r.push(S),l.push(o)}}}};do{if(c){let e=s+1;while(e<h){const t=f[e++];if(t.delay>v){x=t.delay;break}}}const a=k.length;for(let s=0;s<a;++s){const a=qt(S,b,k,t,s);if(a>=v){if(!e)i(a,v,s),e=true;if(a>v){if(c&&a>=m)break e;if(i(a,Math.min(a,n,m),s),a>=m)break e;else if(v=a,a>=n){if(n<=g)u.addState(16);break t}else if(a>=x)break t}}}}while(++t)}}}}}return[a,r,l]}function Ft(e,t,i,s=false){if(""!==i){let n=e.get(t),a=false;if(void 0===n)n=e.get(t-1),a=true;if(n!==i||s){if(!s){if("number"==typeof n&&tt(i,n))return t;while(t>0&&e.has(t))++t}e.set(t,i)}else if(a&&!e.has(t))e.delete(t-1),e.set(t,i)}return t}function Ct(e,t,i,s,n,a,r){if(!Kt(ne.isAnimateTransform(e),n)){if(0===s)return;--s}const l=null==i?void 0:i[s];if(l)a.set(t,l);if(r)!function(e,t,i,s){var n;if(ne.asAnimateTransform(t)){const a=null===(n=t.transformOrigin)||void 0===n?void 0:n[s];if(a)e.set(i,a)}}(r,e,t,s)}function Gt(e,t,i,s,n,a,r,l){var o;if(0!==a[0]){let i;if(s.additiveSum)i=Ut(n);else i=(null===(o=Ot(t,s.attributeName))||void 0===o?void 0:o.value.toString())||e.get(Qe.getKeyName(s),s.delay)||Ut(n);const f=s.by;if(f&&lt(i))i=(parseFloat(i)+f).toString();a.unshift(0),r.unshift(i),null==l||l.unshift(s.timingFunction)}if(a[a.length-1]<1){const t=e.get(Qe.getKeyName(s),s.delay)||Ut(i[s.attributeName])||r[0];a.push(1),r.push(t),null==l||l.push(s.timingFunction)}}function Ot(e,t){const i=e[t];return null==i?void 0:i[i.length-1]}function Lt(e,t,i,s,n){if(void 0===s)s=t.delay;if(void 0===n)n=t.to;return Ft(e,s,i?n:kt(n))}function Bt(e,t){if(t)e.push(t);e.sort((e,t)=>{if(e.delay===t.delay)return e.group.id<t.group.id?-1:1;else return e.delay<t.delay?-1:1});for(let t=0;t<e.length-1;++t)if(e[t].delay===e[t+1].delay)e.splice(t--,1)}function It(e,t){if(!t.hasState(16,64)){const i=e.indexOf(t);if(-1!==i)e.splice(i,1);e.push(t),t.addState(4)}}function Xt(e,t=1/0){e.sort((e,i)=>{const s=e.delay,n=e.delay;if(t!==1/0)if(t===s&&t!==n)return-1;else if(t!==s&&t===n)return 1;else if(s>t&&n<t)return 1;else if(s<t&&n>t)return-1;if(s!==n)return s>n?-1:1;else return e.group.id>i.group.id?-1:1})}function $t(e,t){if(t){if(-1!==t.iterationCount)ut(e,e=>e===t)}else ut(e,e=>!!e.animationElement)}function zt(e,t){e.sort((e,i)=>{if(e.getTotalDuration()<=t)return 1;if(i.getTotalDuration()<=t)return-1;const s=e.delay,n=i.delay;if(s===n)return e.group.id<i.group.id?1:-1;else if(s===t)return-1;else if(n===t)return 1;else if(s<t&&n<t)return s>n?-1:1;return s<n?-1:1})}function Dt(e,t){const i=e.get("x")||0,s=e.get("y")||0;return t?t.refitX(i)+" "+t.refitX(s):i+" "+s}function Wt(e,t,i){if(!i)t.iterationCount=-1;t.from=t.valueFrom,t.to=t.valueTo,e.push(t)}function Yt(e,t){if(t.length)ut(e,e=>t.includes(e))}const qt=(e,t,i,s,n)=>Math.round(e+(i[n]+s)*t),jt=e=>[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}],Ut=e=>Array.isArray(e)?ft(e,e=>e.x+","+e.y).join(" "):(null==e?void 0:e.toString())||"",Kt=(e,t)=>nt(t,e?32:4),Ht=e=>e.playable||e.animationElement&&-1!==e.duration,Zt=e=>{var t;return[e.keyTimes.slice(0),e.values.slice(0),null===(t=e.keySplines)||void 0===t?void 0:t.slice(0)]},Qt=(e,t,i)=>Math.floor(Math.max(0,e-t)/i);var Jt=e=>class extends e{getAnimateShape(e){const t=[];return this.animations.forEach(i=>{if(Ht(i))switch(i.attributeName){case"r":case"cx":case"cy":if(x.circle(e)){t.push(i);break}case"rx":case"ry":if(x.ellipse(e))t.push(i);break;case"x1":case"x2":case"y1":case"y2":if(x.line(e))t.push(i);break;case"points":if(x.polyline(e)||x.polygon(e))t.push(i);break;case"x":case"y":case"width":case"height":if(x.rect(e))t.push(i);break}}),t}getAnimateTransform(e){const t=[];return this.animations.forEach(i=>{if(ne.isAnimateTransform(i)&&i.duration>0)if(t.push(i),ne.asAnimateMotion(i))i.framesPerSecond=null==e?void 0:e.framesPerSecond}),t}getAnimateViewRect(e){if(!e)e=this.animations;const t=[];return e.forEach(e=>{if(Ht(e))switch(e.attributeName){case"x":case"y":t.push(e);break}}),t}animateSequentially(e,t,i,s){let n,a=18;if(s){if(s.keyTimeMode)a=s.keyTimeMode;n=s.precision}const r=this.animations;[e,t].forEach(e=>{var s,l;const o=e===t;if(!e||0===e.length||!o&&nt(a,8)||o&&nt(a,64))return;const f=[],c={},h=new Set;let u=0;const d=e=>{ht(c,e.attributeName).push(e),++u};{const t=[],i=e.length;for(let s=0;s<i;++s){const n=e[s];if(n.setterType)d(n);else{const a=n.getTotalDuration();for(let r=0;r<i;++r){const i=e[r];if(s!==r&&n.attributeName===i.attributeName&&n.group.id<i.group.id&&n.fillReplace&&!i.evaluateEnd)if(i.setterType){if(n.delay===i.delay){t[s]=n;break}}else if(!i.evaluateStart&&!i.evaluateEnd)if(n.delay===i.delay&&(!i.fillReplace||-1===i.iterationCount||a<=i.getTotalDuration())||i.fillBackwards&&n.delay<=i.delay&&(i.fillForwards||n.fillReplace&&a<=i.delay)||n.animationElement&&null===i.animationElement&&(n.delay>=i.delay&&a<=i.getTotalDuration()||i.fillForwards)){t[s]=n;break}}}}const s=[];let n=0;while(n<i){const i=e[n];if(t[n++])if(!i.fillReplace)i.setterType=true,d(i);else s.push(i);else if(!i.setterType)f.push(i),h.add(i.group.name)}Yt(r,s)}if(f.length+u>1||1===f.length&&(f[0].alternate||void 0!==f[0].end)){const t={},u={};let d=0;f.forEach(e=>{const i=e.group.ordering;if(i)ut(i,e=>!h.has(e.name));const s=e.attributeName;let n=t[s];if(!n)n=new Map,t[s]=n,u[s]=[];const a=e.delay,r=n.get(a)||[];r.push(e),u[s].push(e),n.set(a,r)});for(const e in t){const i=new Map,s=t[e];for(const e of dt(Array.from(s.keys()))){const t=s.get(e);t.forEach(e=>d=Math.max(d,e.getTotalDuration(true))),i.set(e,t.reverse())}t[e]=i,u[e].reverse()}const p=new Qe(e),g={},m=new Map,y=o?new Map:void 0,v={},S=new Set,b={},k=new Map,T=o?new Map:void 0,w={},x={},R=new Map;let E,V,_=-1;for(const e in t){const n=new Map;if(g[e]=n,!o){let t;if(i)t=i.getBaseValue(e);else if(t=this[e],void 0===t)try{this.getBaseValue(e)}catch(e){}if(at(t))w[e]=t}const r=c[e]||[],l=[],f=[],h=[];for(const[i,s]of t[e].entries())l.push(i),f.push(s);let k,T,E,V=-1,_=0,P=1/0;const M=(e,t)=>{if(S.add(e),e.addState(16),E=e,e.fillForwards){C(_,k,e.type,e);const{name:t,ordering:i}=e.group;if(i){const s=e.getTotalDuration();for(const e of i)if(e.name===t)return true;else if(Qe.getGroupEndTime(e)>=s)return false}}else{if(e.fillFreeze)C(_,k,e.type,e);if(void 0!==t){let i=V;const s=N(_,_+1);if(void 0!==s&&e.fillReplace&&t>_&&0===h.length){if(i=Ft(n,i,s),o)Et(R,e.type,i);k=s,V=i}}F()}return false},N=(t,i)=>{var s;let a=null===(s=Ot(x,e))||void 0===s?void 0:s.value;return ut(r,e=>e.delay>=t&&e.delay<i,e=>{const i=e.to;if(e.animationElement)$t(h);if(0===h.length)k=i;if(C(e.delay,i,e.type,e),e.delay===t)a=o?i:kt(i);else V=Lt(n,e,o),_=e.delay}),a},F=(e,t)=>{if(h.length)ut(h,e=>e.getTotalDuration()<=_,i=>{if(i.addState(16),i.fillForwards)if(C(i.getTotalDuration(),i.valueTo,i.type,i),void 0!==e&&void 0!==t){const s=l.length;let n=e;while(n<s){if(n!==e)t=-1;const s=f[n++],a=s.length;let r=t+1;while(r<a){const e=s[r++];if(i.group.id>e.group.id)e.addState(16)}}}})},C=(t,i,s=0,n)=>{if(!o)i=kt(i);const a=Ot(x,e);if(""!==i&&(!a||t>=a.time))ht(x,e).push({key:s,value:i,time:t});if(n&&ne.isAnimate(n)&&!n.fillReplace)if(n.fillForwards)ut(r,e=>e.group.id<n.group.id||e.delay<t),h.length=0,f.forEach(e=>{e.forEach(e=>{if(e.group.id<n.group.id)e.addState(16)})});else if(n.fillFreeze)$t(h)},G=(e,t,i)=>{if(T&&!e){if(void 0===i)i=A.typeAsValue(T.type);if(V=Ft(n,t,i),t!==V)Et(R,T.type,V)}T=void 0},O=u[e].find(e=>e.fillBackwards);if(O){if(k=Vt(O,O.values,0,0),V=Ft(n,0,k),o)Et(R,O.type,0),T=O;let t=true;for(const i of u[e])if(i.group.id>O.group.id&&i.delay<=O.delay){t=false;break}const i=O.getTotalDuration(),s=[];for(let e=0;e<l.length;++e){const n=f[e];for(let a=0;a<n.length;++a){const o=n[a];if(t)if(o===O&&(0!==e||0!==a)){n.splice(a--,1),l.unshift(O.delay),f.unshift([O]);continue}else if(o.group.id<O.group.id&&(O.fillForwards||o.getTotalDuration()<=i)){if(o.fillForwards)o.setterType=true,r.push(o);s.push(o);continue}if(o.animationElement&&o.delay<=O.delay)n.splice(a--,1),It(h,o)}}for(let e=0;e<l.length;++e){const t=f[e];if(s.length)for(let e=0;e<t.length;++e)if(s.includes(t[e]))t.splice(e--,1);if(0===t.length)f.splice(e,1),l.splice(e--,1)}O.addState(2)}if(!o){const t=w[e];if(!x[e]&&void 0!==t)C(0,t,0);if(void 0===k)k=(null===(s=Ot(x,e))||void 0===s?void 0:s.value)||t}Bt(r);{let t;if(ut(r,e=>e.delay<=l[0],i=>{const s=ne.isAnimate(i)&&i.fillForwards,a=i.delay;if(a<l[0]&&(!O||s))if(O&&s)C(a,i.to,i.type);else{const s=a-1;if(!t){if(!n.has(0)){const t=o&&ne.isAnimateTransform(i)?A.typeAsValue(i.type):w[e];if(void 0!==t)Lt(n,i,o,0,t),Lt(n,i,o,s,t)}else if(!o)Lt(n,i,o,s,k)}else Lt(n,t,o,s);V=Lt(n,i,o),_=a,t=i}}),t)Lt(n,t,o,l[0]-1)}e:{const t=l.length;for(let i=0;i<t;++i){let s=f[i],c=l[i];for(let u=0;u<s.length;++u){const g=s[u];if(g.hasState(16,64)||g.hasState(4)&&g.animationElement)continue;const v=-1===g.iterationCount,S=g.duration,E=g.iterationCount;let O,L,B;if(!v){if(O=g.getTotalDuration(),O<=V){if(g.fillReplace)g.addState(64);else It(h,g);continue}}else O=c+S;if(v)L=Math.ceil((d-c)/S),B=0;else L=Math.ceil(E),B=E-Math.floor(E);if(r.length&&_>0&&_<c)N(_,c);if(-1!==V&&V<c)V=Ft(n,c-1,k),_=c;P=1/0;const I=g.group.ordering;if(I&&I.length>1){let s=true;for(const t of I)if(t.name===g.group.name){s=false;break}else if(!t.paused&&_<=t.delay&&t.attributes.includes(e))break;if(s)t:for(let e=i+1;e<t;++e){const t=f[e],i=t.length;for(let e=0;e<i;++e){const i=t[e];if(i.group.ordering){P=i.delay;break t}else if(i.getTotalDuration()<=O){if(i.fillFreeze)Bt(r,i);i.addState(16)}else if(i.delay<O)It(h,i)}}}else for(let e=i+1;e<t;++e){const t=l[e];if(t!==1/0){const i=f[e];if(i.length&&!i.every(e=>e.hasState(16,64))){P=t;break}}}const X=_;let $,z=V+1,D=Math.min(P,g.end||1/0);if(g.animationElement&&r.length){const e=Math.min(P,O,D);if($=r.find(t=>t.delay>=_&&t.delay<=e),$){switch($.delay){case _:if(k=$.to,C(_,k,$.type,$),$.group.id>g.group.id){if(o&&T)G(g.additiveSum,Math.max(c-1,V));V=Lt(n,$,o,Math.max($.delay,V),k),D=-1}break;case P:$.addState(32);break;default:D=$.delay,$.addState(32);break}ut(r,e=>e!==$),g.addState(4)}}let W,Y=false;if(D>V){if(o){if(T)G(g.additiveSum,Math.max(c-1,V)),z=V+1;k=A.typeAsValue(g.type),C(_,k,g.type)}let r=c===1/0||(-1!==V||g.hasState(2))&&!(0===i&&0===u)||g.hasState(8);Y=true;t:{const i=Ot(x,e);for(let e=Qt(_,c,S);e<L;++e){const{evaluateStart:l,evaluateEnd:o}=g;let f,d,v;if(l||o){[f,d,v]=Zt(g);const t=s.length;if(l){const i=h.concat(s.slice(u+1,t)).filter(e=>!!e.animationElement&&e.delay<D);if(i.length)zt(i,_),[f,d,v]=Nt(p,x,w,e,g,f,d,v,k,i,true),i.forEach(e=>{if(e.hasState(4)&&s.includes(e))It(h,e)})}if(o)if(g.getIntervalEndTime(_)<D&&(h.length||u<t-1)){const i=h.filter(e=>!!e.animationElement);let n=u+1;while(n<t){const e=s[n++];if(e.animationElement){if(!i.includes(e))i.push(e);It(h,e)}}if(i.length)Xt(i,_),[f,d,v]=Nt(p,x,w,e,g,f,d,v,k,i,false)}Gt(p,x,w,g,k,f,d,v)}else({keyTimes:f,values:d,keySplines:v}=g);const b=f.length;for(let s=0;s<b;++s){const l=f[s];let o=-1,h=Vt(g,d,e,s,k);if(e===L-1&&B>0)if(B===l)B=-1;else if(s===b-1)o=O,_=o,h=_t(B,f[s-1],Vt(g,d,e,s-1,k),l,h),B=-1;else if(B>l)for(let t=s+1;t<b;++t)if(B<=f[t]){o=O,_=o,h=_t(B,l,h,f[t],Vt(g,d,e,t,k)),B=-1;break}if(-1===o){if(o=qt(c,S,f,e,s),o<0||o<V)continue;if(o===D)Y=e===L-1&&s===b-1,_=o;else{const t=t=>[V,W]=Pt(g,_,k,f,d,v,c,e,s,t,a,n,m,y);if(c<0&&-1===V){if(o>0)_=0,t(0)}else if(o>D){if(r&&V+1<D)t(V);_=D,t(D+(D===P&&!n.has(D-1)?-1:0)),Y=false;break t}else if(r){if(g.hasState(2))_=X;if(c>=V)o=Math.max(c,V+1),_=c;else if(o===V)_=o,o=V+1;else t(V),_=Math.max(o,V);r=false}else{if(_=o,e>0&&0===s&&g.accumulateSum){Ct(g,o,v,s,a,m,y),V=o;continue}o=Math.max(o,V+1)}}}if(o>V){if(s===t-1&&!g.accumulateSum&&(e<L-1||g.fillReplace&&(!i||h!==i.value)))--o;V=Ft(n,o,h),Ct(g,V,v,s,a,m,y),W=h}if(!Y||-1===B)break t}}}F(i,u)}if(void 0!==W)if(k=W,o)Et(R,g.type,z,V),T=g;if($){if($.hasState(32))W=$.to,V=Lt(n,$,o,$.delay,W),_=$.delay,C(_,W,$.type,$);else if(g.hasState(64))Et(R,V,$.type);$t(h),Y=true}if(ut(r,e=>e.delay>=X&&e.delay<=_,e=>{if(C(e.delay,e.to,e.type,e),e.animationElement)$t(h)}),v)if(Y){if(!$){b[e]=g;break e}}else{h.length=0,h.push(g);continue}if(Y){if(!v&&M(g,P))break e;for(let e=i;e<t;++e)if(l[e]<_){const t=f[e];t.forEach(e=>{const t=e.getTotalDuration();if(t>_&&!e.hasState(4,16,64))It(h,e);else if(!e.fillReplace)C(t,e.valueTo,e.type,e)}),l[e]=1/0,t.length=0}if(h.length&&_<P){Xt(h);const e=h.find(e=>e.delay<=_);if(e)e.removeState(4,2),e.addState(8),$t(h,e),c=e.delay,s=[e],u=-1}}else It(h,g)}}if(h.length){Xt(h);while(h.length){const t=h.shift(),{delay:i,duration:s}=t,r=V-i;let l=1/0;const f=()=>{let[f,c,u]=Zt(t);const d=Qt(_,i,s);if(h.length){if(t.evaluateStart){const e=h.slice(0);zt(e,_),[f,c,u]=Nt(p,x,w,d,t,f,c,u,k,e,true)}if(t.evaluateEnd&&t.getIntervalEndTime(_)<l)[f,c,u]=Nt(p,x,w,d,t,f,c,u,k,h,false)}Gt(p,x,w,t,k,f,c,u);const v=V+1;let S=Math.floor(r/s),b=false;const T=(s,n)=>Pt(t,_,k,f,c,u,i,S,s,n,a,g[e],m,y);do{const e=f.length;for(let r=0;r<e;++r){let o=qt(i,s,f,S,r);if(!b&&o>=V)[V,k]=T(r,V),b=true;if(b)if(o>=l){if(l>V){const e=t.fillReplace||-1===t.iterationCount;if([V,k]=T(r,l-(e?1:0)),e)k=Vt(t,c,S,0,k),V=Ft(n,l,k);_=l}}else if(o>V){if(_=o,r===e-1&&o<l)--o;k=Vt(t,c,S,r,k),V=Ft(n,o,k),Ct(t,V,u,r,a,m,y)}}}while(V<l&&++S);if(o)Et(R,t.type,v,V)};if(-1===t.iterationCount){if(r>0&&r%t.duration!=0)l=i+t.duration*Math.ceil(r/s),f();b[e]=t;break e}else if(l=Math.min(i+t.duration*t.iterationCount,t.end||1/0),l>V)if(f(),M(t))break e}}if((null==E?void 0:E.fillReplace)&&void 0===b[e]){let t,i=0;if(x[e]){const s=Ot(x,e);if(s)({key:i,value:t}=s)}else if(o)i=Array.from(R.values()).pop(),t=A.typeAsValue(i);else t=w[e];if(void 0!==t&&!rt(n.get(V),t))if(V=Ft(n,V,t),o)Et(R,i,V)}}v[e]=V}{const e=new Set;let t=0;for(const i in g){let s=0;for(const t of g[i].keys())e.add(t),s=t;t=Math.max(t,s),null===(l=x[i])||void 0===l||l.sort((e,t)=>{if(e.time===t.time)return 0;else return e.time<t.time?-1:1})}if(Object.keys(b).length){const i=[],s=[];for(const e in b){const t=b[e];i.push(t.delay),s.push(t.duration)}const n=i[0];if(0===S.size&&1===new Set(i).size&&1===new Set(s).size&&n===e.values().next().value)_=n;else if(s.length>1&&s.every(e=>e%250==0))t=it(s,t,i);else{const e=s[0];if((t-n)%e!=0)t=e*Math.ceil(t/e)}}if(-1===_)for(const i in g){const s=b[i];if(s){let n=v[i];if(n<t){const r=g[i],l=s.delay,f=n+1;let c=Array.from(r.values()).pop(),h=Math.floor((n-l)/s.duration);const[u,d,S]=Zt(s);Gt(p,x,w,s,c,u,d,S);const b=u.length;do{let i=false;for(let o=0;o<b;++o){let f=qt(l,s.duration,u,h,o);if(!i&&f>=n)[n,c]=Pt(s,n,c,u,d,S,l,h,o,n,a,r,m,y),e.add(n),i=true;if(i&&f>n){if(o===b-1&&f<t)--f;c=Vt(s,d,h,o,c),n=Ft(r,f,c),Ct(s,f,S,o,a,m,y),e.add(n)}}}while(n<t&&++h);if(v[i]=n,o)Et(R,s.type,f,n)}}}const s=dt(Array.from(e));if(i||o){let e=false;for(const t in g){const i=g[t];if(!i.has(0)){const n=w[t];if(void 0!==n){const t=i.keys().next().value-1;if(i.set(0,n),i.set(t,n),!s.includes(0))s.push(0),e=true;if(!s.includes(t))s.push(t),e=true}}}if(e)dt(s)}if(!o)for(const e in g){const t=g[e],i=t.keys().next().value,n=t.values().next().value,a=s.length;let r=0;while(r<a){const a=s[r++];if(a<=v[e]){if(!t.has(a)){if(p.paused(e,a))if(a<i)t.set(a,n);else{let i=p.get(e,a);if(void 0!==i)if(i=kt(i,true),""!==i){t.set(a,i);continue}}St(t,e,a,p,o)}}else break}}E=At(g,s,x)}if(-1===_&&Object.keys(b).length){const e={},t=[],i=[],s=[];for(const e in b){const i=b[e];s.push(i.duration),t.push(i)}const n=it(s);if(t.forEach(t=>{var s;const r=t.attributeName;e[r]=new Map;let l=null!==(s=g[r].get(v[r]))&&void 0!==s?s:w[r];const[o,f,c]=Zt(t);Gt(p,x,w,t,l,o,f,c);let h=0,u=0;const d=o.length;do{for(let s=0;s<d;++s){let d=qt(0,t.duration,o,u,s);if(s===o.length-1&&d<n)--d;if(l=Vt(t,f,u,s,l),h=Ft(e[r],d,l),Ct(t,h,c,s,a,k,T),!i.includes(h))i.push(h)}}while(h<n&&++u)}),t.every(e=>e.alternate)){let t=-1;for(const s in b){const a=e[s],r=Array.from(a.keys()),l=Array.from(a.values()).reverse(),o=r.length;for(let e=0;e<o;++e){const s=r[e];if(0!==s){t=n+s;const r=k.get(s);if(r)k.set(t,r);if(t=Ft(a,t,l[e]),!i.includes(t))i.push(t)}}}}dt(i);for(const t in e){const s=e[t];i.forEach(e=>{if(!s.has(e))St(s,t,e,p,o)})}V=At(e,i,x)}if(E||V){Yt(r,f);const e=Array.from(R.entries()),t=ot(f,e=>ne.isAnimateTransform(e)?A.typeAsName(e.type):e.attributeName,"-",false),s=this.parent;[E,V].forEach(l=>{if(l){const f=l===E,c=f?m:k,h=f?y:T;if(Kt(o,a)){const t=[];if(o){const i=[];if(f){const t=Array.from(l.entries());let s=e[0][1];const n=e.length,a=t.length;for(let r=0,l=0,o=0;r<n;++r){const f=r<n-1?e[r+1][1]:-1;if(s!==f){const n=new Map;for(let i=o;i<a;++i){const a=t[i][0];if(a>=e[l][0]&&a<=e[r][0])n.set(a,new Map([[s,t[i][1].values().next().value]])),o=i;else if(a>e[r][0])break}i.push(n),s=f,l=r+1}}}else if(b.transform){const e=new Map;for(const[t,i]of l.entries())e.set(t,new Map([[b.transform.type,i.values().next().value]]));i.push(e)}else return;let s=0;const n=i.length;for(let e=0;e<n;++e){const a=Array.from(i[e].entries()),l=a[0];let o=l[0];const u=l[1];if(1===a.length)if(e<n-1)a.push([i[e+1].keys().next().value,u]);else a.push([o+1,u]);const d=a.length,p=a[d-1][0];let g=p-o;const m=new je;m.type=u.keys().next().value;for(let e=0;e<d;++e){const i=a[e];if(t.push(c.get(i[0])||""),m.type!==SVGTransform.SVG_TRANSFORM_ROTATE){const t=h.get(i[0]);if(t)ht(m,"transformOrigin")[e]=t}i[0]-=o}for(const[e,t]of bt(a))m.keyTimes.push(e),m.values.push(t.values().next().value);if(o-=s,o>1)m.delay=o;else if(1===o&&(g+1)%10==0)++g;m.duration=g,m.keySplines=t,m.synchronized={key:e,value:""},s=p,Wt(r,m,f)}}else{const e=Array.from(l.entries()),a=-1!==_?_:0;let o;if(e.forEach(e=>{t.push(c.get(e[0])||""),e[0]-=a}),i){const t=wt(bt(e),i,s,x,n);if(t){o=new De,o.attributeName="d";const e=t.length;let i=0;while(i<e){const e=t[i++];o.keyTimes.push(e.key),o.values.push(e.value.toString())}}else return}else{const e=new je;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;for(const[t,i]of l.entries()){const n=i.get("x")||0,a=i.get("y")||0;e.keyTimes.push(t),e.values.push(s?s.refitX(n)+" "+s.refitX(a):n+" "+a)}o=e}o.delay=a,o.keySplines=t,o.duration=e[e.length-1][0],Wt(r,o,f)}}else if(((e,t)=>nt(t,e?16:2))(o,a)){const a=Array.from(l.entries()),u=a.length-1;for(let l=0;l<u;++l){const[u,d]=a[l],[p,g]=a[l+1];let m,y=t;if(o){const t=new je;if(f){const i=e.length-1;for(let s=0;s<i;++s){const i=e[s],n=e[s+1];if(i[1]===n[1]&&u>=i[0]&&p<=n[0]){t.type=i[1];break}else if(p-u==1&&p===n[0]){t.type=n[1];break}}}else if(b.transform)t.type=b.transform.type;if(0===t.type)continue;t.values=[d.values().next().value,g.values().next().value];const i=h.get(p);if(i)t.transformOrigin=[i];m=t}else if(i){const e=wt([[u,d],[p,g]],i,s,x,n);if(e)m=new De,m.attributeName="d",m.values=ct(e,e=>e.value.toString());else continue}else{const e=new je;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,e.values=[Dt(d,s),Dt(g,s)],y+=l,m=e}if(f)m.delay=0===l?u:0;m.duration=p-u,m.keyTimes=[0,1],m.synchronized={key:l,value:y};const v=c.get(p);if(v)m.keySplines=[v];Wt(r,m,f)}}}})}}})}};const ei=squared.lib,{isPercent:ti,parseAngle:ii}=ei.css,{getNamedItem:si}=ei.dom,{truncateFraction:ni}=ei.math,{isEqual:ai,isNumber:ri,isString:li,iterateArray:oi,objectMap:fi}=ei.util,ci=(e,t,i,s)=>!!e&&e.key===t&&e.rotate===s&&ai(e.value,i);class hi extends je{constructor(e,t){if(super(e,t),this.path="",this.distance="0%",this.rotate="auto 0deg",this.motionPathElement=null,this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this._offsetLength=0,this._keyPoints=[],t){this.setAttribute("path");const e=si(t,"rotate");switch(e){case"auto":break;case"auto-reverse":this.rotate="auto 180deg";break;default:if(ri(e))this.rotate=parseFloat(e)+"deg";break}oi(t.children,e=>{if("mpath"===e.tagName){let t=N(e);if(t){if(x.use(t))t=N(t);if(t&&x.shape(t))return this.motionPathElement=t,true}}}),this.setCalcMode()}else if(e){const t=/path\("([^"]+)"\)/.exec(P(e,"offset-path"));if(t)this.path=t[1];const i=P(e,"offset-distance");if(""!==i)this.distance=i;const s=P(e,"offset-rotate");if(""!==s&&"auto"!==s)this.rotate=s}}setCalcMode(){const e=this.animationElement;if(e){const t=si(e,"calcMode")||"paced";switch(t){case"paced":case"discrete":case"spline":super.setCalcMode("translate",t);break;case"linear":{const t=je.toFractionList(si(e,"keyPoints"),";",false);let i=super.keyTimes;if(0===i.length&&-1!==this.duration)i=je.toFractionList(si(e,"keyTimes")),this.length=0,super.keyTimes=i;if(t.length===i.length)this._keyPoints=t;break}}}}addKeyPoint(e){if(void 0===this._offsetPath){const t=e.key;if(t>=0&&t<=1){const i=super.keyTimes,s=this._keyPoints;if(i.length===s.length){const n=e.value;let a=NaN;if(ti(n))a=parseFloat(n)/100;else if(ri(n))a=parseFloat(n)/this.offsetLength;if(!isNaN(a)){a=Math.min(a,1);const n=i.findIndex(e=>e===t);if(-1!==n)i[n]=e.key,s[n]=a;else i.push(e.key),s.push(a)}}}}}setOffsetPath(){if(void 0===this._offsetPath&&li(this.path)){const{duration:e,rotateData:t}=this;let i=ne.getOffsetPath(this.path,this.rotate),s=i.length;if(s>0){let n=1;if(e>=s){n=e/s;const t=s-1;let a=1;while(a<t)i[a++].key*=n;i[t].key=e}else if(e>0){const t=new Array(e),n=s/e;let a,r=0;while(r<e)a=i[Math.floor(r*n)],a.key=r,t[r++]=a;const l=i.pop();if(a.value!==l.value)l.key=e,t.push(l);i=t,s=t.length}const{framesPerSecond:a,keyPoints:r}=this,l=a?1e3/a:0;if(r.length){const t=s-1,a=super.keyTimes,o=[];if(r.length>1){let s;const f=a.length-1;for(let c=0;c<f;++c){const f=a[c],h=ni(f*e),u=ni((a[c+1]-f)*e),d=r[c],p=r[c+1];if(0===u){const e=h,{value:n,rotate:a}=i[Math.floor(p*t)];if(!ci(s,e,n,a))s={key:e,value:n,rotate:a},o.push(s)}else{let e=0,a=h;if(d===p){const{value:r,rotate:f}=i[Math.floor(d*t)];if(ci(s,h,r,f))e+=n,a+=l;for(;e<u;e+=n){const t=h+e;if(t>=a)if(o.push({key:t,value:r,rotate:f}),e<u-1)a+=l;else a=0}}else{const n=Math.floor(Math.min(d,p)*t),r=Math.floor(Math.max(d,p)*t),f=[];let c=n;while(c<=r)f.push(i[c++]);if(d>p)f.reverse();const g=f.length,m=u/g,y=f[0];if(ci(s,h,y.value,y.rotate))++e,a+=l;for(;e<g;++e){const t=h+e*m;if(t>=a){const i=f[e];if(i.key=t,o.push(i),e<g-1)a+=l;else a=0}}}o[o.length-1].key=h+u}}}else if(o.push(i[Math.floor(r[0]*t)]),0===a[0])o[0].rotate=0;this._offsetPath=o}else if(l>0){const e=[];for(let t=0;t<s;t+=l)e.push(i[Math.floor(t)]);const t=i.pop();if(e[e.length-1]!==t)e.push(t);this._offsetPath=e}else this._offsetPath=i;if(t){i=this._offsetPath;const s=t.length-1;for(let n=0,a=0;n<s;++n){const s=t[n],r=t[n+1],l=r.key,o=[];if(s.key===l)o.push(i[a++]);else{const t=Math.floor(ni(l*e));do{const e=i[a];if((null==e?void 0:e.key)<=t)o.push(e);else break}while(++a)}const f=s.value,c=r.value,h=ii(f.split(" ").pop()),u=ii(c.split(" ").pop()),d=f.startsWith("auto");if(f===c||h===u)if(d){if(0!==h)o.forEach(e=>e.rotate+=h)}else o.forEach(e=>e.rotate=h);else{const e=u-h,t=o.length-1,i=e/t;let s=0;if(d){while(s<t)o[s].rotate+=h+s++*i;o[t].rotate+=h+e}else{while(s<t)o[s].rotate=h+s++*i;o[t].rotate=h+e}}}}this.keySplines=void 0,this.timingFunction=xe.linear}}}reverseKeyPoints(){let e,t;if(this.validKeyPoints())t=this._keyPoints.slice(0).reverse(),e=fi(super.keyTimes,e=>1-e).reverse();return{keyTimes:e,keyPoints:t}}validKeyPoints(){const e=this.keyPoints;return e.length>0&&e.length===super.keyTimes.length}set keyTimes(e){if(!li(this.path))super.keyTimes=e}get keyTimes(){this.setOffsetPath();const e=this._offsetPath;if(e){const t=this.duration;return fi(e,e=>e.key/t)}return super.keyTimes}set values(e){if(!li(this.path))super.values=e}get values(){this.setOffsetPath();const e=this._offsetPath;if(e)return fi(e,e=>{const{x:t,y:i}=e.value;return`${t} ${i}`});else return super.values}set reverse(e){if(e!==super.reverse){const{keyTimes:t,keyPoints:i}=this.reverseKeyPoints();if(t&&i)this.length=0,this._keyPoints=i,super.keyTimes=t,super.reverse=e}}get reverse(){return super.reverse}set alternate(e){const t=this.iterationCount;if(e!==super.alternate&&(-1===t||t>1)){const{keyTimes:i,keyPoints:s}=this.reverseKeyPoints();if(i&&s){let n=super.keyTimes,a=this.keyPoints;const r=n.length;if(-1===t){let e=0;while(e<r)n[e]/=2,i[e]=.5+i[e++]/2;n=n.concat(i),a=a.concat(s),this.duration=2*this.duration}else{const e=n.slice(0),l=a.slice(0);for(let o=0;o<t;++o)if(0===o){let e=0;while(e<r)n[e++]/=t}else{const f=o*(1/t),c=o%2==0?e.slice(0):i.slice(0);let h=0;while(h<r)c[h]=ni(f+c[h++]/t);n=n.concat(c),a=a.concat(o%2==0?l:s)}this.duration=this.duration*t,this.iterationCount=1}this._keyTimes=n,this._keyPoints=a,super.alternate=e}}}get alternate(){return super.alternate}set parent(e){super.parent=e;const t=this.parentContainer;if(null==t?void 0:t.requireRefit){const e=this.path;if(e)this.path=ne.transformRefit(e,void 0,void 0,t)}}get parent(){return super.parent}get offsetPath(){return this._offsetPath}get playable(){return!this.paused&&-1!==this.duration&&li(this.path)}get rotateValues(){this.setOffsetPath();const e=this._offsetPath;return e&&fi(e,e=>e.rotate)}get keyPoints(){return this._keyPoints}get offsetLength(){let e=this._offsetLength;if(0===e){const t=this.path;if(t)e=G(t)}return e}get instanceType(){return 114696}}const ui=squared.lib,{getFontSize:di,getKeyframesRules:pi,isAngle:gi,isCustomProperty:mi,hasCalc:yi,parseAngle:vi,parseVar:Si}=ui.css,{isWinEdge:bi}=ui.client,{getNamedItem:ki}=ui.dom,{XML:Ti}=ui.regex,{isString:wi,iterateArray:xi,replaceMap:Ri,safeNestedArray:Ai,sortNumber:Ei}=ui.util,Vi={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},_i=pi(),Pi=new RegExp(`(ease|ease-in|ease-out|ease-in-out|linear|step-(?:start|end)|steps\\(\\d+,\\s+(?:start|end)\\)|${Re}),?\\s*`,"g");function Mi(e,t){const i=P(e,t);if("animation-timing-function"===t){const e=[];let t;Pi.lastIndex=0;while(null!==(t=Pi.exec(i)))e.push(t[1]);return e}return i.split(Ti.SEPARATOR)}function Ni(e){return e.sort((e,t)=>{if(e.key!==t.key)return e.key<t.key?-1:1;else return 0})}function Fi(e){if("reverse"===e)return"auto 180deg";else if(/^reverse\s+/.test(e)){const t=e.split(" ")[1];return"auto "+(gi(t)?180+vi(t):"0")+"deg"}return e}function Ci(e,t,i){var s;const n=null===(s=e["transform-origin"])||void 0===s?void 0:s.find(e=>e.key===i);if(n)return A.origin(t,n.value)}var Gi=e=>class extends e{getTransforms(e){if(!e)e=this.element;return ne.filterTransforms(A.parse(e)||ne.convertTransforms(e.transform.baseVal))}getAnimations(e){var t,i;const s=[];if(!bi()){if(!e)e=this.element;let n=0;const a=(e,t,i="")=>{if(""===i)++n;e.delay=t,e.group={id:n,name:i},e.parent=this,s.push(e)};xi(e.children,t=>{if(t instanceof SVGAnimationElement){const i=ki(t,"begin");if(/^[a-zA-Z]+$/.test(i))return;const s=i?Ei(Ri(i.split(";"),e=>we.convertClockTime(e))):[0];if(s.length)switch(t.tagName){case"set":s.forEach(i=>a(new we(e,t),i));break;case"animate":s.forEach(i=>a(new De(e,t),i));break;case"animateTransform":s.forEach(i=>{var s;const n=new je(e,t);if(ne.isShape(this)&&this.path)n.transformFrom=ne.drawRefit(e,this.parent,null===(s=this.viewport)||void 0===s?void 0:s.precision);a(n,i)});break;case"animateMotion":s.forEach(i=>{var s;const n=new hi(e,t),r=n.motionPathElement;if(r)n.path=ne.drawRefit(r,this.parent,null===(s=this.viewport)||void 0===s?void 0:s.precision);a(n,i)});break}}});const r=Mi(e,"animation-name"),l=r.length;if(l){const s={},o=[],f=[];for(const t in Vi){let i=Mi(e,t);if(0===i.length)i.push(Vi[t]);while(i.length<l)i=i.concat(i.slice(0));i.length=l,s[t]=i}for(let c=0;c<l;++c){const l=_i[r[c]],h=we.convertClockTime(s["animation-duration"][c]);if(l&&h>0){++n;const u={},d={},p="paused"===s["animation-play-state"][c],g=we.convertClockTime(s["animation-delay"][c]),m=s["animation-iteration-count"][c],y=s["animation-fill-mode"][c],v=r[c]+"_"+c,S=[];let b=true;f.push({name:v,attributes:S,paused:p,delay:g,duration:h,iterationCount:m,fillMode:y});for(const t in l){const i=parseFloat(t)/100,s=l[t];for(const t in s){let n=s[t];if(yi(n))n=_(e,t,n);else if(mi(n))n=Si(e,n);if(n)Ai(Vi[t]?d:u,t).push({key:i,value:n})}}if(u.transform){const i=Ni(u.transform),s=i.length;let n=0;while(n<s){const s=i[n++],a=s.key,r=Ci(u,e,a);null===(t=A.parse(e,s.value))||void 0===t||t.forEach(e=>{const t=e.matrix;let i,s,n;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:i="translate",s=t.e+" "+t.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(i="scale",s=t.a+" "+t.d+" "+(r?r.x+" "+r.y:"0 0"),r&&(0!==a||0!==r.x||0!==r.y))n={x:r.x*(1-t.a),y:r.y*(1-t.d)};break;case SVGTransform.SVG_TRANSFORM_ROTATE:i="rotate",s=e.angle+" "+(r?r.x+" "+r.y:"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:if(i="skewX",s=e.angle.toString(),r&&(0!==a||0!==r.y))n={x:r.y*t.c*-1,y:0};break;case SVGTransform.SVG_TRANSFORM_SKEWY:if(i="skewY",s=e.angle.toString(),r&&(0!==a||0!==r.x))n={x:0,y:r.x*t.b*-1};break;default:return}const l=Ai(u,i),o=l.findIndex(e=>e.key===a);if(-1!==o){const e=l[o];e.value=s,e.transformOrigin=n}else l.push({key:a,value:s,transformOrigin:n})})}delete u.transform,delete u["transform-origin"]}if("none"===P(e,"offset-path"))delete u["offset-distance"],delete u["offset-rotate"];else if(u["offset-rotate"]){const t=u["offset-rotate"];if(u["offset-distance"]||!u.rotate){let i=P(e,"offset-rotate");if(""===i||"auto"===i)i="auto 0deg";Ni(t);const s=t[0],n=t[t.length-1];if(0!==s.key)t.unshift({key:0,value:i});if(1!==n.key)t.push({key:1,value:i});for(let e=1;e<t.length;++e){const i=t[e-1],s=t[e],n=Fi(i.value),a=Fi(s.value);if(i.value=n,s.value=a,n.split(" ").pop()!==a.split(" ").pop()){const r=n.startsWith("auto"),l=a.startsWith("auto");if(r&&!l||!r&&l){const r=(i.key+s.key)/2;t.splice(e++,0,{key:r,value:n}),t.splice(e++,0,{key:r,value:a})}}}if(!u["offset-distance"]){const i=new hi(e);i.duration=0,i.iterationCount=1,i.fillForwards=true,i.addKeyPoint({key:0,value:i.distance}),a(i,g,v),t.forEach(e=>{const t=e.value;let i=vi(t.split(" ").pop());if(t.startsWith("auto"))i+=90;e.value=i+" 0 0"}),u.rotate=t,delete u["offset-rotate"],b=false}}else delete u["offset-rotate"]}for(const t in u){let n;switch(t){case"offset-rotate":continue;case"offset-distance":n=new hi(e),n.rotateData=u["offset-rotate"];break;case"rotate":case"scale":case"skewX":case"skewY":case"translate":n=new je(e),n.setType(t);break;default:n=new De(e),n.attributeName=t;break}a(n,g,v);const r=u[t],l=s["animation-direction"][c],f=s["animation-timing-function"][c];if(Ni(r),"offset-distance"===t){const e=n;if(0!==r[0].key)e.addKeyPoint({key:0,value:e.distance});if(r.forEach(t=>e.addKeyPoint(t)),1!==r.pop().key)e.addKeyPoint({key:1,value:e.distance});if(wi(f))e.timingFunction=f}else{S.push(t);const s=[],a=[],l=[];let o=r.length;for(let e=0;e<o;++e){const t=r[e],{key:c,value:h}=t;if(s.push(c),a.push(h),b&&e<o-1){const e=null===(i=d["animation-timing-function"])||void 0===i?void 0:i.find(e=>e.key===c);l.push((null==e?void 0:e.value)||f)}const u=t.transformOrigin;if(u&&ne.asAnimateTransform(n))Ai(n,"transformOrigin")[e]=u}if(b&&!l.every(e=>"linear"===e)){const i=[],r=[],f=[];o=s.length;for(let n=0;n<o;++n){const c=s[n],u=a[n];if(n<o-1){const o=l[n];if(""!==u&&o.startsWith("step")){const l=De.convertStepTimingFunction(t,o,s,a,n,di(e));if(l){const[e,t]=l,a=(s[n+1]-c)*h,u=e.length-(1===s[n+1]?1:0);let d=0;while(d<u){let s=(c+e[d]*a)/h;if(i.includes(s))s+=.001;i.push(s),r.push(t[d++]),f.push(xe[o.includes("start")?"step-start":"step-end"])}continue}}f.push(De.convertTimingFunction(o))}i.push(c),r.push(u)}n.values=r,n.keyTimes=i,n.keySplines=f}else if(n.values=a,n.keyTimes=s,b)n.keySplines=l;else n.timingFunction=f}n.paused=p,n.duration=h,n.iterationCount="infinite"!==m?parseFloat(m):-1,n.fillForwards="forwards"===y||"both"===y,n.fillBackwards="backwards"===y||"both"===y,n.reverse=l.endsWith("reverse"),n.alternate=(-1===n.iterationCount||n.iterationCount>1)&&l.startsWith("alternate"),o.push(n)}}}f.reverse(),o.forEach(e=>e.setGroupOrdering(f))}}return s}set name(e){this._name=e}get name(){let e=this._name;if(void 0===e)e=ne.setName(this.element),this._name=e;return e}get transforms(){let e=this._transforms;if(void 0===e)e=this.getTransforms(),this._transforms=e;return e}get animations(){let e=this._animations;if(void 0===e)e=this.getAnimations(),this._animations=e;return e}get visible(){return function(e){const t=P(e,"visibility");return"hidden"!==t&&"collapse"!==t&&"none"!==P(e,"display")}(this.element)}get opacity(){return P(this.element,"opacity")||"1"}};const{USER_AGENT:Oi,isUserAgent:Li}=squared.lib.client;function Bi(e){if("svg"===e.tagName)if(Li(8))return e.parentElement instanceof HTMLElement;else if(Li(4))return!(e.parentElement instanceof HTMLElement);return false}var Ii=e=>class extends e{setRect(){const e=this.parent;let{x:t,y:i,width:s,height:n}=this;if(e)t=e.refitX(t),i=e.refitY(i),s=e.refitSize(s),n=e.refitSize(n);this.setBaseValue("x",t),this.setBaseValue("y",i),this.setBaseValue("width",s),this.setBaseValue("height",n)}getRectElement(){const e=this.element;switch(e.tagName){case"svg":case"use":case"image":return e;default:return null}}set x(e){this._x=e}get x(){var e,t;return null!==(e=this._x)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.x.baseVal.value)||0}set y(e){this._y=e}get y(){var e,t;return null!==(e=this._y)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.y.baseVal.value)||0}set width(e){this._width=e}get width(){const e=this._width;if(void 0!==e)return e;else{const e=this.getRectElement();if(e)return Bi(e)?e.getBoundingClientRect().width:e.width.baseVal.value;else return 0}}set height(e){this._height=e}get height(){const e=this._height;if(void 0!==e)return e;else{const e=this.getRectElement();if(e)return Bi(e)?e.getBoundingClientRect().height:e.height.baseVal.value;else return 0}}};const Xi=squared.lib,{STRING:$i}=Xi.regex,{extractURL:zi}=Xi.css,{cloneObject:Di,iterateArray:Wi}=Xi.util,Yi=new RegExp($i.LENGTH_PERCENTAGE);function qi(e,t){const i=zi(M(e,"fill"));if(""!==i){if(t){const e=t.definitions.pattern.get(i);if(e)return e}const e=document.getElementById(i.substring(1));if(e instanceof SVGPatternElement)return e}}function ji(e,t,i,s){if(e){const n=t.aspectRatio,a=e.aspectRatio;if(i&&s){Di(i,n);const{width:t,height:r}=n;if(t>0&&r>0){const i=t/r,l=a.width||e.viewBox.width,o=a.height||e.viewBox.height,f=l/o,c=l/t,h=o/r,u=P(s,"width"),d=P(s,"height");let p,g;if(x.svg(s))p=s.width.baseVal.value,g=s.height.baseVal.value;else p=parseFloat(u),g=parseFloat(d);const m=Ki(u),y=Ki(d),v=p/t,S=g/r;let b=m&&y;if(p>=t&&g>=r)n.unit=Math.min(v,S),b=false;else if(c!==h)n.unit=Math.min(c,h);if(m||y){if(!isNaN(p)&&!isNaN(g)){const{align:e,meetOrSlice:i}=s.preserveAspectRatio.baseVal;if(v===S){if(b)n.unit*=v;if(n.align=SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,t>r)n.alignX=true;else n.alignY=true}else{switch(i){case SVGPreserveAspectRatio.SVG_MEETORSLICE_MEET:if(S<v){if(b)if(r>=t&&r>=o)n.unit=S;else n.unit*=S;n.alignX=true}else{if(b)if(t>=r&&t>=l)n.unit=v;else n.unit*=v;n.alignY=true}break;case SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE:if(S>v){if(b)if(r>=t&&r>=o)n.unit=S;else n.unit*=S;n.alignX=true,n.alignY=r>o}else{if(b)if(t>=r&&t>=l)n.unit=v;else n.unit*=v;n.alignX=t>l,n.alignY=true}break}n.align=e}n.meetOrSlice=i}}else if(f>i)n.position.x=(l-o*i)/2;else if(f<i)n.position.y=(o-l*(1/i))/2}}const{parent:r,position:l,unit:o,x:f,y:c}=a;n.parent.x=f+f*(o-1),n.position.x*=a.unit,n.position.x+=l.x-r.x,n.parent.y=c+c*(o-1),n.position.y*=o,n.position.y+=l.y-r.y,n.unit*=o}}const Ui=e=>e.viewport||ne.asSvg(e)&&e||void 0,Ki=e=>Yi.test(e);class Hi extends squared.lib.base.Container{constructor(e){super(),this.element=e,this.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1,meetOrSlice:SVGPreserveAspectRatio.SVG_MEETORSLICE_UNKNOWN,align:SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,alignX:false,alignY:false},this._clipRegion=[]}append(e,t){return e.parent=this,e.viewport=t||Ui(this),super.append(e)}build(e){let t,i;if(e)t=e.symbolElement||e.patternElement||e.element||this.element,i=e.precision,e=Object.assign(Object.assign({},e),{symbolElement:void 0,patternElement:void 0,element:void 0});else t=this.element;const s=false!==(null==e?void 0:e.initialize),n=Ui(this),a=function(e){while(e){if(e.hasViewBox())return e;e=e.parent}}(this),r=this.aspectRatio;let l=false;if(this.clear(),Wi(t.children,t=>{let i;if(x.svg(t))i=new squared.svg.Svg(t,false),ji(a,i,t.viewBox.baseVal,t),l=true;else if(x.g(t))i=new squared.svg.SvgG(t),ji(a,i);else if(x.use(t)){const e=N(t);if(e)if(x.symbol(e))i=new squared.svg.SvgUseSymbol(t,e),ji(a,i,e.viewBox.baseVal,e),l=true;else if(x.image(e))i=new squared.svg.SvgImage(t,e);else if(x.shape(e)){const r=qi(t,n);if(r)i=new squared.svg.SvgUsePattern(t,e,r),ji(a,i);else i=new squared.svg.SvgUse(t,e,s)}}else if(x.image(t))i=new squared.svg.SvgImage(t);else if(x.shape(t)){const e=qi(t,n);if(e)i=new squared.svg.SvgShapePattern(t,e),ji(a,i);else i=new squared.svg.SvgShape(t,s)}if(i)this.append(i,n),i.build(e)}),ne.asSvg(this)&&(this.documentRoot||r.meetOrSlice))if(this.documentRoot){const{x:e,y:t}=r;if(e<0||t<0)this.clipViewBox(e,t,r.width,r.height,i,true)}else{const{x:e,y:t}=this.parent.aspectRatio;this.clipViewBox(e,t,this.width+e,this.height+t,i,true)}else if(l&&this.hasViewBox()&&(0!==r.x||0!==r.y)){const{left:e,top:t}=ne.getBoxRect(this.getPathAll(false)),s=this.refitX(r.x),n=this.refitY(r.y);if(e<s||t<n)this.clipViewBox(e,t,this.refitSize(r.width),this.refitSize(r.height),i)}}hasViewBox(){return ne.asSvg(this)&&!!this.element.viewBox.baseVal||ne.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}clipViewBox(e,t,i,s,n,a=false){if(a)if(i-=e,s-=t,ne.asSvg(this)&&this.documentRoot)e=e<0?-1*e:0,t=t<0?-1*t:0;else e*=-1,t*=-1;this.clipRegion=ne.drawRect(i,s,e,t,n)}synchronize(e){this.each(t=>t.synchronize(e))}refitX(e){const t=this.aspectRatio;return(e-t.x)*t.unit-t.parent.x+t.position.x}refitY(e){const t=this.aspectRatio;return(e-t.y)*t.unit-t.parent.y+t.position.y}refitSize(e){return e*this.aspectRatio.unit}refitPoints(e){const{unit:t,meetOrSlice:i}=this.aspectRatio,s=e.length;let n=0;while(n<s){const i=e[n++];if(i.x=this.refitX(i.x),i.y=this.refitY(i.y),void 0!==i.rx&&void 0!==i.ry)i.rx*=t,i.ry*=t}if(i&&ne.asSvg(this)){const{align:t,alignX:i,alignY:a,parent:r}=this.aspectRatio,{width:l,height:o}=this,[f,c,h,u]=ne.minMaxPoints(e,true);let d=0,p=0;if(i)d=-1*r.x;if(a)p=-1*r.y;let g=d,m=p;const y=()=>l/2-(h+f)/2,v=()=>l-f-h+d,S=()=>o/2-(c+u)/2,b=()=>o-c-u+p;switch(t){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:if(i)g-=d;if(a)m-=p;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:if(i)g-=d;if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:if(i)g-=d;if(a)m+=b();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:if(i)g+=y();if(a)m-=p;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_NONE:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:if(i)g+=y();if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:if(i)g+=y();if(a)m+=b();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:if(i)g+=v();if(a)m-=p;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:if(i)g+=v();if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:if(i)g+=v();if(a)m+=b();break}n=0;while(n<s){const t=e[n++];t.x+=g,t.y+=m}}return e}getPathAll(e=true){const t=[];return(e?this.cascade():this.children).forEach(e=>{var i;if(ne.isShape(e)){const s=null===(i=e.path)||void 0===i?void 0:i.value;if(s)t.push(s)}}),t}set clipRegion(e){if(""!==e)this._clipRegion.push(e);else this._clipRegion.length=0}get clipRegion(){return this._clipRegion.join(";")}get requireRefit(){const e=this.aspectRatio;return 0!==e.x||0!==e.y||1!==e.unit||0!==e.position.x||0!==e.position.y||0!==e.parent.x||0!==e.parent.y}get instanceType(){return 2}}const Zi=squared.lib,{parseColor:Qi}=Zi.color,{getNamedItem:Ji}=Zi.dom,{cloneObject:es}=Zi.util;function ts(e){const t=[],i=e.getElementsByTagName("stop"),s=i.length;let n=0;while(n<s){const e=i[n++],s=Qi(Ji(e,"stop-color"),parseFloat(Ji(e,"stop-opacity")||"1"));if(s)t.push({color:s,offset:parseFloat(Ji(e,"offset"))/100})}return t}function is(e,...t){const i={};return t.forEach(t=>{const s=e[t];if(s){const{value:e,valueAsString:n}=s.baseVal;i[t]=e,i[t+"AsString"]=n}}),i}class ss extends(Jt(Ii(le(Gi(Hi))))){constructor(e,t=true){super(e),this.element=e,this.documentRoot=t,this.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},this.init()}build(e){this.precision=null==e?void 0:e.precision,this.setRect(),super.build(e)}synchronize(e){if(!this.documentRoot&&this.animations.length)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}init(){const e=this.element;if(this.documentRoot)es(e.viewBox.baseVal,this.aspectRatio),e.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(t=>{var i;const s=N(t,e);if(s)null===(i=t.parentElement)||void 0===i||i.removeChild(t),s.appendChild(t)});this.setDefinitions(e),e.querySelectorAll("defs").forEach(e=>this.setDefinitions(e))}setDefinitions(e){const t=this.definitions;e.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(e=>{let i=e.id;if(i)if(i="#"+i,x.clipPath(e))t.clipPath.set(i,e);else if(x.pattern(e))t.pattern.set(i,e);else if(x.linearGradient(e))t.gradient.set(i,Object.assign({type:"linear",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:ts(e)},is(e,"x1","x2","y1","y2")));else if(x.radialGradient(e))t.gradient.set(i,Object.assign({type:"radial",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:ts(e)},is(e,"cx","cy","r","fx","fy","fr")))})}get viewBox(){return this.element.viewBox.baseVal||E(this.element)}get instanceType(){return 18}}class ns{constructor(e){this.element=e}build(e){}synchronize(e){}get instanceType(){return 4}}const as=squared.lib,{parseColor:rs}=as.color,{extractURL:ls,getFontSize:os,hasCalc:fs,isCustomProperty:cs,isLength:hs,isPercent:us,parseUnit:ds,parseVar:ps}=as.css,{truncate:gs}=as.math,{STRING:ms,XML:ys}=as.regex,{convertCamelCase:vs,convertFloat:Ss,isNumber:bs,isString:ks,joinArray:Ts,objectMap:ws}=as.util,xs=ms.LENGTH_PERCENTAGE,Rs={polygon:/polygon\(([^)]+)\)/,inset:new RegExp(`inset\\(${xs}\\s?${xs}?\\s?${xs}?\\s?${xs}?\\)`),circle:new RegExp(`circle\\(${xs}(?:\\s+at\\s+${xs}\\s+${xs})?\\)`),ellipse:new RegExp(`ellipse\\(${xs}\\s+${xs}(?:\\s+at\\s+${xs}\\s+${xs})?\\)`)};var As=e=>class extends e{constructor(){super(...arguments),this._retainStyle=true,this._strokeWidth="1"}setStroke(){this.setAttribute("stroke"),this.setAttribute("stroke-width")}setPaint(e,t){var i,s;this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setStroke(),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");const n=this.getAttribute("clip-path",true);if(""!==n&&"none"!==n){const a=ls(n);if(""!==a)this.clipPath=a;else if(null==e?void 0:e.length)for(const a in Rs){const r=Rs[a].exec(n);if(r){const{top:n,right:l,bottom:o,left:f}=ne.getBoxRect(e),c=l-f,h=o-n;switch(a){case"inset":{let e=0,s=this.convertLength(r[1],h),a=0,u=0;if(r[4])e=f+this.convertLength(r[4],c),a=l-this.convertLength(r[2],c),u=o-this.convertLength(r[3],h);else if(r[2])e=this.convertLength(r[2],c),a=l-e,u=o-(r[3]?this.convertLength(r[3],h):s),e+=f;else e=f+s,a=l-s,u=o-s;s+=n;const d=[{x:e,y:s},{x:a,y:s},{x:a,y:u},{x:e,y:u}];null===(i=this.parent)||void 0===i||i.refitPoints(d),this.clipPath=ne.drawPolygon(d,t);break}case"polygon":{const e=ws(r[1].split(ys.SEPARATOR),e=>{let t=f,i=n;return e.trim().split(" ").forEach((e,s)=>{if(0===s)t+=this.convertLength(e,c);else i+=this.convertLength(e,h)}),{x:t,y:i}});null===(s=this.parent)||void 0===s||s.refitPoints(e),this.clipPath=ne.drawPolygon(e,t);break}default:if("circle"===a||"ellipse"===a){const e=this.parent,i=c<h?c:h;let s,l;if("circle"===a)s=this.convertLength(r[1],i),l=s;else s=this.convertLength(r[1],c),l=this.convertLength(r[2],h);let o=f,u=n;const d=r.length;if(d>=4)o+=this.convertLength(r[d-2],i),u+=this.convertLength(r[d-1],i);if(e)o=e.refitX(o),u=e.refitX(u),s=e.refitSize(s),l=e.refitSize(l);this.clipPath=ne.drawEllipse(o,u,s,l,t)}break}break}}}}setAttribute(e,t=false,i=true){let s=this.getAttribute(e,t,i);if(e=vs(e),ks(s)){if(fs(s))s=_(this.element,e,s)||getComputedStyle(this.element)[e];else if(cs(s))s=ps(this.element,s)||getComputedStyle(this.element)[e];switch(e){case"strokeDasharray":s="none"!==s?Ts(s.split(/,\s*/),e=>this.convertLength(e).toString(),", ",false):"";break;case"strokeDashoffset":case"strokeWidth":s=this.convertLength(s).toString();break;case"fill":case"stroke":{const t=ls(s);if(""!==t)this[e+"Pattern"]=t;else{let t;switch(s){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="none";break;case"currentcolor":case"currentColor":t=rs(this.color||P(this.element,"color",true));break;default:t=rs(s);break}if(t)this[e]=t.value}return}}this[e]=s}else if(!this._retainStyle)this[e]=""}getAttribute(e,t=false,i=true){let s=P(this.element,e,t);if(i&&!ks(s)){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return s}let i=this.useParent||this.parent;while(i){if(s=P(i.element,e,t),ks(s))break;i=i.parent}}return s}convertLength(e,t){if(!bs(e))if(hs(e))return ds(e,os(this.element));else if(us(e))return Math.round(("number"==typeof t?t:this.element.getBoundingClientRect()[t||"width"])*parseFloat(e)/100);return Ss(e)}resetPaint(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}set strokeWidth(e){this._strokeWidth=e}get strokeWidth(){const e=this.stroke;if(ks(e)&&"none"!==e){const e=this._strokeWidth;if(""!==e){const t=this.parent;return(null==t?void 0:t.requireRefit)?gs(t.refitSize(parseFloat(e))):e}}return""}};class Es extends(As(Gi(Hi))){constructor(e){super(e),this.element=e}build(e){super.build(e),this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}get instanceType(){return 34}}const{resolvePath:Vs}=squared.lib.util;class _s extends(Ii(le(Gi(ns)))){constructor(e,t){if(super(e),this.element=e,this.imageElement=null,this.__get_transforms=false,this.__get_animations=false,t)this.imageElement=t}build(){this.setRect()}extract(e){const t=e?ne.filterTransforms(this.transforms,e):this.transforms;let{x:i,y:s,width:n,height:a}=this;const r=t.length;if(r){t.reverse();let e=0;while(e<r){const r=t[e++],l=r.matrix,o=i;i=R.applyX(l,o,s),s=R.applyY(l,o,s);let f=this.rotateAngle;switch(r.type){case SVGTransform.SVG_TRANSFORM_SCALE:n*=l.a,a*=l.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(0!==r.angle){if(l.a<0)i+=l.a*n;if(l.c<0)i+=l.c*n;if(l.b<0)s+=l.b*a;if(l.d<0)s+=l.d*a;if(f)f+=r.angle;else f=r.angle}break}this.rotateAngle=f}this.transformed=t}const{parent:l,translationOffset:o}=this;if(l)i=l.refitX(i),s=l.refitY(s),n=l.refitSize(n),a=l.refitSize(a);if(o)i+=o.x,s+=o.y;this.setBaseValue("x",i),this.setBaseValue("y",s),this.setBaseValue("width",n),this.setBaseValue("height",a)}set x(e){super.x=e}get x(){const e=super.x;if(0===e){const e=this.imageElement;if(e)return e.x.baseVal.value}return e}set y(e){super.y=e}get y(){const e=super.y;if(0===e){const e=this.imageElement;if(e)return e.y.baseVal.value}return e}set width(e){super.width=e}get width(){const e=super.width;if(0===e){const e=this.imageElement;if(e)return e.width.baseVal.value}return e}set height(e){super.height=e}get height(){const e=super.height;if(0===e){const e=this.imageElement;if(e)return e.height.baseVal.value}return e}get href(){const e=this.imageElement||this.element;if(x.image(e))return Vs(e.href.baseVal);else return""}get transforms(){let e=super.transforms;if(!this.__get_transforms){const t=this.imageElement;if(t)e=e.concat(this.getTransforms(t)),this._transforms=e;this.__get_transforms=true}return e}get animations(){let e=super.animations;if(!this.__get_animations){const t=this.imageElement;if(t)e=e.concat(this.getAnimations(t)),this._animations=e;this.__get_animations=true}return e}get instanceType(){return 4100}}const Ps=squared.lib,{getNamedItem:Ms}=Ps.dom,{equal:Ns,lessEqual:Fs,multipleOf:Cs,offsetAngleX:Gs,offsetAngleY:Os,relativeAngle:Ls,truncateFraction:Bs}=Ps.math,{cloneArray:Is,convertInt:Xs,convertFloat:$s}=Ps.util;function zs(e,t,i,s){const n=e[0],a=e[e.length-1];if(void 0!==i)switch(t){case"x":i-=n.start.x;break;case"x1":case"cx":return n.start.x=i,void(n.coordinates[0]=i);case"x2":return a.end.x=i,void(a.coordinates[0]=i)}if(void 0!==s)switch(t){case"y":s-=n.start.y;break;case"y1":case"cy":return n.start.y=s,void(n.coordinates[1]=s);case"y2":return a.end.y=s,void(a.coordinates[1]=s)}e.forEach(e=>{const{coordinates:t,value:n}=e,a=t.length;for(let r=0,l=0;r<a;r+=2,++l){if(void 0!==i){if(!e.relative)t[r]+=i;n[l].x+=i}if(void 0!==s){if(!e.relative)t[l+1]+=s;n[l].y+=s}}})}function Ds(e,t,i){const s=e.length;let n=0;while(n<s){const s=e[n++];if("A"===s.key.toUpperCase()){if(void 0!==t){const i=t-s.radiusX;if(s.radiusX=t,s.coordinates[0]=2*t*(s.coordinates[0]<0?-1:1),1===n)e[0].coordinates[0]-=i,e[0].end.x-=i}if(void 0!==i)s.radiusY=i}}}function Ws(e,t,i,s=false){const n=e.get("stroke-dashoffset",i,s);return n?parseFloat(n):t}function Ys(e,t,i,s=false){const n=e.get("stroke-dasharray",i,s);return n?ne.parseCoordinates(n):t}const qs=e=>e?e.start+" "+e.end:"1 1";class js extends(As(le(ns))){constructor(e){super(e),this.element=e,this.name="",this.value="",this.baseValue="",this.init()}static extrapolate(e,t,i,s,n,a){const r=null==n?void 0:n.parent,l=!!(s||(null==r?void 0:r.requireRefit)),o=[];let f;const c=i.length;for(let h=0;h<c;++h){if("d"===e)o[h]=i[h];else if("points"===e){const e=ne.convertPoints(ne.parseCoordinates(i[h]));if(e.length)o[h]=n&&x.polygon(n.element)?ne.drawPolygon(e,a):ne.drawPolyline(e,a)}else if(t){if(!f)f=ne.getPathCommands(t);const s=parseFloat(i[h]);if(!isNaN(s)){const t=h<c-1?Is(f,[],true):f;switch(e){case"x":case"x1":case"x2":case"cx":zs(t,e,s);break;case"y":case"y1":case"y2":case"cy":zs(t,e,void 0,s);break;case"r":Ds(t,s,s);break;case"rx":Ds(t,s);break;case"ry":Ds(t,void 0,s);break;case"width":[1,2].forEach(e=>{const i=t[e];switch(i.key){case"m":case"l":case"h":i.coordinates[0]=s*(i.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":i.coordinates[0]=t[0].end.x+s;break}});break;case"height":[2,3].forEach(e=>{const i=t[e];switch(i.key){case"m":case"l":case"v":i.coordinates[1]=s*(i.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":i.coordinates[1]=t[0].end.y+s;break}});break;default:o[h]="";continue}o[h]=ne.drawPath(t,a)}}if(o[h]){if(l)o[h]=ne.transformRefit(o[h],s,n,r,a)}else o[h]=""}return o}build(e){var t;let i;if(null==e?void 0:e.transforms)i=ne.filterTransforms(e.transforms,null===(t=e.exclude)||void 0===t?void 0:t[this.element.tagName]);this.draw(i,e)}draw(e,t){let i,s;if(t)({residual:i,precision:s}=t);const n=this.element,a=this.parent,r=this.patternParent,l=true===(null==a?void 0:a.requireRefit),o=2===(null==r?void 0:r.patternContentUnits);let f;if(this.transformed=void 0,x.path(n)){if(f=this.getBaseValue("d"),(null==e?void 0:e.length)||l||o){const t=ne.getPathCommands(f);if(t.length){let c=ne.getPathPoints(t);if(c.length){if(o)r.patternRefitPoints(c);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)c=ne.applyTransforms(e,c,A.origin(this.element)),this.transformed=e}if(this.baseValue=ne.drawPath(ne.syncPathPoints(l?Is(t,[],true):t,l?Is(c,[],true):c,!!this.transformed),s),l)a.refitPoints(c),f=ne.drawPath(ne.syncPathPoints(t,c,!!this.transformed),s);else f=this.baseValue}}}if(""===this.baseValue)this.baseValue=f}else if(x.line(n)){let t=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(o)r.patternRefitPoints(t);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)t=ne.applyTransforms(e,t,A.origin(this.element)),this.transformed=e}const c=()=>ne.drawPolyline(t,s);if(this.baseValue=c(),l)a.refitPoints(t),f=c();else f=this.baseValue}else if(x.circle(n)||x.ellipse(n)){const t=this.getBaseValue("cx"),c=this.getBaseValue("cy");let h,u;if(x.ellipse(n))h=this.getBaseValue("rx"),u=this.getBaseValue("ry");else h=this.getBaseValue("r"),u=h;let d=[{x:t,y:c,rx:h,ry:u}];if(o)r.patternRefitPoints(d);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e,h,u);if(e.length)d=ne.applyTransforms(e,d,A.origin(this.element)),this.transformed=e}const p=d[0],g=()=>ne.drawEllipse(p.x,p.y,p.rx,p.ry,s);if(this.baseValue=g(),l)a.refitPoints(d),f=g();else f=this.baseValue}else if(x.rect(n)){let t=this.getBaseValue("x"),c=this.getBaseValue("y"),h=this.getBaseValue("width"),u=this.getBaseValue("height");if(l||(null==e?void 0:e.length)){let d=[{x:t,y:c},{x:t+h,y:c},{x:t+h,y:c+u},{x:t,y:c+u}];if(o)r.patternRefitPoints(d);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)d=ne.applyTransforms(e,d,A.origin(this.element)),this.transformed=e}if(this.baseValue=ne.drawPolygon(d,s),l)a.refitPoints(d),f=ne.drawPolygon(d,s);else f=this.baseValue}else{if(o)t=r.patternRefitX(t),c=r.patternRefitY(c),h=r.patternRefitX(h),u=r.patternRefitY(u);f=ne.drawRect(h,u,t,c,s),this.baseValue=f}}else if(x.polygon(n)||x.polyline(n)){let t=this.getBaseValue("points");if(o)r.patternRefitPoints(t);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)t=ne.applyTransforms(e,t,A.origin(this.element)),this.transformed=e}const c=()=>x.polygon(n)?ne.drawPolygon(t,s):ne.drawPolyline(t,s);if(this.baseValue=c(),l){if(null===this.transformed)t=ne.clonePoints(t);a.refitPoints(t),f=c()}else f=this.baseValue}else f="";return this.value=f,this.setPaint([f],s),f}extendLength(e,t){if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":{const i=ne.getPathCommands(this.value),s=i.length;if(s){const n=i[0],a=n.start,r=i[s-1],l=r.end,o=r.key.toUpperCase(),{leading:f,trailing:c}=e;let h=false;if("Z"!==o&&(a.x!==l.x||a.y!==l.y)){if(f>0){let e;if(n.value.length>1)e=n.value[1];else if(s>1)e=i[1].start;if(e){const t=n.coordinates;if(e.x===a.x)t[1]+=a.y>e.y?f:-f,h=true;else if(e.y===a.y)t[0]+=a.x>e.x?f:-f,h=true;else{const i=Ls(e,a);t[0]-=Gs(i,f),t[1]-=Os(i,f),h=true}}}switch(o){case"M":case"L":if(c>0){let e;if(1===s){const t=n.value;if(t.length>1)e=t[t.length-2]}else{const t=r.value;if(t.length>1)e=t[t.length-2];else e=i[i.length-2].end}if(e){const t=r.coordinates;if(e.x===l.x)t[1]+=l.y>e.y?c:-c,h=true;else if(e.y===l.y)t[0]+=l.x>e.x?c:-c,h=true;else{const i=Ls(e,l);t[0]+=Gs(i,c),t[1]+=Os(i,c),h=true}}}break;case"H":case"V":{const e=r.coordinates,t="H"===o?0:1;e[t]+=(f+c)*(e[t]>=0?1:-1),h=true;break}}}if(h)return e.leading=f,e.trailing=c,e.path=ne.drawPath(i,t),e;break}}}}flattenStrokeDash(e,t,i,s,n){if(!s)s=i;let a,r,l,o,f=0;const c=e=>r[e%a];if(n)({dashArray:r,dashArrayTotal:l,extendedLength:o,startIndex:f}=n),a=r.length,n.items=[],n.leading=0;else{a=e.length,r=e.slice(0);const h=Cs([2,a]);l=0;let u=0;while(u<h){const t=e[u%a];if(l+=t,u++>=a)r.push(t)}if(a=h,t>0){let e=c(0);while(t-e>=0)t-=e,e=c(++f);f%=a}else if(t<0){r.reverse();while(t<0)t+=c(f++);f=a-f%a,r.reverse()}o=s,n={dashArray:r,dashArrayTotal:l,items:[],leading:0,trailing:0,startIndex:f,extendedLength:o,lengthRatio:i/(s||i)}}let h,u=0;for(let e=0,i=0;;e+=i,++f){let s,a;if(i=c(f),e<t)n.leading=t-e,s=0,a=i-n.leading;else s=e-t,a=i;const r=Bs(s/o);if(h=Bs(r+a/o),f%2==0){if(r<1)n.items.push({start:r,end:Math.min(h,1),length:i}),u+=i}else u+=i;if(h>=1)break}n.trailing=Bs((h-1)*o);while(u%l!=0){const e=c(++f);n.trailing+=e,u+=e}if(0===n.items.length)n.items.push({start:1,end:1});else n.leadingOffset=Bs(n.items[0].start*o),n.leading*=n.lengthRatio,n.trailing*=n.lengthRatio;return n}extractStrokeDash(e,t){const i=Xs(this.strokeWidth);let s,n="",a="";if(i>0){let r=ne.parseCoordinates(this.strokeDasharray);if(r.length){const l=this.totalLength,o=this.pathLength||l,f=[];let c,h=Xs(this.strokeDashoffset),u=0;const d=(e,t,i,s=0)=>{const n=this.flattenStrokeDash(e,t,l,o);if(0===f.length)c=n;return u=Math.max(u,n.items.length),f.push({items:n.items,delay:i,duration:s}),n.items};if(s=d(r,h,0),e){const p=e.slice(0).sort((e,t)=>{if(e.attributeName.startsWith("stroke-dash")&&t.attributeName.startsWith("stroke-dash"))if(e.delay!==t.delay)return e.delay<t.delay?-1:1;else if(ne.asSet(e)&&ne.asAnimate(t)||!e.animationElement&&t.animationElement)return-1;else if(ne.asAnimate(e)&&ne.asSet(t)||e.animationElement&&!t.animationElement)return 1;return 0}),g=new Qe(p,"stroke-dasharray","stroke-dashoffset");if(p.length>1)for(let e=0;e<p.length;++e){const t=p[e];if(!g.has(t.attributeName,t.delay,t))p.splice(e--,1)}let m=e=>{let t=h;const i=p.length;let s=e;while(s<i){const e=p[s++];if("stroke-dasharray"===e.attributeName){const i=g.get("stroke-dashoffset",e.delay);if(i)t=parseFloat(i);for(const i of ne.asAnimate(e)?g.evaluateStart(e):[e.to])u=Math.max(u,this.flattenStrokeDash(ne.parseCoordinates(i),t,l,o).items.length);(ne.asAnimate(e)?g.evaluateStart(e):[e.to]).forEach(e=>u=Math.max(u,this.flattenStrokeDash(ne.parseCoordinates(e),t,l,o).items.length))}}},y=[],v=false;for(let e=0;e<p.length;++e){const S=p[e];if(S.setterType){const e=(e,t)=>{d(e,t,S.delay,S.fillReplace&&S.duration>0?S.duration:0),v=true};switch(S.attributeName){case"stroke-dasharray":r=ne.parseCoordinates(S.to),e(r,Ws(g,h,S.delay));continue;case"stroke-dashoffset":h=Xs(S.to),e(Ys(g,r,S.delay),h);continue}}else if(ne.asAnimate(S)&&S.playable)switch(g.evaluateStart(S),S.attributeName){case"stroke-dasharray":{if(m)m(e),m=void 0;const t=Ws(g,h,S.delay),i=this.flattenStrokeDash(Ys(g,r,S.delay),t,l,o).items,s=[],n=[];let a=0;while(a<u){const e=new De(this.element);e.id=a,e.baseValue=qs(i[a]),e.attributeName="stroke-dasharray",e.delay=S.delay,e.duration=S.duration,e.iterationCount=S.iterationCount,e.fillMode=S.fillMode,n[a++]=[],s.push(e)}S.values.forEach(e=>{const i=this.flattenStrokeDash(ne.parseCoordinates(e),t,l,o).items;let s=0;while(s<u)n[s].push(qs(i[s++]))});const{keyTimes:f,keySplines:c}=S,d=S.timingFunction;a=0;while(a<u){const e=s[a];if(e.values=n[a++],e.keyTimes=f,c)e.keySplines=c;else if(d)e.timingFunction=d}if(S.fillReplace){const e=S.getTotalDuration(),t=this.flattenStrokeDash(Ys(g,r,e),Ws(g,h,e),l,o).items;a=0;while(a<u)s[a].replaceValue=qs(t[a++])}y=y.concat(s),v=true;continue}case"stroke-dashoffset":{const e=S.duration,r=parseFloat(S.values[0]),d=[],p=[];let m=0,y=0;if(h!==r&&0===S.delay&&!S.fillReplace)c=this.flattenStrokeDash(c.dashArray,r,l,o),s=c.items,f[0].items=s,u=Math.max(u,c.items.length),h=r;let b,k=l,T=1;if(c.leading>0||c.trailing>0)if(this.extendLength(c,t),c.path){const e=ne.getBoxRect([this.value]);if(k=Bs(G(c.path)),T=k/l,c.extendedLength=this.pathLength,c.extendedLength>0)c.extendedLength*=T;else c.extendedLength=k;s=this.flattenStrokeDash(c.dashArray,0,l,o,c).items,f[0].items=s,u=Math.max(u,s.length);const t=Math.ceil(i/2);n=c.path,a=ne.drawRect(e.right-e.left,e.bottom-e.top+2*t,e.left,e.top-t)}if(S.fillReplace&&-1!==S.iterationCount){const e=$s(g.get(S.attributeName,S.getTotalDuration()));if(e!==h){let t=Math.abs(e-h)%k/k;if(e>h)t=1-t;b=t.toString()}}const w=S.keyTimes,x=S.values,R=w.length;let A=-1;while(++A<R){const t=0===A?h:parseFloat(x[A-1]),i=parseFloat(x[A]),s=Math.abs(i-t),n=w[A];if(0===s){if(A>0){m=n,p.push(m);const e=d.length;if(e)d.push(d[e-1]),y=parseFloat(d[e-1]);else d.push("0"),y=0}continue}const a=i>t,r=A>0?(n-w[A-1])*e:0,l=s*c.lengthRatio;let o=l/k,f=l,u=0;const g=t=>t/l*r/e,v=()=>{if(!(A>0&&d[d.length-1]===(a?"1":"0")))p.push(0===m?0:Bs(m)),d.push(a?"1":"0")},S=(e,t=false)=>{if(u=(f-e)/k,t){const e=Bs(u);if(a){if(e>0)u=1-u}else if(0===e)u=1}},b=()=>{m=n,p.push(m);const e=Bs(u);d.push(e.toString()),y=e>0&&e<1?u:0};if(0===A){if(f%=k,S(0),a)u=1-u;b()}else{if(y>0){const e=a?y:1-y,t=Bs(e*k);if(Fs(f,t)){if(S(0),a)u=y-u;else u+=y;b();continue}else d.push(a?"0":"1"),m+=g(t),p.push(Bs(m)),o=Bs(o-e),f=Bs(f-t)}if(Ns(f,k))f=k;if(f>k){o=Math.floor(o);const e=o*k;if(e===f)--o;S(e,true)}else o=0,S(0,true);while(o>0)v(),d.push(a?"0":"1"),m+=g(k),p.push(Bs(m)),--o;v(),b()}}S.baseValue="0",S.replaceValue=b,S.values=d,S.keyTimes=p;const E=S.timingFunction;if(E)S.keySplines=void 0,S.timingFunction=E;v=true;break}}y.push(S)}if(v){const t=f.length;let i=0;while(i<t){const{delay:e,duration:n,items:a}=f[i++];if(a===s){let e=a.length-1;while(++e<u)a.push({start:1,end:1})}else{const i=t>2?this.flattenStrokeDash(Ys(g,r,e-1),Ws(g,h,e-1),l,o).items:s;let f=0;while(f<u){const t=new we(this.element);t.id=f,t.attributeName="stroke-dasharray",t.baseValue=qs(i[f]),t.delay=e,t.duration=n,t.fillFreeze=0===n,t.to=qs(a[f++]),y.push(t)}}}e=y}}}}return[e,s,n,a]}init(){const e=this.element;if(x.path(e))this.setBaseValue("d");else if(x.line(e))this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2");else if(x.rect(e))this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height");else if(x.circle(e))this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r");else if(x.ellipse(e))this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry");else if(x.polygon(e)||x.polyline(e))this.setBaseValue("points",ne.clonePoints(e.points))}get transforms(){let e=this._transforms;if(void 0===e)e=ne.filterTransforms(A.parse(this.element)||ne.convertTransforms(this.element.transform.baseVal)),this._transforms=e;return e}get pathLength(){return $s(Ms(this.element,"pathLength"))}get totalLength(){return this.element.getTotalLength()}get instanceType(){return 1028}}class Us extends(Gi(Hi)){constructor(e,t){super(e),this.element=e,this.patternElement=t}build(e){super.build(Object.assign(Object.assign({},e),{patternElement:this.patternElement,initialize:false}))}get animations(){return[]}get instanceType(){return 130}}class Ks extends(Jt(Gi(ns))){constructor(e,t=true){if(super(e),this.element=e,t)this.setPath()}setPath(){this.path=new js(this.element)}build(e){const t=this.path;if(t)t.parent=this.parent,t.build(Object.assign(Object.assign({},e),{transforms:this.transforms}))}synchronize(e){if(this.animations.length){const t=this.path;if(t){const i=null==e?void 0:e.element;if(i)this.animateSequentially(this.getAnimateShape(i),void 0,t,e);else this.animateSequentially(this.getAnimateShape(this.element),this.getAnimateTransform(e),t,e)}}}set path(e){if(this._path=e,e)e.name=this.name}get path(){return this._path}get instanceType(){return 2052}}const Hs=squared.lib,{isPercent:Zs}=Hs.css,{getNamedItem:Qs}=Hs.dom,Js=e=>Zs(e)?parseFloat(e)/100:parseFloat(e);class en extends(As(le(Gi(Hi)))){constructor(e,t){super(e),this.element=e,this.patternElement=t,this.__get_transforms=false,this.patternUnits="userSpaceOnUse"===Qs(this.patternElement,"patternUnits")?1:2,this.patternContentUnits="objectBoundingBox"===Qs(this.patternElement,"patternContentUnits")?2:1}build(e){const t=(null==e?void 0:e.element)||this.element,i=new js(t);i.build(Object.assign({},e));const s=i.value;if(s){const n=null==e?void 0:e.precision;if(this.clipRegion=s,i.clipPath)this.clipRegion=i.clipPath;const a=[s];this.setPaint(a,n),this.drawRegion=ne.getBoxRect(a);const{drawRegion:r,fillOpacity:l,patternWidth:o,patternHeight:f,tileWidth:c,tileHeight:h}=this,u=2===this.patternUnits;let d=this.offsetX%c,p=this.offsetY%h,g=0,m=0,y=r.right,v=r.bottom;if(u)g=r.left,m=r.top,y-=g,v-=m;if(0!==d)d=c-d,y+=c;if(0!==p)p=h-p,v+=h;let S=0;while(v>0){const i=this.patternElement,s=2===this.patternContentUnits,a=m+S++*h-p;let r=y,u=0;do{const p=g+u++*c-d,m=new Us(t,i);m.build(Object.assign({},e)),m.cascade(t=>{if(ne.isShape(t)){t.setPath();const i=t.path;if(i){if(i.patternParent=this,s)i.refitBaseValue(p/o,a/f,n);else i.refitBaseValue(p,a,n);i.build(Object.assign(Object.assign({},e),{transforms:t.transforms})),i.fillOpacity=(parseFloat(i.fillOpacity)*parseFloat(l)).toString(),i.clipPath=ne.drawRect(c,h,p,a,n)+(""!==i.clipPath?";"+i.clipPath:"")}}return false}),this.append(m),r-=c}while(r>0);v-=h}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){i.fill="",i.fillOpacity="0",i.stroke=this.stroke,i.strokeWidth=this.strokeWidth;const e=new Ks(t,false);e.path=i,this.append(e)}}}patternRefitX(e){return this.drawRegion?e*this.patternWidth:e}patternRefitY(e){return this.drawRegion?e*this.patternHeight:e}patternRefitPoints(e){if(this.drawRegion){const t=this.patternWidth,i=this.patternHeight,s=e.length;let n=0;while(n<s){const s=e[n++];if(s.x*=t,s.y*=i,void 0!==s.rx&&void 0!==s.ry)if(s.rx===s.ry){const e=Math.min(t,i);s.rx*=e,s.ry*=e}else s.rx*=t,s.ry*=i}}return e}get patternWidth(){const e=this.drawRegion;return e?e.right-e.left:0}get patternHeight(){const e=this.drawRegion;return e?e.bottom-e.top:0}get transforms(){if(!this.__get_transforms){const e=this.patternElement,t=ne.convertTransforms(e.patternTransform.baseVal),i=t.length;if(i){const s=A.rotateOrigin(e,"patternTransform"),n=this.patternWidth/2,a=this.patternHeight/2;let r=0;while(r<i){const e=t[r++];switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(s.length){const t=s.shift();if(t.angle===e.angle){e.origin={x:n+t.x,y:a+t.y};break}}if(e.origin)break;default:e.origin={x:n,y:a};break}}this._transforms=super.transforms.concat(ne.filterTransforms(t))}this.__get_transforms=true}return super.transforms}get offsetX(){const e=this.patternElement.x.baseVal;if(2===this.patternUnits)return this.patternWidth*Js(e.valueAsString);else return e.value}get offsetY(){const e=this.patternElement.y.baseVal;if(2===this.patternUnits)return this.patternHeight*Js(e.valueAsString);else return e.value}get tileWidth(){const e=this.patternElement.width.baseVal;if(2===this.patternUnits)return this.patternWidth*Js(e.valueAsString);else return e.value}get tileHeight(){const e=this.patternElement.height.baseVal;if(2===this.patternUnits)return this.patternHeight*Js(e.valueAsString);else return e.value}get instanceType(){return 258}}class tn extends(As(Ii(le(Ks)))){constructor(e,t,i=true){if(super(e,false),this.element=e,this.shapeElement=t,this._retainStyle=false,this.__get_transforms=false,this.__get_animations=false,i)this.setPath()}setPath(){const e=new js(this.shapeElement);e.useParent=this,this.path=e}build(e){super.build(e);const t=this.path;this.setPaint(t&&[t.value],null==e?void 0:e.precision)}synchronize(e){if(e=Object.assign(Object.assign({},e),{element:this.shapeElement}),this.animations.length)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}get transforms(){let e=super.transforms;if(!this.__get_transforms)e=e.concat(this.getTransforms(this.shapeElement)),this._transforms=e,this.__get_transforms=true;return e}get animations(){let e=super.animations;if(!this.__get_animations)e=e.concat(this.getAnimations(this.shapeElement)),this._animations=e,this.__get_animations=true;return e}get instanceType(){return 10244}}class sn extends(Jt(Ii(en))){constructor(e,t,i){super(e,i),this.element=e,this.shapeElement=t}build(e){super.build(Object.assign(Object.assign({},e),{element:this.shapeElement}))}synchronize(e){const t=this.animations.filter(e=>"x"===e.attributeName||"y"===e.attributeName||void 0===this.verifyBaseValue(e.attributeName,0)),i=this.getAnimateTransform(e);if(t.length||i.length)this.animateSequentially(this.getAnimateViewRect(t),i,void 0,e);super.synchronize(e)}get instanceType(){return 514}}class nn extends(As(Jt(Ii(le(Gi(Hi)))))){constructor(e,t){super(e),this.element=e,this.symbolElement=t}build(e){this.setRect(),super.build(Object.assign(Object.assign({},e),{symbolElement:this.symbolElement}));const t=this.getBaseValue("x",0),i=this.getBaseValue("y",0);if(0!==t||0!==i){const e={x:t,y:i};this.cascade(t=>{if(ne.asImage(t))t.translationOffset=e;return false})}this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}synchronize(e){if(this.animations.length)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}get viewBox(){return this.symbolElement.viewBox.baseVal||E(this.element)}get instanceType(){return 66}}const an={constant:Ae,util:O};e.Svg=ss,e.SvgAnimate=De,e.SvgAnimateMotion=hi,e.SvgAnimateTransform=je,e.SvgAnimation=we,e.SvgAnimationIntervalMap=Qe,e.SvgBaseVal=le,e.SvgBuild=ne,e.SvgContainer=Hi,e.SvgElement=ns,e.SvgG=Es,e.SvgImage=_s,e.SvgPaint=As,e.SvgPath=js,e.SvgPattern=Us,e.SvgShape=Ks,e.SvgShapePattern=en,e.SvgSynchronize=Jt,e.SvgUse=tn,e.SvgUsePattern=sn,e.SvgUseSymbol=nn,e.SvgView=Gi,e.SvgViewRect=Ii,e.lib=an,Object.defineProperty(e,"__esModule",{value:true})}));
