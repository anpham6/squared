!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){this.wrapped=e}function i(e){var t,i;function r(t,i){try{var s=e[t](i),o=s.value,l=o instanceof a;Promise.resolve(l?o.wrapped:o).then(function(e){l?r("next",e):n(s.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){n("throw",e)}}function n(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):i=null}this._invoke=function(e,a){return new Promise(function(n,s){var o={key:e,arg:a,resolve:n,reject:s,next:null};i?i=i.next=o:(t=i=o,r(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function v(e,t,a){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var i=c(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(a):r.value}})(e,t,a||e)}function p(e,t,a,i){return(p="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,a,i){var r,n=c(e,t);if(n){if((r=Object.getOwnPropertyDescriptor(n,t)).set)return r.set.call(i,a),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,t)){if(!r.writable)return!1;r.value=a,Object.defineProperty(i,t,r)}else o(i,t,a);return!0})(e,t,a,i)}function d(e,t,a,i,r){if(!p(e,t,a,i||e)&&r)throw Error("failed to set property");return a}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)};function y(e,t){return m(e)||function(e,t){var a=[],i=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw n}}return a}(e,t)||k()}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e){if(Array.isArray(e))return e}function b(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var S=squared.lib.dom,x=squared.lib.math,A=squared.lib.util,T={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},R="(".concat(A.REGEXP_STRING.DECIMAL,")"),w={MATRIX:"(matrix(?:3d)?)\\(".concat(R,", ").concat(R,", ").concat(R,", ").concat(R,", ").concat(R,", ").concat(R,"(?:, ").concat(R,")?(?:, ").concat(R,")?(?:, ").concat(R,")?(?:, ").concat(R,")?(?:, ").concat(R,")?(?:, ").concat(R,")?(?:, ").concat(R,")?(?:, ").concat(R,")?(?:, ").concat(R,")?(?:, ").concat(R,")?\\)"),ROTATE:"(rotate[XY]?)\\(".concat(A.REGEXP_STRING.DEGREE,"\\)"),SKEW:"(skew[XY]?)\\(".concat(A.REGEXP_STRING.DEGREE,"(?:, ").concat(A.REGEXP_STRING.DEGREE,")?\\)"),SCALE:"(scale[XY]?)\\(".concat(R,"(?:, ").concat(R,")?\\)"),TRANSLATE:"(translate[XY]?)\\(".concat(A.REGEXP_STRING.LENGTH,"(?:, ").concat(A.REGEXP_STRING.LENGTH,")?\\)")},_={applyX:function(e,t,a){return e.a*t+e.c*a+e.e},applyY:function(e,t,a){return e.b*t+e.d*a+e.f},clone:function(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}},rotate:function(e){var t=x.convertRadian(e),a=Math.cos(t),i=Math.sin(t);return{a:a,b:i,c:-1*i,d:a,e:0,f:0}},skew:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{a:1,b:Math.tan(x.convertRadian(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)),c:Math.tan(x.convertRadian(e)),d:1,e:0,f:0}},scale:function(){return{a:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b:0,c:0,d:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e:0,f:0}},translate:function(){return{a:1,b:0,c:0,d:1,e:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},V={create:function(e,t){return{type:e,matrix:t,angle:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,method:{x:!(arguments.length>3&&void 0!==arguments[3])||arguments[3],y:!(arguments.length>4&&void 0!==arguments[4])||arguments[4]}}},parse:function(e,t){var a=void 0===t?S.cssInline(e,"transform"):t;if(""!==a){var i=[];for(var r in w)for(var n=RegExp(w[r],"g"),s=null;null!==(s=n.exec(a));){var o=s[1].endsWith("X"),l=s[1].endsWith("Y");if(s[1].startsWith("rotate")){var u=A.convertAngle(s[2],s[3]),f=_.rotate(u);o?(f.a=1,f.b=0,f.c=0):l&&(f.b=0,f.c=0,f.d=1),i[s.index]=V.create(SVGTransform.SVG_TRANSFORM_ROTATE,f,u,!o,!l)}else if(s[1].startsWith("skew")){var h=l?0:A.convertAngle(s[2],s[3]),c=l?A.convertAngle(s[2],s[3]):s[4]&&s[5]?A.convertAngle(s[4],s[5]):0,v=_.skew(h,c);o?i[s.index]=V.create(SVGTransform.SVG_TRANSFORM_SKEWX,v,h,!0,!1):l?i[s.index]=V.create(SVGTransform.SVG_TRANSFORM_SKEWY,v,c,!1,!0):(i[s.index]=V.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign({},v,{b:0}),h,!0,!1),0!==c&&(i[s.index+1]=V.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign({},v,{c:0}),c,!1,!0)))}else if(s[1].startsWith("scale")){var p=l?void 0:parseFloat(s[2]),d=_.scale(p,o?void 0:l?parseFloat(s[2]):!o&&s[3]?parseFloat(s[3]):p);i[s.index]=V.create(SVGTransform.SVG_TRANSFORM_SCALE,d,0,!l,!o)}else if(s[1].startsWith("translate")){var y=S.getFontSize(e),g=parseFloat(A.convertPX(s[2],y)),m=!o&&s[3]?parseFloat(A.convertPX(s[3],y)):0,b=_.translate(l?0:g,l?g:m);i[s.index]=V.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,b,0)}else if(s[1].startsWith("matrix")){var k=V.matrix(e,t);k&&(i[s.index]=V.create(SVGTransform.SVG_TRANSFORM_MATRIX,k))}}var x=[];return i.forEach(function(e){e.fromCSS=!0,x.push(e)}),x}},matrix:function(e,t){var a=RegExp(w.MATRIX).exec(t||S.getStyle(e,!0).transform||"");if(a)switch(a[1]){case"matrix":return{a:parseFloat(a[2]),b:parseFloat(a[3]),c:parseFloat(a[4]),d:parseFloat(a[5]),e:parseFloat(a[6]),f:parseFloat(a[7])};case"matrix3d":return{a:parseFloat(a[2]),b:parseFloat(a[3]),c:parseFloat(a[6]),d:parseFloat(a[7]),e:parseFloat(a[14]),f:parseFloat(a[15])}}},origin:function(e,t){void 0===t&&(t=S.cssAttribute(e,"transform-origin"));var a={x:null,y:null};if(""!==t){var i,r,n=function(t){if(null===a[t])for(var n=0;n<u.length;n++){var s=u[n];if(""!==s&&("center"===s&&(s="50%"),A.isUnit(s)?a[t]=parseInt(s.endsWith("px")?s:A.convertPX(s,S.getFontSize(e))):A.isPercent(s)&&(a[t]=("x"===t?i:r)*(parseInt(s)/100)),null!==a[t])){u[n]="";break}}},s=P(e);if(s)i=s.width,r=s.height;else{var o=e.parentElement;o instanceof SVGGraphicsElement&&o.viewportElement&&(E.svg(o.viewportElement)||E.symbol(o.viewportElement))&&(i=o.viewportElement.viewBox.baseVal.width,r=o.viewportElement.viewBox.baseVal.height)}if(!i||!r){var l=e.getBoundingClientRect();i||(i=l.width),r||(r=l.height)}var u=t.split(" ");1===u.length&&u.push("center"),(u=u.slice(0,2)).includes("left")?a.x=0:u.includes("right")&&(a.x=i),u.includes("top")?a.y=0:u.includes("bottom")&&(a.y=r),n("x"),n("y")}return a.x=a.x||0,a.y=a.y||0,a},rotateOrigin:function(e){var t=S.getNamedItem(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transform"),a=[];if(""!==t)for(var i,r=/rotate\((-?[\d.]+)(?:,? (-?[\d.]+))?(?:,? (-?[\d.]+))?\)/g;null!==(i=r.exec(t));){var n=parseFloat(i[1]);0!==n&&a.push({angle:n,x:i[2]?parseFloat(i[2]):0,y:i[3]?parseFloat(i[3]):0})}return a},typeAsName:function(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate"}return""},typeAsValue:function(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0"}return""}},E={svg:function(e){return"svg"===e.tagName},g:function(e){return"g"===e.tagName},symbol:function(e){return"symbol"===e.tagName},path:function(e){return"path"===e.tagName},shape:function(e){return void 0!==T[e.tagName]},image:function(e){return"image"===e.tagName},use:function(e){return"use"===e.tagName},line:function(e){return"line"===e.tagName},rect:function(e){return"rect"===e.tagName},circle:function(e){return"circle"===e.tagName},ellipse:function(e){return"ellipse"===e.tagName},polygon:function(e){return"polygon"===e.tagName},polyline:function(e){return"polyline"===e.tagName},clipPath:function(e){return"clipPath"===e.tagName},pattern:function(e){return"pattern"===e.tagName},linearGradient:function(e){return"linearGradient"===e.tagName},radialGradient:function(e){return"radialGradient"===e.tagName}};function N(e){var t=/url\("?(#.+?)"?\)/.exec(e);return t?t[1]:""}function M(e,t){var a=S.getNamedItem(e,"href");if("#"===a.charAt(0)){var i,r=a.substring(1);if(void 0===t)for(i=e.parentElement;i&&i.parentElement instanceof SVGGraphicsElement;)i=i.parentElement;else i=t;if(i){for(var n=i.querySelectorAll("*"),s=0;s<n.length;s++)if(n[s].id===r&&n[s]instanceof SVGElement)return n[s]}else{var o=document.getElementById(r);if(o instanceof SVGElement)return o}}return null}function P(e){for(var t=e.parentElement;t;){if((E.svg(t)||E.symbol(t))&&t.viewBox&&t.viewBox.baseVal.width>0&&t.viewBox.baseVal.height>0)return t.viewBox.baseVal;t=t.parentElement}}function G(e){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t.getTotalLength()}var F=Object.freeze({MATRIX:_,TRANSFORM:V,SVG:E,getAttributeUrl:N,getTargetElement:M,getNearestViewBox:P,getPathLength:G}),O=squared.lib.dom,B=squared.lib.math,C=squared.lib.util,L=new Map,I=function(){function e(){r(this,e)}return s(e,null,[{key:"isContainer",value:function(e){return C.hasBit(e.instanceType,2)}},{key:"isElement",value:function(e){return C.hasBit(e.instanceType,4)}},{key:"isShape",value:function(e){return C.hasBit(e.instanceType,2052)}},{key:"isAnimate",value:function(e){return C.hasBit(e.instanceType,16392)}},{key:"asSvg",value:function(e){return 18===e.instanceType}},{key:"asG",value:function(e){return 34===e.instanceType}},{key:"asPattern",value:function(e){return 130===e.instanceType}},{key:"asShapePattern",value:function(e){return 258===e.instanceType}},{key:"asUsePattern",value:function(e){return 514===e.instanceType}},{key:"asImage",value:function(e){return 4100===e.instanceType}},{key:"asUse",value:function(e){return 10244===e.instanceType}},{key:"asUseSymbol",value:function(e){return 66===e.instanceType}},{key:"asSet",value:function(e){return 8===e.instanceType}},{key:"asAnimate",value:function(e){return 16392===e.instanceType}},{key:"asAnimateTransform",value:function(e){return 81928===e.instanceType}},{key:"asAnimateMotion",value:function(e){return 49160===e.instanceType}},{key:"setName",value:function(e){if(e){var t,a="";if(C.isString(e.id)){var i=C.convertWord(e.id,!0);L.has(i)||(a=i),t=i}else t=e.tagName;var r=L.get(t)||0;return""!==a?(L.set(a,r),a):(L.set(t,++r),"".concat(t,"_").concat(r))}return L.clear(),""}},{key:"drawLine",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,n="M".concat(e,",").concat(t," L").concat(a,",").concat(i);return r?B.truncateString(n,r):n}},{key:"drawRect",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,n="M".concat(a,",").concat(i," ").concat(a+e,",").concat(i," ").concat(a+e,",").concat(i+t," ").concat(a,",").concat(i+t," Z");return r?B.truncateString(n,r):n}},{key:"drawCircle",value:function(t,a,i,r){return e.drawEllipse(t,a,i,i,r)}},{key:"drawEllipse",value:function(e,t,a,i,r){void 0===i&&(i=a);var n="M".concat(e-a,",").concat(t," a").concat(a,",").concat(i,",0,0,1,").concat(2*a,",0 a").concat(a,",").concat(i,",0,0,1,-").concat(2*a,",0");return r?B.truncateString(n,r):n}},{key:"drawPolygon",value:function(t,a){return t.length?"".concat(e.drawPolyline(t,a)," Z"):""}},{key:"drawPolyline",value:function(e,t){for(var a="M",i=Array.isArray(n=e),r=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var o=s;a+="".concat(o.x,",").concat(o.y," ")}return a=a.substring(0,a.length-1),t?B.truncateString(a,t):a}},{key:"drawPath",value:function(e,t){for(var a="",i=Array.isArray(n=e),r=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var o=s;switch(a+=(""!==a?" ":"")+o.name,o.name.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":a+=o.coordinates.join(",");break;case"H":a+=o.coordinates[0];break;case"V":a+=o.coordinates[1];break;case"A":a+="".concat(o.radiusX,",").concat(o.radiusY,",").concat(o.xAxisRotation,",").concat(o.largeArcFlag,",").concat(o.sweepFlag,",").concat(o.coordinates.join(","))}}return t?B.truncateString(a,t):a}},{key:"drawRefit",value:function(t,a,i){var r;if(E.path(t)){if(r=O.getNamedItem(t,"d"),a&&a.requireRefit()){var n=e.getPathCommands(r);if(n.length){var s=e.extractPathPoints(n);s.length&&(a.refitPoints(s),r=e.drawPath(e.rebindPathPoints(n,s),i))}}}else if(E.line(t)){var o=[{x:t.x1.baseVal.value,y:t.y1.baseVal.value},{x:t.x2.baseVal.value,y:t.y2.baseVal.value}];a&&a.requireRefit()&&a.refitPoints(o),r=e.drawPolyline(o,i)}else if(E.circle(t)||E.ellipse(t)){var l,u;E.ellipse(t)?(l=t.rx.baseVal.value,u=t.ry.baseVal.value):u=l=t.r.baseVal.value;var f=[{x:t.cx.baseVal.value,y:t.cy.baseVal.value,rx:l,ry:u}];a&&a.requireRefit()&&a.refitPoints(f);var h=f[0];r=e.drawEllipse(h.x,h.y,h.rx,h.ry,i)}else if(E.rect(t)){var c=t.x.baseVal.value,v=t.y.baseVal.value,p=t.width.baseVal.value,d=t.height.baseVal.value;a&&a.requireRefit()&&(c=a.refitX(c),v=a.refitY(v),p=a.refitSize(p),d=a.refitSize(d)),r=e.drawRect(p,d,c,v,i)}else if(E.polygon(t)||E.polyline(t)){var y=e.clonePoints(t.points);a&&a.requireRefit()&&a.refitPoints(y),r=E.polygon(t)?e.drawPolygon(y,i):e.drawPolyline(y,i)}else r="";return r}},{key:"getPathCommands",value:function(t){var a,i=[],r=/([A-Za-z])([^A-Za-z]+)?/g;for(t=t.trim();null!==(a=r.exec(t))&&(0!==i.length||"M"===a[1].toUpperCase());){var n=e.parseCoordinates((a[2]||"").trim()),s=void 0,o=void 0;if(i.length){var l=i[i.length-1];s=l.name.toUpperCase(),o=l.end}var u=void 0,f=void 0,h=void 0,c=void 0,v=void 0;switch(a[1].toUpperCase()){case"M":0===i.length&&(a[1]="M");case"L":if(n.length>=2){n.length%2!=0&&n.length--;break}continue;case"H":if(o&&n.length){n[1]="h"===a[1]?0:o.y,n.length=2;break}continue;case"V":if(o&&n.length){var p=n[0];n[0]="v"===a[1]?0:o.x,n[1]=p,n.length=2;break}continue;case"Z":if(i.length){n[0]=i[0].coordinates[0],n[1]=i[0].coordinates[1],n.length=2,a[1]="Z";break}continue;case"C":if(n.length>=6){n.length=6;break}continue;case"S":if(n.length>=4&&("C"===s||"S"===s)){n.length=4;break}continue;case"Q":if(n.length>=4){n.length=4;break}continue;case"T":if(n.length>=2&&("Q"===s||"T"===s)){n.length=2;break}continue;case"A":if(n.length>=7){var d=y(n.splice(0,5),5);u=d[0],f=d[1],h=d[2],c=d[3],v=d[4],n.length=2;break}continue;default:continue}if(n.length>=2){for(var g=a[1]===a[1].toLowerCase(),m=[],b=0;b<n.length;b+=2){var k=n[b],S=n[b+1];g&&o&&(k+=o.x,S+=o.y),m.push({x:k,y:S})}i.push({name:a[1],value:m,start:m[0],end:m[m.length-1],relative:g,coordinates:n,radiusX:u,radiusY:f,xAxisRotation:h,largeArcFlag:c,sweepFlag:v})}}return i}},{key:"extractPathPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[],i=0,r=0,n=0;n<e.length;n++){for(var s=e[n],o=0;o<s.coordinates.length;o+=2){s.relative?(i+=s.coordinates[o],r+=s.coordinates[o+1]):(i=s.coordinates[o],r=s.coordinates[o+1]);var l={x:i,y:r};"A"===s.name.toUpperCase()&&(l.rx=s.radiusX,l.ry=s.radiusY,t&&(s.coordinates[o]>=0?l.y-=s.radiusY:l.y+=s.radiusY)),a.push(l)}s.relative&&(s.name=s.name.toUpperCase())}return a}},{key:"rebindPathPoints",value:function(e,t){var a;e:for(var i=Array.isArray(n=e),r=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var o=s;if(o.relative){if(!a)break;for(var l=0,u=0;l<o.coordinates.length;l+=2,u++){var f=t.shift();if(!f){e=[];break e}o.coordinates[l]=o.value[u].x-a.x,o.coordinates[l+1]=o.value[u].y-a.y,"a"===o.name&&void 0!==f.rx&&void 0!==f.ry&&(o.radiusX=f.rx,o.radiusY=f.ry),o.value[u]=f}o.name=o.name.toLowerCase(),a=o.end}else{switch(o.name.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":for(var h=0,c=0;h<o.coordinates.length;h+=2,c++){var v=t.shift();if(!v){e=[];break e}o.coordinates[h]=v.x,o.coordinates[h+1]=v.y,o.value[c]=v}break;case"A":var p=t.shift();if(!p||void 0===p.rx||void 0===p.ry){e=[];break e}o.coordinates[0]=p.x,o.coordinates[1]=p.y,o.radiusX=p.rx,o.radiusY=p.ry,o.value[0]=p}o.relative||(a=o.end)}}return e}},{key:"filterTransforms",value:function(e,t){for(var a=[],i=Array.isArray(n=e),r=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var o=s;if(void 0===t||!t.includes(o.type)){switch(o.type){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===o.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(1===o.matrix.a&&1===o.matrix.d)continue;break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(0===o.matrix.e&&0===o.matrix.f)continue}a.push(o)}}return a}},{key:"applyTransforms",value:function(t,a,i){t=t.slice(0).reverse();for(var r=e.clonePoints(a),n=Array.isArray(o=t),s=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var u=l,f=u.matrix,h=0,c=0,v=0,p=0;if(i)switch(u.type){case SVGTransform.SVG_TRANSFORM_SCALE:u.method.x&&(v=i.x*(1-f.a)),u.method.y&&(p=i.y*(1-f.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:u.method.y&&(c-=i.y);break;case SVGTransform.SVG_TRANSFORM_SKEWY:u.method.x&&(h-=i.x);break;case SVGTransform.SVG_TRANSFORM_ROTATE:u.method.x&&(h-=i.x,v=i.x+B.distanceFromY(i.x,u.angle)),u.method.y&&(c-=i.y,p=i.y+B.distanceFromY(i.y,u.angle))}for(var d=Array.isArray(g=r),y=0,g=d?g:g[Symbol.iterator]();;){var m;if(d){if(y>=g.length)break;m=g[y++]}else{if((y=g.next()).done)break;m=y.value}var b=m,k=b.x;if(b.x=_.applyX(f,k,b.y+c)+v,b.y=_.applyY(f,k+h,b.y)+p,u.type===SVGTransform.SVG_TRANSFORM_SCALE&&void 0!==b.rx&&void 0!==b.ry){var S=b.rx;b.rx=_.applyX(f,S,b.ry+c),b.ry=_.applyY(f,S+h,b.ry)}}}return r}},{key:"convertTransforms",value:function(e){for(var t=[],a=0;a<e.numberOfItems;a++){var i=e.getItem(a);t.push(V.create(i.type,i.matrix,i.angle))}return t}},{key:"clonePoints",value:function(e){var t=[];if(Array.isArray(e))for(var a=Array.isArray(r=e),i=0,r=a?r:r[Symbol.iterator]();;){var n;if(a){if(i>=r.length)break;n=r[i++]}else{if((i=r.next()).done)break;n=i.value}var s=n,o={x:s.x,y:s.y};void 0!==s.rx&&void 0!==s.ry&&(o.rx=s.rx,o.ry=s.ry),t.push(o)}else for(var l=0;l<e.numberOfItems;l++){var u=e.getItem(l);t.push({x:u.x,y:u.y})}return t}},{key:"minMaxPoints",value:function(e){for(var t=e[0].x,a=e[0].x,i=e[0].y,r=e[0].y,n=1;n<e.length;n++){var s=e[n];s.x<t?t=s.x:s.x>a&&(a=s.x),s.y<i?i=s.y:s.y>r&&(r=s.y)}return[t,i,a,r]}},{key:"centerPoints",value:function(e){var t=this.minMaxPoints(e);return{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}}},{key:"convertPoints",value:function(e){var t=[];if(e.length%2==0)for(var a=0;a<e.length;a+=2)t.push({x:e[a],y:e[a+1]});return t}},{key:"parsePoints",value:function(e){var t=[],a=e.trim().split(/\s+/),i=Array.isArray(a),r=0;for(a=i?a:a[Symbol.iterator]();;){var n;if(i){if(r>=a.length)break;n=a[r++]}else{if((r=a.next()).done)break;n=r.value}var s=y(C.replaceMap(n.split(","),function(e){return parseFloat(e)}),2);t.push({x:s[0],y:s[1]})}return t}},{key:"parseCoordinates",value:function(e){for(var t,a=[],i=/-?[\d.]+/g;null!==(t=i.exec(e));){var r=parseFloat(t[0]);isNaN(r)||a.push(r)}return a}},{key:"parseBoxRect",value:function(t){for(var a=[],i=Array.isArray(n=t),r=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}a.push.apply(a,g(e.extractPathPoints(e.getPathCommands(s),!0)))}var o=this.minMaxPoints(a);return{top:o[1],right:o[2],bottom:o[3],left:o[0]}}}]),e}(),X=squared.lib.dom;function q(e,t,a,i,r){for(var n=Array.isArray(o=e),s=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var u=l;u.x+=t,u.y+=a,void 0!==u.rx&&void 0!==u.ry&&(u.rx*=i,u.ry*=r)}}var z=function(e){return function(t){function a(){var e;return r(this,a),(e=h(this,u(a).apply(this,arguments)))._baseVal={},e}return l(a,e),s(a,[{key:"setBaseValue",value:function(e,t){if(void 0!==t){if(this.verifyBaseValue(e,t))return this._baseVal[e]=t,!0}else switch(e){case"d":return this._baseVal[e]=X.cssAttribute(this.element,"d"),!0;case"points":var a=this.element[e];if(Array.isArray(a))return this._baseVal[e]=I.clonePoints(a),!0;break;default:var i=this.element[e];if(i&&i.baseVal)return this._baseVal[e]=i.baseVal.value,!0}return!1}},{key:"getBaseValue",value:function(e,t){return void 0!==this._baseVal[e]||this.setBaseValue(e)?this._baseVal[e]:t}},{key:"refitBaseValue",value:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;for(var n in this._baseVal){var s=this._baseVal[n];if("string"==typeof s){if("d"===n){var o=I.getPathCommands(s),l=I.extractPathPoints(o);q(l,e,t,i,r),this._baseVal[n]=I.drawPath(I.rebindPathPoints(o,l),a)}}else if("number"==typeof s)switch(n){case"cx":case"x1":case"x2":case"x":this._baseVal[n]+=e;break;case"cy":case"y1":case"y2":case"y":this._baseVal[n]+=t;break;case"r":this._baseVal[n]*=Math.min(i,r);break;case"rx":case"width":this._baseVal[n]*=i;break;case"ry":case"height":this._baseVal[n]*=r}else Array.isArray(s)&&"points"===n&&q(s,e,t,i,r)}}},{key:"verifyBaseValue",value:function(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}}]),a}()},D=squared.lib.dom,j=squared.lib.util,W=function(){function e(t,a){if(r(this,e),this.element=null,this.animationElement=null,this.paused=!1,this.fillMode=0,this.synchronizeState=0,this._attributeName="",this._duration=-1,this._delay=0,this._to="",t&&(this.element=t),a){this.animationElement=a,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");var i=D.getNamedItem(a,"dur");""!==i&&"indefinite"!==i&&(this.duration=e.convertClockTime(i))}}return s(e,[{key:"setAttribute",value:function(e,t){var a=D.getNamedItem(this.animationElement,e);""!==a&&(void 0!==t?this[e+j.capitalize(t)]=a===t:this[e]=a)}},{key:"addState",value:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var i=0;i<t.length;i++){var r=t[i];j.hasBit(this.synchronizeState,r)||(this.synchronizeState|=r)}}},{key:"removeState",value:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var i=0;i<t.length;i++){var r=t[i];j.hasBit(this.synchronizeState,r)&&(this.synchronizeState^=r)}}},{key:"hasState",value:function(){for(var e=this,t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];return a.some(function(t){return j.hasBit(e.synchronizeState,t)})}},{key:"setFillMode",value:function(e,t){var a=j.hasBit(this.fillMode,t);e?a||(this.fillMode|=t):a&&(this.fillMode^=t)}},{key:"attributeName",set:function(e){if("transform"!==e&&!this.baseValue){var t=this.animationElement&&this.animationElement.parentElement||this.element;t&&(this.baseValue=j.optionalAsString(t,"".concat(e,".baseVal.valueAsString"))||D.cssInheritAttribute(t,e),j.isUnit(this.baseValue)&&(this.baseValue=""+parseFloat(j.convertPX(this.baseValue,D.getFontSize(t)))))}this._attributeName=e},get:function(){return this._attributeName}},{key:"delay",set:function(e){this._delay=e},get:function(){return this._delay}},{key:"duration",set:function(e){this._duration=Math.round(e)},get:function(){return this._duration}},{key:"to",set:function(e){this._to=e},get:function(){return this._to}},{key:"fillBackwards",set:function(e){this.setFillMode(e,8)},get:function(){return j.hasBit(this.fillMode,8)}},{key:"fillForwards",set:function(e){this.setFillMode(e,4)},get:function(){return j.hasBit(this.fillMode,4)}},{key:"fillFreeze",set:function(e){this.setFillMode(e,2)},get:function(){return j.hasBit(this.fillMode,2)}},{key:"fillReplace",get:function(){return 0===this.fillMode||8===this.fillMode}},{key:"group",set:function(e){this._group=e},get:function(){return this._group||{id:-1/0,name:""}}},{key:"setterType",set:function(e){},get:function(){return!0}},{key:"instanceType",get:function(){return 8}}],[{key:"convertClockTime",value:function(e){var t=0,a=0;if(j.isNumber(e))t=parseInt(e);else if(/-?\d+ms$/.test(e))a=parseFloat(e);else if(/-?\d+s$/.test(e))t=parseFloat(e);else if(/-?\d+min$/.test(e))t=60*parseFloat(e);else if(/-?\d+(.\d+)?h$/.test(e))t=60*parseFloat(e)*60;else{var i=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/.exec(e);i&&(i[2]&&(t+=60*parseInt(i[2])*60),i[3]&&(t+=60*parseInt(i[3])),i[4]&&(t+=parseInt(i[4])),i[5]&&(a=parseInt(i[5])*(i[5].length<3?Math.pow(10,3-i[5].length):1)),i[1]&&(t*=-1,a*=-1))}return 1e3*t+a}}]),e}(),Y={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"},U=Object.freeze({KEYSPLINE_NAME:Y}),H=squared.lib.color,K=squared.lib.dom,Z=squared.lib.util;function $(e){return parseFloat((1-e).toPrecision(5))}var Q=function(e){function t(e,a){var i;if(r(this,t),(i=h(this,u(t).call(this,e,a))).type=0,i.from="",i.alternate=!1,i.additiveSum=!1,i.accumulateSum=!1,i.evaluateStart=!1,i._iterationCount=1,i._reverse=!1,i._setterType=!1,i._repeatDuration=-1,a){var n=K.getNamedItem(a,"values"),s=-1!==i.duration?t.toFractionList(K.getNamedItem(a,"keyTimes")):[];if(""!==n)i.values=Z.flatMap(n.split(";"),function(e){return e.trim()}),i.length>1&&s.length===i.length?(i.from=i.values[0],i.to=i.values[i.length-1],i.keyTimes=s):1===i.length&&(i.to=i.values[0],i.convertToValues());else{if(i.from=K.getNamedItem(a,"from"),""===i.to){var o=K.getNamedItem(a,"by");Z.isNumber(o)&&(""===i.from&&(i.baseValue&&(i.from=i.baseValue),i.evaluateStart=!0),Z.isNumber(i.from)&&(i.to=""+(parseFloat(i.from)+parseFloat(o))))}Z.isNumber(i.to)&&i.setAttribute("additive","sum"),i.convertToValues(s)}var l=K.getNamedItem(a,"repeatDur");""!==l&&"indefinite"!==l&&(i._repeatDuration=W.convertClockTime(l));var f=K.getNamedItem(a,"repeatCount");i.iterationCount="indefinite"===f?-1:parseFloat(f),"animate"===a.tagName&&i.setCalcMode(i.attributeName)}return i}return l(t,W),s(t,[{key:"setCalcMode",value:function(e){switch(K.getNamedItem(this.animationElement,"calcMode")){case"discrete":if(2===this.keyTimes.length&&0===this.keyTimes[0]){for(var a=[],i=[],r=0;r<this.keyTimes.length-1;r++){var n=t.convertStepTimingFunction(e,"step-end",this.keyTimes,this.values,r,K.getFontSize(this.animationElement));n&&(a.push.apply(a,g(n[0])),i.push.apply(i,g(n[1])))}a.push(this.keyTimes.pop()),i.push(this.values.pop()),this.values=i,this.keyTimes=a,this._keySplines=[Y["step-end"]]}break;case"spline":this.keySplines=Z.flatMap(K.getNamedItem(this.animationElement,"keySplines").split(";"),function(e){return e.trim()});case"linear":if(0!==this.keyTimes[0]&&1!==this.keyTimes[this.keyTimes.length-1]){for(var s=[],o=this.values.length,l=0;l<o;l++)s.push(l/(o-1));this._keyTimes=s,this._keySplines=void 0}}}},{key:"convertToValues",value:function(e){""!==this.to&&(this.values=[this.from,this.to],this.keyTimes=e&&2===e.length&&0===this.keyTimes[0]&&this.keyTimes[1]<=1?e:[0,1],""===this.from&&(this.evaluateStart=!0))}},{key:"setGroupOrdering",value:function(e){if(this.group.ordering=e,this.fillBackwards)for(var t=e.length-1,a=!1;t>=0;t--)if(a){if("backwards"===e[t].fillMode||"both"===e[t].fillMode){this.fillBackwards=!1;break}}else e[t].name===this.group.name&&(a=!0)}},{key:"getPartialDuration",value:function(e){return(0===e?this.delay:0)+this.keyTimes[this.keyTimes.length-1]*this.duration}},{key:"getTotalDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&-1===this.iterationCount?1:this.iterationCount;return-1!==e?Math.min(this.delay+this.duration*e,this.end||1/0):1/0}},{key:"delay",set:function(e){d(u(t.prototype),"delay",e,this,!0);var a=K.getNamedItem(this.animationElement,"end");if(""!==a){var i=Z.sortNumber(Z.replaceMap(a.split(";"),function(e){return W.convertClockTime(e)}))[0];void 0!==i&&(-1===this.iterationCount||this.duration>0&&i<this.duration*this.iterationCount)&&(this.delay>i?(this.end=i,-1===this.iterationCount&&(this.iterationCount=Math.ceil((this.end-this.delay)/this.duration))):this.duration=-1)}},get:function(){return v(u(t.prototype),"delay",this)}},{key:"duration",set:function(e){d(u(t.prototype),"duration",e,this,!0)},get:function(){var e=v(u(t.prototype),"duration",this);return-1===e&&-1!==this._repeatDuration?this._repeatDuration:e}},{key:"iterationCount",set:function(e){this._iterationCount=isNaN(e)?1:e,this.fillFreeze=-1!==this.iterationCount&&"freeze"===K.getNamedItem(this.animationElement,"fill"),1!==this.iterationCount?this.setAttribute("accumulate","sum"):this.accumulateSum=!1},get:function(){return this.duration>0?-1!==this._repeatDuration&&(-1===this._iterationCount||this._repeatDuration<this._iterationCount*this.duration)?this._repeatDuration/this.duration:this._iterationCount:1}},{key:"to",set:function(e){d(u(t.prototype),"to",e,this,!0)},get:function(){return this._setterType?this.valueTo||v(u(t.prototype),"to",this):this.setterType?this.values[0]:v(u(t.prototype),"to",this)}},{key:"values",set:function(e){this._values=e,this._keyTimes&&this._keyTimes.length!==e.length&&(this._keyTimes=void 0,this._keySplines=void 0)},get:function(){return void 0===this._values&&(this._values=[]),this._values}},{key:"valueTo",get:function(){return this._values?this._values[this._values.length-1]:""}},{key:"valueFrom",get:function(){return this.values[0]||""}},{key:"keyTimes",set:function(e){!e.every(function(e){return e>=0&&e<=1})||void 0!==this._values&&this._values.length!==e.length||(this._keyTimes=e)},get:function(){return void 0===this._keyTimes&&(this._keyTimes=[]),this._keyTimes}},{key:"keySplines",set:function(e){if(e&&e.length){var t=this.keyTimes.length-1;if(e.length>=t&&!e.every(function(e){return""===e||e===Y.linear})){for(var a=[],i=0;i<t;i++){var r=Z.replaceMap(e[i].split(" "),function(e){return parseFloat(e)});4===r.length&&!r.some(function(e){return isNaN(e)})&&r[0]>=0&&r[0]<=1&&r[2]>=0&&r[2]<=1?a.push(r.join(" ")):a.push(Y.linear)}this._keySplines=a}}else this._keySplines=void 0},get:function(){return this._keySplines}},{key:"timingFunction",set:function(e){this._timingFunction=e},get:function(){return this._timingFunction||this.keySplines&&this.keySplines[0]}},{key:"reverse",set:function(e){if(e!==this._reverse&&this.length){this.values.reverse();for(var t=[],a=Array.isArray(r=this.keyTimes),i=0,r=a?r:r[Symbol.iterator]();;){var n;if(a){if(i>=r.length)break;n=r[i++]}else{if((i=r.next()).done)break;n=i.value}t.push(1-n)}if(t.reverse(),this.keyTimes=t,this._keySplines){for(var s=[],o=this._keySplines.length-1;o>=0;o--){var l=Z.replaceMap(this._keySplines[o].split(" "),function(e){return parseFloat(e)});s.push(4===l.length?"".concat($(l[2])," ").concat($(l[3])," ").concat($(l[0])," ").concat($(l[1])):Y.linear)}this._keySplines=s}this._reverse=e}},get:function(){return this._reverse}},{key:"playable",get:function(){return!this.paused&&this.keyTimes&&this.keyTimes.length>1&&this.duration>0}},{key:"fillReplace",get:function(){return v(u(t.prototype),"fillReplace",this)||-1===this.iterationCount}},{key:"fromToType",get:function(){return 2===this.keyTimes.length&&0===this.keyTimes[0]&&1===this.keyTimes[1]}},{key:"partialType",get:function(){return this.keyTimes.length>1&&this.keyTimes[this.keyTimes.length-1]<1}},{key:"setterType",set:function(e){this._setterType=e},get:function(){return this._setterType||null!==this.animationElement&&0===this.duration&&this.keyTimes.length>=2&&0===this.keyTimes[0]&&""!==this.values[0]}},{key:"length",get:function(){return this._values?this._values.length:0}},{key:"instanceType",get:function(){return 16392}}],[{key:"getSplitValue",value:function(e,t,a){return e+(t-e)*a}},{key:"convertStepTimingFunction",value:function(e,a,i,r,n,s){var o,l;switch(e){case"fill":case"stroke":var u=H.parseRGBA(r[n]),f=H.parseRGBA(r[n+1]);u&&f&&(o=[u],l=[f]);break;case"points":o=I.convertPoints(I.parseCoordinates(r[n])),l=I.convertPoints(I.parseCoordinates(r[n+1]));break;case"rotate":case"scale":case"translate":o=Z.replaceMap(r[n].trim().split(/\s+/),function(e){return parseFloat(e)}),l=Z.replaceMap(r[n+1].trim().split(/\s+/),function(e){return parseFloat(e)});break;default:Z.isNumber(r[n])?o=[parseFloat(r[n])]:Z.isUnit(r[n])&&(o=[parseFloat(Z.convertPX(r[n],s))]),Z.isNumber(r[n+1])?l=[parseFloat(r[n+1])]:Z.isUnit(r[n+1])&&(l=[parseFloat(Z.convertPX(r[n+1],s))])}if(o&&l&&o.length&&o.length===l.length){switch(a){case"step-start":a="steps(1, start)";break;case"step-end":a="steps(1, end)"}var h=/steps\((\d+)(?:, (start|end))?\)/.exec(a);if(h){for(var c=i[n+1]-i[n],v=parseInt(h[1]),p=100/v,d=[],y=[],g=0;g<=v;g++){var m=i[n]+c*(g/v),b=p*(g+(0===g&&"start"===h[2]?1:0))/100,k=[];switch(e){case"fill":case"stroke":var S=o[0],x=l[0],A=H.convertHex(t.getSplitValue(S.rgba.r,x.rgba.r,b),t.getSplitValue(S.rgba.g,x.rgba.g,b),t.getSplitValue(S.rgba.b,x.rgba.b,b)),T=H.convertHex(t.getSplitValue(S.rgba.a,x.rgba.a,b));k.push("#".concat(A+("FF"!==T?T:"")));break;case"points":for(var R=0;R<o.length;R++){var w=o[R],_=l[R];k.push("".concat(t.getSplitValue(w.x,_.x,b),",").concat(t.getSplitValue(w.y,_.y,b)))}break;default:for(var V=0;V<o.length;V++){k.push(""+t.getSplitValue(o[V],l[V],b))}}if(!k.length)return;d.push(m),y.push(k.join(" "))}return[d,y]}}}},{key:"toFractionList",value:function(e){var t=0,a=Z.flatMap(e.split(arguments.length>1&&void 0!==arguments[1]?arguments[1]:";"),function(e){var a=parseFloat(e);return!isNaN(a)&&a>=t&&a<=1?(t=a,a):-1});return a.length>1&&0===a[0]&&a.some(function(e){return-1!==e})?a:[]}}]),t}(),J=squared.lib.dom,ee=squared.lib.util,te=function(e){function t(e,a){var i;if(r(this,t),i=h(this,u(t).call(this,e,a)),a){var n=J.getNamedItem(a,"type");i.setType(n),i.setCalcMode(n)}return i}return l(t,Q),s(t,null,[{key:"toRotateList",value:function(e){for(var t=[],a=Array.isArray(r=e),i=0,r=a?r:r[Symbol.iterator]();;){var n;if(a){if(i>=r.length)break;n=r[i++]}else{if((i=r.next()).done)break;n=i.value}var s=n;if(""===s)t.push([0,0,0]);else{var o=I.parseCoordinates(s);if(1===o.length&&(o[1]=0,o[2]=0),3!==o.length)return;t.push(o)}}return t}},{key:"toScaleList",value:function(e){for(var t=[],a=Array.isArray(r=e),i=0,r=a?r:r[Symbol.iterator]();;){var n;if(a){if(i>=r.length)break;n=r[i++]}else{if((i=r.next()).done)break;n=i.value}var s=n;if(""===s)t.push([1,1,0,0]);else{var o=I.parseCoordinates(s);if(1===o.length&&(o[1]=o[0]),2===o.length&&(o[2]=0,o[3]=0),4!==o.length)return;t.push(o)}}return t}},{key:"toTranslateList",value:function(e){for(var t=[],a=Array.isArray(r=e),i=0,r=a?r:r[Symbol.iterator]();;){var n;if(a){if(i>=r.length)break;n=r[i++]}else{if((i=r.next()).done)break;n=i.value}var s=n;if(""===s)t.push([0,0]);else{var o=I.parseCoordinates(s);if(1===o.length&&(o[1]=0),2!==o.length)return;t.push(o)}}return t}},{key:"toSkewList",value:function(e){for(var t=[],a=Array.isArray(r=e),i=0,r=a?r:r[Symbol.iterator]();;){var n;if(a){if(i>=r.length)break;n=r[i++]}else{if((i=r.next()).done)break;n=i.value}var s=n;if(""===s)t.push([0]);else{var o=I.parseCoordinates(s);if(1!==o.length)return;t.push(o)}}return t}}]),s(t,[{key:"expandToValues",value:function(){if(this.additiveSum&&-1!==this.iterationCount&&this.keyTimes.length&&this.duration>0){var e=this.duration*this.iterationCount;e:{for(var t,a=[],i=[],r=[],n=0;n<this.iterationCount;n++){n>0&&this.keySplines&&r.push("");for(var s=0;s<this.keyTimes.length;s++){var o=ee.replaceMap(this.values[s].split(" "),function(e){return parseFloat(e)});if(!o.every(function(e){return!isNaN(e)}))break e;var l=void 0;switch(this.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===o.length?l=[o[0],0]:2===o.length&&(l=o);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===o.length?l=[o[0],o[0]]:2===o.length&&(l=o);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===o.length?l=[o[0],0,0]:3===o.length&&(l=o);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===o.length&&(l=o)}if(!l)break e;var u=(this.keyTimes[s]+n)*this.duration;if(t)for(var f=0;f<l.length;f++)l[f]+=t[f];n<this.iterationCount-1&&s===this.keyTimes.length-1&&(this.accumulateSum&&(t=l),u--),a.push(u/e),i.push(l.join(" ")),this.keySplines&&s<this.keyTimes.length-1&&r.push(this.keySplines[s])}}this.keyTimes=a,this.values=i,this.keySplines=r.length?r:void 0,this.duration=e,this.iterationCount=1,this.accumulateSum=!1}}}},{key:"setType",value:function(e){var a;switch(e){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement&&(a=t.toTranslateList(this.values));break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement&&(a=t.toScaleList(this.values));break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement&&(a=t.toRotateList(this.values));break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement&&(a=t.toSkewList(this.values));break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement&&(a=t.toSkewList(this.values));break;default:return}a&&(this.values=ee.replaceMap(a,function(e){return e.join(" ")})),this.baseValue=V.typeAsValue(this.type)}},{key:"instanceType",get:function(){return 81928}}]),t}(),ae=squared.lib.util;var ie=function(){function e(t){for(var a=this,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];r(this,e),t=(n.length?ae.filterArray(t,function(e){return n.includes(e.attributeName)}):t.slice(0)).sort(function(e,t){return e.delay===t.delay?e.group.id<t.group.id?1:-1:e.delay<t.delay?-1:1}),n.length=0;for(var o=Array.isArray(u=t),l=0,u=o?u:u[Symbol.iterator]();;){var f;if(o){if(l>=u.length)break;f=u[l++]}else{if((l=u.next()).done)break;f=l.value}var h=e.getKeyName(f);n.includes(h)||n.push(h)}this.map={};var c={},v={};function p(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9?arguments[9]:void 0;a&&(void 0===c[e][t]&&(c[e][t]=[]),c[e][t].push({time:t,value:a,animation:r,start:n,end:s,duration:i,fillMode:o,infinite:l,valueFrom:u}),v[e].add(t))}for(var d=function(){var e=n[g];a.map[e]=new Map,c[e]={},v[e]=new Set;var i,r=-1!==(i=e).indexOf(":")?i.split(":")[0]:i,s=t.filter(function(e){return e.fillBackwards&&e.attributeName===r}).sort(function(e,t){return e.group.id<t.group.id?1:-1})[0];s&&p(e,0,s.values[0],s.delay,s,0===s.delay,!1,8)},g=0;g<n.length;g++)d();for(var m=Array.isArray(k=t),b=0,k=m?k:k[Symbol.iterator]();;){var S;if(m){if(b>=k.length)break;S=k[b++]}else{if((b=k.next()).done)break;S=b.value}var x=S,A=e.getKeyName(x);if(void 0===c[A][-1]&&x.baseValue&&p(A,-1,x.baseValue),x.setterType){var T=x.fillReplace&&x.duration>0;p(A,x.delay,x.to,T?x.delay+x.duration:0,x,T,!T,2),T&&p(A,x.delay+x.duration,"",0,x,!1,!0,2)}else if(I.isAnimate(x)&&x.duration>0){var R=-1===x.iterationCount,w=x.getTotalDuration();p(A,x.delay,x.valueTo,w,x,!0,!1,0,R,x.valueFrom),R||x.fillReplace||p(A,w,x.valueTo,0,x,!1,!0,x.fillForwards?4:2)}}for(var _ in c){var V=ae.sortNumber(Array.from(v[_])),E=Array.isArray(V),N=0;for(V=E?V:V[Symbol.iterator]();;){var M;if(E){if(N>=V.length)break;M=V[N++]}else{if((N=V.next()).done)break;M=N.value}for(var P=M,G=c[_][P],F=0;F<G.length;F++){var O=G[F];if(""===O.value||O.start&&O.animation&&I.isAnimate(O.animation)&&O.animation.evaluateStart){var B=void 0,C=this.map[_].values(),L=Array.isArray(C),X=0;for(C=L?C:C[Symbol.iterator]();;){var q;if(L){if(X>=C.length)break;q=C[X++]}else{if((X=C.next()).done)break;q=X.value}for(var z=Array.isArray(j=q),D=0,j=z?j:j[Symbol.iterator]();;){var W;if(z){if(D>=j.length)break;W=j[D++]}else{if((D=j.next()).done)break;W=D.value}if(O.animation!==W.animation&&""!==W.value&&(-1===W.time||4===W.fillMode||2===W.fillMode)){B=W.value;break}}}B?O.value=B:""===O.value&&G.splice(F--,1)}}G.length&&(G.sort(function(e,t){return e.animation&&t.animation?e.fillMode===t.fillMode?e.animation.group.id<t.animation.group.id?1:-1:e.fillMode<t.fillMode?1:-1:0}),this.map[_].set(P,G))}}for(var Y in this.map){var U=this.map[Y].entries(),H=Array.isArray(U),K=0;for(U=H?U:U[Symbol.iterator]();;){var Z;if(H){if(K>=U.length)break;Z=U[K++]}else{if((K=U.next()).done)break;Z=K.value}for(var $=y(Z,2),Q=$[0],J=Array.isArray(te=$[1]),ee=0,te=J?te:te[Symbol.iterator]();;){var ie;if(J){if(ee>=te.length)break;ie=te[ee++]}else{if((ee=te.next()).done)break;ie=ee.value}var re=ie;if(re.animation)if(2===re.fillMode){var ne=[],se=this.map[Y].entries(),oe=Array.isArray(se),le=0;for(se=oe?se:se[Symbol.iterator]();;){var ue;if(oe){if(le>=se.length)break;ue=se[le++]}else{if((le=se.next()).done)break;ue=le.value}var fe=y(ue,2),he=fe[1];if((Pe=fe[0])<Q)for(var ce=Array.isArray(pe=he),ve=0,pe=ce?pe:pe[Symbol.iterator]();;){var de;if(ce){if(ve>=pe.length)break;de=pe[ve++]}else{if((ve=pe.next()).done)break;de=ve.value}de.start&&de.animation&&de.animation.animationElement&&ne.push(de.animation)}else if(Pe>Q)for(var ye=0;ye<he.length;ye++){var ge=he[ye];ge.end&&ne.includes(ge.animation)&&he.splice(ye--,1)}else for(var me=0;me<he.length;me++){var be=he[me];be.end&&be.animation&&be.animation.animationElement&&be.animation.group.id<re.animation.group.id&&he.splice(me--,1)}}}else if(4===re.fillMode||re.infinite){var ke=!1;if(re.animation.group.ordering)for(var Se=re.animation.getTotalDuration(),xe=Array.isArray(Te=re.animation.group.ordering),Ae=0,Te=xe?Te:Te[Symbol.iterator]();;){var Re;if(xe){if(Ae>=Te.length)break;Re=Te[Ae++]}else{if((Ae=Te.next()).done)break;Re=Ae.value}if(Re.name===re.animation.group.name)ke=!0;else if(e.getGroupDuration(Re)>=Se)break}var we=[],_e=this.map[Y].entries(),Ve=Array.isArray(_e),Ee=0;for(_e=Ve?_e:_e[Symbol.iterator]();;){var Ne;if(Ve){if(Ee>=_e.length)break;Ne=_e[Ee++]}else{if((Ee=_e.next()).done)break;Ne=Ee.value}var Me=y(Ne,2),Pe=Me[0];he=Me[1];if(!ke&&Pe<Q)for(var Ge=Array.isArray(Oe=he),Fe=0,Oe=Ge?Oe:Oe[Symbol.iterator]();;){var Be;if(Ge){if(Fe>=Oe.length)break;Be=Oe[Fe++]}else{if((Fe=Oe.next()).done)break;Be=Fe.value}Be.start&&Be.animation&&we.push(Be.animation)}else if(Pe>Q)for(var Ce=0;Ce<he.length;Ce++){var Le=he[Ce];(ke||Le.animation&&(Le.end&&we.includes(Le.animation)||null===re.animation.animationElement&&Le.animation.group.id<re.animation.group.id))&&he.splice(Ce--,1)}else for(var Ie=0;Ie<he.length;Ie++){var Xe=he[Ie];Xe.end&&Xe.animation&&Xe.animation.group.id<re.animation.group.id&&he.splice(Ie--,1)}}}}}}for(var qe in this.map)for(var ze=Array.from(this.map[qe].entries()),De=0;De<ze.length;De++){var je=y(ze[De],2);0===je[1].length&&this.map[qe].delete(je[0])}}return s(e,null,[{key:"getGroupDuration",value:function(e){return"infinite"===e.iterationCount?1/0:e.delay+e.duration*parseInt(e.iterationCount)}},{key:"getKeyName",value:function(e){var t=e.attributeName;return I.asAnimateTransform(e)&&(t+=":".concat(V.typeAsName(e.type))),t}}]),s(e,[{key:"has",value:function(e,t,a){return void 0!==t?!(!this.map[e]||!this.map[e].has(t))&&(void 0===a||-1!==this.map[e].get(t).findIndex(function(e){return e.animation===a})):void 0!==this.map[e]}},{key:"get",value:function(e,t){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.map[e]){var r=this.map[e].entries(),n=Array.isArray(r),s=0;for(r=n?r:r[Symbol.iterator]();;){var o;if(n){if(s>=r.length)break;o=r[s++]}else{if((s=r.next()).done)break;o=s.value}var l=y(o,2),u=l[0],f=l[1];if(!(u<=t))break;for(var h=Array.isArray(v=f),c=0,v=h?v:v[Symbol.iterator]();;){var p;if(h){if(c>=v.length)break;p=v[c++]}else{if((c=v.next()).done)break;p=c.value}if(""!==p.value&&(-1===p.time||p.end&&(4===p.fillMode||2===p.fillMode))||i&&p.start&&t!==u){a=p.value;break}}}}return a}},{key:"evaluateStart",value:function(e,t){if(e.evaluateStart){var a=this.get(e.attributeName,e.delay)||t&&""+t||e.baseValue;a&&(e.reverse?e.values[e.values.length-1]=a:e.values[0]=a),e.evaluateStart=!1}return e.values}}]),e}(),re=squared.lib.math,ne=squared.lib.util,se=["x1","y1","x2","y2"],oe=["width","height","x","y"],le=["points"],ue=["cx","cy","r"],fe=["cx","cy","rx","ry"];function he(e,t,a){var i,r,n,s=0,o=e.entries(),l=Array.isArray(o),u=0;for(o=l?o:o[Symbol.iterator]();;){var f;if(l){if(u>=o.length)break;f=o[u++]}else{if((u=o.next()).done)break;f=u.value}var h=y(f,2),c=h[0],v=h[1];if(a===c){r={index:c,value:v};break}if(a>s&&a<c){r={index:s,value:i},n={index:c,value:v};break}s=c,i=v}r&&n?Re(t,a,xe(a,r.index,r.value,n.index,n.value)):r&&Re(t,a,r.value)}function ce(e){for(var t=e[e.length-1][0],a=new Set,i=0;i<e.length;i++){var r=e[i][0]/t;if(r>0)for(var n=7;;n++){var s=parseFloat((""+r).substring(0,n));if(!a.has(s)){r=s;break}}e[i][0]=r,a.add(r)}return e}function ve(e){return"string"==typeof e&&(ne.isNumber(e)?e=parseFloat(e):0===(e=I.parsePoints(e)).length&&(e="")),e}function pe(e){return Array.isArray(e)?ne.objectMap(e,function(e){return"".concat(e.x,",").concat(e.y)}).join(" "):""+e}function de(e,t,a,i){var r,n=[],s=t.element.tagName;switch(s){case"line":r=se;break;case"rect":r=oe;break;case"polyline":case"polygon":r=le;break;case"circle":r=ue;break;case"ellipse":r=fe;break;default:return}for(var o=V.origin(t.element),l=0;l<e.length;l++){for(var u=e[l][0],f=e[l][1],h=[],c=Array.isArray(p=r),v=0,p=c?p:p[Symbol.iterator]();;){var d;if(c){if(v>=p.length)break;d=p[v++]}else{if((v=p.next()).done)break;d=v.value}var y=d,g=f.get(y);if(void 0===g&&(g=t.getBaseValue(y)),void 0===g)return;h.push(g)}var m=void 0;switch(s){case"line":m=ye(h);break;case"rect":m=ge(h);break;case"polygon":case"polyline":m=h[0];break;case"circle":case"ellipse":m=me(h)}if(m){var b=void 0;switch(t.transformed&&(m=I.applyTransforms(t.transformed,m,o)),a&&a.refitPoints(m),s){case"line":case"polyline":b=I.drawPolyline(m,i);break;case"rect":case"polygon":b=I.drawPolygon(m,i);break;case"circle":case"ellipse":var k=m[0];b=I.drawEllipse(k.x,k.y,k.rx,k.ry,i)}void 0!==b&&n.push({index:u,value:b})}}return n}function ye(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}function ge(e){var t=e[0],a=e[1],i=e[2],r=e[3];return[{x:i,y:r},{x:i+t,y:r},{x:i+t,y:r+a},{x:i,y:r+a}]}function me(e){return[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}]}function be(e,t,a){for(var i=new Map,r=Array.isArray(s=t),n=0,s=r?s:s[Symbol.iterator]();;){var o;if(r){if(n>=s.length)break;o=s[n++]}else{if((n=s.next()).done)break;o=n.value}var l=o,u=new Map;for(var f in a||e){var h=void 0;e[f]?void 0===(h=e[f].get(l))&&(h=Me(e[f],l)):a&&(h=a[f].value),void 0!==h&&u.set(f,h)}i.set(l,u)}return i}function ke(e,t,a,i,r){return Math.round(e+(a[r]+i)*t)}function Se(e,t,a,i,r){switch(e.alternate&&a%2!=0&&(t=t.slice(0).reverse()),e.attributeName){case"transform":if(e.additiveSum&&"string"==typeof r){var n=ne.replaceMap(r.split(/\s+/),function(e){return parseFloat(e)}),s=ne.objectMap(t,function(e){return ne.replaceMap(e.trim().split(/\s+/),function(e){return parseFloat(e)})});if(s.every(function(e){return n.length===e.length})){var o=s[i];e.accumulateSum||(a=0);for(var l=0;l<n.length;l++)o[l]+=n[l];for(var u=0;u<a;u++)for(var f=0;f<s.length;f++)for(var h=0;h<s[f].length;h++)o[h]+=s[f][h];return o.join(" ")}}return t[i];case"points":return I.parsePoints(t[i]);default:var c=parseFloat(t[i]);if(isNaN(c))return r||0;if(e.additiveSum&&"number"==typeof r){c+=r,e.accumulateSum||(a=0);for(var v=0;v<a;v++)for(var p=0;p<t.length;p++)c+=parseFloat(t[p])}return c}}function xe(e,t,a,i,r){if(e>t){if("number"==typeof a&&"number"==typeof r)return Q.getSplitValue(a,r,(e-t)/(i-t));if("string"==typeof a&&"string"==typeof r){var n=ne.replaceMap(a.split(" "),function(e){return parseFloat(e)}),s=ne.replaceMap(r.split(" "),function(e){return parseFloat(e)});if(n.length===s.length){for(var o=[],l=0;l<n.length;l++)o.push(xe(e,t,n[l],i,s[l]));return o.join(" ")}}else if(Array.isArray(a)&&Array.isArray(r)){for(var u=[],f=0;f<Math.min(a.length,r.length);f++)u.push({x:xe(e,t,a[f].x,i,r[f].x),y:xe(e,t,a[f].y,i,r[f].y)});return u}}return a}function Ae(e,t,a,i,r,n,s,o,l,u,f,h){var c;n<0?(c=o-n,n=0):c=o,c=function(e){(e+1)%10==0?e++:(e-1)%10==0&&e--;return e}(c);for(var v,p=Math.max(0,Math.min((c-(n+e.duration*s))/e.duration,1)),d=-1,y=-1,g=0;g<a.length;g++){if(-1!==d&&p<=a[g]){y=g;break}p>=a[g]&&(d=g)}return we(e,o=Re(u,o,v=-1!==d&&-1!==y?xe(p,a[d],Se(e,i,s,d,t),a[y],Se(e,i,s,y,t)):Se(e,i,s,y=-1!==d?d+1:a.length-1,t)),r,y,l,f,h),[o,v]}function Te(e,a,i,r,n,s,o){for(var l=a.keyTimes.slice(0),u=a.keySplines?a.keySplines.slice(0):Array(n.length-1).fill(""),f=i+a.duration,h=i+a.getPartialDuration(),c=function(i){var c=o[i];if(c!==a){var p=c.getTotalDuration();if(p>h){var d=function(){var d=Math.min(f,p),y=_e(e,a,s);e:for(var g=function(e,i){for(var r=function(t){var r=ke(c.delay,c.duration,c.keyTimes,e,t);if(r>=h){var o=function(o){var f;if(r===o)f=pe(Se(c,y,e,t,s));else for(var v=(r-o)/c.duration,p=1;p<c.keyTimes.length;p++)if(v>=c.keyTimes[p-1]&&v<=c.keyTimes[p]){f=pe(xe(v,c.keyTimes[p-1],Se(c,y,e,p-1,s),c.keyTimes[p],Se(c,y,e,p,s)));break}var g=o===d?1:o%a.duration/a.duration;0===g&&t>0&&(g=1),void 0===f||g===l[l.length-1]&&f===n[n.length-1]||(o===h?g+=1/a.duration:h=o,l.push(g),n.push(f),u&&u.push(i&&c.keySplines&&c.keySplines[t]?c.keySplines[t]:""))};if(!i&&r>=h&&(o(h),i=!0,r===h))return"continue";if(i){if(o(Math.min(r,d)),r>=d||1===l[l.length-1])return b=i,{v:"break|substituteEnd"};h=r}}},o=0;o<c.keyTimes.length;o++){var f=r(o);switch(f){case"continue":continue;default:if("object"===t(f))return f.v}}b=i},m=Fe(h,c.delay,c.duration),b=!1;;m++){if("break|substituteEnd"===g(m,b))break e}if(p===d&&p<=r&&(c.addState(16),o.splice(i--,1)),d===f)return v=i,{v:"break"}}();if("object"===t(d))return d.v}else r!==1/0&&p<r&&o.splice(i--,1)}v=i},v=0;v<o.length;v++){if("break"===c(v))break}return[l,n,u]}function Re(e,t,a){if(""!==a){var i=e.get(t),r=!1;if(void 0===i&&(i=e.get(t-1),r=!0),i!==a){if("number"==typeof a&&Math.round(i)===Math.round(a))return t;for(;t>0&&e.has(t);)t++;e.set(t,a)}else r&&!e.has(t)&&(e.delete(t-1),e.set(t,a))}return t}function we(e,t,a,i,r,n,s){if(!Ve(I.asAnimateTransform(e),r)){if(0===i)return;i--}var o=a&&a[i];o&&n.set(t,o),s&&function(e,t,a,i){I.asAnimateTransform(t)&&t.transformOrigin&&t.transformOrigin[i]&&e.set(a,t.transformOrigin[i])}(s,e,t,i)}function _e(e,t,a){if(t.evaluateStart){var i=t.reverse?t.length-1:0;e.get(ie.getKeyName(t),t.delay)||t.values[i]||!t.additiveSum&&t.baseValue||(t.values[i]=pe(a)),t.by&&ne.isNumber(t.values[i])&&(t.values[i]=""+(parseFloat(t.values[i])+t.by)),t.evaluateStart=!1}return t.values}function Ve(e,t){return ne.hasBit(t,e?32:4)}function Ee(e,t){return ne.hasBit(t,e?16:2)}function Ne(e){return e.playable||e.animationElement&&-1!==e.duration}function Me(e,t){var a,i=0,r=e.entries(),n=Array.isArray(r),s=0;for(r=n?r:r[Symbol.iterator]();;){var o;if(n){if(s>=r.length)break;o=r[s++]}else{if((s=r.next()).done)break;o=s.value}var l=y(o,2),u=l[0],f=l[1];if(t===u)return f;if(t>i&&t<u)return a;i=u,a=f}return a}function Pe(e){return[e.keyTimes.slice(0),e.values.slice(0),e.keySplines?e.keySplines.slice(0):void 0]}function Ge(e,t,a,i){e[e.length-1]<1&&(e.push(1),t.push(i?pe(i):t[0]),a&&a.push(""))}function Fe(e,t,a){return Math.floor(Math.max(0,e-t)/a)}var Oe=function(e){return function(a){function i(){return r(this,i),h(this,u(i).apply(this,arguments))}return l(i,e),s(i,[{key:"getAnimateShape",value:function(e,t){void 0===t&&(t=this.animations);for(var a=[],i=Array.isArray(n=t),r=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var o=s;if(Ne(o))switch(o.attributeName){case"r":case"cx":case"cy":if(E.circle(e)){a.push(o);break}case"rx":case"ry":E.ellipse(e)&&a.push(o);break;case"x1":case"x2":case"y1":case"y2":E.line(e)&&a.push(o);break;case"points":(E.polyline(e)||E.polygon(e))&&a.push(o);break;case"x":case"y":case"width":case"height":E.rect(e)&&a.push(o)}}return a}},{key:"getAnimateViewRect",value:function(e){void 0===e&&(e=this.animations);for(var t=[],a=Array.isArray(r=e),i=0,r=a?r:r[Symbol.iterator]();;){var n;if(a){if(i>=r.length)break;n=r[i++]}else{if((i=r.next()).done)break;n=i.value}var s=n;if(Ne(s))switch(s.attributeName){case"x":case"y":t.push(s)}}return t}},{key:"getAnimateTransform",value:function(e){return void 0===e&&(e=this.animations),ne.filterArray(e,function(e){return I.asAnimateTransform(e)&&e.duration>0})}},{key:"animateSequentially",value:function(e,a,i,r){var n,s=this,o=18;r&&(r.keyTimeMode&&(o=r.keyTimeMode),n=r.precision),[e,a].forEach(function(e){var r=e===a;if(!(!e||0===e.length||!r&&ne.hasBit(o,8)||r&&ne.hasBit(o,64))){for(var l=[],u={},f=new Set,h=0,c=[],v=0;v<e.length;v++){var p=e[v];if(p.setterType)T(p);else for(var d=p.getTotalDuration(),g=0;g<e.length;g++){var m=e[g];if(v!==g&&p.attributeName===m.attributeName&&p.group.id<m.group.id&&p.fillReplace&&!m.partialType)if(m.setterType){if(p.delay===m.delay){c[v]=p;break}}else{var b=m.getTotalDuration();if(p.delay===m.delay&&(!m.fillReplace||d<=b||-1===m.iterationCount)||m.fillBackwards&&p.delay<=m.delay&&(m.fillForwards||p.fillReplace&&d<=m.delay)||p.animationElement&&null===m.animationElement&&(p.delay>=m.delay&&d<=b||m.fillForwards)){c[v]=p;break}}}}for(var k=[],S=0;S<e.length;S++){var x=e[S];c[S]?x.fillReplace?k.push(x):(x.setterType=!0,T(x)):x.setterType||(l.push(x),f.add(x.group.name))}if(s._removeAnimations(k),l.length+h>1||1===l.length&&(l[0].alternate||void 0!==l[0].end)){var A=function(){for(var a=function(e,t,a){e&&(K.set(t,e),void 0!==a&&K.set(a,e))},h=0;h<l.length;h++){var c=l[h];c.group.ordering&&ne.spliceArray(c.group.ordering,function(e){return!f.has(e.name)})}for(var v={},p={},d=0,g=0;g<l.length;g++){var m=l[g],b=m.attributeName;void 0===v[b]&&(v[b]=new Map,p[b]=[]);var k=v[b].get(m.delay)||[];k.push(m),p[b].push(m),v[b].set(m.delay,k)}for(var S in v){var x=new Map,A=ne.sortNumber(Array.from(v[S].keys())),T=Array.isArray(A),R=0;for(A=T?A:A[Symbol.iterator]();;){var w;if(T){if(R>=A.length)break;w=A[R++]}else{if((R=A.next()).done)break;w=R.value}for(var _=w,E=v[S].get(_),N=Array.isArray(P=E),M=0,P=N?P:P[Symbol.iterator]();;){var G;if(N){if(M>=P.length)break;G=P[M++]}else{if((M=P.next()).done)break;G=M.value}d=Math.max(d,G.getTotalDuration(!0))}E.reverse(),x.set(_,E)}v[S]=x,p[S].reverse()}var F,O,B,C=new ie(e),L={},X=new Map,q=r?new Map:void 0,z={},D=new Set,j={},W=new Map,Y=r?new Map:void 0,U={},H={},K=new Map,Z=function(e){L[e]=new Map,r||(U[e]=s._getBaseValue(e,i));var n=u[e]||[],l=[],f=[],h=v[e].entries(),c=Array.isArray(h),g=0;for(h=c?h:h[Symbol.iterator]();;){var m;if(c){if(g>=h.length)break;m=h[g++]}else{if((g=h.next()).done)break;m=g.value}var b=y(m,2),k=b[1];l.push(b[0]),f.push(k)}var S=[],x=-1,A=0,T=void 0,R=void 0,w=void 0,_=void 0;function E(t,i){if(D.add(t),t.addState(16),w=t,t.fillForwards){if(W(A,T,t.type,t),t.group.ordering)for(var n=t.getTotalDuration(),s=Array.isArray(l=t.group.ordering),o=0,l=s?l:l[Symbol.iterator]();;){var u;if(s){if(o>=l.length)break;u=l[o++]}else{if((o=l.next()).done)break;u=o.value}if(u.name===t.group.name)return!0;if(ie.getGroupDuration(u)>=n)return!1}}else{if(t.fillFreeze&&W(A,T,t.type,t),void 0!==i){var f=x,h=P(A,A+1);void 0!==h&&t.fillReplace&&i>A&&0===S.length&&(f=Re(L[e],f,h),r&&a(t.type,f),T=h,x=f)}G()}return!1}function N(t,a,i){return void 0===a&&(a=t.delay),void 0===i&&(i=t.to),Re(L[e],a,r?i:ve(i))}function M(e){e&&n.push(e),n.sort(function(e,t){return e.delay===t.delay?e.group.id<t.group.id?-1:1:e.delay<t.delay?-1:1});for(var t=0;t<n.length-1;t++)n[t].delay===n[t+1].delay&&n.splice(t--,1)}function P(t,a){var i=H[e]&&H[e].value;return ne.spliceArray(n,function(e){return e.delay>=t&&e.delay<a},function(e){e.animationElement&&B(),0===S.length&&(T=e.to),W(e.delay,e.to,e.type,e),e.delay===t?i=r?e.to:ve(e.to):(x=N(e),A=e.delay)}),i}function G(e,t){S.length&&ne.spliceArray(S,function(e){return e.getTotalDuration()<=A},function(a){if(a.addState(16),a.fillForwards&&(W(a.getTotalDuration(),a.valueTo,a.type,a),void 0!==e&&void 0!==t))for(var i=e;i<l.length;i++){i!==e&&(t=-1);for(var r=t+1;r<f[i].length;r++){var n=f[i][r];a.group.id>n.group.id&&n.addState(16)}}})}function F(e){e.hasState(16,64)||(e.addState(4),S.push(e))}function O(){S.sort(function(e,t){return e.animationElement&&t.animationElement&&e.delay!==t.delay?e.delay<t.delay?1:-1:e.group.id<=t.group.id?1:-1})}function B(e){ne.spliceArray(S,e?function(t){return t===e}:function(e){return null!==e.animationElement})}function W(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;if(r||(a=ve(a)),""!==a&&(void 0===H[e]||t>=H[e].time)&&(H[e]={time:t,value:a,index:i}),s&&I.isAnimate(s)&&!s.fillReplace)if(s.fillForwards){ne.spliceArray(n,function(e){return e.group.id<s.group.id||e.delay<t}),S.length=0;for(var o=0;o<f.length;o++)for(var l=Array.isArray(h=f[o]),u=0,h=l?h:h[Symbol.iterator]();;){var c;if(l){if(u>=h.length)break;c=h[u++]}else{if((u=h.next()).done)break;c=u.value}c.group.id<s.group.id&&c.addState(16)}}else s.fillFreeze&&B()}function Y(t,i,r){R&&!t&&(void 0===r&&(r=V.typeAsValue(R.type)),i!==(x=Re(L[e],i,r))&&a(R.type,x)),R=void 0}var Z,$=p[e].find(function(e){return e.fillBackwards});if($){T=Se($,$.values,0,0),x=Re(L[e],0,T),r&&(a($.type,0),R=$);for(var Q=!0,J=Array.isArray(te=p[e]),ee=0,te=J?te:te[Symbol.iterator]();;){var ae;if(J){if(ee>=te.length)break;ae=te[ee++]}else{if((ee=te.next()).done)break;ae=ee.value}if(ae.group.id>$.group.id&&ae.delay<=$.delay){Q=!1;break}}for(var re=$.getTotalDuration(),se=[],oe=0;oe<l.length;oe++)for(var le=0;le<f[oe].length;le++){var ue=f[oe][le];if(Q){if(ue===$&&(0!==oe||0!==le)){f[oe].splice(le--,1),l.unshift($.delay),f.unshift([$]);continue}if(ue.group.id<$.group.id&&($.fillForwards||ue.getTotalDuration()<=re)){ue.fillForwards&&(ue.setterType=!0,n.push(ue)),se.push(ue);continue}}ue.animationElement&&ue.delay<=$.delay&&(f[oe].splice(le--,1),F(ue))}!function(e){for(var t=0;t<l.length;t++){if(e.length)for(var a=0;a<f[t].length;a++)e.includes(f[t][a])&&f[t].splice(a--,1);0===f[t].length&&(f.splice(t,1),l.splice(t--,1))}}(se),$.addState(2)}r||(void 0===H[e]&&W(0,U[e],0),void 0===T&&(T=H[e].value)),M(),ne.spliceArray(n,function(e){return e.delay<=l[0]},function(t){var a=I.isAnimate(t)&&t.fillForwards;if(t.delay<l[0]&&(void 0===$||a))if($&&a)W(t.delay,t.to,t.type);else{var i=t.delay-1;void 0===Z?L[e].has(0)?N(t,i,T):(N(t,0,U[e]),N(t,i,U[e])):N(Z,i),x=N(t),A=t.delay,Z=t}}),Z&&N(Z,l[0]-1);e:{for(var fe,he,ce=function(i){for(var s=l[i],u=function(t){var u=f[i][t];if(u.hasState(16,64))return h=t,"continue";var c=-1===u.iterationCount,v=u.duration,p=u.iterationCount,g=void 0;if(c)g=s+v;else if((g=u.getTotalDuration())<=x)return u.fillReplace?u.addState(64):F(u),h=t,"continue";var m=void 0,b=void 0;if(c?(m=Math.ceil((d-s)/v),b=0):(m=Math.ceil(p),b=p-Math.floor(p)),n.length&&A>0&&A<s&&P(A,s),-1!==x&&x<s&&(x=Re(L[e],s-1,T),A=s),_=void 0,u.group.ordering&&u.group.ordering.length>1){for(var k=!0,w=Array.isArray(z=u.group.ordering),I=0,z=w?z:z[Symbol.iterator]();;){var D;if(w){if(I>=z.length)break;D=z[I++]}else{if((I=z.next()).done)break;D=I.value}var K=D;if(K.name===u.group.name){k=!1;break}if(!K.paused&&A<=K.delay&&K.attributes.includes(e))break}if(k)t:for(var Z=i+1;Z<l.length;Z++)for(var $=0;$<f[Z].length;$++){var Q=f[Z][$];if(Q.group.ordering){_=Q.delay;break t}Q.getTotalDuration()<=g?(Q.fillFreeze&&M(Q),Q.addState(16)):Q.delay<g&&F(Q)}}else for(var J=i+1;J<l.length;J++)if(l[J]!==1/0&&f[J].length&&!f[J].every(function(e){return e.hasState(16,64)})){_=l[J];break}var ee=A,te=x+1,ae=Math.min(_||1/0,u.end||1/0),ie=void 0;if(n.length&&u.animationElement){var re=Math.min(_||1/0,g,ae);if(ie=n.find(function(e){return e.delay>=A&&e.delay<=re})){switch(ie.delay){case A:W(A,T=ie.to,ie.type,ie),ie.group.id>u.group.id&&(r&&R&&Y(u.additiveSum,Math.max(s-1,x)),x=N(ie,Math.max(ie.delay,x),T),ae=-1);break;case _:ie.addState(32);break;default:ae=ie.delay,ie.addState(32)}ne.spliceArray(n,function(e){return e!==ie}),u.addState(4)}}var se=!1,oe=void 0;if(ae>x){r&&(R&&(Y(u.additiveSum,Math.max(s-1,x)),te=x+1),T=V.typeAsValue(u.type),W(A,T,u.type));var le=l[i]===1/0||(-1!==x||u.hasState(2))&&!(0===i&&0===t);se=!0;t:for(var ue=function(a){var r=void 0,n=_e(C,u,T),l=void 0;if(u.partialType){if(A+u.getPartialDuration(a)<ae&&(S.length||t<f[i].length-1)){for(var h=t+1;h<f[i].length;h++)F(f[i][h]);f[i].length=0,O();var c=y(Te(C,u,0===A?s:A,ae,n,T,S),3);r=c[0],n=c[1],l=c[2]}else{var p=y(Pe(u),3);r=p[0],n=p[1],l=p[2]}Ge(r,n,l,U[e])}else r=u.keyTimes,l=u.keySplines;for(var d=0;d<r.length;d++){var k=r[d],R=void 0,w=Se(u,n,a,d,T);if(a===m-1&&b>0)if(b===k)b=-1;else if(d===r.length-1)A=R=g,w=xe(b,r[d-1],Se(u,n,a,d-1,T),k,w),b=-1;else if(b>k)for(var V=d+1;V<r.length;V++)if(b<=r[V]){A=R=g,w=xe(b,k,w,r[V],Se(u,n,a,V,T)),b=-1;break}if(void 0===R){if((R=ke(s,v,r,a,d))<0||R<x)continue;if(R===ae)se=a===m-1&&d===r.length-1,A=R;else{var E=function(t){var i=y(Ae(u,T,r,n,l,s,a,t,o,L[e],X,q),2);x=i[0],oe=i[1]};if(s<0&&-1===x)R>0&&(A=0,E(0));else{if(R>ae)return le&&x+1<ae&&E(x),A=ae,E(ae+(ae!==_||L[e].has(ae-1)?0:-1)),se=!1,"break|threadTimeExceeded";if(le)u.hasState(2)&&(A=ee),s>=x?(R=Math.max(s,x+1),A=s):R===x?(A=R,R=x+1):(E(x),A=Math.max(R,x)),le=!1;else{if(A=R,a>0&&0===d&&u.accumulateSum){we(u,R,l,d,o,X,q),x=R;continue}R=Math.max(R,x+1)}}}}if(R>x&&(d===r.length-1&&(a<m-1||u.fillReplace&&w!==H[e].value)&&!u.accumulateSum&&R--,x=Re(L[e],R,w),we(u,x,l,d,o,X,q),oe=w),!se||-1===b)return"break|threadTimeExceeded"}},fe=Fe(A,s,v);fe<m;fe++){if("break|threadTimeExceeded"===ue(fe))break t}G(i,t)}if(void 0!==oe&&(T=oe,r&&(a(u.type,te,x),R=u)),ie&&(ie.hasState(32)?(x=N(ie,ie.delay,oe=ie.to),W(A=ie.delay,oe,ie.type,ie)):u.hasState(64)&&a(x,ie.type),B(),se=!0),ne.spliceArray(n,function(e){return e.delay>=ee&&e.delay<=A},function(e){W(e.delay,e.to,e.type,e),e.animationElement&&B()}),c){if(!se)return S.length=0,S.push(u),h=t,"continue";if(void 0===ie)return j[e]=u,h=t,{v:"break|attributeEnd"}}if(se){if(_=_||1/0,!c&&E(u,_))return h=t,{v:"break|attributeEnd"};for(var he=i;he<l.length;he++)if(l[he]<A){for(var ce=0;ce<f[he].length;ce++){var ve=f[he][ce],pe=ve.getTotalDuration();pe>A&&!ve.hasState(4,16,64)?F(ve):ve.fillReplace||W(pe,ve.valueTo,ve.type,ve)}l[he]=1/0,f[he].length=0}if(S.length&&A<_){O();var de=S.find(function(e){return e.delay<=A});de&&(de.removeState(4,2),de.addState(8),B(de),s=de.delay,f[i]=[de],t=-1)}}else F(u);h=t},h=0;h<f[i].length;h++){var c=u(h);switch(c){case"continue":continue;default:if("object"===t(c))return c.v}}},pe=0;pe<l.length;pe++){if("break|attributeEnd"===ce(pe))break e}if(S.length){O();for(var de=function(t){var i=S[t],n=i.delay,s=i.duration,l=x-n,u=1/0;function f(){var f,h,c=_e(C,i,T);if(i.partialType){if(A+i.getPartialDuration()<u&&t<S.length-1){var v=y(Te(C,i,A,u,c,T,S),3);f=v[0],c=v[1],h=v[2]}else{var p=y(Pe(i),3);f=p[0],c=p[1],h=p[2]}Ge(f,c,h,U[e])}else f=i.keyTimes,h=i.keySplines;var d=x+1,g=Math.floor(l/s),m=!1;do{for(var b=0;b<f.length;b++){var k=ke(n,s,f,g,b);if(!m&&k>=x){var R=y(Ae(i,T,f,c,h,n,g,x,o,L[e],X,q),2);x=R[0],T=R[1],m=!0}if(m)if(k>=u){if(u>x){var w=y(Ae(i,T,f,c,h,n,g,u,o,L[e],X,q),2);x=w[0],T=w[1],A=u}}else k>x&&(A=k,b===f.length-1&&k<u&&k--,T=Se(i,c,g,b,T),x=Re(L[e],k,T),we(i,x,h,b,o,X,q))}}while(x<u&&++g);r&&a(i.type,d,x)}return-1===i.iterationCount?(l>0&&l%i.duration!=0&&(u=n+i.duration*Math.ceil(l/s),f()),j[e]=i,"break|attributeEnd"):(u=Math.min(n+i.duration*i.iterationCount,i.end||1/0))>x&&(f(),E(i))?"break|attributeEnd":void 0},ye=0;ye<S.length;ye++){if("break|attributeEnd"===de(ye))break e}}if(w&&w.fillReplace&&void 0===j[e])H[e]?(fe=H[e].index,he=H[e].value):r?(fe=Array.from(K.values()).pop(),he=V.typeAsValue(fe)):he=s._getBaseValue(e,i),void 0!==he&&JSON.stringify(L[e].get(x))!==JSON.stringify(he)&&(x=Re(L[e],x,he),r&&a(fe,x))}z[e]=x};for(var $ in v)Z($);var J=new Set,ee=0;for(var ae in L){var se=void 0,oe=L[ae].keys(),le=Array.isArray(oe),ue=0;for(oe=le?oe:oe[Symbol.iterator]();;){var fe;if(le){if(ue>=oe.length)break;fe=oe[ue++]}else{if((ue=oe.next()).done)break;fe=ue.value}var pe=fe;J.add(pe),se=pe}ee=Math.max(ee,se)}if(Object.keys(j).length){var ye=[],ge=[];for(var me in j)ye.push(j[me].delay),ge.push(j[me].duration);0===D.size&&1===new Set(ye).size&&1===new Set(ge).size&&ye[0]===J.values().next().value?O=ye[0]<=0?0:ye[0]:ge.length>1?ee=re.getLeastCommonMultiple(ge,ye):(ee-ye[0])%ge[0]!=0&&(ee=ge[0]*Math.ceil(ee/ge[0]))}if(void 0===O)for(var Ne in L)if(j[Ne]){var Me=z[Ne];if(Me<ee){var Oe=j[Ne],Be=Oe.delay,Ce=Me+1,Le=Array.from(L[Ne].values()).pop(),Ie=Math.floor((Me-Be)/Oe.duration),Xe=_e(C,Oe,Le);do{for(var qe=!1,ze=0;ze<Oe.keyTimes.length;ze++){var De=ke(Be,Oe.duration,Oe.keyTimes,Ie,ze);if(!qe&&De>=Me){var je=y(Ae(Oe,Le,Oe.keyTimes,Xe,Oe.keySplines,Be,Ie,Me,o,L[Ne],X,q),2);Le=je[1],J.add(Me=je[0]),qe=!0}qe&&De>Me&&(ze===Oe.keyTimes.length-1&&De<ee&&De--,Le=Se(Oe,Xe,Ie,ze,Le),Me=Re(L[Ne],De,Le),we(Oe,De,Oe.keySplines,ze,o,X,q),J.add(Me))}}while(Me<ee&&++Ie);z[Ne]=Me,r&&a(Oe.type,Ce,Me)}}var We=ne.sortNumber(Array.from(J));if(i||r)for(var Ye in L)if(!L[Ye].has(0)&&void 0!==U[Ye]){var Ue=L[Ye].keys().next().value-1;L[Ye].set(0,U[Ye]),L[Ye].set(Ue,U[Ye]),We.includes(0)||We.push(0),We.includes(Ue)||We.push(Ue),ne.sortNumber(We)}var He={};for(var Ke in L){for(var Ze=new Map,$e=0;$e<We.length;$e++){var Qe=We[$e];if(Qe<=z[Ke]){var Je=L[Ke].get(Qe);void 0===Je?he(L[Ke],Ze,Qe):Ze.set(Qe,Je)}}He[Ke]=Ze}if(F=be(He,We),void 0===O&&Object.keys(j).length){var et={},tt=[],at=[],it=[];for(var rt in j)it.push(j[rt].duration),tt.push(j[rt]);for(var nt=re.getLeastCommonMultiple(it),st=0;st<tt.length;st++){var ot=tt[st],lt=ot.attributeName;et[lt]=new Map;var ut=L[lt].has(z[lt])?L[lt].get(z[lt]):U[lt],ft=_e(C,ot,ut),ht=0,ct=0;do{for(var vt=0;vt<ot.keyTimes.length;vt++){var pt=ke(0,ot.duration,ot.keyTimes,ct,vt);vt===ot.keyTimes.length-1&&pt<nt&&pt--,ut=Se(ot,ft,ct,vt,ut),we(ot,ht=Re(et[lt],pt,ut),ot.keySplines,vt,o,W,Y),at.push(ht)}}while(ht<nt&&++ct)}if(tt.every(function(e){return e.alternate})){var dt=-1;for(var yt in j)for(var gt=Array.from(et[yt].keys()),mt=Array.from(et[yt].values()).reverse(),bt=0;bt<gt.length;bt++)if(0!==gt[bt]){dt=nt+gt[bt];var kt=W.get(gt[bt]);kt&&W.set(dt,kt),dt=Re(et[yt],dt,mt[bt]),at.push(dt)}}for(var St in et)for(var xt=0;xt<at.length;xt++){var At=at[xt];et[St].has(At)||he(et[St],et[St],At)}B=be(et,at,H)}if(F||B){s._removeAnimations(l);for(var Tt=Array.from(K.entries()),Rt=ne.joinMap(l,function(e){return I.asAnimateTransform(e)?V.typeAsName(e.type):e.attributeName},"-"),wt=[F,B],_t=0;_t<wt.length;_t++){var Vt=wt[_t];if(Vt){var Et=Vt===F,Nt=Et?X:W,Mt=Et?q:Y;if(Ve(r,o)){var Pt=[];if(r){var Gt=[];if(Et)for(var Ft=Array.from(Vt.entries()),Ot=Tt[0][1],Bt=0,Ct=0,Lt=0;Bt<Tt.length;Bt++){var It=Bt<Tt.length-1?Tt[Bt+1][1]:-1;if(Ot!==It){for(var Xt=new Map,qt=Lt;qt<Ft.length;qt++){var zt=Ft[qt][0];if(zt>=Tt[Ct][0]&&zt<=Tt[Bt][0])Xt.set(zt,new Map([[Ot,Ft[qt][1].values().next().value]])),Lt=qt;else if(zt>Tt[Bt][0])break}Gt.push(Xt),Ot=It,Ct=Bt+1}}else{if(!j.transform)return{v:void 0};for(var Dt=Array.from(Vt.entries()),jt=new Map,Wt=0;Wt<Dt.length;Wt++){var Yt=Dt[Wt];jt.set(Yt[0],new Map([[j.transform.type,Yt[1].values().next().value]]))}Gt.push(jt)}for(var Ut=0,Ht=0;Ht<Gt.length;Ht++){var Kt=Array.from(Gt[Ht].entries()),Zt=Kt[0][0];1===Kt.length&&Kt.push(Ht<Gt.length-1?[Gt[Ht+1].keys().next().value,Kt[0][1]]:[Zt+1,Kt[0][1]]);var $t=Kt[Kt.length-1][0],Qt=$t-Zt,Jt=new te;Jt.attributeName="transform",Jt.type=Kt[0][1].keys().next().value;for(var ea=0;ea<Kt.length;ea++){var ta=Kt[ea];if(Pt.push(Nt.get(ta[0])||""),Jt.type!==SVGTransform.SVG_TRANSFORM_ROTATE){var aa=Mt.get(ta[0]);aa&&(void 0===Jt.transformOrigin&&(Jt.transformOrigin=[]),Jt.transformOrigin[ea]=aa)}ta[0]-=Zt}var ia=ce(Kt),ra=Array.isArray(ia),na=0;for(ia=ra?ia:ia[Symbol.iterator]();;){var sa;if(ra){if(na>=ia.length)break;sa=ia[na++]}else{if((na=ia.next()).done)break;sa=na.value}var oa=y(sa,2),la=oa[1];Jt.keyTimes.push(oa[0]),Jt.values.push(la.values().next().value)}(Zt-=Ut)>1?Jt.delay=Zt:1===Zt&&(Qt+1)%10==0&&Qt++,Jt.duration=Qt,Jt.keySplines=Pt,Jt.synchronized={index:Ht,value:""},Ut=$t,s._insertAnimate(Jt,Et)}}else{for(var ua=Array.from(Vt.entries()),fa=O||0,ha=void 0,ca=0;ca<ua.length;ca++){var va=ua[ca];Pt.push(Nt.get(va[0])||""),va[0]-=fa}if(i){var pa=de(ce(ua),i,s.parent,n);if(!pa)return{v:void 0};(ha=new Q).attributeName="d";for(var da=Array.isArray(ga=pa),ya=0,ga=da?ga:ga[Symbol.iterator]();;){var ma;if(da){if(ya>=ga.length)break;ma=ga[ya++]}else{if((ya=ga.next()).done)break;ma=ya.value}var ba=ma;ha.keyTimes.push(ba.index),ha.values.push(""+ba.value)}}else{var ka=new te;ka.attributeName="transform",ka.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;var Sa=Vt.entries(),xa=Array.isArray(Sa),Aa=0;for(Sa=xa?Sa:Sa[Symbol.iterator]();;){var Ta;if(xa){if(Aa>=Sa.length)break;Ta=Sa[Aa++]}else{if((Aa=Sa.next()).done)break;Ta=Aa.value}var Ra=y(Ta,2),wa=Ra[0],_a=(la=Ra[1]).get("x")||0,Va=la.get("y")||0;ka.keyTimes.push(wa),ka.values.push(s.parent?"".concat(s.parent.refitX(_a)," ").concat(s.parent.refitX(Va)):"".concat(_a," ").concat(Va))}ha=ka}ha.delay=fa,ha.keySplines=Pt,ha.duration=ua[ua.length-1][0],s._insertAnimate(ha,Et)}}else if(Ee(r,o))for(var Ea=Array.from(Vt.entries()),Na=0;Na<Ea.length-1;Na++){var Ma=y(Ea[Na],2),Pa=Ma[0],Ga=Ma[1],Fa=y(Ea[Na+1],2),Oa=Fa[0],Ba=Fa[1],Ca=void 0,La=Rt;if(r){var Ia=new te;if(Ia.attributeName="transform",Et)for(var Xa=0;Xa<Tt.length-1;Xa++){var qa=Tt[Xa],za=Tt[Xa+1];if(qa[1]===za[1]&&Pa>=qa[0]&&Oa<=za[0]){Ia.type=qa[1];break}if(Oa-Pa==1&&Oa===za[0]){Ia.type=za[1];break}}else j.transform&&(Ia.type=j.transform.type);if(0===Ia.type)continue;Ia.values=[Ga.values().next().value,Ba.values().next().value];var Da=Mt.get(Oa);Da&&(Ia.transformOrigin=[Da]),Ca=Ia}else if(i){var ja=de([[Pa,Ga],[Oa,Ba]],i,s.parent,n);if(!ja)continue;(Ca=new Q).attributeName="d",Ca.values=ne.replaceMap(ja,function(e){return""+e.value})}else{var Wa=new te;Wa.attributeName="transform",Wa.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,Wa.values=ne.objectMap([Ga,Ba],function(e){var t=e.get("x")||0,a=e.get("y")||0;return s.parent?"".concat(s.parent.refitX(t)," ").concat(s.parent.refitX(a)):"".concat(t," ").concat(a)}),La+=Na,Ca=Wa}Et&&(Ca.delay=0===Na?Pa:0),Ca.duration=Oa-Pa,Ca.keyTimes=[0,1],Ca.synchronized={index:Na,value:La};var Ya=Nt.get(Oa);Ya&&(Ca.keySplines=[Ya]),s._insertAnimate(Ca,Et)}}}}}();if("object"===t(A))return A.v}}function T(e){void 0===u[e.attributeName]&&(u[e.attributeName]=[]),u[e.attributeName].push(e),h++}})}},{key:"_removeAnimations",value:function(e){e.length&&ne.spliceArray(this.animations,function(t){return e.includes(t)})}},{key:"_insertAnimate",value:function(e,t){t||(e.iterationCount=-1),e.from=e.valueFrom,e.to=e.valueTo,this.animations.push(e)}},{key:"_getBaseValue",value:function(e,t){var a;try{a=(t||this).getBaseValue(e)}catch(e){}return null!=a?a:"points"===e?[{x:0,y:0}]:0}}]),i}()},Be=squared.lib.dom,Ce=squared.lib.util,Le=function(e){function t(e,a){var i;if(r(this,t),(i=h(this,u(t).call(this,e,a))).path="",i.motionPathElement=null,i.rotate=0,i.rotateAuto=!1,i.rotateAutoReverse=!1,a){i.setAttribute("path");var n=Be.getNamedItem(a,"rotate");switch(n){case"auto":i.rotateAuto=!0;break;case"auto-reverse":i.rotateAutoReverse=!0;break;default:i.rotate=Ce.convertInt(n)}if(i.keyTimes.length){var s=Be.getNamedItem(a,"keyPoints");if(""!==s){var o=Q.toFractionList(s);o.length===i.keyTimes.length&&(i.keyPoints=o)}}for(var l=0;l<a.children.length;l++){var f=a.children[l];if("mpath"===f.tagName){var c=M(f);if(c&&(E.shape(c)||E.use(c))){i.motionPathElement=c;break}}}}return i}return l(t,Q),s(t,[{key:"instanceType",get:function(){return 49160}}]),t}(),Ie=squared.lib.dom,Xe=squared.lib.util,qe=Ie.getKeyframeRules(),ze={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},De=RegExp("cubic-bezier\\((".concat(Xe.REGEXP_STRING.ZERO_ONE,"), (").concat(Xe.REGEXP_STRING.DECIMAL,"), (").concat(Xe.REGEXP_STRING.ZERO_ONE,"), (").concat(Xe.REGEXP_STRING.DECIMAL,")\\)"));function je(e,t,a){e.style[t]=a,e.setAttribute(t,a)}function We(e,t){var a=Ie.cssAttribute(e,t);if("animation-timing-function"===t){for(var i=[];""!==a;){var r=a.indexOf(",");if(-1===r){i.push(a);break}var n=a.substring(0,r);if(n.startsWith("steps")||n.startsWith("cubic-bezier")){var s=a.indexOf(")",r)+1;n+=a.substring(r,s),r=s}i.push(n),a=a.substring(r+1).trim()}return i}return Xe.flatMap(a.split(","),function(e){return e.trim()})}function Ye(e){return e.sort(function(e,t){return e.index>=t.index?1:-1})}var Ue=function(e){return function(t){function a(){return r(this,a),h(this,u(a).apply(this,arguments))}return l(a,e),s(a,[{key:"getTransforms",value:function(e){var t=e||this.element;return I.filterTransforms(V.parse(t)||I.convertTransforms(t.transform.baseVal))}},{key:"getAnimations",value:function(e){var t=e||this.element,a=[],i=0;function r(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""===r&&i++,e.delay=t,e.group={id:i,name:r},a.push(e)}for(var n=0;n<t.children.length;n++){var s=t.children[n];if(s instanceof SVGAnimationElement){var o=s.attributes.getNamedItem("begin");if(o&&/^[a-zA-Z]+$/.test(o.value.trim()))continue;var l=o?Xe.sortNumber(Xe.replaceMap(o.value.split(";"),function(e){return W.convertClockTime(e)})):[0];if(l.length)switch(s.tagName){case"set":for(var u=Array.isArray(h=l),f=0,h=u?h:h[Symbol.iterator]();;){var c;if(u){if(f>=h.length)break;c=h[f++]}else{if((f=h.next()).done)break;c=f.value}var v=c;r(new W(t,s),v)}break;case"animate":for(var p=Array.isArray(y=l),d=0,y=p?y:y[Symbol.iterator]();;){var m;if(p){if(d>=y.length)break;m=y[d++]}else{if((d=y.next()).done)break;m=d.value}var b=m;r(new Q(t,s),b)}break;case"animateTransform":for(var k=Array.isArray(x=l),S=0,x=k?x:x[Symbol.iterator]();;){var A;if(k){if(S>=x.length)break;A=x[S++]}else{if((S=x.next()).done)break;A=S.value}var T=A,R=new te(t,s);I.isShape(this)&&this.path&&(R.transformFrom=I.drawRefit(t,this.parent,this.viewport&&this.viewport.precision)),r(R,T)}break;case"animateMotion":for(var w=Array.isArray(E=l),_=0,E=w?E:E[Symbol.iterator]();;){var N;if(w){if(_>=E.length)break;N=E[_++]}else{if((_=E.next()).done)break;N=_.value}var M=N;r(new Le(t,s),M)}}}}var P=We(t,"animation-name");if(P.length){var G={},F=[],O=[];for(var B in ze){var C=We(t,B);for(0===C.length&&C.push(ze[B]);C.length<P.length;)C.push.apply(C,g(C.slice(0)));C.length=P.length,G[B]=C}for(var L=0;L<P.length;L++){var X=qe.get(P[L]),q=W.convertClockTime(G["animation-duration"][L]);X&&q>0&&function(){i++;var e={},a={},n="paused"===G["animation-play-state"][L],s=W.convertClockTime(G["animation-delay"][L]),o=G["animation-iteration-count"][L],l=G["animation-fill-mode"][L],u="".concat(P[L],"_").concat(L),f=[];for(var h in O.push({name:u,attributes:f,paused:n,delay:s,duration:q,iterationCount:o,fillMode:l}),X){var c=parseInt(h)/100;for(var v in X[h]){var p=ze[v]?a:e;void 0===p[v]&&(p[v]=[]),p[v].push({index:c,value:X[h][v]})}}if(e.transform){var d=function(){if(g){if(m>=y.length)return"break";b=y[m++]}else{if((m=y.next()).done)return"break";b=m.value}var a=b,i=V.parse(t,a.value);if(i){var r=function(a){var i=e["transform-origin"]&&e["transform-origin"].find(function(e){return e.index===a});if(i)return V.origin(t,i.value)}(a.index);i.forEach(function(t){var i,n,s,o=t.matrix;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:i="translate",n="".concat(o.e," ").concat(o.f);break;case SVGTransform.SVG_TRANSFORM_SCALE:i="scale",n="".concat(o.a," ").concat(o.d," ").concat(r?"".concat(r.x," ").concat(r.y):"0 0"),!r||0===a.index&&0===r.x&&0===r.y||(s={x:r.x*(1-o.a),y:r.y*(1-o.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:i="rotate",n="".concat(t.angle," ").concat(r?"".concat(r.x," ").concat(r.y):"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:i="skewX",n=""+t.angle,!r||0===a.index&&0===r.y||(s={x:r.y*o.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:i="skewY",n=""+t.angle,!r||0===a.index&&0===r.x||(s={x:0,y:r.x*o.b*-1});break;default:return}void 0===e[i]&&(e[i]=[]);var l=e[i].findIndex(function(e){return e.index===a.index});-1!==l?(e[i][l].value=n,e[i][l].transformOrigin=s):e[i].push({index:a.index,value:n,transformOrigin:s})})}},y=Ye(e.transform),g=Array.isArray(y),m=0;for(y=g?y:y[Symbol.iterator]();;){var b;if("break"===d())break}}delete e.transform,delete e["transform-origin"];var k=function(i){f.push(i);var h=e[i],c=void 0;switch(i){case"rotate":case"scale":case"skewX":case"skewY":case"translate":(c=new te(t)).attributeName="transform",c.setType(i);break;default:(c=new Q(t)).attributeName=i}var v=G["animation-timing-function"][L],p=G["animation-direction"][L],d=[],y=[],g=[];Ye(h);for(var m=function(e){if(d.push(h[e].index),y.push(h[e].value),e<h.length-1){var t=a["animation-timing-function"]&&a["animation-timing-function"].find(function(t){return t.index===h[e].index});g.push(t?t.value:v)}var i=h[e].transformOrigin;i&&I.asAnimateTransform(c)&&(void 0===c.transformOrigin&&(c.transformOrigin=[]),c.transformOrigin[e]=i)},b=0;b<h.length;b++)m(b);if(0!==d[0]&&(d.unshift(0),y.unshift(c.baseValue||""),g.unshift(v),c.evaluateStart=!0),r(c,s,u),c.paused=n,c.duration=q,g.every(function(e){return"linear"===e}))c.values=y,c.keyTimes=d;else{var k=[],S=[],x=[];for(b=0;b<d.length;b++){if(b<d.length-1){var A=(d[b+1]-d[b])*q;if(Y[g[b]])g[b]=Y[g[b]];else if(g[b].startsWith("step")){if(""!==y[b]){var T=Q.convertStepTimingFunction(i,g[b],d,y,b,Ie.getFontSize(t));if(T){for(var R=1===d[b+1]?1:0,w=0;w<T[0].length-R;w++){var _=(d[b]+T[0][w]*A)/q;k.includes(_)&&(_+=1/q),k.push(_),S.push(T[1][w]),x.push(Y[-1!==g[b].indexOf("start")?"step-start":"step-end"])}continue}}g[b]=Y.linear}else{var V=De.exec(g[b]);g[b]=V?"".concat(V[1]," ").concat(V[2]," ").concat(V[3]," ").concat(V[4]):Y.ease}x.push(g[b])}k.push(d[b]),S.push(y[b])}c.values=S,c.keyTimes=k,c.keySplines=x}c.iterationCount="infinite"!==o?parseFloat(o):-1,c.fillForwards="forwards"===l||"both"===l,c.fillBackwards="backwards"===l||"both"===l,c.reverse=p.endsWith("reverse"),c.alternate=(-1===c.iterationCount||c.iterationCount>1)&&p.startsWith("alternate"),F.push(c)};for(var S in e)k(S)}()}O.reverse();for(var z=0;z<F.length;z++){F[z].setGroupOrdering(O)}}for(var D=0;D<a.length;D++){a[D].parent=this}return a}},{key:"name",set:function(e){this._name=e},get:function(){return void 0===this._name&&(this._name=I.setName(this.element)),this._name}},{key:"transforms",get:function(){return void 0===this._transforms&&(this._transforms=this.getTransforms()),this._transforms}},{key:"animations",get:function(){return void 0===this._animations&&(this._animations=this.getAnimations()),this._animations}},{key:"visible",set:function(e){!function(e,t){je(e,"display",t?"block":"none"),je(e,"visibility",t?"visible":"hidden")}(this.element,e)},get:function(){return"hidden"!==(t=Ie.cssAttribute(e=this.element,"visibility",!0))&&"collapse"!==t&&"none"!==Ie.cssAttribute(e,"display",!0);var e,t}},{key:"opacity",set:function(e){!function(e,t){if(Xe.isNumber(t)){var a=parseFloat(""+t);a<=0?a=0:a>=1&&(a=1),e.style.opacity=""+a,e.setAttribute("opacity",""+a)}}(this.element,e)},get:function(){return Ie.cssAttribute(this.element,"opacity")||"1"}}]),a}()},He=squared.lib.dom;function Ke(e){var t=e.parentElement instanceof HTMLElement;return"svg"===e.tagName&&(He.isUserAgent(4)&&!t||He.isUserAgent(16)&&t)}var Ze=function(e){return function(t){function a(){return r(this,a),h(this,u(a).apply(this,arguments))}return l(a,e),s(a,[{key:"setRect",value:function(){var e=this.x,t=this.y,a=this.width,i=this.height,r=this.parent;r&&(e=r.refitX(e),t=r.refitY(t),a=r.refitSize(a),i=r.refitSize(i)),this.setBaseValue("x",e),this.setBaseValue("y",t),this.setBaseValue("width",a),this.setBaseValue("height",i)}},{key:"_getElement",value:function(){switch(this.element.tagName){case"svg":case"use":case"image":return this.element;default:return null}}},{key:"x",set:function(e){this._x=e},get:function(){if(void 0!==this._x)return this._x;var e=this._getElement();return e?e.x.baseVal.value:0}},{key:"y",set:function(e){this._y=e},get:function(){if(void 0!==this._y)return this._y;var e=this._getElement();return e?e.y.baseVal.value:0}},{key:"width",set:function(e){this._width=e},get:function(){if(void 0!==this._width)return this._width;var e=this._getElement();return e?Ke(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}},{key:"height",set:function(e){this._height=e},get:function(){if(void 0!==this._height)return this._height;var e=this._getElement();return e?Ke(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}]),a}()},$e=squared.lib.dom,Qe=squared.lib.util;function Je(e,t){var a=N($e.cssInheritAttribute(e,"fill"));if(""!==a){if(t&&t.definitions.pattern.has(a))return t.definitions.pattern.get(a);var i=document.getElementById(a.substring(1));if(i instanceof SVGPatternElement)return i}}var et=function(e){function t(e){var a;return r(this,t),(a=h(this,u(t).call(this))).element=e,a.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1},a._clipRegion=[],a}return l(t,squared.lib.base.Container),s(t,[{key:"append",value:function(e,a){return e.parent=this,e.viewport=a||this.getViewport(),v(u(t.prototype),"append",this).call(this,e)}},{key:"build",value:function(e){var t,a,i;e?(t=e.symbolElement||e.patternElement||e.element||this.element,a=e.precision,i=!1!==e.initPath,e.symbolElement=void 0,e.patternElement=void 0,e.element=void 0):(t=this.element,i=!0),this.clear();for(var r=this.getViewport(),n=!1,s=0;s<t.children.length;s++){var o=t.children[s],l=void 0;if(E.svg(o))l=new squared.svg.Svg(o,!1),this.setAspectRatio(l,o.viewBox.baseVal),n=!0;else if(E.g(o))l=new squared.svg.SvgG(o),this.setAspectRatio(l);else if(E.use(o)){var u=M(o);if(u)if(E.symbol(u))l=new squared.svg.SvgUseSymbol(o,u),this.setAspectRatio(l,u.viewBox.baseVal),n=!0;else if(E.image(u))l=new squared.svg.SvgImage(o,u);else if(E.shape(u)){var f=Je(o,r);f?(l=new squared.svg.SvgUsePattern(o,u,f),this.setAspectRatio(l)):l=new squared.svg.SvgUse(o,u,i)}}else if(E.image(o))l=new squared.svg.SvgImage(o);else if(E.shape(o)){var h=Je(o,r);h?(l=new squared.svg.SvgShapePattern(o,h),this.setAspectRatio(l)):l=new squared.svg.SvgShape(o,i)}l&&(this.append(l,r),l.build(e))}if(I.asSvg(this)&&this.documentRoot)(this.aspectRatio.x<0||this.aspectRatio.y<0)&&this.clipViewBox(this.aspectRatio.x,this.aspectRatio.y,this.aspectRatio.width,this.aspectRatio.height,a,!0);else if(n&&this.hasViewBox()&&(0!==this.aspectRatio.x||0!==this.aspectRatio.y)){var c=I.parseBoxRect(this.getPathAll(!1)),v=this.refitX(this.aspectRatio.x),p=this.refitY(this.aspectRatio.y);(c.left<v||c.top<p)&&this.clipViewBox(c.left,c.top,this.refitSize(this.aspectRatio.width),this.refitSize(this.aspectRatio.height),a)}}},{key:"hasViewBox",value:function(){return I.asSvg(this)&&!!this.element.viewBox.baseVal||I.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}},{key:"clipViewBox",value:function(e,t,a,i,r){this.clipRegion=arguments.length>5&&void 0!==arguments[5]&&arguments[5]?I.drawRect(a-e,i-t,e<0?-1*e:0,t<0?-1*t:0,r):I.drawRect(a,i,e,t,r)}},{key:"synchronize",value:function(e){this.each(function(t){return t.synchronize(e)})}},{key:"refitX",value:function(e){return(e-this.aspectRatio.x)*this.aspectRatio.unit-this.aspectRatio.parent.x+this.aspectRatio.position.x}},{key:"refitY",value:function(e){return(e-this.aspectRatio.y)*this.aspectRatio.unit-this.aspectRatio.parent.y+this.aspectRatio.position.y}},{key:"refitSize",value:function(e){return e*this.aspectRatio.unit}},{key:"refitPoints",value:function(e){for(var t=Array.isArray(i=e),a=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(a>=i.length)break;r=i[a++]}else{if((a=i.next()).done)break;r=a.value}var n=r;n.x=this.refitX(n.x),n.y=this.refitY(n.y),void 0!==n.rx&&void 0!==n.ry&&(n.rx*=this.aspectRatio.unit,n.ry*=this.aspectRatio.unit)}return e}},{key:"requireRefit",value:function(){return 0!==this.aspectRatio.x||0!==this.aspectRatio.y||0!==this.aspectRatio.position.x||0!==this.aspectRatio.position.y||0!==this.aspectRatio.parent.x||0!==this.aspectRatio.parent.y||1!==this.aspectRatio.unit}},{key:"getPathAll",value:function(){var e=[],t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.cascade():this,a=Array.isArray(t),i=0;for(t=a?t:t[Symbol.iterator]();;){var r;if(a){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}var n=r;I.isShape(n)&&n.path&&n.path.value&&e.push(n.path.value)}return e}},{key:"getViewport",value:function(){return this.viewport||I.asSvg(this)&&this||void 0}},{key:"setAspectRatio",value:function(e,t){var a=function(e){for(;e;){if(e.hasViewBox())return e;e=e.parent}}(this);if(a){var i=e.aspectRatio;if(t&&(Qe.cloneObject(t,i),i.width>0&&i.height>0)){var r=i.width/i.height,n=a.aspectRatio.width||a.viewBox.width,s=a.aspectRatio.height||a.viewBox.height,o=n/s;o>r?i.position.x=(n-s*r)/2:o<r&&(i.position.y=(s-n*(1/r))/2),i.unit=Math.min(n/i.width,s/i.height)}i.parent.x=a.aspectRatio.x+a.aspectRatio.x*(a.aspectRatio.unit-1),i.position.x*=a.aspectRatio.unit,i.position.x+=a.aspectRatio.position.x-a.aspectRatio.parent.x,i.parent.y=a.aspectRatio.y+a.aspectRatio.y*(a.aspectRatio.unit-1),i.position.y*=a.aspectRatio.unit,i.position.y+=a.aspectRatio.position.y-a.aspectRatio.parent.y,i.unit*=a.aspectRatio.unit}}},{key:"clipRegion",set:function(e){""!==e?this._clipRegion.push(e):this._clipRegion.length=0},get:function(){return this._clipRegion.length?this._clipRegion.join(";"):""}},{key:"instanceType",get:function(){return 2}}]),t}(),tt=squared.lib.color,at=squared.lib.dom,it=squared.lib.util;function rt(e){for(var t=[],a=e.getElementsByTagName("stop"),i=0;i<a.length;i++){var r=tt.parseRGBA(at.cssAttribute(a[i],"stop-color"),at.cssAttribute(a[i],"stop-opacity"));r&&t.push({color:r.valueRGBA,offset:at.cssAttribute(a[i],"offset"),opacity:r.alpha})}return t}function nt(e){for(var t={},a=arguments.length,i=Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];for(var n=0;n<i.length;n++){var s=i[n];e[s]&&(t[s]=e[s].baseVal.value,t["".concat(s,"AsString")]=e[s].baseVal.valueAsString)}return t}var st=function(e){function t(e){var a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r(this,t),(a=h(this,u(t).call(this,e))).element=e,a.documentRoot=i,a.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},a.init(),a}return l(t,Oe(Ze(z(Ue(et))))),s(t,[{key:"build",value:function(e){this.precision=e&&e.precision,this.setRect(),v(u(t.prototype),"build",this).call(this,e)}},{key:"synchronize",value:function(e){!this.documentRoot&&this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(),void 0,e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"init",value:function(){var e=this;this.documentRoot&&(it.cloneObject(this.element.viewBox.baseVal,this.aspectRatio),this.element.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(function(t){var a=M(t,e.element);a&&(t.parentElement&&t.parentElement.removeChild(t),a.appendChild(t))})),this.setDefinitions(this.element),this.element.querySelectorAll("defs").forEach(function(t){return e.setDefinitions(t)})}},{key:"setDefinitions",value:function(e){var t=this;e.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(function(e){if(e.id){var a="#".concat(e.id);E.clipPath(e)?t.definitions.clipPath.set(a,e):E.pattern(e)?t.definitions.pattern.set(a,e):E.linearGradient(e)?t.definitions.gradient.set(a,Object.assign({type:"linear",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:rt(e)},nt(e,"x1","x2","y1","y2"))):E.radialGradient(e)&&t.definitions.gradient.set(a,Object.assign({type:"radial",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:rt(e)},nt(e,"cx","cy","r","fx","fy","fr")))}})}},{key:"viewBox",get:function(){return this.element.viewBox.baseVal||at.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 18}}]),t}(),ot=function(){function e(t){r(this,e),this.element=t}return s(e,[{key:"build",value:function(e){}},{key:"synchronize",value:function(e){}},{key:"instanceType",get:function(){return 4}}]),e}(),lt=squared.lib.color,ut=squared.lib.dom,ft=squared.lib.util,ht={url:ft.REGEXP_PATTERN.URL,inset:RegExp("inset\\(".concat(ft.REGEXP_STRING.LENGTH,"\\s?").concat(ft.REGEXP_STRING.LENGTH,"?\\s?").concat(ft.REGEXP_STRING.LENGTH,"?\\s?").concat(ft.REGEXP_STRING.LENGTH,"?\\)")),polygon:/polygon\(([^)]+)\)/,circle:RegExp("circle\\(".concat(ft.REGEXP_STRING.LENGTH,"(?: at ").concat(ft.REGEXP_STRING.LENGTH," ").concat(ft.REGEXP_STRING.LENGTH,")?\\)")),ellipse:RegExp("ellipse\\(".concat(ft.REGEXP_STRING.LENGTH," ").concat(ft.REGEXP_STRING.LENGTH,"(?: at ").concat(ft.REGEXP_STRING.LENGTH," ").concat(ft.REGEXP_STRING.LENGTH,")?\\)"))},ct=function(e){return function(a){function i(){return r(this,i),h(this,u(i).apply(this,arguments))}return l(i,e),s(i,[{key:"setPaint",value:function(e,a){var i=this;this.resetPaint(),this.setAttribute("color",!0),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setAttribute("stroke"),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-width"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");var r=this.getAttribute("clip-path",!1,!1);if(""!==r)for(var n in ht){var s=ht[n].exec(r);if(s){if("url"===n)return void(this.clipPath=s[1]);if(e&&e.length){var o=function(){var t=function(e,t){return ft.convertPercentPX(e,0===t?l:u,r)},r=ut.getFontSize(i.element),o=I.parseBoxRect(e),l=o.right-o.left,u=o.bottom-o.top,f=i.parent;switch(n){case"inset":var h=0,c=0,v=t(s[1],1),p=0;s[4]?(h=o.left+t(s[4],0),c=o.right-t(s[2],0),p=o.bottom-t(s[3],1)):s[2]?(h=t(s[2],0),c=o.right-h,p=o.bottom-(s[3]?t(s[3],1):v),h+=o.left):(h=o.left+v,c=o.right-v,p=o.bottom-v);var d=[{x:h,y:v+=o.top},{x:c,y:v},{x:c,y:p},{x:h,y:p}];return f&&f.refitPoints(d),i.clipPath=I.drawPolygon(d,a),{v:void 0};case"polygon":var g=ft.objectMap(s[1].split(","),function(e){var a=y(ft.replaceMap(e.trim().split(" "),function(e,a){return t(e,a)}),2),i=a[0],r=a[1];return{x:i+=o.left,y:r+=o.top}});return f&&f.refitPoints(g),i.clipPath=I.drawPolygon(g,a),{v:void 0};default:if("circle"===n||"ellipse"===n){var m,b;"circle"===n?b=m=t(s[1],l<u?0:1):(m=t(s[1],0),b=t(s[2],1));var k=o.left,S=o.top;if(s.length>=4){var x=l<u?0:1;k+=t(s[s.length-2],x),S+=t(s[s.length-1],x)}f&&(k=f.refitX(k),S=f.refitX(S),m=f.refitSize(m),b=f.refitSize(b)),i.clipPath=I.drawEllipse(k,S,m,b,a)}return{v:void 0}}}();if("object"===t(o))return o.v}}}}},{key:"setAttribute",value:function(e){var t=this.getAttribute(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);if(ft.isString(t))switch(e){case"fill":case"stroke":var a=N(t);if(""!==a)this["".concat(e,"Pattern")]=a;else{var i;switch(t.toLowerCase()){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="";break;case"currentcolor":i=lt.parseRGBA(this.color||ut.cssAttribute(this.element,e,!0));break;default:i=lt.parseRGBA(t)}i&&(this[e]=i.valueRGB)}break;default:this[ft.convertCamelCase(e)]=t}}},{key:"getAttribute",value:function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=ut.cssAttribute(this.element,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);if(t&&!ft.isString(a)){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return a}for(var i=this.useParent||this.parent;i&&(a=ut.cssAttribute(i.element,e),!ft.isString(a));)i=i.parent}return a}},{key:"resetPaint",value:function(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}}]),i}()},vt=function(e){function t(e){var a;return r(this,t),(a=h(this,u(t).call(this,e))).element=e,a}return l(t,ct(Ue(et))),s(t,[{key:"build",value:function(e){v(u(t.prototype),"build",this).call(this,e),this.setPaint(this.getPathAll(),e&&e.precision)}},{key:"instanceType",get:function(){return 34}}]),t}(),pt=squared.lib.util,dt=function(e){function t(e,a){var i;return r(this,t),(i=h(this,u(t).call(this,e))).element=e,i.imageElement=null,i.__get_transforms=!1,i.__get_animations=!1,a&&(i.imageElement=a),i}return l(t,Ze(z(Ue(ot)))),s(t,[{key:"build",value:function(){this.setRect()}},{key:"extract",value:function(e){var t=e?I.filterTransforms(this.transforms,e):this.transforms,a=this.x,i=this.y,r=this.width,n=this.height;if(t.length){t.reverse();for(var s=0;s<t.length;s++){var o=t[s],l=o.matrix,u=a;switch(a=_.applyX(l,u,i),i=_.applyY(l,u,i),o.type){case SVGTransform.SVG_TRANSFORM_SCALE:r*=l.a,n*=l.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==o.angle&&(l.a<0&&(a+=l.a*r),l.c<0&&(a+=l.c*r),l.b<0&&(i+=l.b*n),l.d<0&&(i+=l.d*n),void 0!==this.rotateAngle?this.rotateAngle+=o.angle:this.rotateAngle=o.angle)}}this.transformed=t}this.parent&&(a=this.parent.refitX(a),i=this.parent.refitY(i),r=this.parent.refitSize(r),n=this.parent.refitSize(n)),this.translationOffset&&(a+=this.translationOffset.x,i+=this.translationOffset.y),this.setBaseValue("x",a),this.setBaseValue("y",i),this.setBaseValue("width",r),this.setBaseValue("height",n)}},{key:"x",set:function(e){d(u(t.prototype),"x",e,this,!0)},get:function(){var e=v(u(t.prototype),"x",this);return 0===e&&this.imageElement?this.imageElement.x.baseVal.value:e}},{key:"y",set:function(e){d(u(t.prototype),"y",e,this,!0)},get:function(){var e=v(u(t.prototype),"y",this);return 0===e&&this.imageElement?this.imageElement.y.baseVal.value:e}},{key:"width",set:function(e){d(u(t.prototype),"width",e,this,!0)},get:function(){var e=v(u(t.prototype),"width",this);return 0===e&&this.imageElement?this.imageElement.width.baseVal.value:e}},{key:"height",set:function(e){d(u(t.prototype),"height",e,this,!0)},get:function(){var e=v(u(t.prototype),"height",this);return 0===e&&this.imageElement?this.imageElement.height.baseVal.value:e}},{key:"href",get:function(){var e=this.imageElement||this.element;return E.image(e)?pt.resolvePath(e.href.baseVal):""}},{key:"transforms",get:function(){var e=v(u(t.prototype),"transforms",this);return this.__get_transforms||(this.imageElement&&e.push.apply(e,g(this.getTransforms(this.imageElement))),this.__get_transforms=!0),e}},{key:"animations",get:function(){var e=v(u(t.prototype),"animations",this);return this.__get_animations||(this.imageElement&&e.push.apply(e,g(this.getAnimations(this.imageElement))),this.__get_animations=!0),e}},{key:"instanceType",get:function(){return 4100}}]),t}(),yt=squared.lib.math,gt=squared.lib.util,mt=function(e){function t(e){var a;return r(this,t),(a=h(this,u(t).call(this,e))).element=e,a.name="",a.value="",a.baseValue="",a.init(),a}return l(t,ct(z(ot))),s(t,[{key:"draw",value:function(e,t){var a,i;t&&(a=t.residual,i=t.precision),this.transformed=void 0;var r,n=this.element,s=this.parent,o=this.patternParent,l=!!s&&s.requireRefit(),u=!!o&&2===o.patternContentUnits;if(E.path(n)){if(r=this.getBaseValue("d"),e&&e.length||l||u){var f=I.getPathCommands(r);if(f.length){var h=I.extractPathPoints(f);if(h.length){if(u&&o.patternRefitPoints(h),e&&e.length){if("function"==typeof a){var c=y(a.call(this,n,e),2);this.transformResidual=c[0],e=c[1]}e.length&&(h=I.applyTransforms(e,h,V.origin(this.element)),this.transformed=e)}l&&s.refitPoints(h),r=I.drawPath(I.rebindPathPoints(f,h),i)}}}}else if(E.line(n)){var v=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(u&&o.patternRefitPoints(v),e&&e.length){if("function"==typeof a){var p=y(a.call(this,n,e),2);this.transformResidual=p[0],e=p[1]}e.length&&(v=I.applyTransforms(e,v,V.origin(this.element)),this.transformed=e)}l&&s.refitPoints(v),r=I.drawPolyline(v,i)}else if(E.circle(n)||E.ellipse(n)){var d,g;E.ellipse(n)?(d=this.getBaseValue("rx"),g=this.getBaseValue("ry")):g=d=this.getBaseValue("r");var m=[{x:this.getBaseValue("cx"),y:this.getBaseValue("cy"),rx:d,ry:g}];if(u&&o.patternRefitPoints(m),e&&e.length){if("function"==typeof a){var b=y(a.call(this,n,e,d,g),2);this.transformResidual=b[0],e=b[1]}e.length&&(m=I.applyTransforms(e,m,V.origin(this.element)),this.transformed=e)}l&&s.refitPoints(m);var k=m[0];r=I.drawEllipse(k.x,k.y,k.rx,k.ry,i)}else if(E.rect(n)){var S=this.getBaseValue("x"),x=this.getBaseValue("y"),A=this.getBaseValue("width"),T=this.getBaseValue("height");if(e&&e.length){var R=[{x:S,y:x},{x:S+A,y:x},{x:S+A,y:x+T},{x:S,y:x+T}];if(u&&o.patternRefitPoints(R),"function"==typeof a){var w=y(a.call(this,n,e),2);this.transformResidual=w[0],e=w[1]}e.length&&(R=I.applyTransforms(e,R,V.origin(this.element)),this.transformed=e),l&&s.refitPoints(R),r=I.drawPolygon(R,i)}else u&&(S=o.patternRefitX(S),x=o.patternRefitY(x),A=o.patternRefitX(A),T=o.patternRefitY(T)),l&&(S=s.refitX(S),x=s.refitY(x),A=s.refitSize(A),T=s.refitSize(T)),r=I.drawRect(A,T,S,x,i)}else if(E.polygon(n)||E.polyline(n)){var _=this.getBaseValue("points");if(u&&o.patternRefitPoints(_),e&&e.length){if("function"==typeof a){var N=y(a.call(this,n,e),2);this.transformResidual=N[0],e=N[1]}e.length&&(_=I.applyTransforms(e,_,V.origin(this.element)),this.transformed=e)}l&&(null===this.transformed&&(_=I.clonePoints(_)),s.refitPoints(_)),r=E.polygon(n)?I.drawPolygon(_,i):I.drawPolyline(_,i)}else r="";return this.value=r,this.setPaint([r],i),r}},{key:"extendLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":var i=I.getPathCommands(this.value);if(i.length){var r=i[0],n=r.start,s=i[i.length-1],o=s.end,l=!1,u=e.leading,f=e.trailing;if(n.x!==o.x||n.y!==o.y){var h;if(u>0)if(r.value.length>1?h=r.value[1]:i.length>1&&(h=i[1].start),h)if(h.x===n.x){var c=r.coordinates[1]+(n.y>h.y?u:-u);t||c>=0?(r.coordinates[1]=c,l=!0):u=0}else if(h.y===n.y){var v=r.coordinates[0]+(n.x>h.x?u:-u);t||v>=0?(r.coordinates[0]=v,l=!0):u=0}else{var p=yt.getAngle(h,n),d=r.coordinates[0]-yt.distanceFromX(u,p),y=r.coordinates[1]-yt.distanceFromY(u,p);t||d>=0&&y>=0?(r.coordinates[0]=d,r.coordinates[1]=y,l=!0):u=0}var g=s.name.toUpperCase();switch(g){case"M":case"L":var m;if(f>0)if(1===i.length?r.value.length>1&&(m=r.value[r.value.length-2]):m=s.value.length>1?s.value[s.value.length-2]:i[i.length-2].end,m)if(m.x===o.x){var b=s.coordinates[1]+(o.y>m.y?f:-f);t||b>=0?(s.coordinates[1]=b,l=!0):f=0}else if(m.y===o.y){var k=s.coordinates[0]+(o.x>m.x?f:-f);t||k>=0?(s.coordinates[0]=k,l=!0):f=0}else{var S=yt.getAngle(m,o),x=s.coordinates[0]+yt.distanceFromX(f,S),A=s.coordinates[1]+yt.distanceFromY(f,S);t||x>=0&&A>=0?(s.coordinates[0]=x,s.coordinates[1]=A,l=!0):f=0}break;case"H":case"V":var T="H"===g?0:1,R=s.coordinates[T]+(u+f)*(s.coordinates[T]>=0?1:-1);t||R>=0?(s.coordinates[T]=R,l=!0):f=0}}if(l)return e.leading=u,e.trailing=f,e.path=I.drawPath(i,a),e}}}},{key:"flattenStrokeDash",value:function(e,t,a,i,r){var n={items:[],leading:0,trailing:0,ratioLength:a/(i||a)};if(e.length){i||(i=a);var s=r&&r.extendedLength||i,o=0,l=0;if(void 0===r){var u=e.reduce(function(e,t){return e+t},0);if((t%=a)<0)for(;t<0;)t+=u}else r.leadingOffset&&(l=1);for(var f=e.length,h=0,c=0;;h+=c,l++)if(h+(c=e[l%f])>t){var v=void 0,p=void 0;h<t?(n.leading=t-h,v=0,p=c-n.leading):(v=h-t,p=c);var d=yt.truncatePrecision(v/s),y=yt.truncatePrecision(d+p/s);if(l%2==0){if(!(d<1)){d>1&&(n.trailing=yt.truncatePrecision((d-1)*s)),o=e[(l+1)%f];break}n.items.push({start:d,end:Math.min(y,1)})}else if(d>=1){n.trailing=yt.truncatePrecision((y-1)*s),o=c;break}}void 0===r&&(0===n.items.length?n.items.push({start:1,end:1}):(n.leadingOffset=yt.truncatePrecision(n.items[0].start*s),n.trailingOffset=yt.truncatePrecision((1-n.items[n.items.length-1].end)*s),n.leadingOffset>0?n.leadingOffset+n.trailingOffset>=o?(n.leading=0,n.trailing=o-(n.leadingOffset+n.trailingOffset)):n.leadingOffset+n.trailing>=o?(n.leading=0,n.trailing-=n.leadingOffset):n.leadingOffset+n.leading>=o&&(n.trailing=0):0===n.leading&&n.trailing<o&&(n.trailing=o-n.trailingOffset),n.leading*=n.ratioLength,n.trailing*=n.ratioLength))}return n}},{key:"extractStrokeDash",value:function(e){var t,a,i,r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0,o=gt.convertInt(this.strokeWidth);if(o>0){var l=I.parseCoordinates(this.strokeDasharray);l.length&&function(){var u,f=r.totalLength,h=r.pathLength||f,c=[],v=gt.convertInt(r.strokeDashoffset),p=0,d=function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,s=r.flattenStrokeDash(e,t,f,h);return(0===c.length||n)&&(u=s),p=Math.max(p,s.items.length),c.push({items:s.items,delay:a,duration:i,companion:n}),s.items};if(t=d(l,v,0),e){var y=function(e){var t=b.get("stroke-dashoffset",e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return t?parseFloat(t):v},g=function(e){var t=b.get("stroke-dasharray",e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return t?I.parseCoordinates(t):l},m=e.slice(0).sort(function(e,t){if(e.attributeName.startsWith("stroke-dash")&&t.attributeName.startsWith("stroke-dash")){if(e.delay!==t.delay)return e.delay<t.delay?-1:1;if(I.asSet(e)&&I.asAnimate(t)||void 0===e.animationElement&&t.animationElement)return-1;if(I.asAnimate(e)&&I.asSet(t)||e.animationElement&&void 0===t.animationElement)return 1}return 0}),b=new ie(m,"stroke-dasharray","stroke-dashoffset");if(m.length>1)for(var k=0;k<m.length;k++)b.has(m[k].attributeName,m[k].delay,m[k])||m.splice(k--,1);for(var S=function(e){return e?"".concat(e.start," ").concat(e.end):"1 1"},x=function(e){for(var t=v,a=e;a<m.length;a++){var i=m[a];if("stroke-dasharray"===i.attributeName){var n=b.get("stroke-dashoffset",i.delay);n&&(t=parseFloat(n));var s=I.asAnimate(i)?b.evaluateStart(i):[i.to],o=Array.isArray(s),l=0;for(s=o?s:s[Symbol.iterator]();;){var u;if(o){if(l>=s.length)break;u=s[l++]}else{if((l=s.next()).done)break;u=l.value}p=Math.max(p,r.flattenStrokeDash(I.parseCoordinates(u),t,f,h).items.length)}}}},A=[],T=!1,R=0;R<m.length;R++){var w=m[R];if(w.setterType){var _=!0;switch(w.attributeName){case"stroke-dasharray":l=I.parseCoordinates(w.to),v=y(w.delay);break;case"stroke-dashoffset":v=gt.convertInt(w.to),l=g(w.delay);break;default:_=!1}if(_){d(l,v,w.delay,w.fillReplace&&w.duration>0?w.duration:0),T=!0;continue}}else if(I.asAnimate(w)&&w.playable)switch(l=g(w.delay),v=y(w.delay),b.evaluateStart(w),w.attributeName){case"stroke-dasharray":x&&(x(R),x=void 0);for(var V=[],E=[],N=r.flattenStrokeDash(l,v,f,h).items,M=0;M<p;M++){var P=new Q(r.element);P.id=M,P.baseValue=S(N[M]),P.attributeName="stroke-dasharray",P.delay=w.delay,P.duration=w.duration,P.iterationCount=w.iterationCount,P.fillMode=w.fillMode,E[M]=[],V.push(P)}for(var F=0;F<w.keyTimes.length;F++)for(var O=r.flattenStrokeDash(I.parseCoordinates(w.values[F]),v,f,h).items,B=0;B<p;B++)E[B].push(S(O[B]));for(var C=0;C<p;C++)V[C].values=E[C],V[C].keyTimes=w.keyTimes,w.keySplines?V[C].keySplines=w.keySplines:V[C].timingFunction=w.timingFunction;if(w.fillReplace)for(var L=w.getTotalDuration(),X=r.flattenStrokeDash(g(L),y(L),f,h).items,q=0;q<p;q++)V[q].replaceValue=S(X[q]);A.push.apply(A,V),T=!0;continue;case"stroke-dashoffset":if("break"===function(){var e=w.duration,y=1/e,g=[],m=[],b=0,k=0,S=void 0,x=parseFloat(w.values[0]),A=function(){return 0!==u.leading||0!==u.trailing},R=void 0;if(v!==x?T||w.delay>0?R=d(l,x,w.delay,0,w):(u=r.flattenStrokeDash(l,x,f,h),c[0].items=u.items,p=Math.max(p,u.items.length),R=t):A()&&(R=t),R&&A()&&(r.extendLength(u,n,s),u.path)){var _=I.parseBoxRect([r.value]),V=Math.ceil(o/2),E=G(u.path);if((u.leading>0||u.trailing>0)&&(i=I.drawRect(_.right-_.left,_.bottom-_.top+2*V,_.left,_.top-V)),u.extendedLength=r.pathLength,u.extendedLength>0?u.extendedLength*=E/f:u.extendedLength=E,R===t){var N=r.flattenStrokeDash(l,0,f,h,u);c[0].items=t=N.items,R=t}else for(var M=0;M<c.length;M++){var P=c[M];if(P.items===R){var F=r.flattenStrokeDash(l,0,f,h,u);P.items=R=F.items;break}}a=u.path,p=Math.max(p,R.length)}gt.replaceMap(w.values,function(e){return""+(parseFloat(e)-v)});for(var O=0;O<w.keyTimes.length;O++)O<w.keyTimes.length-1&&function(){for(var t=function(t){return yt.truncatePrecision(t/s*n/e)},a=parseFloat(w.values[O]),i=parseFloat(w.values[O+1]),r=i>a,n=(w.keyTimes[O+1]-w.keyTimes[O])*e,s=Math.abs(i-a),o=""+i%f/f;s>0;){var l=!1;if(0!==k){var u=parseFloat(g[g.length-1]);if(u>0&&u<1){if((S&&!r||!S&&r)&&(u=1-u),g.push(s>=(u*=f)?r?"0":"1":o),!(s-u>0)){m.push(b=w.keyTimes[O+1]);break}b+=t(u),m.push(b),s-=u,k=0}}else if(void 0!==S)l=r?S:!S,S=void 0;else if(m.length){var h=g[g.length-1];l=r?"1"===h:"0"===h}l||m.push(b+(0!==b?y:0)),s>f?(r?(l||g.push("1"),g.push("0")):(l||g.push("0"),g.push("1")),b=t(f),m.push(b)):(l||(g.push(r?"1":"0"),"0"===o&&"0"===g[g.length-1]&&(o="1")),g.push(o),m.push(b=w.keyTimes[O+1]),S=r,k=s),s-=f}}();w.baseValue=void 0,w.replaceValue="0",w.values=g,w.keyTimes=m;var B=w.timingFunction;return B&&(w.keySplines=void 0,w.timingFunction=B),T=!0,"break"}())break}A.push(w)}if(T){for(var z=0;z<c.length;z++){var D=c[z].items;if(D===t)for(var j=D.length;j<p;j++)D.push({start:1,end:1});else for(var Y=c[z].delay,U=c[z].duration,H=c[z].companion,K=c.length>2?r.flattenStrokeDash(g(Y-1),y(Y-1),f,h).items:t,Z=0;Z<p;Z++){var $=new W(r.element);$.id=Z,$.attributeName="stroke-dasharray",$.baseValue=S(K[Z]),$.delay=Y,$.to=S(D[Z]),$.duration=U,$.fillFreeze=0===U,H&&($.companion={index:-1,value:H}),A.push($)}}e.length=0,e.push.apply(e,A)}}}()}return[t,a,i]}},{key:"init",value:function(){var e=this.element;E.path(e)?this.setBaseValue("d"):E.line(e)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):E.rect(e)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):E.circle(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):E.ellipse(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(E.polygon(e)||E.polyline(e))&&this.setBaseValue("points",I.clonePoints(e.points))}},{key:"transforms",get:function(){return void 0===this._transforms&&(this._transforms=I.filterTransforms(V.parse(this.element)||I.convertTransforms(this.element.transform.baseVal))),this._transforms}},{key:"pathLength",get:function(){return gt.convertFloat(this.getAttribute("pathLength"))}},{key:"totalLength",get:function(){return this.element.getTotalLength()}},{key:"instanceType",get:function(){return 1028}}],[{key:"extrapolate",value:function(e,t,a,i,r,n){var s=[];if("points"===e)for(var o=function(e){var t=I.convertPoints(I.parseCoordinates(a[e]));if(t.length){var o=function(){s[e]=i&&E.polygon(i.element)?I.drawPolygon(t,n):I.drawPolyline(t,n)};if(r&&r.length){o();var l=I.getPathCommands(s[e]);l.length&&(t=I.extractPathPoints(l)).length&&(t=I.applyTransforms(r,t,i&&V.origin(i.element)))}i&&i.parent&&i.parent.requireRefit()&&i.parent.refitPoints(t),o()}else s[e]=""},l=0;l<a.length;l++)o(l);else{if("d"===e)return a.slice(0);if(t){r&&r.length&&i&&E.shape(i.element)&&(t=I.drawRefit(i.element,i.parent,n));var u=I.getPathCommands(t);for(l=0;l<a.length;l++){var f=parseFloat(a[l]);if(isNaN(f))s[l]="";else{var h=l<a.length-1?gt.cloneArray(u,[],!0):u,c=void 0,v=void 0,p=void 0,d=void 0,y=void 0,g=void 0;switch(e){case"x":case"x1":case"x2":case"cx":c=f;break;case"y":case"y1":case"y2":case"cy":v=f;break;case"r":d=p=f;break;case"rx":p=f;break;case"ry":d=f;case"width":y=f;break;case"height":g=f;break;default:continue}if(void 0!==c||void 0!==v){var m=h[0],b=h[h.length-1],k=m.start,S=b.end,x=!1;if(void 0!==c)switch(e){case"x":c-=k.x,x=!0;break;case"x1":case"cx":k.x=c,m.coordinates[0]=c;break;case"x2":S.x=c,b.coordinates[0]=c}if(void 0!==v)switch(e){case"y":v-=k.y,x=!0;break;case"y1":case"cy":k.y=v,m.coordinates[1]=v;break;case"y2":S.y=v,b.coordinates[1]=v}if(x)for(var A=Array.isArray(R=h),T=0,R=A?R:R[Symbol.iterator]();;){var w;if(A){if(T>=R.length)break;w=R[T++]}else{if((T=R.next()).done)break;w=T.value}for(var _=w,N=0,M=0;N<_.coordinates.length;N+=2,M++)void 0!==c&&(_.relative||(_.coordinates[N]+=c),_.value[M].x+=c),void 0!==v&&(_.relative||(_.coordinates[N+1]+=v),_.value[M].y+=v)}}else if(void 0!==p||void 0!==d)for(var P=0;P<h.length;P++){var G=h[P];if("A"===G.name.toUpperCase()){if(void 0!==p&&G.radiusX){var F=p-G.radiusX;G.radiusX=p,G.coordinates[0]=2*p*(G.coordinates[0]<0?-1:1),1===P&&(h[0].coordinates[0]-=F,h[0].end.x-=F)}void 0!==d&&G.radiusY&&(G.radiusY=d)}}else if(void 0!==y)for(var O=[1,2],B=0;B<O.length;B++){var C=h[O[B]];switch(C.name){case"m":case"l":case"h":C.coordinates[0]=y*(C.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":C.coordinates[0]=h[0].end.x+y}}else{if(void 0===g){s[l]=a[l-1]||t;continue}for(var L=[2,3],X=0;X<L.length;X++){var q=h[L[X]];switch(q.name){case"m":case"l":case"v":q.coordinates[1]=g*(q.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":q.coordinates[1]=h[0].end.y+g}}}if(s[l]=I.drawPath(h,n),r&&r.length&&(u=I.getPathCommands(s[l])).length){var z=I.extractPathPoints(u);z.length&&(z=I.applyTransforms(r,z,i&&V.origin(i.element)),s[l]=I.drawPath(I.rebindPathPoints(u,z),n))}}}}}return s}},{key:"build",value:function(e,t,a){var i=a&&a.exclude;return i&&i[e.element.tagName]&&(t=I.filterTransforms(t,i[e.element.tagName])),e.draw(t,a),e}}]),t}(),bt=function(e){function t(e,a){var i;return r(this,t),(i=h(this,u(t).call(this,e))).element=e,i.patternElement=a,i}return l(t,Ue(et)),s(t,[{key:"build",value:function(e){(e=Object.assign({},e)).patternElement=this.patternElement,e.initPath=!1,v(u(t.prototype),"build",this).call(this,e)}},{key:"animations",get:function(){return[]}},{key:"instanceType",get:function(){return 130}}]),t}(),kt=function(e){function t(e){var a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r(this,t),(a=h(this,u(t).call(this,e))).element=e,i&&a.setPath(),a}return l(t,Oe(Ue(ot))),s(t,[{key:"setPath",value:function(){this.path=new mt(this.element)}},{key:"build",value:function(e){this.path&&(this.path.parent=this.parent,mt.build(this.path,this.transforms,e))}},{key:"synchronize",value:function(e){if(this.path&&this.animations.length){var t=e&&e.element;this.animateSequentially(this.getAnimateShape(t||this.element),t?void 0:this.getAnimateTransform(),this.path,e)}}},{key:"path",set:function(e){this._path=e,e&&(e.name=this.name)},get:function(){return this._path}},{key:"instanceType",get:function(){return 2052}}]),t}(),St=squared.lib.dom,xt=squared.lib.util;function At(e){return xt.isPercent(e)?parseFloat(e)/100:parseFloat(e)}var Tt=function(e){function t(e,a){var i;return r(this,t),(i=h(this,u(t).call(this,e))).element=e,i.patternElement=a,i.__get_transforms=!1,i.patternUnits="userSpaceOnUse"===St.getNamedItem(i.patternElement,"patternUnits")?1:2,i.patternContentUnits="objectBoundingBox"===St.getNamedItem(i.patternElement,"patternContentUnits")?2:1,i}return l(t,ct(z(Ue(et)))),s(t,[{key:"build",value:function(e){var t=e&&e.element||this.element,a=mt.build(new mt(t),[],e);if(a.value){var i=e&&e.precision;this.clipRegion=a.value,a.clipPath&&(this.clipRegion=a.clipPath);var r=[a.value];this.setPaint(r,i),this.drawRegion=I.parseBoxRect(r);var n=2===this.patternUnits,s=this.patternWidth,o=this.patternHeight,l=this.tileWidth,u=this.tileHeight,f=n?this.drawRegion.left:0,h=n?this.drawRegion.top:0,c=this.offsetX%l,v=this.offsetY%u,p=this.drawRegion.right-(n?this.drawRegion.left:0),d=this.drawRegion.bottom-(n?this.drawRegion.top:0),y=0;for(0!==c&&(c=l-c,p+=l),0!==v&&(v=u-v,d+=u);d>0;){var g=h+y*u-v,m=p,b=0;do{var k=f+b*l-c,S=new bt(t,this.patternElement);S.build(e);var x=S.cascade(),A=Array.isArray(x),T=0;for(x=A?x:x[Symbol.iterator]();;){var R;if(A){if(T>=x.length)break;R=x[T++]}else{if((T=x.next()).done)break;R=T.value}var w=R;I.isShape(w)&&(w.setPath(),w.path&&(w.path.patternParent=this,2===this.patternContentUnits?w.path.refitBaseValue(k/s,g/o,i):w.path.refitBaseValue(k,g,i),mt.build(w.path,w.transforms,e),w.path.fillOpacity=""+parseFloat(w.path.fillOpacity)*parseFloat(this.fillOpacity),w.path.clipPath=I.drawRect(l,u,k,g,i)+(""!==w.path.clipPath?";".concat(w.path.clipPath):"")))}this.append(S),m-=l,b++}while(m>0);y++,d-=u}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){a.fill="",a.fillOpacity="0",a.stroke=this.stroke,a.strokeWidth=this.strokeWidth;var _=new kt(t,!1);_.path=a,this.append(_)}}}},{key:"patternRefitX",value:function(e){return this.drawRegion?e*this.patternWidth:e}},{key:"patternRefitY",value:function(e){return this.drawRegion?e*this.patternHeight:e}},{key:"patternRefitPoints",value:function(e){if(this.drawRegion)for(var t=this.patternWidth,a=this.patternHeight,i=Array.isArray(n=e),r=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var o=s;if(o.x*=t,o.y*=a,void 0!==o.rx&&void 0!==o.ry)if(o.rx===o.ry){var l=Math.min(t,a);o.rx*=l,o.ry*=l}else o.rx*=t,o.ry*=a}return e}},{key:"patternWidth",get:function(){return this.drawRegion?this.drawRegion.right-this.drawRegion.left:0}},{key:"patternHeight",get:function(){return this.drawRegion?this.drawRegion.bottom-this.drawRegion.top:0}},{key:"transforms",get:function(){if(!this.__get_transforms){var e=I.convertTransforms(this.patternElement.patternTransform.baseVal);if(e.length){for(var a,i=V.rotateOrigin(this.patternElement,"patternTransform"),r=this.patternWidth/2,n=this.patternHeight/2,s=Array.isArray(l=e),o=0,l=s?l:l[Symbol.iterator]();;){var f;if(s){if(o>=l.length)break;f=l[o++]}else{if((o=l.next()).done)break;f=o.value}var h=f;switch(h.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;i.length;){var c=i.shift();if(c.angle===h.angle){h.origin={x:r+c.x,y:n+c.y};break}}if(h.origin)break;default:h.origin={x:r,y:n}}}(a=v(u(t.prototype),"transforms",this)).push.apply(a,g(I.filterTransforms(e)))}this.__get_transforms=!0}return v(u(t.prototype),"transforms",this)}},{key:"offsetX",get:function(){var e;return 2===this.patternUnits&&(e=this.patternWidth*At(this.patternElement.x.baseVal.valueAsString)),e||this.patternElement.x.baseVal.value}},{key:"offsetY",get:function(){var e;return 2===this.patternUnits&&(e=this.patternHeight*At(this.patternElement.y.baseVal.valueAsString)),e||this.patternElement.y.baseVal.value}},{key:"tileWidth",get:function(){var e;return 2===this.patternUnits&&(e=this.patternWidth*At(this.patternElement.width.baseVal.valueAsString)),e||this.patternElement.width.baseVal.value}},{key:"tileHeight",get:function(){var e;return 2===this.patternUnits&&(e=this.patternHeight*At(this.patternElement.height.baseVal.valueAsString)),e||this.patternElement.height.baseVal.value}},{key:"instanceType",get:function(){return 258}}]),t}(),Rt=function(e){function t(e,a){var i,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r(this,t),(i=h(this,u(t).call(this,e,!1))).element=e,i.shapeElement=a,i.__get_transforms=!1,i.__get_animations=!1,n&&i.setPath(),i}return l(t,ct(Ze(z(kt)))),s(t,[{key:"setPath",value:function(){this.path=new mt(this.shapeElement),this.path.useParent=this}},{key:"build",value:function(e){v(u(t.prototype),"build",this).call(this,e),this.setPaint(this.path?[this.path.value]:void 0,e&&e.precision)}},{key:"synchronize",value:function(e){(e=Object.assign({},e)).element=this.shapeElement,this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(),void 0,e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"transforms",get:function(){var e=v(u(t.prototype),"transforms",this);return this.__get_transforms||(e.push.apply(e,g(this.getTransforms(this.shapeElement))),this.__get_transforms=!0),e}},{key:"animations",get:function(){var e=v(u(t.prototype),"animations",this);return this.__get_animations||(e.push.apply(e,g(this.getAnimations(this.shapeElement))),this.__get_animations=!0),e}},{key:"instanceType",get:function(){return 10244}}]),t}(),wt=squared.lib.util,_t=function(e){function t(e,a,i){var n;return r(this,t),(n=h(this,u(t).call(this,e,i))).element=e,n.shapeElement=a,n}return l(t,Oe(Ze(Tt))),s(t,[{key:"build",value:function(e){(e=Object.assign({},e)).element=this.shapeElement,v(u(t.prototype),"build",this).call(this,e)}},{key:"synchronize",value:function(e){var a=this,i=[wt.filterArray(this.animations,function(e){return void 0===a.verifyBaseValue(e.attributeName,0)||"x"===e.attributeName||"y"===e.attributeName}),this.getAnimateTransform()],r=i[0],n=i[1];(r.length||n.length)&&this.animateSequentially(this.getAnimateViewRect(r),n,void 0,e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"instanceType",get:function(){return 514}}]),t}(),Vt=squared.lib.dom,Et=function(e){function t(e,a){var i;return r(this,t),(i=h(this,u(t).call(this,e))).element=e,i.symbolElement=a,i}return l(t,ct(Oe(Ze(z(Ue(et)))))),s(t,[{key:"build",value:function(e){this.setRect(),(e=Object.assign({},e)).symbolElement=this.symbolElement,v(u(t.prototype),"build",this).call(this,e);var a=this.getBaseValue("x",0),i=this.getBaseValue("y",0);if(0!==a||0!==i){var r={x:a,y:i},n=this.cascade(),s=Array.isArray(n),o=0;for(n=s?n:n[Symbol.iterator]();;){var l;if(s){if(o>=n.length)break;l=n[o++]}else{if((o=n.next()).done)break;l=o.value}l.translationOffset=r}}this.setPaint(this.getPathAll(),e&&e.precision)}},{key:"synchronize",value:function(e){this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(),void 0,e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"viewBox",get:function(){return this.symbolElement.viewBox.baseVal||Vt.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 66}}]),t}(),Nt={constant:U,util:F};e.Svg=st,e.SvgAnimate=Q,e.SvgAnimateMotion=Le,e.SvgAnimateTransform=te,e.SvgAnimation=W,e.SvgAnimationIntervalMap=ie,e.SvgBaseVal=z,e.SvgBuild=I,e.SvgContainer=et,e.SvgElement=ot,e.SvgG=vt,e.SvgImage=dt,e.SvgPaint=ct,e.SvgPath=mt,e.SvgPattern=bt,e.SvgShape=kt,e.SvgShapePattern=Tt,e.SvgSynchronize=Oe,e.SvgUse=Rt,e.SvgUsePattern=_t,e.SvgUseSymbol=Et,e.SvgView=Ue,e.SvgViewRect=Ze,e.lib=Nt,Object.defineProperty(e,"__esModule",{value:!0})});
