!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,(function(e){"use strict";const t=squared.lib,{CSS_UNIT:s,calculateStyle:i,calculateVar:n,convertAngle:a,getFontSize:r,isLength:o,isPercent:l,parseUnit:c}=t.css,{getNamedItem:h}=t.dom,{clamp:u,convertRadian:f,hypotenuse:d}=t.math,{STRING:p}=t.regex,{getStyleValue:g}=t.session,{convertCamelCase:m,convertFloat:y,isString:v}=t.util,S=`(${p.DECIMAL})`,b={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},T={MATRIX:new RegExp(`(matrix(?:3d)?)\\(${S},\\s+${S},\\s+${S},\\s+${S},\\s+${S},\\s+${S}(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?\\)`,"g"),ROTATE:new RegExp(`(rotate[XY]?)\\(${p.CSS_ANGLE}\\)`,"g"),SKEW:new RegExp(`(skew[XY]?)\\(${p.CSS_ANGLE}(?:,\\s+${p.CSS_ANGLE})?\\)`,"g"),SCALE:new RegExp(`(scale[XY]?)\\(${S}(?:,\\s+${S})?\\)`,"g"),TRANSLATE:new RegExp(`(translate[XY]?)\\(${p.LENGTH_PERCENTAGE}(?:,\\s+${p.LENGTH_PERCENTAGE})?\\)`,"g")},k=/rotate\((-?[\d.]+)(?:,?\s+(-?[\d.]+))?(?:,?\s+(-?[\d.]+))?\)/g;function w(e,t,s,i,n){o(i)?t[s]=c(i,r(e)):l(i)&&(t[s]=parseFloat(i)/100*n)}const x={svg:e=>"svg"===e.tagName,g:e=>"g"===e.tagName,symbol:e=>"symbol"===e.tagName,path:e=>"path"===e.tagName,shape:e=>e.tagName in b,image:e=>"image"===e.tagName,use:e=>"use"===e.tagName,line:e=>"line"===e.tagName,rect:e=>"rect"===e.tagName,circle:e=>"circle"===e.tagName,ellipse:e=>"ellipse"===e.tagName,polygon:e=>"polygon"===e.tagName,polyline:e=>"polyline"===e.tagName,clipPath:e=>"clipPath"===e.tagName,pattern:e=>"pattern"===e.tagName,linearGradient:e=>"linearGradient"===e.tagName,radialGradient:e=>"radialGradient"===e.tagName},E={applyX:(e,t,s)=>e.a*t+e.c*s+e.e,applyY:(e,t,s)=>e.b*t+e.d*s+e.f,clone:e=>({a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}),rotate(e){const t=f(e),s=Math.cos(t),i=Math.sin(t);return{a:s,b:i,c:-1*i,d:s,e:0,f:0}},skew:(e=0,t=0)=>({a:1,b:Math.tan(f(t)),c:Math.tan(f(e)),d:1,e:0,f:0}),scale:(e=1,t=1)=>({a:e,b:0,c:0,d:t,e:0,f:0}),translate:(e=0,t=0)=>({a:1,b:0,c:0,d:1,e:e,f:t})},R={create:(e,t,s=0,i=true,n=true)=>({type:e,matrix:t,angle:s,method:{x:i,y:n}}),parse(e,t){const s=t||e.style.getPropertyValue("transform");if(""!==s){const i=[];for(const n in T){const o=T[n];let l;while(null!==(l=o.exec(s))){const s=l.index,n=l[1],o=n.endsWith("X"),h=n.endsWith("Y");if(n.startsWith("rotate")){const e=a(l[2],l[3]),t=E.rotate(e);o?(t.a=1,t.b=0,t.c=0):h&&(t.b=0,t.c=0,t.d=1),i[s]=R.create(SVGTransform.SVG_TRANSFORM_ROTATE,t,e,!o,!h)}else if(n.startsWith("skew")){const e=a(l[2],l[3]),t=h?0:e,n=h?e:l[4]&&l[5]?a(l[4],l[5]):0,r=E.skew(t,n);o?i[s]=R.create(SVGTransform.SVG_TRANSFORM_SKEWX,r,t,true,false):h?i[s]=R.create(SVGTransform.SVG_TRANSFORM_SKEWY,r,n,false,true):(i[s]=R.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign(Object.assign({},r),{b:0}),t,true,false),0!==n&&(i[s+1]=R.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign(Object.assign({},r),{c:0}),n,false,true)))}else if(n.startsWith("scale")){const e=h?void 0:parseFloat(l[2]),t=h?parseFloat(l[2]):!o&&l[3]?parseFloat(l[3]):e;i[s]=R.create(SVGTransform.SVG_TRANSFORM_SCALE,E.scale(e,o?void 0:t),0,!h,!o)}else if(n.startsWith("translate")){const t=r(e),n=c(l[2],t),a=!o&&l[3]?c(l[3],t):0,u=h?0:n,f=h?n:a;i[s]=R.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,E.translate(u,f),0)}else if(n.startsWith("matrix")){const n=R.matrix(e,t);n&&(i[s]=R.create(SVGTransform.SVG_TRANSFORM_MATRIX,n))}}o.lastIndex=0}const n=[];return i.forEach(e=>{e.fromCSS=true,n.push(e)}),n}},matrix(e,t){T.MATRIX.lastIndex=0;const s=T.MATRIX.exec(t||getComputedStyle(e).transform);if(s)switch(s[1]){case"matrix":return{a:parseFloat(s[2]),b:parseFloat(s[3]),c:parseFloat(s[4]),d:parseFloat(s[5]),e:parseFloat(s[6]),f:parseFloat(s[7])};case"matrix3d":return{a:parseFloat(s[2]),b:parseFloat(s[3]),c:parseFloat(s[6]),d:parseFloat(s[7]),e:parseFloat(s[14]),f:parseFloat(s[15])}}},origin(e,t){v(t)||(t=_(e,"transform-origin"));const s={x:0,y:0};if(""!==t){const i=M(e);let n,a;if(i)({width:n,height:a}=i);else{const t=e.parentElement;if(t instanceof SVGGraphicsElement){const e=t.viewportElement;e&&(x.svg(e)||x.symbol(e))&&({width:n,height:a}=e.viewBox.baseVal)}}n&&a||({width:n,height:a}=e.getBoundingClientRect());const r=t.split(" ");switch(1===r.length&&r.push("center"),r[0]){case"0%":case"left":break;case"100%":case"right":s.x=n;break;case"center":r[0]="50%";default:w(e,s,"x",r[0],n)}switch(r[1]){case"0%":case"top":break;case"100%":case"bottom":s.y=a;break;case"center":r[1]="50%";default:w(e,s,"y",r[1],a)}}return s},rotateOrigin(e,t="transform"){const s=h(e,t),i=[];if(""!==s){let e;k.lastIndex=0;while(null!==(e=k.exec(s))){const t=parseFloat(e[1]);0!==t&&i.push({angle:t,x:y(e[2]),y:y(e[3])})}}return i},typeAsName(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}};function A(e){const t=e.getBoundingClientRect();return t.x=t.left,t.y=t.top,t}function V(e,t,s){switch(t=m(t)){case"clipPath":case"height":case"offsetAnchor":case"offsetPath":case"transform":case"transformOrigin":case"width":return i(e,t,s,M(e));case"animationDelay":case"animationDuration":case"animationIterationCount":case"offsetDistance":case"offsetRotate":return i(e,t,s);case"fill":case"stroke":return i(e,"fontColor",s);case"fillOpacity":case"strokeOpacity":{const t=n(e,s,{boundingSize:1,unitType:64});return isNaN(t)?"":u(t).toString()}case"strokeMiterlimit":{const t=n(e,s,{supportPercent:false,unitType:64,min:1});return isNaN(t)?"":t.toString()}}const a=M(e)||e.getBoundingClientRect(),r=e=>{const{width:t,height:s}=a;return e?Math.min(t,s):d(t,s)};switch(t){case"cx":case"x":case"x1":case"x2":{const t=n(e,s,{boundingSize:a.width});return isNaN(t)?"":t.toString()}case"cy":case"y":case"y1":case"y2":{const t=n(e,s,{boundingSize:a.height});return isNaN(t)?"":t.toString()}case"r":{const t=n(e,s,{boundingSize:r(true),min:0});return isNaN(t)?"0":t.toString()}case"rx":{const t=n(e,s,{boundingSize:a.width,min:0});return isNaN(t)?"0":x.rect(e)?Math.min(t,a.width/2).toString():t.toString()}case"ry":{const t=n(e,s,{boundingSize:a.height,min:0});return isNaN(t)?"0":x.rect(e)?Math.min(t,a.height/2).toString():t.toString()}case"strokeDashoffset":{const t=n(e,s,{boundingSize:r(true),unitType:64});return isNaN(t)?"":t.toString()}case"strokeWidth":{const t=n(e,s,{boundingSize:r(false),unitType:64,min:0});return isNaN(t)?"":t.toString()}}return""}function _(e,t,s=false){let i;return i=s?h(e,t)||g(e,t):g(e,t)||function(e,t){var s;const i=e.dataset.baseValue;if(i)try{const e=JSON.parse(i);if(e)return(null===(s=e[t])||void 0===s?void 0:s.toString().trim())||""}catch(e){}return""}(e,t)||h(e,t),v(i)||!s&&!Array.from(e.style).includes(t)||(i=getComputedStyle(e).getPropertyValue(t)),i||""}function N(e,t,s=true){let i,n=e;do{if(i=_(n,t,s),""!==i&&"inherit"!==i)break;n=n.parentElement}while(n&&!(n instanceof HTMLElement));return i}function P(e,t){const s=h(e,"href");if("#"===s.charAt(0)){const i=s.substring(1);let n;if(t)n=t;else{n=e.parentElement;while(n&&n.parentElement instanceof SVGGraphicsElement)n=n.parentElement}if(n){const e=n.querySelectorAll("*"),t=e.length;let s=0;while(s<t){const t=e.item(s++);if(t.id===i&&t instanceof SVGElement)return t}}else{const e=document.getElementById(i);if(e instanceof SVGElement)return e}}return null}function M(e){let t=e.parentElement;while(t){if(x.svg(t)||x.symbol(t)){const e=t.viewBox;if(e){const t=e.baseVal;if(t.width>0&&t.height>0)return t}}t=t.parentElement}}function F(e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t}function C(e){return F(e).getTotalLength()}var G=Object.freeze({__proto__:null,SVG:x,MATRIX:E,TRANSFORM:R,getDOMRect:A,calculateStyle:V,getAttribute:_,getParentAttribute:N,getTargetElement:P,getNearestViewBox:M,createPath:F,getPathLength:C});const O=squared.lib,{isAngle:I,parseAngle:L}=O.css,{getNamedItem:B}=O.dom,{absoluteAngle:X,offsetAngleY:$,relativeAngle:Y,truncate:z,truncateFraction:D,truncateString:W}=O.math,{CHAR:q,STRING:j,XML:U}=O.regex,{convertWord:K,hasBit:H,isArray:Z,isString:Q,objectMap:J}=O.util,ee=new RegExp(j.DECIMAL,"g"),te=/([A-Za-z])([^A-Za-z]+)?/g,se=new Map;class ie{static drawLine(e,t,s=0,i=0,n){return n&&(e=z(e,n),t=z(t,n),s=z(s,n),i=z(i,n)),`M${e},${t} L${s},${i}`}static drawRect(e,t,s=0,i=0,n){return n?(e=z(s+e,n),t=z(i+t,n),s=z(s,n),i=z(i,n)):(e+=s,t+=i),`M${s},${i} ${e},${i} ${e},${t} ${s},${t} Z`}static drawEllipse(e,t,s,i,n){void 0===i&&(i=s);let a=2*s;return n?(e=z(e-s,n),t=z(t,n),s=z(s,n),i=z(i,n),a=z(a,n)):e-=s,`M${e},${t} a${s},${i},0,0,1,${a},0 a${s},${i},0,0,1,-${a},0`}static drawPolyline(e,t){let s="M";return t?e.forEach(e=>s+=` ${z(e.x,t)},${z(e.y,t)}`):e.forEach(e=>s+=` ${e.x},${e.y}`),s}static drawPath(e,t){let s="";return e.forEach(e=>{switch(s+=(""!==s?" ":"")+e.key,e.key.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":s+=e.coordinates.join(",");break;case"H":s+=e.coordinates[0];break;case"V":s+=e.coordinates[1];break;case"A":s+=`${e.radiusX},${e.radiusY},${e.xAxisRotation},${e.largeArcFlag},${e.sweepFlag},${e.coordinates.join(",")}`}}),t?W(s,t):s}static drawRefit(e,t,s){let i;if(x.path(e)){if(i=B(e,"d"),null==t?void 0:t.requireRefit){const e=ie.getPathCommands(i);if(e.length){const n=ie.getPathPoints(e);n.length&&(t.refitPoints(n),i=ie.drawPath(ie.syncPathPoints(e,n),s))}}}else if(x.line(e)){const n=[{x:e.x1.baseVal.value,y:e.y1.baseVal.value},{x:e.x2.baseVal.value,y:e.y2.baseVal.value}];(null==t?void 0:t.requireRefit)&&t.refitPoints(n),i=ie.drawPolyline(n,s)}else if(x.circle(e)||x.ellipse(e)){let n,a;x.ellipse(e)?(n=e.rx.baseVal.value,a=e.ry.baseVal.value):(n=e.r.baseVal.value,a=n);const r=[{x:e.cx.baseVal.value,y:e.cy.baseVal.value,rx:n,ry:a}];(null==t?void 0:t.requireRefit)&&t.refitPoints(r);const o=r[0];i=ie.drawEllipse(o.x,o.y,o.rx,o.ry,s)}else if(x.rect(e)){let n=e.x.baseVal.value,a=e.y.baseVal.value,r=e.width.baseVal.value,o=e.height.baseVal.value;(null==t?void 0:t.requireRefit)&&(n=t.refitX(n),a=t.refitY(a),r=t.refitSize(r),o=t.refitSize(o)),i=ie.drawRect(r,o,n,a,s)}else if(x.polygon(e)||x.polyline(e)){const n=ie.clonePoints(e.points);(null==t?void 0:t.requireRefit)&&t.refitPoints(n),i=x.polygon(e)?ie.drawPolygon(n,s):ie.drawPolyline(n,s)}else i="";return i}static transformRefit(e,t,s,i,n){const a=ie.getPathCommands(e);if(a.length){let r=ie.getPathPoints(a);if(r.length){const o=Z(t);o&&(r=ie.applyTransforms(t,r,s&&R.origin(s.element))),(null==i?void 0:i.requireRefit)&&i.refitPoints(r),e=ie.drawPath(ie.syncPathPoints(a,r,o),n)}}return e}static getOffsetPath(e,t="auto 0deg"){const s=F(e),i=Math.ceil(s.getTotalLength()),n=[];if(i){const a=[],r=[];let o=0,l=0;I(t)?o=L(t):(ie.getPathCommands(e).forEach(e=>{switch(e.key.toUpperCase()){case"M":case"L":case"H":case"V":case"Z":e.value.forEach(e=>{a.push(e),r.push(false)});break;case"C":case"S":case"Q":case"T":case"A":a.push(e.end),r.push(true)}}),"auto 0deg"!==t&&(l=L(t.split(" ").pop())));let c,h=false,u=0,f=0,d=-1;while(++d<=i){const e=s.getPointAtLength(d);if(a.length){const t=a.findIndex(t=>{const s=t.x.toString(),i=t.y.toString();return s===e.x.toPrecision(s.length-(s.includes(".")?1:0))&&i===e.y.toPrecision(i.length-(i.includes(".")?1:0))});if(-1!==t){const s=a[t+1];s?(h=r[t+1],h?(c=ie.centerPoints(a[t],s),o=0):(c=void 0,o=D(X(e,s)))):c=void 0,f=0,a.splice(0,t+1),r.splice(0,t+1)}}let t;h?(t=c?D(Y(c,e)):0,u>0&&u%360==0&&0===Math.floor(t)&&(f=u),t+=f):t=o,t+=l,n.push({key:d,value:e,rotate:t}),u=Math.ceil(t)}}return n}static getPathCommands(e){e=e.trim();const t=[];let s,i=true;te.lastIndex=0;while(null!==(s=te.exec(e))){let e=s[1];if(i&&"M"!==e.toUpperCase())break;const n=ie.parseCoordinates((s[2]||"").trim());let a,r,o,l,c,h,u;if(!i){const e=t[t.length-1];a=e.key.toUpperCase(),r=e.end}switch(e.toUpperCase()){case"M":i&&(e="M");case"L":if(n.length>=2){n.length%2!=0&&n.length--;break}continue;case"H":if(r&&n.length){n[1]="h"===e?0:r.y,n.length=2;break}continue;case"V":if(r&&n.length){const t=n[0];n[0]="v"===e?0:r.x,n[1]=t,n.length=2;break}continue;case"Z":if(i)continue;{const s=t[0].coordinates;n[0]=s[0],n[1]=s[1],n.length=2,e="Z";break}case"C":if(n.length>=6){n.length=6;break}continue;case"S":if(n.length>=4&&("C"===a||"S"===a)){n.length=4;break}continue;case"Q":if(n.length>=4){n.length=4;break}continue;case"T":if(n.length>=2&&("Q"===a||"T"===a)){n.length=2;break}continue;case"A":if(n.length>=7){[o,l,c,h,u]=n.splice(0,5),n.length=2;break}continue;default:continue}const f=n.length;if(f>=2){const s=e===e.toLowerCase(),a=[];for(let e=0;e<f;e+=2){let t=n[e],i=n[e+1];s&&r&&(t+=r.x,i+=r.y),a.push({x:t,y:i})}t.push({key:e,value:a,start:a[0],end:a[a.length-1],relative:s,coordinates:n,radiusX:o,radiusY:l,xAxisRotation:c,largeArcFlag:h,sweepFlag:u}),i=false}}return t}static getPathPoints(e){const t=[];let s=0,i=0;return e.forEach(e=>{const n=e.coordinates,a=n.length;for(let r=0;r<a;r+=2){e.relative?(s+=n[r],i+=n[r+1]):(s=n[r],i=n[r+1]);const a={x:s,y:i};"A"===e.key.toUpperCase()&&(a.rx=e.radiusX,a.ry=e.radiusY),t.push(a)}e.relative&&(e.key=e.key.toUpperCase())}),t}static syncPathPoints(e,t,s=false){e:{let i;const n=e.length;let a=0;while(a<n){const n=e[a++],r=n.coordinates;if(n.relative){if(!i)break;if(!s||"H"!==n.key&&"V"!==n.key){const e=r.length;for(let s=0,a=0;s<e;s+=2){const e=t.shift();if(!e)break e;r[s]=e.x-i.x,r[s+1]=e.y-i.y,"a"===n.key&&void 0!==e.rx&&void 0!==e.ry&&(n.radiusX=e.rx,n.radiusY=e.ry),n.value[a++]=e}n.key=n.key.toLowerCase()}else{const e=t.shift();if(!e)break e;r[0]=e.x,r[1]=e.y,n.value[0]=e,n.start=e,n.end=e,n.key="L",n.relative=false}i=n.end}else{switch(n.key.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":{const s=r.length;for(let i=0,a=0;i<s;i+=2){const s=t.shift();if(!s){e=[];break e}r[i]=s.x,r[i+1]=s.y,n.value[a++]=s}break}case"A":{const s=t.shift();if(!s){e=[];break e}r[0]=s.x,r[1]=s.y,n.radiusX=s.rx,n.radiusY=s.ry,n.value[0]=s;break}}n.relative||(i=n.end)}}}return e}static filterTransforms(e,t){const s=[];return e.forEach(e=>{const i=e.type;if(!t||!t.includes(i)){switch(i){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===e.angle)return;break;case SVGTransform.SVG_TRANSFORM_SCALE:{const t=e.matrix;if(1===t.a&&1===t.d)return;break}case SVGTransform.SVG_TRANSFORM_TRANSLATE:{const t=e.matrix;if(0===t.e&&0===t.f)return;break}}s.push(e)}}),s}static applyTransforms(e,t,s){const i=ie.clonePoints(t);return e.slice(0).reverse().forEach(e=>{const t=e.matrix;let n=0,a=0,r=0,o=0;if(s){const{x:i,y:l}=s,c=e.method;switch(e.type){case SVGTransform.SVG_TRANSFORM_SCALE:c.x&&(r=i*(1-t.a)),c.y&&(o=l*(1-t.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:c.y&&(a-=l);break;case SVGTransform.SVG_TRANSFORM_SKEWY:c.x&&(n-=i);break;case SVGTransform.SVG_TRANSFORM_ROTATE:c.x&&(n-=i,r=i+$(e.angle,i)),c.y&&(a-=l,o=l+$(e.angle,l))}}i.forEach(s=>{const{x:i,y:l}=s;if(s.x=E.applyX(t,i,l+a)+r,s.y=E.applyY(t,i+n,l)+o,e.type===SVGTransform.SVG_TRANSFORM_SCALE){const{rx:e,ry:i}=s;void 0!==e&&void 0!==i&&(s.rx=E.applyX(t,e,i+a),s.ry=E.applyY(t,e+n,i))}})}),i}static convertTransforms(e){const t=e.numberOfItems,s=new Array(t);let i=0;while(i<t){const{type:t,matrix:n,angle:a}=e.getItem(i);s[i++]=R.create(t,n,a)}return s}static clonePoints(e){if(Array.isArray(e)){const t=e.length,s=new Array(t);let i=-1;while(++i<t){const{x:t,y:n,rx:a,ry:r}=e[i],o={x:t,y:n};void 0!==a&&void 0!==r&&(o.rx=a,o.ry=r),s[i]=o}return s}{const t=e.numberOfItems,s=new Array(t);let i=0;while(i<t){const{x:t,y:n}=e.getItem(i);s[i++]={x:t,y:n}}return s}}static minMaxPoints(e,t=false){let{x:s,y:i}=e[0],n=s,a=i;const r=e.length;let o=0;while(++o<r){const{x:r,y:l}=e[o];if(t&&o>0){const{rx:t,ry:c}=e[o];if(void 0!==t&&void 0!==c){const{x:h,y:u}=e[o-1];let f=(r+h)/2,d=(l+u)/2;r>h?d-=c:r<h&&(d+=c),l<u?f+=t:l>h&&(f-=t),s=Math.min(f,s),n=Math.max(f,n),i=Math.min(d,i),a=Math.max(d,a)}}r<s?s=r:r>n&&(n=r),l<i?i=l:l>a&&(a=l)}return[s,i,n,a]}static centerPoints(...e){const t=this.minMaxPoints(e);return{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}}static convertPoints(e){const t=e.length;if(t%2==0){const s=new Array(t/2);for(let i=0,n=0;i<t;i+=2)s[n++]={x:e[i],y:e[i+1]};return s}return[]}static parsePoints(e){return J(e.trim().split(q.SPACE),e=>{const[t,s]=e.split(U.SEPARATOR);return{x:parseFloat(t),y:parseFloat(s)}})}static parseCoordinates(e){const t=[];let s;ee.lastIndex=0;while(null!==(s=ee.exec(e))){const e=parseFloat(s[0]);isNaN(e)||t.push(e)}return t}static getBoxRect(e){let t=[];e.forEach(e=>t=t.concat(ie.getPathPoints(ie.getPathCommands(e))));const[s,i,n,a]=this.minMaxPoints(t,true);return{top:i,right:n,bottom:a,left:s}}static setName(e){if(e){let t,s="";if(Q(e.id)){const i=K(e.id,true);se.has(i)||(s=i),t=i}else t=e.tagName;let i=se.get(t)||0;return""!==s?(se.set(s,i),s):(se.set(t,++i),`${t}_${i}`)}return se.clear(),""}}ie.isContainer=e=>H(e.instanceType,2),ie.isElement=e=>H(e.instanceType,4),ie.isShape=e=>H(e.instanceType,2052),ie.isAnimate=e=>H(e.instanceType,16392),ie.isAnimateTransform=e=>H(e.instanceType,49160),ie.asSvg=e=>18===e.instanceType,ie.asG=e=>34===e.instanceType,ie.asPattern=e=>130===e.instanceType,ie.asShapePattern=e=>258===e.instanceType,ie.asUsePattern=e=>514===e.instanceType,ie.asImage=e=>4100===e.instanceType,ie.asUse=e=>10244===e.instanceType,ie.asUseSymbol=e=>66===e.instanceType,ie.asSet=e=>8===e.instanceType,ie.asAnimate=e=>16392===e.instanceType,ie.asAnimateTransform=e=>49160===e.instanceType,ie.asAnimateMotion=e=>114696===e.instanceType,ie.drawCircle=(e,t,s,i)=>ie.drawEllipse(e,t,s,s,i),ie.drawPolygon=(e,t)=>e.length?ie.drawPolyline(e,t)+"Z":"";const{getNamedItem:ne}=squared.lib.dom;function ae(e,t,s,i,n){const a=e.length;let r=0;while(r<a){const a=e[r++];a.x+=t,a.y+=s,void 0!==a.rx&&void 0!==a.ry&&(a.rx*=i,a.ry*=n)}}var re=e=>class extends e{constructor(){super(...arguments),this._baseVal={}}setBaseValue(e,t){if(void 0!==t){if(this.verifyBaseValue(e,t))return this._baseVal[e]=t,true}else switch(e){case"d":return this._baseVal[e]=ne(this.element,"d"),true;case"points":{const t=this.element[e];if(Array.isArray(t))return this._baseVal[e]=ie.clonePoints(t),true;break}default:{const t=this.element[e];if(t){const s=t.baseVal;if(s)return this._baseVal[e]=s.value,true}break}}return false}getBaseValue(e,t){var s;return null!==(s=this._baseVal[e])&&void 0!==s?s:this.setBaseValue(e)?void 0:t}refitBaseValue(e,t,s,i=1,n=1){const a=this._baseVal;for(const r in a){const o=a[r];if("string"==typeof o){if("d"===r){const l=ie.getPathCommands(o),c=ie.getPathPoints(l);ae(c,e,t,i,n),a[r]=ie.drawPath(ie.syncPathPoints(l,c),s)}}else if("number"==typeof o)switch(r){case"cx":case"x1":case"x2":case"x":a[r]+=e;break;case"cy":case"y1":case"y2":case"y":a[r]+=t;break;case"r":a[r]*=Math.min(i,n);break;case"rx":case"width":a[r]*=i;break;case"ry":case"height":a[r]*=n}else Array.isArray(o)&&"points"===r&&ae(o,e,t,i,n)}}verifyBaseValue(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}};const oe=squared.lib,{getFontSize:le,isLength:ce,parseUnit:he}=oe.css,{getNamedItem:ue}=oe.dom,{capitalize:fe,hasBit:de,isNumber:pe,isString:ge}=oe.util,me=/-?\d+ms$/,ye=/-?\d+s$/,ve=/-?\d+min$/,Se=/-?\d+(.\d+)?h$/,be=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/;function Te(e,t){const s=de(this.fillMode,t);e?s||(this.fillMode|=t):s&&(this.fillMode^=t)}class ke{constructor(e,t){if(this.element=null,this.baseValue="",this.fillMode=0,this.synchronizeState=0,this.paused=false,this.animationElement=null,this._attributeName="",this._duration=-1,this._delay=0,this._to="",this._dataset={},e){const t=e.dataset;for(const e in t){const s=t[e];if(ge(s))try{this._dataset[e]=JSON.parse(s)}catch(e){}}this.element=e}if(t){this.animationElement=t,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");const e=ue(t,"dur");""!==e&&"indefinite"!==e&&(this.duration=ke.convertClockTime(e))}}static convertClockTime(e){let t=0,s=0;if(pe(e))t=parseInt(e);else if(me.test(e))s=parseFloat(e);else if(ye.test(e))t=parseFloat(e);else if(ve.test(e))t=60*parseFloat(e);else if(Se.test(e))t=60*parseFloat(e)*60;else{const i=be.exec(e);if(i){const e=i[2],n=i[3],a=i[4],r=i[5];e&&(t+=60*parseInt(e)*60),n&&(t+=60*parseInt(n)),a&&(t+=parseInt(a)),r&&(s=parseInt(r)*(r.length<3?Math.pow(10,3-r.length):1)),i[1]&&(t*=-1,s*=-1)}}return 1e3*t+s}setAttribute(e,t){const s=this.animationElement;if(s){const i=ue(s,e);""!==i&&(ge(t)?(t=t.trim(),this[e+fe(t)]=i===t):this[e]=i)}}addState(...e){e.forEach(e=>{de(this.synchronizeState,e)||(this.synchronizeState|=e)})}removeState(...e){e.forEach(e=>{de(this.synchronizeState,e)&&(this.synchronizeState^=e)})}hasState(...e){return e.some(e=>de(this.synchronizeState,e))}set attributeName(e){var t,s,i,n;if("transform"!==e&&!ge(this.baseValue)){let a=null===(s=null===(t=this._dataset.baseValue)||void 0===t?void 0:t[e])||void 0===s?void 0:s.toString().trim();if(a)this.baseValue=a;else{const t=this.element;if(t){switch(e){case"opacity":case"stroke-opacity":case"fill-opacity":a=_(t,e)||"1";break;default:a=_(t,e)}if(ge(a))this.baseValue=a;else{const s=this.animationElement;if(s&&"paused"===getComputedStyle(t).animationPlayState){const t=s.parentElement;a=null===(n=null===(i=null==t?void 0:t[e])||void 0===i?void 0:i.baseVal)||void 0===n?void 0:n.valueAsString,a&&ce(a)&&(this.baseValue=he(a,le(t)).toString())}}}}}this._attributeName=e}get attributeName(){return this._attributeName}set delay(e){this._delay=e}get delay(){return this._delay}set duration(e){this._duration=Math.round(e)}get duration(){return this._duration}set to(e){this._to=e}get to(){return this._to}set fillBackwards(e){Te.bind(this,e,8)()}get fillBackwards(){return de(this.fillMode,8)}set fillForwards(e){Te.bind(this,e,4)()}get fillForwards(){return de(this.fillMode,4)}set fillFreeze(e){Te.bind(this,e,2)()}get fillFreeze(){return de(this.fillMode,2)}get fillReplace(){const e=this.fillMode;return 0===e||8===e}get parentContainer(){let e=this._parent;while(e&&!ie.isContainer(e))e=e.parent;return e}set parent(e){this._parent=e}get parent(){return this._parent}set group(e){this._group=e}get group(){return this._group||{id:Number.NEGATIVE_INFINITY,name:""}}set setterType(e){}get setterType(){return true}get dataset(){return this._dataset}get instanceType(){return 8}}const we={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"},xe="cubic-bezier\\(([\\d.]+), ([\\d.]+), ([\\d.]+), ([\\d.]+)\\)";var Ee=Object.freeze({__proto__:null,KEYSPLINE_NAME:we,STRING_CUBICBEZIER:xe});const Re=squared.lib,{getHexCode:Ae,parseColor:Ve}=Re.color,{getFontSize:_e,isLength:Ne,parseUnit:Pe}=Re.css,{getNamedItem:Me}=Re.dom,{CHAR:Fe,XML:Ce}=Re.regex,{flatMap:Ge,isNumber:Oe,replaceMap:Ie,sortNumber:Le,trimEnd:Be}=Re.util,Xe=/^\s*[\d.]+\s+[\d.]+\s+[\d.]+\s+[\d.]+\s*$/,$e=e=>parseFloat((1-e).toPrecision(5));class Ye extends ke{constructor(e,t){if(super(e,t),this.type=0,this.additiveSum=false,this.accumulateSum=false,this._iterationCount=1,this._from="",this._reverse=false,this._alternate=false,this._setterType=false,this._repeatDuration=-1,this._timingFunction="",t){const e=Me(t,"values"),s=-1!==this.duration?Ye.toFractionList(Me(t,"keyTimes")):[];if(""!==e){const t=Be(e,";").split(Ce.DELIMITER);this.values=t;const i=t.length;i>1&&i===s.length?(this.from=t[0],this.to=t[i-1],this.keyTimes=s):1===i&&(this.to=this.values[0],this.convertToValues())}else this.from=Me(t,"from"),this.convertToValues(s);const i=Me(t,"repeatDur");""!==i&&"indefinite"!==i&&(this._repeatDuration=ke.convertClockTime(i));const n=Me(t,"repeatCount");this.iterationCount="indefinite"===n?-1:parseFloat(n),"animate"===t.tagName&&this.setCalcMode()}}static convertTimingFunction(e){const t=we[e];if(t)return t;if(Xe.test(e))return e;if(e.startsWith("step"))return we.linear;{const t=new RegExp(xe).exec(e);return t?t[1]+" "+t[2]+" "+t[3]+" "+t[4]:we.ease}}static convertStepTimingFunction(e,t,s,i,n,a){const r=i[n],o=i[n+1];let l,c;switch(e){case"fill":case"stroke":{const e=Ve(r),t=Ve(o);e&&t&&(l=[e],c=[t]);break}case"points":l=ie.convertPoints(ie.parseCoordinates(r)),c=ie.convertPoints(ie.parseCoordinates(o));break;case"rotate":case"scale":case"translate":l=Ie(r.trim().split(Fe.SPACE),e=>parseFloat(e)),c=Ie(o.trim().split(Fe.SPACE),e=>parseFloat(e));break;default:Oe(r)?l=[parseFloat(r)]:Ne(r)&&(l=[Pe(r,a)]),Oe(o)?c=[parseFloat(o)]:Ne(o)&&(c=[Pe(o,a)])}if(l&&c){const i=l.length;if(i===c.length){switch(t){case"step-start":t="steps(1, start)";break;case"step-end":t="steps(1, end)"}const a=/steps\((\d+)(?:, (start|end))?\)/.exec(t);if(a){const t=s[n+1]-s[n],r=parseInt(a[1]),o=100/r,h=[],u=[];for(let f=0;f<=r;++f){const d=0===f&&"start"===a[2]?1:0,p=s[n]+t*(f/r),g=o*(f+d)/100,m=[];switch(e){case"fill":case"stroke":{const e=l[0].rgba,t=c[0].rgba,s=Ae(Ye.getSplitValue(e.r,t.r,g),Ye.getSplitValue(e.g,t.g,g),Ye.getSplitValue(e.b,t.b,g)),i=Ae(Ye.getSplitValue(e.a,t.a,g));m.push("#"+(s+("FF"!==i?i:"")));break}case"points":{let e=0;while(e<i){const t=l[e],s=c[e++];m.push(Ye.getSplitValue(t.x,s.x,g)+","+Ye.getSplitValue(t.y,s.y,g))}break}default:{let e=0;while(e<i)m.push(Ye.getSplitValue(l[e],c[e++],g).toString());break}}if(!m.length)return;h.push(p),u.push(m.join(" "))}return[h,u]}}}}static toFractionList(e,t=";",s=true){let i=0;const n=Ie(e.split(t),e=>{const t=parseFloat(e);return isNaN(t)||s&&!(t>=i&&t<=1)?-1:(i=t,t)});return n.length>1&&(!s||0===n[0]&&n.some(e=>-1!==e))?n:[]}get from(){return this._from}set from(e){if(void 0===this._values){const t=this.animationElement;if(t){if(""===this.to){const s=Me(t,"by"),i=ie.parseCoordinates(s);if(i.length&&(""===e&&(e=this.baseValue||""),""!==e)){const t=ie.parseCoordinates(e),s=t.length;if(i.length===s){const e=[];let n=0;while(n<s)e.push(t[n]+i[n++]);this.to=e.join(",")}}}ie.parseCoordinates(this.to).length&&this.setAttribute("additive","sum")}}this._from=e}setCalcMode(e,t){const s=this.animationElement;if(s){t||(t=Me(s,"calcMode")||"linear");const i=this.keyTimes;switch(t){case"discrete":if(0===i[0]&&2===i.length){let t=[],n=[];const a=this.values,r=i.length-1;let o=0;while(o<r){const r=Ye.convertStepTimingFunction(e||this.attributeName,"step-end",i,a,o++,_e(s));r&&(t=t.concat(r[0]),n=n.concat(r[1]))}t.push(i.pop()),n.push(a.pop()),this._values=n,this._keyTimes=t,this._keySplines=[we["step-end"]]}break;case"paced":this._keySplines=void 0;break;case"spline":this.keySplines=Ge(Me(s,"keySplines").split(";"),e=>e.trim());case"linear":if(0!==i[0]&&1!==i[i.length-1]){const e=[],t=this.values.length;let s=0;while(s<t)e.push(s++/(t-1));this._keyTimes=e,this._keySplines=void 0}}}}convertToValues(e){const t=this.to;if(t){if(this.values=[this.from,t],e&&2===e.length){const t=this.keyTimes;if(2!==t.length||0===t[0]&&t[1]<=1)return void(this.keyTimes=e)}this.keyTimes=[0,1]}}setGroupOrdering(e){if(this.group.ordering=e,this.fillBackwards){const t=this.group.name;let s=false,i=e.length-1;while(i>=0){const n=e[i--];if(s){if("forwards"!==n.fillMode){this.fillBackwards=false;break}}else n.name===t&&(s=true)}}}getIntervalEndTime(e,t=false){const s=this.getTotalDuration();if(e<s){const{duration:i,keyTimes:n}=this;let a=this.delay;while(a+i<=e)a+=i;return Math.min(a+(t?1:n[n.length-1])*i,s)}return s}getTotalDuration(e=false){let t=this.iterationCount;return e&&-1===t&&(t=1),-1!==t?Math.min(this.delay+this.duration*t,this.end||Number.POSITIVE_INFINITY):Number.POSITIVE_INFINITY}set delay(e){super.delay=e;const t=this.animationElement,s=t&&Me(t,"end");if(s){const e=Le(Ie(s.split(";"),e=>ke.convertClockTime(e)))[0];if(!isNaN(e)){const{duration:t,iterationCount:s}=this;if(-1===s||t>0&&e<t*s){const i=this.delay;i>e?(this.end=e,-1===s&&(this.iterationCount=Math.ceil((e-i)/t))):this.duration=-1}}}}get delay(){return super.delay}set duration(e){super.duration=e}get duration(){const e=super.duration;return-1===e&&-1!==this._repeatDuration?this._repeatDuration:e}set iterationCount(e){this._iterationCount=isNaN(e)?1:e;const t=this.animationElement;t&&(-1!==this.iterationCount?(this.setAttribute("accumulate","sum"),this.fillFreeze="freeze"===Me(t,"fill")):(this.accumulateSum=false,this.fillFreeze=false))}get iterationCount(){const e=this.duration;if(e>0){const t=this._iterationCount,s=this._repeatDuration;return-1!==s&&(-1===t||s<t*e)?s/e:t}return 1}set to(e){super.to=e}get to(){return this._setterType?this.valueTo||super.to:this.setterType?this.values[0]:super.to}set values(e){this._values=e,e&&e.length!==this.keyTimes.length&&(this._keyTimes=void 0,this._keySplines=void 0)}get values(){return void 0===this._values&&(this._values=[]),this._values}get valueTo(){const e=this._values;return(null==e?void 0:e[e.length-1])||""}get valueFrom(){return this.values[0]||""}set keyTimes(e){const t=this._values;void 0!==t&&t.length!==e.length||!e.every(e=>e>=0&&e<=1)||(this._keyTimes=e)}get keyTimes(){return void 0===this._keyTimes&&(this._keyTimes=[]),this._keyTimes}set keySplines(e){if(null==e?void 0:e.length){const t=this.keyTimes.length-1;if(e.length>=t&&!e.every(e=>""===e||e===we.linear)){const s=[];let i=0;while(i<t){const t=Ie(e[i++].split(Fe.SPACE),e=>parseFloat(e));4===t.length&&!t.some(e=>isNaN(e))&&t[0]>=0&&t[0]<=1&&t[2]>=0&&t[2]<=1?s.push(t.join(" ")):s.push(we.linear)}this._keySplines=s}}else this._keySplines=void 0}get keySplines(){return this._keySplines}set timingFunction(e){this._timingFunction=e?Ye.convertTimingFunction(e):e}get timingFunction(){var e;return this._timingFunction||(null===(e=this.keySplines)||void 0===e?void 0:e[0])||""}set reverse(e){if(this.length&&e!==this._reverse){const e=this.keyTimes,t=this._keySplines,s=e.length,i=new Array(s);let n=s-1,a=0;while(n>=0)i[a++]=1-e[n--];if(this.keyTimes=i,this.values.reverse(),t){const e=[];n=t.length-1;while(n>=0){const s=Ie(t[n--].split(" "),e=>parseFloat(e));e.push(4===s.length?$e(s[2])+" "+$e(s[3])+" "+$e(s[0])+" "+$e(s[1]):we.linear)}this._keySplines=e}}this._reverse=e}get reverse(){return this._reverse}set alternate(e){this._alternate=e}get alternate(){return this._alternate}get playable(){return!this.paused&&this.duration>0&&this.keyTimes.length>0}get fillReplace(){return super.fillReplace||-1===this.iterationCount}get fromToType(){const e=this.keyTimes;return 2===e.length&&0===e[0]&&1===e[1]}get evaluateStart(){const e=this.keyTimes;return e.length>0&&e[0]>0}get evaluateEnd(){const e=this.keyTimes;return e.length>0&&e[e.length-1]<1}set setterType(e){this._setterType=e}get setterType(){if(this._setterType)return true;if(this.animationElement&&0===this.duration){const e=this.keyTimes;return e.length>=2&&0===e[0]&&""!==this.values[0]}return false}set length(e){0===e&&(this._values=void 0)}get length(){var e;return(null===(e=this._values)||void 0===e?void 0:e.length)||0}get instanceType(){return 16392}}Ye.getSplitValue=(e,t,s)=>e+(t-e)*s;const ze=squared.lib,{getNamedItem:De}=ze.dom,{replaceMap:We}=ze.util;class qe extends Ye{constructor(e,t){if(super(e,t),this.attributeName="transform",t){const e=De(t,"type");this.setType(e),this.setCalcMode(e)}}static toRotateList(e){const t=[],s=e.length;let i=0;while(i<s){const s=e[i++];if(""===s)t.push([0,0,0]);else{const e=ie.parseCoordinates(s);if(2===e.length&&(e[2]=0),3!==e.length)return;t.push(e)}}return t}static toScaleList(e){const t=[],s=e.length;let i=0;while(i<s){const s=e[i++];if(""===s)t.push([1,1,0,0]);else{const e=ie.parseCoordinates(s);if(1===e.length&&(e[1]=e[0]),2===e.length&&(e[2]=0,e[3]=0),4!==e.length)return;t.push(e)}}return t}static toTranslateList(e){const t=[],s=e.length;let i=0;while(i<s){const s=e[i++];if(""===s)t.push([0,0]);else{const e=ie.parseCoordinates(s);if(1===e.length&&(e[1]=0),2!==e.length)return;t.push(e)}}return t}static toSkewList(e){const t=[],s=e.length;let i=0;while(i<s){const s=e[i++];if(""===s)t.push([0]);else{const e=ie.parseCoordinates(s);if(1!==e.length)return;t.push(e)}}return t}expandToValues(){if(this.additiveSum){const{duration:e,keyTimes:t,iterationCount:s}=this;if(-1!==s&&e>0&&t.length){const i=e*s;e:{const{type:n,keySplines:a,values:r}=this,o=[],l=[],c=[];let h;const u=t.length;for(let f=0;f<s;++f){f>0&&a&&c.push("");for(let d=0;d<u;++d){const p=ie.parseCoordinates(r[d]),g=p.length;if(!g)break e;{let r;switch(n){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===g?r=[p[0],0]:2===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===g?r=[p[0],p[0]]:2===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===g?r=[p[0],0,0]:3===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===g&&(r=p)}if(!r)break e;{let n=(t[d]+f)*e;if(h){const e=r.length;let t=0;while(t<e)r[t]+=h[t++]}f<s-1&&d===u-1&&(this.accumulateSum&&(h=r),n--),o.push(n/i),l.push(r.join(" ")),a&&d<u-1&&c.push(a[d])}}}}this.values=l,this.keyTimes=o,this.keySplines=c.length?c:void 0,this.duration=i,this.iterationCount=1,this.accumulateSum=false}}}}setType(e){let t;switch(e){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement&&(t=qe.toTranslateList(this.values));break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement&&(t=qe.toScaleList(this.values));break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement&&(t=qe.toRotateList(this.values));break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement&&(t=qe.toSkewList(this.values));break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement&&(t=qe.toSkewList(this.values));break;default:return}t&&(this.values=We(t,e=>e.join(" "))),this.baseValue=R.typeAsValue(this.type)}get instanceType(){return 49160}}const{hasValue:je,safeNestedArray:Ue,sortNumber:Ke}=squared.lib.util;class He{constructor(e,...t){e=(t.length?e.filter(e=>t.includes(e.attributeName)):e.slice(0)).sort((e,t)=>e.delay===t.delay?e.group.id<t.group.id?1:-1:e.delay<t.delay?-1:1),t.length=0,e.forEach(e=>{const s=He.getKeyName(e);t.includes(s)||t.push(s)});const s={},i={},n={},a=(e,t,s,a=0,r,o=false,l=false,c=0,h=false,u)=>{s&&(Ue(i[e],t).push({time:t,value:s,animation:r,start:o,end:l,endTime:a,fillMode:c,infinite:h,valueFrom:u}),n[e].add(t))};t.forEach(t=>{s[t]=new Map,i[t]={},n[t]=new Set;const r=t.split(":")[0],o=e.filter(e=>e.fillBackwards&&e.attributeName===r).sort((e,t)=>e.group.id<t.group.id?1:-1)[0];if(o){const e=o.delay;a(t,0,o.values[0],e,o,0===e,false,8)}}),e.forEach(e=>{const t=He.getKeyName(e);if(e.baseValue&&void 0===i[t][-1]&&a(t,-1,e.baseValue),e.setterType){const{delay:s,duration:i}=e,n=e.fillReplace&&i>0;a(t,s,e.to,n?s+i:0,e,n,!n,2),n&&a(t,s+i,"",0,e,false,true,2)}else if(ie.isAnimate(e)&&e.duration>0){const s=-1===e.iterationCount,i=e.getTotalDuration();a(t,e.delay,e.valueTo,i,e,true,false,0,s,e.valueFrom),s||e.fillReplace||a(t,i,e.valueTo,0,e,false,true,e.fillForwards?4:2)}});for(const e in i)Ke(Array.from(n[e])).forEach(t=>{const n=i[e][t];for(let t=0;t<n.length;++t){const i=n[t],a=i.animation;if(""===i.value||a&&i.start&&ie.isAnimate(a)&&""===a.from){let a;for(const t of s[e].values()){const e=t.length;let s=0;while(s<e){const e=t[s++];if(i.animation!==e.animation&&""!==e.value&&(-1===e.time||4===e.fillMode||2===e.fillMode)){a=e.value;break}}}a?i.value=a:""===i.value&&n.splice(t--,1)}}n.length&&(n.sort((e,t)=>e.animation&&t.animation?e.fillMode===t.fillMode?e.animation.group.id<t.animation.group.id?1:-1:e.fillMode<t.fillMode?1:-1:0),s[e].set(t,n))});for(const e in s)for(const[t,i]of s[e].entries())i.forEach(i=>{var n;const a=i.animation;if(a)if(2===i.fillMode){const i=[];for(const[n,r]of s[e].entries())if(n<t)r.forEach(e=>{if(e.start){const t=e.animation;(null==t?void 0:t.animationElement)&&i.push(t)}});else for(let e=0;e<r.length;++e){const s=r[e];if(n>t)s.end&&i.includes(s.animation)&&r.splice(e--,1);else if(s.end){const t=s.animation;(null==t?void 0:t.animationElement)&&t.group.id<a.group.id&&r.splice(e--,1)}}}else if(4===i.fillMode||i.infinite){let i=false;const r=a.group,o=r.ordering;if(o){const e=a.getTotalDuration(),t=r.name,s=o.length;let n=0;while(n<s){const s=o[n++];if(s.name===t)i=true;else if(He.getGroupEndTime(s)>=e)break}}const l=[];for(const[r,o]of s[e].entries())if(!i&&r<t)o.forEach(e=>{if(e.start){const t=e.animation;t&&l.push(t)}});else for(let e=0;e<o.length;++e){const s=o[e];if(r>t){const t=s.animation;(i||t&&(s.end&&l.includes(t)||null===a.animationElement&&t.group.id<a.group.id))&&o.splice(e--,1)}else if(s.end){((null===(n=s.animation)||void 0===n?void 0:n.group.id)||NaN)<a.group.id&&o.splice(e--,1)}}}});for(const e in s){const t=s[e];for(const[e,s]of t.entries())0===s.length&&t.delete(e)}this.map=s}has(e,t,s){const i=this.map[e];return void 0!==t?!(!i||!i.has(t))&&(!s||-1!==i.get(t).findIndex(e=>e.animation===s)):!!i}get(e,t,s=false){let i;const n=this.map[e];if(n)for(const[e,a]of n.entries()){if(!(e<=t))break;{const n=a.length;let r=0;while(r<n){const n=a[r++];if(""!==n.value&&(-1===n.time||n.end&&(4===n.fillMode||2===n.fillMode))||s&&n.start&&t!==e){i=n.value;break}}}}return i}paused(e,t){let s=0;const i=this.map[e];if(i)for(const[e,n]of i.entries()){if(!(e<=t))break;{const e=n.length;let i=0;while(i<e){const e=n[i++];if(e.start&&(e.infinite||0===e.fillMode&&e.endTime>t)){if(!e.animation){s=1;break}s=2}else if(e.end&&(4===e.fillMode||1===s&&2===e.fillMode)){s=0;break}}}}return 0===s}evaluateStart(e,t){const s=e.values;let i=e.reverse?s[s.length-1]:s[0];return""===i&&(i=this.get(e.attributeName,e.delay)||(null==t?void 0:t.toString())||e.baseValue,je(i)&&(i=i.toString(),e.reverse?(s[s.length-1]=i,e.to=i):(s[0]=i,e.from=i))),s}}He.getGroupEndTime=e=>"infinite"===e.iterationCount?Number.POSITIVE_INFINITY:e.delay+e.duration*parseInt(e.iterationCount),He.getKeyName=e=>e.attributeName+(ie.isAnimateTransform(e)?":"+R.typeAsName(e.type):"");const Ze=squared.lib,{clamp:Qe,equal:Je,multipleOf:et}=Ze.math,{CHAR:tt}=Ze.regex,{hasBit:st,hasValue:it,isEqual:nt,isNumber:at,joinArray:rt,objectMap:ot,replaceMap:lt,safeNestedArray:ct,spliceArray:ht,sortNumber:ut}=Ze.util,ft=["x1","y1","x2","y2"],dt=["width","height","x","y"],pt=["points"],gt=["cx","cy","r"],mt=["cx","cy","rx","ry"];function yt(e,t,s,i,n){let a,r,o,l=0;for(const[t,i]of e.entries()){if(s===t){r={key:t,value:i};break}if(s>l&&s<t&&void 0!==a){r={key:l,value:a},o={key:t,value:i};break}l=t,a=i}if(r&&o)Pt(e,s,At(s,r.key,r.value,o.key,o.value),true);else if(r)Pt(e,s,r.value,true);else if(!n){let n=i.get(t,s,true);void 0!==n&&(n=St(n,true),""!==n&&Pt(e,s,n))}}function vt(e){const t=new Set,s=e.length,i=e[s-1][0];let n=0;while(n<s){const s=e[n++];let a=s[0]/i;if(a>0){let e=7;do{const s=parseFloat(a.toString().substring(0,e));if(!t.has(s)){a=s;break}}while(++e)}s[0]=a,t.add(a)}return e}function St(e,t=false){return"string"==typeof e&&(at(e)?e=parseFloat(e):0===(e=ie.parsePoints(e)).length&&(e="")),t&&"string"==typeof e?"":e}function bt(e,t){let s;if(e)for(const i of e){if(!(i.time<=t))break;s=i.value}return s}function Tt(e,t,s,i,n){var a;const r=[],o=t.element.tagName;let l;switch(o){case"line":l=ft;break;case"rect":l=dt;break;case"polyline":case"polygon":l=pt;break;case"circle":l=gt;break;case"ellipse":l=mt;break;default:return}const c=R.origin(t.element),h=e.length;let u=0;while(u<h){const[h,f]=e[u++],d=[],p=l.length;let g,m=0;while(m<p){const e=l[m++];let s=f.get(e);if(void 0===s&&(s=null!==(a=bt(i[e],h))&&void 0!==a?a:t.getBaseValue(e)),void 0===s)return;d.push(s)}switch(o){case"line":g=kt(d);break;case"rect":g=wt(d);break;case"polygon":case"polyline":g=d[0];break;case"circle":case"ellipse":g=Wt(d)}if(g){let e;switch(t.transformed&&(g=ie.applyTransforms(t.transformed,g,c)),null==s||s.refitPoints(g),o){case"line":case"polyline":e=ie.drawPolyline(g,n);break;case"rect":case"polygon":e=ie.drawPolygon(g,n);break;case"circle":case"ellipse":{const{x:t,y:s,rx:i,ry:a}=g[0];e=ie.drawEllipse(t,s,i,a,n);break}}void 0!==e&&r.push({key:h,value:e})}}return r}function kt(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}function wt(e){const[t,s,i,n]=e;return[{x:i,y:n},{x:i+t,y:n},{x:i+t,y:n+s},{x:i,y:n+s}]}function xt(e,t,s){const i=new Map,n=t.length;let a=0;while(a<n){const n=t[a++],r=new Map;for(const t in e){let i=e[t].get(n);void 0===i&&(i=bt(s[t],n)),void 0!==i&&r.set(t,i)}i.set(n,r)}return i}function Et(e,t,s,i){t&&(e.set(s,t),void 0!==i&&e.set(i,t))}function Rt(e,t,s,i,n){switch(e.alternate&&s%2!=0&&(t=t.slice(0).reverse()),e.attributeName){case"transform":if(e.additiveSum&&"string"==typeof n){const a=lt(n.split(tt.SPACE),e=>parseFloat(e)),r=ot(t,e=>lt(e.trim().split(tt.SPACE),e=>parseFloat(e))),o=a.length;if(r.every(e=>e.length===o)){const t=r[i];e.accumulateSum||(s=0);let n=0;while(n<o)t[n]+=a[n++];const l=r.length;for(n=0;n<s;n++)for(let e=0;e<l;e++){const s=r[e],i=s.length;for(let e=0;e<i;e++)t[e]+=s[e]}return t.join(" ")}}return t[i];case"points":return ie.parsePoints(t[i]);default:{let a=parseFloat(t[i]);if(isNaN(a))return n||0;if(e.additiveSum&&"number"==typeof n){a+=n,e.accumulateSum||(s=0);const i=t.length;for(let e=0;e<s;e++)for(let e=0;e<i;e++)a+=parseFloat(t[e])}return a}}}function At(e,t,s,i,n){if(e>t){if("number"==typeof s&&"number"==typeof n)return Ye.getSplitValue(s,n,(e-t)/(i-t));if("string"==typeof s&&"string"==typeof n){const a=lt(s.split(" "),e=>parseFloat(e)),r=lt(n.split(" "),e=>parseFloat(e)),o=a.length;if(o===r.length){const s=[];let n=0;while(n<o)s.push(At(e,t,a[n],i,r[n++]));return s.join(" ")}}else if(Array.isArray(s)&&Array.isArray(n)){const a=[],r=Math.min(s.length,n.length);let o=0;while(o<r){const r=s[o],l=n[o++];a.push({x:At(e,t,r.x,i,l.x),y:At(e,t,r.y,i,l.y)})}return a}}return s}function Vt(e,t,s,i,n,a,r,o,l,c,h,u,f,d){r<0&&(t-=r,r=0);const p=e.duration,g=t-(r+p*o),m=0===g?0===l?0:1:Qe(g/p);let y=-1,v=-1;const S=i.length;for(let e=0;e<S;e++){if(-1!==y&&m<=i[e]){v=e;break}m>=i[e]&&(y=e)}let b;return-1!==y&&-1!==v?b=At(m,i[y],Rt(e,n,o,y,s),i[v],Rt(e,n,o,v,s)):(v=-1!==y?y+1:i.length-1,b=Rt(e,n,o,v,s)),Mt(e,c=Pt(u,c,b),a,v,h,f,d),[c,b]}function _t(e,t,s,i,n,a,r,o){const l=(e-t)/a,c=i.length;for(let e=1;e<c;e++){const t=i[e-1],a=i[e];if(l>=t&&l<=a)return qt(At(l,t,Rt(s,n,r,e-1,o),a,Rt(s,n,r,e,o)))}}function Nt(e,t,s,i,n,a,r,o,l,c,h){let u=r.length;o||(o=new Array(u-1).fill(""));const{delay:f,duration:d}=n,p=f+d*i,g=n.getTotalDuration(),m=p+(h?a[0]:1)*d,y=parseFloat(r[h?0:u-1]);let v=p;e:{u=c.length;for(let i=0;i<u;i++){const f=c[i];if(f!==n){const n=f.getTotalDuration();if(f.addState(4),n>v){const{delay:S,duration:b}=f,[T,k,w]=Kt(f);Ft(e,t,s,f,l,T,k,w);let x=m;t:{let e=false,t=Ht(v,S,b)-1;const s=(s,i,c)=>{let u,S;if(u=h?e||v!==p?s%d/d:0:i===m?1:i%d/d,S=s===i?qt(Rt(f,k,t,c,l)):_t(s,i,f,T,k,b,t,l),S){u>0&&(S=Math.round((parseFloat(S)+y)/2).toString());const t=a.length;if(!(u===a[t-1]&&S===r[t-1])){const l=e||0===u?(null==w?void 0:w[c])||f.timingFunction:"";if(h){!e&&u>0&&s===v&&(u+=.001);for(let e=0;e<t;e++)if(u<=a[e]){0===e||0===u?(a.unshift(u),r.unshift(S),o.unshift(l)):(a.splice(e,0,u),r.splice(e,0,S),o.splice(e,0,l));break}}else(i===n||i===m)&&i<g&&(u-=.001),a.push(u),r.push(S),o.push(l)}}};do{if(h){let e=i+1;while(e<u){const t=c[e++];if(t.delay>v){x=t.delay;break}}}const a=T.length;for(let i=0;i<a;i++){const a=Dt(S,b,T,t,i);if(a>=v&&(e||(s(a,v,i),e=true),a>v)){if(h&&a>=m)break e;if(s(a,Math.min(a,n,m),i),a>=m)break e;if(v=a,a>=n){n<=g&&f.addState(16);break t}if(a>=x)break t}}}while(++t)}}}}}return[a,r,o]}function Pt(e,t,s,i=false){if(""!==s){let n=e.get(t),a=false;if(void 0===n&&(n=e.get(t-1),a=true),n!==s||i){if(!i){if("number"==typeof n&&Je(s,n))return t;while(t>0&&e.has(t))t++}e.set(t,s)}else a&&!e.has(t)&&(e.delete(t-1),e.set(t,s))}return t}function Mt(e,t,s,i,n,a,r){if(!jt(ie.isAnimateTransform(e),n)){if(0===i)return;i--}const o=null==s?void 0:s[i];o&&a.set(t,o),r&&function(e,t,s,i){var n;if(ie.asAnimateTransform(t)){const a=null===(n=t.transformOrigin)||void 0===n?void 0:n[i];a&&e.set(s,a)}}(r,e,t,i)}function Ft(e,t,s,i,n,a,r,o){var l;if(0!==a[0]){let s;s=i.additiveSum?qt(n):(null===(l=Ct(t,i.attributeName))||void 0===l?void 0:l.value.toString())||e.get(He.getKeyName(i),i.delay)||qt(n);const c=i.by;c&&at(s)&&(s=(parseFloat(s)+c).toString()),a.unshift(0),r.unshift(s),null==o||o.unshift(i.timingFunction)}if(a[a.length-1]<1){const t=e.get(He.getKeyName(i),i.delay)||qt(s[i.attributeName])||r[0];a.push(1),r.push(t),null==o||o.push(i.timingFunction)}}function Ct(e,t){const s=e[t];return null==s?void 0:s[s.length-1]}function Gt(e,t,s,i,n){return void 0===i&&(i=t.delay),void 0===n&&(n=t.to),Pt(e,i,s?n:St(n))}function Ot(e,t){t&&e.push(t),e.sort((e,t)=>e.delay===t.delay?e.group.id<t.group.id?-1:1:e.delay<t.delay?-1:1);for(let t=0;t<e.length-1;t++)e[t].delay===e[t+1].delay&&e.splice(t--,1)}function It(e,t){if(!t.hasState(16,64)){const s=e.indexOf(t);-1!==s&&e.splice(s,1),e.push(t),t.addState(4)}}function Lt(e,t=Number.POSITIVE_INFINITY){e.sort((e,s)=>{const i=e.delay,n=e.delay;if(t!==Number.POSITIVE_INFINITY){if(t===i&&t!==n)return-1;if(t!==i&&t===n)return 1;if(i>t&&n<t)return 1;if(i<t&&n>t)return-1}return i!==n?i>n?-1:1:e.group.id>s.group.id?-1:1})}function Bt(e,t){t?-1!==t.iterationCount&&ht(e,e=>e===t):ht(e,e=>!!e.animationElement)}function Xt(e,t){e.sort((e,s)=>{if(e.getTotalDuration()<=t)return 1;if(s.getTotalDuration()<=t)return-1;const i=e.delay,n=s.delay;return i===n?e.group.id<s.group.id?1:-1:i===t?-1:n===t?1:i<t&&n<t?i>n?-1:1:i<n?-1:1})}function $t(e,t){const s=e.get("x")||0,i=e.get("y")||0;return t?t.refitX(s)+" "+t.refitX(i):s+" "+i}function Yt(e,t,s){s||(t.iterationCount=-1),t.from=t.valueFrom,t.to=t.valueTo,e.push(t)}function zt(e,t){t.length&&ht(e,e=>t.includes(e))}const Dt=(e,t,s,i,n)=>Math.round(e+(s[n]+i)*t),Wt=e=>[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}],qt=e=>Array.isArray(e)?ot(e,e=>e.x+","+e.y).join(" "):(null==e?void 0:e.toString())||"",jt=(e,t)=>st(t,e?32:4),Ut=e=>e.playable||e.animationElement&&-1!==e.duration,Kt=e=>{var t;return[e.keyTimes.slice(0),e.values.slice(0),null===(t=e.keySplines)||void 0===t?void 0:t.slice(0)]},Ht=(e,t,s)=>Math.floor(Math.max(0,e-t)/s);var Zt=e=>class extends e{getAnimateShape(e){const t=[];return this.animations.forEach(s=>{if(Ut(s))switch(s.attributeName){case"r":case"cx":case"cy":if(x.circle(e)){t.push(s);break}case"rx":case"ry":x.ellipse(e)&&t.push(s);break;case"x1":case"x2":case"y1":case"y2":x.line(e)&&t.push(s);break;case"points":(x.polyline(e)||x.polygon(e))&&t.push(s);break;case"x":case"y":case"width":case"height":x.rect(e)&&t.push(s)}}),t}getAnimateTransform(e){const t=[];return this.animations.forEach(s=>{ie.isAnimateTransform(s)&&s.duration>0&&(t.push(s),ie.asAnimateMotion(s)&&(s.framesPerSecond=null==e?void 0:e.framesPerSecond))}),t}getAnimateViewRect(e){e||(e=this.animations);const t=[];return e.forEach(e=>{if(Ut(e))switch(e.attributeName){case"x":case"y":t.push(e)}}),t}animateSequentially(e,t,s,i){let n,a=18;i&&(i.keyTimeMode&&(a=i.keyTimeMode),n=i.precision);const r=this.animations;[e,t].forEach(e=>{var i,o;const l=e===t;if(!e||0===e.length||!l&&st(a,8)||l&&st(a,64))return;const c=[],h={},u=new Set;let f=0;const d=e=>{ct(h,e.attributeName).push(e),f++};{const t=[],s=e.length;for(let i=0;i<s;i++){const n=e[i];if(n.setterType)d(n);else{const a=n.getTotalDuration();for(let r=0;r<s;r++){const s=e[r];if(i!==r&&n.attributeName===s.attributeName&&n.group.id<s.group.id&&n.fillReplace&&!s.evaluateEnd)if(s.setterType){if(n.delay===s.delay){t[i]=n;break}}else if(!s.evaluateStart&&!s.evaluateEnd&&(n.delay===s.delay&&(!s.fillReplace||-1===s.iterationCount||a<=s.getTotalDuration())||s.fillBackwards&&n.delay<=s.delay&&(s.fillForwards||n.fillReplace&&a<=s.delay)||n.animationElement&&null===s.animationElement&&(n.delay>=s.delay&&a<=s.getTotalDuration()||s.fillForwards))){t[i]=n;break}}}}const i=[];let n=0;while(n<s){const s=e[n];t[n++]?s.fillReplace?i.push(s):(s.setterType=true,d(s)):s.setterType||(c.push(s),u.add(s.group.name))}zt(r,i)}if(c.length+f>1||1===c.length&&(c[0].alternate||void 0!==c[0].end)){const t={},f={};let d=0;c.forEach(e=>{const s=e.group.ordering;s&&ht(s,e=>!u.has(e.name));const i=e.attributeName;let n=t[i];n||(n=new Map,t[i]=n,f[i]=[]);const a=e.delay,r=n.get(a)||[];r.push(e),f[i].push(e),n.set(a,r)});for(const e in t){const s=new Map,i=t[e];for(const e of ut(Array.from(i.keys()))){const t=i.get(e);t.forEach(e=>d=Math.max(d,e.getTotalDuration(true))),s.set(e,t.reverse())}t[e]=s,f[e].reverse()}const p=new He(e),g={},m=new Map,y=l?new Map:void 0,v={},S=new Set,b={},T=new Map,k=l?new Map:void 0,w={},x={},E=new Map;let A,V,_=-1;for(const e in t){const n=new Map;if(g[e]=n,!l){let t;if(s)t=s.getBaseValue(e);else if(t=this[e],void 0===t)try{this.getBaseValue(e)}catch(e){}it(t)&&(w[e]=t)}const r=h[e]||[],o=[],c=[],u=[];for(const[s,i]of t[e].entries())o.push(s),c.push(i);let T,k,A,V=-1,_=0,N=Number.POSITIVE_INFINITY;const P=(e,t)=>{if(S.add(e),e.addState(16),A=e,e.fillForwards){C(_,T,e.type,e);const{name:t,ordering:s}=e.group;if(s){const i=e.getTotalDuration();for(const e of s){if(e.name===t)return true;if(He.getGroupEndTime(e)>=i)return false}}}else{if(e.fillFreeze&&C(_,T,e.type,e),void 0!==t){let s=V;const i=M(_,_+1);void 0!==i&&e.fillReplace&&t>_&&0===u.length&&(s=Pt(n,s,i),l&&Et(E,e.type,s),T=i,V=s)}F()}return false},M=(t,s)=>{var i;let a=null===(i=Ct(x,e))||void 0===i?void 0:i.value;return ht(r,e=>e.delay>=t&&e.delay<s,e=>{const s=e.to;e.animationElement&&Bt(u),0===u.length&&(T=s),C(e.delay,s,e.type,e),e.delay===t?a=l?s:St(s):(V=Gt(n,e,l),_=e.delay)}),a},F=(e,t)=>{u.length&&ht(u,e=>e.getTotalDuration()<=_,s=>{if(s.addState(16),s.fillForwards&&(C(s.getTotalDuration(),s.valueTo,s.type,s),void 0!==e&&void 0!==t)){const i=o.length;let n=e;while(n<i){n!==e&&(t=-1);const i=c[n++],a=i.length;let r=t+1;while(r<a){const e=i[r++];s.group.id>e.group.id&&e.addState(16)}}}})},C=(t,s,i=0,n)=>{l||(s=St(s));const a=Ct(x,e);""!==s&&(!a||t>=a.time)&&ct(x,e).push({key:i,value:s,time:t}),n&&ie.isAnimate(n)&&!n.fillReplace&&(n.fillForwards?(ht(r,e=>e.group.id<n.group.id||e.delay<t),u.length=0,c.forEach(e=>{e.forEach(e=>{e.group.id<n.group.id&&e.addState(16)})})):n.fillFreeze&&Bt(u))},G=(e,t,s)=>{k&&!e&&(void 0===s&&(s=R.typeAsValue(k.type)),V=Pt(n,t,s),t!==V&&Et(E,k.type,V)),k=void 0},O=e=>{for(let t=0;t<o.length;t++){const s=c[t];if(e.length)for(let t=0;t<s.length;t++)e.includes(s[t])&&s.splice(t--,1);0===s.length&&(c.splice(t,1),o.splice(t--,1))}},I=f[e].find(e=>e.fillBackwards);if(I){T=Rt(I,I.values,0,0),V=Pt(n,0,T),l&&(Et(E,I.type,0),k=I);let t=true;for(const s of f[e])if(s.group.id>I.group.id&&s.delay<=I.delay){t=false;break}const s=I.getTotalDuration(),i=[];for(let e=0;e<o.length;e++){const n=c[e];for(let a=0;a<n.length;a++){const l=n[a];if(t){if(l===I&&(0!==e||0!==a)){n.splice(a--,1),o.unshift(I.delay),c.unshift([I]);continue}if(l.group.id<I.group.id&&(I.fillForwards||l.getTotalDuration()<=s)){l.fillForwards&&(l.setterType=true,r.push(l)),i.push(l);continue}}l.animationElement&&l.delay<=I.delay&&(n.splice(a--,1),It(u,l))}}O(i),I.addState(2)}if(!l){const t=w[e];x[e]||void 0===t||C(0,t,0),void 0===T&&(T=(null===(i=Ct(x,e))||void 0===i?void 0:i.value)||t)}Ot(r);{let t;ht(r,e=>e.delay<=o[0],s=>{const i=ie.isAnimate(s)&&s.fillForwards,a=s.delay;if(a<o[0]&&(!I||i))if(I&&i)C(a,s.to,s.type);else{const i=a-1;if(t)Gt(n,t,l,i);else if(n.has(0))l||Gt(n,s,l,i,T);else{const t=l&&ie.isAnimateTransform(s)?R.typeAsValue(s.type):w[e];void 0!==t&&(Gt(n,s,l,0,t),Gt(n,s,l,i,t))}V=Gt(n,s,l),_=a,t=s}}),t&&Gt(n,t,l,o[0]-1)}e:{const t=o.length;for(let s=0;s<t;s++){let i=c[s],h=o[s];for(let f=0;f<i.length;f++){const g=i[f];if(g.hasState(16,64)||g.hasState(4)&&g.animationElement)continue;const v=-1===g.iterationCount,S=g.duration,A=g.iterationCount;let O,I,L;if(v)O=h+S;else if(O=g.getTotalDuration(),O<=V){g.fillReplace?g.addState(64):It(u,g);continue}v?(I=Math.ceil((d-h)/S),L=0):(I=Math.ceil(A),L=A-Math.floor(A)),r.length&&_>0&&_<h&&M(_,h),-1!==V&&V<h&&(V=Pt(n,h-1,T),_=h),N=Number.POSITIVE_INFINITY;const B=g.group.ordering;if(B&&B.length>1){let i=true;for(const t of B){if(t.name===g.group.name){i=false;break}if(!t.paused&&_<=t.delay&&t.attributes.includes(e))break}if(i)t:for(let e=s+1;e<t;e++){const t=c[e],s=t.length;for(let e=0;e<s;e++){const s=t[e];if(s.group.ordering){N=s.delay;break t}s.getTotalDuration()<=O?(s.fillFreeze&&Ot(r,s),s.addState(16)):s.delay<O&&It(u,s)}}}else for(let e=s+1;e<t;e++){const t=o[e];if(t!==Number.POSITIVE_INFINITY){const s=c[e];if(s.length&&!s.every(e=>e.hasState(16,64))){N=t;break}}}const X=_;let $,Y=V+1,z=Math.min(N,g.end||Number.POSITIVE_INFINITY);if(g.animationElement&&r.length){const e=Math.min(N,O,z);if($=r.find(t=>t.delay>=_&&t.delay<=e),$){switch($.delay){case _:T=$.to,C(_,T,$.type,$),$.group.id>g.group.id&&(l&&k&&G(g.additiveSum,Math.max(h-1,V)),V=Gt(n,$,l,Math.max($.delay,V),T),z=-1);break;case N:$.addState(32);break;default:z=$.delay,$.addState(32)}ht(r,e=>e!==$),g.addState(4)}}let D,W=false;if(z>V){l&&(k&&(G(g.additiveSum,Math.max(h-1,V)),Y=V+1),T=R.typeAsValue(g.type),C(_,T,g.type));let r=h===Number.POSITIVE_INFINITY||(-1!==V||g.hasState(2))&&!(0===s&&0===f)||g.hasState(8);W=true;t:{const s=Ct(x,e);for(let e=Ht(_,h,S);e<I;e++){const{evaluateStart:o,evaluateEnd:l}=g;let c,d,v;if(o||l){[c,d,v]=Kt(g);const t=i.length;if(o){const s=u.concat(i.slice(f+1,t)).filter(e=>!!e.animationElement&&e.delay<z);s.length&&(Xt(s,_),[c,d,v]=Nt(p,x,w,e,g,c,d,v,T,s,true),s.forEach(e=>{e.hasState(4)&&i.includes(e)&&It(u,e)}))}if(l&&g.getIntervalEndTime(_)<z&&(u.length||f<t-1)){const s=u.filter(e=>!!e.animationElement);let n=f+1;while(n<t){const e=i[n++];e.animationElement&&(s.includes(e)||s.push(e),It(u,e))}s.length&&(Lt(s,_),[c,d,v]=Nt(p,x,w,e,g,c,d,v,T,s,false))}Ft(p,x,w,g,T,c,d,v)}else({keyTimes:c,values:d,keySplines:v}=g);const b=c.length;for(let i=0;i<b;i++){const o=c[i];let l=-1,u=Rt(g,d,e,i,T);if(e===I-1&&L>0)if(L===o)L=-1;else if(i===b-1)l=O,_=l,u=At(L,c[i-1],Rt(g,d,e,i-1,T),o,u),L=-1;else if(L>o)for(let t=i+1;t<b;t++)if(L<=c[t]){l=O,_=l,u=At(L,o,u,c[t],Rt(g,d,e,t,T)),L=-1;break}if(-1===l){if(l=Dt(h,S,c,e,i),l<0||l<V)continue;if(l===z)W=e===I-1&&i===b-1,_=l;else{const t=t=>{[V,D]=Vt(g,_,T,c,d,v,h,e,i,t,a,n,m,y)};if(h<0&&-1===V)l>0&&(_=0,t(0));else{if(l>z){r&&V+1<z&&t(V),_=z,t(z+(z!==N||n.has(z-1)?0:-1)),W=false;break t}if(r)g.hasState(2)&&(_=X),h>=V?(l=Math.max(h,V+1),_=h):l===V?(_=l,l=V+1):(t(V),_=Math.max(l,V)),r=false;else{if(_=l,e>0&&0===i&&g.accumulateSum){Mt(g,l,v,i,a,m,y),V=l;continue}l=Math.max(l,V+1)}}}}if(l>V&&(i===t-1&&!g.accumulateSum&&(e<I-1||g.fillReplace&&(!s||u!==s.value))&&l--,V=Pt(n,l,u),Mt(g,V,v,i,a,m,y),D=u),!W||-1===L)break t}}}F(s,f)}if(void 0!==D&&(T=D,l&&(Et(E,g.type,Y,V),k=g)),$&&($.hasState(32)?(D=$.to,V=Gt(n,$,l,$.delay,D),_=$.delay,C(_,D,$.type,$)):g.hasState(64)&&Et(E,V,$.type),Bt(u),W=true),ht(r,e=>e.delay>=X&&e.delay<=_,e=>{C(e.delay,e.to,e.type,e),e.animationElement&&Bt(u)}),v){if(!W){u.length=0,u.push(g);continue}if(!$){b[e]=g;break e}}if(W){if(!v&&P(g,N))break e;for(let e=s;e<t;e++)if(o[e]<_){const t=c[e];t.forEach(e=>{const t=e.getTotalDuration();t>_&&!e.hasState(4,16,64)?It(u,e):e.fillReplace||C(t,e.valueTo,e.type,e)}),o[e]=Number.POSITIVE_INFINITY,t.length=0}if(u.length&&_<N){Lt(u);const e=u.find(e=>e.delay<=_);e&&(e.removeState(4,2),e.addState(8),Bt(u,e),h=e.delay,i=[e],f=-1)}}else It(u,g)}}if(u.length){Lt(u);while(u.length){const t=u.shift(),{delay:s,duration:i}=t,r=V-s;let o=Number.POSITIVE_INFINITY;const c=()=>{let[c,h,f]=Kt(t);const d=Ht(_,s,i);if(u.length){if(t.evaluateStart){const e=u.slice(0);Xt(e,_),[c,h,f]=Nt(p,x,w,d,t,c,h,f,T,e,true)}t.evaluateEnd&&t.getIntervalEndTime(_)<o&&([c,h,f]=Nt(p,x,w,d,t,c,h,f,T,u,false))}Ft(p,x,w,t,T,c,h,f);const v=V+1;let S=Math.floor(r/i),b=false;const k=(i,n)=>Vt(t,_,T,c,h,f,s,S,n,i,a,g[e],m,y);do{const e=c.length;for(let r=0;r<e;r++){let l=Dt(s,i,c,S,r);if(!b&&l>=V&&([V,T]=k(V,r),b=true),b)if(l>=o){if(o>V){const e=t.fillReplace||-1===t.iterationCount;[V,T]=k(o-(e?1:0),r),e&&(T=Rt(t,h,S,0,T),V=Pt(n,o,T)),_=o}}else l>V&&(_=l,r===e-1&&l<o&&l--,T=Rt(t,h,S,r,T),V=Pt(n,l,T),Mt(t,V,f,r,a,m,y))}}while(V<o&&++S);l&&Et(E,t.type,v,V)};if(-1===t.iterationCount){r>0&&r%t.duration!=0&&(o=s+t.duration*Math.ceil(r/i),c()),b[e]=t;break e}if(o=Math.min(s+t.duration*t.iterationCount,t.end||Number.POSITIVE_INFINITY),o>V&&(c(),P(t)))break e}}if((null==A?void 0:A.fillReplace)&&void 0===b[e]){let t,s=0;if(x[e]){const i=Ct(x,e);i&&({key:s,value:t}=i)}else l?(s=Array.from(E.values()).pop(),t=R.typeAsValue(s)):t=w[e];void 0===t||nt(n.get(V),t)||(V=Pt(n,V,t),l&&Et(E,s,V))}}v[e]=V}{const e=new Set;let t=0;for(const s in g){let i=0;for(const t of g[s].keys())e.add(t),i=t;t=Math.max(t,i),null===(o=x[s])||void 0===o||o.sort((e,t)=>e.time===t.time?0:e.time<t.time?-1:1)}if(Object.keys(b).length){const s=[],i=[];for(const e in b){const t=b[e];s.push(t.delay),i.push(t.duration)}const n=s[0];if(0===S.size&&1===new Set(s).size&&1===new Set(i).size&&n===e.values().next().value)_=n;else if(i.length>1&&i.every(e=>e%250==0))t=et(i,t,s);else{const e=i[0];(t-n)%e!=0&&(t=e*Math.ceil(t/e))}}if(-1===_)for(const s in g){const i=b[s];if(i){let n=v[s];if(n<t){const r=g[s],o=i.delay,c=n+1;let h=Array.from(r.values()).pop(),u=Math.floor((n-o)/i.duration);const[f,d,S]=Kt(i);Ft(p,x,w,i,h,f,d,S);const b=f.length;do{let s=false;for(let l=0;l<b;l++){let c=Dt(o,i.duration,f,u,l);!s&&c>=n&&([n,h]=Vt(i,n,h,f,d,S,o,u,l,n,a,r,m,y),e.add(n),s=true),s&&c>n&&(l===b-1&&c<t&&c--,h=Rt(i,d,u,l,h),n=Pt(r,c,h),Mt(i,c,S,l,a,m,y),e.add(n))}}while(n<t&&++u);v[s]=n,l&&Et(E,i.type,c,n)}}}const i=ut(Array.from(e));if(s||l){let e=false;for(const t in g){const s=g[t];if(!s.has(0)){const n=w[t];if(void 0!==n){const t=s.keys().next().value-1;s.set(0,n),s.set(t,n),i.includes(0)||(i.push(0),e=true),i.includes(t)||(i.push(t),e=true)}}}e&&ut(i)}if(!l)for(const e in g){const t=g[e],s=t.keys().next().value,n=t.values().next().value,a=i.length;let r=0;while(r<a){const a=i[r++];if(!(a<=v[e]))break;if(!t.has(a)){if(p.paused(e,a))if(a<s)t.set(a,n);else{let s=p.get(e,a);if(void 0!==s&&(s=St(s,true),""!==s)){t.set(a,s);continue}}yt(t,e,a,p,l)}}}A=xt(g,i,x)}if(-1===_&&Object.keys(b).length){const e={},t=[],s=[],i=[];for(const e in b){const s=b[e];i.push(s.duration),t.push(s)}const n=et(i);if(t.forEach(t=>{var i;const r=t.attributeName;e[r]=new Map;let o=null!==(i=g[r].get(v[r]))&&void 0!==i?i:w[r];const[l,c,h]=Kt(t);Ft(p,x,w,t,o,l,c,h);let u=0,f=0;const d=l.length;do{for(let i=0;i<d;i++){let d=Dt(0,t.duration,l,f,i);i===l.length-1&&d<n&&d--,o=Rt(t,c,f,i,o),u=Pt(e[r],d,o),Mt(t,u,h,i,a,T,k),s.includes(u)||s.push(u)}}while(u<n&&++f)}),t.every(e=>e.alternate)){let t=-1;for(const i in b){const a=e[i],r=Array.from(a.keys()),o=Array.from(a.values()).reverse(),l=r.length;for(let e=0;e<l;e++){const i=r[e];if(0!==i){t=n+i;const r=T.get(i);r&&T.set(t,r),t=Pt(a,t,o[e]),s.includes(t)||s.push(t)}}}}ut(s);for(const t in e){const i=e[t];s.forEach(e=>{i.has(e)||yt(i,t,e,p,l)})}V=xt(e,s,x)}if(A||V){zt(r,c);const e=Array.from(E.entries()),t=rt(c,e=>ie.isAnimateTransform(e)?R.typeAsName(e.type):e.attributeName,"-",false),i=this.parent;[A,V].forEach(o=>{if(o){const c=o===A,h=c?m:T,u=c?y:k;if(jt(l,a)){const t=[];if(l){const s=[];if(c){const t=Array.from(o.entries());let i=e[0][1];const n=e.length,a=t.length;for(let r=0,o=0,l=0;r<n;r++){const c=r<n-1?e[r+1][1]:-1;if(i!==c){const n=new Map;for(let s=l;s<a;s++){const a=t[s][0];if(a>=e[o][0]&&a<=e[r][0])n.set(a,new Map([[i,t[s][1].values().next().value]])),l=s;else if(a>e[r][0])break}s.push(n),i=c,o=r+1}}}else{if(!b.transform)return;{const e=new Map;for(const[t,s]of o.entries())e.set(t,new Map([[b.transform.type,s.values().next().value]]));s.push(e)}}let i=0;const n=s.length;for(let e=0;e<n;e++){const a=Array.from(s[e].entries()),o=a[0];let l=o[0];const f=o[1];1===a.length&&(e<n-1?a.push([s[e+1].keys().next().value,f]):a.push([l+1,f]));const d=a.length,p=a[d-1][0];let g=p-l;const m=new qe;m.type=f.keys().next().value;for(let e=0;e<d;e++){const s=a[e];if(t.push(h.get(s[0])||""),m.type!==SVGTransform.SVG_TRANSFORM_ROTATE){const t=u.get(s[0]);t&&(ct(m,"transformOrigin")[e]=t)}s[0]-=l}for(const[e,t]of vt(a))m.keyTimes.push(e),m.values.push(t.values().next().value);l-=i,l>1?m.delay=l:1===l&&(g+1)%10==0&&g++,m.duration=g,m.keySplines=t,m.synchronized={key:e,value:""},i=p,Yt(r,m,c)}}else{const e=Array.from(o.entries()),a=-1!==_?_:0;let l;if(e.forEach(e=>{t.push(h.get(e[0])||""),e[0]-=a}),s){const t=Tt(vt(e),s,i,x,n);if(!t)return;{l=new Ye,l.attributeName="d";const e=t.length;let s=0;while(s<e){const e=t[s++];l.keyTimes.push(e.key),l.values.push(e.value.toString())}}}else{const e=new qe;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;for(const[t,s]of o.entries()){const n=s.get("x")||0,a=s.get("y")||0;e.keyTimes.push(t),e.values.push(i?i.refitX(n)+" "+i.refitX(a):n+" "+a)}l=e}l.delay=a,l.keySplines=t,l.duration=e[e.length-1][0],Yt(r,l,c)}}else if(((e,t)=>st(t,e?16:2))(l,a)){const a=Array.from(o.entries()),f=a.length-1;for(let o=0;o<f;o++){const[f,d]=a[o],[p,g]=a[o+1];let m,y=t;if(l){const t=new qe;if(c){const s=e.length-1;for(let i=0;i<s;i++){const s=e[i],n=e[i+1];if(s[1]===n[1]&&f>=s[0]&&p<=n[0]){t.type=s[1];break}if(p-f==1&&p===n[0]){t.type=n[1];break}}}else b.transform&&(t.type=b.transform.type);if(0===t.type)continue;t.values=[d.values().next().value,g.values().next().value];const s=u.get(p);s&&(t.transformOrigin=[s]),m=t}else if(s){const e=Tt([[f,d],[p,g]],s,i,x,n);if(!e)continue;m=new Ye,m.attributeName="d",m.values=lt(e,e=>e.value.toString())}else{const e=new qe;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,e.values=[$t(d,i),$t(g,i)],y+=o,m=e}c&&(m.delay=0===o?f:0),m.duration=p-f,m.keyTimes=[0,1],m.synchronized={key:o,value:y};const v=h.get(p);v&&(m.keySplines=[v]),Yt(r,m,c)}}}})}}})}};const Qt=squared.lib,{isPercent:Jt,parseAngle:es}=Qt.css,{getNamedItem:ts}=Qt.dom,{truncateFraction:ss}=Qt.math,{isEqual:is,isNumber:ns,isString:as,iterateArray:rs,objectMap:os}=Qt.util;class ls extends qe{constructor(e,t){if(super(e,t),this.path="",this.distance="0%",this.rotate="auto 0deg",this.motionPathElement=null,this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this._offsetLength=0,this._keyPoints=[],t){this.setAttribute("path");const e=ts(t,"rotate");switch(e){case"auto":break;case"auto-reverse":this.rotate="auto 180deg";break;default:ns(e)&&(this.rotate=parseFloat(e)+"deg")}rs(t.children,e=>{if("mpath"===e.tagName){let t=P(e);if(t&&(x.use(t)&&(t=P(t)),t&&x.shape(t)))return this.motionPathElement=t,true}}),this.setCalcMode()}else if(e){const t=/path\("([^"]+)"\)/.exec(_(e,"offset-path"));t&&(this.path=t[1]);const s=_(e,"offset-distance");""!==s&&(this.distance=s);const i=_(e,"offset-rotate");""!==i&&"auto"!==i&&(this.rotate=i)}}setCalcMode(){const e=this.animationElement;if(e){const t=ts(e,"calcMode")||"paced";switch(t){case"paced":case"discrete":case"spline":super.setCalcMode("translate",t);break;case"linear":{const t=qe.toFractionList(ts(e,"keyPoints"),";",false);let s=super.keyTimes;0===s.length&&-1!==this.duration&&(s=qe.toFractionList(ts(e,"keyTimes")),this.length=0,super.keyTimes=s),t.length===s.length&&(this._keyPoints=t);break}}}}addKeyPoint(e){if(void 0===this._offsetPath){const t=e.key;if(t>=0&&t<=1){const s=super.keyTimes,i=this._keyPoints;if(s.length===i.length){const n=e.value;let a=NaN;if(Jt(n)?a=parseFloat(n)/100:ns(n)&&(a=parseFloat(n)/this.offsetLength),!isNaN(a)){a=Math.min(a,1);const n=s.findIndex(e=>e===t);-1!==n?(s[n]=e.key,i[n]=a):(s.push(e.key),i.push(a))}}}}}setOffsetPath(){if(void 0===this._offsetPath&&as(this.path)){const{duration:e,rotateData:t}=this;let s=ie.getOffsetPath(this.path,this.rotate),i=s.length;if(i>0){let n=1;if(e>=i){n=e/i;const t=i-1;let a=1;while(a<t)s[a++].key*=n;s[t].key=e}else if(e>0){const t=new Array(e),n=i/e;let a,r=0;while(r<e)a=s[Math.floor(r*n)],a.key=r,t[r++]=a;const o=s.pop();a.value!==o.value&&(o.key=e,t.push(o)),s=t,i=t.length}const{framesPerSecond:a,keyPoints:r}=this,o=a?1e3/a:0;if(r.length){const t=i-1,a=super.keyTimes,l=[];if(r.length>1){let i;const c=(e,t,s)=>(null==i?void 0:i.key)===e&&i.rotate===s&&is(i.value,t),h=a.length-1;for(let u=0;u<h;++u){const h=a[u],f=ss(h*e),d=ss((a[u+1]-h)*e),p=r[u],g=r[u+1];if(0===d){const e=f,{value:n,rotate:a}=s[Math.floor(g*t)];c(e,n,a)||(i={key:e,value:n,rotate:a},l.push(i))}else{let e=0,i=f;if(p===g){const{value:a,rotate:r}=s[Math.floor(p*t)];for(c(f,a,r)&&(e+=n,i+=o);e<d;e+=n){const t=f+e;t>=i&&(l.push({key:t,value:a,rotate:r}),e<d-1?i+=o:i=0)}}else{const n=Math.floor(Math.min(p,g)*t),a=Math.floor(Math.max(p,g)*t),r=[];let h=n;while(h<=a)r.push(s[h++]);p>g&&r.reverse();const u=r.length,m=d/u,y=r[0];for(c(f,y.value,y.rotate)&&(++e,i+=o);e<u;++e){const t=f+e*m;if(t>=i){const s=r[e];s.key=t,l.push(s),e<u-1?i+=o:i=0}}}l[l.length-1].key=f+d}}}else l.push(s[Math.floor(r[0]*t)]),0===a[0]&&(l[0].rotate=0);this._offsetPath=l}else if(o>0){const e=[];for(let t=0;t<i;t+=o)e.push(s[Math.floor(t)]);const t=s.pop();e[e.length-1]!==t&&e.push(t),this._offsetPath=e}else this._offsetPath=s;if(t){s=this._offsetPath;const i=t.length-1;for(let n=0,a=0;n<i;++n){const i=t[n],r=t[n+1],o=r.key,l=[];if(i.key===o)l.push(s[a++]);else{const t=Math.floor(ss(o*e));do{const e=s[a];if(!((null==e?void 0:e.key)<=t))break;l.push(e)}while(++a)}const c=i.value,h=r.value,u=es(c.split(" ").pop()),f=es(h.split(" ").pop()),d=c.startsWith("auto");if(c===h||u===f)d?0!==u&&l.forEach(e=>e.rotate+=u):l.forEach(e=>e.rotate=u);else{const e=f-u,t=l.length-1,s=e/t;let i=0;if(d){while(i<t)l[i].rotate+=u+i++*s;l[t].rotate+=u+e}else{while(i<t)l[i].rotate=u+i++*s;l[t].rotate=u+e}}}}this.keySplines=void 0,this.timingFunction=we.linear}}}reverseKeyPoints(){let e,t;return this.validKeyPoints()&&(t=this._keyPoints.slice(0).reverse(),e=os(super.keyTimes,e=>1-e).reverse()),{keyTimes:e,keyPoints:t}}validKeyPoints(){const e=this.keyPoints;return e.length>0&&e.length===super.keyTimes.length}get offsetPath(){return this._offsetPath}get playable(){return!this.paused&&-1!==this.duration&&as(this.path)}set keyTimes(e){as(this.path)||(super.keyTimes=e)}get keyTimes(){this.setOffsetPath();const e=this._offsetPath;if(e){const t=this.duration;return os(e,e=>e.key/t)}return super.keyTimes}set values(e){as(this.path)||(super.values=e)}get values(){this.setOffsetPath();const e=this._offsetPath;return e?os(e,e=>{const{x:t,y:s}=e.value;return`${t} ${s}`}):super.values}get rotateValues(){this.setOffsetPath();const e=this._offsetPath;return e&&os(e,e=>e.rotate)}get keyPoints(){return this._keyPoints}set reverse(e){if(e!==super.reverse){const{keyTimes:t,keyPoints:s}=this.reverseKeyPoints();t&&s&&(this.length=0,this._keyPoints=s,super.keyTimes=t,super.reverse=e)}}get reverse(){return super.reverse}set alternate(e){const t=this.iterationCount;if(e!==super.alternate&&(-1===t||t>1)){const{keyTimes:s,keyPoints:i}=this.reverseKeyPoints();if(s&&i){let n=super.keyTimes,a=this.keyPoints;const r=n.length;if(-1===t){let e=0;while(e<r)n[e]/=2,s[e]=.5+s[e++]/2;n=n.concat(s),a=a.concat(i),this.duration=2*this.duration}else{const e=n.slice(0),o=a.slice(0);for(let l=0;l<t;++l)if(0===l){let e=0;while(e<r)n[e++]/=t}else{const c=l*(1/t),h=l%2==0?e.slice(0):s.slice(0);let u=0;while(u<r)h[u]=ss(c+h[u++]/t);n=n.concat(h),a=a.concat(l%2==0?o:i)}this.duration=this.duration*t,this.iterationCount=1}this._keyTimes=n,this._keyPoints=a,super.alternate=e}}}get alternate(){return super.alternate}set parent(e){super.parent=e;const t=this.parentContainer;if(null==t?void 0:t.requireRefit){const e=this.path;e&&(this.path=ie.transformRefit(e,void 0,void 0,t))}}get parent(){return super.parent}get offsetLength(){let e=this._offsetLength;if(0===e){const t=this.path;t&&(e=C(t))}return e}get instanceType(){return 114696}}const cs=squared.lib,{getFontSize:hs,getKeyframesRules:us,isAngle:fs,isCustomProperty:ds,hasCalc:ps,parseAngle:gs,parseVar:ms}=cs.css,{isWinEdge:ys}=cs.client,{getNamedItem:vs}=cs.dom,{XML:Ss}=cs.regex,{isString:bs,iterateArray:Ts,replaceMap:ks,safeNestedArray:ws,sortNumber:xs}=cs.util,Es={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},Rs=us(),As=new RegExp(`(ease|ease-in|ease-out|ease-in-out|linear|step-(?:start|end)|steps\\(\\d+,\\s+(?:start|end)\\)|${xe}),?\\s*`,"g");function Vs(e,t){const s=_(e,t);if("animation-timing-function"===t){const e=[];let t;As.lastIndex=0;while(null!==(t=As.exec(s)))e.push(t[1]);return e}return s.split(Ss.SEPARATOR)}function _s(e){return e.sort((e,t)=>e.key!==t.key?e.key<t.key?-1:1:0)}function Ns(e){if("reverse"===e)return"auto 180deg";if(/^reverse\s+/.test(e)){const t=e.split(" ")[1];return"auto "+(fs(t)?180+gs(t):"0")+"deg"}return e}function Ps(e,t,s){var i;const n=null===(i=e["transform-origin"])||void 0===i?void 0:i.find(e=>e.key===s);if(n)return R.origin(t,n.value)}var Ms=e=>class extends e{getTransforms(e){return e||(e=this.element),ie.filterTransforms(R.parse(e)||ie.convertTransforms(e.transform.baseVal))}getAnimations(e){var t,s;const i=[];if(!ys()){e||(e=this.element);let n=0;const a=(e,t,s="")=>{""===s&&n++,e.delay=t,e.group={id:n,name:s},e.parent=this,i.push(e)};Ts(e.children,t=>{if(t instanceof SVGAnimationElement){const s=vs(t,"begin");if(/^[a-zA-Z]+$/.test(s))return;const i=s?xs(ks(s.split(";"),e=>ke.convertClockTime(e))):[0];if(i.length)switch(t.tagName){case"set":i.forEach(s=>a(new ke(e,t),s));break;case"animate":i.forEach(s=>a(new Ye(e,t),s));break;case"animateTransform":i.forEach(s=>{var i;const n=new qe(e,t);ie.isShape(this)&&this.path&&(n.transformFrom=ie.drawRefit(e,this.parent,null===(i=this.viewport)||void 0===i?void 0:i.precision)),a(n,s)});break;case"animateMotion":i.forEach(s=>{var i;const n=new ls(e,t),r=n.motionPathElement;r&&(n.path=ie.drawRefit(r,this.parent,null===(i=this.viewport)||void 0===i?void 0:i.precision)),a(n,s)})}}});const r=Vs(e,"animation-name"),o=r.length;if(o){const i={},l=[],c=[];for(const t in Es){let s=Vs(e,t);0===s.length&&s.push(Es[t]);while(s.length<o)s=s.concat(s.slice(0));s.length=o,i[t]=s}for(let h=0;h<o;++h){const o=Rs[r[h]],u=ke.convertClockTime(i["animation-duration"][h]);if(o&&u>0){n++;const f={},d={},p="paused"===i["animation-play-state"][h],g=ke.convertClockTime(i["animation-delay"][h]),m=i["animation-iteration-count"][h],y=i["animation-fill-mode"][h],v=r[h]+"_"+h,S=[];let b=true;c.push({name:v,attributes:S,paused:p,delay:g,duration:u,iterationCount:m,fillMode:y});for(const t in o){const s=parseFloat(t)/100,i=o[t];for(const t in i){let n=i[t];ps(n)?n=V(e,t,n):ds(n)&&(n=ms(e,n)),n&&ws(Es[t]?d:f,t).push({key:s,value:n})}}if(f.transform){const s=_s(f.transform),i=s.length;let n=0;while(n<i){const i=s[n++],a=i.key,r=Ps(f,e,a);null===(t=R.parse(e,i.value))||void 0===t||t.forEach(e=>{const t=e.matrix;let s,i,n;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:s="translate",i=t.e+" "+t.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:s="scale",i=t.a+" "+t.d+" "+(r?r.x+" "+r.y:"0 0"),!r||0===a&&0===r.x&&0===r.y||(n={x:r.x*(1-t.a),y:r.y*(1-t.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:s="rotate",i=e.angle+" "+(r?r.x+" "+r.y:"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:s="skewX",i=e.angle.toString(),!r||0===a&&0===r.y||(n={x:r.y*t.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:s="skewY",i=e.angle.toString(),!r||0===a&&0===r.x||(n={x:0,y:r.x*t.b*-1});break;default:return}const o=ws(f,s),l=o.findIndex(e=>e.key===a);if(-1!==l){const e=o[l];e.value=i,e.transformOrigin=n}else o.push({key:a,value:i,transformOrigin:n})})}delete f.transform,delete f["transform-origin"]}if("none"===_(e,"offset-path"))delete f["offset-distance"],delete f["offset-rotate"];else if(f["offset-rotate"]){const t=f["offset-rotate"];if(f["offset-distance"]||!f.rotate){let s=_(e,"offset-rotate");""!==s&&"auto"!==s||(s="auto 0deg"),_s(t);const i=t[0],n=t[t.length-1];0!==i.key&&t.unshift({key:0,value:s}),1!==n.key&&t.push({key:1,value:s});for(let e=0;e<t.length;++e){const s=t[e-1],i=t[e],n=Ns(s.value),a=Ns(i.value);if(s.value=n,i.value=a,n.split(" ").pop()!==a.split(" ").pop()){const r=n.startsWith("auto"),o=a.startsWith("auto");if(r&&!o||!r&&o){const r=(s.key+i.key)/2;t.splice(e++,0,{key:r,value:n}),t.splice(e++,0,{key:r,value:a})}}}if(!f["offset-distance"]){const s=new ls(e);s.duration=0,s.iterationCount=1,s.fillForwards=true,s.addKeyPoint({key:0,value:s.distance}),a(s,g,v),t.forEach(e=>{const t=e.value;let s=gs(t.split(" ").pop());t.startsWith("auto")&&(s+=90),e.value=s+" 0 0"}),f.rotate=t,delete f["offset-rotate"],b=false}}else delete f["offset-rotate"]}for(const t in f){let n;switch(t){case"offset-rotate":continue;case"offset-distance":n=new ls(e),n.rotateData=f["offset-rotate"];break;case"rotate":case"scale":case"skewX":case"skewY":case"translate":n=new qe(e),n.setType(t);break;default:n=new Ye(e),n.attributeName=t}a(n,g,v);const r=f[t],o=i["animation-direction"][h],c=i["animation-timing-function"][h];if(_s(r),"offset-distance"===t){const e=n;0!==r[0].key&&e.addKeyPoint({key:0,value:e.distance}),r.forEach(t=>e.addKeyPoint(t)),1!==r.pop().key&&e.addKeyPoint({key:1,value:e.distance}),bs(c)&&(e.timingFunction=c)}else{S.push(t);const i=[],a=[],o=[];let l=r.length;for(let e=0;e<l;++e){const t=r[e],{key:h,value:u}=t;if(i.push(h),a.push(u),b&&e<l-1){const e=null===(s=d["animation-timing-function"])||void 0===s?void 0:s.find(e=>e.key===h);o.push((null==e?void 0:e.value)||c)}const f=t.transformOrigin;f&&ie.asAnimateTransform(n)&&(ws(n,"transformOrigin")[e]=f)}if(b&&!o.every(e=>"linear"===e)){const s=[],r=[],c=[];l=i.length;for(let n=0;n<l;++n){const h=i[n],f=a[n];if(n<l-1){const l=o[n];if(""!==f&&l.startsWith("step")){const o=Ye.convertStepTimingFunction(t,l,i,a,n,hs(e));if(o){const[e,t]=o,a=(i[n+1]-h)*u,f=e.length-(1===i[n+1]?1:0);let d=0;while(d<f){let i=(h+e[d]*a)/u;s.includes(i)&&(i+=.001),s.push(i),r.push(t[d++]),c.push(we[l.includes("start")?"step-start":"step-end"])}continue}}c.push(Ye.convertTimingFunction(l))}s.push(h),r.push(f)}n.values=r,n.keyTimes=s,n.keySplines=c}else n.values=a,n.keyTimes=i,b?n.keySplines=o:n.timingFunction=c}n.paused=p,n.duration=u,n.iterationCount="infinite"!==m?parseFloat(m):-1,n.fillForwards="forwards"===y||"both"===y,n.fillBackwards="backwards"===y||"both"===y,n.reverse=o.endsWith("reverse"),n.alternate=(-1===n.iterationCount||n.iterationCount>1)&&o.startsWith("alternate"),l.push(n)}}}c.reverse(),l.forEach(e=>e.setGroupOrdering(c))}}return i}set name(e){this._name=e}get name(){let e=this._name;return void 0===e&&(e=ie.setName(this.element),this._name=e),e}get transforms(){let e=this._transforms;return void 0===e&&(e=this.getTransforms(),this._transforms=e),e}get animations(){let e=this._animations;return void 0===e&&(e=this.getAnimations(),this._animations=e),e}get visible(){return function(e){const t=_(e,"visibility");return"hidden"!==t&&"collapse"!==t&&"none"!==_(e,"display")}(this.element)}get opacity(){return _(this.element,"opacity")||"1"}};const{USER_AGENT:Fs,isUserAgent:Cs}=squared.lib.client;function Gs(e){if("svg"===e.tagName){if(Cs(8))return e.parentElement instanceof HTMLElement;if(Cs(4))return!(e.parentElement instanceof HTMLElement)}return false}var Os=e=>class extends e{setRect(){const e=this.parent;let{x:t,y:s,width:i,height:n}=this;e&&(t=e.refitX(t),s=e.refitY(s),i=e.refitSize(i),n=e.refitSize(n)),this.setBaseValue("x",t),this.setBaseValue("y",s),this.setBaseValue("width",i),this.setBaseValue("height",n)}getRectElement(){const e=this.element;switch(e.tagName){case"svg":case"use":case"image":return e;default:return null}}set x(e){this._x=e}get x(){var e,t;return null!==(e=this._x)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.x.baseVal.value)||0}set y(e){this._y=e}get y(){var e,t;return null!==(e=this._y)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.y.baseVal.value)||0}set width(e){this._width=e}get width(){const e=this._width;if(void 0!==e)return e;{const e=this.getRectElement();return e?Gs(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}}set height(e){this._height=e}get height(){const e=this._height;if(void 0!==e)return e;{const e=this.getRectElement();return e?Gs(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}};const Is=squared.lib,{STRING:Ls}=Is.regex,{extractURL:Bs}=Is.css,{cloneObject:Xs,iterateArray:$s}=Is.util,Ys=new RegExp(Ls.LENGTH_PERCENTAGE);function zs(e,t){const s=Bs(N(e,"fill"));if(""!==s){if(t){const e=t.definitions.pattern.get(s);if(e)return e}const e=document.getElementById(s.substring(1));if(e instanceof SVGPatternElement)return e}}function Ds(e,t,s,i){if(e){const n=t.aspectRatio,a=e.aspectRatio;if(s&&i){Xs(s,n);const{width:t,height:r}=n;if(t>0&&r>0){const s=t/r,o=a.width||e.viewBox.width,l=a.height||e.viewBox.height,c=o/l,h=o/t,u=l/r,f=_(i,"width"),d=_(i,"height");let p,g;x.svg(i)?(p=i.width.baseVal.value,g=i.height.baseVal.value):(p=parseFloat(f),g=parseFloat(d));const m=qs(f),y=qs(d),v=p/t,S=g/r;let b=m&&y;if(p>=t&&g>=r?(n.unit=Math.min(v,S),b=false):h!==u&&(n.unit=Math.min(h,u)),m||y){if(!isNaN(p)&&!isNaN(g)){const{align:e,meetOrSlice:s}=i.preserveAspectRatio.baseVal;if(v===S)b&&(n.unit*=v),n.align=SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,t>r?n.alignX=true:n.alignY=true;else{switch(s){case SVGPreserveAspectRatio.SVG_MEETORSLICE_MEET:S<v?(b&&(r>=t&&r>=l?n.unit=S:n.unit*=S),n.alignX=true):(b&&(t>=r&&t>=o?n.unit=v:n.unit*=v),n.alignY=true);break;case SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE:S>v?(b&&(r>=t&&r>=l?n.unit=S:n.unit*=S),n.alignX=true,n.alignY=r>l):(b&&(t>=r&&t>=o?n.unit=v:n.unit*=v),n.alignX=t>o,n.alignY=true)}n.align=e}n.meetOrSlice=s}}else c>s?n.position.x=(o-l*s)/2:c<s&&(n.position.y=(l-o*(1/s))/2)}}const{parent:r,position:o,unit:l,x:c,y:h}=a;n.parent.x=c+c*(l-1),n.position.x*=a.unit,n.position.x+=o.x-r.x,n.parent.y=h+h*(l-1),n.position.y*=l,n.position.y+=o.y-r.y,n.unit*=l}}const Ws=e=>e.viewport||ie.asSvg(e)&&e||void 0,qs=e=>Ys.test(e);class js extends squared.lib.base.Container{constructor(e){super(),this.element=e,this.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1,meetOrSlice:SVGPreserveAspectRatio.SVG_MEETORSLICE_UNKNOWN,align:SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,alignX:false,alignY:false},this._clipRegion=[]}append(e,t){return e.parent=this,e.viewport=t||Ws(this),super.append(e)}build(e){const t=Ws(this),s=function(e){while(e){if(e.hasViewBox())return e;e=e.parent}}(this);let i,n,a=true,r=false;e?(i=e.symbolElement||e.patternElement||e.element||this.element,n=e.precision,false===(e=Object.assign(Object.assign({},e),{symbolElement:void 0,patternElement:void 0,element:void 0})).initialize&&(a=false)):i=this.element,this.clear(),$s(i.children,i=>{let n;if(x.svg(i))n=new squared.svg.Svg(i,false),Ds(s,n,i.viewBox.baseVal,i),r=true;else if(x.g(i))n=new squared.svg.SvgG(i),Ds(s,n);else if(x.use(i)){const e=P(i);if(e)if(x.symbol(e))n=new squared.svg.SvgUseSymbol(i,e),Ds(s,n,e.viewBox.baseVal,e),r=true;else if(x.image(e))n=new squared.svg.SvgImage(i,e);else if(x.shape(e)){const r=zs(i,t);r?(n=new squared.svg.SvgUsePattern(i,e,r),Ds(s,n)):n=new squared.svg.SvgUse(i,e,a)}}else if(x.image(i))n=new squared.svg.SvgImage(i);else if(x.shape(i)){const e=zs(i,t);e?(n=new squared.svg.SvgShapePattern(i,e),Ds(s,n)):n=new squared.svg.SvgShape(i,a)}n&&(this.append(n,t),n.build(e))});const o=this.aspectRatio;if(ie.asSvg(this)&&(this.documentRoot||o.meetOrSlice))if(this.documentRoot){const{x:e,y:t}=o;(e<0||t<0)&&this.clipViewBox(e,t,o.width,o.height,n,true)}else{const{x:e,y:t}=this.parent.aspectRatio;this.clipViewBox(e,t,this.width+e,this.height+t,n,true)}else if(r&&this.hasViewBox()&&(0!==o.x||0!==o.y)){const{left:e,top:t}=ie.getBoxRect(this.getPathAll(false)),s=this.refitX(o.x),i=this.refitY(o.y);(e<s||t<i)&&this.clipViewBox(e,t,this.refitSize(o.width),this.refitSize(o.height),n)}}hasViewBox(){return ie.asSvg(this)&&!!this.element.viewBox.baseVal||ie.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}clipViewBox(e,t,s,i,n,a=false){a&&(s-=e,i-=t,ie.asSvg(this)&&this.documentRoot?(e=e<0?-1*e:0,t=t<0?-1*t:0):(e*=-1,t*=-1)),this.clipRegion=ie.drawRect(s,i,e,t,n)}synchronize(e){this.each(t=>t.synchronize(e))}refitX(e){const t=this.aspectRatio;return(e-t.x)*t.unit-t.parent.x+t.position.x}refitY(e){const t=this.aspectRatio;return(e-t.y)*t.unit-t.parent.y+t.position.y}refitSize(e){return e*this.aspectRatio.unit}refitPoints(e){const{unit:t,meetOrSlice:s}=this.aspectRatio,i=e.length;let n=0;while(n<i){const s=e[n++];s.x=this.refitX(s.x),s.y=this.refitY(s.y),void 0!==s.rx&&void 0!==s.ry&&(s.rx*=t,s.ry*=t)}if(s&&ie.asSvg(this)){const{align:t,alignX:s,alignY:a,parent:r}=this.aspectRatio,{width:o,height:l}=this,[c,h,u,f]=ie.minMaxPoints(e,true);let d=0,p=0;s&&(d=-1*r.x),a&&(p=-1*r.y);let g=d,m=p;const y=()=>o/2-(u+c)/2,v=()=>o-c-u+d,S=()=>l/2-(h+f)/2,b=()=>l-h-f+p;switch(t){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:s&&(g-=d),a&&(m-=p);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:s&&(g-=d),a&&(m+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:s&&(g-=d),a&&(m+=b());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:s&&(g+=y()),a&&(m-=p);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_NONE:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:s&&(g+=y()),a&&(m+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:s&&(g+=y()),a&&(m+=b());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:s&&(g+=v()),a&&(m-=p);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:s&&(g+=v()),a&&(m+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:s&&(g+=v()),a&&(m+=b())}n=0;while(n<i){const t=e[n++];t.x+=g,t.y+=m}}return e}getPathAll(e=true){const t=[];return(e?this.cascade():this.children).forEach(e=>{var s;if(ie.isShape(e)){const i=null===(s=e.path)||void 0===s?void 0:s.value;i&&t.push(i)}}),t}set clipRegion(e){""!==e?this._clipRegion.push(e):this._clipRegion.length=0}get clipRegion(){return this._clipRegion.join(";")}get requireRefit(){const e=this.aspectRatio;return 0!==e.x||0!==e.y||1!==e.unit||0!==e.position.x||0!==e.position.y||0!==e.parent.x||0!==e.parent.y}get instanceType(){return 2}}const Us=squared.lib,{parseColor:Ks}=Us.color,{getNamedItem:Hs}=Us.dom,{cloneObject:Zs}=Us.util;function Qs(e){const t=[],s=e.getElementsByTagName("stop"),i=s.length;let n=0;while(n<i){const e=s[n++],i=Ks(Hs(e,"stop-color"),parseFloat(Hs(e,"stop-opacity")||"1"));i&&t.push({color:i,offset:parseFloat(Hs(e,"offset"))/100})}return t}function Js(e,...t){const s={};return t.forEach(t=>{const i=e[t];if(i){const{value:e,valueAsString:n}=i.baseVal;s[t]=e,s[t+"AsString"]=n}}),s}class ei extends(Zt(Os(re(Ms(js))))){constructor(e,t=true){super(e),this.element=e,this.documentRoot=t,this.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},this.init()}build(e){this.precision=null==e?void 0:e.precision,this.setRect(),super.build(e)}synchronize(e){!this.documentRoot&&this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e),super.synchronize(e)}init(){const e=this.element;this.documentRoot&&(Zs(e.viewBox.baseVal,this.aspectRatio),e.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(t=>{var s;const i=P(t,e);i&&(null===(s=t.parentElement)||void 0===s||s.removeChild(t),i.appendChild(t))})),this.setDefinitions(e),e.querySelectorAll("defs").forEach(e=>this.setDefinitions(e))}setDefinitions(e){const t=this.definitions;e.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(e=>{let s=e.id;s&&(s="#"+s,x.clipPath(e)?t.clipPath.set(s,e):x.pattern(e)?t.pattern.set(s,e):x.linearGradient(e)?t.gradient.set(s,Object.assign({type:"linear",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:Qs(e)},Js(e,"x1","x2","y1","y2"))):x.radialGradient(e)&&t.gradient.set(s,Object.assign({type:"radial",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:Qs(e)},Js(e,"cx","cy","r","fx","fy","fr"))))})}get viewBox(){return this.element.viewBox.baseVal||A(this.element)}get instanceType(){return 18}}class ti{constructor(e){this.element=e}build(e){}synchronize(e){}get instanceType(){return 4}}const si=squared.lib,{parseColor:ii}=si.color,{extractURL:ni,getFontSize:ai,hasCalc:ri,isCustomProperty:oi,isLength:li,isPercent:ci,parseUnit:hi,parseVar:ui}=si.css,{truncate:fi}=si.math,{STRING:di,XML:pi}=si.regex,{convertCamelCase:gi,convertFloat:mi,isNumber:yi,isString:vi,joinArray:Si,objectMap:bi}=si.util,Ti=di.LENGTH_PERCENTAGE,ki={polygon:/polygon\(([^)]+)\)/,inset:new RegExp(`inset\\(${Ti}\\s?${Ti}?\\s?${Ti}?\\s?${Ti}?\\)`),circle:new RegExp(`circle\\(${Ti}(?:\\s+at\\s+${Ti}\\s+${Ti})?\\)`),ellipse:new RegExp(`ellipse\\(${Ti}\\s+${Ti}(?:\\s+at\\s+${Ti}\\s+${Ti})?\\)`)};var wi=e=>class extends e{constructor(){super(...arguments),this._retainStyle=true,this._strokeWidth="1"}setStroke(){this.setAttribute("stroke"),this.setAttribute("stroke-width")}setPaint(e,t){var s,i;this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setStroke(),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");const n=this.getAttribute("clip-path",true);if(""!==n&&"none"!==n){const a=ni(n);if(""!==a)this.clipPath=a;else if(null==e?void 0:e.length)for(const a in ki){const r=ki[a].exec(n);if(r){const{top:n,right:o,bottom:l,left:c}=ie.getBoxRect(e),h=o-c,u=l-n;switch(a){case"inset":{let e=0,i=0,a=this.convertLength(r[1],u),f=0;r[4]?(e=c+this.convertLength(r[4],h),i=o-this.convertLength(r[2],h),f=l-this.convertLength(r[3],u)):r[2]?(e=this.convertLength(r[2],h),i=o-e,f=l-(r[3]?this.convertLength(r[3],u):a),e+=c):(e=c+a,i=o-a,f=l-a),a+=n;const d=[{x:e,y:a},{x:i,y:a},{x:i,y:f},{x:e,y:f}];null===(s=this.parent)||void 0===s||s.refitPoints(d),this.clipPath=ie.drawPolygon(d,t);break}case"polygon":{const e=bi(r[1].split(pi.SEPARATOR),e=>{let t=c,s=n;return e.trim().split(" ").forEach((e,i)=>{0===i?t+=this.convertLength(e,h):s+=this.convertLength(e,u)}),{x:t,y:s}});null===(i=this.parent)||void 0===i||i.refitPoints(e),this.clipPath=ie.drawPolygon(e,t);break}default:if("circle"===a||"ellipse"===a){const e=this.parent,s=h<u?h:u;let i,o;"circle"===a?(i=this.convertLength(r[1],s),o=i):(i=this.convertLength(r[1],h),o=this.convertLength(r[2],u));let l=c,f=n;const d=r.length;d>=4&&(l+=this.convertLength(r[d-2],s),f+=this.convertLength(r[d-1],s)),e&&(l=e.refitX(l),f=e.refitX(f),i=e.refitSize(i),o=e.refitSize(o)),this.clipPath=ie.drawEllipse(l,f,i,o,t)}}break}}}}setAttribute(e,t=false,s=true){let i=this.getAttribute(e,t,s);if(e=gi(e),vi(i)){switch(ri(i)?i=V(this.element,e,i)||getComputedStyle(this.element)[e]:oi(i)&&(i=ui(this.element,i)||getComputedStyle(this.element)[e]),e){case"strokeDasharray":i="none"!==i?Si(i.split(/,\s*/),e=>this.convertLength(e).toString(),", ",false):"";break;case"strokeDashoffset":case"strokeWidth":i=this.convertLength(i).toString();break;case"fill":case"stroke":{const t=ni(i);if(""!==t)this[e+"Pattern"]=t;else{let t;switch(i){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="none";break;case"currentcolor":case"currentColor":t=ii(this.color||_(this.element,"color",true));break;default:t=ii(i)}t&&(this[e]=t.value)}return}}this[e]=i}else this._retainStyle||(this[e]="")}getAttribute(e,t=false,s=true){let i=_(this.element,e,t);if(s&&!vi(i)){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return i}let s=this.useParent||this.parent;while(s){if(i=_(s.element,e,t),vi(i))break;s=s.parent}}return i}convertLength(e,t){if(!yi(e)){if(li(e))return hi(e,ai(this.element));if(ci(e))return Math.round(("number"==typeof t?t:this.element.getBoundingClientRect()[t||"width"])*parseFloat(e)/100)}return mi(e)}resetPaint(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}set strokeWidth(e){this._strokeWidth=e}get strokeWidth(){const e=this.stroke;if(vi(e)&&"none"!==e){const e=this._strokeWidth;if(""!==e){const t=this.parent;return(null==t?void 0:t.requireRefit)?fi(t.refitSize(parseFloat(e))):e}}return""}};class xi extends(wi(Ms(js))){constructor(e){super(e),this.element=e}build(e){super.build(e),this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}get instanceType(){return 34}}const{resolvePath:Ei}=squared.lib.util;class Ri extends(Os(re(Ms(ti)))){constructor(e,t){super(e),this.element=e,this.imageElement=null,this.__get_transforms=false,this.__get_animations=false,t&&(this.imageElement=t)}build(){this.setRect()}extract(e){const t=e?ie.filterTransforms(this.transforms,e):this.transforms;let{x:s,y:i,width:n,height:a}=this;const r=t.length;if(r){t.reverse();let e=0;while(e<r){const r=t[e++],o=r.matrix,l=s;s=E.applyX(o,l,i),i=E.applyY(o,l,i);let c=this.rotateAngle;switch(r.type){case SVGTransform.SVG_TRANSFORM_SCALE:n*=o.a,a*=o.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==r.angle&&(o.a<0&&(s+=o.a*n),o.c<0&&(s+=o.c*n),o.b<0&&(i+=o.b*a),o.d<0&&(i+=o.d*a),c?c+=r.angle:c=r.angle)}this.rotateAngle=c}this.transformed=t}const{parent:o,translationOffset:l}=this;o&&(s=o.refitX(s),i=o.refitY(i),n=o.refitSize(n),a=o.refitSize(a)),l&&(s+=l.x,i+=l.y),this.setBaseValue("x",s),this.setBaseValue("y",i),this.setBaseValue("width",n),this.setBaseValue("height",a)}set x(e){super.x=e}get x(){const e=super.x;if(0===e){const e=this.imageElement;if(e)return e.x.baseVal.value}return e}set y(e){super.y=e}get y(){const e=super.y;if(0===e){const e=this.imageElement;if(e)return e.y.baseVal.value}return e}set width(e){super.width=e}get width(){const e=super.width;if(0===e){const e=this.imageElement;if(e)return e.width.baseVal.value}return e}set height(e){super.height=e}get height(){const e=super.height;if(0===e){const e=this.imageElement;if(e)return e.height.baseVal.value}return e}get href(){const e=this.imageElement||this.element;return x.image(e)?Ei(e.href.baseVal):""}get transforms(){let e=super.transforms;if(!this.__get_transforms){const t=this.imageElement;t&&(e=e.concat(this.getTransforms(t)),this._transforms=e),this.__get_transforms=true}return e}get animations(){let e=super.animations;if(!this.__get_animations){const t=this.imageElement;t&&(e=e.concat(this.getAnimations(t)),this._animations=e),this.__get_animations=true}return e}get instanceType(){return 4100}}const Ai=squared.lib,{getNamedItem:Vi}=Ai.dom,{equal:_i,lessEqual:Ni,multipleOf:Pi,offsetAngleX:Mi,offsetAngleY:Fi,relativeAngle:Ci,truncateFraction:Gi}=Ai.math,{cloneArray:Oi,convertInt:Ii,convertFloat:Li}=Ai.util;function Bi(e,t,s,i){const n=e[0],a=e[e.length-1];if(void 0!==s)switch(t){case"x":s-=n.start.x;break;case"x1":case"cx":return n.start.x=s,void(n.coordinates[0]=s);case"x2":return a.end.x=s,void(a.coordinates[0]=s)}if(void 0!==i)switch(t){case"y":i-=n.start.y;break;case"y1":case"cy":return n.start.y=i,void(n.coordinates[1]=i);case"y2":return a.end.y=i,void(a.coordinates[1]=i)}e.forEach(e=>{const{coordinates:t,value:n}=e,a=t.length;for(let r=0,o=0;r<a;r+=2,++o)void 0!==s&&(e.relative||(t[r]+=s),n[o].x+=s),void 0!==i&&(e.relative||(t[o+1]+=i),n[o].y+=i)})}function Xi(e,t,s){const i=e.length;let n=0;while(n<i){const i=e[n++];if("A"===i.key.toUpperCase()){if(void 0!==t){const s=t-i.radiusX;i.radiusX=t,i.coordinates[0]=2*t*(i.coordinates[0]<0?-1:1),1===n&&(e[0].coordinates[0]-=s,e[0].end.x-=s)}void 0!==s&&(i.radiusY=s)}}}class $i extends(wi(re(ti))){constructor(e){super(e),this.element=e,this.name="",this.value="",this.baseValue="",this.init()}static extrapolate(e,t,s,i,n,a){const r=null==n?void 0:n.parent,o=!!(i||(null==r?void 0:r.requireRefit)),l=[];let c;const h=s.length;for(let u=0;u<h;u++){if("d"===e)l[u]=s[u];else if("points"===e){const e=ie.convertPoints(ie.parseCoordinates(s[u]));e.length&&(l[u]=n&&x.polygon(n.element)?ie.drawPolygon(e,a):ie.drawPolyline(e,a))}else if(t){c||(c=ie.getPathCommands(t));const i=parseFloat(s[u]);if(!isNaN(i)){const t=u<h-1?Oi(c,[],true):c;switch(e){case"x":case"x1":case"x2":case"cx":Bi(t,e,i);break;case"y":case"y1":case"y2":case"cy":Bi(t,e,void 0,i);break;case"r":Xi(t,i,i);break;case"rx":Xi(t,i);break;case"ry":Xi(t,void 0,i);break;case"width":[1,2].forEach(e=>{const s=t[e];switch(s.key){case"m":case"l":case"h":s.coordinates[0]=i*(s.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":s.coordinates[0]=t[0].end.x+i}});break;case"height":[2,3].forEach(e=>{const s=t[e];switch(s.key){case"m":case"l":case"v":s.coordinates[1]=i*(s.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":s.coordinates[1]=t[0].end.y+i}});break;default:l[u]="";continue}l[u]=ie.drawPath(t,a)}}l[u]?o&&(l[u]=ie.transformRefit(l[u],i,n,r,a)):l[u]=""}return l}build(e){var t;let s;(null==e?void 0:e.transforms)&&(s=ie.filterTransforms(e.transforms,null===(t=e.exclude)||void 0===t?void 0:t[this.element.tagName])),this.draw(s,e)}draw(e,t){let s,i;t&&({residual:s,precision:i}=t);const n=this.element,a=this.parent,r=this.patternParent,o=true===(null==a?void 0:a.requireRefit),l=2===(null==r?void 0:r.patternContentUnits);let c;if(this.transformed=void 0,x.path(n)){if(c=this.getBaseValue("d"),(null==e?void 0:e.length)||o||l){const t=ie.getPathCommands(c);if(t.length){let h=ie.getPathPoints(t);h.length&&(l&&r.patternRefitPoints(h),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e)),e.length&&(h=ie.applyTransforms(e,h,R.origin(this.element)),this.transformed=e)),this.baseValue=ie.drawPath(ie.syncPathPoints(o?Oi(t,[],true):t,o?Oi(h,[],true):h,!!this.transformed),i),o?(a.refitPoints(h),c=ie.drawPath(ie.syncPathPoints(t,h,!!this.transformed),i)):c=this.baseValue)}}""===this.baseValue&&(this.baseValue=c)}else if(x.line(n)){let t=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];l&&r.patternRefitPoints(t),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e)),e.length&&(t=ie.applyTransforms(e,t,R.origin(this.element)),this.transformed=e));const h=()=>ie.drawPolyline(t,i);this.baseValue=h(),o?(a.refitPoints(t),c=h()):c=this.baseValue}else if(x.circle(n)||x.ellipse(n)){const t=this.getBaseValue("cx"),h=this.getBaseValue("cy");let u,f;x.ellipse(n)?(u=this.getBaseValue("rx"),f=this.getBaseValue("ry")):(u=this.getBaseValue("r"),f=u);let d=[{x:t,y:h,rx:u,ry:f}];l&&r.patternRefitPoints(d),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e,u,f)),e.length&&(d=ie.applyTransforms(e,d,R.origin(this.element)),this.transformed=e));const p=d[0],g=()=>ie.drawEllipse(p.x,p.y,p.rx,p.ry,i);this.baseValue=g(),o?(a.refitPoints(d),c=g()):c=this.baseValue}else if(x.rect(n)){let t=this.getBaseValue("x"),h=this.getBaseValue("y"),u=this.getBaseValue("width"),f=this.getBaseValue("height");if(o||(null==e?void 0:e.length)){let d=[{x:t,y:h},{x:t+u,y:h},{x:t+u,y:h+f},{x:t,y:h+f}];l&&r.patternRefitPoints(d),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e)),e.length&&(d=ie.applyTransforms(e,d,R.origin(this.element)),this.transformed=e)),this.baseValue=ie.drawPolygon(d,i),o?(a.refitPoints(d),c=ie.drawPolygon(d,i)):c=this.baseValue}else l&&(t=r.patternRefitX(t),h=r.patternRefitY(h),u=r.patternRefitX(u),f=r.patternRefitY(f)),c=ie.drawRect(u,f,t,h,i),this.baseValue=c}else if(x.polygon(n)||x.polyline(n)){let t=this.getBaseValue("points");l&&r.patternRefitPoints(t),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e)),e.length&&(t=ie.applyTransforms(e,t,R.origin(this.element)),this.transformed=e));const h=()=>x.polygon(n)?ie.drawPolygon(t,i):ie.drawPolyline(t,i);this.baseValue=h(),o?(null===this.transformed&&(t=ie.clonePoints(t)),a.refitPoints(t),c=h()):c=this.baseValue}else c="";return this.value=c,this.setPaint([c],i),c}extendLength(e,t){if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":{const s=ie.getPathCommands(this.value),i=s.length;if(i){const n=s[0],a=n.start,r=s[i-1],o=r.end,l=r.key.toUpperCase(),{leading:c,trailing:h}=e;let u=false;if("Z"!==l&&(a.x!==o.x||a.y!==o.y)){if(c>0){let e;if(n.value.length>1?e=n.value[1]:i>1&&(e=s[1].start),e){const t=n.coordinates;if(e.x===a.x)t[1]+=a.y>e.y?c:-c,u=true;else if(e.y===a.y)t[0]+=a.x>e.x?c:-c,u=true;else{const s=Ci(e,a);t[0]-=Mi(s,c),t[1]-=Fi(s,c),u=true}}}switch(l){case"M":case"L":if(h>0){let e;if(1===i){const t=n.value;t.length>1&&(e=t[t.length-2])}else{const t=r.value;e=t.length>1?t[t.length-2]:s[s.length-2].end}if(e){const t=r.coordinates;if(e.x===o.x)t[1]+=o.y>e.y?h:-h,u=true;else if(e.y===o.y)t[0]+=o.x>e.x?h:-h,u=true;else{const s=Ci(e,o);t[0]+=Mi(s,h),t[1]+=Fi(s,h),u=true}}}break;case"H":case"V":{const e=r.coordinates,t="H"===l?0:1;e[t]+=(c+h)*(e[t]>=0?1:-1),u=true;break}}}if(u)return e.leading=c,e.trailing=h,e.path=ie.drawPath(s,t),e;break}}}}flattenStrokeDash(e,t,s,i,n){let a,r,o,l;i||(i=s);let c=0;const h=e=>r[e%a];if(n)({dashArray:r,dashArrayTotal:o,extendedLength:l,startIndex:c}=n),a=r.length,n.items=[],n.leading=0;else{a=e.length,r=e.slice(0);const u=Pi([2,a]);o=0;let f=0;while(f<u){const t=e[f%a];o+=t,f++>=a&&r.push(t)}if(a=u,t>0){let e=h(0);while(t-e>=0)t-=e,e=h(++c);c%=a}else if(t<0){r.reverse();while(t<0)t+=h(c++);c=a-c%a,r.reverse()}l=i,n={dashArray:r,dashArrayTotal:o,items:[],leading:0,trailing:0,startIndex:c,extendedLength:l,lengthRatio:s/(i||s)}}let u,f=0;for(let e=0,s=0;;e+=s,c++){let i,a;s=h(c),e<t?(n.leading=t-e,i=0,a=s-n.leading):(i=e-t,a=s);const r=Gi(i/l);if(u=Gi(r+a/l),c%2==0?r<1&&(n.items.push({start:r,end:Math.min(u,1),length:s}),f+=s):f+=s,u>=1)break}n.trailing=Gi((u-1)*l);while(f%o!=0){const e=h(++c);n.trailing+=e,f+=e}return 0===n.items.length?n.items.push({start:1,end:1}):(n.leadingOffset=Gi(n.items[0].start*l),n.leading*=n.lengthRatio,n.trailing*=n.lengthRatio),n}extractStrokeDash(e,t){const s=Ii(this.strokeWidth);let i,n="",a="";if(s>0){let r=ie.parseCoordinates(this.strokeDasharray);if(r.length){const o=this.totalLength,l=this.pathLength||o,c=[];let h,u=Ii(this.strokeDashoffset),f=0;const d=(e,t,s,i=0)=>{const n=this.flattenStrokeDash(e,t,o,l);return 0===c.length&&(h=n),f=Math.max(f,n.items.length),c.push({items:n.items,delay:s,duration:i}),n.items};if(i=d(r,u,0),e){const p=e.slice(0).sort((e,t)=>{if(e.attributeName.startsWith("stroke-dash")&&t.attributeName.startsWith("stroke-dash")){if(e.delay!==t.delay)return e.delay<t.delay?-1:1;if(ie.asSet(e)&&ie.asAnimate(t)||!e.animationElement&&t.animationElement)return-1;if(ie.asAnimate(e)&&ie.asSet(t)||e.animationElement&&!t.animationElement)return 1}return 0}),g=new He(p,"stroke-dasharray","stroke-dashoffset"),m=(e,t=false)=>{const s=g.get("stroke-dashoffset",e,t);return s?parseFloat(s):u},y=(e,t=false)=>{const s=g.get("stroke-dasharray",e,t);return s?ie.parseCoordinates(s):r},v=e=>e?e.start+" "+e.end:"1 1";if(p.length>1)for(let e=0;e<p.length;++e){const t=p[e];g.has(t.attributeName,t.delay,t)||p.splice(e--,1)}let S=e=>{let t=u;const s=p.length;let i=e;while(i<s){const e=p[i++];if("stroke-dasharray"===e.attributeName){const s=g.get("stroke-dashoffset",e.delay);s&&(t=parseFloat(s));for(const s of ie.asAnimate(e)?g.evaluateStart(e):[e.to])f=Math.max(f,this.flattenStrokeDash(ie.parseCoordinates(s),t,o,l).items.length);(ie.asAnimate(e)?g.evaluateStart(e):[e.to]).forEach(e=>f=Math.max(f,this.flattenStrokeDash(ie.parseCoordinates(e),t,o,l).items.length))}}},b=[],T=false;for(let e=0;e<p.length;e++){const k=p[e];if(k.setterType){const e=(e,t)=>{d(e,t,k.delay,k.fillReplace&&k.duration>0?k.duration:0),T=true};switch(k.attributeName){case"stroke-dasharray":r=ie.parseCoordinates(k.to),e(r,m(k.delay));continue;case"stroke-dashoffset":u=Ii(k.to),e(y(k.delay),u);continue}}else if(ie.asAnimate(k)&&k.playable)switch(g.evaluateStart(k),k.attributeName){case"stroke-dasharray":{S&&(S(e),S=void 0);const t=m(k.delay),s=this.flattenStrokeDash(y(k.delay),t,o,l).items,i=[],n=[];let a=0;while(a<f){const e=new Ye(this.element);e.id=a,e.baseValue=v(s[a]),e.attributeName="stroke-dasharray",e.delay=k.delay,e.duration=k.duration,e.iterationCount=k.iterationCount,e.fillMode=k.fillMode,n[a++]=[],i.push(e)}k.values.forEach(e=>{const s=this.flattenStrokeDash(ie.parseCoordinates(e),t,o,l).items;let i=0;while(i<f)n[i].push(v(s[i++]))});const{keyTimes:r,keySplines:c}=k,h=k.timingFunction;a=0;while(a<f){const e=i[a];e.values=n[a++],e.keyTimes=r,c?e.keySplines=c:h&&(e.timingFunction=h)}if(k.fillReplace){const e=k.getTotalDuration(),t=this.flattenStrokeDash(y(e),m(e),o,l).items;a=0;while(a<f)i[a].replaceValue=v(t[a++])}b=b.concat(i),T=true;continue}case"stroke-dashoffset":{const e=k.duration,r=parseFloat(k.values[0]),d=[],p=[];let m=0,y=0;u===r||0!==k.delay||k.fillReplace||(h=this.flattenStrokeDash(h.dashArray,r,o,l),i=h.items,c[0].items=i,f=Math.max(f,h.items.length),u=r);let v,S=o,b=1;if((h.leading>0||h.trailing>0)&&(this.extendLength(h,t),h.path)){const e=ie.getBoxRect([this.value]);S=Gi(C(h.path)),b=S/o,h.extendedLength=this.pathLength,h.extendedLength>0?h.extendedLength*=b:h.extendedLength=S,i=this.flattenStrokeDash(h.dashArray,0,o,l,h).items,c[0].items=i,f=Math.max(f,i.length);const t=Math.ceil(s/2);n=h.path,a=ie.drawRect(e.right-e.left,e.bottom-e.top+2*t,e.left,e.top-t)}if(k.fillReplace&&-1!==k.iterationCount){const e=Li(g.get(k.attributeName,k.getTotalDuration()));if(e!==u){let t=Math.abs(e-u)%S/S;e>u&&(t=1-t),v=t.toString()}}const w=k.keyTimes,x=k.values,E=w.length;let R=-1;while(++R<E){const t=0===R?u:parseFloat(x[R-1]),s=parseFloat(x[R]),i=Math.abs(s-t),n=w[R];if(0===i){if(R>0){m=n,p.push(m);const e=d.length;e?(d.push(d[e-1]),y=parseFloat(d[e-1])):(d.push("0"),y=0)}continue}const a=s>t,r=R>0?(n-w[R-1])*e:0,o=i*h.lengthRatio;let l=o/S,c=o,f=0;const g=t=>t/o*r/e,v=()=>R>0&&d[d.length-1]===(a?"1":"0"),b=(e,t=false)=>{if(f=(c-e)/S,t){const e=Gi(f);a?e>0&&(f=1-f):0===e&&(f=1)}},T=()=>{v()||(p.push(0===m?0:Gi(m)),d.push(a?"1":"0"))},k=()=>{m=n,p.push(m);const e=Gi(f);d.push(e.toString()),y=e>0&&e<1?f:0};if(0===R)c%=S,b(0),a&&(f=1-f),k();else{if(y>0){const e=a?y:1-y,t=Gi(e*S);if(Ni(c,t)){b(0),a?f=y-f:f+=y,k();continue}d.push(a?"0":"1"),m+=g(t),p.push(Gi(m)),l=Gi(l-e),c=Gi(c-t)}if(_i(c,S)&&(c=S),c>S){l=Math.floor(l);const e=l*S;e===c&&l--,b(e,true)}else l=0,b(0,true);while(l>0)T(),d.push(a?"0":"1"),m+=g(S),p.push(Gi(m)),l--;T(),k()}}k.baseValue="0",k.replaceValue=v,k.values=d,k.keyTimes=p;const A=k.timingFunction;A&&(k.keySplines=void 0,k.timingFunction=A),T=true;break}}b.push(k)}if(T){const t=c.length;let s=0;while(s<t){const{delay:e,duration:n,items:a}=c[s++];if(a===i){let e=a.length-1;while(++e<f)a.push({start:1,end:1})}else{const s=t>2?this.flattenStrokeDash(y(e-1),m(e-1),o,l).items:i;let r=0;while(r<f){const t=new ke(this.element);t.id=r,t.attributeName="stroke-dasharray",t.baseValue=v(s[r]),t.delay=e,t.duration=n,t.fillFreeze=0===n,t.to=v(a[r++]),b.push(t)}}}e=b}}}}return[e,i,n,a]}init(){const e=this.element;x.path(e)?this.setBaseValue("d"):x.line(e)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):x.rect(e)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):x.circle(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):x.ellipse(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(x.polygon(e)||x.polyline(e))&&this.setBaseValue("points",ie.clonePoints(e.points))}get transforms(){let e=this._transforms;return void 0===e&&(e=ie.filterTransforms(R.parse(this.element)||ie.convertTransforms(this.element.transform.baseVal)),this._transforms=e),e}get pathLength(){return Li(Vi(this.element,"pathLength"))}get totalLength(){return this.element.getTotalLength()}get instanceType(){return 1028}}class Yi extends(Ms(js)){constructor(e,t){super(e),this.element=e,this.patternElement=t}build(e){super.build(Object.assign(Object.assign({},e),{patternElement:this.patternElement,initialize:false}))}get animations(){return[]}get instanceType(){return 130}}class zi extends(Zt(Ms(ti))){constructor(e,t=true){super(e),this.element=e,t&&this.setPath()}setPath(){this.path=new $i(this.element)}build(e){const t=this.path;t&&(t.parent=this.parent,t.build(Object.assign(Object.assign({},e),{transforms:this.transforms})))}synchronize(e){if(this.animations.length){const t=this.path;if(t){const s=null==e?void 0:e.element;s?this.animateSequentially(this.getAnimateShape(s),void 0,t,e):this.animateSequentially(this.getAnimateShape(this.element),this.getAnimateTransform(e),t,e)}}}set path(e){this._path=e,e&&(e.name=this.name)}get path(){return this._path}get instanceType(){return 2052}}const Di=squared.lib,{isPercent:Wi}=Di.css,{getNamedItem:qi}=Di.dom,ji=e=>Wi(e)?parseFloat(e)/100:parseFloat(e);class Ui extends(wi(re(Ms(js)))){constructor(e,t){super(e),this.element=e,this.patternElement=t,this.__get_transforms=false,this.patternUnits="userSpaceOnUse"===qi(this.patternElement,"patternUnits")?1:2,this.patternContentUnits="objectBoundingBox"===qi(this.patternElement,"patternContentUnits")?2:1}build(e){const t=(null==e?void 0:e.element)||this.element,s=new $i(t);s.build(Object.assign({},e));const i=s.value;if(i){const n=null==e?void 0:e.precision;this.clipRegion=i,s.clipPath&&(this.clipRegion=s.clipPath);const a=[i];this.setPaint(a,n),this.drawRegion=ie.getBoxRect(a);const{drawRegion:r,fillOpacity:o,patternWidth:l,patternHeight:c,tileWidth:h,tileHeight:u}=this,f=2===this.patternUnits;let d=this.offsetX%h,p=this.offsetY%u,g=0,m=0,y=r.right,v=r.bottom;f&&(g=r.left,m=r.top,y-=g,v-=m),0!==d&&(d=h-d,y+=h),0!==p&&(p=u-p,v+=u);let S=0;while(v>0){const s=this.patternElement,i=2===this.patternContentUnits,a=m+S++*u-p;let r=y,f=0;do{const p=g+f++*h-d,m=new Yi(t,s);m.build(Object.assign({},e)),m.cascade(t=>{if(ie.isShape(t)){t.setPath();const s=t.path;s&&(s.patternParent=this,i?s.refitBaseValue(p/l,a/c,n):s.refitBaseValue(p,a,n),s.build(Object.assign(Object.assign({},e),{transforms:t.transforms})),s.fillOpacity=(parseFloat(s.fillOpacity)*parseFloat(o)).toString(),s.clipPath=ie.drawRect(h,u,p,a,n)+(""!==s.clipPath?";"+s.clipPath:""))}return false}),this.append(m),r-=h}while(r>0);v-=u}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){s.fill="",s.fillOpacity="0",s.stroke=this.stroke,s.strokeWidth=this.strokeWidth;const e=new zi(t,false);e.path=s,this.append(e)}}}patternRefitX(e){return this.drawRegion?e*this.patternWidth:e}patternRefitY(e){return this.drawRegion?e*this.patternHeight:e}patternRefitPoints(e){if(this.drawRegion){const t=this.patternWidth,s=this.patternHeight,i=e.length;let n=0;while(n<i){const i=e[n++];if(i.x*=t,i.y*=s,void 0!==i.rx&&void 0!==i.ry)if(i.rx===i.ry){const e=Math.min(t,s);i.rx*=e,i.ry*=e}else i.rx*=t,i.ry*=s}}return e}get patternWidth(){const e=this.drawRegion;return e?e.right-e.left:0}get patternHeight(){const e=this.drawRegion;return e?e.bottom-e.top:0}get transforms(){if(!this.__get_transforms){const e=this.patternElement,t=ie.convertTransforms(e.patternTransform.baseVal),s=t.length;if(s){const i=R.rotateOrigin(e,"patternTransform"),n=this.patternWidth/2,a=this.patternHeight/2;let r=0;while(r<s){const e=t[r++];switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(i.length){const t=i.shift();if(t.angle===e.angle){e.origin={x:n+t.x,y:a+t.y};break}}if(e.origin)break;default:e.origin={x:n,y:a}}}this._transforms=super.transforms.concat(ie.filterTransforms(t))}this.__get_transforms=true}return super.transforms}get offsetX(){const e=this.patternElement.x.baseVal;return 2===this.patternUnits?this.patternWidth*ji(e.valueAsString):e.value}get offsetY(){const e=this.patternElement.y.baseVal;return 2===this.patternUnits?this.patternHeight*ji(e.valueAsString):e.value}get tileWidth(){const e=this.patternElement.width.baseVal;return 2===this.patternUnits?this.patternWidth*ji(e.valueAsString):e.value}get tileHeight(){const e=this.patternElement.height.baseVal;return 2===this.patternUnits?this.patternHeight*ji(e.valueAsString):e.value}get instanceType(){return 258}}class Ki extends(wi(Os(re(zi)))){constructor(e,t,s=true){super(e,false),this.element=e,this.shapeElement=t,this._retainStyle=false,this.__get_transforms=false,this.__get_animations=false,s&&this.setPath()}setPath(){const e=new $i(this.shapeElement);e.useParent=this,this.path=e}build(e){super.build(e);const t=this.path;this.setPaint(t?[t.value]:void 0,null==e?void 0:e.precision)}synchronize(e){e=Object.assign(Object.assign({},e),{element:this.shapeElement}),this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e),super.synchronize(e)}get transforms(){let e=super.transforms;return this.__get_transforms||(e=e.concat(this.getTransforms(this.shapeElement)),this._transforms=e,this.__get_transforms=true),e}get animations(){let e=super.animations;return this.__get_animations||(e=e.concat(this.getAnimations(this.shapeElement)),this._animations=e,this.__get_animations=true),e}get instanceType(){return 10244}}class Hi extends(Zt(Os(Ui))){constructor(e,t,s){super(e,s),this.element=e,this.shapeElement=t}build(e){super.build(Object.assign(Object.assign({},e),{element:this.shapeElement}))}synchronize(e){const t=this.animations.filter(e=>"x"===e.attributeName||"y"===e.attributeName||void 0===this.verifyBaseValue(e.attributeName,0)),s=this.getAnimateTransform(e);(t.length||s.length)&&this.animateSequentially(this.getAnimateViewRect(t),s,void 0,e),super.synchronize(e)}get instanceType(){return 514}}class Zi extends(wi(Zt(Os(re(Ms(js)))))){constructor(e,t){super(e),this.element=e,this.symbolElement=t}build(e){this.setRect(),super.build(Object.assign(Object.assign({},e),{symbolElement:this.symbolElement}));const t=this.getBaseValue("x",0),s=this.getBaseValue("y",0);if(0!==t||0!==s){const e={x:t,y:s};this.cascade(t=>(ie.asImage(t)&&(t.translationOffset=e),false))}this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}synchronize(e){this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e),super.synchronize(e)}get viewBox(){return this.symbolElement.viewBox.baseVal||A(this.element)}get instanceType(){return 66}}const Qi={constant:Ee,util:G};e.Svg=ei,e.SvgAnimate=Ye,e.SvgAnimateMotion=ls,e.SvgAnimateTransform=qe,e.SvgAnimation=ke,e.SvgAnimationIntervalMap=He,e.SvgBaseVal=re,e.SvgBuild=ie,e.SvgContainer=js,e.SvgElement=ti,e.SvgG=xi,e.SvgImage=Ri,e.SvgPaint=wi,e.SvgPath=$i,e.SvgPattern=Yi,e.SvgShape=zi,e.SvgShapePattern=Ui,e.SvgSynchronize=Zt,e.SvgUse=Ki,e.SvgUsePattern=Hi,e.SvgUseSymbol=Zi,e.SvgView=Ms,e.SvgViewRect=Os,e.lib=Qi,Object.defineProperty(e,"__esModule",{value:true})}));
