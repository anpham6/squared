!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){this.wrapped=e}function r(e){var t,r;function i(t,r){try{var s=e[t](r),o=s.value,l=o instanceof a;Promise.resolve(l?o.wrapped:o).then(function(e){l?i("next",e):n(s.done?"return":"normal",e)},function(e){i("throw",e)})}catch(e){n("throw",e)}}function n(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?i(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise(function(n,s){var o={key:e,arg:a,resolve:n,reject:s,next:null};r?r=r.next=o:(t=r=o,i(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function v(e,t,a){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=c(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(a):i.value}})(e,t,a||e)}function d(e,t,a,r){return(d="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,a,r){var i,n=c(e,t);if(n){if((i=Object.getOwnPropertyDescriptor(n,t)).set)return i.set.call(r,a),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,t)){if(!i.writable)return!1;i.value=a,Object.defineProperty(r,t,i)}else o(r,t,a);return!0})(e,t,a,r)}function p(e,t,a,r,i){if(!d(e,t,a,r||e)&&i)throw Error("failed to set property");return a}"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)};function y(e,t){return g(e)||function(e,t){var a=[],r=!0,i=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){i=!0,n=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw n}}return a}(e,t)||m()}function g(e){if(Array.isArray(e))return e}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var b=squared.lib.css,k=squared.lib.dom,S=squared.lib.math,A=squared.lib.regex,x="(".concat(A.STRING.DECIMAL,")"),T={MATRIX:RegExp("(matrix(?:3d)?)\\(".concat(x,", ").concat(x,", ").concat(x,", ").concat(x,", ").concat(x,", ").concat(x,"(?:, ").concat(x,")?(?:, ").concat(x,")?(?:, ").concat(x,")?(?:, ").concat(x,")?(?:, ").concat(x,")?(?:, ").concat(x,")?(?:, ").concat(x,")?(?:, ").concat(x,")?(?:, ").concat(x,")?(?:, ").concat(x,")?\\)"),"g"),ROTATE:RegExp("(rotate[XY]?)\\(".concat(A.STRING.CSS_ANGLE,"\\)"),"g"),SKEW:RegExp("(skew[XY]?)\\(".concat(A.STRING.CSS_ANGLE,"(?:, ").concat(A.STRING.CSS_ANGLE,")?\\)"),"g"),SCALE:RegExp("(scale[XY]?)\\(".concat(x,"(?:, ").concat(x,")?\\)"),"g"),TRANSLATE:RegExp("(translate[XY]?)\\(".concat(A.STRING.LENGTH_PERCENTAGE,"(?:, ").concat(A.STRING.LENGTH_PERCENTAGE,")?\\)"),"g")},R={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},w={applyX:function(e,t,a){return e.a*t+e.c*a+e.e},applyY:function(e,t,a){return e.b*t+e.d*a+e.f},clone:function(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}},rotate:function(e){var t=S.convertRadian(e),a=Math.cos(t),r=Math.sin(t);return{a:a,b:r,c:-1*r,d:a,e:0,f:0}},skew:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{a:1,b:Math.tan(S.convertRadian(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)),c:Math.tan(S.convertRadian(e)),d:1,e:0,f:0}},scale:function(){return{a:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b:0,c:0,d:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e:0,f:0}},translate:function(){return{a:1,b:0,c:0,d:1,e:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},_={create:function(e,t){return{type:e,matrix:t,angle:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,method:{x:!(arguments.length>3&&void 0!==arguments[3])||arguments[3],y:!(arguments.length>4&&void 0!==arguments[4])||arguments[4]}}},parse:function(e,t){var a=t||e.style.getPropertyValue("transform");if(""!==a){var r=[];for(var i in T)for(var n=void 0;null!==(n=T[i].exec(a));){var s=n[1].endsWith("X"),o=n[1].endsWith("Y");if(n[1].startsWith("rotate")){var l=b.convertAngle(n[2],n[3]),u=w.rotate(l);s?(u.a=1,u.b=0,u.c=0):o&&(u.b=0,u.c=0,u.d=1),r[n.index]=_.create(SVGTransform.SVG_TRANSFORM_ROTATE,u,l,!s,!o)}else if(n[1].startsWith("skew")){var f=o?0:b.convertAngle(n[2],n[3]),h=o?b.convertAngle(n[2],n[3]):n[4]&&n[5]?b.convertAngle(n[4],n[5]):0,c=w.skew(f,h);s?r[n.index]=_.create(SVGTransform.SVG_TRANSFORM_SKEWX,c,f,!0,!1):o?r[n.index]=_.create(SVGTransform.SVG_TRANSFORM_SKEWY,c,h,!1,!0):(r[n.index]=_.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign({},c,{b:0}),f,!0,!1),0!==h&&(r[n.index+1]=_.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign({},c,{c:0}),h,!1,!0)))}else if(n[1].startsWith("scale")){var v=o?void 0:parseFloat(n[2]),d=w.scale(v,s?void 0:o?parseFloat(n[2]):!s&&n[3]?parseFloat(n[3]):v);r[n.index]=_.create(SVGTransform.SVG_TRANSFORM_SCALE,d,0,!o,!s)}else if(n[1].startsWith("translate")){var p=b.getFontSize(e),y=b.parseUnit(n[2],p),g=!s&&n[3]?b.parseUnit(n[3],p):0,m=w.translate(o?0:y,o?y:g);r[n.index]=_.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,m,0)}else if(n[1].startsWith("matrix")){var k=_.matrix(e,t);k&&(r[n.index]=_.create(SVGTransform.SVG_TRANSFORM_MATRIX,k))}}var S=[];return r.forEach(function(e){e.fromCSS=!0,S.push(e)}),S}},matrix:function(e,t){var a=RegExp(T.MATRIX).exec(t||b.getStyle(e).transform||"");if(a)switch(a[1]){case"matrix":return{a:parseFloat(a[2]),b:parseFloat(a[3]),c:parseFloat(a[4]),d:parseFloat(a[5]),e:parseFloat(a[6]),f:parseFloat(a[7])};case"matrix3d":return{a:parseFloat(a[2]),b:parseFloat(a[3]),c:parseFloat(a[6]),d:parseFloat(a[7]),e:parseFloat(a[14]),f:parseFloat(a[15])}}},origin:function(e,t){void 0===t&&(t=N(e,"transform-origin"));var a={x:0,y:0};if(""!==t){var r=function(t,r,i){b.isLength(r)?a[t]=b.parseUnit(r,b.getFontSize(e)):b.isPercent(r)&&(a[t]=parseFloat(r)/100*i)},i=G(e),n=0,s=0;if(i)n=i.width,s=i.height;else{var o=e.parentElement;o instanceof SVGGraphicsElement&&o.viewportElement&&(V.svg(o.viewportElement)||V.symbol(o.viewportElement))&&(n=o.viewportElement.viewBox.baseVal.width,s=o.viewportElement.viewBox.baseVal.height)}if(!n||!s){var l=e.getBoundingClientRect();n=l.width,s=l.height}var u=t.split(" ");switch(1===u.length&&u.push("center"),u[0]){case"0%":case"left":break;case"100%":case"right":a.x=n;break;case"center":u[0]="50%";default:r("x",u[0],n)}switch(u[1]){case"0%":case"top":break;case"100%":case"bottom":a.y=s;break;case"center":u[1]="50%";default:r("y",u[1],s)}}return a},rotateOrigin:function(e){var t=k.getNamedItem(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transform"),a=[];if(""!==t)for(var r,i=/rotate\((-?[\d.]+)(?:,? (-?[\d.]+))?(?:,? (-?[\d.]+))?\)/g;null!==(r=i.exec(t));){var n=parseFloat(r[1]);0!==n&&a.push({angle:n,x:r[2]?parseFloat(r[2]):0,y:r[3]?parseFloat(r[3]):0})}return a},typeAsName:function(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue:function(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}},V={svg:function(e){return"svg"===e.tagName},g:function(e){return"g"===e.tagName},symbol:function(e){return"symbol"===e.tagName},path:function(e){return"path"===e.tagName},shape:function(e){return void 0!==R[e.tagName]},image:function(e){return"image"===e.tagName},use:function(e){return"use"===e.tagName},line:function(e){return"line"===e.tagName},rect:function(e){return"rect"===e.tagName},circle:function(e){return"circle"===e.tagName},ellipse:function(e){return"ellipse"===e.tagName},polygon:function(e){return"polygon"===e.tagName},polyline:function(e){return"polyline"===e.tagName},clipPath:function(e){return"clipPath"===e.tagName},pattern:function(e){return"pattern"===e.tagName},linearGradient:function(e){return"linearGradient"===e.tagName},radialGradient:function(e){return"radialGradient"===e.tagName}};function E(e){var t=e.getBoundingClientRect();return t.x=t.left,t.y=t.top,t}function N(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return k.getNamedItem(e,t)||a&&b.getStyle(e).getPropertyValue(t)||""}function M(e,t){for(var a=e,r="";a&&(""===(r=N(a,t))||"inherit"===r);)a=a.parentElement;return r}function P(e){var t=/url\("?(#.+?)"?\)/.exec(e);return t?t[1]:""}function F(e,t){var a=k.getNamedItem(e,"href");if("#"===a.charAt(0)){var r,i=a.substring(1);if(void 0===t)for(r=e.parentElement;r&&r.parentElement instanceof SVGGraphicsElement;)r=r.parentElement;else r=t;if(r)for(var n=r.querySelectorAll("*"),s=0;s<n.length;s++){var o=n[s];if(o.id===i&&o instanceof SVGElement)return o}else{var l=document.getElementById(i);if(l instanceof SVGElement)return l}}return null}function G(e){for(var t=e.parentElement;t;){if((V.svg(t)||V.symbol(t))&&t.viewBox&&t.viewBox.baseVal.width>0&&t.viewBox.baseVal.height>0)return t.viewBox.baseVal;t=t.parentElement}}function C(e){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t.getTotalLength()}var O=Object.freeze({MATRIX:w,TRANSFORM:_,SVG:V,getDOMRect:E,getAttribute:N,getParentAttribute:M,parseAttributeURL:P,getTargetElement:F,getNearestViewBox:G,getPathLength:C}),B=squared.lib.dom,L=squared.lib.math,I=squared.lib.regex,q=squared.lib.util,z=new Map,j=function(){function e(){i(this,e)}return s(e,null,[{key:"isContainer",value:function(e){return q.hasBit(e.instanceType,2)}},{key:"isElement",value:function(e){return q.hasBit(e.instanceType,4)}},{key:"isShape",value:function(e){return q.hasBit(e.instanceType,2052)}},{key:"isAnimate",value:function(e){return q.hasBit(e.instanceType,16392)}},{key:"asSvg",value:function(e){return 18===e.instanceType}},{key:"asG",value:function(e){return 34===e.instanceType}},{key:"asPattern",value:function(e){return 130===e.instanceType}},{key:"asShapePattern",value:function(e){return 258===e.instanceType}},{key:"asUsePattern",value:function(e){return 514===e.instanceType}},{key:"asImage",value:function(e){return 4100===e.instanceType}},{key:"asUse",value:function(e){return 10244===e.instanceType}},{key:"asUseSymbol",value:function(e){return 66===e.instanceType}},{key:"asSet",value:function(e){return 8===e.instanceType}},{key:"asAnimate",value:function(e){return 16392===e.instanceType}},{key:"asAnimateTransform",value:function(e){return 81928===e.instanceType}},{key:"asAnimateMotion",value:function(e){return 49160===e.instanceType}},{key:"setName",value:function(e){if(e){var t,a="";if(q.isString(e.id)){var r=q.convertWord(e.id,!0);z.has(r)||(a=r),t=r}else t=e.tagName;var i=z.get(t)||0;return""!==a?(z.set(a,i),a):(z.set(t,++i),"".concat(t,"_").concat(i))}return z.clear(),""}},{key:"drawLine",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,n="M".concat(e,",").concat(t," L").concat(a,",").concat(r);return i?L.truncateString(n,i):n}},{key:"drawRect",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,n="M".concat(a,",").concat(r," ").concat(a+e,",").concat(r," ").concat(a+e,",").concat(r+t," ").concat(a,",").concat(r+t," Z");return i?L.truncateString(n,i):n}},{key:"drawCircle",value:function(t,a,r,i){return e.drawEllipse(t,a,r,r,i)}},{key:"drawEllipse",value:function(e,t,a,r,i){void 0===r&&(r=a);var n="M".concat(e-a,",").concat(t," a").concat(a,",").concat(r,",0,0,1,").concat(2*a,",0 a").concat(a,",").concat(r,",0,0,1,-").concat(2*a,",0");return i?L.truncateString(n,i):n}},{key:"drawPolygon",value:function(t,a){return t.length?"".concat(e.drawPolyline(t,a)," Z"):""}},{key:"drawPolyline",value:function(e,t){for(var a="M",r=Array.isArray(n=e),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var o=s;a+="".concat(o.x,",").concat(o.y," ")}return a=a.substring(0,a.length-1),t?L.truncateString(a,t):a}},{key:"drawPath",value:function(e,t){for(var a="",r=Array.isArray(n=e),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var o=s;switch(a+=(""!==a?" ":"")+o.name,o.name.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":a+=o.coordinates.join(",");break;case"H":a+=o.coordinates[0];break;case"V":a+=o.coordinates[1];break;case"A":a+="".concat(o.radiusX,",").concat(o.radiusY,",").concat(o.xAxisRotation,",").concat(o.largeArcFlag,",").concat(o.sweepFlag,",").concat(o.coordinates.join(","))}}return t?L.truncateString(a,t):a}},{key:"drawRefit",value:function(t,a,r){var i;if(V.path(t)){if(i=B.getNamedItem(t,"d"),a&&a.requireRefit()){var n=e.getPathCommands(i);if(n.length){var s=e.extractPathPoints(n);s.length&&(a.refitPoints(s),i=e.drawPath(e.rebindPathPoints(n,s),r))}}}else if(V.line(t)){var o=[{x:t.x1.baseVal.value,y:t.y1.baseVal.value},{x:t.x2.baseVal.value,y:t.y2.baseVal.value}];a&&a.requireRefit()&&a.refitPoints(o),i=e.drawPolyline(o,r)}else if(V.circle(t)||V.ellipse(t)){var l,u;V.ellipse(t)?(l=t.rx.baseVal.value,u=t.ry.baseVal.value):u=l=t.r.baseVal.value;var f=[{x:t.cx.baseVal.value,y:t.cy.baseVal.value,rx:l,ry:u}];a&&a.requireRefit()&&a.refitPoints(f);var h=f[0];i=e.drawEllipse(h.x,h.y,h.rx,h.ry,r)}else if(V.rect(t)){var c=t.x.baseVal.value,v=t.y.baseVal.value,d=t.width.baseVal.value,p=t.height.baseVal.value;a&&a.requireRefit()&&(c=a.refitX(c),v=a.refitY(v),d=a.refitSize(d),p=a.refitSize(p)),i=e.drawRect(d,p,c,v,r)}else if(V.polygon(t)||V.polyline(t)){var y=e.clonePoints(t.points);a&&a.requireRefit()&&a.refitPoints(y),i=V.polygon(t)?e.drawPolygon(y,r):e.drawPolyline(y,r)}else i="";return i}},{key:"transformRefit",value:function(t,a,r,i){var n=e.getPathCommands(t);if(n.length){var s=e.extractPathPoints(n);if(s.length){var o=a&&a.length>0;o&&(s=e.applyTransforms(a,s,r&&_.origin(r.element))),r&&r.parent&&r.parent.requireRefit()&&r.parent.refitPoints(s),t=e.drawPath(e.rebindPathPoints(n,s,o),i)}}return t}},{key:"getPathCommands",value:function(t){var a,r=[],i=/([A-Za-z])([^A-Za-z]+)?/g;for(t=t.trim();null!==(a=i.exec(t))&&(0!==r.length||"M"===a[1].toUpperCase());){var n=e.parseCoordinates((a[2]||"").trim()),s=void 0,o=void 0;if(r.length){var l=r[r.length-1];s=l.name.toUpperCase(),o=l.end}var u=void 0,f=void 0,h=void 0,c=void 0,v=void 0;switch(a[1].toUpperCase()){case"M":0===r.length&&(a[1]="M");case"L":if(n.length>=2){n.length%2!=0&&n.length--;break}continue;case"H":if(o&&n.length){n[1]="h"===a[1]?0:o.y,n.length=2;break}continue;case"V":if(o&&n.length){var d=n[0];n[0]="v"===a[1]?0:o.x,n[1]=d,n.length=2;break}continue;case"Z":if(r.length){n[0]=r[0].coordinates[0],n[1]=r[0].coordinates[1],n.length=2,a[1]="Z";break}continue;case"C":if(n.length>=6){n.length=6;break}continue;case"S":if(n.length>=4&&("C"===s||"S"===s)){n.length=4;break}continue;case"Q":if(n.length>=4){n.length=4;break}continue;case"T":if(n.length>=2&&("Q"===s||"T"===s)){n.length=2;break}continue;case"A":if(n.length>=7){var p=y(n.splice(0,5),5);u=p[0],f=p[1],h=p[2],c=p[3],v=p[4],n.length=2;break}continue;default:continue}if(n.length>=2){for(var g=a[1]===a[1].toLowerCase(),m=[],b=0;b<n.length;b+=2){var k=n[b],S=n[b+1];g&&o&&(k+=o.x,S+=o.y),m.push({x:k,y:S})}r.push({name:a[1],value:m,start:m[0],end:m[m.length-1],relative:g,coordinates:n,radiusX:u,radiusY:f,xAxisRotation:h,largeArcFlag:c,sweepFlag:v})}}return r}},{key:"extractPathPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[],r=0,i=0,n=0;n<e.length;n++){for(var s=e[n],o=0;o<s.coordinates.length;o+=2){s.relative?(r+=s.coordinates[o],i+=s.coordinates[o+1]):(r=s.coordinates[o],i=s.coordinates[o+1]);var l={x:r,y:i};"A"===s.name.toUpperCase()&&(l.rx=s.radiusX,l.ry=s.radiusY,t&&(s.coordinates[o]>=0?l.y-=s.radiusY:l.y+=s.radiusY)),a.push(l)}s.relative&&(s.name=s.name.toUpperCase())}return a}},{key:"rebindPathPoints",value:function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(var i=Array.isArray(s=e),n=0,s=i?s:s[Symbol.iterator]();;){var o;if(i){if(n>=s.length)break;o=s[n++]}else{if((n=s.next()).done)break;o=n.value}var l=o;if(l.relative){if(!a)break;if(!r||"H"!==l.name&&"V"!==l.name){for(var u=0,f=0;u<l.coordinates.length;u+=2,f++){var h=t.shift();if(!h)break e;l.coordinates[u]=h.x-a.x,l.coordinates[u+1]=h.y-a.y,"a"===l.name&&void 0!==h.rx&&void 0!==h.ry&&(l.radiusX=h.rx,l.radiusY=h.ry),l.value[f]=h}l.name=l.name.toLowerCase()}else{var c=t.shift();if(!c)break e;l.coordinates[0]=c.x,l.coordinates[1]=c.y,l.value[0]=c,l.start=c,l.end=c,l.name="L",l.relative=!1}a=l.end}else{switch(l.name.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":for(var v=0,d=0;v<l.coordinates.length;v+=2,d++){var p=t.shift();if(!p){e=[];break e}l.coordinates[v]=p.x,l.coordinates[v+1]=p.y,l.value[d]=p}break;case"A":var y=t.shift();if(!y||void 0===y.rx||void 0===y.ry){e=[];break e}l.coordinates[0]=y.x,l.coordinates[1]=y.y,l.radiusX=y.rx,l.radiusY=y.ry,l.value[0]=y}l.relative||(a=l.end)}}return e}},{key:"filterTransforms",value:function(e,t){for(var a=[],r=Array.isArray(n=e),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var o=s;if(void 0===t||!t.includes(o.type)){switch(o.type){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===o.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(1===o.matrix.a&&1===o.matrix.d)continue;break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(0===o.matrix.e&&0===o.matrix.f)continue}a.push(o)}}return a}},{key:"applyTransforms",value:function(t,a,r){t=t.slice(0).reverse();for(var i=e.clonePoints(a),n=Array.isArray(o=t),s=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var u=l,f=u.matrix,h=0,c=0,v=0,d=0;if(r)switch(u.type){case SVGTransform.SVG_TRANSFORM_SCALE:u.method.x&&(v=r.x*(1-f.a)),u.method.y&&(d=r.y*(1-f.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:u.method.y&&(c-=r.y);break;case SVGTransform.SVG_TRANSFORM_SKEWY:u.method.x&&(h-=r.x);break;case SVGTransform.SVG_TRANSFORM_ROTATE:u.method.x&&(h-=r.x,v=r.x+L.offsetAngleY(u.angle,r.x)),u.method.y&&(c-=r.y,d=r.y+L.offsetAngleY(u.angle,r.y))}for(var p=Array.isArray(g=i),y=0,g=p?g:g[Symbol.iterator]();;){var m;if(p){if(y>=g.length)break;m=g[y++]}else{if((y=g.next()).done)break;m=y.value}var b=m,k=b.x;if(b.x=w.applyX(f,k,b.y+c)+v,b.y=w.applyY(f,k+h,b.y)+d,u.type===SVGTransform.SVG_TRANSFORM_SCALE&&void 0!==b.rx&&void 0!==b.ry){var S=b.rx;b.rx=w.applyX(f,S,b.ry+c),b.ry=w.applyY(f,S+h,b.ry)}}}return i}},{key:"convertTransforms",value:function(e){for(var t=[],a=0;a<e.numberOfItems;a++){var r=e.getItem(a);t.push(_.create(r.type,r.matrix,r.angle))}return t}},{key:"clonePoints",value:function(e){var t=[];if(Array.isArray(e))for(var a=Array.isArray(i=e),r=0,i=a?i:i[Symbol.iterator]();;){var n;if(a){if(r>=i.length)break;n=i[r++]}else{if((r=i.next()).done)break;n=r.value}var s=n,o={x:s.x,y:s.y};void 0!==s.rx&&void 0!==s.ry&&(o.rx=s.rx,o.ry=s.ry),t.push(o)}else for(var l=0;l<e.numberOfItems;l++){var u=e.getItem(l);t.push({x:u.x,y:u.y})}return t}},{key:"minMaxPoints",value:function(e){for(var t=e[0].x,a=e[0].x,r=e[0].y,i=e[0].y,n=1;n<e.length;n++){var s=e[n];s.x<t?t=s.x:s.x>a&&(a=s.x),s.y<r?r=s.y:s.y>i&&(i=s.y)}return[t,r,a,i]}},{key:"centerPoints",value:function(e){var t=this.minMaxPoints(e);return{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}}},{key:"convertPoints",value:function(e){var t=[];if(e.length%2==0)for(var a=0;a<e.length;a+=2)t.push({x:e[a],y:e[a+1]});return t}},{key:"parsePoints",value:function(e){var t=[],a=e.trim().split(I.CHAR.SPACE),r=Array.isArray(a),i=0;for(a=r?a:a[Symbol.iterator]();;){var n;if(r){if(i>=a.length)break;n=a[i++]}else{if((i=a.next()).done)break;n=i.value}var s=y(q.replaceMap(n.split(I.XML.SEPARATOR),function(e){return parseFloat(e)}),2);t.push({x:s[0],y:s[1]})}return t}},{key:"parseCoordinates",value:function(e){for(var t,a=[],r=/-?[\d.]+/g;null!==(t=r.exec(e));){var i=parseFloat(t[0]);isNaN(i)||a.push(i)}return a}},{key:"parseBoxRect",value:function(t){for(var a=[],r=Array.isArray(n=t),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}q.concatArray(a,e.extractPathPoints(e.getPathCommands(s),!0))}var o=this.minMaxPoints(a);return{top:o[1],right:o[2],bottom:o[3],left:o[0]}}}]),e}(),X=squared.lib.dom;function D(e,t,a,r,i){for(var n=Array.isArray(o=e),s=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var u=l;u.x+=t,u.y+=a,void 0!==u.rx&&void 0!==u.ry&&(u.rx*=r,u.ry*=i)}}var Y=function(e){return function(t){function a(){var e;return i(this,a),(e=h(this,u(a).apply(this,arguments)))._baseVal={},e}return l(a,e),s(a,[{key:"setBaseValue",value:function(e,t){if(void 0!==t){if(this.verifyBaseValue(e,t))return this._baseVal[e]=t,!0}else switch(e){case"d":return this._baseVal[e]=X.getNamedItem(this.element,"d"),!0;case"points":var a=this.element[e];if(Array.isArray(a))return this._baseVal[e]=j.clonePoints(a),!0;break;default:var r=this.element[e];if(r&&r.baseVal)return this._baseVal[e]=r.baseVal.value,!0}return!1}},{key:"getBaseValue",value:function(e,t){return void 0!==this._baseVal[e]||this.setBaseValue(e)?this._baseVal[e]:t}},{key:"refitBaseValue",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;for(var n in this._baseVal){var s=this._baseVal[n];if("string"==typeof s){if("d"===n){var o=j.getPathCommands(s),l=j.extractPathPoints(o);D(l,e,t,r,i),this._baseVal[n]=j.drawPath(j.rebindPathPoints(o,l),a)}}else if("number"==typeof s)switch(n){case"cx":case"x1":case"x2":case"x":this._baseVal[n]+=e;break;case"cy":case"y1":case"y2":case"y":this._baseVal[n]+=t;break;case"r":this._baseVal[n]*=Math.min(r,i);break;case"rx":case"width":this._baseVal[n]*=r;break;case"ry":case"height":this._baseVal[n]*=i}else Array.isArray(s)&&"points"===n&&D(s,e,t,r,i)}}},{key:"verifyBaseValue",value:function(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}}]),a}()},W=squared.lib.css,U=squared.lib.dom,H=squared.lib.util,K={MS:/-?\d+ms$/,S:/-?\d+s$/,MIN:/-?\d+min$/,H:/-?\d+(.\d+)?h$/,CLOCK:/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/},Z=function(){function e(t,a){if(i(this,e),this.element=null,this.animationElement=null,this.paused=!1,this.fillMode=0,this.synchronizeState=0,this._attributeName="",this._duration=-1,this._delay=0,this._to="",t&&(this.element=t),a){this.animationElement=a,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");var r=U.getNamedItem(a,"dur");""!==r&&"indefinite"!==r&&(this.duration=e.convertClockTime(r))}}return s(e,[{key:"setAttribute",value:function(e,t){if(this.animationElement){var a=U.getNamedItem(this.animationElement,e);""!==a&&(void 0!==t?this[e+H.capitalize(t)]=a===t:this[e]=a)}}},{key:"addState",value:function(){for(var e=arguments.length,t=[],a=0;a<e;a++)t[a]=arguments[a];for(var r=0,i=t;r<i.length;r++){var n=i[r];H.hasBit(this.synchronizeState,n)||(this.synchronizeState|=n)}}},{key:"removeState",value:function(){for(var e=arguments.length,t=[],a=0;a<e;a++)t[a]=arguments[a];for(var r=0,i=t;r<i.length;r++){var n=i[r];H.hasBit(this.synchronizeState,n)&&(this.synchronizeState^=n)}}},{key:"hasState",value:function(){for(var e=this,t=arguments.length,a=[],r=0;r<t;r++)a[r]=arguments[r];return a.some(function(t){return H.hasBit(e.synchronizeState,t)})}},{key:"setFillMode",value:function(e,t){var a=H.hasBit(this.fillMode,t);e?a||(this.fillMode|=t):a&&(this.fillMode^=t)}},{key:"attributeName",set:function(e){if("transform"!==e&&!this.baseValue){var t=this.animationElement&&this.animationElement.parentElement||this.element;t&&(this.baseValue=H.optionalAsString(t,"".concat(e,".baseVal.valueAsString"))||M(t,e),W.isLength(this.baseValue)&&(this.baseValue=""+W.parseUnit(this.baseValue,W.getFontSize(t))))}this._attributeName=e},get:function(){return this._attributeName}},{key:"delay",set:function(e){this._delay=e},get:function(){return this._delay}},{key:"duration",set:function(e){this._duration=Math.round(e)},get:function(){return this._duration}},{key:"to",set:function(e){this._to=e},get:function(){return this._to}},{key:"fillBackwards",set:function(e){this.setFillMode(e,8)},get:function(){return H.hasBit(this.fillMode,8)}},{key:"fillForwards",set:function(e){this.setFillMode(e,4)},get:function(){return H.hasBit(this.fillMode,4)}},{key:"fillFreeze",set:function(e){this.setFillMode(e,2)},get:function(){return H.hasBit(this.fillMode,2)}},{key:"fillReplace",get:function(){return 0===this.fillMode||8===this.fillMode}},{key:"group",set:function(e){this._group=e},get:function(){return this._group||{id:-1/0,name:""}}},{key:"setterType",set:function(e){},get:function(){return!0}},{key:"instanceType",get:function(){return 8}}],[{key:"convertClockTime",value:function(e){var t=0,a=0;if(H.isNumber(e))t=parseInt(e);else if(K.MS.test(e))a=parseFloat(e);else if(K.S.test(e))t=parseFloat(e);else if(K.MIN.test(e))t=60*parseFloat(e);else if(K.H.test(e))t=60*parseFloat(e)*60;else{var r=K.CLOCK.exec(e);r&&(r[2]&&(t+=60*parseInt(r[2])*60),r[3]&&(t+=60*parseInt(r[3])),r[4]&&(t+=parseInt(r[4])),r[5]&&(a=parseInt(r[5])*(r[5].length<3?Math.pow(10,3-r[5].length):1)),r[1]&&(t*=-1,a*=-1))}return 1e3*t+a}}]),e}(),$={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"},Q=Object.freeze({KEYSPLINE_NAME:$}),J=squared.lib.color,ee=squared.lib.css,te=squared.lib.dom,ae=squared.lib.regex,re=squared.lib.util,ie=function(e){return parseFloat((1-e).toPrecision(5))},ne=function(e){function t(e,a){var r;if(i(this,t),(r=h(this,u(t).call(this,e,a))).type=0,r.from="",r.alternate=!1,r.additiveSum=!1,r.accumulateSum=!1,r.evaluateStart=!1,r._iterationCount=1,r._reverse=!1,r._setterType=!1,r._repeatDuration=-1,a){var n=te.getNamedItem(a,"values"),s=-1!==r.duration?t.toFractionList(te.getNamedItem(a,"keyTimes")):[];if(""!==n)r.values=re.trimEnd(n,";").split(/\s*;\s*/),r.length>1&&s.length===r.length?(r.from=r.values[0],r.to=r.values[r.length-1],r.keyTimes=s):1===r.length&&(r.to=r.values[0],r.convertToValues());else{if(r.from=te.getNamedItem(a,"from"),""===r.to){var o=te.getNamedItem(a,"by");re.isNumber(o)&&(""===r.from&&(r.baseValue&&(r.from=r.baseValue),r.evaluateStart=!0),re.isNumber(r.from)&&(r.to=""+(parseFloat(r.from)+parseFloat(o))))}re.isNumber(r.to)&&r.setAttribute("additive","sum"),r.convertToValues(s)}var l=te.getNamedItem(a,"repeatDur");""!==l&&"indefinite"!==l&&(r._repeatDuration=Z.convertClockTime(l));var f=te.getNamedItem(a,"repeatCount");r.iterationCount="indefinite"===f?-1:parseFloat(f),"animate"===a.tagName&&r.setCalcMode(r.attributeName)}return r}return l(t,Z),s(t,[{key:"setCalcMode",value:function(e){switch(te.getNamedItem(this.animationElement,"calcMode")){case"discrete":if(2===this.keyTimes.length&&0===this.keyTimes[0]){for(var a=[],r=[],i=0;i<this.keyTimes.length-1;i++){var n=t.convertStepTimingFunction(e,"step-end",this.keyTimes,this.values,i,ee.getFontSize(this.animationElement));n&&(re.concatArray(a,n[0]),re.concatArray(r,n[1]))}a.push(this.keyTimes.pop()),r.push(this.values.pop()),this.values=r,this.keyTimes=a,this._keySplines=[$["step-end"]]}break;case"spline":this.keySplines=re.flatMap(te.getNamedItem(this.animationElement,"keySplines").split(";"),function(e){return e.trim()});case"linear":if(0!==this.keyTimes[0]&&1!==this.keyTimes[this.keyTimes.length-1]){for(var s=[],o=this.values.length,l=0;l<o;l++)s.push(l/(o-1));this._keyTimes=s,this._keySplines=void 0}}}},{key:"convertToValues",value:function(e){this.to&&(this.values=[this.from,this.to],this.keyTimes=e&&2===e.length&&0===this.keyTimes[0]&&this.keyTimes[1]<=1?e:[0,1],""===this.from&&(this.evaluateStart=!0))}},{key:"isLoop",value:function(e){return!!this.loopIntervals&&!0===this.loopIntervals[e]}},{key:"setGroupOrdering",value:function(e){if(this.group.ordering=e,this.fillBackwards)for(var t=e.length-1,a=!1;t>=0;t--)if(a){if("backwards"===e[t].fillMode||"both"===e[t].fillMode){this.fillBackwards=!1;break}}else e[t].name===this.group.name&&(a=!0)}},{key:"getIntervalEndTime",value:function(e){var t=this.getTotalDuration();if(e<t){for(var a=this.duration,r=this.delay;r+a<=e;)r+=a;return Math.min(r+this.keyTimes[this.keyTimes.length-1]*this.duration,t)}return t}},{key:"getTotalDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&-1===this.iterationCount?1:this.iterationCount;return-1!==e?Math.min(this.delay+this.duration*e,this.end||1/0):1/0}},{key:"delay",set:function(e){p(u(t.prototype),"delay",e,this,!0);var a=te.getNamedItem(this.animationElement,"end");if(a){var r=re.sortNumber(re.replaceMap(a.split(";"),function(e){return Z.convertClockTime(e)}))[0];!isNaN(r)&&(-1===this.iterationCount||this.duration>0&&r<this.duration*this.iterationCount)&&(this.delay>r?(this.end=r,-1===this.iterationCount&&(this.iterationCount=Math.ceil((this.end-this.delay)/this.duration))):this.duration=-1)}},get:function(){return v(u(t.prototype),"delay",this)}},{key:"duration",set:function(e){p(u(t.prototype),"duration",e,this,!0)},get:function(){var e=v(u(t.prototype),"duration",this);return-1===e&&-1!==this._repeatDuration?this._repeatDuration:e}},{key:"iterationCount",set:function(e){this._iterationCount=isNaN(e)?1:e,this.fillFreeze=-1!==this.iterationCount&&"freeze"===te.getNamedItem(this.animationElement,"fill"),1!==this.iterationCount?this.setAttribute("accumulate","sum"):this.accumulateSum=!1},get:function(){return this.duration>0?-1!==this._repeatDuration&&(-1===this._iterationCount||this._repeatDuration<this._iterationCount*this.duration)?this._repeatDuration/this.duration:this._iterationCount:1}},{key:"to",set:function(e){p(u(t.prototype),"to",e,this,!0)},get:function(){return this._setterType?this.valueTo||v(u(t.prototype),"to",this):this.setterType?this.values[0]:v(u(t.prototype),"to",this)}},{key:"values",set:function(e){this._values=e,this._keyTimes&&this._keyTimes.length!==e.length&&(this._keyTimes=void 0,this._keySplines=void 0)},get:function(){return void 0===this._values&&(this._values=[]),this._values}},{key:"valueTo",get:function(){return this._values?this._values[this._values.length-1]:""}},{key:"valueFrom",get:function(){return this.values[0]||""}},{key:"keyTimes",set:function(e){!e.every(function(e){return e>=0&&e<=1})||void 0!==this._values&&this._values.length!==e.length||(this._keyTimes=e)},get:function(){return void 0===this._keyTimes&&(this._keyTimes=[]),this._keyTimes}},{key:"keySplines",set:function(e){if(e&&e.length){var t=this.keyTimes.length-1;if(e.length>=t&&!e.every(function(e){return""===e||e===$.linear})){for(var a=[],r=0;r<t;r++){var i=re.replaceMap(e[r].split(" "),function(e){return parseFloat(e)});4===i.length&&!i.some(function(e){return isNaN(e)})&&i[0]>=0&&i[0]<=1&&i[2]>=0&&i[2]<=1?a.push(i.join(" ")):a.push($.linear)}this._keySplines=a}}else this._keySplines=void 0},get:function(){return this._keySplines}},{key:"timingFunction",set:function(e){this._timingFunction=e},get:function(){return this._timingFunction||this.keySplines&&this.keySplines[0]}},{key:"reverse",set:function(e){if(e!==this._reverse&&this.length){this.values.reverse();for(var t=[],a=Array.isArray(i=this.keyTimes),r=0,i=a?i:i[Symbol.iterator]();;){var n;if(a){if(r>=i.length)break;n=i[r++]}else{if((r=i.next()).done)break;n=r.value}t.push(1-n)}if(t.reverse(),this.keyTimes=t,this._keySplines){for(var s=[],o=this._keySplines.length-1;o>=0;o--){var l=re.replaceMap(this._keySplines[o].split(" "),function(e){return parseFloat(e)});s.push(4===l.length?"".concat(ie(l[2])," ").concat(ie(l[3])," ").concat(ie(l[0])," ").concat(ie(l[1])):$.linear)}this._keySplines=s}this._reverse=e}},get:function(){return this._reverse}},{key:"playable",get:function(){return!this.paused&&this.keyTimes&&this.keyTimes.length>1&&this.duration>0}},{key:"fillReplace",get:function(){return v(u(t.prototype),"fillReplace",this)||-1===this.iterationCount}},{key:"fromToType",get:function(){return 2===this.keyTimes.length&&0===this.keyTimes[0]&&1===this.keyTimes[1]}},{key:"partialType",get:function(){return this.keyTimes.length>1&&this.keyTimes[this.keyTimes.length-1]<1}},{key:"setterType",set:function(e){this._setterType=e},get:function(){return this._setterType||null!==this.animationElement&&0===this.duration&&this.keyTimes.length>=2&&0===this.keyTimes[0]&&""!==this.values[0]}},{key:"length",get:function(){return this._values?this._values.length:0}},{key:"instanceType",get:function(){return 16392}}],[{key:"getSplitValue",value:function(e,t,a){return e+(t-e)*a}},{key:"convertStepTimingFunction",value:function(e,a,r,i,n,s){var o,l;switch(e){case"fill":case"stroke":var u=J.parseColor(i[n]),f=J.parseColor(i[n+1]);u&&f&&(o=[u],l=[f]);break;case"points":o=j.convertPoints(j.parseCoordinates(i[n])),l=j.convertPoints(j.parseCoordinates(i[n+1]));break;case"rotate":case"scale":case"translate":o=re.replaceMap(i[n].trim().split(ae.CHAR.SPACE),function(e){return parseFloat(e)}),l=re.replaceMap(i[n+1].trim().split(ae.CHAR.SPACE),function(e){return parseFloat(e)});break;default:re.isNumber(i[n])?o=[parseFloat(i[n])]:ee.isLength(i[n])&&(o=[ee.parseUnit(i[n],s)]),re.isNumber(i[n+1])?l=[parseFloat(i[n+1])]:ee.isLength(i[n+1])&&(l=[ee.parseUnit(i[n+1],s)])}if(o&&l&&o.length&&o.length===l.length){switch(a){case"step-start":a="steps(1, start)";break;case"step-end":a="steps(1, end)"}var h=/steps\((\d+)(?:, (start|end))?\)/.exec(a);if(h){for(var c=r[n+1]-r[n],v=parseInt(h[1]),d=100/v,p=[],y=[],g=0;g<=v;g++){var m=r[n]+c*(g/v),b=d*(g+(0===g&&"start"===h[2]?1:0))/100,k=[];switch(e){case"fill":case"stroke":var S=o[0],A=l[0],x=J.getHexCode(t.getSplitValue(S.rgba.r,A.rgba.r,b),t.getSplitValue(S.rgba.g,A.rgba.g,b),t.getSplitValue(S.rgba.b,A.rgba.b,b)),T=J.getHexCode(t.getSplitValue(S.rgba.a,A.rgba.a,b));k.push("#".concat(x+("FF"!==T?T:"")));break;case"points":for(var R=0;R<o.length;R++){var w=o[R],_=l[R];k.push("".concat(t.getSplitValue(w.x,_.x,b),",").concat(t.getSplitValue(w.y,_.y,b)))}break;default:for(var V=0;V<o.length;V++){k.push(""+t.getSplitValue(o[V],l[V],b))}}if(!k.length)return;p.push(m),y.push(k.join(" "))}return[p,y]}}}},{key:"toFractionList",value:function(e){var t=0,a=re.replaceMap(e.split(arguments.length>1&&void 0!==arguments[1]?arguments[1]:";"),function(e){var a=parseFloat(e);return!isNaN(a)&&a>=t&&a<=1?(t=a,a):-1});return a.length>1&&0===a[0]&&a.some(function(e){return-1!==e})?a:[]}}]),t}(),se=squared.lib.dom,oe=squared.lib.util,le=function(e){function t(e,a){var r;if(i(this,t),r=h(this,u(t).call(this,e,a)),a){var n=se.getNamedItem(a,"type");r.setType(n),r.setCalcMode(n)}return r}return l(t,ne),s(t,null,[{key:"toRotateList",value:function(e){for(var t=[],a=Array.isArray(i=e),r=0,i=a?i:i[Symbol.iterator]();;){var n;if(a){if(r>=i.length)break;n=i[r++]}else{if((r=i.next()).done)break;n=r.value}var s=n;if(""===s)t.push([0,0,0]);else{var o=j.parseCoordinates(s);if(1===o.length&&(o[1]=0,o[2]=0),3!==o.length)return;t.push(o)}}return t}},{key:"toScaleList",value:function(e){for(var t=[],a=Array.isArray(i=e),r=0,i=a?i:i[Symbol.iterator]();;){var n;if(a){if(r>=i.length)break;n=i[r++]}else{if((r=i.next()).done)break;n=r.value}var s=n;if(""===s)t.push([1,1,0,0]);else{var o=j.parseCoordinates(s);if(1===o.length&&(o[1]=o[0]),2===o.length&&(o[2]=0,o[3]=0),4!==o.length)return;t.push(o)}}return t}},{key:"toTranslateList",value:function(e){for(var t=[],a=Array.isArray(i=e),r=0,i=a?i:i[Symbol.iterator]();;){var n;if(a){if(r>=i.length)break;n=i[r++]}else{if((r=i.next()).done)break;n=r.value}var s=n;if(""===s)t.push([0,0]);else{var o=j.parseCoordinates(s);if(1===o.length&&(o[1]=0),2!==o.length)return;t.push(o)}}return t}},{key:"toSkewList",value:function(e){for(var t=[],a=Array.isArray(i=e),r=0,i=a?i:i[Symbol.iterator]();;){var n;if(a){if(r>=i.length)break;n=i[r++]}else{if((r=i.next()).done)break;n=r.value}var s=n;if(""===s)t.push([0]);else{var o=j.parseCoordinates(s);if(1!==o.length)return;t.push(o)}}return t}}]),s(t,[{key:"expandToValues",value:function(){if(this.additiveSum&&-1!==this.iterationCount&&this.keyTimes.length&&this.duration>0){var e=this.duration*this.iterationCount;e:{for(var t,a=[],r=[],i=[],n=0;n<this.iterationCount;n++){n>0&&this.keySplines&&i.push("");for(var s=0;s<this.keyTimes.length;s++){var o=oe.replaceMap(this.values[s].split(" "),function(e){return parseFloat(e)});if(!o.every(function(e){return!isNaN(e)}))break e;var l=void 0;switch(this.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===o.length?l=[o[0],0]:2===o.length&&(l=o);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===o.length?l=[o[0],o[0]]:2===o.length&&(l=o);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===o.length?l=[o[0],0,0]:3===o.length&&(l=o);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===o.length&&(l=o)}if(!l)break e;var u=(this.keyTimes[s]+n)*this.duration;if(t)for(var f=0;f<l.length;f++)l[f]+=t[f];n<this.iterationCount-1&&s===this.keyTimes.length-1&&(this.accumulateSum&&(t=l),u--),a.push(u/e),r.push(l.join(" ")),this.keySplines&&s<this.keyTimes.length-1&&i.push(this.keySplines[s])}}this.keyTimes=a,this.values=r,this.keySplines=i.length?i:void 0,this.duration=e,this.iterationCount=1,this.accumulateSum=!1}}}},{key:"setType",value:function(e){var a;switch(e){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement&&(a=t.toTranslateList(this.values));break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement&&(a=t.toScaleList(this.values));break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement&&(a=t.toRotateList(this.values));break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement&&(a=t.toSkewList(this.values));break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement&&(a=t.toSkewList(this.values));break;default:return}a&&(this.values=oe.replaceMap(a,function(e){return e.join(" ")})),this.baseValue=_.typeAsValue(this.type)}},{key:"instanceType",get:function(){return 81928}}]),t}(),ue=squared.lib.util;var fe=function(){function e(t){for(var a=this,r=arguments.length,n=[],s=1;s<r;s++)n[s-1]=arguments[s];i(this,e),t=(n.length?ue.filterArray(t,function(e){return n.includes(e.attributeName)}):t.slice(0)).sort(function(e,t){return e.delay===t.delay?e.group.id<t.group.id?1:-1:e.delay<t.delay?-1:1}),n.length=0;for(var o=Array.isArray(u=t),l=0,u=o?u:u[Symbol.iterator]();;){var f;if(o){if(l>=u.length)break;f=u[l++]}else{if((l=u.next()).done)break;f=l.value}var h=e.getKeyName(f);n.includes(h)||n.push(h)}this.map={};var c={},v={};function d(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9?arguments[9]:void 0;a&&(void 0===c[e][t]&&(c[e][t]=[]),c[e][t].push({time:t,value:a,animation:i,start:n,end:s,endTime:r,fillMode:o,infinite:l,valueFrom:u}),v[e].add(t))}for(var p=function(){var e=m[g];a.map[e]=new Map,c[e]={},v[e]=new Set;var r,i=-1!==(r=e).indexOf(":")?r.split(":")[0]:r,n=t.filter(function(e){return e.fillBackwards&&e.attributeName===i}).sort(function(e,t){return e.group.id<t.group.id?1:-1})[0];n&&d(e,0,n.values[0],n.delay,n,0===n.delay,!1,8)},g=0,m=n;g<m.length;g++)p();for(var b=Array.isArray(S=t),k=0,S=b?S:S[Symbol.iterator]();;){var A;if(b){if(k>=S.length)break;A=S[k++]}else{if((k=S.next()).done)break;A=k.value}var x=A,T=e.getKeyName(x);if(void 0===c[T][-1]&&x.baseValue&&d(T,-1,x.baseValue),x.setterType){var R=x.fillReplace&&x.duration>0;d(T,x.delay,x.to,R?x.delay+x.duration:0,x,R,!R,2),R&&d(T,x.delay+x.duration,"",0,x,!1,!0,2)}else if(j.isAnimate(x)&&x.duration>0){var w=-1===x.iterationCount,_=x.getTotalDuration();d(T,x.delay,x.valueTo,_,x,!0,!1,0,w,x.valueFrom),w||x.fillReplace||d(T,_,x.valueTo,0,x,!1,!0,x.fillForwards?4:2)}}for(var V in c){var E=ue.sortNumber(Array.from(v[V])),N=Array.isArray(E),M=0;for(E=N?E:E[Symbol.iterator]();;){var P;if(N){if(M>=E.length)break;P=E[M++]}else{if((M=E.next()).done)break;P=M.value}for(var F=P,G=c[V][F],C=0;C<G.length;C++){var O=G[C];if(""===O.value||O.start&&O.animation&&j.isAnimate(O.animation)&&O.animation.evaluateStart){var B=void 0,L=this.map[V].values(),I=Array.isArray(L),q=0;for(L=I?L:L[Symbol.iterator]();;){var z;if(I){if(q>=L.length)break;z=L[q++]}else{if((q=L.next()).done)break;z=q.value}for(var X=Array.isArray(Y=z),D=0,Y=X?Y:Y[Symbol.iterator]();;){var W;if(X){if(D>=Y.length)break;W=Y[D++]}else{if((D=Y.next()).done)break;W=D.value}if(O.animation!==W.animation&&""!==W.value&&(-1===W.time||4===W.fillMode||2===W.fillMode)){B=W.value;break}}}B?O.value=B:""===O.value&&G.splice(C--,1)}}G.length&&(G.sort(function(e,t){return e.animation&&t.animation?e.fillMode===t.fillMode?e.animation.group.id<t.animation.group.id?1:-1:e.fillMode<t.fillMode?1:-1:0}),this.map[V].set(F,G))}}for(var U in this.map){var H=this.map[U].entries(),K=Array.isArray(H),Z=0;for(H=K?H:H[Symbol.iterator]();;){var $;if(K){if(Z>=H.length)break;$=H[Z++]}else{if((Z=H.next()).done)break;$=Z.value}for(var Q=y($,2),J=Q[0],ee=Array.isArray(ae=Q[1]),te=0,ae=ee?ae:ae[Symbol.iterator]();;){var re;if(ee){if(te>=ae.length)break;re=ae[te++]}else{if((te=ae.next()).done)break;re=te.value}var ie=re;if(ie.animation)if(2===ie.fillMode){var ne=[],se=this.map[U].entries(),oe=Array.isArray(se),le=0;for(se=oe?se:se[Symbol.iterator]();;){var fe;if(oe){if(le>=se.length)break;fe=se[le++]}else{if((le=se.next()).done)break;fe=le.value}var he=y(fe,2),ce=he[1];if((Fe=he[0])<J)for(var ve=Array.isArray(pe=ce),de=0,pe=ve?pe:pe[Symbol.iterator]();;){var ye;if(ve){if(de>=pe.length)break;ye=pe[de++]}else{if((de=pe.next()).done)break;ye=de.value}ye.start&&ye.animation&&ye.animation.animationElement&&ne.push(ye.animation)}else if(Fe>J)for(var ge=0;ge<ce.length;ge++){var me=ce[ge];me.end&&ne.includes(me.animation)&&ce.splice(ge--,1)}else for(var be=0;be<ce.length;be++){var ke=ce[be];ke.end&&ke.animation&&ke.animation.animationElement&&ke.animation.group.id<ie.animation.group.id&&ce.splice(be--,1)}}}else if(4===ie.fillMode||ie.infinite){var Se=!1;if(ie.animation.group.ordering)for(var Ae=ie.animation.getTotalDuration(),xe=Array.isArray(Re=ie.animation.group.ordering),Te=0,Re=xe?Re:Re[Symbol.iterator]();;){var we;if(xe){if(Te>=Re.length)break;we=Re[Te++]}else{if((Te=Re.next()).done)break;we=Te.value}if(we.name===ie.animation.group.name)Se=!0;else if(e.getGroupEndTime(we)>=Ae)break}var _e=[],Ve=this.map[U].entries(),Ee=Array.isArray(Ve),Ne=0;for(Ve=Ee?Ve:Ve[Symbol.iterator]();;){var Me;if(Ee){if(Ne>=Ve.length)break;Me=Ve[Ne++]}else{if((Ne=Ve.next()).done)break;Me=Ne.value}var Pe=y(Me,2),Fe=Pe[0];ce=Pe[1];if(!Se&&Fe<J)for(var Ge=Array.isArray(Oe=ce),Ce=0,Oe=Ge?Oe:Oe[Symbol.iterator]();;){var Be;if(Ge){if(Ce>=Oe.length)break;Be=Oe[Ce++]}else{if((Ce=Oe.next()).done)break;Be=Ce.value}Be.start&&Be.animation&&_e.push(Be.animation)}else if(Fe>J)for(var Le=0;Le<ce.length;Le++){var Ie=ce[Le];(Se||Ie.animation&&(Ie.end&&_e.includes(Ie.animation)||null===ie.animation.animationElement&&Ie.animation.group.id<ie.animation.group.id))&&ce.splice(Le--,1)}else for(var qe=0;qe<ce.length;qe++){var ze=ce[qe];ze.end&&ze.animation&&ze.animation.group.id<ie.animation.group.id&&ce.splice(qe--,1)}}}}}}for(var je in this.map)for(var Xe=0,De=Array.from(this.map[je].entries());Xe<De.length;Xe++){var Ye=y(De[Xe],2);0===Ye[1].length&&this.map[je].delete(Ye[0])}}return s(e,null,[{key:"getGroupEndTime",value:function(e){return"infinite"===e.iterationCount?1/0:e.delay+e.duration*parseInt(e.iterationCount)}},{key:"getKeyName",value:function(e){return e.attributeName+(j.asAnimateTransform(e)?":".concat(_.typeAsName(e.type)):"")}}]),s(e,[{key:"has",value:function(e,t,a){return void 0!==t?!(!this.map[e]||!this.map[e].has(t))&&(void 0===a||-1!==this.map[e].get(t).findIndex(function(e){return e.animation===a})):void 0!==this.map[e]}},{key:"get",value:function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.map[e]){var i=this.map[e].entries(),n=Array.isArray(i),s=0;for(i=n?i:i[Symbol.iterator]();;){var o;if(n){if(s>=i.length)break;o=i[s++]}else{if((s=i.next()).done)break;o=s.value}var l=y(o,2),u=l[0],f=l[1];if(!(u<=t))break;for(var h=Array.isArray(v=f),c=0,v=h?v:v[Symbol.iterator]();;){var d;if(h){if(c>=v.length)break;d=v[c++]}else{if((c=v.next()).done)break;d=c.value}if(""!==d.value&&(-1===d.time||d.end&&(4===d.fillMode||2===d.fillMode))||r&&d.start&&t!==u){a=d.value;break}}}}return a}},{key:"paused",value:function(e,t){var a=0;if(this.map[e]){var r=this.map[e].entries(),i=Array.isArray(r),n=0;for(r=i?r:r[Symbol.iterator]();;){var s;if(i){if(n>=r.length)break;s=r[n++]}else{if((n=r.next()).done)break;s=n.value}var o=y(s,2),l=o[1];if(!(o[0]<=t))break;for(var u=Array.isArray(h=l),f=0,h=u?h:h[Symbol.iterator]();;){var c;if(u){if(f>=h.length)break;c=h[f++]}else{if((f=h.next()).done)break;c=f.value}var v=c;if(v.start&&(v.infinite||0===v.fillMode&&v.endTime>t)){if(!v.animation){a=1;break}a=2}else if(v.end&&(4===v.fillMode||1===a&&2===v.fillMode)){a=0;break}}}}return 0===a}},{key:"evaluateStart",value:function(e,t){if(e.evaluateStart){var a=this.get(e.attributeName,e.delay)||t&&""+t||e.baseValue;a&&(e.reverse?e.values[e.values.length-1]=a:e.values[0]=a),e.evaluateStart=!1}return e.values}}]),e}(),he=squared.lib.math,ce=squared.lib.regex,ve=squared.lib.util,de=["x1","y1","x2","y2"],pe=["width","height","x","y"],ye=["points"],ge=["cx","cy","r"],me=["cx","cy","rx","ry"];function be(e,t,a,r,i){var n,s,o,l=0,u=e.entries(),f=Array.isArray(u),h=0;for(u=f?u:u[Symbol.iterator]();;){var c;if(f){if(h>=u.length)break;c=u[h++]}else{if((h=u.next()).done)break;c=h.value}var v=y(c,2),d=v[0],p=v[1];if(a===d){s={index:d,value:p};break}if(a>l&&a<d&&void 0!==n){s={index:l,value:n},o={index:d,value:p};break}l=d,n=p}if(s&&o)Pe(e,a,Ee(a,s.index,s.value,o.index,o.value),!0);else if(s)Pe(e,a,s.value,!0);else if(!i){var g=r.get(t,a,!0);g&&""!==(g=Se(g,!0))&&Pe(e,a,g)}}function ke(e){for(var t=e[e.length-1][0],a=new Set,r=0;r<e.length;r++){var i=e[r][0]/t;if(i>0)for(var n=7;;n++){var s=parseFloat((""+i).substring(0,n));if(!a.has(s)){i=s;break}}e[r][0]=i,a.add(i)}return e}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e&&(ve.isNumber(e)?e=parseFloat(e):0===(e=j.parsePoints(e)).length&&(e="")),t&&"string"==typeof e?"":e}function Ae(e,t){var a;if(e)for(var r=Array.isArray(n=e),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var o=s;if(!(o.time<=t))break;a=o.value}return a}function xe(e,t,a,r,i){var n,s=[],o=t.element.tagName;switch(o){case"line":n=de;break;case"rect":n=pe;break;case"polyline":case"polygon":n=ye;break;case"circle":n=ge;break;case"ellipse":n=me;break;default:return}for(var l=_.origin(t.element),u=0;u<e.length;u++){for(var f=e[u][0],h=e[u][1],c=[],v=Array.isArray(p=n),d=0,p=v?p:p[Symbol.iterator]();;){var y;if(v){if(d>=p.length)break;y=p[d++]}else{if((d=p.next()).done)break;y=d.value}var g=y,m=h.get(g);if(void 0===m&&(void 0===m&&(m=Ae(r[g],f)),void 0===m&&(m=t.getBaseValue(g))),void 0===m)return;c.push(m)}var b=void 0;switch(o){case"line":b=Te(c);break;case"rect":b=Re(c);break;case"polygon":case"polyline":b=c[0];break;case"circle":case"ellipse":b=Be(c)}if(b){var k=void 0;switch(t.transformed&&(b=j.applyTransforms(t.transformed,b,l)),a&&a.refitPoints(b),o){case"line":case"polyline":k=j.drawPolyline(b,i);break;case"rect":case"polygon":k=j.drawPolygon(b,i);break;case"circle":case"ellipse":var S=b[0];k=j.drawEllipse(S.x,S.y,S.rx,S.ry,i)}void 0!==k&&s.push({index:f,value:k})}}return s}function Te(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}function Re(e){var t=e[0],a=e[1],r=e[2],i=e[3];return[{x:r,y:i},{x:r+t,y:i},{x:r+t,y:i+a},{x:r,y:i+a}]}function we(e,t,a){for(var r=new Map,i=Array.isArray(s=t),n=0,s=i?s:s[Symbol.iterator]();;){var o;if(i){if(n>=s.length)break;o=s[n++]}else{if((n=s.next()).done)break;o=n.value}var l=o,u=new Map;for(var f in e){var h=void 0;void 0!==(h=e[f].has(l)?e[f].get(l):Ae(a[f],l))&&u.set(f,h)}r.set(l,u)}return r}function _e(e,t,a,r){t&&(e.set(a,t),void 0!==r&&e.set(r,t))}function Ve(e,t,a,r,i){switch(e.alternate&&a%2!=0&&(t=t.slice(0).reverse()),e.attributeName){case"transform":if(e.additiveSum&&"string"==typeof i){var n=ve.replaceMap(i.split(ce.CHAR.SPACE),function(e){return parseFloat(e)}),s=ve.objectMap(t,function(e){return ve.replaceMap(e.trim().split(ce.CHAR.SPACE),function(e){return parseFloat(e)})});if(s.every(function(e){return n.length===e.length})){var o=s[r];e.accumulateSum||(a=0);for(var l=0;l<n.length;l++)o[l]+=n[l];for(var u=0;u<a;u++)for(var f=0;f<s.length;f++)for(var h=0;h<s[f].length;h++)o[h]+=s[f][h];return o.join(" ")}}return t[r];case"points":return j.parsePoints(t[r]);default:var c=parseFloat(t[r]);if(isNaN(c))return i||0;if(e.additiveSum&&"number"==typeof i){c+=i,e.accumulateSum||(a=0);for(var v=0;v<a;v++)for(var d=0;d<t.length;d++)c+=parseFloat(t[d])}return c}}function Ee(e,t,a,r,i){if(e>t){if("number"==typeof a&&"number"==typeof i)return ne.getSplitValue(a,i,(e-t)/(r-t));if("string"==typeof a&&"string"==typeof i){var n=ve.replaceMap(a.split(" "),function(e){return parseFloat(e)}),s=ve.replaceMap(i.split(" "),function(e){return parseFloat(e)});if(n.length===s.length){for(var o=[],l=0;l<n.length;l++)o.push(Ee(e,t,n[l],r,s[l]));return o.join(" ")}}else if(Array.isArray(a)&&Array.isArray(i)){for(var u=[],f=0;f<Math.min(a.length,i.length);f++)u.push({x:Ee(e,t,a[f].x,r,i[f].x),y:Ee(e,t,a[f].y,r,i[f].y)});return u}}return a}function Ne(e,t,a,r,i,n,s,o,l,u,f,h,c){s<0&&(t-=s,s=0);for(var v,d=Math.max(0,Math.min((t-(s+e.duration*o))/e.duration,1)),p=-1,y=-1,g=0;g<r.length;g++){if(-1!==p&&d<=r[g]){y=g;break}d>=r[g]&&(p=g)}return Fe(e,l=Pe(f,l,v=-1!==p&&-1!==y?Ee(d,r[p],Ve(e,i,o,p,a),r[y],Ve(e,i,o,y,a)):Ve(e,i,o,y=-1!==p?p+1:r.length-1,a)),n,y,u,h,c),[l,v]}function Me(e,a,r,i,n,s,o){for(var l=a.keyTimes.slice(0),u=a.keySplines?a.keySplines.slice(0):[].fill(""),f=r+a.duration,h=a.getIntervalEndTime(r),c=function(r){var c=o[r];if(c!==a){var d=c.getTotalDuration();if(d>h){var p=function(){var p=Math.min(f,d),y=Ge(e,a,s);e:for(var g=function(e,r){for(var i=function(t){var i=Oe(c.delay,c.duration,c.keyTimes,e,t);if(i>=h){var o=function(o){var f;if(i===o)f=Le(Ve(c,y,e,t,s));else for(var v=(i-o)/c.duration,d=1;d<c.keyTimes.length;d++)if(v>=c.keyTimes[d-1]&&v<=c.keyTimes[d]){f=Le(Ee(v,c.keyTimes[d-1],Ve(c,y,e,d-1,s),c.keyTimes[d],Ve(c,y,e,d,s)));break}var g=o===p?1:o%a.duration/a.duration;0===g&&t>0&&(g=1),void 0===f||g===l[l.length-1]&&f===n[n.length-1]||(o===h?g+=.001:h=o,l.push(g),n.push(f),u&&u.push(r&&c.keySplines&&c.keySplines[t]?c.keySplines[t]:""))};if(!r&&i>=h&&(o(h),r=!0,i===h))return"continue";if(r){if(o(Math.min(i,p)),i>=p||1===l[l.length-1])return b=r,{v:"break|substituteEnd"};h=i}}},o=0;o<c.keyTimes.length;o++){var f=i(o);switch(f){case"continue":continue;default:if("object"===t(f))return f.v}}b=r},m=Xe(h,c.delay,c.duration),b=!1;;m++){if("break|substituteEnd"===g(m,b))break e}if(d===p&&d<=i&&(c.addState(16),o.splice(r--,1)),p===f)return v=r,{v:"break"}}();if("object"===t(p))return p.v}else i!==1/0&&d<i&&o.splice(r--,1)}v=r},v=0;v<o.length;v++){if("break"===c(v))break}return[l,n,u]}function Pe(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""!==a){var i=e.get(t),n=!1;if(void 0===i&&(i=e.get(t-1),n=!0),i!==a||r){if(!r){if("number"==typeof i&&he.isEqual(a,i))return t;for(;t>0&&e.has(t);)t++}e.set(t,a)}else n&&!e.has(t)&&(e.delete(t-1),e.set(t,a))}return t}function Fe(e,t,a,r,i,n,s){if(!Ie(j.asAnimateTransform(e),i)){if(0===r)return;r--}var o=a&&a[r];o&&n.set(t,o),s&&function(e,t,a,r){j.asAnimateTransform(t)&&t.transformOrigin&&t.transformOrigin[r]&&e.set(a,t.transformOrigin[r])}(s,e,t,r)}function Ge(e,t,a){if(t.evaluateStart){var r=t.reverse?t.length-1:0;e.get(fe.getKeyName(t),t.delay)||t.values[r]||!t.additiveSum&&t.baseValue||(t.values[r]=Le(a)),t.by&&ve.isNumber(t.values[r])&&(t.values[r]=""+(parseFloat(t.values[r])+t.by)),t.evaluateStart=!1}return t.values}function Ce(e,t,a,r){e[e.length-1]<1&&(e.push(1),t.push(void 0!==r?Le(r):t[0]),a&&a.push(""))}var Oe=function(e,t,a,r,i){return Math.round(e+(a[i]+r)*t)},Be=function(e){return[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}]},Le=function(e){return Array.isArray(e)?ve.objectMap(e,function(e){return"".concat(e.x,",").concat(e.y)}).join(" "):""+e},Ie=function(e,t){return ve.hasBit(t,e?32:4)},qe=function(e,t){return ve.hasBit(t,e?16:2)},ze=function(e){return e.playable||e.animationElement&&-1!==e.duration},je=function(e){return[e.keyTimes.slice(0),e.values.slice(0),e.keySplines?e.keySplines.slice(0):void 0]},Xe=function(e,t,a){return Math.floor(Math.max(0,e-t)/a)},De=function(e){return function(a){function r(){return i(this,r),h(this,u(r).apply(this,arguments))}return l(r,e),s(r,[{key:"getAnimateShape",value:function(e,t){void 0===t&&(t=this.animations);for(var a=[],r=Array.isArray(n=t),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var o=s;if(ze(o))switch(o.attributeName){case"r":case"cx":case"cy":if(V.circle(e)){a.push(o);break}case"rx":case"ry":V.ellipse(e)&&a.push(o);break;case"x1":case"x2":case"y1":case"y2":V.line(e)&&a.push(o);break;case"points":(V.polyline(e)||V.polygon(e))&&a.push(o);break;case"x":case"y":case"width":case"height":V.rect(e)&&a.push(o)}}return a}},{key:"getAnimateViewRect",value:function(e){void 0===e&&(e=this.animations);for(var t=[],a=Array.isArray(i=e),r=0,i=a?i:i[Symbol.iterator]();;){var n;if(a){if(r>=i.length)break;n=i[r++]}else{if((r=i.next()).done)break;n=r.value}var s=n;if(ze(s))switch(s.attributeName){case"x":case"y":t.push(s)}}return t}},{key:"getAnimateTransform",value:function(e){return void 0===e&&(e=this.animations),ve.filterArray(e,function(e){return j.asAnimateTransform(e)&&e.duration>0})}},{key:"animateSequentially",value:function(e,a,r,i){var n,s=this,o=18;i&&(i.keyTimeMode&&(o=i.keyTimeMode),n=i.precision),[e,a].forEach(function(e){var i=e===a;if(!(!e||0===e.length||!i&&ve.hasBit(o,8)||i&&ve.hasBit(o,64))){for(var l=[],u={},f=new Set,h=0,c=[],v=0;v<e.length;v++){var d=e[v];if(d.setterType)T(d);else for(var p=d.getTotalDuration(),g=0;g<e.length;g++){var m=e[g];if(v!==g&&d.attributeName===m.attributeName&&d.group.id<m.group.id&&d.fillReplace&&!m.partialType)if(m.setterType){if(d.delay===m.delay){c[v]=d;break}}else{var b=m.getTotalDuration();if(d.delay===m.delay&&(!m.fillReplace||p<=b||-1===m.iterationCount)||m.fillBackwards&&d.delay<=m.delay&&(m.fillForwards||d.fillReplace&&p<=m.delay)||d.animationElement&&null===m.animationElement&&(d.delay>=m.delay&&p<=b||m.fillForwards)){c[v]=d;break}}}}for(var k=[],S=0;S<e.length;S++){var A=e[S];c[S]?A.fillReplace?k.push(A):(A.setterType=!0,T(A)):A.setterType||(l.push(A),f.add(A.group.name))}if(s._removeAnimations(k),l.length+h>1||1===l.length&&(l[0].alternate||void 0!==l[0].end)){var x=function(){for(var a=function(e){return K[e]?K[e][K[e].length-1]:void 0},h=0,c=l;h<c.length;h++){var v=c[h];v.group.ordering&&ve.spliceArray(v.group.ordering,function(e){return!f.has(e.name)})}for(var d={},p={},g=0,m=0,b=l;m<b.length;m++){var k=b[m],S=k.attributeName;void 0===d[S]&&(d[S]=new Map,p[S]=[]);var A=d[S].get(k.delay)||[];A.push(k),p[S].push(k),d[S].set(k.delay,A)}for(var x in d){var T=new Map,R=ve.sortNumber(Array.from(d[x].keys())),w=Array.isArray(R),V=0;for(R=w?R:R[Symbol.iterator]();;){var E;if(w){if(V>=R.length)break;E=R[V++]}else{if((V=R.next()).done)break;E=V.value}for(var N=E,M=d[x].get(N),P=Array.isArray(G=M),F=0,G=P?G:G[Symbol.iterator]();;){var C;if(P){if(F>=G.length)break;C=G[F++]}else{if((F=G.next()).done)break;C=F.value}g=Math.max(g,C.getTotalDuration(!0))}M.reverse(),T.set(N,M)}d[x]=T,p[x].reverse()}var O,B,L=new fe(e),I={},q=new Map,z=i?new Map:void 0,X={},D=new Set,Y={},W=new Map,U=i?new Map:void 0,H={},K={},Z=new Map,$=-1,Q=function(e){if(I[e]=new Map,!i){var n;try{n=(r||s).getBaseValue(e)}catch(e){}ve.hasValue(n)&&(H[e]=n)}var l=u[e]||[],f=[],h=[],c=d[e].entries(),v=Array.isArray(c),m=0;for(c=v?c:c[Symbol.iterator]();;){var b;if(v){if(m>=c.length)break;b=c[m++]}else{if((m=c.next()).done)break;b=m.value}var k=y(b,2),S=k[1];f.push(k[0]),h.push(S)}var A=[],x=-1,T=0,R=1/0,w=void 0,V=void 0,E=void 0;function N(t,a){if(D.add(t),t.addState(16),E=t,t.fillForwards){if(W(T,w,t.type,t),t.group.ordering)for(var r=t.getTotalDuration(),n=Array.isArray(o=t.group.ordering),s=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}if(l.name===t.group.name)return!0;if(fe.getGroupEndTime(l)>=r)return!1}}else{if(t.fillFreeze&&W(T,w,t.type,t),void 0!==a){var u=x,f=F(T,T+1);void 0!==f&&t.fillReplace&&a>T&&0===A.length&&(u=Pe(I[e],u,f),i&&_e(Z,t.type,u),w=f,x=u)}G()}return!1}function M(t,a,r){return void 0===a&&(a=t.delay),void 0===r&&(r=t.to),Pe(I[e],a,i?r:Se(r))}function P(e){e&&l.push(e),l.sort(function(e,t){return e.delay===t.delay?e.group.id<t.group.id?-1:1:e.delay<t.delay?-1:1});for(var t=0;t<l.length-1;t++)l[t].delay===l[t+1].delay&&l.splice(t--,1)}function F(t,r){var n=a(e),s=n&&n.value;return ve.spliceArray(l,function(e){return e.delay>=t&&e.delay<r},function(e){e.animationElement&&B(),0===A.length&&(w=e.to),W(e.delay,e.to,e.type,e),e.delay===t?s=i?e.to:Se(e.to):(x=M(e),T=e.delay)}),s}function G(e,t){A.length&&ve.spliceArray(A,function(e){return e.getTotalDuration()<=T},function(a){if(a.addState(16),a.fillForwards&&(W(a.getTotalDuration(),a.valueTo,a.type,a),void 0!==e&&void 0!==t))for(var r=e;r<f.length;r++){r!==e&&(t=-1);for(var i=t+1;i<h[r].length;i++){var n=h[r][i];a.group.id>n.group.id&&n.addState(16)}}})}function C(e){e.hasState(16,64)||(e.addState(4),A.push(e))}function O(){A.sort(function(e,t){return e.animationElement&&t.animationElement&&e.delay!==t.delay?e.delay<t.delay?1:-1:e.group.id<t.group.id?1:-1})}function B(e){ve.spliceArray(A,e?function(t){return t===e}:function(e){return null!==e.animationElement})}function W(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;i||(r=Se(r));var o=a(e);if(""!==r&&(void 0===o||t>=o.time)&&(void 0===K[e]&&(K[e]=[]),K[e].push({time:t,value:r,index:n})),s&&j.isAnimate(s)&&!s.fillReplace)if(s.fillForwards){ve.spliceArray(l,function(e){return e.group.id<s.group.id||e.delay<t}),A.length=0;for(var u=0,f=h;u<f.length;u++)for(var c=Array.isArray(d=f[u]),v=0,d=c?d:d[Symbol.iterator]();;){var p;if(c){if(v>=d.length)break;p=d[v++]}else{if((v=d.next()).done)break;p=v.value}p.group.id<s.group.id&&p.addState(16)}}else s.fillFreeze&&B()}function U(t,a,r){V&&!t&&(void 0===r&&(r=_.typeAsValue(V.type)),a!==(x=Pe(I[e],a,r))&&_e(Z,V.type,x)),V=void 0}var $,Q=p[e].find(function(e){return e.fillBackwards});if(Q){w=Ve(Q,Q.values,0,0),x=Pe(I[e],0,w),i&&(_e(Z,Q.type,0),V=Q);for(var J=!0,ee=Array.isArray(ae=p[e]),te=0,ae=ee?ae:ae[Symbol.iterator]();;){var re;if(ee){if(te>=ae.length)break;re=ae[te++]}else{if((te=ae.next()).done)break;re=te.value}if(re.group.id>Q.group.id&&re.delay<=Q.delay){J=!1;break}}for(var ie=Q.getTotalDuration(),ne=[],se=0;se<f.length;se++)for(var oe=0;oe<h[se].length;oe++){var le=h[se][oe];if(J){if(le===Q&&(0!==se||0!==oe)){h[se].splice(oe--,1),f.unshift(Q.delay),h.unshift([Q]);continue}if(le.group.id<Q.group.id&&(Q.fillForwards||le.getTotalDuration()<=ie)){le.fillForwards&&(le.setterType=!0,l.push(le)),ne.push(le);continue}}le.animationElement&&le.delay<=Q.delay&&(h[se].splice(oe--,1),C(le))}!function(e){for(var t=0;t<f.length;t++){if(e.length)for(var a=0;a<h[t].length;a++)e.includes(h[t][a])&&h[t].splice(a--,1);0===h[t].length&&(h.splice(t,1),f.splice(t--,1))}}(ne),Q.addState(2)}if(!i&&(void 0===K[e]&&void 0!==H[e]&&W(0,H[e],0),void 0===w)){var ue=a(e);w=ue&&ue.value||H[e]}P(),ve.spliceArray(l,function(e){return e.delay<=f[0]},function(t){var a=j.isAnimate(t)&&t.fillForwards;if(t.delay<f[0]&&(void 0===Q||a))if(Q&&a)W(t.delay,t.to,t.type);else{var r,n=t.delay-1;if(void 0===$)if(I[e].has(0))i||M(t,n,w);else void 0!==(r=i&&j.asAnimateTransform(t)?_.typeAsValue(t.type):H[e])&&(M(t,0,r),M(t,n,r));else M($,n);x=M(t),T=t.delay,$=t}}),$&&M($,f[0]-1);e:{for(var he=function(r){for(var n=f[r],s=function(t){var s=h[r][t];if(s.hasState(16,64))return u=t,"continue";var c=-1===s.iterationCount,v=s.duration,d=s.iterationCount,p=void 0;if(c)p=n+v;else if((p=s.getTotalDuration())<=x)return s.fillReplace?s.addState(64):C(s),u=t,"continue";var m=void 0,b=void 0;if(c?(m=Math.ceil((g-n)/v),b=0):(m=Math.ceil(d),b=d-Math.floor(d)),l.length&&T>0&&T<n&&F(T,n),-1!==x&&x<n&&(x=Pe(I[e],n-1,w),T=n),R=1/0,s.group.ordering&&s.group.ordering.length>1){for(var k=!0,S=Array.isArray(j=s.group.ordering),E=0,j=S?j:j[Symbol.iterator]();;){var X;if(S){if(E>=j.length)break;X=j[E++]}else{if((E=j.next()).done)break;X=E.value}var D=X;if(D.name===s.group.name){k=!1;break}if(!D.paused&&T<=D.delay&&D.attributes.includes(e))break}if(k)t:for(var K=r+1;K<f.length;K++)for(var $=0;$<h[K].length;$++){var Q=h[K][$];if(Q.group.ordering){R=Q.delay;break t}Q.getTotalDuration()<=p?(Q.fillFreeze&&P(Q),Q.addState(16)):Q.delay<p&&C(Q)}}else for(var J=r+1;J<f.length;J++)if(f[J]!==1/0&&h[J].length&&!h[J].every(function(e){return e.hasState(16,64)})){R=f[J];break}var ee=T,te=x+1,ae=Math.min(R,s.end||1/0),re=void 0;if(l.length&&s.animationElement){var ie=Math.min(R,p,ae);if(re=l.find(function(e){return e.delay>=T&&e.delay<=ie})){switch(re.delay){case T:W(T,w=re.to,re.type,re),re.group.id>s.group.id&&(i&&V&&U(s.additiveSum,Math.max(n-1,x)),x=M(re,Math.max(re.delay,x),w),ae=-1);break;case R:re.addState(32);break;default:ae=re.delay,re.addState(32)}ve.spliceArray(l,function(e){return e!==re}),s.addState(4)}}var ne=!1,se=void 0;if(ae>x){i&&(V&&(U(s.additiveSum,Math.max(n-1,x)),te=x+1),w=_.typeAsValue(s.type),W(T,w,s.type));var oe=f[r]===1/0||(-1!==x||s.hasState(2))&&!(0===r&&0===t);ne=!0;t:for(var le=a(e),ue=function(a){var i=void 0,l=Ge(L,s,w),u=void 0;if(s.partialType){if(s.getIntervalEndTime(T)<ae&&(A.length||t<h[r].length-1)){for(var f=t+1;f<h[r].length;f++)C(h[r][f]);h[r].length=0,O();var c=y(Me(L,s,T,ae,l,w,A),3);i=c[0],l=c[1],u=c[2]}else{var d=y(je(s),3);i=d[0],l=d[1],u=d[2]}Ce(i,l,u,H[e])}else i=s.keyTimes,u=s.keySplines;for(var g=0;g<i.length;g++){var k=i[g],S=-1,_=Ve(s,l,a,g,w);if(a===m-1&&b>0)if(b===k)b=-1;else if(g===i.length-1)T=S=p,_=Ee(b,i[g-1],Ve(s,l,a,g-1,w),k,_),b=-1;else if(b>k)for(var V=g+1;V<i.length;V++)if(b<=i[V]){T=S=p,_=Ee(b,k,_,i[V],Ve(s,l,a,V,w)),b=-1;break}if(-1===S){if((S=Oe(n,v,i,a,g))<0||S<x)continue;if(S===ae)ne=a===m-1&&g===i.length-1,T=S;else{var E=function(t){var r=y(Ne(s,T,w,i,l,u,n,a,t,o,I[e],q,z),2);x=r[0],se=r[1]};if(n<0&&-1===x)S>0&&(T=0,E(0));else{if(S>ae)return oe&&x+1<ae&&E(x),T=ae,E(ae+(ae!==R||I[e].has(ae-1)?0:-1)),ne=!1,"break|threadTimeExceeded";if(oe)s.hasState(2)&&(T=ee),n>=x?(S=Math.max(n,x+1),T=n):S===x?(T=S,S=x+1):(E(x),T=Math.max(S,x)),oe=!1;else{if(T=S,a>0&&0===g&&s.accumulateSum){Fe(s,S,u,g,o,q,z),x=S;continue}S=Math.max(S,x+1)}}}}if(S>x&&(g===i.length-1&&!s.accumulateSum&&(a<m-1||s.fillReplace&&(void 0===le||_!==le.value))&&S--,x=Pe(I[e],S,_),Fe(s,x,u,g,o,q,z),se=_),!ne||-1===b)return"break|threadTimeExceeded"}},fe=Xe(T,n,v);fe<m;fe++){if("break|threadTimeExceeded"===ue(fe))break t}G(r,t)}if(void 0!==se&&(w=se,i&&(_e(Z,s.type,te,x),V=s)),re&&(re.hasState(32)?(x=M(re,re.delay,se=re.to),W(T=re.delay,se,re.type,re)):s.hasState(64)&&_e(Z,x,re.type),B(),ne=!0),ve.spliceArray(l,function(e){return e.delay>=ee&&e.delay<=T},function(e){W(e.delay,e.to,e.type,e),e.animationElement&&B()}),c){if(!ne)return A.length=0,A.push(s),u=t,"continue";if(void 0===re)return Y[e]=s,u=t,{v:"break|attributeEnd"}}if(ne){if(!c&&N(s,R))return u=t,{v:"break|attributeEnd"};for(var he=r;he<f.length;he++)if(f[he]<T){for(var ce=0;ce<h[he].length;ce++){var de=h[he][ce],pe=de.getTotalDuration();pe>T&&!de.hasState(4,16,64)?C(de):de.fillReplace||W(pe,de.valueTo,de.type,de)}f[he]=1/0,h[he].length=0}if(A.length&&T<R){O();var ye=A.find(function(e){return e.delay<=T});ye&&(ye.removeState(4,2),ye.addState(8),B(ye),n=ye.delay,h[r]=[ye],t=-1)}}else C(s);u=t},u=0;u<h[r].length;u++){var c=s(u);switch(c){case"continue":continue;default:if("object"===t(c))return c.v}}},ce=0;ce<f.length;ce++){if("break|attributeEnd"===he(ce))break e}if(A.length){O();for(var de=function(t){var a=A[t],r=a.delay,n=a.duration,s=x-r,l=1/0;function u(){var u,f,h=Ge(L,a,w);if(a.partialType){if(a.getIntervalEndTime(T)<l&&t<A.length-1){var c=y(Me(L,a,T,l,h,w,A),3);u=c[0],h=c[1],f=c[2]}else{var v=y(je(a),3);u=v[0],h=v[1],f=v[2]}Ce(u,h,f,H[e])}else u=a.keyTimes,f=a.keySplines;var d=x+1,p=Math.floor(s/n),g=!1;function m(t){return Ne(a,T,w,u,h,f,r,p,t,o,I[e],q,z)}do{for(var b=0;b<u.length;b++){var k=Oe(r,n,u,p,b);if(!g&&k>=x){var S=y(m(x),2);x=S[0],w=S[1],g=!0}if(g)if(k>=l){if(l>x){var R=y(m(l),2);x=R[0],w=R[1],T=l}}else k>x&&(T=k,b===u.length-1&&k<l&&k--,w=Ve(a,h,p,b,w),x=Pe(I[e],k,w),Fe(a,x,f,b,o,q,z))}}while(x<l&&++p);i&&_e(Z,a.type,d,x)}return-1===a.iterationCount?(s>0&&s%a.duration!=0&&(l=r+a.duration*Math.ceil(s/n),u()),Y[e]=a,"break|attributeEnd"):(l=Math.min(r+a.duration*a.iterationCount,a.end||1/0))>x&&(u(),N(a))?"break|attributeEnd":void 0},pe=0;pe<A.length;pe++){if("break|attributeEnd"===de(pe))break e}}if(E&&E.fillReplace&&void 0===Y[e]){var ye,ge=0;if(K[e]){var me=a(e);me&&(ge=me.index,ye=me.value)}else i?(ge=Array.from(Z.values()).pop(),ye=_.typeAsValue(ge)):ye=H[e];void 0===ye||ve.isEqual(I[e].get(x),ye)||(x=Pe(I[e],x,ye),i&&_e(Z,ge,x))}}X[e]=x};for(var J in d)Q(J);var ee=new Set,te=0;for(var ae in I){var re=0,ie=I[ae].keys(),se=Array.isArray(ie),oe=0;for(ie=se?ie:ie[Symbol.iterator]();;){var ue;if(se){if(oe>=ie.length)break;ue=ie[oe++]}else{if((oe=ie.next()).done)break;ue=oe.value}var ce=ue;ee.add(ce),re=ce}te=Math.max(te,re),K[ae]&&K[ae].sort(function(e,t){return e.time===t.time?0:e.time<t.time?-1:1})}if(Object.keys(Y).length){var de=[],pe=[];for(var ye in Y)de.push(Y[ye].delay),pe.push(Y[ye].duration);0===D.size&&1===new Set(de).size&&1===new Set(pe).size&&de[0]===ee.values().next().value?$=de[0]<=0?0:de[0]:pe.length>1&&pe.every(function(e){return e%250==0})?te=he.nextMultiple(pe,te,de):(te-de[0])%pe[0]!=0&&(te=pe[0]*Math.ceil(te/pe[0]))}if(-1===$)for(var ge in I)if(Y[ge]){var me=X[ge];if(me<te){var Ae=Y[ge],Te=Ae.delay,Re=me+1,Be=Array.from(I[ge].values()).pop(),Le=Math.floor((me-Te)/Ae.duration),ze=Ge(L,Ae,Be);do{for(var De=!1,Ye=0;Ye<Ae.keyTimes.length;Ye++){var We=Oe(Te,Ae.duration,Ae.keyTimes,Le,Ye);if(!De&&We>=me){var Ue=y(Ne(Ae,me,Be,Ae.keyTimes,ze,Ae.keySplines,Te,Le,me,o,I[ge],q,z),2);Be=Ue[1],ee.add(me=Ue[0]),De=!0}De&&We>me&&(Ye===Ae.keyTimes.length-1&&We<te&&We--,Be=Ve(Ae,ze,Le,Ye,Be),me=Pe(I[ge],We,Be),Fe(Ae,We,Ae.keySplines,Ye,o,q,z),ee.add(me))}}while(me<te&&++Le);X[ge]=me,i&&_e(Z,Ae.type,Re,me)}}var He=ve.sortNumber(Array.from(ee));if(r||i){var Ke=!1;for(var Ze in I)if(!I[Ze].has(0)&&void 0!==H[Ze]){var $e=I[Ze].keys().next().value-1;I[Ze].set(0,H[Ze]),I[Ze].set($e,H[Ze]),He.includes(0)||(He.push(0),Ke=!0),He.includes($e)||(He.push($e),Ke=!0)}Ke&&ve.sortNumber(He)}if(!i)for(var Qe in I)for(var Je=Array.isArray(tt=He),et=0,tt=Je?tt:tt[Symbol.iterator]();;){var at;if(Je){if(et>=tt.length)break;at=tt[et++]}else{if((et=tt.next()).done)break;at=et.value}var rt=at;if(!(rt<=X[Qe]))break;if(!I[Qe].has(rt)){if(L.paused(Qe,rt)){var it=L.get(Qe,rt);if(it&&""!==(it=Se(it,!0))){I[Qe].set(rt,it);continue}}be(I[Qe],Qe,rt,L,i)}}if(O=we(I,He,K),-1===$&&Object.keys(Y).length){var nt={},st=[],ot=[],lt=[];for(var ut in Y)lt.push(Y[ut].duration),st.push(Y[ut]);for(var ft=he.nextMultiple(lt),ht=0,ct=st;ht<ct.length;ht++){var vt=ct[ht],dt=vt.attributeName;nt[dt]=new Map;var pt=I[dt].has(X[dt])?I[dt].get(X[dt]):H[dt],yt=Ge(L,vt,pt),gt=0,mt=0;do{for(var bt=0;bt<vt.keyTimes.length;bt++){var kt=Oe(0,vt.duration,vt.keyTimes,mt,bt);bt===vt.keyTimes.length-1&&kt<ft&&kt--,pt=Ve(vt,yt,mt,bt,pt),Fe(vt,gt=Pe(nt[dt],kt,pt),vt.keySplines,bt,o,W,U),ot.includes(gt)||ot.push(gt)}}while(gt<ft&&++mt)}if(st.every(function(e){return e.alternate})){var St=-1;for(var At in Y)for(var xt=Array.from(nt[At].keys()),Tt=Array.from(nt[At].values()).reverse(),Rt=0;Rt<xt.length;Rt++)if(0!==xt[Rt]){St=ft+xt[Rt];var wt=W.get(xt[Rt]);wt&&W.set(St,wt),St=Pe(nt[At],St,Tt[Rt]),ot.includes(St)||ot.push(St)}}for(var _t in ve.sortNumber(ot),nt)for(var Vt=0,Et=ot;Vt<Et.length;Vt++){var Nt=Et[Vt];nt[_t].has(Nt)||be(nt[_t],_t,Nt,L,i)}B=we(nt,ot,K)}if(O||B){s._removeAnimations(l);for(var Mt=Array.from(Z.entries()),Pt=ve.joinMap(l,function(e){return j.asAnimateTransform(e)?_.typeAsName(e.type):e.attributeName},"-"),Ft=0,Gt=[O,B];Ft<Gt.length;Ft++){var Ct=Gt[Ft];if(Ct){var Ot=Ct===O,Bt=Ot?q:W,Lt=Ot?z:U;if(Ie(i,o)){var It=[];if(i){var qt=[];if(Ot)for(var zt=Array.from(Ct.entries()),jt=Mt[0][1],Xt=0,Dt=0,Yt=0;Xt<Mt.length;Xt++){var Wt=Xt<Mt.length-1?Mt[Xt+1][1]:-1;if(jt!==Wt){for(var Ut=new Map,Ht=Yt;Ht<zt.length;Ht++){var Kt=zt[Ht][0];if(Kt>=Mt[Dt][0]&&Kt<=Mt[Xt][0])Ut.set(Kt,new Map([[jt,zt[Ht][1].values().next().value]])),Yt=Ht;else if(Kt>Mt[Xt][0])break}qt.push(Ut),jt=Wt,Dt=Xt+1}}else{if(!Y.transform)return{v:void 0};for(var Zt=Array.from(Ct.entries()),$t=new Map,Qt=0,Jt=Zt;Qt<Jt.length;Qt++){var ea=Jt[Qt];$t.set(ea[0],new Map([[Y.transform.type,ea[1].values().next().value]]))}qt.push($t)}for(var ta=0,aa=0;aa<qt.length;aa++){var ra=Array.from(qt[aa].entries()),ia=ra[0][0];1===ra.length&&ra.push(aa<qt.length-1?[qt[aa+1].keys().next().value,ra[0][1]]:[ia+1,ra[0][1]]);var na=ra[ra.length-1][0],sa=na-ia,oa=new le;oa.attributeName="transform",oa.type=ra[0][1].keys().next().value;for(var la=0;la<ra.length;la++){var ua=ra[la];if(It.push(Bt.get(ua[0])||""),oa.type!==SVGTransform.SVG_TRANSFORM_ROTATE){var fa=Lt.get(ua[0]);fa&&(void 0===oa.transformOrigin&&(oa.transformOrigin=[]),oa.transformOrigin[la]=fa)}ua[0]-=ia}var ha=ke(ra),ca=Array.isArray(ha),va=0;for(ha=ca?ha:ha[Symbol.iterator]();;){var da;if(ca){if(va>=ha.length)break;da=ha[va++]}else{if((va=ha.next()).done)break;da=va.value}var pa=y(da,2),ya=pa[1];oa.keyTimes.push(pa[0]),oa.values.push(ya.values().next().value)}(ia-=ta)>1?oa.delay=ia:1===ia&&(sa+1)%10==0&&sa++,oa.duration=sa,oa.keySplines=It,oa.synchronized={index:aa,value:""},ta=na,s._insertAnimate(oa,Ot)}}else{for(var ga=Array.from(Ct.entries()),ma=-1!==$?$:0,ba=void 0,ka=0,Sa=ga;ka<Sa.length;ka++){var Aa=Sa[ka];It.push(Bt.get(Aa[0])||""),Aa[0]-=ma}if(r){var xa=xe(ke(ga),r,s.parent,K,n);if(!xa)return{v:void 0};(ba=new ne).attributeName="d";for(var Ta=Array.isArray(wa=xa),Ra=0,wa=Ta?wa:wa[Symbol.iterator]();;){var _a;if(Ta){if(Ra>=wa.length)break;_a=wa[Ra++]}else{if((Ra=wa.next()).done)break;_a=Ra.value}var Va=_a;ba.keyTimes.push(Va.index),ba.values.push(""+Va.value)}}else{var Ea=new le;Ea.attributeName="transform",Ea.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;var Na=Ct.entries(),Ma=Array.isArray(Na),Pa=0;for(Na=Ma?Na:Na[Symbol.iterator]();;){var Fa;if(Ma){if(Pa>=Na.length)break;Fa=Na[Pa++]}else{if((Pa=Na.next()).done)break;Fa=Pa.value}var Ga=y(Fa,2),Ca=Ga[0],Oa=(ya=Ga[1]).get("x")||0,Ba=ya.get("y")||0;Ea.keyTimes.push(Ca),Ea.values.push(s.parent?"".concat(s.parent.refitX(Oa)," ").concat(s.parent.refitX(Ba)):"".concat(Oa," ").concat(Ba))}ba=Ea}ba.delay=ma,ba.keySplines=It,ba.duration=ga[ga.length-1][0],s._insertAnimate(ba,Ot)}}else if(qe(i,o))for(var La=Array.from(Ct.entries()),Ia=0;Ia<La.length-1;Ia++){var qa=y(La[Ia],2),za=qa[0],ja=qa[1],Xa=y(La[Ia+1],2),Da=Xa[0],Ya=Xa[1],Wa=void 0,Ua=Pt;if(i){var Ha=new le;if(Ha.attributeName="transform",Ot)for(var Ka=0;Ka<Mt.length-1;Ka++){var Za=Mt[Ka],$a=Mt[Ka+1];if(Za[1]===$a[1]&&za>=Za[0]&&Da<=$a[0]){Ha.type=Za[1];break}if(Da-za==1&&Da===$a[0]){Ha.type=$a[1];break}}else Y.transform&&(Ha.type=Y.transform.type);if(0===Ha.type)continue;Ha.values=[ja.values().next().value,Ya.values().next().value];var Qa=Lt.get(Da);Qa&&(Ha.transformOrigin=[Qa]),Wa=Ha}else if(r){var Ja=xe([[za,ja],[Da,Ya]],r,s.parent,K,n);if(!Ja)continue;(Wa=new ne).attributeName="d",Wa.values=ve.replaceMap(Ja,function(e){return""+e.value})}else{var er=new le;er.attributeName="transform",er.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,er.values=ve.objectMap([ja,Ya],function(e){var t=e.get("x")||0,a=e.get("y")||0;return s.parent?"".concat(s.parent.refitX(t)," ").concat(s.parent.refitX(a)):"".concat(t," ").concat(a)}),Ua+=Ia,Wa=er}Ot&&(Wa.delay=0===Ia?za:0),Wa.duration=Da-za,Wa.keyTimes=[0,1],Wa.synchronized={index:Ia,value:Ua};var tr=Bt.get(Da);tr&&(Wa.keySplines=[tr]),s._insertAnimate(Wa,Ot)}}}}}();if("object"===t(x))return x.v}}function T(e){void 0===u[e.attributeName]&&(u[e.attributeName]=[]),u[e.attributeName].push(e),h++}})}},{key:"_removeAnimations",value:function(e){e.length&&ve.spliceArray(this.animations,function(t){return e.includes(t)})}},{key:"_insertAnimate",value:function(e,t){t||(e.iterationCount=-1),e.from=e.valueFrom,e.to=e.valueTo,this.animations.push(e)}}]),r}()},Ye=squared.lib.dom,We=squared.lib.util,Ue=function(e){function t(e,a){var r;if(i(this,t),(r=h(this,u(t).call(this,e,a))).path="",r.motionPathElement=null,r.rotate=0,r.rotateAuto=!1,r.rotateAutoReverse=!1,a){r.setAttribute("path");var n=Ye.getNamedItem(a,"rotate");switch(n){case"auto":r.rotateAuto=!0;break;case"auto-reverse":r.rotateAutoReverse=!0;break;default:r.rotate=We.convertInt(n)}if(r.keyTimes.length){var s=Ye.getNamedItem(a,"keyPoints");if(""!==s){var o=ne.toFractionList(s);o.length===r.keyTimes.length&&(r.keyPoints=o)}}for(var l=0;l<a.children.length;l++){var f=a.children[l];if("mpath"===f.tagName){var c=F(f);if(c&&(V.shape(c)||V.use(c))){r.motionPathElement=c;break}}}}return r}return l(t,ne),s(t,[{key:"instanceType",get:function(){return 49160}}]),t}(),He=squared.lib.css,Ke=squared.lib.dom,Ze=squared.lib.regex,$e=squared.lib.util,Qe="cubic-bezier\\((0(?:\\.\\d+)?|1(?:\\.0+)?), (".concat(Ze.UNIT.DECIMAL,"), (").concat("0(?:\\.\\d+)?|1(?:\\.0+)?","), (").concat(Ze.UNIT.DECIMAL,")\\)"),Je=RegExp("(ease|ease-in|ease-out|ease-in-out|linear|step-(?:start|end)|steps\\(\\d+, (?:start|end)\\)|".concat(Qe,"),?\\s*"),"g"),et=He.getKeyframeRules(),tt={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"};function at(e,t,a){e.style[t]=a,e.setAttribute(t,a)}function rt(e,t){var a=N(e,t);if("animation-timing-function"===t){for(var r,i=[];null!==(r=Je.exec(a));)i.push(r[1]);return i}return a.split(Ze.XML.SEPARATOR)}var it=function(e){return e.sort(function(e,t){return e.index>=t.index?1:-1})},nt=function(e){return function(t){function a(){return i(this,a),h(this,u(a).apply(this,arguments))}return l(a,e),s(a,[{key:"getTransforms",value:function(e){var t=e||this.element;return j.filterTransforms(_.parse(t)||j.convertTransforms(t.transform.baseVal))}},{key:"getAnimations",value:function(e){var t=e||this.element,a=[],r=0;function i(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""===i&&r++,e.delay=t,e.group={id:r,name:i},a.push(e)}for(var n=0;n<t.children.length;n++){var s=t.children[n];if(s instanceof SVGAnimationElement){var o=Ke.getNamedItem(s,"begin");if(""!==o&&/^[a-zA-Z]+$/.test(o))continue;var l=o?$e.sortNumber($e.replaceMap(o.split(";"),function(e){return Z.convertClockTime(e)})):[0];if(l.length)switch(s.tagName){case"set":for(var u=Array.isArray(h=l),f=0,h=u?h:h[Symbol.iterator]();;){var c;if(u){if(f>=h.length)break;c=h[f++]}else{if((f=h.next()).done)break;c=f.value}var v=c;i(new Z(t,s),v)}break;case"animate":for(var d=Array.isArray(y=l),p=0,y=d?y:y[Symbol.iterator]();;){var g;if(d){if(p>=y.length)break;g=y[p++]}else{if((p=y.next()).done)break;g=p.value}var m=g;i(new ne(t,s),m)}break;case"animateTransform":for(var b=Array.isArray(S=l),k=0,S=b?S:S[Symbol.iterator]();;){var A;if(b){if(k>=S.length)break;A=S[k++]}else{if((k=S.next()).done)break;A=k.value}var x=A,T=new le(t,s);j.isShape(this)&&this.path&&(T.transformFrom=j.drawRefit(t,this.parent,this.viewport&&this.viewport.precision)),i(T,x)}break;case"animateMotion":for(var R=Array.isArray(V=l),w=0,V=R?V:V[Symbol.iterator]();;){var E;if(R){if(w>=V.length)break;E=V[w++]}else{if((w=V.next()).done)break;E=w.value}var N=E;i(new Ue(t,s),N)}}}}var M=rt(t,"animation-name");if(M.length){var P={},F=[],G=[];for(var C in tt){var O=rt(t,C);for(0===O.length&&O.push(tt[C]);O.length<M.length;)$e.concatArray(O,O.slice(0));O.length=M.length,P[C]=O}for(var B=0;B<M.length;B++){var L=et.get(M[B]),I=Z.convertClockTime(P["animation-duration"][B]);L&&I>0&&function(){r++;var e={},a={},n="paused"===P["animation-play-state"][B],s=Z.convertClockTime(P["animation-delay"][B]),o=P["animation-iteration-count"][B],l=P["animation-fill-mode"][B],u="".concat(M[B],"_").concat(B),f=[];for(var h in G.push({name:u,attributes:f,paused:n,delay:s,duration:I,iterationCount:o,fillMode:l}),L){var c=parseInt(h)/100;for(var v in L[h]){var d=tt[v]?a:e;void 0===d[v]&&(d[v]=[]);var p=L[h][v];He.isCalc(p)?p=He.calculateVar(t,p,v):He.isCustomProperty(p)&&(p=He.parseVar(t,p)),void 0!==p&&d[v].push({index:c,value:""+p})}}if(e.transform){var y=function(){if(m){if(b>=g.length)return"break";k=g[b++]}else{if((b=g.next()).done)return"break";k=b.value}var a=k,r=_.parse(t,a.value);if(r){var i=function(a){var r=e["transform-origin"]&&e["transform-origin"].find(function(e){return e.index===a});if(r)return _.origin(t,r.value)}(a.index);r.forEach(function(t){var r,n,s,o=t.matrix;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:r="translate",n="".concat(o.e," ").concat(o.f);break;case SVGTransform.SVG_TRANSFORM_SCALE:r="scale",n="".concat(o.a," ").concat(o.d," ").concat(i?"".concat(i.x," ").concat(i.y):"0 0"),!i||0===a.index&&0===i.x&&0===i.y||(s={x:i.x*(1-o.a),y:i.y*(1-o.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:r="rotate",n="".concat(t.angle," ").concat(i?"".concat(i.x," ").concat(i.y):"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:r="skewX",n=""+t.angle,!i||0===a.index&&0===i.y||(s={x:i.y*o.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:r="skewY",n=""+t.angle,!i||0===a.index&&0===i.x||(s={x:0,y:i.x*o.b*-1});break;default:return}void 0===e[r]&&(e[r]=[]);var l=e[r].findIndex(function(e){return e.index===a.index});-1!==l?(e[r][l].value=n,e[r][l].transformOrigin=s):e[r].push({index:a.index,value:n,transformOrigin:s})})}},g=it(e.transform),m=Array.isArray(g),b=0;for(g=m?g:g[Symbol.iterator]();;){var k;if("break"===y())break}}delete e.transform,delete e["transform-origin"];var S=function(r){f.push(r);var h=e[r],c=void 0;switch(r){case"rotate":case"scale":case"skewX":case"skewY":case"translate":(c=new le(t)).attributeName="transform",c.setType(r);break;default:(c=new ne(t)).attributeName=r}var v=P["animation-timing-function"][B],d=P["animation-direction"][B],p=[],y=[],g=[];it(h);for(var m=function(e){if(p.push(h[e].index),y.push(h[e].value),e<h.length-1){var t=a["animation-timing-function"]&&a["animation-timing-function"].find(function(t){return t.index===h[e].index});g.push(t?t.value:v)}var r=h[e].transformOrigin;r&&j.asAnimateTransform(c)&&(void 0===c.transformOrigin&&(c.transformOrigin=[]),c.transformOrigin[e]=r)},b=0;b<h.length;b++)m(b);if(0!==p[0]&&(p.unshift(0),y.unshift(c.baseValue||""),g.unshift(v),c.evaluateStart=!0),i(c,s,u),c.paused=n,c.duration=I,g.every(function(e){return"linear"===e}))c.values=y,c.keyTimes=p;else{var k=[],S=[],A=[];for(b=0;b<p.length;b++){if(b<p.length-1){var x=(p[b+1]-p[b])*I;if($[g[b]])g[b]=$[g[b]];else if(g[b].startsWith("step")){if(""!==y[b]){var T=ne.convertStepTimingFunction(r,g[b],p,y,b,He.getFontSize(t));if(T){for(var R=1===p[b+1]?1:0,w=0;w<T[0].length-R;w++){var _=(p[b]+T[0][w]*x)/I;k.includes(_)&&(_+=.001),k.push(_),S.push(T[1][w]),A.push($[-1!==g[b].indexOf("start")?"step-start":"step-end"])}continue}}g[b]=$.linear}else{var V=RegExp(Qe).exec(g[b]);g[b]=V?"".concat(V[1]," ").concat(V[2]," ").concat(V[3]," ").concat(V[4]):$.ease}A.push(g[b])}k.push(p[b]),S.push(y[b])}c.values=S,c.keyTimes=k,c.keySplines=A}c.iterationCount="infinite"!==o?parseFloat(o):-1,c.fillForwards="forwards"===l||"both"===l,c.fillBackwards="backwards"===l||"both"===l,c.reverse=d.endsWith("reverse"),c.alternate=(-1===c.iterationCount||c.iterationCount>1)&&d.startsWith("alternate"),F.push(c)};for(var A in e)S(A)}()}G.reverse();for(var q=0,z=F;q<z.length;q++){z[q].setGroupOrdering(G)}}for(var X=0,D=a;X<D.length;X++){D[X].parent=this}return a}},{key:"name",set:function(e){this._name=e},get:function(){return void 0===this._name&&(this._name=j.setName(this.element)),this._name}},{key:"transforms",get:function(){return void 0===this._transforms&&(this._transforms=this.getTransforms()),this._transforms}},{key:"animations",get:function(){return void 0===this._animations&&(this._animations=this.getAnimations()),this._animations}},{key:"visible",set:function(e){!function(e,t){at(e,"display",t?"block":"none"),at(e,"visibility",t?"visible":"hidden")}(this.element,e)},get:function(){return"hidden"!==(t=N(e=this.element,"visibility"))&&"collapse"!==t&&"none"!==N(e,"display");var e,t}},{key:"opacity",set:function(e){!function(e,t){if($e.isNumber(t)){var a=parseFloat(""+t);a<=0?a=0:a>=1&&(a=1),e.style.setProperty("opacity",""+a),e.setAttribute("opacity",""+a)}}(this.element,e)},get:function(){return N(this.element,"opacity")||"1"}}]),a}()},st=squared.lib.client;function ot(e){var t=e.parentElement instanceof HTMLElement;return"svg"===e.tagName&&(!t&&st.isUserAgent(4)||t&&st.isUserAgent(8))}var lt=function(e){return function(t){function a(){return i(this,a),h(this,u(a).apply(this,arguments))}return l(a,e),s(a,[{key:"setRect",value:function(){var e=this.parent,t=this.x,a=this.y,r=this.width,i=this.height;e&&(t=e.refitX(t),a=e.refitY(a),r=e.refitSize(r),i=e.refitSize(i)),this.setBaseValue("x",t),this.setBaseValue("y",a),this.setBaseValue("width",r),this.setBaseValue("height",i)}},{key:"_getElement",value:function(){switch(this.element.tagName){case"svg":case"use":case"image":return this.element;default:return null}}},{key:"x",set:function(e){this._x=e},get:function(){if(void 0!==this._x)return this._x;var e=this._getElement();return e?e.x.baseVal.value:0}},{key:"y",set:function(e){this._y=e},get:function(){if(void 0!==this._y)return this._y;var e=this._getElement();return e?e.y.baseVal.value:0}},{key:"width",set:function(e){this._width=e},get:function(){if(void 0!==this._width)return this._width;var e=this._getElement();return e?ot(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}},{key:"height",set:function(e){this._height=e},get:function(){if(void 0!==this._height)return this._height;var e=this._getElement();return e?ot(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}]),a}()},ut=squared.lib.util;function ft(e,t){var a=P(M(e,"fill"));if(""!==a){if(t&&t.definitions.pattern.has(a))return t.definitions.pattern.get(a);var r=document.getElementById(a.substring(1));if(r instanceof SVGPatternElement)return r}}var ht=function(e){function t(e){var a;return i(this,t),(a=h(this,u(t).call(this))).element=e,a.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1},a._clipRegion=[],a}return l(t,squared.lib.base.Container),s(t,[{key:"append",value:function(e,a){return e.parent=this,e.viewport=a||this.getViewport(),v(u(t.prototype),"append",this).call(this,e)}},{key:"build",value:function(e){var t,a,r=!0;e?(t=(e=Object.assign({},e)).symbolElement||e.patternElement||e.element||this.element,a=e.precision,!1===e.initPath&&(r=!1),e.symbolElement=void 0,e.patternElement=void 0,e.element=void 0):t=this.element,this.clear();for(var i=this.getViewport(),n=!1,s=0;s<t.children.length;s++){var o=t.children[s],l=void 0;if(V.svg(o))l=new squared.svg.Svg(o,!1),this.setAspectRatio(l,o.viewBox.baseVal),n=!0;else if(V.g(o))l=new squared.svg.SvgG(o),this.setAspectRatio(l);else if(V.use(o)){var u=F(o);if(u)if(V.symbol(u))l=new squared.svg.SvgUseSymbol(o,u),this.setAspectRatio(l,u.viewBox.baseVal),n=!0;else if(V.image(u))l=new squared.svg.SvgImage(o,u);else if(V.shape(u)){var f=ft(o,i);f?(l=new squared.svg.SvgUsePattern(o,u,f),this.setAspectRatio(l)):l=new squared.svg.SvgUse(o,u,r)}}else if(V.image(o))l=new squared.svg.SvgImage(o);else if(V.shape(o)){var h=ft(o,i);h?(l=new squared.svg.SvgShapePattern(o,h),this.setAspectRatio(l)):l=new squared.svg.SvgShape(o,r)}l&&(this.append(l,i),l.build(e))}if(j.asSvg(this)&&this.documentRoot)(this.aspectRatio.x<0||this.aspectRatio.y<0)&&this.clipViewBox(this.aspectRatio.x,this.aspectRatio.y,this.aspectRatio.width,this.aspectRatio.height,a,!0);else if(n&&this.hasViewBox()&&(0!==this.aspectRatio.x||0!==this.aspectRatio.y)){var c=j.parseBoxRect(this.getPathAll(!1)),v=this.refitX(this.aspectRatio.x),d=this.refitY(this.aspectRatio.y);(c.left<v||c.top<d)&&this.clipViewBox(c.left,c.top,this.refitSize(this.aspectRatio.width),this.refitSize(this.aspectRatio.height),a)}}},{key:"hasViewBox",value:function(){return j.asSvg(this)&&!!this.element.viewBox.baseVal||j.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}},{key:"clipViewBox",value:function(e,t,a,r,i){arguments.length>5&&void 0!==arguments[5]&&arguments[5]&&(a-=e,r-=t,e=e<0?-1*e:0,t=t<0?-1*t:0),this.clipRegion=j.drawRect(a,r,e,t,i)}},{key:"synchronize",value:function(e){this.each(function(t){return t.synchronize(e)})}},{key:"refitX",value:function(e){return(e-this.aspectRatio.x)*this.aspectRatio.unit-this.aspectRatio.parent.x+this.aspectRatio.position.x}},{key:"refitY",value:function(e){return(e-this.aspectRatio.y)*this.aspectRatio.unit-this.aspectRatio.parent.y+this.aspectRatio.position.y}},{key:"refitSize",value:function(e){return e*this.aspectRatio.unit}},{key:"refitPoints",value:function(e){for(var t=Array.isArray(r=e),a=0,r=t?r:r[Symbol.iterator]();;){var i;if(t){if(a>=r.length)break;i=r[a++]}else{if((a=r.next()).done)break;i=a.value}var n=i;n.x=this.refitX(n.x),n.y=this.refitY(n.y),void 0!==n.rx&&void 0!==n.ry&&(n.rx*=this.aspectRatio.unit,n.ry*=this.aspectRatio.unit)}return e}},{key:"requireRefit",value:function(){return 0!==this.aspectRatio.x||0!==this.aspectRatio.y||0!==this.aspectRatio.position.x||0!==this.aspectRatio.position.y||0!==this.aspectRatio.parent.x||0!==this.aspectRatio.parent.y||1!==this.aspectRatio.unit}},{key:"getPathAll",value:function(){var e=[],t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.cascade():this,a=Array.isArray(t),r=0;for(t=a?t:t[Symbol.iterator]();;){var i;if(a){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var n=i;j.isShape(n)&&n.path&&n.path.value&&e.push(n.path.value)}return e}},{key:"getViewport",value:function(){return this.viewport||j.asSvg(this)&&this||void 0}},{key:"setAspectRatio",value:function(e,t){var a=function(e){for(;e;){if(e.hasViewBox())return e;e=e.parent}}(this);if(a){var r=e.aspectRatio;if(t&&(ut.cloneObject(t,r),r.width>0&&r.height>0)){var i=r.width/r.height,n=a.aspectRatio.width||a.viewBox.width,s=a.aspectRatio.height||a.viewBox.height,o=n/s;o>i?r.position.x=(n-s*i)/2:o<i&&(r.position.y=(s-n*(1/i))/2),r.unit=Math.min(n/r.width,s/r.height)}r.parent.x=a.aspectRatio.x+a.aspectRatio.x*(a.aspectRatio.unit-1),r.position.x*=a.aspectRatio.unit,r.position.x+=a.aspectRatio.position.x-a.aspectRatio.parent.x,r.parent.y=a.aspectRatio.y+a.aspectRatio.y*(a.aspectRatio.unit-1),r.position.y*=a.aspectRatio.unit,r.position.y+=a.aspectRatio.position.y-a.aspectRatio.parent.y,r.unit*=a.aspectRatio.unit}}},{key:"clipRegion",set:function(e){""!==e?this._clipRegion.push(e):this._clipRegion.length=0},get:function(){return this._clipRegion.length?this._clipRegion.join(";"):""}},{key:"instanceType",get:function(){return 2}}]),t}(),ct=squared.lib.color,vt=squared.lib.dom,dt=squared.lib.util;function pt(e){for(var t=[],a=e.getElementsByTagName("stop"),r=0;r<a.length;r++){var i=ct.parseColor(vt.getNamedItem(a[r],"stop-color"),vt.getNamedItem(a[r],"stop-opacity"));i&&t.push({color:i,offset:parseFloat(vt.getNamedItem(a[r],"offset"))/100})}return t}function yt(e){for(var t={},a=arguments.length,r=[],i=1;i<a;i++)r[i-1]=arguments[i];for(var n=0,s=r;n<s.length;n++){var o=s[n];e[o]&&(t[o]=e[o].baseVal.value,t["".concat(o,"AsString")]=e[o].baseVal.valueAsString)}return t}var gt=function(e){function t(e){var a,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i(this,t),(a=h(this,u(t).call(this,e))).element=e,a.documentRoot=r,a.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},a.init(),a}return l(t,De(lt(Y(nt(ht))))),s(t,[{key:"build",value:function(e){this.precision=e&&e.precision,this.setRect(),v(u(t.prototype),"build",this).call(this,e)}},{key:"synchronize",value:function(e){!this.documentRoot&&this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(),void 0,e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"init",value:function(){var e=this;this.documentRoot&&(dt.cloneObject(this.element.viewBox.baseVal,this.aspectRatio),this.element.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(function(t){var a=F(t,e.element);a&&(t.parentElement&&t.parentElement.removeChild(t),a.appendChild(t))})),this.setDefinitions(this.element),this.element.querySelectorAll("defs").forEach(function(t){return e.setDefinitions(t)})}},{key:"setDefinitions",value:function(e){var t=this;e.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(function(e){if(e.id){var a="#".concat(e.id);V.clipPath(e)?t.definitions.clipPath.set(a,e):V.pattern(e)?t.definitions.pattern.set(a,e):V.linearGradient(e)?t.definitions.gradient.set(a,Object.assign({type:"linear",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:pt(e)},yt(e,"x1","x2","y1","y2"))):V.radialGradient(e)&&t.definitions.gradient.set(a,Object.assign({type:"radial",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:pt(e)},yt(e,"cx","cy","r","fx","fy","fr")))}})}},{key:"viewBox",get:function(){return this.element.viewBox.baseVal||E(this.element)}},{key:"instanceType",get:function(){return 18}}]),t}(),mt=function(){function e(t){i(this,e),this.element=t}return s(e,[{key:"build",value:function(e){}},{key:"synchronize",value:function(e){}},{key:"instanceType",get:function(){return 4}}]),e}(),bt=squared.lib.color,kt=squared.lib.css,St=squared.lib.regex,At=squared.lib.util,xt={url:St.CSS.URL,polygon:/polygon\(([^)]+)\)/,inset:RegExp("inset\\(".concat(St.STRING.LENGTH_PERCENTAGE,"\\s?").concat(St.STRING.LENGTH_PERCENTAGE,"?\\s?").concat(St.STRING.LENGTH_PERCENTAGE,"?\\s?").concat(St.STRING.LENGTH_PERCENTAGE,"?\\)")),circle:RegExp("circle\\(".concat(St.STRING.LENGTH_PERCENTAGE,"(?: at ").concat(St.STRING.LENGTH_PERCENTAGE," ").concat(St.STRING.LENGTH_PERCENTAGE,")?\\)")),ellipse:RegExp("ellipse\\(".concat(St.STRING.LENGTH_PERCENTAGE," ").concat(St.STRING.LENGTH_PERCENTAGE,"(?: at ").concat(St.STRING.LENGTH_PERCENTAGE," ").concat(St.STRING.LENGTH_PERCENTAGE,")?\\)"))},Tt=function(e){return function(a){function r(){return i(this,r),h(this,u(r).apply(this,arguments))}return l(r,e),s(r,[{key:"setPaint",value:function(e,a){var r=this;this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setAttribute("stroke"),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-width"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");var i=this.getAttribute("clip-path",!0,!1);if(""!==i)for(var n in xt){var s=xt[n].exec(i);if(s){if("url"===n)return void(this.clipPath=s[1]);if(e&&e.length){var o=function(){var t=j.parseBoxRect(e),i=t.right-t.left,o=t.bottom-t.top,l=r.parent;switch(n){case"inset":var u=0,f=0,h=r.convertLength(s[1],o),c=0;s[4]?(u=t.left+r.convertLength(s[4],i),f=t.right-r.convertLength(s[2],i),c=t.bottom-r.convertLength(s[3],o)):s[2]?(u=r.convertLength(s[2],i),f=t.right-u,c=t.bottom-(s[3]?r.convertLength(s[3],o):h),u+=t.left):(u=t.left+h,f=t.right-h,c=t.bottom-h);var v=[{x:u,y:h+=t.top},{x:f,y:h},{x:f,y:c},{x:u,y:c}];return l&&l.refitPoints(v),r.clipPath=j.drawPolygon(v,a),{v:void 0};case"polygon":var d=At.objectMap(s[1].split(St.XML.SEPARATOR),function(e){var a=y(At.replaceMap(e.trim().split(" "),function(e,t){return r.convertLength(e,0===t?i:o)}),2),n=a[0],s=a[1];return{x:n+=t.left,y:s+=t.top}});return l&&l.refitPoints(d),r.clipPath=j.drawPolygon(d,a),{v:void 0};default:if("circle"===n||"ellipse"===n){var p,g,m=i<o?i:o;"circle"===n?g=p=r.convertLength(s[1],m):(p=r.convertLength(s[1],i),g=r.convertLength(s[2],o));var b=t.left,k=t.top;s.length>=4&&(b+=r.convertLength(s[s.length-2],m),k+=r.convertLength(s[s.length-1],m)),l&&(b=l.refitX(b),k=l.refitX(k),p=l.refitSize(p),g=l.refitSize(g)),r.clipPath=j.drawEllipse(b,k,p,g,a)}return{v:void 0}}}();if("object"===t(o))return o.v}}}}},{key:"setAttribute",value:function(e){var t=this,a=this.getAttribute(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);if(At.isString(a)){switch(e){case"stroke-dasharray":a="none"!==a?At.joinMap(a.split(/,\s*/),function(e){return""+t.convertLength(e)},", "):"";break;case"stroke-dashoffset":case"stroke-width":a=""+this.convertLength(a);break;case"fill":case"stroke":var r=P(a);if(""!==r)this["".concat(e,"Pattern")]=r;else{var i;switch(a.toLowerCase()){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="none";break;case"currentcolor":i=bt.parseColor(this.color||N(this.element,e));break;default:i=bt.parseColor(a)}i&&(this[e]=i.value)}return}this[At.convertCamelCase(e)]=a}}},{key:"getAttribute",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=N(this.element,e,t);if(a&&!At.isString(r)){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return r}for(var i=this.useParent||this.parent;i&&(r=N(i.element,e,t),!At.isString(r));)i=i.parent}return r}},{key:"convertLength",value:function(e,t){return kt.isLength(e)?kt.parseUnit(e,kt.getFontSize(this.element)):kt.isPercent(e)?Math.round(("number"==typeof t?t:this.element.getBoundingClientRect()[t||"width"])*At.convertFloat(e)/100):At.convertFloat(e)}},{key:"resetPaint",value:function(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}}]),r}()},Rt=function(e){function t(e){var a;return i(this,t),(a=h(this,u(t).call(this,e))).element=e,a}return l(t,Tt(nt(ht))),s(t,[{key:"build",value:function(e){v(u(t.prototype),"build",this).call(this,e),this.setPaint(this.getPathAll(),e&&e.precision)}},{key:"instanceType",get:function(){return 34}}]),t}(),wt=squared.lib.util,_t=function(e){function t(e,a){var r;return i(this,t),(r=h(this,u(t).call(this,e))).element=e,r.imageElement=null,r.__get_transforms=!1,r.__get_animations=!1,a&&(r.imageElement=a),r}return l(t,lt(Y(nt(mt)))),s(t,[{key:"build",value:function(){this.setRect()}},{key:"extract",value:function(e){var t=e?j.filterTransforms(this.transforms,e):this.transforms,a=this.x,r=this.y,i=this.width,n=this.height;if(t.length){t.reverse();for(var s=0;s<t.length;s++){var o=t[s],l=o.matrix,u=a;switch(a=w.applyX(l,u,r),r=w.applyY(l,u,r),o.type){case SVGTransform.SVG_TRANSFORM_SCALE:i*=l.a,n*=l.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==o.angle&&(l.a<0&&(a+=l.a*i),l.c<0&&(a+=l.c*i),l.b<0&&(r+=l.b*n),l.d<0&&(r+=l.d*n),this.rotateAngle?this.rotateAngle+=o.angle:this.rotateAngle=o.angle)}}this.transformed=t}this.parent&&(a=this.parent.refitX(a),r=this.parent.refitY(r),i=this.parent.refitSize(i),n=this.parent.refitSize(n)),this.translationOffset&&(a+=this.translationOffset.x,r+=this.translationOffset.y),this.setBaseValue("x",a),this.setBaseValue("y",r),this.setBaseValue("width",i),this.setBaseValue("height",n)}},{key:"x",set:function(e){p(u(t.prototype),"x",e,this,!0)},get:function(){var e=v(u(t.prototype),"x",this);return 0===e&&this.imageElement?this.imageElement.x.baseVal.value:e}},{key:"y",set:function(e){p(u(t.prototype),"y",e,this,!0)},get:function(){var e=v(u(t.prototype),"y",this);return 0===e&&this.imageElement?this.imageElement.y.baseVal.value:e}},{key:"width",set:function(e){p(u(t.prototype),"width",e,this,!0)},get:function(){var e=v(u(t.prototype),"width",this);return 0===e&&this.imageElement?this.imageElement.width.baseVal.value:e}},{key:"height",set:function(e){p(u(t.prototype),"height",e,this,!0)},get:function(){var e=v(u(t.prototype),"height",this);return 0===e&&this.imageElement?this.imageElement.height.baseVal.value:e}},{key:"href",get:function(){var e=this.imageElement||this.element;return V.image(e)?wt.resolvePath(e.href.baseVal):""}},{key:"transforms",get:function(){var e=v(u(t.prototype),"transforms",this);return this.__get_transforms||(this.imageElement&&wt.concatArray(e,this.getTransforms(this.imageElement)),this.__get_transforms=!0),e}},{key:"animations",get:function(){var e=v(u(t.prototype),"animations",this);return this.__get_animations||(this.imageElement&&wt.concatArray(e,this.getAnimations(this.imageElement)),this.__get_animations=!0),e}},{key:"instanceType",get:function(){return 4100}}]),t}(),Vt=squared.lib.dom,Et=squared.lib.math,Nt=squared.lib.util;function Mt(e,t,a,r){var i=e[0],n=e[e.length-1];if(void 0!==a)switch(t){case"x":a-=i.start.x;break;case"x1":case"cx":return i.start.x=a,void(i.coordinates[0]=a);case"x2":return n.end.x=a,void(n.coordinates[0]=a)}if(void 0!==r)switch(t){case"y":r-=i.start.y;break;case"y1":case"cy":return i.start.y=r,void(i.coordinates[1]=r);case"y2":return n.end.y=r,void(n.coordinates[1]=r)}for(var s=Array.isArray(l=e),o=0,l=s?l:l[Symbol.iterator]();;){var u;if(s){if(o>=l.length)break;u=l[o++]}else{if((o=l.next()).done)break;u=o.value}for(var f=u,h=0,c=0;h<f.coordinates.length;h+=2,c++)void 0!==a&&(f.relative||(f.coordinates[h]+=a),f.value[c].x+=a),void 0!==r&&(f.relative||(f.coordinates[h+1]+=r),f.value[c].y+=r)}}function Pt(e,t,a){for(var r=0;r<e.length;r++){var i=e[r];if("A"===i.name.toUpperCase()){if(void 0!==t){var n=t-i.radiusX;i.radiusX=t,i.coordinates[0]=2*t*(i.coordinates[0]<0?-1:1),1===r&&(e[0].coordinates[0]-=n,e[0].end.x-=n)}void 0!==a&&(i.radiusY=a)}}}var Ft=function(e){function t(e){var a;return i(this,t),(a=h(this,u(t).call(this,e))).element=e,a.name="",a.value="",a.baseValue="",a.init(),a}return l(t,Tt(Y(mt))),s(t,[{key:"build",value:function(e){var t;e&&e.transforms&&(t=j.filterTransforms(e.transforms,e.exclude&&e.exclude[this.element.tagName])),this.draw(t,e)}},{key:"draw",value:function(e,t){var a,r;t&&(a=t.residual,r=t.precision);var i,n=this.element,s=this.parent,o=this.patternParent,l=!!s&&s.requireRefit(),u=!!o&&2===o.patternContentUnits;if(this.transformed=void 0,V.path(n)){if(i=this.getBaseValue("d"),e&&e.length||l||u){var f=j.getPathCommands(i);if(f.length){var h=j.extractPathPoints(f);if(h.length){if(u&&o.patternRefitPoints(h),e&&e.length){if("function"==typeof a){var c=y(a.call(this,n,e),2);this.transformResidual=c[0],e=c[1]}e.length&&(h=j.applyTransforms(e,h,_.origin(this.element)),this.transformed=e)}l&&s.refitPoints(h),i=j.drawPath(j.rebindPathPoints(f,h,void 0!==this.transformed),r)}}}}else if(V.line(n)){var v=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(u&&o.patternRefitPoints(v),e&&e.length){if("function"==typeof a){var d=y(a.call(this,n,e),2);this.transformResidual=d[0],e=d[1]}e.length&&(v=j.applyTransforms(e,v,_.origin(this.element)),this.transformed=e)}l&&s.refitPoints(v),i=j.drawPolyline(v,r)}else if(V.circle(n)||V.ellipse(n)){var p,g;V.ellipse(n)?(p=this.getBaseValue("rx"),g=this.getBaseValue("ry")):g=p=this.getBaseValue("r");var m=[{x:this.getBaseValue("cx"),y:this.getBaseValue("cy"),rx:p,ry:g}];if(u&&o.patternRefitPoints(m),e&&e.length){if("function"==typeof a){var b=y(a.call(this,n,e,p,g),2);this.transformResidual=b[0],e=b[1]}e.length&&(m=j.applyTransforms(e,m,_.origin(this.element)),this.transformed=e)}l&&s.refitPoints(m);var k=m[0];i=j.drawEllipse(k.x,k.y,k.rx,k.ry,r)}else if(V.rect(n)){var S=this.getBaseValue("x"),A=this.getBaseValue("y"),x=this.getBaseValue("width"),T=this.getBaseValue("height");if(e&&e.length){var R=[{x:S,y:A},{x:S+x,y:A},{x:S+x,y:A+T},{x:S,y:A+T}];if(u&&o.patternRefitPoints(R),"function"==typeof a){var w=y(a.call(this,n,e),2);this.transformResidual=w[0],e=w[1]}e.length&&(R=j.applyTransforms(e,R,_.origin(this.element)),this.transformed=e),l&&s.refitPoints(R),i=j.drawPolygon(R,r)}else u&&(S=o.patternRefitX(S),A=o.patternRefitY(A),x=o.patternRefitX(x),T=o.patternRefitY(T)),l&&(S=s.refitX(S),A=s.refitY(A),x=s.refitSize(x),T=s.refitSize(T)),i=j.drawRect(x,T,S,A,r)}else if(V.polygon(n)||V.polyline(n)){var E=this.getBaseValue("points");if(u&&o.patternRefitPoints(E),e&&e.length){if("function"==typeof a){var N=y(a.call(this,n,e),2);this.transformResidual=N[0],e=N[1]}e.length&&(E=j.applyTransforms(e,E,_.origin(this.element)),this.transformed=e)}l&&(null===this.transformed&&(E=j.clonePoints(E)),s.refitPoints(E)),i=V.polygon(n)?j.drawPolygon(E,r):j.drawPolyline(E,r)}else i="";return this.value=i,this.setPaint([i],r),i}},{key:"extendLength",value:function(e,t){if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":var a=j.getPathCommands(this.value);if(a.length){var r=a[0],i=r.start,n=a[a.length-1],s=n.end,o=n.name.toUpperCase(),l=e.leading,u=e.trailing,f=!1;if("Z"!==o&&(i.x!==s.x||i.y!==s.y)){var h;if(l>0)if(r.value.length>1?h=r.value[1]:a.length>1&&(h=a[1].start),h)if(h.x===i.x)r.coordinates[1]=r.coordinates[1]+(i.y>h.y?l:-l),f=!0;else if(h.y===i.y)r.coordinates[0]=r.coordinates[0]+(i.x>h.x?l:-l),f=!0;else{var c=Et.offsetAngle(h,i);r.coordinates[0]=r.coordinates[0]-Et.offsetAngleX(c,l),r.coordinates[1]=r.coordinates[1]-Et.offsetAngleY(c,l),f=!0}switch(o){case"M":case"L":var v;if(u>0)if(1===a.length?r.value.length>1&&(v=r.value[r.value.length-2]):v=n.value.length>1?n.value[n.value.length-2]:a[a.length-2].end,v)if(v.x===s.x)n.coordinates[1]=n.coordinates[1]+(s.y>v.y?u:-u),f=!0;else if(v.y===s.y)n.coordinates[0]=n.coordinates[0]+(s.x>v.x?u:-u),f=!0;else{var d=Et.offsetAngle(v,s),p=n.coordinates[0]+Et.offsetAngleX(d,u),y=n.coordinates[1]+Et.offsetAngleY(d,u);n.coordinates[0]=p,n.coordinates[1]=y,f=!0}break;case"H":case"V":var g="H"===o?0:1;n.coordinates[g]=n.coordinates[g]+(l+u)*(n.coordinates[g]>=0?1:-1),f=!0}}if(f)return e.leading=l,e.trailing=u,e.path=j.drawPath(a,t),e}}}},{key:"flattenStrokeDash",value:function(e,t,a,r,i){var n,s,o,l;r||(r=a);var u=0,f=function(e){return s[e%n]};if(void 0===i){n=e.length,s=e.slice(0);var h=Et.nextMultiple([2,n]);o=0;for(var c=0;c<h;c++){var v=e[c%n];o+=v,c>=n&&s.push(v)}if(n=h,t>0){for(var d=f(0);t-d>=0;)t-=d,d=f(++u);u%=n}else if(t<0){for(s.reverse();t<0;)t+=f(u++);u=n-u%n,s.reverse()}i={dashArray:s,dashArrayTotal:o,items:[],leading:0,trailing:0,startIndex:u,extendedLength:l=r,lengthRatio:a/(r||a)}}else{o=i.dashArrayTotal,l=i.extendedLength,u=i.startIndex,n=(s=i.dashArray).length,i.items=[],i.leading=0}for(var p,y=0,g=0,m=0;;g+=m,u++){m=f(u);var b=void 0,k=void 0;g<t?(i.leading=t-g,b=0,k=m-i.leading):(b=g-t,k=m);var S=Et.truncateFraction(b/l);if(p=Et.truncateFraction(S+k/l),u%2==0?S<1&&(i.items.push({start:S,end:Math.min(p,1),length:m}),y+=m):y+=m,p>=1)break}for(i.trailing=Et.truncateFraction((p-1)*l);y%o!=0;){var A=f(++u);i.trailing+=A,y+=A}return 0===i.items.length?i.items.push({start:1,end:1}):(i.leadingOffset=Et.truncateFraction(i.items[0].start*l),i.leading*=i.lengthRatio,i.trailing*=i.lengthRatio),i}},{key:"extractStrokeDash",value:function(e,t){var a,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Nt.convertInt(this.strokeWidth),s="",o="";if(n>0){var l=j.parseCoordinates(this.strokeDasharray);l.length&&function(){var u,f=r.totalLength,h=r.pathLength||f,c=[],v=Nt.convertInt(r.strokeDashoffset),d=0,p=function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=r.flattenStrokeDash(e,t,f,h);return 0===c.length&&(u=n),d=Math.max(d,n.items.length),c.push({items:n.items,delay:a,duration:i}),n.items};if(a=p(l,v,0),e){var y=function(e){var t=b.get("stroke-dashoffset",e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return t?parseFloat(t):v},g=function(e){var t=b.get("stroke-dasharray",e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return t?j.parseCoordinates(t):l},m=e.slice(0).sort(function(e,t){if(e.attributeName.startsWith("stroke-dash")&&t.attributeName.startsWith("stroke-dash")){if(e.delay!==t.delay)return e.delay<t.delay?-1:1;if(j.asSet(e)&&j.asAnimate(t)||void 0===e.animationElement&&t.animationElement)return-1;if(j.asAnimate(e)&&j.asSet(t)||e.animationElement&&void 0===t.animationElement)return 1}return 0}),b=new fe(m,"stroke-dasharray","stroke-dashoffset");if(m.length>1)for(var k=0;k<m.length;k++)b.has(m[k].attributeName,m[k].delay,m[k])||m.splice(k--,1);for(var S=function(e){return e?"".concat(e.start," ").concat(e.end):"1 1"},A=function(e){for(var t=v,a=e;a<m.length;a++){var i=m[a];if("stroke-dasharray"===i.attributeName){var n=b.get("stroke-dashoffset",i.delay);n&&(t=parseFloat(n));var s=j.asAnimate(i)?b.evaluateStart(i):[i.to],o=Array.isArray(s),l=0;for(s=o?s:s[Symbol.iterator]();;){var u;if(o){if(l>=s.length)break;u=s[l++]}else{if((l=s.next()).done)break;u=l.value}d=Math.max(d,r.flattenStrokeDash(j.parseCoordinates(u),t,f,h).items.length)}}}},x=[],T=!1,R=function(e){var k=m[e];if(k.setterType){var R=function(e,t){p(e,t,k.delay,k.fillReplace&&k.duration>0?k.duration:0),T=!0};switch(k.attributeName){case"stroke-dasharray":return R(l=j.parseCoordinates(k.to),y(k.delay)),"continue";case"stroke-dashoffset":return v=Nt.convertInt(k.to),R(g(k.delay),v),"continue"}}else if(j.asAnimate(k)&&k.playable)switch(b.evaluateStart(k),k.attributeName){case"stroke-dasharray":A&&(A(e),A=void 0);for(var w=y(k.delay),_=r.flattenStrokeDash(g(k.delay),w,f,h).items,V=[],E=[],N=0;N<d;N++){var M=new ne(r.element);M.id=N,M.baseValue=S(_[N]),M.attributeName="stroke-dasharray",M.delay=k.delay,M.duration=k.duration,M.iterationCount=k.iterationCount,M.fillMode=k.fillMode,E[N]=[],V.push(M)}for(var P=Array.isArray(G=k.values),F=0,G=P?G:G[Symbol.iterator]();;){var O;if(P){if(F>=G.length)break;O=G[F++]}else{if((F=G.next()).done)break;O=F.value}for(var B=r.flattenStrokeDash(j.parseCoordinates(O),w,f,h).items,L=0;L<d;L++)E[L].push(S(B[L]))}for(var I=k.keyTimes,q=k.keySplines,z=k.timingFunction,X=0;X<d;X++)V[X].values=E[X],V[X].keyTimes=I,q?V[X].keySplines=q:z&&(V[X].timingFunction=z);if(k.fillReplace)for(var D=k.getTotalDuration(),Y=r.flattenStrokeDash(g(D),y(D),f,h).items,W=0;W<d;W++)V[W].replaceValue=S(Y[W]);return Nt.concatArray(x,V),T=!0,"continue";case"stroke-dashoffset":if("break"===function(){var e=k.duration,l=i/1e3,p=parseFloat(k.values[0]),y=[],g=[],m=[],S=0,A=0;v===p||0!==k.delay||k.fillReplace||(u=r.flattenStrokeDash(u.dashArray,p,f,h),c[0].items=a=u.items,d=Math.max(d,u.items.length),v=p);var x,R=f,w=1;if((u.leading>0||u.trailing>0)&&(r.extendLength(u,t),u.path)){var _=j.parseBoxRect([r.value]);w=(R=Et.truncateFraction(C(u.path)))/f,u.extendedLength=r.pathLength,u.extendedLength>0?u.extendedLength*=w:u.extendedLength=R;var V=r.flattenStrokeDash(u.dashArray,0,f,h,u);c[0].items=a=V.items,d=Math.max(d,a.length);var E=Math.ceil(n/2);s=u.path,o=j.drawRect(_.right-_.left,_.bottom-_.top+2*E,_.left,_.top-E)}if(k.fillReplace&&-1!==k.iterationCount){var N=Nt.convertFloat(b.get(k.attributeName,k.getTotalDuration()));if(N!==v){var M=Math.abs(N-v)%R/R;N>v&&(M=1-M),x=""+M}}for(var P=function(t){var a=0===t?v:parseFloat(k.values[t-1]),r=parseFloat(k.values[t]),i=Math.abs(r-a),n=k.keyTimes[t];if(0===i)return t>0&&(g.push(S=n),y.length?(y.push(y[y.length-1]),A=parseFloat(y[y.length-1])):(y.push("0"),A=0)),"continue";var s=r>a,o=t>0?(n-k.keyTimes[t-1])*e:0,f=i*u.lengthRatio,h=f/R;function c(t){return t/f*o/e}function d(e){if(T=(x-e)/R,arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=Et.truncateFraction(T);s?t>0&&(T=1-T):0===t&&(T=1)}}function p(){t>0&&(s?"1"===y[y.length-1]:"0"===y[y.length-1])||(m[g.length]=!0,g.push(0===S?0:Et.truncateFraction(S+l)),y.push(s?"1":"0"))}function b(){g.push(S=n);var e=Et.truncateFraction(T);y.push(""+e),A=e>0&&e<1?T:0}var x=f,T=0;if(0===t)x%=R,d(0),s&&(T=1-T),b();else{if(A>0){var w=s?A:1-A,_=Et.truncateFraction(w*R);if(Et.lessEqual(x,_))return d(0),s?T=A-T:T+=A,b(),"continue";y.push(s?"0":"1"),S+=c(_),g.push(Et.truncateFraction(S)),h=Et.truncateFraction(h-w),x=Et.truncateFraction(x-_)}if(Et.isEqual(x,R)&&(x=R),x>R){var V=(h=Math.floor(h))*R;V===x&&h--,d(V,!0)}else h=0,d(0,!0);for(;h>0;)p(),y.push(s?"0":"1"),S+=c(R),g.push(Et.truncateFraction(S)),h--;p(),b()}},F=0;F<k.keyTimes.length;F++)P(F);k.baseValue="0",k.replaceValue=x,k.values=y,k.keyTimes=g,k.loopIntervals=m;var G=k.timingFunction;return G&&(k.keySplines=void 0,k.timingFunction=G),T=!0,"break"}())break}x.push(k)},w=0;w<m.length;w++)R(w);if(T){for(var _=0;_<c.length;_++){var V=c[_].items;if(V===a)for(var E=V.length;E<d;E++)V.push({start:1,end:1});else for(var N=c[_].delay,M=c[_].duration,P=c.length>2?r.flattenStrokeDash(g(N-1),y(N-1),f,h).items:a,F=0;F<d;F++){var G=new Z(r.element);G.id=F,G.attributeName="stroke-dasharray",G.baseValue=S(P[F]),G.delay=N,G.to=S(V[F]),G.duration=M,G.fillFreeze=0===M,x.push(G)}}e.length=0,Nt.concatArray(e,x)}}}()}return[a,s,o]}},{key:"init",value:function(){var e=this.element;V.path(e)?this.setBaseValue("d"):V.line(e)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):V.rect(e)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):V.circle(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):V.ellipse(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(V.polygon(e)||V.polyline(e))&&this.setBaseValue("points",j.clonePoints(e.points))}},{key:"transforms",get:function(){return void 0===this._transforms&&(this._transforms=j.filterTransforms(_.parse(this.element)||j.convertTransforms(this.element.transform.baseVal))),this._transforms}},{key:"pathLength",get:function(){return Nt.convertFloat(Vt.getNamedItem(this.element,"pathLength"))}},{key:"totalLength",get:function(){return this.element.getTotalLength()}},{key:"instanceType",get:function(){return 1028}}],[{key:"extrapolate",value:function(e,t,a,r,i,n){for(var s,o=!!r||!!i&&!!i.parent&&i.parent.requireRefit(),l=[],u=0;u<a.length;u++){if("d"===e)l[u]=a[u];else if("points"===e){var f=j.convertPoints(j.parseCoordinates(a[u]));f.length&&(l[u]=i&&V.polygon(i.element)?j.drawPolygon(f,n):j.drawPolyline(f,n))}else if(t){void 0===s&&(s=j.getPathCommands(t));var h=parseFloat(a[u]);if(!isNaN(h)){var c=u<a.length-1?Nt.cloneArray(s,[],!0):s;switch(e){case"x":case"x1":case"x2":case"cx":Mt(c,e,h);break;case"y":case"y1":case"y2":case"cy":Mt(c,e,void 0,h);break;case"r":Pt(c,h,h);break;case"rx":Pt(c,h);break;case"ry":Pt(c,void 0,h);break;case"width":for(var v=0,d=[1,2];v<d.length;v++){var p=c[d[v]];switch(p.name){case"m":case"l":case"h":p.coordinates[0]=h*(p.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":p.coordinates[0]=c[0].end.x+h}}break;case"height":for(var y=0,g=[2,3];y<g.length;y++){var m=c[g[y]];switch(m.name){case"m":case"l":case"v":m.coordinates[1]=h*(m.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":m.coordinates[1]=c[0].end.y+h}}break;default:l[u]="";continue}l[u]=j.drawPath(c,n)}}l[u]?o&&(l[u]=j.transformRefit(l[u],r,i,n)):l[u]=""}return l}}]),t}(),Gt=function(e){function t(e,a){var r;return i(this,t),(r=h(this,u(t).call(this,e))).element=e,r.patternElement=a,r}return l(t,nt(ht)),s(t,[{key:"build",value:function(e){(e=Object.assign({},e)).patternElement=this.patternElement,e.initPath=!1,v(u(t.prototype),"build",this).call(this,e)}},{key:"animations",get:function(){return[]}},{key:"instanceType",get:function(){return 130}}]),t}(),Ct=function(e){function t(e){var a,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i(this,t),(a=h(this,u(t).call(this,e))).element=e,r&&a.setPath(),a}return l(t,De(nt(mt))),s(t,[{key:"setPath",value:function(){this.path=new Ft(this.element)}},{key:"build",value:function(e){this.path&&(this.path.parent=this.parent,(e=Object.assign({},e)).transforms=this.transforms,this.path.build(e))}},{key:"synchronize",value:function(e){if(this.path&&this.animations.length){var t=e&&e.element;this.animateSequentially(this.getAnimateShape(t||this.element),t?void 0:this.getAnimateTransform(),this.path,e)}}},{key:"path",set:function(e){this._path=e,e&&(e.name=this.name)},get:function(){return this._path}},{key:"instanceType",get:function(){return 2052}}]),t}(),Ot=squared.lib.css,Bt=squared.lib.dom,Lt=squared.lib.util,It=function(e){return Ot.isPercent(e)?parseFloat(e)/100:parseFloat(e)},qt=function(e){function t(e,a){var r;return i(this,t),(r=h(this,u(t).call(this,e))).element=e,r.patternElement=a,r.__get_transforms=!1,r.patternUnits="userSpaceOnUse"===Bt.getNamedItem(r.patternElement,"patternUnits")?1:2,r.patternContentUnits="objectBoundingBox"===Bt.getNamedItem(r.patternElement,"patternContentUnits")?2:1,r}return l(t,Tt(Y(nt(ht)))),s(t,[{key:"build",value:function(e){var t=e&&e.element||this.element,a=new Ft(t);if(a.build(e),a.value){var r=(e=Object.assign({},e))&&e.precision;this.clipRegion=a.value,a.clipPath&&(this.clipRegion=a.clipPath);var i=[a.value];this.setPaint(i,r),this.drawRegion=j.parseBoxRect(i);var n=2===this.patternUnits,s=this.patternWidth,o=this.patternHeight,l=this.tileWidth,u=this.tileHeight,f=n?this.drawRegion.left:0,h=n?this.drawRegion.top:0,c=this.offsetX%l,v=this.offsetY%u,d=this.drawRegion.right-(n?this.drawRegion.left:0),p=this.drawRegion.bottom-(n?this.drawRegion.top:0),y=0;for(0!==c&&(c=l-c,d+=l),0!==v&&(v=u-v,p+=u);p>0;){var g=h+y*u-v,m=d,b=0;do{var k=f+b*l-c,S=new Gt(t,this.patternElement);S.build(e);var A=S.cascade(),x=Array.isArray(A),T=0;for(A=x?A:A[Symbol.iterator]();;){var R;if(x){if(T>=A.length)break;R=A[T++]}else{if((T=A.next()).done)break;R=T.value}var w=R;j.isShape(w)&&(w.setPath(),w.path&&(w.path.patternParent=this,2===this.patternContentUnits?w.path.refitBaseValue(k/s,g/o,r):w.path.refitBaseValue(k,g,r),e.transforms=w.transforms,w.path.build(e),w.path.fillOpacity=""+parseFloat(w.path.fillOpacity)*parseFloat(this.fillOpacity),w.path.clipPath=j.drawRect(l,u,k,g,r)+(""!==w.path.clipPath?";".concat(w.path.clipPath):"")))}this.append(S),m-=l,b++}while(m>0);y++,p-=u}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){a.fill="",a.fillOpacity="0",a.stroke=this.stroke,a.strokeWidth=this.strokeWidth;var _=new Ct(t,!1);_.path=a,this.append(_)}}}},{key:"patternRefitX",value:function(e){return this.drawRegion?e*this.patternWidth:e}},{key:"patternRefitY",value:function(e){return this.drawRegion?e*this.patternHeight:e}},{key:"patternRefitPoints",value:function(e){if(this.drawRegion)for(var t=this.patternWidth,a=this.patternHeight,r=Array.isArray(n=e),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var o=s;if(o.x*=t,o.y*=a,void 0!==o.rx&&void 0!==o.ry)if(o.rx===o.ry){var l=Math.min(t,a);o.rx*=l,o.ry*=l}else o.rx*=t,o.ry*=a}return e}},{key:"patternWidth",get:function(){return this.drawRegion?this.drawRegion.right-this.drawRegion.left:0}},{key:"patternHeight",get:function(){return this.drawRegion?this.drawRegion.bottom-this.drawRegion.top:0}},{key:"transforms",get:function(){if(!this.__get_transforms){var e=j.convertTransforms(this.patternElement.patternTransform.baseVal);if(e.length){for(var a=_.rotateOrigin(this.patternElement,"patternTransform"),r=this.patternWidth/2,i=this.patternHeight/2,n=Array.isArray(o=e),s=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var f=l;switch(f.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;a.length;){var h=a.shift();if(h.angle===f.angle){f.origin={x:r+h.x,y:i+h.y};break}}if(f.origin)break;default:f.origin={x:r,y:i}}}Lt.concatArray(v(u(t.prototype),"transforms",this),j.filterTransforms(e))}this.__get_transforms=!0}return v(u(t.prototype),"transforms",this)}},{key:"offsetX",get:function(){var e=0;return 2===this.patternUnits&&(e=this.patternWidth*It(this.patternElement.x.baseVal.valueAsString)),e||this.patternElement.x.baseVal.value}},{key:"offsetY",get:function(){var e=0;return 2===this.patternUnits&&(e=this.patternHeight*It(this.patternElement.y.baseVal.valueAsString)),e||this.patternElement.y.baseVal.value}},{key:"tileWidth",get:function(){var e=0;return 2===this.patternUnits&&(e=this.patternWidth*It(this.patternElement.width.baseVal.valueAsString)),e||this.patternElement.width.baseVal.value}},{key:"tileHeight",get:function(){var e=0;return 2===this.patternUnits&&(e=this.patternHeight*It(this.patternElement.height.baseVal.valueAsString)),e||this.patternElement.height.baseVal.value}},{key:"instanceType",get:function(){return 258}}]),t}(),zt=squared.lib.util,jt=function(e){function t(e,a){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i(this,t),(r=h(this,u(t).call(this,e,!1))).element=e,r.shapeElement=a,r.__get_transforms=!1,r.__get_animations=!1,n&&r.setPath(),r}return l(t,Tt(lt(Y(Ct)))),s(t,[{key:"setPath",value:function(){this.path=new Ft(this.shapeElement),this.path.useParent=this}},{key:"build",value:function(e){v(u(t.prototype),"build",this).call(this,e),this.setPaint(this.path?[this.path.value]:void 0,e&&e.precision)}},{key:"synchronize",value:function(e){(e=Object.assign({},e)).element=this.shapeElement,this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(),void 0,e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"transforms",get:function(){var e=v(u(t.prototype),"transforms",this);return this.__get_transforms||(zt.concatArray(e,this.getTransforms(this.shapeElement)),this.__get_transforms=!0),e}},{key:"animations",get:function(){var e=v(u(t.prototype),"animations",this);return this.__get_animations||(zt.concatArray(e,this.getAnimations(this.shapeElement)),this.__get_animations=!0),e}},{key:"instanceType",get:function(){return 10244}}]),t}(),Xt=squared.lib.util,Dt=function(e){function t(e,a,r){var n;return i(this,t),(n=h(this,u(t).call(this,e,r))).element=e,n.shapeElement=a,n}return l(t,De(lt(qt))),s(t,[{key:"build",value:function(e){(e=Object.assign({},e)).element=this.shapeElement,v(u(t.prototype),"build",this).call(this,e)}},{key:"synchronize",value:function(e){var a=this,r=Xt.filterArray(this.animations,function(e){return void 0===a.verifyBaseValue(e.attributeName,0)||"x"===e.attributeName||"y"===e.attributeName}),i=this.getAnimateTransform();(r.length||i.length)&&this.animateSequentially(this.getAnimateViewRect(r),i,void 0,e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"instanceType",get:function(){return 514}}]),t}(),Yt=function(e){function t(e,a){var r;return i(this,t),(r=h(this,u(t).call(this,e))).element=e,r.symbolElement=a,r}return l(t,Tt(De(lt(Y(nt(ht)))))),s(t,[{key:"build",value:function(e){(e=Object.assign({},e)).symbolElement=this.symbolElement,this.setRect(),v(u(t.prototype),"build",this).call(this,e);var a=this.getBaseValue("x",0),r=this.getBaseValue("y",0);if(0!==a||0!==r){var i={x:a,y:r},n=this.cascade(),s=Array.isArray(n),o=0;for(n=s?n:n[Symbol.iterator]();;){var l;if(s){if(o>=n.length)break;l=n[o++]}else{if((o=n.next()).done)break;l=o.value}l.translationOffset=i}}this.setPaint(this.getPathAll(),e&&e.precision)}},{key:"synchronize",value:function(e){this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(),void 0,e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"viewBox",get:function(){return this.symbolElement.viewBox.baseVal||E(this.element)}},{key:"instanceType",get:function(){return 66}}]),t}(),Wt={constant:Q,util:O};e.Svg=gt,e.SvgAnimate=ne,e.SvgAnimateMotion=Ue,e.SvgAnimateTransform=le,e.SvgAnimation=Z,e.SvgAnimationIntervalMap=fe,e.SvgBaseVal=Y,e.SvgBuild=j,e.SvgContainer=ht,e.SvgElement=mt,e.SvgG=Rt,e.SvgImage=_t,e.SvgPaint=Tt,e.SvgPath=Ft,e.SvgPattern=Gt,e.SvgShape=Ct,e.SvgShapePattern=qt,e.SvgSynchronize=De,e.SvgUse=jt,e.SvgUsePattern=Dt,e.SvgUseSymbol=Yt,e.SvgView=nt,e.SvgViewRect=lt,e.lib=Wt,Object.defineProperty(e,"__esModule",{value:!0})});
