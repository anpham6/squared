!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).squared=t.squared||{},t.squared.svg={}))}(this,(function(t){"use strict";var e=squared.lib.base.Pattern;const{TRANSFORM:s}=squared.lib.regex,{CSS_PROPERTIES:i,calculateStyle:a,calculateVar:n,calculateVarAsString:r,convertAngle:o,getFontSize:l,hasEm:c,isLength:h,isPercent:u,parseUnit:f}=squared.lib.css,{getNamedItem:d}=squared.lib.dom,{convertRadian:g,hypotenuse:p,truncateFraction:m,truncateTrailingZero:y}=squared.lib.math,{getElementCache:v}=squared.lib.session,{convertCamelCase:S,resolvePath:b,splitPair:k}=squared.lib.util,T=new Map,A=new e(/(\w+)\([^)]+\)/g),x=new e(/rotate\((-?[\d.]+)(?:,?\s+(-?[\d.]+))?(?:,?\s+(-?[\d.]+))?\)/g);function E(t,e,s,i,a){h(i)?e[s]=f(i,_(t,i)):u(i)&&(e[s]=parseFloat(i)/100*a)}function R(t,e){var s;const i=t.dataset.baseValue;if(i)try{const t=JSON.parse(i);if(t)return(null===(s=t[e])||void 0===s?void 0:s.toString().trim())||""}catch(t){}return""}function w(t,e){const s=v(t,"styleMap");return s&&s[S(e)]||""}const V=(t,e)=>e?Math.min(t.width,t.height):p(t.width,t.height),_=(t,e)=>c(e)?{fontSize:l(t)}:void 0;Object.assign(i,{alignmentBaseline:{trait:0,value:"auto"},baselineShift:{trait:257,value:"0"},clipRule:{trait:0,value:"nonzero"},colorInterpolation:{trait:0,value:"sRGB"},colorIinterpolationFilters:{trait:0,value:"linearRGB"},cx:{trait:257,value:"0"},cy:{trait:257,value:"0"},dominantBaseline:{trait:0,value:"auto"},fill:{trait:17,value:"black"},fillOpacity:{trait:1,value:"1"},fillRule:{trait:0,value:"nonzero"},floodColor:{trait:17,value:"black"},floodOpacity:{trait:1,value:"1"},lightingColor:{trait:17,value:"white"},markerEnd:{trait:0,value:"none"},markerMid:{trait:0,value:"none"},markerStart:{trait:0,value:"none"},mask:{trait:67,value:["maskImage","maskMode","maskRepeat","maskPosition","maskClip","maskOrigin","maskSize","maskComposite"]},maskComposite:{trait:0,value:"add"},maskClip:{trait:0,value:"border-box"},maskImage:{trait:1,value:"none"},maskMode:{trait:0,value:"match-source"},maskRepeat:{trait:0,value:"no-repeat"},maskOrigin:{trait:0,value:"border-box"},maskPosition:{trait:1,value:"center"},maskSize:{trait:1,value:"auto"},pointerEvents:{trait:0,value:"visiblePainted"},r:{trait:257,value:"0"},rx:{trait:257,value:"auto"},ry:{trait:257,value:"auto"},shapeRendering:{trait:0,value:"auto"},stopColor:{trait:17,value:"black"},stopOpacity:{trait:1,value:"1"},stroke:{trait:17,value:"none"},strokeDasharray:{trait:0,value:"none"},strokeDashoffset:{trait:1,value:"0"},strokeLinecap:{trait:0,value:"butt"},strokeLinejoin:{trait:0,value:"miter"},strokeMiterlimit:{trait:1,value:"4"},strokeOpacity:{trait:1,value:"1"},strokeWidth:{trait:257,value:"1px"},textAnchor:{trait:0,value:"start"},textRendering:{trait:0,value:"auto"},vectorEffect:{trait:0,value:"none"},x:{trait:257,value:"0"},y:{trait:257,value:"0"}});const P=new Map,M="([01](?:\\.\\d+)?),?\\s+(-?\\d+(?:\\.\\d+)?),?\\s+([01](?:\\.\\d+)?),?\\s+(-?\\d+(?:\\.\\d+)?)",N={svg:t=>"svg"===t.tagName,g:t=>"g"===t.tagName,symbol:t=>"symbol"===t.tagName,path:t=>"path"===t.tagName,shape:t=>{switch(t.tagName){case"path":case"line":case"rect":case"ellipse":case"circle":case"polyline":case"polygon":return!0;default:return!1}},image:t=>"image"===t.tagName,use:t=>"use"===t.tagName,line:t=>"line"===t.tagName,rect:t=>"rect"===t.tagName,circle:t=>"circle"===t.tagName,ellipse:t=>"ellipse"===t.tagName,polygon:t=>"polygon"===t.tagName,polyline:t=>"polyline"===t.tagName,clipPath:t=>"clipPath"===t.tagName,pattern:t=>"pattern"===t.tagName,linearGradient:t=>"linearGradient"===t.tagName,radialGradient:t=>"radialGradient"===t.tagName},B={applyX:(t,e,s)=>t.a*e+t.c*s+t.e,applyY:(t,e,s)=>t.b*e+t.d*s+t.f,clone:t=>({a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}),rotate(t){const e=g(t),s=Math.cos(e),i=Math.sin(e);return{a:s,b:i,c:-1*i,d:s,e:0,f:0}},skew:(t=0,e=0)=>({a:1,b:Math.tan(g(e)),c:Math.tan(g(t)),d:1,e:0,f:0}),scale:(t=1,e=1)=>({a:t,b:0,c:0,d:e,e:0,f:0}),translate:(t=0,e=0)=>({a:1,b:0,c:0,d:1,e:t,f:e})},C={create:(t,e,s=0,i=!0,a=!0)=>({type:t,matrix:e,angle:s,method:{x:i,y:a}}),parse(t,e){if(e||(e=t.style.getPropertyValue("transform"))){const i=[];for(A.matcher(e);A.find();){const[e,a]=A.groups(),n=a.endsWith("X"),r=!n&&a.endsWith("Y");if(a.startsWith("translate")){const a=s.TRANSLATE.exec(e);if(a){const e=f(a[2],_(t,a[2])),s=!n&&a[3]?f(a[3],_(t,a[3])):0,o=r?0:e,l=r?e:s;i.push(C.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,B.translate(o,l),0))}}else if(a.startsWith("rotate")){const t=s.ROTATE.exec(e);if(t){const e=o(t[2],t[3]);if(!isNaN(e)){const t=B.rotate(e);n?(t.a=1,t.b=0,t.c=0):r&&(t.b=0,t.c=0,t.d=1),i.push(C.create(SVGTransform.SVG_TRANSFORM_ROTATE,t,e,!n,!r))}}}else if(a.startsWith("scale")){const t=s.SCALE.exec(e);if(t){const e=r?1:parseFloat(t[2]),s=n?1:r?parseFloat(t[2]):!n&&t[3]?parseFloat(t[3]):e;i.push(C.create(SVGTransform.SVG_TRANSFORM_SCALE,B.scale(e,s),0,!r,!n))}}else if(a.startsWith("skew")){const t=s.SKEW.exec(e);if(t){const e=o(t[2],t[3],0),s=r?0:e,a=r?e:t[4]&&t[5]?o(t[4],t[5],0):0,l=B.skew(s,a);n?i.push(C.create(SVGTransform.SVG_TRANSFORM_SKEWX,l,s,!0,!1)):r?i.push(C.create(SVGTransform.SVG_TRANSFORM_SKEWY,l,a,!1,!0)):(i.push(C.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign(Object.assign({},l),{b:0}),s,!0,!1)),0!==a&&i.push(C.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign(Object.assign({},l),{c:0}),a,!1,!0)))}}else if(a.startsWith("matrix")){const s=C.matrix(t,e);s&&i.push(C.create(SVGTransform.SVG_TRANSFORM_MATRIX,s))}}const a=i.length;if(a){for(let t=0;t<a;++t)i[t].fromStyle=!0;return i}}return null},matrix(t,e){const i=s.MATRIX.exec(e||O(t,"transform"));if(i)switch(i[1]){case"matrix":return{a:parseFloat(i[2]),b:parseFloat(i[3]),c:parseFloat(i[4]),d:parseFloat(i[5]),e:parseFloat(i[6]),f:parseFloat(i[7])};case"matrix3d":return{a:parseFloat(i[2]),b:parseFloat(i[3]),c:parseFloat(i[6]),d:parseFloat(i[7]),e:parseFloat(i[14]),f:parseFloat(i[15])}}return null},origin(t,e){const s={x:0,y:0};if(e||(e=O(t,"transform-origin"))){const i=z(t);let a,n;if(i)({width:a,height:n}=i);else{const e=t.parentElement;if(e instanceof SVGGraphicsElement){const t=e.viewportElement;t&&(N.svg(t)||N.symbol(t))&&({width:a,height:n}=t.viewBox.baseVal)}}a&&n||({width:a,height:n}=t.getBoundingClientRect());const r=e.split(" ");switch(1===r.length&&r.push("center"),r[0]){case"0%":case"left":break;case"100%":case"right":s.x=a;break;case"center":r[0]="50%";default:E(t,s,"x",r[0],a)}switch(r[1]){case"0%":case"top":break;case"100%":case"bottom":s.y=n;break;case"center":r[1]="50%";default:E(t,s,"y",r[1],n)}}return s},rotateOrigin(t,e="transform"){const s=d(t,e),i=[];if(""!==s)for(x.matcher(s);x.find();){const[t,e,s]=x.map(t=>parseFloat(t)||0,1);0!==t&&i.push({angle:t,x:e,y:s})}return i},typeAsName(t){switch(t){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue(t){switch(t){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}};function G(t){const e=t.getBoundingClientRect();return e.x=e.left,e.y=e.top,e}function F(t,e,s){switch(e){case"animationDelay":case"animationDuration":case"animationIterationCount":case"offsetDistance":case"offsetRotate":return a(t,e,s);case"fill":case"stroke":case"floodColor":case"lightingColor":case"stopColor":return a(t,"fontColor",s);case"fillOpacity":case"strokeOpacity":case"floodOpacity":return a(t,"opacity",s);case"strokeMiterlimit":{const e=n(t,s,{supportPercent:!1,unitType:32,min:1});return isNaN(e)?"":e.toString()}}const i=z(t)||(t.viewportElement||t.parentElement||t).getBoundingClientRect();switch(e){case"transform":case"transformOrigin":case"offsetAnchor":case"offsetPath":case"clipPath":case"maskImage":case"maskPosition":case"maskSize":case"width":case"height":return a(t,e,s,i);case"baselineShift":return a(t,"verticalAlign",s,i);case"cx":case"x":case"x1":case"x2":{const e=n(t,s,{boundingSize:i.width});return isNaN(e)?"":e.toString()}case"cy":case"y":case"y1":case"y2":{const e=n(t,s,{boundingSize:i.height});return isNaN(e)?"":e.toString()}case"r":{const e=n(t,s,{boundingSize:V(i,!0),min:0});return isNaN(e)?"0":e.toString()}case"rx":{const e=n(t,s,{boundingSize:i.width,min:0});return isNaN(e)?"0":N.rect(t)?Math.min(e,i.width/2).toString():e.toString()}case"ry":{const e=n(t,s,{boundingSize:i.height,min:0});return isNaN(e)?"0":N.rect(t)?Math.min(e,i.height/2).toString():e.toString()}case"strokeDasharray":return r(t,s,{boundingSize:V(i),min:0});case"strokeDashoffset":{const e=n(t,s,{boundingSize:V(i,!0),unitType:32});return isNaN(e)?"":e.toString()}case"strokeWidth":{const e=n(t,s,{boundingSize:V(i),unitType:32,min:0});return isNaN(e)?"":e.toString()}}return""}function O(t,e,s){return w(t,S(e))||R(t,e)||d(t,e)||(s||Array.from(t.style).includes(e))&&getComputedStyle(t).getPropertyValue(e)||""}function L(t,e,s){let i=t,a;do{if(a=O(i,e,s),""!==a&&"inherit"!==a)break;i=i.parentElement}while(i&&!(i instanceof HTMLElement));return a}function I(t,e,s){const i=d(t,"href")||d(t,"xlink:href");if("#"===i[0]){const s=i.substring(1);if(!e){let s=t.parentElement;for(e=s;s&&!(s.parentElement instanceof HTMLElement);)e=s,s=s.parentElement}if(e){const t=e.querySelectorAll("*");for(let e=0,i=t.length;e<i;++e){const i=t.item(e);if(i.id.trim()===s&&i instanceof SVGElement)return i}}const a=document.getElementById(s);if(a instanceof SVGElement)return a}else if(s){const[e,a]=k(i,"#");if(""!==e){const i=s[b(e)];if(i){if(document.body.insertAdjacentHTML("beforeend",i),(t=document.body.lastElementChild)instanceof SVGGraphicsElement)return t.style.display="none",t.querySelector("#"+a);t&&document.body.removeChild(t)}}}return null}function q(t,e=3){let s=T.get(e);s||(s=new RegExp(`(-?\\d+\\.\\d{${e}})(\\d)\\d*`,"g"),T.set(e,s));let i=t,a;for(;a=s.exec(t);){let t=a[1];parseInt(a[2])>=5&&(t=m(parseFloat(t)+1/Math.pow(10,e)).toString()),i=i.replace(a[0],y(t))}return s.lastIndex=0,i}function z(t){let e=t.parentElement;for(;e;){if(N.svg(e)||N.symbol(e)){const t=e.viewBox;if(t){const s=t.baseVal;return s&&s.width>0&&s.height>0?s:G(e)}}e=e.parentElement}return null}function X(t,e){let s=0,i=0,a=t.parentElement;for(;a&&a!==e;)(N.svg(a)||N.use(a))&&(s+=a.x.baseVal.value,i+=a.y.baseVal.value),a=a.parentElement;return{x:s,y:i}}function Y(t){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",t),e}function D(t){const e=undefined;return Y(t).getTotalLength()}var W=Object.freeze({__proto__:null,CACHE_VIEWNAME:P,PATTERN_CUBICBEZIER:M,SVG:N,MATRIX:B,TRANSFORM:C,getDOMRect:G,calculateStyle:F,getAttribute:O,getParentAttribute:L,getTargetElement:I,truncateString:q,getNearestViewBox:z,getRootOffset:X,createPath:Y,getPathLength:D}),U=squared.lib.base.Pattern;const{STRING:K}=squared.lib.regex,{isAngle:$,parseAngle:j}=squared.lib.css,{getNamedItem:H}=squared.lib.dom,{absoluteAngle:Z,offsetAngleY:Q,relativeAngle:J,truncate:tt,truncateFraction:et}=squared.lib.math,{hasBit:st,isArray:it,plainMap:at,splitPair:nt}=squared.lib.util,rt=new U(K.DECIMAL),ot=new U(/([A-Za-z])([^A-Za-z]+)?/g);class SvgBuild{static isUse(t){return st(t.instanceType,1)}static isContainer(t){return st(t.instanceType,2)}static isElement(t){return st(t.instanceType,4)}static isShape(t){return st(t.instanceType,2052)}static isAnimate(t){return st(t.instanceType,32776)}static isAnimateTransform(t){return st(t.instanceType,98312)}static asSvg(t){return 18===t.instanceType}static asG(t){return 34===t.instanceType}static asPattern(t){return 258===t.instanceType}static asShapePattern(t){return 514===t.instanceType}static asImage(t){return 8196===t.instanceType}static asUseG(t){return 115===t.instanceType}static asUseSymbol(t){return 131===t.instanceType}static asUseShape(t){return 6149===t.instanceType}static asUseShapePattern(t){return 1539===t.instanceType}static asSet(t){return 8===t.instanceType}static asAnimate(t){return 32776===t.instanceType}static asAnimateTransform(t){return 98312===t.instanceType}static asAnimateMotion(t){return 229384===t.instanceType}static drawCircle(t,e,s,i){return SvgBuild.drawEllipse(t,e,s,s,i)}static drawPolygon(t,e){return t.length>0?SvgBuild.drawPolyline(t,e)+"Z":""}static drawLine(t,e,s=0,i=0,a){return a&&(t=tt(t,a),e=tt(e,a),s=tt(s,a),i=tt(i,a)),`M${t},${e} L${s},${i}`}static drawRect(t,e,s=0,i=0,a){return a?(t=tt(s+t,a),e=tt(i+e,a),s=tt(s,a),i=tt(i,a)):(t+=s,e+=i),`M${s},${i} ${t},${i} ${t},${e} ${s},${e} Z`}static drawEllipse(t,e,s,i,a){void 0===i&&(i=s);let n=2*s;return a?(t=tt(t-s,a),e=tt(e,a),s=tt(s,a),i=tt(i,a),n=tt(n,a)):t-=s,`M${t},${e} a${s},${i},0,0,1,${n},0 a${s},${i},0,0,1,-${n},0`}static drawPolyline(t,e){let s="M";const i=t.length;if(e)for(let a=0;a<i;++a){const{x:i,y:n}=t[a];s+=" "+tt(i,e)+","+tt(n,e)}else for(let e=0;e<i;++e){const{x:i,y:a}=t[e];s+=" "+i+","+a}return s}static drawPath(t,e){let s="";for(let e=0,i=t.length;e<i;++e){const i=t[e];switch(s+=e>0?" "+i.key:i.key,i.key.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":s+=i.coordinates.join(",");break;case"H":s+=i.coordinates[0];break;case"V":s+=i.coordinates[1];break;case"A":s+=`${i.radiusX},${i.radiusY},${i.xAxisRotation},${i.largeArcFlag},${i.sweepFlag},${i.coordinates.join(",")}`}}return e?q(s,e):s}static drawRefit(t,e,s){let i;if(N.path(t)){if(i=H(t,"d"),e&&e.requireRefit){const t=SvgBuild.toPathCommands(i);if(t.length){const a=SvgBuild.toPathPoints(t);a.length&&(e.refitPoints(a),i=SvgBuild.drawPath(SvgBuild.syncPath(t,a),s))}}}else if(N.line(t)){const a=[{x:t.x1.baseVal.value,y:t.y1.baseVal.value},{x:t.x2.baseVal.value,y:t.y2.baseVal.value}];e&&e.requireRefit&&e.refitPoints(a),i=SvgBuild.drawPolyline(a,s)}else if(N.circle(t)||N.ellipse(t)){let a,n;N.ellipse(t)?(a=t.rx.baseVal.value,n=t.ry.baseVal.value):(a=t.r.baseVal.value,n=a);const r=[{x:t.cx.baseVal.value,y:t.cy.baseVal.value,rx:a,ry:n}];e&&e.requireRefit&&e.refitPoints(r);const o=r[0];i=SvgBuild.drawEllipse(o.x,o.y,o.rx,o.ry,s)}else if(N.rect(t)){let a=t.x.baseVal.value,n=t.y.baseVal.value,r=t.width.baseVal.value,o=t.height.baseVal.value;e&&e.requireRefit&&(a=e.refitX(a),n=e.refitY(n),r=e.refitSize(r),o=e.refitSize(o)),i=SvgBuild.drawRect(r,o,a,n,s)}else if(N.polygon(t)||N.polyline(t)){const a=SvgBuild.clonePoints(t.points);e&&e.requireRefit&&e.refitPoints(a),i=N.polygon(t)?SvgBuild.drawPolygon(a,s):SvgBuild.drawPolyline(a,s)}return i||""}static transformRefit(t,e){let s,i,a,n;e&&({transforms:s,parent:i,container:a,precision:n}=e);const r=SvgBuild.toPathCommands(t);if(r.length){let e=SvgBuild.toPathPoints(r);if(e.length){const o=it(s);o&&(e=SvgBuild.applyTransforms(s,e,i&&C.origin(i.element))),a&&a.requireRefit&&a.refitPoints(e),t=SvgBuild.drawPath(SvgBuild.syncPath(r,e,o),n)}}return t}static toOffsetPath(t,e="auto 0deg"){const s=Y(t),i=Math.ceil(s.getTotalLength()),a=[];if(i){let n=[],r=[],o=0,l=0,c=0,h=0,u=null,f;if($(e))o=j(e,0);else{for(const e of SvgBuild.toPathCommands(t))switch(e.key.toUpperCase()){case"M":case"L":case"H":case"V":case"Z":n=n.concat(e.value),r=r.concat(new Array(e.value.length).fill(!1));break;case"C":case"S":case"Q":case"T":case"A":n.push(e.end),r.push(!0)}"auto 0deg"!==e&&(l=j(e.split(" ").pop(),0))}for(let t=0;t<i;++t){const e=s.getPointAtLength(t);if(n.length){const t=n.findIndex(t=>{const s=t.x.toString(),i=t.y.toString();return s===e.x.toPrecision(s.length-(s.includes(".")?1:0))&&i===e.y.toPrecision(i.length-(i.includes(".")?1:0))});if(-1!==t){const s=n[t+1];s?(f=r[t+1],f?(u=SvgBuild.centerOf(n[t],s),o=0):(u=null,o=et(Z(e,s)))):u=null,h=0,n.splice(0,t+1),r.splice(0,t+1)}}let i;f?(i=u?et(J(u,e)):0,c>0&&c%360==0&&0===Math.floor(i)&&(h=c),i+=h):i=o,i+=l,a.push({key:t,value:e,rotate:i}),c=Math.ceil(i)}}return a}static toPathCommands(t){const e=[];let s=0;for(ot.matcher(t.trim());ot.find();){let t=ot.group(1);if(0===s&&"M"!==t.toUpperCase())break;const i=ot.group(2),a=i?SvgBuild.parseCoordinates(i.trim()):[],n=[];let r=a.length,o,l;if(s>0){const t=e[s-1];o=t.key.toUpperCase(),l=t.end}switch(t.toUpperCase()){case"M":0===s&&(t="M");case"L":r>=2&&(r-=r%2,n.push(a));break;case"H":if(l)for(let e=0;e<r;++e)n.push([a[e],"h"===t?0:l.y]);break;case"V":if(l)for(let e=0;e<r;++e)n.push(["v"===t?0:l.x,a[e]]);break;case"Z":s>0&&(n.push(e[0].coordinates.slice(0,2)),t="Z");break;case"C":if(r>=6){r-=r%6;for(let t=0;t<r;t+=6)n.push(a.slice(t,t+6))}break;case"S":if(r>=4&&("C"===o||"S"===o)){r-=r%4;for(let t=0;t<r;t+=4)n.push(a.slice(t,t+4))}break;case"Q":if(r>=4){r-=r%4;for(let t=0;t<r;t+=4)n.push(a.slice(t,t+4))}break;case"T":if(r>=2&&("Q"===o||"T"===o)){r-=r%2;for(let t=0;t<r;t+=2)n.push(a.slice(t,t+2))}break;case"A":if(r>=7){r-=r%7;for(let t=0;t<r;t+=7)n.push(a.slice(t,t+7))}break;default:continue}for(let s=0,i=n.length;s<i;++s){const i=n[s],a=t.toLowerCase(),r="a"===a?i.splice(0,5):null,o=t===a,c=i.length,h=new Array(c/2);let u=0;for(let t=0;t<c;t+=2){let e=i[t],s=i[t+1];o&&l&&(e+=l.x,s+=l.y),h[u++]={x:e,y:s}}const f={key:t,value:h,start:h[0],end:h[u-1],relative:o,coordinates:i};r&&(f.radiusX=r[0],f.radiusY=r[1],f.xAxisRotation=r[2],f.largeArcFlag=r[3],f.sweepFlag=r[4]),e.push(f),l=f.end}s=e.length}return e}static toPathPoints(t){const e=[];let s=0,i=0;for(let a=0,n=t.length;a<n;++a){const n=t[a],{key:r,relative:o,coordinates:l}=n;for(let t=0,a=l.length;t<a;t+=2){o?(s+=l[t],i+=l[t+1]):(s=l[t],i=l[t+1]);const a={x:s,y:i};"A"===r.toUpperCase()&&(a.rx=n.radiusX,a.ry=n.radiusY),e.push(a)}o&&(n.key=r.toUpperCase())}return e}static syncPath(t,e,s){t:{let i;for(let a=0,n=t.length;a<n;++a){const n=t[a],{key:r,coordinates:o,value:l}=n;if(n.relative){if(!i)break;if(!s||"H"!==r&&"V"!==r){const t=o.length;for(let s=0,a=0;s<t;s+=2){const t=e.shift();if(!t)break t;o[s]=t.x-i.x,o[s+1]=t.y-i.y,"a"===r&&void 0!==t.rx&&void 0!==t.ry&&(n.radiusX=t.rx,n.radiusY=t.ry),l[a++]=t,i=t}n.key=r.toLowerCase()}else{const t=e.shift();if(!t)break t;o[0]=t.x,o[1]=t.y,l[0]=t,n.key="L",n.relative=!1}}else switch(r.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":{const s=o.length;for(let i=0,a=0;i<s;i+=2){const s=e.shift();if(!s){t=[];break t}o[i]=s.x,o[i+1]=s.y,n.value[a++]=s}break}case"A":{const s=e.shift();if(!s){t=[];break t}o[0]=s.x,o[1]=s.y,n.radiusX=s.rx,n.radiusY=s.ry,n.value[0]=s;break}}i=l[l.length-1],n.start=l[0],n.end=i}}return t}static filterTransforms(t,e){const s=[];for(let i=0,a=t.length;i<a;++i){const a=t[i],n=a.type;if(!e||!e.includes(n)){switch(n){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===a.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:{const t=a.matrix;if(1===t.a&&1===t.d)continue;break}case SVGTransform.SVG_TRANSFORM_TRANSLATE:{const t=a.matrix;if(0===t.e&&0===t.f)continue;break}}s.push(a)}}return s}static applyTransforms(t,e,s){const i=SvgBuild.clonePoints(e),a=i.length;for(const e of t.slice(0).reverse()){const t=e.matrix;let n=0,r=0,o=0,l=0;if(s){const{x:i,y:a}=s,c=e.method;switch(e.type){case SVGTransform.SVG_TRANSFORM_SCALE:c.x&&(o=i*(1-t.a)),c.y&&(l=a*(1-t.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:c.y&&(r-=a);break;case SVGTransform.SVG_TRANSFORM_SKEWY:c.x&&(n-=i);break;case SVGTransform.SVG_TRANSFORM_ROTATE:c.x&&(n-=i,o=i+Q(e.angle,i)),c.y&&(r-=a,l=a+Q(e.angle,a))}}for(let s=0;s<a;++s){const a=i[s],{x:c,y:h}=a;if(a.x=B.applyX(t,c,h+r)+o,a.y=B.applyY(t,c+n,h)+l,e.type===SVGTransform.SVG_TRANSFORM_SCALE){const{rx:e,ry:s}=a;void 0!==e&&void 0!==s&&(a.rx=B.applyX(t,e,s+r),a.ry=B.applyY(t,e+n,s))}}}return i}static convertTransforms(t){const e=t.numberOfItems,s=new Array(e);for(let i=0;i<e;++i){const{type:e,matrix:a,angle:n}=t.getItem(i);s[i]=C.create(e,a,n)}return s}static convertPoints(t){const e=t.length;if(e%2==0){const s=new Array(e/2);for(let i=0,a=0;i<e;i+=2)s[a++]={x:t[i],y:t[i+1]};return s}return[]}static clonePoints(t){if(Array.isArray(t)){const e=t.length,s=new Array(e);for(let i=0;i<e;++i){const{x:e,y:a,rx:n,ry:r}=t[i],o={x:e,y:a};void 0!==n&&void 0!==r&&(o.rx=n,o.ry=r),s[i]=o}return s}{const e=t.numberOfItems,s=new Array(e);for(let i=0;i<e;++i){const{x:e,y:a}=t.getItem(i);s[i]={x:e,y:a}}return s}}static minMaxOf(t,e){let{x:s,y:i}=t[0],a=s,n=i;for(let r=1,o=t.length;r<o;++r){const{x:o,y:l}=t[r];if(e&&r>0){const{rx:e,ry:c}=t[r];if(void 0!==e&&void 0!==c){const{x:h,y:u}=t[r-1];let f=(o+h)/2,d=(l+u)/2;o>h?d-=c:o<h&&(d+=c),l<u?f+=e:l>h&&(f-=e),s=Math.min(f,s),a=Math.max(f,a),i=Math.min(d,i),n=Math.max(d,n)}}o<s?s=o:o>a&&(a=o),l<i?i=l:l>n&&(n=l)}return{top:i,right:a,bottom:n,left:s}}static centerOf(...t){const e=this.minMaxOf(t);return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}static boxRectOf(t){let e=[];for(let s=0,i=t.length;s<i;++s)e=e.concat(SvgBuild.toPathPoints(SvgBuild.toPathCommands(t[s])));return this.minMaxOf(e,!0)}static parsePoints(t){return at(t.trim().split(/\s+/),t=>{const[e,s]=nt(t,",");return{x:parseFloat(e),y:parseFloat(s)}})}static parseCoordinates(t){const e=[];if(""!==t)for(rt.matcher(t);rt.find();){const t=parseFloat(rt.group());isNaN(t)||e.push(t)}return e}}const{getNamedItem:lt}=squared.lib.dom;function ct(t,e,s,i,a){for(let n=0,r=t.length;n<r;++n){const r=t[n];r.x+=e,r.y+=s,void 0!==r.rx&&void 0!==r.ry&&(r.rx*=i,r.ry*=a)}}var ht=t=>class extends t{constructor(){super(...arguments),this._baseVal={}}setBaseValue(t,e){if(void 0!==e){if(1===this.verifyBaseValue(t,e))return this._baseVal[t]=e,!0}else switch(t){case"d":return this._baseVal[t]=lt(this.element,"d"),!0;case"points":{const e=this.element[t];if(Array.isArray(e))return this._baseVal[t]=SvgBuild.clonePoints(e),!0;break}default:{const e=this.element[t];if(e){const s=e.baseVal;if(s)return this._baseVal[t]=s.value,!0}break}}return!1}getBaseValue(t,e){var s;return null!==(s=this._baseVal[t])&&void 0!==s?s:this.setBaseValue(t)?void 0:e}refitBaseValue(t,e,s,i=1,a=1){const n=this._baseVal;for(const r in n){const o=n[r];if("string"==typeof o){if("d"===r){const l=SvgBuild.toPathCommands(o),c=SvgBuild.toPathPoints(l);ct(c,t,e,i,a),n[r]=SvgBuild.drawPath(SvgBuild.syncPath(l,c),s)}}else if("number"==typeof o)switch(r){case"cx":case"x1":case"x2":case"x":n[r]+=t;break;case"cy":case"y1":case"y2":case"y":n[r]+=e;break;case"r":n[r]*=Math.min(i,a);break;case"rx":case"width":n[r]*=i;break;case"ry":case"height":n[r]*=a}else Array.isArray(o)&&"points"===r&&ct(o,t,e,i,a)}}verifyBaseValue(t,e){switch(t){case"d":return"string"==typeof e?1:0;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof e?1:0;case"points":return Array.isArray(e)?1:0;default:return 2}}};const{getFontSize:ut,hasEm:ft,isLength:dt,parseUnit:gt}=squared.lib.css,{getNamedItem:pt}=squared.lib.dom,{capitalize:mt,hasBit:yt,isString:vt}=squared.lib.util,St=/^(-)?(\d+(?:\.\d+)?)(ms|s|min|h)?$/,bt=/^(-)?(?:(\d+):)?(?:([0-5][0-9]):)?([0-5][0-9])(?:\.(\d{1,3}))?$/;function kt(t,e){const s=yt(this.fillMode,e);t?s||(this.fillMode|=e):s&&(this.fillMode^=e)}class SvgAnimation{constructor(t,e){if(this.element=null,this.fillMode=0,this.synchronizeState=0,this.paused=!1,this.animationElement=null,this.instanceType=8,this._to="",this._duration=-1,this._delay=0,this._parent=null,this._attributeName="",this._dataset=null,t){const e=t.dataset;for(const t in e){const s=e[t];if(vt(s))try{(this._dataset||(this._dataset={}))[t]=JSON.parse(s)}catch(t){}}this.element=t}if(e){this.animationElement=e,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");const t=pt(e,"dur");if(""!==t&&"indefinite"!==t){const e=SvgAnimation.parseClockTime(t);this.duration=!isNaN(e)&&e>0?e:0}}}static parseClockTime(t){t=t.trim();let e=St.exec(t);if(e){let t=parseFloat(e[2])*(e[1]?-1:1);switch(e[3]){case"ms":break;case"h":t*=60;case"min":t*=60;default:t*=1e3}return Math.round(t)}if(e=bt.exec(t),e){const t=e[5];let s=parseInt(e[4])*(e[1]?-1:1);return e[1]&&(s+=60*parseInt(e[2])*60),e[2]&&(s+=60*parseInt(e[3])),1e3*s+(t?parseInt(t)*(t.length<3?Math.pow(10,3-t.length):1):0)}return NaN}setAttribute(t,e){const s=this.animationElement;if(s){const i=pt(s,t);""!==i&&(vt(e)?(e=e.trim(),this[t+mt(e)]=i===e):this[t]=i)}}addState(...t){for(const e of t)yt(this.synchronizeState,e)||(this.synchronizeState|=e)}removeState(...t){for(const e of t)this.synchronizeState&=~e}hasState(...t){return t.some(t=>yt(this.synchronizeState,t))}set attributeName(t){var e,s,i,a;if("transform"!==t&&!this.baseValue){let n=null===(s=null===(e=this._dataset)||void 0===e?void 0:e.baseValue)||void 0===s?void 0:s[t];if(void 0!==n)this.baseValue=n.toString().trim();else{const e=this.element;if(e){switch(t){case"opacity":case"stroke-opacity":case"fill-opacity":n=O(e,t)||"1";break;default:n=O(e,t)}if(""===n){const s=this.animationElement;if(s&&"paused"===getComputedStyle(e).animationPlayState){const e=s.parentElement;if(e){const s=null===(a=null===(i=e[t])||void 0===i?void 0:i.baseVal)||void 0===a?void 0:a.valueAsString;s&&dt(s)&&(this.baseValue=gt(s,ft(s)?{fontSize:ut(e)}:void 0).toString())}}}else this.baseValue=n}}}this._attributeName=t}get attributeName(){return this._attributeName}set delay(t){this._delay=t}get delay(){return this._delay}set duration(t){this._duration=Math.round(t)}get duration(){return this._duration}set to(t){this._to=t}get to(){return this._to}set fillBackwards(t){kt.call(this,t,4)}get fillBackwards(){return yt(this.fillMode,4)}set fillForwards(t){kt.call(this,t,2)}get fillForwards(){return yt(this.fillMode,2)}set fillFreeze(t){kt.call(this,t,1)}get fillFreeze(){return yt(this.fillMode,1)}set parent(t){this._parent=t}get parent(){return this._parent}set group(t){this._group=t}get group(){return this._group||(this._group={id:-1/0,name:""})}set setterType(t){}get setterType(){return!0}get fillReplace(){switch(this.fillMode){case 0:case 4:return!0;default:return!1}}get parentContainer(){let t=this._parent;for(;t&&!SvgBuild.isContainer(t);)t=t.parent;return t}}const{getHexCode:Tt,parseColor:At}=squared.lib.color,{getFontSize:xt,hasEm:Et,isLength:Rt,parseUnit:wt}=squared.lib.css,{getNamedItem:Vt}=squared.lib.dom,{isNumber:_t,lastItemOf:Pt,replaceMap:Mt,sortNumber:Nt,trimEnd:Bt}=squared.lib.util,Ct=new RegExp(`\\s*${M}\\s*`),Gt=new RegExp(`cubic-bezier\\(${M}\\)`),Ft=t=>parseFloat((1-t).toPrecision(5));class SvgAnimate extends SvgAnimation{constructor(t,e){if(super(t,e),this.type=0,this.additiveSum=!1,this.accumulateSum=!1,this.instanceType=32776,this._reverse=!1,this._alternate=!1,this._keySplines=null,this._iterationCount=1,this._from="",this._setterType=!1,this._repeatDuration=-1,this._timingFunction="",e){const t=Vt(e,"values"),s=-1!==this.duration?SvgAnimate.toFractionList(Vt(e,"keyTimes")):[];if(""!==t){const e=Bt(t,";").split(/\s*;\s*/);this.values=e;const i=e.length;i>1&&i===s.length?(this.from=e[0],this.to=e[i-1],this.keyTimes=s):1===i&&(this.to=this.values[0],this.convertToValues())}else this.from=Vt(e,"from"),this.convertToValues(s);const i=Vt(e,"repeatDur");if(""!==i&&"indefinite"!==i){const t=SvgAnimation.parseClockTime(i);!isNaN(t)&&t>0&&(this._repeatDuration=t)}const a=Vt(e,"repeatCount");this.iterationCount="indefinite"===a?-1:parseFloat(a)||0,"animate"===e.tagName&&this.setCalcMode()}}static getSplitValue(t,e,s){return t+(e-t)*s}static findTimingFunction(t){const e=SvgAnimate.KEYSPLINE_NAME[t];if(e)return e;if(Ct.test(t))return t.trim();if(t.startsWith("step"))return SvgAnimate.KEYSPLINE_NAME.linear;const s=Gt.exec(t);return s?s[1]+" "+s[2]+" "+s[3]+" "+s[4]:SvgAnimate.KEYSPLINE_NAME.ease}static fromStepTimingFunction(t,e,s,i,a,n){const r=a[n],o=a[n+1];let l,c;switch(e){case"fill":case"stroke":{const t=At(r),e=At(o);t&&e&&(l=[t],c=[e]);break}case"points":l=SvgBuild.convertPoints(SvgBuild.parseCoordinates(r)),c=SvgBuild.convertPoints(SvgBuild.parseCoordinates(o));break;case"rotate":case"scale":case"translate":l=Mt(r.trim().split(/\s+/),t=>parseFloat(t)),c=Mt(o.trim().split(/\s+/),t=>parseFloat(t));break;default:{const e=e=>Et(e)?{fontSize:xt(t)}:void 0;_t(r)?l=[parseFloat(r)]:Rt(r)&&(l=[wt(r,e(r))]),_t(o)?c=[parseFloat(o)]:Rt(o)&&(c=[wt(o,e(o))]);break}}if(l&&c){const t=l.length;if(t===c.length){switch(s){case"step-start":s="steps(1, start)";break;case"step-end":s="steps(1, end)"}const a=/steps\((\d+)(?:,\s+(start|end|jump-(?:start|end|both|none)))?\)/.exec(s);if(a){const s=i[n+1]-i[n],r=parseInt(a[1]),o=100/r,h=r+1,u=new Array(h),f=new Array(h);for(let d=0;d<h;++d){let g=0;switch(a[2]){case"start":case"jump-start":0===d&&(g=1);break;case"jump-both":d<h-1&&(g=1/h);break;case"jump-none":d>0&&(g=1/r)}const p=i[n]+s*(d/r),m=o*(d+g)/100;let y="";switch(e){case"fill":case"stroke":{const t=l[0].rgba,e=c[0].rgba,s=Tt(SvgAnimate.getSplitValue(t.r,e.r,m),SvgAnimate.getSplitValue(t.g,e.g,m),SvgAnimate.getSplitValue(t.b,e.b,m)),i=Tt(SvgAnimate.getSplitValue(t.a,e.a,m));y+=(""!==y?" ":"")+"#"+(s+("FF"!==i?i:""));break}case"points":for(let e=0;e<t;++e){const t=l[e],s=c[e];y+=(""!==y?" ":"")+SvgAnimate.getSplitValue(t.x,s.x,m)+","+SvgAnimate.getSplitValue(t.y,s.y,m)}break;default:for(let e=0;e<t;++e)y+=(""!==y?" ":"")+SvgAnimate.getSplitValue(l[e],c[e],m)}if(""===y)return null;u[d]=p,f[d]=y}return[u,f]}}}return null}static toFractionList(t,e=";",s=!0){let i=0;const a=Mt(t.split(e),t=>{const e=parseFloat(t);return isNaN(e)||s&&!(e>=i&&e<=1)?-1:(i=e,e)});return a.length>1&&(!s||0===a[0]&&a.some(t=>-1!==t))?a:[]}setCalcMode(t,e){const s=this.animationElement;if(s)switch(e||(e=Vt(s,"calcMode")||"linear")){case"discrete":{const e=this.keyTimes;if(0===e[0]&&2===e.length){const i=this.values;let a=[],n=[];for(let r=0,o=e.length-1;r<o;++r){const o=SvgAnimate.fromStepTimingFunction(s,t||this.attributeName,"step-end",e,i,r);o&&(a=a.concat(o[0]),n=n.concat(o[1]))}a.push(e.pop()),n.push(i.pop()),this._values=n,this._keyTimes=a,this._keySplines=[SvgAnimate.KEYSPLINE_NAME["step-end"]]}break}case"paced":this._keySplines=null;break;case"spline":this.keySplines=Mt(Vt(s,"keySplines").split(";"),t=>t.trim()).filter(t=>t);case"linear":{const t=this.keyTimes;if(0!==t[0]&&1!==Pt(t)){const t=this.values.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=s/(t-1);this._keyTimes=e,this._keySplines=null}break}}}convertToValues(t){const e=this.to;if(e){if(this.values=[this.from,e],t&&2===t.length){const e=this.keyTimes;if(2!==e.length||0===e[0]&&e[1]<=1)return void(this.keyTimes=t)}this.keyTimes=[0,1]}}setGroupOrdering(t){if(this.group.ordering=t,this.fillBackwards){const e=this.group.name;let s;for(let i=t.length-1;i>=0;--i){const a=t[i];if(s){if("forwards"!==a.fillMode){this.fillBackwards=!1;break}}else a.name===e&&(s=!0)}}}getIntervalEndTime(t,e){const s=this.getTotalDuration();if(t<s){const{duration:i,keyTimes:a}=this;let n=this.delay;for(;n+i<=t;)n+=i;return Math.min(n+(e?1:Pt(a)||0)*i,s)}return s}getTotalDuration(t){let e=this.iterationCount;return t&&-1===e&&(e=1),-1!==e?Math.min(this.delay+this.duration*e,this.end||1/0):1/0}set delay(t){this._delay=t;const e=this.animationElement,s=e&&Vt(e,"end");if(s){const e=Nt(Mt(s.split(";"),t=>SvgAnimation.parseClockTime(t)).filter(t=>!isNaN(t)))[0];if(!isNaN(e)){const{duration:s,iterationCount:i}=this;(-1===i||s>0&&e<s*i)&&(t>e?(this.end=e,-1===i&&(this.iterationCount=Math.ceil((e-t)/s))):this.duration=-1)}}}get delay(){return this._delay}set duration(t){super.duration=t}get duration(){const t=this._duration;return-1===t&&-1!==this._repeatDuration?this._repeatDuration:t}set to(t){this._to=t}get to(){return this._setterType?this.valueTo||this._to:this.setterType?this.values[0]:this._to}get from(){return this._from}set from(t){if(!this._values){const e=this.animationElement;if(e){if(""===this.to){const s=Vt(e,"by"),i=SvgBuild.parseCoordinates(s);if(i.length&&(t||(t=this.baseValue||""))){const e=SvgBuild.parseCoordinates(t),s=e.length;if(i.length===s){let t="";for(let a=0;a<s;++a)t+=(a>0?",":"")+(e[a]+i[a]);this.to=t}}}SvgBuild.parseCoordinates(this.to).length&&this.setAttribute("additive","sum")}}this._from=t}set iterationCount(t){this._iterationCount=isNaN(t)?1:t;const e=this.animationElement;e&&(-1!==this.iterationCount?(this.setAttribute("accumulate","sum"),this.fillFreeze="freeze"===Vt(e,"fill")):(this.accumulateSum=!1,this.fillFreeze=!1))}get iterationCount(){const t=this.duration;if(t>0){const e=this._iterationCount,s=this._repeatDuration;return-1!==s&&(-1===e||s<e*t)?s/t:e}return 1}set values(t){this._values=t,t&&t.length!==this.keyTimes.length&&(this._keyTimes=null,this._keySplines=null)}get values(){return this._values||(this._values=[])}set keyTimes(t){const e=this._values;e&&e.length!==t.length||!t.every(t=>t>=0&&t<=1)||(this._keyTimes=t)}get keyTimes(){return this._keyTimes||(this._keyTimes=[])}set keySplines(t){if(t&&t.length){const e=this.keyTimes.length-1;if(t.length>=e&&!t.every(t=>""===t||t===SvgAnimate.KEYSPLINE_NAME.linear)){const s=[];for(let i=0;i<e;++i){const e=Mt(t[i].split(/\s+/),t=>parseFloat(t));4===e.length&&!e.some(t=>isNaN(t))&&e[0]>=0&&e[0]<=1&&e[2]>=0&&e[2]<=1?s.push(e.join(" ")):s.push(SvgAnimate.KEYSPLINE_NAME.linear)}this._keySplines=s}}else this._keySplines=null}get keySplines(){return this._keySplines}set timingFunction(t){this._timingFunction=t?SvgAnimate.findTimingFunction(t):t}get timingFunction(){var t;return this._timingFunction||(null===(t=this.keySplines)||void 0===t?void 0:t[0])||""}set reverse(t){if(this.length&&t!==this._reverse){const t=this.keyTimes,e=this._keySplines,s=t.length,i=new Array(s);for(let e=s-1,a=0;e>=0;--e)i[a++]=1-t[e];if(this.keyTimes=i,this.values.reverse(),e){const t=[];for(let s=e.length-1;s>=0;--s){const i=Mt(e[s].split(" "),t=>parseFloat(t));t.push(4===i.length?Ft(i[2])+" "+Ft(i[3])+" "+Ft(i[0])+" "+Ft(i[1]):SvgAnimate.KEYSPLINE_NAME.linear)}this._keySplines=t}}this._reverse=t}get reverse(){return this._reverse}set alternate(t){this._alternate=t}get alternate(){return this._alternate}set setterType(t){this._setterType=t}get setterType(){if(this._setterType)return!0;if(this.animationElement&&0===this.duration){const t=this.keyTimes;return t.length>=2&&0===t[0]&&""!==this.values[0]}return!1}set length(t){0===t&&(this._values=null)}get length(){return this._values?this._values.length:0}get valueTo(){return this._values&&Pt(this._values)||""}get valueFrom(){return this.values[0]||""}get playable(){return!this.paused&&this.duration>0&&this.keyTimes.length>0}get fillReplace(){return super.fillReplace||-1===this.iterationCount}get fromToType(){const t=this.keyTimes;return 2===t.length&&0===t[0]&&1===t[1]}get evaluateStart(){const t=this.keyTimes;return t.length>0&&t[0]>0}get evaluateEnd(){const t=this.keyTimes;return t.length>0&&Pt(t)<1}}SvgAnimate.KEYSPLINE_NAME={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"};const{getNamedItem:Ot}=squared.lib.dom,{replaceMap:Lt}=squared.lib.util;class SvgAnimateTransform extends SvgAnimate{constructor(t,e){if(super(t,e),this.instanceType=98312,e){const t=Ot(e,"type");this.setType(t),this.setCalcMode(t)}}static toRotateList(t){const e=t.length,s=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(""===e)s[i]=[0,0,0];else{const t=SvgBuild.parseCoordinates(e);if(2===t.length&&(t[2]=0),3!==t.length)return null;s[i]=t}}return s}static toScaleList(t){const e=t.length,s=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(""===e)s[i]=[1,1,0,0];else{const t=SvgBuild.parseCoordinates(e);if(1===t.length&&(t[1]=t[0]),2===t.length&&(t[2]=0,t[3]=0),4!==t.length)return null;s[i]=t}}return s}static toTranslateList(t){const e=t.length,s=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(""===e)s[i]=[0,0];else{const t=SvgBuild.parseCoordinates(e);if(1===t.length&&(t[1]=0),2!==t.length)return null;s[i]=t}}return s}static toSkewList(t){const e=t.length,s=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(""===e)s[i]=[0];else{const t=SvgBuild.parseCoordinates(e);if(1!==t.length)return null;s[i]=t}}return s}expandToValues(){if(this.additiveSum){const{duration:t,keyTimes:e,iterationCount:s}=this;if(-1!==s&&t>0&&e.length){const i=t*s;t:{const{type:a,keySplines:n,values:r}=this,o=[],l=[],c=[];let h;for(let u=0,f=e.length;u<s;++u){u>0&&n&&c.push("");for(let d=0;d<f;++d){const g=SvgBuild.parseCoordinates(r[d]),p=g.length;if(!p)break t;{let r;switch(a){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===p?r=[g[0],0]:2===p&&(r=g);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===p?r=[g[0],g[0]]:2===p&&(r=g);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===p?r=[g[0],0,0]:3===p&&(r=g);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===p&&(r=g)}if(!r)break t;{let a=(e[d]+u)*t;if(h)for(let t=0,e=r.length;t<e;++t)r[t]+=h[t];u<s-1&&d===f-1&&(this.accumulateSum&&(h=r),--a),o.push(a/i),l.push(r.join(" ")),n&&d<f-1&&c.push(n[d])}}}}this.values=l,this.keyTimes=o,this.keySplines=c.length?c:null,this.duration=i,this.iterationCount=1,this.accumulateSum=!1}}}}setType(t){let e=null;switch(t){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement&&(e=SvgAnimateTransform.toTranslateList(this.values));break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement&&(e=SvgAnimateTransform.toScaleList(this.values));break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement&&(e=SvgAnimateTransform.toRotateList(this.values));break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement&&(e=SvgAnimateTransform.toSkewList(this.values));break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement&&(e=SvgAnimateTransform.toSkewList(this.values));break;default:return}e&&(this.values=Lt(e,t=>t.join(" "))),this.baseValue=C.typeAsValue(this.type)}set attributeName(t){}get attributeName(){return"transform"}}const{sortNumber:It,splitPairStart:qt}=squared.lib.util;function zt(t,e,s,i=0,a,n=!1,r=!1,o=0,l=!1,c){if(s){let h=t.get(e);h||(h=[],t.set(e,h)),h.push({time:e,value:s,animation:a,start:n,end:r,endTime:i,fillMode:o,infinite:l,valueFrom:c})}}class SvgAnimationIntervalMap{constructor(t,...e){var s;t=(e.length?t.filter(t=>e.includes(t.attributeName)):t.slice(0)).sort((t,e)=>t.delay===e.delay?e.group.id-t.group.id:t.delay-e.delay);const i={},a={},n=new Set,r=t.length;for(let e=0;e<r;++e)n.add(SvgAnimationIntervalMap.getKeyName(t[e]));for(const e of n){i[e]=new Map,a[e]=new Map;const s=qt(e,":"),n=t.filter(t=>t.fillBackwards&&t.attributeName===s).sort((t,e)=>e.group.id-t.group.id)[0];if(n){const t=n.delay;zt(a[e],0,n.values[0],t,n,0===t,!1,4)}}for(let e=0;e<r;++e){const s=t[e],i=SvgAnimationIntervalMap.getKeyName(s),n=a[i];if(s.baseValue&&!a[i][-1]&&zt(n,-1,s.baseValue),s.setterType){const{delay:t,duration:e}=s,i=s.fillReplace&&e>0;zt(n,t,s.to,i?t+e:0,s,i,!i,1),i&&zt(n,t+e,"",0,s,!1,!0,1)}else if(SvgBuild.isAnimate(s)&&s.duration>0){const t=-1===s.iterationCount,e=s.getTotalDuration();zt(n,s.delay,s.valueTo,e,s,!0,!1,0,t,s.valueFrom),t||s.fillReplace||zt(n,e,s.valueTo,0,s,!1,!0,s.fillForwards?2:1)}}for(const t in a){const e=It(Array.from(a[t].keys()));for(let s=0,n=e.length;s<n;++s){const n=e[s],r=a[t].get(n);for(let e=0;e<r.length;++e){const s=r[e],a=s.animation;if(""===s.value||a&&s.start&&SvgBuild.isAnimate(a)&&""===a.from){let n;for(const e of i[t].values())for(let t=0,s=e.length;t<s;++t){const s=e[t];if(a!==s.animation&&""!==s.value&&(-1===s.time||2===s.fillMode||1===s.fillMode)){n=s.value;break}}n?s.value=n:""===s.value&&r.splice(e--,1)}}r.length&&(r.sort((t,e)=>t.animation&&e.animation?t.fillMode===e.fillMode?e.animation.group.id-t.animation.group.id:e.fillMode-t.fillMode:0),i[t].set(n,r))}}for(const t in i)for(const[e,a]of i[t].entries())for(let n=0,r=a.length;n<r;++n){const r=a[n],o=r.animation;if(o)if(1===r.fillMode){const s=[];for(const[a,n]of i[t].entries())if(a<e)for(let t=0,e=n.length;t<e;++t){const e=n[t];if(e.start){const t=e.animation;t&&t.animationElement&&s.push(t)}}else for(let t=0;t<n.length;++t){const i=n[t];if(a>e)i.end&&s.includes(i.animation)&&n.splice(t--,1);else if(i.end){const e=i.animation;e&&e.animationElement&&e.group.id<o.group.id&&n.splice(t--,1)}}}else if(2===r.fillMode||r.infinite){let a;const n=o.group,r=n.ordering;if(r){const t=o.getTotalDuration(),e=n.name;for(let s=0,i=r.length;s<i;++s){const i=r[s];if(i.name===e)a=!0;else if(SvgAnimationIntervalMap.getGroupEndTime(i)>=t)break}}const l=[];for(const[n,r]of i[t].entries())if(!a&&n<e)for(let t=0,e=r.length;t<e;++t){const e=r[t];if(e.start){const t=e.animation;t&&l.push(t)}}else for(let t=0;t<r.length;++t){const i=r[t];if(n>e){const e=i.animation;(a||e&&(i.end&&l.includes(e)||!o.animationElement&&e.group.id<o.group.id))&&r.splice(t--,1)}else if(i.end){const e=undefined;((null===(s=i.animation)||void 0===s?void 0:s.group.id)||NaN)<o.group.id&&r.splice(t--,1)}}}}for(const t in i){const e=i[t];for(const[t,s]of e.entries())0===s.length&&e.delete(t)}this.map=i}static getGroupEndTime(t){return"infinite"===t.iterationCount?1/0:t.delay+t.duration*parseInt(t.iterationCount)}static getKeyName(t){return t.attributeName+(SvgBuild.isAnimateTransform(t)?":"+C.typeAsName(t.type):"")}has(t,e,s){const i=this.map[t];return void 0!==e?!(!i||!i.has(e))&&(!s||-1!==i.get(e).findIndex(t=>t.animation===s)):!!i}get(t,e,s){const i=this.map[t];if(i){let t;for(const[a,n]of i.entries()){if(!(a<=e))break;for(let i=0,r=n.length;i<r;++i){const r=n[i];if(""!==r.value&&(-1===r.time||r.end&&(2===r.fillMode||1===r.fillMode))||s&&r.start&&e!==a){t=r.value;break}}}return t}}paused(t,e){const s=this.map[t];if(s){let t=0;for(const[i,a]of s.entries()){if(!(i<=e))break;for(let s=0,i=a.length;s<i;++s){const i=a[s];if(i.start&&(i.infinite||0===i.fillMode&&i.endTime>e)){if(!i.animation){t=1;break}t=2}else if(i.end&&(2===i.fillMode||1===t&&1===i.fillMode)){t=0;break}}}return 0===t}return!0}evaluateStart(t,e){const s=t.values,i=s.length;if(i){const a=(t.reverse?s[i-1]:s[0])||this.get(t.attributeName,t.delay)||e||t.baseValue;a&&(t.reverse?(s[i-1]=a,t.to=a):(s[0]=a,t.from=a))}return s}}const{clamp:Xt,equal:Yt,multipleOf:Dt}=squared.lib.math,{hasBit:Wt,hasKeys:Ut,hasValue:Kt,isEqual:$t,isNumber:jt,joinArray:Ht,lastItemOf:Zt,plainMap:Qt,replaceMap:Jt,spliceArray:te,sortNumber:ee}=squared.lib.util;function se(t,e,s,i,a){let n=0,r,o,l;for(const[e,i]of t.entries()){if(s===e){o={key:e,value:i};break}if(s>n&&s<e&&void 0!==r){o={key:n,value:r},l={key:e,value:i};break}n=e,r=i}if(o&&l)ge(t,s,he(s,o.key,o.value,l.key,l.value),!0);else if(o)ge(t,s,o.value,!0);else if(!a){let a=i.get(e,s,!0);void 0!==a&&(a=ae(a,!0),""!==a&&ge(t,s,a))}}function ie(t){const e=new Set,s=t.length,i=t[s-1][0];for(let a=0;a<s;++a){const s=t[a];let n=s[0]/i;if(n>0){let t=7;do{const s=parseFloat(n.toString().substring(0,t));if(!e.has(s)){n=s;break}}while(++t)}s[0]=n,e.add(n)}return t}function ae(t,e){return"string"==typeof t&&(jt(t)?t=parseFloat(t):0===(t=SvgBuild.parsePoints(t)).length&&(t="")),e&&"string"==typeof t?"":t}function ne(t,e){let s;if(t)for(let i=0,a=t.length;i<a;++i){const a=t[i];if(!(a.time<=e))break;s=a.value}return s}function re(t,e,s,i,a){var n;const r=[],o=e.element.tagName;let l;switch(o){case"line":l=["x1","y1","x2","y2"];break;case"rect":l=["width","height","x","y"];break;case"polyline":case"polygon":l=["points"];break;case"circle":l=["cx","cy","r"];break;case"ellipse":l=["cx","cy","rx","ry"];break;default:return}const c=C.origin(e.element);for(let h=0,u=t.length;h<u;++h)t:{const[u,f]=t[h],d=[];for(let t=0,s=l.length;t<s;++t){const s=l[t];let a=f.get(s);if(void 0===a&&(a=null!==(n=ne(i[s],u))&&void 0!==n?n:e.getBaseValue(s)),void 0===a)break t;d.push(a)}let g,p;switch(o){case"line":g=[{x:d[0],y:d[1]},{x:d[2],y:d[4]}];break;case"rect":{const[t,e,s,i]=d;g=[{x:s,y:i},{x:s+t,y:i},{x:s+t,y:i+e},{x:s,y:i+e}];break}case"polygon":case"polyline":g=d[0];break;case"circle":case"ellipse":g=[{x:d[0],y:d[1],rx:d[2],ry:Zt(d)}]}switch(e.transformed&&(g=SvgBuild.applyTransforms(e.transformed,g,c)),s&&s.refitPoints(g),o){case"line":case"polyline":p=SvgBuild.drawPolyline(g,a);break;case"rect":case"polygon":p=SvgBuild.drawPolygon(g,a);break;case"circle":case"ellipse":{const{x:t,y:e,rx:s,ry:i}=g[0];p=SvgBuild.drawEllipse(t,e,s,i,a);break}}void 0!==p&&r.push({key:u,value:p})}return r}function oe(t,e,s){var i;const a=new Map;for(let n=0,r=e.length;n<r;++n){const r=e[n],o=new Map;for(const e in t){const a=null!==(i=t[e].get(r))&&void 0!==i?i:ne(s[e],r);void 0!==a&&o.set(e,a)}a.set(r,o)}return a}function le(t,e,s,i){e&&(t.set(s,e),void 0!==i&&t.set(i,e))}function ce(t,e,s,i,a){switch(t.alternate&&s%2!=0&&(e=e.slice(0).reverse()),t.attributeName){case"transform":if(t.additiveSum&&"string"==typeof a){const n=Jt(a.split(" "),t=>parseFloat(t)),r=Qt(e,t=>Jt(t.trim().split(" "),t=>parseFloat(t))),o=n.length;if(r.every(t=>t.length===o)){const e=r[i];t.accumulateSum||(s=0);for(let t=0;t<o;++t)e[t]+=n[t];for(let t=0,i=r.length;t<s;++t)for(let t=0;t<i;++t){const s=r[t];for(let t=0,i=s.length;t<i;++t)e[t]+=s[t]}return e.join(" ")}}return e[i];case"points":return SvgBuild.parsePoints(e[i]);default:{let n=parseFloat(e[i]);if(!isNaN(n)){if(t.additiveSum&&"number"==typeof a){n+=a,t.accumulateSum||(s=0);for(let t=0,i=e.length;t<s;++t)for(let t=0;t<i;++t)n+=parseFloat(e[t])}return n}}}return a||0}function he(t,e,s,i,a){if(t>e){if("number"==typeof s&&"number"==typeof a)return SvgAnimate.getSplitValue(s,a,(t-e)/(i-e));if("string"==typeof s&&"string"==typeof a){const n=Jt(s.split(" "),t=>parseFloat(t)),r=Jt(a.split(" "),t=>parseFloat(t)),o=n.length;if(o===r.length){let s="";for(let a=0;a<o;++a)s+=(a>0?" ":"")+he(t,e,n[a],i,r[a]);return s}}else if(Array.isArray(s)&&Array.isArray(a)){const n=[];for(let r=0,o=Math.min(s.length,a.length);r<o;++r){const o=s[r],l=a[r];n.push({x:he(t,e,o.x,i,l.x),y:he(t,e,o.y,i,l.y)})}return n}}return s}function ue(t,e,s,i,a,n,r,o,l,c,h,u,f,d){r<0&&(e-=r,r=0);const g=t.duration,p=e-(r+g*o),m=0===p?0===l?0:1:Xt(p/g);let y=-1,v=-1,S;for(let t=0,e=i.length;t<e;++t){if(-1!==y&&m<=i[t]){v=t;break}m>=i[t]&&(y=t)}return-1!==y&&-1!==v?S=he(m,i[y],ce(t,a,o,y,s),i[v],ce(t,a,o,v,s)):(v=-1!==y?y+1:i.length-1,S=ce(t,a,o,v,s)),pe(t,c=ge(u,c,S),n,v,h,f,d),[c,S]}function fe(t,e,s,i,a,n,r,o){const l=(t-e)/n;for(let t=1,e=i.length;t<e;++t){const e=i[t-1],n=i[t];if(l>=e&&l<=n)return _e(he(l,e,ce(s,a,r,t-1,o),n,ce(s,a,r,t,o)))}}function de(t,e,s,i,a,n,r,o,l,c,h){let u=r.length;o||(o=new Array(u-1).fill(""));const{delay:f,duration:d}=a,g=f+d*i,p=a.getTotalDuration(),m=g+(h?n[0]:1)*d,y=parseFloat(r[h?0:u-1]);let v=g;t:{u=c.length;for(let i=0;i<u;++i){const f=c[i];if(f!==a){const a=f.getTotalDuration();if(f.addState(2),a>v){const[S,b,k]=Be(f);me(t,e,s,f,l,S,b,k);let T=m;e:{let t,e=Ce(v,f.delay,f.duration)-1;const s=(s,i,c)=>{let u=h?v!==g||t?s%d/d:0:i===m?1:i%d/d,T=s===i?_e(ce(f,b,e,c,l)):fe(s,i,f,S,b,f.duration,e,l);if(T){u>0&&(T=Math.round((parseFloat(T)+y)/2).toString());const e=n.length;if(u!==n[e-1]||T!==r[e-1]){const l=t||0===u?k&&k[c]||f.timingFunction:"";if(h){!t&&u>0&&s===v&&(u+=.001);for(let t=0;t<e;++t)if(u<=n[t]){0===t||0===u?(n.unshift(u),r.unshift(T),o.unshift(l)):(n.splice(t,0,u),r.splice(t,0,T),o.splice(t,0,l));break}}else(i===a||i===m)&&i<p&&(u-=.001),n.push(u),r.push(T),o.push(l)}}};do{if(h)for(let t=i+1;t<u;++t){const e=c[t];if(e.delay>v){T=e.delay;break}}for(let i=0,n=S.length;i<n;++i){const n=Ve(f.delay,f.duration,S,e,i);if(n>=v&&(t||(s(n,v,i),t=!0),n>v)){if(h&&n>=m)break t;if(s(n,Math.min(n,a,m),i),n>=m)break t;if(v=n,n>=a){a<=p&&f.addState(8);break e}if(n>=T)break e}}}while(++e)}}}}}return[n,r,o]}function ge(t,e,s,i){if(""!==s){let a=t.get(e),n;if(void 0===a&&(a=t.get(e-1),n=!0),a!==s||i){if(!i){if("number"==typeof a&&Yt(s,a))return e;for(;e>0&&t.has(e);)++e}t.set(e,s)}else n&&!t.has(e)&&(t.delete(e-1),t.set(e,s))}return e}function pe(t,e,s,i,a,n,r){if(!Pe(SvgBuild.isAnimateTransform(t),a)){if(0===i)return;--i}const o=s&&s[i];o&&n.set(e,o),r&&ye(r,t,e,i)}function me(t,e,s,i,a,n,r,o){var l;if(0!==n[0]){let s;s=i.additiveSum?_e(a):(null===(l=ve(e,i.attributeName))||void 0===l?void 0:l.value.toString())||t.get(SvgAnimationIntervalMap.getKeyName(i),i.delay)||_e(a);const c=i.by;c&&jt(s)&&(s=(parseFloat(s)+c).toString()),n.unshift(0),r.unshift(s),o&&o.unshift(i.timingFunction)}if(Zt(n)<1){const e=t.get(SvgAnimationIntervalMap.getKeyName(i),i.delay)||_e(s[i.attributeName])||r[0];n.push(1),r.push(e),o&&o.unshift(i.timingFunction)}}function ye(t,e,s,i){var a;if(SvgBuild.asAnimateTransform(e)){const n=null===(a=e.transformOrigin)||void 0===a?void 0:a[i];n&&t.set(s,n)}}function ve(t,e){const s=t[e];return s&&Zt(s)}function Se(t,e,s,i,a){return void 0===i&&(i=e.delay),void 0===a&&(a=e.to),ge(t,i,s?a:ae(a))}function be(t,e){e&&t.push(e),t.sort((t,e)=>t.delay===e.delay?t.group.id-e.group.id:t.delay-e.delay);for(let e=0;e<t.length-1;++e)t[e].delay===t[e+1].delay&&t.splice(e--,1)}function ke(t,e){if(!e.hasState(8,32)){const s=t.indexOf(e);-1!==s&&t.splice(s,1),t.push(e),e.addState(2)}}function Te(t,e=1/0){t.sort((t,s)=>{const i=t.delay,a=t.delay;if(e!==1/0){if(e===i&&e!==a)return-1;if(e!==i&&e===a)return 1;if(i>e&&a<e)return 1;if(i<e&&a>e)return-1}return i!==a?a-i:s.group.id-t.group.id})}function Ae(t,e){e?-1!==e.iterationCount&&te(t,t=>t===e):te(t,t=>!!t.animationElement)}function xe(t,e){t.sort((t,s)=>{const i=undefined;if(t.getTotalDuration()<=e)return 1;const a=undefined;if(s.getTotalDuration()<=e)return-1;const n=t.delay,r=s.delay;return n===r?s.group.id-t.group.id:n===e?-1:r===e?1:n<e&&r<e?r-n:n-r})}function Ee(t,e){const s=t.get("x")||0,i=t.get("y")||0;return e?e.refitX(s)+" "+e.refitX(i):s+" "+i}function Re(t,e,s){s||(e.iterationCount=-1),e.from=e.valueFrom,e.to=e.valueTo,t.push(e)}function we(t,e){e.length&&te(t,t=>e.includes(t))}const Ve=(t,e,s,i,a)=>Math.round(t+(s[a]+i)*e),_e=t=>Array.isArray(t)?Qt(t,t=>t.x+","+t.y).join(" "):void 0!==t?t.toString():"",Pe=(t,e)=>Wt(e,t?16:2),Me=(t,e)=>Wt(e,t?8:1),Ne=t=>t.playable||t.animationElement&&-1!==t.duration,Be=t=>{var e;return[t.keyTimes.slice(0),t.values.slice(0),(null===(e=t.keySplines)||void 0===e?void 0:e.slice(0))||null]},Ce=(t,e,s)=>Math.floor(Math.max(0,t-e)/s);var Ge=t=>class extends t{getAnimateShape(t){const e=[],s=this.animations;for(let i=0,a=s.length;i<a;++i){const a=s[i];if(Ne(a))switch(a.attributeName){case"r":case"cx":case"cy":if(N.circle(t)){e.push(a);break}case"rx":case"ry":N.ellipse(t)&&e.push(a);break;case"x1":case"x2":case"y1":case"y2":N.line(t)&&e.push(a);break;case"points":(N.polyline(t)||N.polygon(t))&&e.push(a);break;case"x":case"y":case"width":case"height":N.rect(t)&&e.push(a)}}return e}getAnimateTransform(t){const e=[],s=this.animations;for(let i=0,a=s.length;i<a;++i){const a=s[i];if(SvgBuild.isAnimateTransform(a)&&a.duration>0&&(e.push(a),t&&SvgBuild.asAnimateMotion(a))){const e=t.framesPerSecond;e&&(a.framesPerSecond=e)}}return e}getAnimateViewRect(t){t||(t=this.animations);const e=[];for(let s=0,i=t.length;s<i;++s){const i=t[s];if(Ne(i))switch(i.attributeName){case"x":case"y":e.push(i)}}return e}animateSequentially(t,e,s,i){var a,n,r;let o=9,l;i&&(i.keyTimeMode&&(o=i.keyTimeMode),l=i.precision);const c=this.animations;for(const i of[t,e]){const t=i===e;if(!i||0===i.length||!t&&Wt(o,4)||t&&Wt(o,32))continue;const h=[],u={},f=new Set;let d=0;const g=t=>{var e;(u[e=t.attributeName]||(u[e]=[])).push(t),++d};{const t=[],e=i.length;for(let s=0;s<e;++s){const a=i[s];if(a.setterType)g(a);else{const n=a.getTotalDuration();for(let r=0;r<e;++r){const e=i[r];if(s!==r&&a.attributeName===e.attributeName&&a.group.id<e.group.id&&a.fillReplace&&!e.evaluateEnd)if(e.setterType){if(a.delay===e.delay){t[s]=a;break}}else if(!e.evaluateStart&&!e.evaluateEnd&&(a.delay===e.delay&&(!e.fillReplace||-1===e.iterationCount||n<=e.getTotalDuration())||e.fillBackwards&&a.delay<=e.delay&&(e.fillForwards||a.fillReplace&&n<=e.delay)||a.animationElement&&!e.animationElement&&(a.delay>=e.delay&&n<=e.getTotalDuration()||e.fillForwards))){t[s]=a;break}}}}const s=[];for(let a=0;a<e;++a){const e=i[a];t[a]?e.fillReplace?s.push(e):(e.setterType=!0,g(e)):e.setterType||(h.push(e),f.add(e.group.name))}we(c,s)}if(h.length+d>1||1===h.length&&(h[0].alternate||void 0!==h[0].end)){const e={},d={},g=new SvgAnimationIntervalMap(i),p={},m=new Map,y=t?new Map:null,v={},S=new Set,b={},k=new Map,T=t?new Map:null,A={},x={},E=new Map;let R=0,w=-1,V,_;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s.group.ordering;i&&te(i,t=>!f.has(t.name));const a=s.attributeName;let n=e[a];n||(n=new Map,e[a]=n,d[a]=[]);const r=s.delay,o=n.get(r)||[];o.push(s),d[a].push(s),n.set(r,o)}for(const t in e){const s=new Map,i=e[t],a=ee(Array.from(i.keys()));for(let t=0,e=a.length;t<e;++t){const e=a[t],n=i.get(e);for(let t=0,e=n.length;t<e;++t)R=Math.max(R,n[t].getTotalDuration(!0));s.set(e,n.reverse())}e[t]=s,d[t].reverse()}for(const i in e){const n=new Map;if(p[i]=n,!t){let t;s?t=s.getBaseValue(i):(t=this[i],void 0===t&&"getBaseValue"in this&&(t=this.getBaseValue(i))),Kt(t)&&(A[i]=t)}const r=u[i]||[],l=[],c=[],h=[];for(const[t,s]of e[i].entries())c.push(t),h.push(s);let f=-1,k=0,T=1/0,w,V=null,_;const P=(e,s)=>{if(S.add(e),e.addState(8),_=e,e.fillForwards){B(k,w,e.type,e);const{name:t,ordering:s}=e.group;if(s){const i=e.getTotalDuration();for(let e=0,a=s.length;e<a;++e){const a=s[e];if(a.name===t)return!0;if(SvgAnimationIntervalMap.getGroupEndTime(a)>=i)return!1}}}else{if(e.fillFreeze&&B(k,w,e.type,e),void 0!==s){let i=f;const a=M(k,k+1);void 0!==a&&e.fillReplace&&s>k&&0===l.length&&(i=ge(n,i,a),t&&le(E,e.type,i),w=a,f=i)}N()}return!1},M=(e,s)=>{var a;let o=null===(a=ve(x,i))||void 0===a?void 0:a.value;return te(r,t=>t.delay>=e&&t.delay<s,s=>{const i=s.to;s.animationElement&&Ae(l),0===l.length&&(w=i),B(s.delay,i,s.type,s),s.delay===e?o=t?i:ae(i):(f=Se(n,s,t),k=s.delay)}),o},N=(t,e)=>{l.length&&te(l,t=>t.getTotalDuration()<=k,s=>{if(s.addState(8),s.fillForwards&&(B(s.getTotalDuration(),s.valueTo,s.type,s),void 0!==t&&void 0!==e))for(let i=t,a=c.length;i<a;++i){i!==t&&(e=-1);const a=h[i];for(let t=e+1,i=a.length;t<i;++t){const e=a[t];s.group.id>e.group.id&&e.addState(8)}}})},B=(e,s,a=0,n)=>{t||(s=ae(s));const o=ve(x,i);if(""!==s&&(!o||e>=o.time)&&(x[i]||(x[i]=[])).push({key:a,value:s,time:e}),n&&SvgBuild.isAnimate(n)&&!n.fillReplace)if(n.fillForwards){te(r,t=>t.group.id<n.group.id||t.delay<e),l.length=0;for(let t=0,e=h.length;t<e;++t){const e=h[t];for(let t=0,s=e.length;t<s;++t){const s=e[t];s.group.id<n.group.id&&s.addState(8)}}}else n.fillFreeze&&Ae(l)},G=(t,e,s)=>{V&&!t&&(void 0===s&&(s=C.typeAsValue(V.type)),f=ge(n,e,s),e!==f&&le(E,V.type,f)),V=null},F=d[i].find(t=>t.fillBackwards);if(F){w=ce(F,F.values,0,0),f=ge(n,0,w),t&&(le(E,F.type,0),V=F);let e=!0;for(const t of d[i])if(t.group.id>F.group.id&&t.delay<=F.delay){e=!1;break}const s=F.getTotalDuration(),a=[];for(let t=0;t<c.length;++t){const i=h[t];for(let n=0;n<i.length;++n){const o=i[n];if(e){if(o===F&&(0!==t||0!==n)){i.splice(n--,1),c.unshift(F.delay),h.unshift([F]);continue}if(o.group.id<F.group.id&&(F.fillForwards||o.getTotalDuration()<=s)){o.fillForwards&&(o.setterType=!0,r.push(o)),a.push(o);continue}}o.animationElement&&o.delay<=F.delay&&(i.splice(n--,1),ke(l,o))}}for(let t=0;t<c.length;++t){const e=h[t];if(a.length)for(let t=0;t<e.length;++t)a.includes(e[t])&&e.splice(t--,1);0===e.length&&(h.splice(t,1),c.splice(t--,1))}F.addState(1)}if(!t){const t=A[i];x[i]||void 0===t||B(0,t,0),void 0===w&&(w=(null===(a=ve(x,i))||void 0===a?void 0:a.value)||t)}be(r);{let e;te(r,t=>t.delay<=c[0],s=>{const a=SvgBuild.isAnimate(s)&&s.fillForwards,r=s.delay;if(r<c[0]&&(!F||a))if(F&&a)B(r,s.to,s.type);else{const a=r-1;if(e)Se(n,e,t,a);else if(n.has(0))t||Se(n,s,t,a,w);else{const e=t&&SvgBuild.isAnimateTransform(s)?C.typeAsValue(s.type):A[i];void 0!==e&&(Se(n,s,t,0,e),Se(n,s,t,a,e))}f=Se(n,s,t),k=r,e=s}}),e&&Se(n,e,t,c[0]-1)}t:{for(let e=0,s=c.length;e<s;++e){let a=h[e],u=c[e];for(let d=0;d<a.length;++d){const p=a[d];if(p.hasState(8,32)||p.hasState(2)&&p.animationElement)continue;const v=-1===p.iterationCount,S=p.duration,_=p.iterationCount;let F,O,L;if(v)F=u+S;else if(F=p.getTotalDuration(),F<=f){p.fillReplace?p.addState(32):ke(l,p);continue}v?(O=Math.ceil((R-u)/S),L=0):(O=Math.ceil(_),L=_-Math.floor(_)),r.length&&k>0&&k<u&&M(k,u),-1!==f&&f<u&&(f=ge(n,u-1,w),k=u),T=1/0;const I=p.group.ordering;if(I&&I.length>1){let t=!0;for(let e=0,s=I.length;e<s;++e){const s=I[e];if(s.name===p.group.name){t=!1;break}if(!s.paused&&k<=s.delay&&s.attributes.includes(i))break}if(t)e:for(let t=e+1;t<s;++t){const e=h[t];for(let t=0,s=e.length;t<s;++t){const s=e[t];if(s.group.ordering){T=s.delay;break e}s.getTotalDuration()<=F?(s.fillFreeze&&be(r,s),s.addState(8)):s.delay<F&&ke(l,s)}}}else for(let t=e+1;t<s;++t){const e=c[t];if(e!==1/0){const s=h[t];if(s.length&&!s.every(t=>t.hasState(8,32))){T=e;break}}}const q=k;let z=f+1,X=Math.min(T,p.end||1/0),Y,D,W;if(p.animationElement&&r.length){const e=Math.min(T,F,X);if(Y=r.find(t=>t.delay>=k&&t.delay<=e),Y){switch(Y.delay){case k:w=Y.to,B(k,w,Y.type,Y),Y.group.id>p.group.id&&(t&&V&&G(p.additiveSum,Math.max(u-1,f)),f=Se(n,Y,t,Math.max(Y.delay,f),w),X=-1);break;case T:Y.addState(16);break;default:X=Y.delay,Y.addState(16)}te(r,t=>t!==Y),p.addState(2)}}if(X>f){t&&(V&&(G(p.additiveSum,Math.max(u-1,f)),z=f+1),w=C.typeAsValue(p.type),B(k,w,p.type));let r=u===1/0||(-1!==f||p.hasState(1))&&!(0===e&&0===d)||p.hasState(4);D=!0;e:{const t=ve(x,i);for(let e=Ce(k,u,S);e<O;++e){let i,c,h;if(p.evaluateStart||p.evaluateEnd){[i,c,h]=Be(p);const t=a.length;if(p.evaluateStart){const s=l.concat(a.slice(d+1,t)).filter(t=>t.animationElement&&t.delay<X),n=s.length;if(n){xe(s,k),[i,c,h]=de(g,x,A,e,p,i,c,h,w,s,!0);for(let t=0;t<n;++t){const e=s[t];e.hasState(2)&&a.includes(e)&&ke(l,e)}}}if(p.evaluateEnd&&p.getIntervalEndTime(k)<X&&(l.length||d<t-1)){const s=l.filter(t=>t.animationElement);for(let e=d+1;e<t;++e){const t=a[e];t.animationElement&&(s.includes(t)||s.push(t),ke(l,t))}s.length&&(Te(s,k),[i,c,h]=de(g,x,A,e,p,i,c,h,w,s,!1))}me(g,x,A,p,w,i,c,h)}else({keyTimes:i,values:c,keySplines:h}=p);for(let a=0,l=i.length;a<l;++a){const d=i[a];let g=-1,v=ce(p,c,e,a,w);if(e===O-1&&L>0)if(L===d)L=-1;else if(a===l-1)g=F,k=g,v=he(L,i[a-1],ce(p,c,e,a-1,w),d,v),L=-1;else if(L>d)for(let t=a+1;t<l;++t)if(L<=i[t]){g=F,k=g,v=he(L,d,v,i[t],ce(p,c,e,t,w)),L=-1;break}if(-1===g){if(g=Ve(u,S,i,e,a),g<0||g<f)continue;if(g===X)D=e===O-1&&a===l-1,k=g;else{const t=t=>[f,W]=ue(p,k,w,i,c,h,u,e,a,t,o,n,m,y);if(u<0&&-1===f)g>0&&(k=0,t(0));else{if(g>X){r&&f+1<X&&t(f),k=X,t(X+(X!==T||n.has(X-1)?0:-1)),D=!1;break e}if(r)p.hasState(1)&&(k=q),u>=f?(g=Math.max(u,f+1),k=u):g===f?(k=g,g=f+1):(t(f),k=Math.max(g,f)),r=!1;else{if(k=g,e>0&&0===a&&p.accumulateSum){pe(p,g,h,a,o,m,y),f=g;continue}g=Math.max(g,f+1)}}}}if(g>f&&(a===s-1&&!p.accumulateSum&&(e<O-1||p.fillReplace&&(!t||v!==t.value))&&--g,f=ge(n,g,v),pe(p,f,h,a,o,m,y),W=v),!D||-1===L)break e}}}N(e,d)}if(void 0!==W&&(w=W,t&&(le(E,p.type,z,f),V=p)),Y&&(Y.hasState(16)?(W=Y.to,f=Se(n,Y,t,Y.delay,W),k=Y.delay,B(k,W,Y.type,Y)):p.hasState(32)&&le(E,f,Y.type),Ae(l),D=!0),te(r,t=>t.delay>=q&&t.delay<=k,t=>{B(t.delay,t.to,t.type,t),t.animationElement&&Ae(l)}),v){if(!D){l.length=0,l.push(p);continue}if(!Y){b[i]=p;break t}}if(D){if(!v&&P(p,T))break t;for(let t=e;t<s;++t)if(c[t]<k){const e=h[t];for(let t=0,s=e.length;t<s;++t){const s=e[t],i=s.getTotalDuration();i>k&&!s.hasState(2,8,32)?ke(l,s):s.fillReplace||B(i,s.valueTo,s.type,s)}c[t]=1/0,e.length=0}if(l.length&&k<T){Te(l);const t=l.find(t=>t.delay<=k);t&&(t.removeState(2,1),t.addState(4),Ae(l,t),u=t.delay,a=[t],d=-1)}}else ke(l,p)}}if(l.length)for(Te(l);l.length;){const e=l.shift(),{delay:s,duration:a}=e,r=f-s;let c=1/0;const h=()=>{let[h,u,d]=Be(e);const v=Ce(k,s,a);if(l.length){if(e.evaluateStart){const t=l.slice(0);xe(t,k),[h,u,d]=de(g,x,A,v,e,h,u,d,w,t,!0)}e.evaluateEnd&&e.getIntervalEndTime(k)<c&&([h,u,d]=de(g,x,A,v,e,h,u,d,w,l,!1))}me(g,x,A,e,w,h,u,d);const S=f+1;let b=!1,T=Math.floor(r/a);const R=(t,a)=>ue(e,k,w,h,u,d,s,T,t,a,o,p[i],m,y);do{for(let t=0,i=h.length;t<i;++t){let r=Ve(s,a,h,T,t);if(!b&&r>=f&&([f,w]=R(t,f),b=!0),b)if(r>=c){if(c>f){const s=e.fillReplace||-1===e.iterationCount;[f,w]=R(t,c-(s?1:0)),s&&(w=ce(e,u,T,0,w),f=ge(n,c,w)),k=c}}else r>f&&(k=r,t===i-1&&r<c&&--r,w=ce(e,u,T,t,w),f=ge(n,r,w),pe(e,f,d,t,o,m,y))}}while(f<c&&++T);t&&le(E,e.type,S,f)};if(-1===e.iterationCount){r>0&&r%e.duration!=0&&(c=s+e.duration*Math.ceil(r/a),h()),b[i]=e;break t}if(c=Math.min(s+e.duration*e.iterationCount,e.end||1/0),c>f&&(h(),P(e)))break t}if(_&&_.fillReplace&&void 0===b[i]){let e=0,s;if(x[i]){const t=ve(x,i);t&&({key:e,value:s}=t)}else t?(e=Array.from(E.values()).pop(),s=C.typeAsValue(e)):s=A[i];void 0===s||$t(n.get(f),s)||(f=ge(n,f,s),t&&le(E,e,f))}}v[i]=f}{const e=new Set;let i=0;for(const t in p){let s=0;for(const i of p[t].keys())e.add(i),s=i;i=Math.max(i,s),null===(n=x[t])||void 0===n||n.sort((t,e)=>t.time-e.time)}if(Ut(b)){const t=[],s=[];for(const e in b){const i=b[e];t.push(i.delay),s.push(i.duration)}const a=t[0];if(0===S.size&&1===new Set(t).size&&1===new Set(s).size&&a===e.values().next().value)w=a;else if(s.length>1&&s.every(t=>t%250==0))i=Dt(s,i,t);else{const t=s[0];(i-a)%t!=0&&(i=t*Math.ceil(i/t))}}if(-1===w)for(const s in p){const a=b[s];if(a){let n=v[s];if(n<i){const r=p[s],l=a.delay,c=n+1;let h=Array.from(r.values()).pop();const[u,f,d]=Be(a);me(g,x,A,a,h,u,f,d);const S=u.length;let b=Math.floor((n-l)/a.duration);do{let t;for(let s=0;s<S;++s){let c=Ve(l,a.duration,u,b,s);!t&&c>=n&&([n,h]=ue(a,n,h,u,f,d,l,b,s,n,o,r,m,y),e.add(n),t=!0),t&&c>n&&(s===S-1&&c<i&&--c,h=ce(a,f,b,s,h),n=ge(r,c,h),pe(a,c,d,s,o,m,y),e.add(n))}}while(n<i&&++b);v[s]=n,t&&le(E,a.type,c,n)}}}const a=ee(Array.from(e));if(s||t){let t;for(const e in p){const s=p[e];if(!s.has(0)){const i=A[e];if(void 0!==i){const e=s.keys().next().value-1;s.set(0,i),s.set(e,i),a.includes(0)||(a.push(0),t=!0),a.includes(e)||(a.push(e),t=!0)}}}t&&ee(a)}if(!t)for(const e in p){const s=p[e],i=s.keys().next().value,n=s.values().next().value;for(let r=0,o=a.length;r<o;++r){const o=a[r];if(!(o<=v[e]))break;if(!s.has(o)){if(g.paused(e,o))if(o<i)s.set(o,n);else{let t=g.get(e,o);if(void 0!==t&&(t=ae(t,!0),""!==t)){s.set(o,t);continue}}se(s,e,o,g,t)}}}V=oe(p,a,x)}if(-1===w&&Ut(b)){const e={},s=[],i=[],a=[];for(const t in b){const e=b[t];a.push(e.duration),s.push(e)}const n=Dt(a);for(let t=0,a=s.length;t<a;++t){const a=s[t],l=a.attributeName;e[l]=new Map;let c=null!==(r=p[l].get(v[l]))&&void 0!==r?r:A[l];const[h,u,f]=Be(a);me(g,x,A,a,c,h,u,f);const d=h.length;let m=0,y=0;do{for(let t=0;t<d;++t){let s=Ve(0,a.duration,h,y,t);t===h.length-1&&s<n&&--s,c=ce(a,u,y,t,c),m=ge(e[l],s,c),pe(a,m,f,t,o,k,T),i.includes(m)||i.push(m)}++y}while(m<n)}if(s.every(t=>t.alternate)){let t=-1;for(const s in b){const a=e[s],r=Array.from(a.keys()),o=Array.from(a.values()).reverse();for(let e=0,s=r.length;e<s;++e){const s=r[e];if(0!==s){t=n+s;const r=k.get(s);r&&k.set(t,r),t=ge(a,t,o[e]),i.includes(t)||i.push(t)}}}}ee(i);for(const s in e){const a=e[s];for(let e=0,n=i.length;e<n;++e){const n=i[e];a.has(n)||se(a,s,n,g,t)}}_=oe(e,i,x)}if(V||_){we(c,h);const e=Array.from(E.entries()),i=Ht(h,t=>SvgBuild.isAnimateTransform(t)?C.typeAsName(t.type):t.attributeName,"-"),a=this.parent;for(const n of[V,_])if(n){const r=n===V,h=r?m:k,u=r?y:T;if(Pe(t,o)){const i=[];if(t){const t=[];if(r){const s=Array.from(n.entries());let i=e[0][1];for(let a=0,n=0,r=0,o=e.length;a<o;++a){const l=a<o-1?e[a+1][1]:-1;if(i!==l){const o=new Map;for(let t=r,l=s.length;t<l;++t){const l=s[t][0];if(l>=e[n][0]&&l<=e[a][0])o.set(l,new Map([[i,s[t][1].values().next().value]])),r=t;else if(l>e[a][0])break}t.push(o),i=l,n=a+1}}}else{if(!b.transform)continue;{const e=new Map;for(const[t,s]of n.entries())e.set(t,new Map([[b.transform.type,s.values().next().value]]));t.push(e)}}let s=0;for(let e=0,a=t.length;e<a;++e){const n=Array.from(t[e].entries()),o=n[0];let l=o[0];const f=o[1];1===n.length&&(e<a-1?n.push([t[e+1].keys().next().value,f]):n.push([l+1,f]));const d=n.length,g=n[d-1][0];let p=g-l;const m=new SvgAnimateTransform;m.type=f.keys().next().value;for(let t=0;t<d;++t){const e=n[t];if(i.push(h.get(e[0])||""),m.type!==SVGTransform.SVG_TRANSFORM_ROTATE){const s=u.get(e[0]);s&&((m.transformOrigin||(m.transformOrigin=[]))[t]=s)}e[0]-=l}for(const[t,e]of ie(n))m.keyTimes.push(t),m.values.push(e.values().next().value);l-=s,l>1?m.delay=l:1===l&&(p+1)%10==0&&++p,m.duration=p,m.keySplines=i,m.synchronized={key:e,value:""},s=g,Re(c,m,r)}}else{const t=Array.from(n.entries()),e=-1!==w?w:0;let o;for(let s=0,a=t.length;s<a;++s){const a=t[s];i.push(h.get(a[0])||""),a[0]-=e}if(s){const e=re(ie(t),s,a,x,l);if(!e)continue;o=new SvgAnimate,o.attributeName="d";for(let t=0,s=e.length;t<s;++t){const s=e[t];o.keyTimes.push(s.key),o.values.push(s.value.toString())}}else{const t=new SvgAnimateTransform;t.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;for(const[e,s]of n.entries()){const i=s.get("x")||0,n=s.get("y")||0;t.keyTimes.push(e),t.values.push(a?a.refitX(i)+" "+a.refitX(n):i+" "+n)}o=t}o.delay=e,o.keySplines=i,o.duration=Zt(t)[0],Re(c,o,r)}}else if(Me(t,o)){const o=Array.from(n.entries());for(let n=0,f=o.length-1;n<f;++n){const[f,d]=o[n],[g,p]=o[n+1];let m=i,y;if(t){const t=new SvgAnimateTransform;if(r)for(let s=0,i=e.length-1;s<i;++s){const i=e[s],a=e[s+1];if(i[1]===a[1]&&f>=i[0]&&g<=a[0]){t.type=i[1];break}if(g-f==1&&g===a[0]){t.type=a[1];break}}else b.transform&&(t.type=b.transform.type);if(0===t.type)continue;t.values=[d.values().next().value,p.values().next().value];const s=u.get(g);s&&(t.transformOrigin=[s]),y=t}else if(s){const t=re([[f,d],[g,p]],s,a,x,l);if(!t)continue;y=new SvgAnimate,y.attributeName="d",y.values=Jt(t,t=>t.value.toString())}else{const t=new SvgAnimateTransform;t.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,t.values=[Ee(d,a),Ee(p,a)],m+=n,y=t}r&&(y.delay=0===n?f:0),y.duration=g-f,y.keyTimes=[0,1],y.synchronized={key:n,value:m};const v=h.get(g);v&&(y.keySplines=[v]),Re(c,y,r)}}}}}}}};const{isPercent:Fe,parseAngle:Oe}=squared.lib.css,{getNamedItem:Le}=squared.lib.dom,{truncateFraction:Ie}=squared.lib.math,{isEqual:qe,isNumber:ze,iterateArray:Xe,lastItemOf:Ye,plainMap:De}=squared.lib.util,We=(t,e,s,i)=>t&&t.key===e&&t.rotate===i&&qe(t.value,s);class SvgAnimateMotion extends SvgAnimateTransform{constructor(t,e){if(super(t,e),this.path="",this.distance="0%",this.rotate="auto 0deg",this.motionPathElement=null,this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.instanceType=229384,this._offsetLength=0,this._keyPoints=[],this._offsetPath=null,e){this.setAttribute("path");const t=Le(e,"rotate");switch(t){case"auto":break;case"auto-reverse":this.rotate="auto 180deg";break;default:ze(t)&&(this.rotate=parseFloat(t)+"deg")}Xe(e.children,t=>{if("mpath"===t.tagName){let e=I(t);if(e&&(N.use(e)&&(e=I(e)),e&&N.shape(e)))return this.motionPathElement=e,!0}}),this.setCalcMode()}else if(t){const e=/path\("([^"]+)"\)/.exec(O(t,"offset-path"));e&&(this.path=e[1]);const s=O(t,"offset-distance");""!==s&&(this.distance=s);const i=O(t,"offset-rotate");""!==i&&"auto"!==i&&(this.rotate=i)}}setCalcMode(){const t=this.animationElement;if(t){const e=Le(t,"calcMode")||"paced";switch(e){case"paced":case"discrete":case"spline":super.setCalcMode("translate",e);break;case"linear":{const e=SvgAnimateTransform.toFractionList(Le(t,"keyPoints"),";",!1);let s=super.keyTimes;0===s.length&&-1!==this.duration&&(s=SvgAnimateTransform.toFractionList(Le(t,"keyTimes")),this.length=0,super.keyTimes=s),e.length===s.length&&(this._keyPoints=e);break}}}}addKeyPoint(t){if(!this._offsetPath){const e=t.key;if(e>=0&&e<=1){const s=super.keyTimes,i=this._keyPoints;if(s.length===i.length){const a=t.value;let n=Fe(a)?parseFloat(a)/100:ze(a)?parseFloat(a)/this.offsetLength:NaN;if(!isNaN(n)){n=Math.min(n,1);const a=s.findIndex(t=>t===e);-1!==a?(s[a]=t.key,i[a]=n):(s.push(t.key),i.push(n))}}}}}setOffsetPath(){if(!this._offsetPath&&this.path){let t=SvgBuild.toOffsetPath(this.path,this.rotate),e=t.length;if(e){const{duration:s,keyPoints:i,rotateData:a,framesPerSecond:n}=this;let r=1;if(s>=e){r=s/e;const i=e-1;for(let e=1;e<i;++e)t[e].key*=r;t[i].key=s}else if(s>0){const i=new Array(s),a=e/s;let n;for(let e=0;e<s;++e)n=t[Math.floor(e*a)],n.key=e,i[e]=n;const r=Ye(t);n.value!==r.value&&(r.key=s,i.push(r)),t=i,e=i.length}const o=n?1e3/n:0;if(i.length){const a=e-1,n=super.keyTimes,l=[];if(i.length>1){let e;for(let c=0,h=n.length-1;c<h;++c){const h=n[c],u=Ie(h*s),f=Ie((n[c+1]-h)*s),d=i[c],g=i[c+1];if(0===f){const s=u,{value:i,rotate:n}=t[Math.floor(g*a)];We(e,s,i,n)||(e={key:s,value:i,rotate:n},l.push(e))}else{let s=u,i=0;if(d===g){const{value:n,rotate:c}=t[Math.floor(d*a)];for(We(e,u,n,c)&&(i+=r,s+=o);i<f;i+=r){const t=u+i;t>=s&&(l.push({key:t,value:n,rotate:c}),i<f-1?s+=o:s=0)}}else{const n=Math.floor(Math.min(d,g)*a),r=Math.floor(Math.max(d,g)*a),c=[];for(let e=n;e<=r;++e)c.push(t[e]);d>g&&c.reverse();const h=c.length,p=f/h,m=c[0];for(We(e,u,m.value,m.rotate)&&(++i,s+=o);i<h;++i){const t=u+i*p;if(t>=s){const e=c[i];e.key=t,l.push(e),i<h-1?s+=o:s=0}}}Ye(l).key=u+f}}}else l.push(t[Math.floor(i[0]*a)]),0===n[0]&&(l[0].rotate=0);this._offsetPath=l}else if(o>0){const s=[];for(let i=0;i<e;i+=o)s.push(t[Math.floor(i)]);const i=Ye(t);Ye(s)!==i&&s.push(i),this._offsetPath=s}else this._offsetPath=t;if(a){t=this._offsetPath;for(let e=0,i=0,n=a.length-1;e<n;++e){const n=a[e],r=a[e+1],o=r.key,l=[];if(n.key===o)l.push(t[i++]);else{const e=Math.floor(Ie(o*s));do{const s=t[i];if(!(s&&s.key<=e))break;l.push(s)}while(++i)}const c=n.value,h=r.value,u=Oe(Ye(c.split(" "))),f=Oe(Ye(h.split(" ")));if(isNaN(u)||isNaN(f))continue;const d=c.startsWith("auto");if(c===h||u===f){const t=l.length;if(d){if(0!==u)for(let e=0;e<t;++e)l[e].rotate+=u}else for(let e=0;e<t;++e)l[e].rotate=u}else{const t=f-u,e=l.length-1,s=t/e;if(d){for(let t=0;t<e;++t)l[t].rotate+=u+t*s;l[e].rotate+=u+t}else{for(let t=0;t<e;++t)l[t].rotate=u+t*s;l[e].rotate=u+t}}}}this.keySplines=null,this.timingFunction=SvgAnimateTransform.KEYSPLINE_NAME.linear}}}reverseKeyPoints(){let t,e;return this.validKeyPoints()&&(e=this._keyPoints.slice(0).reverse(),t=De(super.keyTimes,t=>1-t).reverse()),{keyTimes:t,keyPoints:e}}validKeyPoints(){const t=this.keyPoints;return t.length>0&&t.length===super.keyTimes.length}set keyTimes(t){this.path||(super.keyTimes=t)}get keyTimes(){this.setOffsetPath();const t=this._offsetPath;if(t){const e=this.duration;return De(t,t=>t.key/e)}return super.keyTimes}set values(t){this.path||(super.values=t)}get values(){return this.setOffsetPath(),this._offsetPath?De(this._offsetPath,t=>`${t.value.x} ${t.value.y}`):super.values}set reverse(t){if(t!==this._reverse){const{keyTimes:e,keyPoints:s}=this.reverseKeyPoints();e&&s&&(this.length=0,this._keyPoints=s,super.keyTimes=e,super.reverse=t)}}get reverse(){return this._reverse}set alternate(t){const e=this.iterationCount;if(t!==this._alternate&&(-1===e||e>1)){const{keyTimes:s,keyPoints:i}=this.reverseKeyPoints();if(s&&i){let a=super.keyTimes,n=this.keyPoints;const r=a.length;if(-1===e){for(let t=0;t<r;++t)a[t]/=2,s[t]=.5+s[t]/2;a=a.concat(s),n=n.concat(i),this.duration*=2}else{const t=a.slice(0),o=n.slice(0);for(let l=0;l<e;++l)if(0===l)for(let t=0;t<r;++t)a[t]/=e;else{const c=l*(1/e),h=l%2==0?t.slice(0):s.slice(0);for(let t=0;t<r;++t)h[t]=Ie(c+h[t]/e);a=a.concat(h),n=n.concat(l%2==0?o:i)}this.duration=this.duration*e,this.iterationCount=1}this._keyTimes=a,this._keyPoints=n,this._alternate=t}}}get alternate(){return this._alternate}set parent(t){this._parent=t;const e=this.parentContainer;e&&e.requireRefit&&this.path&&(this.path=SvgBuild.transformRefit(this.path,{container:e}))}get parent(){return this._parent}get offsetPath(){return this._offsetPath}get playable(){return!this.paused&&-1!==this.duration&&!!this.path}get rotateValues(){return this.setOffsetPath(),this._offsetPath&&De(this._offsetPath,t=>t.rotate)}get keyPoints(){return this._keyPoints}get offsetLength(){return 0===this._offsetLength&&this.path?D(this.path):this._offsetLength}}var Ue=squared.lib.base.Pattern;const{isAngle:Ke,isCustomProperty:$e,hasCalc:je,getKeyframesRules:He,parseAngle:Ze,parseVar:Qe}=squared.lib.css,{getNamedItem:Je}=squared.lib.dom,{convertCamelCase:ts,convertWord:es,iterateArray:ss,replaceMap:is,sortNumber:as,splitPairEnd:ns}=squared.lib.util,rs={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},os=new Ue(`(ease|ease-(?:in|out|in-out)|linear|step-(?:start|end)|steps\\(\\d+,\\s+(?:start|end|jump-(?:start|end|both|none))\\)|cubic-bezier\\(${M}\\)),?\\s*`);function ls(t,e){const s=O(t,e);if("animation-timing-function"===e){const t=[];for(os.matcher(s);os.find();)t.push(os.group(1));return t}return s.split(/\s*,\s*/)}function cs(t){if("reverse"===t)return"auto 180deg";if(/^reverse\s+/.test(t)){const e=ns(t," ");return`auto ${Ke(e)?180+Ze(e,0):"0"}deg`}return t}function hs(t,e,s){var i;const a=null===(i=t["transform-origin"])||void 0===i?void 0:i.find(t=>t.key===s);if(a)return C.origin(e,a.value)}function us(t,e,s){var i;if(s){const i=t.querySelector(`:scope > ${e}[lang="${s}"]`);if(i)return i.textContent.trim()||""}return(null===(i=t.querySelector(":scope > "+e))||void 0===i?void 0:i.textContent.trim())||""}const fs=t=>t.sort((t,e)=>t.key-e.key);var ds=t=>class extends t{constructor(){super(...arguments),this.transformed=null}getTransforms(t=this.element){return SvgBuild.filterTransforms(C.parse(t)||SvgBuild.convertTransforms(t.transform.baseVal))}getAnimations(t=this.element){var e,s,i,a;const n=[];let r=0;const o=(t,e,s="")=>{""===s&&++r,t.delay=e,t.group={id:r,name:s},t.parent=this,n.push(t)};ss(t.children,e=>{var s;if(e instanceof SVGAnimationElement){const i=Je(e,"begin"),a=""!==i?as(is(i.split(";"),t=>SvgAnimation.parseClockTime(t)).filter(t=>!isNaN(t))):[0];if(0===a.length)return;const n=null===(s=this.viewport)||void 0===s?void 0:s.precision;switch(e.tagName){case"set":for(const s of a)o(new SvgAnimation(t,e),s);break;case"animate":for(const s of a)o(new SvgAnimate(t,e),s);break;case"animateTransform":for(const s of a){const i=new SvgAnimateTransform(t,e);SvgBuild.isShape(this)&&this.path&&(i.transformFrom=SvgBuild.drawRefit(t,this.parent,n)),o(i,s)}break;case"animateMotion":for(const s of a){const i=new SvgAnimateMotion(t,e),a=i.motionPathElement;a&&(i.path=SvgBuild.drawRefit(a,this.parent,n)),o(i,s)}}}});const l=ls(t,"animation-name"),c=l.length;if(0===c)return n;const h=(null===(e=this.viewport)||void 0===e?void 0:e.keyframesMap)||He(),u={},f=[],d=[];for(const e in rs){let s=ls(t,e);for(0===s.length&&s.push(rs[e]);s.length<c;)s=s.concat(s.slice(0));s.length=c,u[e]=s}for(let e=0;e<c;++e){const n=h.get(l[e]),c=SvgAnimation.parseClockTime(u["animation-duration"][e]);if(n&&!isNaN(c)&&c>0){++r;const h={},g={},p="paused"===u["animation-play-state"][e],m=SvgAnimation.parseClockTime(u["animation-delay"][e])||0,y=u["animation-iteration-count"][e],v=u["animation-fill-mode"][e],S=l[e]+"_"+e,b=[];let k=!0;d.push({name:S,attributes:b,paused:p,delay:m,duration:c,iterationCount:y,fillMode:v});for(const e in n){const s=parseFloat(e)/100,i=n[e];for(const e in i){let a=i[e];if(je(a)?a=F(t,ts(e),a):$e(a)&&(a=Qe(t,a)),a){const t=rs[e]?g:h;(t[e]||(t[e]=[])).push({key:s,value:a})}}}if(h.transform){const e=fs(h.transform);for(let i=0,a=e.length;i<a;++i){const a=e[i],n=a.key,r=hs(h,t,n)||C.origin(t);null===(s=C.parse(t,a.value))||void 0===s||s.forEach(t=>{const e=t.matrix;let s,i,a;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:s="translate",i=e.e+" "+e.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:s="scale",i=e.a+" "+e.d+" "+(r?r.x+" "+r.y:"0 0"),!r||0===n&&0===r.x&&0===r.y||(a={x:r.x*(1-e.a),y:r.y*(1-e.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:s="rotate",i=t.angle+" "+(r?r.x+" "+r.y:"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:s="skewX",i=t.angle.toString(),!r||0===n&&0===r.y||(a={x:r.y*e.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:s="skewY",i=t.angle.toString(),!r||0===n&&0===r.x||(a={x:0,y:r.x*e.b*-1});break;default:return}const o=h[s]||(h[s]=[]),l=o.findIndex(t=>t.key===n);if(-1!==l){const t=o[l];t.value=i,t.transformOrigin=a}else o.push({key:n,value:i,transformOrigin:a})})}delete h.transform,delete h["transform-origin"]}if("none"===O(t,"offset-path"))delete h["offset-distance"],delete h["offset-rotate"];else if(h["offset-rotate"]){const e=h["offset-rotate"];if(h["offset-distance"]||!h.rotate){let s=O(t,"offset-rotate");""!==s&&"auto"!==s||(s="auto 0deg"),fs(e);const i=e[0],a=e[e.length-1];0!==i.key&&e.unshift({key:0,value:s}),1!==a.key&&e.push({key:1,value:s});for(let t=1;t<e.length;++t){const s=e[t-1],i=e[t],a=cs(s.value),n=cs(i.value);if(s.value=a,i.value=n,a.split(" ").pop()!==n.split(" ").pop()){const r=a.startsWith("auto"),o=n.startsWith("auto");if(r&&!o||!r&&o){const r=(s.key+i.key)/2;e.splice(t++,0,{key:r,value:a}),e.splice(t++,0,{key:r,value:n})}}}if(!h["offset-distance"]){const s=new SvgAnimateMotion(t);s.duration=0,s.iterationCount=1,s.fillForwards=!0,s.addKeyPoint({key:0,value:s.distance}),o(s,m,S);for(let t=0,s=e.length;t<s;++t){const s=e[t],i=s.value;let a=Ze(i.split(" ").pop(),0);i.startsWith("auto")&&(a+=90),s.value=a+" 0 0"}h.rotate=e,delete h["offset-rotate"],k=!1}}else delete h["offset-rotate"]}for(const s in h){let n;switch(s){case"offset-rotate":continue;case"offset-distance":n=new SvgAnimateMotion(t),n.rotateData=h["offset-rotate"];break;case"rotate":case"scale":case"skewX":case"skewY":case"translate":n=new SvgAnimateTransform(t),n.setType(s);break;default:n=new SvgAnimate(t),n.attributeName=s}o(n,m,S);const r=h[s],l=u["animation-direction"][e],d=u["animation-timing-function"][e],T=r.length;if(fs(r),"offset-distance"===s){const t=n;0!==r[0].key&&t.addKeyPoint({key:0,value:t.distance});for(let e=0;e<T;++e)t.addKeyPoint(r[e]);1!==r.pop().key&&t.addKeyPoint({key:1,value:t.distance}),d&&(t.timingFunction=d)}else{b.push(s);const e=[],o=new Array(T),l=new Array(T);for(let t=0;t<T;++t){const s=r[t],{key:c,value:h}=s;o[t]=c,l[t]=h,k&&t<T-1&&e.push((null===(a=null===(i=g["animation-timing-function"])||void 0===i?void 0:i.find(t=>t.key===c))||void 0===a?void 0:a.value)||d);const u=s.transformOrigin;u&&SvgBuild.asAnimateTransform(n)&&((n.transformOrigin||(n.transformOrigin=[]))[t]=u)}if(k&&!e.every(t=>"linear"===t)){const i=[],a=[],r=[];for(let n=0,h=o.length;n<h;++n){const u=o[n],f=l[n];if(n<h-1){const h=e[n];if(""!==f&&h.startsWith("step")){const e=SvgAnimate.fromStepTimingFunction(t,s,h,o,l,n);if(e){const[t,s]=e,l=(o[n+1]-u)*c,f=t.length-(1===o[n+1]?1:0);for(let e=0;e<f;++e){let n=(u+t[e]*l)/c;i.includes(n)&&(n+=.001),i.push(n),a.push(s[e]),r.push(SvgAnimate.KEYSPLINE_NAME[h.includes("start")?"step-start":"step-end"])}continue}}r.push(SvgAnimate.findTimingFunction(h))}i.push(u),a.push(f)}n.values=a,n.keyTimes=i,n.keySplines=r}else n.values=l,n.keyTimes=o,k?n.keySplines=e:n.timingFunction=d}n.paused=p,n.duration=c,n.iterationCount="infinite"!==y?parseFloat(y):-1,n.fillForwards="forwards"===v||"both"===v,n.fillBackwards="backwards"===v||"both"===v,n.reverse=l.endsWith("reverse"),n.alternate=(-1===n.iterationCount||n.iterationCount>1)&&l.startsWith("alternate"),f.push(n)}}}d.reverse();for(let t=0,e=f.length;t<e;++t)f[t].setGroupOrdering(d);return n}getTitle(t){return us(this.element,"title",t)}getDesc(t){return!t&&Je(this.element,"aria-describedby")||us(this.element,"desc",t)}set name(t){this._name=t}get name(){const t=this._name;if(void 0===t){const t=this.element;let e=t.id.trim(),s,i;""!==e?(e=es(e,!0),P.has(e)||(s=e),i=e):i=t.tagName;let a=P.get(i)||0;return s?(P.set(s,a),this._name=s):(P.set(i,++a),this._name=i+"_"+a)}return t}get transforms(){return this._transforms||(this._transforms=this.getTransforms())}get animations(){return this._animations||(this._animations=this.getAnimations())}get visible(){const t=O(this.element,"visibility");return"hidden"!==t&&"collapse"!==t&&"none"!==O(this.element,"display")}get opacity(){return O(this.element,"opacity")||"1"}};const{isUserAgent:gs}=squared.lib.client;function ps(t){if("svg"===t.tagName){if(gs(4))return t.parentElement instanceof HTMLElement;if(gs(2))return!(t.parentElement instanceof HTMLElement)}return!1}var ms=t=>class extends t{setRect(){const t=this.parent;let{x:e,y:s,width:i,height:a}=this;t&&(e=t.refitX(e),s=t.refitY(s),i=t.refitSize(i),a=t.refitSize(a)),this.setBaseValue("x",e),this.setBaseValue("y",s),this.setBaseValue("width",i),this.setBaseValue("height",a)}getRectElement(){const t=this.rectElement||this.element;switch(t.tagName){case"svg":case"use":case"image":return t;default:return null}}set x(t){this._x=t}get x(){var t,e;return null!==(t=this._x)&&void 0!==t?t:(null===(e=this.getRectElement())||void 0===e?void 0:e.x.baseVal.value)||0}set y(t){this._y=t}get y(){var t,e;return null!==(t=this._y)&&void 0!==t?t:(null===(e=this.getRectElement())||void 0===e?void 0:e.y.baseVal.value)||0}set width(t){this._width=t}get width(){const t=this._width;if(void 0!==t)return t;{const t=this.getRectElement();return t?ps(t)?t.getBoundingClientRect().width:t.width.baseVal.value:0}}set height(t){this._height=t}get height(){const t=this._height;if(void 0!==t)return t;{const t=this.getRectElement();return t?ps(t)?t.getBoundingClientRect().height:t.height.baseVal.value:0}}};const{STRING:ys}=squared.lib.regex,{cloneObject:vs,iterateArray:Ss}=squared.lib.util,bs=new RegExp(ys.LENGTH_PERCENTAGE);function ks(t,e,s,i){if(t){const a=e.aspectRatio,n=t.aspectRatio;if(s&&i){vs(s,{target:a});const{width:e,height:r}=a;if(e>0&&r>0){const s=e/r;let o=n.width||t.viewBox.width,l=n.height||t.viewBox.height,c=NaN,h=NaN,u;0===o&&0===l&&(({width:o,height:l}=G(t.element)),n.width=o,n.height=l,u=!0);const f=o/l,d=o/e,g=l/r,p=O(i,"width"),m=O(i,"height");if(u)c=o,h=l;else{if(N.svg(i))try{c=i.width.baseVal.value,h=i.height.baseVal.value}catch(t){}c||h||(c=parseFloat(p),h=parseFloat(m))}const y=xs(p),v=xs(m),S=c/e,b=h/r;let k=y&&v;if(c>=e&&h>=r?(a.unit=Math.min(S,b),k=!1):(d!==g||u)&&(a.unit=Math.min(d,g)),y||v){if(c&&h){const{align:t,meetOrSlice:s}=i.preserveAspectRatio.baseVal;if(S===b)k&&(a.unit*=S),a.align=SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,e>r?a.alignX=!0:a.alignY=!0;else{switch(s){case SVGPreserveAspectRatio.SVG_MEETORSLICE_MEET:b<S?(k&&(r>=e&&r>=l?a.unit=b:a.unit*=b),a.alignX=!0):(k&&(e>=r&&e>=o?a.unit=S:a.unit*=S),a.alignY=!0);break;case SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE:b>S?(k&&(r>=e&&r>=l?a.unit=b:a.unit*=b),a.alignX=!0,a.alignY=r>l):(k&&(e>=r&&e>=o?a.unit=S:a.unit*=S),a.alignX=e>o,a.alignY=!0)}a.align=t}a.meetOrSlice=s}}else f>s?a.position.x=(o-l*s)/2:f<s&&(a.position.y=(l-o*(1/s))/2)}}const{parent:r,position:o,unit:l,x:c,y:h}=n;a.parent.x=c+c*(l-1),a.position.x*=n.unit,a.position.x+=o.x-r.x,a.parent.y=h+h*(l-1),a.position.y*=l,a.position.y+=o.y-r.y,a.unit*=l}}function Ts(t){do{if(SvgBuild.asSvg(t)&&t.documentRoot)return t;t=t.parent}while(t)}function As(t){do{if(t.hasViewBox())return t;t=t.parent}while(t)}const xs=t=>bs.test(t);class SvgContainer extends squared.lib.base.Container{constructor(t){super(),this.element=t,this.parent=null,this.instanceType=2,this.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1,meetOrSlice:SVGPreserveAspectRatio.SVG_MEETORSLICE_UNKNOWN,align:SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,alignX:!1,alignY:!1},this._clipRegion=[]}add(t,e){return t.parent=this,t.viewport=e||Ts(this),super.add(t)}build(t){let e=!0,s,i;t?(s=t.targetElement||this.element,i=t.precision,"targetElement"in(t=Object.assign({},t))&&delete t.targetElement,!1===t.initialize&&(e=!1)):s=this.element;const a=Ts(this);let n,r=null;a&&(({element:n,contentMap:r}=a),void 0===i&&(i=a.precision));const o=As(this),l=this.aspectRatio;let c;if(this.clear(),Ss(s.children,s=>{let i;if(N.svg(s))i=new squared.svg.Svg(s,!1),ks(o,i,s.viewBox.baseVal,s),c=!0;else if(N.g(s))i=new squared.svg.SvgG(s),ks(o,i);else if(N.use(s)){const t=I(s,n,r);if(t)if(N.symbol(t))i=new squared.svg.SvgUseSymbol(t,s),ks(o,i,t.viewBox.baseVal,t),c=!0;else if(N.g(t))i=new squared.svg.SvgUseG(t,s),ks(o,i);else if(N.image(t))i=new squared.svg.SvgImage(s,t);else if(N.shape(t)){const n=a&&a.findFill(s);n?(i=new squared.svg.SvgUseShapePattern(t,s,n),ks(o,i)):i=new squared.svg.SvgUseShape(t,s,e)}}else if(N.image(s))i=new squared.svg.SvgImage(s);else if(N.shape(s)){const t=a&&a.findFill(s);t?(i=new squared.svg.SvgShapePattern(s,t),ks(o,i)):i=new squared.svg.SvgShape(s,e)}i&&(this.add(i,a),i.build(t))}),SvgBuild.asSvg(this)&&(this.documentRoot||l.meetOrSlice))if(this.documentRoot)(l.x<0||l.y<0)&&this.clipViewBox(l.x,l.y,l.width,l.height,i,!0);else{const{x:t,y:e}=this.parent.aspectRatio;this.clipViewBox(t,e,this.width+t,this.height+e,i,!0)}else if(c&&this.hasViewBox()&&(0!==l.x||0!==l.y)){const{left:t,top:e}=SvgBuild.boxRectOf(this.getPathAll(!1)),s=this.refitX(l.x),a=this.refitY(l.y);(t<s||e<a)&&this.clipViewBox(t,e,this.refitSize(l.width),this.refitSize(l.height),i)}}hasViewBox(){return SvgBuild.asSvg(this)&&(!!this.element.viewBox.baseVal||this.documentRoot)||SvgBuild.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}clipViewBox(t,e,s,i,a,n){n&&(s-=t,i-=e,SvgBuild.asSvg(this)&&this.documentRoot?(t=t<0?-1*t:0,e=e<0?-1*e:0):(t*=-1,e*=-1)),this.clipRegion=SvgBuild.drawRect(s,i,t,e,a)}synchronize(t){this.each(e=>e.synchronize(t))}refitX(t){const e=this.aspectRatio;return(t-e.x)*e.unit-e.parent.x+e.position.x}refitY(t){const e=this.aspectRatio;return(t-e.y)*e.unit-e.parent.y+e.position.y}refitSize(t){return t*this.aspectRatio.unit}refitPoints(t){const e=this.aspectRatio.unit,s=t.length;for(let i=0;i<s;++i){const s=t[i];s.x=this.refitX(s.x),s.y=this.refitY(s.y),void 0!==s.rx&&void 0!==s.ry&&(s.rx*=e,s.ry*=e)}if(SvgBuild.asSvg(this)&&this.aspectRatio.meetOrSlice){const{align:e,alignX:i,alignY:a,parent:n}=this.aspectRatio,{width:r,height:o}=this,{top:l,right:c,bottom:h,left:u}=SvgBuild.minMaxOf(t,!0);let f=0,d=0;i&&(f=-1*n.x),a&&(d=-1*n.y);let g=f,p=d;const m=()=>r/2-(c+u)/2,y=()=>r-u-c+f,v=()=>o/2-(l+h)/2,S=()=>o-l-h+d;switch(e){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:i&&(g-=f),a&&(p-=d);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:i&&(g-=f),a&&(p+=v());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:i&&(g-=f),a&&(p+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:i&&(g+=m()),a&&(p-=d);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_NONE:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:i&&(g+=m()),a&&(p+=v());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:i&&(g+=m()),a&&(p+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:i&&(g+=y()),a&&(p-=d);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:i&&(g+=y()),a&&(p+=v());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:i&&(g+=y()),a&&(p+=S())}for(let e=0;e<s;++e){const s=t[e];s.x+=g,s.y+=p}}return t}getPathAll(t=!0){var e;const s=[];for(const i of t?this.cascade():this.children)if(SvgBuild.isShape(i)){const t=null===(e=i.path)||void 0===e?void 0:e.value;t&&s.push(t)}return s}set clipRegion(t){""!==t?this._clipRegion.push(t):this._clipRegion.length=0}get clipRegion(){return this._clipRegion.join(";")}get requireRefit(){const t=this.aspectRatio;return 0!==t.x||0!==t.y||1!==t.unit||0!==t.position.x||0!==t.position.y||0!==t.parent.x||0!==t.parent.y}}const{parseColor:Es}=squared.lib.color,{extractURL:Rs,getKeyframesRules:ws}=squared.lib.css,{getNamedItem:Vs}=squared.lib.dom,{cloneObject:_s}=squared.lib.util;function Ps(t){const e=[],s=t.getElementsByTagName("stop");for(let t=0,i=s.length;t<i;++t){const i=s[t],a=Es(Vs(i,"stop-color"),parseFloat(Vs(i,"stop-opacity")||"1"));a&&e.push({color:a,offset:parseFloat(Vs(i,"offset"))/100})}return e}function Ms(t,...e){const s={};for(let i=0,a=e.length;i<a;++i){const a=e[i],n=t[a];n&&(s[a]=n.baseVal.value,s[a+"AsString"]=n.baseVal.valueAsString)}return s}function Ns(t){return Object.assign({type:"linear",element:t,spreadMethod:t.spreadMethod.baseVal,colorStops:Ps(t),dimension:null},Ms(t,"x1","x2","y1","y2"))}function Bs(t){return Object.assign({type:"radial",element:t,spreadMethod:t.spreadMethod.baseVal,colorStops:Ps(t),dimension:null},Ms(t,"cx","cy","r","fx","fy","fr"))}class Svg extends(Ge(ms(ht(ds(SvgContainer))))){constructor(t,e=!0){super(t),this.element=t,this.documentRoot=e,this.instanceType=18,this.definitions={clipPath:new Map,pattern:new Map,gradient:new Map,contentMap:null},e&&(this.viewport=this),this.init()}build(t){this.documentRoot&&(this.keyframesMap=t.keyframesMap||ws()),this.precision=t.precision,this.setRect(),super.build(t)}synchronize(t){!this.documentRoot&&this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}findFill(t){if("string"!=typeof t&&(t=Rs(L(t,"fill"))||""),""!==t){const e=this.definitions.pattern.get(t);if(e)return e;const s=document.getElementById(t.substring(1));if(s instanceof SVGPatternElement)return s}}findFillPattern(t){let e;if("string"!=typeof t&&(t=Rs(L(t,"fillPattern"))||""),""!==t&&(e=this.definitions.gradient.get(t),!e)){const s=document.getElementById(t.substring(1));s&&(N.linearGradient(s)?e=Ns(s):N.radialGradient(s)&&(e=Bs(s)),e&&this.definitions.gradient.set(t,e))}return e}init(){const t=this.element;this.documentRoot&&(_s(t.viewBox.baseVal,{target:this.aspectRatio}),t.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(e=>{const s=I(e,t);if(s){const t=e.parentElement;t&&t.removeChild(e),s.appendChild(e)}})),this.setDefinitions(t),t.querySelectorAll("defs").forEach(t=>this.setDefinitions(t))}setDefinitions(t){const e=this.definitions;t.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(t=>{const s="#"+t.id.trim();"#"!==s&&(N.clipPath(t)?e.clipPath.has(s)||e.clipPath.set(s,t):N.pattern(t)?e.pattern.has(s)||e.pattern.set(s,t):N.linearGradient(t)?e.gradient.has(s)||e.gradient.set(s,Ns(t)):N.radialGradient(t)&&(e.gradient.has(s)||e.gradient.set(s,Bs(t))))})}set contentMap(t){this.definitions.contentMap=t}get contentMap(){return this.definitions.contentMap}get viewBox(){return this.element.viewBox.baseVal||{x:0,y:0,width:0,height:0}}}class SvgElement{constructor(t){this.element=t,this.parent=null,this.instanceType=4}build(t){}synchronize(t){}}const{STRING:Cs}=squared.lib.regex,{parseColor:Gs}=squared.lib.color,{extractURL:Fs,getFontSize:Os,hasCalc:Ls,hasEm:Is,isCustomProperty:qs,isLength:zs,isPercent:Xs,parseUnit:Ys,parseVar:Ds}=squared.lib.css,{truncate:Ws}=squared.lib.math,{convertCamelCase:Us,isNumber:Ks,joinArray:$s,plainMap:js}=squared.lib.util,Hs={polygon:/polygon\(([^)]+)\)/,inset:new RegExp(`inset\\(${Cs.LENGTH_PERCENTAGE}\\s?${Cs.LENGTH_PERCENTAGE}?\\s?${Cs.LENGTH_PERCENTAGE}?\\s?${Cs.LENGTH_PERCENTAGE}?\\)`),circle:new RegExp(`circle\\(${Cs.LENGTH_PERCENTAGE}(?:\\s+at\\s+${Cs.LENGTH_PERCENTAGE}\\s+${Cs.LENGTH_PERCENTAGE})?\\)`),ellipse:new RegExp(`ellipse\\(${Cs.LENGTH_PERCENTAGE}\\s+${Cs.LENGTH_PERCENTAGE}(?:\\s+at\\s+${Cs.LENGTH_PERCENTAGE}\\s+${Cs.LENGTH_PERCENTAGE})?\\)`)};var Zs=t=>class extends t{setStroke(){this.setAttribute("stroke"),this.setAttribute("stroke-width")}setPaint(t,e){this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setStroke(),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");const s=this.getAttribute("clip-path");if(""!==s&&"none"!==s){const i=Fs(s);if(i)this.clipPath=i;else if(t&&t.length)for(const i in Hs){const a=Hs[i].exec(s);if(a){const{top:s,right:n,bottom:r,left:o}=SvgBuild.boxRectOf(t),l=n-o,c=r-s,h=this.parent;switch(i){case"inset":{let t=0,i=this.convertLength(a[1],c),u=0,f=0;a[4]?(t=o+this.convertLength(a[4],l),u=n-this.convertLength(a[2],l),f=r-this.convertLength(a[3],c)):a[2]?(t=this.convertLength(a[2],l),u=n-t,f=r-(a[3]?this.convertLength(a[3],c):i),t+=o):(t=o+i,u=n-i,f=r-i),i+=s;const d=[{x:t,y:i},{x:u,y:i},{x:u,y:f},{x:t,y:f}];h&&h.refitPoints(d),this.clipPath=SvgBuild.drawPolygon(d,e);break}case"polygon":{const t=js(a[1].split(","),t=>{let e=o,i=s;return t.trim().split(" ").forEach((t,s)=>{0===s?e+=this.convertLength(t,l):i+=this.convertLength(t,c)}),{x:e,y:i}});h&&h.refitPoints(t),this.clipPath=SvgBuild.drawPolygon(t,e);break}default:if("circle"===i||"ellipse"===i){const t=l<c?l:c;let n,r;"circle"===i?(n=this.convertLength(a[1],t),r=n):(n=this.convertLength(a[1],l),r=this.convertLength(a[2],c));let u=o,f=s;const d=a.length;d>=4&&(u+=this.convertLength(a[d-2],t),f+=this.convertLength(a[d-1],t)),h&&(u=h.refitX(u),f=h.refitX(f),n=h.refitSize(n),r=h.refitSize(r)),this.clipPath=SvgBuild.drawEllipse(u,f,n,r,e)}}break}}}}setAttribute(t){const e=this.element;let s=this.getAttribute(t);if(""!==s){switch(t=Us(t),Ls(s)?s=F(e,t,s)||getComputedStyle(e)[t]:qs(s)&&(s=Ds(e,s)||getComputedStyle(e)[t]),t){case"strokeDasharray":s="none"!==s?$s(s.replace(/[,\s]+/g,",").split(","),t=>this.convertLength(t).toString(),", "):"";break;case"strokeDashoffset":case"strokeWidth":s=this.convertLength(s).toString();break;case"fill":case"stroke":{const i=Fs(s);if(i)this[t+"Pattern"]=i;else{let i;switch(s){case"none":case"transparent":case"rgba(0, 0, 0, 0)":return void(this[t]="none");case"currentcolor":case"currentColor":i=Gs(this.color||O(e,"color",!0));break;default:i=Gs(s)}i&&(this[t]=i.value)}return}}this[t]=s}}getAttribute(t){let e=O(this.element,t);if(""===e){if(this.patternParent)switch(t){case"fill-opacity":case"stroke-opacity":break;default:return e}let s=this.useParent||this.parent;for(;s&&(e=O(SvgBuild.isUse(s)?s.useElement:s.element,t),""===e);)s=s.parent}return e}convertLength(t,e){return Ks(t)?parseFloat(t):zs(t)?Ys(t,Is(t)?{fontSize:Os(this.element)}:void 0):Xs(t)?Math.round(("number"==typeof e?e:this.element.getBoundingClientRect()[e||"width"])*parseFloat(t)/100):0}resetPaint(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}set strokeWidth(t){this._strokeWidth=t}get strokeWidth(){var t;const e=this.stroke;if(""!==e&&"none"!==e){const e=this._strokeWidth;if(""!==e)return(null===(t=this.parent)||void 0===t?void 0:t.requireRefit)?Ws(this.parent.refitSize(parseFloat(e))):e}return""}};class SvgG extends(Zs(ds(SvgContainer))){constructor(t){super(t),this.element=t,this.instanceType=34}build(t){super.build(t),this.setPaint(this.getPathAll(),t&&t.precision)}}const{resolvePath:Qs}=squared.lib.util;class SvgImage extends(ms(ht(ds(SvgElement)))){constructor(t,e){super(t),this.element=t,this.imageElement=null,this.instanceType=8196,e&&(this.imageElement=e,this.rectElement=e)}build(){this.setRect()}renderStatic(t){let{x:e,y:s,width:i,height:a,parent:n}=this;const r=t?SvgBuild.filterTransforms(this.transforms,t):this.transforms,o=r.length;if(o){r.reverse();for(let t=0;t<o;++t){const n=r[t],o=n.matrix,l=e;e=B.applyX(o,l,s),s=B.applyY(o,l,s);let c=this.rotateAngle;switch(n.type){case SVGTransform.SVG_TRANSFORM_SCALE:i*=o.a,a*=o.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==n.angle&&(o.a<0&&(e+=o.a*i),o.c<0&&(e+=o.c*i),o.b<0&&(s+=o.b*a),o.d<0&&(s+=o.d*a),c?c+=n.angle:c=n.angle)}this.rotateAngle=c}this.transformed=r}if(n){if(this.imageElement){const t=this.element;e+=t.x.baseVal.value,s+=t.y.baseVal.value}e=n.refitX(e),s=n.refitY(s),i=n.refitSize(i),a=n.refitSize(a);do{if(SvgBuild.asSvg(n)||SvgBuild.isUse(n)){const{x:t,y:i}=n;n=n.parent,n&&(0!==t&&(e+=n.refitX(t)),0!==i&&(s+=n.refitY(i)))}else n=n.parent}while(n)}this.setBaseValue("x",e),this.setBaseValue("y",s),this.setBaseValue("width",i),this.setBaseValue("height",a)}set x(t){super.x=t}get x(){var t;return super.x||(null===(t=this.imageElement)||void 0===t?void 0:t.x.baseVal.value)||0}set y(t){super.y=t}get y(){var t;return super.y||(null===(t=this.imageElement)||void 0===t?void 0:t.y.baseVal.value)||0}set width(t){super.width=t}get width(){var t;return super.width||(null===(t=this.imageElement)||void 0===t?void 0:t.width.baseVal.value)||0}set height(t){super.height=t}get height(){var t;return super.height||(null===(t=this.imageElement)||void 0===t?void 0:t.height.baseVal.value)||0}get href(){const t=this.imageElement||this.element;return N.image(t)?Qs(t.href.baseVal):""}get transforms(){return this._transforms?this._transforms:this._transforms=this.imageElement?super.transforms.concat(this.getTransforms(this.imageElement)):super.transforms}get animations(){return this._animations?this._animations:this._animations=this.imageElement?super.animations.concat(this.getAnimations(this.imageElement)):super.animations}}const{getNamedItem:Js}=squared.lib.dom,{equal:ti,lessEqual:ei,multipleOf:si,offsetAngleX:ii,offsetAngleY:ai,relativeAngle:ni,truncateFraction:ri}=squared.lib.math,{cloneObject:oi,convertInt:li,convertFloat:ci}=squared.lib.util;function hi(t,e,s,i){const a=t[0],n=t[t.length-1];if(void 0!==s)switch(e){case"x":s-=a.start.x;break;case"x1":case"cx":return a.start.x=s,void(a.coordinates[0]=s);case"x2":return n.end.x=s,void(n.coordinates[0]=s)}if(void 0!==i)switch(e){case"y":i-=a.start.y;break;case"y1":case"cy":return a.start.y=i,void(a.coordinates[1]=i);case"y2":return n.end.y=i,void(n.coordinates[1]=i)}for(let e=0,a=t.length;e<a;++e){const a=t[e],{coordinates:n,value:r}=a;for(let t=0,e=0,o=n.length;t<o;t+=2,++e)void 0!==s&&(a.relative||(n[t]+=s),r[e].x+=s),void 0!==i&&(a.relative||(n[t+1]+=i),r[e].y+=i)}}function ui(t,e,s){for(let i=0,a=t.length;i<a;++i){const a=t[i];if("A"===a.key.toUpperCase()){if(void 0!==e){const s=e-a.radiusX,n=2*e*(a.coordinates[0]<0?-1:1);if(a.radiusX=e,a.coordinates[0]=n,a.start.x=n,a.end.x=n,1===i){const e=t[0];e.coordinates[0]-=s,e.start.x-=s,e.end.x-=s}}void 0!==s&&(a.radiusY=s)}}}function fi(t,e,s,i){const a=t.get("stroke-dashoffset",s,i);return a?parseFloat(a):e}function di(t,e,s,i){const a=t.get("stroke-dasharray",s,i);return a?SvgBuild.parseCoordinates(a):e}const gi=t=>t?t.start+" "+t.end:"1 1";class SvgPath extends(Zs(ht(SvgElement))){constructor(t){super(t),this.element=t,this.name="",this.value="",this.baseValue="",this.parent=null,this.transformed=null,this.instanceType=16388,this.init()}static extrapolate(t,e,s,i,a,n){const r=a&&a.parent,o=i&&i.length>0||r&&r.requireRefit,l=[];let c;for(let h=0,u=s.length;h<u;++h){if("d"===t)l[h]=s[h];else if("points"===t){const t=SvgBuild.convertPoints(SvgBuild.parseCoordinates(s[h]));t.length&&(l[h]=a&&N.polygon(a.element)?SvgBuild.drawPolygon(t,n):SvgBuild.drawPolyline(t,n))}else if(e){c||(c=SvgBuild.toPathCommands(e));const i=parseFloat(s[h]);if(!isNaN(i)){const e=h<u-1?oi(c,{deep:!0}):c;switch(t){case"x":case"x1":case"x2":case"cx":hi(e,t,i);break;case"y":case"y1":case"y2":case"cy":hi(e,t,void 0,i);break;case"r":ui(e,i,i);break;case"rx":ui(e,i);break;case"ry":ui(e,void 0,i);break;case"width":for(const t of[1,2]){const s=e[t];switch(s.key){case"m":case"l":case"h":s.coordinates[0]=i*(s.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":s.coordinates[0]=e[0].end.x+i}}break;case"height":for(const t of[2,3]){const s=e[t];switch(s.key){case"m":case"l":case"v":s.coordinates[1]=i*(s.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":s.coordinates[1]=e[0].end.y+i}}break;default:l[h]="";continue}l[h]=SvgBuild.drawPath(e,n)}}l[h]?o&&(l[h]=SvgBuild.transformRefit(l[h],{transforms:i,parent:a,container:r,precision:n})):l[h]=""}return l}build(t){var e;this.draw(t&&t.transforms?SvgBuild.filterTransforms(t.transforms,null===(e=t.exclude)||void 0===e?void 0:e[this.element.tagName]):null,t)}draw(t,e){let s,i;e&&({residualHandler:s,precision:i}=e);const a=this.element,n=this.parent,r=this.patternParent,o=!!n&&n.requireRefit,l=!!r&&2===r.patternContentUnits;let c;if(this.transformed=null,N.path(a)){if(c=this.getBaseValue("d"),t&&t.length||o||l){const e=SvgBuild.toPathCommands(c);if(e.length){let h=SvgBuild.toPathPoints(e);h.length&&(l&&r.patternRefitPoints(h),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,a,t)),t.length&&(h=SvgBuild.applyTransforms(t,h,C.origin(this.element)),this.transformed=t)),this.baseValue=SvgBuild.drawPath(SvgBuild.syncPath(o?oi(e,{deep:!0}):e,o?oi(h,{deep:!0}):h,!!this.transformed),i),o?(n.refitPoints(h),c=SvgBuild.drawPath(SvgBuild.syncPath(e,h,!!this.transformed),i)):c=this.baseValue)}}""===this.baseValue&&(this.baseValue=c)}else if(N.line(a)){let e=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];l&&r.patternRefitPoints(e),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,a,t)),t.length&&(e=SvgBuild.applyTransforms(t,e,C.origin(this.element)),this.transformed=t));const h=()=>SvgBuild.drawPolyline(e,i);this.baseValue=h(),o?(n.refitPoints(e),c=h()):c=this.baseValue}else if(N.circle(a)||N.ellipse(a)){const e=this.getBaseValue("cx"),h=this.getBaseValue("cy");let u,f;N.ellipse(a)?(u=this.getBaseValue("rx"),f=this.getBaseValue("ry")):(u=this.getBaseValue("r"),f=u);let d=[{x:e,y:h,rx:u,ry:f}];l&&r.patternRefitPoints(d),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,a,t,u,f)),t.length&&(d=SvgBuild.applyTransforms(t,d,C.origin(this.element)),this.transformed=t));const g=d[0],p=()=>SvgBuild.drawEllipse(g.x,g.y,g.rx,g.ry,i);this.baseValue=p(),o?(n.refitPoints(d),c=p()):c=this.baseValue}else if(N.rect(a)){let e=this.getBaseValue("x"),h=this.getBaseValue("y"),u=this.getBaseValue("width"),f=this.getBaseValue("height");if(o||t&&t.length){let d=[{x:e,y:h},{x:e+u,y:h},{x:e+u,y:h+f},{x:e,y:h+f}];l&&r.patternRefitPoints(d),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,a,t)),t.length&&(d=SvgBuild.applyTransforms(t,d,C.origin(this.element)),this.transformed=t)),this.baseValue=SvgBuild.drawPolygon(d,i),o?(n.refitPoints(d),c=SvgBuild.drawPolygon(d,i)):c=this.baseValue}else l&&(e=r.patternRefitX(e),h=r.patternRefitY(h),u=r.patternRefitX(u),f=r.patternRefitY(f)),c=SvgBuild.drawRect(u,f,e,h,i),this.baseValue=c}else if(N.polygon(a)||N.polyline(a)){let e=this.getBaseValue("points");l&&r.patternRefitPoints(e),t&&t.length&&("function"==typeof s&&([this.transformResidual,t]=s.call(this,a,t)),t.length&&(e=SvgBuild.applyTransforms(t,e,C.origin(this.element)),this.transformed=t));const h=()=>N.polygon(a)?SvgBuild.drawPolygon(e,i):SvgBuild.drawPolyline(e,i);this.baseValue=h(),o?(this.transformed||(e=SvgBuild.clonePoints(e)),n.refitPoints(e),c=h()):c=this.baseValue}else c="";return this.value=c,this.setPaint([c],i),c}extendLength(t,e){if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":{const s=SvgBuild.toPathCommands(this.value),i=s.length;if(i){const a=s[0],n=a.start,r=s[i-1],o=r.end,l=r.key.toUpperCase(),{leading:c,trailing:h}=t;let u;if("Z"!==l&&(n.x!==o.x||n.y!==o.y)){if(c>0){let t;if(a.value.length>1?t=a.value[1]:i>1&&(t=s[1].start),t){const e=a.coordinates;if(t.x===n.x)e[1]+=n.y>t.y?c:-1*c,u=!0;else if(t.y===n.y)e[0]+=n.x>t.x?c:-1*c,u=!0;else{const s=ni(t,n);e[0]-=ii(s,c),e[1]-=ai(s,c),u=!0}}}switch(l){case"M":case"L":if(h>0){let t;if(1===i){const e=a.value;e.length>1&&(t=e[e.length-2])}else{const e=r.value;t=e.length>1?e[e.length-2]:s[s.length-2].end}if(t){const e=r.coordinates;if(t.x===o.x)e[1]+=o.y>t.y?h:-1*h,u=!0;else if(t.y===o.y)e[0]+=o.x>t.x?h:-1*h,u=!0;else{const s=ni(t,o);e[0]+=ii(s,h),e[1]+=ai(s,h),u=!0}}}break;case"H":case"V":{const t=r.coordinates,e="H"===l?0:1;t[e]+=(c+h)*(t[e]>=0?1:-1),u=!0;break}}}if(u)return t.leading=c,t.trailing=h,t.path=SvgBuild.drawPath(s,e),t;break}}}return t}flattenStrokeDash(t,e,s,i,a){i||(i=s);let n=0,r,o,l,c,h,u=0;const f=t=>r[t%o];if(a)({dashArray:r,dashArrayTotal:l,extendedLength:c,startIndex:u}=a),o=r.length,a.items=[],a.leading=0;else{o=t.length,r=t.slice(0);const n=si([2,o]);l=0;for(let e=0;e<n;++e){const s=t[e%o];l+=s,e>=o&&r.push(s)}if(o=n,e>0){let t=f(0);for(;e-t>=0;)e-=t,t=f(++u);u%=o}else if(e<0){for(r.reverse();e<0;)e+=f(u++);u=o-u%o,r.reverse()}c=i,a={dashArray:r,dashArrayTotal:l,items:[],leading:0,trailing:0,startIndex:u,extendedLength:c,lengthRatio:s/(i||s)}}for(let t=0,s=0;;t+=s,++u){let i,r;s=f(u),t<e?(a.leading=e-t,i=0,r=s-a.leading):(i=t-e,r=s);const o=ri(i/c);if(h=ri(o+r/c),u%2==0?o<1&&(a.items.push({start:o,end:Math.min(h,1),length:s}),n+=s):n+=s,h>=1)break}for(a.trailing=ri((h-1)*c);n%l!=0;){const t=f(++u);a.trailing+=t,n+=t}return 0===a.items.length?a.items.push({start:1,end:1}):(a.leadingOffset=ri(a.items[0].start*c),a.leading*=a.lengthRatio,a.trailing*=a.lengthRatio),a}extractStrokeDash(t,e){const s=parseInt(this.strokeWidth);let i="",a="",n;if(s){let r=SvgBuild.parseCoordinates(this.strokeDasharray);if(r.length){const o=this.totalLength,l=this.pathLength||o,c=[];let h=li(this.strokeDashoffset),u=0,f;const d=(t,e,s,i=0)=>{const a=this.flattenStrokeDash(t,e,o,l);return 0===c.length&&(f=a),u=Math.max(u,a.items.length),c.push({items:a.items,delay:s,duration:i}),a.items};if(n=d(r,h,0),t){const g=t.slice(0).sort((t,e)=>{if(t.attributeName.startsWith("stroke-dash")&&e.attributeName.startsWith("stroke-dash")){if(t.delay!==e.delay)return t.delay-e.delay;if(SvgBuild.asSet(t)&&SvgBuild.asAnimate(e)||!t.animationElement&&e.animationElement)return-1;if(SvgBuild.asAnimate(t)&&SvgBuild.asSet(e)||t.animationElement&&!e.animationElement)return 1}return 0}),p=new SvgAnimationIntervalMap(g,"stroke-dasharray","stroke-dashoffset"),m=t=>{let e=h;for(let s=t,i=g.length;s<i;++s){const t=g[s];if("stroke-dasharray"===t.attributeName){const s=p.get("stroke-dashoffset",t.delay);s&&(e=parseFloat(s));for(const s of SvgBuild.asAnimate(t)?p.evaluateStart(t):[t.to])u=Math.max(u,this.flattenStrokeDash(SvgBuild.parseCoordinates(s),e,o,l).items.length)}}};let y=[],v,S;if(g.length>1)for(let t=0;t<g.length;++t){const e=g[t];p.has(e.attributeName,e.delay,e)||g.splice(t--,1)}for(let t=0;t<g.length;++t){const b=g[t];if(b.setterType){const t=(t,e)=>{d(t,e,b.delay,b.fillReplace&&b.duration>0?b.duration:0),S=!0};switch(b.attributeName){case"stroke-dasharray":r=SvgBuild.parseCoordinates(b.to),t(r,fi(p,h,b.delay));continue;case"stroke-dashoffset":h=li(b.to),t(di(p,r,b.delay),h);continue}}else if(SvgBuild.asAnimate(b)&&b.playable)switch(p.evaluateStart(b),b.attributeName){case"stroke-dasharray":{v||(m(t),v=!0);const e=fi(p,h,b.delay),s=this.flattenStrokeDash(di(p,r,b.delay),e,o,l).items,i=[],a=[];for(let t=0;t<u;++t){const e=new SvgAnimate(this.element);e.id=t,e.baseValue=gi(s[t]),e.attributeName="stroke-dasharray",e.delay=b.delay,e.duration=b.duration,e.iterationCount=b.iterationCount,e.fillMode=b.fillMode,a[t]=[],i.push(e)}const n=b.values;for(let t=0,s=n.length;t<s;++t){const s=this.flattenStrokeDash(SvgBuild.parseCoordinates(n[t]),e,o,l).items;for(let t=0;t<u;++t)a[t].push(gi(s[t]))}const{keyTimes:c,keySplines:f}=b,d=b.timingFunction;for(let t=0;t<u;++t){const e=i[t];e.values=a[t],e.keyTimes=c,f?e.keySplines=f:d&&(e.timingFunction=d)}if(b.fillReplace){const t=b.getTotalDuration(),e=this.flattenStrokeDash(di(p,r,t),fi(p,h,t),o,l).items;for(let t=0;t<u;++t)i[t].replaceValue=gi(e[t])}y=y.concat(i),S=!0;continue}case"stroke-dashoffset":{const t=b.duration,r=parseFloat(b.values[0]);let d=0,g=0,m=o,y=1,v;if(h===r||0!==b.delay||b.fillReplace||(f=this.flattenStrokeDash(f.dashArray,r,o,l),n=f.items,c[0].items=n,u=Math.max(u,f.items.length),h=r),(f.leading>0||f.trailing>0)&&(this.extendLength(f,e),f.path)){const t=SvgBuild.boxRectOf([this.value]);m=ri(D(f.path)),y=m/o,f.extendedLength=this.pathLength,f.extendedLength?f.extendedLength*=y:f.extendedLength=m;const e=undefined;n=this.flattenStrokeDash(f.dashArray,0,o,l,f).items,c[0].items=n,u=Math.max(u,n.length);const r=Math.ceil(s/2);i=f.path,a=SvgBuild.drawRect(t.right-t.left,t.bottom-t.top+2*r,t.left,t.top-r)}if(b.fillReplace&&-1!==b.iterationCount){const t=ci(p.get(b.attributeName,b.getTotalDuration()));if(t!==h){let e=Math.abs(t-h)%m/m;t>h&&(e=1-e),v=e.toString()}}const k=b.keyTimes,T=b.values,A=[],x=[];for(let e=0,s=k.length;e<s;++e){const s=0===e?h:parseFloat(T[e-1]),i=parseFloat(T[e]),a=Math.abs(i-s),n=k[e];if(0===a){if(e>0){d=n,x.push(d);const t=A.length;t?(A.push(A[t-1]),g=parseFloat(A[t-1])):(A.push("0"),g=0)}continue}const r=i>s,o=e>0?(n-k[e-1])*t:0,l=a*f.lengthRatio;let c=l/m,u=l,p=0;const y=()=>{const t=r?"1":"0";e>0&&A[A.length-1]===t||(x.push(0===d?0:ri(d)),A.push(t))},v=(t,e)=>{if(p=(u-t)/m,e){const t=ri(p);r?t>0&&(p=1-p):0===t&&(p=1)}},S=()=>{d=n,x.push(d);const t=ri(p);A.push(t.toString()),g=t>0&&t<1?p:0},b=e=>e/l*o/t;if(0===e)u%=m,v(0),r&&(p=1-p),S();else{if(g>0){const t=r?g:1-g,e=ri(t*m);if(ei(u,e)){v(0),r?p=g-p:p+=g,S();continue}A.push(r?"0":"1"),d+=b(e),x.push(ri(d)),c=ri(c-t),u=ri(u-e)}if(ti(u,m)&&(u=m),u>m){c=Math.floor(c);const t=c*m;t===u&&--c,v(t,!0)}else c=0,v(0,!0);for(;c>0;)y(),A.push(r?"0":"1"),d+=b(m),x.push(ri(d)),--c;y(),S()}}b.baseValue="0",b.replaceValue=v,b.values=A,b.keyTimes=x;const E=b.timingFunction;E&&(b.keySplines=null,b.timingFunction=E),S=!0;break}}y.push(b)}if(S){for(let t=0,e=c.length;t<e;++t){const{delay:s,duration:i,items:a}=c[t];if(a===n)for(let t=a.length;t<u;++t)a.push({start:1,end:1});else{const t=e>2?this.flattenStrokeDash(di(p,r,s-1),fi(p,h,s-1),o,l).items:n;for(let e=0;e<u;++e){const n=new SvgAnimation(this.element);n.id=e,n.attributeName="stroke-dasharray",n.baseValue=gi(t[e]),n.delay=s,n.duration=i,n.fillFreeze=0===i,n.to=gi(a[e]),y.push(n)}}}t=y}}}}return[t,n,i,a]}init(){const t=this.element;N.path(t)?this.setBaseValue("d"):N.line(t)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):N.rect(t)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):N.circle(t)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):N.ellipse(t)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(N.polygon(t)||N.polyline(t))&&this.setBaseValue("points",SvgBuild.clonePoints(t.points))}get transforms(){return this._transforms||(this._transforms=SvgBuild.filterTransforms(C.parse(this.element)||SvgBuild.convertTransforms(this.element.transform.baseVal)))}get pathLength(){return ci(Js(this.element,"pathLength"))}get totalLength(){return this.element.getTotalLength()}}class SvgPattern extends(ds(SvgContainer)){constructor(t,e){super(t),this.element=t,this.patternElement=e,this.instanceType=258}build(t){super.build(Object.assign(Object.assign({},t),{targetElement:this.patternElement,initialize:!1}))}get animations(){return[]}}class SvgShape extends(Ge(ds(SvgElement))){constructor(t,e=!0){super(t),this.element=t,this.instanceType=2052,this._path=null,e&&this.setPath()}setPath(){this.path=new SvgPath(this.element)}build(t){const e=this.path;e&&(e.parent=this.parent,e.build(Object.assign(Object.assign({},t),{transforms:this.transforms})))}synchronize(t){if(this.animations.length){const e=this.path;if(e){const s=t&&t.element;s?this.animateSequentially(this.getAnimateShape(s),void 0,e,t):this.animateSequentially(this.getAnimateShape(this.element),this.getAnimateTransform(t),e,t)}}}set path(t){this._path=t,t&&(t.name=this.name)}get path(){return this._path}}const{isPercent:pi}=squared.lib.css,{getNamedItem:mi}=squared.lib.dom,yi=t=>pi(t)?parseFloat(t)/100:parseFloat(t);class SvgShapePattern extends(Zs(ht(ds(SvgContainer)))){constructor(t,e){super(t),this.element=t,this.patternElement=e,this.instanceType=514,this.patternUnits="userSpaceOnUse"===mi(this.patternElement,"patternUnits")?1:2,this.patternContentUnits="objectBoundingBox"===mi(this.patternElement,"patternContentUnits")?2:1}build(t){const e=this.element,s=new SvgPath(e);s.build(Object.assign({},t));const i=s.value;if(i){const a=t&&t.precision;this.clipRegion=i,s.clipPath&&(this.clipRegion=s.clipPath);const n=[i];this.setPaint(n,a),this.drawRegion=SvgBuild.boxRectOf(n);const{drawRegion:r,fillOpacity:o,patternWidth:l,patternHeight:c,tileWidth:h,tileHeight:u}=this,f=2===this.patternUnits;let d=this.offsetX%h,g=this.offsetY%u,p=0,m=0,y=r.right,v=r.bottom;f&&(p=r.left,m=r.top,y-=p,v-=m),0!==d&&(d=h-d,y+=h),0!==g&&(g=u-g,v+=u);for(let s=0;v>0;++s){const i=this.patternElement,n=2===this.patternContentUnits,r=m+s*u-g;let f=y,S=0;do{const s=p+S++*h-d,g=new SvgPattern(e,i);g.build(Object.assign({},t)),g.cascade(e=>{if(SvgBuild.isShape(e)){e.setPath();const i=e.path;i&&(i.patternParent=this,n?i.refitBaseValue(s/l,r/c,a):i.refitBaseValue(s,r,a),i.build(Object.assign(Object.assign({},t),{transforms:e.transforms})),i.fillOpacity=(parseFloat(i.fillOpacity)*parseFloat(o)).toString(),i.clipPath=SvgBuild.drawRect(h,u,s,r,a)+(""!==i.clipPath?";"+i.clipPath:""))}}),this.add(g),f-=h}while(f>0);v-=u}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){s.fill="",s.fillOpacity="0",s.stroke=this.stroke,s.strokeWidth=this.strokeWidth;const t=new SvgShape(e,!1);t.path=s,this.add(t)}}}patternRefitX(t){return this.drawRegion?t*this.patternWidth:t}patternRefitY(t){return this.drawRegion?t*this.patternHeight:t}patternRefitPoints(t){if(this.drawRegion){const e=this.patternWidth,s=this.patternHeight;for(let i=0,a=t.length;i<a;++i){const a=t[i];if(a.x*=e,a.y*=s,void 0!==a.rx&&void 0!==a.ry)if(a.rx===a.ry){const t=Math.min(e,s);a.rx*=t,a.ry*=t}else a.rx*=e,a.ry*=s}}return t}get patternWidth(){const t=this.drawRegion;return t?t.right-t.left:0}get patternHeight(){const t=this.drawRegion;return t?t.bottom-t.top:0}get transforms(){if(!this._transforms){this._transforms=super.transforms;const t=SvgBuild.convertTransforms(this.patternElement.patternTransform.baseVal),e=t.length;if(e){const s=C.rotateOrigin(this.patternElement,"patternTransform"),i=this.patternWidth/2,a=this.patternHeight/2;for(let n=0;n<e;++n){const e=t[n];switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;s.length;){const t=s.shift();if(t.angle===e.angle){e.origin={x:i+t.x,y:a+t.y};break}}if(e.origin)break;default:e.origin={x:i,y:a}}}this._transforms=this._transforms.concat(SvgBuild.filterTransforms(t))}}return this._transforms}get offsetX(){const t=this.patternElement.x.baseVal;return 2===this.patternUnits?this.patternWidth*yi(t.valueAsString):t.value}get offsetY(){const t=this.patternElement.y.baseVal;return 2===this.patternUnits?this.patternHeight*yi(t.valueAsString):t.value}get tileWidth(){const t=this.patternElement.width.baseVal;return 2===this.patternUnits?this.patternWidth*yi(t.valueAsString):t.value}get tileHeight(){const t=this.patternElement.height.baseVal;return 2===this.patternUnits?this.patternHeight*yi(t.valueAsString):t.value}}class SvgUseG extends(ms(ht(SvgG))){constructor(t,e){super(t),this.element=t,this.useElement=e,this.instanceType=115,this.useParent=this,this.rectElement=e}build(t){this.setRect(),super.build(t)}}class SvgUseShape extends(Zs(ms(ht(SvgShape)))){constructor(t,e,s=!0){super(t,!1),this.element=t,this.useElement=e,this.instanceType=6149,this.useParent=this,this.rectElement=e,s&&this.setPath()}setPath(){const t=new SvgPath(this.element);t.useParent=this,this.path=t}build(t){super.build(t),this.setPaint(this.path&&[this.path.value],t&&t.precision)}synchronize(t){t=Object.assign(Object.assign({},t),{element:this.element}),this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}getTransforms(){return super.getTransforms(this.useElement).concat(super.getTransforms())}getAnimations(){return super.getAnimations(this.useElement).concat(super.getAnimations())}}class SvgUseShapePattern extends(Ge(ms(SvgShapePattern))){constructor(t,e,s){super(t,s),this.element=t,this.useElement=e,this.instanceType=1539,this.useParent=this,this.rectElement=e}synchronize(t){const e=this.animations.filter(t=>"x"===t.attributeName||"y"===t.attributeName||this.verifyBaseValue(t.attributeName,0)>0),s=this.getAnimateTransform(t);(e.length||s.length)&&this.animateSequentially(this.getAnimateViewRect(e),s,void 0,t),super.synchronize(t)}}class SvgUseSymbol extends(Zs(Ge(ms(ht(ds(SvgContainer)))))){constructor(t,e){super(e),this.symbolElement=t,this.useElement=e,this.instanceType=131,this.useParent=this,this.rectElement=e}build(t){this.setRect(),super.build(Object.assign(Object.assign({},t),{targetElement:this.symbolElement})),this.setPaint(this.getPathAll(),t&&t.precision)}synchronize(t){this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}get viewBox(){return this.symbolElement.viewBox.baseVal||{x:0,y:0,width:0,height:0}}}const vi={util:W};t.Svg=Svg,t.SvgAnimate=SvgAnimate,t.SvgAnimateMotion=SvgAnimateMotion,t.SvgAnimateTransform=SvgAnimateTransform,t.SvgAnimation=SvgAnimation,t.SvgAnimationIntervalMap=SvgAnimationIntervalMap,t.SvgBaseVal=ht,t.SvgBuild=SvgBuild,t.SvgContainer=SvgContainer,t.SvgElement=SvgElement,t.SvgG=SvgG,t.SvgImage=SvgImage,t.SvgPaint=Zs,t.SvgPath=SvgPath,t.SvgPattern=SvgPattern,t.SvgShape=SvgShape,t.SvgShapePattern=SvgShapePattern,t.SvgSynchronize=Ge,t.SvgUseG=SvgUseG,t.SvgUseShape=SvgUseShape,t.SvgUseShapePattern=SvgUseShapePattern,t.SvgUseSymbol=SvgUseSymbol,t.SvgView=ds,t.SvgViewRect=ms,t.lib=vi,Object.defineProperty(t,"__esModule",{value:!0})}));
