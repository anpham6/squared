!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t=t||self).squared=t.squared||{},t.squared.svg={}))}(this,(function(t){"use strict";const e=squared.lib,{convertAngle:s,getFontSize:i,getStyle:n,isLength:a,isPercent:r,parseUnit:o}=e.css,{getNamedItem:l}=e.dom,{convertRadian:c}=e.math,{CSS:h,STRING:u}=e.regex,{getElementCache:f}=e.session,{convertCamelCase:d,isString:p}=e.util,g=`(${u.DECIMAL})`,m={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},y={MATRIX:RegExp(`(matrix(?:3d)?)\\(${g}, ${g}, ${g}, ${g}, ${g}, ${g}(?:, ${g})?(?:, ${g})?(?:, ${g})?(?:, ${g})?(?:, ${g})?(?:, ${g})?(?:, ${g})?(?:, ${g})?(?:, ${g})?(?:, ${g})?\\)`,"g"),ROTATE:RegExp(`(rotate[XY]?)\\(${u.CSS_ANGLE}\\)`,"g"),SKEW:RegExp(`(skew[XY]?)\\(${u.CSS_ANGLE}(?:, ${u.CSS_ANGLE})?\\)`,"g"),SCALE:RegExp(`(scale[XY]?)\\(${g}(?:, ${g})?\\)`,"g"),TRANSLATE:RegExp(`(translate[XY]?)\\(${u.LENGTH_PERCENTAGE}(?:, ${u.LENGTH_PERCENTAGE})?\\)`,"g")},v=/rotate\((-?[\d.]+)(?:,? (-?[\d.]+))?(?:,? (-?[\d.]+))?\)/g;function b(t,e,s,n,l){a(n)?e[s]=o(n,i(t)):r(n)&&(e[s]=parseFloat(n)/100*l)}function S(t,e){var s;const i=t.dataset.baseValue;if(i)try{const t=JSON.parse(i);if(t)return(null===(s=t[e])||void 0===s?void 0:(""+s).trim())||""}catch(t){}return""}const k=(t,e)=>{var s;return(null===(s=f(t,"styleMap"))||void 0===s?void 0:s[d(e)])||""},T={svg:t=>"svg"===t.tagName,g:t=>"g"===t.tagName,symbol:t=>"symbol"===t.tagName,path:t=>"path"===t.tagName,shape:t=>t.tagName in m,image:t=>"image"===t.tagName,use:t=>"use"===t.tagName,line:t=>"line"===t.tagName,rect:t=>"rect"===t.tagName,circle:t=>"circle"===t.tagName,ellipse:t=>"ellipse"===t.tagName,polygon:t=>"polygon"===t.tagName,polyline:t=>"polyline"===t.tagName,clipPath:t=>"clipPath"===t.tagName,pattern:t=>"pattern"===t.tagName,linearGradient:t=>"linearGradient"===t.tagName,radialGradient:t=>"radialGradient"===t.tagName},x={applyX:(t,e,s)=>t.a*e+t.c*s+t.e,applyY:(t,e,s)=>t.b*e+t.d*s+t.f,clone:t=>({a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}),rotate(t){const e=c(t),s=Math.cos(e),i=Math.sin(e);return{a:s,b:i,c:-1*i,d:s,e:0,f:0}},skew:(t=0,e=0)=>({a:1,b:Math.tan(c(e)),c:Math.tan(c(t)),d:1,e:0,f:0}),scale:(t=1,e=1)=>({a:t,b:0,c:0,d:e,e:0,f:0}),translate:(t=0,e=0)=>({a:1,b:0,c:0,d:1,e:t,f:e})},A={create:(t,e,s=0,i=!0,n=!0)=>({type:t,matrix:e,angle:s,method:{x:i,y:n}}),parse(t,e){const n=e||t.style.getPropertyValue("transform");if(""!==n){const a=[];for(const r in y){const l=y[r];let c;for(;null!==(c=l.exec(n));){const n=c[1],r=/X$/.test(n),l=/Y$/.test(n);if(/^rotate/.test(n)){const t=s(c[2],c[3]),e=x.rotate(t);r?(e.a=1,e.b=0,e.c=0):l&&(e.b=0,e.c=0,e.d=1),a[c.index]=A.create(SVGTransform.SVG_TRANSFORM_ROTATE,e,t,!r,!l)}else if(/^skew/.test(n)){const t=l?0:s(c[2],c[3]),e=l?s(c[2],c[3]):c[4]&&c[5]?s(c[4],c[5]):0,i=x.skew(t,e);r?a[c.index]=A.create(SVGTransform.SVG_TRANSFORM_SKEWX,i,t,!0,!1):l?a[c.index]=A.create(SVGTransform.SVG_TRANSFORM_SKEWY,i,e,!1,!0):(a[c.index]=A.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign(Object.assign({},i),{b:0}),t,!0,!1),0!==e&&(a[c.index+1]=A.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign(Object.assign({},i),{c:0}),e,!1,!0)))}else if(/^scale/.test(n)){const t=l?void 0:parseFloat(c[2]),e=l?parseFloat(c[2]):!r&&c[3]?parseFloat(c[3]):t,s=x.scale(t,r?void 0:e);a[c.index]=A.create(SVGTransform.SVG_TRANSFORM_SCALE,s,0,!l,!r)}else if(/^translate/.test(n)){const e=i(t),s=o(c[2],e),n=!r&&c[3]?o(c[3],e):0,h=x.translate(l?0:s,l?s:n);a[c.index]=A.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,h,0)}else if(/^matrix/.test(n)){const s=A.matrix(t,e);s&&(a[c.index]=A.create(SVGTransform.SVG_TRANSFORM_MATRIX,s))}}l.lastIndex=0}const r=[];return a.forEach(t=>{t.fromCSS=!0,r.push(t)}),r}},matrix(t,e){y.MATRIX.lastIndex=0;const s=y.MATRIX.exec(e||n(t).transform||"");if(s)switch(s[1]){case"matrix":return{a:parseFloat(s[2]),b:parseFloat(s[3]),c:parseFloat(s[4]),d:parseFloat(s[5]),e:parseFloat(s[6]),f:parseFloat(s[7])};case"matrix3d":return{a:parseFloat(s[2]),b:parseFloat(s[3]),c:parseFloat(s[6]),d:parseFloat(s[7]),e:parseFloat(s[14]),f:parseFloat(s[15])}}},origin(t,e){void 0===e&&(e=V(t,"transform-origin"));const s={x:0,y:0};if(""!==e){const i=E(t);let n=0,a=0;if(i)n=i.width,a=i.height;else{const e=t.parentElement;if(e instanceof SVGGraphicsElement){const t=e.viewportElement;t&&(T.svg(t)||T.symbol(t))&&({width:n,height:a}=t.viewBox.baseVal)}}if(!n||!a){const e=t.getBoundingClientRect();n=e.width,a=e.height}const r=e.split(" ");switch(1===r.length&&r.push("center"),r[0]){case"0%":case"left":break;case"100%":case"right":s.x=n;break;case"center":r[0]="50%";default:b(t,s,"x",r[0],n)}switch(r[1]){case"0%":case"top":break;case"100%":case"bottom":s.y=a;break;case"center":r[1]="50%";default:b(t,s,"y",r[1],a)}}return s},rotateOrigin(t,e="transform"){const s=l(t,e),i=[];if(""!==s){let t;for(;null!==(t=v.exec(s));){const e=parseFloat(t[1]);0!==e&&i.push({angle:e,x:parseFloat(t[2])||0,y:parseFloat(t[3])||0})}v.lastIndex=0}return i},typeAsName(t){switch(t){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue(t){switch(t){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}};function _(t){const e=t.getBoundingClientRect();return e.x=e.left,e.y=e.top,e}function V(t,e,s=!0){let i;return i=s?l(t,e)||k(t,e)||S(t,e):k(t,e)||S(t,e)||l(t,e),p(i)||!s&&!Array.from(t.style).includes(e)||(i=n(t).getPropertyValue(e)),i||""}function R(t,e,s=!0){let i=t,n="";do{if(n=V(i,e,s),""!==n&&"inherit"!==n)break;i=i.parentElement}while(i&&!(i instanceof HTMLElement));return n}function w(t){const e=h.URL.exec(t);return e?e[1]:""}function M(t,e){const s=l(t,"href");if("#"===s.charAt(0)){const i=s.substring(1);let n;if(e)n=e;else for(n=t.parentElement;n&&n.parentElement instanceof SVGGraphicsElement;)n=n.parentElement;if(n){const t=n.querySelectorAll("*"),e=t.length;for(let s=0;s<e;s++){const e=t.item(s);if(e.id===i&&e instanceof SVGElement)return e}}else{const t=document.getElementById(i);if(t instanceof SVGElement)return t}}return null}function E(t){let e=t.parentElement;for(;e;){if(T.svg(e)||T.symbol(e)){const t=e.viewBox;if(t){const e=t.baseVal;if(e.width>0&&e.height>0)return e}}e=e.parentElement}}function P(t){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",t),e}function N(t){return P(t).getTotalLength()}var F=Object.freeze({__proto__:null,SVG:T,MATRIX:x,TRANSFORM:A,getDOMRect:_,getAttribute:V,getParentAttribute:R,getAttributeURL:w,getTargetElement:M,getNearestViewBox:E,createPath:P,getPathLength:N});const C=squared.lib,{isAngle:G,parseAngle:O}=C.css,{getNamedItem:L}=C.dom,{absoluteAngle:B,offsetAngleY:$,relativeAngle:z,truncate:I,truncateFraction:X,truncateString:q}=C.math,{CHAR:j,STRING:D,XML:Y}=C.regex,{convertWord:U,hasBit:K,isArray:W,isString:H}=C.util,Z=RegExp(D.DECIMAL,"g"),Q=/([A-Za-z])([^A-Za-z]+)?/g,J=new Map;class tt{static isContainer(t){return K(t.instanceType,2)}static isElement(t){return K(t.instanceType,4)}static isShape(t){return K(t.instanceType,2052)}static isAnimate(t){return K(t.instanceType,16392)}static isAnimateTransform(t){return K(t.instanceType,49160)}static asSvg(t){return 18===t.instanceType}static asG(t){return 34===t.instanceType}static asPattern(t){return 130===t.instanceType}static asShapePattern(t){return 258===t.instanceType}static asUsePattern(t){return 514===t.instanceType}static asImage(t){return 4100===t.instanceType}static asUse(t){return 10244===t.instanceType}static asUseSymbol(t){return 66===t.instanceType}static asSet(t){return 8===t.instanceType}static asAnimate(t){return 16392===t.instanceType}static asAnimateTransform(t){return 49160===t.instanceType}static asAnimateMotion(t){return 114696===t.instanceType}static setName(t){if(t){let e,s="";if(H(t.id)){const i=U(t.id,!0);J.has(i)||(s=i),e=i}else e=t.tagName;let i=J.get(e)||0;return""!==s?(J.set(s,i),s):(J.set(e,++i),e+"_"+i)}return J.clear(),""}static drawLine(t,e,s=0,i=0,n){return n&&(t=I(t,n),e=I(e,n),s=I(s,n),i=I(i,n)),`M${t},${e} L${s},${i}`}static drawRect(t,e,s=0,i=0,n){return n?(t=I(s+t,n),e=I(i+e,n),s=I(s,n),i=I(i,n)):(t+=s,e+=i),`M${s},${i} ${t},${i} ${t},${e} ${s},${e} Z`}static drawCircle(t,e,s,i){return tt.drawEllipse(t,e,s,s,i)}static drawEllipse(t,e,s,i,n){void 0===i&&(i=s);let a=2*s;return n?(t=I(t-s,n),e=I(e,n),s=I(s,n),i=I(i,n),a=I(a,n)):t-=s,`M${t},${e} a${s},${i},0,0,1,${a},0 a${s},${i},0,0,1,-${a},0`}static drawPolygon(t,e){return t.length?tt.drawPolyline(t,e)+"Z":""}static drawPolyline(t,e){let s="M";if(e)for(const i of t)s+=` ${I(i.x,e)},${I(i.y,e)}`;else for(const e of t)s+=` ${e.x},${e.y}`;return s}static drawPath(t,e){let s="";for(const e of t)switch(s+=(""!==s?" ":"")+e.key,e.key.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":s+=e.coordinates.join(",");break;case"H":s+=e.coordinates[0];break;case"V":s+=e.coordinates[1];break;case"A":s+=`${e.radiusX},${e.radiusY},${e.xAxisRotation},${e.largeArcFlag},${e.sweepFlag},${e.coordinates.join(",")}`}return e?q(s,e):s}static drawRefit(t,e,s){var i,n,a,r,o;let l;if(T.path(t)){if(l=L(t,"d"),null===(i=e)||void 0===i?void 0:i.requireRefit){const t=tt.getPathCommands(l);if(t.length){const i=tt.getPathPoints(t);i.length&&(e.refitPoints(i),l=tt.drawPath(tt.syncPathPoints(t,i),s))}}}else if(T.line(t)){const i=[{x:t.x1.baseVal.value,y:t.y1.baseVal.value},{x:t.x2.baseVal.value,y:t.y2.baseVal.value}];(null===(n=e)||void 0===n?void 0:n.requireRefit)&&e.refitPoints(i),l=tt.drawPolyline(i,s)}else if(T.circle(t)||T.ellipse(t)){let i,n;T.ellipse(t)?(i=t.rx.baseVal.value,n=t.ry.baseVal.value):(i=t.r.baseVal.value,n=i);const r=[{x:t.cx.baseVal.value,y:t.cy.baseVal.value,rx:i,ry:n}];(null===(a=e)||void 0===a?void 0:a.requireRefit)&&e.refitPoints(r);const o=r[0];l=tt.drawEllipse(o.x,o.y,o.rx,o.ry,s)}else if(T.rect(t)){let i=t.x.baseVal.value,n=t.y.baseVal.value,a=t.width.baseVal.value,o=t.height.baseVal.value;(null===(r=e)||void 0===r?void 0:r.requireRefit)&&(i=e.refitX(i),n=e.refitY(n),a=e.refitSize(a),o=e.refitSize(o)),l=tt.drawRect(a,o,i,n,s)}else if(T.polygon(t)||T.polyline(t)){const i=tt.clonePoints(t.points);(null===(o=e)||void 0===o?void 0:o.requireRefit)&&e.refitPoints(i),l=T.polygon(t)?tt.drawPolygon(i,s):tt.drawPolyline(i,s)}else l="";return l}static transformRefit(t,e,s,i,n){var a;const r=tt.getPathCommands(t);if(r.length){let o=tt.getPathPoints(r);if(o.length){const l=W(e);l&&(o=tt.applyTransforms(e,o,s&&A.origin(s.element))),(null===(a=i)||void 0===a?void 0:a.requireRefit)&&i.refitPoints(o),t=tt.drawPath(tt.syncPathPoints(r,o,l),n)}}return t}static getOffsetPath(t,e="auto 0deg"){const s=P(t),i=Math.ceil(s.getTotalLength()),n=[];if(i){const a=[],r=[];let o=0,l=0;if(G(e))o=O(e);else{const s=tt.getPathCommands(t);for(const t of s)switch(t.key.toUpperCase()){case"M":case"L":case"H":case"V":case"Z":for(const e of t.value)a.push(e),r.push(!1);break;case"C":case"S":case"Q":case"T":case"A":a.push(t.end),r.push(!0)}"auto 0deg"!==e&&(l=O(e.split(" ").pop()))}let c,h=!1,u=0,f=0;for(let t=0;t<=i;t++){const e=s.getPointAtLength(t);if(a.length){const t=a.findIndex(t=>{const s=""+t.x,i=""+t.y;return s===e.x.toPrecision(s.length-(s.includes(".")?1:0))&&i===e.y.toPrecision(i.length-(i.includes(".")?1:0))});if(-1!==t){const s=a[t+1];s?(h=r[t+1],h?(c=tt.centerPoints(a[t],s),o=0):(c=void 0,o=X(B(e,s)))):c=void 0,f=0,a.splice(0,t+1),r.splice(0,t+1)}}let i;h?(i=c?X(z(c,e)):0,u>0&&u%360==0&&0===Math.floor(i)&&(f=u),i+=f):i=o,i+=l,n.push({key:t,value:e,rotate:i}),u=Math.ceil(i)}}return n}static getPathCommands(t){t=t.trim();const e=[];let s,i=!0;for(;null!==(s=Q.exec(t));){let t=s[1];if(i&&"M"!==t.toUpperCase())break;const n=tt.parseCoordinates((s[2]||"").trim());let a,r,o,l,c,h,u;if(!i){const t=e[e.length-1];a=t.key.toUpperCase(),r=t.end}switch(t.toUpperCase()){case"M":i&&(t="M");case"L":if(n.length>=2){n.length%2!=0&&n.length--;break}continue;case"H":if(r&&n.length){n[1]="h"===t?0:r.y,n.length=2;break}continue;case"V":if(r&&n.length){const e=n[0];n[0]="v"===t?0:r.x,n[1]=e,n.length=2;break}continue;case"Z":if(i)continue;{const s=e[0].coordinates;n[0]=s[0],n[1]=s[1],n.length=2,t="Z";break}case"C":if(n.length>=6){n.length=6;break}continue;case"S":if(n.length>=4&&("C"===a||"S"===a)){n.length=4;break}continue;case"Q":if(n.length>=4){n.length=4;break}continue;case"T":if(n.length>=2&&("Q"===a||"T"===a)){n.length=2;break}continue;case"A":if(n.length>=7){o=n[0],l=n[1],c=n[2],h=n[3],u=n[4],n[0]=n[5],n[1]=n[6],n.length=2;break}continue;default:continue}const f=n.length;if(f>=2){const s=t===t.toLowerCase(),a=[];for(let t=0;t<f;t+=2){let e=n[t],i=n[t+1];s&&r&&(e+=r.x,i+=r.y),a.push({x:e,y:i})}e.push({key:t,value:a,start:a[0],end:a[a.length-1],relative:s,coordinates:n,radiusX:o,radiusY:l,xAxisRotation:c,largeArcFlag:h,sweepFlag:u}),i=!1}}return Q.lastIndex=0,e}static getPathPoints(t,e=!1){const s=[];let i=0,n=0;for(const a of t){const t=a.coordinates,r=t.length;for(let o=0;o<r;o+=2){a.relative?(i+=t[o],n+=t[o+1]):(i=t[o],n=t[o+1]);const r={x:i,y:n};"A"===a.key.toUpperCase()&&(r.rx=a.radiusX,r.ry=a.radiusY,e&&(t[o]>=0?r.y-=a.radiusY:r.y+=a.radiusY)),s.push(r)}a.relative&&(a.key=a.key.toUpperCase())}return s}static syncPathPoints(t,e,s=!1){t:{let i;for(const n of t){const a=n.coordinates;if(n.relative){if(!i)break;if(!s||"H"!==n.key&&"V"!==n.key){const t=a.length;for(let s=0,r=0;s<t;s+=2,r++){const t=e.shift();if(!t)break t;a[s]=t.x-i.x,a[s+1]=t.y-i.y,"a"===n.key&&void 0!==t.rx&&void 0!==t.ry&&(n.radiusX=t.rx,n.radiusY=t.ry),n.value[r]=t}n.key=n.key.toLowerCase()}else{const t=e.shift();if(!t)break t;a[0]=t.x,a[1]=t.y,n.value[0]=t,n.start=t,n.end=t,n.key="L",n.relative=!1}i=n.end}else{switch(n.key.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":{const s=a.length;for(let i=0,r=0;i<s;i+=2,r++){const s=e.shift();if(!s){t=[];break t}a[i]=s.x,a[i+1]=s.y,n.value[r]=s}break}case"A":{const s=e.shift();if(!s){t=[];break t}a[0]=s.x,a[1]=s.y,n.radiusX=s.rx,n.radiusY=s.ry,n.value[0]=s;break}}n.relative||(i=n.end)}}}return t}static filterTransforms(t,e){const s=[];for(const i of t){const t=i.type;if(void 0===e||!e.includes(t)){switch(t){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===i.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:{const t=i.matrix;if(1===t.a&&1===t.d)continue;break}case SVGTransform.SVG_TRANSFORM_TRANSLATE:{const t=i.matrix;if(0===t.e&&0===t.f)continue;break}}s.push(i)}}return s}static applyTransforms(t,e,s){t=t.slice(0).reverse();const i=tt.clonePoints(e);for(const e of t){const t=e.matrix;let n=0,a=0,r=0,o=0;if(s){const{x:i,y:l}=s,c=e.method;switch(e.type){case SVGTransform.SVG_TRANSFORM_SCALE:c.x&&(r=i*(1-t.a)),c.y&&(o=l*(1-t.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:c.y&&(a-=l);break;case SVGTransform.SVG_TRANSFORM_SKEWY:c.x&&(n-=i);break;case SVGTransform.SVG_TRANSFORM_ROTATE:c.x&&(n-=i,r=i+$(e.angle,i)),c.y&&(a-=l,o=l+$(e.angle,l))}}for(const s of i){const{x:i,y:l}=s;if(s.x=x.applyX(t,i,l+a)+r,s.y=x.applyY(t,i+n,l)+o,e.type===SVGTransform.SVG_TRANSFORM_SCALE){const{rx:e,ry:i}=s;void 0!==e&&void 0!==i&&(s.rx=x.applyX(t,e,i+a),s.ry=x.applyY(t,e+n,i))}}}return i}static convertTransforms(t){const e=t.numberOfItems,s=Array(e);for(let i=0,n=0;i<e;i++){const{type:e,matrix:a,angle:r}=t.getItem(i);s[n++]=A.create(e,a,r)}return s}static clonePoints(t){if(Array.isArray(t)){const e=t.length,s=Array(e);for(let i=0,n=0;i<e;i++){const{x:e,y:a,rx:r,ry:o}=t[i],l={x:e,y:a};void 0!==r&&void 0!==o&&(l.rx=r,l.ry=o),s[n++]=l}return s}{const e=t.numberOfItems,s=Array(e);for(let i=0,n=0;i<e;i++){const{x:e,y:a}=t.getItem(i);s[n++]={x:e,y:a}}return s}}static minMaxPoints(t){let{x:e,y:s}=t[0],i=e,n=s;const a=t.length;for(let r=1;r<a;r++){const a=t[r];a.x<e?e=a.x:a.x>i&&(i=a.x),a.y<s?s=a.y:a.y>n&&(n=a.y)}return[e,s,i,n]}static centerPoints(...t){const e=this.minMaxPoints(t);return{x:(e[0]+e[2])/2,y:(e[1]+e[3])/2}}static convertPoints(t){const e=t.length;if(e%2==0){const s=Array(e/2);for(let i=0,n=0;i<e;i+=2)s[n++]={x:t[i],y:t[i+1]};return s}return[]}static parsePoints(t){const e=[];for(const s of t.trim().split(j.SPACE)){const[t,i]=s.split(Y.SEPARATOR);e.push({x:parseFloat(t),y:parseFloat(i)})}return e}static parseCoordinates(t){const e=[];let s;for(;null!==(s=Z.exec(t));){const t=parseFloat(s[0]);isNaN(t)||e.push(t)}return Z.lastIndex=0,e}static getBoxRect(t){let e=[];for(const s of t)e=e.concat(tt.getPathPoints(tt.getPathCommands(s),!0));const s=this.minMaxPoints(e);return{top:s[1],right:s[2],bottom:s[3],left:s[0]}}}const{getNamedItem:et}=squared.lib.dom;function st(t,e,s,i,n){for(const a of t)a.x+=e,a.y+=s,void 0!==a.rx&&void 0!==a.ry&&(a.rx*=i,a.ry*=n)}var it=t=>class extends t{constructor(){super(...arguments),this._baseVal={}}setBaseValue(t,e){if(void 0!==e){if(this.verifyBaseValue(t,e))return this._baseVal[t]=e,!0}else switch(t){case"d":return this._baseVal[t]=et(this.element,"d"),!0;case"points":{const e=this.element[t];if(Array.isArray(e))return this._baseVal[t]=tt.clonePoints(e),!0;break}default:{const e=this.element[t];if(e){const s=e.baseVal;if(s)return this._baseVal[t]=s.value,!0}break}}return!1}getBaseValue(t,e){var s;return null!=(s=this._baseVal[t])?s:this.setBaseValue(t)?void 0:e}refitBaseValue(t,e,s,i=1,n=1){const a=this._baseVal;for(const r in a){const o=a[r];if("string"==typeof o){if("d"===r){const l=tt.getPathCommands(o),c=tt.getPathPoints(l);st(c,t,e,i,n),a[r]=tt.drawPath(tt.syncPathPoints(l,c),s)}}else if("number"==typeof o)switch(r){case"cx":case"x1":case"x2":case"x":a[r]+=t;break;case"cy":case"y1":case"y2":case"y":a[r]+=e;break;case"r":a[r]*=Math.min(i,n);break;case"rx":case"width":a[r]*=i;break;case"ry":case"height":a[r]*=n}else Array.isArray(o)&&"points"===r&&st(o,t,e,i,n)}}verifyBaseValue(t,e){switch(t){case"d":return"string"==typeof e;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof e;case"points":return Array.isArray(e)}}};const nt=squared.lib,{getFontSize:at,isLength:rt,parseUnit:ot}=nt.css,{getNamedItem:lt}=nt.dom,{capitalize:ct,hasBit:ht,isNumber:ut,isString:ft,optionalAsString:dt}=nt.util,pt=/-?\d+ms$/,gt=/-?\d+s$/,mt=/-?\d+min$/,yt=/-?\d+(.\d+)?h$/,vt=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/;class bt{constructor(t,e){if(this.element=null,this.baseValue="",this.fillMode=0,this.synchronizeState=0,this.paused=!1,this.animationElement=null,this._attributeName="",this._duration=-1,this._delay=0,this._to="",this._dataset={},t){const e=t.dataset;for(const t in e){const s=e[t];if(ft(s))try{this._dataset[t]=JSON.parse(s)}catch(t){}}this.element=t}if(e){this.animationElement=e,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");const t=lt(e,"dur");""!==t&&"indefinite"!==t&&(this.duration=bt.convertClockTime(t))}}static convertClockTime(t){let e=0,s=0;if(ut(t))e=parseInt(t);else if(pt.test(t))s=parseFloat(t);else if(gt.test(t))e=parseFloat(t);else if(mt.test(t))e=60*parseFloat(t);else if(yt.test(t))e=60*parseFloat(t)*60;else{const i=vt.exec(t);i&&(i[2]&&(e+=60*parseInt(i[2])*60),i[3]&&(e+=60*parseInt(i[3])),i[4]&&(e+=parseInt(i[4])),i[5]&&(s=parseInt(i[5])*(i[5].length<3?Math.pow(10,3-i[5].length):1)),i[1]&&(e*=-1,s*=-1))}return 1e3*e+s}setAttribute(t,e){const s=this.animationElement;if(s){const i=lt(s,t);""!==i&&(ft(e)?(e=e.trim(),this[t+ct(e)]=i===e):this[t]=i)}}addState(...t){for(const e of t)ht(this.synchronizeState,e)||(this.synchronizeState|=e)}removeState(...t){for(const e of t)ht(this.synchronizeState,e)&&(this.synchronizeState^=e)}hasState(...t){return t.some(t=>ht(this.synchronizeState,t))}setFillMode(t,e){const s=ht(this.fillMode,e);t?s||(this.fillMode|=e):s&&(this.fillMode^=e)}set attributeName(t){var e,s;if("transform"!==t&&!ft(this.baseValue)){let i=null===(s=null===(e=this._dataset.baseValue)||void 0===e?void 0:e[t])||void 0===s?void 0:(""+s).trim();if(i)this.baseValue=i;else{const e=this.element;if(e)switch(t){case"width":case"height":i=V(e,t,!1);break;case"opacity":case"stroke-opacity":case"fill-opacity":i=V(e,t,!1)||"1";break;default:i=V(e,t)}if(ft(i))this.baseValue=i;else{const e=this.animationElement;if(e){const s=e.parentElement;i=dt(s,t+".baseVal.valueAsString"),rt(i)&&(this.baseValue=""+ot(i,at(s)))}}}}this._attributeName=t}get attributeName(){return this._attributeName}set delay(t){this._delay=t}get delay(){return this._delay}set duration(t){this._duration=Math.round(t)}get duration(){return this._duration}set to(t){this._to=t}get to(){return this._to}set fillBackwards(t){this.setFillMode(t,8)}get fillBackwards(){return ht(this.fillMode,8)}set fillForwards(t){this.setFillMode(t,4)}get fillForwards(){return ht(this.fillMode,4)}set fillFreeze(t){this.setFillMode(t,2)}get fillFreeze(){return ht(this.fillMode,2)}get fillReplace(){const t=this.fillMode;return 0===t||8===t}get parentContainer(){let t=this._parent;for(;t&&!tt.isContainer(t);)t=t.parent;return t}set parent(t){this._parent=t}get parent(){return this._parent}set group(t){this._group=t}get group(){return this._group||{id:-1/0,name:""}}set setterType(t){}get setterType(){return!0}get dataset(){return this._dataset}get instanceType(){return 8}}const St={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"},kt="cubic-bezier\\(([\\d.]+), ([\\d.]+), ([\\d.]+), ([\\d.]+)\\)";var Tt=Object.freeze({__proto__:null,KEYSPLINE_NAME:St,STRING_CUBICBEZIER:kt});const xt=squared.lib,{getHexCode:At,parseColor:_t}=xt.color,{getFontSize:Vt,isLength:Rt,parseUnit:wt}=xt.css,{getNamedItem:Mt}=xt.dom,{CHAR:Et,XML:Pt}=xt.regex,{flatMap:Nt,isNumber:Ft,replaceMap:Ct,sortNumber:Gt,trimEnd:Ot}=xt.util,Lt=/^\s*[\d.]+\s+[\d.]+\s+[\d.]+\s+[\d.]+\s*$/,Bt=t=>parseFloat((1-t).toPrecision(5));class $t extends bt{constructor(t,e){if(super(t,e),this.type=0,this.additiveSum=!1,this.accumulateSum=!1,this._iterationCount=1,this._from="",this._reverse=!1,this._alternate=!1,this._setterType=!1,this._repeatDuration=-1,this._timingFunction="",e){const t=Mt(e,"values"),s=-1!==this.duration?$t.toFractionList(Mt(e,"keyTimes")):[];if(""!==t){const e=Ot(t,";").split(Pt.DELIMITER);this.values=e;const i=e.length;i>1&&i===s.length?(this.from=e[0],this.to=e[i-1],this.keyTimes=s):1===i&&(this.to=this.values[0],this.convertToValues())}else this.from=Mt(e,"from"),this.convertToValues(s);const i=Mt(e,"repeatDur");""!==i&&"indefinite"!==i&&(this._repeatDuration=bt.convertClockTime(i));const n=Mt(e,"repeatCount");this.iterationCount="indefinite"===n?-1:parseFloat(n),"animate"===e.tagName&&this.setCalcMode()}}static getSplitValue(t,e,s){return t+(e-t)*s}static convertTimingFunction(t){const e=St[t];if(e)return e;if(Lt.test(t))return t;if(/^step/.test(t))return St.linear;{const e=/cubic-bezier\(([\d.]+), ([\d.]+), ([\d.]+), ([\d.]+)\)/.exec(t);return e?e[1]+" "+e[2]+" "+e[3]+" "+e[4]:St.ease}}static convertStepTimingFunction(t,e,s,i,n,a){const r=i[n],o=i[n+1];let l,c;switch(t){case"fill":case"stroke":{const t=_t(r),e=_t(o);t&&e&&(l=[t],c=[e]);break}case"points":l=tt.convertPoints(tt.parseCoordinates(r)),c=tt.convertPoints(tt.parseCoordinates(o));break;case"rotate":case"scale":case"translate":l=Ct(r.trim().split(Et.SPACE),t=>parseFloat(t)),c=Ct(o.trim().split(Et.SPACE),t=>parseFloat(t));break;default:Ft(r)?l=[parseFloat(r)]:Rt(r)&&(l=[wt(r,a)]),Ft(o)?c=[parseFloat(o)]:Rt(o)&&(c=[wt(o,a)])}if(l&&c){const i=l.length;if(i===c.length){switch(e){case"step-start":e="steps(1, start)";break;case"step-end":e="steps(1, end)"}const a=/steps\((\d+)(?:, (start|end))?\)/.exec(e);if(a){const e=s[n+1]-s[n],r=parseInt(a[1]),o=100/r,h=[],u=[];for(let f=0;f<=r;f++){const d=s[n]+e*(f/r),p=o*(f+(0===f&&"start"===a[2]?1:0))/100,g=[];switch(t){case"fill":case"stroke":{const t=l[0].rgba,e=c[0].rgba,s=At($t.getSplitValue(t.r,e.r,p),$t.getSplitValue(t.g,e.g,p),$t.getSplitValue(t.b,e.b,p)),i=At($t.getSplitValue(t.a,e.a,p));g.push("#"+(s+("FF"!==i?i:"")));break}case"points":for(let t=0;t<i;t++){const e=l[t],s=c[t];g.push($t.getSplitValue(e.x,s.x,p)+","+$t.getSplitValue(e.y,s.y,p))}break;default:for(let t=0;t<i;t++)g.push(""+$t.getSplitValue(l[t],c[t],p))}if(!g.length)return;h.push(d),u.push(g.join(" "))}return[h,u]}}}}static toFractionList(t,e=";",s=!0){let i=0;const n=Ct(t.split(e),t=>{const e=parseFloat(t);return isNaN(e)||s&&!(e>=i&&e<=1)?-1:(i=e,e)});return n.length>1&&(!s||0===n[0]&&n.some(t=>-1!==t))?n:[]}get from(){return this._from}set from(t){if(void 0===this._values){const e=this.animationElement;if(e){if(""===this.to){const s=Mt(e,"by"),i=tt.parseCoordinates(s);if(i.length&&(""===t&&(t=this.baseValue||""),""!==t)){const e=tt.parseCoordinates(t),s=e.length;if(i.length===s){const t=[];for(let n=0;n<s;n++)t.push(e[n]+i[n]);this.to=t.join(",")}}}tt.parseCoordinates(this.to).length&&this.setAttribute("additive","sum")}}this._from=t}setCalcMode(t,e){const s=this.animationElement;if(s){void 0===e&&(e=Mt(s,"calcMode")||"linear");const i=this.keyTimes;switch(e){case"discrete":if(0===i[0]&&2===i.length){let e=[],n=[];const a=this.values,r=i.length;for(let o=0;o<r-1;o++){const r=$t.convertStepTimingFunction(t||this.attributeName,"step-end",i,a,o,Vt(s));r&&(e=e.concat(r[0]),n=n.concat(r[1]))}e.push(i.pop()),n.push(a.pop()),this._values=n,this._keyTimes=e,this._keySplines=[St["step-end"]]}break;case"paced":this._keySplines=void 0;break;case"spline":this.keySplines=Nt(Mt(s,"keySplines").split(";"),t=>t.trim());case"linear":if(0!==i[0]&&1!==i[i.length-1]){const t=[],e=this.values.length;for(let s=0;s<e;s++)t.push(s/(e-1));this._keyTimes=t,this._keySplines=void 0}}}}convertToValues(t){const e=this.to;if(e){if(this.values=[this.from,e],t&&2===t.length){const e=this.keyTimes;if(2!==e.length||0===e[0]&&e[1]<=1)return void(this.keyTimes=t)}this.keyTimes=[0,1]}}setGroupOrdering(t){if(this.group.ordering=t,this.fillBackwards){const e=this.group.name;for(let s=t.length-1,i=!1;s>=0;s--){const n=t[s];if(i){if("forwards"!==n.fillMode){this.fillBackwards=!1;break}}else n.name===e&&(i=!0)}}}getIntervalEndTime(t,e=!1){const s=this.getTotalDuration();if(t<s){const{duration:i,keyTimes:n}=this;let a=this.delay;for(;a+i<=t;)a+=i;return Math.min(a+(e?1:n[n.length-1])*i,s)}return s}getTotalDuration(t=!1){let e=this.iterationCount;return t&&-1===e&&(e=1),-1!==e?Math.min(this.delay+this.duration*e,this.end||1/0):1/0}set delay(t){super.delay=t;const e=this.animationElement,s=e&&Mt(e,"end");if(s){const t=Gt(Ct(s.split(";"),t=>bt.convertClockTime(t)))[0];if(!isNaN(t)){const{duration:e,iterationCount:s}=this;if(-1===s||e>0&&t<e*s){const i=this.delay;i>t?(this.end=t,-1===s&&(this.iterationCount=Math.ceil((t-i)/e))):this.duration=-1}}}}get delay(){return super.delay}set duration(t){super.duration=t}get duration(){const t=super.duration;return-1===t&&-1!==this._repeatDuration?this._repeatDuration:t}set iterationCount(t){this._iterationCount=isNaN(t)?1:t;const e=this.animationElement;e&&(-1!==this.iterationCount?(this.setAttribute("accumulate","sum"),this.fillFreeze="freeze"===Mt(e,"fill")):(this.accumulateSum=!1,this.fillFreeze=!1))}get iterationCount(){const t=this.duration;if(t>0){const e=this._iterationCount,s=this._repeatDuration;return-1!==s&&(-1===e||s<e*t)?s/t:e}return 1}set to(t){super.to=t}get to(){return this._setterType?this.valueTo||super.to:this.setterType?this.values[0]:super.to}set values(t){this._values=t,t&&t.length!==this.keyTimes.length&&(this._keyTimes=void 0,this._keySplines=void 0)}get values(){return void 0===this._values&&(this._values=[]),this._values}get valueTo(){var t;const e=this._values;return(null===(t=e)||void 0===t?void 0:t[e.length-1])||""}get valueFrom(){return this.values[0]||""}set keyTimes(t){const e=this._values;void 0!==e&&e.length!==t.length||!t.every(t=>t>=0&&t<=1)||(this._keyTimes=t)}get keyTimes(){return void 0===this._keyTimes&&(this._keyTimes=[]),this._keyTimes}set keySplines(t){var e;if(null===(e=t)||void 0===e?void 0:e.length){const e=this.keyTimes.length-1;if(t.length>=e&&!t.every(t=>""===t||t===St.linear)){const s=[];for(let i=0;i<e;i++){const e=Ct(t[i].split(" "),t=>parseFloat(t));4===e.length&&!e.some(t=>isNaN(t))&&e[0]>=0&&e[0]<=1&&e[2]>=0&&e[2]<=1?s.push(e.join(" ")):s.push(St.linear)}this._keySplines=s}}else this._keySplines=void 0}get keySplines(){return this._keySplines}set timingFunction(t){this._timingFunction=t?$t.convertTimingFunction(t):t}get timingFunction(){var t;return this._timingFunction||(null===(t=this.keySplines)||void 0===t?void 0:t[0])||""}set reverse(t){if(this.length&&t!==this._reverse){const t=this.keyTimes,e=this._keySplines,s=t.length,i=Array(s);for(let e=s-1,n=0;e>=0;)i[n++]=1-t[e--];if(this.keyTimes=i,this.values.reverse(),e){const t=[];for(let s=e.length-1;s>=0;s--){const i=Ct(e[s].split(" "),t=>parseFloat(t));t.push(4===i.length?Bt(i[2])+" "+Bt(i[3])+" "+Bt(i[0])+" "+Bt(i[1]):St.linear)}this._keySplines=t}}this._reverse=t}get reverse(){return this._reverse}set alternate(t){this._alternate=t}get alternate(){return this._alternate}get playable(){return!this.paused&&this.duration>0&&this.keyTimes.length>0}get fillReplace(){return super.fillReplace||-1===this.iterationCount}get fromToType(){const t=this.keyTimes;return 2===t.length&&0===t[0]&&1===t[1]}get evaluateStart(){const t=this.keyTimes;return t.length>0&&t[0]>0}get evaluateEnd(){const t=this.keyTimes;return t.length>0&&t[t.length-1]<1}set setterType(t){this._setterType=t}get setterType(){if(this._setterType)return!0;if(this.animationElement&&0===this.duration){const t=this.keyTimes;return t.length>=2&&0===t[0]&&""!==this.values[0]}return!1}set length(t){0===t&&(this._values=void 0)}get length(){var t;return(null===(t=this._values)||void 0===t?void 0:t.length)||0}get instanceType(){return 16392}}const zt=squared.lib,{getNamedItem:It}=zt.dom,{replaceMap:Xt}=zt.util;class qt extends $t{constructor(t,e){if(super(t,e),this.attributeName="transform",e){const t=It(e,"type");this.setType(t),this.setCalcMode(t)}}static toRotateList(t){const e=[];for(const s of t)if(""===s)e.push([0,0,0]);else{const t=tt.parseCoordinates(s);if(2===t.length&&(t[2]=0),3!==t.length)return;e.push(t)}return e}static toScaleList(t){const e=[];for(const s of t)if(""===s)e.push([1,1,0,0]);else{const t=tt.parseCoordinates(s);if(1===t.length&&(t[1]=t[0]),2===t.length&&(t[2]=0,t[3]=0),4!==t.length)return;e.push(t)}return e}static toTranslateList(t){const e=[];for(const s of t)if(""===s)e.push([0,0]);else{const t=tt.parseCoordinates(s);if(1===t.length&&(t[1]=0),2!==t.length)return;e.push(t)}return e}static toSkewList(t){const e=[];for(const s of t)if(""===s)e.push([0]);else{const t=tt.parseCoordinates(s);if(1!==t.length)return;e.push(t)}return e}expandToValues(){if(this.additiveSum){const{duration:t,keyTimes:e,iterationCount:s}=this;if(-1!==s&&t>0&&e.length){const i=t*s;t:{const{type:n,keySplines:a,values:r}=this,o=[],l=[],c=[];let h;const u=e.length;for(let f=0;f<s;f++){f>0&&a&&c.push("");for(let d=0;d<u;d++){const p=tt.parseCoordinates(r[d]),g=p.length;if(!g)break t;{let r;switch(n){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===g?r=[p[0],0]:2===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===g?r=[p[0],p[0]]:2===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===g?r=[p[0],0,0]:3===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===g&&(r=p)}if(!r)break t;{let n=(e[d]+f)*t;if(h){const t=r.length;for(let e=0;e<t;e++)r[e]+=h[e]}f<s-1&&d===u-1&&(this.accumulateSum&&(h=r),n--),o.push(n/i),l.push(r.join(" ")),a&&d<u-1&&c.push(a[d])}}}}this.values=l,this.keyTimes=o,this.keySplines=c.length?c:void 0,this.duration=i,this.iterationCount=1,this.accumulateSum=!1}}}}setType(t){let e;switch(t){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement&&(e=qt.toTranslateList(this.values));break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement&&(e=qt.toScaleList(this.values));break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement&&(e=qt.toRotateList(this.values));break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement&&(e=qt.toSkewList(this.values));break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement&&(e=qt.toSkewList(this.values));break;default:return}e&&(this.values=Xt(e,t=>t.join(" "))),this.baseValue=A.typeAsValue(this.type)}get instanceType(){return 49160}}const{filterArray:jt,hasValue:Dt,sortNumber:Yt}=squared.lib.util;class Ut{constructor(t,...e){var s,i,n;t=(e.length?jt(t,t=>e.includes(t.attributeName)):t.slice(0)).sort((t,e)=>t.delay===e.delay?t.group.id<e.group.id?1:-1:t.delay<e.delay?-1:1),e.length=0;for(const s of t){const t=Ut.getKeyName(s);e.includes(t)||e.push(t)}const a={},r={},o={};function l(t,e,s,i=0,n,a=!1,l=!1,c=0,h=!1,u){if(s){const f=r[t];let d=f[e];void 0===d&&(d=[],f[e]=d),d.push({time:e,value:s,animation:n,start:a,end:l,endTime:i,fillMode:c,infinite:h,valueFrom:u}),o[t].add(e)}}for(const s of e){a[s]=new Map,r[s]={},o[s]=new Set;const e=s.split(":")[0],i=t.filter(t=>t.fillBackwards&&t.attributeName===e).sort((t,e)=>t.group.id<e.group.id?1:-1)[0];if(i){const t=i.delay;l(s,0,i.values[0],t,i,0===t,!1,8)}}for(const e of t){const t=Ut.getKeyName(e);if(e.baseValue&&void 0===r[t][-1]&&l(t,-1,e.baseValue),e.setterType){const{delay:s,duration:i}=e,n=e.fillReplace&&i>0;l(t,s,e.to,n?s+i:0,e,n,!n,2),n&&l(t,s+i,"",0,e,!1,!0,2)}else if(tt.isAnimate(e)&&e.duration>0){const s=-1===e.iterationCount,i=e.getTotalDuration();l(t,e.delay,e.valueTo,i,e,!0,!1,0,s,e.valueFrom),s||e.fillReplace||l(t,i,e.valueTo,0,e,!1,!0,e.fillForwards?4:2)}}for(const t in r)for(const e of Yt(Array.from(o[t]))){const s=r[t][e];for(let e=0;e<s.length;e++){const i=s[e],n=i.animation;if(""===i.value||n&&i.start&&tt.isAnimate(n)&&""===n.from){let n;for(const e of a[t].values())for(const t of e)if(i.animation!==t.animation&&""!==t.value&&(-1===t.time||4===t.fillMode||2===t.fillMode)){n=t.value;break}n?i.value=n:""===i.value&&s.splice(e--,1)}}s.length&&(s.sort((t,e)=>t.animation&&e.animation?t.fillMode===e.fillMode?t.animation.group.id<e.animation.group.id?1:-1:t.fillMode<e.fillMode?1:-1:0),a[t].set(e,s))}for(const t in a)for(const[e,r]of a[t].entries())for(const o of r){const r=o.animation;if(r)if(2===o.fillMode){const n=[];for(const[o,l]of a[t].entries())if(o<e){for(const t of l)if(t.start){const e=t.animation;(null===(s=e)||void 0===s?void 0:s.animationElement)&&n.push(e)}}else if(o>e)for(let t=0;t<l.length;t++){const e=l[t];e.end&&n.includes(e.animation)&&l.splice(t--,1)}else for(let t=0;t<l.length;t++){const e=l[t];if(e.end){const s=e.animation;(null===(i=s)||void 0===i?void 0:i.animationElement)&&s.group.id<r.group.id&&l.splice(t--,1)}}}else if(4===o.fillMode||o.infinite){const s=r.group;let i=!1;if(s.ordering){const t=r.getTotalDuration(),e=s.name;for(const n of s.ordering)if(n.name===e)i=!0;else if(Ut.getGroupEndTime(n)>=t)break}const o=[];for(const[s,l]of a[t].entries())if(!i&&s<e){for(const t of l)if(t.start){const e=t.animation;e&&o.push(e)}}else if(s>e)for(let t=0;t<l.length;t++){const e=l[t],s=e.animation;(i||s&&(e.end&&o.includes(s)||null===r.animationElement&&s.group.id<r.group.id))&&l.splice(t--,1)}else for(let t=0;t<l.length;t++){const e=l[t];if(e.end){((null===(n=e.animation)||void 0===n?void 0:n.group.id)||NaN)<r.group.id&&l.splice(t--,1)}}}}for(const t in a){const e=a[t];for(const[t,s]of Array.from(e.entries()))0===s.length&&e.delete(t)}this.map=a}static getGroupEndTime(t){return"infinite"===t.iterationCount?1/0:t.delay+t.duration*parseInt(t.iterationCount)}static getKeyName(t){return t.attributeName+(tt.isAnimateTransform(t)?":"+A.typeAsName(t.type):"")}has(t,e,s){const i=this.map[t];return void 0!==e?!(!i||!i.has(e))&&(void 0===s||-1!==i.get(e).findIndex(t=>t.animation===s)):!!i}get(t,e,s=!1){let i;const n=this.map[t];if(n)for(const[t,a]of n.entries()){if(!(t<=e))break;for(const n of a)if(""!==n.value&&(-1===n.time||n.end&&(4===n.fillMode||2===n.fillMode))||s&&n.start&&e!==t){i=n.value;break}}return i}paused(t,e){let s=0;const i=this.map[t];if(i)for(const[t,n]of i.entries()){if(!(t<=e))break;for(const t of n)if(t.start&&(t.infinite||0===t.fillMode&&t.endTime>e)){if(!t.animation){s=1;break}s=2}else if(t.end&&(4===t.fillMode||1===s&&2===t.fillMode)){s=0;break}}return 0===s}evaluateStart(t,e){var s;const i=t.values;let n=t.reverse?i[i.length-1]:i[0];return""===n&&(n=this.get(t.attributeName,t.delay)||(null===(s=e)||void 0===s?void 0:""+s)||t.baseValue,Dt(n)&&(n=""+n,t.reverse?(i[i.length-1]=n,t.to=n):(i[0]=n,t.from=n))),i}}const Kt=squared.lib,{clampRange:Wt,equal:Ht,nextMultiple:Zt}=Kt.math,{CHAR:Qt}=Kt.regex,{filterArray:Jt,hasBit:te,hasValue:ee,isEqual:se,isNumber:ie,joinMap:ne,objectMap:ae,replaceMap:re,spliceArray:oe,sortNumber:le}=Kt.util,ce=["x1","y1","x2","y2"],he=["width","height","x","y"],ue=["points"],fe=["cx","cy","r"],de=["cx","cy","rx","ry"];function pe(t,e,s,i,n){let a,r,o,l=0;for(const[e,i]of t.entries()){if(s===e){r={key:e,value:i};break}if(s>l&&s<e&&void 0!==a){r={key:l,value:a},o={key:e,value:i};break}l=e,a=i}if(r&&o)we(t,s,Ae(s,r.key,r.value,o.key,o.value),!0);else if(r)we(t,s,r.value,!0);else if(!n){let n=i.get(e,s,!0);void 0!==n&&(n=me(n,!0),""!==n&&we(t,s,n))}}function ge(t){const e=new Set,s=t.length,i=t[s-1][0];for(let n=0;n<s;n++){const s=t[n];let a=s[0]/i;if(a>0)for(let t=7;;t++){const s=parseFloat((""+a).substring(0,t));if(!e.has(s)){a=s;break}}s[0]=a,e.add(a)}return t}function me(t,e=!1){return"string"==typeof t&&(ie(t)?t=parseFloat(t):0===(t=tt.parsePoints(t)).length&&(t="")),e&&"string"==typeof t?"":t}function ye(t,e){let s;if(t)for(const i of t){if(!(i.time<=e))break;s=i.value}return s}function ve(t,e,s,i,n){var a,r;const o=[],l=e.element.tagName;let c;switch(l){case"line":c=ce;break;case"rect":c=he;break;case"polyline":case"polygon":c=ue;break;case"circle":c=fe;break;case"ellipse":c=de;break;default:return}const h=A.origin(e.element),u=t.length;for(let f=0;f<u;f++){const[u,d]=t[f],p=[];for(const t of c){let s=d.get(t);if(void 0===s&&(s=null!=(a=ye(i[t],u))?a:e.getBaseValue(t)),void 0===s)return;p.push(s)}let g;switch(l){case"line":g=be(p);break;case"rect":g=Se(p);break;case"polygon":case"polyline":g=p[0];break;case"circle":case"ellipse":g=ze(p)}if(g){let t;switch(e.transformed&&(g=tt.applyTransforms(e.transformed,g,h)),null===(r=s)||void 0===r||r.refitPoints(g),l){case"line":case"polyline":t=tt.drawPolyline(g,n);break;case"rect":case"polygon":t=tt.drawPolygon(g,n);break;case"circle":case"ellipse":{const{x:e,y:s,rx:i,ry:a}=g[0];t=tt.drawEllipse(e,s,i,a,n);break}}void 0!==t&&o.push({key:u,value:t})}}return o}function be(t){return[{x:t[0],y:t[1]},{x:t[2],y:t[4]}]}function Se(t){const[e,s,i,n]=t;return[{x:i,y:n},{x:i+e,y:n},{x:i+e,y:n+s},{x:i,y:n+s}]}function ke(t,e,s){const i=new Map;for(const n of e){const e=new Map;for(const i in t){let a=t[i].get(n);void 0===a&&(a=ye(s[i],n)),void 0!==a&&e.set(i,a)}i.set(n,e)}return i}function Te(t,e,s,i){e&&(t.set(s,e),void 0!==i&&t.set(i,e))}function xe(t,e,s,i,n){switch(t.alternate&&s%2!=0&&(e=e.slice(0).reverse()),t.attributeName){case"transform":if(t.additiveSum&&"string"==typeof n){const a=re(n.split(Qt.SPACE),t=>parseFloat(t)),r=ae(e,t=>re(t.trim().split(Qt.SPACE),t=>parseFloat(t))),o=a.length;if(r.every(t=>t.length===o)){const e=r[i];t.accumulateSum||(s=0);for(let t=0;t<o;t++)e[t]+=a[t];const n=r.length;for(let t=0;t<s;t++)for(let t=0;t<n;t++){const s=r[t],i=s.length;for(let t=0;t<i;t++)e[t]+=s[t]}return e.join(" ")}}return e[i];case"points":return tt.parsePoints(e[i]);default:{let a=parseFloat(e[i]);if(isNaN(a))return n||0;if(t.additiveSum&&"number"==typeof n){a+=n,t.accumulateSum||(s=0);const i=e.length;for(let t=0;t<s;t++)for(let t=0;t<i;t++)a+=parseFloat(e[t])}return a}}}function Ae(t,e,s,i,n){if(t>e){if("number"==typeof s&&"number"==typeof n)return $t.getSplitValue(s,n,(t-e)/(i-e));if("string"==typeof s&&"string"==typeof n){const a=re(s.split(" "),t=>parseFloat(t)),r=re(n.split(" "),t=>parseFloat(t)),o=a.length;if(o===r.length){const s=[];for(let n=0;n<o;n++)s.push(Ae(t,e,a[n],i,r[n]));return s.join(" ")}}else if(Array.isArray(s)&&Array.isArray(n)){const a=[];for(let r=0;r<Math.min(s.length,n.length);r++){const o=s[r],l=n[r];a.push({x:Ae(t,e,o.x,i,l.x),y:Ae(t,e,o.y,i,l.y)})}return a}}return s}function _e(t,e,s,i,n,a,r,o,l,c,h,u,f,d){r<0&&(e-=r,r=0);const p=t.duration,g=e-(r+p*o),m=0===g?0===l?0:1:Wt(g/p);let y=-1,v=-1;const b=i.length;for(let t=0;t<b;t++){if(-1!==y&&m<=i[t]){v=t;break}m>=i[t]&&(y=t)}let S;return-1!==y&&-1!==v?S=Ae(m,i[y],xe(t,n,o,y,s),i[v],xe(t,n,o,v,s)):(v=-1!==y?y+1:i.length-1,S=xe(t,n,o,v,s)),Me(t,c=we(u,c,S),a,v,h,f,d),[c,S]}function Ve(t,e,s,i,n,a,r,o){const l=(t-e)/a,c=i.length;for(let t=1;t<c;t++){const e=i[t-1],a=i[t];if(l>=e&&l<=a)return Ie(Ae(l,e,xe(s,n,r,t-1,o),a,xe(s,n,r,t,o)))}}function Re(t,e,s,i,n,a,r,o,l,c,h){const u=r.length;void 0===o&&(o=Array(u-1).fill(""));const{delay:f,duration:d}=n,p=f+d*i,g=n.getTotalDuration(),m=p+(h?a[0]:1)*d,y=parseFloat(r[h?0:u-1]);let v=p;t:for(let i=0;i<c.length;i++){const u=c[i];if(u!==n){const n=u.getTotalDuration();if(u.addState(4),n>v)e:{const{delay:f,duration:b}=u,[S,k,T]=De(u);Ee(t,e,s,u,l,S,k,T);let x=m;for(let t=Ye(v,f,b),e=!1;;t++){const s=(s,i,c)=>{var f;let x,A;if(x=h?e||v!==p?s%d/d:0:i===m?1:i%d/d,A=s===i?Ie(xe(u,k,t,c,l)):Ve(s,i,u,S,k,b,t,l),A){x>0&&(A=""+Math.round((parseFloat(A)+y)/2));const t=a.length;if(x!==a[t-1]||A!==r[t-1]){const l=e||0===x?(null===(f=T)||void 0===f?void 0:f[c])||u.timingFunction:"";if(h){!e&&x>0&&s===v&&(x+=.001);for(let e=0;e<t;e++)if(x<=a[e]){0===e||0===x?(a.unshift(x),r.unshift(A),o.unshift(l)):(a.splice(e,0,x),r.splice(e,0,A),o.splice(e,0,l));break}}else(i===n||i===m)&&i<g&&(x-=.001),a.push(x),r.push(A),o.push(l)}}},A=S.length;if(h)for(let t=i+1;t<c.length;t++){const e=c[t];if(e.delay>v){x=e.delay;break}}for(let i=0;i<A;i++){const a=$e(f,b,S,t,i);if(a>=v&&(e||(s(a,v,i),e=!0),a>v)){if(h&&a>=m)break t;if(s(a,Math.min(a,n),i),a>=m)break t;if(v=a,a>=n){n<=g&&u.addState(16);break e}if(a>=x)break e}}}}}}return[a,r,o]}function we(t,e,s,i=!1){if(""!==s){let n=t.get(e),a=!1;if(void 0===n&&(n=t.get(e-1),a=!0),n!==s||i){if(!i){if("number"==typeof n&&Ht(s,n))return e;for(;e>0&&t.has(e);)e++}t.set(e,s)}else a&&!t.has(e)&&(t.delete(e-1),t.set(e,s))}return e}function Me(t,e,s,i,n,a,r){var o;if(!Xe(tt.isAnimateTransform(t),n)){if(0===i)return;i--}const l=null===(o=s)||void 0===o?void 0:o[i];l&&a.set(e,l),r&&function(t,e,s,i){var n;if(tt.asAnimateTransform(e)){const a=null===(n=e.transformOrigin)||void 0===n?void 0:n[i];a&&t.set(s,a)}}(r,t,e,i)}function Ee(t,e,s,i,n,a,r,o){var l,c,h;if(0!==a[0]){let s;s=i.additiveSum?Ie(n):(null===(l=Pe(e,i.attributeName))||void 0===l?void 0:""+l.value)||t.get(Ut.getKeyName(i),i.delay)||Ie(n);const h=i.by;h&&ie(s)&&(s=""+(parseFloat(s)+h)),a.unshift(0),r.unshift(s),null===(c=o)||void 0===c||c.unshift(i.timingFunction)}if(a[a.length-1]<1){const e=t.get(Ut.getKeyName(i),i.delay)||Ie(s[i.attributeName])||r[0];a.push(1),r.push(e),null===(h=o)||void 0===h||h.push(i.timingFunction)}}function Pe(t,e){var s;const i=t[e];return null===(s=i)||void 0===s?void 0:s[i.length-1]}function Ne(t,e,s,i,n){return void 0===i&&(i=e.delay),void 0===n&&(n=e.to),we(t,i,s?n:me(n))}function Fe(t,e){e&&t.push(e),t.sort((t,e)=>t.delay===e.delay?t.group.id<e.group.id?-1:1:t.delay<e.delay?-1:1);for(let e=0;e<t.length-1;e++)t[e].delay===t[e+1].delay&&t.splice(e--,1)}function Ce(t,e){if(!e.hasState(16,64)){const s=t.indexOf(e);-1!==s&&t.splice(s,1),t.push(e),e.addState(4)}}function Ge(t,e=1/0){t.sort((t,s)=>{const i=t.delay,n=t.delay;if(e!==1/0){if(e===i&&e!==n)return-1;if(e!==i&&e===n)return 1;if(i>e&&n<e)return 1;if(i<e&&n>e)return-1}return i!==n?i>n?-1:1:t.group.id>s.group.id?-1:1})}function Oe(t,e){e?-1!==e.iterationCount&&oe(t,t=>t===e):oe(t,t=>!!t.animationElement)}function Le(t,e){t.sort((t,s)=>{if(t.getTotalDuration()<=e)return 1;if(s.getTotalDuration()<=e)return-1;const i=t.delay,n=s.delay;return i===n?t.group.id<s.group.id?1:-1:i===e?-1:n===e?1:i<e&&n<e?i>n?-1:1:i<n?-1:1})}function Be(t,e){const s=t.get("x")||0,i=t.get("y")||0;return e?e.refitX(s)+" "+e.refitX(i):s+" "+i}const $e=(t,e,s,i,n)=>Math.round(t+(s[n]+i)*e),ze=t=>[{x:t[0],y:t[1],rx:t[2],ry:t[t.length-1]}],Ie=t=>{var e;return Array.isArray(t)?ae(t,t=>t.x+","+t.y).join(" "):(null===(e=t)||void 0===e?void 0:""+e)||""},Xe=(t,e)=>te(e,t?32:4),qe=(t,e)=>te(e,t?16:2),je=t=>t.playable||t.animationElement&&-1!==t.duration,De=t=>{var e;return[t.keyTimes.slice(0),t.values.slice(0),null===(e=t.keySplines)||void 0===e?void 0:e.slice(0)]},Ye=(t,e,s)=>Math.floor(Math.max(0,t-e)/s);var Ue=t=>class extends t{getAnimateShape(t){const e=[];for(const s of this.animations)if(je(s))switch(s.attributeName){case"r":case"cx":case"cy":if(T.circle(t)){e.push(s);break}case"rx":case"ry":T.ellipse(t)&&e.push(s);break;case"x1":case"x2":case"y1":case"y2":T.line(t)&&e.push(s);break;case"points":(T.polyline(t)||T.polygon(t))&&e.push(s);break;case"x":case"y":case"width":case"height":T.rect(t)&&e.push(s)}return e}getAnimateTransform(t){var e;const s=[];for(const i of this.animations)tt.isAnimateTransform(i)&&i.duration>0&&(s.push(i),tt.asAnimateMotion(i)&&(i.framesPerSecond=null===(e=t)||void 0===e?void 0:e.framesPerSecond));return s}getAnimateViewRect(t){void 0===t&&(t=this.animations);const e=[];for(const s of t)if(je(s))switch(s.attributeName){case"x":case"y":e.push(s)}return e}animateSequentially(t,e,s,i){let n,a=18;i&&(i.keyTimeMode&&(a=i.keyTimeMode),n=i.precision),[t,e].forEach(t=>{var i,r,o;const l=t===e;if(!t||0===t.length||!l&&te(a,8)||l&&te(a,64))return;const c=[],h={},u=new Set;let f=0;function d(t){let e=h[t.attributeName];void 0===e&&(e=[],h[t.attributeName]=e),e.push(t),f++}{const e=[],s=t.length;for(let i=0;i<s;i++){const n=t[i];if(n.setterType)d(n);else{const a=n.getTotalDuration();for(let r=0;r<s;r++){const s=t[r];if(i!==r&&n.attributeName===s.attributeName&&n.group.id<s.group.id&&n.fillReplace&&!s.evaluateEnd)if(s.setterType){if(n.delay===s.delay){e[i]=n;break}}else if(!s.evaluateStart&&!s.evaluateEnd&&(n.delay===s.delay&&(!s.fillReplace||-1===s.iterationCount||a<=s.getTotalDuration())||s.fillBackwards&&n.delay<=s.delay&&(s.fillForwards||n.fillReplace&&a<=s.delay)||n.animationElement&&null===s.animationElement&&(n.delay>=s.delay&&a<=s.getTotalDuration()||s.fillForwards))){e[i]=n;break}}}}const i=[];for(let n=0;n<s;n++){const s=t[n];e[n]?s.fillReplace?i.push(s):(s.setterType=!0,d(s)):s.setterType||(c.push(s),u.add(s.group.name))}this._removeAnimations(i)}if(c.length+f>1||1===c.length&&(c[0].alternate||void 0!==c[0].end)){for(const t of c){const e=t.group.ordering;e&&oe(e,t=>!u.has(t.name))}const e={},f={};let d=0;for(const t of c){const s=t.attributeName;let i=e[s];void 0===i&&(i=new Map,e[s]=i,f[s]=[]);const n=t.delay,a=i.get(n)||[];a.push(t),f[s].push(t),i.set(n,a)}for(const t in e){const s=new Map,i=e[t];for(const t of le(Array.from(i.keys()))){const e=i.get(t);for(const t of e)d=Math.max(d,t.getTotalDuration(!0));e.reverse(),s.set(t,e)}e[t]=s,f[t].reverse()}const p=new Ut(t),g={},m=new Map,y=l?new Map:void 0,v={},b=new Set,S={},k=new Map,T=l?new Map:void 0,x={},_={},V=new Map;let R,w,M=-1;for(const t in e){const n=new Map;if(g[t]=n,!l){let e;if(s)e=s.getBaseValue(t);else if(e=this[t],void 0===e)try{this.getBaseValue(t)}catch(t){}ee(e)&&(x[t]=e)}const r=h[t]||[],o=[],c=[],u=[];for(const[s,i]of e[t].entries())o.push(s),c.push(i);let k,T,R,w=-1,M=0,E=1/0;const P=(t,e)=>{if(b.add(t),t.addState(16),R=t,t.fillForwards){C(M,k,t.type,t);const{name:e,ordering:s}=t.group;if(s){const i=t.getTotalDuration();for(const t of s){if(t.name===e)return!0;if(Ut.getGroupEndTime(t)>=i)return!1}}}else{if(t.fillFreeze&&C(M,k,t.type,t),void 0!==e){let s=w;const i=N(M,M+1);void 0!==i&&t.fillReplace&&e>M&&0===u.length&&(s=we(n,s,i),l&&Te(V,t.type,s),k=i,w=s)}F()}return!1},N=(e,s)=>{var i;let a=null===(i=Pe(_,t))||void 0===i?void 0:i.value;return oe(r,t=>t.delay>=e&&t.delay<s,t=>{const s=t.to;t.animationElement&&Oe(u),0===u.length&&(k=s),C(t.delay,s,t.type,t),t.delay===e?a=l?s:me(s):(w=Ne(n,t,l),M=t.delay)}),a},F=(t,e)=>{u.length&&oe(u,t=>t.getTotalDuration()<=M,s=>{if(s.addState(16),s.fillForwards&&(C(s.getTotalDuration(),s.valueTo,s.type,s),void 0!==t&&void 0!==e)){const i=o.length;for(let n=t;n<i;n++){n!==t&&(e=-1);const i=c[n],a=i.length;for(let t=e+1;t<a;t++){const e=i[t];s.group.id>e.group.id&&e.addState(16)}}}})},C=(e,s,i=0,n)=>{l||(s=me(s));const a=Pe(_,t);if(""!==s&&(void 0===a||e>=a.time)){let n=_[t];void 0===n&&(n=[],_[t]=n),n.push({key:i,value:s,time:e})}if(n&&tt.isAnimate(n)&&!n.fillReplace)if(n.fillForwards){oe(r,t=>t.group.id<n.group.id||t.delay<e),u.length=0;for(const t of c)for(const e of t)e.group.id<n.group.id&&e.addState(16)}else n.fillFreeze&&Oe(u)},G=(t,e,s)=>{T&&!t&&(void 0===s&&(s=A.typeAsValue(T.type)),w=we(n,e,s),e!==w&&Te(V,T.type,w)),T=void 0},O=t=>{for(let e=0;e<o.length;e++){const s=c[e];if(t.length)for(let e=0;e<s.length;e++)t.includes(s[e])&&s.splice(e--,1);0===s.length&&(c.splice(e,1),o.splice(e--,1))}},L=f[t].find(t=>t.fillBackwards);if(L){k=xe(L,L.values,0,0),w=we(n,0,k),l&&(Te(V,L.type,0),T=L);let e=!0;for(const s of f[t])if(s.group.id>L.group.id&&s.delay<=L.delay){e=!1;break}const s=L.getTotalDuration(),i=[];for(let t=0;t<o.length;t++){const n=c[t];for(let a=0;a<n.length;a++){const l=n[a];if(e){if(l===L&&(0!==t||0!==a)){n.splice(a--,1),o.unshift(L.delay),c.unshift([L]);continue}if(l.group.id<L.group.id&&(L.fillForwards||l.getTotalDuration()<=s)){l.fillForwards&&(l.setterType=!0,r.push(l)),i.push(l);continue}}l.animationElement&&l.delay<=L.delay&&(n.splice(a--,1),Ce(u,l))}}O(i),L.addState(2)}if(!l){const e=x[t];void 0===_[t]&&void 0!==e&&C(0,e,0),void 0===k&&(k=(null===(i=Pe(_,t))||void 0===i?void 0:i.value)||e)}Fe(r);{let e;oe(r,t=>t.delay<=o[0],s=>{const i=tt.isAnimate(s)&&s.fillForwards,a=s.delay;if(a<o[0]&&(void 0===L||i))if(L&&i)C(a,s.to,s.type);else{const i=a-1;if(void 0===e)if(n.has(0))l||Ne(n,s,l,i,k);else{const e=l&&tt.isAnimateTransform(s)?A.typeAsValue(s.type):x[t];void 0!==e&&(Ne(n,s,l,0,e),Ne(n,s,l,i,e))}else Ne(n,e,l,i);w=Ne(n,s,l),M=a,e=s}}),e&&Ne(n,e,l,o[0]-1)}t:{const e=o.length;for(let s=0;s<e;s++){let i=c[s],h=o[s];for(let f=0;f<i.length;f++){const g=i[f];if(g.hasState(16,64)||g.hasState(4)&&g.animationElement)continue;const v=-1===g.iterationCount,b=g.duration,R=g.iterationCount;let O,L,B;if(v)O=h+b;else if(O=g.getTotalDuration(),O<=w){g.fillReplace?g.addState(64):Ce(u,g);continue}v?(L=Math.ceil((d-h)/b),B=0):(L=Math.ceil(R),B=R-Math.floor(R)),r.length&&M>0&&M<h&&N(M,h),-1!==w&&w<h&&(w=we(n,h-1,k),M=h),E=1/0;const $=g.group.ordering;if($&&$.length>1){let i=!0;for(const e of $){if(e.name===g.group.name){i=!1;break}if(!e.paused&&M<=e.delay&&e.attributes.includes(t))break}if(i)e:for(let t=s+1;t<e;t++){const e=c[t],s=e.length;for(let t=0;t<s;t++){const s=e[t];if(s.group.ordering){E=s.delay;break e}s.getTotalDuration()<=O?(s.fillFreeze&&Fe(r,s),s.addState(16)):s.delay<O&&Ce(u,s)}}}else for(let t=s+1;t<e;t++){const e=o[t];if(e!==1/0){const s=c[t];if(s.length&&!s.every(t=>t.hasState(16,64))){E=e;break}}}const z=M;let I,X=w+1,q=Math.min(E,g.end||1/0);if(g.animationElement&&r.length){const t=Math.min(E,O,q);if(I=r.find(e=>e.delay>=M&&e.delay<=t),I){switch(I.delay){case M:k=I.to,C(M,k,I.type,I),I.group.id>g.group.id&&(l&&T&&G(g.additiveSum,Math.max(h-1,w)),w=Ne(n,I,l,Math.max(I.delay,w),k),q=-1);break;case E:I.addState(32);break;default:q=I.delay,I.addState(32)}oe(r,t=>t!==I),g.addState(4)}}let j,D=!1;if(q>w){l&&(T&&(G(g.additiveSum,Math.max(h-1,w)),X=w+1),k=A.typeAsValue(g.type),C(M,k,g.type));let r=h===1/0||(-1!==w||g.hasState(2))&&!(0===s&&0===f)||g.hasState(8);D=!0;e:{const s=Pe(_,t);for(let t=Ye(M,h,b);t<L;t++){const{evaluateStart:o,evaluateEnd:l}=g;let c,d,v;if(o||l){[c,d,v]=De(g);const e=i.length;if(o){const s=Jt(u.concat(i.slice(f+1,e)),t=>!!t.animationElement&&t.delay<q);if(s.length){Le(s,M),[c,d,v]=Re(p,_,x,t,g,c,d,v,k,s,!0);for(const t of s)t.hasState(4)&&i.includes(t)&&Ce(u,t)}}if(l&&g.getIntervalEndTime(M)<q&&(u.length||f<e-1)){const s=Jt(u,t=>!!t.animationElement);for(let t=f+1;t<e;t++){const e=i[t];e.animationElement&&(s.includes(e)||s.push(e),Ce(u,e))}s.length&&(Ge(s,M),[c,d,v]=Re(p,_,x,t,g,c,d,v,k,s,!1))}Ee(p,_,x,g,k,c,d,v)}else({keyTimes:c,values:d,keySplines:v}=g);const S=c.length;for(let i=0;i<S;i++){const o=c[i];let l=-1,u=xe(g,d,t,i,k);if(t===L-1&&B>0)if(B===o)B=-1;else if(i===S-1)l=O,M=l,u=Ae(B,c[i-1],xe(g,d,t,i-1,k),o,u),B=-1;else if(B>o)for(let e=i+1;e<S;e++)if(B<=c[e]){l=O,M=l,u=Ae(B,o,u,c[e],xe(g,d,t,e,k)),B=-1;break}if(-1===l){if(l=$e(h,b,c,t,i),l<0||l<w)continue;if(l===q)D=t===L-1&&i===S-1,M=l;else{const e=e=>{[w,j]=_e(g,M,k,c,d,v,h,t,i,e,a,n,m,y)};if(h<0&&-1===w)l>0&&(M=0,e(0));else{if(l>q){r&&w+1<q&&e(w),M=q,e(q+(q!==E||n.has(q-1)?0:-1)),D=!1;break e}if(r)g.hasState(2)&&(M=z),h>=w?(l=Math.max(h,w+1),M=h):l===w?(M=l,l=w+1):(e(w),M=Math.max(l,w)),r=!1;else{if(M=l,t>0&&0===i&&g.accumulateSum){Me(g,l,v,i,a,m,y),w=l;continue}l=Math.max(l,w+1)}}}}if(l>w&&(i===e-1&&!g.accumulateSum&&(t<L-1||g.fillReplace&&(void 0===s||u!==s.value))&&l--,w=we(n,l,u),Me(g,w,v,i,a,m,y),j=u),!D||-1===B)break e}}}F(s,f)}if(void 0!==j&&(k=j,l&&(Te(V,g.type,X,w),T=g)),I&&(I.hasState(32)?(j=I.to,w=Ne(n,I,l,I.delay,j),M=I.delay,C(M,j,I.type,I)):g.hasState(64)&&Te(V,w,I.type),Oe(u),D=!0),oe(r,t=>t.delay>=z&&t.delay<=M,t=>{C(t.delay,t.to,t.type,t),t.animationElement&&Oe(u)}),v){if(!D){u.length=0,u.push(g);continue}if(void 0===I){S[t]=g;break t}}if(D){if(!v&&P(g,E))break t;for(let t=s;t<e;t++)if(o[t]<M){const e=c[t];for(let t=0;t<e.length;t++){const s=e[t],i=s.getTotalDuration();i>M&&!s.hasState(4,16,64)?Ce(u,s):s.fillReplace||C(i,s.valueTo,s.type,s)}o[t]=1/0,e.length=0}if(u.length&&M<E){Ge(u);const t=u.find(t=>t.delay<=M);t&&(t.removeState(4,2),t.addState(8),Oe(u,t),h=t.delay,i=[t],f=-1)}}else Ce(u,g)}}if(u.length)for(Ge(u);u.length;){const e=u.shift(),{delay:s,duration:i}=e,r=w-s;let o=1/0;const c=()=>{let[c,h,f]=De(e);const d=Ye(M,s,i);if(u.length){if(e.evaluateStart){const t=u.slice(0);Le(t,M),[c,h,f]=Re(p,_,x,d,e,c,h,f,k,t,!0)}e.evaluateEnd&&e.getIntervalEndTime(M)<o&&([c,h,f]=Re(p,_,x,d,e,c,h,f,k,u,!1))}Ee(p,_,x,e,k,c,h,f);const v=w+1;let b=Math.floor(r/i),S=!1;const T=(i,n)=>_e(e,M,k,c,h,f,s,b,n,i,a,g[t],m,y);do{const t=c.length;for(let r=0;r<t;r++){let l=$e(s,i,c,b,r);if(!S&&l>=w&&([w,k]=T(w,r),S=!0),S)if(l>=o){if(o>w){const t=e.fillReplace||-1===e.iterationCount;[w,k]=T(o-(t?1:0),r),t&&(k=xe(e,h,b,0,k),w=we(n,o,k)),M=o}}else l>w&&(M=l,r===t-1&&l<o&&l--,k=xe(e,h,b,r,k),w=we(n,l,k),Me(e,w,f,r,a,m,y))}}while(w<o&&++b);l&&Te(V,e.type,v,w)};if(-1===e.iterationCount){r>0&&r%e.duration!=0&&(o=s+e.duration*Math.ceil(r/i),c()),S[t]=e;break t}if(o=Math.min(s+e.duration*e.iterationCount,e.end||1/0),o>w&&(c(),P(e)))break t}if(R&&R.fillReplace&&void 0===S[t]){let e,s=0;if(_[t]){const i=Pe(_,t);i&&({key:s,value:e}=i)}else l?(s=Array.from(V.values()).pop(),e=A.typeAsValue(s)):e=x[t];void 0===e||se(n.get(w),e)||(w=we(n,w,e),l&&Te(V,s,w))}}v[t]=w}{const t=new Set;let e=0;for(const s in g){let i=0;for(const e of g[s].keys())t.add(e),i=e;e=Math.max(e,i),null===(r=_[s])||void 0===r||r.sort((t,e)=>t.time===e.time?0:t.time<e.time?-1:1)}if(Object.keys(S).length){const s=[],i=[];for(const t in S){const e=S[t];s.push(e.delay),i.push(e.duration)}const n=s[0];if(0===b.size&&1===new Set(s).size&&1===new Set(i).size&&n===t.values().next().value)M=n;else if(i.length>1&&i.every(t=>t%250==0))e=Zt(i,e,s);else{const t=i[0];(e-n)%t!=0&&(e=t*Math.ceil(e/t))}}if(-1===M)for(const s in g){const i=S[s];if(i){let n=v[s];if(n<e){const r=g[s],o=i.delay,c=n+1;let h=Array.from(r.values()).pop(),u=Math.floor((n-o)/i.duration);const[f,d,b]=De(i);Ee(p,_,x,i,h,f,d,b);const S=f.length;do{let s=!1;for(let l=0;l<S;l++){let c=$e(o,i.duration,f,u,l);!s&&c>=n&&([n,h]=_e(i,n,h,f,d,b,o,u,l,n,a,r,m,y),t.add(n),s=!0),s&&c>n&&(l===S-1&&c<e&&c--,h=xe(i,d,u,l,h),n=we(r,c,h),Me(i,c,b,l,a,m,y),t.add(n))}}while(n<e&&++u);v[s]=n,l&&Te(V,i.type,c,n)}}}const i=le(Array.from(t));if(s||l){let t=!1;for(const e in g){const s=g[e];if(!s.has(0)){const n=x[e];if(void 0!==n){const e=s.keys().next().value-1;s.set(0,n),s.set(e,n),i.includes(0)||(i.push(0),t=!0),i.includes(e)||(i.push(e),t=!0)}}}t&&le(i)}if(!l)for(const t in g){const e=g[t],s=e.keys().next().value,n=e.values().next().value;for(const a of i){if(!(a<=v[t]))break;if(!e.has(a)){if(p.paused(t,a))if(a<s)e.set(a,n);else{let s=p.get(t,a);if(void 0!==s&&(s=me(s,!0),""!==s)){e.set(a,s);continue}}pe(e,t,a,p,l)}}}R=ke(g,i,_)}if(-1===M&&Object.keys(S).length){const t={},e=[],s=[],i=[];for(const t in S){const s=S[t];i.push(s.duration),e.push(s)}const n=Zt(i);for(const i of e){const e=i.attributeName;t[e]=new Map;let r=null!=(o=g[e].get(v[e]))?o:x[e];const[l,c,h]=De(i);Ee(p,_,x,i,r,l,c,h);let u=0,f=0;const d=l.length;do{for(let o=0;o<d;o++){let d=$e(0,i.duration,l,f,o);o===l.length-1&&d<n&&d--,r=xe(i,c,f,o,r),u=we(t[e],d,r),Me(i,u,h,o,a,k,T),s.includes(u)||s.push(u)}}while(u<n&&++f)}if(e.every(t=>t.alternate)){let e=-1;for(const i in S){const a=t[i],r=Array.from(a.keys()),o=Array.from(a.values()).reverse(),l=r.length;for(let t=0;t<l;t++){const i=r[t];if(0!==i){e=n+i;const r=k.get(i);r&&k.set(e,r),e=we(a,e,o[t]),s.includes(e)||s.push(e)}}}}le(s);for(const e in t){const i=t[e];for(const t of s)i.has(t)||pe(i,e,t,p,l)}w=ke(t,s,_)}if(R||w){this._removeAnimations(c);const t=Array.from(V.entries()),e=ne(c,t=>tt.isAnimateTransform(t)?A.typeAsName(t.type):t.attributeName,"-",!1),i=this.parent;for(const r of[R,w])if(r){const o=r===R,c=o?m:k,h=o?y:T;if(Xe(l,a)){const e=[];if(l){const s=[];if(o){const e=Array.from(r.entries());let i=t[0][1];const n=t.length,a=e.length;for(let r=0,o=0,l=0;r<n;r++){const c=r<n-1?t[r+1][1]:-1;if(i!==c){const n=new Map;for(let s=l;s<a;s++){const a=e[s][0];if(a>=t[o][0]&&a<=t[r][0])n.set(a,new Map([[i,e[s][1].values().next().value]])),l=s;else if(a>t[r][0])break}s.push(n),i=c,o=r+1}}}else{if(!S.transform)return;{const t=Array.from(r.entries()),e=new Map;for(const s of t)e.set(s[0],new Map([[S.transform.type,s[1].values().next().value]]));s.push(e)}}let i=0;const n=s.length;for(let t=0;t<n;t++){const a=Array.from(s[t].entries()),r=a[0];let l=r[0];const u=r[1];1===a.length&&a.push(t<n-1?[s[t+1].keys().next().value,u]:[l+1,u]);const f=a[a.length-1][0];let d=f-l;const p=new qt;p.type=u.keys().next().value;const g=a.length;for(let t=0;t<g;t++){const s=a[t];if(e.push(c.get(s[0])||""),p.type!==SVGTransform.SVG_TRANSFORM_ROTATE){const e=h.get(s[0]);e&&(void 0===p.transformOrigin&&(p.transformOrigin=[]),p.transformOrigin[t]=e)}s[0]-=l}for(const[t,e]of ge(a))p.keyTimes.push(t),p.values.push(e.values().next().value);l-=i,l>1?p.delay=l:1===l&&(d+1)%10==0&&d++,p.duration=d,p.keySplines=e,p.synchronized={key:t,value:""},i=f,this._insertAnimate(p,o)}}else{const t=Array.from(r.entries()),a=-1!==M?M:0;let l;for(const s of t)e.push(c.get(s[0])||""),s[0]-=a;if(s){const e=ve(ge(t),s,i,_,n);if(!e)return;l=new $t,l.attributeName="d";for(const t of e)l.keyTimes.push(t.key),l.values.push(""+t.value)}else{const t=new qt;t.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;for(const[e,s]of r.entries()){const n=s.get("x")||0,a=s.get("y")||0;t.keyTimes.push(e),t.values.push(i?i.refitX(n)+" "+i.refitX(a):n+" "+a)}l=t}l.delay=a,l.keySplines=e,l.duration=t[t.length-1][0],this._insertAnimate(l,o)}}else if(qe(l,a)){const a=Array.from(r.entries()),u=a.length-1;for(let r=0;r<u;r++){const[u,f]=a[r],[d,p]=a[r+1];let g,m=e;if(l){const e=new qt;if(o){const s=t.length-1;for(let i=0;i<s;i++){const s=t[i],n=t[i+1];if(s[1]===n[1]&&u>=s[0]&&d<=n[0]){e.type=s[1];break}if(d-u==1&&d===n[0]){e.type=n[1];break}}}else S.transform&&(e.type=S.transform.type);if(0===e.type)continue;e.values=[f.values().next().value,p.values().next().value];const s=h.get(d);s&&(e.transformOrigin=[s]),g=e}else if(s){const t=ve([[u,f],[d,p]],s,i,_,n);if(!t)continue;g=new $t,g.attributeName="d",g.values=re(t,t=>""+t.value)}else{const t=new qt;t.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,t.values=[Be(f,i),Be(p,i)],m+=r,g=t}o&&(g.delay=0===r?u:0),g.duration=d-u,g.keyTimes=[0,1],g.synchronized={key:r,value:m};const y=c.get(d);y&&(g.keySplines=[y]),this._insertAnimate(g,o)}}}}}})}_removeAnimations(t){t.length&&oe(this.animations,e=>t.includes(e))}_insertAnimate(t,e){e||(t.iterationCount=-1),t.from=t.valueFrom,t.to=t.valueTo,this.animations.push(t)}};const Ke=squared.lib,{isPercent:We,parseAngle:He}=Ke.css,{getNamedItem:Ze}=Ke.dom,{truncateFraction:Qe}=Ke.math,{isEqual:Je,isNumber:ts,isString:es,objectMap:ss}=Ke.util;class is extends qt{constructor(t,e){if(super(t,e),this.path="",this.distance="0%",this.rotate="auto 0deg",this.motionPathElement=null,this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this._offsetLength=0,this._keyPoints=[],e){this.setAttribute("path");const t=Ze(e,"rotate");switch(t){case"auto":break;case"auto-reverse":this.rotate="auto 180deg";break;default:ts(t)&&(this.rotate=parseFloat(t)+"deg")}const s=e.children,i=s.length;for(let t=0;t<i;t++){const e=s[t];if("mpath"===e.tagName){let t=M(e);if(t&&(T.use(t)&&(t=M(t)),t&&T.shape(t))){this.motionPathElement=t;break}}}this.setCalcMode()}else if(t){const e=/path\("([^"]+)"\)/.exec(V(t,"offset-path"));e&&(this.path=e[1]);const s=V(t,"offset-distance",!1);""!==s&&(this.distance=s);const i=V(t,"offset-rotate",!1);""!==i&&"auto"!==i&&(this.rotate=i)}}setCalcMode(){const t=this.animationElement;if(t){const e=Ze(t,"calcMode")||"paced";switch(e){case"paced":case"discrete":case"spline":super.setCalcMode("translate",e);break;case"linear":{const e=qt.toFractionList(Ze(t,"keyPoints"),";",!1);let s=super.keyTimes;0===s.length&&-1!==this.duration&&(s=qt.toFractionList(Ze(t,"keyTimes")),this.length=0,super.keyTimes=s),e.length===s.length&&(this._keyPoints=e);break}}}}addKeyPoint(t){if(void 0===this._offsetPath){const e=t.key;if(e>=0&&e<=1){const s=super.keyTimes,i=this._keyPoints;if(s.length===i.length){const n=t.value;let a=NaN;if(We(n)?a=parseFloat(n)/100:ts(n)&&(a=parseFloat(n)/this.offsetLength),!isNaN(a)){a=Math.min(a,1);const n=s.findIndex(t=>t===e);-1!==n?(s[n]=t.key,i[n]=a):(s.push(t.key),i.push(a))}}}}}setOffsetPath(){var t;if(void 0===this._offsetPath&&es(this.path)){const{duration:e,rotateData:s}=this;let i=tt.getOffsetPath(this.path,this.rotate),n=i.length;if(n>0){let a=1;if(e>=n){a=e/n;for(let t=1;t<n-1;t++)i[t].key*=a;i[n-1].key=e}else if(e>0){const t=Array(e),s=n/e;for(let n=0;n<e;n++){const e=i[Math.floor(n*s)];e.key=n,t[n]=e}const a=i.pop();t[t.length-1].value!==a.value&&(a.key=e,t.push(a)),i=t,n=t.length}const{framesPerSecond:r,keyPoints:o}=this,l=r?1e3/r:0;if(o.length){const t=n-1,s=super.keyTimes,r=[];if(o.length>1){let n;const c=(t,e,s)=>{var i;return(null===(i=n)||void 0===i?void 0:i.key)===t&&n.rotate===s&&Je(n.value,e)},h=s.length;for(let u=0;u<h-1;u++){const h=s[u],f=Qe(h*e),d=Qe((s[u+1]-h)*e),p=o[u],g=o[u+1];if(0===d){const e=f,{value:s,rotate:a}=i[Math.floor(g*t)];c(e,s,a)||(n={key:e,value:s,rotate:a},r.push(n))}else{let e=0,s=f;if(p===g){const{value:n,rotate:o}=i[Math.floor(p*t)];for(c(f,n,o)&&(e+=a,s+=l);e<d;e+=a){const t=f+e;t>=s&&(r.push({key:t,value:n,rotate:o}),e<d-1?s+=l:s=0)}}else{const n=Math.floor(Math.min(p,g)*t),a=Math.floor(Math.max(p,g)*t),o=[];for(let t=n;t<=a;t++)o.push(Object.assign({},i[t]));p>g&&o.reverse();const h=o.length,u=d/h,m=o[0];for(c(f,m.value,m.rotate)&&(e++,s+=l);e<h;e++){const t=f+e*u;if(t>=s){const i=o[e];i.key=t,r.push(i),e<h-1?s+=l:s=0}}}r[r.length-1].key=f+d}}}else r.push(Object.assign({},i[Math.floor(o[0]*t)])),0===s[0]&&(r[0].rotate=0);this._offsetPath=r}else if(l>0){const t=[];for(let e=0;e<n;e+=l)t.push(i[Math.floor(e)]);const e=i.pop();e!==t[t.length-1]&&t.push(e),this._offsetPath=t}else this._offsetPath=i;if(s){i=this._offsetPath;const n=s.length-1;for(let a=0,r=0;a<n;a++){const n=s[a],o=s[a+1],l=o.key,c=[];if(n.key===l)c.push(i[r++]);else{const s=Math.floor(Qe(l*e));do{const e=i[r];if(!((null===(t=e)||void 0===t?void 0:t.key)<=s))break;c.push(e)}while(++r)}const h=n.value,u=o.value,f=He(h.split(" ").pop()),d=He(u.split(" ").pop()),p=/^auto/.test(h);if(h===u||f===d)if(p){if(0!==f)for(const t of c)t.rotate+=f}else for(const t of c)t.rotate=f;else{const t=d-f,e=c.length,s=t/e;if(p){for(let t=0;t<e-1;t++)c[t].rotate+=f+t*s;c[e-1].rotate+=f+t}else{for(let t=0;t<e-1;t++)c[t].rotate=f+t*s;c[e-1].rotate=f+t}}}}this.keySplines=void 0,this.timingFunction=St.linear}}}reverseKeyPoints(){let t,e;if(this.validKeyPoints()){e=this._keyPoints.slice(0),e.reverse(),t=[];for(const e of super.keyTimes)t.push(1-e);t.reverse()}return{keyTimes:t,keyPoints:e}}validKeyPoints(){const t=this.keyPoints;return t.length>0&&t.length===super.keyTimes.length}get offsetPath(){return this._offsetPath}get playable(){return!this.paused&&-1!==this.duration&&es(this.path)}set keyTimes(t){es(this.path)||(super.keyTimes=t)}get keyTimes(){this.setOffsetPath();const t=this._offsetPath;if(t){const e=this.duration;return ss(t,t=>t.key/e)}return super.keyTimes}set values(t){es(this.path)||(super.values=t)}get values(){this.setOffsetPath();const t=this._offsetPath;return t?ss(t,t=>{const{x:e,y:s}=t.value;return e+" "+s}):super.values}get rotateValues(){this.setOffsetPath();const t=this._offsetPath;return t?ss(t,t=>t.rotate):void 0}get keyPoints(){return this._keyPoints}set reverse(t){if(t!==super.reverse){const{keyTimes:e,keyPoints:s}=this.reverseKeyPoints();e&&s&&(this.length=0,this._keyPoints=s,super.keyTimes=e,super.reverse=t)}}get reverse(){return super.reverse}set alternate(t){const e=this.iterationCount;if(t!==super.alternate&&(-1===e||e>1)){const{keyTimes:s,keyPoints:i}=this.reverseKeyPoints();if(s&&i){let n=super.keyTimes,a=this.keyPoints;const r=n.length;if(-1===e){for(let t=0;t<r;t++)n[t]/=2,s[t]=.5+s[t]/2;n=n.concat(s),a=a.concat(i),this.duration=2*this.duration}else{const t=n.slice(0),o=a.slice(0);for(let l=0;l<e;l++)if(0===l)for(let t=0;t<r;t++)n[t]/=e;else{const c=l*(1/e),h=l%2==0?t.slice(0):s.slice(0);for(let t=0;t<r;t++)h[t]=Qe(c+h[t]/e);n=n.concat(h),a=a.concat(l%2==0?o:i)}this.duration=this.duration*e,this.iterationCount=1}this._keyTimes=n,this._keyPoints=a,super.alternate=t}}}get alternate(){return super.alternate}set parent(t){var e;super.parent=t;const s=this.parentContainer;if(null===(e=s)||void 0===e?void 0:e.requireRefit){const t=this.path;t&&(this.path=tt.transformRefit(t,void 0,void 0,s))}}get parent(){return super.parent}get offsetLength(){let t=this._offsetLength;if(0===t){const e=this.path;e&&(t=N(e))}return t}get instanceType(){return 114696}}const ns=squared.lib,{calculateVar:as,isCustomProperty:rs,getFontSize:os,getKeyframeRules:ls,parseAngle:cs,parseVar:hs,isAngle:us,isCalc:fs}=ns.css,{getNamedItem:ds}=ns.dom,{XML:ps}=ns.regex,{isString:gs,replaceMap:ms,sortNumber:ys}=ns.util,vs={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},bs=ls(),Ss=RegExp(`(ease|ease-in|ease-out|ease-in-out|linear|step-(?:start|end)|steps\\(\\d+, (?:start|end)\\)|${kt}),?\\s*`,"g"),ks=/^auto/;function Ts(t,e){const s=V(t,e);if("animation-timing-function"===e){const t=[];let e;for(;null!==(e=Ss.exec(s));)t.push(e[1]);return Ss.lastIndex=0,t}return s.split(ps.SEPARATOR)}function xs(t){return t.sort((t,e)=>t.key!==e.key?t.key<e.key?-1:1:0)}function As(t){if("reverse"===t)return"auto 180deg";if(/^reverse /.test(t)){const e=t.split(" ")[1];return"auto "+(us(e)?180+cs(e):"0")+"deg"}return t}function _s(t,e,s){var i;const n=null===(i=t["transform-origin"])||void 0===i?void 0:i.find(t=>t.key===s);if(n)return A.origin(e,n.value)}var Vs=t=>class extends t{getTransforms(t){return void 0===t&&(t=this.element),tt.filterTransforms(A.parse(t)||tt.convertTransforms(t.transform.baseVal))}getAnimations(t){var e,s,i,n;void 0===t&&(t=this.element);const a=[];let r=0;const o=(t,e,s="")=>{""===s&&r++,t.delay=e,t.group={id:r,name:s},t.parent=this,a.push(t)},l=t.children;let c=l.length;for(let i=0;i<c;i++){const n=l[i];if(n instanceof SVGAnimationElement){const i=ds(n,"begin");if(/^[a-zA-Z]+$/.test(i))continue;const a=i?ys(ms(i.split(";"),t=>bt.convertClockTime(t))):[0];if(a.length)switch(n.tagName){case"set":for(const e of a)o(new bt(t,n),e);break;case"animate":for(const e of a)o(new $t(t,n),e);break;case"animateTransform":for(const s of a){const i=new qt(t,n);tt.isShape(this)&&this.path&&(i.transformFrom=tt.drawRefit(t,this.parent,null===(e=this.viewport)||void 0===e?void 0:e.precision)),o(i,s)}break;case"animateMotion":for(const e of a){const i=new is(t,n),a=i.motionPathElement;a&&(i.path=tt.drawRefit(a,this.parent,null===(s=this.viewport)||void 0===s?void 0:s.precision)),o(i,e)}}}}const h=Ts(t,"animation-name");if(c=h.length,c){const e={},s=[],a=[];for(const s in vs){let i=Ts(t,s);for(0===i.length&&i.push(vs[s]);i.length<c;)i=i.concat(i.slice(0));i.length=c,e[s]=i}for(let l=0;l<c;l++){const c=bs[h[l]],u=bt.convertClockTime(e["animation-duration"][l]);if(c&&u>0){r++;const f={},d={},p="paused"===e["animation-play-state"][l],g=bt.convertClockTime(e["animation-delay"][l]),m=e["animation-iteration-count"][l],y=e["animation-fill-mode"][l],v=h[l]+"_"+l,b=[];let S=!0;a.push({name:v,attributes:b,paused:p,delay:g,duration:u,iterationCount:m,fillMode:y});for(const e in c){const s=parseFloat(e)/100,i=c[e];for(const e in i){let n=i[e];if(n&&(fs(n)?n=as(t,n,e):rs(n)&&(n=hs(t,n)),void 0!==n)){const t=vs[e]?d:f;let i=t[e];void 0===i&&(i=[],t[e]=i),i.push({key:s,value:""+n})}}}if(f.transform){for(const e of xs(f.transform)){const s=A.parse(t,e.value);if(s){const i=e.key,n=_s(f,t,i);for(const t of s){const e=t.matrix;let s,a,r;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:s="translate",a=e.e+" "+e.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:s="scale",a=e.a+" "+e.d+" "+(n?n.x+" "+n.y:"0 0"),!n||0===i&&0===n.x&&0===n.y||(r={x:n.x*(1-e.a),y:n.y*(1-e.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:s="rotate",a=t.angle+" "+(n?n.x+" "+n.y:"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:s="skewX",a=""+t.angle,!n||0===i&&0===n.y||(r={x:n.y*e.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:s="skewY",a=""+t.angle,!n||0===i&&0===n.x||(r={x:0,y:n.x*e.b*-1});break;default:continue}let o=f[s];void 0===o&&(o=[],f[s]=o);const l=o.findIndex(t=>t.key===i);if(-1!==l){const t=o[l];t.value=a,t.transformOrigin=r}else o.push({key:i,value:a,transformOrigin:r})}}}delete f.transform,delete f["transform-origin"]}if("none"===V(t,"offset-path"))delete f["offset-distance"],delete f["offset-rotate"];else if(f["offset-rotate"]){const e=f["offset-rotate"];if(f["offset-distance"]||void 0===f.rotate){let s=V(t,"offset-rotate",!1);""!==s&&"auto"!==s||(s="auto 0deg"),xs(e);const i=e[e.length-1];0!==e[0].key&&e.unshift({key:0,value:s}),1!==i.key&&e.push({key:1,value:s});for(let t=1;t<e.length;t++){const s=e[t-1],i=e[t],n=As(s.value),a=As(i.value);if(s.value=n,i.value=a,n.split(" ").pop()!==a.split(" ").pop()){const r=ks.test(n),o=ks.test(a);if(r&&!o||!r&&o){const r=(s.key+i.key)/2;e.splice(t++,0,{key:r,value:n}),e.splice(t++,0,{key:r,value:a})}}}if(void 0===f["offset-distance"]){const s=new is(t);s.duration=0,s.iterationCount=1,s.fillForwards=!0,s.addKeyPoint({key:0,value:s.distance}),o(s,g,v);for(const t of e){const e=t.value;let s=cs(e.split(" ").pop());ks.test(e)&&(s+=90),t.value=s+" 0 0"}f.rotate=e,delete f["offset-rotate"],S=!1}}else delete f["offset-rotate"]}for(const a in f){let r;switch(a){case"offset-rotate":continue;case"offset-distance":r=new is(t),r.rotateData=f["offset-rotate"];break;case"rotate":case"scale":case"skewX":case"skewY":case"translate":r=new qt(t),r.setType(a);break;default:r=new $t(t),r.attributeName=a}o(r,g,v);const c=f[a],h=e["animation-direction"][l],k=e["animation-timing-function"][l];if(xs(c),"offset-distance"===a){const t=r;0!==c[0].key&&t.addKeyPoint({key:0,value:t.distance});for(const e of c)t.addKeyPoint(e);1!==c.pop().key&&t.addKeyPoint({key:1,value:t.distance}),gs(k)&&(t.timingFunction=k)}else{b.push(a);const e=[],s=[],o=[],l=c.length;for(let t=0;t<l;t++){const a=c[t],{key:h,value:u}=a;if(e.push(h),s.push(u),S&&t<l-1){const t=null===(i=d["animation-timing-function"])||void 0===i?void 0:i.find(t=>t.key===h);o.push((null===(n=t)||void 0===n?void 0:n.value)||k)}const f=a.transformOrigin;if(f&&tt.asAnimateTransform(r)){let e=r.transformOrigin;void 0===e&&(e=[],r.transformOrigin=e),e[t]=f}}if(S&&!o.every(t=>"linear"===t)){const i=[],n=[],l=[],c=e.length;for(let r=0;r<c;r++){const h=e[r],f=s[r];if(r<c-1){const c=o[r];if(""!==f&&/^step/.test(c)){const o=$t.convertStepTimingFunction(a,c,e,s,r,os(t));if(o){const[t,s]=o,a=(e[r+1]-h)*u,f=1===e[r+1]?1:0,d=t.length;for(let e=0;e<d-f;e++){let r=(h+t[e]*a)/u;i.includes(r)&&(r+=.001),i.push(r),n.push(s[e]),l.push(St[c.includes("start")?"step-start":"step-end"])}continue}}l.push($t.convertTimingFunction(c))}i.push(h),n.push(f)}r.values=n,r.keyTimes=i,r.keySplines=l}else r.values=s,r.keyTimes=e,S?r.keySplines=o:r.timingFunction=k}r.paused=p,r.duration=u,r.iterationCount="infinite"!==m?parseFloat(m):-1,r.fillForwards="forwards"===y||"both"===y,r.fillBackwards="backwards"===y||"both"===y,r.reverse=/reverse$/.test(h),r.alternate=(-1===r.iterationCount||r.iterationCount>1)&&/^alternate/.test(h),s.push(r)}}}a.reverse();for(const t of s)t.setGroupOrdering(a)}return a}set name(t){this._name=t}get name(){let t=this._name;return void 0===t&&(t=tt.setName(this.element),this._name=t),t}get transforms(){let t=this._transforms;return void 0===t&&(t=this.getTransforms(),this._transforms=t),t}get animations(){let t=this._animations;return void 0===t&&(t=this.getAnimations(),this._animations=t),t}get visible(){return function(t){const e=V(t,"visibility");return"hidden"!==e&&"collapse"!==e&&"none"!==V(t,"display")}(this.element)}get opacity(){return V(this.element,"opacity",!1)||"1"}};const{isUserAgent:Rs}=squared.lib.client;function ws(t){if("svg"===t.tagName){if(Rs(8))return t.parentElement instanceof HTMLElement;if(Rs(4))return!(t.parentElement instanceof HTMLElement)}return!1}var Ms=t=>class extends t{setRect(){const t=this.parent;let{x:e,y:s,width:i,height:n}=this;t&&(e=t.refitX(e),s=t.refitY(s),i=t.refitSize(i),n=t.refitSize(n)),this.setBaseValue("x",e),this.setBaseValue("y",s),this.setBaseValue("width",i),this.setBaseValue("height",n)}_getElement(){const t=this.element;switch(t.tagName){case"svg":case"use":case"image":return t;default:return null}}set x(t){this._x=t}get x(){var t,e;return null!=(t=this._x)?t:(null===(e=this._getElement())||void 0===e?void 0:e.x.baseVal.value)||0}set y(t){this._y=t}get y(){var t,e;return null!=(t=this._y)?t:(null===(e=this._getElement())||void 0===e?void 0:e.y.baseVal.value)||0}set width(t){this._width=t}get width(){const t=this._width;if(void 0!==t)return t;{const t=this._getElement();return t?ws(t)?t.getBoundingClientRect().width:t.width.baseVal.value:0}}set height(t){this._height=t}get height(){const t=this._height;if(void 0!==t)return t;{const t=this._getElement();return t?ws(t)?t.getBoundingClientRect().height:t.height.baseVal.value:0}}};const{cloneObject:Es}=squared.lib.util;function Ps(t,e){const s=w(R(t,"fill"));if(""!==s){if(e){const t=e.definitions.pattern.get(s);if(t)return t}const t=document.getElementById(s.substring(1));if(t instanceof SVGPatternElement)return t}}class Ns extends squared.lib.base.Container{constructor(t){super(),this.element=t,this.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1},this._clipRegion=[]}append(t,e){return t.parent=this,t.viewport=e||this.getViewport(),super.append(t)}build(t){let e,s,i=!0;t?(e=t.symbolElement||t.patternElement||t.element||this.element,s=t.precision,!1===(t=Object.assign(Object.assign({},t),{symbolElement:void 0,patternElement:void 0,element:void 0})).initialize&&(i=!1)):e=this.element,this.clear();let n=!1;const a=this.getViewport(),r=e.children,o=r.length;for(let e=0;e<o;e++){const s=r[e];let o;if(T.svg(s))o=new squared.svg.Svg(s,!1),this.setAspectRatio(o,s.viewBox.baseVal),n=!0;else if(T.g(s))o=new squared.svg.SvgG(s),this.setAspectRatio(o);else if(T.use(s)){const t=M(s);if(t)if(T.symbol(t))o=new squared.svg.SvgUseSymbol(s,t),this.setAspectRatio(o,t.viewBox.baseVal),n=!0;else if(T.image(t))o=new squared.svg.SvgImage(s,t);else if(T.shape(t)){const e=Ps(s,a);e?(o=new squared.svg.SvgUsePattern(s,t,e),this.setAspectRatio(o)):o=new squared.svg.SvgUse(s,t,i)}}else if(T.image(s))o=new squared.svg.SvgImage(s);else if(T.shape(s)){const t=Ps(s,a);t?(o=new squared.svg.SvgShapePattern(s,t),this.setAspectRatio(o)):o=new squared.svg.SvgShape(s,i)}o&&(this.append(o,a),o.build(t))}const l=this.aspectRatio;if(tt.asSvg(this)&&this.documentRoot)(l.x<0||l.y<0)&&this.clipViewBox(l.x,l.y,l.width,l.height,s,!0);else if(n&&this.hasViewBox()&&(0!==l.x||0!==l.y)){const{left:t,top:e}=tt.getBoxRect(this.getPathAll(!1)),i=this.refitX(l.x),n=this.refitY(l.y);(t<i||e<n)&&this.clipViewBox(t,e,this.refitSize(l.width),this.refitSize(l.height),s)}}hasViewBox(){return tt.asSvg(this)&&!!this.element.viewBox.baseVal||tt.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}clipViewBox(t,e,s,i,n,a=!1){a&&(s-=t,i-=e,t=t<0?-1*t:0,e=e<0?-1*e:0),this.clipRegion=tt.drawRect(s,i,t,e,n)}synchronize(t){this.each(e=>e.synchronize(t))}refitX(t){const e=this.aspectRatio;return(t-e.x)*e.unit-e.parent.x+e.position.x}refitY(t){const e=this.aspectRatio;return(t-e.y)*e.unit-e.parent.y+e.position.y}refitSize(t){return t*this.aspectRatio.unit}refitPoints(t){const e=this.aspectRatio.unit;for(const s of t)s.x=this.refitX(s.x),s.y=this.refitY(s.y),void 0!==s.rx&&void 0!==s.ry&&(s.rx*=e,s.ry*=e);return t}getPathAll(t=!0){var e;const s=[];for(const i of t?this.cascade():this)if(tt.isShape(i)){const t=null===(e=i.path)||void 0===e?void 0:e.value;t&&s.push(t)}return s}getViewport(){return this.viewport||tt.asSvg(this)&&this||void 0}setAspectRatio(t,e){const s=function(t){for(;t;){if(t.hasViewBox())return t;t=t.parent}}(this);if(s){const i=t.aspectRatio,n=s.aspectRatio;if(e){Es(e,i);const{width:t,height:a}=i;if(t>0&&a>0){const e=t/a,r=n.width||s.viewBox.width,o=n.height||s.viewBox.height,l=r/o;l>e?i.position.x=(r-o*e)/2:l<e&&(i.position.y=(o-r*(1/e))/2),i.unit=Math.min(r/t,o/a)}}const{parent:a,position:r,unit:o,x:l,y:c}=n;i.parent.x=l+l*(o-1),i.position.x*=n.unit,i.position.x+=r.x-a.x,i.parent.y=c+c*(o-1),i.position.y*=o,i.position.y+=r.y-a.y,i.unit*=o}}set clipRegion(t){""!==t?this._clipRegion.push(t):this._clipRegion.length=0}get clipRegion(){const t=this._clipRegion;return t.length?t.join(";"):""}get requireRefit(){const t=this.aspectRatio;return 0!==t.x||0!==t.y||0!==t.position.x||0!==t.position.y||0!==t.parent.x||0!==t.parent.y||1!==t.unit}get instanceType(){return 2}}const Fs=squared.lib,{parseColor:Cs}=Fs.color,{getNamedItem:Gs}=Fs.dom,{cloneObject:Os}=Fs.util;function Ls(t){const e=[],s=t.getElementsByTagName("stop"),i=s.length;for(let t=0;t<i;t++){const i=s[t],n=Cs(Gs(i,"stop-color"),parseFloat(Gs(i,"stop-opacity")||"1"));n&&e.push({color:n,offset:parseFloat(Gs(i,"offset"))/100})}return e}function Bs(t,...e){const s={};for(const i of e){const e=t[i];if(e){const{value:t,valueAsString:n}=e.baseVal;s[i]=t,s[i+"AsString"]=n}}return s}class $s extends(Ue(Ms(it(Vs(Ns))))){constructor(t,e=!0){super(t),this.element=t,this.documentRoot=e,this.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},this.init()}build(t){var e;this.precision=null===(e=t)||void 0===e?void 0:e.precision,this.setRect(),super.build(t)}synchronize(t){!this.documentRoot&&this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}init(){const t=this.element;this.documentRoot&&(Os(t.viewBox.baseVal,this.aspectRatio),t.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(e=>{var s;const i=M(e,t);i&&(null===(s=e.parentElement)||void 0===s||s.removeChild(e),i.appendChild(e))})),this.setDefinitions(t),t.querySelectorAll("defs").forEach(t=>this.setDefinitions(t))}setDefinitions(t){const e=this.definitions;t.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(t=>{let s=t.id;s&&(s="#"+s,T.clipPath(t)?e.clipPath.set(s,t):T.pattern(t)?e.pattern.set(s,t):T.linearGradient(t)?e.gradient.set(s,Object.assign({type:"linear",element:t,spreadMethod:t.spreadMethod.baseVal,colorStops:Ls(t)},Bs(t,"x1","x2","y1","y2"))):T.radialGradient(t)&&e.gradient.set(s,Object.assign({type:"radial",element:t,spreadMethod:t.spreadMethod.baseVal,colorStops:Ls(t)},Bs(t,"cx","cy","r","fx","fy","fr"))))})}get viewBox(){return this.element.viewBox.baseVal||_(this.element)}get instanceType(){return 18}}class zs{constructor(t){this.element=t}build(t){}synchronize(t){}get instanceType(){return 4}}const Is=squared.lib,{parseColor:Xs}=Is.color,{calculateVar:qs,getFontSize:js,isCustomProperty:Ds,isLength:Ys,isPercent:Us,parseUnit:Ks}=Is.css,{CSS:Ws,STRING:Hs,XML:Zs}=Is.regex,{convertCamelCase:Qs,convertFloat:Js,isNumber:ti,isString:ei,joinMap:si,objectMap:ii,replaceMap:ni}=Is.util,ai=Hs.LENGTH_PERCENTAGE,ri={url:Ws.URL,polygon:/polygon\(([^)]+)\)/,inset:RegExp(`inset\\(${ai}\\s?${ai}?\\s?${ai}?\\s?${ai}?\\)`),circle:RegExp(`circle\\(${ai}(?: at ${ai} ${ai})?\\)`),ellipse:RegExp(`ellipse\\(${ai} ${ai}(?: at ${ai} ${ai})?\\)`)};var oi=t=>class extends t{setPaint(t,e){var s,i,n;this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity",!1),this.setAttribute("fill-rule"),this.setAttribute("stroke"),this.setAttribute("stroke-opacity",!1),this.setAttribute("stroke-width"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");const a=this.getAttribute("clip-path",!0,!1);if(""!==a&&"none"!==a)for(const r in ri){const o=ri[r].exec(a);if(o){if("url"===r)return void(this.clipPath=o[1]);if(null===(s=t)||void 0===s?void 0:s.length){const{top:s,right:a,bottom:l,left:c}=tt.getBoxRect(t),h=a-c,u=l-s,f=this.parent;switch(r){case"inset":{let t=0,n=0,r=this.convertLength(o[1],u),d=0;o[4]?(t=c+this.convertLength(o[4],h),n=a-this.convertLength(o[2],h),d=l-this.convertLength(o[3],u)):o[2]?(t=this.convertLength(o[2],h),n=a-t,d=l-(o[3]?this.convertLength(o[3],u):r),t+=c):(t=c+r,n=a-r,d=l-r),r+=s;const p=[{x:t,y:r},{x:n,y:r},{x:n,y:d},{x:t,y:d}];return null===(i=f)||void 0===i||i.refitPoints(p),void(this.clipPath=tt.drawPolygon(p,e))}case"polygon":{const t=ii(o[1].split(Zs.SEPARATOR),t=>{let[e,i]=ni(t.trim().split(" "),(t,e)=>this.convertLength(t,0===e?h:u));return e+=c,i+=s,{x:e,y:i}});return null===(n=f)||void 0===n||n.refitPoints(t),void(this.clipPath=tt.drawPolygon(t,e))}default:if("circle"===r||"ellipse"===r){const t=h<u?h:u;let i,n;"circle"===r?(i=this.convertLength(o[1],t),n=i):(i=this.convertLength(o[1],h),n=this.convertLength(o[2],u));let a=c,l=s;const d=o.length;d>=4&&(a+=this.convertLength(o[d-2],t),l+=this.convertLength(o[d-1],t)),f&&(a=f.refitX(a),l=f.refitX(l),i=f.refitSize(i),n=f.refitSize(n)),this.clipPath=tt.drawEllipse(a,l,i,n,e)}return}}}}}setAttribute(t,e=!0,s=!0){let i=this.getAttribute(t,e,s);if(ei(i)){if(Ds(i)){const e=qs(this.element,i,t);void 0!==e&&(i=""+e)}switch(t){case"stroke-dasharray":i="none"!==i?si(i.split(/,\s*/),t=>""+this.convertLength(t),", ",!1):"";break;case"stroke-dashoffset":case"stroke-width":i=""+this.convertLength(i);break;case"fill":case"stroke":{const e=w(i);if(""!==e)this[t+"Pattern"]=e;else{let e;switch(i.toLowerCase()){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[t]="none";break;case"currentcolor":e=Xs(this.color||V(this.element,t));break;default:e=Xs(i)}e&&(this[t]=e.value)}return}}this[Qs(t)]=i}}getAttribute(t,e=!0,s=!0){let i=V(this.element,t,e);if(s&&!ei(i)){if(this.patternParent)switch(t){case"fill-opacity":case"stroke-opacity":break;default:return i}let s=this.useParent||this.parent;for(;s&&(i=V(s.element,t,e),!ei(i));)s=s.parent}return i}convertLength(t,e){if(!ti(t)){if(Ys(t))return Ks(t,js(this.element));if(Us(t))return Math.round(("number"==typeof e?e:this.element.getBoundingClientRect()[e||"width"])*parseFloat(t)/100)}return Js(t)}resetPaint(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}};class li extends(oi(Vs(Ns))){constructor(t){super(t),this.element=t}build(t){var e;super.build(t),this.setPaint(this.getPathAll(),null===(e=t)||void 0===e?void 0:e.precision)}get instanceType(){return 34}}const{resolvePath:ci}=squared.lib.util;class hi extends(Ms(it(Vs(zs)))){constructor(t,e){super(t),this.element=t,this.imageElement=null,this.__get_transforms=!1,this.__get_animations=!1,e&&(this.imageElement=e)}build(){this.setRect()}extract(t){const e=t?tt.filterTransforms(this.transforms,t):this.transforms;let{x:s,y:i,width:n,height:a}=this;if(e.length){e.reverse();for(const t of e){const e=t.matrix,r=s;switch(s=x.applyX(e,r,i),i=x.applyY(e,r,i),t.type){case SVGTransform.SVG_TRANSFORM_SCALE:n*=e.a,a*=e.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==t.angle&&(e.a<0&&(s+=e.a*n),e.c<0&&(s+=e.c*n),e.b<0&&(i+=e.b*a),e.d<0&&(i+=e.d*a),this.rotateAngle?this.rotateAngle+=t.angle:this.rotateAngle=t.angle)}}this.transformed=e}const{parent:r,translationOffset:o}=this;r&&(s=r.refitX(s),i=r.refitY(i),n=r.refitSize(n),a=r.refitSize(a)),o&&(s+=o.x,i+=o.y),this.setBaseValue("x",s),this.setBaseValue("y",i),this.setBaseValue("width",n),this.setBaseValue("height",a)}set x(t){super.x=t}get x(){const t=super.x;if(0===t){const t=this.imageElement;if(t)return t.x.baseVal.value}return t}set y(t){super.y=t}get y(){const t=super.y;if(0===t){const t=this.imageElement;if(t)return t.y.baseVal.value}return t}set width(t){super.width=t}get width(){const t=super.width;if(0===t){const t=this.imageElement;if(t)return t.width.baseVal.value}return t}set height(t){super.height=t}get height(){const t=super.height;if(0===t){const t=this.imageElement;if(t)return t.height.baseVal.value}return t}get href(){const t=this.imageElement||this.element;return T.image(t)?ci(t.href.baseVal):""}get transforms(){let t=super.transforms;if(!this.__get_transforms){const e=this.imageElement;e&&(t=t.concat(this.getTransforms(e)),this._transforms=t),this.__get_transforms=!0}return t}get animations(){let t=super.animations;if(!this.__get_animations){const e=this.imageElement;e&&(t=t.concat(this.getAnimations(e)),this._animations=t),this.__get_animations=!0}return t}get instanceType(){return 4100}}const ui=squared.lib,{getNamedItem:fi}=ui.dom,{equal:di,lessEqual:pi,nextMultiple:gi,offsetAngleX:mi,offsetAngleY:yi,relativeAngle:vi,truncateFraction:bi}=ui.math,{cloneArray:Si,convertInt:ki,convertFloat:Ti}=ui.util,xi=/^stroke-dash/;function Ai(t,e,s,i){const n=t[0],a=t[t.length-1];if(void 0!==s)switch(e){case"x":s-=n.start.x;break;case"x1":case"cx":return n.start.x=s,void(n.coordinates[0]=s);case"x2":return a.end.x=s,void(a.coordinates[0]=s)}if(void 0!==i)switch(e){case"y":i-=n.start.y;break;case"y1":case"cy":return n.start.y=i,void(n.coordinates[1]=i);case"y2":return a.end.y=i,void(a.coordinates[1]=i)}for(const e of t){const{coordinates:t,value:n}=e,a=t.length;for(let r=0,o=0;r<a;r+=2,o++)void 0!==s&&(e.relative||(t[r]+=s),n[o].x+=s),void 0!==i&&(e.relative||(t[r+1]+=i),n[o].y+=i)}}function _i(t,e,s){const i=t.length;for(let n=0;n<i;n++){const i=t[n];if("A"===i.key.toUpperCase()){if(void 0!==e){const s=e-i.radiusX;i.radiusX=e,i.coordinates[0]=2*e*(i.coordinates[0]<0?-1:1),1===n&&(t[0].coordinates[0]-=s,t[0].end.x-=s)}void 0!==s&&(i.radiusY=s)}}}class Vi extends(oi(it(zs))){constructor(t){super(t),this.element=t,this.name="",this.value="",this.baseValue="",this.init()}static extrapolate(t,e,s,i,n,a){var r,o,l;const c=!!(i||(null===(o=null===(r=n)||void 0===r?void 0:r.parent)||void 0===o?void 0:o.requireRefit)),h=[];let u;const f=s.length;for(let r=0;r<f;r++){if("d"===t)h[r]=s[r];else if("points"===t){const t=tt.convertPoints(tt.parseCoordinates(s[r]));t.length&&(h[r]=n&&T.polygon(n.element)?tt.drawPolygon(t,a):tt.drawPolyline(t,a))}else if(e){void 0===u&&(u=tt.getPathCommands(e));const i=parseFloat(s[r]);if(!isNaN(i)){const e=r<f-1?Si(u,[],!0):u;switch(t){case"x":case"x1":case"x2":case"cx":Ai(e,t,i);break;case"y":case"y1":case"y2":case"cy":Ai(e,t,void 0,i);break;case"r":_i(e,i,i);break;case"rx":_i(e,i);break;case"ry":_i(e,void 0,i);break;case"width":for(const t of[1,2]){const s=e[t];switch(s.key){case"m":case"l":case"h":s.coordinates[0]=i*(s.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":s.coordinates[0]=e[0].end.x+i}}break;case"height":for(const t of[2,3]){const s=e[t];switch(s.key){case"m":case"l":case"v":s.coordinates[1]=i*(s.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":s.coordinates[1]=e[0].end.y+i}}break;default:h[r]="";continue}h[r]=tt.drawPath(e,a)}}h[r]?c&&(h[r]=tt.transformRefit(h[r],i,n,null===(l=n)||void 0===l?void 0:l.parent,a)):h[r]=""}return h}build(t){var e,s;let i;(null===(e=t)||void 0===e?void 0:e.transforms)&&(i=tt.filterTransforms(t.transforms,null===(s=t.exclude)||void 0===s?void 0:s[this.element.tagName])),this.draw(i,t)}draw(t,e){var s,i,n,a,r,o,l,c;let h,u;e&&({residual:h,precision:u}=e);const f=this.element,d=this.parent,p=this.patternParent,g=!0===(null===(s=d)||void 0===s?void 0:s.requireRefit),m=2===(null===(i=p)||void 0===i?void 0:i.patternContentUnits);let y;if(this.transformed=void 0,T.path(f)){if(y=this.getBaseValue("d"),(null===(n=t)||void 0===n?void 0:n.length)||g||m){const e=tt.getPathCommands(y);if(e.length){let s=tt.getPathPoints(e);s.length&&(m&&p.patternRefitPoints(s),(null===(a=t)||void 0===a?void 0:a.length)&&("function"==typeof h&&([this.transformResidual,t]=h.call(this,f,t)),t.length&&(s=tt.applyTransforms(t,s,A.origin(this.element)),this.transformed=t)),this.baseValue=tt.drawPath(tt.syncPathPoints(g?Si(e,[],!0):e,g?Si(s,[],!0):s,!!this.transformed),u),g?(d.refitPoints(s),y=tt.drawPath(tt.syncPathPoints(e,s,!!this.transformed),u)):y=this.baseValue)}}""===this.baseValue&&(this.baseValue=y)}else if(T.line(f)){let e=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];m&&p.patternRefitPoints(e),(null===(r=t)||void 0===r?void 0:r.length)&&("function"==typeof h&&([this.transformResidual,t]=h.call(this,f,t)),t.length&&(e=tt.applyTransforms(t,e,A.origin(this.element)),this.transformed=t));const s=()=>tt.drawPolyline(e,u);this.baseValue=s(),g?(d.refitPoints(e),y=s()):y=this.baseValue}else if(T.circle(f)||T.ellipse(f)){const e=this.getBaseValue("cx"),s=this.getBaseValue("cy");let i,n;T.ellipse(f)?(i=this.getBaseValue("rx"),n=this.getBaseValue("ry")):(i=this.getBaseValue("r"),n=i);let a=[{x:e,y:s,rx:i,ry:n}];m&&p.patternRefitPoints(a),(null===(o=t)||void 0===o?void 0:o.length)&&("function"==typeof h&&([this.transformResidual,t]=h.call(this,f,t,i,n)),t.length&&(a=tt.applyTransforms(t,a,A.origin(this.element)),this.transformed=t));const r=a[0],l=()=>tt.drawEllipse(r.x,r.y,r.rx,r.ry,u);this.baseValue=l(),g?(d.refitPoints(a),y=l()):y=this.baseValue}else if(T.rect(f)){let e=this.getBaseValue("x"),s=this.getBaseValue("y"),i=this.getBaseValue("width"),n=this.getBaseValue("height");if(null===(l=t)||void 0===l?void 0:l.length){let a=[{x:e,y:s},{x:e+i,y:s},{x:e+i,y:s+n},{x:e,y:s+n}];m&&p.patternRefitPoints(a),"function"==typeof h&&([this.transformResidual,t]=h.call(this,f,t)),t.length&&(a=tt.applyTransforms(t,a,A.origin(this.element)),this.transformed=t);const r=()=>tt.drawPolygon(a,u);this.baseValue=r(),g?(d.refitPoints(a),y=r()):y=this.baseValue}else{m&&(e=p.patternRefitX(e),s=p.patternRefitY(s),i=p.patternRefitX(i),n=p.patternRefitY(n));const t=()=>tt.drawRect(i,n,e,s,u);this.baseValue=t(),g?(e=d.refitX(e),s=d.refitY(s),i=d.refitSize(i),n=d.refitSize(n),y=t()):y=this.baseValue}}else if(T.polygon(f)||T.polyline(f)){let e=this.getBaseValue("points");m&&p.patternRefitPoints(e),(null===(c=t)||void 0===c?void 0:c.length)&&("function"==typeof h&&([this.transformResidual,t]=h.call(this,f,t)),t.length&&(e=tt.applyTransforms(t,e,A.origin(this.element)),this.transformed=t));const s=()=>T.polygon(f)?tt.drawPolygon(e,u):tt.drawPolyline(e,u);this.baseValue=s(),g?(null===this.transformed&&(e=tt.clonePoints(e)),d.refitPoints(e),y=s()):y=this.baseValue}else y="";return this.value=y,this.setPaint([y],u),y}extendLength(t,e){if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":{const s=tt.getPathCommands(this.value),i=s.length;if(i){const n=s[0],a=n.start,r=s[i-1],o=r.end,l=r.key.toUpperCase(),{leading:c,trailing:h}=t;let u=!1;if("Z"!==l&&(a.x!==o.x||a.y!==o.y)){if(c>0){let t;if(n.value.length>1?t=n.value[1]:i>1&&(t=s[1].start),t){const e=n.coordinates;if(t.x===a.x)e[1]+=a.y>t.y?c:-c,u=!0;else if(t.y===a.y)e[0]+=a.x>t.x?c:-c,u=!0;else{const s=vi(t,a);e[0]-=mi(s,c),e[1]-=yi(s,c),u=!0}}}switch(l){case"M":case"L":if(h>0){let t;if(1===i){const e=n.value;e.length>1&&(t=e[e.length-2])}else{const e=r.value;t=e.length>1?e[e.length-2]:s[s.length-2].end}if(t){const e=r.coordinates;if(t.x===o.x)e[1]+=o.y>t.y?h:-h,u=!0;else if(t.y===o.y)e[0]+=o.x>t.x?h:-h,u=!0;else{const s=vi(t,o);e[0]+=mi(s,h),e[1]+=yi(s,h),u=!0}}}break;case"H":case"V":{const t=r.coordinates,e="H"===l?0:1;t[e]+=(c+h)*(t[e]>=0?1:-1),u=!0;break}}}if(u)return t.leading=c,t.trailing=h,t.path=tt.drawPath(s,e),t;break}}}}flattenStrokeDash(t,e,s,i,n){let a,r,o,l;i||(i=s);let c=0;const h=t=>r[t%a];if(n)({dashArray:r,dashArrayTotal:o,extendedLength:l,startIndex:c}=n),a=r.length,n.items=[],n.leading=0;else{a=t.length,r=t.slice(0);const u=gi([2,a]);o=0;for(let e=0;e<u;e++){const s=t[e%a];o+=s,e>=a&&r.push(s)}if(a=u,e>0){let t=h(0);for(;e-t>=0;)e-=t,t=h(++c);c%=a}else if(e<0){for(r.reverse();e<0;)e+=h(c++);c=a-c%a,r.reverse()}l=i,n={dashArray:r,dashArrayTotal:o,items:[],leading:0,trailing:0,startIndex:c,extendedLength:l,lengthRatio:s/(i||s)}}let u,f=0;for(let t=0,s=0;;t+=s,c++){let i,a;s=h(c),t<e?(n.leading=e-t,i=0,a=s-n.leading):(i=t-e,a=s);const r=bi(i/l);if(u=bi(r+a/l),c%2==0?r<1&&(n.items.push({start:r,end:Math.min(u,1),length:s}),f+=s):f+=s,u>=1)break}for(n.trailing=bi((u-1)*l);f%o!=0;){const t=h(++c);n.trailing+=t,f+=t}return 0===n.items.length?n.items.push({start:1,end:1}):(n.leadingOffset=bi(n.items[0].start*l),n.leading*=n.lengthRatio,n.trailing*=n.lengthRatio),n}extractStrokeDash(t,e){const s=ki(this.strokeWidth);let i,n="",a="";if(s>0){let r=tt.parseCoordinates(this.strokeDasharray);if(r.length){const o=this.totalLength,l=this.pathLength||o,c=[];let h,u=ki(this.strokeDashoffset),f=0;const d=(t,e,s,i=0)=>{const n=this.flattenStrokeDash(t,e,o,l);return 0===c.length&&(h=n),f=Math.max(f,n.items.length),c.push({items:n.items,delay:s,duration:i}),n.items};if(i=d(r,u,0),t){const p=t.slice(0).sort((t,e)=>{if(xi.test(t.attributeName)&&xi.test(e.attributeName)){if(t.delay!==e.delay)return t.delay<e.delay?-1:1;if(tt.asSet(t)&&tt.asAnimate(e)||void 0===t.animationElement&&e.animationElement)return-1;if(tt.asAnimate(t)&&tt.asSet(e)||t.animationElement&&void 0===e.animationElement)return 1}return 0}),g=new Ut(p,"stroke-dasharray","stroke-dashoffset"),m=(t,e=!1)=>{const s=g.get("stroke-dashoffset",t,e);return s?parseFloat(s):u},y=(t,e=!1)=>{const s=g.get("stroke-dasharray",t,e);return s?tt.parseCoordinates(s):r},v=t=>t?t.start+" "+t.end:"1 1";if(p.length>1)for(let t=0;t<p.length;t++){const e=p[t];g.has(e.attributeName,e.delay,e)||p.splice(t--,1)}let b=t=>{let e=u;const s=p.length;for(let i=t;i<s;i++){const t=p[i];if("stroke-dasharray"===t.attributeName){const s=g.get("stroke-dashoffset",t.delay);s&&(e=parseFloat(s));for(const s of tt.asAnimate(t)?g.evaluateStart(t):[t.to])f=Math.max(f,this.flattenStrokeDash(tt.parseCoordinates(s),e,o,l).items.length)}}},S=[],k=!1;for(let t=0;t<p.length;t++){const T=p[t];if(T.setterType){const t=(t,e)=>{d(t,e,T.delay,T.fillReplace&&T.duration>0?T.duration:0),k=!0};switch(T.attributeName){case"stroke-dasharray":r=tt.parseCoordinates(T.to),t(r,m(T.delay));continue;case"stroke-dashoffset":u=ki(T.to),t(y(T.delay),u);continue}}else if(tt.asAnimate(T)&&T.playable)switch(g.evaluateStart(T),T.attributeName){case"stroke-dasharray":{b&&(b(t),b=void 0);const e=m(T.delay),s=this.flattenStrokeDash(y(T.delay),e,o,l).items,i=[],n=[];for(let t=0;t<f;t++){const e=new $t(this.element);e.id=t,e.baseValue=v(s[t]),e.attributeName="stroke-dasharray",e.delay=T.delay,e.duration=T.duration,e.iterationCount=T.iterationCount,e.fillMode=T.fillMode,n[t]=[],i.push(e)}for(const t of T.values){const s=this.flattenStrokeDash(tt.parseCoordinates(t),e,o,l).items;for(let t=0;t<f;t++)n[t].push(v(s[t]))}const{keyTimes:a,keySplines:r}=T,c=T.timingFunction;for(let t=0;t<f;t++){const e=i[t];e.values=n[t],e.keyTimes=a,r?e.keySplines=r:c&&(e.timingFunction=c)}if(T.fillReplace){const t=T.getTotalDuration(),e=this.flattenStrokeDash(y(t),m(t),o,l).items;for(let t=0;t<f;t++)i[t].replaceValue=v(e[t])}S=S.concat(i),k=!0;continue}case"stroke-dashoffset":{const t=T.duration,r=parseFloat(T.values[0]),d=[],p=[];let m=0,y=0;u===r||0!==T.delay||T.fillReplace||(h=this.flattenStrokeDash(h.dashArray,r,o,l),i=h.items,c[0].items=i,f=Math.max(f,h.items.length),u=r);let v,b=o,S=1;if((h.leading>0||h.trailing>0)&&(this.extendLength(h,e),h.path)){const t=tt.getBoxRect([this.value]);b=bi(N(h.path)),S=b/o,h.extendedLength=this.pathLength,h.extendedLength>0?h.extendedLength*=S:h.extendedLength=b,i=this.flattenStrokeDash(h.dashArray,0,o,l,h).items,c[0].items=i,f=Math.max(f,i.length);const e=Math.ceil(s/2);n=h.path,a=tt.drawRect(t.right-t.left,t.bottom-t.top+2*e,t.left,t.top-e)}if(T.fillReplace&&-1!==T.iterationCount){const t=Ti(g.get(T.attributeName,T.getTotalDuration()));if(t!==u){let e=Math.abs(t-u)%b/b;t>u&&(e=1-e),v=""+e}}const x=T.keyTimes,A=T.values,_=x.length;for(let e=0;e<_;e++){const s=0===e?u:parseFloat(A[e-1]),i=parseFloat(A[e]),n=Math.abs(i-s),a=x[e];if(0===n){if(e>0){m=a,p.push(m);const t=d.length;t?(d.push(d[t-1]),y=parseFloat(d[t-1])):(d.push("0"),y=0)}continue}const r=i>s,o=e>0?(a-x[e-1])*t:0,l=n*h.lengthRatio;let c=l/b,f=l,g=0;const v=e=>e/l*o/t,S=()=>e>0&&d[d.length-1]===(r?"1":"0"),k=(t,e=!1)=>{if(g=(f-t)/b,e){const t=bi(g);r?t>0&&(g=1-g):0===t&&(g=1)}},T=()=>{S()||(p.push(0===m?0:bi(m)),d.push(r?"1":"0"))},_=()=>{m=a,p.push(m);const t=bi(g);d.push(""+t),y=t>0&&t<1?g:0};if(0===e)f%=b,k(0),r&&(g=1-g),_();else{if(y>0){const t=r?y:1-y,e=bi(t*b);if(pi(f,e)){k(0),r?g=y-g:g+=y,_();continue}d.push(r?"0":"1"),m+=v(e),p.push(bi(m)),c=bi(c-t),f=bi(f-e)}if(di(f,b)&&(f=b),f>b){c=Math.floor(c);const t=c*b;t===f&&c--,k(t,!0)}else c=0,k(0,!0);for(;c>0;)T(),d.push(r?"0":"1"),m+=v(b),p.push(bi(m)),c--;T(),_()}}T.baseValue="0",T.replaceValue=v,T.values=d,T.keyTimes=p;const V=T.timingFunction;V&&(T.keySplines=void 0,T.timingFunction=V),k=!0;break}}S.push(T)}if(k){const e=c.length;for(let t=0;t<e;t++){const{delay:s,duration:n,items:a}=c[t];if(a===i)for(let t=a.length;t<f;t++)a.push({start:1,end:1});else{const t=e>2?this.flattenStrokeDash(y(s-1),m(s-1),o,l).items:i;for(let e=0;e<f;e++){const i=new bt(this.element);i.id=e,i.attributeName="stroke-dasharray",i.baseValue=v(t[e]),i.delay=s,i.to=v(a[e]),i.duration=n,i.fillFreeze=0===n,S.push(i)}}}t=S}}}}return[t,i,n,a]}init(){const t=this.element;T.path(t)?this.setBaseValue("d"):T.line(t)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):T.rect(t)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):T.circle(t)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):T.ellipse(t)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(T.polygon(t)||T.polyline(t))&&this.setBaseValue("points",tt.clonePoints(t.points))}get transforms(){let t=this._transforms;return void 0===t&&(t=tt.filterTransforms(A.parse(this.element)||tt.convertTransforms(this.element.transform.baseVal)),this._transforms=t),t}get pathLength(){return Ti(fi(this.element,"pathLength"))}get totalLength(){return this.element.getTotalLength()}get instanceType(){return 1028}}class Ri extends(Vs(Ns)){constructor(t,e){super(t),this.element=t,this.patternElement=e}build(t){super.build(Object.assign(Object.assign({},t),{patternElement:this.patternElement,initialize:!1}))}get animations(){return[]}get instanceType(){return 130}}class wi extends(Ue(Vs(zs))){constructor(t,e=!0){super(t),this.element=t,e&&this.setPath()}setPath(){this.path=new Vi(this.element)}build(t){const e=this.path;e&&(e.parent=this.parent,e.build(Object.assign(Object.assign({},t),{transforms:this.transforms})))}synchronize(t){var e;if(this.animations.length){const s=this.path;if(s){const i=null===(e=t)||void 0===e?void 0:e.element;i?this.animateSequentially(this.getAnimateShape(i),void 0,s,t):this.animateSequentially(this.getAnimateShape(this.element),this.getAnimateTransform(t),s,t)}}}set path(t){this._path=t,t&&(t.name=this.name)}get path(){return this._path}get instanceType(){return 2052}}const Mi=squared.lib,{isPercent:Ei}=Mi.css,{getNamedItem:Pi}=Mi.dom,Ni=t=>Ei(t)?parseFloat(t)/100:parseFloat(t);class Fi extends(oi(it(Vs(Ns)))){constructor(t,e){super(t),this.element=t,this.patternElement=e,this.__get_transforms=!1,this.patternUnits="userSpaceOnUse"===Pi(this.patternElement,"patternUnits")?1:2,this.patternContentUnits="objectBoundingBox"===Pi(this.patternElement,"patternContentUnits")?2:1}build(t){var e,s;const i=(null===(e=t)||void 0===e?void 0:e.element)||this.element,n=new Vi(i);n.build(Object.assign({},t));const a=n.value;if(a){const e=null===(s=t)||void 0===s?void 0:s.precision;this.clipRegion=a,n.clipPath&&(this.clipRegion=n.clipPath);const r=[a];this.setPaint(r,e),this.drawRegion=tt.getBoxRect(r);const{drawRegion:o,fillOpacity:l,patternWidth:c,patternHeight:h,tileWidth:u,tileHeight:f}=this;let d=this.offsetX%u,p=this.offsetY%f,g=0,m=0,y=o.right,v=o.bottom;2===this.patternUnits&&(y-=o.left,v-=o.top,g=o.left,m=o.top);let b=0;for(0!==d&&(d=u-d,y+=u),0!==p&&(p=f-p,v+=f);v>0;){const s=this.patternElement,n=2===this.patternContentUnits,a=m+b*f-p;let r=y,o=0;do{const p=g+o*u-d,m=new Ri(i,s);m.build(Object.assign({},t));for(const s of m.cascade())if(tt.isShape(s)){s.setPath();const i=s.path;i&&(i.patternParent=this,n?i.refitBaseValue(p/c,a/h,e):i.refitBaseValue(p,a,e),i.build(Object.assign(Object.assign({},t),{transforms:s.transforms})),i.fillOpacity=""+parseFloat(i.fillOpacity)*parseFloat(l),i.clipPath=tt.drawRect(u,f,p,a,e)+(""!==i.clipPath?";"+i.clipPath:""))}this.append(m),r-=u,o++}while(r>0);b++,v-=f}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){n.fill="",n.fillOpacity="0",n.stroke=this.stroke,n.strokeWidth=this.strokeWidth;const t=new wi(i,!1);t.path=n,this.append(t)}}}patternRefitX(t){return this.drawRegion?t*this.patternWidth:t}patternRefitY(t){return this.drawRegion?t*this.patternHeight:t}patternRefitPoints(t){if(this.drawRegion){const e=this.patternWidth,s=this.patternHeight;for(const i of t)if(i.x*=e,i.y*=s,void 0!==i.rx&&void 0!==i.ry)if(i.rx===i.ry){const t=Math.min(e,s);i.rx*=t,i.ry*=t}else i.rx*=e,i.ry*=s}return t}get patternWidth(){const t=this.drawRegion;return t?t.right-t.left:0}get patternHeight(){const t=this.drawRegion;return t?t.bottom-t.top:0}get transforms(){if(!this.__get_transforms){const t=this.patternElement,e=tt.convertTransforms(t.patternTransform.baseVal);if(e.length){const s=A.rotateOrigin(t,"patternTransform"),i=this.patternWidth/2,n=this.patternHeight/2;for(const t of e)switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;s.length;){const e=s.shift();if(e.angle===t.angle){t.origin={x:i+e.x,y:n+e.y};break}}if(t.origin)break;default:t.origin={x:i,y:n}}this._transforms=super.transforms.concat(tt.filterTransforms(e))}this.__get_transforms=!0}return super.transforms}get offsetX(){const t=this.patternElement.x.baseVal;return 2===this.patternUnits?this.patternWidth*Ni(t.valueAsString):t.value}get offsetY(){const t=this.patternElement.y.baseVal;return 2===this.patternUnits?this.patternHeight*Ni(t.valueAsString):t.value}get tileWidth(){const t=this.patternElement.width.baseVal;return 2===this.patternUnits?this.patternWidth*Ni(t.valueAsString):t.value}get tileHeight(){const t=this.patternElement.height.baseVal;return 2===this.patternUnits?this.patternHeight*Ni(t.valueAsString):t.value}get instanceType(){return 258}}class Ci extends(oi(Ms(it(wi)))){constructor(t,e,s=!0){super(t,!1),this.element=t,this.shapeElement=e,this.__get_transforms=!1,this.__get_animations=!1,s&&this.setPath()}setPath(){const t=new Vi(this.shapeElement);t.useParent=this,this.path=t}build(t){var e;super.build(t);const s=this.path;this.setPaint(s?[s.value]:void 0,null===(e=t)||void 0===e?void 0:e.precision)}synchronize(t){t=Object.assign(Object.assign({},t),{element:this.shapeElement}),this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}get transforms(){let t=super.transforms;return this.__get_transforms||(t=t.concat(this.getTransforms(this.shapeElement)),this._transforms=t,this.__get_transforms=!0),t}get animations(){let t=super.animations;return this.__get_animations||(t=t.concat(this.getAnimations(this.shapeElement)),this._animations=t,this.__get_animations=!0),t}get instanceType(){return 10244}}const{filterArray:Gi}=squared.lib.util;class Oi extends(Ue(Ms(Fi))){constructor(t,e,s){super(t,s),this.element=t,this.shapeElement=e}build(t){super.build(Object.assign(Object.assign({},t),{element:this.shapeElement}))}synchronize(t){const e=Gi(this.animations,t=>"x"===t.attributeName||"y"===t.attributeName||void 0===this.verifyBaseValue(t.attributeName,0)),s=this.getAnimateTransform(t);(e.length||s.length)&&this.animateSequentially(this.getAnimateViewRect(e),s,void 0,t),super.synchronize(t)}get instanceType(){return 514}}class Li extends(oi(Ue(Ms(it(Vs(Ns)))))){constructor(t,e){super(t),this.element=t,this.symbolElement=e}build(t){var e;this.setRect(),super.build(Object.assign(Object.assign({},t),{symbolElement:this.symbolElement}));const s=this.getBaseValue("x",0),i=this.getBaseValue("y",0);if(0!==s||0!==i){const t={x:s,y:i};for(const e of this.cascade())e.translationOffset=t}this.setPaint(this.getPathAll(),null===(e=t)||void 0===e?void 0:e.precision)}synchronize(t){this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(t),void 0,t),super.synchronize(t)}get viewBox(){return this.symbolElement.viewBox.baseVal||_(this.element)}get instanceType(){return 66}}const Bi={constant:Tt,util:F};t.Svg=$s,t.SvgAnimate=$t,t.SvgAnimateMotion=is,t.SvgAnimateTransform=qt,t.SvgAnimation=bt,t.SvgAnimationIntervalMap=Ut,t.SvgBaseVal=it,t.SvgBuild=tt,t.SvgContainer=Ns,t.SvgElement=zs,t.SvgG=li,t.SvgImage=hi,t.SvgPaint=oi,t.SvgPath=Vi,t.SvgPattern=Ri,t.SvgShape=wi,t.SvgShapePattern=Fi,t.SvgSynchronize=Ue,t.SvgUse=Ci,t.SvgUsePattern=Oi,t.SvgUseSymbol=Li,t.SvgView=Vs,t.SvgViewRect=Ms,t.lib=Bi,Object.defineProperty(t,"__esModule",{value:!0})}));
