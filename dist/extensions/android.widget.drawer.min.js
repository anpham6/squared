this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const e=squared.lib,{assignEmptyValue:t,cloneObject:i,includes:n,optionalAsString:a}=e.util,{getElementAsNode:o}=e.session,{NODE_RESOURCE:s}=squared.base.lib.enumeration,r=android.lib,{EXT_ANDROID:d,SUPPORT_ANDROID:u,SUPPORT_ANDROID_X:l}=r.constant,{CONTAINER_NODE:c}=r.enumeration,{createStyleAttribute:m,createViewAttribute:p}=r.util,{Resource:h}=android.base;class g extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=!0,this.require(d.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const t=e.children,i=t.length;if(i){for(let e=0;e<i;e++){const i=t[e];if("NAV"===i.tagName){const e=i.dataset.use;n(e,d.EXTERNAL)||(i.dataset.use=(e?e+", ":"")+d.EXTERNAL)}}return this.application.rootElements.add(e),!0}}return!1}processNode(e,i){const n=p(this.options.self);if(g.findNestedElement(e.element,"android.widget.menu"))t(n,"android","fitsSystemWindows","true"),this.setStyleTheme(e.localSettings.targetAPI);else{const i=p(this.options.navigationView);t(i,"android","layout_gravity",e.localizeString("left"));const n=e.item();n.mergeGravity("layout_gravity",i.android.layout_gravity),n.setLayoutHeight("match_parent"),n.positioned=!0}e.documentRoot=!0,e.renderExclude=!1;const a=e.localSettings.targetAPI<29?u.DRAWER:l.DRAWER;return e.setControlType(a,c.BLOCK),e.exclude(s.FONT_STYLE),e.apply(h.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(d.RESOURCE_STRINGS,"numberResourceValue"))),e.render(i),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:a},complete:!0,remove:!0}}afterParseDocument(){for(const e of this.subscribers){const i=e.element,n=p(this.options.navigationView),o=a(g.findNestedElement(i,"android.widget.menu"),"dataset.layoutName"),s=a(g.findNestedElement(i,d.EXTERNAL),"dataset.layoutName");if(""!==o&&t(n,"app","menu","@menu/"+o),""!==s&&t(n,"app","headerLayout","@layout/"+s),""!==o||""!==s){const i=this.controller;t(n,"android","id",e.documentId.replace("@","@+")+"_navigation"),t(n,"android","fitsSystemWindows","true"),t(n,"android","layout_gravity",e.localizeString("left")),i.addAfterInsideTemplate(e.id,i.renderNodeStatic(e.localSettings.targetAPI<29?u.NAVIGATION_VIEW:l.NAVIGATION_VIEW,h.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(d.RESOURCE_STRINGS,"numberResourceValue")),"wrap_content","match_parent"))}}}postOptimize(e){var t;const i=g.findNestedElement(e.element,"android.widget.coordinator");if(i){const n=o(i,e.sessionId);(null===(t=n)||void 0===t?void 0:t.inlineHeight)&&n.some(e=>e.positioned)&&n.setLayoutHeight("match_parent")}}setStyleTheme(e){const n=this.application.userSettings,a=m(this.options.resource);if(t(a,"name",n.manifestThemeName),t(a,"parent",n.manifestParentThemeName),t(a.items,"android:windowTranslucentStatus","true"),h.addTheme(a),e>=21){const e=m(i(a)),n={};t(e.output,"path","res/values-v21"),t(n,"android:windowDrawsSystemBarBackgrounds","true"),t(n,"android:statusBarColor","@android:color/transparent"),e.items=n,h.addTheme(e)}}}const E=new g("android.widget.drawer",2);return squared&&squared.includeAsync(E),E}();
