this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const e=squared.lib,t=android.lib,{assignEmptyValue:i,cloneObject:n,safeNestedMap:a,includes:o,iterateArray:s}=e.util,{getElementAsNode:r}=e.session,{NODE_RESOURCE:d}=squared.base.lib.enumeration,{EXT_ANDROID:u,SUPPORT_ANDROID:l,SUPPORT_ANDROID_X:c}=t.constant,{CONTAINER_NODE:m}=t.enumeration,{createStyleAttribute:p,createViewAttribute:h}=t.util,N=android.base.Resource;class E extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=!0,this.require(u.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){if(s(e.children,e=>{if("NAV"===e.tagName){const t=e.dataset.use;o(t,u.EXTERNAL)||(e.dataset.use=(t?t+", ":"")+u.EXTERNAL)}}))return this.application.rootElements.add(e),!0}return!1}processNode(e,t){const n=h(this.options.self);if(E.findNestedElement(e.element,"android.widget.menu"))i(n,"android","fitsSystemWindows","true"),this.setStyleTheme(e.api);else{const t=h(this.options.navigationView);i(t,"android","layout_gravity",e.localizeString("left"));const n=e.item();n.mergeGravity("layout_gravity",t.android.layout_gravity),n.setLayoutHeight("match_parent"),n.positioned=!0}e.documentRoot=!0,e.renderExclude=!1;const a=e.api<29?l.DRAWER:c.DRAWER;return e.setControlType(a,m.BLOCK),e.exclude({resource:d.FONT_STYLE}),e.apply(N.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(u.RESOURCE_STRINGS,"numberResourceValue"))),e.render(t),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:a},complete:!0,include:!0,remove:!0}}afterParseDocument(){var e,t;for(const n of this.subscribers){const o=n.element,s=h(this.options.navigationView),r=null===(e=E.findNestedElement(o,"android.widget.menu"))||void 0===e?void 0:e.dataset.layoutName,d=null===(t=E.findNestedElement(o,u.EXTERNAL))||void 0===t?void 0:t.dataset.layoutName,m=a(s,"app");if(r&&i(m,"menu",`@menu/${r}`),d&&i(m,"headerLayout",`@layout/${d}`),r||d){const e=this.controller;i(s,"android","id",`@+id/${n.controlId}_navigation`),i(s,"android","fitsSystemWindows","true"),i(s,"android","layout_gravity",n.localizeString("left")),e.addAfterInsideTemplate(n.id,e.renderNodeStatic({controlName:n.api<29?l.NAVIGATION_VIEW:c.NAVIGATION_VIEW,width:"wrap_content",height:"match_parent"},N.formatOptions(s,this.application.extensionManager.optionValueAsBoolean(u.RESOURCE_STRINGS,"numberResourceValue"))))}}}postOptimize(e){const t=E.findNestedElement(e.element,"android.widget.coordinator");if(t){const i=r(t,e.sessionId);(null==i?void 0:i.inlineHeight)&&i.some(e=>e.positioned)&&i.setLayoutHeight("match_parent")}}setStyleTheme(e){const t=this.application.userSettings,a=p(this.options.resource);if(i(a,"name",t.manifestThemeName),i(a,"parent",t.manifestParentThemeName),i(a.items,"android:windowTranslucentStatus","true"),N.addTheme(a),e>=21){const e=p(n(a)),t={};i(e.output,"path","res/values-v21"),i(t,"android:windowDrawsSystemBarBackgrounds","true"),i(t,"android:statusBarColor","@android:color/transparent"),e.items=t,N.addTheme(e)}}}const g=new E("android.widget.drawer",2);return squared&&squared.includeAsync(g),g}();
