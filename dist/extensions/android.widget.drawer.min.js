this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";var e=android.base.Resource;const t=squared.lib,i=android.lib,{assignEmptyValue:n,cloneObject:a,includes:o,optionalAsString:s}=t.util,{getElementAsNode:r}=t.session,{NODE_RESOURCE:d}=squared.base.lib.enumeration,{EXT_ANDROID:u,SUPPORT_ANDROID:l,SUPPORT_ANDROID_X:c}=i.constant,{CONTAINER_NODE:m}=i.enumeration,{createStyleAttribute:p,createViewAttribute:h}=i.util;class g extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=!0,this.require(u.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const t=e.children,i=t.length;if(i){for(let e=0;e<i;e++){const i=t[e];if("NAV"===i.tagName){const e=i.dataset.use;o(e,u.EXTERNAL)||(i.dataset.use=(e?e+", ":"")+u.EXTERNAL)}}return this.application.rootElements.add(e),!0}}return!1}processNode(t,i){const a=h(this.options.self);if(g.findNestedElement(t.element,"android.widget.menu"))n(a,"android","fitsSystemWindows","true"),this.setStyleTheme(t.api);else{const e=h(this.options.navigationView);n(e,"android","layout_gravity",t.localizeString("left"));const i=t.item();i.mergeGravity("layout_gravity",e.android.layout_gravity),i.setLayoutHeight("match_parent"),i.positioned=!0}t.documentRoot=!0,t.renderExclude=!1;const o=t.api<29?l.DRAWER:c.DRAWER;return t.setControlType(o,m.BLOCK),t.exclude({resource:d.FONT_STYLE}),t.apply(e.formatOptions(a,this.application.extensionManager.optionValueAsBoolean(u.RESOURCE_STRINGS,"numberResourceValue"))),t.render(i),t.setLayoutWidth("match_parent"),t.setLayoutHeight("match_parent"),{output:{type:1,node:t,controlName:o},complete:!0,remove:!0}}afterParseDocument(){for(const t of this.subscribers){const i=t.element,a=h(this.options.navigationView),o=s(g.findNestedElement(i,"android.widget.menu"),"dataset.layoutName"),r=s(g.findNestedElement(i,u.EXTERNAL),"dataset.layoutName");let d=a.app;if(void 0===d&&(d={},a.app=d),""!==o&&n(d,"menu","@menu/"+o),""!==r&&n(d,"headerLayout","@layout/"+r),""!==o||""!==r){const i=this.controller;n(a,"android","id",t.documentId.replace("@","@+")+"_navigation"),n(a,"android","fitsSystemWindows","true"),n(a,"android","layout_gravity",t.localizeString("left")),i.addAfterInsideTemplate(t.id,i.renderNodeStatic(t.api<29?l.NAVIGATION_VIEW:c.NAVIGATION_VIEW,e.formatOptions(a,this.application.extensionManager.optionValueAsBoolean(u.RESOURCE_STRINGS,"numberResourceValue")),"wrap_content","match_parent"))}}}postOptimize(e){var t;const i=g.findNestedElement(e.element,"android.widget.coordinator");if(i){const n=r(i,e.sessionId);(null===(t=n)||void 0===t?void 0:t.inlineHeight)&&n.some(e=>e.positioned)&&n.setLayoutHeight("match_parent")}}setStyleTheme(t){const i=this.application.userSettings,o=p(this.options.resource);if(n(o,"name",i.manifestThemeName),n(o,"parent",i.manifestParentThemeName),n(o.items,"android:windowTranslucentStatus","true"),e.addTheme(o),t>=21){const t=p(a(o)),i={};n(t.output,"path","res/values-v21"),n(i,"android:windowDrawsSystemBarBackgrounds","true"),n(i,"android:statusBarColor","@android:color/transparent"),t.items=i,e.addTheme(t)}}}const E=new g("android.widget.drawer",2);return squared&&squared.includeAsync(E),E}();
