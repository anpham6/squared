this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const{assignEmptyValue:e,capitalize:t,cloneObject:i,safeNestedMap:a,includes:n,iterateArray:o}=squared.lib.util,{getElementAsNode:r}=squared.lib.session,{createStyleAttribute:s,createViewAttribute:d}=android.lib.util,{NODE_RESOURCE:u,NODE_TEMPLATE:l}=squared.base.lib.enumeration,{EXT_ANDROID:c,SUPPORT_ANDROID:m,SUPPORT_ANDROID_X:p}=android.lib.constant,{BUILD_ANDROID:h,CONTAINER_NODE:N}=android.lib.enumeration,E=android.base.Resource;class Drawer extends squared.base.ExtensionUI{constructor(e,t,i,a){super(e,t,i,a),this.documentBase=true,this.require(c.EXTERNAL,true),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const t=this.application;if(o(e.children,e=>{if("NAV"===e.tagName){const i=t.getDatasetName("use",e);if(!n(i,c.EXTERNAL))t.setDatasetName("use",e,(i?i+", ":"")+c.EXTERNAL)}}))return t.rootElements.add(e),true}return false}processNode(t,i){const a=d(this.options.self);if(Drawer.findNestedElement(t,"android.widget.menu"))e(a,"android","fitsSystemWindows","true"),this.setStyleTheme(t.api);else{const i=d(this.options.navigationView);e(i,"android","layout_gravity",t.localizeString("left"));const a=t.item();a.mergeGravity("layout_gravity",i.android.layout_gravity),a.setLayoutHeight("match_parent"),a.positioned=true}t.documentRoot=true,t.renderExclude=false;const n=t.api<29?m.DRAWER:p.DRAWER;return t.setControlType(n,N.BLOCK),t.exclude({resource:u.FONT_STYLE}),t.apply(E.formatOptions(a,this.application.extensionManager.optionValueAsBoolean(c.RESOURCE_STRINGS,"numberResourceValue"))),t.render(i),t.setLayoutWidth("match_parent"),t.setLayoutHeight("match_parent"),{output:{type:1,node:t,controlName:n},complete:true,include:true,remove:true}}afterParseDocument(){var i,n;const o=t(this.application.systemName);for(const t of this.subscribers){const r=d(this.options.navigationView),s=null===(i=Drawer.findNestedElement(t,"android.widget.menu"))||void 0===i?void 0:i.dataset["layoutName"+o],u=null===(n=Drawer.findNestedElement(t,c.EXTERNAL))||void 0===n?void 0:n.dataset["layoutName"+o],l=a(r,"app");if(s)e(l,"menu","@menu/"+s);if(u)e(l,"headerLayout","@layout/"+u);if(s||u){const i=this.controller;e(r,"android","id",`@+id/${t.controlId}_navigation`),e(r,"android","fitsSystemWindows","true"),e(r,"android","layout_gravity",t.localizeString("left")),i.addAfterInsideTemplate(t.id,i.renderNodeStatic({controlName:t.api<29?m.NAVIGATION_VIEW:p.NAVIGATION_VIEW,width:"wrap_content",height:"match_parent"},E.formatOptions(r,this.application.extensionManager.optionValueAsBoolean(c.RESOURCE_STRINGS,"numberResourceValue"))))}}}postOptimize(e){const t=Drawer.findNestedElement(e,"android.widget.coordinator");if(t){const i=r(t,e.sessionId);if((null==i?void 0:i.inlineHeight)&&i.some(e=>e.positioned))i.setLayoutHeight("match_parent")}}setStyleTheme(t){const a=this.application.userSettings,n=s(this.options.resource);if(e(n,"name",a.manifestThemeName),e(n,"parent",a.manifestParentThemeName),e(n.items,"android:windowTranslucentStatus","true"),E.addTheme(n),t>=21){const t=s(i(n)),a={};e(t.output,"path","res/values-v21"),e(a,"android:windowDrawsSystemBarBackgrounds","true"),e(a,"android:statusBarColor","@android:color/transparent"),t.items=a,E.addTheme(t)}}}const f=new Drawer("android.widget.drawer",2);if(squared)squared.include(f);return f}();
