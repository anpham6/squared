this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const e=squared.lib,t=android.lib,{assignEmptyValue:i,capitalize:a,cloneObject:n,safeNestedMap:o,includes:r,iterateArray:s}=e.util,{getElementAsNode:d}=e.session,{NODE_RESOURCE:u,NODE_TEMPLATE:l}=squared.base.lib.enumeration,{EXT_ANDROID:c,SUPPORT_ANDROID:m,SUPPORT_ANDROID_X:p}=t.constant,{BUILD_ANDROID:h,CONTAINER_NODE:N}=t.enumeration,{createStyleAttribute:E,createViewAttribute:f}=t.util,g=android.base.Resource;class Drawer extends squared.base.ExtensionUI{constructor(e,t,i,a){super(e,t,i,a),this.documentBase=true,this.require(c.EXTERNAL,true),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const t=this.application;if(s(e.children,e=>{if("NAV"===e.tagName){const i=t.getDatasetName("use",e);if(!r(i,c.EXTERNAL))t.setDatasetName("use",e,(i?i+", ":"")+c.EXTERNAL)}}))return t.rootElements.add(e),true}return false}processNode(e,t){const a=f(this.options.self);if(Drawer.findNestedElement(e,"android.widget.menu"))i(a,"android","fitsSystemWindows","true"),this.setStyleTheme(e.api);else{const t=f(this.options.navigationView);i(t,"android","layout_gravity",e.localizeString("left"));const a=e.item();a.mergeGravity("layout_gravity",t.android.layout_gravity),a.setLayoutHeight("match_parent"),a.positioned=true}e.documentRoot=true,e.renderExclude=false;const n=e.api<29?m.DRAWER:p.DRAWER;return e.setControlType(n,N.BLOCK),e.exclude({resource:u.FONT_STYLE}),e.apply(g.formatOptions(a,this.application.extensionManager.optionValueAsBoolean(c.RESOURCE_STRINGS,"numberResourceValue"))),e.render(t),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:n},complete:true,include:true,remove:true}}afterParseDocument(){var e,t;const n=a(this.application.systemName);for(const a of this.subscribers){const r=f(this.options.navigationView),s=null===(e=Drawer.findNestedElement(a,"android.widget.menu"))||void 0===e?void 0:e.dataset["layoutName"+n],d=null===(t=Drawer.findNestedElement(a,c.EXTERNAL))||void 0===t?void 0:t.dataset["layoutName"+n],u=o(r,"app");if(s)i(u,"menu","@menu/"+s);if(d)i(u,"headerLayout","@layout/"+d);if(s||d){const e=this.controller;i(r,"android","id",`@+id/${a.controlId}_navigation`),i(r,"android","fitsSystemWindows","true"),i(r,"android","layout_gravity",a.localizeString("left")),e.addAfterInsideTemplate(a.id,e.renderNodeStatic({controlName:a.api<29?m.NAVIGATION_VIEW:p.NAVIGATION_VIEW,width:"wrap_content",height:"match_parent"},g.formatOptions(r,this.application.extensionManager.optionValueAsBoolean(c.RESOURCE_STRINGS,"numberResourceValue"))))}}}postOptimize(e){const t=Drawer.findNestedElement(e,"android.widget.coordinator");if(t){const i=d(t,e.sessionId);if((null==i?void 0:i.inlineHeight)&&i.some(e=>e.positioned))i.setLayoutHeight("match_parent")}}setStyleTheme(e){const t=this.application.userSettings,a=E(this.options.resource);if(i(a,"name",t.manifestThemeName),i(a,"parent",t.manifestParentThemeName),i(a.items,"android:windowTranslucentStatus","true"),g.addTheme(a),e>=21){const e=E(n(a)),t={};i(e.output,"path","res/values-v21"),i(t,"android:windowDrawsSystemBarBackgrounds","true"),i(t,"android:statusBarColor","@android:color/transparent"),e.items=t,g.addTheme(e)}}}const w=new Drawer("android.widget.drawer",2);if(squared)squared.include(w);return w}();
