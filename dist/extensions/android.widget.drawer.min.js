this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const{session:e,util:t}=squared.lib,{constant:a,enumeration:i,util:n}=android.lib,{constant:s,enumeration:o}=squared.base.lib,r=android.base.Resource;class d extends squared.base.ExtensionUI{constructor(e,t,a,i){super(e,t,a,i),this.documentBase=!0,this.require(s.EXT_NAME.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const a=e.children,i=a.length;if(i){for(let e=0;e<i;e++){const i=a[e];"NAV"!==i.tagName||t.includes(i.dataset.use,s.EXT_NAME.EXTERNAL)||(i.dataset.use=(i.dataset.use?`${i.dataset.use}, `:"")+s.EXT_NAME.EXTERNAL)}return this.application.rootElements.add(e),!0}}return!1}processNode(e,s){const u=n.createViewAttribute(this.options.self);if(d.findNestedElement(e.element,"android.widget.menu"))t.assignEmptyValue(u,"android","fitsSystemWindows","true"),this.setStyleTheme(e.localSettings.targetAPI);else{const a=n.createViewAttribute(this.options.navigationView);t.assignEmptyValue(a,"android","layout_gravity",e.localizeString("left"));const i=e.item();i.mergeGravity("layout_gravity",a.android.layout_gravity),i.setLayoutHeight("match_parent"),i.positioned=!0}return e.documentRoot=!0,e.renderExclude=!1,e.setControlType(a.SUPPORT_ANDROID.DRAWER,i.CONTAINER_NODE.BLOCK),e.exclude(o.NODE_RESOURCE.FONT_STYLE),e.apply(r.formatOptions(u,this.application.extensionManager.optionValueAsBoolean(a.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue"))),e.render(s),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:a.SUPPORT_ANDROID.DRAWER},complete:!0}}afterParseDocument(){for(const e of this.subscribers){const i=n.createViewAttribute(this.options.navigationView),o=t.optionalAsString(d.findNestedElement(e.element,"android.widget.menu"),"dataset.layoutName"),u=t.optionalAsString(d.findNestedElement(e.element,s.EXT_NAME.EXTERNAL),"dataset.layoutName");if(""!==o&&t.assignEmptyValue(i,"app","menu",`@menu/${o}`),""!==u&&t.assignEmptyValue(i,"app","headerLayout",`@layout/${u}`),""!==o||""!==u){const n=this.controller;t.assignEmptyValue(i,"android","id",`${e.documentId}_navigation`),t.assignEmptyValue(i,"android","fitsSystemWindows","true"),t.assignEmptyValue(i,"android","layout_gravity",e.localizeString("left")),n.addAfterInsideTemplate(e.id,n.renderNodeStatic(a.SUPPORT_ANDROID.NAVIGATION_VIEW,r.formatOptions(i,this.application.extensionManager.optionValueAsBoolean(a.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue")),"wrap_content","match_parent"))}}}postOptimize(t){const a=d.findNestedElement(t.element,"android.widget.coordinator");if(a){const i=e.getElementAsNode(a,t.sessionId);i&&i.inlineHeight&&i.some(e=>e.positioned)&&i.setLayoutHeight("match_parent")}}setStyleTheme(e){const a=this.application.userSettings,i=n.createStyleAttribute(this.options.resource);if(t.assignEmptyValue(i,"name",a.manifestThemeName),t.assignEmptyValue(i,"parent",a.manifestParentThemeName),t.assignEmptyValue(i.items,"android:windowTranslucentStatus","true"),r.addTheme(i),e>=21){const e=n.createStyleAttribute(t.cloneObject(i));e.items={},t.assignEmptyValue(e.output,"path","res/values-v21"),t.assignEmptyValue(e.items,"android:windowDrawsSystemBarBackgrounds","true"),t.assignEmptyValue(e.items,"android:statusBarColor","@android:color/transparent"),r.addTheme(e)}}}const u=new d("android.widget.drawer",2);return squared&&squared.includeAsync(u),u}();
