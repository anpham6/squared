this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const{session:e,util:t}=squared.lib,{constant:i,enumeration:a,util:n}=android.lib,s=android.base.Resource,o=squared.base.lib.enumeration;class r extends squared.base.ExtensionUI{constructor(e,t,a,n){super(e,t,a,n),this.documentBase=!0,this.require(i.EXT_ANDROID.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const a=e.children,n=a.length;if(n){for(let e=0;e<n;e++){const n=a[e];"NAV"!==n.tagName||t.includes(n.dataset.use,i.EXT_ANDROID.EXTERNAL)||(n.dataset.use=(n.dataset.use?`${n.dataset.use}, `:"")+i.EXT_ANDROID.EXTERNAL)}return this.application.rootElements.add(e),!0}}return!1}processNode(e,d){const u=n.createViewAttribute(this.options.self);if(r.findNestedElement(e.element,"android.widget.menu"))t.assignEmptyValue(u,"android","fitsSystemWindows","true"),this.setStyleTheme(e.localSettings.targetAPI);else{const i=n.createViewAttribute(this.options.navigationView);t.assignEmptyValue(i,"android","layout_gravity",e.localizeString("left"));const a=e.item();a.mergeGravity("layout_gravity",i.android.layout_gravity),a.setLayoutHeight("match_parent"),a.positioned=!0}return e.documentRoot=!0,e.renderExclude=!1,e.setControlType(i.SUPPORT_ANDROID.DRAWER,a.CONTAINER_NODE.BLOCK),e.exclude(o.NODE_RESOURCE.FONT_STYLE),e.apply(s.formatOptions(u,this.application.extensionManager.optionValueAsBoolean(i.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue"))),e.render(d),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:i.SUPPORT_ANDROID.DRAWER},complete:!0,remove:!0}}afterParseDocument(){for(const e of this.subscribers){const a=n.createViewAttribute(this.options.navigationView),o=t.optionalAsString(r.findNestedElement(e.element,"android.widget.menu"),"dataset.layoutName"),d=t.optionalAsString(r.findNestedElement(e.element,i.EXT_ANDROID.EXTERNAL),"dataset.layoutName");if(""!==o&&t.assignEmptyValue(a,"app","menu",`@menu/${o}`),""!==d&&t.assignEmptyValue(a,"app","headerLayout",`@layout/${d}`),""!==o||""!==d){const n=this.controller;t.assignEmptyValue(a,"android","id",`${e.documentId}_navigation`),t.assignEmptyValue(a,"android","fitsSystemWindows","true"),t.assignEmptyValue(a,"android","layout_gravity",e.localizeString("left")),n.addAfterInsideTemplate(e.id,n.renderNodeStatic(i.SUPPORT_ANDROID.NAVIGATION_VIEW,s.formatOptions(a,this.application.extensionManager.optionValueAsBoolean(i.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue")),"wrap_content","match_parent"))}}}postOptimize(t){const i=r.findNestedElement(t.element,"android.widget.coordinator");if(i){const a=e.getElementAsNode(i,t.sessionId);a&&a.inlineHeight&&a.some(e=>e.positioned)&&a.setLayoutHeight("match_parent")}}setStyleTheme(e){const i=this.application.userSettings,a=n.createStyleAttribute(this.options.resource);if(t.assignEmptyValue(a,"name",i.manifestThemeName),t.assignEmptyValue(a,"parent",i.manifestParentThemeName),t.assignEmptyValue(a.items,"android:windowTranslucentStatus","true"),s.addTheme(a),e>=21){const e=n.createStyleAttribute(t.cloneObject(a));e.items={},t.assignEmptyValue(e.output,"path","res/values-v21"),t.assignEmptyValue(e.items,"android:windowDrawsSystemBarBackgrounds","true"),t.assignEmptyValue(e.items,"android:statusBarColor","@android:color/transparent"),s.addTheme(e)}}}const d=new r("android.widget.drawer",2);return squared&&squared.includeAsync(d),d}();
