this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const e=squared.lib,t=android.lib,{assignEmptyValue:i,cloneObject:n,includes:o,optionalAsString:a}=e.util,{getElementAsNode:s}=e.session,{NODE_RESOURCE:r}=squared.base.lib.enumeration,{EXT_ANDROID:d,SUPPORT_ANDROID:u,SUPPORT_ANDROID_X:l}=t.constant,{CONTAINER_NODE:c}=t.enumeration,{createStyleAttribute:m,createViewAttribute:p}=t.util,h=android.base.Resource;class g extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=!0,this.require(d.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const t=e.children,i=t.length;if(i){for(let e=0;e<i;e++){const i=t[e];if("NAV"===i.tagName){const e=i.dataset.use;o(e,d.EXTERNAL)||(i.dataset.use=(e?e+", ":"")+d.EXTERNAL)}}return this.application.rootElements.add(e),!0}}return!1}processNode(e,t){const n=p(this.options.self);if(g.findNestedElement(e.element,"android.widget.menu"))i(n,"android","fitsSystemWindows","true"),this.setStyleTheme(e.api);else{const t=p(this.options.navigationView);i(t,"android","layout_gravity",e.localizeString("left"));const n=e.item();n.mergeGravity("layout_gravity",t.android.layout_gravity),n.setLayoutHeight("match_parent"),n.positioned=!0}e.documentRoot=!0,e.renderExclude=!1;const o=e.api<29?u.DRAWER:l.DRAWER;return e.setControlType(o,c.BLOCK),e.exclude({resource:r.FONT_STYLE}),e.apply(h.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(d.RESOURCE_STRINGS,"numberResourceValue"))),e.render(t),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:o},complete:!0,remove:!0}}afterParseDocument(){for(const e of this.subscribers){const t=e.element,n=p(this.options.navigationView),o=a(g.findNestedElement(t,"android.widget.menu"),"dataset.layoutName"),s=a(g.findNestedElement(t,d.EXTERNAL),"dataset.layoutName");let r=n.app;if(void 0===r&&(r={},n.app=r),""!==o&&i(r,"menu","@menu/"+o),""!==s&&i(r,"headerLayout","@layout/"+s),""!==o||""!==s){const t=this.controller;i(n,"android","id",e.documentId.replace("@","@+")+"_navigation"),i(n,"android","fitsSystemWindows","true"),i(n,"android","layout_gravity",e.localizeString("left")),t.addAfterInsideTemplate(e.id,t.renderNodeStatic(e.api<29?u.NAVIGATION_VIEW:l.NAVIGATION_VIEW,h.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(d.RESOURCE_STRINGS,"numberResourceValue")),"wrap_content","match_parent"))}}}postOptimize(e){var t;const i=g.findNestedElement(e.element,"android.widget.coordinator");if(i){const n=s(i,e.sessionId);(null===(t=n)||void 0===t?void 0:t.inlineHeight)&&n.some(e=>e.positioned)&&n.setLayoutHeight("match_parent")}}setStyleTheme(e){const t=this.application.userSettings,o=m(this.options.resource);if(i(o,"name",t.manifestThemeName),i(o,"parent",t.manifestParentThemeName),i(o.items,"android:windowTranslucentStatus","true"),h.addTheme(o),e>=21){const e=m(n(o)),t={};i(e.output,"path","res/values-v21"),i(t,"android:windowDrawsSystemBarBackgrounds","true"),i(t,"android:statusBarColor","@android:color/transparent"),e.items=t,h.addTheme(e)}}}const E=new g("android.widget.drawer",2);return squared&&squared.includeAsync(E),E}();
