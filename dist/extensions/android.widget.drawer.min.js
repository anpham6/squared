this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const{session:e,util:t}=squared.lib,{constant:a,enumeration:i,util:n}=android.lib,s=android.base.Resource,o=squared.base.lib.enumeration;class r extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=!0,this.require(a.EXT_ANDROID.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const i=e.children,n=i.length;if(n){for(let e=0;e<n;e++){const n=i[e],s=n.dataset.use;"NAV"!==n.tagName||t.includes(s,a.EXT_ANDROID.EXTERNAL)||(n.dataset.use=(s?s+", ":"")+a.EXT_ANDROID.EXTERNAL)}return this.application.rootElements.add(e),!0}}return!1}processNode(e,d){const u=n.createViewAttribute(this.options.self);if(r.findNestedElement(e.element,"android.widget.menu"))t.assignEmptyValue(u,"android","fitsSystemWindows","true"),this.setStyleTheme(e.localSettings.targetAPI);else{const a=n.createViewAttribute(this.options.navigationView);t.assignEmptyValue(a,"android","layout_gravity",e.localizeString("left"));const i=e.item();i.mergeGravity("layout_gravity",a.android.layout_gravity),i.setLayoutHeight("match_parent"),i.positioned=!0}e.documentRoot=!0,e.renderExclude=!1;const l=e.localSettings.targetAPI<29?a.SUPPORT_ANDROID.DRAWER:a.SUPPORT_ANDROID_X.DRAWER;return e.setControlType(l,i.CONTAINER_NODE.BLOCK),e.exclude(o.NODE_RESOURCE.FONT_STYLE),e.apply(s.formatOptions(u,this.application.extensionManager.optionValueAsBoolean(a.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue"))),e.render(d),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:l},complete:!0,remove:!0}}afterParseDocument(){for(const e of this.subscribers){const i=e.element,o=n.createViewAttribute(this.options.navigationView),d=t.optionalAsString(r.findNestedElement(i,"android.widget.menu"),"dataset.layoutName"),u=t.optionalAsString(r.findNestedElement(i,a.EXT_ANDROID.EXTERNAL),"dataset.layoutName");if(""!==d&&t.assignEmptyValue(o,"app","menu","@menu/"+d),""!==u&&t.assignEmptyValue(o,"app","headerLayout","@layout/"+u),""!==d||""!==u){const i=this.controller;t.assignEmptyValue(o,"android","id",e.documentId.replace("@","@+")+"_navigation"),t.assignEmptyValue(o,"android","fitsSystemWindows","true"),t.assignEmptyValue(o,"android","layout_gravity",e.localizeString("left")),i.addAfterInsideTemplate(e.id,i.renderNodeStatic(e.localSettings.targetAPI<29?a.SUPPORT_ANDROID.NAVIGATION_VIEW:a.SUPPORT_ANDROID_X.NAVIGATION_VIEW,s.formatOptions(o,this.application.extensionManager.optionValueAsBoolean(a.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue")),"wrap_content","match_parent"))}}}postOptimize(t){const a=r.findNestedElement(t.element,"android.widget.coordinator");if(a){const i=e.getElementAsNode(a,t.sessionId);i&&i.inlineHeight&&i.some(e=>e.positioned)&&i.setLayoutHeight("match_parent")}}setStyleTheme(e){const a=this.application.userSettings,i=n.createStyleAttribute(this.options.resource);if(t.assignEmptyValue(i,"name",a.manifestThemeName),t.assignEmptyValue(i,"parent",a.manifestParentThemeName),t.assignEmptyValue(i.items,"android:windowTranslucentStatus","true"),s.addTheme(i),e>=21){const e=n.createStyleAttribute(t.cloneObject(i)),a={};t.assignEmptyValue(e.output,"path","res/values-v21"),t.assignEmptyValue(a,"android:windowDrawsSystemBarBackgrounds","true"),t.assignEmptyValue(a,"android:statusBarColor","@android:color/transparent"),e.items=a,s.addTheme(e)}}}const d=new r("android.widget.drawer",2);return squared&&squared.includeAsync(d),d}();
