this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";var e=android.base.Resource;const t=squared.base.lib.enumeration,a=squared.base.lib.constant,i=squared.lib.dom,n=squared.lib.util,s=android.lib.constant,o=android.lib.enumeration,r=android.lib.util;class d extends squared.base.Extension{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=!0,this.require(a.EXT_NAME.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)&&e.children.length){for(let t=0;t<e.children.length;t++){const i=e.children[t];"NAV"!==i.tagName||n.includes(i.dataset.use,a.EXT_NAME.EXTERNAL)||(i.dataset.use=(i.dataset.use?`${i.dataset.use}, `:"")+a.EXT_NAME.EXTERNAL)}return this.application.parseElements.add(e),!0}return!1}processNode(a,i){const l=r.createViewAttribute(this.options.self);if(d.findNestedElement(a.element,"android.widget.menu"))n.assignEmptyValue(l,"android","fitsSystemWindows","true"),this.setStyleTheme(a.localSettings.targetAPI);else{const e=r.createViewAttribute(this.options.navigationView);n.assignEmptyValue(e,"android","layout_gravity",a.localizeString("left"));const t=a.item();t.android("layout_gravity",e.android.layout_gravity),t.android("layout_height","match_parent"),t.positioned=!0}return a.documentRoot=!0,a.setControlType(s.SUPPORT_ANDROID.DRAWER,o.CONTAINER_NODE.BLOCK),a.exclude({resource:t.NODE_RESOURCE.FONT_STYLE}),a.apply(e.formatOptions(l,this.application.extensionManager.optionValueAsBoolean(s.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue"))),a.render(i),a.android("layout_width","match_parent"),a.android("layout_height","match_parent"),{output:{type:1,node:a,controlName:s.SUPPORT_ANDROID.DRAWER},complete:!0}}postParseDocument(t){const i=this.application,o=r.createViewAttribute(this.options.navigationView),l=n.optionalAsString(d.findNestedElement(t.element,"android.widget.menu"),"dataset.layoutName"),u=n.optionalAsString(d.findNestedElement(t.element,a.EXT_NAME.EXTERNAL),"dataset.layoutName");""!==l&&n.assignEmptyValue(o,"app","menu",`@menu/${l}`),""!==u&&n.assignEmptyValue(o,"app","headerLayout",`@layout/${u}`),""===l&&""===u||(n.assignEmptyValue(o,"android","id",`${t.documentId}_navigation`),n.assignEmptyValue(o,"android","fitsSystemWindows","true"),n.assignEmptyValue(o,"android","layout_gravity",t.localizeString("left")),i.controllerHandler.addAfterInsideTemplate(t.id,i.controllerHandler.renderNodeStatic(s.SUPPORT_ANDROID.NAVIGATION_VIEW,e.formatOptions(o,this.application.extensionManager.optionValueAsBoolean(s.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue")),"wrap_content","match_parent")))}postProcedure(e){const t=d.findNestedElement(e.element,"android.widget.coordinator");if(t){const e=i.getElementAsNode(t);e&&e.inlineHeight&&e.some(e=>e.positioned)&&e.android("layout_height","match_parent")}}setStyleTheme(t){const a=this.application.userSettings,i=r.createStyleAttribute(this.options.resource);if(n.assignEmptyValue(i,"name",a.manifestThemeName),n.assignEmptyValue(i,"parent",a.manifestParentThemeName),n.assignEmptyValue(i.items,"android:windowTranslucentStatus","true"),e.addTheme(i),t>=21){const t=r.createStyleAttribute(n.cloneObject(i));t.items={},n.assignEmptyValue(t.output,"path","res/values-v21"),n.assignEmptyValue(t.items,"android:windowDrawsSystemBarBackgrounds","true"),n.assignEmptyValue(t.items,"android:statusBarColor","@android:color/transparent"),e.addTheme(t)}}}const l=new d("android.widget.drawer",2);return squared&&squared.includeAsync(l),l}();
