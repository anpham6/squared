this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";var e=android.base.Resource;const t=squared.lib.constant,i=squared.lib.session,s=squared.lib.util,n=android.lib.constant,a=android.lib.enumeration,o=android.lib.util,r=squared.base.lib.constant,d=squared.base.lib.enumeration;class u extends squared.base.ExtensionUI{constructor(e,t,i,s){super(e,t,i,s),this.documentBase=!0,this.require(r.EXT_NAME.EXTERNAL,!0),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){const t=e.children,i=t.length;if(i){for(let e=0;e<i;e++){const i=t[e];"NAV"!==i.tagName||s.includes(i.dataset.use,r.EXT_NAME.EXTERNAL)||(i.dataset.use=(i.dataset.use?`${i.dataset.use}, `:"")+r.EXT_NAME.EXTERNAL)}return this.application.rootElements.add(e),!0}}return!1}processNode(i,r){const l=o.createViewAttribute(this.options.self);if(u.findNestedElement(i.element,"android.widget.menu"))s.assignEmptyValue(l,n.STRING_ANDROID.ANDROID,"fitsSystemWindows","true"),this.setStyleTheme(i.localSettings.targetAPI);else{const e=o.createViewAttribute(this.options.navigationView);s.assignEmptyValue(e,n.STRING_ANDROID.ANDROID,n.STRING_ANDROID.LAYOUT_GRAVITY,i.localizeString(t.CSS.LEFT));const a=i.item();a.mergeGravity(n.STRING_ANDROID.LAYOUT_GRAVITY,e.android.layout_gravity),a.setLayoutHeight(n.STRING_ANDROID.MATCH_PARENT),a.positioned=!0}return i.documentRoot=!0,i.renderExclude=!1,i.setControlType(n.SUPPORT_ANDROID.DRAWER,a.CONTAINER_NODE.BLOCK),i.exclude(d.NODE_RESOURCE.FONT_STYLE),i.apply(e.formatOptions(l,this.application.extensionManager.optionValueAsBoolean(n.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue"))),i.render(r),i.setLayoutWidth(n.STRING_ANDROID.MATCH_PARENT),i.setLayoutHeight(n.STRING_ANDROID.MATCH_PARENT),{output:{type:1,node:i,controlName:n.SUPPORT_ANDROID.DRAWER},complete:!0}}postParseDocument(i){const a=o.createViewAttribute(this.options.navigationView),d=s.optionalAsString(u.findNestedElement(i.element,"android.widget.menu"),"dataset.layoutName"),l=s.optionalAsString(u.findNestedElement(i.element,r.EXT_NAME.EXTERNAL),"dataset.layoutName");if(""!==d&&s.assignEmptyValue(a,n.STRING_ANDROID.APP,"menu",`@menu/${d}`),""!==l&&s.assignEmptyValue(a,n.STRING_ANDROID.APP,"headerLayout",`@layout/${l}`),""!==d||""!==l){const o=this.application.controllerHandler;s.assignEmptyValue(a,n.STRING_ANDROID.ANDROID,"id",`${i.documentId}_navigation`),s.assignEmptyValue(a,n.STRING_ANDROID.ANDROID,"fitsSystemWindows","true"),s.assignEmptyValue(a,n.STRING_ANDROID.ANDROID,n.STRING_ANDROID.LAYOUT_GRAVITY,i.localizeString(t.CSS.LEFT)),o.addAfterInsideTemplate(i.id,o.renderNodeStatic(n.SUPPORT_ANDROID.NAVIGATION_VIEW,e.formatOptions(a,this.application.extensionManager.optionValueAsBoolean(n.EXT_ANDROID.RESOURCE_STRINGS,"numberResourceValue")),n.STRING_ANDROID.WRAP_CONTENT,n.STRING_ANDROID.MATCH_PARENT))}}postOptimize(e){const t=u.findNestedElement(e.element,"android.widget.coordinator");if(t){const s=i.getElementAsNode(t,e.sessionId);s&&s.inlineHeight&&s.some(e=>e.positioned)&&s.setLayoutHeight(n.STRING_ANDROID.MATCH_PARENT)}}setStyleTheme(t){const i=this.application.userSettings,a=o.createStyleAttribute(this.options.resource);if(s.assignEmptyValue(a,"name",i.manifestThemeName),s.assignEmptyValue(a,n.STRING_ANDROID.PARENT,i.manifestParentThemeName),s.assignEmptyValue(a.items,"android:windowTranslucentStatus","true"),e.addTheme(a),t>=21){const t=o.createStyleAttribute(s.cloneObject(a));t.items={},s.assignEmptyValue(t.output,"path","res/values-v21"),s.assignEmptyValue(t.items,"android:windowDrawsSystemBarBackgrounds","true"),s.assignEmptyValue(t.items,"android:statusBarColor","@android:color/transparent"),e.addTheme(t)}}}const l=new u("android.widget.drawer",2);return squared&&squared.includeAsync(l),l}();
