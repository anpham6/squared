this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const e=squared.lib,t=android.lib,{assignEmptyValue:i,cloneObject:n,safeNestedMap:a,includes:o,iterateArray:r}=e.util,{getElementAsNode:s}=e.session,{NODE_RESOURCE:d,NODE_TEMPLATE:u}=squared.base.lib.enumeration,{EXT_ANDROID:l,SUPPORT_ANDROID:c,SUPPORT_ANDROID_X:m}=t.constant,{BUILD_ANDROID:p,CONTAINER_NODE:h}=t.enumeration,{createStyleAttribute:N,createViewAttribute:E}=t.util,g=android.base.Resource;class f extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=true,this.require(l.EXTERNAL,true),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){if(r(e.children,e=>{if("NAV"===e.tagName){const t=e.dataset.use;o(t,l.EXTERNAL)||(e.dataset.use=(t?t+", ":"")+l.EXTERNAL)}}))return this.application.rootElements.add(e),true}return false}processNode(e,t){const n=E(this.options.self);if(f.findNestedElement(e.element,"android.widget.menu"))i(n,"android","fitsSystemWindows","true"),this.setStyleTheme(e.api);else{const t=E(this.options.navigationView);i(t,"android","layout_gravity",e.localizeString("left"));const n=e.item();n.mergeGravity("layout_gravity",t.android.layout_gravity),n.setLayoutHeight("match_parent"),n.positioned=true}e.documentRoot=true,e.renderExclude=false;const a=e.api<29?c.DRAWER:m.DRAWER;return e.setControlType(a,h.BLOCK),e.exclude({resource:d.FONT_STYLE}),e.apply(g.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(l.RESOURCE_STRINGS,"numberResourceValue"))),e.render(t),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:a},complete:true,include:true,remove:true}}afterParseDocument(){var e,t;for(const n of this.subscribers){const o=n.element,r=E(this.options.navigationView),s=null===(e=f.findNestedElement(o,"android.widget.menu"))||void 0===e?void 0:e.dataset.layoutName,d=null===(t=f.findNestedElement(o,l.EXTERNAL))||void 0===t?void 0:t.dataset.layoutName,u=a(r,"app");if(s&&i(u,"menu","@menu/"+s),d&&i(u,"headerLayout","@layout/"+d),s||d){const e=this.controller;i(r,"android","id",`@+id/${n.controlId}_navigation`),i(r,"android","fitsSystemWindows","true"),i(r,"android","layout_gravity",n.localizeString("left")),e.addAfterInsideTemplate(n.id,e.renderNodeStatic({controlName:n.api<29?c.NAVIGATION_VIEW:m.NAVIGATION_VIEW,width:"wrap_content",height:"match_parent"},g.formatOptions(r,this.application.extensionManager.optionValueAsBoolean(l.RESOURCE_STRINGS,"numberResourceValue"))))}}}postOptimize(e){const t=f.findNestedElement(e.element,"android.widget.coordinator");if(t){const i=s(t,e.sessionId);(null==i?void 0:i.inlineHeight)&&i.some(e=>e.positioned)&&i.setLayoutHeight("match_parent")}}setStyleTheme(e){const t=this.application.userSettings,a=N(this.options.resource);if(i(a,"name",t.manifestThemeName),i(a,"parent",t.manifestParentThemeName),i(a.items,"android:windowTranslucentStatus","true"),g.addTheme(a),e>=21){const e=N(n(a)),t={};i(e.output,"path","res/values-v21"),i(t,"android:windowDrawsSystemBarBackgrounds","true"),i(t,"android:statusBarColor","@android:color/transparent"),e.items=t,g.addTheme(e)}}}const y=new f("android.widget.drawer",2);return squared&&squared.include(y),y}();
