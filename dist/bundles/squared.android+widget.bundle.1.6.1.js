!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).squared={})}(this,(function(e){"use strict";const t="-?(?:\\d+(?:\\.\\d+)?|\\d*\\.\\d+)",r="px|em|pt|rem|ch|pc|vw|vh|vmin|vmax|mm|cm|in",n={DECIMAL:t,PERCENT:"-?\\d+(?:\\.\\d+)?%",LENGTH:`(${t})(${r})?`,LENGTH_PERCENTAGE:`(${t}(?:${r}|%)?)`,UNIT_LENGTH:r,DATAURI:"(?:data:([^,]+),)?(.*?)",CSS_SELECTOR_LABEL:"[\\.#]?[\\w\\-]+",CSS_SELECTOR_PSEUDO_ELEMENT:"::[\\w\\-]+",CSS_SELECTOR_PSEUDO_CLASS:":[\\w\\-]+(?:\\(\\s*([^()]+)\\s*\\)|\\(\\s*([\\w\\-]+\\(.+?\\))\\s*\\))?",CSS_SELECTOR_ATTR:"\\[([\\w\\-]+)(?:([~^$*|])?=(?:\"([^\"]+)\"|'([^']+)'|([^\\s\\]]+))\\s*(i)?)?\\]",CSS_ANGLE:`(${t})(deg|rad|turn|grad)`,CSS_TIME:`(${t})(s|ms)`,CSS_CALC:"calc\\((.+)\\)"},s={DECIMAL:new RegExp(`^${n.DECIMAL}$`),LENGTH:new RegExp(`^${n.LENGTH}$`),PERCENT:new RegExp(`^${n.PERCENT}$`),LENGTH_PERCENTAGE:new RegExp(`^${n.LENGTH_PERCENTAGE}$`)},i={PX:/\dpx$/,ANGLE:new RegExp(`^${n.CSS_ANGLE}$`),TIME:new RegExp(`^${n.CSS_TIME}$`),CALC:new RegExp(`^${n.CSS_CALC}$`),VAR:/var\((--[A-Za-z\d-]+)\s*(?!,\s*var\()(?:,\s*([a-z-]+\([^)]+\)|[^)]+))?\)/,URL:/^url\((?:"(.+)"|(.+))\)$/,CUSTOM_PROPERTY:/^\s*var\(.+\)\s*$/,HEX:/[A-Za-z\d]{3,8}/,RGBA:/rgba?\((\d+),\s+(\d+),\s+(\d+)(?:,\s+([\d.]+))?\)/,HSLA:/hsla?\((\d+),\s+(\d+)%,\s+(\d+)%(?:,\s+([\d.]+))?\)/,SELECTOR_G:new RegExp(`\\s*((?:${n.CSS_SELECTOR_ATTR}|${n.CSS_SELECTOR_PSEUDO_CLASS}|${n.CSS_SELECTOR_PSEUDO_ELEMENT}|${n.CSS_SELECTOR_LABEL})+|[>~+*])\\s*`,"g"),SELECTOR_LABEL:new RegExp(n.CSS_SELECTOR_LABEL),SELECTOR_PSEUDO_ELEMENT:new RegExp(n.CSS_SELECTOR_PSEUDO_ELEMENT),SELECTOR_PSEUDO_CLASS:new RegExp(n.CSS_SELECTOR_PSEUDO_CLASS),SELECTOR_ATTR:new RegExp(n.CSS_SELECTOR_ATTR)},a={ATTRIBUTE:/([^\s]+)="([^"]+)"/,ENTITY:/&#?[A-Za-z\d]+;/,SEPARATOR:/\s*,\s*/,DELIMITER:/\s*;\s*/,BREAKWORD_G:/([A-Za-z\d]+|&#?[A-Za-z\d]+;)/g,NONWORD_G:/[^A-Za-z\d]+/g,TAGNAME_G:/(<([^>]+)>)/g},o={SPACE:/\s+/,LEADINGSPACE:/^\s+/,TRAILINGSPACE:/\s+$/,TRAILINGZERO:/\.(\d*?)(0+)$/,LEADINGNEWLINE:/^\s*\n+/,LEADINGNUMBER:/^\d/,LOWERCASE:/^[a-z]+$/,WORD:/\w/,UNITZERO:/^\s*0[a-z]*\s*$/,WORDDASH:/[a-zA-Z\d]/},l={PROTOCOL:/^([A-Za-z]{3,}:\/\/)([A-Za-z\d\-.]+)(:\d+)?(\/.*)?$/},c={ENTITY:/&#(\d+);/g,NONENTITY:/&(?!#?[A-Za-z\d]{2,};)/g};var u=Object.freeze({__proto__:null,STRING:n,FILE:{NAME:/[/\\]?(([^/\\]+?)\.([^/\\]+?))$/,SVG:/\.svg$/i},UNIT:s,CSS:i,XML:a,CHAR:o,COMPONENT:l,ESCAPE:c});const h=[8,4,4,4,12],g="ABCDEFGHIJKLMNOPQRSTUVWXYZ",d=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],f={},p={};function b(e){switch(L(e.trim(),".").toLowerCase()){case"aac":return"audio/aac";case"abw":return"application/x-abiword";case"apng":return"image/apng";case"arc":return"application/x-freearc";case"avi":return"video/x-msvideo";case"azw":return"application/vnd.amazon.ebook";case"bin":return"application/octet-stream";case"bmp":return"image/bmp";case"bz":return"application/x-bzip";case"bz2":return"application/x-bzip2";case"csh":return"application/x-csh";case"css":return"text/css";case"csv":return"text/csv";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"eot":case"embedded-opentype":return"application/vnd.ms-fontobject";case"epub":return"application/epub+zip";case"flac":return"audio/flac";case"gif":return"image/gif";case"gsm":return"audio/gsm";case"heic":return"image/heic";case"heif":return"image/heif";case"htm":case"html":return"text/html";case"cur":case"ico":return"image/x-icon";case"ics":return"text/calendar";case"jar":return"application/java-archive";case"jpeg":case"jpg":case"jfif":case"pjpeg":case"pjp":return"image/jpeg";case"js":case"mjs":return"text/javascript";case"json":return"application/json";case"jsonp":return"application/javascript";case"jsonld":return"application/ld+json";case"mid":case"midi":return"audio/midi";case"mkv":return"video/x-matroska";case"mp3":case"mpeg":return"audio/mpeg";case"mp4":return"video/mp4";case"mpkg":return"application/vnd.apple.installer+xml";case"odp":return"application/vnd.oasis.opendocument.presentation";case"ods":return"application/vnd.oasis.opendocument.spreadsheet";case"odt":return"application/vnd.oasis.opendocument.text";case"oga":case"spx":case"ogg":return"audio/ogg";case"ogv":case"ogm":return"video/ogg";case"ogx":return"application/ogg";case"otf":case"opentype":return"font/otf";case"png":return"image/png";case"pdf":return"application/pdf";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"rar":return"application/x-rar-compressed";case"rtf":return"application/rtf";case"sh":return"application/x-sh";case"svg":return"image/svg+xml";case"swf":return"application/x-shockwave-flash";case"tar":return"application/x-tar";case"tif":case"tiff":return"image/tiff";case"ts":return"video/mp2t";case"ttf":case"truetype":return"font/ttf";case"txt":return"text/plain";case"vsd":return"application/vnd.visio";case"wav":return"audio/wav";case"weba":case"webm":return"audio/webm";case"webp":return"image/webp";case"woff":return"font/woff";case"woff2":return"font/woff2";case"xhtml":return"application/xhtml+xml";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xml":return"application/xml";case"xul":return"application/vnd.mozilla.xul+xml";case"zip":return"application/zip";case"3gp":return"video/3gpp";case"3g2":return"video/3gpp2";case"7z":return"application/x-7z-compressed";default:return""}}function m(e,t,r){return 0===t?e.substring(r):e.substring(0,t)+e.substring(t+r)}function E(e,t="-"){let r=e.indexOf(t);if(-1===r)return e;const n=f[e];if(n)return n;let s=e.substring(0,r),i="";const a=e.length;while(r<a){const n=e.charAt(r++);n!==t&&(s+=i===t?n.toUpperCase():n),i=n}return f[e]=s,s}function v(e){return parseFloat(e)||0}function w(e){if(e>=0){let t="";const r=g.length;while(e>=r){const n=Math.floor(e/r);if(n>1&&n<=r)t+=g.charAt(n-1),e-=n*r;else if(n>0)return t+="Z",t+=w(e-=Math.pow(r,2)),t;const s=e%r;t+=g.charAt(s),e-=s+r}return g.charAt(e)+t}return e.toString()}function y(e){const t=e.toString().split("");let r="",n=3;while(n--)r=(d[parseInt(t.pop())+10*n]||"")+r;return"M".repeat(parseInt(t.join("")))+r}function k(e,t,r="",n="(",s=")"){if(r.length>1)return[];S(t)||(t=n);const i=t!==n,a=i?t+n:n,o=[],l=e=>{e.split(r).forEach(e=>{""!==(e=e.trim())&&o.push(e)})};let c=0,u=-1;const h=e.length;while(-1!==(u=e.indexOf(a,c))){let a="";if(u!==c){let n=e.substring(c,u);if(r){if(n=n.trim(),""!==n&&(l(n),!i)){const r=o[o.length-1];e.substring(u-r.length,u+1)===r+t&&(a=r,o.length--)}}else o.push(n)}let g=false;for(let l=u+(i?t.length:0)+1,d=1,f=0;l<h;++l){switch(e.charAt(l)){case n:++d;break;case s:++f}if(d===f){if(r){for(;l<h;++l)if(e.charAt(l)===r)break;c=l+1,o.push(a+e.substring(u,l).trim())}else c=l+1,o.push(e.substring(u,c));if(c===h)return o;g=true;break}}if(!g)return[]}if(c<h){const t=e.substring(c);if(r){const e=t.trim();""!==e&&l(e)}else o.push(t)}return o}function x(e,t){return(e&t)===t}function A(e){return"string"==typeof e&&s.DECIMAL.test(e.trim())}function S(e){return"string"==typeof e&&""!==e.trim()}function R(e){return"object"==typeof e&&null!==e}function F(e){return R(e)&&e.constructor===Object}function T(e,t=[],r=false){return e.forEach(e=>{Array.isArray(e)?t.push(T(e,[],r)):r&&F(e)?t.push(C(e,{},true)):t.push(e)}),t}function C(e,t={},r=false){for(const n in e){const s=e[n];Array.isArray(s)?t[n]=r?T(s,[],true):s:F(s)?t[n]=C(s,{},r):t[n]=s}return t}function N(e,t){if(e=e.trim(),!l.PROTOCOL.test(e)){const r=location.origin;let n=((null==t?void 0:t.replace(r,""))||location.pathname).split("/");if(n.pop(),"/"===e.charAt(0))e=r+e;else if(e.startsWith("../")){const t=[];let s=0;e.split("/").forEach(e=>{".."===e?s++:t.push(e)}),n=n.slice(0,Math.max(n.length-s,0)).concat(t),e=r+n.join("/")}else e=r+n.join("/")+"/"+e}return e}function P(e,t){return e.replace(new RegExp(`^${t}+`),"")}function I(e,t){return e.replace(new RegExp(t+"+$"),"")}function L(e,...t){for(const r of t){const t=e.lastIndexOf(r);if(-1!==t)return e.substring(t+1)}return e}function _(e){return null!=e&&""!==e}function B(e,t,r=1){return t>=e-r&&t<=e+r}function O(e,t){let r=0;for(const n of e)if(t(n,r++,e))return n}function M(e,t){const r=e.length,n=new Array(r),s=new Array(r);let i=0,a=0,o=0;while(i<r){const r=e[i];t(r,i++,e)?n[a++]=r:s[o++]=r}return n.length=a,s.length=o,[n,s]}function D(e,t){const r=e.length;if(r){let n,s=0;while(s<r){const r=t(e[s],s,e);if(0==s++)n=r;else if(r!==n)return false}return true}return false}function z(e,t,r="\n",n=true){let s="";const i=e.length;let a=0;while(a<i){const n=t(e[a],a++,e);""!==n&&(s+=n+r)}return n?s:s.substring(0,s.length-r.length)}function j(e,t,r=0,n=Number.POSITIVE_INFINITY){r=Math.max(r,0);const s=Math.min(e.length,n);let i=r;while(i<s){if(true===t(e[i],i++,e))return Number.POSITIVE_INFINITY}return s}function $(e,t){const r=e.length,n=new Array(r);let s=0,i=0;while(s<r){const r=t(e[s],s++,e);_(r)&&(n[i++]=r)}return n.length=i,n}function W(e,t){const r=e.length;let n=0;while(n<r)e[n]=t(e[n],n++,e);return e}function G(e,t){const r=e.length,n=new Array(r);let s=0;while(s<r)n[s]=t(e[s],s++,e);return n}var H=Object.freeze({__proto__:null,hasMimeType:function(e,t){return"*"===e||e.includes(b(t))},parseMimeType:b,fromMimeType:function(e){switch(e){case"audio/aac":return"aac";case"application/x-abiword":return"abw";case"image/apng":return"apng";case"application/x-freearc":return"arc";case"video/x-msvideo":return"avi";case"application/vnd.amazon.ebook":return"azw";case"application/octet-stream":return"bin";case"image/bmp":return"bmp";case"application/x-bzip":return"bz";case"application/x-bzip2":return"bz2";case"application/x-csh":return"csh";case"text/css":return"css";case"text/csv":return"csv";case"application/msword":return"doc";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"docx";case"application/vnd.ms-fontobject":return"eot";case"application/epub+zip":return"epub";case"audio/flac":return"flac";case"image/gif":return"gif";case"audio/gsm":return"gsm";case"image/heic":return"heic";case"image/heif":return"heif";case"text/html":return"html";case"image/x-icon":return"ico";case"text/calendar":return"ics";case"application/java-archive":return"jar";case"image/jpeg":return"jpg";case"text/javascript":return"js";case"application/json":return"json";case"application/ld+json":return"jsonld";case"audio/midi":return"mid";case"video/x-matroska":return"mkv";case"audio/mpeg":return"mp3";case"video/mp4":return"mp4";case"application/vnd.apple.installer+xml":return"mpkg";case"application/vnd.oasis.opendocument.presentation":return"odp";case"application/vnd.oasis.opendocument.spreadsheet":return"ods";case"application/vnd.oasis.opendocument.text":return"odt";case"audio/ogg":return"ogg";case"video/ogg":return"ogv";case"application/ogg":return"ogx";case"font/otf":return"otf";case"image/png":return"png";case"application/pdf":return"pdf";case"application/vnd.ms-powerpoint":return"ppt";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"pptx";case"application/x-rar-compressed":return"rar";case"application/rtf":return"rtf";case"application/x-sh":return"sh";case"image/svg+xml":return"svg";case"application/x-shockwave-flash":return"swf";case"application/x-tar":return"tar";case"image/tiff":return"tif";case"video/mp2t":return"ts";case"font/ttf":return"ttf";case"text/plain":return"txt";case"application/vnd.visio":return"vsd";case"audio/wav":return"wav";case"audio/webm":return"video/webm";case"image/webp":return"webp";case"font/woff":return"woff";case"font/woff2":return"woff2";case"application/xhtml+xml":return"xhtml";case"application/vnd.ms-excel":return"xls";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"xlsx";case"text/xml":return"xml";case"application/vnd.mozilla.xul+xml":return"xul";case"application/zip":return"zip";case"video/3gpp":return"3gp";case"video/3gpp2":return"3g2";case"application/x-7z-compressed":return"7z";default:return""}},capitalize:function(e,t){return false===t?e.charAt(0).toLowerCase()+e.substring(1):e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},capitalizeString:function(e){const t=e.split("");let r;a.BREAKWORD_G.lastIndex=0;while(null!==(r=a.BREAKWORD_G.exec(e))){const e=r.index;void 0!==e&&(t[e]=r[1].charAt(0).toUpperCase())}return t.join("")},lowerCaseString:function(e){let t,r=e;a.BREAKWORD_G.lastIndex=0;while(null!==(t=a.BREAKWORD_G.exec(e))){const n=t.index;if(void 0!==n){const s=t[1];if(!a.ENTITY.test(s)){const i=n+s.length;r=(n>0?r.substring(0,t.index):"")+e.substring(n,i).toLowerCase()+r.substring(i)}}}return r},spliceString:m,convertUnderscore:function(e){const t=p[e];if(t)return t;let r=e[0].toLowerCase(),n=true;const s=e.length;let i=1;while(i<s){const t=e.charAt(i++),s=t===t.toUpperCase();r+=n&&s&&"_"!==t?"_"+t.toLowerCase():t,n=!s}return p[e]=r,r},convertCamelCase:E,convertWord:function(e,t){let r="";const n=t?o.WORDDASH:o.WORD,s=e.length;let i=0;while(i<s){const t=e.charAt(i++);r+=n.test(t)?t:"_"}return r},convertInt:function(e){return parseInt(e)||0},convertFloat:v,convertAlpha:w,convertRoman:y,convertEnum:function(e,t,r){for(const n of Object.keys(t))if(e===t[n])return r[n];return""},randomUUID:function(e="-"){let t="";for(let r=0;r<5;++r){r>0&&(t+=e);const n=h[r];for(let e=0;e<n;++e)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()))}return t},formatString:function(e,...t){const r=t.length;let n=0;while(n<r)e=e.replace(`{${n}}`,t[n++]);return e},delimitString:function(e,...t){const r=e.value||"";if(""===r&&1===t.length)return t[0];const n=e.delimiter||"|",s=e.not||[],i=e.remove||false,a=""!==r?r.split(n):[],o=t.length;let l=-1;while(++l<o){const e=t[l];if(""!==e){if(a.includes(s[l]))continue;const t=a.findIndex(t=>t===e);-1===t?a.push(e):i&&a.splice(t,1)}}return e.sort&&a.sort(),a.join(n)},splitEnclosing:k,hasBit:x,isNumber:A,isString:S,isArray:function(e){return Array.isArray(e)&&e.length>0},isObject:R,isPlainObject:F,isEqual:function e(t,r){if(t===r)return true;if(Array.isArray(t)&&Array.isArray(r)){const e=t.length;if(e===r.length){let n=0;while(n<e)if(t[n]!==r[n++])return false;return true}}else if(F(t)&&F(r)&&Object.keys(t).length===Object.keys(r).length){for(const n in t){const s=t[n],i=r[n];if(s!==i){if(F(s)&&F(i)&&e(s,i))continue;return false}}return true}return false},includes:function(e,t,r=a.SEPARATOR){if(e)for(const n of e.split(r))if(n===t)return true;return false},cloneInstance:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)},cloneArray:T,cloneObject:C,resolvePath:N,trimBoth:function(e,t){const r=new RegExp(`^(${t})(.*?)\\1$`).exec(e);return r?r[2]:e},trimString:function(e,t){return P(I(e,t),t)},trimStart:P,trimEnd:I,appendSeparator:function(e,t,r="/"){return e=e.trim(),t=t.trim(),e+(""===e||""===t||e.endsWith(r)||t.startsWith(r)?"":r)+t},fromLastIndexOf:L,searchObject:function(e,t){const r=[];if("object"==typeof t)for(const n in t){const s=t[n];_(e[s])&&r.push([s,e[s]])}else{const n=/^\*.+\*$/.test(t)?e=>e.includes(t.replace(/^\*/,"").replace(/\*$/,"")):t.startsWith("*")?e=>e.endsWith(t.replace(/^\*/,"")):t.endsWith("*")?e=>e.startsWith(t.replace(/\*$/,"")):e=>e===t;for(const t in e)n(t)&&r.push([t,e[t]])}return r},hasValue:_,withinRange:B,aboveRange:function(e,t,r=1){return e+r>t},belowRange:function(e,t,r=1){return e-r<t},assignEmptyProperty:function(e,t){for(const r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e},assignEmptyValue:function(e,...t){const r=t.length;if(r>1){let n=e,s=0;do{const e=t[s],i=n[e];if(s===r-2){_(i)||(n[e]=t[s+1]);break}if(!S(e))break;if(null==i)n={},n[e]=n;else{if(!R(i))break;n=i}}while(++s)}},findSet:O,sortNumber:function(e,t=true){return t?e.sort((e,t)=>e<t?-1:1):e.sort((e,t)=>e>t?-1:1)},safeNestedArray:function(e,t){let r=e[t];return null==r&&(r=[],e[t]=r),r},safeNestedMap:function(e,t){let r=e[t];return null==r&&(r={},e[t]=r),r},sortArray:function(e,t,...r){return e.sort((e,n)=>{for(const s of r){let r=e,i=n;for(const e of s.split(".")){const t=r[e],n=i[e];if(void 0===t||void 0===n)return void 0===t&&void 0===n?0:void 0!==t?-1:1;r=t,i=n}if(r!==i)return t?r>i?1:-1:r<i?-1:1}return 0})},flatArray:function(e){let t=e.length,r=-1;while(++r<t){const n=e[r];null==n&&(e.splice(r--,1),t--)}return e},flatMultiArray:function e(t){let r=[];const n=t.length;let s=0;while(s<n){const n=t[s++];Array.isArray(n)?n.length&&(r=r.concat(e(n))):null!=n&&r.push(n)}return r},spliceArray:function(e,t,r,n){let s=e.length,i=-1,a=0;while(++i<s){const o=e[i];if(t(o,i,e)){if(r&&r(o,i,e),e.splice(i--,1),++a===n)break;s--}}return e},partitionArray:M,sameArray:D,joinArray:z,iterateArray:j,iterateReverseArray:function(e,t,r=0,n=Number.POSITIVE_INFINITY){r=Math.max(r,0);const s=Math.min(e.length,n);let i=s-1;while(i>=r){if(true===t(e[i],i--,e))return Number.POSITIVE_INFINITY}return s},conditionArray:function(e,t,r){const n=e.length;let s=-1;while(++s<n){const n=e[s];if(t(n,s,e)){if(false===r(n,s,e))break}}},flatMap:$,replaceMap:W,objectMap:G});class V{constructor(e){this._children=e||[]}[Symbol.iterator](){const e={done:false},t=this._children,r=t.length;let n=0;return{next:()=>(n<r?e.value=t[n++]:e.done=true,e)}}item(e,t){const r=this._children;return void 0!==e?t?e>=0&&e<r.length?(r[e]=t,t):void 0:r[e]:r[r.length-1]}append(e){return this._children.push(e),this}remove(...e){const t=[],r=this._children;return e.forEach(e=>{const n=r.length;let s=-1;while(++s<n)if(r[s]===e){r.splice(s,1),t.push(e);break}}),t}contains(e){return this._children.includes(e)}retain(e){return this._children=e,this}duplicate(){return this._children.slice(0)}clear(){return this._children.length=0,this}each(e){const t=this._children,r=t.length;let n=0;while(n<r)e(t[n],n++,t);return this}iterate(e,t,r){return j(this._children,e,t,r)}join(...e){let t=this._children;return e.forEach(e=>t=t.concat(e.children)),this._children=t,this}every(e){const t=this._children,r=t.length;if(r){let n=0;while(n<r)if(!e(t[n],n++,t))return false;return true}return false}same(e){return D(this._children,e)}partition(e){return M(this._children,e)}extract(e,t){let r,n;t&&({also:r,error:n}=t);const s=[],i=this._children;let a=i.length,o=-1;while(++o<a){const t=i[o];if(n&&n(t,o,i))break;e(t,o,i)&&(null==r||r.bind(t,t)(),s.push(t),i.splice(o--,1),a--)}return s}map(e){return G(this._children,e)}flatMap(e){return $(this._children,e)}findIndex(e,t){let r,n;t&&({also:r,error:n}=t);const s=this._children,i=s.length;let a=-1;while(++a<i){const t=s[a];if(n&&n(t,a,s))return-1;if(e(t,a,s))return null==r||r.bind(t,t)(),a}return-1}find(e,t){let r,n,s;t&&({also:n,error:r,cascade:s}=t);let i=false;const a=t=>{const o=t.children,l=o.length;let c=-1;while(++c<l){const t=o[c];if(r&&r(t,c,o)){i=true;break}if(e(t,c,o))return null==n||n.bind(t,t)(),t;if(s&&t instanceof V&&!t.isEmpty){const e=a(t);if(e)return null==n||n.bind(t,t)(),e;if(i)break}}};return a(this)}some(e,t){return void 0!==this.find(e,t)}cascade(e,t){let r,n;t&&({also:n,error:r}=t);let s=false;const i=t=>{let a=[];const o=t.children,l=o.length;let c=-1;while(++c<l){const t=o[c];if(r&&r(t,c,o)){s=true;break}if(e&&!e(t)||(null==n||n.bind(t,t)(),a.push(t)),t instanceof V&&!t.isEmpty&&(a=a.concat(i(t)),s))break}return a};return i(this)}sort(e){return e&&this._children.sort(e),this}concat(e){return this._children=this._children.concat(e),this}get children(){return this._children}get isEmpty(){return 0===this._children.length}get length(){return this._children.length}}function U(e){const t=navigator.platform.toLowerCase();return"string"==typeof e?t.includes(e.toLowerCase()):x(e,2)&&t.includes("win")||x(e,4)&&/(mac|iphone|ipad|ipod)/.test(t)}function X(e){const t=navigator.userAgent;let r;if(r=t.includes("Safari")&&!t.includes("Chrome")?4:t.includes("Firefox")?8:t.includes("Edge")?16:2,"string"==typeof e){const t=e.toUpperCase();e=0,t.includes("CHROME")&&(e|=2),t.includes("SAFARI")&&(e|=4),t.includes("FIREFOX")&&(e|=8),t.includes("EDGE")&&(e|=16)}return x(e,r)}function Y(){return 96*window.devicePixelRatio}var q=Object.freeze({__proto__:null,isWinEdge:function(){return X(16)&&U(2)},isPlatform:U,isUserAgent:X,getDeviceDPI:Y});const Z=/^(-?\d+\.\d+)e(-?\d+)$/,K=/^(-?\d+)\.(\d*?)(0{5,}|9{5,})\d*$/,Q={};function J(e){return Math.min.apply(null,e)}function ee(e,t,r=5){return r+=Math.floor(e).toString().length,e.toPrecision(r)===t.toPrecision(r)}function te(e,t=3){"string"==typeof e&&(e=parseFloat(e));const r=Math.floor(e);return e===r?e.toString():e>=0&&e<=1/Math.pow(10,t)||e<0&&e>=-1/Math.pow(10,t)?"0":(0!==r&&(t+=r.toString().length),ne(e.toPrecision(t)))}function re(e){if(e!==Math.floor(e)){const t=K.exec(function(e){const t=Z.exec(e.toString());return t?parseInt(t[2])>0?Number.MAX_SAFE_INTEGER.toString():"0":e.toString()}(e));if(t){const r=t[2];if(""===r)return Math.round(e);const n=t[1];return parseFloat(e.toPrecision(("0"!==n?n.length:0)+r.length))}}return e}function ne(e){const t=o.TRAILINGZERO.exec(e);return t?e.substring(0,e.length-t[t[1]?2:0].length):e}function se(e){return e*Math.PI/180}function ie(e,t){const r=t.x-e.x,n=t.y-e.y;return 180*Math.atan2(n,r)/Math.PI}function ae(e,t=0,r=1){return e<t?e=t:e>r&&(e=r),e}function oe(e,t=11){let r=e=se(e);for(let n=3,s=0;n<=t;n+=2)r+=Math.pow(e,n)/ce(n)*(s++%2==0?-1:1);return r}function le(e,t=10){e=se(e);let r=1;for(let n=2,s=0;n<=t;n+=2)r+=Math.pow(e,n)/ce(n)*(s++%2==0?-1:1);return r}function ce(e){let t=2,r=3;while(r<=e)t*=r++;return t}var ue=Object.freeze({__proto__:null,minArray:J,maxArray:function(e){return Math.max.apply(null,e)},equal:ee,moreEqual:function(e,t,r=5){return e>t||ee(e,t,r)},lessEqual:function(e,t,r=5){return e<t||ee(e,t,r)},truncate:te,truncateFraction:re,truncateTrailingZero:ne,truncateString:function(e,t=3){let r=Q[t];r?r.lastIndex=0:(r=new RegExp(`(-?\\d+\\.\\d{${t}})(\\d)\\d*`,"g"),Q[t]=r);let n,s=e;while(null!==(n=r.exec(e))){let e=n[1];parseInt(n[2])>=5&&(e=re(parseFloat(e)+1/Math.pow(10,t)).toString()),s=s.replace(n[0],ne(e))}return s},convertRadian:se,triangulate:function(e,t,r){const n=180-e-t;return[r/Math.sin(se(n))*Math.sin(se(e)),r/Math.sin(se(n))*Math.sin(se(t))]},absoluteAngle:ie,relativeAngle:function(e,t,r=90){let n=ie(e,t)+r;return n<0&&(n+=360),n},offsetAngleX:function(e,t){return t*Math.sin(se(e))},offsetAngleY:function(e,t){return t*Math.cos(se(e))*-1},clamp:ae,multipleOf:function(e,t=0,r){const n=e.length;if(n>1){const s=J(e);if((null==r?void 0:r.length)===n){let s=0;while(s<n)t=Math.max(t,r[s]+e[s++])}else r=void 0,t=Math.max(t,s);let i=0;while(i<t)i+=s;const a=(null==r?void 0:r[0])||0;let o=false;while(!o){const t=a+i;let l=1;while(l<n){if(t%((r?r[l]:0)+e[l++])!=0){o=false,i+=s;break}o=true}}return a+i}return e[0]},sin:oe,cos:le,tan:function(e,t=11){return oe(e,t)/le(e,t)},factorial:ce,hypotenuse:function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}});const he=[{value:"#000000",key:"black",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0}},{value:"#696969",key:"dimgray",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#696969",key:"dimgrey",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#808080",key:"gray",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#808080",key:"grey",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#A9A9A9",key:"darkgray",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#A9A9A9",key:"darkgrey",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#C0C0C0",key:"silver",rgb:{r:192,g:192,b:192},hsl:{h:0,s:0,l:75}},{value:"#D3D3D3",key:"lightgray",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#D3D3D3",key:"lightgrey",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#DCDCDC",key:"gainsboro",rgb:{r:220,g:220,b:220},hsl:{h:0,s:0,l:86}},{value:"#F5F5F5",key:"whitesmoke",rgb:{r:245,g:245,b:245},hsl:{h:0,s:0,l:96}},{value:"#FFFFFF",key:"white",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100}},{value:"#BC8F8F",key:"rosybrown",rgb:{r:188,g:143,b:143},hsl:{h:0,s:25,l:65}},{value:"#CD5C5C",key:"indianred",rgb:{r:205,g:92,b:92},hsl:{h:0,s:53,l:58}},{value:"#A52A2A",key:"brown",rgb:{r:165,g:42,b:42},hsl:{h:0,s:59,l:41}},{value:"#B22222",key:"firebrick",rgb:{r:178,g:34,b:34},hsl:{h:0,s:68,l:42}},{value:"#F08080",key:"lightcoral",rgb:{r:240,g:128,b:128},hsl:{h:0,s:79,l:72}},{value:"#800000",key:"maroon",rgb:{r:128,g:0,b:0},hsl:{h:0,s:100,l:25}},{value:"#8B0000",key:"darkred",rgb:{r:139,g:0,b:0},hsl:{h:0,s:100,l:27}},{value:"#FF0000",key:"red",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50}},{value:"#FFFAFA",key:"snow",rgb:{r:255,g:250,b:250},hsl:{h:0,s:100,l:99}},{value:"#FFE4E1",key:"mistyrose",rgb:{r:255,g:228,b:225},hsl:{h:6,s:100,l:94}},{value:"#FA8072",key:"salmon",rgb:{r:250,g:128,b:114},hsl:{h:6,s:93,l:71}},{value:"#FF6347",key:"tomato",rgb:{r:255,g:99,b:71},hsl:{h:9,s:100,l:64}},{value:"#E9967A",key:"darksalmon",rgb:{r:233,g:150,b:122},hsl:{h:15,s:72,l:70}},{value:"#FF7F50",key:"coral",rgb:{r:255,g:127,b:80},hsl:{h:16,s:100,l:66}},{value:"#FF4500",key:"orangered",rgb:{r:255,g:69,b:0},hsl:{h:16,s:100,l:50}},{value:"#FFA07A",key:"lightsalmon",rgb:{r:255,g:160,b:122},hsl:{h:17,s:100,l:74}},{value:"#A0522D",key:"sienna",rgb:{r:160,g:82,b:45},hsl:{h:19,s:56,l:40}},{value:"#FFF5EE",key:"seashell",rgb:{r:255,g:245,b:238},hsl:{h:25,s:100,l:97}},{value:"#D2691E",key:"chocolate",rgb:{r:210,g:105,b:30},hsl:{h:25,s:75,l:47}},{value:"#8B4513",key:"saddlebrown",rgb:{r:139,g:69,b:19},hsl:{h:25,s:76,l:31}},{value:"#F4A460",key:"sandybrown",rgb:{r:244,g:164,b:96},hsl:{h:28,s:87,l:67}},{value:"#FFDAB9",key:"peachpuff",rgb:{r:255,g:218,b:185},hsl:{h:28,s:100,l:86}},{value:"#CD853F",key:"peru",rgb:{r:205,g:133,b:63},hsl:{h:30,s:59,l:53}},{value:"#FAF0E6",key:"linen",rgb:{r:250,g:240,b:230},hsl:{h:30,s:67,l:94}},{value:"#FFE4C4",key:"bisque",rgb:{r:255,g:228,b:196},hsl:{h:33,s:100,l:88}},{value:"#FF8C00",key:"darkorange",rgb:{r:255,g:140,b:0},hsl:{h:33,s:100,l:50}},{value:"#DEB887",key:"burlywood",rgb:{r:222,g:184,b:135},hsl:{h:34,s:57,l:70}},{value:"#FAEBD7",key:"antiquewhite",rgb:{r:250,g:235,b:215},hsl:{h:34,s:78,l:91}},{value:"#D2B48C",key:"tan",rgb:{r:210,g:180,b:140},hsl:{h:34,s:44,l:69}},{value:"#FFDEAD",key:"navajowhite",rgb:{r:255,g:222,b:173},hsl:{h:36,s:100,l:84}},{value:"#FFEBCD",key:"blanchedalmond",rgb:{r:255,g:235,b:205},hsl:{h:36,s:100,l:90}},{value:"#FFEFD5",key:"papayawhip",rgb:{r:255,g:239,b:213},hsl:{h:37,s:100,l:92}},{value:"#FFE4B5",key:"moccasin",rgb:{r:255,g:228,b:181},hsl:{h:38,s:100,l:85}},{value:"#FFA500",key:"orange",rgb:{r:255,g:165,b:0},hsl:{h:39,s:100,l:50}},{value:"#F5DEB3",key:"wheat",rgb:{r:245,g:222,b:179},hsl:{h:39,s:77,l:83}},{value:"#FDF5E6",key:"oldlace",rgb:{r:253,g:245,b:230},hsl:{h:39,s:85,l:95}},{value:"#FFFAF0",key:"floralwhite",rgb:{r:255,g:250,b:240},hsl:{h:40,s:100,l:97}},{value:"#B8860B",key:"darkgoldenrod",rgb:{r:184,g:134,b:11},hsl:{h:43,s:89,l:38}},{value:"#DAA520",key:"goldenrod",rgb:{r:218,g:165,b:32},hsl:{h:43,s:74,l:49}},{value:"#FFF8DC",key:"cornsilk",rgb:{r:255,g:248,b:220},hsl:{h:48,s:100,l:93}},{value:"#FFD700",key:"gold",rgb:{r:255,g:215,b:0},hsl:{h:51,s:100,l:50}},{value:"#FFFACD",key:"lemonchiffon",rgb:{r:255,g:250,b:205},hsl:{h:54,s:100,l:90}},{value:"#F0E68C",key:"khaki",rgb:{r:240,g:230,b:140},hsl:{h:54,s:77,l:75}},{value:"#EEE8AA",key:"palegoldenrod",rgb:{r:238,g:232,b:170},hsl:{h:55,s:67,l:80}},{value:"#BDB76B",key:"darkkhaki",rgb:{r:189,g:183,b:107},hsl:{h:56,s:38,l:58}},{value:"#F5F5DC",key:"beige",rgb:{r:245,g:245,b:220},hsl:{h:60,s:56,l:91}},{value:"#FAFAD2",key:"lightgoldenrodyellow",rgb:{r:250,g:250,b:210},hsl:{h:60,s:80,l:90}},{value:"#808000",key:"olive",rgb:{r:128,g:128,b:0},hsl:{h:60,s:100,l:25}},{value:"#FFFF00",key:"yellow",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50}},{value:"#FFFFE0",key:"lightyellow",rgb:{r:255,g:255,b:224},hsl:{h:60,s:100,l:94}},{value:"#FFFFF0",key:"ivory",rgb:{r:255,g:255,b:240},hsl:{h:60,s:100,l:97}},{value:"#6B8E23",key:"olivedrab",rgb:{r:107,g:142,b:35},hsl:{h:80,s:60,l:35}},{value:"#9ACD32",key:"yellowgreen",rgb:{r:154,g:205,b:50},hsl:{h:80,s:61,l:50}},{value:"#556B2F",key:"darkolivegreen",rgb:{r:85,g:107,b:47},hsl:{h:82,s:39,l:30}},{value:"#ADFF2F",key:"greenyellow",rgb:{r:173,g:255,b:47},hsl:{h:84,s:100,l:59}},{value:"#7FFF00",key:"chartreuse",rgb:{r:127,g:255,b:0},hsl:{h:90,s:100,l:50}},{value:"#7CFC00",key:"lawngreen",rgb:{r:124,g:252,b:0},hsl:{h:90,s:100,l:49}},{value:"#8FBC8F",key:"darkseagreen",rgb:{r:143,g:188,b:143},hsl:{h:120,s:25,l:65}},{value:"#228B22",key:"forestgreen",rgb:{r:34,g:139,b:34},hsl:{h:120,s:61,l:34}},{value:"#32CD32",key:"limegreen",rgb:{r:50,g:205,b:50},hsl:{h:120,s:61,l:50}},{value:"#90EE90",key:"lightgreen",rgb:{r:144,g:238,b:144},hsl:{h:120,s:73,l:75}},{value:"#98FB98",key:"palegreen",rgb:{r:152,g:251,b:152},hsl:{h:120,s:93,l:79}},{value:"#006400",key:"darkgreen",rgb:{r:0,g:100,b:0},hsl:{h:120,s:100,l:20}},{value:"#008000",key:"green",rgb:{r:0,g:128,b:0},hsl:{h:120,s:100,l:25}},{value:"#00FF00",key:"lime",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50}},{value:"#F0FFF0",key:"honeydew",rgb:{r:240,g:255,b:240},hsl:{h:120,s:100,l:97}},{value:"#2E8B57",key:"seagreen",rgb:{r:46,g:139,b:87},hsl:{h:146,s:50,l:36}},{value:"#3CB371",key:"mediumseagreen",rgb:{r:60,g:179,b:113},hsl:{h:147,s:50,l:47}},{value:"#00FF7F",key:"springgreen",rgb:{r:0,g:255,b:127},hsl:{h:150,s:100,l:50}},{value:"#F5FFFA",key:"mintcream",rgb:{r:245,g:255,b:250},hsl:{h:150,s:100,l:98}},{value:"#00FA9A",key:"mediumspringgreen",rgb:{r:0,g:250,b:154},hsl:{h:157,s:100,l:49}},{value:"#66CDAA",key:"mediumaquamarine",rgb:{r:102,g:205,b:170},hsl:{h:160,s:51,l:60}},{value:"#7FFFD4",key:"aquamarine",rgb:{r:127,g:255,b:212},hsl:{h:160,s:100,l:75}},{value:"#40E0D0",key:"turquoise",rgb:{r:64,g:224,b:208},hsl:{h:174,s:72,l:56}},{value:"#20B2AA",key:"lightseagreen",rgb:{r:32,g:178,b:170},hsl:{h:177,s:70,l:41}},{value:"#48D1CC",key:"mediumturquoise",rgb:{r:72,g:209,b:204},hsl:{h:178,s:60,l:55}},{value:"#2F4F4F",key:"darkslategray",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#2F4F4F",key:"darkslategrey",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#AFEEEE",key:"paleturquoise",rgb:{r:175,g:238,b:238},hsl:{h:180,s:65,l:81}},{value:"#008080",key:"teal",rgb:{r:0,g:128,b:128},hsl:{h:180,s:100,l:25}},{value:"#008B8B",key:"darkcyan",rgb:{r:0,g:139,b:139},hsl:{h:180,s:100,l:27}},{value:"#00FFFF",key:"aqua",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#00FFFF",key:"cyan",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#E0FFFF",key:"lightcyan",rgb:{r:224,g:255,b:255},hsl:{h:180,s:100,l:94}},{value:"#F0FFFF",key:"azure",rgb:{r:240,g:255,b:255},hsl:{h:180,s:100,l:97}},{value:"#00CED1",key:"darkturquoise",rgb:{r:0,g:206,b:209},hsl:{h:181,s:100,l:41}},{value:"#5F9EA0",key:"cadetblue",rgb:{r:95,g:158,b:160},hsl:{h:182,s:25,l:50}},{value:"#B0E0E6",key:"powderblue",rgb:{r:176,g:224,b:230},hsl:{h:187,s:52,l:80}},{value:"#ADD8E6",key:"lightblue",rgb:{r:173,g:216,b:230},hsl:{h:195,s:53,l:79}},{value:"#00BFFF",key:"deepskyblue",rgb:{r:0,g:191,b:255},hsl:{h:195,s:100,l:50}},{value:"#87CEEB",key:"skyblue",rgb:{r:135,g:206,b:235},hsl:{h:197,s:71,l:73}},{value:"#87CEFA",key:"lightskyblue",rgb:{r:135,g:206,b:250},hsl:{h:203,s:92,l:75}},{value:"#4682B4",key:"steelblue",rgb:{r:70,g:130,b:180},hsl:{h:207,s:44,l:49}},{value:"#F0F8FF",key:"aliceblue",rgb:{r:240,g:248,b:255},hsl:{h:208,s:100,l:97}},{value:"#1E90FF",key:"dodgerblue",rgb:{r:30,g:144,b:255},hsl:{h:210,s:100,l:56}},{value:"#708090",key:"slategray",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#708090",key:"slategrey",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#778899",key:"lightslategray",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#778899",key:"lightslategrey",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#B0C4DE",key:"lightsteelblue",rgb:{r:176,g:196,b:222},hsl:{h:214,s:41,l:78}},{value:"#6495ED",key:"cornflower",rgb:{r:100,g:149,b:237},hsl:{h:219,s:79,l:66}},{value:"#4169E1",key:"royalblue",rgb:{r:65,g:105,b:225},hsl:{h:225,s:73,l:57}},{value:"#191970",key:"midnightblue",rgb:{r:25,g:25,b:112},hsl:{h:240,s:64,l:27}},{value:"#E6E6FA",key:"lavender",rgb:{r:230,g:230,b:250},hsl:{h:240,s:67,l:94}},{value:"#000080",key:"navy",rgb:{r:0,g:0,b:128},hsl:{h:240,s:100,l:25}},{value:"#00008B",key:"darkblue",rgb:{r:0,g:0,b:139},hsl:{h:240,s:100,l:27}},{value:"#0000CD",key:"mediumblue",rgb:{r:0,g:0,b:205},hsl:{h:240,s:100,l:40}},{value:"#0000FF",key:"blue",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50}},{value:"#F8F8FF",key:"ghostwhite",rgb:{r:248,g:248,b:255},hsl:{h:240,s:100,l:99}},{value:"#6A5ACD",key:"slateblue",rgb:{r:106,g:90,b:205},hsl:{h:248,s:53,l:58}},{value:"#483D8B",key:"darkslateblue",rgb:{r:72,g:61,b:139},hsl:{h:248,s:39,l:39}},{value:"#7B68EE",key:"mediumslateblue",rgb:{r:123,g:104,b:238},hsl:{h:249,s:80,l:67}},{value:"#9370DB",key:"mediumpurple",rgb:{r:147,g:112,b:219},hsl:{h:260,s:60,l:65}},{value:"#8A2BE2",key:"blueviolet",rgb:{r:138,g:43,b:226},hsl:{h:271,s:76,l:53}},{value:"#4B0082",key:"indigo",rgb:{r:75,g:0,b:130},hsl:{h:275,s:100,l:25}},{value:"#9932CC",key:"darkorchid",rgb:{r:153,g:50,b:204},hsl:{h:280,s:61,l:50}},{value:"#9400D3",key:"darkviolet",rgb:{r:148,g:0,b:211},hsl:{h:282,s:100,l:41}},{value:"#BA55D3",key:"mediumorchid",rgb:{r:186,g:85,b:211},hsl:{h:288,s:59,l:58}},{value:"#D8BFD8",key:"thistle",rgb:{r:216,g:191,b:216},hsl:{h:300,s:24,l:80}},{value:"#DDA0DD",key:"plum",rgb:{r:221,g:160,b:221},hsl:{h:300,s:47,l:75}},{value:"#EE82EE",key:"violet",rgb:{r:238,g:130,b:238},hsl:{h:300,s:76,l:72}},{value:"#800080",key:"purple",rgb:{r:128,g:0,b:128},hsl:{h:300,s:100,l:25}},{value:"#8B008B",key:"darkmagenta",rgb:{r:139,g:0,b:139},hsl:{h:300,s:100,l:27}},{value:"#FF00FF",key:"fuchsia",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#FF00FF",key:"magenta",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#DA70D6",key:"orchid",rgb:{r:218,g:112,b:214},hsl:{h:302,s:59,l:65}},{value:"#C71585",key:"mediumvioletred",rgb:{r:199,g:21,b:133},hsl:{h:322,s:81,l:43}},{value:"#FF1493",key:"deeppink",rgb:{r:255,g:20,b:147},hsl:{h:328,s:100,l:54}},{value:"#FF69B4",key:"hotpink",rgb:{r:255,g:105,b:180},hsl:{h:330,s:100,l:71}},{value:"#FFF0F5",key:"lavenderblush",rgb:{r:255,g:240,b:245},hsl:{h:340,s:100,l:97}},{value:"#DB7093",key:"palevioletred",rgb:{r:219,g:112,b:147},hsl:{h:340,s:60,l:65}},{value:"#DC143C",key:"crimson",rgb:{r:220,g:20,b:60},hsl:{h:348,s:83,l:47}},{value:"#FFC0CB",key:"pink",rgb:{r:255,g:192,b:203},hsl:{h:350,s:100,l:88}},{value:"#FFB6C1",key:"lightpink",rgb:{r:255,g:182,b:193},hsl:{h:351,s:100,l:86}}],ge={},de=e=>255*ae(e);function fe(e){e=e.toLowerCase();const t=he.length;let r=0;while(r<t){const t=he[r++];if(t.key===e)return t}}function pe(e,t=1,r=false){if(e&&("transparent"!==e||r)){let n=ge[e];if(n)return n;let s,a="";if(e.startsWith("#"))s=me(e);else{let r=i.RGBA.exec(e);if(r)s={r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:r[4]?255*parseFloat(r[4]):de(t)};else if(r=i.HSLA.exec(e),r)s=ve({h:parseInt(r[1]),s:parseInt(r[2]),l:parseInt(r[3]),a:ae(r[4]?parseFloat(r[4]):t)});else switch(e){case"transparent":s={r:0,g:0,b:0,a:0},a="transparent";break;case"initial":s={r:0,g:0,b:0,a:255},a="black";break;default:{const r=fe(e);r&&(s=Object.assign(Object.assign({},r.rgb),{a:de(t)}),a=e);break}}}if(s){const{r:i,g:o,b:l,a:c}=s;if(c>0||r){const r=be(i,o,l),u=be(c),h="#"+(r+u);return ge[h]?ge[h]:(t=c/255,n={key:a,value:e="#"+r,valueAsRGBA:h,valueAsARGB:"#"+(u+r),rgba:s,hsl:Ee(s),opacity:t,transparent:0===t},1===t&&(ge[e]=n),ge[h]=n,n)}}}}function be(...e){let t="";return e.forEach(e=>{const r=Math.max(0,Math.min(e,255));t+=isNaN(r)?"00":"0123456789ABCDEF".charAt((r-r%16)/16)+"0123456789ABCDEF".charAt(r%16)}),t}function me(e){if(e=e.replace(/#/g,"").trim(),i.HEX.test(e)){let t=255;switch(e.length){case 4:t=parseInt(e.charAt(3).repeat(2),16);case 3:e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2);break;case 5:e+=e.charAt(4);break;default:e.length>=8&&(t=parseInt(e.substring(6,8),16)),e=e.substring(0,6)}if(6===e.length)return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16),a:t}}}function Ee(e){const t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n);let a=(i+s)/2;const o=a;let l;if(i===s)a=0,l=0;else{const e=i-s;switch(l=o>.5?e/(2-i-s):e/(i+s),i){case t:a=(r-n)/e+(r<n?6:0);break;case r:a=(n-t)/e+2;break;case n:a=(t-r)/e+4}a/=6}return{h:Math.round(360*a),s:Math.round(100*l),l:Math.round(100*o),a:e.a/255}}function ve(e){let t,r,n,{h:s,s:i,l:a,a:o}=e;if(s/=360,i/=100,a/=100,0===i)t=a,r=a,n=a;else{const e=a<.5?a*(1+i):a+i-a*i,o=2*a-e,l=t=>(t<0?t+=1:t>1&&(t-=1),t<1/6?o+6*(e-o)*t:t<.5?e:t<2/3?o+(e-o)*(2/3-t)*6:o);t=l(s+1/3),r=l(s),n=l(s-1/3)}return t=Math.round(255*Math.min(t,1)),r=Math.round(255*Math.min(r,1)),n=Math.round(255*Math.min(n,1)),o=Math.round(255*Math.min(o,1)),{r:t,g:r,b:n,a:o}}function we(e){return`rgb${e.a<255?"a":""}(${e.r}, ${e.g}, ${e.b}`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}var ye=Object.freeze({__proto__:null,findColorName:fe,findColorShade:function(e){const t=me(e);if(t){const r=Ee(t),n=[];let s=-1;const i=he.length;let a=0;while(a<i){const t=he[a++];if(t.value===e)return t;-1!==s?s===t.hsl.h&&n.push(t):r.h<=t.hsl.h&&(n.push(t),s=t.hsl.h)}const o=n.length;if(1===o)return n[0];if(o>1){const e=r.l+r.s;let t=Number.POSITIVE_INFINITY,s=-1;for(a=0;a<o;++a){const{l:r,s:i}=n[a].hsl,o=Math.abs(e-(r+i));o<t&&(t=o,s=a)}return n[s]}return he[he.length-1]}},parseColor:pe,reduceRGBA:function(e,t,r){if(r){const e=ge[r+="_"+t];if(e)return e}let{r:n,g:s,b:i}=e;0===n&&0===s&&0===i&&(n=255,s=255,i=255,t>0&&(t*=-1));const a=t<0?0:255;t=Math.abs(t);const o=pe(we({r:(n+Math.round((a-n)*t))%255,g:(s+Math.round((a-s)*t))%255,b:(i+Math.round((a-i)*t))%255,a:e.a}));return r&&(ge[r]=o),o},getHexCode:be,convertHex:function(e){return"#"+be(e.r,e.g,e.b)+(e.a<255?be(e.a):"")},parseRGBA:me,convertHSLA:Ee,convertRGBA:ve,formatRGBA:we,formatHSLA:function(e){return`hsl${e.a<255?"a":""}(${e.h}, ${e.s}%, ${e.l}%`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}});const ke=`(\\(\\s*(?:orientation:\\s*(?:portrait|landscape)|(?:max|min)-width:\\s*${n.LENGTH_PERCENTAGE})\\s*\\))`,xe=/((?:\d+%\s*,?\s*)+|from|to)\s*{\s*(.+?)\s*}/,Ae=/(?:(not|only)?\s*(?:all|screen)\s+and\s+)?((?:\([^)]+\)(?:\s+and\s+)?)+),?\s*/g,Se=/\(([a-z-]+)\s*(:|<?=?|=?>?)?\s*([\w.%]+)?\)(?:\s+and\s+)?/g,Re=/^(.*?)\s+(?:([\d.]+)([xw]))?$/,Fe=/\s+([+-]\s+|\s*[*/])\s*/,Te=/^\s*-?\d+\s*$/,Ce=/\s*\/\s*/,Ne=/^\*(\s+\*){0,2}$/,Pe=/^(\*\s+){1,2}/,Ie=new RegExp(n.CSS_CALC),Le=new RegExp(`(${n.UNIT_LENGTH}|%)`),_e=new RegExp(`\\s*(?:(\\(\\s*)?${ke}|(\\(\\s*))?\\s*(and|or|not)?\\s*(?:${ke}(\\s*\\))?)?\\s*(.+)`);function Be(e,t,r){switch(e){case"<=":return t<=r;case"<":return t<r;case">=":return t>=r;case">":return t>r;default:return t===r}}function Oe(e,t,r){const n=[];W(k(t.trim(),"calc"),e=>e.trim()).forEach(e=>{e.includes(" ")&&!wt(e)?n.push(...e.split(o.SPACE)):n.push(e)});const s=n.length;switch(s){case 1:case 2:return ct(e,n.join(" "),{dimension:["width","height"],boundingBox:r,parent:false});case 3:case 4:{let t=0,i=0;for(let a=0;a<s;++a){const o=n[a];switch(o){case"top":case"bottom":if(2==++i)return"";break;case"center":if(4===s)return"";break;case"left":case"right":if(2==++t)return"";break;default:{let t;switch(n[a-1]){case"top":case"bottom":t="height";break;case"left":case"right":t="width";break;default:return""}if(wt(o)){const s=Ze(ut(e,o,{dimension:t,boundingBox:r}));if(""===s)return"";n[a]=s}break}}}return n.join(" ")}}return""}function Me(e,t){const r=k(t),n=r.length;if(n>1){for(let t=1;t<n;++t){const n=r[t].trim();if(St(n)){const s=r[t-1].trim();if(qe(s)){const i=Qe(n).split(a.SEPARATOR),o=i.length;if(o>=3){const n=s.startsWith("hsl");for(let t=0;t<o;++t){const r=i[t];if(wt(r))if(!n||1!==t&&2!==t)if(3===t){const n=r.includes("%");let s=ut(e,r,n?{unitType:4}:{unitType:64});if(isNaN(s))return"";n&&(s/=100),i[t]=ae(s).toString()}else{const n=ut(e,r,{unitType:64,supportPercent:false});if(isNaN(n))return"";i[t]=ae(n,0,255).toString()}else{const n=ut(e,r,{unitType:4,supportPercent:true});if(isNaN(n))return"";i[t]=ae(n,0,100)+"%"}}r[t]=`(${i.join(", ")})`;continue}}return""}}return r.join("")}return t}function De(e,t,r,n,s,i="width"){const a=k(t,"calc"),o=a.length;for(let t=0;t<o;++t){const o=a[t];if(wt(o)){const l=Le.test(o),c=ut(e,o,l?{dimension:i,boundingBox:s,min:0,parent:false}:{unitType:r,min:n,supportPercent:false});if(isNaN(c))return"";a[t]=c+(l?"px":"")}}return a.join("").trim()}function ze(e){switch(e){case"vertical-lr":return 1;case"vertical-rl":return 2}return 0}function je(e){switch(e){case"none":case"initial":case"hidden":return false}return true}function $e(e){return(je(e.getPropertyValue("border-left-style"))?parseFloat(e.getPropertyValue("border-left-width")):0)+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))+(je(e.getPropertyValue("border-right-style"))?parseFloat(e.getPropertyValue("border-right-width")):0)}function We(e){return(je(e.getPropertyValue("border-top-style"))?parseFloat(e.getPropertyValue("border-top-width")):0)+parseFloat(e.getPropertyValue("padding-top"))+parseFloat(e.getPropertyValue("padding-bottom"))+(je(e.getPropertyValue("border-bottom-style"))?parseFloat(e.getPropertyValue("border-bottom-width")):0)}function Ge(e){switch(e){case"absolute":case"fixed":return true}return false}function He(e=["left","top"]){return{static:true,top:0,left:0,right:0,bottom:0,topAsPercent:0,leftAsPercent:0,rightAsPercent:0,bottomAsPercent:0,horizontal:"left",vertical:"top",orientation:e}}const Ve=e=>(null==e?void 0:e.width)||window.innerWidth,Ue=e=>(null==e?void 0:e.height)||window.innerHeight,Xe=(e,t,r,n)=>At(e)?Math.round(v(e)/100*t):pt(e,r,n),Ye=(e,t,r,n)=>At(e)?parseFloat(e)/100:pt(e,r,n)/t,qe=e=>/(rgb|hsl)a?/.test(e),Ze=e=>isNaN(e)?"":e+"px",Ke=e=>isNaN(e)?"":e.toString(),Qe=e=>e.substring(1,e.length-1),Je=e=>Ne.test(e)?"*":e.replace(Pe,"");function et(e,t=""){if(e){const r=e["__style"+t];if(r)return r;if(rt(e)){const r=getComputedStyle(e,t);return e["__style"+t]=r,r}return{position:"static",display:"inline"}}return{position:"static",display:"none"}}function tt(e){return"#"===e.nodeName.charAt(0)&&(e=e.parentElement||document.body),parseFloat(et(e).getPropertyValue("font-size"))}function rt(e){return"#"!==e.nodeName.charAt(0)&&(e instanceof HTMLElement||e instanceof SVGElement)}function nt(e,t){switch(e){case"inlineSize":return 0===ze(t)?"width":"height";case"blockSize":return 0===ze(t)?"height":"width";case"maxInlineSize":return 0===ze(t)?"maxWidth":"maxHeight";case"maxBlockSize":return 0===ze(t)?"maxHeight":"maxWidth";case"minInlineSize":return 0===ze(t)?"minWidth":"minHeight";case"minBlockSize":return 0===ze(t)?"minHeight":"minWidth";case"borderInlineStart":return 0===ze(t)?"borderLeft":"borderTop";case"borderInlineEnd":return 0===ze(t)?"borderRight":"borderBottom";case"borderInlineStartWidth":return 0===ze(t)?"borderLeftWidth":"borderTopWidth";case"borderInlineEndWidth":return 0===ze(t)?"borderRightWidth":"borderBottomWidth";case"insetInlineStart":return 0===ze(t)?"left":"top";case"insetInlineEnd":return 0===ze(t)?"right":"bottom";case"marginInlineStart":return 0===ze(t)?"marginLeft":"marginTop";case"marginInlineEnd":return 0===ze(t)?"marginRight":"marginBottom";case"paddingInlineStart":return 0===ze(t)?"paddingLeft":"paddingTop";case"paddingInlineEnd":return 0===ze(t)?"paddingRight":"paddingBottom";case"scrollMarginInlineStart":return 0===ze(t)?"scrollMarginLeft":"scrollMarginTop";case"scrollMarginInlineEnd":return 0===ze(t)?"scrollMarginRight":"scrollMarginBottom";case"scrollPaddingInlineStart":return 0===ze(t)?"scrollPaddingLeft":"scrollPaddingTop";case"scrollPaddingInlineEnd":return 0===ze(t)?"scrollPaddingRight":"scrollPaddingBottom";case"borderBlockStart":switch(ze(t)){case 0:return"borderTop";case 1:return"borderLeft";case 2:return"borderRight"}case"borderBlockEnd":switch(ze(t)){case 0:return"borderBottom";case 1:return"borderRight";case 2:return"borderLeft"}case"borderBlockStartWidth":switch(ze(t)){case 0:return"borderTopWidth";case 1:return"borderLeftWidth";case 2:return"borderRightWidth"}case"borderBlockEndWidth":switch(ze(t)){case 0:return"borderBottomWidth";case 1:return"borderRightWidth";case 2:return"borderLeftWidth"}case"insetBlockStart":switch(ze(t)){case 0:return"top";case 1:return"left";case 2:return"right"}case"insetBlockEnd":switch(ze(t)){case 0:return"bottom";case 1:return"right";case 2:return"left"}case"marginBlockStart":switch(ze(t)){case 0:return"marginTop";case 1:return"marginLeft";case 2:return"marginRight"}case"marginBlockEnd":switch(ze(t)){case 0:return"marginBottom";case 1:return"marginRight";case 2:return"marginLeft"}case"paddingBlockStart":switch(ze(t)){case 0:return"paddingTop";case 1:return"paddingLeft";case 2:return"paddingRight"}case"paddingBlockEnd":switch(ze(t)){case 0:return"paddingBottom";case 1:return"paddingRight";case 2:return"paddingLeft"}case"scrollMarginBlockStart":switch(ze(t)){case 0:return"scrollMarginTop";case 1:return"scrollMarginLeft";case 2:return"scrollMarginRight"}case"scrollMarginBlockEnd":switch(ze(t)){case 0:return"scrollMarginBottom";case 1:return"scrollMarginRight";case 2:return"scrollMarginLeft"}case"scrollPaddingBlockStart":switch(ze(t)){case 0:return"scrollPaddingTop";case 1:return"scrollPaddingLeft";case 2:return"scrollPaddingRight"}case"scrollPaddingBlockEnd":switch(ze(t)){case 0:return"scrollPaddingBottom";case 1:return"scrollPaddingRight";case 2:return"scrollPaddingLeft"}}return""}function st(e,t,r,n){switch(t){case"left":case"right":case"textIndent":return Ze(ut(e,r,{dimension:"width",boundingBox:n}));case"columnWidth":case"marginBottom":case"marginLeft":case"marginRight":case"marginTop":case"maxWidth":case"minWidth":case"paddingBottom":case"paddingLeft":case"paddingRight":case"paddingTop":case"scrollMarginBottom":case"scrollMarginLeft":case"scrollMarginRight":case"scrollMarginTop":case"scrollPaddingBottom":case"scrollPaddingLeft":case"scrollPaddingRight":case"scrollPaddingTop":case"width":return Ze(ut(e,r,{dimension:"width",boundingBox:n,min:0}));case"columnGap":case"gridColumnGap":case"shapeMargin":return Ze(ut(e,r,{dimension:"width",boundingBox:n,min:0,parent:false}));case"bottom":case"top":case"verticalAlign":return Ze(ut(e,r,{dimension:"height",boundingBox:n}));case"height":case"maxHeight":case"minHeight":return Ze(ut(e,r,{dimension:"height",boundingBox:n,min:0}));case"gridRowGap":case"rowGap":return Ze(ut(e,r,{dimension:"height",boundingBox:n,min:0,parent:false}));case"flexBasis":{const t=e.parentElement;return Ze(ut(e,r,{dimension:!!t&&et(t).flexDirection.includes("column")?"height":"width",boundingBox:n,min:0}))}case"borderBottomWidth":case"borderLeftWidth":case"borderRightWidth":case"borderTopWidth":case"letterSpacing":case"outlineOffset":case"outlineWidth":case"perspective":case"wordSpacing":return Ze(ut(e,r,{min:0,supportPercent:false}));case"offsetDistance":{let t=0;if(r.includes("%")){const r=et(e).getPropertyValue("offset-path");if("none"!==r){const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",r),t=e.getTotalLength()}}return Ze(ut(e,r,{boundingSize:t}))}case"lineHeight":return Ze(ut(e,r,{boundingSize:tt(e),min:0}));case"fontSize":return Ze(ut(e,r,{boundingSize:tt(e.parentElement||document.body),min:0}));case"margin":return ct(e,r,{dimension:"width",boundingBox:n});case"borderBottomLeftRadius":case"borderBottomRightRadius":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderRadius":case"padding":case"scrollMargin":case"scrollMarginBlock":case"scrollMarginInline":case"scrollPadding":case"scrollPaddingBlock":case"scrollPaddingInline":return ct(e,r,{dimension:"width",boundingBox:n,min:0});case"objectPosition":return ct(e,r,{dimension:["width","height"],boundingBox:n});case"gridGap":case"perspectiveOrigin":return ct(e,r,{dimension:["width","height"],boundingBox:n,min:"gridGap"===t?0:void 0,parent:false});case"borderImageOutset":case"borderImageWidth":return ct(e,r,{dimension:["height","width","height","width"],boundingBox:n,min:0,parent:false});case"borderWidth":case"borderSpacing":case"columnRule":return ct(e,r,{min:0,supportPercent:false});case"gridAutoColumns":case"gridTemplateColumns":return De(e,r,32,1,n);case"gridAutoRows":case"gridTemplateRows":return De(e,r,32,1,n,"height");case"zIndex":return Ke(ut(e,r,{unitType:32}));case"tabSize":return Ke(ut(e,r,{unitType:32,min:0}));case"columnCount":case"fontWeight":case"widows":return Ke(ut(e,r,{unitType:32,min:1}));case"gridRow":case"gridRowEnd":case"gridRowStart":case"gridColumn":case"gridColumnEnd":case"gridColumnStart":case"counterIncrement":case"counterReset":return ct(e,r,{unitType:32});case"fontVariationSettings":return ct(e,r,{unitType:32,min:0});case"gridArea":return ct(e,r,{unitType:32,min:1});case"flexGrow":case"flexShrink":return Ke(ut(e,r,{unitType:64,min:0}));case"animationIterationCount":case"fontSizeAdjust":return Ke(ut(e,r,{unitType:64,min:0,supportPercent:false}));case"opacity":case"shapeImageThreshold":{const t=r.includes("%"),n=ut(e,r,{unitType:t?4:64});return isNaN(n)?"":ae(n*(t?.01:1)).toString()}case"fontStretch":return ct(e,r,{unitType:4,min:0,supportPercent:true});case"fontStyle":case"offsetRotate":return ct(e,r,{unitType:16,supportPercent:false});case"offsetAnchor":case"transformOrigin":return Oe(e,r,n);case"transform":{const t=k(r=r.trim()),s=t.length;if(s>1){for(let r=1;r<s;++r){let s=t[r];if(St(s)){let i;switch(s=Qe(s),t[r-1].trim()){case"matrix":case"matrix3d":i=ct(e,s,{unitType:64,supportPercent:false});break;case"scaleX":case"scaleY":case"scaleZ":{const t=ut(e,s,{unitType:64,min:0,supportPercent:false});isNaN(t)||(i=t.toString());break}case"scale":case"scale3d":i=ct(e,s,{unitType:64,min:0,supportPercent:false});break;case"translateX":i=Ze(ut(e,s,{dimension:"width",boundingBox:n,parent:true}));break;case"translateY":i=Ze(ut(e,s,{dimension:"height",boundingBox:n,parent:true}));break;case"translateZ":case"perspective":i=Ze(ut(e,s,{supportPercent:false}));break;case"translate":case"translate3d":i=ct(e,s,{dimension:["width","height"],boundingBox:n,parent:true});break;case"skew":case"rotate":i=ct(e,s,{unitType:16,supportPercent:false});break;case"skewX":case"skewY":case"rotateX":case"rotateY":case"rotateZ":{const t=ut(e,s,{unitType:16,supportPercent:false});isNaN(t)||(i=t+"deg");break}case"rotate3d":{const t=s.split(a.SEPARATOR),r=t.length;if(3===r||4===r){i="";for(let n=0;n<r;++n){let r=t[n];if(wt(r)){const t=ut(e,r,{unitType:3===n?16:64,supportPercent:false});if(isNaN(t))return"";r=t+(3===n?"deg":"")}i+=(""!==i?", ":"")+r}}break}}if(!i)return"";t[r]=`(${i})`}}return t.join("")}return r}case"backgroundImage":case"borderImageSource":case"maskImage":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r];if(qe(n)&&St(n)){const s=k(Qe(n)),i=s.length;for(let t=1;t<i;++t)if(St(s[t])){const r=s[t-1];if(qe(r)){const n=r.split(o.SPACE).pop(),i=Me(e,n+s[t]);if(""!==i){s[t]=i.replace(n,"");continue}}return""}t[r]=`(${s.join("")})`}}return t.join("")}return r}case"borderColor":case"scrollbarColor":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1];if(qe(n)&&St(t[r])){const s=n.split(o.SPACE).pop(),i=Me(e,s+t[r]);if(""===i)return"";t[r]=i,t[r-1]=n.substring(0,n.length-s.length)}}return t.join("")}return r}case"boxShadow":case"textShadow":return ct(e,st(e,"borderColor",r),{supportPercent:false,errorString:/-?[\d.]+[a-z]*\s+-?[\d.]+[a-z]*(\s+-[\d.]+[a-z]*)/});case"backgroundSize":case"maskPosition":case"maskSize":return ct(e,r,{dimension:["width","height"],boundingBox:n,min:"maskPosition"!==t?0:void 0,parent:false,separator:","});case"animation":case"animationDelay":case"animationDuration":case"transition":case"transitionDelay":case"transitionDuration":return ct(e,r,{unitType:8,min:0,precision:0,separator:","});case"columns":return De(e,r,32,1,n);case"borderImageSlice":case"flex":case"font":return De(e,r,64,0,n);case"backgroundPosition":{const t=[];for(const s of r.split(a.SEPARATOR)){const r=Oe(e,s,n);if(""===r)return"";t.push(r)}return t.join(", ")}case"border":case"borderBottom":case"borderLeft":case"borderRight":case"borderTop":case"outline":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1],s=n.split(o.SPACE).pop();let i;if("calc"===s)i=Ze(ut(e,s+t[r],{min:0,supportPercent:false}));else{if(!qe(s))continue;i=Me(e,s+t[r])}if(""===i)return"";t[r]=i,t[r-1]=n.substring(0,n.length-s.length)}return t.join("")}return r}case"animationTimingFunction":case"transitionTimingFunction":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){let n=t[r];if(St(n)){const s=t[r-1].trim();let i;if(n=Qe(n),s.endsWith("cubic-bezier")){const t=n.split(a.SEPARATOR),r=t.length;if(4===r){i="";const n={unitType:64,supportPercent:false};for(let s=0;s<r;++s){let r=t[s];if(wt(r)){s%2==0?(n.min=0,n.max=1):(n.min=void 0,n.max=void 0);const t=ut(e,r,n);if(isNaN(t))return"";r=t.toString()}i+=(""!==i?", ":"")+r}}}else s.endsWith("steps")&&(i=ct(e,n,{unitType:32,min:1}));if(!i)return"";t[r]=`(${i})`}}return t.join("")}return r}case"clip":return Ge(et(e).position)?ct(e,r,{supportPercent:false}):"";case"clipPath":case"offsetPath":case"shapeOutside":{const t=k(r=r.trim());if(2===t.length){const s=t[0].trim();switch(s){case"url":case"path":return St(t[1])?"":r;case"linear-gradient":case"repeating-linear-gradient":case"radial-gradient":case"repeating-radial-gradient":case"conic-gradient":return st(e,"backgroundImage",r,n)}let i=t[1].trim();switch(i=Qe(i),s){case"circle":case"ellipse":{const t=[];let[r,a]=i.split(/\s+at\s+/);if(St(r)){const i={boundingBox:n,min:0,parent:true};if("circle"===s){if(r.includes("%")){const{width:t,height:r}=n||ht(e);if(!(t>0&&r>0))return"";i.boundingSize=Math.min(t,r)}}else i.dimension=["width","height"];if(r=ct(e,r,i),""===r)return"";t.push(r)}else r&&t.push(r);if(St(a)){if(a=ct(e,a,{dimension:["width","height"],boundingBox:n,parent:true}),""===a)return"";t.push(a)}else a&&t.push(a);i=t.join(" at ");break}case"inset":i=ct(e,i,{dimension:["height","width","height","width","width"],boundingBox:n,checkUnit:true});break;case"polygon":{const t=[];for(let r of i.split(a.SEPARATOR))if(St(r)){if(r=ct(e,r,{dimension:["width","height"],boundingBox:n,parent:true}),""===r)return"";t.push(r)}else t.push(r);i=t.join(", ");break}}if(""!==i)return`${s}(${i})`}return r}case"grid":{let[t,s]=r.trim().split(Ce);if(St(t)){const r=st(e,"gridTemplateRows",t,n);if(""===r)return"";t=r}if(St(s)){const t=st(e,"gridTemplateColumns",s,n);if(""===t)return"";s=t}return t+(s?" / "+s:"")}case"offset":{let[t,s]=r.trim().split(Ce);if(St(t)){const r=k(t.trim()),s=r.length;if(!(s>=2))return"";if(t=r[0]+r[1],St(t)&&(t=st(e,"offsetPath",t,n),""===t))return"";if(s>2){let s=r.slice(2).join("");if(St(t)&&(s=st(e,Le.test(s)?"offsetDistance":"offsetRotate",s,n),""===s))return"";t+=" "+s}}if(St(s)){const t=st(e,"offsetAnchor",s,n);if(""===t)return"";s=t}return t+(s?" / "+s:"")}case"borderImage":{const t=/([a-z-]+\(.+?\))\s*([^/]+)(?:\s*\/\s*)?(.+)?/.exec(r.trim());if(t){let r=t[2].trim();if(St(r)&&(r=st(e,"borderImageSlice",r,n)),""!==r){let s,i;if(t[3]){if([s,i]=t[3].trim().split(Ce),St(s)){const t=st(e,"borderImageWidth",s,n);if(""===t)return"";s=t}if(St(i)){const t=st(e,"borderImageOutset",i,n);if(""===t)return"";i=t}}return t[1]+" "+r+(s?" / "+s:"")+(i?" / "+i:"")}}return""}case"background":case"gridTemplate":return et(e)[t];default:if(t.endsWith("Color"))return Me(e,r.trim());{const s=nt(t,et(e).writingMode);if(""!==s)return st(e,s,r,n)}}return""}function it(e){const t={},r=e.length;let n=0;while(n<r){const r=e[n++],s=xe.exec(r.cssText);s&&(r.keyText||s[1]).trim().split(a.SEPARATOR).forEach(e=>{switch(e){case"from":e="0%";break;case"to":e="100%"}const r={};s[2].split(a.DELIMITER).forEach(e=>{const t=e.indexOf(":");if(-1!==t){const n=e.substring(t+1).trim();if(""!==n){const s=e.substring(0,t).trim();r[s]=n}}}),t[e]=r})}return t}function at(e,t){switch(e){case"only all":case"only screen":return true;default:{let r;Ae.lastIndex=0;while(null!==(r=Ae.exec(e))){const e="not"===r[1];let n,s=false;Se.lastIndex=0;while(null!==(n=Se.exec(r[2]))){const e=n[1];let r=n[2];const i=n[3];switch(e.startsWith("min")?r=">=":e.startsWith("max")&&(r="<="),e){case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":if(i){const[e,t]=W(i.split("/"),e=>parseInt(e));s=Be(r,window.innerWidth/window.innerHeight,e/t)}else s=false;break;case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":s=Be(r,e.endsWith("width")?window.innerWidth:window.innerHeight,pt(i,t));break;case"orientation":s="portrait"===i&&window.innerWidth<=window.innerHeight||"landscape"===i&&window.innerWidth>window.innerHeight;break;case"resolution":case"min-resolution":case"max-resolution":if(i){let e=parseFloat(i);i.endsWith("dpcm")?e*=2.54:i.endsWith("dppx")&&(e*=96),s=Be(r,Y(),e)}else s=false;break;case"grid":s="0"===i;break;case"color":s=void 0===i||parseInt(i)>0;break;case"min-color":s=parseInt(i)<=screen.colorDepth/3;break;case"max-color":s=parseInt(i)>=screen.colorDepth/3;break;case"color-index":case"min-color-index":case"monochrome":case"min-monochrome":s="0"===i;break;case"max-color-index":case"max-monochrome":s=parseInt(i)>=0;break;default:s=false}if(!s)break}if(!e&&s||e&&!s)return true}}}return false}function ot(e,t,r,...n){let s="",i=e.parentElement;while(i&&!n.includes(i.tagName)){if(s=et(i)[t],"inherit"===s||(null==r?void 0:r.test(s)))s="";else if(s)break;i=i.parentElement}return s}function lt(e,t){const r=et(e);let n;while(null!==(n=i.VAR.exec(t))){let e=r.getPropertyValue(n[1]).trim();const s=n[2];if(s&&(""===e||vt(s,true)&&!vt(e,true)||A(s)&&!A(e)||pe(s)&&!pe(e))&&(e=s),!e)return"";t=t.replace(n[0],e).trim()}return t}function ct(e,t,r){t=t.trim();const n=Object.assign({},r);let s,i,a,o,l,c,u;switch(r&&(Array.isArray(r.orderedSize)&&(s=r.orderedSize),Array.isArray(r.dimension)&&(i=r.dimension),({separator:a,unitType:o,checkUnit:l,errorString:c}=r)),o){case 32:case 64:u="";break;case 4:u="%";break;case 8:u="ms";break;case 16:u="deg";break;default:u="px",o=2}const h=[];for(let r of a?t.split(a):[t])if(r=r.trim(),""!==r){const t=k(r,"calc"),a=t.length;if(!a)return"";{let r="",c=0,g=0;while(c<a){let a=t[c++];if(wt(a)){void 0!==(null==s?void 0:s[g])?n.boundingSize=s[g++]:i?(n.dimension=i[g++],n.boundingSize=void 0):s&&(n.boundingSize=void 0);const t=ut(e,a,n);if(isNaN(t))return"";r+=t+u}else r+=a,i&&(a=a.trim(),""===a||l&&(2!==o||!vt(a,true)&&"auto"!==a)||++g)}h.push(r)}}if(t=1===h.length?h[0]:h.join(" "===a?" ":a?a+" ":""),c){let e;while(null!==(e=c.exec(t))){if(void 0===e[1])return"";const r=e[0];let n=r;let s=e.length-1;while(s>=1)n=n.replace(new RegExp(e[s--]+"$"),"");if(n===r)return"";t=t.replace(r,n)}}return t}function ut(e,t,r={}){const n=lt(e,t);if(n){const{precision:s,unitType:i}=r;if(t.includes("%")){if(false===r.supportPercent||32===i)return NaN;if(void 0===r.boundingSize){const{dimension:t,boundingBox:n}=r;if(t)if(n)r.boundingSize=n[t];else{let n,s=0;if(false===r.parent)n=e;else if(n=e.parentElement,n instanceof HTMLElement){let r;if(Ge(et(e).position))do{if(r=et(n),n===document.body)break;switch(r.position){case"static":case"initial":case"unset":n=n.parentElement;continue}break}while(n);else r=et(n);r&&(s="width"===t?$e(r):We(r))}else e instanceof SVGElement?true!==r.parent&&(n=e):n=null;n&&(r.boundingSize=Math.max(0,n.getBoundingClientRect()[t]-s))}}}else if(r.supportPercent)return NaN;i&&2!==i||!/\d(em|ch)/.test(t)||void 0!==r.fontSize||(r.fontSize=tt(e));let a=ft(n,r);return void 0!==s?a=0===s?Math.floor(a):parseFloat(te(a,s)):r.roundValue&&(a=Math.round(a)),a}return NaN}function ht(e){const t=e.parentElement;let r=0,n=0;if(t){const e=et(t);({width:r,height:n}=t.getBoundingClientRect()),r=Math.max(0,r-$e(e)),n=Math.max(0,n-We(e))}return{width:r,height:n}}function gt(e){const t=i.URL.exec(e);return t?t[1]||t[2]:""}function dt(e,t="deg"){let r=v(e);switch(t){case"rad":r*=180/Math.PI;break;case"grad":r/=400;case"turn":r*=360}return r}function ft(e,t={}){if(""===(e=e.trim()))return NaN;const{boundingSize:r,min:n,max:s,unitType:i,fontSize:a}=t;let o=e.length;"("===e.charAt(0)&&")"===e.charAt(o-1)||(e=`(${e})`,o+=2);let l=0;const c=[],u=[];for(let t=0;t<o;++t)switch(e.charAt(t)){case"(":l++,c[t]=true;break;case")":u.push(t)}if(l===u.length){const t=[];let o=0;while(true)for(let l=0;l<u.length;++l){let h=u[l]-1,g=false;for(;h>=0;h--){if(c[h]){g=true,c[h]=false;break}if(u.includes(h))break}if(g){let c,g;const d=()=>{if(c)switch(g){case"+":case"-":if(A(c))return false;break;case"*":case"/":if(!A(c))return false}return true},f=()=>{if(c)switch(g){case"+":case"-":return false}return true};let p=false;const b=[],m=[],E=e.substring(h+1,u[l]).split(Fe),v=E.length;let w=0;while(w<v){const e=E[w++].trim();switch(e){case"+":case"-":case"*":case"/":m.push(e),g=e;break;default:{const n=/\s*{(\d+)}\s*/.exec(e);if(n){switch(i){case 32:case 64:break;default:if(!d())return NaN}const e=t[parseInt(n[1])];b.push(e),c=e.toString(),p=true}else{switch(i){case 4:if(A(e)){if(!f())return NaN;b.push(parseFloat(e))}else{if(!At(e))return NaN;if(!d())return NaN;b.push(parseFloat(e)),p=true}break;case 8:if(A(e)){if(!f())return NaN;b.push(parseFloat(e))}else{if(!xt(e))return NaN;if(!d())return NaN;b.push(mt(e)),p=true}break;case 16:if(A(e)){if(!f())return NaN;b.push(parseFloat(e))}else{if(!kt(e))return NaN;if(!d())return NaN;b.push(bt(e)),p=true}break;case 32:if(!Te.test(e))return NaN;b.push(parseInt(e)),p=true;break;case 64:if(A(e))b.push(parseFloat(e)),p=true;else{if(!At(e)||void 0===r||isNaN(r))return NaN;b.push(parseFloat(e)/100*r)}break;default:if(A(e)){if(!f())return NaN;b.push(parseFloat(e))}else if(vt(e)){if(!d())return NaN;b.push(pt(e,a)),p=true}else{if(!At(e)||void 0===r||isNaN(r))return NaN;if(!d())return NaN;b.push(parseFloat(e)/100*r),p=true}}c=e}break}}}if(!p||b.length!==m.length+1)return NaN;for(w=0;w<m.length;++w)if("/"===m[w]){if(0===Math.abs(b[w+1]))return NaN;b.splice(w,2,b[w]/b[w+1]),m.splice(w--,1)}for(w=0;w<m.length;++w)"*"===m[w]&&(b.splice(w,2,b[w]*b[w+1]),m.splice(w--,1));for(w=0;w<m.length;++w)b.splice(w,2,b[w]+b[w+1]*("-"===m[w]?-1:1)),m.splice(w--,1);if(1!==b.length)return NaN;if(1===u.length){const e=b[0];return void 0!==n&&e<n||void 0!==s&&e>s?NaN:re(e)}{t[o]=b[0];const r=`{${o++}}`,n=u[l]+1;e=e.substring(0,h)+r+" ".repeat(n-(h+r.length))+e.substring(n),u.splice(l--,1)}}}}return NaN}function pt(e,t,r){const n=s.LENGTH.exec(e);if(n){let e=parseFloat(n[1]);switch(n[2]){case"px":return e;case"em":case"ch":return e*(null!=t?t:tt(document.body)||16);case"rem":return e*(tt(document.body)||16);case"pc":e*=12;case"pt":return 4*e/3;case"mm":e/=10;case"cm":e/=2.54;case"in":return e*Y();case"vw":return e*Ve(r)/100;case"vh":return e*Ue(r)/100;case"vmin":return e*Math.min(Ve(r),Ue(r))/100;case"vmax":return e*Math.max(Ve(r),Ue(r))/100}}return 0}function bt(e){const t=i.ANGLE.exec(e);return t?dt(t[1],t[2]):0}function mt(e){const t=i.TIME.exec(e);if(t)switch(t[2]){case"ms":return parseInt(t[1]);case"s":return 1e3*parseFloat(t[1])}return 0}function Et(e,t=true){return"string"==typeof e&&(e=parseFloat(e),isNaN(e))?"0%":(e*=100,(t?Math.round(e):e)+"%")}function vt(e,t){return t?s.LENGTH_PERCENTAGE.test(e):s.LENGTH.test(e)}function wt(e){return i.CALC.test(e)}function yt(e){return i.CUSTOM_PROPERTY.test(e)}function kt(e){return i.ANGLE.test(e)}function xt(e){return i.TIME.test(e)}function At(e){return s.PERCENT.test(e)}function St(e){return Ie.test(e)}var Rt=Object.freeze({__proto__:null,BOX_POSITION:["top","right","bottom","left"],BOX_MARGIN:["marginTop","marginRight","marginBottom","marginLeft"],BOX_BORDER:[["borderTopStyle","borderTopWidth","borderTopColor"],["borderRightStyle","borderRightWidth","borderRightColor"],["borderBottomStyle","borderBottomWidth","borderBottomColor"],["borderLeftStyle","borderLeftWidth","borderLeftColor"],["outlineStyle","outlineWidth","outlineColor"]],BOX_PADDING:["paddingTop","paddingRight","paddingBottom","paddingLeft"],TEXT_STYLE:["fontFamily","fontSize","fontWeight","fontStyle","color","whiteSpace","textDecoration","textTransform","letterSpacing","wordSpacing"],getStyle:et,getFontSize:tt,hasComputedStyle:rt,parseSelectorText:function(e,t){if((e=t?e.trim():Je(e.trim())).includes(",")){let t,r=e,n=false;while(null!==(t=i.SELECTOR_ATTR.exec(r))){const e=t.index,s=t[0].length;r=(e>0?r.substring(0,e):"")+"_".repeat(s)+r.substring(e+s),n=true}if(n){const t=[];let n=0;while(true){const s=r.indexOf(",",n);if(-1===s){n>0&&t.push(Je(e.substring(n).trim()));break}{const r=e.substring(n,s).trim();t.push(0===n?r:Je(r)),n=s+1}}return t}return W(e.split(a.SEPARATOR),e=>Je(e))}return[e]},getSpecificity:function e(t){let r,n=0;i.SELECTOR_G.lastIndex=0;while(null!==(r=i.SELECTOR_G.exec(t))){let t,s=r[1];if(1===s.length)switch(s.charAt(0)){case"+":case"~":case">":case"*":continue}else{if(s.endsWith("|*"))continue;"*"===s.charAt(0)&&(s=s.substring(1))}while(null!==(t=i.SELECTOR_ATTR.exec(s)))t[1]&&(n+=1),(t[3]||t[4]||t[5])&&(n+=10),s=m(s,t.index,t[0].length);while(null!==(t=i.SELECTOR_PSEUDO_CLASS.exec(s))){if(t[0].startsWith(":not(")){const r=t[1];if(r){const t=i.SELECTOR_G.lastIndex;n+=e(r),i.SELECTOR_G.lastIndex=t}}else switch(r[2]){case":scope":case":root":break;default:n+=10}s=m(s,t.index,t[0].length)}while(null!==(t=i.SELECTOR_PSEUDO_ELEMENT.exec(s)))n+=1,s=m(s,t.index,t[0].length);while(null!==(t=i.SELECTOR_LABEL.exec(s))){const e=t[0];switch(e.charAt(0)){case"#":n+=100;break;case".":n+=10;break;default:n+=1}s=m(s,t.index,e.length)}}return n},checkWritingMode:nt,calculateStyle:st,checkStyleValue:function(e,t,r,n){if("inherit"===r)switch(t){case"fontSize":case"lineHeight":if(n)return n[t];default:return ot(e,t)}else St(r)?""===(r=st(e,t,r))&&n&&(r=n[t]):yt(r)&&""===(r=lt(e,r))&&n&&(r=n[t]);return r||""},getKeyframesRules:function(){const e={};e:{const t=document.styleSheets,r=t.length;let n=0;while(n<r){const r=t[n++].cssRules;if(r){const t=r.length;for(let n=0;n<t;++n)try{const t=r[n];if(t.type===CSSRule.KEYFRAMES_RULE){const r=it(t.cssRules);if(Object.keys(r).length){const n=t.name;e[n]?Object.assign(e[n],r):e[n]=r}}}catch(e){break e}}}}return e},parseKeyframes:it,checkMediaRule:at,isParentStyle:function(e,t,...r){if("#"!==e.nodeName.charAt(0)&&r.includes(et(e)[t]))return true;{const n=e.parentElement;if(n)return r.includes(et(n)[t])}return false},getInheritedStyle:ot,parseVar:lt,calculateVarAsString:ct,calculateVar:ut,getParentBoxDimension:ht,getBackgroundPosition:function(e,t,r={}){if(""!==(e=e.trim())){const{fontSize:n,imageDimension:s,imageSize:i,screenDimension:a}=r,{width:l,height:c}=t,u=e.split(o.SPACE);1===u.length&&u.push("center");const h=u.length;if(h<=4){const e=He(u),t=(t,r,u,h)=>{if(s&&!vt(t)){let t=e[h];if(i&&"auto"!==i&&"initial"!==i){const[e,u]=i.split(o.SPACE);if(r){let r=l;if(vt(e,true))if(At(e))r*=parseFloat(e)/100;else{const t=pt(e,n,a);t&&(r=t)}else if(u){let e=1;if(At(u))e=parseFloat(u)/100*c/s.height;else if(vt(u)){const t=pt(u,n,a);t&&(e=t/s.height)}r=e*s.width}t*=r}else{let r=c;if(vt(u,true))if(At(u))r*=parseFloat(u)/100;else{const e=pt(u,n,a);e&&(r=e)}else if(e){let t=1;if(At(e))t=parseFloat(e)/100*l/s.width;else if(vt(e)){const r=pt(e,n,a);r&&(t=r/s.width)}r=t*s.height}t*=r}}else t*=r?s.width:s.height;e[u]-=t}};if(2===h){u.sort((e,t)=>{switch(e){case"left":case"right":return-1;case"top":case"bottom":return 1}switch(t){case"left":case"right":return 1;case"top":case"bottom":return-1}return 0});for(let r=0;r<2;++r){let s=u[r];const i=0===r,[o,h]=i?["left",l]:["top",c],g=o+"AsPercent";switch(s){case"0%":i&&(s="left");case"left":case"top":break;case"100%":i&&(s="right");case"right":case"bottom":e[o]=h,e[g]=1;break;case"50%":case"center":s="center",e[o]=h/2,e[g]=.5;break;default:{const t=Ye(s,h,n,a);t>1?(u[r]="100%",s=i?"right":"bottom",e[s]=-1*Xe(Et(t-1),h,n,a)):e[o]=Xe(s,h,n,a),e[g]=t;break}}i?e.horizontal=s:e.vertical=s,t(s,i,o,g)}}else{let r=0,s=0;const i=(n,i)=>{switch(n){case"left":case"right":e.horizontal=n,r++;break;case"center":if(4===h)return false;{let s=true;if(void 0===i)r>0?(e.vertical=n,s=false):e.horizontal=n;else switch(i){case"left":case"right":e.vertical=n,s=false;break;case"top":case"bottom":e.horizontal=n;break;default:return false}s?(e.left=l/2,e.leftAsPercent=.5,t(n,true,"left","leftAsPercent")):(e.top=c/2,e.topAsPercent=.5,t(n,false,"top","topAsPercent"))}break;case"top":case"bottom":e.vertical=n,s++;break;default:return false}return r<2&&s<2};for(let r=0;r<h;++r){const s=u[r];if(vt(s,true)){const i=u[r-1];switch(i){case"left":case"right":{const r=Xe(s,l,n,a),o=Ye(s,l,n,a);if("right"===i)e.right=r,e.rightAsPercent=o,t(s,true,"right","rightAsPercent"),e.left=l-r,e.leftAsPercent=1-o;else{if(o>1){const r=1-o;e.horizontal="right",e.right=Xe(Et(r),l,n,a),e.rightAsPercent=r,t(s,true,"right","rightAsPercent")}e.left=r,e.leftAsPercent=o}t(s,true,"left","leftAsPercent");break}case"top":case"bottom":{const r=Xe(s,c,n,a),o=Ye(s,c,n,a);if("bottom"===i)e.bottom=r,e.bottomAsPercent=o,t(s,false,"bottom","bottomAsPercent"),e.top=c-r,e.topAsPercent=1-o;else{if(o>1){const r=1-o;e.horizontal="bottom",e.bottom=Xe(Et(r),c,n,a),e.bottomAsPercent=r,t(s,false,"bottom","bottomAsPercent")}e.top=r,e.topAsPercent=o}t(s,false,"top","topAsPercent");break}default:return He()}}else if(!i(s,u[r+1]))return He()}}return e.static=0===e.top&&0===e.right&&0===e.bottom&&0===e.left,e}}return He()},getSrcSet:function(e,t){const r=e.parentElement,n=[];let{srcset:s,sizes:l}=e;"PICTURE"===(null==r?void 0:r.tagName)&&j(r.children,e=>{if("SOURCE"===e.tagName){const{media:r,type:n,srcset:i}=e;if(S(i)&&!(S(r)&&!at(r))&&(!S(n)||!t||t.includes(n.trim().toLowerCase())))return s=i,l=e.sizes,true}}),""!==s&&s.trim().split(a.SEPARATOR).forEach(e=>{const t=Re.exec(e);if(t){let e=0,r=0;switch(t[3]){case"w":e=v(t[2]);break;case"x":r=v(t[2]);break;default:r=1}n.push({src:N(t[1].split(o.SPACE)[0]),pixelRatio:r,width:e})}});const c=n.length;if(0===c)n.push({src:e.src,pixelRatio:1,width:0});else if(c>1&&(n.sort((e,t)=>{const r=e.pixelRatio,n=t.pixelRatio;if(r>0&&n>0){if(r!==n)return r<n?-1:1}else{const r=e.width,n=t.width;if(r!==n&&r>0&&n>0)return r<n?-1:1}return 0}),S(l))){let t=NaN;for(const r of l.trim().split(a.SEPARATOR)){let n=_e.exec(r);if(n){const r=n[2]?at(n[2]):void 0,s=n[6]?at(n[6]):void 0;switch(n[5]){case"and":if(!r||!s)continue;break;case"or":if(!r&&!s)continue;break;case"not":if(void 0!==r||s)continue;break;default:if(false===r||void 0!==s)continue}const a=n[9];if(a&&(n=i.CALC.exec(a),n?t=ft(n[1],n[1].includes("%")?{boundingSize:ht(e).width}:void 0):At(a)?t=parseFloat(a)/100*ht(e).width:vt(a)&&(t=pt(a))),!isNaN(t))break}}if(!isNaN(t)){const e=t*window.devicePixelRatio;let r=-1;for(let t=0;t<c;++t){const s=n[t].width;s>0&&s<=e&&(-1===r||n[r].width<s)&&(r=t)}if(0===r){const e=n[0];e.pixelRatio=1,e.actualWidth=t}else if(r>0){const e=n.splice(r,1)[0];e.pixelRatio=1,e.actualWidth=t,n.unshift(e)}let s=1;while(s<c){const e=n[s++];0===e.pixelRatio&&(e.pixelRatio=e.width/t)}}}return n},convertListStyle:function(e,t,r){switch(e){case"decimal":return t.toString();case"decimal-leading-zero":return(t<9?"0":"")+t.toString();case"upper-alpha":case"upper-latin":if(t>=1)return w(t-1);break;case"lower-alpha":case"lower-latin":if(t>=1)return w(t-1).toLowerCase();break;case"upper-roman":return y(t);case"lower-roman":return y(t).toLowerCase()}return r?t.toString():""},extractURL:gt,resolveURL:function(e){return""!==(e=gt(e))?N(e):""},insertStyleSheetRule:function(e,t=0){const r=document.createElement("style");X(4)&&r.appendChild(document.createTextNode("")),document.head.appendChild(r);const n=r.sheet;if("function"==typeof(null==n?void 0:n.insertRule))try{n.insertRule(e,t)}catch(e){return null}return r},convertAngle:dt,convertPX:function(e,t){return e?pt(e,t)+"px":"0px"},calculate:ft,parseUnit:pt,parseAngle:bt,parseTime:mt,formatPX:function(e){return Math.round(e)+"px"},formatPercent:Et,isLength:vt,isCalc:wt,isCustomProperty:yt,isAngle:kt,isTime:xt,isPercent:At,hasCalc:St});function Ft(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}}function Tt(e,t=true){const r={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height};if(t){const{scrollX:e,scrollY:t}=window;0!==t&&(r.top+=t,r.bottom+=t),0!==e&&(r.left+=e,r.right+=e)}return r}function Ct(e){const t=[],r=document.createRange();r.selectNodeContents(e);const n=r.getClientRects();let s,i=n.length,a=0;while(a<i){const e=n.item(a++);Math.round(e.width)>0&&!B(e.left,e.right,.5)&&t.push(e)}if(i=t.length,i){s=Tt(t[0]);let e=1,r=false;a=0;while(++a<i){const{left:n,right:i,top:o,bottom:l,width:c}=t[a];n<s.left?s.left=n:n>s.right&&(r=true),i>s.right&&(s.right=i),o<s.top?s.top=o:o>=t[a-1].bottom&&e++,l>s.bottom&&(s.bottom=l),s.width+=c}s.height=s.bottom-s.top,e>1&&(s.numberOfLines=e,s.overflow=r)}else s={top:0,left:0,right:0,bottom:0,width:0,height:0};return s}var Nt=Object.freeze({__proto__:null,ELEMENT_BLOCK:["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DD","DETAILS","DIALOG","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","TABLE","UL"],newBoxRect:function(){return{top:0,left:0,right:0,bottom:0}},newBoxRectDimension:Ft,newBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},withinViewport:function(e){return!(e.top+window.scrollY+e.height<0||e.left+window.scrollX+e.width<0)},assignRect:Tt,getRangeClientRect:Ct,removeElementsByClassName:function(e){Array.from(document.getElementsByClassName(e)).forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.removeChild(e)})},getElementsBetweenSiblings:function(e,t){const r=[];if(!e||e.parentElement===t.parentElement){const n=t.parentElement;if(n){let s=e?-1:0,i=-1;j(n.childNodes,(r,n)=>{if(r===t){if(i=n,-1!==s)return true}else if(r===e&&(s=n,-1!==i))return true}),-1!==s&&-1!==i&&j(n.childNodes,e=>{const t=e.nodeName;"#"===t[0]&&"#text"!==t||r.push(e)},Math.min(s,i),Math.max(s,i)+1)}}return r},createElement:function(e,t,r){const n=document.createElement(t),s=n.style;for(const e in r)e.includes("-")?s.setProperty(e,r[e]):s[e]=r[e];return e.appendChild(n),n},measureTextWidth:function(e,t,r){if(t&&r){const n=document.createElement("canvas").getContext("2d");if(n)return n.font=`${r}px ${t}`,n.measureText(e).width}return 0},getNamedItem:function(e,t){var r;return(null===(r=e.attributes.getNamedItem(t))||void 0===r?void 0:r.value.trim())||""},isTextNode:function(e){return"#text"===e.nodeName}});function Pt(e,t,r,n){e[`__${t}::${r}`]=n}function It(e,t,r){return r||(r=e["__sessionId::0"]||"0"),e[`__${t}::${r}`]}var Lt=Object.freeze({__proto__:null,actualClientRect:function(e,t){if(t){const r=It(e,"clientRect",t);if(r)return r}const r=e.getBoundingClientRect();return t&&Pt(e,"clientRect",t,r),r},actualTextRangeRect:function(e,t){if(t){const r=It(e,"textRangeRect",t);if(r)return r}let r;e.childElementCount&&j(e.children,e=>{const t=et(e);if("visible"!==t.getPropertyValue("visibility")){const n=t.getPropertyValue("position");if("absolute"===n||"fixed"===n){const n=t.getPropertyValue("display");"none"!==n&&(e.style.display="none",r||(r=[]),r.push([e,n]))}}});const n=Ct(e);return null==r||r.forEach(e=>e[0].style.display=e[1]),t&&Pt(e,"textRangeRect",t,n),n},getStyleValue:function(e,t,r){var n;return(null===(n=It(e,"styleMap",r))||void 0===n?void 0:n[E(t)])||""},getPseudoElt:function(e,t){return It(e,"pseudoElement",t)||""},getElementAsNode:function(e,t){return It(e,"node",t)||null},setElementCache:Pt,getElementCache:It,deleteElementCache:function(e,t,r){delete e[`__${t}::${r}`]}});const _t=/^(\t+)(.*)$/,Bt={ITEM:/\s*(<(\/)?([?\w]+)[^>]*>)\n?([^<]*)/g,OPENTAG:/\s*>$/,CLOSETAG:/\/>\n*$/,NBSP:/&nbsp;/g,AMP:/&/g},Ot="&#160;".repeat(8);function Mt(e,t,r="\t",n){return t>0?(void 0===n&&(n=r.repeat(t)),z(e.split("\n"),e=>""!==e?n+e:"")):e}var Dt=Object.freeze({__proto__:null,STRING_XMLENCODING:'<?xml version="1.0" encoding="utf-8"?>\n',STRING_SPACE:"&#160;",STRING_TABSPACE:Ot,isPlainText:function(e){const t=e.length;let r=0;while(r<t)switch(e.charCodeAt(r++)){case 9:case 10:case 13:case 32:continue;default:return true}return false},pushIndent:Mt,pushIndentArray:function(e,t,r="\t",n=""){if(t>0){const n=r.repeat(t),s=e.length;let i=0;while(i<s)e[i]=Mt(e[i++],t,r,n)}return e.join(n)},replaceIndent:function(e,t,r){if(t>=0){let n=-1;return z(e.split("\n"),e=>{const s=r.exec(e);return s?(-1===n&&(n=s[2].length),(s[1]||"")+"\t".repeat(t+(s[2].length-n))+s[3]):e})}return e},replaceTab:function(e,t=4,r=false){return t>0?r?z(e.split("\n"),e=>{const r=_t.exec(e);return r?" ".repeat(t*r[1].length)+r[2]:e}):e.replace(/\t/g," ".repeat(t)):e},applyTemplate:function e(t,r,n,s){const i=r[t],a=true===i[">>"];let o="",l="";void 0===s?(o+='<?xml version="1.0" encoding="utf-8"?>\n',s=0):l+="\t".repeat(s);let c=n.length,u=-1;while(++u<c){const r=n[u],c=i["#"]&&r[i["#"]],h=!a&&!c,g=i["@"],d=i[">"];let f=false;if(o+=l+"<"+t,null==g||g.forEach(e=>{const t=r[e];t&&(o+=` ${(i["^"]?i["^"]+":":"")+e}="${t}"`)}),d){let n="";const i=s+(a?u:0)+1;for(const t in d){const s=r[t];Array.isArray(s)?n+=e(t,d,s,i):F(s)&&(n+=e(t,d,[s],i))}""!==n?(o+=">\n"+n,h&&(o+=l+`</${t}>\n`)):o+=h?" />\n":">\n",f=true}else i["~"]?(o+=">"+r.innerText,h&&(o+=`</${t}>\n`),f=true):h&&(o+=" />\n");c&&(f||(o+=">\n"),o+=c,a||(o+=l+`</${t}>\n`)),a&&(l+="\t")}if(a)while(--c>=0)l=l.substring(1),o+=l+`</${t}>\n`;return o},formatTemplate:function(e,t=true,r=-1,n="\t"){const s=[];let i;while(null!==(i=Bt.ITEM.exec(e)))s.push({tag:i[1],closing:!!i[2],tagName:i[3],value:i[4].trim()});let a="",o=r;const l=s.length;let c=-1;while(++c<l){const e=s[c];let i=o;if(c>0){if(e.closing)--o;else if(++i,!Bt.CLOSETAG.exec(e.tag))if(t&&""===e.value.trim()){const t=s[c+1];(null==t?void 0:t.closing)&&t.tagName===e.tagName?(e.tag=e.tag.replace(Bt.OPENTAG," />"),++c):++o}else++o;let r=true;e.tag.trim().split("\n").forEach(e=>{const t=i+(r?0:1);a+=(t>0?n.repeat(t):"")+e.trim()+"\n",r=false})}else a+=(r>0?n.repeat(r):"")+e.tag+"\n";a+=e.value}return a},replaceCharacterData:function(e,t=false){const r=[];let n=(e=e.replace(Bt.NBSP,"&#160;").replace(c.NONENTITY,"&amp;")).length,s=-1;while(++s<n){switch(e.charAt(s)){case"'":r.push({i:s,text:"\\'"});break;case'"':r.push({i:s,text:"&quot;"});break;case"<":r.push({i:s,text:"&lt;"});break;case">":r.push({i:s,text:"&gt;"});break;case"\t":t&&r.push({i:s,text:Ot});break;case"":r.push({i:s,text:" "});break;case" ":r.push({i:s,text:"&#160;"})}}if(n=r.length,n){const t=e.split("");let i,a=0;while(a<n)({i:s,text:i}=r[a++]),t[s]=i;return t.join("")}return e}}),zt=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const jt=new Set,$t=new Map,Wt={},Gt=new Set,Ht={};let Vt,Ut;function Xt(e,t){Vt&&!e.includes(t)&&(t.application=Vt,e.push(t))}const Yt=e=>false===(null==e?void 0:e.initializing)&&e.length>0;function qt(...e){if(Vt){const t=Vt.extensionManager;for(const e of jt)t.include(e);for(const[e,t]of $t.entries())Zt(e,t);if(jt.clear(),$t.clear(),!Vt.closed)return Vt.parseDocument(...e);if(!Wt.showErrorMessages||confirm("ERROR: Document is closed. Reset and rerun?"))return Vt.reset(),Vt.parseDocument(...e)}else Wt.showErrorMessages&&alert("ERROR: Framework not installed.");return new class{then(e){return this}catch(e){return e(new Error("Framework not installed.")),this}}}function Zt(e,t){if(F(t))if("string"==typeof e){if(Vt){e=e.trim();const r=Vt.extensionManager.retrieve(e)||O(jt,t=>t.name===e);return r?(Object.assign(r.options,t),true):($t.set(e,t),true)}}else if(e instanceof squared.base.Extension)return Object.assign(e.options,t),true;return false}function Kt(e){let t=null;if(Vt&&(t=Vt.extensionManager.retrieve(e),null===t))for(const t of Gt)if(t.name===e)return t;return t}function Qt(){null==Vt||Vt.reset()}const Jt={base:{Container:V},client:q,color:ye,css:Rt,dom:Nt,math:ue,regex:u,session:Lt,util:H,xml:Dt};e.appendFromArchive=function(e,t){var r;Yt(Vt)&&S(e)&&F(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length)&&Vt.appendFromArchive(e,t)},e.appendToArchive=function(e,t){Yt(Vt)&&S(e)&&(Vt.finalize(),Vt.appendToArchive(e,t))},e.close=function(){Yt(Vt)&&Vt.finalize()},e.configure=Zt,e.copyToDisk=function(e,t){Yt(Vt)&&S(e)&&(Vt.finalize(),Vt.copyToDisk(e,t))},e.createFrom=function(e,t){var r;Yt(Vt)&&S(e)&&F(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length)&&Vt.createFrom(e,t)},e.exclude=function(e){if(Vt){const t=Vt.extensionManager;if("string"==typeof e&&(e=t.retrieve(e.trim())),e instanceof squared.base.Extension)return jt.delete(e),Gt.delete(e),t.exclude(e)}return false},e.include=function(e,t){return!!(Vt&&("string"==typeof e&&(e=e.trim(),e=Vt.builtInExtensions[e]||Kt(e)),e instanceof squared.base.Extension))&&(Gt.add(e),Vt.extensionManager.include(e)||jt.add(e),t&&Zt(e,t),true)},e.lib=Jt,e.parseDocument=qt,e.parseDocumentAsync=function(...e){return zt(this,void 0,void 0,(function*(){return yield qt(...e)}))},e.ready=function(){return false===(null==Vt?void 0:Vt.initializing)&&!Vt.closed},e.reset=Qt,e.retrieve=Kt,e.saveToArchive=function(e,t){Yt(Vt)&&(Vt.finalize(),Vt.saveToArchive(e,t))},e.setFramework=function(e,t=false){const r=void 0!==Ut;if(Ut!==e){const n=t?e.cached():e.create();r||Object.assign(n.userSettings,Wt),Object.assign(Wt,n.userSettings),Vt=n.application,Vt.userSettings=Wt;const{builtInExtensions:s,extensions:i}=Vt;i.length=0,Wt.builtInExtensions.forEach(e=>{const t=s[e];if(t)Xt(i,t);else{e+=".";for(const t in s)t.startsWith(e)&&Xt(i,s[t])}}),Ut=e,r&&Object.keys(Ht).forEach(e=>delete Ht[e]),Object.assign(Ht,e.system)}r&&Qt()},e.setViewModel=function(e){Vt&&(Vt.viewModel=e)},e.settings=Wt,e.system=Ht,e.toString=function(){return(null==Vt?void 0:Vt.toString())||""},Object.defineProperty(e,"__esModule",{value:true})}));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.base={}))}(this,(function(e){"use strict";class t extends squared.lib.base.Container{constructor(e){super(e),this._currentId=0}append(e,t=false,i=false){var n;return super.append(e),t&&(null===(n=this.afterAppend)||void 0===n||n.call(this,e,i)),this}reset(){return this._currentId=0,this.clear(),this}get nextId(){return++this._currentId}}const i=squared.lib,{STRING:n,XML:s}=i.regex,{extractURL:a}=i.css,{fromLastIndexOf:r,fromMimeType:o,hasMimeType:l,randomUUID:c}=i.util;class h{reset(){const e=h.ASSETS;for(const t in e)e[t].clear()}addImage(e){var t;if(null==e?void 0:e.complete){const i=e.src;if(i.startsWith("data:image/")){const a=new RegExp(`^${n.DATAURI}$`).exec(i);if(a){const n=a[1].split(s.DELIMITER);this.addRawData(i,n[0].trim(),(null===(t=n[1])||void 0===t?void 0:t.trim())||"base64",a[2],e.naturalWidth,e.naturalHeight)}}""!==i&&h.ASSETS.image.set(i,{width:e.naturalWidth,height:e.naturalHeight,uri:i})}}addVideo(e,t){h.ASSETS.video.set(e,{uri:e,mimeType:t})}addAudio(e,t){h.ASSETS.audio.set(e,{uri:e,mimeType:t})}addFont(e){const t=h.ASSETS.fonts,i=e.fontFamily.trim().toLowerCase();e.fontFamily=i;const n=t.get(i);n?n.push(e):t.set(i,[e])}addRawData(e,t,i,n,s=0,a=0){let l;t=t.toLowerCase(),"base64"===(i=i.toLowerCase())?(l=n,"image/svg+xml"===t&&(n=window.atob(n))):n=n.replace(/\\(["'])/g,(e,...t)=>t[0]);const c=this.mimeTypeMap.image;if("*"===c||c.includes(t)){const i=location.origin,c=o(t),d=e.endsWith("."+c)?r(e,"/"):this.randomUUID+"."+c;return h.ASSETS.rawData.set(e,{pathname:e.startsWith(i)?e.substring(i.length+1,e.lastIndexOf("/")):"",filename:d,content:n,base64:l,mimeType:t,width:s,height:a}),d}return""}getImage(e){return h.ASSETS.image.get(e)}getVideo(e){return h.ASSETS.video.get(e)}getAudio(e){return h.ASSETS.audio.get(e)}getFont(e,t="normal",i){const n=h.ASSETS.fonts.get(e.trim().toLowerCase());if(n){const e=this.mimeTypeMap.font;return n.find(n=>n.fontStyle===t&&(!i||n.fontWeight===parseInt(i))&&(l(e,n.srcFormat)||n.srcUrl&&l(e,n.srcUrl)))}}getRawData(e){if(!e.startsWith("url(")||""!==(e=a(e)))return h.ASSETS.rawData.get(e)}setFileHandler(e){e.resource=this,this.fileHandler=e}get mimeTypeMap(){return this.controllerSettings.mimeType}get randomUUID(){return c()}}h.KEY_NAME="squared.resource",h.ASSETS={ids:new Map,fonts:new Map,image:new Map,video:new Map,audio:new Map,rawData:new Map},h.canCompressImage=e=>/\.(png|jpg|jpeg)$/i.test(e);var d=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))};const u=squared.lib,{getSpecificity:f,getStyle:g,hasComputedStyle:p,insertStyleSheetRule:m,parseSelectorText:b,checkMediaRule:x}=u.css,{isTextNode:y}=u.dom,{convertCamelCase:v,isString:E,objectMap:S,resolvePath:I}=u.util,{CHAR:w,FILE:_,STRING:T,XML:k}=u.regex,{getElementCache:N,setElementCache:A}=u.session,{image:C,rawData:R}=h.ASSETS,P=/all|screen/,M=/^background/,B=/\s*([a-z-]+):[^!;]+!important;/g,L=/\s*@font-face\s*{([^}]+)}\s*/,F=/\s*font-family:[^\w]*([^'";]+)/,W=/\s*src:\s*([^;]+);/,O=/\s*font-style:\s*(\w+)\s*;/,V=/\s*font-weight:\s*(\d+)\s*;/,D=/\s*(url|local)\((?:["']([^'")]+)["']|([^)]+))\)(?:\s*format\(["']?([\w-]+)["']?\))?\s*/,H=new RegExp(`url\\(["']?(${T.DATAURI})["']?\\),?\\s*`,"g");function X(e,t=0,i=0){if(""!==e){const n=C.get(e);(t>0&&i>0||!n||0===n.width||0===n.height)&&C.set(e,{width:t,height:i,uri:e})}}function Y(e){""!==e&&e.split(k.SEPARATOR).forEach(e=>{""!==e&&X(I(e.split(w.SPACE)[0]))})}const U=e=>_.SVG.test(e),z=(e,t)=>{var i;return(null===(i=new RegExp(`\\s*@${e}([^{]+)`).exec(t))||void 0===i?void 0:i[1].trim())||t};class G{constructor(e,i,n,s,a){this.framework=e,this.initializing=false,this.closed=false,this.rootElements=new Set,this.session={active:[]},this.processing={cache:new t,excluded:new t,sessionId:""},this._cascadeAll=false;const r=this.processing.cache;this._cache=r,this._controllerHandler=new n(this,r),this._resourceHandler=new s(this,r),this._extensionManager=new a(this,r),this._afterInsertNode=this._controllerHandler.afterInsertNode,this.Node=i}copyToDisk(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.copyToDisk(e,t)}appendToArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.appendToArchive(e,t)}saveToArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.saveToArchive(e||this.userSettings.outputArchiveName,t)}createFrom(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.createFrom(e,t)}appendFromArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.appendFromArchive(e,t)}reset(){var e;const t=this.processing;t.cache.reset(),t.excluded.clear(),t.sessionId="",this.session.active.length=0,this.controllerHandler.reset(),this.resourceHandler.reset(),null===(e=this.fileHandler)||void 0===e||e.reset(),this.extensions.forEach(e=>e.subscribers.clear()),this.closed=false}parseDocument(...e){const{controllerHandler:t,resourceHandler:i}=this;this.initializing=false,this.rootElements.clear();const n=t.generateSessionId;this.processing.sessionId=n,this.session.active.push(n),t.sessionId=n,t.init(),this.setStyleMap();const s=[],a=this.userSettings.preloadImages,r=[],o=m("html > body { overflow: hidden !important; }"),l=()=>{this.initializing=false,s.forEach(e=>{e.parentElement&&f.removeChild(e)}),s.length=0};let c,h;const u=()=>{l(),this.extensions.forEach(e=>e.beforeParseDocument());for(const e of this.rootElements){const t=this.createCache(e);t&&this.afterCreateCache(t)}this.extensions.forEach(e=>e.afterParseDocument());try{document.head.removeChild(o)}catch(e){}"function"==typeof c&&c.call(this)};0===e.length&&e.push(document.body),e.forEach(e=>{let t;if("string"==typeof e)t=document.getElementById(e);else{if(!p(e))return;t=e}t&&this.rootElements.add(t)});const f=this.rootElements.values().next().value;if(a){for(const e of this.rootElements)e.querySelectorAll("picture > source").forEach(e=>Y(e.srcset)),e.querySelectorAll("video").forEach(e=>X(e.poster)),e.querySelectorAll("input[type=image]").forEach(e=>X(e.src,e.width,e.height));for(const e of C.values()){const t=e.uri;if(U(t))r.push(t);else if(0===e.width||0===e.height){const i=document.createElement("img");i.src=t,i.naturalWidth>0&&i.naturalHeight>0?(e.width=i.naturalWidth,e.height=i.naturalHeight):(f.appendChild(i),s.push(i))}}}for(const[e,t]of R.entries()){const i=t.mimeType;if((null==i?void 0:i.startsWith("image/"))&&!i.endsWith("svg+xml")){const n=document.createElement("img");n.src=`data:${i};${t.base64?"base64,"+t.base64:t.content}`;const{naturalWidth:a,naturalHeight:r}=n;a>0&&r>0?(t.width=a,t.height=r,C.set(e,{width:a,height:r,uri:t.filename})):(document.body.appendChild(n),s.push(n))}}for(const e of this.rootElements)e.querySelectorAll("img").forEach(e=>{U(e.src)?a&&r.push(e.src):(a&&Y(e.srcset),e.complete?i.addImage(e):a&&r.push(e))});r.length?(this.initializing=true,Promise.all(S(r,e=>new Promise((t,i)=>{"string"==typeof e?t(function(e){return d(this,void 0,void 0,(function*(){return(yield fetch(e,{method:"GET",headers:new Headers({Accept:"application/xhtml+xml, image/svg+xml","Content-Type":"image/svg+xml"})})).text()}))}(e)):(e.addEventListener("load",()=>t(e)),e.addEventListener("error",()=>i(e)))}))).then(e=>{const t=e.length;for(let n=0;n<t;++n){const t=e[n];if("string"==typeof t){const e=r[n];"string"==typeof e&&i.addRawData(e,"image/svg+xml","utf8",t)}else i.addImage(t)}u()}).catch(e=>{let t=e;e instanceof Event&&(t=e.target);const i=t instanceof HTMLImageElement?t.src:"";h?(e instanceof Error||(e=new Error(i?"FAIL: "+i:"Unable to preload images.")),l(),h(e,u)):this.userSettings.showErrorMessages&&E(i)&&!confirm("FAIL: "+i)?l():u()})):u();return new class{then(e){return r.length?c=e:e(),this}catch(e){return h=e,this}}}parseDocumentAsync(...e){return d(this,void 0,void 0,(function*(){return yield this.parseDocument(...e)}))}createCache(e){const t=this.createRootNode(e);return t&&this.controllerHandler.sortInitialCache(),t}toString(){return""}createRootNode(e){const t=this.processing,i=t.cache;i.clear(),t.excluded.clear(),this._cascadeAll=false;const n=this.extensionsCascade,s=this.cascadeParentNode(e,0,n.length?n:void 0);if(s){const i=new this.Node(0,t.sessionId,e.parentElement||document.body,this._afterInsertNode);s.parent=i,s.actualParent=i,s.childIndex=0,s.documentRoot=true}return t.node=s,i.afterAppend=void 0,s}cascadeParentNode(e,t,i){const n=this.insertNode(e);if(n){const{controllerHandler:s,processing:a}=this,r=a.cache;if(n.depth=t,0===t&&r.append(n),s.preventNodeCascade(e))return n;const{childElementCount:o,childNodes:l}=e,c=l.length,h=new Array(c),d=new Array(o);let u=true,f=0,g=0,p=0;while(f<c){const e=l[f++];let o;"#"===e.nodeName.charAt(0)?y(e)&&(o=this.insertNode(e,n)):s.includeElement(e)?(o=this.cascadeParentNode(e,t+1,i),o&&(d[p++]=o,r.append(o),u=false)):(o=this.insertNode(e),o&&(a.excluded.append(o),u=false)),o&&(o.parent=n,o.actualParent=n,o.childIndex=g,h[g++]=o)}h.length=g,d.length=p,n.naturalChildren=h,n.naturalElements=d,n.inlineText=u,p>0&&this.userSettings.createQuerySelectorMap&&(n.queryMap=this.createQueryMap(d,p))}return n}createQueryMap(e,t){var i;const n=[e];let s=0;while(s<t){const t=e[s++].queryMap;if(t){const e=t.length;for(let s=0;s<e;++s){const e=s+1;n[e]=(null===(i=n[e])||void 0===i?void 0:i.concat(t[s]))||t[s]}}}return n}setStyleMap(){let e=false;const t=i=>{try{const e=i.cssRules;if(e){const i=e.length;let n=0;while(n<i){const i=e[n++];switch(i.type){case CSSRule.STYLE_RULE:case CSSRule.FONT_FACE_RULE:this.applyStyleRule(i);break;case CSSRule.IMPORT_RULE:t(i.styleSheet);break;case CSSRule.MEDIA_RULE:x(i.conditionText||z("media",i.cssText))&&this.applyCSSRuleList(i.cssRules);break;case CSSRule.SUPPORTS_RULE:CSS.supports&&CSS.supports(i.conditionText||z("supports",i.cssText))&&this.applyCSSRuleList(i.cssRules)}}}}catch(t){this.userSettings.showErrorMessages&&!e&&(alert("CSS cannot be parsed inside <link> tags when loading files directly from your hard drive or from external websites. Either use a local web server, embed your CSS into a <style> tag, or you can also try using a different browser. See the README for more detailed instructions.\n\n"+i.href+"\n\n"+t),e=true)}},i=document.styleSheets,n=i.length;let s=0;while(s<n){const e=i[s++];let n;try{n=e.media.mediaText}catch(e){}E(n)&&!P.test(n)||t(e)}}applyStyleRule(e){var t,i,n,s,a,r;const o=this.resourceHandler,l=this.processing.sessionId,c=(null===(t=e.parentStyleSheet)||void 0===t?void 0:t.href)||void 0,h=e.cssText;switch(e.type){case CSSRule.SUPPORTS_RULE:this.applyCSSRuleList(e.cssRules);break;case CSSRule.STYLE_RULE:{const t=e.style,i={},n={},s=e=>{var t;const i=n[e];if(i&&"initial"!==i){let s,a=i;H.lastIndex=0;while(null!==(s=H.exec(i)))if(s[2]){const e=s[2].split(k.DELIMITER);o.addRawData(s[1],e[0].trim(),(null===(t=e[1])||void 0===t?void 0:t.trim())||"utf8",s[3])}else if(this.userSettings.preloadImages){const e=I(s[3],c);""!==e&&(o.getImage(e)||X(e),a=a.replace(s[0],`url("${e}")`))}n[e]=a}};let a;Array.from(t).forEach(e=>n[v(e)]=t[e]),s("backgroundImage"),s("listStyleImage"),s("content"),B.lastIndex=0;while(null!==(a=B.exec(h))){const e=v(a[1]);switch(e){case"margin":i.marginTop=true,i.marginRight=true,i.marginBottom=true,i.marginLeft=true;break;case"padding":i.paddingTop=true,i.paddingRight=true,i.paddingBottom=true,i.paddingLeft=true;break;case"background":i.backgroundColor=true,i.backgroundImage=true,i.backgroundSize=true,i.backgroundRepeat=true,i.backgroundPositionX=true,i.backgroundPositionY=true;break;case"backgroundPosition":i.backgroundPositionX=true,i.backgroundPositionY=true;break;case"border":i.borderTopStyle=true,i.borderRightStyle=true,i.borderBottomStyle=true,i.borderLeftStyle=true,i.borderTopWidth=true,i.borderRightWidth=true,i.borderBottomWidth=true,i.borderLeftWidth=true,i.borderTopColor=true,i.borderRightColor=true,i.borderBottomColor=true,i.borderLeftColor=true;break;case"borderStyle":i.borderTopStyle=true,i.borderRightStyle=true,i.borderBottomStyle=true,i.borderLeftStyle=true;break;case"borderWidth":i.borderTopWidth=true,i.borderRightWidth=true,i.borderBottomWidth=true,i.borderLeftWidth=true;break;case"borderColor":i.borderTopColor=true,i.borderRightColor=true,i.borderBottomColor=true,i.borderLeftColor=true;break;case"font":i.fontFamily=true,i.fontStyle=true,i.fontSize=true,i.fontWeight=true,i.lineHeight=true}i[e]=true}b(e.selectorText,true).forEach(e=>{const s=f(e),[a,r]=e.split("::"),o=r?"::"+r:"";document.querySelectorAll(a||"*").forEach(e=>{const a="styleMap"+o,r="styleSpecificity"+o,c=N(e,a,l);if(c){const a=N(e,r,l)||{};for(const e in n){const r=a[e],o=s+(i[e]?1e3:0);if(void 0===r||o>=r){const i=n[e];"initial"===i&&M.test(e)?"none"===t.background&&delete c[e]:c[e]=i,a[e]=o}}}else{const t=Object.assign({},n),c={};for(const e in t)c[e]=s+(i[e]?1e3:0);A(e,"style"+o,"0",g(e,o)),A(e,"sessionId","0",l),A(e,a,l,t),A(e,r,l,c)}})});break}case CSSRule.FONT_FACE_RULE:{const e=null===(i=L.exec(h))||void 0===i?void 0:i[1];if(e){const t=((null===(n=F.exec(e))||void 0===n?void 0:n[1])||"").trim(),i=((null===(s=W.exec(e))||void 0===s?void 0:s[1])||"").split(k.SEPARATOR);if(""!==t&&i.length){const n=(null===(a=O.exec(e))||void 0===a?void 0:a[1].toLowerCase())||"normal",s=parseInt((null===(r=V.exec(e))||void 0===r?void 0:r[1])||"400");i.forEach(e=>{var i;const a=D.exec(e);if(a){let e,r;const l=(a[2]||a[3]).trim();"url"===a[1]?e=I(l,c):r=l,o.addFont({fontFamily:t,fontWeight:s,fontStyle:n,srcUrl:e,srcLocal:r,srcFormat:(null===(i=a[4])||void 0===i?void 0:i.toLowerCase().trim())||"truetype"})}})}}break}}}applyCSSRuleList(e){const t=e.length;let i=0;while(i<t)this.applyStyleRule(e[i++])}get controllerHandler(){return this._controllerHandler}get resourceHandler(){return this._resourceHandler}get extensionManager(){return this._extensionManager}get fileHandler(){return this._resourceHandler.fileHandler}get extensionsCascade(){return[]}get nextId(){return this._cache.nextId}get length(){return 0}}G.KEY_NAME="squared.application";class j{preventNodeCascade(e){return false}get generateSessionId(){return(new Date).getTime().toString()}}class q{constructor(e,t,i){this.name=e,this.framework=t,this.options={},this.dependencies=[],this.subscribers=new Set,i&&Object.assign(this.options,i)}require(e,t=false){this.dependencies.push({name:e,preload:t})}beforeParseDocument(){}afterParseDocument(){}set application(e){this._application=e,this._controller=e.controllerHandler}get application(){return this._application}get controller(){return this._controller}}const{hasBit:$,isObject:K}=squared.lib.util;const{fromLastIndexOf:Q,isString:J}=squared.lib.util,Z=()=>location.protocol.startsWith("http");class ee{constructor(){this.assets=[]}static downloadFile(e,t,i){const n=new Blob([e],{type:i||"application/octet-stream"}),s=window.URL.createObjectURL(n),a=document.createElement("a");a.style.setProperty("display","none"),a.setAttribute("href",s),a.setAttribute("download",t),a.download||a.setAttribute("target","_blank");const r=document.body;r.appendChild(a),a.click(),r.removeChild(a),setTimeout(()=>window.URL.revokeObjectURL(s),1)}createFrom(e,t){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{format:e}))}appendFromArchive(e,t){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{appendTo:e,format:e.substring(e.lastIndexOf(".")+1)}))}addAsset(e){if(e.content||e.uri||e.base64){const{pathname:t,filename:i}=e,n=this.assets.find(e=>e.pathname===t&&e.filename===i);n?Object.assign(n,e):this.assets.push(e)}}reset(){this.assets.length=0}copying(e){if(Z()){const{assets:t,directory:i}=e;if(J(i)){const n=t?t.concat(this.assets):this.assets;n.length&&(n[0].exclusions=e.exclusions,fetch("/api/assets/copy?to="+encodeURIComponent(i.trim())+"&empty="+(this.userSettings.outputEmptyCopyDirectory?"1":"0"),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(n)}).then(e=>e.json()).then(t=>{if(t&&("function"==typeof e.callback&&e.callback(t),this.userSettings.showErrorMessages)){const{application:e,system:i}=t;i&&alert(e+"\n\n"+i)}}).catch(e=>{this.userSettings.showErrorMessages&&alert("ERROR: "+e)}))}}else this.userSettings.showErrorMessages&&alert("SERVER (required): See README for instructions")}archiving(e){if(Z()){const{assets:t,filename:i}=e;if(J(i)){const n=t?t.concat(this.assets):this.assets;n.length&&(n[0].exclusions=e.exclusions,fetch("/api/assets/archive?filename="+encodeURIComponent(i.trim())+"&format="+(e.format||this.userSettings.outputArchiveFormat).trim().toLowerCase()+"&append_to="+encodeURIComponent((e.appendTo||"").trim()),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(n)}).then(e=>e.json()).then(t=>{if(t){"function"==typeof e.callback&&e.callback(t);const i=t.zipname;if(J(i))fetch("/api/browser/download?filepath="+encodeURIComponent(i)).then(e=>e.blob()).then(e=>ee.downloadFile(e,Q(i,"/","\\")));else if(this.userSettings.showErrorMessages){const{application:e,system:i}=t;i&&alert(e+"\n\n"+i)}}}).catch(e=>{this.userSettings.showErrorMessages&&alert("ERROR: "+e)}))}}else this.userSettings.showErrorMessages&&alert("SERVER (required): See README for instructions")}}const te=squared.lib,{USER_AGENT:ie,isUserAgent:ne}=te.client,{BOX_BORDER:se,CSS_UNIT:ae,TEXT_STYLE:re,checkStyleValue:oe,checkWritingMode:le,formatPX:ce,getInheritedStyle:he,getStyle:de,hasComputedStyle:ue,isLength:fe,isPercent:ge,parseSelectorText:pe,parseUnit:me}=te.css,{ELEMENT_BLOCK:be,assignRect:xe,getNamedItem:ye,getRangeClientRect:ve,newBoxRectDimension:Ee}=te.dom,{CHAR:Se,CSS:Ie,FILE:we,XML:_e}=te.regex,{actualClientRect:Te,actualTextRangeRect:ke,deleteElementCache:Ne,getElementAsNode:Ae,getElementCache:Ce,getPseudoElt:Re,setElementCache:Pe}=te.session,{aboveRange:Me,belowRange:Be,convertCamelCase:Le,convertFloat:Fe,convertInt:We,hasBit:Oe,hasValue:Ve,isNumber:De,isObject:He,isString:Xe,iterateArray:Ye,spliceString:Ue,splitEnclosing:ze}=te.util,{PX:Ge,SELECTOR_ATTR:je,SELECTOR_G:qe,SELECTOR_LABEL:$e,SELECTOR_PSEUDO_CLASS:Ke}=Ie,Qe=/\s*(url|[a-z-]+gradient)/,Je=/^:lang\(\s*(.+)\s*\)$/,Ze=/^:nth(-last)?-(child|of-type)\((.+)\)$/,et=/^(-)?(\d+)?n\s*([+-]\d+)?$/,tt=/\dem$/;function it(e,t,i,n){const s=(n||e).css(t);return De(s)?parseFloat(s):"inherit"!==s||n?i:it(e,t,i,e.actualParent)}function nt(e,t,i,n,s){var a,r;if(t.all)return true;let o=t.tagName;if(o&&o!==e.tagName.toUpperCase())return false;const l=t.id;if(l&&l!==e.elementId)return false;const{attrList:c,classList:h,notList:d,pseudoList:u}=t;if(u){const t=e.actualParent;o=e.tagName;for(const i of u)switch(i){case":first-child":case":nth-child(1)":if(e!==t.firstChild)return false;break;case":last-child":case":nth-last-child(1)":if(e!==t.lastChild)return false;break;case":only-child":if(t.naturalElements.length>1)return false;break;case":only-of-type":{let e=0;for(const i of t.naturalElements)if(i.tagName===o&&++e>1)return false;break}case":first-of-type":for(const i of t.naturalElements)if(i.tagName===o){if(i!==e)return false;break}break;case":nth-child(n)":case":nth-last-child(n)":break;case":empty":if(e.element.childNodes.length)return false;break;case":checked":switch(o){case"INPUT":if(!e.toElementBoolean("checked"))return false;break;case"OPTION":if(!e.toElementBoolean("selected"))return false;break;default:return false}break;case":enabled":if(!e.inputElement||e.toElementBoolean("disabled"))return false;break;case":disabled":if(!e.inputElement||!e.toElementBoolean("disabled"))return false;break;case":read-only":{const t=e.element;if(t.isContentEditable||("INPUT"===o||"TEXTAREA"===o)&&!t.readOnly)return false;break}case":read-write":{const t=e.element;if(!t.isContentEditable||("INPUT"===o||"TEXTAREA"===o)&&t.readOnly)return false;break}case":required":if(!e.inputElement||"BUTTON"===o||!e.toElementBoolean("required"))return false;break;case":optional":if(!e.inputElement||"BUTTON"===o||e.toElementBoolean("required"))return false;break;case":placeholder-shown":if(!(("INPUT"===o||"TEXTAREA"===o)&&""!==e.toElementString("placeholder")))return false;break;case":default":switch(o){case"INPUT":{const t=e.element;switch(t.type){case"radio":case"checkbox":if(!t.checked)return false;break;default:return false}break}case"OPTION":if(void 0===e.element.attributes.selected)return false;break;case"BUTTON":{const t=e.ascend({condition:e=>"FORM"===e.tagName})[0];if(t){let i=false;const n=e.element;if(Ye(t.element.querySelectorAll("*"),e=>{switch(e.tagName){case"BUTTON":return i=n===e,true;case"INPUT":switch(e.type){case"submit":case"image":return i=n===e,true}}}),!i)return false}break}default:return false}break;case":in-range":case":out-of-range":if("INPUT"!==o)return false;{const t=e.element,n=parseFloat(t.value);if(isNaN(n)){if(":in-range"===i)return false}else{const e=parseFloat(t.min),s=parseFloat(t.max);if(n>=e&&n<=s){if(":out-of-range"===i)return false}else if(":in-range"===i)return false}}break;case":indeterminate":if("INPUT"===o){const t=e.element;switch(t.type){case"checkbox":if(!t.indeterminate)return false;break;case"radio":if(t.checked)return false;if(t.name&&Ye(((null===(a=e.ascend({condition:e=>"FORM"===e.tagName})[0])||void 0===a?void 0:a.element)||document).querySelectorAll(`input[type=radio][name="${t.name}"`),e=>e.checked)===Number.POSITIVE_INFINITY)return false;break;default:return false}}else{if("PROGRESS"!==o)return false;if(-1!==e.toElementInt("value",-1))return false}break;case":target":if(""===location.hash)return false;{const t=e.element;if(!(location.hash==="#"+t.id||"A"===o&&location.hash==="#"+t.name))return false}break;case":scope":if(!n||">"===s&&e!==this)return false;break;case":root":if(!n||s)return false;break;case":link":case":visited":case":any-link":case":hover":case":focus":case":focus-within":case":valid":case":invalid":{const n=e.element;if(Ye(t.element.querySelectorAll(":scope > "+i),e=>e===n)!==Number.POSITIVE_INFINITY)return false;break}default:{let n=Ze.exec(i);if(n){const i=n[3].trim();let s=t.naturalElements;n[1]&&(s=s.slice(0).reverse());const a=("child"===n[2]?s.indexOf(e):s.filter(e=>e.tagName===o).indexOf(e))+1;if(a>0){if(De(i)){if(parseInt(i)!==a)return false}else switch(i){case"even":if(a%2!=0)return false;break;case"odd":if(a%2==0)return false;break;default:{const e=et.exec(i);if(e){const t=We(e[3]);if(e[2]){if(e[1])return false;const i=parseInt(e[2]);if(0!==i){if(a!==t)for(let e=i;;e+=i){const e=i+t;if(e===a)break;if(e>a)return false}}else if(a!==t)return false}else if(e[3]){if(!(t>0))return false;if(e[1]){if(a>t)return false}else if(a<t)return false}}break}}continue}}else if(n=Je.exec(i),n&&(null===(r=e.attributes.lang)||void 0===r?void 0:r.trim().toLowerCase())===n[1].toLowerCase())continue;return false}}}if(d)for(const t of d){const s={};switch(t.charAt(0)){case".":s.classList=[t];break;case"#":s.id=t.substring(1);break;case":":s.pseudoList=[t];break;case"[":{je.lastIndex=0;const e=je.exec(t);if(!e)continue;{const t="i"===e[6];let i=e[3]||e[4]||e[5]||"";t&&(i=i.toLowerCase()),s.attrList=[{key:e[1],symbol:e[2],value:i,caseInsensitive:t}]}break}default:if(!Se.WORDDASH.test(t))return false;s.tagName=t}if(nt.call(this,e,s,i,n))return false}if(h){const t=e.element.classList;for(const e of h)if(!t.contains(e))return false}if(c){const t=e.attributes;for(const e of c){let i=t[e.key];if(void 0===i)return false;{const t=e.value;if(t)if(e.caseInsensitive&&(i=i.toLowerCase()),e.symbol)switch(e.symbol){case"~":if(!i.split(Se.SPACE).includes(t))return false;break;case"^":if(!i.startsWith(t))return false;break;case"$":if(!i.endsWith(t))return false;break;case"*":if(!i.includes(t))return false;break;case"|":if(i!==t&&!i.startsWith(t+"-"))return false}else if(i!==t)return false}}}return true}function st(e,t,i){const n=e.cssAscend("textAlign",e.textElement&&e.blockStatic&&!e.hasPX("width"));return(n===t||n===i)&&(e.blockStatic?e.textElement&&!e.hasPX("width",true,true)&&!e.hasPX("maxWidth",true,true):e.display.startsWith("inline"))}function at(e,t,i,n,s){return s===n||(e.style.setProperty(t,n),!!pt(n,e.style.getPropertyValue(t))&&(Pe(e,t,i,"auto"!==n?s:""),true))}function rt(e,t,i){const n=Ce(e,t,i);void 0!==n&&(e.style.setProperty(t,n),Ne(e,t,i))}function ot(e,t){const i=e.actualParent;return true===(null==i?void 0:i.flexElement)&&true===i.flexdata[t]}function lt(e,t,i,n,s){const a=t[i],r=e.parseUnit(a,i);let o=Math.max(r,e.parseUnit(t[n],i));if(0===o&&e.styleElement){const t=e.element;switch(t.tagName){case"IMG":case"INPUT":if("image"!==t.type)break;case"TD":case"TH":case"SVG":case"IFRAME":case"VIDEO":case"AUDIO":case"CANVAS":case"OBJECT":case"EMBED":{const n=ye(t,i);""!==n&&(o=De(n)?parseFloat(n):e.parseUnit(n,i),o>0&&e.css(i,ge(n)?n:n+"px"));break}}}let l=0;if(r>0&&!e.imageElement){const n=t[s];a===n?delete t[s]:(l=e.parseUnit(n,i),l>0&&l<=r&&fe(a)&&(l=0,t[i]=n,delete t[s]))}return l>0?Math.min(o,l):o}function ct(e){let t=0;if(e.htmlElement&&!e.inputElement&&!e.imageElement&&"HR"!==e.tagName&&!e.documentBody){const i=e.element,{overflowX:n,overflowY:s}=e.cssAsObject("overflowX","overflowY");e.hasHeight&&(e.hasPX("height")||e.hasPX("maxHeight"))&&("scroll"===s||"auto"===s&&i.clientHeight!==i.scrollHeight)&&(t|=16),(e.hasPX("width")||e.hasPX("maxWidth"))&&("scroll"===n||"auto"===n&&i.clientWidth!==i.scrollWidth)&&(t|=8)}return t}function ht(e){if(!this.positionStatic){const t=ft.bind(this,e,true)();if(fe(t))return this.parseUnit(t,"left"===e||"right"===e?"width":"height");if(ge(t)&&this.styleElement)return Fe(this.style[e])}return 0}function dt(e,t,i){if(!e.plainText){switch(e.css(i[0])){case"none":case"initial":case"hidden":return 0}const n=e.css(i[1]),s=fe(n,true)?e.parseUnit(n,t):Fe(e.style[i[1]]);if(s>0)return Math.max(Math.round(s),1)}return 0}function ut(e,t,i){var n,s;switch(e.display){case"table":if(!i&&"collapse"===e.css("borderCollapse"))return 0;break;case"table-row":return 0;case"table-cell":if(i){switch(e.tagName){case"TD":case"TH":return 0;default:{const i=e.ascend({condition:e=>"TABLE"===e.tagName})[0];if(i){const[s,a]=i.css("borderSpacing").split(" ");switch(t){case"marginTop":case"marginBottom":return a?e.parseUnit(a,"height",false):e.parseUnit(s,"width",false);case"marginRight":if((null===(n=e.actualParent)||void 0===n?void 0:n.lastChild)!==e)return e.parseUnit(s,"width",false);case"marginLeft":return 0}}break}}return 0}}return e.parseUnit(e.css(t),"width",true!==(null===(s=e.actualParent)||void 0===s?void 0:s.gridElement))}function ft(e,t,i){return!this._preferInitial&&this._styleMap[e]||this.cssInitial(e,t,i)}const gt=e=>e.naturalChild&&(e.inlineVertical||0===e.length)&&!e.floating&&true!==e.autoMargin.horizontal,pt=(e,t)=>e===t||fe(e,true)&&Ge.test(t),mt=(e,t)=>e.id<t.id?-1:1;class bt extends squared.lib.base.Container{constructor(e,t="0",i){super(),this.id=e,this.sessionId=t,this.documentRoot=false,this.depth=-1,this.childIndex=Number.POSITIVE_INFINITY,this._element=null,this._data={},this._documentBody=false,this._inlineText=false,i?(this._element=i,this._documentBody=i===document.body):(this.style={},this._styleMap={},this._cssStyle={})}init(){const e=this._element;if(e){const t=this.styleElement,i=this.sessionId,n=Ce(e,"styleMap",i)||{};let s;if(this.pseudoElement)s=de(e.parentElement,Re(e,i));else if(s=de(e),t){const t=Array.from(e.style),i=t.length;if(i){const s=e.style;let a=0;while(a<i){const e=t[a++];n[Le(e)]=s.getPropertyValue(e)}}}if(t){const t={},i=s.writingMode;for(let a in n){const r=n[a],o=le(a,i);if(""!==o){if(n[o])continue;a=o}const l=oe(e,a,r,s);""!==l&&(t[a]=l)}this._styleMap=t}else this._styleMap=n;this.style=s,this._cssStyle=n,"0"!==i&&Pe(e,"node",i,this)}}saveAsInitial(e=false){(void 0===this._initial||e)&&(this._initial={children:this.duplicate(),styleMap:Object.assign({},this._styleMap)})}data(e,t,i,n=true){const s=this._data;if(Ve(i)){let a=s[e];He(a)||(a={},s[e]=a),(n||void 0===a[t])&&(a[t]=i)}else if(null===i)return void delete s[e];const a=s[e];return He(a)?a[t]:void 0}unsetCache(...e){const t=(e=true)=>{this._preferInitial||(this.resetBounds(),e&&this.cascade(e=>(e.resetBounds(),false)))};if(e.length){const i=this._cached;e.forEach(e=>{switch(e){case"position":this._preferInitial&&this.cascade(e=>(e.pageFlow||e.unsetCache("absoluteParent"),e.resetBounds(),false)),this._cached={},t();break;case"display":case"float":case"tagName":return this._cached={},void t();case"width":i.actualWidth=void 0,i.percentWidth=void 0;case"minWidth":i.width=void 0;case"maxWidth":i.overflow=void 0,t();break;case"height":i.actualHeight=void 0,i.percentHeight=void 0;case"minHeight":i.height=void 0,this._preferInitial&&(i.blockVertical=void 0,i.overflow=void 0,this.each(e=>e.unsetCache("height","blockVertical","overflow","bottomAligned")));case"maxHeight":i.overflow=void 0,t();break;case"verticalAlign":i.baseline=void 0,t();break;case"left":case"right":t();case"textAlign":i.rightAligned=void 0,i.centerAligned=void 0;break;case"top":case"bottom":i.bottomAligned=void 0,t();break;case"overflowX":case"overflowY":i.overflow=void 0,t();break;default:e.startsWith("margin")?(i.autoMargin=void 0,i.rightAligned=void 0,i.centerAligned=void 0,t()):e.startsWith("padding")?(i.contentBoxWidth=void 0,i.contentBoxHeight=void 0,t()):e.startsWith("border")?(i.visibleStyle=void 0,i.contentBoxWidth=void 0,i.contentBoxHeight=void 0,t()):e.startsWith("background")?i.visibleStyle=void 0:re.includes(e)&&(i.lineHeight=void 0,this._textStyle=void 0,t())}i[e]=void 0})}else this._cached={},this._textStyle=void 0,t()}ascend(e={}){let t=e.attr;if(Xe(t)){if(!/Parent$/i.test(t))return[]}else t="actualParent";const{condition:i,including:n,error:s,every:a,excluding:r}=e,o=[];let l=e.startSelf?this:this[t];while(l&&l!==r){if(s&&s(l))break;if(i){if(i(l)&&(o.push(l),!a))break}else o.push(l);if(l===n)break;l=l[t]}return o}intersectX(e,t="linear"){if(e.width>0){const{left:i,right:n}=this[t],{left:s,right:a}=e;return Math.ceil(i)>=s&&Math.floor(i)<=a||n>=Math.floor(s)&&n<=Math.ceil(a)||Math.ceil(s)>=i&&Math.floor(s)<=n||a>=Math.floor(i)&&a<=Math.ceil(n)}return false}intersectY(e,t="linear"){if(e.height>0){const{top:i,bottom:n}=this[t],{top:s,bottom:a}=e;return Math.ceil(i)>=s&&Math.floor(i)<=a||n>=Math.floor(s)&&n<=Math.ceil(a)||Math.ceil(s)>=i&&Math.floor(s)<=n||a>=Math.floor(i)&&a<=Math.ceil(n)}return false}withinX(e,t="linear"){if(this.pageFlow||e.width>0){const i=this[t];return Me(i.left,e.left)&&Be(i.right,e.right)}return true}withinY(e,t="linear"){if(this.pageFlow||e.height>0){const i=this[t];return Math.ceil(i.top)>=e.top&&Math.floor(i.bottom)<=e.bottom}return true}outsideX(e,t="linear"){if(this.pageFlow||e.width>0){const i=this[t];return i.left<Math.floor(e.left)||i.right>Math.ceil(e.right)}return false}outsideY(e,t="linear"){if(this.pageFlow||e.height>0){const i=this[t];return i.top<Math.floor(e.top)||i.bottom>Math.ceil(e.bottom)}return false}css(e,t,i=true){return t&&this.styleElement&&(this.style[e]=t,pt(t,this.style[e]))?(this._styleMap[e]=t,i&&this.unsetCache(e),t):this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=true){for(const i in e){const n=e[i];this.css(i,n,t)===n&&t&&this.unsetCache(i)}return this}cssInitial(e,t=false,i=false){var n;let s=((null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[e]||t&&this._styleMap[e];return!s&&i&&(s=this.style[e]),s||""}cssAny(e,...t){const i=this.css(e);for(const e of t)if(i===e)return true;return false}cssInitialAny(e,...t){for(const i of t)if(this.cssInitial(e)===i)return true;return false}cssAscend(e,t=false){let i,n=t?this:this.actualParent;while(n){if(i=n.cssInitial(e),""!==i)return i;if(n.documentBody)break;n=n.actualParent}return""}cssSort(e,t=true,i=false){return(i?this.duplicate():this.children).sort((i,n)=>{const s=i.toFloat(e,i.childIndex),a=n.toFloat(e,n.childIndex);return s===a?0:t?s<a?-1:1:s>a?-1:1})}cssPX(e,t,i=false,n=false){const s=this._styleMap[e];if(s&&fe(s)){t+=me(s,this.fontSize),!i&&t<0&&(t=0);const a=ce(t);return this.css(e,a),n&&this.unsetCache(e),a}return""}cssSpecificity(e){var t,i;let n;if(this.styleElement)if(this.pseudoElement){const i=this._element,s=this.sessionId;n=null===(t=Ce(i.parentElement,"styleSpecificity"+Re(i,s),s))||void 0===t?void 0:t[e]}else n=null===(i=Ce(this._element,"styleSpecificity",this.sessionId))||void 0===i?void 0:i[e];return n||0}cssTry(e,t){if(this.styleElement){const i=this._element;return at(i,e,this.sessionId,t,de(i).getPropertyValue(e))}return false}cssFinally(e){if(this.styleElement)if("string"==typeof e)rt(this._element,e,this.sessionId);else{const t=this.sessionId,i=this._element;for(const n in e)rt(i,n,t)}}cssTryAll(e){if(this.styleElement){const t=this.sessionId,i=this._element,n=de(i),s=[];for(const a in e){if(!at(i,a,t,e[a],n.getPropertyValue(a)))return void s.forEach(e=>this.cssFinally(e));s.push(a)}return e}}cssParent(e,t,i=false){return this.naturalChild?this.actualParent.css(e,t,i):""}cssCopy(e,...t){const i=this._styleMap;t.forEach(t=>i[t]=e.css(t))}cssCopyIfEmpty(e,...t){const i=this._styleMap;t.forEach(t=>{Ve(i[t])||(i[t]=e.css(t))})}cssAsTuple(...e){const t=e.length,i=new Array(t);let n=0;while(n<t)i[n]=this.css(e[n++]);return i}cssAsObject(...e){const t={};return e.forEach(e=>t[e]=this.css(e)),t}toInt(e,t=NaN,i=false){var n;const s=parseInt((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[e]);return isNaN(s)?t:s}toFloat(e,t=NaN,i=false){var n;const s=parseFloat((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[e]);return isNaN(s)?t:s}toElementInt(e,t=NaN){var i;const n=parseInt(null===(i=this._element)||void 0===i?void 0:i[e]);return isNaN(n)?t:n}toElementFloat(e,t=NaN){var i;const n=parseFloat(null===(i=this._element)||void 0===i?void 0:i[e]);return isNaN(n)?t:n}toElementBoolean(e,t=false){var i;const n=null===(i=this._element)||void 0===i?void 0:i[e];return"boolean"==typeof n?n:t}toElementString(e,t=""){var i;return((null===(i=this._element)||void 0===i?void 0:i[e])||t).toString()}parseUnit(e,t="width",i=true,n){var s;if(e){if(ge(e)){const n=i&&(null===(s=this.absoluteParent)||void 0===s?void 0:s.box)||this.bounds;let a=parseFloat(e)/100;switch(t){case"width":a*=n.width;break;case"height":a*=n.height}return a}return me(e,this.fontSize,n)}return 0}has(e,t){var i;let n,s,a;t&&({map:n,not:s,type:a}=t);const r=("initial"===n&&(null===(i=this._initial)||void 0===i?void 0:i.styleMap)||this._styleMap)[e];if(r)switch(r){case"auto":case"none":case"initial":case"normal":case"rgba(0, 0, 0, 0)":return false;case"baseline":return"verticalAlign"!==e;case"left":case"start":return"textAlign"!==e;default:if(s)if(Array.isArray(s)){for(const e of s)if(r===e)return false}else if(r===s)return false;return!a||!!(Oe(a,2)&&fe(r)||Oe(a,4)&&ge(r))}return false}hasPX(e,t=true,i=false){var n;return fe((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[e],t)}hasFlex(e){return ot(this,e)}setBounds(e=true){let t;if(this.styleElement)e||Ne(this._element,"clientRect",this.sessionId),t=xe(Te(this._element,this.sessionId)),this._bounds=t;else if(this.plainText){const e=ve(this._element);t=xe(e);const i=e.numberOfLines;t.numberOfLines=i,this._bounds=t,this._textBounds=t,this._cached.multiline=i>1}return!e&&t&&(this._box=void 0,this._linear=void 0),t}resetBounds(){this._bounds=void 0,this._box=void 0,this._linear=void 0,this._textBounds=void 0,this._cached.multiline=void 0}querySelector(e){return this.querySelectorAll(e,1)[0]||null}querySelectorAll(e,t=-1){let i=[];const n=this.queryMap;if(n&&0!==t){const s=pe(e);let a=s.length,r=0;while(r<a){const e=s[r++],o=[];let l=-1;e:if("*"===e)o.push({all:true}),l++;else{let t,i;qe.lastIndex=0;while(null!==(i=qe.exec(e))){let e=i[1],n=false;if(1===e.length){const i=e.charAt(0);switch(i){case"+":case"~":l--;case">":if(t||0===o.length){o.length=0;break e}t=i;continue;case"*":n=true}}else if(e.endsWith("|*"))n="*|*"===e;else if("*"===e.charAt(0))e=e.substring(1);else if(e.startsWith("::")){o.length=0;break e}if(n)o.push({all:true});else{let i,n,s,a,r,l,c;while(null!==(c=je.exec(e))){void 0===a&&(a=[]);const t="i"===c[6];let i=c[3]||c[4]||c[5]||"";t&&(i=i.toLowerCase()),a.push({key:c[1],symbol:c[2],value:i,caseInsensitive:t}),e=Ue(e,c.index,c[0].length)}if(e.includes("::")){o.length=0;break e}while(null!==(c=Ke.exec(e))){const t=c[0];t.startsWith(":not(")?c[1]&&(void 0===l&&(l=[]),l.push(c[1])):(void 0===r&&(r=[]),r.push(t)),e=Ue(e,c.index,t.length)}while(null!==(c=$e.exec(e))){const t=c[0];switch(t.charAt(0)){case"#":n=t.substring(1);break;case".":void 0===s&&(s=[]),s.push(t.substring(1));break;default:i=t.toUpperCase()}e=Ue(e,c.index,t.length)}o.push({tagName:i,id:n,adjacent:t,classList:s,pseudoList:r,notList:l,attrList:a})}l++,t=void 0}}if(a=n.length,o.length&&-1!==l&&l<a){const e=o.pop(),c=0===o.length,h=i.length;let d;if(e.all&&a-l==1)d=n[l];else{d=[];let t=l;while(t<a){const s=n[t++];if(e.all)d=d.concat(s);else{const t=s.length;let n=0;while(n<t){const t=s[n++];0!==h&&i.includes(t)||!nt.call(this,t,e,r,c)||d.push(t)}}}}if(o.length){const n=this.depth;o.reverse(),a=o.length;const s=(e,t,i)=>{const l=o[e],c=e===a-1,h=[],d=i.length;let u=0;while(u<d){const s=i[u++];if(t){const e=s.actualParent;if(">"===t)nt.call(this,e,l,r,c,t)&&h.push(e);else{const i=e.naturalElements;switch(t){case"+":{const e=i.indexOf(s);if(e>0){const n=i[e-1];n&&nt.call(this,n,l,r,c,t)&&h.push(n)}break}case"~":{const e=i.length;let n=0;while(n<e){const e=i[n++];if(e===s)break;nt.call(this,e,l,r,c,t)&&h.push(e)}break}}}}else if(s.depth-n>=a-e){let e=s.actualParent;do{nt.call(this,e,l,r,c)&&h.push(e),e=e.actualParent}while(e)}}return!!h.length&&(++e===a||s(e,l.adjacent,h))};let l=h;const c=d.length;let u=0;while(u<c){const n=d[u++];if((0===h||!i.includes(n))&&s(0,e.adjacent,[n])&&(i.push(n),++l===t))return i.sort(mt)}}else if(0===h){if(r===s.length-1||t>0&&t<=d.length)return t>0&&d.length>t&&(d.length=t),d.sort(mt);i=d}else{const e=d.length;if(t>0){let n=h,s=0;while(s<e){const e=d[s++];if(!i.includes(e)&&(i.push(e),++n===t))return i.sort(mt)}}else{let t=0;while(t<e){const e=d[t++];i.includes(e)||i.push(e)}}}}}}return i.sort(mt)}set parent(e){if(e){const t=this._parent;e!==t&&(null==t||t.remove(this),this._parent=e),e.contains(this)||e.append(this),-1===this.depth&&(this.depth=e.depth+1)}}get parent(){return this._parent}get tagName(){let e=this._cached.tagName;if(void 0===e){const t=this._element;if(t){const i=t.nodeName;e="#"===i.charAt(0)?i:t.tagName}else e="";this._cached.tagName=e}return e}get element(){return this._element}get elementId(){var e;return(null===(e=this._element)||void 0===e?void 0:e.id)||""}get htmlElement(){let e=this._cached.htmlElement;return void 0===e&&(e=!this.plainText&&this._element instanceof HTMLElement,this._cached.htmlElement=e),e}get svgElement(){let e=this._cached.svgElement;return void 0===e&&(e=!this.htmlElement&&!this.plainText&&this._element instanceof SVGElement||this.imageElement&&we.SVG.test(this.src),this._cached.svgElement=e),e}get styleElement(){return this.htmlElement||this.svgElement}get naturalChild(){return true}get naturalElement(){let e=this._cached.naturalElement;return void 0===e&&(e=this.naturalChild&&this.styleElement&&!this.pseudoElement,this._cached.naturalElement=e),e}get pseudoElement(){return false}get imageElement(){return"IMG"===this.tagName}get flexElement(){let e=this._cached.flexElement;return void 0===e&&(e=this.display.endsWith("flex"),this._cached.flexElement=e),e}get gridElement(){let e=this._cached.gridElement;return void 0===e&&(e=this.display.endsWith("grid"),this._cached.gridElement=e),e}get textElement(){let e=this._cached.textElement;return void 0===e&&(e=this.plainText||this.inlineText&&!this.inputElement,this._cached.textElement=e),e}get tableElement(){let e=this._cached.tableElement;return void 0===e&&(e="TABLE"===this.tagName||"table"===this.display,this._cached.tableElement=e),e}get inputElement(){let e=this._cached.inputElement;if(void 0===e){switch(this.tagName){case"INPUT":case"BUTTON":case"SELECT":case"TEXTAREA":e=true;break;default:e=false}this._cached.inputElement=e}return e}get layoutElement(){let e=this._cached.layoutElement;return void 0===e&&(e=this.flexElement||this.gridElement,this._cached.layoutElement=e),e}get plainText(){return"#text"===this.tagName}get styleText(){return this.naturalElement&&this.inlineText}get lineBreak(){return"BR"===this.tagName}get documentBody(){return this._documentBody}get initial(){return this._initial}get bounds(){return this._bounds||this.setBounds(false)||xe(this.boundingClientRect)}get linear(){return this._linear||(()=>{const e=this.bounds;if(e){if(this.styleElement){const{marginBottom:t,marginRight:i}=this,n=Math.max(this.marginTop,0),s=Math.max(this.marginLeft,0);this._linear={top:e.top-n,right:e.right+i,bottom:e.bottom+t,left:e.left-s,width:e.width+s+i,height:e.height+n+t}}else this._linear=e;return this._linear}return Ee()})()}get box(){return this._box||(()=>{const e=this.bounds;return e?(this.styleElement?this._box={top:e.top+(this.paddingTop+this.borderTopWidth),right:e.right-(this.paddingRight+this.borderRightWidth),bottom:e.bottom-(this.paddingBottom+this.borderBottomWidth),left:e.left+(this.paddingLeft+this.borderLeftWidth),width:e.width-this.contentBoxWidth,height:e.height-this.contentBoxHeight}:this._box=e,this._box):Ee()})()}get dataset(){if(this.styleElement)return this._element.dataset;{let e=this._dataset;return void 0===e&&(e={},this._dataset=e),e}}get flexdata(){let e=this._cached.flexdata;if(void 0===e){if(this.flexElement){const{flexWrap:t,flexDirection:i,alignContent:n,justifyContent:s}=this.cssAsObject("flexWrap","flexDirection","alignContent","justifyContent"),a=i.startsWith("row");e={row:a,column:!a,reverse:i.endsWith("reverse"),wrap:t.startsWith("wrap"),wrapReverse:"wrap-reverse"===t,alignContent:n,justifyContent:s}}else e={};this._cached.flexdata=e}return e}get flexbox(){var e;let t=this._cached.flexbox;if(void 0===t){if((null===(e=this.actualParent)||void 0===e?void 0:e.flexElement)&&this.styleElement){const e=this.css("alignSelf"),i=this.css("justifySelf");t={alignSelf:"auto"===e?this.cssParent("alignItems"):e,justifySelf:"auto"===i?this.cssParent("justifyItems"):i,basis:this.css("flexBasis"),grow:it(this,"flexGrow",0),shrink:it(this,"flexShrink",1),order:this.toInt("order",0)}}else t={alignSelf:"auto",justifySelf:"auto",basis:"auto",grow:0,shrink:1,order:0};this._cached.flexbox=t}return t}get width(){let e=this._cached.width;return void 0===e&&(e=lt(this,this._styleMap,"width","minWidth","maxWidth"),this._cached.width=e),e}get height(){let e=this._cached.height;return void 0===e&&(e=lt(this,this._styleMap,"height","minHeight","maxHeight"),this._cached.height=e),e}get hasWidth(){let e=this._cached.hasWidth;return void 0===e&&(e=this.width>0,this._cached.hasWidth=e),e}get hasHeight(){var e;let t=this._cached.hasHeight;if(void 0===t){const i=this.css("height");t=ge(i)?this.pageFlow&&((null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||this.documentBody)?parseFloat(i)>0:"fixed"===this.css("position"):this.height>0,this._cached.hasHeight=t}return t}get lineHeight(){let e=this._cached.lineHeight;if(void 0===e){if(e=0,!this.imageElement&&!this.svgElement){let t=this.has("lineHeight"),i=0;if(t){const e=this.css("lineHeight");if(ge(e))i=Fe(this.style.lineHeight);else if(De(e))i=parseFloat(e)*this.fontSize;else if(i=me(e,this.fontSize),Ge.test(e)&&"inherit"!==this._cssStyle.lineHeight){const e=ft.bind(this,"fontSize")();tt.test(e)&&(i*=parseFloat(e))}}else{const e=this.ascend({condition:e=>e.lineHeight>0})[0];if(e&&(i=e.lineHeight),this.styleElement){const e=ft.bind(this,"fontSize")();if(tt.test(e)){const n=parseFloat(e);1!==n&&(i*=n,this.css("lineHeight",ce(i)),t=true)}}}(t||i>this.height||this.multiline||this.block&&this.naturalChildren.some(e=>e.textElement))&&(e=i)}this._cached.lineHeight=e}return e}get display(){return this.css("display")}get positionStatic(){let e=this._cached.positionStatic;if(void 0===e){switch(this.css("position")){case"fixed":case"absolute":e=false;break;case"relative":this.documentBody?e=false:(e=!(this.hasPX("top")||this.hasPX("right")||this.hasPX("bottom")||this.hasPX("left")),e&&(this._cached.positionRelative=false));break;case"inherit":{const t=this._element,i=(null==t?void 0:t.parentElement)?he(t.parentElement,"position"):"";e=""!==i&&!("absolute"===i||"fixed"===i);break}default:e=true}this._cached.positionStatic=e}return e}get positionRelative(){let e=this._cached.positionRelative;return void 0===e&&(e="relative"===this.css("position"),this._cached.positionRelative=e),e}get top(){let e=this._cached.top;return void 0===e&&(e=ht.bind(this,"top")(),this._cached.top=e),e}get right(){let e=this._cached.right;return void 0===e&&(e=ht.bind(this,"right")(),this._cached.right=e),e}get bottom(){let e=this._cached.bottom;return void 0===e&&(e=ht.bind(this,"bottom")(),this._cached.bottom=e),e}get left(){let e=this._cached.left;return void 0===e&&(e=ht.bind(this,"left")(),this._cached.left=e),e}get marginTop(){let e=this._cached.marginTop;return void 0===e&&(e=this.inlineStatic?0:ut(this,"marginTop",true),this._cached.marginTop=e),e}get marginRight(){let e=this._cached.marginRight;return void 0===e&&(e=ut(this,"marginRight",true),this._cached.marginRight=e),e}get marginBottom(){let e=this._cached.marginBottom;return void 0===e&&(e=this.inlineStatic?0:ut(this,"marginBottom",true),this._cached.marginBottom=e),e}get marginLeft(){let e=this._cached.marginLeft;return void 0===e&&(e=ut(this,"marginLeft",true),this._cached.marginLeft=e),e}get borderTopWidth(){let e=this._cached.borderTopWidth;return void 0===e&&(e=dt(this,"height",se[0]),this._cached.borderTopWidth=e),e}get borderRightWidth(){let e=this._cached.borderRightWidth;return void 0===e&&(e=dt(this,"height",se[1]),this._cached.borderRightWidth=e),e}get borderBottomWidth(){let e=this._cached.borderBottomWidth;return void 0===e&&(e=dt(this,"width",se[2]),this._cached.borderBottomWidth=e),e}get borderLeftWidth(){let e=this._cached.borderLeftWidth;return void 0===e&&(e=dt(this,"width",se[3]),this._cached.borderLeftWidth=e),e}get paddingTop(){let e=this._cached.paddingTop;return void 0===e&&(e=ut(this,"paddingTop",false),this._cached.paddingTop=e),e}get paddingRight(){let e=this._cached.paddingRight;return void 0===e&&(e=ut(this,"paddingRight",false),this._cached.paddingRight=e),e}get paddingBottom(){let e=this._cached.paddingBottom;return void 0===e&&(e=ut(this,"paddingBottom",false),this._cached.paddingBottom=e),e}get paddingLeft(){let e=this._cached.paddingLeft;return void 0===e&&(e=ut(this,"paddingLeft",false),this._cached.paddingLeft=e),e}get contentBox(){return"border-box"!==this.css("boxSizing")||this.tableElement&&ne(8)}get contentBoxWidth(){let e=this._cached.contentBoxWidth;return void 0===e&&(e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderLeftWidth+this.paddingLeft+this.paddingRight+this.borderRightWidth,this._cached.contentBoxWidth=e),e}get contentBoxHeight(){let e=this._cached.contentBoxHeight;return void 0===e&&(e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderTopWidth+this.paddingTop+this.paddingBottom+this.borderBottomWidth,this._cached.contentBoxHeight=e),e}get inline(){let e=this._cached.inline;if(void 0===e){const t=this.display;e="inline"===t||"initial"===t&&!be.includes(this.tagName),this._cached.inline=e}return e}get inlineStatic(){let e=this._cached.inlineStatic;return void 0===e&&(e=this.inline&&this.pageFlow&&!this.floating&&!this.imageElement,this._cached.inlineStatic=e),e}get inlineVertical(){let e=this._cached.inlineVertical;if(void 0===e){if(this.naturalElement&&!this.floating){const t=this.display;e=t.startsWith("inline")||"table-cell"===t}else e=false;this._cached.inlineVertical=e}return e}get inlineDimension(){let e=this._cached.inlineDimension;return void 0===e&&(e=this.naturalElement&&(this.display.startsWith("inline-")||this.floating),this._cached.inlineDimension=e),e}set inlineText(e){switch(this.tagName){case"INPUT":case"IMG":case"SELECT":case"SVG":case"BR":case"HR":case"TEXTAREA":case"PROGRESS":case"METER":case"CANVAS":this._inlineText=false;break;case"BUTTON":this._inlineText=""!==this.textContent.trim();break;default:this._inlineText=e,this._cached.textElement=void 0}}get inlineText(){return this._inlineText}get block(){var e;let t=this._cached.block;if(void 0===t){switch(this.display){case"block":case"flex":case"grid":case"list-item":t=true;break;case"initial":t=be.includes(this.tagName);break;case"inline":if("svg"===this.tagName&&(null===(e=this.actualParent)||void 0===e?void 0:e.htmlElement)){t=!this.hasPX("width")&&0===Fe(ye(this._element,"width"));break}default:t=false}this._cached.block=t}return t}get blockStatic(){let e=this._cached.blockStatic;return void 0===e&&(e=this.pageFlow&&(this.block&&!this.floating||this.lineBreak||this.blockDimension&&("100%"===ft.bind(this,"width")()||"100%"===ft.bind(this,"minWidth")())&&!this.hasPX("maxWidth")),this._cached.blockStatic=e),e}get blockDimension(){let e=this._cached.blockDimension;if(void 0===e){if(this.block||this.floating||this.imageElement||this.svgElement)e=true;else{const t=this.display;e=t.startsWith("inline-")||"table"===t}this._cached.blockDimension=e}return e}get blockVertical(){let e=this._cached.blockVertical;return void 0===e&&(e=this.blockDimension&&this.hasHeight,this._cached.blockVertical=e),e}get pageFlow(){let e=this._cached.pageFlow;return void 0===e&&(e=this.positionStatic||this.positionRelative,this._cached.pageFlow=e),e}get inlineFlow(){let e=this._cached.inlineFlow;return void 0===e&&(e=this.inline||this.inlineDimension||this.inlineVertical||this.imageElement,this._cached.inlineFlow=e),e}get centerAligned(){let e=this._cached.centerAligned;return void 0===e&&(e=this.pageFlow?this.autoMargin.leftRight||gt(this)&&st(this,"center"):this.hasPX("left")&&this.hasPX("right"),this._cached.centerAligned=e),e}get rightAligned(){let e=this._cached.rightAligned;return void 0===e&&(e=this.pageFlow?"right"===this.float||this.autoMargin.left||gt(this)&&st(this,"right","end"):this.hasPX("right")&&!this.hasPX("left"),this._cached.rightAligned=e),e}get bottomAligned(){var e;let t=this._cached.bottomAligned;return void 0===t&&(t=this.pageFlow?true===(null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)&&true===this.autoMargin.top:this.hasPX("bottom")&&!this.hasPX("top"),this._cached.bottomAligned=t),t}get autoMargin(){let e=this._cached.autoMargin;if(void 0===e){if(!this.pageFlow||this.blockStatic||"table"===this.display){const t=this._styleMap,i="auto"===t.marginLeft&&(this.pageFlow||this.hasPX("right")),n="auto"===t.marginRight&&(this.pageFlow||this.hasPX("left")),s="auto"===t.marginTop&&(this.pageFlow||this.hasPX("bottom")),a="auto"===t.marginBottom&&(this.pageFlow||this.hasPX("top"));e={horizontal:i||n,left:i&&!n,right:!i&&n,leftRight:i&&n,vertical:s||a,top:s&&!a,bottom:!s&&a,topBottom:s&&a}}else e={};this._cached.autoMargin=e}return e}get floating(){let e=this._cached.floating;return void 0===e&&(e="none"!==this.float,this._cached.floating=e),e}get float(){let e=this._cached.float;return void 0===e&&(e=this.pageFlow&&this.css("float")||"none",this._cached.float=e),e}get zIndex(){return this.toInt("zIndex",0)}get textContent(){let e=this._cached.textContent;return void 0===e&&(e=this.svgElement?"":this._element.textContent,this._cached.textContent=e),e}get src(){return this.htmlElement&&this._element.src||""}get overflowX(){let e=this._cached.overflow;return void 0===e&&(e=ct(this),this._cached.overflow=e),Oe(e,8)}get overflowY(){let e=this._cached.overflow;return void 0===e&&(e=ct(this),this._cached.overflow=e),Oe(e,16)}get baseline(){let e=this._cached.baseline;if(void 0===e){if(this.pageFlow&&!this.floating){const t=this.css("verticalAlign");e="baseline"===t||"initial"===t||0===this.naturalElements.length&&fe(t,true)}else e=false;this._cached.baseline=e}return e}get verticalAlign(){let e=this._cached.verticalAlign;return void 0===e&&(this.pageFlow?(e=this.css("verticalAlign"),fe(e,true)&&(e=this.parseUnit(e,"height")+"px")):e="0px",this._cached.verticalAlign=e),e}set textBounds(e){this._textBounds=e}get textBounds(){let e=this._textBounds;if(void 0===e){if(e=null,this.naturalChild)if(this.textElement)e=ke(this._element,this.sessionId);else{const t=this.naturalChildren,i=t.length;if(i){let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=0,l=0;while(l<i){const e=t[l++];if(e.textElement){const t=ke(e.element,e.sessionId);n=Math.min(t.top,n),s=Math.max(t.right,s),a=Math.min(t.left,a),r=Math.max(t.bottom,r),o+=t.numberOfLines||0}}o>0&&(e={top:n,right:s,left:a,bottom:r,width:s-a,height:r-n,numberOfLines:o})}}this._textBounds=e}return e}get multiline(){var e;let t=this._cached.multiline;return void 0===t&&(t=this.plainText?Math.floor(ve(this._element).width)>this.actualParent.box.width:!(!this.styleText||!this.inlineFlow&&0!==this.naturalElements.length)&&(null===(e=this.textBounds)||void 0===e?void 0:e.numberOfLines)>1,this._cached.multiline=t),t}get backgroundColor(){let e=this._cached.backgroundColor;if(void 0===e){switch(e=this.css("backgroundColor"),e){case"initial":case"transparent":case"rgba(0, 0, 0, 0)":e="";break;default:if(""!==e&&this.pageFlow&&this.styleElement&&!this.inputElement&&(!this._initial||ft.bind(this,"backgroundColor")()===e)){let t=this.actualParent;while(t){const i=ft.bind(t,"backgroundColor",true)();if(""!==i){i===e&&""===t.backgroundColor&&(e="");break}t=t.actualParent}}}this._cached.backgroundColor=e}return e}get backgroundImage(){let e=this._cached.backgroundImage;if(void 0===e){let t=this.css("backgroundImage");if(""!==t&&"none"!==t&&"initial"!==t)e=t;else if(t=this.css("background"),Qe.test(t)){const i=[],n=ze(t),s=n.length;for(let e=1;e<s;++e){const t=n[e-1].trim();Qe.test(t)&&i.push(t+n[e])}e=i.join(", ")}else e="";this._cached.backgroundImage=e}return e}get percentWidth(){let e=this._cached.percentWidth;if(void 0===e){const t=ft.bind(this,"width")();e=ge(t)?parseFloat(t)/100:0,this._cached.percentWidth=e}return e}get percentHeight(){var e;let t=this._cached.percentHeight;if(void 0===t){const i=ft.bind(this,"height")();t=ge(i)&&((null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||"fixed"===this.css("position"))?parseFloat(i)/100:0,this._cached.percentHeight=t}return t}get visibleStyle(){let e=this._cached.visibleStyle;if(void 0===e){if(this.plainText)e={background:false,borderWidth:false,backgroundImage:false,backgroundColor:false,backgroundRepeat:false,backgroundRepeatX:false,backgroundRepeatY:false};else{const t=this.borderTopWidth>0||this.borderRightWidth>0||this.borderBottomWidth>0||this.borderLeftWidth>0,i=""!==this.backgroundColor,n=""!==this.backgroundImage;let s=false,a=false;n&&this.css("backgroundRepeat").split(_e.SEPARATOR).forEach(e=>{const[t,i]=e.split(Se.SPACE);s||(s="repeat"===t||"repeat-x"===t),a||(a="repeat"===t||"repeat-y"===t||"repeat"===i)}),e={background:t||n||i,borderWidth:t,backgroundImage:n,backgroundColor:i,backgroundRepeat:s||a,backgroundRepeatX:s,backgroundRepeatY:a}}this._cached.visibleStyle=e}return e}get absoluteParent(){let e=this._cached.absoluteParent;if(void 0===e){if(e=this.actualParent,!this.pageFlow&&!this.documentBody)while(e&&!e.documentBody){switch(ft.bind(e,"position",false,true)()){case"static":case"initial":case"unset":e=e.actualParent;continue}break}this._cached.absoluteParent=e}return e}set actualParent(e){this._cached.actualParent=e}get actualParent(){var e;let t=this._cached.actualParent;if(void 0===t){const i=null===(e=this._element)||void 0===e?void 0:e.parentElement;t=i&&Ae(i,this.sessionId)||null,this._cached.actualParent=t}return t}get actualWidth(){let e=this._cached.actualWidth;if(void 0===e){if(this.plainText){const t=this.bounds;switch(t.numberOfLines||1){case 1:e=t.width;break;case 2:e=Math.min(t.width,this.actualParent.box.width);break;default:e=Math.min(t.right-t.left,this.actualParent.box.width)}}else this.inlineStatic||"table-cell"===this.display||ot(this,"row")?e=this.bounds.width:(e=this.width,e>0?this.contentBox&&!this.tableElement&&(e+=this.contentBoxWidth):e=this.bounds.width);this._cached.actualWidth=e}return e}get actualHeight(){let e=this._cached.actualHeight;return void 0===e&&(this.inlineStatic||"table-cell"===this.display||ot(this,"column")?e=this.bounds.height:(e=this.height,e>0?this.contentBox&&!this.tableElement&&(e+=this.contentBoxHeight):e=this.bounds.height),this._cached.actualHeight=e),e}get actualDimension(){return{width:this.actualWidth,height:this.actualHeight}}set naturalChildren(e){this._naturalChildren=e}get naturalChildren(){return this._naturalChildren||function(e){var t;let i;if(e.naturalElement){const t=e.sessionId;i=[];let n=0;e.element.childNodes.forEach(e=>{const s=Ae(e,t);s&&(s.childIndex=n++,i.push(s))})}else i=((null===(t=e.initial)||void 0===t?void 0:t.children)||e.children).slice(0);return e.naturalChildren=i,i}(this)}set naturalElements(e){this._naturalElements=e}get naturalElements(){return this._naturalElements||function(e){const t=e.naturalChildren.filter(e=>e.naturalElement);return e.naturalElements=t,t}(this)}get firstChild(){return this.naturalElements[0]||null}get lastChild(){const e=this.naturalElements,t=e.length;return t?e[t-1]:null}get firstStaticChild(){for(const e of this.naturalChildren)if(e.pageFlow)return e;return null}get lastStaticChild(){const e=this.naturalChildren;let t=e.length-1;while(t>=0){const i=e[t--];if(i.pageFlow)return i}return null}get previousSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex-1])||null}get nextSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex+1])||null}get previousElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(e>0)return t[e-1]}return null}get nextElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(-1!==e)return t[e+1]||null}return null}get attributes(){let e=this._cached.attributes;if(void 0===e){if(e={},this.styleElement){const t=this._element.attributes,i=t.length;let n=0;while(n<i){const{name:i,value:s}=t.item(n++);e[i]=s}}this._cached.attributes=e}return e}get boundingClientRect(){var e;return this.naturalElement&&(null===(e=this._element)||void 0===e?void 0:e.getBoundingClientRect())||this._bounds||Ee()}get fontSize(){var e,t,i;let n=this._fontSize;if(void 0===n){const s=e=>parseFloat(e.getPropertyValue("font-size"));if(this.naturalChild&&this.styleElement){const t=this.css("fontSize");n=Ge.test(t)?parseFloat(t):ge(t)&&!this.documentBody?((null===(e=this.actualParent)||void 0===e?void 0:e.fontSize)||s(de(document.body)))*parseFloat(t)/100:s(this.style)}else n=me(this.css("fontSize"));if(0===n&&!this.naturalChild){const e=this.element;n=e&&ue(e)?(null===(t=Ae(e,this.sessionId))||void 0===t?void 0:t.fontSize)||s(de(e)):(null===(i=this.ascend({condition:e=>e.fontSize>0})[0])||void 0===i?void 0:i.fontSize)||s(de(document.body))}this._fontSize=n}return n}get cssStyle(){return this._cssStyle}get textStyle(){let e=this._textStyle;return void 0===e&&(e=this.cssAsObject(...re),e.fontSize=this.fontSize+"px",this._textStyle=e),e}set dir(e){this._cached.dir=e}get dir(){let e=this._cached.dir;if(void 0===e){if(e=this.naturalElement?this._element.dir:"",""===e){let t=this.actualParent;while(t){if(e=t.dir,""!==e)break;t=t.actualParent}}this._cached.dir=e}return e}get center(){const e=this.bounds;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}}const xt=new Map([[2,"marginTop"],[4,"marginRight"],[8,"marginBottom"],[16,"marginLeft"],[32,"paddingTop"],[64,"paddingRight"],[128,"paddingBottom"],[256,"paddingLeft"]]),yt={ACCESSIBILITY:"squared.accessibility",COLUMN:"squared.column",CSS_GRID:"squared.css-grid",FLEXBOX:"squared.flexbox",GRID:"squared.grid",LIST:"squared.list",RELATIVE:"squared.relative",SPRITE:"squared.sprite",TABLE:"squared.table",VERTICAL_ALIGN:"squared.verticalalign",WHITESPACE:"squared.whitespace"};var vt,Et,St,It=Object.freeze({__proto__:null,CSS_SPACING:xt,EXT_NAME:yt});!function(e){e[e.DOM_TRAVERSE=2]="DOM_TRAVERSE",e[e.EXTENSION=4]="EXTENSION",e[e.RENDER=8]="RENDER",e[e.ALL=14]="ALL"}(vt||(vt={})),function(e){e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.IMAGE_SOURCE=32]="IMAGE_SOURCE",e[e.ASSET=56]="ASSET",e[e.ALL=126]="ALL"}(Et||(Et={})),function(e){e[e.CONSTRAINT=2]="CONSTRAINT",e[e.LAYOUT=4]="LAYOUT",e[e.ALIGNMENT=8]="ALIGNMENT",e[e.ACCESSIBILITY=16]="ACCESSIBILITY",e[e.LOCALIZATION=32]="LOCALIZATION",e[e.CUSTOMIZATION=64]="CUSTOMIZATION",e[e.ALL=126]="ALL"}(St||(St={}));var wt=Object.freeze({__proto__:null,get APP_SECTION(){return vt},get NODE_RESOURCE(){return Et},get NODE_PROCEDURE(){return St}});const _t=squared.lib,{BOX_MARGIN:Tt,BOX_PADDING:kt,BOX_POSITION:Nt}=_t.css,{isTextNode:At}=_t.dom,{equal:Ct}=_t.math,{XML:Rt}=_t.regex,{getElementAsNode:Pt}=_t.session,{cloneObject:Mt,convertWord:Bt,hasBit:Lt,isArray:Ft,iterateArray:Wt,safeNestedMap:Ot,searchObject:Vt,spliceArray:Dt,withinRange:Ht}=_t.util,Xt=Array.from(xt.keys()),Yt=["position","display","verticalAlign","float","clear","zIndex"];function Ut(e={},t,i,n){const{floating:s,pageFlow:a,lineBreak:r,excluded:o}=e,l=[];while(t){const e=Pt(t,n);if(e)if(false!==r&&e.lineBreak||false!==o&&e.excluded&&!e.lineBreak)l.push(e);else if(e.pageFlow&&!e.excluded){if(false===a)break;if(l.push(e),false!==s||!e.floating&&(e.visible||e.rendered)&&"none"!==e.display)break}t=t[i]}return l}const zt=e=>e.naturalElements.length>0&&!e.layoutElement&&!e.tableElement,Gt=e=>e.blockVertical||e.percentWidth>0,jt=(e,t)=>e.blockDimension&&Math.ceil(e.bounds.top)>=t.bounds.bottom&&(Gt(e)||Gt(t)),qt=e=>e.inlineDimension&&!e.hasPX("maxWidth")?e.percentWidth:Number.NEGATIVE_INFINITY;class $t extends bt{constructor(){super(...arguments),this.alignmentType=0,this.rendered=false,this.excluded=false,this.originalRoot=false,this.floatContainer=false,this.lineBreakLeading=false,this.lineBreakTrailing=false,this.baselineActive=false,this.baselineAltered=false,this.positioned=false,this._boxRegister={},this._preferInitial=true,this._excludeSection=0,this._excludeProcedure=0,this._excludeResource=0,this._childIndex=Number.POSITIVE_INFINITY,this._containerIndex=Number.POSITIVE_INFINITY,this._visible=true,this._locked={}}static refitScreen(e,t){const{width:i,height:n}=e.localSettings.screenDimension;let{width:s,height:a}=t;if(s>i)a=Math.round(a*i/s),s=i;else{if(!(a>n))return t;s=Math.round(s*n/a),a=n}return{width:s,height:a}}static outerRegion(e){let t,i,n,s,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;return e.each(e=>{if(e.companion)t=e.actualRect("top"),i=e.actualRect("right"),n=e.actualRect("bottom"),s=e.actualRect("left");else{if(({top:t,right:i,bottom:n,left:s}=e.linear),e.marginRight<0){const t=i+Math.abs(e.marginRight);t>c&&(c=t)}if(e.marginBottom<0){const t=n+Math.abs(e.marginBottom);t>h&&(h=t)}}t<a&&(a=t),i>r&&(r=i),n>o&&(o=n),s<l&&(l=s)}),{top:a,right:r,bottom:o,left:l,width:Math.max(r,c)-l,height:Math.max(o,h)-a}}static baseline(e,t=false){const i=[],n=e.length;let s=0;while(s<n){const n=e[s++];!n.baseline||t&&!n.textElement||n.baselineAltered||(n.naturalElements.length?n.baselineElement&&i.push(n):i.push(n))}return i.length>1&&i.sort((e,t)=>{if(e.length&&0===t.length)return 1;if(t.length&&0===e.length)return-1;const i=e.baselineHeight+e.marginBottom,n=t.baselineHeight+t.marginBottom;if(!Ct(i,n))return i>n?-1:1;if(e.textElement&&t.textElement){if(!e.pseudoElement&&t.pseudoElement)return-1;if(e.pseudoElement&&!t.pseudoElement)return 1;if(!e.plainText&&t.plainText)return-1;if(e.plainText&&!t.plainText)return 1}else{if(e.inputElement&&t.inputElement&&e.containerType!==t.containerType)return e.containerType>t.containerType?-1:1;if(t.textElement&&e.inputElement&&t.childIndex<e.childIndex)return 1;if(e.textElement&&t.inputElement&&e.childIndex<t.childIndex)return-1}const s=e.bounds.bottom,a=t.bounds.bottom;return s>a?-1:s<a?1:0}),i[0]||null}static linearData(e,t){const i=new Set;let n=false,s=false;const a=e.length;if(a>1){const r=new Array(a);let o=0,l=0;while(o<a){const t=e[o++];t.pageFlow?(t.floating&&i.add(t.float),r[l++]=t):t.autoPosition&&(r[l++]=t)}if(l){r.length=l;const e=[r[0]];let a=1,c=1;o=1;while(o<l){const i=r[o++];if(i.alignedVertically(e,t)>0?c++:a++,a>1&&c>1)break;e.push(i)}if(n=a===l,s=c===l,n&&i.size){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;o=0;while(o<l){const n=r[o++],{left:a,right:l}=n.linear;switch(e=Math.min(e,a),t=Math.max(t,l),n.float){case"left":i=Math.max(i,l);break;case"right":s=Math.min(s,a)}}let a=0,c=0,h=0,d=0;for(o=0;o<l;++o){const l=r[o],{left:u,right:f}=l.linear;if(Math.floor(u)<=e&&++a,Math.ceil(f)>=t&&++c,l.floating||(u===i&&++h,f===s&&++d),0===o)continue;if(2===a||2===c||2===h||2===d){n=false;break}const g=r[o-1];if(Ht(u,g.linear.left)||g.floating&&Math.ceil(l.bounds.top)>=g.bounds.bottom){n=false;break}}}}}else a&&(s=e[0].blockStatic,n=!s);return{linearX:n,linearY:s,floated:i,cleared:t}}static partitionRows(e,t){const i=[];let n=[],s=[];const a=e.length;let r=0;while(r<a){const a=e[r++];let o=a;if(!a.naturalChild){if(a.nodeGroup){n.length&&i.push(n),i.push([a]),n=[],s.length=0;continue}const e=a.innerMostWrapped;e!==a&&(o=e)}0===n.length?(n.push(a),s.push(o)):o.alignedVertically(s,t)>0?(n.length&&i.push(n),n=[a],s=[o]):(n.push(a),s.push(o))}return n.length&&i.push(n),i}is(e){return this.containerType===e}of(e,...t){return this.is(e)&&t.some(e=>this.hasAlign(e))}attr(e,t,i,n=true){let s=this["__"+e];return i?(s||(this._namespaces.includes(e)||this._namespaces.push(e),s={},this["__"+e]=s),n&&this.lockedAttr(e,t)&&(n=false),!n&&s[t]?i=s[t]:s[t]=i,i):(null==s?void 0:s[t])||""}unsafe(e,t){if(void 0===t)return this["_"+e];this["_"+e]=t}unset(e){delete this["_"+e]}namespace(e){return this["__"+e]||{}}delete(e,...t){const i=this["__"+e];i&&t.forEach(e=>{if(e.includes("*"))for(const[t]of Vt(i,e))delete i[t];else delete i[e]})}lockAttr(e,t){Ot(this._locked,e)[t]=true}unlockAttr(e,t){const i=this._locked[e];i&&(i[t]=false)}lockedAttr(e,t){var i;return true===(null===(i=this._locked[e])||void 0===i?void 0:i[t])}render(e){this.renderParent=e,this.rendered=true}parseUnit(e,t="width",i=true,n){return super.parseUnit(e,t,i,n||this.localSettings.screenDimension)}parseWidth(e,t=true){return super.parseUnit(e,"width",t,this.localSettings.screenDimension)}parseHeight(e,t=true){return super.parseUnit(e,"height",t,this.localSettings.screenDimension)}renderEach(e){const t=this.renderChildren,i=t.length;let n=0;while(n<i)e(t[n],n++,t);return this}hide(e){let t,i;e&&({remove:t,replacement:i}=e),t&&this.removeTry(i),this.rendered=true,this.visible=false}inherit(e,...t){t.forEach(t=>{switch(t){case"base":{this._documentParent=e.documentParent,this._bounds=e.bounds,this._linear=e.linear,this._box=e.box,-1===this.depth&&(this.depth=e.depth);const t=e.actualParent;t&&(this.actualParent=t,this.dir=t.dir);break}case"initial":Mt(e.unsafe("initial"),this.initial);break;case"alignment":{const t=this._styleMap;Yt.forEach(i=>t[i]=e.css(i)),this.positionStatic||Nt.forEach(i=>{e.hasPX(i)&&(t[i]=e.css(i))}),Object.assign(this.autoMargin,e.autoMargin),this.autoPosition=e.autoPosition;break}case"styleMap":this.cssCopyIfEmpty(e,...Object.keys(e.unsafe("styleMap")));break;case"textStyle":this.cssApply(e.textStyle),this.setCacheValue("fontSize",e.fontSize);break;case"boxStyle":{const{backgroundColor:t,backgroundImage:i}=e;this.cssApply(e.cssAsObject("backgroundRepeat","backgroundSize","backgroundPositionX","backgroundPositionY","backgroundClip","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius")),this.cssApply({backgroundColor:t,backgroundImage:i,border:"inherit",borderRadius:"inherit"}),this.unsetCache("borderTopWidth","borderBottomWidth","borderRightWidth","borderLeftWidth"),this.setCacheValue("backgroundColor",t),this.setCacheValue("backgroundImage",i),e.setCacheValue("backgroundColor",""),e.setCacheValue("backgroundImage",""),e.cssApply({backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"none",border:"initial",borderRadius:"initial"});const n=e.visibleStyle;n.background=false,n.backgroundImage=false,n.backgroundRepeatX=false,n.backgroundRepeatY=false,n.backgroundColor=false,n.borderWidth=false;break}}})}addAlign(e){this.hasAlign(e)||(this.alignmentType|=e)}removeAlign(e){this.hasAlign(e)&&(this.alignmentType^=e)}hasAlign(e){return Lt(this.alignmentType,e)}hasResource(e){return!Lt(this._excludeResource,e)}hasProcedure(e){return!Lt(this._excludeProcedure,e)}hasSection(e){return!Lt(this._excludeSection,e)}exclude(e){const{resource:t,procedure:i,section:n}=e;t&&!Lt(this._excludeResource,t)&&(this._excludeResource|=t),i&&!Lt(this._excludeProcedure,i)&&(this._excludeProcedure|=i),n&&!Lt(this._excludeSection,n)&&(this._excludeSection|=n)}setExclusions(){var e;if(this.naturalElement){const t=this._element.dataset,i=(null===(e=this.actualParent)||void 0===e?void 0:e.dataset)||{};if(Object.keys(t).length||Object.keys(i).length){const e=(e,n)=>{let s=t[e]||"",a=0;const r=i[e+"Child"];return r&&(s+=(""!==s?"|":"")+r),""!==s&&s.split(/\s*\|\s*/).forEach(e=>{const t=n[e.toUpperCase()]||0;t>0&&!Lt(a,t)&&(a|=t)}),a};this.exclude({resource:e("excludeResource",Et),procedure:e("excludeProcedure",St),section:e("excludeSection",vt)})}}}appendTry(e,t,i=true){const n=this.children,s=n.length;for(let i=0;i<s;++i){const s=n[i];if(s===e||s===e.innerMostWrapped||s===e.outerMostWrapper)return n[i]=t,t.parent=this,t.containerIndex=e.containerIndex,true}return!!i&&(t.parent=this,true)}removeTry(e,t){const i=this.renderParent;if(i){const{renderTemplates:n,renderChildren:s}=i;if(n){const a=s.findIndex(e=>e===this);if(-1!==a){const r=n[a];if((null==r?void 0:r.node)===this){if(!e)return t&&t.bind(this,e)(),n.splice(a,1),s.splice(a,1),this.renderParent=void 0,true;{const r=e.renderParent;if(r===this){const o=r.renderTemplates;if(o){const l=o.findIndex(t=>(null==t?void 0:t.node)===e);if(-1!==l&&r.renderChildren.splice(l,1),i.appendTry(this,e,false))return t&&t.bind(this,e)(),n[a]=o[l],e.renderParent=i,s[a]=e,this.documentRoot&&(e.documentRoot=true,this.documentRoot=false),e.depth=this.depth,this.renderParent=void 0,true}}}}}}}return false}sort(e){return e?super.sort(e):this.children.sort((e,t)=>e.containerIndex<t.containerIndex?-1:1),this}alignedVertically(e,t,i){if(this.lineBreak)return 2;if(this.autoPosition&&Ft(e))return e[e.length-1].blockStatic?1:0;if(!this.pageFlow)return 1;{const n=this.floating;if(Ft(e)){const s=e[e.length-1];if(t){if(t.size&&(t.has(this)||this.siblingsLeading.some(e=>e.excluded&&t.has(e))))return 4;if(n&&s.floating){if(i&&this.float===s.float||Math.floor(this.bounds.top)===Math.floor(s.bounds.top))return 0;if(Math.ceil(this.bounds.top)>=s.bounds.bottom){if(e.every(e=>e.inlineDimension)){const t=this.actualParent;if(t&&t.ascend({condition:e=>!e.inline&&e.hasWidth,error:e=>e.layoutElement,startSelf:true})){if(t.naturalChildren.filter(e=>e.visible&&e.pageFlow).length===e.length+1){const i=e=>e.actualWidth+Math.max(e.marginLeft,0)+e.marginRight;let n=t.box.width-i(this);if(e.forEach(e=>n-=i(e)),n>=0)return 0}}}return 6}}else{if(this.blockStatic&&e.reduce((e,t)=>e+(t.floating?t.linear.width:Number.NEGATIVE_INFINITY),0)/this.actualParent.box.width>=.8)return 7;if(e.every(e=>e.inlineDimension&&Math.ceil(this.bounds.top)>=e.bounds.bottom))return 5;if(void 0!==i){if(n&&!i&&s.blockStatic)return 0;if(!this.display.startsWith("inline-")){let{top:n,bottom:s}=this.bounds;if(this.textElement&&t.size&&e.some(e=>t.has(e))&&e.some(e=>Math.floor(n)<e.bounds.top&&Math.ceil(s)>e.bounds.bottom))return 7;if(e[0].floating){if(e.length>1){const t=e[0].float;let a=Number.NEGATIVE_INFINITY,r=0;if(e.forEach(e=>{e.floating&&(e.float===t&&(a=Math.max(e.actualRect("bottom","bounds"),a)),r+=e.linear.width)}),Math.ceil(r)>=this.actualParent.box.width)return 5;if(this.multiline){if(this.styleText){const e=this.textBounds;e&&(s=e.bottom)}const e=s-a;n=e<=0||e/(s-n)<.5?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY}else n=Math.ceil(n);return n<Math.floor(a)?i?0:5:i?5:0}if(!i)return 5}}}}}if(jt(this,s))return 3;{const t=qt(this);if(t>0&&e.reduce((e,t)=>e+qt(t),t)>1)return 8}}for(const s of this.siblingsLeading){if(s.lineBreak)return 2;if(s.blockStatic||s.autoMargin.leftRight||(n&&0===s.childIndex||false===i)&&s.plainText&&s.multiline)return 1;if(!(!this.blockStatic&&"table"!==this.display||s.floating&&!(null==t?void 0:t.has(s))))return 1;if(s.floating){if("left"===s.float){if(this.autoMargin.right)return 5}else if(this.autoMargin.left)return 5;if(this.floatContainer&&this.some(e=>e.floating&&Math.ceil(e.bounds.top)>=s.bounds.bottom))return 5}if((null==t?void 0:t.has(s))&&(null==e?void 0:e[0])!==s)return 4;if(jt(this,s))return 3}}return 0}previousSiblings(e={}){var t,i,n;return Ut(e,this.nodeGroup?null===(i=null===(t=this.firstChild)||void 0===t?void 0:t.element)||void 0===i?void 0:i.previousSibling:null===(n=this.innerMostWrapped.element)||void 0===n?void 0:n.previousSibling,"previousSibling",this.sessionId)}nextSiblings(e={}){var t,i,n;return Ut(e,this.nodeGroup?null===(i=null===(t=this.firstChild)||void 0===t?void 0:t.element)||void 0===i?void 0:i.nextSibling:null===(n=this.innerMostWrapped.element)||void 0===n?void 0:n.nextSibling,"nextSibling",this.sessionId)}modifyBox(e,t,i=true){if(0!==t){const n=xt.get(e);if(n){const s=this._boxRegister[e];if(void 0===t)if(s){const t=this[n]||s.getBox(e)[1];t>0&&s.modifyBox(e,-t,i)}else this._boxReset[n]=1;else if(s)s.modifyBox(e,t,i);else{const e=this._boxAdjustment;!i&&(0===this._boxReset[n]?this[n]:0)+e[n]+t<=0?(e[n]=0,this[n]>=0&&t<0&&(this._boxReset[n]=1)):e[n]+=t}}}}getBox(e){const t=xt.get(e);return t?[this._boxReset[t],this._boxAdjustment[t]]:[NaN,0]}setBox(e,t){const i=xt.get(e);if(i){const n=this._boxRegister[e];if(n)n.setBox(e,t);else{const{reset:e,adjustment:n}=t,s=this._boxReset,a=this._boxAdjustment;if(void 0!==e&&(s[i]=e),void 0!==n){let e=a[i];t.accumulate?e+=n:e=n,false===t.negative&&(0===s[i]?this[i]:0)+e<=0&&(e=0,this[i]>=0&&e<0&&(s[i]=1)),a[i]=e}else 1!==e||this.naturalChild||(a[i]=0)}}}resetBox(e,t){const i=this._boxReset,n=(n,s)=>{for(let a=0;a<4;++a){const r=Xt[a+s];if(Lt(e,r)){const e=n[a];if(i[e]=1,t){const i=this.registerBox(r);if(i)i.resetBox(r,t);else{if(this.naturalChild){const i=this[e];i>=0&&t.modifyBox(r,i)}this.transferBox(r,t)}}}}};Lt(30,e)&&n(Tt,0),Lt(480,e)&&n(kt,4)}transferBox(e,t){const i=this._boxAdjustment,n=(n,s)=>{for(let a=0;a<4;++a){const r=Xt[a+s];if(Lt(e,r)){const e=this.registerBox(r);if(e)e.transferBox(r,t);else{const e=n[a],s=i[e];0!==s&&(t.modifyBox(r,s,false),i[e]=0),this.registerBox(r,t)}}}};Lt(30,e)&&n(Tt,0),Lt(480,e)&&n(kt,4)}registerBox(e,t){const i=this._boxRegister;t?i[e]=t:t=i[e];while(t){const i=t.unsafe("boxRegister")[e];if(!i)break;t=i}return t}actualPadding(e,t){if(t>0){if(this.layoutElement){if(this.gridElement)switch(this.css("alignContent")){case"space-around":case"space-evenly":return 0}}else{const i=this.innerMostWrapped;if(i!==this){if(!i.naturalChild)return t;if(0===i.getBox("paddingTop"===e?32:128)[0])return 0}if(i.naturalChild)return zt(i)&&function e(t,i,n){let s=false;const a=t.length;let r=0;while(r<a){const a=t[r++];if(a.blockStatic)return false;if(a.inlineStatic){if(a.has("lineHeight")&&a.lineHeight>a.bounds.height)return false;if(a[i]>=n)s=true;else if(zt(a)){if(!e(a.naturalChildren,i,n))return false;s=true}}}return s}(i.naturalChildren,e,t)?0:t}return t}return 0}actualBoxWidth(e){if(e||(e=this.box.width),this.pageFlow&&!this.documentRoot){let t=0,i=0,n=this.actualParent;while(n){if(n.hasPX("width",false)||!n.pageFlow)return e;if(t+=Math.max(n.marginLeft,0)+n.borderLeftWidth+n.paddingLeft,i+=n.paddingRight+n.borderRightWidth+n.marginRight,n.documentRoot)break;n=n.actualParent}const s=this.localSettings.screenDimension.width-t-i;if(s>0)return Math.min(e,s)}return e}cloneBase(e){e.localSettings=this.localSettings,e.alignmentType=this.alignmentType,e.containerName=this.containerName,e.depth=this.depth,e.visible=this.visible,e.excluded=this.excluded,e.rendered=this.rendered,e.childIndex=this.childIndex,e.containerIndex=this.containerIndex,e.inlineText=this.inlineText,e.lineBreakLeading=this.lineBreakLeading,e.lineBreakTrailing=this.lineBreakTrailing,e.actualParent=this.actualParent,e.documentParent=this.documentParent,e.documentRoot=this.documentRoot,e.renderParent=this.renderParent,this.length&&e.retain(this.duplicate()),e.inherit(this,"initial","base","alignment","styleMap","textStyle"),Object.assign(e.unsafe("cached"),this._cached)}unsetCache(...e){if(e.length){const t=this._cached;e.forEach(e=>{switch(e){case"top":case"right":case"bottom":case"left":t.autoPosition=void 0,t.positiveAxis=void 0;break;case"fontSize":case"lineHeight":t.baselineHeight=void 0;break;case"whiteSpace":t.preserveWhiteSpace=void 0,t.textEmpty=void 0}})}super.unsetCache(...e)}css(e,t,i=false){return arguments.length>=2&&(t?this._styleMap[e]=t:delete this._styleMap[e],i&&this.unsetCache(e)),this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=false){return Object.assign(this._styleMap,e),t&&this.unsetCache(...Object.keys(e)),this}cssSet(e,t,i=true){return super.css(e,t,i)}setCacheValue(e,t){this._cached[e]=t}get element(){return this._element||!!this.innerWrapped&&this.innerMostWrapped.unsafe("element")||null}set naturalChild(e){this._cached.naturalChild=e}get naturalChild(){var e;let t=this._cached.naturalChild;return void 0===t&&(t=!!(null===(e=this._element)||void 0===e?void 0:e.parentElement),this._cached.naturalChild=t),t}get pseudoElement(){var e;return"__squared.pseudo"===(null===(e=this._element)||void 0===e?void 0:e.className)}set documentParent(e){this._documentParent=e}get documentParent(){return this._documentParent||this.absoluteParent||this.actualParent||this.parent||this}set containerName(e){this._cached.containerName=e.toUpperCase()}get containerName(){let e=this._cached.containerName;if(void 0===e){const t=this.element;e=t?At(t)?"PLAINTEXT":"INPUT"===t.tagName?"INPUT_"+Bt(t.type,true).toUpperCase():t.tagName.toUpperCase():"",this._cached.containerName=e}return e}get layoutHorizontal(){return this.hasAlign(8)}get layoutVertical(){if(this.hasAlign(16))return true;if(this.naturalChild){const e=this.naturalChildren;return 1===e.length&&e[0].blockStatic}return false}get nodeGroup(){return false}set renderAs(e){this.rendered||false!==(null==e?void 0:e.rendered)||(this._renderAs=e)}get renderAs(){return this._renderAs}get blockStatic(){return super.blockStatic||this.hasAlign(64)&&this.pageFlow&&!this.floating}get rightAligned(){return super.rightAligned||this.hasAlign(2048)}set autoPosition(e){this._cached.autoPosition=e}get autoPosition(){let e=this._cached.autoPosition;if(void 0===e){if(this.pageFlow)e=false;else{const{top:t,right:i,bottom:n,left:s}=this._styleMap;e=!(t&&"auto"!==t||s&&"auto"!==s||i&&"auto"!==i||n&&"auto"!==n)}this._cached.autoPosition=e}return e}set textContent(e){this._cached.textContent=e}get textContent(){let e=this._cached.textContent;return void 0===e&&(e=this.naturalChild&&this._element.textContent||"",this._cached.textContent=e),e}get positiveAxis(){let e=this._cached.positiveAxis;return void 0===e&&(e=(!this.positionRelative||this.positionRelative&&this.top>=0&&this.left>=0&&(this.right<=0||this.hasPX("left"))&&(this.bottom<=0||this.hasPX("top")))&&this.marginTop>=0&&this.marginLeft>=0&&this.marginRight>=0,this._cached.positiveAxis=e),e}get leftTopAxis(){let e=this._cached.leftTopAxis;if(void 0===e){switch(this.cssInitial("position")){case"absolute":e=this.absoluteParent===this.documentParent;break;case"fixed":e=true;break;default:e=false}this._cached.leftTopAxis=e}return e}get baselineElement(){let e=this._cached.baselineElement;if(void 0===e){if(this.baseline){const t=this.naturalChildren;e=t.length?t.every(e=>e.baselineElement&&0===e.length):this.inlineText&&this.textElement||this.plainText&&!this.multiline||this.inputElement||this.imageElement||this.svgElement}else e=false;this._cached.baselineElement=e}return e}set multiline(e){this._cached.multiline=e,this._cached.baselineElement=void 0}get multiline(){return super.multiline}set visible(e){this._visible=e}get visible(){return this._visible}set controlName(e){this.rendered&&this._controlName||(this._controlName=e)}get controlName(){return this._controlName||""}set actualParent(e){this._cached.actualParent=e}get actualParent(){let e=this._cached.actualParent;return void 0===e&&(e=super.actualParent,null===e&&(e=this.innerMostWrapped.actualParent),this._cached.actualParent=e),e}set siblingsLeading(e){this._siblingsLeading=e}get siblingsLeading(){return this._siblingsLeading||this.previousSiblings()}set siblingsTrailing(e){this._siblingsTrailing=e}get siblingsTrailing(){return this._siblingsTrailing||this.nextSiblings()}get previousSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){let e=i-1;while(e>=0){const i=t[e--];if(i&&(!i.excluded||i.lineBreak))return i}}}return null}get nextSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){const e=t.length;let n=i+1;while(n<e){const e=t[n++];if(e&&(!e.excluded||e.lineBreak))return e}}}return null}get firstChild(){return this.naturalChildren[0]||null}get lastChild(){const e=this.naturalChildren;return e[e.length-1]||null}get onlyChild(){var e,t,i;return 1===(null!==(t=null===(e=this.renderParent)||void 0===e?void 0:e.renderChildren.length)&&void 0!==t?t:null===(i=this.parent)||void 0===i?void 0:i.length)&&!this.documentRoot}set childIndex(e){this._childIndex=e}get childIndex(){let e=this._childIndex;if(e===Number.POSITIVE_INFINITY){let t=this.innerWrapped;if(t)do{const i=t.childIndex;if(i!==Number.POSITIVE_INFINITY){e=i,this._childIndex=e;break}t=t.innerWrapped}while(t);else{const t=this._element;if(t){const i=t.parentElement;i&&Wt(i.childNodes,(i,n)=>{if(i===t)return e=n,this._childIndex=n,true})}}}return e}set containerIndex(e){this._containerIndex=e}get containerIndex(){let e=this._containerIndex;if(e===Number.POSITIVE_INFINITY){let t=this.innerWrapped;while(t){const i=t.containerIndex;if(i!==Number.POSITIVE_INFINITY){e=i,this._containerIndex=e;break}t=t.innerWrapped}}return e}get textEmpty(){let e=this._cached.textEmpty;if(void 0===e){if(!this.styleElement||this.imageElement||this.svgElement)e=false;else{const t=this.textContent;e=""===t||!this.preserveWhiteSpace&&""===t.trim()}this._cached.textEmpty=e}return e}get innerMostWrapped(){if(this.naturalChild)return this;let e=this.innerWrapped;while(e){const t=e.innerWrapped;if(!t)break;e=t}return e||this}get outerMostWrapper(){let e=this.outerWrapper;while(e){const t=e.outerWrapper;if(!t)break;e=t}return e||this}get preserveWhiteSpace(){let e=this._cached.preserveWhiteSpace;if(void 0===e){const t=this.css("whiteSpace");e="pre"===t||"pre-wrap"===t,this._cached.preserveWhiteSpace=e}return e}get outerExtensionElement(){if(this.naturalChild){let e=this._element.parentElement;while(e){if(e.dataset.use)return e;e=e.parentElement}}return null}get extensions(){let e=this._cached.extensions;if(void 0===e){const t=this.dataset.use;e=t?Dt(t.split(Rt.SEPARATOR),e=>""===e):[],this._cached.extensions=e}return e}}const{hasBit:Kt}=squared.lib.util;class Qt extends squared.lib.base.Container{constructor(e,t,i=0,n=0,s){super(s),this.parent=e,this.node=t,this.containerType=i,this.alignmentType=n,this.rowCount=0,this.columnCount=0,this.renderType=0,this.renderIndex=-1}static create(e){const{parent:t,node:i,containerType:n,alignmentType:s,children:a,itemCount:r,rowCount:o,columnCount:l}=e,c=new Qt(t,i,n,s,a);return r&&(c.itemCount=r),o&&(c.rowCount=o),l&&(c.columnCount=l),c}init(){const e=this.length;if(e>1){const e=$t.linearData(this.children);this._floated=e.floated,this._linearX=e.linearX,this._linearY=e.linearY}else{if(!e)return;this._linearY=this.item(0).blockStatic,this._linearX=!this._linearY}this._initialized=true}setContainerType(e,t){this.containerType=e,t&&this.add(t)}hasAlign(e){return Kt(this.alignmentType,e)}add(e){return Kt(this.alignmentType,e)||(this.alignmentType|=e),this.alignmentType}addRender(e){return Kt(this.renderType,e)||(this.renderType|=e),this.renderType}delete(e){return Kt(this.alignmentType,e)&&(this.alignmentType^=e),this.alignmentType}retain(e){return super.retain(e),this.init(),this}set itemCount(e){this._itemCount=e}get itemCount(){var e;return null!==(e=this._itemCount)&&void 0!==e?e:this.length}get linearX(){var e;return this._initialized||this.init(),null===(e=this._linearX)||void 0===e||e}get linearY(){var e;return this._initialized||this.init(),null!==(e=this._linearY)&&void 0!==e&&e}get floated(){return this._initialized||this.init(),this._floated||new Set}set type(e){this.setContainerType(e.containerType,e.alignmentType);const t=e.renderType;t&&this.addRender(t)}get singleRowAligned(){let e=this._singleRow;if(void 0===e){const t=this.length;if(t){if(e=true,t>1){let i=Number.POSITIVE_INFINITY;const n=this.children;let s=0;while(s<t){const t=n[s++];if(t.blockStatic||t.multiline||Math.ceil(t.bounds.top)>=i){e=false;break}i=t.bounds.bottom}}this._singleRow=e}else e=false}return e}get unknownAligned(){return this.length>1&&!this.linearX&&!this.linearY}}const Jt=squared.lib,{BOX_POSITION:Zt,TEXT_STYLE:ei,convertListStyle:ti,formatPX:ii,getStyle:ni,insertStyleSheetRule:si,resolveURL:ai}=Jt.css,{getNamedItem:ri,isTextNode:oi,removeElementsByClassName:li}=Jt.dom,{maxArray:ci}=Jt.math,{appendSeparator:hi,convertFloat:di,convertWord:ui,flatArray:fi,hasBit:gi,hasMimeType:pi,isString:mi,iterateArray:bi,partitionArray:xi,safeNestedArray:yi,safeNestedMap:vi,trimBoth:Ei,trimString:Si}=Jt.util,{XML:Ii}=Jt.regex,{getElementCache:wi,getPseudoElt:_i,setElementCache:Ti}=Jt.session,{isPlainText:ki}=Jt.xml,Ni=/\s*(?:attr\(([^)]+)\)|(counter)\(([^,)]+)(?:,\s+([a-z-]+))?\)|(counters)\(([^,]+),\s+"([^"]*)"(?:,\s+([a-z-]+))?\)|"([^"]+)")\s*/g;function Ai(e,t,i,n,s,a){vi(e,i)[n]=a,t.style.setProperty(n,s)}function Ci(e,t,i=1){if("none"!==e){const n=/\s*([^\-\d][^\-\d]?[^\s]*)\s+(-?\d+)\s*/g;let s;while(null!==(s=n.exec(e)))if(s[1]===t)return parseInt(s[2]);return i}}function Ri(e,t,i,n,s){var a;const r=null===(a=wi(e,"styleMap"+i,n))||void 0===a?void 0:a.counterIncrement;return r?Ci(r,t,s):void 0}function Pi(e,t,i){return!i.length&&(t.push(e),true)}function Mi(e,t,i){return!t.length&&(i.push(e),true)}function Bi(e,t){if(e){const i=e.split(Ii.SEPARATOR),n=[],s=[];if(t.forEach(e=>{const t=i.indexOf(e.name);-1!==t?n[t]=e:s.push(e)}),n.length)return fi(n).concat(s)}return t}const Li=e=>!e.blockStatic&&true!==e.autoMargin.horizontal&&!(e.blockDimension&&"100%"===e.css("width"))&&(!(e.plainText&&e.multiline)||e.floating),Fi=e=>e.textElement&&(e.blockStatic||e.multiline),Wi=(e,t)=>e.positionRelative?e.hasPX("left")?e.left*(t?1:-1):e.right*(t?-1:1):0;const Oi=squared.lib,{USER_AGENT:Vi,isUserAgent:Di,isWinEdge:Hi}=Oi.client,{BOX_BORDER:Xi,BOX_PADDING:Yi,formatPX:Ui,getStyle:zi,isLength:Gi,isPercent:ji}=Oi.css,{isTextNode:qi,withinViewport:$i}=Oi.dom,{capitalize:Ki,convertFloat:Qi,flatArray:Ji,isString:Zi,iterateArray:en,safeNestedArray:tn}=Oi.util,{actualClientRect:nn,getElementCache:sn,setElementCache:an}=Oi.session,{pushIndent:rn,pushIndentArray:on}=Oi.xml;function ln(e){switch(e.getPropertyValue("position")){case"absolute":case"fixed":return true}return false}const cn=(e,t)=>parseInt(e.getPropertyValue(t));const hn=squared.lib,{hasComputedStyle:dn}=hn.css,{includes:un}=hn.util;class fn extends q{constructor(e,t,i,n=[]){super(e,t,i),this.eventOnly=false,this.documentBase=false,this.cascadeAll=false,this.removeIs=false,this.tagNames=n,this._isAll=0===n.length}static findNestedElement(e,t){if(e&&dn(e)){const i=e.children,n=i.length;let s=0;while(s<n){const e=i[s++];if(un(e.dataset.use,t))return e}}return null}is(e){return this._isAll||this.tagNames.includes(e.tagName)}condition(e,t){return e.dataset.use?this.included(e.element):!this._isAll}included(e){return un(e.dataset.use,this.name)}processNode(e,t){}processChild(e,t){}addDescendant(e){const t=this.application.session.extensionMap,i=e.id,n=t.get(i);n?n.includes(this)||n.push(this):t.set(i,[this])}postBaseLayout(e){}postConstraints(e){}postOptimize(e){}afterBaseLayout(){}afterConstraints(){}afterResources(){}beforeBaseLayout(){}beforeCascade(e){}afterFinalize(){}set application(e){this._application=e,this._controller=e.controllerHandler,this._resource=e.resourceHandler,this._cache=e.session.cache,this._cacheProcessing=e.processing.cache}get application(){return this._application}get controller(){return this._controller}get resource(){return this._resource}get cache(){return this._cache}get cacheProcessing(){return this._cacheProcessing}}const{isLength:gn}=squared.lib.css;const pn=squared.lib,{USER_AGENT:mn,isUserAgent:bn}=pn.client,{parseColor:xn}=pn.color,{BOX_BORDER:yn,calculate:vn,convertAngle:En,formatPX:Sn,getBackgroundPosition:In,getInheritedStyle:wn,isCalc:_n,isLength:Tn,isParentStyle:kn,isPercent:Nn,parseAngle:An}=pn.css,{cos:Cn,equal:Rn,hypotenuse:Pn,offsetAngleX:Mn,offsetAngleY:Bn,relativeAngle:Ln,sin:Fn,triangulate:Wn,truncateFraction:On}=pn.math,{CHAR:Vn,ESCAPE:Dn,STRING:Hn,XML:Xn}=pn.regex,{getElementAsNode:Yn}=pn.session,{appendSeparator:Un,convertCamelCase:zn,convertFloat:Gn,hasValue:jn,isEqual:qn,isNumber:$n,isString:Kn,iterateArray:Qn,trimEnd:Jn,trimStart:Zn}=pn.util,{STRING_SPACE:es,STRING_TABSPACE:ts}=pn.xml,is=`((?:rgb|hsl)a?\\(\\d+,\\s+\\d+%?,\\s+\\d+%?(?:,\\s+[\\d.]+)?\\)|#[A-Za-z\\d]{3,8}|[a-z]+)\\s*(${Hn.LENGTH_PERCENTAGE}|${Hn.CSS_ANGLE}|(?:${Hn.CSS_CALC}(?=,)|${Hn.CSS_CALC}))?,?\\s*`,ns=/\u00A0/g,ss=new RegExp(`(?:initial|url\\([^)]+\\)|(repeating-)?(linear|radial|conic)-gradient\\(((?:to\\s+[a-z\\s]+|(?:from\\s+)?-?[\\d.]+(?:deg|rad|turn|grad)|(?:circle|ellipse)?\\s*(?:closest-side|closest-corner|farthest-side|farthest-corner)?)?(?:\\s*(?:(?:-?[\\d.]+(?:[a-z%]+)?\\s*)+)?(?:at\\s+[\\w %]+)?)?),?\\s*((?:${is})+)\\))`,"g"),as=new RegExp(is,"g"),rs=/\n([^\S\n]*)?$/;function os(e,t,i){const{width:n,height:s}=t.dimension,a=[];let r,o=false,l=true,c=1;switch(t.type){case"linear":{const{repeating:e,angle:i}=t;switch(o=e,i){case 0:case 180:case 360:r=s,l=false;break;case 90:case 270:r=n;break;default:r=Math.abs(n*Fn(i-180))+Math.abs(s*Cn(i-180)),l=n>=s}break}case"radial":{const{repeating:i,radiusExtent:n,radius:s}=t;l=e.actualWidth>=e.actualHeight,o=i,c=n/s,r=s;break}case"conic":r=Math.min(n,s);break;default:return a}let h,d=0;while(null!==(h=as.exec(i))){const i=xn(h[1],1,true);if(i){let n=-1;if("conic"===t.type){const e=h[3],t=h[4];e&&t&&(n=En(e,t)/360)}else{const t=h[2];Nn(t)?n=parseFloat(t)/100:Tn(t)?n=(l?e.parseWidth(t,false):e.parseHeight(t,false))/r:_n(t)&&(n=vn(h[6],{boundingSize:r,fontSize:e.fontSize})/r,isNaN(n)&&(n=-1)),o&&-1!==n&&(n*=c)}0===a.length&&(-1===n?n=0:n>0&&a.push({color:i,offset:0})),-1!==n&&(n=Math.max(d,n),d=n),a.push({color:i,offset:n})}}const u=a.length,f=a[u-1];-1===f.offset&&(f.offset=1);let g=0;for(let e=0;e<u;++e){const t=a[e];if(-1===t.offset)if(0===e)t.offset=0;else{for(let i=e+1,n=2;i<u-1;++n){const e=a[i++];if(-1!==e.offset){t.offset=(g+e.offset)/n;break}}-1===t.offset&&(t.offset=g+f.offset/(u-1))}g=t.offset}if(o){if(g<100)e:{let e=g;const t=a.slice(0);while(g<100){let i=0;while(i<u){const n=t[i++];if(g=Math.min(e+n.offset,1),a.push(Object.assign(Object.assign({},n),{offset:g})),1===g)break e}e=g}}}else g<1&&a.push(Object.assign(Object.assign({},a[u-1]),{offset:1}));return as.lastIndex=0,a}function ls(e,t=0){if(""!==(e=e.trim())){let t=An(e);return t<0&&(t+=360),t}return t}function cs(e,t){var i,n,s;let a=false;switch(t=t.replace(ns,es),e.css("whiteSpace")){case"nowrap":t=t.replace(/\n/g," "),a=true;break;case"pre":case"pre-wrap":{false===(null===(i=e.renderParent)||void 0===i?void 0:i.layoutVertical)&&(t=t.replace(/^\s*\n/,""));const n=ps.checkPreIndent(e);if(n){const[e,i]=n;""!==e&&(i.textContent=e+i.textContent),t=t.replace(rs,"")}return[t=t.replace(/\n/g,"\\n").replace(/\t/g,ts).replace(/\s/g,es),true,false]}case"pre-line":return[t=t.replace(/\n/g,"\\n").replace(/\s+/g," "),true,false]}return e.onlyChild&&e.htmlElement?t=t.replace(Vn.LEADINGSPACE,"").replace(Vn.TRAILINGSPACE,""):((null===(n=e.previousSibling)||void 0===n?void 0:n.blockStatic)&&(t=t.replace(Vn.LEADINGSPACE,"")),(null===(s=e.nextSibling)||void 0===s?void 0:s.blockStatic)&&(t=t.replace(Vn.TRAILINGSPACE,""))),[t,a,true]}function hs(e,t,i,n){if(i){const s=i.split(Xn.SEPARATOR);return ps.getBackgroundSize(e,s[t%s.length],n)}}function ds(e,t,i,n){const s=e.css(n[0])||"none";if("none"!==s){let a=Sn("outline"!==i?e[n[1]]:Gn(e.style[n[1]]));if("0px"!==a){let r=e.css(n[2])||"initial";switch(r){case"initial":r="rgb(0, 0, 0)";break;case"inherit":case"currentcolor":case"currentColor":r=wn(e.element,n[2])}"2px"!==a||"inset"!==s&&"outset"!==s||(a="1px"),r=xn(r,1,true),r&&(t[i]={width:a,style:s,color:r})}}}function us(e,t,i){let n=e.css(i);switch("initial"===n&&(n="backgroundClip"===i?"border-box":"padding-box"),n){case"border-box":return true;case"padding-box":t[i]={top:e.borderTopWidth,right:e.borderRightWidth,bottom:e.borderBottomWidth,left:e.borderLeftWidth};break;case"content-box":t[i]={top:e.borderTopWidth+e.paddingTop,right:e.borderRightWidth+e.paddingRight,bottom:e.borderBottomWidth+e.paddingBottom,left:e.borderLeftWidth+e.paddingLeft}}return false}const fs=e=>e.replace(/&/g,"&amp;"),gs=e=>Kn(e)?e.includes("at ")?/(.+?)?\s*at (.+?)\s*$/.exec(e):[e,e]:null;class ps extends h{static isInheritedStyle(e,t){var i;return e.styleElement&&e.style[t]===(null===(i=e.actualParent)||void 0===i?void 0:i.style[t])&&("inherit"===e.cssStyle[t]||""===e.cssInitial(t))}static isBackgroundVisible(e){return!!e&&("backgroundImage"in e||"borderTop"in e||"borderRight"in e||"borderBottom"in e||"borderLeft"in e)}static generateId(e,t,i=1){const n=t;let s=i;1===i&&(t+="_"+s);const a=this.ASSETS.ids,r=a.get(e)||[];do{if(!r.includes(t)){r.push(t);break}t=`${n}_${++s}`}while(true);return a.set(e,r),t}static insertStoredAsset(e,t,i){const n=ps.STORED[e];if(n&&jn(i)){let s=function(e,t){const i=ps.STORED[e];if(i)for(const[e,n]of i.entries())if(qn(t,n))return e;return""}(e,i);if(""===s){$n(t)&&(t="__"+t);let e=0;do{if(s=t+(e>0?"_"+e:""),!n.has(s)){n.set(s,i);break}}while(++e)}return s}return""}static getOptionArray(e,t=false){let i=[],n=true;return Qn(e.children,e=>{if(!e.disabled||t)switch(e.tagName){case"OPTION":{const t=e.text.trim()||e.value.trim();""!==t&&(n&&!$n(t)&&(n=false),i.push(t));break}case"OPTGROUP":{const[s,a]=this.getOptionArray(e,t);s?(i=i.concat(s),n=false):a&&(i=i.concat(a));break}}}),n?[void 0,i]:[i]}static parseBackgroundImage(e,t,i){var n,s;if(""!==t){const a=[];let r,o=0;ss.lastIndex=0;while(null!==(r=ss.exec(t))){const t=r[0];if(t.startsWith("url(")||"initial"===t)a.push(t);else{const t=!!r[1],l=r[2],c=r[3],h=hs(e,o,e.css("backgroundSize"),i),d=$t.refitScreen(e,h||e.actualDimension);let u;switch(l){case"linear":{const{width:i,height:n}=d;let s=180;switch(c){case"to top":s=360;break;case"to right top":s=45;break;case"to right":s=90;break;case"to right bottom":s=135;break;case"to bottom":break;case"to left bottom":s=225;break;case"to left":s=270;break;case"to left top":s=315;break;default:c&&(s=ls(c,180)||360)}let a=On(Mn(s,i)),o=On(Bn(s,n));if(a!==i&&o!==n&&!Rn(Math.abs(a),Math.abs(o))){let e;e=s<=90?Ln({x:0,y:n},{x:i,y:0}):s<=180?Ln({x:0,y:0},{x:i,y:n}):s<=270?Ln({x:0,y:0},{x:-i,y:n}):Ln({x:0,y:n},{x:-i,y:0});const t=Math.abs(e-s);a=On(Mn(s,Wn(t,90-t,Pn(i,n))[1])),o=On(Bn(s,Wn(90,90-s,a)[0]))}const h={type:l,repeating:t,dimension:d,angle:s,angleExtent:{x:a,y:o}};h.colorStops=os(e,h,r[4]),u=h;break}case"radial":{const a=gs(c),o=In((null==a?void 0:a[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i}),{left:f,top:g}=o,{width:p,height:m}=d;let b="ellipse",x=g,y=g,v=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,S=0,I=0;if(a){const t=null===(n=a[1])||void 0===n?void 0:n.trim();if(t)if(t.startsWith("circle"))b="circle";else{let i=Number.POSITIVE_INFINITY;const n=t.split(" "),s=n.length;for(let t=0;t<s;++t)i=Math.min(0===t?e.parseWidth(n[t],false):e.parseHeight(n[t],false),i);S=i,I=i,1!==s&&n[0]!==n[1]||(b="circle")}}[[0,0],[p,0],[p,m],[0,m]].forEach(e=>{const t=Math.round(Pn(Math.abs(e[0]-f),Math.abs(e[1]-g)));v=Math.min(t,v),E=Math.max(t,E)}),[p-f,m-g,f].forEach(e=>{x=Math.min(e,x),y=Math.max(e,y)});const w={type:l,repeating:t,dimension:d,shape:b,center:o,closestSide:x,farthestSide:y,closestCorner:v,farthestCorner:E};if(0===S&&0===I){S=E;const e=(null===(s=null==a?void 0:a[1])||void 0===s?void 0:s.split(" ").pop())||"";switch(e){case"closest-corner":case"closest-side":case"farthest-side":{const i=w[zn(e)];t?I=i:S=i;break}default:I=E}}w.radius=S,w.radiusExtent=I,w.colorStops=os(e,w,r[4]),u=w;break}case"conic":{const t=gs(c),n={type:l,dimension:d,angle:ls(c),center:In((null==t?void 0:t[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i})};n.colorStops=os(e,n,r[4]),u=n;break}}a.push(u||"initial")}++o}if(a.length)return a}}static getBackgroundSize(e,t,i){let n=0,s=0;switch(t){case"":case"cover":case"contain":case"100% 100%":case"auto":case"auto auto":case"initial":return;default:{const a=t.split(Vn.SPACE);1===a.length&&(a[1]=a[0]),a.forEach((t,a)=>{switch("auto"===t&&(t="100%"),a){case 0:n=e.parseUnit(t,"width",false,i);break;case 1:s=e.parseUnit(t,"height",false,i)}});break}}return n>0&&s>0?{width:Math.round(n),height:Math.round(s)}:void 0}static hasLineBreak(e,t=false,i=false){if(e.naturalElements.length)return e.naturalElements.some(e=>e.lineBreak);if(!t&&e.naturalChild){const t=e.element;let n=t.textContent;return i&&(n=n.trim()),n.includes("\n")&&(e.plainText&&kn(t,"whiteSpace","pre","pre-wrap")||e.css("whiteSpace").startsWith("pre"))}return false}static checkPreIndent(e){if(e.plainText){const t=e.actualParent;if((null==t?void 0:t.preserveWhiteSpace)&&t.ascend({condition:e=>"PRE"===e.tagName,startSelf:true}).length){let t=e.nextSibling;if(null==t?void 0:t.naturalElement){const i=e.textContent;if(""!==i.trim()){const e=rs.exec(i);if(e&&(t.textElement||(t=t.find(e=>e.naturalChild&&e.textElement,{cascade:true,error:e=>e.naturalChild&&!e.textElement&&0===e.length})),t))return[e[1]?e[0]:"",t]}}}}}finalize(e){}reset(){super.reset();const e=ps.STORED;for(const t in e)e[t].clear()}writeRawImage(e,t){const i=this.fileHandler;if(i){const n={pathname:Un(this.userSettings.outputDirectory,this.controllerSettings.directory.image),filename:e,base64:t};return i.addAsset(n),n}}setBoxStyle(e){var t;if((e.styleElement||e.visibleStyle.background)&&e.hasResource(Et.BOX_STYLE)){const i=e.cssAsObject("backgroundSize","backgroundRepeat","backgroundPositionX","backgroundPositionY");if(us(e,i,"backgroundClip")&&us(e,i,"backgroundOrigin"),"0px"!==e.css("borderRadius")){const{borderTopLeftRadius:t,borderTopRightRadius:n,borderBottomRightRadius:s,borderBottomLeftRadius:a}=e.cssAsObject("borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"),[r,o]=t.split(" "),[l,c]=n.split(" "),[h,d]=s.split(" "),[u,f]=a.split(" "),g=o||c||d||f?[r,o||r,l,c||l,h,d||h,u,f||u]:[r,l,h,u],p=e.actualWidth>=e.actualHeight,m=g[0];g.every(e=>e===m)&&(g.length="0px"===m||""===m?0:1);const b=g.length;if(b){const t=p?"width":"height";let n=0;while(n<b)g[n]=Sn(e.parseUnit(g[n++],t,false));i.borderRadius=g}}e.visibleStyle.borderWidth&&(e.borderTopWidth>0&&ds(e,i,"borderTop",yn[0]),e.borderRightWidth>0&&ds(e,i,"borderRight",yn[1]),e.borderBottomWidth>0&&ds(e,i,"borderBottom",yn[2]),e.borderLeftWidth>0&&ds(e,i,"borderLeft",yn[3])),ds(e,i,"outline",yn[4]),e.hasResource(Et.IMAGE_SOURCE)&&(i.backgroundImage=ps.parseBackgroundImage(e,e.backgroundImage,e.localSettings.screenDimension));let n=e.backgroundColor;""===n&&e.has("backgroundColor")&&!e.documentParent.visible&&(n=e.css("backgroundColor")),""!==n&&(i.backgroundColor=(null===(t=xn(n))||void 0===t?void 0:t.valueAsRGBA)||""),e.data(ps.KEY_NAME,"boxStyle",i)}}setFontStyle(e){if((e.textElement||e.inlineText)&&(!e.textEmpty||e.visibleStyle.background||e.pseudoElement)||e.inputElement){const t=xn(e.css("color"));let i=e.css("fontWeight");if(!$n(i))switch(i){case"lighter":i="200";break;case"bold":i="700";break;case"bolder":i="900";break;default:i="400"}e.data(ps.KEY_NAME,"fontStyle",{fontFamily:e.css("fontFamily").trim(),fontStyle:e.css("fontStyle"),fontSize:e.fontSize,fontWeight:i,color:(null==t?void 0:t.valueAsRGBA)||""})}}setValueString(e){const t=e.element;if(t){let i="",n="",s="",a=true,r=false;switch(t.tagName){case"INPUT":switch(n=t.value,t.type){case"radio":case"checkbox":{const t=e.companion;false===(null==t?void 0:t.visible)&&(n=t.textContent.trim());break}case"submit":""!==n||e.visibleStyle.backgroundImage||(n="Submit");break;case"reset":""!==n||e.visibleStyle.backgroundImage||(n="Reset");break;case"time":""===n&&(s="--:-- --");break;case"date":case"datetime-local":if(""===n){switch((new Intl.DateTimeFormat).resolvedOptions().locale){case"en-US":s="mm/dd/yyyy";break;default:s="dd/mm/yyyy"}"datetime-local"===t.type&&(s+=" --:-- --")}break;case"week":""===n&&(s="Week: --, ----");break;case"month":""===n&&(s="--------- ----");break;case"text":case"password":case"url":case"email":case"search":case"number":case"tel":""===n&&(s=t.placeholder);break;case"file":n=bn(8)?"Browse...":"Choose File";break;case"color":{const t=this.controllerSettings.style.inputColorBorderColor,i=(xn(n)||xn("rgb(0, 0, 0)")).valueAsRGBA,{width:s,height:a}=e.actualDimension,r=`${s-10}px ${a-10}px, ${s-8}px ${a-8}px`,o="no-repeat, no-repeat",l="center, center",c="center, center",h=ps.parseBackgroundImage(e,`linear-gradient(${i}, ${i}), linear-gradient(${t}, ${t})`);n="";let d=e.data(ps.KEY_NAME,"boxStyle");if(d){const e=d.backgroundImage;if(e){d.backgroundSize=r+", "+d.backgroundSize,d.backgroundRepeat=o+", "+d.backgroundRepeat,d.backgroundPositionX=l+", "+d.backgroundPositionX,d.backgroundPositionY=c+", "+d.backgroundPositionY,e.unshift(...h);break}}else d={};e.data(ps.KEY_NAME,"boxStyle",Object.assign(d,{backgroundSize:r,backgroundRepeat:o,backgroundPositionX:l,backgroundPositionY:c,backgroundImage:h}));break}case"range":s=n,n=""}break;case"TEXTAREA":n=t.value;break;case"IFRAME":n=t.src;break;default:{const s=e.textContent;e.plainText||e.pseudoElement?(i=s.trim(),[n,r,a]=cs(e,fs(s)),r=true):e.inlineText?(i=s.trim(),[n,r,a]=cs(e,e.hasAlign(1024)?fs(s):this.removeExcludedFromText(e,t))):0===e.naturalChildren.length&&""===(null==s?void 0:s.trim())&&!e.hasPX("height")&&ps.isBackgroundVisible(e.data(ps.KEY_NAME,"boxStyle"))&&(n=s);break}}if(""!==n){if(a&&e.pageFlow){const t=e.siblingsLeading[0];let i=false;if(n.length>1)if(!t||t.multiline||t.lineBreak||t.plainText&&Vn.TRAILINGSPACE.test(t.textContent))n=n.replace(Vn.LEADINGSPACE,"");else if(t.naturalElement){const e=t.textContent,n=e.length;n&&(i=32===e.charCodeAt(n-1))}if(r){const s=!e.lineBreakTrailing&&Vn.TRAILINGSPACE.test(n);if(n=!Vn.LEADINGSPACE.test(n)||false!==(null==t?void 0:t.block)||t.lineBreak||i?n.trim():es+n.trim(),s){const t=e.siblingsTrailing.find(e=>!e.excluded||e.lineBreak);false===(null==t?void 0:t.blockStatic)&&(n+=es)}}else if(""!==n.trim())n=n.replace(Vn.LEADINGSPACE,t&&(t.block||t.lineBreak||i&&t.htmlElement&&t.textContent.length>1||e.multiline&&ps.hasLineBreak(e))?"":es),n=n.replace(Vn.TRAILINGSPACE,"table-cell"===e.display||e.lineBreakTrailing||e.blockStatic?"":es);else if(!e.inlineText)return}""!==n&&e.data(ps.KEY_NAME,"valueString",{key:i,value:n})}""!==s&&e.data(ps.KEY_NAME,"hintString",s)}else if(e.inlineText){const t=e.textContent;t&&e.data(ps.KEY_NAME,"valueString",{key:t,value:t})}}removeExcludedFromText(e,t){const i=t.children.length>0||"CODE"===t.tagName,n=e.preserveWhiteSpace,s=i?"innerHTML":"textContent";let a=t[s]||"";if(""===a.trim())return n?a:es;const r=e.sessionId;return t.childNodes.forEach((e,t)=>{const o=Yn(e,r);if(null===o||!o.textElement||!o.pageFlow||o.positioned||o.pseudoElement||o.excluded||o.dataset.target){if(o){if(i&&o.htmlElement){const e=o.toElementString("outerHTML");return void(o.lineBreak?a=a.replace(n?e:new RegExp(`\\s*${e}\\s*`),"\\n"):o.positioned?a=a.replace(e,""):n||(a=a.replace(e,o.pageFlow&&""!==o.textContent.trim()?es:"")))}{const e=o.plainText?o.textContent:o[s];if(Kn(e))return void(n||(a=a.replace(e,"")))}}else if(e instanceof HTMLElement){const t=getComputedStyle(e).getPropertyValue("position");a=a.replace(e.outerHTML,"absolute"!==t&&"fixed"!==t&&""!==e.textContent.trim()?es:"")}0===t?a=Zn(a," "):t===length-1&&(a=Jn(a," "))}}),i&&(a=a.replace(/^\\n\\n/,"\\n").replace(/\\n\\n$/,"\\n").replace(Dn.ENTITY,(e,t)=>String.fromCharCode(parseInt(t)))),a}}ps.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,images:new Map};const ms=squared.lib,{formatPercent:bs,formatPX:xs,isLength:ys,isPercent:vs}=ms.css,{CHAR:Es,CSS:Ss}=ms.regex,{isNumber:Is,safeNestedArray:ws,trimString:_s,withinRange:Ts}=ms.util,ks=yt.CSS_GRID,Ns="[\\d.]+[a-z%]+|auto|max-content|min-content",As="minmax\\(\\s*([^,]+),\\s+([^)]+)\\s*\\)",Cs="fit-content\\(\\s*([\\d.]+[a-z%]+)\\s*\\)",Rs=new RegExp(`^${Ns}$`),Ps=new RegExp(`\\s*(repeat\\(\\s*(auto-fit|auto-fill|\\d+),\\s+(.+)\\)|\\[([\\w\\s\\-]+)\\]|${As}|${Cs}|${Ns}\\s*)\\s*`,"g"),Ms=new RegExp(`\\s*(\\[([\\w\\s\\-]+)\\]|${As}|${Cs}|${Ns})\\s*`,"g"),Bs=new RegExp(Ns),Ls=new RegExp(As),Fs=new RegExp(Cs),Ws=new RegExp("\\[([\\w\\s\\-]+)\\]"),Os=/^([\w-]+)-(start|end)$/;function Vs(e,t){const i=e.repeat,n=[],s=[],a=t.length;for(let e=0;e<a;++e)i[e]?s.push(t[e]):n.push(t[e]);const r=e.length,o=r-n.length,l=s.length,c=new Array(r);for(let e=0;e<r;++e)if(i[e]){for(let t=0,i=0;t<o;++e,++t,++i)i===l&&(i=0),c[e]=s[i];--e}else c[e]=n.shift();return c}function Ds(e,t){const i=e.unit;if(1===i.length&&(e.autoFill||e.autoFit)){const n=e.unitMin;let s=0;if([i[0],n[0]].forEach(e=>{vs(e)?s=Math.max(parseFloat(e)/100*t,s):ys(e)&&(s=Math.max(parseFloat(e),s))}),s>0)return e.length=Math.floor(t/(s+e.gap)),e.unit=Vs(e,i),e.unitMin=Vs(e,n),true}return false}function Hs(e,t,i,n,s){let a=0,r=0,o=1;const l=n.length;let c=0;while(c<l){const e=n[c++];Ss.PX.test(e)?a+=parseFloat(e):Gs.isFr(e)?r+=parseFloat(e):vs(e)&&(o-=parseFloat(e)/100)}if(o<1&&r>0){const h=(e*o-(i-1)*t-s.reduce((e,t)=>e+Math.max(0,t),0)-a)/r;if(h>0)for(c=0;c<l;++c){const e=n[c];Gs.isFr(e)&&(n[c]=xs(parseFloat(e)*h))}}}function Xs(e,t){if(0===e.length){let i=0;while(i<t)e[i++]="1fr"}}function Ys(e,t,i){if(i){for(let n=0,s=-1,a=0;n<e;++n)if(0===i[n]){if(-1===s&&(s=n),++a===t)return s}else s=-1;return-1}return 0}function Us(e){const t=e.length;for(let i=0;i<t;++i){const t=e[i];for(const e of t)if(0===e)return i}return Math.max(0,t-1)}const zs=(e,t,i)=>ys(t)?xs(e.parseUnit(t,0!==i?"width":"height")):t;class Gs extends fn{static createDataAttribute(e){const t=e.gridAutoFlow;return Object.assign(e,{children:[],rowData:[],rowSpanMultiple:[],rowDirection:!t.includes("column"),dense:t.includes("dense"),templateAreas:{},row:Gs.createDataRowAttribute(),column:Gs.createDataRowAttribute(),emptyRows:[],minCellHeight:0})}static createDataRowAttribute(){return{length:0,gap:0,unit:[],unitMin:[],unitTotal:[],repeat:[],auto:[],autoFill:false,autoFit:false,name:{},fixedWidth:false,flexible:false,frTotal:0}}is(e){return e.gridElement}condition(e){return e.length>0}processNode(e){const t=Gs.createDataAttribute(e.cssAsObject("alignItems","alignContent","justifyItems","justifyContent","gridAutoFlow")),{column:i,dense:n,row:s,rowDirection:a}=t,[r,o,l,c]=a?[0,1,2,3]:[1,0,3,2],h=[],d=[],u=[];i.gap=e.parseWidth(e.css("columnGap"),false),s.gap=e.parseHeight(e.css("rowGap"),false),[e.cssInitial("gridTemplateRows",true),e.cssInitial("gridTemplateColumns",true),e.css("gridAutoRows"),e.css("gridAutoColumns")].forEach((t,n)=>{if(""!==t&&"none"!==t&&"auto"!==t){const a=0===n?s:i,{name:r,repeat:o,unit:l,unitMin:c}=a;let h,d=1;Ps.lastIndex=0;while(null!==(h=Ps.exec(t))){const t=h[1].trim();switch(n){case 0:case 1:if(t.startsWith("["))h[4].split(Es.SPACE).forEach(e=>ws(r,e).push(d));else if(t.startsWith("repeat")){let t=1;switch(h[2]){case"auto-fit":a.autoFit=true;break;case"auto-fill":a.autoFill=true;break;default:t=parseInt(h[2])||1}if(t>0){const i=[];let s;Ms.lastIndex=0;while(null!==(s=Ms.exec(h[3]))){const t=s[1];let a;if(null!==(a=Ws.exec(t))){const e=a[1];r[e]||(r[e]=[]),i.push({name:e})}else null!==(a=Ls.exec(t))?i.push({unit:zs(e,a[2],n),unitMin:zs(e,a[1],n)}):null!==(a=Fs.exec(t))?i.push({unit:zs(e,a[1],n),unitMin:"0px"}):null!==(a=Bs.exec(t))&&i.push({unit:zs(e,a[0],n)})}if(i.length)for(let e=0;e<t;++e)i.forEach(e=>{const{name:t,unit:i}=e;t?r[t].push(d):i&&(l.push(i),c.push(e.unitMin||""),o.push(true),++d)})}}else t.startsWith("minmax")?(l.push(zs(e,h[6],n)),c.push(zs(e,h[5],n)),o.push(false),++d):t.startsWith("fit-content")?(l.push(zs(e,h[7],n)),c.push("0px"),o.push(false),++d):Rs.test(t)&&(l.push(zs(e,t,n)),c.push(""),o.push(false),++d);break;case 2:case 3:(2===n?s:i).auto.push(ys(t)?xs(e.parseUnit(t,2!==n?"width":"height")):t)}}}}),a?e.sort((e,t)=>{const{left:i,top:n}=e.linear,{left:s,top:a}=t.linear;return Ts(n,a)?Ts(i,s)?0:i<s?-1:1:n<a?-1:1}):e.sort((e,t)=>{const{left:i,top:n}=e.linear,{left:s,top:a}=t.linear;return Ts(i,s)?Ts(n,a)?0:n<a?-1:1:i<s?-1:1});let f,g=false,p=false;if(!e.has("gridTemplateAreas")&&e.every(e=>"auto"===e.css("gridRowStart")&&"auto"===e.css("gridColumnStart"))){const[n,r,o,l,c]=a?["top","bottom",2,1,3]:["left","right",3,0,2];let h,d=0,f=0,m=0;a?i.autoFill&&(g=Ds(i,e.actualWidth)):s.autoFill&&(p=Ds(s,e.actualHeight)),e.each((e,i)=>{(!h||e.linear[n]>=h.linear[r]||f>0&&f===m)&&(m=Math.max(f,m),d++,f=1);const{gridRowEnd:s,gridColumnEnd:g}=e.cssAsObject("gridRowEnd","gridColumnEnd");let p=1,b=1;if(s.startsWith("span")?p=parseInt(s.split(" ")[1]):Is(s)&&(p=parseInt(s)-d),g.startsWith("span")?b=parseInt(g.split(" ")[1]):Is(g)&&(b=parseInt(g)-f),1===f&&m>0){let e=false;do{const i=new Array(m-1).fill(1);u.forEach(e=>{const t=e.placement;if(t[o]>d)for(let e=t[l];e<t[c];++e)i[e-1]=0});const n=i.length;for(let t=0,s=0,a=0;t<n;++t)if(i[t]){if(0===s&&(a=t),++s===b){f=a+1,e=true;break}}else s=0;e||(t.emptyRows[d-1]=i,d++)}while(!e)}u[i]=a?{outerCoord:e.linear.top,placement:[d,f,d+p,f+b],rowSpan:p,columnSpan:b}:{outerCoord:e.linear.left,placement:[f,d,f+b,d+p],rowSpan:p,columnSpan:b},f+=b,h=e})}else{const n=t.templateAreas;let r;g=Ds(i,e.actualWidth),p=Ds(s,e.actualHeight),e.css("gridTemplateAreas").split(/"[\s\n]+"/).forEach((e,t)=>{"none"!==e&&_s(e.trim(),'"').split(Es.SPACE).forEach((e,i)=>{if("."!==e.charAt(0)){const s=n[e];s?(s.rowSpan=t-s.rowStart+1,s.columnSpan=i-s.columnStart+1):n[e]={rowStart:t,rowSpan:1,columnStart:i,columnSpan:1}}})}),e.each((e,t)=>{const o=e.cssAsTuple("gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd"),l=[0,0,0,0];let c=-1,h=-1;if(Object.keys(n).length)for(let e=0;e<4;++e){const t=o[e];let i=n[t];if(i)switch(e){case 0:l[0]=i.rowStart+1;break;case 1:l[1]=i.columnStart+1;break;case 2:l[2]=i.rowStart+i.rowSpan+1;break;case 3:l[3]=i.columnStart+i.columnSpan+1}else{const s=Os.exec(t);if(s&&(i=n[s[1]],i))if("start"===s[2])switch(e){case 0:case 2:l[e]=i.rowStart+1;break;case 1:case 3:l[e]=i.columnStart+1}else switch(e){case 0:case 2:l[e]=i.rowStart+i.rowSpan+1;break;case 1:case 3:l[e]=i.columnStart+i.columnSpan+1}}}if(0===l[0]||0===l[1]||0===l[2]||0===l[3]){const e=(e,t,i,n)=>{if(Is(e)){const i=parseInt(e);if(i>0)return l[t]=i,true;if(i<0&&t>=2){const e=t-2;return l[l[e]>0?t:e]=i+n+2,true}}else if(e.startsWith("span")){const s=parseInt(e.split(" ")[1]);if(s===n&&r)if(a){if(!i){const e=r[2];e>0&&0===l[0]&&(l[0]=e)}}else if(i){const e=r[3];e>0&&0===l[1]&&(l[1]=e)}const d=l[t-2];switch(t){case 0:{const e=o[2];if(Is(e)){const t=parseInt(e);l[0]=t-s,l[2]=t}break}case 1:{const e=o[3];if(Is(e)){const t=parseInt(e);l[1]=t-s,l[3]=t}break}case 2:case 3:d>0&&(l[t]=d+s)}return i?-1===c&&(c=s):-1===h&&(h=s),true}return false};let t,n;for(let a=0;a<4;++a){const r=o[a];if("auto"!==r&&0===l[a]){const d=a%2==0,u=d?s:i;if(!e(r,a,d,Math.max(1,u.unit.length))){const e=r.split(" ");1===e.length?(e[1]=e[0],e[0]="1"):Is(e[0])&&(d?t?c=parseInt(e[0])-parseInt(t[0]):t=e:n?h=parseInt(e[0])-parseInt(n[0]):n=e);const i=u.name[e[1]];if(i){const t=parseInt(e[0]);t<=i.length&&(l[a]=i[t-1]+(e[1]===o[a-2]?1:0))}}}}}r||(0===l[0]&&(l[0]=1),0===l[1]&&(l[1]=1));const[d,f,g,p]=l;-1===c?c=d>0&&g>0?g-d:1:d>0&&0===g&&(l[2]=d+c),-1===h?h=f>0&&p>0?p-f:1:f>0&&0===p&&(l[3]=d+h),0===l[2]&&l[0]>0&&(l[2]=l[0]+c),0===l[3]&&l[1]>0&&(l[3]=l[1]+h),u[t]={outerCoord:a?e.bounds.top:e.bounds.left,placement:l,rowSpan:c,columnSpan:h},r=l})}{const[t,n]=a?[i,e.box.top]:[s,e.box.left];let r=t.unit,o=1,l=0;u.forEach(e=>{if(e){const[t,i,s]=a?[e.columnSpan,1,3]:[e.rowSpan,0,2],r=e.placement;r.some(e=>e>0)&&(o=Math.max(o,t,r[i],r[s]-1)),Ts(e.outerCoord,n)&&(l+=t)}});let c=r.length;if(f=Math.max(o,l,a&&!g||!a&&!p?c:0),t.length=f,c<f)if(t.autoFill||t.autoFit)0===c&&(r.push("auto"),t.unitMin.push(""),t.repeat.push(true)),r=Vs(t,r),t.unit=r,t.unitMin=Vs(t,t.unitMin);else{const e=t.auto,i=e.length;if(i){let t=0;while(r.length<f)t===i&&(t=0),r.push(e[t++])}}else(t.autoFit||t.autoFill&&e.blockStatic&&(a&&!e.hasWidth&&!e.hasPX("maxWidth",false)||!a&&!e.hasHeight))&&(r.length=f);let h=1,d=0,m=0;if(r.forEach(e=>{vs(e)?h-=parseFloat(e)/100:Gs.isFr(e)?d+=parseFloat(e):"auto"===e&&m++}),t.flexible=h<1||d>0,h<1)if(d>0){c=r.length;for(let e=0;e<c;++e){const t=r[e];Gs.isFr(t)&&(r[e]=h*(parseFloat(t)/d)+"fr")}}else if(1===m){const e=r.findIndex(e=>"auto"===e);-1!==e&&(r[e]=bs(h))}}if(e.each((e,i)=>{const{placement:s,rowSpan:g,columnSpan:p}=u[i],[m,b]=a?[g,p]:[p,g];while(0===s[0]||0===s[1]){const e=s.slice(0);if(0===e[r]){let t=h.length;for(let i=n?0:Us(d),s=0,a=-1;i<t;++i){if(-1!==Ys(f,b,d[i])){if(0===s&&(a=i,t=Math.max(t,i+m)),++s===m){e[r]=a+1;break}}else s=0,a=-1,t=h.length}}if(0===e[r])s[r]=h.length+1,0===s[o]&&(s[o]=1);else if(0===e[o]){0===e[l]&&(e[l]=e[r]+m);const t=[],i=e[r]-1,n=e[l]-1;let s=i;while(s<n){const e=h[s++];if(e){if(!(e.reduce((e,t)=>e+(t?1:0),0)+b<=f))break;{const i=[];let n=0;for(let t=0,s=-1;t<f;++t){const a=e[t];a||(-1===s&&(s=t),n++),(a||t===f-1)&&(n>=b&&i.push([s,s+n]),s=-1,n=0)}if(!i.length)break;t.push(i)}}else t.push([[0,-1]])}const a=t.length;if(a){const r=t[0];if(-1===r[0][1])e[o]=1;else if(a===n-i)if(a>1)e:for(const i of r)for(s=i[0];s<i[1];++s){let i=1;while(i<a){const n=t[i++],a=n.length;let r=0;while(r<a){const t=n[r++];if(s>=t[0]&&(-1===t[1]||s+b<=t[1])){e[o]=s+1;break e}}}}else e[o]=r[0][0]+1}}const t=e[r];if(t>0){const i=e[o];i>0&&(s[r]=t,s[o]=i)}}if(0===s[l]&&(s[l]=s[r]+m),0===s[c]&&(s[c]=s[o]+b),((e,t,i)=>{if(t.every(e=>e>0)){for(let s=t[r]-1;s<t[l]-1;++s){const a=ws(h,s);let r=d[s],l=t[o]-1;if(!r){if(r=new Array(i).fill(0),!n){let e=0;while(e<l)r[e++]=1}d[s]=r}while(l<t[c]-1)ws(a,l).push(e),r[l++]=1}return true}return false})(e,s,f)){const[i,r,o,l]=s,c=i-1,h=o-i,u=r-1;if(!n){const e=a?c:u;if(e>0){const t=d[e-1];let i=0;while(i<f)t[i++]=1}}if(h>1){const e=t.rowSpanMultiple,i=c+h;let n=c;while(n<i)e[n++]=true}e.data(ks,"cellData",{rowStart:c,rowSpan:h,columnStart:u,columnSpan:l-r})}}),h.length){let n;if(a)n=h,t.rowData=h;else{n=t.rowData;const e=h.length;for(let t=0;t<e;++t){const e=h[t],i=e.length;let s=0;while(s<i)ws(n,s)[t]=e[s++]}}const r=a?s.unitTotal:i.unitTotal,o=t.children,l=i.unit.length;if(n.forEach(e=>{const t=e.length;let i=0;while(i<t){const t=e[i];let n=r[i]||0;if(t){let e=0;t.forEach(t=>{o.includes(t)||(e=Math.max(e,a?t.bounds.height:t.bounds.width),o.push(t))}),n+=e}r[i++]=n}}),o.length===e.length){const{gap:r,unit:c}=s,{gap:h,unit:d}=i,u=Math.max(c.length,n.length),f=new Array(u).fill(0),g=new Array(l).fill(0),p=new Set;s.length=u,i.length=l;let m=0;for(let e=0;e<u;++e){const i=n[e],s=c[e];if(i)for(let n=0;n<l;++n){const s=i[n];s?s.forEach(t=>{if(!p.has(t)){const{columnSpan:i,rowSpan:s}=t.data(ks,"cellData"),a=n+i-1,o=e+s-1;if(h>0&&a<l-1&&t.modifyBox(4,h),r>0&&o<u-1&&t.modifyBox(8,r),1===s){const i=t.bounds.height,n=f[e];t.hasHeight?n<0?i>Math.abs(n)&&(f[e]=i):f[e]=Math.max(i,n):i>Math.abs(n)&&(f[e]=-i),m=Math.max(i,m)}if(1===i){const e=t.bounds.width,i=g[n];t.hasWidth?i<0?e>Math.abs(i)&&(g[n]=e):g[n]=Math.max(e,i):e>Math.abs(i)&&(g[n]=-e)}p.add(t)}}):a||(t.emptyRows[n]=[Number.POSITIVE_INFINITY])}else f[e]=parseFloat(s)||0,a&&(t.emptyRows[e]=[Number.POSITIVE_INFINITY])}t.minCellHeight=m,a?(e.hasPX("width",false)&&(i.fixedWidth=true,i.flexible=false,Hs(e.actualWidth,h,l,d,g)),e.hasHeight&&!Gs.isAligned(e)&&Xs(s.unit,u)):(e.hasPX("height",false)&&(s.fixedWidth=true,s.flexible=false,Hs(e.actualHeight,r,u,c,f)),e.hasWidth&&!Gs.isJustified(e)&&Xs(i.unit,l)),e.retain(o),e.cssSort("zIndex"),e.cssTry("display","block")&&(e.each(e=>{const{width:t,height:i}=e.boundingClientRect;e.data(ks,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i}))}),e.cssFinally("display")),e.data(ks,"mainData",t)}}}}Gs.isFr=e=>/\dfr$/.test(e),Gs.isPx=e=>Ss.PX.test(e),Gs.isAligned=e=>e.hasHeight&&/^space-|center|flex-end|end/.test(e.css("alignContent")),Gs.isJustified=e=>(e.blockStatic||e.hasWidth)&&/^space-|center|flex-end|end|right/.test(e.css("justifyContent"));const{withinRange:js}=squared.lib.util,qs=yt.FLEXBOX;class $s extends fn{static createDataAttribute(e,t){return Object.assign(Object.assign({},e.flexdata),{rowCount:0,columnCount:0,children:t})}is(e){return e.flexElement}condition(e){return e.length>0}processNode(e){const t=this.controller,[i,n]=e.partition(e=>e.pageFlow),s=$s.createDataAttribute(e,i);if(e.cssTry("align-items","start")&&(e.cssTry("justify-items","start")&&(i.forEach(e=>{if(e.cssTry("align-self","start")){if(e.cssTry("justify-self","start")){const{width:t,height:i}=e.boundingClientRect;e.data(qs,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i})),e.cssFinally("justify-self")}e.cssFinally("align-self")}}),e.cssFinally("justify-items")),e.cssFinally("align-items")),s.wrap){const[a,r,o,l]=s.row?["top","left","right","intersectY"]:["left","top","bottom","intersectX"];i.sort((e,t)=>{const i=e.linear,n=t.linear;if(!e[l](t.bounds,"bounds"))return i[a]<n[a]?-1:1;{const e=i[r],t=n[r];if(!js(e,t))return e<t?-1:1}return 0});let c=i[0],h=[c];const d=[h];let u=i.length,f=1;while(f<u){const e=i[f++];c[l](e.bounds,"bounds")?h.push(e):(c=e,h=[e],d.push(h))}e.clear();let g,p=0;if(u=d.length,f=0,u>1){const i=e.box[o];while(f<u){const n=d[f];p=Math.max(n.length,p);const s=t.createNodeGroup(n[0],n,{parent:e,delegate:true,cascade:true});s.addAlign(128),s.box[o]=i,s.containerIndex=f++}g=u}else{const t=d[0];e.retain(t),p=t.length;while(f<p)t[f].containerIndex=f++;g=p}const m=n.length;f=0;while(f<m)n[f].containerIndex=g+f++;e.concat(n),e.sort(),s.row?(s.rowCount=u,s.columnCount=p):(s.rowCount=p,s.columnCount=u)}else{if(i.some(e=>0!==e.flexbox.order)){const[e,t]=s.reverse?[-1,1]:[1,-1];i.sort((i,n)=>{const s=i.flexbox.order,a=n.flexbox.order;return s===a?0:s>a?e:t})}s.row?(s.rowCount=1,s.columnCount=e.length):(s.rowCount=e.length,s.columnCount=1)}e.data(qs,"mainData",s)}}const Ks=squared.lib,{aboveRange:Qs,belowRange:Js,objectMap:Zs,safeNestedArray:ea,withinRange:ta}=Ks.util,ia=yt.GRID;function na(e,t){const i=t.bounds.top,n=e.length;let s=0;while(s<n){const t=e[s++].findIndex(e=>{const t=e.bounds.top;return ta(i,t)||Math.ceil(i)>=t&&i<Math.floor(e.bounds.bottom)});if(-1!==t)return t}return-1}class sa extends fn{static createDataCellAttribute(){return{rowSpan:0,columnSpan:0,index:-1,cellStart:false,cellEnd:false,rowEnd:false,rowStart:false}}condition(e){if(e.length>1&&!e.layoutElement&&"TABLE"!==e.tagName&&!e.has("listStyle")){if("table"===e.display)return e.every(e=>"table-row"===e.display&&e.every(e=>"table-cell"===e.display))||e.every(e=>"table-cell"===e.display);if(0===e.percentWidth||!e.find(e=>e.percentWidth>0,{cascade:true})){let t=false,i=0;for(const n of e){if(!n.pageFlow||n.visibleStyle.background||!n.blockStatic||0!==n.percentWidth||n.autoMargin.leftRight||n.autoMargin.left)return false;n.length>1&&(t=true),"list-item"!==n.display||n.has("listStyleType")||i++}return i===e.length||t&&e.every(e=>e.length>0&&$t.linearData(e.children).linearX)}}return false}processNode(e){var t;const i=[],n={};let s=[];e.each(e=>{e.each(e=>{e.visible&&ea(n,Math.floor(e.linear.left)).push(e)})});const a=Object.keys(n),r=a.length;if(r){let o=-1;for(let e=0;e<r;++e){const t=n[a[e]];if(0===e)o=r;else if(o!==t.length){o=-1;break}}if(-1!==o)s=Zs(a,e=>n[e]);else{const o=[];for(let e=0;e<r;++e){const t=n[a[e]],i=t.length;if(0===e&&0===i)return;o[e]=0===e?0:o[e-1];for(let n=0;n<i;++n){const a=t[n],{left:r,right:l}=a.linear;if(0===e||Qs(r,o[e-1])){const t=ea(s,e);if(0===e||s[0].length===i)t[n]=a;else{const e=na(s,a);if(-1===e)return;t[e]=a}}else{const e=s[s.length-1];if(e){let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(e.forEach(e=>{const n=e.linear;t=Math.min(n.left,t),i=Math.max(n.right,i)}),Math.floor(r)>Math.ceil(t)&&Math.floor(l)>Math.ceil(i)){const t=na(s,a);if(-1!==t){let i=s.length-1;while(i>=0){const n=s[i--];if(n){n[t]||(e.length=0);break}}}}}}o[e]=Math.max(l,o[e])}}const l=o.length;for(let e=0,t=-1;e<l;++e)s[e]?-1!==t&&(o[t]=o[e-1],t=-1):-1===t?t=e-1:e===l-1&&(o[t]=o[e]);for(let e=0;e<s.length;++e)(null===(t=s[e])||void 0===t?void 0:t.length)?i.push(o[e]):s.splice(e--,1);const c=s.reduce((e,t)=>Math.max(e,t.length),0);for(let e=0;e<c;++e){const t=s.length;let i=0;while(i<t){const t=s[i++];t[e]||(t[e]={spacer:1})}}i.push(e.box.right)}}const o=s.length;if(o>1&&s[0].length===e.length){const t=[],n=new Set;for(let e=0,a=0;e<o;++e){const r=s[e],l=r.length;for(let c=0,h=0,d=0;c<l;++c){const u=r[c],f=ea(t,c);if(u.spacer)1===u.spacer&&d++;else{const t=Object.assign(sa.createDataCellAttribute(),u.data(ia,"cellData"));let g=1,p=1+d,m=e+1;while(m<o){const e=s[m++][c];if(1!==e.spacer)break;p++,e.spacer=2}if(1===p){m=c+1;while(m<l){const e=r[m++];if(1!==e.spacer)break;g++,e.spacer=2}}if(i.length){const s=Math.min(e+(p-1),i.length-1);u.actualParent.naturalChildren.forEach(e=>{if(!n.has(e)&&e.visible&&!e.rendered){const{left:n,right:a}=e.linear;Qs(n,u.linear.right)&&Js(a,i[s])&&ea(t,"siblings").push(e)}})}t.rowSpan=g,t.columnSpan=p,t.rowStart=0==h++,t.rowEnd=p+e===o,t.cellStart=0==a++,t.cellEnd=t.rowEnd&&c===l-1,t.index=e,d=0,u.data(ia,"cellData",t),f.push(u),n.add(u)}}}e.each(e=>e.hide()),e.clear(),t.forEach(t=>t.forEach(t=>t.parent=e)),e.tableElement&&"collapse"===e.css("borderCollapse")&&e.resetBox(480),e.data(ia,"columnCount",o)}}}const aa=squared.lib,{convertListStyle:ra}=aa.css,{isNumber:oa}=aa.util,la=e=>e.backgroundImage&&!e.backgroundRepeat;class ca extends fn{condition(e){const t=e.length;if(t){const i=new Set;let n=true,s=true,a=true,r=true,o=false;const l=e.children;for(let e=0;e<t;++e){const c=l[e],h=c.css("listStyleType");if(("list-item"===c.display&&("none"!==h||c.innerBefore)||c.marginLeft<0&&"none"===h&&la(c.visibleStyle))&&(o=true),(a||r)&&(c.floating?(i.add(c.float),r=false):0===e||e===t-1||c.blockStatic||l[e-1].blockStatic&&l[e+1].blockStatic?a=false:(a=false,r=false)),c.blockStatic||(n=false),c.inlineVertical||(s=false),!(n||s||r||a))return false}return o&&(n||s||a&&1===i.size||r)}return false}processNode(e){const t="OL"===e.tagName;let i=t&&e.toElementInt("start")||1;e.each(e=>{const n=ca.createDataAttribute(),s=e.css("listStyleType"),a="list-item"===e.display;if(a||""!==s&&"none"!==s||la(e.visibleStyle)){if(e.has("listStyleImage"))n.imageSrc=e.css("listStyleImage");else{if(t&&a&&"LI"===e.tagName){const t=e.attributes.value;oa(t)&&(i=Math.floor(parseFloat(t)))}let r=ra(s,i);if(""===r)switch(s){case"disc":r="●";break;case"square":r="■";break;case"none":{let t="",i="";e.visibleStyle.backgroundRepeat||(t=e.backgroundImage,i=e.css("backgroundPosition")),""!==t&&"none"!==t&&(n.imageSrc=t,n.imagePosition=i,e.exclude({resource:Et.IMAGE_SOURCE}));break}default:r="○"}else r+=".";n.ordinal=r}a&&++i}e.data(yt.LIST,"mainData",n)})}}ca.createDataAttribute=()=>({ordinal:"",imageSrc:"",imagePosition:""});const ha=squared.lib,{assignRect:da}=ha.dom,{convertFloat:ua,withinRange:fa}=ha.util,ga={relative:true};const{getBackgroundPosition:pa,resolveURL:ma}=squared.lib.css,ba=/^0[a-z%]+|left|start|top/;const xa=squared.lib,{formatPercent:ya,formatPX:va,getInheritedStyle:Ea,getStyle:Sa,isLength:Ia,isPercent:wa}=xa.css,{getNamedItem:_a}=xa.dom,{maxArray:Ta}=xa.math,{isNumber:ka,replaceMap:Na,safeNestedArray:Aa,withinRange:Ca}=xa.util,Ra=yt.TABLE,Pa=/rgba\(0, 0, 0, 0\)|transparent/;function Ma(e,t,i){i.percent=Math.round(t.bounds.width/e.box.width*100)+"%",i.expand=true}function Ba(e,t,i){const n=t+"Style";e.ascend({including:i}).some(i=>{if(i.has(n)){const s=t+"Color",a=t+"Width";return e.css("border","inherit"),e.cssApply(i.cssAsObject(n,s,a)),e.unsetCache(a),true}return false})}function La(e){e.exclude({resource:Et.ALL}),e.hide()}const Fa=e=>e.css("width",va(e.bounds.width),true);class Wa extends fn{static createDataAttribute(e){return{layoutType:0,rowCount:0,columnCount:0,layoutFixed:"fixed"===e.css("tableLayout"),borderCollapse:"collapse"===e.css("borderCollapse"),expand:false}}processNode(e){const t=Wa.createDataAttribute(e),i=[];let n,s,a=[];const r=e=>{e&&(e.cascade(t=>{switch(t.tagName){case"TH":case"TD":t.inherit(e,"styleMap"),t.unsetCache("visibleStyle")}return false}),a=a.concat(e.children),La(e))};e.each(e=>{switch(e.tagName){case"THEAD":s?La(e):s=e;break;case"TBODY":i.push(e);break;case"TFOOT":n?La(e):n=e}}),r(s),i.forEach(e=>{a=a.concat(e.children),La(e)}),r(n);const o=e.hasWidth,l=t.borderCollapse,[c,h]=l?[0,0]:Na(e.css("borderSpacing").split(" "),(t,i)=>0===i?e.parseWidth(t):e.parseHeight(t)),d=c>1?Math.round(c/2):c,u=h>1?Math.round(h/2):h,f=e.element.querySelector("COLGROUP"),g=e.find(e=>"CAPTION"===e.tagName),p="bottom"===e.css("captionSide"),m=[],b=[],x=[],y=[],v=a.length;let E=0;for(let i=0;i<v;++i){const n=a[i];m[i]=c;const s=x[i]||[];x[i]=s,n.each((n,a)=>{const r=n.element,o=r.rowSpan;let l=r.colSpan,g=0;while(s[g])g++;const p=i+o;let E=i;while(E<p){const e=Aa(x,E++),t=g+l;for(let i=g,s=0;i<t;++i){if(e[i]){l=s;break}e[i]=n,s++}}if(!n.hasPX("width")){const e=_a(r,"width");wa(e)?n.css("width",e,true):ka(e)&&n.css("width",va(parseFloat(e)),true)}if(!n.hasPX("height")){const e=_a(r,"height");wa(e)?n.css("height",e):ka(e)&&n.css("height",va(parseFloat(e)))}if(""===n.cssInitial("verticalAlign")&&n.css("verticalAlign","middle",true),!n.visibleStyle.backgroundImage&&!n.visibleStyle.backgroundColor)if(f){const{backgroundImage:e,backgroundColor:t}=Sa(f.children[a+1]);e&&"none"!==e&&n.css("backgroundImage",e,true),t&&!Pa.test(t)&&(n.css("backgroundColor",t),n.setCacheValue("backgroundColor",t))}else{let e=Ea(r,"backgroundImage",/none/,"TABLE");""!==e&&n.css("backgroundImage",e,true),e=Ea(r,"backgroundColor",Pa,"TABLE"),""!==e&&(n.css("backgroundColor",e),n.setCacheValue("backgroundColor",e))}switch(n.tagName){case"TD":{const e=n.parent;0===n.borderTopWidth&&Ba(n,"borderTop",e),0===n.borderRightWidth&&Ba(n,"borderRight",e),0===n.borderBottomWidth&&Ba(n,"borderBottom",e),0===n.borderLeftWidth&&Ba(n,"borderLeft",e);break}case"TH":""===n.cssInitial("textAlign")&&n.css("textAlign","center"),0===n.borderTopWidth&&Ba(n,"borderTop",e),0===n.borderBottomWidth&&Ba(n,"borderBottom",e)}const S=n.cssInitial("width"),I=void 0===y[g]||"auto"===y[g],w=n.bounds.width;if(0===i||I||!t.layoutFixed)if(""===S||"auto"===S)void 0===y[g]?(y[g]=S||"0px",b[g]=0):i===v-1&&I&&0===b[g]&&(b[g]=w);else{const e=wa(S),t=Ia(y[g]);(I||w<b[g]||w===b[g]&&(t&&e||e&&wa(y[g])&&n.parseWidth(S)>=n.parseWidth(y[g])||t&&Ia(S)&&n.parseWidth(S)>n.parseWidth(y[g])))&&(y[g]=S),(I||1===r.colSpan)&&(b[g]=w)}(n.length||n.inlineText)&&(m[i]+=w+c),d>0&&(n.modifyBox(16,0===g?c:d),n.modifyBox(4,0===a?d:c)),u>0&&(n.modifyBox(2,0===i?h:u),n.modifyBox(8,i+o<v?u:h)),n.data(Ra,"cellData",{colSpan:l,rowSpan:o})}),La(n),E=Math.max(E,s.length)}e.hasPX("width",false)&&y.some(e=>wa(e))&&Na(y,(e,t)=>{if("auto"===e){const e=b[t];if(e>0)return va(e)}return e});let S=false,I=0;if(y.every(e=>wa(e))){if(y.reduce((e,t)=>e+parseFloat(t),0)>1){let e=100;Na(y,t=>{const i=parseFloat(t);return e<=0?t="0px":e-i<0&&(t=ya(e/100)),e-=i,t})}e.hasWidth||(t.expand=true),S=true}else if(y.every(e=>Ia(e))){const i=y.reduce((e,t)=>e+parseFloat(t),0);e.hasWidth&&(i<e.width?Na(y,e=>"0px"!==e?parseFloat(e)/i*100+"%":e):i>e.width&&(e.css("width","auto"),t.layoutFixed||e.cascade(e=>(e.css("width","auto"),false)))),t.layoutFixed&&!e.hasPX("width")&&e.css("width",va(e.bounds.width))}t.layoutType=(()=>{if(y.length>1){if(I=y.reduce((e,t)=>e+(wa(t)?parseFloat(t):0),0),t.layoutFixed&&y.reduce((e,t)=>e+(Ia(t)?parseFloat(t):0),0)>=e.actualWidth)return 4;if(y.length>1&&y.some(e=>wa(e))||y.every(e=>Ia(e)&&"0px"!==e))return 3;if(y.every(e=>e===y[0])){if(e.find(e=>e.hasHeight,{cascade:true}))return t.expand=true,3;if("auto"===y[0]){if(e.hasWidth)return 3;{const t=e.cascade(e=>"TD"===e.tagName);return t.length&&t.every(e=>Ca(e.bounds.width,t[0].bounds.width))?0:3}}if(e.hasWidth)return 2}if(y.every(e=>"auto"===e||Ia(e)&&"0px"!==e))return e.hasWidth||(t.expand=true),1}return 0})(),e.clear(),g&&(g.hasWidth||(g.textElement?g.hasPX("maxWidth")||g.css("maxWidth",va(g.bounds.width)):g.bounds.width>Ta(m)&&Fa(g)),g.cssInitial("textAlign")||g.css("textAlign","center"),g.data(Ra,"cellData",{colSpan:E}),p||(g.parent=e));let w=0;while(w<v){const i=x[w++],n=i.length;let s=0;while(s<n){const n=i[s],a=n.data(Ra,"cellData"),r=y[s];if(s+=a.colSpan,!a.placed){if(r)switch(t.layoutType){case 0:break;case 3:"auto"===r?I>=1?(Fa(n),a.exceed=!o,a.downsized=true):Ma(e,n,a):wa(r)?S?(a.percent=r,a.expand=true):Fa(n):Ia(r)&&parseInt(r)>0?n.bounds.width>=parseInt(r)?(Fa(n),a.expand=false,a.downsized=false):t.layoutFixed?(Ma(e,n,a),a.downsized=true):(Fa(n),a.expand=false):(n.hasPX("width",false)&&!n.percentWidth||Fa(n),a.expand=false);break;case 2:Ma(e,n,a);break;case 1:"auto"===r?a.flexible=true:(t.layoutFixed?a.downsized=true:Fa(n),a.expand=false);break;case 4:Ia(r)||n.hide()}a.placed=true,n.parent=e}}if(n<E){const e=i[n-1].data(Ra,"cellData");e&&(e.spaceSpan=E-n)}}if(g&&p&&(g.parent=e),t.borderCollapse){const t=e.cssAsObject("borderTopColor","borderTopStyle","borderTopWidth"),i=e.cssAsObject("borderRightColor","borderRightStyle","borderRightWidth"),n=e.cssAsObject("borderBottomColor","borderBottomStyle","borderBottomWidth"),s=e.cssAsObject("borderLeftColor","borderLeftStyle","borderLeftWidth"),a=parseInt(t.borderTopWidth),r=parseInt(i.borderRightWidth),o=parseInt(n.borderBottomWidth),l=parseInt(s.borderLeftWidth);let c=false,h=false,d=false,u=false;for(w=0;w<v;++w){const e=x[w];for(let f=0;f<E;++f){const g=e[f];if("visible"===(null==g?void 0:g.css("visibility"))){if(0===w&&(g.borderTopWidth<a?(g.cssApply(t),g.unsetCache("borderTopWidth")):c=true),w>=0&&w<v-1){const e=x[w+1][f];"visible"===(null==e?void 0:e.css("visibility"))&&e!==g&&(g.borderBottomWidth>e.borderTopWidth?e.css("borderTopWidth","0px",true):g.css("borderBottomWidth","0px",true))}if(w===v-1&&(g.borderBottomWidth<o?(g.cssApply(n),g.unsetCache("borderBottomWidth")):d=true),0===f&&(g.borderLeftWidth<l?(g.cssApply(s),g.unsetCache("borderLeftWidth")):u=true),f>=0&&f<E-1){const t=e[f+1];"visible"===(null==t?void 0:t.css("visibility"))&&t!==g&&(g.borderRightWidth>=t.borderLeftWidth?t.css("borderLeftWidth","0px",true):g.css("borderRightWidth","0px",true))}f===E-1&&(g.borderRightWidth<r?(g.cssApply(i),g.unsetCache("borderRightWidth")):h=true)}}}(c||h||d||u)&&e.cssApply({borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"},true)}t.rowCount=v+(g?1:0),t.columnCount=E,e.data(Ra,"mainData",t)}}const Oa=squared.lib,{isLength:Va}=Oa.css,{convertFloat:Da}=Oa.util;var Ha;const Xa=squared.lib,{formatPX:Ya}=Xa.css,{maxArray:Ua}=Xa.math,{getElementCache:za}=Xa.session,{iterateReverseArray:Ga}=Xa.util,ja="html"===(null===(Ha=document.doctype)||void 0===Ha?void 0:Ha.name),qa=["marginTop","borderTopWidth","paddingTop",2],$a=["marginBottom","borderBottomWidth","paddingBottom",8];function Ka(e,t,i,n=0){let s;switch(t){case 2:s=e.actualRect("top")-i;break;case 16:s=e.actualRect("left")-i;break;case 8:s=i-e.actualRect("bottom");break;default:s=0}s-=n,s>0&&(e.renderAs||e).modifyBox(t,s)}function Qa(e,t,i){if(!i||Ja(t,true)){const[n,s,a,r]=i?qa:$a;if(0===e[s])if(0===e[a]){let o=t;while(ja&&0===o[n]&&0===o[s]&&0===o[a]&&sr(o))if(i){const e=o.firstStaticChild;if(!Ja(e,i))break;o=e}else{const e=er(o);if(!e)break;o=e}const l=e[n],c=o[n],h=(e,t)=>{if(1===e.getBox(r)[0]){const i=e.registerBox(r);if(i){const[e,n]=i.getBox(r);return t=Math.max(n,t),void(1===e?i.setBox(r,{adjustment:t}):i.setCacheValue("marginTop",t))}}e.setBox(r,{reset:1,adjustment:t})};if(l>=0&&c>=0){const s=o.bounds.height;let a=false;if(!ja&&0===l&&c>0&&""===o.cssInitial(n))a=true;else{const n=l>=c;if(0===s&&n&&o.textEmpty&&0===o.extensions.length)o.hide({collapse:true});else{const s=o.registerBox(r);if(s){const t=s.getBox(r)[1];t>0&&(t>l&&h(e,t),s.setBox(r,{reset:1,adjustment:0}))}else if(0===o.getBox(r)[0])if(n)a=c>0;else if(e.documentBody){if(ir(e,r),i&&(e.bounds.top>0&&(e.bounds.top=0,e.unset("box"),e.unset("linear")),e.layoutVertical)){const i=e.renderChildren[0];(o.positionStatic||o.top>=0&&!o.hasPX("bottom"))&&i!==t.outerMostWrapper&&(h(i,c),h(o,0),a=true)}}else h(e,c),a=true}}if(a){if(ir(o,r),!i&&o.floating){const e=o.bounds;o.actualParent.naturalChildren.forEach(t=>{t.floating&&t!==o&&t.intersectY(e,"bounds")&&ir(t,r)})}0!==s||o.every(e=>e.floating||!e.pageFlow)||ir(o,i?8:2)}}else l<0&&c<0&&(i||(c<l&&h(e,c),ir(o,r)))}else if(0===t[n]&&0===t[s]&&sr(t)){let r=true;do{const o=i?t.firstStaticChild:t.lastStaticChild;if(!o||0!==o[n]||0!==o[s]||o.visibleStyle.background||!sr(o))break;{const n=o[a];if(n>0){n>=e[a]?e.setBox(i?32:128,{reset:1}):r&&e.modifyBox(i?32:128,-n,false);break}Ja(o,i)||(r=false),t=o}}while(true)}}}function Ja(e,t){if(null===e||!e.styleElement||e.lineBreak)return false;if(e.blockStatic)return true;if(!e.floating){switch(e.display){case"table":case"list-item":return true}if(void 0!==t){if(t){const t=e.firstStaticChild;return Ja(t)&&ar(t,false)}{const t=e.lastStaticChild;return Ja(t)&&rr(t,false)}}}return false}function Za(e,t,i,n){let s=Number.POSITIVE_INFINITY;if(e.nodeGroup&&e.some(e=>e.floating)&&e.renderChildren.forEach(t=>{if(!t.floating){const i=t.linear.top;i<s&&(s=i,e=t)}}),s===Number.POSITIVE_INFINITY&&(s=e.linear.top),n){const a=Math.max(n.linear.top,t.linear.bottom);if(a<s)return[s-a-i,e]}return[Math.round(s-t.linear.bottom-i),e]}function er(e){let t;if(e.floatContainer){let i;const n=e.naturalChildren;let s=n.length-1;while(s>=0){const a=n[s--];if(a.floating)if(t){if(a.linear.bottom>=t.linear.bottom){t=a;break}}else{const t=a.linear.bottom;i?t>i.linear.bottom&&(i=a):Math.ceil(a.linear.bottom)>=e.box.bottom&&(i=a)}else if(!t){if(i&&i.linear.bottom>a.linear.bottom){t=i;break}t=a}}t||(t=i)}else t=e.lastStaticChild,(!Ja(e,false)||e.hasHeight&&Math.floor(t.linear.bottom)<e.box.bottom)&&(t=void 0);return t}function tr(e){for(const t of[e.cssInitial("overflowX"),e.cssInitial("overflowY")])switch(t){case"auto":case"hidden":case"overlay":return true}return false}function ir(e,t,i){e.setBox(t,{reset:1}),i&&e.registerBox(t,i)}const nr=(e,t)=>e.css("minHeight",Ya(Math.max(t,e.hasPX("minHeight",false)?e.parseHeight(e.css("minHeight")):0))),sr=(e,t=true)=>(!t&&e.blockStatic||t&&e.length>0&&!e.floating)&&!e.layoutElement&&!e.tableElement&&"FIELDSET"!==e.tagName,ar=(e,t)=>!e.hasHeight&&0===e.borderBottomWidth&&0===e.paddingBottom&&sr(e,t),rr=(e,t)=>!e.hasHeight&&0===e.borderTopWidth&&0===e.paddingTop&&sr(e,t);const or={Accessibility:class lr extends fn{},Column:class cr extends fn{is(e){return e.blockDimension&&"table"!==e.display&&!e.layoutElement&&e.length>1}condition(e){return e.has("columnCount")||e.hasPX("columnWidth")}processNode(e,t){let i=[];const n=[i];let s=Number.POSITIVE_INFINITY,a=false;e.each(e=>{var t;"all"===e.css("columnSpan")?(i.length?n.push([e]):i.push(e),i=[],n.push(i)):(e.textElement&&(null===(t=e.textBounds)||void 0===t?void 0:t.overflow)&&(s=NaN),e.multiline?a=true:isNaN(s)||(s=Math.min(e.bounds.width,s)),i.push(e))}),0===i.length&&n.pop();const[r,o,l]=e.cssAsTuple("columnRuleStyle","columnRuleWidth","columnRuleColor"),c=e.box.width,h=e.toInt("columnCount"),d=e.parseWidth(e.css("columnWidth"));let u,f=e.parseWidth(e.css("columnGap"));const g=()=>isNaN(h)&&d>0?c/(d+f):Number.POSITIVE_INFINITY;f>0?u=Math.floor(g()):(f=(d>0&&!isNaN(s)&&s!==Number.POSITIVE_INFINITY?Math.max(s-d,0):0)+16,u=Math.ceil(g())),e.data(yt.COLUMN,"mainData",{rows:n,columnCount:h,columnWidth:d,columnGap:f,columnSized:u,columnRule:{borderLeftStyle:r,borderLeftWidth:o,borderLeftColor:l},boxWidth:t.actualBoxWidth(c),multiline:a})}},CssGrid:Gs,Flexbox:$s,Grid:sa,List:ca,Relative:class hr extends fn{is(e){return e.positionRelative&&!e.autoPosition||0!==ua(e.verticalAlign)}condition(){return true}processNode(e){return{subscribe:true}}postOptimize(e){const t=e.renderParent,i=e.baselineAltered?0:ua(e.verticalAlign);let n=0,s=0,a=0,r=0;if(e.hasPX("top")?n=e.top:a=e.bottom,e.hasPX("left")?r=e.left:s=e.right,t.support.positionTranslation){let t=0,o=0;0!==r?t=r:0!==s&&(t=-s),0!==n?o=n:0!==a&&(o=-a),0!==i&&(o-=i),0!==t&&e.translateX(t,ga),0!==o&&e.translateY(o,ga)}else{let o=e;if((0!==n||0!==a||0!==i)&&t.layoutHorizontal&&t.support.positionRelative&&0===e.renderChildren.length){const i=this.application;o=e.clone(i.nextId,true,true),o.baselineAltered=true,e.hide({hidden:true}),this.cache.append(o,false);const n=new Qt(t,o,o.containerType,o.alignmentType),s=t.renderChildren.findIndex(t=>t===e);if(-1!==s&&(n.renderIndex=s+1),i.addLayout(n),e.parseUnit(e.css("textIndent"))<0){const i=e.documentId;t.renderEach(e=>{e.alignSibling("topBottom")===i?e.alignSibling("topBottom",o.documentId):e.alignSibling("bottomTop")===i&&e.alignSibling("bottomTop",o.documentId)})}if(e.baselineActive&&!e.baselineAltered)for(const i of t.horizontalRows||[t.renderChildren])if(i.includes(e)){const t=i.filter(t=>t.positionRelative&&t.length>0&&0!==ua(e.verticalAlign)),n=t.length;if(n){t.sort((e,t)=>{const i=e.linear.top,n=t.linear.top;return fa(i,n)?0:i<n?-1:1});let i=true,s=0;while(s<n){const n=t[s++];i?(e.modifyBox(2,ua(n.verticalAlign)),i=false):n.modifyBox(2,n.linear.top-t[0].linear.top),n.setCacheValue("verticalAlign","0px")}}break}}else if(e.positionRelative&&e.naturalElement){const i=e.bounds,o=0!==n||0!==a,l=0!==r||0!==s;let c,h=false;const d=e.actualParent.naturalChildren,u=d.length;let f=0;while(f<u){const u=d[f++];if(u===e){if(h){if(o&&t.layoutVertical){const t=da(e.boundingClientRect);0!==n?n-=t.top-i.top:(null==c?void 0:c.positionRelative)&&c.hasPX("top")?a+=i.bottom-t.bottom:a+=t.bottom-i.bottom}if(l&&t.layoutHorizontal&&!e.alignSibling("leftRight")){const t=da(e.boundingClientRect);0!==r?r-=t.left-i.left:(null==c?void 0:c.positionRelative)&&c.hasPX("right")?s+=i.right-t.right:s+=t.right-i.right}}else if(t.layoutVertical)if(0!==n)(null==c?void 0:c.blockStatic)&&c.positionRelative&&u.blockStatic&&(n-=c.top);else if(0!==a){1===u.getBox(2)[0]&&(a-=u.marginTop)}break}u.positionRelative&&u.renderParent===t&&(h=true),u.pageFlow&&(c=u)}}0!==i&&o.modifyBox(2,-1*i),0!==n?o.modifyBox(2,n):0!==a&&o.modifyBox(2,-1*a),0!==r?o.autoMargin.left?o.modifyBox(4,-1*r):o.modifyBox(16,r):0!==s&&o.modifyBox(16,-1*s),o!==e&&o.setBoxSpacing()}}},Sprite:class dr extends fn{is(e){return 0===e.length&&e.hasWidth&&e.hasHeight}condition(e){const t=e.backgroundImage;if(""!==t&&(this.included(e.element)||!e.dataset.use)){const i=this.resource.getRawData(t)||this.resource.getImage(ma(t));if(i){const t=e.actualDimension,{backgroundPositionX:n,backgroundPositionY:s}=e.cssAsObject("backgroundPositionX","backgroundPositionY"),a=pa(n+" "+s,t,{fontSize:e.fontSize,screenDimension:e.localSettings.screenDimension}),r=(a.left<0||ba.test(n))&&i.width>t.width,o=(a.top<0||ba.test(s))&&i.height>t.height;if((r||o)&&(r||0===a.left)&&(o||0===a.top))return e.data(yt.SPRITE,"mainData",{image:i,position:a}),true}}return false}},Table:Wa,VerticalAlign:class ur extends fn{is(e){return e.length>0}condition(e){let t=false,i=0,n=0;const s=e.children,a=s.length;let r=0;while(r<a){const e=s[r++];if(!(e.positionStatic||e.positionRelative&&e.length))return false;if(e.inlineVertical){const s=Da(e.verticalAlign);0!==s&&(t=true),isNaN(n)||(0===n?n=s:n!==s&&(n=NaN)),i++}else n=NaN}return t&&isNaN(n)&&i>1&&$t.linearData(e.children).linearX}processNode(e){return e.each(e=>{(e.inlineVertical&&Va(e.verticalAlign)||e.imageElement||e.svgElement)&&(e.baselineAltered=true)}),{subscribe:true}}postConstraints(e){if(e.layoutHorizontal)for(const t of e.horizontalRows||[e.renderChildren]){const e=[];let i,n=Number.POSITIVE_INFINITY;if(t.forEach(t=>{const s=t.linear.top;t.inlineVertical&&s<=n&&(s<n&&(e.length=0),e.push(t),n=s),t.baselineActive&&(i=t)}),e.length){const n=e[0],s=n.linear.top;t.forEach(t=>{t!==i&&(t.inlineVertical&&(e.includes(t)?i&&(t.imageElement||t.svgElement)&&i.documentId===t.alignSibling("baseline")&&t.setBox(2,{reset:1,adjustment:i.linear.top-t.linear.top}):!Va(t.verticalAlign)&&i||(t.setBox(2,{reset:1,adjustment:t.linear.top-s}),t.baselineAltered=true)),t.baselineAltered&&t.setCacheValue("verticalAlign","0px"))}),i&&(i.setBox(2,{reset:1,adjustment:i.linear.top-s+Math.min(0,n.parseHeight(n.cssInitial("verticalAlign")))}),i.baselineAltered=true)}}else e.each(e=>e.baselineAltered=false)}},WhiteSpace:class fr extends fn{afterBaseLayout(){const e=this.application,t=new Set,i=e.session.clearMap;this.cacheProcessing.each(e=>{var n,s;if(e.naturalElement&&!e.hasAlign(4)){const a=e.naturalChildren,r=a.length;if(0===r)return;const o=e.pageFlow,l=o&&Ja(e,true)&&!e.actualParent.layoutElement;let c,h;for(let o=0;o<r;++o){const d=a[o];if(d.pageFlow&&(l&&(d.floating?h?d.linear.bottom>=h.linear.bottom&&(h=d):h=d:(c||(c=d),h=d)),Ja(d,true)))if(o>0){const a=d.previousSiblings({floating:false}),l=a.length;if(l){let h=false;const u=a[l-1];if(Ja(u,false)){let e=u.marginBottom,s=d.marginTop;if(u.marginTop<0&&0===u.bounds.height){const i=Math.min(e,u.marginTop);if(i<0){Math.abs(i)<s?d.modifyBox(2,i):ir(d,2),t.add(u.id),u.hide({collapse:true});continue}}else if(d.marginBottom<0&&0===d.bounds.height){const i=Math.min(s,d.marginBottom);if(i<0){Math.abs(i)<e?u.modifyBox(8,i):ir(u,8),t.add(d.id),d.hide({collapse:true});continue}}let a=false,r=u;while(ar(r,true)){let t=er(r);if(0===(null==t?void 0:t.getBox(8)[0])){let i=t.marginBottom,n=t;while(0===n.bounds.height&&!n.pseudoElement){const e=n.marginTop;i=Math.max(e,n.marginBottom,i),0!==e&&ir(n,2);const s=n.previousSibling;if(!s)break;if(s.marginBottom>=i)0!==n.marginBottom&&ir(n,8),t=s,i=s.marginBottom,n=s;else{if(s.bounds.height>0)break;0!==s.marginBottom&&ir(s,8),n=s}}if(0!==i&&ir(t,8,0===u.getBox(8)[0]?u:void 0),i>e)e=i,a=true;else if(0===i&&0===e){r=t;continue}}break}r=d;while(rr(r,true)){let e=r.firstStaticChild;if(Ja(e,true)&&0===e.getBox(2)[0]){let t=e.marginTop,i=e;while(0===i.bounds.height&&!i.pseudoElement){const n=i.marginBottom;t=Math.max(i.marginTop,n,t),0!==n&&ir(i,8);const s=i.nextSibling;if(!s)break;if(s.marginTop>=t)0!==i.marginTop&&ir(i,2),e=s,t=s.marginTop,i=s;else{if(s.bounds.height>0)break;0!==s.marginTop&&ir(s,2),i=s}}if(0!==t&&ir(e,2,0===d.getBox(2)[0]?d:void 0),t>s)s=t,h=true;else if(0===t&&0===s){r=e;continue}}break}if(e>0&&(s>0?s<=e?h&&tr(d)||(ir(d,2),0===d.bounds.height&&e>=d.marginBottom&&ir(d,8),h=false):a&&tr(u)||(ir(u,8),0===u.bounds.height&&s>=u.marginTop&&ir(u,2),a=false):0===d.bounds.height&&(s=Math.min(s,d.marginBottom),s<0&&(u.modifyBox(8,s),d.hide({collapse:true})))),s>0&&u.floatContainer&&0===d.getBox(2)[1]&&!tr(u)){let e=false;if(0===u.bounds.height)e=true;else{let t;if(Ga(u.naturalElements,e=>!!i.has(e)||(e.floating?(e.linear.bottom>Math.ceil(u.bounds.bottom)&&(t=e.float),true):void 0)),t){const i=null===(n=za(u.element,"styleMap::after",u.sessionId))||void 0===n?void 0:n.clear;e=!("both"===i||i===t)}}e&&d.modifyBox(2,u.box.top-Ua(u.naturalElements.map(e=>e.linear.bottom)),false)}if(h){let e=0;if(0===u.bounds.height){const t=u.previousSibling;e=t&&Ja(t,false)?Math.max(t.getBox(8)[1],t.marginBottom):0}s>e&&(d.registerBox(2)||d).setCacheValue("marginTop",s)}if(a){let t=0;if(0===d.bounds.height){const e=d.nextSibling;t=e&&Ja(e,true)?Math.max(e.getBox(2)[1],e.marginTop):0}e>=t&&(u.registerBox(8)||u).setCacheValue("marginBottom",e)}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;e>0&&t>0&&(e<t?ir(d,2):o===r-1?(d.setCacheValue("marginBottom",e),ir(d,2)):ir(d,8))}if(!h&&d!==c&&a.length>1&&(e.layoutVertical||(null===(s=d.renderParent)||void 0===s?void 0:s.layoutVertical))){const e=a.pop();e.floating&&Math.floor(e.bounds.top)===Math.floor(d.bounds.top)&&d.modifyBox(2,-e.bounds.height,false)}}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;e>0&&t>0&&(e<t&&d.setCacheValue("marginTop",t),ir(d,8))}}if(o&&!tr(e)&&"FIELDSET"!==e.tagName&&((null==c?void 0:c.naturalElement)&&Qa(e,c,true),(null==h?void 0:h.naturalElement)&&(Qa(e,h,false),h.marginTop<0))){const t=h.bounds.height+h.marginBottom+h.marginTop;t<0&&e.modifyBox(128,t,false)}}}),e.processing.excluded.each(e=>{if(e.lineBreak&&!e.lineBreakTrailing&&!i.has(e)&&!t.has(e.id)){let i=false;const n=e.previousSiblings({floating:false});if(n.length){const s=e.actualParent,a=e.nextSiblings();if(a.length){let r,o,l=n.pop(),c=a.pop(),h=0;if(l.rendered&&c.rendered){const a=l.inlineStatic&&c.inlineStatic;if(a&&0===n.length)return void t.add(e.id);if(!l.multiline&&l.has("lineHeight")){const e=Math.floor((l.lineHeight-l.bounds.height)/2);e>0&&(h+=e)}if(!c.multiline&&c.has("lineHeight")){const e=Math.round((c.lineHeight-c.bounds.height)/2);e>0&&(h+=e)}a&&(r=n[0],1===n.length&&(r=r.lineBreak?e:void 0),null==r||r.setBounds(false));let d=l.renderParent,u=c.renderParent;if(d!==u){while(d&&d!==s)l=d,d=l.renderParent;while(u&&u!==s)c=u,u=c.renderParent}[o,c]=Za(c,l,h,r),o>=1&&(c.visible?(c.modifyBox(2,o),i=true):l.visible&&(l.modifyBox(8,o),i=true))}else[o,c]=Za(c,l,h),o>=1&&((c.lineBreak||c.excluded)&&s.lastChild===c?(s.modifyBox(128,o),i=true):(l.lineBreak||l.excluded)&&s.firstChild===l&&(s.modifyBox(32,o),i=true))}else if(s.visible&&!s.preserveWhiteSpace&&"CODE"!==s.tagName){if(s.originalRoot){if(a.length){const e=a[a.length-1],t=(e.lineBreak||e.excluded?e.linear.bottom:e.linear.top)-s.box.top;0!==t&&(e.rendered||s.visibleStyle.background?s.modifyBox(32,t):s.hasHeight||nr(s,t))}}else{const e=n[n.length-1],t=0===e.bounds.height&&e.length?$t.outerRegion(e):e.linear,i=s.box.bottom-(e.lineBreak||e.excluded?t.top:t.bottom);0!==i&&(e.rendered||s.visibleStyle.background?s.modifyBox(128,i):s.hasHeight||nr(s,i))}i=true}i&&(n.forEach(e=>t.add(e.id)),a.forEach(e=>t.add(e.id)))}}})}afterConstraints(){this.cacheProcessing.each(e=>{if(e.naturalChild&&e.styleElement&&e.inlineVertical&&e.pageFlow&&!e.positioned&&!e.actualParent.layoutElement){const t=e.outerMostWrapper,i=t.renderParent;if(false===(null==i?void 0:i.hasAlign(4))){if(e.blockDimension&&!e.floating)if(i.layoutVertical){const n=i.renderChildren,s=n.findIndex(e=>e===t);if(-1!==s){if(!e.lineBreakLeading&&!e.baselineAltered){const e=n[s-1];(null==e?void 0:e.pageFlow)&&Ka(t,2,e.actualRect("bottom"),e.getBox(8)[1])}if(!e.lineBreakTrailing){const e=n[s+1];(null==e?void 0:e.pageFlow)&&e.styleElement&&!e.inlineVertical&&Ka(t,8,e.actualRect("top"),e.getBox(2)[1])}}}else if(!e.baselineAltered){const n=i.horizontalRows,s=e=>e.pageFlow&&e.blockDimension&&!e.floating;let a;if(n&&n.length>1)e:{let e=Number.NEGATIVE_INFINITY;const i=n.length;for(let r=0;r<i;++r){const i=n[r],o=i.length;let l=0;while(l<o)if(t===i[l++]){r>0?Ka(t,2,e):a=i;break e}if(i.forEach(t=>{const i=t.innerMostWrapped;s(i)&&(e=Math.max(i.actualRect("bottom"),e))}),e===Number.NEGATIVE_INFINITY)break}}else(i.layoutHorizontal||i.hasAlign(1024))&&(a=i.renderChildren);if(a){let i=[];a.forEach(e=>{e.nodeGroup?i=i.concat(e.cascade(e=>e.naturalChild)):e.innerWrapped?i.push(e.innerMostWrapped):i.push(e)});let n=Number.NEGATIVE_INFINITY;const r=e.actualParent,o=e.actualRect("top"),l=r.naturalChildren,c=l.length;let h=0;while(h<c){const e=l[h++];if(i.includes(e))break;if(e.lineBreak||e.block)n=Number.NEGATIVE_INFINITY;else{if(e.excluded)continue;s(e)&&(n=Math.max(e.actualRect("bottom"),n))}}n!==Number.NEGATIVE_INFINITY&&o>n&&Ka(t,2,n)}}if(!i.layoutVertical&&!t.alignParent("left")){const n=t.alignSibling("leftRight");if(""!==n){const e=i.renderChildren.find(e=>e.documentId===n);(null==e?void 0:e.inlineVertical)&&Ka(t,16,e.actualRect("right"))}else{let i=e;while(true){const e=i.siblingsLeading;if(e.length&&!e.some(e=>e.lineBreak||e.excluded&&e.blockStatic)){const n=e[0];if(n.inlineVertical)Ka(t,16,n.actualRect("right"));else if(n.floating){i=n;continue}}break}}}}}if(e.floatContainer&&e.layoutVertical){const t=[];e.naturalChildren.forEach(i=>{if(i.pageFlow)if(i.floating)t.push(i);else if(t.length){const n=i.outerMostWrapper;let s=n.renderParent;if(s){const[a,r]=i.getBox(2);if((0===a?i.marginTop:0)+r>0){const i=Math.floor(e.bounds.top),a=t.length;let r=0;while(r<a){const a=t[r++];if(i<=Math.floor(a.bounds.top)){let t=a.outerMostWrapper.renderParent;if(t){s=s.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||s,t=t.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||t,s!==t&&n.modifyBox(2,-1*(t!==e?t:a).linear.height,false);break}}}}}t.length=0}})}})}}},gr={constant:It,enumeration:wt};e.Application=G,e.ApplicationUI=class pr extends G{constructor(e,i,n,s,a){super(e,i,n,s,a),this.session={cache:new t,excluded:new t,extensionMap:new Map,clearMap:new Map,active:[],targetQueue:new Map},this.builtInExtensions={},this.extensions=[],this._layouts=[];const r=this.controllerHandler.localSettings;this._controllerSettings=r,this._excluded=r.unsupported.excluded}finalize(){if(this.closed)return;const{controllerHandler:e,session:t}=this,i=t.cache,n=this.extensions,s=this._layouts;for(const[e,n]of t.targetQueue.entries()){const t=this.resolveTarget(e.dataset.target);t?(e.render(t),this.addLayoutTemplate(t,e,n)):e.renderParent||i.remove(e)}const a=i.children,r=a.length,o=new Array(r);let l=0,c=0;while(l<r){const e=a[l++];e.renderParent&&e.visible&&(e.hasProcedure(St.LAYOUT)&&e.setLayout(),e.hasProcedure(St.ALIGNMENT)&&e.setAlignment(),o[c++]=e)}o.length=c,e.optimize(o),n.forEach(e=>{for(const t of e.subscribers)e.postOptimize(t)});const h=[];l=0;while(l<c){const e=o[l++];if(e.hasResource(Et.BOX_SPACING)&&e.setBoxSpacing(),e.documentRoot){if(0===e.renderChildren.length&&!e.inlineText){const t=e.naturalElements;if(t.length&&t.every(e=>e.documentRoot))continue}const t=e.innerMostWrapped.data(G.KEY_NAME,"layoutName");t&&h.push({node:e,layoutName:t})}}n.forEach(e=>e.beforeCascade(h));const d=this._controllerSettings.layout.baseTemplate;h.forEach(t=>{var i;const n=t.node,s=n.renderParent.renderTemplates;s&&this.saveDocument(t.layoutName,d+e.cascadeDocument(s,Math.abs(n.depth)),n.dataset.pathname,(null===(i=n.renderExtension)||void 0===i?void 0:i.some(e=>e.documentBase))?0:void 0)}),this.resourceHandler.finalize(s),e.finalize(s),n.forEach(e=>e.afterFinalize()),li("__squared.pseudo"),this.closed=true}copyToDisk(e,t){super.copyToDisk(e,this.createAssetOptions(t))}appendToArchive(e,t){super.appendToArchive(e,this.createAssetOptions(t))}saveToArchive(e,t){super.saveToArchive(e,this.createAssetOptions(t))}reset(){super.reset();for(const e of this.rootElements)e.dataset.iteration="";const e=this.session;e.cache.reset(),e.excluded.reset(),e.extensionMap.clear(),e.targetQueue.clear(),this._layouts.length=0}conditionElement(e,t){if(!this._excluded.has(e.tagName)){if(this.controllerHandler.visibleElement(e,t)||this._cascadeAll)return true;if(!t){switch(ni(e).position){case"absolute":case"fixed":return this.useElement(e)}let t=e.parentElement;while(t){if("none"===ni(t).display)return this.useElement(e);t=t.parentElement}const i=this.controllerHandler;return bi(e.children,e=>i.visibleElement(e))===Number.POSITIVE_INFINITY||this.useElement(e)}}return false}insertNode(e,t,i){if(!oi(e)){if(this.conditionElement(e,i))return this.controllerHandler.applyDefaultStyles(e),this.createNode({parent:t,element:e,append:false});{const i=this.createNode({parent:t,element:e,append:false});return i.visible=false,i.excluded=true,i}}if(ki(e.textContent)||(null==t?void 0:t.preserveWhiteSpace)&&("PRE"!==t.tagName||0===t.element.childElementCount)){this.controllerHandler.applyDefaultStyles(e);const i=this.createNode({parent:t,element:e,append:false});return t&&(i.cssApply(t.textStyle),i.setCacheValue("fontSize",t.fontSize)),i}}saveDocument(e,t,i,n){if(mi(t)){const s={pathname:i?Si(i,"/"):hi(this.userSettings.outputDirectory,this._controllerSettings.layout.pathName),filename:e,content:t,index:n},a=this._layouts;void 0!==n&&n>=0&&n<a.length?a.splice(n,0,s):a.push(s)}}renderNode(e){return 0===e.itemCount?this.controllerHandler.renderNode(e):this.controllerHandler.renderNodeGroup(e)}addLayout(e){const t=e.renderType;if(gi(t,512)&&(gi(t,8)?e=this.processFloatHorizontal(e):gi(t,16)&&(e=this.processFloatVertical(e))),0!==e.containerType){const t=this.renderNode(e);if(t)return this.addLayoutTemplate(t.parent||e.parent,e.node,t,e.renderIndex)}return false}addLayoutTemplate(e,t,i,n=-1){if(i){if(t.renderExclude)t.hide({remove:true}),t.excluded=true;else if(t.renderParent){const s=yi(e,"renderTemplates");n>=0&&n<e.renderChildren.length?(e.renderChildren.splice(n,0,t),s.splice(n,0,i)):(e.renderChildren.push(t),s.push(i))}else this.session.targetQueue.set(t,i);return true}return false}createNode(e){const t=this.processing,{element:i,parent:n,children:s}=e,a=new this.Node(this.nextId,t.sessionId,i,this.controllerHandler.afterInsertNode);if(n){a.depth=n.depth+1,!n.naturalElement||i&&null!==i.parentElement||(a.actualParent=n);const t=e.replace;t&&n.appendTry(t,a,false)&&(t.parent=a,a.innerWrapped=t)}return null==s||s.forEach(e=>e.parent=a),false!==e.append&&t.cache.append(a,true===e.delegate,true===e.cascade),a}createCache(e){const t=this.createRootNode(e);if(t){const e=this.controllerHandler,i=this._cache,n=t.parent,s={},a=new Set,r=[];let o=false;if(t.documentBody&&(n.naturalChild=true,n.setCacheValue("naturalElement",true),n.visible=false,n.addAlign(4),n.exclude({resource:Et.FONT_STYLE|Et.VALUE_STRING,procedure:St.ALL}),i.append(n)),t.originalRoot=true,t.documentParent=n,i.each(e=>{if(e.styleElement){const t=e.element;if(e.length){const i=e.cssInitial("textAlign");switch(i){case"center":case"right":case"end":Ai(s,t,e.id,"text-align","left",i)}}e.positionRelative&&Zt.forEach(i=>{e.hasPX(i)&&Ai(s,t,e.id,i,"auto",e.css(i))}),"rtl"===e.dir&&(t.dir="ltr",a.add(t),o=true)}}),this.processing.excluded.each(e=>{e.pageFlow||e.cssTry("display","none")}),i.each(e=>{e.pseudoElement?r.push(e):e.setBounds(void 0===s[e.id]&&!o)}),r.length){const e=[];r.forEach(t=>{const i=t.actualParent.element;let n,s=i.id;t.pageFlow&&(""===s&&(s="__squared_"+Math.round(Math.random()*(new Date).getTime()),i.id=s),n=si(`#${s+_i(t.element,t.sessionId)} { display: none !important; }`)),t.cssTry("display",t.display)&&e.push({item:t,id:s,parentElement:i,styleElement:n})}),e.forEach(e=>e.item.setBounds(false)),e.forEach(e=>{const t=e.styleElement;if(e.id.startsWith("__squared_")&&(e.parentElement.id=""),t)try{document.head.removeChild(t)}catch(e){}e.item.cssFinally("display")})}this.processing.excluded.each(e=>{e.lineBreak||(e.setBounds(),e.saveAsInitial()),e.pageFlow||e.cssFinally("display")}),i.each(e=>{if(e.styleElement){const t=e.element,i=s[e.id];if(i)for(const e in i)t.style.setProperty(e,i[e]);a.has(t)&&(t.dir="rtl")}e.saveAsInitial()}),e.evaluateNonStatic(t,i),e.sortInitialCache()}return t}afterCreateCache(e){const t=e.dataset,{filename:i,iteration:n}=t,s=mi(i)&&i.replace(new RegExp(`\\.${this._controllerSettings.layout.fileExtension}$`),"")||e.elementId||"document_"+this.length,a=(n?parseInt(n):-1)+1,r=ui(a>0?`${s}_${a}`:s,true);t.iteration=a.toString(),t.layoutName=r,e.data(G.KEY_NAME,"layoutName",r),this.setBaseLayout(),this.setConstraints(),this.setResources()}resolveTarget(e){if(mi(e)){for(const t of this._cache)if(t.elementId===e||t.controlId===e)return t;for(const t of this.session.cache)if(t.elementId===e||t.controlId===e)return t}}useElement(e){const t=e.dataset.use;return mi(t)&&t.split(Ii.SEPARATOR).some(e=>!!this.extensionManager.retrieve(e))}toString(){var e;return(null===(e=this.layouts[0])||void 0===e?void 0:e.content)||""}cascadeParentNode(e,t,i){var n;const s=this.insertNode(e);if(s&&("none"!==s.display||0===t||s.outerExtensionElement)){if(s.depth=t,0===t){this._cache.append(s);for(const e of s.extensions)if(null===(n=this.extensionManager.retrieve(e))||void 0===n?void 0:n.cascadeAll){this._cascadeAll=true;break}}const a=this.controllerHandler;if(s.excluded&&null===s.outerExtensionElement||a.preventNodeCascade(e))return s;const r=this.processing.sessionId,o=this.createPseduoElement(e,"::before",r),l=this.createPseduoElement(e,"::after",r),c=e.childNodes,h=c.length,d=new Array(h),u=new Array(e.childElementCount);let f=true,g=0,p=0,m=0;while(g<h){const e=c[g++];let n;e===o?(n=this.insertNode(o,void 0,"::before"),n&&(s.innerBefore=n,n.textEmpty||(n.inlineText=true),f=false)):e===l?(n=this.insertNode(l,void 0,"::after"),n&&(s.innerAfter=n,n.textEmpty||(n.inlineText=true),f=false)):"#"===e.nodeName.charAt(0)?oi(e)&&(n=this.insertNode(e,s)):a.includeElement(e)&&(i&&Bi(e.dataset.use,i).some(t=>t.init(e)),this.rootElements.has(e)?(n=this.insertNode(e),n&&(n.documentRoot=true,n.visible=false,n.excluded=true),f=false):(n=this.cascadeParentNode(e,t+1,i),false===(null==n?void 0:n.excluded)&&(f=false)),n&&(u[m++]=n)),n&&(n.childIndex=p,n.naturalChild=true,d[p++]=n)}d.length=p,u.length=m,s.naturalChildren=d,s.naturalElements=u,this.cacheNodeChildren(s,d,f),m>0&&this.userSettings.createQuerySelectorMap&&(s.queryMap=this.createQueryMap(u,m))}return s}cacheNodeChildren(e,t,i){const n=t.length;if(n){const s=this._cache;let a=[],r=[];if(n>1){let o=t[0],l=false;for(let c=0,h=0;c<n;++c){const d=t[c];d.excluded?this.processing.excluded.append(d):d.plainText&&i||(d.containerIndex=h++,d.parent=e,s.append(d)),d.pageFlow&&(d.floating&&(l=true),c>0&&(r.push(d),d.lineBreak&&(t[c-1].lineBreakTrailing=true)),d.excluded||(d.siblingsLeading=a,o.siblingsTrailing=r,a=[],r=[],o=d),c<n-1&&(a.push(d),d.lineBreak&&(t[c+1].lineBreakLeading=true))),d.actualParent=e}o.siblingsTrailing=r,e.floatContainer=l}else{const i=t[0];i.excluded?this.processing.excluded.append(i):i.plainText||(i.siblingsLeading=a,i.siblingsTrailing=r,i.parent=e,i.containerIndex=0,s.append(i),e.floatContainer=i.floating),i.actualParent=e}}else i=!e.textEmpty;e.inlineText=i}setBaseLayout(){const{controllerHandler:e,processing:t,session:i}=this,{extensionMap:n,clearMap:s}=i,a=t.cache,r=t.node,o=new Map;let l=this.extensionsTraverse;{let e=0;const t=(e,t,i)=>{var n;return(null===(n=o.get(e))||void 0===n?void 0:n.set(t,i))||o.set(e,new Map([[t,i]]))},i=e=>-1*e-2;t(-1,0,r.parent),a.each(i=>{if(i.length){const n=i.depth;if(t(n,i.id,i),e=Math.max(n,e),i.floatContainer){const e=new Set,t={};i.naturalChildren.forEach(i=>{if(i.pageFlow){const n=i.floating;if(e.size){const a=i.css("clear");if("none"!==a){if(!n){let n;switch(a){case"left":n=[t.left];break;case"right":n=[t.right];break;case"both":n=[t.left,t.right]}null==n||n.forEach(n=>{if(n){const s=n.float;e.has(s)&&Math.ceil(i.bounds.top)>=n.bounds.bottom&&(e.delete(s),t[s]=void 0)}})}(e.has(a)||"both"===a)&&(s.set(i,2===e.size?"both":a),n||i.setBox(2,{reset:1}),e.clear(),t.left=void 0,t.right=void 0)}}if(n){const n=i.float;e.add(n),t[n]=i}}})}}});let n=0;while(n<e)o.set(i(n++),new Map);a.afterAppend=(e,n=false)=>{t(i(e.depth),e.id,e),n&&e.length&&e.cascade(e=>{var n;if(e.length){const s=e.depth;null===(n=o.get(s))||void 0===n||n.delete(e.id),t(i(s),e.id,e)}return false})}}this.extensions.forEach(e=>e.beforeBaseLayout());for(const t of o.values())for(const i of t.values()){if(0===i.length)continue;const t=i.floatContainer,a=i.renderExtension,r=i.duplicate(),o=r.length;for(let i=0;i<o;++i){let c=r[i];if(c.rendered||!c.visible)continue;let h=c.parent;if(o>1&&i<o-1&&c.pageFlow&&(0===h.alignmentType||h.hasAlign(2)||c.hasAlign(8192))&&!h.hasAlign(4)&&!c.nodeGroup&&c.hasSection(vt.DOM_TRAVERSE)){const n=[],a=[];let l,d,u=i,f=0;h.layoutVertical&&c.hasAlign(8192)&&(n.push(c),++u,++f);e:{let e=false;for(;u<o;++u,++f){const i=r[u];if(i.pageFlow){if(i.labelFor&&!i.visible){f--;continue}if(t){if(e){s.get(i)&&(e=false)}i.floating&&(e=true)}if(0===f){const e=i.siblingsTrailing[0];if(e){!Li(i)||e.alignedVertically([i])>0?a.push(i):n.push(i);continue}}const r=i.siblingsLeading[0];if(!r)break e;{const o=n.length>0;if(t){const t=i.alignedVertically(o?n:a,s,o);if(t>0){if(o){if(t<4&&e&&!i.siblingsLeading.some(e=>e.lineBreak&&!s.has(e))){if(!i.floating||r.floating&&i.bounds.top<Math.floor(r.bounds.bottom)){let t=Number.NEGATIVE_INFINITY;if(i.floating||n.forEach(e=>{e.floating&&(t=Math.max(t,e.bounds.bottom))}),!i.floating&&i.bounds.top<Math.floor(t)||e){if(n.push(i),!i.floating&&Math.ceil(i.bounds.bottom)>t)break e;continue}}}else switch(t){case 6:case 7:s.has(i)||s.set(i,"both")}break e}if(!Mi(i,n,a))break e}else if(!Pi(i,n,a))break e}else if(i.alignedVertically(o?n:a,void 0,o)>0){if(!Mi(i,n,a))break e}else if(!Pi(i,n,a))break e}}else if(i.autoPosition){const e=a.length;if(e){a[e-1].blockStatic&&a.push(i);break}n.push(i)}}}let g=n.length;g>1?(l=e.processTraverseHorizontal(new Qt(h,c,0,0,n),r),d=n[g-1]):(g=a.length,g>1&&(l=e.processTraverseVertical(new Qt(h,c,0,0,a),r),d=a[g-1],Li(d)&&d!==r[o-1]&&d.addAlign(8192)));let p=false;l?this.addLayout(l)&&(p=true,h=c.parent):p=true,p&&d===r[o-1]&&h.removeAlign(2)}if(c.removeAlign(8192),i===o-1&&h.removeAlign(2),c.renderAs&&h.appendTry(c,c.renderAs,false)&&(c.hide(),c=c.renderAs,c.positioned&&(h=c.parent)),!c.rendered&&c.hasSection(vt.EXTENSION)){const e=n.get(c.id);let t=e?a?a.concat(e):e:a,i=false;if(t){const e=t.length;let n=0;while(n<e){const e=t[n++],s=e.processChild(c,h);if(s){const{output:t,renderAs:n,outputAs:a}=s;if(t&&this.addLayoutTemplate(s.outerParent||h,c,t),n&&a&&this.addLayoutTemplate(s.parentAs||h,n,a),h=s.parent||h,s.subscribe&&e.subscribers.add(c),i=true===s.next,s.complete||i)break}}if(i)continue}if(c.styleElement){t=Bi(c.dataset.use,l);const n=t.length;let s=0;while(s<n){const n=t[s++];if(n.is(c)&&n.condition(c,h)&&(!e||!e.includes(n))){const e=n.processNode(c,h);if(e){const{output:t,renderAs:s,outputAs:a}=e;if(t&&this.addLayoutTemplate(e.outerParent||h,c,t),s&&a&&this.addLayoutTemplate(e.parentAs||h,s,a),h=e.parent||h,e.include?(yi(c,"renderExtension").push(n),n.subscribers.add(c)):e.subscribe&&n.subscribers.add(c),e.remove){const e=l.indexOf(n);-1!==e&&(l=l.slice(0),l.splice(e,1))}if(i=true===e.next,e.complete||i)break}}}if(i)continue}}if(!c.rendered&&c.hasSection(vt.RENDER)){let t=this.createLayoutControl(h,c);if(0===t.containerType){const i=c.length?e.processUnknownParent(t):e.processUnknownChild(t);if(i.next)continue;t=i.layout}this.addLayout(t)}}}a.sort((e,t)=>{if(e.depth===t.depth){const i=e.innerWrapped,n=t.innerWrapped;if(i===t)return-1;if(e===n)return 1;const s=e.outerWrapper,a=t.outerWrapper;if(e===a||!s&&a)return-1;if(t===s||!a&&s)return 1;const r=e.nodeGroup,o=t.nodeGroup;return r&&o?e.id<t.id?-1:1:r?-1:o?1:0}return e.depth<t.depth?-1:1}),this.extensions.forEach(e=>{for(const t of e.subscribers)a.contains(t)&&e.postBaseLayout(t);e.afterBaseLayout()}),i.cache.join(a),i.excluded.join(t.excluded)}setConstraints(){const e=this._cache;this.controllerHandler.setConstraints(),this.extensions.forEach(t=>{for(const i of t.subscribers)e.contains(i)&&t.postConstraints(i);t.afterConstraints()})}setResources(){const e=this.resourceHandler;this._cache.each(t=>{e.setBoxStyle(t),t.imageElement||t.svgElement||!t.visible||(e.setFontStyle(t),e.setValueString(t))}),this.extensions.forEach(e=>e.afterResources())}processFloatHorizontal(e){const t=this.controllerHandler,{containerType:i,alignmentType:n}=t.containerTypeVertical,s=this.session.clearMap,a=[],r=[],o=[],l=[],c=[];let h,d,u,f,g=false;if(e.each((e,t)=>{if(t>0){s.get(e)&&(g=true)}const i=e.float;if(g)"left"===i?h?h.push(e):h=[e]:"right"===i?d?d.push(e):d=[e]:o.push(e);else if("left"===i)l.push(e);else if("right"===i)c.push(e);else if(l.length||c.length){let t=e.linear.top;if(e.styleText){const i=e.textBounds;i&&(t=Math.max(i.top,t))}t=Math.ceil(t),l.some(e=>t>=e.bounds.bottom)||c.some(e=>t>=e.bounds.bottom)?o.push(e):r.push(e)}else r.push(e)}),l.length&&(u=h?[l,h]:l),c.length&&(f=d?[c,d]:c),c.length+((null==d?void 0:d.length)||0)===e.length&&e.add(2048),o.length){const{node:s,parent:a}=e;o.length>1&&o[0].addAlign(8192),o.unshift(s);const r=t.createNodeGroup(s,o,{parent:a});r.childIndex=s.childIndex,r.containerName=s.containerName,r.inherit(s,"boxStyle"),r.innerWrapped=s,s.resetBox(30,r),s.resetBox(480,r),this.addLayout(new Qt(a,r,i,n|(a.blockStatic?64:0),o)),e.parent=r}return r.length&&a.push(r),u&&a.push(u),f&&a.push(f),e.type=t.containerTypeVerticalMargin,e.itemCount=a.length,e.add(64),a.forEach(s=>{let a,o;if(Array.isArray(s[0])){a=s;const r=a.length;let l=a[0],h=1;while(h<r)l=l.concat(a[h++]);l.sort((e,t)=>e.childIndex<t.childIndex?-1:1);const d=e.node;d.layoutVertical?o=d:(o=t.createNodeGroup(l[0],l,{parent:d}),this.addLayout(Qt.create({parent:d,node:o,containerType:i,alignmentType:n|(a.some(e=>e===f||e===c)?2048:0),itemCount:r})))}else a=[s];a.forEach(s=>{const a=s[0],h=o||e.node,d=t.createNodeGroup(a,s,{parent:h,delegate:true}),u=new Qt(h,d,0,128);s===r?u.add(256):u.add(function(e){let t=0,i=true,n=true;const s=e.length;let a=0;while(a<s){const t=e[a++];if(t.floating||(i=false),t.rightAligned||(n=false),!i&&!n)break}return i&&(t|=512),n&&(t|=2048),t}(s)),s.some(e=>e.percentWidth>0)?(u.type=t.containerTypePercent,1===s.length&&(u.node.innerWrapped=a)):1===s.length?u.setContainerType(i,n):u.linearY||u.unknownAligned?u.setContainerType(i,n|(u.unknownAligned?2:0)):t.processLayoutHorizontal(u),this.addLayout(u),s===r&&this.setFloatPadding(h,d,r,l,c)})}),e}processFloatVertical(e){const t=this.controllerHandler,{containerType:i,alignmentType:n}=t.containerTypeVertical,s=this.session.clearMap;if(0!==e.containerType){const s=e.node,a=t.createNodeGroup(s,[s],{parent:e.parent});this.addLayout(new Qt(a,s,i,n,a.children)),e.node=a}else e.setContainerType(i,n);const a=[],r=[],o=[],l=[];let c=false,h=false,d=true;if(e.each(e=>{e.blockStatic&&0===l.length?(o.push(e),h=true):(s.has(e)&&(e.floating?c=true:(e.setBox(2,{reset:1}),a.push(o.slice(0)),r.push(l.slice(0)),o.length=0,l.length=0)),e.floating?(h&&(a.push(o.slice(0)),r.push(null),o.length=0,l.length=0,h=false),l.push(e)):(c&&!s.has(e)&&(d=false),o.push(e)))}),l.length&&r.push(l),o.length&&a.push(o),!d){const s=e.node,o=Math.max(r.length,a.length);for(let e=0;e<o;++e){const o=a[e]||[];if(null===r[e]&&o.length){const e=t.containerTypeVertical;this.addLayout(new Qt(s,t.createNodeGroup(o[0],o,{parent:s}),e.containerType,192|e.alignmentType,o))}else{const a=r[e]||[];if(o.length||a.length){const e=t.createNodeGroup(a[0]||o[0],[],{parent:s}),r=new Qt(s,e);r.type=t.containerTypeVerticalMargin;const l=[];let c;if(a.length){const i=t.createNodeGroup(a[0],a,{parent:e});r.add(512),0===o.length&&a.every(e=>"right"===e.float)&&r.add(2048),l.push(i)}if(o.length&&(c=t.createNodeGroup(o[0],o,{parent:e}),l.push(c)),r.itemCount=l.length,this.addLayout(r),l.forEach(s=>{s.nodeGroup||(s=t.createNodeGroup(s,[s],{parent:e,delegate:true})),this.addLayout(new Qt(e,s,i,192|n,s.children))}),o.length&&a.length){const[e,t]=xi(a,e=>"right"!==e.float);this.setFloatPadding(s,c,o,e,t)}}}}}return e}createPseduoElement(e,t,i){let n=wi(e,"styleMap"+t,i),s=0;if("Q"===e.tagName){n||(n={},Ti(e,"styleMap"+t,i,n));let a=n.content;if("string"==typeof a&&""!==a||(a=ni(e,t).getPropertyValue("content")||("::before"===t?"open-quote":"close-quote"),n.content=a),a.endsWith("-quote")){let t=e.parentElement;while("Q"===(null==t?void 0:t.tagName))s++,t=t.parentElement}}if(n){let a=n.content;if(a){const r=Ei(a,'"');let o=false;switch(n.position){case"absolute":case"fixed":o=true}const l=()=>{if(!o&&""!==r){const t=e.childNodes[e.childNodes.length-1];if(oi(t))return!/\s+$/.test(t.textContent)}return false};if(""===r.trim()){const i=e=>{if((e||0===di(n.width))&&0===di(n.height)){for(const e in n){if(/(padding|Width|Height)/.test(e)&&di(n[e])>0)return true;if(!o&&e.startsWith("margin")&&0!==di(n[e]))return true}return false}return true};if("::after"===t){if(!l()&&!i(true))return}else{const t=e.childNodes,s=t.length;let a=0;while(a<s){const e=t[a++];if(oi(e)){if(""!==e.textContent.trim())break}else if(e instanceof HTMLElement){const t=ni(e);switch(t.getPropertyValue("position")){case"fixed":case"absolute":continue}if("none"!==t.getPropertyValue("float"))return;break}}switch(n.display){case void 0:case"block":case"inline":case"inherit":case"initial":if(!i(false))return}}}else if("inherit"===a){let t=e;do{if(a=ni(t).getPropertyValue("content"),"inherit"!==a)break;t=t.parentElement}while(t)}const c=ni(e);ei.forEach(e=>{mi(n[e])||(n[e]=c[e])});let h="",d="";switch(a){case"normal":case"none":case"initial":case"inherit":case"unset":case"no-open-quote":case"no-close-quote":case'""':break;case"open-quote":"::before"===t&&(d=s%2==0?"“":"‘");break;case"close-quote":"::after"===t&&(d=s%2==0?"”":"’");break;default:{const n=ai(a);if(""!==n)d=n,pi(this._controllerSettings.mimeType.image,n)?h="img":d="";else{let n,s=false;Ni.lastIndex=0;while(null!==(n=Ni.exec(a))){const a=n[1];if(a)d+=ri(e,a.trim());else if(n[2]||n[5]){const s="counter"===n[2],[a,r]=s?[n[3],n[4]||"decimal"]:[n[6],n[8]||"decimal"],o=(Ri(e,a,t,i,0)||0)+(Ci(c.getPropertyValue("counter-reset"),a,0)||0),l=[];let h,u=e,f=o,g=false;const p=(e,t)=>{const i=l.length;0===i?f+=e:(g||t)&&(l[i-1]+=e)},m=e=>{void 0===Ci(ni(e).getPropertyValue("counter-reset"),a)&&bi(e.children,e=>{if("__squared.pseudo"!==e.className){let n=Ri(e,a,t,i);n&&p(n,true);const s=ni(e);if(n=Ci(s.getPropertyValue("counter-increment"),a),n&&p(n,false),n=Ci(s.getPropertyValue("counter-reset"),a),void 0!==n)return true;m(e)}})};while(u){if(g=false,u.previousElementSibling)u=u.previousElementSibling,u&&m(u);else{if(!u.parentElement)break;u=u.parentElement,g=true}if(u&&"__squared.pseudo"!==u.className){const e=Ri(u,a,t,i);e&&p(e,true);const n=ni(u),r=Ci(n.getPropertyValue("counter-increment"),a);r&&p(r,false);const o=Ci(n.getPropertyValue("counter-reset"),a);if(void 0!==o){if(h||(f+=o),h=u,s)break;g&&l.push((e||0)+o)}}}if(h){if(!s&&l.length>1){l.reverse().splice(1,1);const e=n[7];l.forEach(t=>d+=ti(r,t,true)+e)}}else f=o;d+=ti(r,f,true)}else n[9]&&(d+=n[9]);s=true}s||(d=a)}break}}if(mi(n.display)||(n.display="inline"),d||'""'===a){""===h&&(h=/^(inline|table)/.test(n.display)?"span":"div");const s=function(e,t="span",i=-1){const n=document.createElement(t);return n.className="__squared.pseudo",n.style.setProperty("display","none"),i>=0&&i<e.childNodes.length?e.insertBefore(n,e.childNodes[i]):e.appendChild(n),n}(e,h,"::before"===t?0:-1);if("img"===h){s.src=d;const e=this.resourceHandler.getImage(d);e&&(!mi(n.width)&&e.width>0&&(n.width=ii(e.width)),!mi(n.height)&&e.height>0&&(n.height=ii(e.height)))}else'""'!==a&&(s.innerText=d);for(const e in n)"display"!==e&&(s.style[e]=n[e]);return Ti(s,"pseudoElement",i,t),Ti(s,"styleMap",i,n),s}}}}createAssetOptions(e){let t=null==e?void 0:e.assets;return t=t?this.layouts.concat(t):this.layouts,Object.assign(Object.assign({},e),{assets:t})}createLayoutControl(e,t){return new Qt(e,t,t.containerType,t.alignmentType,t.children)}setFloatPadding(e,t,i,n,s){let a=[];i.forEach(e=>{(Fi(e)||e.centerAligned)&&a.push(e),e.blockStatic&&(a=a.concat(e.cascade(e=>Fi(e))))});const r=t.bounds.bottom,o=e.actualBoxWidth();if(n.length){let i=Number.NEGATIVE_INFINITY,s=0,l=false,c=false;if(n.forEach(e=>{if(e.bounds.top<r){const t=e.linear.right+Wi(e,false);t>i?(i=t,c=e.marginRight>0):t===i&&e.marginRight<=0&&(c=false)}}),i!==Number.NEGATIVE_INFINITY&&(a.forEach(e=>{(Math.floor(e.linear.left)<=i||e.centerAligned)&&(s=Math.max(s,e.marginLeft),l=true)}),l)){const n=i-e.box.left-s-ci(t.map(e=>a.includes(e)?0:e.marginLeft));n>0&&n<o&&t.modifyBox(256,n+(!c&&t.find(e=>e.multiline,{cascade:true})?Math.max(s,this._controllerSettings.deviations.textMarginBoundarySize):0))}}if(s.length){let i=Number.POSITIVE_INFINITY,n=0,l=false,c=false;if(s.forEach(e=>{if(e.bounds.top<r){const t=e.linear.left+Wi(e,true);t<i?(i=t,c=e.marginLeft>0):t===i&&e.marginLeft<=0&&(c=false)}}),i!==Number.POSITIVE_INFINITY&&(a.forEach(e=>{(e.multiline||Math.ceil(e.linear.right)>=i)&&(n=Math.max(n,e.marginRight),l=true)}),l)){const s=e.box.right-i-n-ci(t.map(e=>a.includes(e)?0:e.marginRight));s>0&&s<o&&t.modifyBox(64,s+(!c&&t.find(e=>e.multiline,{cascade:true})?Math.max(n,this._controllerSettings.deviations.textMarginBoundarySize):0))}}}get layouts(){return this._layouts.sort((e,t)=>{const i=e.index,n=t.index;if(i!==n){if(0===i||n===Number.POSITIVE_INFINITY||void 0===n&&i!==Number.POSITIVE_INFINITY)return-1;if(0===n||i===Number.POSITIVE_INFINITY||void 0===i&&n!==Number.POSITIVE_INFINITY)return 1;if(void 0!==i&&void 0!==n)return i<n?-1:1}return 0})}get clearMap(){return this.session.clearMap}get extensionsCascade(){return this.extensions.filter(e=>!!e.init)}get extensionsTraverse(){return this.extensions.filter(e=>!e.eventOnly)}get length(){return this.session.cache.length}},e.Controller=j,e.ControllerUI=class mr extends j{constructor(){super(...arguments),this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}init(){const e=this.localSettings.unsupported;this._unsupportedCascade=e.cascade,this._unsupportedTagName=e.tagName}reset(){this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}preventNodeCascade(e){return this._unsupportedCascade.has(e.tagName)}applyDefaultStyles(e){const t=this.sessionId;let i;if(qi(e))i={position:"static",display:"inline",verticalAlign:"baseline",float:"none",clear:"none"};else{i=sn(e,"styleMap",t)||{};const n=()=>{if(!Zi(i.border)&&a()){const e=this.localSettings.style.inputBorderColor;i.border="outset 1px "+e;for(let t=0;t<4;++t){const n=Xi[t];i[n[0]]="outset",i[n[1]]="1px",i[n[2]]=e}return true}return false},s=e=>{if(e){const e=i.backgroundColor;Zi(e)&&"initial"!==e||(i.backgroundColor=this.localSettings.style.inputBackgroundColor)}Zi(i.textAlign)||(i.textAlign="center"),Zi(i.padding)||Yi.some(e=>!!i[e])||(i.paddingTop="2px",i.paddingRight="6px",i.paddingBottom="3px",i.paddingLeft="6px")},a=()=>!(Xi[0][0]in i||Xi[1][0]in i||Xi[2][0]in i||Xi[3][0]in i),r=e.tagName;if(Di(8))switch(r){case"BODY":"rgba(0, 0, 0, 0)"===i.backgroundColor&&(i.backgroundColor="rgb(255, 255, 255)");break;case"INPUT":case"SELECT":case"BUTTON":case"TEXTAREA":Zi(i.display)||(i.display="inline-block");break;case"FIELDSET":Zi(i.display)||(i.display="block")}else if(Hi())switch(r){case"BODY":"transparent"===i.backgroundColor&&(i.backgroundColor="rgb(255, 255, 255)");break;case"INPUT":switch(e.type){case"text":case"password":case"time":case"date":case"datetime-local":case"week":case"month":case"url":case"email":case"search":case"number":case"tel":Zi(i.fontSize)||(i.fontSize="13.3333px")}break;case"CODE":Zi(i.fontFamily)||(i.fontFamily="monospace");break;case"LEGEND":case"RT":Zi(i.display)||(i.display="block")}switch(r){case"INPUT":{const t=e.type;switch(t){case"radio":case"checkbox":case"image":break;case"week":case"month":case"time":case"date":case"datetime-local":i.paddingTop=Ui(Qi(i.paddingTop)+1),i.paddingRight=Ui(Qi(i.paddingRight)+1),i.paddingBottom=Ui(Qi(i.paddingBottom)+1),i.paddingLeft=Ui(Qi(i.paddingLeft)+1);break;default:{const e=n();switch(t){case"file":case"reset":case"submit":case"button":s(e)}break}}break}case"BUTTON":s(n());break;case"TEXTAREA":case"SELECT":n();break;case"BODY":{const e=i.backgroundColor;Zi(e)&&"initial"!==e||(i.backgroundColor="rgb(255, 255, 255)");break}case"FORM":Zi(i.marginTop)||(i.marginTop="0px");break;case"LI":if(!Zi(i.listStyleImage)){const t=zi(e);i.listStyleImage=t.getPropertyValue("list-style-image")}break;case"IFRAME":Zi(i.display)||(i.display="block");case"VIDEO":case"CANVAS":case"svg":case"IMG":{const t=(t,n)=>{const s=i[t];if(!Zi(s)||"auto"===s){const s=new RegExp(`\\s+${t}="([^"]+)"`).exec(e.outerHTML);if(s){const e=s[1];Gi(e)?i[t]=e+"px":ji(e)&&(i[t]=e)}else if("IFRAME"===r)"width"===t?i.width="300px":i.height="150px";else{const s=i[n];if(s&&Gi(s)){const a="max"+Ki(t);if(!Zi(i[a])||!ji(a)){const a=this.application.resourceHandler.getImage(e.src);a&&a.width>0&&a.height>0&&(i[t]=Ui(a[t]*parseFloat(s)/a[n]))}}}}};t("width","height"),t("height","width");break}}}an(e,"styleMap",t,i)}addBeforeOutsideTemplate(e,t,i=true,n=-1){const s=tn(this._beforeOutside,e);-1!==n&&n<s.length?s.splice(n,0,t):s.push(t),i&&(this._requireFormat=true)}addBeforeInsideTemplate(e,t,i=true,n=-1){const s=tn(this._beforeInside,e);-1!==n&&n<s.length?s.splice(n,0,t):s.push(t),i&&(this._requireFormat=true)}addAfterInsideTemplate(e,t,i=true,n=-1){const s=tn(this._afterInside,e);-1!==n&&n<s.length?s.splice(n,0,t):s.push(t),i&&(this._requireFormat=true)}addAfterOutsideTemplate(e,t,i=true,n=-1){const s=tn(this._afterOutside,e);-1!==n&&n<s.length?s.splice(n,0,t):s.push(t),i&&(this._requireFormat=true)}getBeforeOutsideTemplate(e,t){const i=this._beforeOutside[e];return i?on(i,t):""}getBeforeInsideTemplate(e,t){const i=this._beforeInside[e];return i?on(i,t):""}getAfterInsideTemplate(e,t){const i=this._afterInside[e];return i?on(i,t):""}getAfterOutsideTemplate(e,t){const i=this._afterOutside[e];return i?on(i,t):""}hasAppendProcessing(e){return void 0===e?this._requireFormat:e in this._beforeOutside||e in this._beforeInside||e in this._afterInside||e in this._afterOutside}includeElement(e){return!(this._unsupportedTagName.has(e.tagName)||"INPUT"===e.tagName&&this._unsupportedTagName.has(e.tagName+":"+e.type))||"true"===e.contentEditable}visibleElement(e,t){let i,n,s;if(t){const a=e.parentElement;i=a?zi(a,t):zi(e),n=1,s=1}else{if(i=zi(e),"none"===i.getPropertyValue("display"))return false;{const t=nn(e,this.sessionId);if(!$i(t))return false;({width:n,height:s}=t)}}if(n>0&&s>0)return"visible"===i.getPropertyValue("visibility")||!ln(i);if(!t){if(en(e.children,e=>this.visibleElement(e))===Number.POSITIVE_INFINITY)return true;if("IMG"===e.tagName&&"none"!==i.getPropertyValue("display"))return true}return!ln(i)&&(n>0&&"none"!==i.getPropertyValue("float")||!!t&&"none"!==i.getPropertyValue("clear")||"block"===i.getPropertyValue("display")&&(0!==cn(i,"margin-top")||0!==cn(i,"margin-bottom")))}evaluateNonStatic(e,t){const i=new Set,n=new Set;t.each(t=>{if(!t.documentRoot&&!t.pageFlow){const s=t.parent;let a;switch(t.css("position")){case"fixed":if(!t.autoPosition){a=e;break}case"absolute":{const i=t.absoluteParent;if(i)if(a=i,t.autoPosition)t.siblingsLeading.some(e=>e.multiline||e.excluded&&!e.blockStatic)?t.autoPosition=false:t.cssApply({display:"inline-block",verticalAlign:"top"},true),a=s;else if(this.userSettings.supportNegativeLeftTop){let n=false;while(a&&a!==e&&(!a.rightAligned&&!a.centerAligned||!a.pageFlow)){const e=a.linear;if(n){if(a.layoutElement){a=i;break}if(t.withinX(e)&&t.withinY(e))break}else{if(t.hasPX("top")&&t.hasPX("bottom")||t.hasPX("left")&&t.hasPX("right"))break;{const i="hidden"===a.css("overflowX"),s="hidden"===a.css("overflowY");if(i&&s)break;const r=!i&&t.outsideX(e),o=!s&&t.outsideY(e);if(r&&(t.left<0||t.right>0)||o&&(t.top<0||0!==t.bottom))n=true;else if(!i&&((t.left<0||t.right>0)&&Math.ceil(t.bounds.right)<e.left||(t.left>0||t.right<0)&&Math.floor(t.bounds.left)>e.right)&&a.some(e=>e.pageFlow))n=true;else if(!s&&((t.top<0||t.bottom>0)&&Math.ceil(t.bounds.bottom)<a.bounds.top||(t.top>0||t.bottom<0)&&Math.floor(t.bounds.top)>a.bounds.bottom))n=true;else if(r&&o&&(!a.pageFlow||a.actualParent.documentRoot)&&(t.top>0||t.left>0))n=true;else{if(i||s||t.intersectX(e)||t.intersectY(e))break;n=true}}}a=a.actualParent}}break}}if(a||(a=e),a!==s){const e=t.absoluteParent;if((null==e?void 0:e.positionRelative)&&a!==e){const{left:i,right:n,top:s,bottom:a}=e,r=t.bounds;0!==i?(r.left+=i,r.right+=i):e.hasPX("left")||0===n||(r.left-=n,r.right-=n),0!==s?(r.top+=s,r.bottom+=s):e.hasPX("top")||0===a||(r.top-=a,r.bottom-=a),t.unset("box"),t.unset("linear")}let r=t.toFloat("opacity",1),o=s;do{r*=o.toFloat("opacity",1),o=o.actualParent}while(o&&o!==a);t.css("opacity",r.toString()),t.parent=a,t.containerIndex=Number.POSITIVE_INFINITY,i.add(a),n.add(s)}t.documentParent=a}});for(const e of n)e.each((e,t)=>e.containerIndex=t);for(const e of i){const t=[];let i=-1;e.each(n=>{n.containerIndex===Number.POSITIVE_INFINITY?e.some(e=>{let i=e.naturalElements.includes(n);if(!i){const t=e.cascade();i=n.ascend({condition:e=>t.includes(e)}).length>0}return i&&tn(t,e.containerIndex+(n.zIndex>=0||e!==n.actualParent?1:0)).push(n),i}):n.containerIndex>i&&(i=n.containerIndex)});const n=t.length;if(n){const s=e.children;for(let e=0,a=0,r=1;e<n;++e,++a){const n=t[e];if(n){n.sort((e,t)=>{if(e.parent===t.parent){const i=e.zIndex,n=t.zIndex;return i===n?e.id<t.id?-1:1:i<n?-1:1}return 0}).forEach(e=>e.containerIndex=i+r++);const e=s.length;for(let t=0;t<e;++t)n.includes(s[t])&&(s[t]=void 0);s.splice(a,0,...n),a+=n.length}}e.retain(Ji(s))}}}sortInitialCache(e){(e||this.cache).sort((e,t)=>{if(e.depth!==t.depth)return e.depth<t.depth?-1:1;{const i=e.documentParent,n=t.documentParent;if(i!==n){const e=i.depth,t=n.depth;return e!==t?e<t?-1:1:i.actualParent===n.actualParent?i.childIndex<n.childIndex?-1:1:i.id<n.id?-1:1}}return 0})}cascadeDocument(e,t){const i=this.userSettings.showAttributes,n="\t".repeat(t);let s="";const a=e.length;let r=0;while(r<a){const a=e[r++],o=a.node;switch(a.type){case 1:{const{controlName:e,attributes:r}=a,{id:l,renderTemplates:c}=o,h=t+1,d=o.depth<0?t+o.depth:t,u=this.getBeforeInsideTemplate(l,h),f=this.getAfterInsideTemplate(l,h);let g=n+"<"+e+(0===t?"{#0}":"")+(i?r?rn(r,h):o.extractAttributes(h):"");g+=c||""!==u||""!==f?">\n"+u+(c?this.cascadeDocument(this.sortRenderPosition(o,c),h):"")+f+n+`</${e}>\n`:" />\n",s+=this.getBeforeOutsideTemplate(l,d)+g+this.getAfterOutsideTemplate(l,d);break}case 2:{const e=a.content;e&&(s+=rn(e,t));break}}}return s}getEnclosingXmlTag(e,t="",i){return"<"+e+t+(i?`>\n${i}</${e}>\n`:" />\n")}get generateSessionId(){return(new Date).getTime().toString()}},e.Extension=q,e.ExtensionManager=class br{constructor(e){this.application=e}include(e){const t=this.application,i=t.extensions;let n=e.name;const s=i.findIndex(e=>e.name===n);if(-1!==s)return i[s]=e,true;{const s=e.framework;if(s>0&&e.dependencies.forEach(e=>{if(e.preload&&(n=e.name,null===this.retrieve(n))){const e=t.builtInExtensions[n];e&&this.include(e)}}),(0===s||$(s,t.framework))&&e.dependencies.every(e=>!!this.retrieve(e.name)))return e.application=t,i.push(e),true}return false}exclude(e){const t=this.extensions,i=t.length;for(let n=0;n<i;++n)if(t[n]===e)return t.splice(n,1),true;return false}retrieve(e){const t=this.extensions,i=t.length;let n=0;while(n<i){const i=t[n++];if(i.name===e)return i}return null}optionValue(e,t){var i;const n=null===(i=this.retrieve(e))||void 0===i?void 0:i.options;return K(n)?n[t]:void 0}optionValueAsObject(e,t){const i=this.optionValue(e,t);return K(i)?i:null}optionValueAsString(e,t){const i=this.optionValue(e,t);return"string"==typeof i?i:""}optionValueAsNumber(e,t){const i=this.optionValue(e,t);return"number"==typeof i?i:NaN}optionValueAsBoolean(e,t){const i=this.optionValue(e,t);return"boolean"==typeof i&&i}get extensions(){return this.application.extensions}},e.ExtensionUI=fn,e.File=ee,e.FileUI=class xr extends ee{get directory(){return this.resource.controllerSettings.directory}},e.LayoutUI=Qt,e.Node=bt,e.NodeGroupUI=class yr extends $t{init(){var e;this.length&&(this.each(e=>e.parent=this),this.setBounds(),this.saveAsInitial(),this.dir=(null===(e=this.actualParent)||void 0===e?void 0:e.dir)||"")}setBounds(){if(this.length)return this._bounds=$t.outerRegion(this),this._bounds}previousSiblings(e){var t;const i=((null===(t=this._initial)||void 0===t?void 0:t.children)||this.children)[0];return(null==i?void 0:i.previousSiblings(e))||[]}nextSiblings(e){var t;const i=(null===(t=this._initial)||void 0===t?void 0:t.children)||this.children,n=i[i.length-1];return(null==n?void 0:n.nextSiblings(e))||[]}get block(){let e=this._cached.block;return void 0===e&&(e=this.some(e=>e.block),this._cached.block=e),e}get blockStatic(){let e=this._cached.blockStatic;if(void 0===e){const t=this.actualParent||this.documentParent;e=this.some(e=>e.blockStatic||e.percentWidth>0)||t.percentWidth>0||this.layoutVertical&&(t.hasWidth||this.some(e=>e.centerAligned||e.rightAligned))||t.blockStatic&&(t.layoutVertical||this.hasAlign(256)),(e||0!==this.containerType)&&(this._cached.blockStatic=e)}return e||this.hasAlign(64)}get blockDimension(){let e=this._cached.blockDimension;return void 0===e&&(e=this.every(e=>e.blockDimension),this._cached.blockDimension=e),e}get blockVertical(){let e=this._cached.blockVertical;return void 0===e&&(e=this.every(e=>e.blockVertical),this._cached.blockVertical=e),e}get inline(){let e=this._cached.inline;return void 0===e&&(e=this.every(e=>e.inline),this._cached.inline=e),e&&!this.hasAlign(64)}get inlineStatic(){let e=this._cached.inlineStatic;return void 0===e&&(e=this.every(e=>e.inlineStatic),this._cached.inlineStatic=e),e&&!this.hasAlign(64)}get inlineVertical(){let e=this._cached.inlineVertical;return void 0===e&&(e=this.every(e=>e.inlineVertical),this._cached.inlineVertical=e),e&&!this.hasAlign(64)}get inlineFlow(){let e=this._cached.inlineFlow;return void 0===e&&(e=this.every(e=>e.inlineFlow),this._cached.inlineFlow=e),e&&!this.hasAlign(64)}get inlineDimension(){let e=this._cached.inlineDimension;return void 0===e&&(e=this.every(e=>e.inlineDimension),this._cached.inlineDimension=e),e&&!this.hasAlign(64)}get pageFlow(){let e=this._cached.pageFlow;if(void 0===e){const t=this.css("position");e="absolute"!==t&&"fixed"!==t,this._cached.pageFlow=e}return e}set baseline(e){this._cached.baseline=e}get baseline(){let e=this._cached.baseline;if(void 0===e){const t=this.cssInitial("verticalAlign",true);e=""===t?this.every(e=>e.baseline):"baseline"===t||gn(t,true),this._cached.baseline=e}return e}get float(){let e=this._cached.float;return void 0===e&&(this.floating?this.hasAlign(2048)?e="right":this.every(e=>"right"===e.float)?(this.addAlign(2048),e="right"):e="left":e="none",this._cached.float=e),e}get floating(){let e=this._cached.floating;return void 0===e&&(e=this.every(e=>e.floating||e.hasAlign(512)),this._cached.floating=e),e}get display(){return super.display||(this.some(e=>e.blockStatic)?"block":this.blockDimension?"inline-block":"inline")}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}set childIndex(e){super.childIndex=e}get childIndex(){let e=super.childIndex;return e===Number.POSITIVE_INFINITY&&(this.each(t=>e=Math.min(t.childIndex,e)),super.childIndex=e),e}set containerIndex(e){super.containerIndex=e}get containerIndex(){let e=super.containerIndex;return e===Number.POSITIVE_INFINITY&&(this.each(t=>e=Math.min(t.containerIndex,e)),super.containerIndex=e),e}get centerAligned(){let e=this._cached.centerAligned;return void 0===e&&(e=this.every(e=>e.centerAligned),this._cached.centerAligned=e),e}get rightAligned(){let e=this._cached.rightAligned;return void 0===e&&(e=this.every(e=>e.rightAligned),this._cached.rightAligned=e),e||this.hasAlign(2048)}get tagName(){return""}get plainText(){return false}get styleText(){return false}get multiline(){return false}get nodeGroup(){return true}get naturalChild(){return false}get naturalElement(){return false}get pseudoElement(){return false}get previousSibling(){return null}get nextSibling(){return null}get previousElementSibling(){return null}get nextElementSibling(){return null}},e.NodeList=t,e.NodeUI=$t,e.Resource=h,e.ResourceUI=ps,e.extensions=or,e.lib=gr,Object.defineProperty(e,"__esModule",{value:true})}));
var android=function(){"use strict";class t extends squared.base.ApplicationUI{set viewModel(t){this._viewModel=t}get viewModel(){return this._viewModel}}var e;!function(t){t[t.RADIO=1]="RADIO",t[t.CHECKBOX=2]="CHECKBOX",t[t.SELECT=3]="SELECT",t[t.SVG=4]="SVG",t[t.IMAGE=5]="IMAGE",t[t.BUTTON=6]="BUTTON",t[t.PROGRESS=7]="PROGRESS",t[t.RANGE=8]="RANGE",t[t.EDIT=9]="EDIT",t[t.TEXT=10]="TEXT",t[t.INLINE=11]="INLINE",t[t.LINE=12]="LINE",t[t.SPACE=13]="SPACE",t[t.BLOCK=14]="BLOCK",t[t.FRAME=15]="FRAME",t[t.LINEAR=16]="LINEAR",t[t.GRID=17]="GRID",t[t.RELATIVE=18]="RELATIVE",t[t.CONSTRAINT=19]="CONSTRAINT",t[t.WEBVIEW=20]="WEBVIEW",t[t.VIDEOVIEW=21]="VIDEOVIEW",t[t.UNKNOWN=22]="UNKNOWN"}(e||(e={}));var a=Object.freeze({__proto__:null,get CONTAINER_NODE(){return e}});const i={EXTERNAL:"android.external",SUBSTITUTE:"android.substitute",DELEGATE_BACKGROUND:"android.delegate.background",DELEGATE_CSS_GRID:"android.delegate.css-grid",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_POSITIVEX:"android.delegate.positive-x",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_DATA:"android.resource.data",RESOURCE_STYLES:"android.resource.styles"},n={RADIO:"RadioButton",CHECKBOX:"CheckBox",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",EDIT:"EditText",SVG:"ImageView",IMAGE:"ImageView",BUTTON:"Button",RANGE:"SeekBar",METER:"ProgressBar",PROGRESS:"ProgressBar",TEXT:"TextView",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",VIDEOVIEW:"VideoView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},o={VERTICAL_SCROLL:"androidx.core.widget.NestedScrollView",CONSTRAINT:"androidx.constraintlayout.widget.ConstraintLayout",GUIDELINE:"androidx.constraintlayout.widget.Guideline",BARRIER:"androidx.constraintlayout.widget.Barrier"},r={DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},s={DRAWER:"androidx.drawerlayout.widget.DrawerLayout",NAVIGATION_VIEW:"com.google.android.material.navigation.NavigationView",COORDINATOR:"androidx.coordinatorlayout.widget.CoordinatorLayout",APPBAR:"com.google.android.material.appbar.AppBarLayout",COLLAPSING_TOOLBAR:"com.google.android.material.appbar.CollapsingToolbarLayout",TOOLBAR:"androidx.appcompat.widget.Toolbar",FLOATING_ACTION_BUTTON:"com.google.android.material.floatingactionbutton.FloatingActionButton",BOTTOM_NAVIGATION:"com.google.android.material.bottomnavigation.BottomNavigationView"},l={PLAINTEXT:e.TEXT,HR:e.LINE,SVG:e.SVG,IMG:e.IMAGE,BUTTON:e.BUTTON,SELECT:e.SELECT,TEXTAREA:e.EDIT,METER:e.PROGRESS,PROGRESS:e.PROGRESS,AUDIO:e.VIDEOVIEW,VIDEO:e.VIDEOVIEW,IFRAME:e.WEBVIEW,INPUT_RANGE:e.RANGE,INPUT_TEXT:e.EDIT,INPUT_PASSWORD:e.EDIT,INPUT_NUMBER:e.EDIT,INPUT_EMAIL:e.EDIT,INPUT_SEARCH:e.EDIT,INPUT_URL:e.EDIT,INPUT_DATE:e.EDIT,INPUT_TEL:e.EDIT,INPUT_TIME:e.EDIT,INPUT_WEEK:e.EDIT,INPUT_MONTH:e.EDIT,INPUT_BUTTON:e.BUTTON,INPUT_FILE:e.BUTTON,INPUT_IMAGE:e.BUTTON,INPUT_COLOR:e.BUTTON,INPUT_SUBMIT:e.BUTTON,INPUT_RESET:e.BUTTON,INPUT_CHECKBOX:e.CHECKBOX,INPUT_RADIO:e.RADIO,INPUT_DATETIME_LOCAL:e.EDIT},c={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},h={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},d={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},u={left:"start",right:"end",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toLeftOf:"layout_toStartOf",layout_toRightOf:"layout_toEndOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},f=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var p=Object.freeze({__proto__:null,EXT_ANDROID:i,CONTAINER_ANDROID:n,CONTAINER_ANDROID_X:o,SUPPORT_ANDROID:r,SUPPORT_ANDROID_X:s,ELEMENT_ANDROID:l,LAYOUT_ANDROID:c,XMLNS_ANDROID:h,STRING_ANDROID:d,LOCALIZE_ANDROID:u,RESERVED_JAVA:f});const g=squared.lib,{findColorShade:m,parseColor:y}=g.color,{extractURL:b,getSrcSet:T}=g.css,{CHAR:E,COMPONENT:S,FILE:A,XML:v}=g.regex,{fromLastIndexOf:x,hasMimeType:w,isNumber:_,isPlainObject:N,isString:I,randomUUID:R,resolvePath:C,safeNestedArray:L,spliceArray:P,trimString:O}=g.util,k=squared.base.ResourceUI.STORED,D=/[^\w+]/g;let M={};function W(t,e=false){var a;if(t)for(const i in t)if(N(t[i]))W(t,e);else{let n=null===(a=t[i])||void 0===a?void 0:a.toString();if(n){switch(i){case"text":if(n.startsWith("@string/"))continue;n=B.addString(n,"",e),""!==n&&(t[i]="@string/"+n);break;case"src":case"srcCompat":S.PROTOCOL.test(n)&&(n=B.addImage({mdpi:n}),""!==n&&(t[i]="@drawable/"+n));continue}const a=y(n);if(a){const e=B.addColor(a);""!==e&&(t[i]="@color/"+e)}}}}class B extends squared.base.ResourceUI{constructor(t,e){super(),this.application=t,this.cache=e,k.styles=new Map,k.themes=new Map,k.dimens=new Map,k.drawables=new Map,k.animators=new Map,this.controllerSettings=t.controllerHandler.localSettings;const a=this.controllerSettings.mimeType.image;"*"!==a&&(this._imageFormat=P(a.slice(0),t=>"image/svg+xml"===t))}static formatOptions(t,e=false){for(const a in t){const i=t[a];N(i)&&W(i,e)}return t}static formatName(t){return E.LEADINGNUMBER.test(t)&&(t="__"+t),t.replace(D,"_")}static addTheme(t,e="res/values",a="themes.xml"){const i=k.themes,{items:n,output:o}=t;o&&(I(o.path)&&(e=o.path.trim()),I(o.file)&&(a=o.file.trim()));const r=O(e,"/")+"/"+O(a,"/"),s=i.get(r)||new Map;let l=t.name,c="";if(""===l||"."===l.charAt(0)){t:for(const t of i.values())for(const e of t.values())if(e.name){c=e.name;break t}if(""===c)return false}else c=l;l=c+("."===l.charAt(0)?l:""),t.name=l,B.formatOptions(n);const h=s.get(l);if(h){const t=h.items;for(const e in n)t[e]=n[e]}else s.set(l,t);return i.set(r,s),true}static addString(t,e="",a=false){if(""!==t){""===e&&(e=t.trim());const i=_(t);if(!i||a){const a=k.strings;for(const[e,i]of a.entries())if(i===t)return e;const n=O(e.replace(v.NONWORD_G,"_"),"_").split(/_+/);n.length>1?(n.length>4&&(n.length=4),e=n.join("_")):e=n[0],e=e.toLowerCase(),i||E.LEADINGNUMBER.test(e)||f.includes(e)?e="__"+e:""===e&&(e="__symbol"+Math.ceil(1e5*Math.random())),a.has(e)&&(e=B.generateId("string",e)),a.set(e,t)}return e}return""}static addImage(t,e="",a){const i=t.mdpi;if(i){if(1===Object.keys(t).length){const t=M[i];if(t)return t}const n=x(i,"/");if(!a||w(a,n)){const a=B.insertStoredAsset("images",B.formatName(e+n.substring(0,n.length-x(n,".").length-1)).toLowerCase(),t);return M[i]=a,a}}return""}static addColor(t,e=false){if("string"==typeof t&&(t=y(t,1,e)),t&&(!t.transparent||e)){const e=t.opacity<1?t.valueAsARGB:t.value;let a=k.colors.get(e);if(a)return a;const i=m(t.value);if(i)return a=e===i.value?i.key:B.generateId("color",i.key),k.colors.set(e,a),a}return""}reset(){super.reset(),M={}}addImageSrc(t,e="",a){const i={};let n;if("string"==typeof t){if(n=b(t),""!==n&&!n.startsWith("data:image/"))return this.addImageSet({mdpi:C(n)},e)}else t.srcset&&(a||T(t,this._imageFormat)).forEach(t=>{const e=t.pixelRatio;if(e>0){const a=t.src;e<1?i.ldpi=a:1===e?n&&!t.actualWidth||(n=a):e<=1.5?i.hdpi=a:e<=2?i.xhdpi=a:e<=3?i.xxhdpi=a:i.xxxhdpi=a}}),n||(n=t.src);if(n){const t=this.application.resourceHandler;i.mdpi=n;const a=t.getRawData(n);if(a){const{base64:i,filename:n}=a;if(i)return A.SVG.test(n)?"":(t.writeRawImage(e+n,i),n.substring(0,n.lastIndexOf(".")))}}return this.addImageSet(i,e)}addImageSet(t,e){return B.addImage(t,e,this._imageFormat)}writeRawImage(t,e){const a=super.writeRawImage(t,e);return a&&this.userSettings.compressImages&&B.canCompressImage(t)&&L(a,"compress").unshift({format:"png"}),a}get randomUUID(){return"__"+R("_")}get userSettings(){return this.application.userSettings}}const{isString:X}=squared.lib.util;function G(t,e,a,i=0){return(!a||a>=i)&&(t.attr=e,true)}const H={29:{android:{},assign:{}},28:{android:{allowAudioPlaybackCapture:false,enforceNavigationBarContrast:false,enforceStatusBarContrast:false,forceDarkAllowed:false,forceUriPermissions:false,foregroundServiceType:false,hasFragileUserData:false,identifier:false,inheritShowWhenLocked:false,interactiveUiTimeout:false,isLightTheme:false,isSplitRequired:false,minAspectRatio:false,nonInteractiveUiTimeout:false,opticalInsetBottom:false,opticalInsetLeft:false,opticalInsetRight:false,opticalInsetTop:false,packageType:false,requestLegacyExternalStorage:false,secureElementName:false,selectionDividerHeight:false,settingsSliceUri:false,shell:false,supportsMultipleDisplays:false,textLocale:false,useAppZygote:false,useEmbeddedDex:false,zygotePreloadName:false},assign:{}},27:{android:{accessibilityHeading:false,accessibilityPaneTitle:false,appComponentFactory:false,buttonCornerRadius:false,cantSaveState:false,dialogCornerRadius:false,fallbackLineSpacing:false,firstBaselineToTopHeight:false,fontVariationSettings:false,lastBaselineToBottomHeight:false,lineHeight:false,maxLongVersionCode:false,outlineAmbientShadowColor:false,outlineSpotShadowColor:false,screenReaderFocusable:false,textFontWeight:false,ttcIndex:false,versionCodeMajor:false,versionMajor:false,widgetFeatures:false,windowLayoutInDisplayCutoutMode:false},assign:{}},26:{android:{classLoader:false,navigationBarDividerColor:false,showWhenLocked:false,turnScreenOn:false,windowLightNavigationBar:false},assign:{}},25:{android:{fontWeight:false,justificationMode:false,layout_marginHorizontal:false,layout_marginVertical:false,paddingHorizontal:false,paddingVertical:false,tooltipText:false},assign:{}},24:{android:{colorSecondary:false,contextDescription:false,contextUri:false,roundIcon:false,shortcutDisabledMessage:false,shortcutId:false,shortcutLongLabel:false,shortcutShortLabel:false,showMetadataInPreview:false},assign:{}},23:{android:{backupInForeground:false,bitmap:false,buttonGravity:false,canControlMagnification:false,canPerformGestures:false,canRecord:false,collapseIcon:false,contentInsetEndWithActions:false,contentInsetStartWithNavigation:false,contextPopupMenuStyle:false,countDown:false,defaultHeight:false,defaultToDeviceProtectedStorage:false,defaultWidth:false,directBootAware:false,enableVrMode:false,endX:false,endY:false,externalService:false,fillType:false,forceHasOverlappingRendering:false,hotSpotX:false,hotSpotY:false,languageTag:false,level:false,listMenuViewStyle:false,maxButtonHeight:false,networkSecurityConfig:false,numberPickerStyle:false,offset:false,pointerIcon:false,popupEnterTransition:false,popupExitTransition:false,preferenceFragmentStyle:false,resizeableActivity:false,startX:false,startY:false,subMenuArrow:false,supportsLocalInteraction:false,supportsPictureInPicture:false,textAppearancePopupMenuHeader:false,tickMark:false,tickMarkTint:false,tickMarkTintMode:false,titleMargin:false,titleMarginBottom:false,titleMarginEnd:false,titleMarginStart:false,titleMarginTop:false,tunerCount:false,use32bitAbi:false,version:false,windowBackgroundFallback:false},assign:{}},22:{android:{allowUndo:false,autoVerify:false,breakStrategy:false,colorBackgroundFloating:false,contextClickable:false,drawableTint:false,drawableTintMode:false,end:t=>G(t,"right"),extractNativeLibs:false,fingerprintAuthDrawable:false,fraction:false,fullBackupContent:false,hyphenationFrequency:false,lockTaskMode:false,logoDescription:false,numbersInnerTextColor:false,scrollIndicators:false,showForAllUsers:false,start:t=>G(t,"left"),subtitleTextColor:false,supportsAssist:false,supportsLaunchVoiceAssistFromKeyguard:false,thumbPosition:false,titleTextColor:false,trackTint:false,trackTintMode:false,usesCleartextTraffic:false,windowLightStatusBar:false},assign:{}},21:{android:{accessibilityTraversalAfter:false,accessibilityTraversalBefore:false,collapseContentDescription:false,dialogPreferredPadding:false,resizeClip:false,revisionCode:false,searchHintIcon:false},assign:{}},20:{android:{actionBarPopupTheme:false,actionBarTheme:false,actionModeFindDrawable:false,actionModeShareDrawable:false,actionModeWebSearchDrawable:false,actionOverflowMenuStyle:false,amPmBackgroundColor:false,amPmTextColor:false,ambientShadowAlpha:false,autoRemoveFromRecents:false,backgroundTint:false,backgroundTintMode:false,banner:false,buttonBarNegativeButtonStyle:false,buttonBarNeutralButtonStyle:false,buttonBarPositiveButtonStyle:false,buttonTint:false,buttonTintMode:false,calendarTextColor:false,checkMarkTint:false,checkMarkTintMode:false,closeIcon:false,colorAccent:false,colorButtonNormal:false,colorControlActivated:false,colorControlHighlight:false,colorControlNormal:false,colorEdgeEffect:false,colorPrimary:false,colorPrimaryDark:false,commitIcon:false,contentAgeHint:false,contentInsetEnd:false,contentInsetLeft:false,contentInsetRight:false,contentInsetStart:false,controlX1:false,controlX2:false,controlY1:false,controlY2:false,country:false,datePickerDialogTheme:false,datePickerMode:false,dayOfWeekBackground:false,dayOfWeekTextAppearance:false,documentLaunchMode:false,elegantTextHeight:false,elevation:false,excludeClass:false,excludeId:false,excludeName:false,fastScrollStyle:false,fillAlpha:false,fillColor:false,fontFeatureSettings:false,foregroundTint:false,foregroundTintMode:false,fragmentAllowEnterTransitionOverlap:false,fragmentAllowReturnTransitionOverlap:false,fragmentEnterTransition:false,fragmentExitTransition:false,fragmentReenterTransition:false,fragmentReturnTransition:false,fragmentSharedElementEnterTransition:false,fragmentSharedElementReturnTransition:false,fromId:false,fullBackupOnly:false,goIcon:false,headerAmPmTextAppearance:false,headerDayOfMonthTextAppearance:false,headerMonthTextAppearance:false,headerTimeTextAppearance:false,headerYearTextAppearance:false,hideOnContentScroll:false,indeterminateTint:false,indeterminateTintMode:false,inset:false,isGame:false,launchTaskBehindSourceAnimation:false,launchTaskBehindTargetAnimation:false,layout_columnWeight:false,layout_rowWeight:false,letterSpacing:false,matchOrder:false,maxRecentsv:false,maximumAngle:false,minimumHorizontalAngle:false,minimumVerticalAngle:false,multiArch:false,navigationBarColor:false,navigationContentDescription:false,navigationIcon:false,nestedScrollingEnabled:false,numbersBackgroundColor:false,numbersSelectorColor:false,numbersTextColor:false,outlineProvider:false,overlapAnchor:false,paddingMode:false,pathData:false,patternPathData:false,persistableMode:false,popupElevation:false,popupTheme:false,progressBackgroundTint:false,progressBackgroundTintMode:false,progressTint:false,progressTintMode:false,propertyXName:false,propertyYName:false,queryBackground:false,recognitionService:false,relinquishTaskIdentity:false,reparent:false,reparentWithOverlay:false,restrictionType:false,resumeWhilePausing:false,reversible:false,searchIcon:false,searchViewStyle:false,secondaryProgressTint:false,secondaryProgressTintMode:false,selectableItemBackgroundBorderless:false,sessionService:false,setupActivity:false,showText:false,slideEdge:false,splitTrack:false,spotShadowAlpha:false,src:(t,e,a)=>(a.svgElement&&(t.obj="app",t.attr="srcCompat"),true),stackViewStyle:false,stateListAnimator:false,statusBarColor:false,strokeAlpha:false,strokeColor:false,strokeLineCap:false,strokeLineJoin:false,strokeMiterLimit:false,strokeWidth:false,submitBackground:false,subtitleTextAppearance:false,suggestionRowLayout:false,switchStyle:false,targetName:false,textAppearanceListItemSecondary:false,thumbTint:false,thumbTintMode:false,tileModeX:false,tileModeY:false,timePickerDialogTheme:false,timePickerMode:false,timePickerStyle:false,tintMode:false,titleTextAppearance:false,toId:false,toolbarStyle:false,touchscreenBlocksFocus:false,transitionGroup:false,transitionName:false,transitionVisibilityMode:false,translateX:false,translateY:false,translationZ:false,trimPathEnd:false,trimPathOffset:false,trimPathStart:false,viewportHeight:false,viewportWidth:false,voiceIcon:false,windowActivityTransitions:false,windowAllowEnterTransitionOverlap:false,windowAllowReturnTransitionOverlap:false,windowClipToOutline:false,windowContentTransitionManager:false,windowContentTransitions:false,windowDrawsSystemBarBackgrounds:false,windowElevation:false,windowEnterTransition:false,windowExitTransition:false,windowReenterTransition:false,windowReturnTransition:false,windowSharedElementEnterTransition:false,windowSharedElementExitTransition:false,windowSharedElementReenterTransition:false,windowSharedElementReturnTransition:false,windowSharedElementsUseOverlay:false,windowTransitionBackgroundFadeDuration:false,yearListItemTextAppearance:false,yearListSelectorColor:false},assign:{}},19:{android:{allowEmbedded:false,windowSwipeToDismiss:false},assign:{}},18:{android:{accessibilityLiveRegion:false,addPrintersActivity:false,advancedPrintOptionsActivity:false,apduServiceBanner:false,autoMirrored:false,category:false,fadingMode:false,fromScene:false,isAsciiCapable:false,keySet:false,requireDeviceUnlock:false,ssp:false,sspPattern:false,sspPrefix:false,startDelay:false,supportsSwitchingToNextInputMethod:false,targetId:false,toScene:false,transition:false,transitionOrdering:false,vendor:false,windowTranslucentNavigation:false,windowTranslucentStatus:false},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(t,e)=>e<26,canRequestFilterKeyEvents:false,canRequestTouchExplorationMode:false,childIndicatorEnd:false,childIndicatorStart:false,indicatorEnd:false,indicatorStart:false,layoutMode:false,mipMap:false,mirrorForRtl:false,requiredAccountType:false,requiredForAllUsers:false,restrictedAccountType:false,windowOverscan:false},assign:{}},16:{android:{checkedTextViewStyle:false,format12Hour:false,format24Hour:false,initialKeyguardLayout:false,labelFor:false,layoutDirection:false,layout_alignEnd:t=>G(t,"layout_alignRight"),layout_alignParentEnd:t=>G(t,"layout_alignParentRight"),layout_alignParentStart:t=>G(t,"layout_alignParentLeft"),layout_alignStart:t=>G(t,"layout_alignLeft"),layout_marginEnd:t=>G(t,"layout_marginRight"),layout_marginStart:t=>G(t,"layout_marginLeft"),layout_toEndOf:t=>G(t,"layout_toRightOf"),layout_toStartOf:t=>G(t,"layout_toLeftOf"),listPreferredItemPaddingEnd:t=>G(t,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:t=>G(t,"listPreferredItemPaddingLeft"),paddingEnd:t=>G(t,d.PADDING_RIGHT),paddingStart:t=>G(t,d.PADDING_LEFT),permissionFlags:false,permissionGroupFlags:false,presentationTheme:false,showOnLockScreen:false,singleUser:false,subtypeId:false,supportsRtl:false,textAlignment:false,textDirection:false,timeZone:false,widgetCategory:false},assign:{}},15:{android:{fontFamily:false,importantForAccessibility:false,isolatedProcess:false,keyboardLayout:false,mediaRouteButtonStyle:false,mediaRouteTypes:false,parentActivityName:false},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},V={android:{amPmBackgroundColor:(t,e)=>G(t,"headerBackground",e,23),amPmTextColor:(t,e)=>G(t,"headerTextColor",e,23),animationResolution:(t,e)=>e<16,canRequestEnhancedWebAccessibility:(t,e)=>e<26,dayOfWeekBackground:(t,e)=>e<23,dayOfWeekTextAppearance:(t,e)=>e<23,directionDescriptions:(t,e)=>e<23,headerAmPmTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),headerDayOfMonthTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),headerMonthTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),headerTimeTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),headerYearTextAppearance:(t,e)=>G(t,"headerTextColor",e,23),showOnLockScreen:(t,e)=>G(t,"showForAllUsers",e,23),targetDescriptions:(t,e)=>e<23,yearListItemTextAppearance:(t,e)=>G(t,"yearListTextColor",e,23),yearListSelectorColor:(t,e)=>e<23}};var F=Object.freeze({__proto__:null,API_ANDROID:H,DEPRECATED_ANDROID:V,getValue:function(t,e,a,i){var n,o;for(const r of[H[t],H[0]]){const t=null===(o=null===(n=r.assign[e])||void 0===n?void 0:n[a])||void 0===o?void 0:o[i];if(X(t))return t}return""}});const z=squared.lib,{truncate:U}=z.math,{capitalize:q,isPlainObject:Y}=z.util,{BOX_STANDARD:j}=squared.base.lib.enumeration,K=/^@\+?id\//;function $(t,e,a=3){return 0===t?0:0===e?1:parseFloat(U(Math.max(t/(t+e),0),a))}function Z(t,e=false,a=3){return"string"==typeof t&&(t=parseFloat(t)||0),e?U(t,a)+"sp":Math.round(t)+"dp"}function J(t){return t.replace(K,"")}function Q(t){switch(t){case"left":case"start":case"right":case"end":case"center_horizontal":return true}return false}function tt(t){switch(t){case"top":case"bottom":case"center_vertical":return true}return false}function et(t,e){const a={};let i=false;for(const n in t)n.startsWith(e)&&(a[q(n.substring(e.length),false)]=t[n],i=true);return i?a:void 0}function at(t,e,a){if(a>0){if(t.documentBody)switch(e){case 32:0===t.getBox(2)[0]&&(a-=t.marginTop);break;case 64:a-=t.marginRight;break;case 128:0===t.getBox(8)[0]&&(a-=t.marginBottom);break;case 256:a-=t.marginLeft}if(0===t.getBox(e)[0])switch(e){case 32:a+=t.borderTopWidth-t.paddingTop;break;case 64:a+=t.borderRightWidth-t.paddingRight;break;case 128:a+=t.borderBottomWidth-t.paddingBottom;break;case 256:a+=t.borderLeftWidth-t.paddingLeft}return Math.max(a,0)}if(a<0){switch(e){case 32:a+=t.marginTop;break;case 64:a+=t.marginRight;break;case 128:a+=t.marginBottom;break;case 256:a+=t.marginLeft}return a}return 0}function it(t,e){if(e?e.android||(e.android={}):e={android:{}},t){const{android:a,app:i}=t;a&&Object.assign(e.android,a),i&&(e.app||(e.app={}),Object.assign(e.app,i))}return e}function nt(t){const e={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(Y(t))for(const a in e)typeof t[a]==typeof e[a]&&(e[a]=t[a]);return e}function ot(t,e,a){return e&&a>=17&&u[t]||t}function rt(t){return h[t]?`xmlns:${t}="${h[t]}"`:""}function st(t){let e="";for(const a in h)t.includes(a+":")&&(e+="\n\t"+rt(a));return e}var lt=Object.freeze({__proto__:null,convertLength:Z,getDocumentId:J,isHorizontalAlign:Q,isVerticalAlign:tt,getDataSet:et,getHorizontalBias:function(t){const e=t.documentParent.box;return $(Math.max(0,t.actualRect("left","bounds")-e.left),Math.max(0,e.right-t.actualRect("right","bounds")),t.localSettings.floatPrecision)},getVerticalBias:function(t){const e=t.documentParent.box;return $(Math.max(0,t.actualRect("top","bounds")-e.top),Math.max(0,e.bottom-t.actualRect("bottom","bounds")),t.localSettings.floatPrecision)},adjustAbsolutePaddingOffset:at,createViewAttribute:it,createStyleAttribute:nt,localizeString:ot,getXmlNs:rt,getRootNs:st});const{lib:ct,base:ht}=squared,{BOX_MARGIN:dt,BOX_PADDING:ut,CSS_UNIT:ft,formatPX:pt,isLength:gt,isPercent:mt}=ct.css,{createElement:yt,getNamedItem:bt,newBoxModel:Tt}=ct.dom,{clamp:Et,truncate:St}=ct.math,{actualTextRangeRect:At}=ct.session,{capitalize:vt,convertFloat:xt,convertInt:wt,convertWord:_t,fromLastIndexOf:Nt,isNumber:It,isPlainObject:Rt,isString:Ct,replaceMap:Lt}=ct.util,{EXT_NAME:Pt}=ht.lib.constant,{BOX_STANDARD:Ot,NODE_ALIGNMENT:kt,NODE_PROCEDURE:Dt}=ht.lib.enumeration,Mt=ht.ResourceUI,{constraint:Wt,relative:Bt,relativeParent:Xt}=c,Gt=V.android,Ht=/^attr[A-Z]/,Vt=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,Ft=/[^\w$\-_.]/g,zt=/^rect\(0[a-z]*,\s+0[a-z]*,\s+0[a-z]*,\s+0[a-z]*\)$/;function Ut(t,e){switch(t){case"left":case"start":return e?"":t;case"center":return"center_horizontal";case"justify":case"initial":case"inherit":return""}return t}function qt(t,e){return!(!e.horizontal||t.blockWidth&&!t.hasWidth&&!t.hasPX("maxWidth")&&!t.innerMostWrapped.has("width",{type:4,not:"100%"}))&&(t.mergeGravity(!t.blockWidth&&t.pageFlow||t.outerWrapper?"layout_gravity":"gravity",e.leftRight?"center_horizontal":e.left?"right":"left"),true)}function Yt(t,e,a){const i=Zt(t,e);if(t.api>=28)t.android("lineHeight",pt(e),a);else{if(!(i>0))return;t.android("lineSpacingExtra",pt(i),a)}const n=Math.round(i);n>0&&(t.modifyBox(t.inline?2:32,n),t.block&&!t.floating||t.modifyBox(t.inline?8:128,Math.floor(i)))}function jt(t,e,a,i,n){const o=t.cssInitial("lineHeight");if(!t.imageOrSvgElement&&!t.renderChildren.length&&0!==t.actualHeight&&"initial"!==o)if(t.multiline)Yt(t,e,false);else{const r=t.height,s=(s,l=false)=>{let c=Math.round(s);if(c>0){const h=(a||r>e)&&(t.styleText||l)&&!t.inline&&!(t.inputElement&&!gt(o,true));i&&(h?c>0&&t.modifyBox(32,c):!a&&t.baselineAltered||(c-=t.paddingTop,c>0&&t.modifyBox(2,c))),n&&(s=Math.floor(s),h?s>0&&t.modifyBox(128,s):(s-=t.paddingBottom)>0&&t.modifyBox(8,s))}};if(e===r)t.mergeGravity("gravity","center_vertical",false);else if(r>0)if(t.styleText)s(Zt(t,e));else{const a=e/2-t.paddingTop;a>0&&t.modifyBox(32,a)}else if(t.textElement)s(Zt(t,e));else if(t.inputElement){const a=yt(document.body,"div",Object.assign(Object.assign({},t.textStyle),{visibility:"hidden"}));a.innerText="AgjpyZ";const i=At(a).height;document.body.removeChild(a);let n=1;switch(t.tagName){case"SELECT":n=t.toElementInt("size",1);break;case"TEXTAREA":n=t.toElementInt("rows",1)}s((e-i*Math.max(n,1))/2,true)}else s((e-t.bounds.height)/2)}}function Kt(t,e){if("0px"===e){const e=t.renderParent;return!!e&&(e.layoutConstraint||e.layoutGrid)}return false}function $t(t,e){const a=t+"_horizontal",i=t+"_vertical";(e.has(t)||e.has(a)&&e.has(i))&&(e.delete(a),e.delete(i),e.add(t))}function Zt(t,e){let a=NaN;if(t.styleText){const e=t.cssTryAll({display:"inline-block",height:"auto","max-height":"none","min-height":"auto","line-height":"normal","white-space":"nowrap"});e&&(a=At(t.element).height,t.cssFinally(e))}else if(t.plainText){const e=t.bounds;a=e.height/(e.numberOfLines||1)}return(e-(isNaN(a)?t.boundingClientRect.height:a))/2}function Jt(t,e){if(t.support.maxDimension&&(e&&t.floating||!e))return;if(!t.hasPX(e?"width":"height",false)){const a=t.cssInitial(e?"minWidth":"minHeight",true);gt(a,true)&&parseFloat(a)>0&&(e?ne(t)&&(t.setLayoutWidth("0px",false),t.flexibleWidth&&(t.app("layout_constraintWidth_min",pt(t.parseWidth(a)+t.contentBoxWidth)),t.css("minWidth","auto"))):oe(t)&&(t.setLayoutHeight("0px",false),t.flexibleHeight&&(t.app("layout_constraintHeight_min",pt(t.parseHeight(a)+t.contentBoxHeight)),t.css(e?"minWidth":"minHeight","auto"))))}const a=t.cssInitial(e?"maxWidth":"maxHeight",true);if(gt(a,true)&&"100%"!==a)if(e){if(ne(t)){const e=t.parseWidth(a);(e>t.width||t.percentWidth>0)&&(t.setLayoutWidth("0px"),t.app("layout_constraintWidth_max",pt(e+(t.contentBox?t.contentBoxWidth:0))),t.css("maxWidth","auto"))}}else if(oe(t)){const e=t.parseHeight(a);(e>t.height||t.percentHeight>0)&&(t.setLayoutHeight("0px"),t.app("layout_constraintHeight_max",pt(e+(t.contentBox?t.contentBoxHeight:0))),t.css("maxHeight","auto"))}}function Qt(t,e,a,i){if(e<1&&!isNaN(i)&&t.pageFlow){const n=t.actualParent||t.documentParent;let o,r;if(a){const e=n.box.width;o=n.gridElement?0:t.contentBoxWidth/e,r=(Math.max(t.marginLeft,0)+t.marginRight)/e}else{const e=n.box.height;o=n.gridElement?0:t.contentBoxHeight/e,r=(Math.max(t.marginTop,0)+t.marginBottom)/e}1===i&&e+r>=i?e=i-r:(o>0&&(i<o?(o=Math.max(i,0),i=0):i-=o),0===i?o-=r:i=Math.max(i-r,0),e=Math.min(e+o,1))}return 1!==e||t.hasPX(a?"maxWidth":"maxHeight")?(t.app(a?"layout_constraintWidth_percent":"layout_constraintHeight_percent",St(e,t.localSettings.floatPrecision)),te(t,"0px",a,false)):te(t,"match_parent",a,false),i}function te(t,e,a,i){a?t.setLayoutWidth(e,i):t.setLayoutHeight(e,i)}function ee(t,e,a){const i=e?t.percentWidth:t.percentHeight;return i>0?Qt(t,i,e,a):a}function ae(t,e=1){const a=t.percentWidth;if(a>0)if(t.renderParent.hasPX("width",false)&&!(t.actualParent||t.documentParent).layoutElement)a<1?t.setLayoutWidth(pt(t.actualWidth)):t.setLayoutWidth("match_parent",false);else if(!t.inputElement)return ee(t,true,e);return e}function ie(t,e=1){const a=t.percentHeight;if(a>0)if(t.renderParent.hasPX("height",false)&&!(t.actualParent||t.documentParent).layoutElement)a<1?t.setLayoutHeight(pt(t.actualHeight)):t.setLayoutHeight("match_parent",false);else if(!t.inputElement)return ee(t,false,e);return e}function ne(t){if(t.documentRoot&&(t.hasWidth||t.blockStatic||t.blockWidth))return true;let a=t.renderParent,i=0;while(a){if(!a.inlineWidth&&(a.hasWidth||parseInt(a.layoutWidth)>0||a.of(e.CONSTRAINT,64)||a.documentRoot&&(a.blockWidth||a.blockStatic)))return true;if(a.flexibleWidth){if(++i>1)return false}else if(a.inlineWidth||a.naturalElement&&a.inlineVertical)return false;a=a.renderParent}return false}function oe(t){var e;if(t.documentRoot&&t.hasHeight)return true;const a=t.renderParent;return!!a&&(a.hasHeight||a.layoutConstraint&&a.blockHeight)||true===(null===(e=t.absoluteParent)||void 0===e?void 0:e.hasHeight)}const re=t=>0===t.bounds.width&&0===t.contentBoxWidth&&t.textEmpty&&0===t.marginLeft&&0===t.marginRight&&!t.visibleStyle.background,se=t=>0===t.bounds.height&&0===t.contentBoxHeight&&(0===t.marginTop&&0===t.marginBottom||"hidden"===t.css("overflow"));function le(t,e){const a=ce(t,e);a.size>1&&($t("center",a),$t("fill",a));let i="",n="",o="",r="";for(const t of a.values())Q(t)?n=t:tt(t)?o=t:r+=(""!==r?"|":"")+t;i=""!==n&&""!==o?n+"|"+o:n||o,""!==r&&(i+=(""!==i?"|":"")+r),""!==i?t.android(e,i):t.delete("android",e)}const ce=(t,e)=>new Set(t.android(e).split("|"));var he=t=>class a extends t{constructor(t=0,e="0",a,i){super(t,e,a),this.api=29,this.renderChildren=[],this.constraint={horizontal:false,vertical:false,current:{}},this._namespaces=["android","app"],this._cached={},this._containerType=0,this._controlName="",this._boxAdjustment=Tt(),this._boxReset=Tt(),this.__android={},this.__app={},this.init(),i?(i(this),this._localization=this.hasProcedure(Dt.LOCALIZATION)&&this.localSettings.supportRTL):this._localization=false}static setConstraintDimension(t,e=NaN){return e=ae(t,e),ie(t,1),t.inputElement||(Jt(t,true),Jt(t,false)),e}static setFlexDimension(t,e){const{grow:a,basis:i,shrink:n}=t.flexbox,o="width"===e,r=e=>a>0?(t.app(o?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",St(a,t.localSettings.floatPrecision)),true):(e>0&&(n>1?e/=n:n>1&&(e*=1-n),t.app(o?"layout_constraintWidth_min":"layout_constraintHeight_min",pt(e))),false);if(gt(i))r(t.parseUnit(i,e)),te(t,"0px",o,true);else if("0%"!==i&&mt(i)){r(0);const e=parseFloat(i)/100;Qt(t,e,!!o,NaN)}else{let a=false;t.hasFlex(o?"row":"column")&&(a=r(t.hasPX(e,false)?o?t.actualWidth:t.actualHeight:0),a&&te(t,"0px",o,true)),a||(o?ae(t,0):ie(t,0))}n>1&&t.app(o?"layout_constrainedWidth":"layout_constrainedHeight","true"),o&&ie(t),t.inputElement||t.imageOrSvgElement||(Jt(t,true),Jt(t,false))}static availablePercent(t,e,a){const i="width"===e;let n=1,o=0;return t.forEach(t=>{if((t=t.innerMostWrapped).pageFlow){if(++o,t.hasPX(e,true,true)){const o=t.cssInitial(e);if(mt(o))return void(n-=parseFloat(o)/100);if(gt(o))return void(n-=i?Math.max(t.actualWidth+t.marginLeft+t.marginRight,0)/a:Math.max(t.actualHeight+t.marginTop+t.marginBottom,0)/a)}n-=t.linear[e]/a}}),o>0?Math.max(0,n):1}static getControlName(t,a=29){const i=e[t];return a>=29&&o[i]||n[i]}setControlType(t,a){this.controlName=t,a?this._containerType=a:0===this._containerType&&(this._containerType=e.UNKNOWN)}setLayout(){if(this.plainText)return this.setLayoutWidth("wrap_content",false),void this.setLayoutHeight("wrap_content",false);switch(this.css("visibility")){case"visible":break;case"hidden":this.hide({hidden:true});break;case"collapse":this.hide({collapse:true})}!this.pageFlow&&zt.test(this.css("clip"))&&this.hide({hidden:true});const t=this.actualParent||this.documentParent,i=this.renderParent,n=!i.inlineWidth,o=!i.inlineHeight,r=this.support.maxDimension,s=!i.layoutConstraint||i.flexibleWidth||i.inlineWidth&&!this.renderChildren.length||this.onlyChild||!(!this.textElement&&!this.inputElement&&!this.controlElement&&this.alignParent("left")&&this.alignParent("right")||this.alignSibling("leftRight")||this.alignSibling("rightLeft"))?"match_parent":"0px";let{layoutWidth:l,layoutHeight:c}=this;if(""===l){if(!this.hasPX("width")||this.inlineStatic&&""!==this.cssInitial("width")){if(this.length)switch(this.cssInitial("width")){case"max-content":case"fit-content":this.renderEach(t=>{t.hasPX("width")||t.hasPX("maxWidth")||t.setLayoutWidth("wrap_content")}),l="wrap_content";break;case"min-content":{const t=[];let e=0;if(this.renderEach(a=>{!a.textElement||a.hasPX("width")?e=Math.max(a.actualWidth,e):(e=Math.max(a.width,e),a.support.maxDimension&&t.push(a))}),e>0&&t.length){const a=pt(e);t.forEach(t=>{t.hasPX("maxWidth")||t.css("maxWidth",a)})}l="wrap_content";break}}}else{const e=this.css("width");let o=-1;if(mt(e)){const c=()=>"100%"===e&&n&&(r||!this.hasPX("maxWidth"));if(this.inputElement)c()?l=s:o=this.actualWidth;else if(i.layoutConstraint)n?c()?l=s:(a.setConstraintDimension(this,1),l=this.layoutWidth):o=this.actualWidth;else if(i.layoutGrid)l="0px",this.android("layout_columnWeight",St(parseFloat(e)/100,this.localSettings.floatPrecision));else if(this.imageElement)c()?l=s:o=this.bounds.width;else if("100%"===e){if(!r&&this.hasPX("maxWidth")){const e=this.css("maxWidth"),a=this.parseWidth(e),i=this.absoluteParent||t;"100%"===e?n&&Math.ceil(a)>=i.box.width?l=s:o=Math.min(this.actualWidth,a):a>0&&(this.blockDimension?o=Math.min(this.actualWidth,a):l=Math.floor(a)<i.box.width?"wrap_content":s)}""===l&&(this.documentRoot||n)&&(l=s)}else o=this.actualWidth}else gt(e)&&(o=this.actualWidth);-1!==o&&(l=pt(o))}if(""===l)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage)l=pt(this.actualWidth);else if(this.imageElement&&this.hasHeight)l="wrap_content";else if(n&&(this.nodeGroup&&(i.layoutFrame&&(this.hasAlign(512)||this.hasAlign(2048))||this.hasAlign(32768))||this.layoutGrid&&this.some(t=>t.flexibleWidth)))l="match_parent";else if(!this.imageElement&&!this.inputElement&&!this.controlElement){const e=e=>{var a;if(t.pageFlow||!this.some(t=>t.textElement)){if(this.styleText){if((null===(a=this.textBounds)||void 0===a?void 0:a.numberOfLines)>1)return void(e&&(l="match_parent"));if(this.cssTry("display","inline-block")){const e=Math.ceil(At(this.element).width);return l=e>=t.box.width?"wrap_content":"match_parent",void this.cssFinally("display")}}l=s}};i.layoutGrid?this.blockStatic&&"1"===i.android("columnCount")&&(l=s):this.blockStatic?t.layoutElement?n&&t.gridElement&&!i.layoutElement&&(l=s):this.nodeGroup||i.hasWidth||this.hasAlign(64)||this.originalRoot||this.documentRoot?l=s:e(true):this.floating&&this.block&&!this.rightAligned&&this.alignParent("left")&&this.alignParent("right")?l="match_parent":this.inlineStatic&&!this.blockDimension&&this.naturalElement&&this.some(t=>t.naturalElement&&t.blockStatic)&&!t.layoutElement&&(i.layoutVertical||!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))&&e(false)}this.setLayoutWidth(l||"wrap_content")}if(""===this.layoutHeight){if(this.hasPX("height")&&(!this.inlineStatic||""===this.cssInitial("height"))){const a=this.css("height");let i=-1;if(mt(a)){if(this.inputElement)i=this.bounds.height;else if(this.imageElement)"100%"===a&&o?c="match_parent":i=this.bounds.height;else if("100%"===a){if(!r){const e=this.css("maxHeight"),a=this.parseHeight(e),n=this.absoluteParent||t;"100%"===e?o&&Math.ceil(a)>=n.box.height?c="match_parent":i=Math.min(this.actualHeight,a):a>0&&(this.blockDimension?i=Math.min(this.actualHeight,a):c=Math.floor(a)<n.box.height?"wrap_content":"match_parent")}""===c&&(this.documentRoot||o&&this.onlyChild||"fixed"===this.css("position"))&&(c="match_parent")}""===c&&this.hasHeight&&(i=this.actualHeight)}else gt(a)&&(i=this.actualHeight);-1!==i&&(this.is(e.LINE)&&"HR"!==this.tagName&&this.hasPX("height",true,true)&&(i+=this.borderTopWidth+this.borderBottomWidth),this.styleText&&this.multiline&&!t.layoutElement&&!this.hasPX("minHeight")?(this.android("minHeight",pt(i)),c="wrap_content"):c=pt(i))}""===c&&(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage?i.layoutConstraint&&!this.floating&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||t).box.height?(c="0px",this.anchor("bottom","parent")):this.naturalChild&&!this.pseudoElement&&(c=pt(this.actualHeight)):this.imageElement&&this.hasWidth?c="wrap_content":"table-cell"===this.display&&t.hasHeight&&(c="match_parent")),this.setLayoutHeight(c||"wrap_content")}else"0px"===c&&i.inlineHeight&&""===i.android("minHeight")&&!t.layoutElement&&t===this.absoluteParent&&this.setLayoutHeight("wrap_content");if(this.hasPX("minWidth")&&(!this.hasFlex("row")||t.flexElement&&!this.flexibleWidth)){const t=this.css("minWidth");"100%"===t&&this.inlineWidth?this.setLayoutWidth(s):this.android("minWidth",pt(this.parseWidth(t)+(this.contentBox?this.contentBoxWidth:0)),false)}if(this.hasPX("minHeight")&&"table-cell"!==this.display&&(!this.hasFlex("column")||t.flexElement&&!this.flexibleHeight)){const t=this.css("minHeight");"100%"===t&&o&&this.inlineHeight?this.setLayoutHeight("match_parent"):this.android("minHeight",pt(this.parseHeight(t)+(this.contentBox?this.contentBoxHeight:0)),false)}if(r){const t=this.css("maxWidth");let e=this.css("maxHeight"),a=-1;if(gt(t,true)?"100%"===t?this.svgElement?a=this.bounds.width:this.imageElement?(a=this.toElementInt("naturalWidth"),a>this.documentParent.actualWidth&&(this.setLayoutWidth("match_parent"),this.setLayoutHeight("wrap_content"),a=-1,e="")):n&&this.setLayoutWidth("match_parent"):a=this.parseWidth(t):this.pageFlow||!this.multiline||!this.inlineWidth||this.preserveWhiteSpace||!this.ascend({condition:t=>t.hasPX("width")}).length&&this.textContent.includes("\n")||(a=this.actualWidth),a>=0&&this.android("maxWidth",pt(a),false),gt(e,true)){let t=-1;"100%"!==e||this.svgElement?t=this.parseHeight(e):o?this.setLayoutHeight("match_parent"):t=this.imageElement?this.toElementInt("naturalHeight"):this.parseHeight(e),t>=0&&this.android("maxHeight",pt(t))}}}setAlignment(){const t=this.outerMostWrapper,e=this.renderParent,a=t.renderParent||e,i=this.autoMargin;let n=Ut(this.cssInitial("textAlign",true),false),o=Ut(this.cssAscend("textAlign"),true);if(this.nodeGroup&&""===n&&!this.hasAlign(512)){const t=this.actualParent;t&&(n=Ut(t.cssInitial("textAlign",true),false))}if(this.pageFlow){let r="";if(this.inlineVertical&&(a.layoutFrame||a.layoutGrid)||"table-cell"===this.display){const e="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",true)){case"top":t.mergeGravity(e,"top");break;case"middle":t.mergeGravity(e,"center_vertical");break;case"bottom":t.mergeGravity(e,"bottom")}}if(this.blockWidth?this.rightAligned&&t.nodeGroup&&t.layoutVertical&&t.renderEach(t=>{t.rightAligned&&t.mergeGravity("layout_gravity","right")}):((a.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))&&(this.floating?t.mergeGravity("layout_gravity",this.float):qt(t,i)||""===n||!this.hasWidth||this.blockStatic||this.inputElement||"table"===this.display||t.mergeGravity("layout_gravity",n,false)),this.rightAligned?r="right":this.nodeGroup&&(this.renderChildren.every(t=>t.rightAligned)?r="right":this.hasAlign(512)&&!this.renderChildren.some(t=>t.rightAligned)&&(r="left"))),e.layoutFrame&&(qt(this,i)||(this.innerWrapped||(this.floating&&(r=this.float),""!==r&&!e.naturalElement&&(e.inlineWidth||!e.documentRoot&&this.onlyChild)&&(e.mergeGravity("layout_gravity",r),r="")),this.centerAligned?this.mergeGravity("layout_gravity",Ut("center",false)):this.rightAligned&&e.blockWidth&&this.mergeGravity("layout_gravity","right")),this.onlyChild&&"table-cell"===e.display)){let t;switch(e.css("verticalAlign")){case"top":t="top";break;case"bottom":t="bottom";break;default:t="center_vertical"}this.mergeGravity("layout_gravity",t)}""!==r?this.blockWidth?""!==n&&"right"!==r||(n=r):(t.blockWidth&&this!==t?this:t).mergeGravity("layout_gravity",r):qt(t.inlineWidth?t:this,i)&&""!==n&&(o="")}""===o||!this.blockStatic||this.centerAligned||this.rightAligned||t.mergeGravity("layout_gravity","left",false),this.layoutConstraint||this.layoutFrame||this.layoutElement||this.layoutGrid||(""!==n?this.imageOrSvgElement||this.mergeGravity("gravity",n):""===o||this.inputElement||(this.imageOrSvgElement?this.pageFlow&&this.mergeGravity("layout_gravity",o):this.nodeGroup&&this.hasAlign(512)||this.mergeGravity("gravity",o))),i.vertical&&(e.layoutFrame||e.layoutVertical&&e.layoutLinear)&&t.mergeGravity("layout_gravity",i.topBottom?"center_vertical":i.top?"bottom":"top")}setBoxSpacing(){const t=this._boxReset,a=this._boxAdjustment,i=this.renderParent,o=(o,r,s)=>{let l=0,c=0,h=0,u=0;for(let e=0;e<4;++e){const i=o[e];let n=0===t[i]?this[i]:0;if(0!==n)switch(i){case"marginRight":if(this.inline){const t=this.documentParent.box.right,e=this.bounds.right;if(Math.floor(e)>t){this.onlyChild||this.alignParent("left")||this.setSingleLine(true);continue}e+n>t&&(n=Et(t-e,0,n))}break;case"marginBottom":n<0&&this.pageFlow&&!this.blockStatic&&(n=0);break;case"paddingTop":n=this.actualPadding(i,n);break;case"paddingBottom":if(this.hasPX("height",false,true)&&(!this.layoutElement&&(this.layoutVertical||this.layoutFrame)||!this.pageFlow)||this.documentParent.gridElement&&this.hasPX("height",false))continue;if(this.floatContainer){let t=Number.NEGATIVE_INFINITY;this.naturalChildren.forEach(e=>{e.floating&&(t=Math.max(e.bounds.bottom,t))}),n=Et(this.bounds.bottom-t,0,n)}else n=this.actualPadding(i,n)}switch(a&&(n+=a[i]),e){case 0:l=n;break;case 1:c=n;break;case 2:h=n;break;case 3:u=n}}if(r){if(this.floating){let t=i.renderChildren.find(t=>!t.floating);if(t){const e=Math.floor(this.bounds.top);let a;while(Math.floor(t.bounds.top)===e){a=t;const e=t.innerWrapped;if(!e)break;t=e}if(a){const[t,e]=a.getBox(2);l+=(0===t?a.marginTop:0)+e}}}if(this.positionStatic&&!this.blockWidth&&(u<0||c<0))switch(this.cssAscend("textAlign")){case"center":u<c?(c+=Math.abs(u),c/=2,u=0):(u+=Math.abs(c),u/=2,c=0);break;case"right":case"end":u<0&&(u=0)}switch(this.controlName){case n.RADIO:case n.CHECKBOX:l=Math.max(l-4,0),h=Math.max(h-4,0);break;case n.SELECT:l=Math.max(l-2,0),h=Math.max(h-2,0)}if(l<0&&(this.pageFlow?this.blockDimension&&!this.inputElement&&this.translateY(l)&&(this.anchorChain("bottom").forEach(t=>t.translateY(l)),l=0):h>=0&&this.leftTopAxis&&(this.hasPX("top")||!this.hasPX("bottom"))&&this.translateY(l)&&(l=0)),h<0&&(this.pageFlow?this.blockDimension&&!this.inputElement&&i.layoutConstraint&&(this.anchorChain("bottom").forEach(t=>t.translateY(-h)),h=0):l>=0&&this.leftTopAxis&&this.hasPX("bottom")&&!this.hasPX("top")&&this.translateY(-h)&&(h=0)),u<0)if(this.pageFlow)if("right"===this.float){const t=this.anchorChain("left");u=Math.min(-u,-this.bounds.width),t.forEach(t=>t.translateX(-u)),u=0}else this.blockDimension&&this.translateX(u)&&(this.anchorChain("right").forEach(t=>t.translateX(u)),u=0);else c>=0&&this.leftTopAxis&&(this.hasPX("left")||!this.hasPX("right"))&&this.translateX(u)&&(u=0);c<0&&(this.pageFlow?this.rightAligned?this.translateX(-c)&&(c=0):this.blockDimension&&i.layoutConstraint&&(this.anchorChain("right").forEach(t=>t.translateX(c)),c=0):u>=0&&this.leftTopAxis&&this.hasPX("right")&&!this.hasPX("left")&&this.translateX(-c)&&(c=0))}else this.visibleStyle.borderWidth&&!this.is(e.LINE)&&(l+=this.borderTopWidth,h+=this.borderBottomWidth,c+=this.borderRightWidth,u+=this.borderLeftWidth);if(0!==l||0!==u||0!==h||0!==c){let t=0,e=0,a=0;!s&&this.api>=26&&(l===c&&c===h&&h===u?t=l:(u===c&&(e=u),l===h&&(a=l))),0!==t?this.android(r?d.MARGIN:d.PADDING,pt(t)):(0!==e?this.android(r?d.MARGIN_HORIZONTAL:d.PADDING_HORIZONTAL,pt(e)):(0!==u&&this.android(this.localizeString(r?d.MARGIN_LEFT:d.PADDING_LEFT),pt(u)),0!==c&&this.android(this.localizeString(r?d.MARGIN_RIGHT:d.PADDING_RIGHT),pt(c))),0!==a?this.android(r?d.MARGIN_VERTICAL:d.PADDING_VERTICAL,pt(a)):(0!==l&&this.android(r?d.MARGIN_TOP:d.PADDING_TOP,pt(l)),0!==h&&this.android(r?d.MARGIN_BOTTOM:d.PADDING_BOTTOM,pt(h))))}};o(dt,true,i.layoutGrid),o(ut,false,false)}apply(t){for(const e in t){const a=t[e];if(Rt(a))for(const t in a)this.attr(e,t,a[t]);else a&&this.attr("_",e,a.toString())}}clone(t,e=true,i=false){const n=new a(t||this.id,this.sessionId,this.element||void 0);if(n.unsafe("localization",this._localization),n.localSettings=Object.assign({},this.localSettings),void 0!==t?n.setControlType(this.controlName,this.containerType):(n.controlId=this.controlId,n.controlName=this.controlName,n.containerType=this.containerType),this.cloneBase(n),e&&(Object.assign(n.unsafe("boxReset"),this._boxReset),Object.assign(n.unsafe("boxAdjustment"),this._boxAdjustment),this._namespaces.forEach(t=>{const e=this["__"+t];for(const a in e)n.attr(t,a,"id"===a&&"android"===t?n.documentId:e[a])})),i){n.anchorClear();const t=this.documentId;n.anchor("left",t)&&n.setBox(16,{reset:1,adjustment:0}),n.anchor("top",t)&&n.setBox(2,{reset:1,adjustment:0})}return n.saveAsInitial(true),n}extractAttributes(t){if("rtl"!==this.dir||this.imageOrSvgElement||(this.textElement?this.android("textDirection","rtl"):this.renderChildren.length&&this.android("layoutDirection","rtl")),this.styleElement||this.hasAlign(16384)){const t=et(this.dataset,"android");if(t)for(const e in t){const a="attr"===e?"android":Ht.test(e)?vt(e.substring(4),false):"";""!==a&&t[e].split(";").forEach(t=>{const[e,i]=t.split("::");i&&this.attr(a,e,i)})}if(!this.svgElement){const t=this.css("opacity");"1"!==t&&It(t)&&this.android("alpha",t)}}const e="\n"+"\t".repeat(t);let a="";return this.combine().forEach(t=>a+=e+t),a}alignParent(t){const e=this.anchorTarget,a=e.renderParent;if(a)if(a.layoutConstraint){const a=Wt[t];if(a)return"parent"===e.app(this.localizeString(a))}else if(a.layoutRelative){const a=Xt[t];if(a)return"true"===e.android(this.localizeString(a))}else if(a.layoutLinear){const i=a.renderChildren;if(a.layoutVertical)switch(t){case"top":return e===i[0];case"bottom":return e===i[i.length-1]}else switch(t){case"left":case"start":return e===i[0];case"right":case"end":return e===i[i.length-1]}}return false}alignSibling(t,e){const a=this.anchorTarget,i=a.renderParent;if(i)if(e){if(i.layoutConstraint){const i=Wt[t];i&&a.app(this.localizeString(i),e)}else if(i.layoutRelative){const i=Bt[t];i&&a.android(this.localizeString(i),e)}}else if(i.layoutConstraint){const e=Wt[t];if(e){const t=a.app(this.localizeString(e));return"parent"!==t&&t!==i.documentId?t:""}}else if(i.layoutRelative){const e=Bt[t];if(e)return a.android(this.localizeString(e))}return""}actualRect(t,e="linear"){let a=this[e][t];if(this.positionRelative&&this.floating)switch(t){case"top":case"bottom":this.hasPX("top")?a+=this.top:a-=this.bottom;break;case"left":this.hasPX("left")?a+=this.left:a-=this.right;case"right":this.hasPX("left")?a+=this.left:a-=this.right}if(this.inputElement){const i=this.companion;if((null==i?void 0:i.labelFor)===this&&!i.visible){const n=i[e][t];switch(t){case"top":case"left":return Math.min(n,a);case"right":case"bottom":return Math.max(n,a)}}}return a}translateX(t,e={}){const a=this.anchorTarget,i=a.renderParent;if(null==i?void 0:i.layoutConstraint){let n=wt(a.android("translationX"));if(false===e.oppose&&(n>0&&t<0||n<0&&t>0))return false;if(false!==e.accumulate&&(n+=t),e.contain){const{left:t,right:e}=i.box,{left:a,right:o}=this.linear;a+n<t?n=Math.max(a-t,0):o+n>e&&(n=Math.max(e-o,0))}return 0!==n?a.android("translationX",pt(n)):a.delete("android","translationX"),true}return false}translateY(t,e={}){const a=this.anchorTarget,i=a.renderParent;if(null==i?void 0:i.layoutConstraint){let n=wt(a.android("translationY"));if(false===e.oppose&&(n>0&&t<0||n<0&&t>0))return false;if(false!==e.accumulate&&(n+=t),e.contain){const{top:t,bottom:e}=i.box,{top:a,bottom:o}=this.linear;a+n<t?n=Math.max(a-t,0):o+n>e&&(n=Math.max(e-o,0))}return 0!==n?a.android("translationY",pt(n)):a.delete("android","translationY"),true}return false}localizeString(t){return ot(t,this._localization,this.api)}removeTry(t,e){return t&&!e&&(e=()=>t.anchorClear()),super.removeTry(t,e)}hasFlex(t){if(super.hasFlex(t)){const e=this.actualParent;if("column"===t&&!e.hasHeight){const t=e.actualParent;if(!t)return false;if(t.flexElement&&!t.flexdata.column){if(!t.hasHeight){let a=0,i=0;for(const n of t){const t=(n.data(Pt.FLEXBOX,"boundsData")||n.bounds).height;if(t>a&&(a=t),n===e&&(i=t,i<a))break}if(i>=a)return false}}else if(!t.gridElement)return false}const{grow:a,shrink:i}=this.flexbox;return a>0||1!==i}return false}hide(t){if(t){if(t.hidden)return void this.android("visibility","invisible");if(t.collapse)return void this.android("visibility","gone")}super.hide(t)}android(t,e,a=true){return e&&""!==(e=this.attr("android",t,e,a))?e:this.__android[t]||""}app(t,e,a=true){return e&&""!==(e=this.attr("app",t,e,a))?e:this.__app[t]||""}formatted(t,e=true){const a=Vt.exec(t);a&&this.attr(a[1]||"_",a[2],a[3],e)}anchor(t,e="",a){const i=this.anchorTarget,n=i.renderParent;if(n&&i.documentId!==e)if(n.layoutConstraint){if(""===e||void 0===i.constraint.current[t]||a){const n="parent"===e;void 0===a&&""!==e&&(a=n);const o=Wt[t];if(o){let r=false;switch(i.app(this.localizeString(o),e,a),t){case"left":case"right":n&&(i.constraint.horizontal=true);case"leftRight":case"rightLeft":r=true;break;case"top":case"bottom":case"baseline":n&&(i.constraint.vertical=true)}return i.constraint.current[t]={documentId:e,horizontal:r},true}}}else if(n.layoutRelative){const n="true"===e;void 0===a&&""!==e&&(a=n);const o=(n?Xt:Bt)[t];if(o)return i.android(this.localizeString(o),e,a),true}return false}anchorParent(t,e,a="",i){const n=this.anchorTarget,o=n.renderParent;if(o){const r="horizontal"===t;if(o.layoutConstraint){if(i||!n.constraint[t])return r?(n.anchor("left","parent",i),n.anchor("right","parent",i),n.constraint.horizontal=true):(n.anchor("top","parent",i),n.anchor("bottom","parent",i),n.constraint.vertical=true),void 0!==e&&n.anchorStyle(t,e,a,i),true}else if(o.layoutRelative)return n.anchor(r?"centerHorizontal":"centerVertical","true",i),true}return false}anchorStyle(t,e,a,i=true){const n=this.anchorTarget;"horizontal"===t?(n.app("layout_constraintHorizontal_bias",e.toString(),i),a&&n.app("layout_constraintHorizontal_chainStyle",a,i)):(n.app("layout_constraintVertical_bias",e.toString(),i),a&&n.app("layout_constraintVertical_chainStyle",a,i))}anchorChain(t){const e=[],a=this.anchorTarget,i=a.renderParent;if(i&&(i.layoutConstraint||i.layoutRelative)){let n,o;switch(t){case"top":n="topBottom",o="bottomTop";break;case"right":n="rightLeft",o="leftRight";break;case"bottom":n="bottomTop",o="topBottom";break;case"left":n="leftRight",o="rightLeft"}const r=i.renderChildren;let s=a;do{const t=s.alignSibling(n);if(""===t)break;{const a=r.find(e=>e.documentId===t);if((null==a?void 0:a.alignSibling(o))!==s.documentId)break;e.push(a),s=a}}while(true)}return e}anchorDelete(...t){const e=this.anchorTarget,a=e.renderParent;if(a)if(a.layoutConstraint)e.delete("app",...Lt(t,t=>this.localizeString(Wt[t])));else if(a.layoutRelative){const a=[];t.forEach(t=>{let e=Bt[t];e&&a.push(this.localizeString(e)),e=Xt[t],e&&a.push(this.localizeString(e))}),e.delete("android",...a)}}anchorClear(){const t=this.anchorTarget,e=t.renderParent;e&&(e.layoutConstraint?(t.anchorDelete(...Object.keys(Wt)),t.delete("app","layout_constraintHorizontal_bias","layout_constraintHorizontal_chainStyle","layout_constraintVertical_bias","layout_constraintVertical_chainStyle")):e.layoutRelative&&(t.anchorDelete(...Object.keys(Xt)),t.anchorDelete(...Object.keys(Bt))))}supported(t,e={}){var a;if("function"==typeof Gt[t]){const a=Gt[t](e,this.api,this);if(!a||Object.keys(e).length)return a}let i=this.api;while(i<=29){const n=null===(a=H[i++])||void 0===a?void 0:a.android[t];switch(typeof n){case"boolean":return n;case"function":return n(e,this.api,this)}}return true}combine(...t){const e=0===t.length,a=[];let i=false,n="";return this._namespaces.forEach(o=>{if(e||t.includes(o)){const t=this["__"+o];if(t){let e=o+":";switch(o){case"android":if(this.api<29)for(let i in t)if("id"===i)n=t[i];else{const n={};let o=t[i];if(!this.supported(i,n))continue;Object.keys(n).length&&(Ct(n.attr)&&(i=n.attr),Ct(n.value)&&(o=n.value)),a.push(e+`${i}="${o}"`)}else for(const i in t)"id"===i?n=t[i]:a.push(e+`${i}="${t[i]}"`);i=true;break;case"_":e="";default:for(const i in t)a.push(e+`${i}="${t[i]}"`)}}}}),a.sort((t,e)=>t>e?1:-1),i&&a.unshift('android:id="'+(n||"@+id/"+this.controlId)+'"'),a}mergeGravity(t,a,i=true){if("layout_gravity"===t){const t=this.renderParent;if(t){if(Q(a)&&(this.blockWidth||t.inlineWidth&&this.onlyChild||!i&&this.outerWrapper&&this.hasPX("maxWidth")))return;if(t.layoutRelative){if("center_horizontal"===a&&!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))return this.anchorDelete("left","right"),void this.anchor("centerHorizontal","true")}else if(t.layoutConstraint){if(!t.layoutHorizontal&&!this.positioned)switch(a){case"top":this.anchorStyle("vertical",0);break;case"right":case"end":this.alignSibling("rightLeft")||(this.anchor("right","parent",false),(this.alignParent("left")||this.alignSibling("left"))&&this.anchorStyle("horizontal",1));break;case"bottom":this.anchorStyle("vertical",1);break;case"left":case"start":this.alignSibling("leftRight")||(this.anchor("left","parent",false),(this.alignParent("right")||this.alignSibling("right"))&&this.anchorStyle("horizontal",0));break;case"center_horizontal":this.alignSibling("leftRight")||this.alignSibling("rightLeft")||this.anchorParent("horizontal",.5)}return}}}else switch(this.tagName){case"#text":case"IMG":case"SVG":case"HR":return;case"INPUT":switch(this.toElementString("type")){case"radio":case"checkbox":case"image":case"range":return}break;default:if(this.controlElement||this.is(e.TEXT)&&this.textEmpty||this.length&&(this.layoutFrame||this.layoutConstraint||this.layoutGrid))return}const n=ce(this,t),o=this.localizeString(a);if(!n.has(o)){n.add(o);let e="",a="",r="",s="";for(const t of n.values())Q(t)?(""===a||i)&&(a=t):tt(t)?(""===r||i)&&(r=t):s+=(""!==s?"|":"")+t;e=""!==a&&""!==r?a+"|"+r:a||r,""!==s&&(e+=(""!==e?"|":"")+s),""!==e&&this.android(t,e)}}applyOptimizations(){const t=this.renderParent;if(t&&(this.alignLayout(t),function(t,e){var a;const i=t.lineHeight;if(i>0){const n=t.has("lineHeight",{map:"initial"});if(t.multiline)Yt(t,i,n);else if(t.renderChildren.length){if(!n&&t.layoutHorizontal&&t.alignSibling("baseline"))return;if(t.layoutVertical||t.layoutFrame)t.renderChildren.forEach(t=>{0!==t.length||t.multiline||isNaN(t.lineHeight)||t.has("lineHeight")||jt(t,i,true,true,true)});else{const e=t.horizontalRows||[t.renderChildren];let n=false;const o=e.length;for(let t=0;t<o;++t){const r=e[t],s=r.length,l=e[t+1],c=!!l&&(1===l.length&&l[0].multiline||l[0].lineBreakLeading||t<o-1&&!!(null===(a=l.find(t=>t.baselineActive))||void 0===a?void 0:a.has("lineHeight"))),h=r[0],d=1===s,u=d&&!h.multiline,f=!d&&r.find(t=>t.baselineActive&&0===t.renderChildren.length),p=u||!n&&(t>0||1===o)||h.lineBreakLeading,g=u||!c&&(t<o-1||1===o);if(f&&s>1){if(isNaN(f.lineHeight)||f.has("lineHeight")){n=true;continue}jt(f,i,false,p,g)}else r.forEach(t=>{0!==t.length||t.multiline||isNaN(t.lineHeight)||t.has("lineHeight")||jt(t,i,d,p,g)});n=d&&h.multiline}}}else(n||0===e.lineHeight)&&jt(t,i,n,true,true)}}(this,t),le(this,"layout_gravity"),le(this,"gravity"),this.imageElement)){const t=this.layoutWidth,e=this.layoutHeight;("wrap_content"===t&&"wrap_content"!==e||"wrap_content"!==t&&"wrap_content"===e||"match_parent"===t||"match_parent"===e||"0px"===t||"0px"===e||""!==this.android("minWidth")||""!==this.android("minHeight")||""!==this.android("maxWidth")||""!==this.android("maxHeight"))&&this.android("adjustViewBounds","true")}}applyCustomizations(t=true){const e=e=>{if(e)for(const a in e){const i=e[a];for(const e in i)this.attr(a,e,i[e],t)}},{tagName:a,controlName:i}=this;let n=H[0].assign;e(n[a]),e(n[i]);const o=H[this.api];o&&(n=o.assign,e(n[a]),e(n[i]))}setSingleLine(t=false){if(this.textElement&&this.naturalChild){const e=this.actualParent;e.preserveWhiteSpace||"CODE"===e.tagName||this.multiline&&"nowrap"!==e.css("whiteSpace")||this.android("maxLines","1"),t&&this.textContent.trim().length>1&&this.android("ellipsize","end")}}setLayoutWidth(t,e=true){this.android("layout_width",t,e)}setLayoutHeight(t,e=true){this.android("layout_height",t,e)}alignLayout(t){if(this.layoutLinear){const e=this.renderChildren;if(this.layoutVertical)t.layoutFrame||this.documentRoot||!e.length||!this.baselineElement&&!e.every(t=>t.textElement)||this.android("baselineAlignedChildIndex","0");else{let t=!this.baselineActive;e.some(t=>t.floating)&&!e.some(t=>t.imageElement&&t.baseline)&&(this.android("baselineAligned","false"),t=false);const a=e.length;for(let i=0;i<a;++i){const n=e[i];n.setSingleLine(i===a-1),t&&n.baselineElement&&(this.android("baselineAlignedChildIndex",i.toString()),t=false)}}}}get controlElement(){switch(this.tagName){case"PROGRESS":case"METER":return true;case"INPUT":return"range"===this.toElementString("type")}return false}set containerType(t){this._containerType=t}get containerType(){if(0===this._containerType){const t=l[this.containerName];t>0&&(this._containerType=t)}return this._containerType}set controlId(t){this._controlId=t}get controlId(){var t;let e=this._controlId;if(void 0===e){const a=this.controlName;if(!a)return 0===this.id?"baseroot":"";{let i;if(this.styleElement){const e=(null===(t=this.elementId)||void 0===t?void 0:t.trim())||bt(this.element,"name");""!==e&&(i=e.replace(Ft,"_").toLowerCase(),("parent"===i||f.includes(i))&&(i="_"+i))}e=_t(Mt.generateId("android",i||Nt(a,".").toLowerCase(),i?0:1)),this._controlId=e}}return e}get documentId(){const t=this.controlId;return""!==t?"@id/"+t:""}get support(){let t=this._cached.support;return void 0===t&&(t={positionTranslation:this.layoutConstraint,positionRelative:this.layoutRelative,maxDimension:this.textElement||this.imageOrSvgElement},0!==this.containerType&&(this._cached.support=t)),t}set renderExclude(t){this._cached.renderExclude=t}get renderExclude(){let t=this._cached.renderExclude;if(void 0===t){if(this.naturalChild&&!this.originalRoot){const e=this.renderParent;if(!e)return false;t=!(this.onlyChild||0!==this.length||!this.styleElement||this.imageElement||this.pseudoElement)&&(this.pageFlow?e.layoutVertical?se(this)&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop"):re(this)&&(e.layoutHorizontal||se(this))&&""===this.alignSibling("leftRight")&&""===this.alignSibling("rightLeft")&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop"):re(this)||se(this))}else t=false;this._cached.renderExclude=t}return t}get baselineHeight(){var t;let e=this._cached.baselineHeight;if(void 0===e){if(e=0,this.plainText){const{height:t,numberOfLines:a}=this.bounds;e=t/(a||1)}else if(this.multiline&&this.cssTry("white-space","nowrap")?(e=this.boundingClientRect.height,this.cssFinally("white-space")):e=this.hasHeight?this.actualHeight:"PICTURE"===this.tagName?Math.max((null===(t=this.naturalElements.find(t=>"IMG"===t.tagName))||void 0===t?void 0:t.height)||0,this.bounds.height):this.bounds.height,this.naturalElement&&!this.pseudoElement&&this.lineHeight>e)e=this.lineHeight;else if(this.inputElement)switch(this.controlName){case n.RADIO:case n.CHECKBOX:e+=8;break;case n.SELECT:e/=this.toElementInt("size")||1,e+=4;break;default:e+=Math.max(-1*xt(this.verticalAlign),0)}this._cached.baselineHeight=e}return e}get innerWrapped(){return this._innerWrapped}set innerWrapped(t){t&&(t=t.outerMostWrapper,this._innerWrapped=t,t.outerWrapper=this)}get anchorTarget(){let t=this;do{const e=t.renderParent;if(!e)break;if(e.layoutConstraint||e.layoutRelative)return t;t=t.outerWrapper}while(t);return this}set anchored(t){const e=this.constraint;e.horizontal=t,e.vertical=t}get anchored(){const{horizontal:t,vertical:e}=this.constraint;return true===t&&true===e}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this._containerType===e.FRAME}get layoutLinear(){return this._containerType===e.LINEAR}get layoutGrid(){return this._containerType===e.GRID}get layoutRelative(){return this._containerType===e.RELATIVE}get layoutConstraint(){return this._containerType===e.CONSTRAINT}get layoutWidth(){return this.__android.layout_width||""}get layoutHeight(){return this.__android.layout_height||""}get inlineWidth(){return"wrap_content"===this.layoutWidth}get inlineHeight(){return"wrap_content"===this.layoutHeight}get blockWidth(){return"match_parent"===this.layoutWidth}get blockHeight(){return"match_parent"===this.layoutHeight}get flexibleWidth(){return Kt(this,this.layoutWidth)}get flexibleHeight(){return Kt(this,this.layoutHeight)}get labelFor(){return this._labelFor}set labelFor(t){t&&(t.companion=this),this._labelFor=t}set localSettings(t){this._localSettings?Object.assign(this._localSettings,t):this._localSettings=Object.assign({},t)}get localSettings(){return this._localSettings}};class de extends(he(squared.base.NodeUI)){}class ue extends(he(squared.base.NodeGroupUI)){constructor(t,e,a,i){super(t,e.sessionId,void 0,i),this.depth=e.depth,this.containerName=e.containerName+"_GROUP",this.actualParent=e.actualParent,this.documentParent=e.documentParent,this.retain(a)}set containerType(t){this._containerType=t}get containerType(){return this._containerType}set renderExclude(t){}get renderExclude(){return false}}const{lib:fe,base:pe}=squared,{PLATFORM:ge,isPlatform:me}=fe.client,{parseColor:ye}=fe.color,{formatPX:be,getSrcSet:Te,hasComputedStyle:Ee,isLength:Se,isPercent:Ae}=fe.css,{getElementsBetweenSiblings:ve,getRangeClientRect:xe}=fe.dom,{truncate:we}=fe.math,{CHAR:_e}=fe.regex,{getElementAsNode:Ne,getPseudoElt:Ie}=fe.session,{assignEmptyValue:Re,convertFloat:Ce,hasBit:Le,hasMimeType:Pe,isString:Oe,iterateArray:ke,objectMap:De,parseMimeType:Me,partitionArray:We,withinRange:Be}=fe.util,{STRING_XMLENCODING:Xe,replaceTab:Ge}=fe.xml,{APP_SECTION:He,BOX_STANDARD:Ve,NODE_ALIGNMENT:Fe,NODE_PROCEDURE:ze,NODE_RESOURCE:Ue,NODE_TEMPLATE:qe}=pe.lib.enumeration,Ye=pe.NodeUI,je=/((?:rgb|hsl)a?\([^)]+\)|[a-z]{4,})?\s*(-?[\d.]+[a-z]+)\s+(-?[\d.]+[a-z]+)\s*([\d.]+[a-z]+)?/;function Ke(t){t.sort((t,e)=>{const a=t.float,i=e.float;if("none"!==a&&"none"!==i){if(a!==i)return"left"===a?-1:1;if("right"===a&&"right"===i)return 1}else{if("none"!==a)return"left"===a?-1:1;if("none"!==i)return"left"===i?1:-1}return 0})}function $e(t,e){return function(t,e){const a=t.depth,i=e.depth;if(a===i){const a=t.actualParent,i=e.actualParent;if(t===i)return-1;if(a===e)return 1;if(a&&i){if(a===i)return Je(t,e);if(a.actualParent===i.actualParent)return Je(a,i)}return t.id<e.id?-1:1}return a<i?-1:1}(t.node.innerMostWrapped,e.node.innerMostWrapped)}function Ze(t,e){return Je(t.node.innerMostWrapped,e.node.innerMostWrapped)}function Je(t,e){const a=t.actualParent;if(t===e.actualParent)return-1;if(a===e)return 1;const{pageFlow:i,zIndex:n}=t,{pageFlow:o,zIndex:r}=e;return!i&&o?n>=0?1:-1:!o&&i?r>=0?-1:1:n===r?t.childIndex<e.childIndex?-1:1:n<r?-1:1}function Qe(t,a,i,n){const o=t.baselineHeight,r=t=>t.imageOrSvgElement&&t.baseline,s=t=>t.imageOrSvgElement?"baseline":"bottom";let l,c=0;const h=a.length;let d=0;while(d<h){const h=a[d++];if(h.baselineAltered)continue;let u=h.baselineHeight;if(u>0||h.textElement){if(h.blockVertical&&t.blockVertical){h.anchor("bottom",t.documentId);continue}{const t=h.renderChildren.filter(t=>r(t));if(h.imageOrSvgElement||t.length){if(t.forEach(t=>u=Math.max(t.baselineHeight,u)),u>o){!l||u>=c?(null==l||l.anchor(s(h),h.documentId),c=u,l=h):h.anchor(s(l),l.documentId);continue}if(Be(h.linear.top,n)){h.anchor("top","true");continue}}}i&&h.is(e.BUTTON)?h.anchor("centerVertical","true"):h.naturalChild&&h.isEmpty?h.anchor("baseline",t.documentId):h.baselineElement&&h.anchor(h.naturalElements.find(t=>r(t))?"bottom":"baseline",t.documentId)}else r(h)&&(l=h)}l&&t.anchor(s(l),l.documentId)}function ta(t,e){if("left"===e.float){if(e.marginRight<0){const a=Math.abs(e.marginRight);return t.modifyBox(16,e.actualWidth+(e.hasWidth?e.paddingLeft+e.borderLeftWidth:0)-a),t.anchor("left",e.documentId),e.setBox(4,{reset:1}),true}}else if("right"===t.float&&e.marginLeft<0){const a=Math.abs(e.marginLeft),i=e.actualWidth;return a<i&&t.modifyBox(4,i-a),t.anchor("right",e.documentId),e.setBox(16,{reset:1}),true}return false}function ea(t){return t.filter(t=>(t.baseline||Se(t.verticalAlign,true))&&("TEXTAREA"===t.tagName||"SELECT"===t.tagName&&t.toElementInt("size")>1)||"text-bottom"===t.verticalAlign&&"INPUT_IMAGE"!==t.containerName).sort((t,e)=>t.baselineHeight===e.baselineHeight?"SELECT"===t.tagName?1:0:t.baselineHeight>e.baselineHeight?-1:1)}function aa(t){if("BR"===t.tagName)return true;if(Ee(t)){const e=getComputedStyle(t),a=e.getPropertyValue("position");if(!("absolute"===a||"fixed"===a)){const t=e.getPropertyValue("display"),a="none"!==e.getPropertyValue("float"),i=()=>("100%"===e.getPropertyValue("width")||"100%"===e.getPropertyValue("minWidth"))&&"none"===e.getPropertyValue("max-width");switch(t){case"block":case"flex":case"grid":return!a||i()}return(t.startsWith("inline-")||"table"===t)&&i()}}return false}function ia(t){const e=t.element;e.readOnly&&t.android("focusable","false"),e.disabled&&t.android("enabled","false")}function na(t,e,a){const[i,n,o,r,s,l,c,h]=a?["horizontal","width","left","right",16,4,256,64]:["vertical","height","top","bottom",2,8,32,128],d=t.autoMargin,u=t.hasPX(n);if(u&&d[i])t.hasPX(o)&&d[r]?(t.anchor(o,"parent"),t.modifyBox(s,t[o])):t.hasPX(r)&&d[o]?(t.anchor(r,"parent"),t.modifyBox(l,t[r])):(t.anchorParent(i,.5),t.modifyBox(s,t[o]),t.modifyBox(l,t[r]));else{const f="100%"===t.css(n)||"100%"===t.css(a?"minWidth":"minHeight");let p=0;t.hasPX(o)&&(t.anchor(o,"parent"),!t.hasPX(r)&&f&&(t.anchor(r,"parent"),p++),t.modifyBox(s,at(e,c,t[o])),p++),t.hasPX(r)&&(!f&&u&&t.hasPX(o)||(t.anchor(r,"parent"),t.modifyBox(l,at(e,h,t[r]))),p++),0===p?a&&(t.centerAligned?t.anchorParent("horizontal",.5):t.rightAligned&&(t.blockStatic?t.anchorParent("horizontal",1):t.anchor("right","parent"))):2!==p||u||d[i]&&!d[o]&&!d[r]||(a?t.setLayoutWidth("0px"):t.setLayoutHeight("0px"))}}function oa(t,e,a,i){return t.css("width",be(e),true),i&&i.width>0&&i.height>0&&(a=i.height*(e/i.width),t.css("height",be(a),true)),[e,a]}function ra(t,e){const{minLength:a,maxLength:i}=e;-1!==a&&t.android("minLength",a.toString()),i>0&&t.android("maxLength",i.toString())}function sa(t,e){const{min:a,max:i}=e;Oe(a)&&t.android("min",a),Oe(i)&&t.android("max",i)}function la(t,e){return t.naturalChild?e.has(t):t.nodeGroup?t.some(t=>t.naturalChild&&e.has(t),{cascade:true}):e.has(t.innerMostWrapped)}function ca(t,e){const a=t.parent;if(a.flexElement&&("baseline"===a.css("alignItems")||t.some(t=>"baseline"===t.flexbox.alignSelf)))return false;const i=t.length>1;return t.some(e=>i&&(e.rightAligned||e.centerAligned)&&t.singleRowAligned||e.percentWidth>0&&e.percentWidth<1||e.hasPX("maxWidth"))&&(!e||t.every(t=>t.marginTop>=0))}function ha(t,e){if(t.leftTopAxis){const a=t.absoluteParent;if(a.documentBody)switch(e){case"top":if(0===a.getBox(2)[0])return a.marginTop;break;case"left":return a.marginLeft}}return 0}function da(t){const{centerAligned:e,rightAligned:a}=t;t.css("display","inline-block",true),t.setCacheValue("centerAligned",e),t.setCacheValue("rightAligned",a)}function ua(t){return We(t,t=>"right"===t.float||true===t.autoMargin.left)}const fa=(t,e,a=true)=>e.size&&t.some((t,i)=>(i>0||!a)&&e.has(t)),pa=t=>t.plainText&&B.hasLineBreak(t,false,true)||t.preserveWhiteSpace&&_e.LEADINGNEWLINE.test(t.textContent),ga=t=>Math.max(t.actualHeight,t.lineHeight),ma=t=>ca(t,true)?e.CONSTRAINT:t.some(t=>t.positionRelative||!t.pageFlow&&t.autoPosition)?e.RELATIVE:e.LINEAR,ya=t=>ca(t,true)?e.CONSTRAINT:t.some(t=>t.positionRelative)?e.RELATIVE:e.LINEAR,ba=(t=false)=>t?{anchorStart:"right",anchorEnd:"left",chainStart:"rightLeft",chainEnd:"leftRight"}:{anchorStart:"left",anchorEnd:"right",chainStart:"leftRight",chainEnd:"rightLeft"},Ta=(t,e,a)=>t.containerType===e&&t.length===a&&(0===t.alignmentType||t.hasAlign(2));function Ea(t){if(t.centerAligned)t.anchorParent("horizontal",.5);else{const e=t.autoMargin;if(e.horizontal)t.anchorParent("horizontal",e.left?1:e.leftRight?.5:0);else{const e=t.rightAligned;e?(t.anchor("right","parent"),t.anchorStyle("horizontal",1)):(t.anchor("left","parent"),t.anchorStyle("horizontal",0)),(t.blockStatic||t.percentWidth>0||t.block&&t.multiline&&t.floating)&&t.anchor(e?"left":"right","parent")}}}function Sa(t,e=true,a=false){const i=t.autoMargin;let n=e?0:NaN;if(t.floating)n=0;else if(i.vertical)n=i.top?1:i.topBottom?.5:0;else if(t.imageOrSvgElement||t.inlineVertical)switch(t.verticalAlign){case"baseline":n=e?0:1;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=0}else{const e=t.actualParent;if("table-cell"===(null==e?void 0:e.display))switch(e.verticalAlign){case"middle":n=.5;break;case"bottom":n=1;break;default:n=0}}isNaN(n)||(a?(t.app("layout_constraintVertical_bias",n.toString(),false),t.delete("layout_constraintVertical_chainStyle")):t.anchorStyle("vertical",n,e?"":"packed",false))}class Aa extends squared.base.ControllerUI{constructor(t,e){super(),this.application=t,this.cache=e,this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:Xe},directory:{string:"res/values",font:"res/font",image:"res/drawable",video:"res/raw",audio:"res/raw"},svg:{enabled:false},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:me(4)?"rgb(255, 255, 255)":"rgb(221, 221, 221)",inputColorBorderColor:"rgb(119, 119, 199)",meterForegroundColor:"rgb(99, 206, 68)",meterBackgroundColor:"rgb(237, 237, 237)",progressForegroundColor:"rgb(138, 180, 248)",progressBackgroundColor:"rgb(237, 237, 237)"},mimeType:{font:["font/ttf","font/otf"],image:["image/jpeg","image/png","image/gif","image/bmp","image/webp","image/svg+xml","image/heic","image/heif","image/x-icon"],audio:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","audio/aac","audio/flac","audio/gsm","audio/midi","audio/mpeg","audio/wav","audio/ogg"],video:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","video/webm"]},unsupported:{cascade:new Set(["SELECT","svg"]),tagName:new Set(["HEAD","TITLE","META","SCRIPT","STYLE","LINK","OPTION","INPUT:hidden","COLGROUP","MAP","AREA","SOURCE","TEMPLATE","DATALIST","TRACK"]),excluded:new Set(["BR","WBR"])},precision:{standardFloat:3},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.35,superscriptTopOffset:.35,legendBottomOffset:.25}}}init(){const{resolutionDPI:t,resolutionScreenWidth:e,resolutionScreenHeight:a,supportRTL:i,targetAPI:n}=this.userSettings,o=160/t,r={width:e*o,height:a*o};this._targetAPI=n||29,this._screenDimension=r,this._defaultViewSettings={screenDimension:r,supportRTL:i,floatPrecision:this.localSettings.precision.standardFloat},super.init()}optimize(t){const e=t.length;let a=0;while(a<e){const e=t[a++];e.applyOptimizations(),e.hasProcedure(ze.CUSTOMIZATION)&&e.applyCustomizations(this.userSettings.customizationsOverwritePrivilege)}}finalize(t){const e=this.userSettings.insertSpaces;t.forEach(t=>{const a=t.content;t.content=Ge(a.replace("{#0}",st(a)),e)})}processUnknownParent(t){const a=t.node;if(t.some(t=>!t.pageFlow&&!t.autoPosition))t.setContainerType(e.CONSTRAINT,34);else if(t.length<=1){const i=a.item(0);if(!i)return this.processUnknownChild(t);if(a.originalRoot&&function(t,e){const a=e.dataset.target;if(a&&t){const e=document.getElementById(a);return!!e&&e!==t}return false}(a.element,i))return a.hide(),{layout:t,next:true};a.naturalElement&&i.plainText?(i.hide(),a.clear(),a.inlineText=true,a.textContent=i.textContent,t.setContainerType(e.TEXT),t.add(1024)):t.parent.flexElement&&i.baselineElement&&"baseline"===a.flexbox.alignSelf?t.setContainerType(e.LINEAR,8):i.percentWidth>0&&i.percentWidth<1?t.setContainerType(e.CONSTRAINT,32768):a.autoMargin.leftRight||a.autoMargin.left?t.setContainerType(e.CONSTRAINT):i.baselineElement?t.setContainerType(ya(t),16):t.setContainerType(e.FRAME),t.add(4096)}else if(B.hasLineBreak(a,true))t.setContainerType(ya(t),18);else if(this.checkConstraintFloat(t))t.setContainerType(e.CONSTRAINT),t.every(t=>t.floating)?t.add(512):t.linearY?t.add(16):t.some(t=>t.floating||t.rightAligned)&&t.singleRowAligned?t.add(8):(t.add(t.some(t=>t.blockStatic)?16:1024),t.add(2));else if(t.linearX||t.singleRowAligned)this.checkFrameHorizontal(t)?(t.addRender(512),t.addRender(8)):this.checkConstraintHorizontal(t)?t.setContainerType(e.CONSTRAINT):this.checkLinearHorizontal(t)?(t.setContainerType(e.LINEAR),t.floated.size&&Ke(t.children)):t.setContainerType(ca(t,false)?e.CONSTRAINT:e.RELATIVE),t.add(8);else if(t.linearY)t.setContainerType(ma(t),16|(a.originalRoot||t.some((e,a)=>a>0&&e.inlineFlow&&t.item(a-1).inlineFlow)?2:0));else if(t.every(t=>t.inlineFlow))this.checkFrameHorizontal(t)?(t.addRender(512),t.addRender(8)):t.setContainerType(ma(t),18);else{const a=t.children,i=this.application.clearMap;t.some((t,e)=>t.alignedVertically(e>0?a.slice(0,e):void 0,i)>0)?t.setContainerType(ma(t),18):t.setContainerType(e.CONSTRAINT,2)}return{layout:t}}processUnknownChild(t){const a=t.node,i=a.visibleStyle.background;if(!a.inlineText||a.textEmpty&&!i)if(a.blockStatic&&0===a.naturalChildren.length&&(i||a.contentBoxHeight>0))t.setContainerType(e.FRAME);else{if(0===a.bounds.height&&a.naturalChild&&0===a.naturalElements.length&&""===a.elementId&&0===a.marginTop&&0===a.marginRight&&0===a.marginBottom&&0===a.marginLeft&&!a.originalRoot&&!i&&!a.dataset.use)return a.hide(),{layout:t,next:true};switch(a.tagName){case"OUTPUT":t.setContainerType(e.TEXT);break;default:""!==a.textContent&&(i||a.pseudoElement&&"::after"===Ie(a.element,a.sessionId))?(t.setContainerType(e.TEXT),a.inlineText=true):t.setContainerType(e.FRAME)}}else t.setContainerType(e.TEXT);return{layout:t}}processTraverseHorizontal(t,a){const i=t.parent;if(1===t.floated.size&&t.every(t=>t.floating)){if(Ta(i,e.CONSTRAINT,t.length))return i.addAlign(512),void i.removeAlign(2);t.node=this.createNodeGroup(t.node,t.children,{parent:i}),t.setContainerType(e.CONSTRAINT,512)}else this.checkFrameHorizontal(t)?(t.node=this.createNodeGroup(t.node,t.children,{parent:i}),t.addRender(512),t.addRender(8)):t.length!==a.length||i.hasAlign(16)?(t.node=this.createNodeGroup(t.node,t.children,{parent:i}),this.processLayoutHorizontal(t)):(i.hasAlign(1024)||i.addAlign(8),i.removeAlign(2));return t}processTraverseVertical(t){const a=t.parent,i=this.application.clearMap,n=t.floated.size,o=t.length,r=()=>{a.addAlign(16),a.removeAlign(2)};if(t.some((t,e)=>t.lineBreakTrailing&&e<o-1)){if(!a.hasAlign(16)){const e=ma(t);if(Ta(a,e,o))return void r();if(a.layoutConstraint&&(a.addAlign(16),!a.hasAlign(32)))return;t.node=this.createLayoutGroup(t),t.setContainerType(e,18)}}else if(1===n&&t.every((t,e)=>0===e||e===o-1||i.has(t)))if(t.same(t=>t.float)){if(Ta(a,e.CONSTRAINT,o))return void r();t.node=this.createLayoutGroup(t),t.setContainerType(e.CONSTRAINT,512)}else if(fa(t,i)||this.checkFrameHorizontal(t))t.node=this.createLayoutGroup(t),t.addRender(512),t.addRender(8);else{const e=ya(t);if(Ta(a,e,o))return void r();if(a.layoutConstraint&&(a.addAlign(16),!a.hasAlign(32)))return;t.node=this.createLayoutGroup(t),t.setContainerType(e,16)}else n&&(fa(t,i)?(t.node=this.createLayoutGroup(t),t.addRender(512),t.addRender(16)):t.item(0).floating&&(t.node=this.createLayoutGroup(t),t.addRender(512),t.addRender(8)));if(!a.hasAlign(16)){const e=ya(t);if(Ta(a,e,o))return void r();if(a.layoutConstraint&&(a.addAlign(16),!a.hasAlign(32)))return;t.node=this.createLayoutGroup(t),t.setContainerType(e,16)}return t}processLayoutHorizontal(t){return this.checkConstraintFloat(t)?t.setContainerType(e.CONSTRAINT,t.every(t=>t.floating)?512:1024):this.checkConstraintHorizontal(t)?t.setContainerType(e.CONSTRAINT,8):this.checkLinearHorizontal(t)?(t.setContainerType(e.LINEAR,8),t.floated.size&&Ke(t.children)):t.setContainerType(e.RELATIVE,8),t}sortRenderPosition(t,e){if(t.layoutRelative)e.some(t=>0!==t.node.zIndex)&&e.sort(Ze);else if(t.layoutConstraint&&e.some(t=>{return 0!==(e=t.node).zIndex||!e.pageFlow;var e})){let a=[];const i=t.innerMostWrapped,n=[],o=[];if(e.forEach(t=>{const e=t.node.innerMostWrapped;e.pageFlow||e.actualParent===e.documentParent||e===i?(a.push(t),n.push(e)):o.push(t)}),a.sort(Ze),o.length){const t=new Map,e=[],i=[];o.forEach(a=>{var o;const r=a.node.innerMostWrapped,s=r.ascend({condition:t=>n.includes(t),error:t=>t.originalRoot})[0];s?(null===(o=t.get(s))||void 0===o?void 0:o.push(a))||t.set(s,[a]):r.zIndex<0?i.push(a):e.push(a)});for(const[n,o]of t.entries()){o.sort(Ze);const t=a.findIndex(t=>t.node.innerMostWrapped===n);-1!==t?a.splice(t+1,0,...o):o.forEach(t=>{t.node.innerMostWrapped.zIndex<0?i.push(t):e.push(t)})}i.length&&(i.sort($e),a=i.concat(a)),e.length&&(e.sort($e),a=a.concat(e))}return a}return e}checkFrameHorizontal(t){switch(t.floated.size){case 1:if("center"===t.node.cssAscend("textAlign",true)&&t.some(t=>t.pageFlow))return true;if(t.floated.has("right")){let e=0,a=false;for(const i of t)if(i.floating){if(a)return false}else i.multiline&&(a=true),e++;return e>0&&!t.singleRowAligned}return t.item(0).floating&&(t.linearY||t.length>2&&!t.singleRowAligned&&!t.every(t=>t.inlineFlow)||t.every(t=>t.floating||t.block&&(!t.isEmpty||!(t.textElement||t.inputElement||t.imageElement||t.svgElement||t.controlElement))));case 2:return true}return false}checkConstraintFloat(t){if(t.length>1){const e=this.application.clearMap;let a=true,i=true;for(const n of t)if(!e.has(n)){const t=n.inputElement||n.controlElement;if(a&&!(n.floating||n.autoMargin.horizontal||n.inlineDimension&&!t||n.imageOrSvgElement||n.marginTop<0)&&(a=false),i&&0===n.percentWidth&&(i=false),!a&&!i)return false}return true}return false}checkConstraintHorizontal(t){if(t.length>1&&t.singleRowAligned){const e=t.floated.size;return(!e||!(2===e||fa(t,this.application.clearMap)||t.some(t=>"left"===t.float)&&t.some(t=>true===t.autoMargin.left)||t.some(t=>"right"===t.float)&&t.some(t=>true===t.autoMargin.right)))&&t.some(e=>e.blockVertical||e.percentWidth>0&&e.percentWidth<1&&!e.inputElement&&!e.controlElement||e.marginTop<0||"bottom"===e.verticalAlign&&!t.parent.hasHeight)}return false}checkLinearHorizontal(t){const e=t.floated,a=e.size;if((0===a||1===a&&e.has("left"))&&0===t.node.lineHeight&&t.singleRowAligned){const{fontSize:e,lineHeight:a}=t.item(0),i=t.parent.actualBoxWidth();let n=0;for(const o of t){if(!o.naturalChild||!o.isEmpty||o.inputElement||o.controlElement||o.positionRelative||!o.baseline||o.blockVertical||0!==o.zIndex||o.lineHeight!==a||o.fontSize!==e)return false;if(n+=o.linear.width,n>=i)return false}return true}return false}setConstraints(){this.cache.each(t=>{const e=t.renderChildren;if(e.length&&t.hasProcedure(ze.CONSTRAINT))if(t.hasAlign(4))t.layoutConstraint&&!t.layoutElement&&this.evaluateAnchors(e);else if(t.layoutRelative)this.processRelativeHorizontal(t,e);else if(t.layoutConstraint){let a=0;const i=e.length,n=new Array(i);if(e.forEach(e=>{if(!e.positioned)if(e.pageFlow||e.autoPosition)n[a++]=e;else{const a=e.constraint;e.outerWrapper===t?(a.horizontal||e.anchorParent("horizontal",0),a.vertical||e.anchorParent("vertical",0)):(e.leftTopAxis&&(a.horizontal||na(e,t,true),a.vertical||na(e,t,false)),a.horizontal||this.addGuideline(e,t,{orientation:"horizontal"}),a.vertical||this.addGuideline(e,t,{orientation:"vertical"}),e.positioned=true)}}),a>0){if(n.length=a,t.layoutHorizontal)this.processConstraintHorizontal(t,n);else if(a>1)this.processConstraintChain(t,n);else{const t=n[0],{horizontal:e,vertical:a}=t.constraint;e||Ea(t),a||(t.anchorParent("vertical"),Sa(t)),de.setConstraintDimension(t,1)}this.evaluateAnchors(n)}}})}renderNodeGroup(t){const{node:a,containerType:i}=t,n=it();let o=false;switch(i){case e.LINEAR:n.android.orientation=Le(t.alignmentType,16)?"vertical":"horizontal",o=true;break;case e.GRID:{const{columnCount:e,rowCount:a}=t,i=n.android;a>0&&(i.rowCount=a.toString()),i.columnCount=e>0?e.toString():"1",o=true;break}case e.FRAME:case e.RELATIVE:case e.CONSTRAINT:o=true;break;default:if(t.isEmpty)return this.renderNode(t)}if(o){const e=a.dataset,o=!e.use&&e.target;return a.setControlType(de.getControlName(i,a.api),i),a.addAlign(t.alignmentType),a.render(o?this.application.resolveTarget(o):t.parent),a.apply(n),{type:1,node:a,controlName:a.controlName}}}renderNode(t){var a,i;let{parent:o,containerType:r}=t;const s=t.node,l=s.dataset;let c=!l.use&&l.target,h=de.getControlName(r,s.api);switch(s.tagName){case"IMG":{const i=this.application,r=s.element,l=s.absoluteParent||s.documentParent;let h=s.toFloat("width",0),d=s.toFloat("height",0),u=s.percentWidth>0?h:-1;const f=s.percentHeight>0?d:-1;let p,g="fitXY";if(Oe(r.srcset)||"PICTURE"===(null===(a=s.actualParent)||void 0===a?void 0:a.tagName)){const t=this.localSettings.mimeType.image;if(p=Te(r,"*"===t?void 0:t),p.length){const t=p[0],e=t.actualWidth;if(e)-1===u?[h,d]=oa(s,e,d,i.resourceHandler.getImage(r.src)):(h=s.bounds.width,u=-1);else{const e=i.resourceHandler.getImage(t.src);e&&(-1===u?[h,d]=oa(s,e.width,d,e):(h=s.bounds.width,u=-1))}}else p=void 0}if(-1!==u||-1!==f){const t=l.box;u>=0&&(h*=t.width/100,u<100&&!o.layoutConstraint&&s.css("width",be(h))),f>=0&&(d*=t.height/100,f<100&&!(o.layoutConstraint&&l.hasHeight)&&s.css("height",be(d)))}else switch(s.css("objectFit")){case"contain":g="centerInside";break;case"cover":g="centerCrop";break;case"scale-down":g="fitCenter";break;case"none":g="center"}if(s.android("scaleType",g),h>0&&o.hasPX("maxWidth",false)&&(-1===u||100===u)){const t=o.parseWidth(o.css("maxWidth"));t<=h&&(h=t,s.css("width",be(h)))}else if(d>0&&o.hasPX("maxHeight",false)&&(-1===f||100===f)){const t=o.parseHeight(o.css("maxHeight"));t<=d&&(d=t,s.css("maxHeight",be(d)),s.setLayoutHeight("wrap_content"))}if(s.baseline&&(s.android("baselineAlignBottom","true"),s.marginBottom>0&&o.layoutLinear&&o.layoutHorizontal&&s.mergeGravity("layout_gravity","bottom")),s.hasResource(Ue.IMAGE_SOURCE)){const t=i.resourceHandler.addImageSrc(r,"",p);""!==t&&s.android("src","@drawable/"+t)}if(!s.pageFlow&&o===l&&(s.left<0&&"hidden"===o.css("overflowX")||s.top<0&&"hidden"===o.css("overflowY"))){const a=l.box,r=i.createNode({parent:o,replace:s});r.setControlType(n.FRAME,e.FRAME),r.inherit(s,"base"),r.cssCopy(s,"position","zIndex"),r.exclude({resource:Ue.ALL,procedure:ze.ALL}),r.autoPosition=false,h>0?r.setLayoutWidth(h<a.width?be(h):"match_parent"):r.setLayoutWidth("wrap_content"),d>0?r.setLayoutHeight(d<a.height?be(d):"match_parent"):r.setLayoutHeight("wrap_content"),r.render(c?i.resolveTarget(c):o),r.saveAsInitial(),o.layoutConstraint||(s.modifyBox(2,s.top),s.modifyBox(16,s.left)),i.addLayoutTemplate(o,r,{type:1,node:r,controlName:n.FRAME}),o=r,t.parent=r,c=void 0}break}case"INPUT":{const t=s.element;switch(t.type){case"radio":case"checkbox":t.checked&&s.android("checked","true");break;case"text":s.android("inputType","text");break;case"password":s.android("inputType","textPassword");break;case"number":case"range":s.android("inputType","number"),s.android("progress",t.value),sa(s,t);break;case"time":s.android("inputType","time"),sa(s,t);break;case"date":s.android("inputType","date"),sa(s,t);break;case"datetime-local":s.android("inputType","datetime"),sa(s,t);break;case"email":s.android("inputType","textEmailAddress"),ra(s,t);break;case"tel":s.android("inputType","phone"),ra(s,t);break;case"url":s.android("inputType","textUri"),ra(s,t);break;case"week":case"month":case"search":s.android("inputType","text"),ra(s,t);break;case"image":case"color":0===s.width&&s.css("width",be(s.bounds.width))}break}case"BUTTON":s.naturalChildren.forEach(t=>{t.pageFlow&&t.textElement||t.android("elevation","2px")});break;case"TEXTAREA":{const{cols:t,maxLength:e,placeholder:a,rows:i}=s.element;switch(s.android("minLines",i>0?i.toString():"2"),s.css("verticalAlign")){case"middle":s.mergeGravity("gravity","center_vertical");break;case"bottom":s.mergeGravity("gravity","bottom");break;default:s.mergeGravity("gravity","top")}e>0&&s.android("maxLength",e.toString()),!s.hasPX("width")&&t>0&&s.css("width",be(8*t)),s.android("hint",a),s.android("scrollbars","vertical"),s.android("inputType","textMultiLine"),s.overflowX&&s.android("scrollHorizontally","true");break}case"LEGEND":{s.hasWidth||(s.css("minWidth",be(s.actualWidth)),da(s));const t=s.actualHeight*this.localSettings.deviations.legendBottomOffset;s.modifyBox(8,t),s.linear.bottom+=t;break}case"METER":case"PROGRESS":{const{min:t,max:e,value:a}=s.element;let i,n;"METER"===s.tagName?(({meterForegroundColor:i,meterBackgroundColor:n}=this.localSettings.style),e&&(a&&s.android("progress",Math.round(a/e*100).toString()),100===e&&(s.android("min",t.toString()),s.android("max",e.toString())))):(({progressForegroundColor:i,progressBackgroundColor:n}=this.localSettings.style),a&&s.android("progress",a.toString()),e&&s.android("max",e.toString())),s.hasWidth||s.css("width",be(s.bounds.width)),s.hasHeight||s.css("height",be(s.bounds.height)),s.android("progressTint","@color/"+B.addColor(i)),s.android("progressBackgroundTint","@color/"+B.addColor(n)),s.attr("_","style","@android:style/Widget.ProgressBar.Horizontal"),s.exclude({resource:Ue.BOX_STYLE|Ue.FONT_STYLE});break}case"AUDIO":case"VIDEO":{const a=this.localSettings.mimeType.video,i=s.element;let n,o=i.src;if(Pe(a,o)?n=Me(o):(o="",ke(i.children,t=>{if("SOURCE"===t.tagName){if(Pe(a,t.src))return o=t.src,n=Me(o),true;if(n=t.type.trim().toLowerCase(),a.includes(n))return o=t.src,true}})),s.hasPX("width")||s.css("width",be(s.actualWidth),true),s.hasPX("height")||s.css("height",be(s.actualHeight),true),s.inline&&da(s),Oe(o))this.application.resourceHandler.addVideo(o,n),s.inlineText=false,s.exclude({resource:Ue.FONT_STYLE});else{if(Oe(i.poster)){s.setCacheValue("tagName","IMG"),o=i.src,i.src=i.poster,t.containerType=e.IMAGE;const a=this.renderNode(t);return i.src=o,a}r=e.TEXT,h=de.getControlName(r,s.api),t.containerType=r,s.inlineText=true}}}switch(h){case n.TEXT:{let t="";if(s.overflowX&&(t+="horizontal"),s.overflowY&&(t+=(""!==t?"|":"")+"vertical"),""!==t&&s.android("scrollbars",t),s.has("letterSpacing")&&s.android("letterSpacing",we(s.toFloat("letterSpacing")/s.fontSize,s.localSettings.floatPrecision)),"justify"===s.css("textAlign")&&s.android("justificationMode","inter_word"),s.has("textShadow")){const t=je.exec(s.css("textShadow"));if(t){const e=B.addColor(ye(t[1]||s.css("color")));if(""!==e){const a=s.localSettings.floatPrecision;s.android("shadowColor","@color/"+e),s.android("shadowDx",we(2*s.parseWidth(t[2]),a)),s.android("shadowDy",we(2*s.parseHeight(t[3]),a)),s.android("shadowRadius",we(Oe(t[4])?Math.max(s.parseWidth(t[4]),0):.01,a))}}}"nowrap"===s.css("whiteSpace")&&(s.android("maxLines","1"),"ellipsis"===s.css("textOverflow")&&"hidden"===s.css("overflow")&&s.android("ellipsize","end"));break}case n.BUTTON:s.hasHeight||s.android("minHeight",be(Math.ceil(s.actualHeight))),s.mergeGravity("gravity","center_vertical"),ia(s);break;case n.SELECT:case n.CHECKBOX:case n.RADIO:ia(s);break;case n.EDIT:!s.companion&&s.hasProcedure(ze.ACCESSIBILITY)&&[s.previousSibling,s.nextSibling].some(t=>{if((null==t?void 0:t.visible)&&t.pageFlow){const e=s.element,a=t.element,i="LABEL"===t.documentParent.tagName&&t.documentParent;if(e.id&&e.id===a.htmlFor)return t.android("labelFor",s.documentId),true;if(i&&t.textElement)return i.android("labelFor",s.documentId),true}return false}),(null===(i=s.element.list)||void 0===i?void 0:i.children.length)?h=n.EDIT_LIST:s.api>=26&&s.android("importantForAutofill","no"),ia(s);case n.RANGE:s.hasPX("width")||s.css("width",be(s.bounds.width));break;case n.LINE:s.hasHeight||s.setLayoutHeight(be(s.contentBoxHeight||1))}return s.setControlType(h,r),s.addAlign(t.alignmentType),s.render(c?this.application.resolveTarget(c):o),{type:1,node:s,parent:o,controlName:h}}renderNodeStatic(t,e){const{controlType:a,width:i,height:n,content:o}=t;let r=t.controlName;if(!Oe(r)){if(!a)return"";r=de.getControlName(a,this.userSettings.targetAPI)}const s=new de(0,"0",void 0,this.afterInsertNode);return s.setControlType(r),s.setLayoutWidth(i||"wrap_content"),s.setLayoutHeight(n||"wrap_content"),e&&(s.apply(e),e.documentId=s.documentId),this.getEnclosingXmlTag(r,this.userSettings.showAttributes?s.extractAttributes(1):void 0,o)}renderSpace(t){const{android:e,app:a,column:i,columnSpan:o,row:r,rowSpan:s}=t;let{width:l,height:c}=t;l?Ae(l)&&(e.layout_columnWeight=we(parseFloat(l)/100,this.localSettings.precision.standardFloat),l="0px"):l="wrap_content",c?Ae(c)&&(e.layout_rowWeight=we(parseFloat(c)/100,this.localSettings.precision.standardFloat),c="0px"):c="wrap_content",void 0!==i&&(e.layout_column=i.toString()),o&&(e.layout_columnSpan=o.toString()),void 0!==r&&(e.layout_row=r.toString()),s&&(e.layout_rowSpan=s.toString());const h={android:e,app:a},d=this.renderNodeStatic({controlName:n.SPACE,width:l,height:c},h);return t.documentId=h.documentId,d}addGuideline(t,e,a={}){const{percent:i,opposing:r,orientation:s}=a;let l=t.documentParent;e.nodeGroup&&!l.hasAlign(4)&&(l=e);const c=l.box,h=t.linear,d=(a,d)=>{var u,f;if(t.constraint[a]||s&&a!==s)return;let p,g;if(d?r?(p="right",g="left"):(p="left",g="right"):r?(p="bottom",g="top"):(p="top",g="bottom"),!i&&!r){if(Be(h[p],c[p]))return void t.anchor(p,"parent",true);if(t.autoPosition){const e=t.siblingsLeading,i=e.length;if(i&&!t.alignedVertically()){const n=e[i-1];if(n.pageFlow&&n.renderParent===t.renderParent)return t.anchor(d?"leftRight":"top",n.documentId,true),void(t.constraint[a]=true)}}if(!t.pageFlow&&"fixed"!==t.css("position")&&!e.hasAlign(4)){const i=t.innerMostWrapped.bounds,n=e.renderChildren,o=n.length;let r=0;while(r<o){const e=n[r++];if(e===t||e.plainText||e.pseudoElement||e.originalRoot)continue;const o=e.innerMostWrapped;if(o.pageFlow||e.constraint[a]){const{linear:n,bounds:r}=o;let s,l=NaN;if(Be(i[p],r[p]))s=p;else if(Be(h[p],n[p]))s=p,l=(d?i.left-r.left:i.top-r.top)+ha(t,p);else{if(!Be(h[p],n[g]))continue;if(d){if((t.hasPX("left")||t.hasPX("right"))&&(e.inlineStatic||!e.hasPX("width",false,true)))continue;s="leftRight",l=i.left-r.right}else{if((t.hasPX("top")||t.hasPX("bottom"))&&(e.inlineStatic||!e.hasPX("height",false,true)))continue;s="topBottom",l=i.top-r.bottom}}return d?isNaN(l)||(t.setBox(16,{reset:1,adjustment:0}),0!==l&&t.translateX(l)):isNaN(l)||(t.setBox(2,{reset:1,adjustment:0}),0!==l&&t.translateY(l)),t.anchor(s,e.documentId,true),void(t.constraint[a]=true)}}const s=d?"top":"left";let l,c;const u=(e,i,n)=>{t.anchor(i,e,true),t.setBox(d?16:2,{reset:1,adjustment:n}),t.constraint[a]=true};r=0;while(r<o){const e=n[r++];if(e===t||e.pageFlow||e.originalRoot||!e.constraint[a])continue;const o=e.innerMostWrapped,f=o.bounds;if(Be(i[s],f[s])||Be(h[s],o.linear[s])){const t=i[p]-f[g];if(t>=0)return void u(e.documentId,d?"leftRight":"topBottom",t)}else f[p]<=i[p]&&(f[s]<=i[s]?l=o:c=o)}if(l||(l=c),l){const e=i[p]-l.bounds[p]+ha(t,p);if(e>=0)return void u(l.documentId,p,e)}}}const m=t.absoluteParent,y=t.positionStatic?t.bounds:h;let b="layout_constraintGuide_",T=0;if(!t.leftTopAxis&&l.originalRoot){const e=t.renderParent;l.ascend({condition:t=>t===e,attr:"renderParent"}).length&&(T=d?r?l.marginRight:l.marginLeft:r?l.marginBottom:l.marginTop)}if(i){const e=Math.abs(y[p]-c[p])/(d?c.width:c.height);T+=parseFloat(we(r?1-e:e,t.localSettings.floatPrecision)),b+="percent"}else T+=y[p]-c[r?g:p],b+="begin";if(t.pageFlow){if(t.inlineVertical){const e=Ce(t.verticalAlign);e<0&&(T+=e)}}else if(l.outerWrapper&&t.parent===l.outerMostWrapper)T+=l[r?d?"paddingRight":"paddingBottom":d?"paddingLeft":"paddingTop"];else if(m===t.documentParent){let t;t=d?r?64:256:r?128:32,T=at(l,t,T)}if(!d&&t.marginTop<0&&(T-=t.marginTop,t.setBox(2,{reset:1})),t.constraint[a]=true,T<=0)t.anchor(p,"parent",true);else if(d&&T+y.width>=c.right&&l.hasPX("width")&&!t.hasPX("right")||!d&&T+y.height>=c.bottom&&l.hasPX("height")&&!t.hasPX("bottom"))t.anchor(g,"parent",true);else{const s=e.constraint.guideline||{},l=null===(f=null===(u=s[a])||void 0===u?void 0:u[b])||void 0===f?void 0:f[p];if(l)for(const e in l)if(parseInt(l[e])===T)return t.anchor(p,e,true),void t.anchorDelete(g);const c=it(void 0,{android:{orientation:d?"vertical":"horizontal"},app:{[b]:i?T.toString():"@dimen/"+B.insertStoredAsset("dimens","constraint_guideline_"+(r?g:p),be(T))}});this.addAfterOutsideTemplate(t.id,this.renderNodeStatic({controlName:t.api<29?n.GUIDELINE:o.GUIDELINE},c),false);const h=c.documentId;h&&(t.anchor(p,h,true),t.anchorDelete(g),T>0&&(Re(s,a,b,p,h,T.toString()),e.constraint.guideline=s))}};d("horizontal",true),d("vertical",false)}addBarrier(t,e){const a=[];if(t.forEach(t=>{const i=t.constraint.barrier;if(i){if(i[e])return}else t.constraint.barrier={};a.push(t)}),a.length){const t=it(void 0,{android:{},app:{barrierDirection:e,constraint_referenced_ids:De(a,t=>J(t.anchorTarget.documentId)).join(",")}}),{api:i,anchorTarget:r}=a[a.length-1],s=this.renderNodeStatic({controlName:i<29?n.BARRIER:o.BARRIER},t);switch(e){case"top":case"left":this.addBeforeOutsideTemplate(r.id,s,false);break;default:this.addAfterOutsideTemplate(r.id,s,false)}const l=t.documentId;if(l)return a.forEach(t=>t.constraint.barrier[e]=l),l}return""}evaluateAnchors(t){const e=[],a=[],i=t.length;let n=0;while(n<i){const i=t[n++],{horizontal:o,vertical:r}=i.constraint;if(o&&e.push(i),r&&a.push(i),i.alignParent("top")||i.alignSibling("top")){let e=i;do{const a=e.alignSibling("bottomTop");if(""===a){if(e!==i&&!e.alignParent("bottom"))if(e.blockHeight)e.anchor("bottom","parent");else{const t=e.constraint.barrier,a=t&&Oe(t.bottom)?t.bottom:this.addBarrier([e],"bottom");a&&e.anchor("bottomTop",a)}break}{const i=t.find(t=>t.documentId===a);if((null==i?void 0:i.alignSibling("topBottom"))!==e.documentId)break;if(i.alignParent("bottom"))break;e=i}}while(true)}}n=0;while(n<i){const i=t[n++],o=i.constraint,r=o.current;if(!o.horizontal)for(const t in r){const{documentId:a,horizontal:s}=r[t];if(s&&e.some(t=>t.documentId===a)){o.horizontal=true,e.push(i),n=0;break}}if(!o.vertical)for(const t in r){const{documentId:e,horizontal:s}=r[t];if(!s&&a.some(t=>t.documentId===e)){o.vertical=true,a.push(i),n=0;break}}}}createNodeGroup(t,e,a={}){const{parent:i,delegate:n,cascade:o}=a,r=new ue(this.cache.nextId,t,e,this.afterInsertNode);return i?(i.appendTry(t,r),r.init()):r.containerIndex=t.containerIndex,this.cache.append(r,true===n,true===o),r}createNodeWrapper(t,e,a={}){const{children:i,containerType:n,alignmentType:o,resource:r,procedure:s,section:l}=a,c=this.application.createNode({parent:e,children:i,append:true,replace:t,delegate:true,cascade:true===a.cascade||!!i&&i.length>0&&!t.originalRoot});if(c.inherit(t,"base","alignment"),t.documentRoot&&(c.documentRoot=true,t.documentRoot=false),null===c.actualParent&&e.naturalElement&&(c.actualParent=e),n&&c.setControlType(de.getControlName(n,t.api),n),o&&c.addAlign(o),c.addAlign(16384),c.exclude({resource:void 0===r?Ue.BOX_STYLE|Ue.ASSET:r,procedure:void 0===s?ze.CUSTOMIZATION:s,section:void 0===l?He.ALL:l}),c.saveAsInitial(),c.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),false!==a.inheritContentBox&&(c.setCacheValue("contentBoxWidth",t.contentBoxWidth),c.setCacheValue("contentBoxHeight",t.contentBoxHeight)),a.resetMargin&&t.resetBox(30,c),a.inheritDataset&&t.naturalElement){const e=c.dataset;Object.assign(e,t.dataset),delete e.use}if(t.renderParent&&t.removeTry()&&(t.rendered=false),t.documentParent.layoutElement){const e=t.namespace("android");for(const t in e)t.startsWith("layout_")&&(c.android(t,e[t]),delete e[t])}return c}processRelativeHorizontal(t,a){const i=[];let o,r=false,s=false;if(t.hasAlign(16)){let t;a.forEach(e=>{t?e.anchor("topBottom",t.documentId):e.anchor("top","true"),e.pageFlow?(i.push([e]),t=e):r=true})}else{const e=t.nodeGroup?t.documentParent:t,n=e.actualBoxWidth((()=>{const i=t.renderParent;if(i.overflowY)return i.box.width;{const e=t.actualParent;if(e){if(t.naturalElement&&t.inlineStatic&&e.blockStatic&&e===i){const{left:a,width:i}=e.box;return i-(t.linear.left-a)}if(e.floatContainer){const{containerType:i,alignmentType:n}=this.containerTypeVerticalMargin;if(t.ascend({condition:t=>t.of(i,n),including:e,attr:"renderParent"}).length){const{left:i,right:n,width:o}=t.box;let r=0,s=0;return e.naturalChildren.forEach(e=>{const o=e.linear;e.floating&&!a.includes(e)&&t.intersectY(o)&&("left"===e.float?Math.floor(o.right)>i&&(r=Math.max(r,o.right-i)):n>Math.ceil(o.left)&&(s=Math.max(s,n-o.left)))}),o-r-s}}}}return e.box.width})()),s=this.application.clearMap,l="nowrap"!==t.css("whiteSpace");let c,h=0,d=false,u=0;if(t.naturalElement)t.blockDimension&&(u=t.parseUnit(t.css("textIndent")));else{const e=t.actualParent;if((null==e?void 0:e.blockDimension)&&e.has("textIndent")){const t=a[0];if(!t.rightAligned){const a=e.css("textIndent");u=e.parseUnit(a),0!==u&&(u<0&&e.setCacheValue("paddingLeft",Math.max(0,e.paddingLeft+u)),t.setCacheValue("blockDimension",true),t.css("textIndent",a),e.css("textIndent","0px"))}}}ua(a).forEach((e,a)=>{const f=e.length;if(0===f)return;const p=1===a;let g,m,y,b,T=true;p?((!t.naturalElement&&e[0].actualParent||t).cssInitialAny("textAlign","right","end")?(g="right",T=false,e[f-1].anchor(g,"true")):g="left",e.some(t=>t.floating)&&Ke(e),m=i):(g="right",o=[],m=o);for(let a=0;a<f;++a){const i=e[a];let o;if(p&&T?(o="leftRight",0===a&&i.inline&&Math.abs(u)>=i.actualWidth&&"right"!==i.float&&!i.positionRelative&&(d=true,i.floating||(i.setCacheValue("float","left"),i.setCacheValue("floating",true)))):o="rightLeft",!i.pageFlow){if(y){const t=y.documentId;i.anchor(o,t),i.anchor("top",t)}else i.anchor(g,"true"),i.anchor("top","true");r=true;continue}let E,S=i.bounds;if(i.styleText&&!i.hasPX("width")){const t=i.textBounds;t&&(t.numberOfLines>1||Math.ceil(t.width)<i.box.width)&&(S=t)}let A=i.multiline;A&&Math.floor(S.width)<=n&&!i.hasPX("width")&&!pa(i)&&(A=false,i.multiline=false);let v=true===i.autoMargin.horizontal;if(v&&(i.autoMargin.leftRight?i.anchorParent("horizontal"):i.anchor(i.autoMargin.left?"right":"left","true")),y){let e=0,r=0,p=false;const x=()=>{if(y.floating&&y.alignParent(y.float)&&(A||Math.floor(h+i.actualWidth)<n))return true;if(t.floating&&a===f-1&&i.textElement&&!/[\s-]/.test(i.textContent.trim())){const e=t.css("width");return Se(e)&&t.parseWidth(e)>t.parseWidth(t.css("minWidth"))&&t.cssApply({width:"auto",minWidth:e}),t.android("maxLines","1"),true}return false},w=()=>(r=h+i.marginLeft,c&&!b.includes(c)&&(r+=c.linear.width),c&&i.plainText&&!A&&b.includes(c)&&!s.has(i)||(r+=S.width),i.marginRight<0&&(r+=i.marginRight),e=n,u<0?m.length<=1&&(e+=u):u>0&&1===m.length&&(e-=u),i.styleElement&&i.inlineStatic&&(r-=i.contentBoxWidth),e=Math.ceil(e),true),_=()=>{var t;if(y.textElement){if(1===a&&i.plainText&&i.previousSibling===y&&!_e.TRAILINGSPACE.test(y.textContent)&&!_e.LEADINGSPACE.test(i.textContent))return p=true,false;if(l&&y.multiline&&(y.bounds.width>=n||i.plainText&&B.hasLineBreak(y,false,true)))return true}if(x())return false;if(l){if(w()&&Math.floor(r)>e)return true;if("CODE"!==(null===(t=i.actualParent)||void 0===t?void 0:t.tagName))return A&&i.plainText||pa(i)}return false},N=i.textElement&&_();y.floating&&ta(i,y)&&(o=""),E=i.inlineVertical&&y.inlineVertical&&i.previousSibling!==y?ve(y.element,i.element):void 0;const I=s.has(i);N||i.nodeGroup&&!i.hasAlign(128)||Math.ceil(i.bounds.top)>=y.bounds.bottom&&(i.blockStatic||i.floating&&y.float===i.float)||!i.textElement&&!x()&&w()&&Math.floor(r)>e||!i.floating&&(y.blockStatic||i.previousSiblings().some(t=>t.excluded&&t.blockStatic)||(null==E?void 0:E.some(t=>aa(t))))||I||y.autoMargin.horizontal||B.checkPreIndent(y)?(I&&!c&&i.setBox(2,{reset:1}),T?(c&&(i.bounds.bottom<=c.bounds.bottom||d)?v||i.anchor(o,c.documentId):(v||i.anchor(g,"true"),c=void 0),v=true):(c&&i.linear.bottom>c.bounds.bottom&&(c=void 0),y.anchor(g,"true")),h=Math.min(0,N&&!y.multiline&&A&&!I?i.linear.right-t.box.right:0),b=[i],m.push(b)):(""!==o&&(T?v||(i.anchor(o,y.documentId),v=true):y.anchor(o,i.documentId)),!A||i.hasPX("width")||y.floating||p||(i.multiline=false),b.push(i))}else T&&(v||i.anchor(g,"true")),b=[i],m.push(b);if("left"===i.float&&p&&(c?i.linear.bottom>c.linear.bottom&&(c=i):c=i),false===(null==E?void 0:E.some(t=>!!Ne(t,i.sessionId)||aa(t)))){const t=xe(E[0]);if(!t.numberOfLines){const e=E.length>1&&xe(E.pop());e&&e.numberOfLines||(h+=e?t.left-e.right:t.width)}}h+=i.marginLeft+S.width+i.marginRight,y=i}}),u<0&&1===i.length&&t.setCacheValue("paddingLeft",Math.max(0,t.paddingLeft+u))}(i.length>1||o&&o.length>1)&&(s=true);const l=i=>{let o=null;const r=i.length,l=1===r&&!t.hasHeight;for(let c=0;c<r;++c){const h=i[c];let d;const u=h.length;if(u>1){const i=ea(h);let f=i[0];d=Ye.baseline(i.length?h.filter(t=>!i.includes(t)):h),d&&f&&(d!==f&&d.bounds.height<f.bounds.height?d.anchor("bottom",f.documentId):(d=Ye.baseline(h),f=void 0));const p=[];let g=0===c?"true":null==d?void 0:d.documentId,m=0,y=null,b=0;while(b<u){const e=h[b++];if(e===d||e===f)continue;const a=e.inlineVertical?e.css("verticalAlign"):"";if(e.controlElement){let a=e.bounds.top;o?a-=o.linear.bottom:(e.anchor("top","true"),a-=t.box.top),e.setBox(2,{reset:1,adjustment:a}),e.baselineAltered=true;continue}let i=false;if(e.baseline)!e.naturalElements.length||!Se(e.verticalAlign)&&e.baselineElement?p.push(e):i=true;else switch(a){case"text-top":null===y&&(y=Ye.baseline(h,true)),y&&e!==y&&e.anchor("top",y.documentId);break;case"super":e.baselineAltered||e.modifyBox(2,-1*Math.floor(e.baselineHeight*this.localSettings.deviations.superscriptTopOffset));case"top":g&&g!==e.documentId?e.anchor("top",g):d&&e.anchor("top",d.documentId);break;case"middle":{const t=Math.max(e.actualHeight,e.lineHeight);if(s){if(d){const a=Math.max(d.actualHeight,d.lineHeight);t<a?(e.anchor("top",d.documentId),e.setBox(2,{reset:1,adjustment:Math.round((a-t)/2)}),e.baselineAltered=true):t>m&&(m=t)}}else e.anchor("centerVertical","true"),e.imageElement&&(m=Math.max(t,m));break}case"text-bottom":null===y&&(y=Ye.baseline(h,true)),y!==e&&y?e.anchor("bottom",y.documentId):d&&e.anchor("bottom",d.documentId);break;case"sub":e.baselineAltered||e.modifyBox(8,-1*Math.ceil(e.baselineHeight*this.localSettings.deviations.subscriptBottomOffset));case"bottom":g&&!Be(t.bounds.height,e.bounds.height)&&(t.hasHeight||"true"!==g||(s?d&&(g=d.documentId):t.css("height",be(t.bounds.height))),e.anchor("bottom",g));break;default:i=!e.baselineAltered}0===c&&i&&e.anchor("top","true")}const T=p.length;if(d){if(d.baselineActive=true,T)Qe(d,p,l,t.box.top),l&&d.is(e.BUTTON)&&(d.anchor("centerVertical","true"),d=null);else if(d.textElement)if(m>Math.max(d.actualHeight,d.lineHeight))d.anchor("centerVertical","true"),d=null;else if(d.multiline){const{left:t,height:e}=d.bounds;let a=0;while(a<u){const i=h[a++];if(i===d)break;if(t<i.bounds.right&&e<i.bounds.height){d.anchor("bottom",i.documentId);break}}}}else if(T>0&&T<u&&(f=ea(h)[0],f)){let t=0;while(t<T){const e=p[t++];e.baseline&&!e.multiline&&f.bounds.height>e.bounds.height&&e.anchor("bottom",f.documentId)}}let E=true,S=u-1;while(S>=0){const t=h[S--];t.textElement&&(t.setSingleLine(E&&!t.rightAligned&&!t.centerAligned),E=false)}if("center"===t.cssInitial("textAlign")&&r>1){const i=this.application,r=this.createNodeGroup(h[0],h,{parent:t});r.setControlType(n.RELATIVE,e.RELATIVE),r.render(t),r.anchorParent("horizontal"),r.setLayoutWidth("wrap_content"),r.setLayoutHeight("wrap_content");let s=-1;h.forEach(t=>{const e=a.indexOf(t);-1!==e&&(s=-1===s?e:Math.min(e,s)),t.removeTry(),t.render(r),i.addLayoutTemplate(r,t,{type:1,node:t,controlName:t.controlName})}),i.addLayoutTemplate(t,r,{type:1,node:r,controlName:r.controlName},s),o?r.anchor("topBottom",o.documentId):o=r;continue}}else d=h[0],d.centerAligned&&(d.anchorParent("horizontal"),d.anchorDelete("left","right"));let f=false;null===d&&(d=h[0],f=true);let p=0;while(p<u){const t=h[p++];o&&!t.alignSibling("baseline")&&t.anchor("topBottom",o.documentId),f&&t.linear.bottom>=d.linear.bottom&&(d=t)}o=d}};if(l(i),o&&l(o),t.horizontalRows=o?i.concat(o):i,r){const e=t.renderChildren,a=t.renderTemplates,i=[];for(let t=0;t<e.length;++t)e[t].pageFlow||(i.push(a[t]),e.splice(t,1),a.splice(t--,1));i.forEach(t=>{e.push(t.node),a.push(t)})}}processConstraintHorizontal(t,e){const a=t.hasAlign(2048),{anchorStart:i,anchorEnd:n,chainStart:o,chainEnd:r}=ba(a);let s,l,c,h=0,d=true,u=null,f=0;const p=e=>{e.anchorParent("vertical",0),e.setBox(2,{reset:1,adjustment:Math.max(e.bounds.top-t.box.top,Math.min(-1*Ce(e.verticalAlign),0))}),e.baselineAltered=true,d=false};if(!a)switch(t.cssAscend("textAlign",true)){case"center":h=.5;break;case"right":case"end":h=1}if(e.some(t=>t.floating)){if(!a)switch(h){case.5:{let a;[a,e]=We(e,t=>t.floating||true===t.autoMargin.horizontal),a.length&&this.processConstraintChain(t,a);break}case 1:{let a;[a,e]=function(t){return We(t,t=>"left"===t.float||true===t.autoMargin.right)}(e),a.length&&this.processConstraintChain(t,a);break}default:{let a;[a,e]=ua(e),a.length&&this.processConstraintChain(t,a);break}}Ke(e)}!t.hasPX("width")&&e.some(t=>t.percentWidth>0)&&t.setLayoutWidth("match_parent");const g=Ye.baseline(e),m=ea(e)[0],y=null==g?void 0:g.documentId;let b=de.availablePercent(e,"width",t.box.width);const T=e.length;for(let t=0;t<T;++t){const a=e[t];if(c?a.pageFlow?(c.anchor(r,a.documentId),a.anchor(o,c.documentId),t===T-1&&a.anchor(n,"parent")):a.autoPosition&&a.anchor(o,c.documentId):1===T?(h=a.centerAligned?.5:a.rightAligned?1:0,a.blockStatic||.5===h?a.anchorParent("horizontal",h):(a.anchor(i,"parent"),a.anchorStyle("horizontal",0))):(a.anchor(i,"parent"),a.anchorStyle("horizontal",h,"packed")),a.pageFlow){if(a!==g){if(a.controlElement)p(a);else if(a.inlineVertical)switch((!s||ga(a)>ga(s))&&(s=a),a.css("verticalAlign")){case"text-top":null===u&&(u=Ye.baseline(e,true)),u&&a!==u?a.anchor("top",u.documentId):p(a);break;case"middle":false===(null==g?void 0:g.textElement)||m?p(a):a.anchorParent("vertical",.5);break;case"text-bottom":if(null===u&&(u=Ye.baseline(e,true)),u&&a!==u){a!==m?a.anchor("bottom",u.documentId):m&&p(a);break}case"bottom":l||e.forEach(t=>{t.baseline||l&&!(t.linear.bottom>l.linear.bottom)||(l=t)}),a===l?p(a):a.anchor("bottom","parent");break;case"baseline":null===g||a.blockVertical||!a.textElement&&ga(a)>ga(g)?p(a):(a.anchor("baseline",y||"parent"),f++);break;default:p(a)}else a.plainText?(a.anchor("baseline",y||"parent"),f++):p(a);a.anchored=true}b=de.setConstraintDimension(a,b),c=a}else a.autoPosition&&(y?a.anchor("top",y):(a.anchorParent("vertical",0),a.anchored=true,d=false))}if(g){if(s&&s!==g&&g.textElement&&ga(s)>ga(g))switch(s.verticalAlign){case"middle":g.anchorParent("vertical",.5,"",true);break;case"baseline":g.anchor("baseline",s.documentId);break;case"bottom":case"text-bottom":g.anchor("bottom",s.documentId);break;default:p(g)}else d&&g.baselineElement&&!g.imageOrSvgElement&&t.ascend({condition:t=>t.layoutHorizontal,error:t=>t.naturalChild&&t.layoutVertical||t.layoutGrid,attr:"renderParent"}).length?(g.anchorParent("vertical"),g.anchor("baseline","parent")):p(g);g.baselineActive=f>0,g.anchored=true}}processConstraintChain(t,e){const a=this.application.clearMap,i=t.hasAlign(512),n=e[0].actualParent||t,o=Ye.partitionRows(e,a),r=o.length;!t.hasWidth&&e.some(t=>t.percentWidth>0)&&t.setLayoutWidth("match_parent",false);let s,l=[];for(let e=0;e<r;++e){const c=o[e],[h,d]=We(c,t=>"right"===t.float||true===t.autoMargin.left);let u,f,p,g=false;const m=(o,h)=>{const d=o.length;if(0===d)return;const{anchorStart:m,anchorEnd:y,chainStart:b,chainEnd:T}=ba(h),E=o[0],S=o[d-1];d>1?(E.anchor(m,"parent"),h?S.anchorStyle("horizontal",1,"packed"):E.anchorStyle("horizontal",i||"center"!==n.css("textAlign")?0:.5,"packed"),S.anchor(y,"parent")):Ea(E);let A=de.availablePercent(c,"width",t.box.width);g=!((1!==e||E.floating||true!==(null==s?void 0:s.every(t=>t.floating))||0!==a.size&&c.some(t=>la(t,a)))&&(E.pageFlow||E.autoPosition&&1!==d)),p=void 0;for(let t=0;t<d;++t){const c=o[t];if(0===e||g?1===r?(c.anchorParent("vertical"),Sa(c,1===d,true)):(c.anchor("top","parent"),c.anchorStyle("vertical",0,"packed")):e!==r-1||f||c.anchor("bottom","parent"),c.autoMargin.leftRight)c.anchorParent("horizontal");else if(d>1){const e=o[t-1],a=o[t+1];if(e)if(!e.pageFlow&&e.autoPosition){let e,a=t-2;while(a>=0){if(e=o[a--],e.pageFlow)break;e=void 0}e?c.anchor(b,e.documentId):c.anchor(m,"parent")}else c.anchor(b,e.documentId);a&&c.anchor(T,a.documentId)}if(A=de.setConstraintDimension(c,A),s&&0===t&&(a.has(c)&&!c.floating&&c.modifyBox(2,-s[s.length-1].bounds.height,false),i)){let t=false;for(const e of l)if(c.bounds.top<Math.floor(e.bounds.bottom)){t=true;break}if(t){u=s[s.length-1];let t=l.length-2;while(t>=0){const e=l[t--];if(e.linear.bottom>u.linear.bottom){if(h&&Math.ceil(e.linear[y])-Math.floor(n.box[y])<c.linear.width)continue;c.anchorDelete(m),c.anchor(b,e.documentId,true),h?c.modifyBox(4,e.marginLeft):c.modifyBox(16,e.marginRight),E.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),E.anchorDelete(T),S.anchorDelete(y),f||(f=c);break}}}}(!p||c.linear.height>p.linear.height)&&(p=c)}};if(m(d,false),m(h,true),i&&(l=l.concat(d,h)),!g){if(s){const t=c[0],e=s.length,a=c.length;if(1===e&&1===a){const e=s[0];e.anchor("bottomTop",t.documentId),t.anchor("topBottom",e.documentId),t.app("layout_constraintVertical_bias","0")}else{if(!u||!f){u=s[0];let t=1;while(t<e){const e=s[t++];e.linear.bottom>u.linear.bottom&&(u=e)}}if(!f){f=c[0];let t=f.linear.top,e=1;while(e<a){const a=c[e++],i=a.linear.top;(i<t||i===t&&a.linear.height>f.linear.height)&&(f=a,t=i)}}const t=f.documentId;u.anchor("bottomTop",t),f.anchor("topBottom",u.documentId),Sa(f,1===e,true);const i=f.marginTop;c.forEach(e=>{e!==f&&(Sa(e,1===a),e.anchor("top",t),e.modifyBox(2,-1*i))})}}s=c}}t.horizontalRows=o}createLayoutGroup(t){return this.createNodeGroup(t.node,t.children,{parent:t.parent})}get containerTypeHorizontal(){return{containerType:e.RELATIVE,alignmentType:8}}get containerTypeVertical(){return{containerType:e.CONSTRAINT,alignmentType:16}}get containerTypeVerticalMargin(){return{containerType:e.FRAME,alignmentType:256}}get containerTypePercent(){return{containerType:e.CONSTRAINT,alignmentType:32768}}get afterInsertNode(){return t=>{this.userSettings.exclusionsDisabled||t.setExclusions(),t.localSettings=this._defaultViewSettings,t.api=this._targetAPI}}get userSettings(){return this.application.userSettings}get screenDimension(){return this._screenDimension}}class va extends squared.base.ExtensionManager{}var xa={resources:{">":{color:{"@":["name"],"~":true}}}},wa={resources:{">":{dimen:{"@":["name"],"~":true}}}},_a={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},Na={resources:{">":{string:{"@":["name"],"~":true}}}},Ia={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":true}}}}}},Ra={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":true}}}}}};const Ca=squared.lib,{fromLastIndexOf:La,objectMap:Pa,parseMimeType:Oa,trimEnd:ka}=Ca.util,{applyTemplate:Da,replaceTab:Ma}=Ca.xml,Wa=B.ASSETS,Ba=B.STORED,Xa=/^(.+)\/(.+?\.\w+)$/,Ga=/"(-?[\d.]+)px"/g,Ha=/>(-?[\d.]+)px</g;function Va(t,e){const a=e.length;if(a){const i=new Array(a/3);for(let n=0,o=0;n<a;n+=3)i[o++]={pathname:t+e[n+1],filename:e[n+2],content:e[n]};return i}return e}function Fa(t,e,a,i){const n=e.length;if(n){a=a.toLowerCase();let o=Oa(a);o.startsWith("image/")||(o=""),/^[a-z\d]/.test(a)||(a="@"+a);const r=new Array(n/3);for(let s=0,l=0;s<n;s+=3){const n=e[s+2].split("?")[0].trim().toLowerCase();let c;if(""!==o){const t=Oa(n);t.startsWith("image/")&&t!==o&&(c=a+":"+t)}r[l++]={pathname:t+e[s+1],filename:n,mimeType:c,compress:i&&B.canCompressImage(n)?[{format:"png"}]:void 0,uri:e[s]}}return r}return e}function za(t,e){const a=e.length;if(a){const i=new Array(a/3);for(let n=0,o=0;n<a;n+=3)i[o++]={pathname:t,filename:e[n+2].toLowerCase(),mimeType:e[n+1],uri:e[n]};return i}return e}function Ua(t){return(t=t.trim()).endsWith("\\")?ka(t,"\\")+"/":t.endsWith("/")?t:t+"/"}const qa=(t,e,a)=>({pathname:t,filename:e,content:a}),Ya=(t,e)=>"dp"===e?t.replace(Ga,(t,...e)=>'"'+Z(e[0],false)+'"'):t,ja=(t,e)=>t.toString().toLowerCase()>=e.toString().toLowerCase()?1:-1;class Ka extends squared.base.FileUI{copyToDisk(t,e){this.copying(Object.assign(Object.assign({},e),{assets:this.getAssetsAll(null==e?void 0:e.assets),directory:t}))}appendToArchive(t,e){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},e),{assets:this.getAssetsAll(null==e?void 0:e.assets),appendTo:t}))}saveToArchive(t,e){this.archiving(Object.assign(Object.assign({},e),{assets:this.getAssetsAll(null==e?void 0:e.assets),filename:t}))}resourceAllToXml(t={}){const{directory:e,filename:a}=t,i={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),anim:this.resourceAnimToXml(),drawableImage:this.resourceDrawableImageToString(),rawVideo:this.resourceRawVideoToString(),rawAudio:this.resourceRawAudioToString()};for(const t in i)0===i[t].length&&delete i[t];if(e||a){const n=this.userSettings,o=Ua(n.outputDirectory);let r=[];for(const t in i)switch(t){case"drawableImage":r=r.concat(Fa(o,i[t],n.convertImages,n.compressImages));break;case"rawVideo":r=r.concat(za(o+this.directory.video,i[t]));break;case"rawAudio":r=r.concat(za(o+this.directory.audio,i[t]));break;default:r=r.concat(Va(o,i[t]))}t.assets=r.concat(t.assets||[]),e&&this.copying(t),a&&this.archiving(t)}return i}resourceStringToXml(t={}){const e={string:[]},a=e.string;Ba.strings.has("app_name")||a.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[t,e]of Array.from(Ba.strings.entries()).sort(ja))a.push({name:t,innerText:e});return this.checkFileAssets([Ma(Da("resources",Na,[e]),this.userSettings.insertSpaces,true),this.directory.string,"strings.xml"],t)}resourceStringArrayToXml(t={}){if(Ba.arrays.size){const e={"string-array":[]},a=e["string-array"];for(const[t,e]of Array.from(Ba.arrays.entries()).sort())a.push({name:t,item:Pa(e,t=>({innerText:t}))});return this.checkFileAssets([Ma(Da("resources",Ia,[e]),this.userSettings.insertSpaces,true),this.directory.string,"string_arrays.xml"],t)}return[]}resourceFontToXml(t={}){var e;if(Ba.fonts.size){const a=this.resource,{insertSpaces:i,targetAPI:n}=this.userSettings,o=n<26?h.app:h.android,r=Ua(this.userSettings.outputDirectory),s=this.directory.font,l=[];for(const[t,c]of Array.from(Ba.fonts.entries()).sort()){const h={"xmlns:android":o,font:[]},d=h.font;for(const i in c){const[n,o,l]=i.split("|");let h=t;"normal"===o?h+="400"===l?"_normal":"_"+c[i]:(h+="_"+o,"400"!==l&&(h+="_"+c[i])),d.push({font:"@font/"+h,fontStyle:o,fontWeight:l});const u=null===(e=a.getFont(n,o,l))||void 0===e?void 0:e.srcUrl;u&&this.addAsset({pathname:r+s,filename:h+"."+La(u.split("?")[0],".").toLowerCase(),uri:u})}let u=Ma(Da("font-family",_a,[h]),i);n<26&&(u=u.replace(/\s+android:/g," app:")),l.push(u,s,t+".xml")}return this.checkFileAssets(l,t)}return[]}resourceColorToXml(t={}){if(Ba.colors.size){const e={color:[]},a=e.color;for(const[t,e]of Array.from(Ba.colors.entries()).sort())a.push({name:e,innerText:t});return this.checkFileAssets([Ma(Da("resources",xa,[e]),this.userSettings.insertSpaces),this.directory.string,"colors.xml"],t)}return[]}resourceStyleToXml(t={}){const e=[];if(Ba.styles.size){const t={style:[]},a=t.style;Array.from(Ba.styles.values()).sort((t,e)=>t.name.toString().toLowerCase()>=e.name.toString().toLowerCase()?1:-1).forEach(t=>{const e=t.items;Array.isArray(e)&&a.push({name:t.name,parent:t.parent,item:Pa(e.sort((t,e)=>t.key>=e.key?1:-1),t=>({name:t.key,innerText:t.value}))})}),e.push(Ma(Da("resources",Ra,[t]),this.userSettings.insertSpaces),this.directory.string,"styles.xml")}if(Ba.themes.size){const{convertPixels:t,insertSpaces:i,manifestThemeName:n}=this.userSettings,o={};for(const[r,s]of Ba.themes.entries()){const l=Xa.exec(r);if(l){const c={style:[]},h=c.style;for(const[t,e]of s.entries()){const a=[],i=e.items;for(const t in i)a.push({name:t,innerText:i[t]});o[r]&&t===n&&!c.length||h.push({name:t,parent:e.parent,item:a}),t===n&&(o[r]=true)}e.push(Ma((a=Da("resources",Ra,[c]),"dp"===t?a.replace(Ha,(t,...e)=>">"+Z(e[0],false)+"<"):a),i),l[1],l[2])}}}var a;return this.checkFileAssets(e,t)}resourceDimenToXml(t={}){if(Ba.dimens.size){const e=this.userSettings.convertPixels,a={dimen:[]},i=a.dimen;for(const[t,a]of Array.from(Ba.dimens.entries()).sort())i.push({name:t,innerText:e?Z(a,false):a});return this.checkFileAssets([Ma(Da("resources",wa,[a])),this.directory.string,"dimens.xml"],t)}return[]}resourceDrawableToXml(t={}){if(Ba.drawables.size){const{convertPixels:e,insertSpaces:a}=this.userSettings,i=this.directory.image,n=[];for(const[t,o]of Ba.drawables.entries())n.push(Ma(Ya(o,e),a),i,t+".xml");return this.checkFileAssets(n,t)}return[]}resourceAnimToXml(t={}){if(Ba.animators.size){const e=this.userSettings.insertSpaces,a=[];for(const[t,i]of Ba.animators.entries())a.push(Ma(i,e),"res/anim",t+".xml");return this.checkFileAssets(a,t)}return[]}resourceDrawableImageToString(t={}){if(Ba.images.size){const{directory:e,filename:a}=t,i=this.directory.image,n=[];for(const[t,e]of Ba.images.entries())if(Object.keys(e).length>1)for(const a in e){const o=e[a];n.push(o,`${i}-${a}`,t+"."+La(o,".").toLowerCase())}else{const a=e.mdpi;a&&n.push(a,i,t+"."+La(a,".").toLowerCase())}if(e||a){const{outputDirectory:i,convertImages:o,compressImages:r}=this.userSettings;t.assets=Fa(Ua(i),n,o,r).concat(t.assets||[]),e&&this.copying(t),a&&this.archiving(t)}return n}return[]}resourceRawVideoToString(t={}){if(Wa.video.size){const{directory:e,filename:a}=t,i=this.directory.video,n=[];for(const t of Wa.video.values()){const e=t.uri;n.push(e,t.mimeType||"",La(e,"/","\\"))}return(e||a)&&(t.assets=za(Ua(this.userSettings.outputDirectory)+i,n).concat(t.assets||[]),e&&this.copying(t),a&&this.archiving(t)),n}return[]}resourceRawAudioToString(t={}){if(Wa.video.size){const{directory:e,filename:a}=t,i=this.directory.audio,n=[];for(const t of Wa.audio.values()){const e=t.uri;n.push(e,t.mimeType||"",La(e,"/","\\"))}return(e||a)&&(t.assets=za(Ua(this.userSettings.outputDirectory)+i,n).concat(t.assets||[]),e&&this.copying(t),a&&this.archiving(t)),n}return[]}layoutAllToXml(t,e={}){const{directory:a,filename:i}=e,n=a||i,o={},r=[],s=t.length;for(let e=0;e<s;++e){const{content:a,filename:i,pathname:s}=t[e];o[i]=[a],n&&r.push(qa(s,0===e?this.userSettings.outputMainFileName:i+".xml",a))}return n&&(e.assets=e.assets?r.concat(e.assets):r,a&&this.copying(e),i&&this.archiving(e)),o}getAssetsAll(t){const e=this.userSettings;let a=[];if(t){const i=t.length;let n=true,o=0;while(o<i){const a=t[o++];if(!a.uri)if(n)a.filename=e.outputMainFileName,n=false;else{const t=a.filename;t.endsWith(".xml")||(a.filename=t+".xml")}}a=a.concat(t)}const i=Ua(e.outputDirectory);return a.concat(Va(i,this.resourceStringToXml()),Va(i,this.resourceStringArrayToXml()),Va(i,this.resourceFontToXml()),Va(i,this.resourceColorToXml()),Va(i,this.resourceDimenToXml()),Va(i,this.resourceStyleToXml()),Va(i,this.resourceDrawableToXml()),Fa(i,this.resourceDrawableImageToString(),e.convertImages,e.compressImages),Va(i,this.resourceAnimToXml()),za(i+this.directory.video,this.resourceRawVideoToString()),za(i+this.directory.audio,this.resourceRawAudioToString()))}checkFileAssets(t,e){const{directory:a,filename:i}=e;return(a||i)&&(e.assets=Va(Ua(this.userSettings.outputDirectory),t).concat(e.assets||[]),a&&this.copying(e),i&&this.archiving(e)),t}get userSettings(){return this.resource.userSettings}}const{NODE_PROCEDURE:$a,NODE_RESOURCE:Za}=squared.base.lib.enumeration;class Ja extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=true,this.options={displayLabel:false}}beforeBaseLayout(){this.cacheProcessing.each(t=>{if(t.inputElement&&t.hasProcedure($a.ACCESSIBILITY)){const e=t.attributes["aria-describedby"];if(e){const a=this.cacheProcessing.find(t=>t.elementId===e);if(a){const e=a.textContent.trim();""!==e&&t.data(B.KEY_NAME,"titleString",e)}}switch(t.containerName){case"INPUT_RADIO":case"INPUT_CHECKBOX":{const e=t.elementId;[t.nextSibling,t.previousSibling].some(a=>{if((null==a?void 0:a.pageFlow)&&!a.visibleStyle.backgroundImage&&a.visible){let i=false;if(e&&e===a.toElementString("htmlFor"))i=true;else if(a.textElement){const e=a.actualParent;"LABEL"===e.tagName?(e.renderAs=t,i=true):a.plainText&&(i=true)}if(i)return a.labelFor=t,this.options.displayLabel||a.hide(),true}return false});break}case"INPUT_IMAGE":t.hasResource(Za.IMAGE_SOURCE)&&t.data(B.KEY_NAME,"embedded",[t]);break;case"BUTTON":if(t.length){const e=t.extract(t=>!t.textElement);e.length&&t.hasResource(Za.IMAGE_SOURCE)&&t.data(B.KEY_NAME,"embedded",e),t.clear()}}}})}}const Qa=squared.lib,ti=squared.base.lib,{formatPX:ei}=Qa.css,{createElement:ai}=Qa.dom,{maxArray:ii,truncate:ni}=Qa.math,{safeNestedArray:oi}=Qa.util,{APP_SECTION:ri,BOX_STANDARD:si,NODE_ALIGNMENT:li,NODE_PROCEDURE:ci,NODE_RESOURCE:hi,NODE_TEMPLATE:di}=ti.enumeration,ui=ti.constant.EXT_NAME.COLUMN;class fi extends squared.base.extensions.Column{processNode(t,a){return super.processNode(t,a),t.containerType=e.CONSTRAINT,t.addAlign(4),{complete:true,subscribe:true}}postBaseLayout(t){const a=t.data(ui,"mainData");if(a){const i=this.application,{columnCount:o,columnGap:r,columnWidth:s,columnRule:l,columnSized:c,boxWidth:h,rows:d,multiline:u}=a,{borderLeftWidth:f,borderLeftColor:p,borderLeftStyle:g}=l,m=t.parseUnit(f),y="none"!==g&&m>0,b=()=>{const a=i.createNode({parent:t,append:true});let o;return a.inherit(t,"base"),a.containerName=t.containerName+"_COLUMNRULE",a.setControlType(n.LINE,e.LINE),a.exclude({resource:hi.ASSET,procedure:ci.ALL}),y?(o=ei(m),a.cssApply({width:o,paddingLeft:o,borderLeftStyle:g,borderLeftWidth:f,borderLeftColor:p,lineHeight:"initial",boxSizing:"border-box",display:"inline-block"})):(o=ei(r),a.cssApply({width:o,lineHeight:"initial",display:"inline-block"})),a.saveAsInitial(),a.setLayoutWidth(o),a.setLayoutHeight("0px"),a.render(t),a.positioned=true,a.renderExclude=false,i.addLayoutTemplate(t,a,{type:1,node:a,controlName:a.controlName}),a};let T;const E=d.length;for(let e=0;e<E;++e){const a=d[e],i=a.length;if(1===i){const t=a[0];0===e?(t.anchor("top","parent"),t.anchorStyle("vertical",0,"packed")):(T.anchor("bottomTop",t.documentId),t.anchor("topBottom",T.documentId)),e===E-1?t.anchor("bottom","parent"):T=a[0],t.anchorParent("horizontal",t.rightAligned?1:t.centerAligned?.5:0),t.anchored=true,t.positioned=true}else{const n=[];let l=Math.min(i,c,o||Number.POSITIVE_INFINITY),d=0;if(l>1){const t=Math.floor(a.reduce((t,e)=>t+e.bounds.height,0)/l);let e=i>=l?Math.ceil(i/l):1,s=u||e>1&&(i%e!=0||!isNaN(o)&&e*o%i>1),c=s&&i%l!=0?i-l:Number.POSITIVE_INFINITY,f=0;for(let o=0,r=0,h=0;o<i;++o,++h){const d=a[o],u=h%e==0;r<l-1&&(u||c<=0||o>0&&(a[o-1].bounds.height>=t||n[r].length&&o<i-2&&i-o+1==l-r&&a[o-1].bounds.height>a[o+1].bounds.height))&&(o>0&&(++r,u?c--:c++),h=0,!u&&c>0&&(s=true));const p=oi(n,r);p.push(d),d.length&&(f+=ii(d.map(t=>t.marginLeft+t.marginRight))),o>0&&/^H\d/.test(d.tagName)?1===p.length&&o===i-2?(l--,c=0):(h+1)%e==0&&i-o>l&&!a[o+1].multiline&&a[o+1].bounds.height<t&&(p.push(a[++o]),h=-1):s&&i-o==l-r&&c!==Number.POSITIVE_INFINITY&&(e=1)}d=l>1?Math.max((f+r*(l-1))/h/l,.01):0}else n.push(a);const f=n.length,p=new Array(f);let g=0;while(g<f){const e=n[g];e.forEach(e=>{e.app("layout_constraintWidth_percent",ni(1/l-d,t.localSettings.floatPrecision)),e.setLayoutWidth("0px"),e.setBox(4,{reset:1}),e.exclude({section:ri.EXTENSION}),e.anchored=true,e.positioned=true}),p[g++]=e[0]}for(g=0;g<f;++g){const t=n[g];if(g<f-1&&t.length>1){const e=t[t.length-1];if(/^H\d/.test(e.tagName)){t.pop();const a=g+1;p[a]=e,n[a].unshift(e)}}}const m=new Array(f);g=0;while(g<f){const e=n[g],a=[];let i=0;const o=e.length;let r=0;while(r<o){const t=e[r++];if(t.naturalChild){const e=t.element.cloneNode(true);if(t.styleElement)if(t.imageOrSvgElement)e.style.height=ei(t.bounds.height);else{const a=t.textStyle;for(const t in a)e.style[t]=a[t]}a.push(e)}else i+=t.linear.height}if(a.length){const e=ai(document.body,"div",{width:ei(s||t.box.width/l),visibility:"hidden"});a.forEach(t=>e.appendChild(t)),i+=e.getBoundingClientRect().height,document.body.removeChild(e)}m[g++]=i}let y,S,A=0;for(g=0;g<f;++g){const t=m[g];if(t>=A){const e=n[g];y=e[0],S=e[e.length-1],A=t}}for(g=0;g<f;++g){const t=p[g];if(0===g)t.anchor("left","parent"),t.anchorStyle("horizontal",0,"spread_inside");else{const e=p[g-1];t.anchor("leftRight",e.documentId),t.modifyBox(16,r)}g===f-1?t.anchor("right","parent"):t.anchor("rightLeft",p[g+1].documentId)}const v=[];for(g=0;g<f;++g){const t=n[g],a=t.length;for(let i=0;i<a;++i){const o=t[i];if(0===i){if(g>0){const t=b();t.anchor("top",y.documentId),t.anchor("left",n[g-1][0].documentId),t.anchor("right",o.documentId),v.push(t)}0===e?o.anchor("top","parent"):o!==y?o.anchor("top",y.documentId):(T.anchor("bottomTop",o.documentId),o.anchor("topBottom",T.documentId)),o.anchorStyle("vertical",0,"packed"),o.setBox(2,{reset:1})}else{const e=t[i-1];e.anchor("bottomTop",o.documentId),o.anchor("topBottom",e.documentId),o.app("layout_constraintVertical_bias","0"),o.anchor("left",t[0].documentId)}i===a-1&&(e===E-1&&o.anchor("bottom","parent"),o.setBox(8,{reset:1}))}}const x=e<E-1?S.documentId:"parent";v.forEach(t=>t.anchor("bottom",x)),T=S}}}}}const{lib:pi,base:gi}=squared,mi=gi.lib,{formatPercent:yi,formatPX:bi,isLength:Ti,isPercent:Ei}=pi.css,{maxArray:Si,truncate:Ai}=pi.math,{CHAR:vi}=pi.regex,{conditionArray:xi,flatMultiArray:wi,hasValue:_i,isArray:Ni}=pi.util,{BOX_STANDARD:Ii,NODE_ALIGNMENT:Ri,NODE_PROCEDURE:Ci,NODE_RESOURCE:Li}=mi.enumeration,Pi=gi.LayoutUI,Oi=mi.constant.EXT_NAME.CSS_GRID,ki=gi.extensions.CssGrid,Di=/start|left|center|right|end/,Mi=/(start|left|baseline)$/,Wi=/(right|end)$/,Bi=/start|end|center|baseline/,Xi=/(start|baseline)$/;function Gi(t,e,a,i,n){const o=a?e.column:e.row,r=o.unit,s=r.length;let l=0;if(s){const t=a?"width":"height";for(let a=0;a<s;++a){const i=r[a];if(ki.isPx(i))l+=parseFloat(i);else{let i=0;xi(e.rowData[a],t=>Ni(t),e=>i=Math.min(i,...e.map(e=>e.bounds[t]))),l+=i}}}else if(l=Si(o.unitTotal),l<=0)return 0;return l+=o.gap*(o.length-1),a?(l+=t.contentBox?t.borderLeftWidth+t.borderRightWidth:t.contentBoxWidth,(i>l?Math.min(i,t.actualWidth):t.actualWidth)-l):(l+=t.contentBox?t.borderTopWidth+t.borderBottomWidth:t.contentBoxHeight,(n>l&&t.documentBody?Math.min(n,t.actualHeight):t.actualHeight)-l)}function Hi(t,e){const a=Math.floor(e/t);return[a,e-a*t]}function Vi(t,e,a,i,n,o,r,s,l,c){const h=i?e.column:e.row;if(a.startsWith("space")){const d=Gi(t,e,i,l,c);if(d>0){const t=function(t,e){const a=t.rowData;if(e){const e=t.column.length,i=t.row.length,n=new Array(e);let o=0;while(o<e){const t=new Array(i);let e=0;while(e<i)t[e]=a[e++][o];n[o++]=t}return n}return a}(e,i),l=h.length,c=new Set;switch(a){case"space-around":{const[e,a]=Hi(2*l,d);for(let i=0;i<l;++i)for(const o of new Set(wi(t[i]))){const t=(i>0&&i<=a?1:0)+e;c.has(o)?o.cssPX(n,d/l,false,true):(o.modifyBox(r,t),o.modifyBox(s,e),c.add(o))}break}case"space-between":if(l>1){const[e,a]=Hi(l-1,d);for(let o=0;o<l;++o)for(const r of new Set(wi(t[o])))if(o<l-1){const t=e+(o<a?1:0);c.has(r)?r.cssPX(n,t,false,true):(r.modifyBox(s,t),c.add(r))}else{if(parseInt(r.android(i?"layout_columnSpan":"layout_rowSpan"))>1){const t=e+(a>0?Math.max(a-1,1):0);r.cssPX(n,t,false,true),c.has(r)&&r.modifyBox(s,-t,false)}}break}return;case"space-evenly":{const[e,a]=Hi(l+1,d);for(let i=0;i<l;++i)for(const l of new Set(wi(t[i]))){let t=e+(i<a?1:0);c.has(l)?l.cssPX(n,t,false,true):(o?(t/=2,l.modifyBox(r,t),l.modifyBox(s,t)):(0===i&&l.modifyBox(r,e),l.modifyBox(s,t)),c.add(l))}break}}}}else if(!o){let n=Gi(t,e,i,l,c);if(n>0)switch(a){case"center":n/=2,i?t.modifyBox(256,Math.floor(n)):(t.modifyBox(32,Math.floor(n)),t.modifyBox(128,Math.ceil(n)));break;case"right":if(!i)break;case"end":case"flex-end":t.modifyBox(i?256:32,n)}}}function Fi(t,e,a,i){let n,o,r,s;if(a.every(t=>ki.isPx(t))){let t=i;a.forEach(e=>t+=parseFloat(e));const r=bi(t);e?n=r:o=r}else if(a.every(t=>ki.isFr(t))){let i=0;a.forEach(t=>i+=parseFloat(t));const l=Ai(i,t.localSettings.floatPrecision);e?(n="0px",r=l):(o="0px",s=l)}else if(a.every(t=>Ei(t))){const r=yi((a.reduce((t,e)=>t+parseFloat(e),0)+i/(e?t.actualWidth:t.actualHeight))/100);e?n=r:o=r}else e?n="wrap_content":o="wrap_content";return[n,o,r,s]}function zi(t,e){const a=t.unit,i=a.length;i&&a.every(t=>"auto"===t)&&(t.unit=new Array(i).fill(e?"1fr":""))}function Ui(t,e){const{gap:a,length:i,unit:n}=t;let o=0,r=0;for(const t of n)if(ki.isPx(t))o+=parseFloat(t);else if(Ei(t))r+=parseFloat(t);else if(ki.isFr(t))return 0;const s=Math.ceil(o+(i-1)*a);return r>0?r+s/e*100:o>0&&s<e?-1:0}class qi extends squared.base.extensions.CssGrid{processNode(t,a){super.processNode(t,a);const i=t.data(Oi,"mainData");if(i){const{column:n,row:o}=i,r=n.unit,s=n.length,l=Pi.create({parent:a,node:t,alignmentType:4,children:t.children,rowCount:o.length,columnCount:s});if(!t.originalRoot&&!t.hasWidth&&0===i.rowSpanMultiple.length&&r.length===s&&r.every(t=>ki.isFr(t))&&function(t){return t.ascend({condition:t=>{const e=t.actualParent;if(null==e?void 0:e.gridElement){const a=e.data(Oi,"mainData"),i=t.data(Oi,"cellData");if(a&&i){const t=a.column.unit,{columnStart:e,columnSpan:n}=i;let o=false,r=0;while(r<n){const a=t[e+r++];if(ki.isFr(a)||Ei(a))o=true;else if("auto"===a){o=false;break}}return o}}else if(t.hasFlex("row")&&t.flexbox.grow>0)return true;return false},error:t=>t.hasWidth}).length>0}(t)){const a=i.rowData,s=a.length,c=new Array(s);let h=true;t:{let t=0;while(t<s){const e=[],i=a[t],n=i.length;let o=0;while(o<n){const t=i[o++];if(1!==(null==t?void 0:t.length)){h=false;break t}e.push(t[0])}c[t++]=e}}if(h)return n.frTotal=r.reduce((t,e)=>t+parseFloat(e),0),o.frTotal=o.unit.reduce((t,e)=>t+(ki.isFr(e)?parseFloat(e):0),0),t.setLayoutWidth("match_parent"),t.lockAttr("android","layout_width"),t.data(Oi,"constraintData",c),l.setContainerType(e.CONSTRAINT),{output:this.application.renderNode(l),include:true,complete:true}}return zi(n,true),zi(o,false),l.setContainerType(e.GRID),{output:this.application.renderNode(l),include:true,complete:true}}}processChild(t,a){var i;const o=a.data(Oi,"mainData"),r=t.data(Oi,"cellData");let s,l;if(o&&r){const{alignContent:c,column:h,row:d}=o,u=t.has("alignSelf")?t.css("alignSelf"):o.alignItems,f=t.has("justifySelf")?t.css("justifySelf"):o.justifyItems,p=a.layoutConstraint,g=(e,i,n)=>{const[s,l,c,u]=i?[h,r.columnStart,r.columnSpan,"minWidth"]:[d,r.rowStart,r.rowSpan,"minHeight"],{unit:f,unitMin:g}=s;let m=0,y=0,b=0,T=0,E=false,S=false,A=0,v=0;while(A<c){const r=l+A++,h=g[r];""!==h&&(b+=a.parseUnit(h,i?"width":"height"));let d=f[r];if(!_i(d)){const t=s.auto;if(!t[v])continue;d=t[v],t[v+1]&&++v}if("auto"===d||"max-content"===d){if(S=true,c<f.length&&(!a.hasPX(n)||f.some(t=>Ti(t))||"max-content"===d)){m=t.bounds[n],y=0,T=0;break}if(i){m=0,y=0,T=-1;break}}else if("min-content"===d){if(!e.hasPX(n)){i?e.setLayoutWidth("wrap_content",false):e.setLayoutHeight("wrap_content",false);break}}else if(ki.isFr(d))i||a.hasHeight?(-1===T&&(T=0),T+=parseFloat(d),y=m):(T=0,y+=o.minCellHeight*parseFloat(d)),m=0;else if(Ei(d))-1===T&&(T=0),T+=parseFloat(d)/100,y=m,m=0;else{const t=e.parseUnit(d,i?"width":"height");0===y?m+=t:y+=t}t.textElement&&vi.UNITZERO.test(h)&&(E=true)}if(c>1){const t=(c-1)*s.gap;m>0&&0===y?m+=t:y>0&&(y+=t),b>0&&(b+=t)}if(b>0&&(s.autoFill&&0===m&&1===(i?d.length:h.length)?(m=Math.max(t.actualWidth,b),T=0):y=b),y>0&&!e.hasPX(u)&&e.css(u,bi(y),true),p)if(i){if(e.hasPX("width",false)||(e.app("layout_constraintWidth_percent",Ai(T/h.frTotal,e.localSettings.floatPrecision)),e.setLayoutWidth("0px")),0===l)e.anchor("left","parent"),e.anchorStyle("horizontal",0,"spread");else{const t=e.innerMostWrapped.previousSibling;t&&(t.anchor("rightLeft",e.documentId),e.anchor("leftRight",t.anchorTarget.documentId))}l+c===h.length&&e.anchor("right","parent"),e.positioned=true}else e.hasPX("height",false)||(T>0?1===d.length?e.setLayoutHeight("match_parent"):(e.app("layout_constraintHeight_percent",Ai(T/d.frTotal,e.localSettings.floatPrecision)),e.setLayoutHeight("0px")):m>0&&(e.contentBox&&(m-=e.contentBoxHeight),e.css(S?"minHeight":"height",bi(m),true)));else{e.android(i?"layout_column":"layout_row",l.toString()),e.android(i?"layout_columnSpan":"layout_rowSpan",c.toString());let o=i&&h.flexible;if(0!==T)e.hasPX(n)||(i?(r.columnSpan===h.length?e.setLayoutWidth("match_parent"):(e.setLayoutWidth("0px"),e.android("layout_columnWeight",-1===T?"0.01":Ai(T,t.localSettings.floatPrecision)),e.mergeGravity("layout_gravity","fill_horizontal")),o=false):r.rowSpan===d.length?e.setLayoutHeight("match_parent"):(e.setLayoutHeight("0px"),e.android("layout_rowWeight",Ai(T,t.localSettings.floatPrecision)),e.mergeGravity("layout_gravity","fill_vertical")));else if(m>0){const t=i?"maxWidth":"maxHeight";E&&!e.hasPX(t)?(e.css(t,bi(m),true),e.mergeGravity("layout_gravity",i?"fill_horizontal":"fill_vertical")):e.hasPX(n)||(e.contentBox&&(m-=i?e.contentBoxWidth:e.contentBoxHeight),S&&!a.hasPX(t)?(e.css(u,bi(m),true),i?e.setLayoutWidth("wrap_content"):e.setLayoutHeight("wrap_content")):e.css(n,bi(m),true))}else 0!==f.length||e.hasPX(n)||(i?e.setLayoutWidth("match_parent",false):e.setLayoutHeight("wrap_content",false));o&&e.android("layout_columnWeight","0")}return[l,c]};if(Bi.test(u)||Di.test(f)||p){s=this.application.createNode({parent:a,replace:t}),s.containerName=t.containerName,s.setControlType(n.FRAME,e.FRAME),s.inherit(t,"base","initial"),s.exclude({resource:Li.BOX_STYLE|Li.ASSET,procedure:Ci.CUSTOMIZATION}),s.resetBox(30),s.resetBox(480),s.render(a),t.transferBox(30,s);let i=true;Mi.test(f)?t.mergeGravity("layout_gravity","left"):Wi.test(f)?t.mergeGravity("layout_gravity","right"):"center"===f?t.mergeGravity("layout_gravity","center_horizontal"):i=false,t.hasWidth||t.setLayoutWidth(i?"wrap_content":"match_parent",false),Xi.test(u)?t.mergeGravity("layout_gravity","top"):u.endsWith("end")?t.mergeGravity("layout_gravity","bottom"):"center"===u?t.mergeGravity("layout_gravity","center_vertical"):t.hasHeight||t.setLayoutHeight("match_parent",false),l=this.application.renderNode(new Pi(a,s,e.FRAME,4096,s.children))}else t.mergeGravity("layout_gravity","top");const m=s||t;g(m,true,"width"),m!==t||t.hasPX("maxHeight")?m.mergeGravity("layout_gravity","fill"):m.hasPX("width")||m.mergeGravity("layout_gravity","fill_horizontal");const[y,b]=g(m,false,"height");!("normal"!==c||a.hasPX("height")||t.hasPX("minHeight")||d.unit[y]&&"auto"!==d.unit[y])&&Math.floor(t.bounds.height)>(null===(i=t.data(Oi,"boundsData"))||void 0===i?void 0:i.height)&&function(t,e,a,i){if(1===a&&e.rowSpanMultiple[i]){const n=e.rowData,o=n.length;for(const e of wi(n[i]))if(e!==t){const t=e.data(Oi,"cellData");if(t&&t.rowSpan>a&&(0===i||t.rowSpan<o))return true}}return false}(t,o,b,y)?m.css("minHeight",bi(t.box.height)):m.hasPX("height")||m.hasPX("maxHeight")||1===d.length&&c.startsWith("space")&&!Bi.test(o.alignItems)||m.mergeGravity("layout_gravity","fill_vertical")}return{parent:s,renderAs:s,outputAs:l}}postBaseLayout(t){const e=t.data(Oi,"mainData");if(e){const a=this.controller,{alignContent:n,children:o,column:r,emptyRows:s,justifyContent:l,row:c,rowDirection:h,rowData:u}=e,f=true===t.data(i.DELEGATE_CSS_GRID,"unsetContentBox"),p=o[o.length-1].id;if(ki.isJustified(t)){switch(Vi(t,e,l,true,"width",f,16,4,a.userSettings.resolutionScreenWidth-t.bounds.left,0),l){case"center":case"space-around":case"space-evenly":f&&t.anchorParent("horizontal",.5,"",true);break;case"end":case"flex-end":f&&t.anchorParent("horizontal",1,"",true);break;default:1===e.column.length&&t.setLayoutWidth("match_parent")}f&&r.unit.some(t=>ki.isFr(t))&&t.setLayoutWidth("match_parent")}else{const e=r.length;if(t.blockStatic||t.hasWidth){const i=Ui(r,t.actualWidth);0!==i&&i<100&&(i>0&&a.addAfterOutsideTemplate(p,a.renderSpace({width:yi((100-i)/100),height:"match_parent",rowSpan:c.length,android:{layout_row:"0",layout_column:e.toString(),layout_columnWeight:r.flexible?"0.01":""}}),false),t.android("columnCount",(e+1).toString()))}f&&(t.contentBoxWidth>0&&t.hasPX("width",false)?t.anchorParent("horizontal",.5,"",true):1===e?t.setLayoutWidth("match_parent"):t.setLayoutWidth("wrap_content",false))}if(ki.isAligned(t)){if(Vi(t,e,n,false,"height",f,2,8,0,this.controller.userSettings.resolutionScreenHeight),f)switch(n){case"center":case"space-around":case"space-evenly":t.anchorParent("vertical",.5,"",true);break;case"end":case"flex-end":t.anchorParent("vertical",1,"",true)}}else{if(t.hasHeight){const e=Ui(c,t.actualHeight);if(0!==e&&e<100){const i=c.length;e>0&&a.addAfterOutsideTemplate(p,a.renderSpace({width:"match_parent",height:yi((100-e)/100),columnSpan:r.length,android:{layout_row:i.toString(),layout_column:"0",layout_rowWeight:c.flexible?"0.01":""}}),false),t.android("rowCount",(i+1).toString())}}f&&(t.contentBoxHeight>0&&t.hasPX("height",false)?t.anchorParent("vertical",.5,"",true):t.setLayoutHeight("wrap_content",false))}const g=t.data(Oi,"constraintData");if(g){const{gap:e,length:i}=r,n=g.length,o=new Array(n-1);let s=1,l=0;while(s<n)o[l++]=a.addBarrier(g[s++],"top");for(s=0;s<n;++s){const c=g[s],h=o[s-1],d=o[s];let u;for(l=0;l<i;++l){const o=c[l];if(o)0===s?(o.anchor("top","parent"),o.anchor("bottomTop",d),o.anchorStyle("vertical",0,"packed")):(s===n-1?o.anchor("bottom","parent"):o.anchor("bottomTop",d),o.anchor("topBottom",h)),l===i-1?o.anchor("right","parent"):o.modifyBox(4,-e),u?(u.anchor("rightLeft",o.documentId),o.anchor("leftRight",u.documentId)):(o.anchor("left","parent"),o.anchorStyle("horizontal",0,"packed")),o.anchored=true,o.positioned=true,u=o;else if(u){const e={width:"0px",height:"wrap_content",android:{},app:{layout_constraintTop_toTopOf:0===s?"parent":"",layout_constraintTop_toBottomOf:h,layout_constraintBottom_toTopOf:s<i-1?d:"",layout_constraintBottom_toBottomOf:s===i-1?"parent":"",layout_constraintStart_toEndOf:u.anchorTarget.documentId,layout_constraintEnd_toEndOf:"parent",layout_constraintVertical_bias:0===s?"0":"",layout_constraintVertical_chainStyle:0===s?"packed":"",layout_constraintWidth_percent:(r.unit.slice(l,i).reduce((t,e)=>t+parseFloat(e),0)/r.frTotal).toString()}};a.addAfterInsideTemplate(t.id,a.renderSpace(e),false),u.anchor("rightLeft",e.documentId);break}}}}else{const{flexible:e,gap:i,unit:n}=h?r:c,o=n.length;let l=-1,f=0;const g=(i,n,o,r,s="wrap_content",c="",h=0)=>{if(-1!==l){const u=o.slice(l,l+f);let g,m,y="",b="",T="",E="",S=1,A=1;if(n?(g=i.toString(),m=l.toString(),b=s,T=e?"0.01":"",E=c,A=f):(g=l.toString(),m=i.toString(),E=e?"0.01":"",T=c,y=s,S=f),u.length===o.length)n?(y="match_parent",T=""):(b="match_parent",E=""),r=0;else{const[e,a,i,o]=Fi(t,n,u,r*(u.length-1));e&&(y=e),a&&(b=a),i&&(T=i),o&&(E=o)}a.addAfterOutsideTemplate(p,a.renderSpace({width:y,height:b,rowSpan:S,columnSpan:A,android:{[n?t.localizeString(d.MARGIN_RIGHT):"bottom"]:r>0&&l+f<o.length?"@dimen/"+B.insertStoredAsset("dimens",`${t.controlId}_cssgrid_${n?"column":"row"}_gap`,bi(r)):"",[n?"bottom":t.localizeString(d.MARGIN_RIGHT)]:h>0?"@dimen/"+B.insertStoredAsset("dimens",`${t.controlId}_cssgrid_${n?"row":"column"}_gap`,bi(h)):"",layout_row:g,layout_column:m,layout_rowWeight:E,layout_columnWeight:T,layout_gravity:"fill"}}),ki.isPx(y)||ki.isPx(b)),l=-1}f=0};let m=Math.max(u.length,1);for(let t=0;t<m;++t)if(void 0===s[t]){const e=u[t];for(let a=0;a<o;++a)e[a]?g(t,h,n,i):(-1===l&&(l=a),++f);g(t,h,n,i)}m=s.length;for(let e=0;e<m;++e){const a=s[e];if(a){const i=a.length;for(let n=0;n<i;++n){const i=a[n];if(i>0){l=n;const{unit:a,gap:o}=h?c:r,{unit:s,gap:d}=h?r:c,u=Fi(t,!h,[a[n]],0);f=i===Number.POSITIVE_INFINITY?s.length:1,g(e,h,s,d,u[h?1:0],u[h?3:2],e<m-1?o:0)}}}}}}}postOptimize(t){var e;const a=t.data(Oi,"mainData");if(a&&t.blockStatic&&!t.hasPX("minWidth",false)&&false===(null===(e=t.actualParent)||void 0===e?void 0:e.layoutElement)){const{gap:e,length:i,unit:n}=a.column;let o=e*(i-1);for(const t of n){if(!ki.isPx(t))return;o+=parseFloat(t)}o>t.width&&(t.android("minWidth",bi(o)),t.flexibleWidth||t.blockWidth||t.setLayoutWidth("wrap_content"))}}}class Yi extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}init(t){return this.included(t)&&this.application.rootElements.add(t),false}}var ji=squared.base.LayoutUI;const{lib:Ki,base:$i}=squared,Zi=$i.lib,{isLength:Ji}=Ki.css,{truncate:Qi}=Ki.math,{capitalize:tn,sameArray:en,withinRange:an}=Ki.util,{BOX_STANDARD:nn,NODE_ALIGNMENT:on}=Zi.enumeration,rn=$i.NodeUI,sn=Zi.constant.EXT_NAME.FLEXBOX,ln={orientation:"horizontal",orientationInverse:"vertical",WHL:"width",HWL:"height",LT:"left",TL:"top",RB:"right",BR:"bottom",LRTB:"leftRight",RLBT:"rightLeft"},cn={orientation:"vertical",orientationInverse:"horizontal",WHL:"height",HWL:"width",LT:"top",TL:"left",RB:"bottom",BR:"right",LRTB:"topBottom",RLBT:"bottomTop"};function hn(t,e,a){const i="width"===a,n=i?"hasWidth":"hasHeight",o=e=>e.flexbox.basis=e.bounds[a]/t.box[a]*100+"%";let r=t[n]||i&&t.blockStatic&&an(t.parseWidth(t.css("maxWidth")),t.box.width),s=0,l=0;const c=e.length;let h=0;while(h<c){const t=e[h++];if(r)if(i){if(t.innerMostWrapped.autoMargin.horizontal){r=false;break}}else if(t.innerMostWrapped.autoMargin.vertical){r=false;break}s+=t.flexbox.grow}if(c>1&&(i||r)){const t=[],i=[];let s,d=0,u=0,f=NaN;h=0;while(h<c){const o=e[h++],{alignSelf:c,basis:p,shrink:g,grow:m}=o.flexbox,y=o.bounds[a];let b=false;if(m>0||1!==g){const e=o.parseUnit("auto"===p?o.css(a):p,a);if(e>0){let a=false;y<e?(isNaN(f)||g<f)&&(f=g,a=true,l=1):(isNaN(f)||m>f)&&(f=m,a=true,l=2),a&&(s=o,d=e,u=y),t.push({item:o,basis:e,dimension:y,shrink:g,grow:m});continue}m>0&&(b=true)}else if(Ji(p)){t.push({item:o,basis:Math.min(y,o.parseUnit(p,a)),dimension:y,shrink:g,grow:m}),o.flexbox.basis="auto";continue}"auto"===c&&(r&&!o[n]||b)&&i.push(o)}l&&(t.length>1&&t.forEach(t=>{const{basis:e,item:a}=t;a===s||e===d&&(1===l&&f===t.shrink||2===l&&f===t.grow)?a.flexbox.grow=1:e>0&&(a.flexbox.grow=t.dimension/e/(u/d)*e/d)}),i.forEach(t=>o(t)))}if(i&&0===l){h=0;while(h<c){if(e[h++].find(e=>e.multiline&&0===e.ascend({condition:t=>t[n],including:t}).length,{cascade:true})){e.forEach(t=>o(t));break}}}return s}function dn(t){const e=t.length;let a=0;while(a<e){const e=t[a++];if(e.textElement&&e.baseline)return e}return rn.baseline(t)}function un(t,e,a){a?t.setLayoutHeight(e):t.setLayoutWidth(e)}function fn(t){while(t){if(t.layoutFrame)return t.innerWrapped;t=t.innerWrapped}}class pn extends squared.base.extensions.Flexbox{processNode(t,a){super.processNode(t,a);const i=t.data(sn,"mainData"),{column:n,row:o,rowCount:r,columnCount:s}=i;if(o&&1===r||n&&1===s)return t.containerType=e.CONSTRAINT,t.addAlign(4),t.addAlign(n?16:8),i.wrap=false,{include:true,complete:true};{const i=o&&t.hasHeight||n&&t.hasWidth||t.some(t=>!t.pageFlow)?e.CONSTRAINT:e.LINEAR;return{output:this.application.renderNode(ji.create({parent:a,node:t,containerType:i,alignmentType:4|(n?8:16),itemCount:t.length,rowCount:r,columnCount:s})),include:true,complete:true}}}processChild(t,a){if(t.hasAlign(128))return{output:this.application.renderNode(new ji(a,t,e.CONSTRAINT,4,t.children)),complete:true,subscribe:true};{const i=t.autoMargin;if(i.horizontal||i.vertical&&a.hasHeight){const n=a.data(sn,"mainData");if(n){const o=n.children.findIndex(e=>e===t);if(-1!==o){const r=this.controller.createNodeWrapper(t,a);return r.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},true),r.saveAsInitial(true),r.setCacheValue("flexbox",t.flexbox),n.children[o]=r,i.horizontal&&!t.hasWidth&&t.setLayoutWidth("wrap_content"),{parent:r,renderAs:r,outputAs:this.application.renderNode(new ji(a,r,e.FRAME,4096,r.children))}}}}}}postBaseLayout(t){const e=t.data(sn,"mainData");if(e){const a=this.controller,{row:i,column:n,reverse:o,wrap:r,wrapReverse:s,alignContent:l,justifyContent:c,children:h}=e,d=t.hasPX("height",false)||t.percentHeight>0?t.linear.bottom:0,u=[],f=[],p=[];let g=0;if(r){let e;t.each(t=>{if(t.hasAlign(128)){const a=t.renderChildren.filter(t=>t.pageFlow);if(a.length){if(i)t.setLayoutWidth("match_parent"),u.push(a);else{if(t.setLayoutHeight("match_parent"),e){const a=e.length;let i=e[0],n=1;while(n<a){const t=e[n++];t.linear.right>i.linear.right&&(i=t)}if(s){const e=t.linear.left-i.actualRect("right");e>0&&t.modifyBox(16,e)}t.constraint.horizontal=true}f.push(a),e=a}p.push(t)}}}),t.layoutLinear?s&&n&&t.mergeGravity("gravity","right"):p.length&&(i?f.push(p):u.push(p))}else i?(o&&h.reverse(),u[0]=h):(o&&h.reverse(),f[0]=h);const m=(e,i)=>{const h=e.length;if(0===h)return;const{orientation:u,orientationInverse:f,WHL:m,HWL:y,LT:b,TL:T,RB:E,BR:S,LRTB:A,RLBT:v}=i?ln:cn,[x,w]=i?[t.hasHeight,t.hasWidth]:[t.hasWidth,t.hasHeight],_=`layout_constraint${tn(u)}_weight`,N=(t,e)=>{0===t[m]&&(t.app(_,Qi(e,t.localSettings.floatPrecision)),i?t.setLayoutWidth("0px"):t.setLayoutHeight("0px"))};for(let I=0;I<h;++I){const R=e[I],C=R.length,L=R[0],P=R[C-1],O=R===p,k=!O&&R.every(t=>0===t.flexbox.grow),D=k&&("space-between"===c||"space-around"===c&&C>1),M=[];let W,B=0,X=0,G=true,H=null;if(L.anchor(b,"parent"),P.anchor(E,"parent"),O)if(W=false,w){let t="spread",e=0;switch(l){case"left":case"right":case"flex-end":e=1;case"baseline":case"start":case"end":case"flex-start":t="packed",G=false}L.anchorStyle(u,e,t)}else L.anchorStyle(u,0,"packed");else if(W=i||w,X=1-hn(t,R,m),C>1){let t=0;R.forEach(e=>{const a=(e.data(sn,"boundsData")||e.bounds)[y];0===t?(B=a,t++):a===B?t++:a>B&&(B=a,t=1)}),t===C&&(B=NaN)}for(let t=0;t<C;++t){const e=R[t],a=R[t-1],n=R[t+1];if(n&&e.anchor(v,n.documentId),a&&e.anchor(A,a.documentId),O)G&&C>1&&w&&N(e,1),e.anchor(T,"parent");else{const o=fn(e),c=e.innerMostWrapped.autoMargin;switch(i?c.horizontal&&(o?(o.mergeGravity("layout_gravity",c.leftRight?"center_horizontal":e.localizeString(c.left?"right":"left")),X>0&&(e.flexbox.basis="0%",M.push(e))):c.leftRight||(c.left?a&&e.anchorDelete(A):n&&e.anchorDelete(v))):c.vertical&&(o?(o.mergeGravity("layout_gravity",c.topBottom?"center_vertical":e.localizeString(c.top?"bottom":"top")),X>0&&(e.flexbox.basis="0%",M.push(e))):c.topBottom||(c.top?a&&e.anchorDelete(A):n&&e.anchorDelete(v))),e.flexbox.alignSelf){case"start":case"flex-start":e.anchor(T,"parent");break;case"end":case"flex-end":e.anchor(S,"parent");break;case"baseline":i&&(null===H&&(H=dn(R)),H&&(H!==e?e.anchor("baseline",H.documentId):e.anchorParent(f,0)));break;case"center":e.anchorParent(f,.5),!i&&e.textElement&&e.mergeGravity("gravity","center");break;default:{const a=fn(e);switch(l){case"center":h%2==1&&I===Math.floor(h/2)?e.anchorParent(f):I<h/2?e.anchor(S,"parent"):I>=h/2&&e.anchor(T,"parent");break;case"space-evenly":case"space-around":a?a.mergeGravity("layout_gravity",i?"center_vertical":"center_horizontal"):e.anchorParent(f);break;case"space-between":D&&2===C&&e.anchorDelete(0===t?v:A),0===I?a?a.mergeGravity("layout_gravity",s?S:T):e.anchor(s?S:T,"parent"):h>2&&I<h-1?a?a.mergeGravity("layout_gravity",i?"center_vertical":"center_horizontal"):e.anchorParent(f):a?a.mergeGravity("layout_gravity",s?T:S):e.anchor(s?T:S,"parent");break;default:e.anchorParent(f),o&&e.innerMostWrapped.autoMargin[f]||e.anchorStyle(f,s?1:0),0===e[y]&&(!i&&e.blockStatic?un(e,"match_parent",i):isNaN(B)?!i&&!r&&e.length||x&&"normal"===l?un(e,x?"0px":"match_parent",i):un(e,"wrap_content",i):1===C?un(e,i?"wrap_content":x?"0px":"match_parent",i):(e.naturalElement?(e.data(sn,"boundsData")||e.bounds)[y]:Number.POSITIVE_INFINITY)<B?(un(e,e.flexElement&&e.css("flexDirection").startsWith(i?"row":"column")?"match_parent":"0px",i),o&&!o.autoMargin[u]&&un(o,"match_parent",i)):x?un(e,"0px",i):(un(e,"wrap_content",i),e.lockAttr("android","layout_"+y)))}break}}if(de.setFlexDimension(e,m),e.innerMostWrapped.has("flexGrow")||(W=false),d>0&&I===h-1){e.linear.bottom-d>0&&(g=Math.max(e.linear.bottom-d,g)),e.setBox(8,{reset:1})}}e.anchored=true,e.positioned=true}if(!O&&(W?R.forEach(t=>N(t,t.flexbox.grow)):X>0&&M.forEach(t=>{const e=t.innerMostWrapped.autoMargin;let a=1;i?e.leftRight&&(a=2):e.topBottom&&(a=2),N(t,Math.max(t.flexbox.grow,X*a/M.length))}),g>0&&t.modifyBox(8,g),i||n)){let e=false;if(k)switch(c){case"normal":if(n){L.anchorStyle(u,o?1:0,"packed");continue}break;case"left":if(!i)break;case"start":case"flex-start":L.anchorStyle(u,o?1:0,"packed");continue;case"center":if(C>1){L.anchorStyle(u,.5,"packed");continue}e=true;break;case"right":if(!i)break;case"end":case"flex-end":L.anchorStyle(u,1,"packed");continue;case"space-between":if(1===C){P.anchorDelete(E);continue}break;case"space-evenly":if(C>1){L.anchorStyle(u,0,"spread");continue}e=true;break;case"space-around":if(C>1){L.constraint[u]=false,P.constraint[u]=false,a.addGuideline(L,t,{orientation:u,percent:true}),a.addGuideline(P,t,{orientation:u,percent:true,opposing:true}),L.anchorStyle(u,0,"spread_inside");continue}e=true}D||!r&&R.some(t=>""!==t.app(_))&&!en(R,t=>t.app(_))?L.anchorStyle(u,0,"spread_inside",false):e||L.anchorStyle(u,o?1:0,"packed",false)}}};m(u,true),m(f,false)}}}var gn=squared.base.LayoutUI;const mn=squared.lib,yn=squared.base.lib,{formatPX:bn}=mn.css,{withinRange:Tn}=mn.util,{BOX_STANDARD:En,NODE_ALIGNMENT:Sn}=yn.enumeration,An=squared.base.extensions.Grid,vn=yn.constant.EXT_NAME.GRID;class xn extends squared.base.extensions.Grid{processNode(t,a){super.processNode(t,a);const i=t.data(vn,"columnCount");if(i)return{output:this.application.renderNode(gn.create({parent:a,node:t,containerType:e.GRID,alignmentType:256,children:t.children,columnCount:i})),include:true,complete:true}}processChild(t,e){var a;const i=t.data(vn,"cellData");if(i){const n=null===(a=i.siblings)||void 0===a?void 0:a.slice(0);let o;if(n){const a=this.controller;n.unshift(t),o=a.processLayoutHorizontal(new gn(e,a.createNodeGroup(t,n,{parent:e,delegate:true,cascade:true}),0,0,n)),function(t,e){const a=An.createDataCellAttribute();e.forEach(t=>{const e=t.data(vn,"cellData");e&&(e.cellStart&&(a.cellStart=true),e.cellEnd&&(a.cellEnd=true),e.rowEnd&&(a.rowEnd=true),e.rowStart&&(a.rowStart=true),t.data(vn,"cellData",null))}),t.data(vn,"cellData",a)}(t=o.node,n)}if(i.rowSpan>1&&t.android("layout_rowSpan",i.rowSpan.toString()),i.columnSpan>1&&t.android("layout_columnSpan",i.columnSpan.toString()),"table-cell"===t.display&&t.mergeGravity("layout_gravity","fill"),o)return{parent:o.node,renderAs:o.node,outputAs:this.application.renderNode(o)}}}postConstraints(t){if("collapse"!==t.css("borderCollapse")){const e=t.data(vn,"columnCount");if(e){let a=0,i=0,n=0,o=0;t.renderEach(r=>{const s=r.data(vn,"cellData");if(s){const l=r.actualParent;if(false===(null==l?void 0:l.visible)){const c=0===l.getBox(2)[0]?l.marginTop:0,h=0===l.getBox(8)[0]?l.marginBottom:0;if(s.cellStart&&(a=c+l.paddingTop),s.rowStart&&(o=Math.max(l.marginLeft+l.paddingLeft,o)),s.rowEnd){const a=h+l.paddingBottom+(s.cellEnd?0:c+l.paddingTop);if(a>0)if(s.cellEnd)n=a;else{const i=this.controller;i.addAfterOutsideTemplate(r.id,i.renderSpace({width:"match_parent",height:"@dimen/"+B.insertStoredAsset("dimens",t.controlId+"_grid_space",bn(a)),columnSpan:e,android:{}}),false)}i=Math.max(l.marginRight+l.paddingRight,i)}}}}),t.modifyBox(32,a),t.modifyBox(64,i),t.modifyBox(128,n),t.modifyBox(256,o)}}if(!t.hasWidth){let e=Number.NEGATIVE_INFINITY;t.renderEach(t=>{!t.inlineFlow&&t.blockStatic||(e=Math.max(e,t.linear.right))}),Tn(t.box.right,e)&&t.setLayoutWidth("wrap_content")}}}var wn=squared.base.LayoutUI;const _n=squared.lib,Nn=squared.base.lib,{formatPX:In,getBackgroundPosition:Rn}=_n.css,{convertInt:Cn}=_n.util,{STRING_SPACE:Ln}=_n.xml,{BOX_STANDARD:Pn,NODE_ALIGNMENT:On,NODE_TEMPLATE:kn}=Nn.enumeration,Dn=Nn.constant.EXT_NAME.LIST;class Mn extends squared.base.extensions.List{processNode(t,a){const i=new wn(a,t,0,0,t.children);if(!i.unknownAligned||i.singleRowAligned){if(super.processNode(t,a),i.linearY)i.rowCount=t.length,i.columnCount=t.some(t=>"inside"===t.css("listStylePosition"))?3:2,i.setContainerType(e.GRID,16);else{if(!i.linearX&&!i.singleRowAligned)return;i.rowCount=1,i.columnCount=i.length,i.setContainerType(e.LINEAR,8)}return{output:this.application.renderNode(i),complete:true,include:true}}}processChild(t,a){const i=t.data(Dn,"mainData");if(i){const o=this.application,r=this.controller,s=a.firstStaticChild===t,l=t.marginTop;let c,h=i.ordinal||"",d=t.marginLeft,u=0,f=0,p=false,g=NaN;t.setBox(16,{reset:1}),a.layoutGrid?(f=Cn(a.android("columnCount"))||1,p=true):s&&(p=true),p&&(a.paddingLeft>0?d+=a.paddingLeft:d+=a.marginLeft),0===t.length?(c=r.createNodeWrapper(t,a,Object.assign({},r.containerTypeVertical)),t.resetBox(10,c)):c=t;let m=""===h?t.find(t=>"left"===t.float&&t.marginLeft<0&&Math.abs(t.marginLeft)<=t.documentParent.marginLeft):void 0;if(m){3===f&&t.android("layout_columnSpan","2"),m.hasWidth||(d+=m.marginLeft,d>0&&m.android("minWidth",In(d))),m.parent=a,m.setControlType(n.TEXT,e.INLINE),m.setBox(16,{reset:1}),m.render(a);const i=new wn(a,m);m.inlineText||0===m.length?i.setContainerType(e.TEXT):(i.singleRowAligned?i.setContainerType(e.RELATIVE,8):i.setContainerType(e.CONSTRAINT,2),i.retain(m.children)),o.addLayoutTemplate(a,m,o.renderNode(i))}else{let r,s="right",l=0,y=0,b=0;if(""!==i.imageSrc){const e=this.resource;i.imagePosition&&(({top:y,left:b}=Rn(i.imagePosition,t.actualDimension,{fontSize:t.fontSize,imageDimension:e.getImage(i.imageSrc),screenDimension:t.localSettings.screenDimension})),t.marginLeft<0?g=t.marginLeft+(a.paddingLeft>0?a.paddingLeft:a.marginLeft):(p=false,u=t.marginLeft),d=t.paddingLeft-b,t.setBox(256,{reset:1}),s=""),r=e.addImageSrc(i.imageSrc)}const T=it();if(m=o.createNode({parent:a}),m.childIndex=t.childIndex,m.containerName=t.containerName+"_ORDINAL",m.inherit(t,"textStyle"),""===h||h.endsWith(".")||m.setCacheValue("fontSize",.75*m.fontSize),"right"===s&&(r?(l=Math.max(d/6,4),d-=l):""!==h&&(h+=Ln.repeat(1===h.length?3:2))),3===f&&c.android("layout_columnSpan","2"),"DT"!==t.tagName||r){r?(m.setControlType(n.IMAGE,e.IMAGE),Object.assign(T.android,{src:"@drawable/"+r,scaleType:"right"===s?"fitEnd":"fitStart",baselineAlignBottom:p?"true":""})):""!==h?(m.textContent=h,m.inlineText=true,m.setControlType(n.TEXT,e.TEXT),"DFN"===t.tagName&&(d+=8,m.modifyBox(64,8))):(m.setControlType(n.SPACE,e.SPACE),m.renderExclude=false,t.setBox(256,{reset:1}));const{paddingTop:i,lineHeight:c}=t;m.cssApply({minWidth:d>0?In(d):"",marginLeft:u>0?In(u):"",paddingTop:i>0&&0===t.getBox(32)[0]?In(i):"",paddingRight:l>0?In(l):"",lineHeight:c>0?In(c):""}),m.apply(T),m.modifyBox(256,2),m.cssTry("display","block")&&(m.setBounds(),m.cssFinally("display")),m.saveAsInitial(),""!==s&&m.mergeGravity("gravity",t.localizeString(s)),0!==y&&m.modifyBox(2,y),0!==b&&m.modifyBox(16,b),m.render(a),o.addLayoutTemplate(a,m,{type:1,node:m,controlName:m.controlName})}else c.android("layout_columnSpan",f.toString())}if(0!==l&&(m.modifyBox(2,l),m.companion=c,this.subscribers.add(m)),m.positioned=true,p&&((isNaN(g)||g<=0)&&a.setBox(a.paddingLeft>0?256:16,{reset:1}),g<0&&a.modifyBox(16,g)),f>0&&(c.setLayoutWidth("0px"),c.android("layout_columnWeight","1")),t!==c)return{parent:c,renderAs:c,outputAs:o.renderNode(new wn(a,c,e.LINEAR,18,c.children)),subscribe:true}}}postConstraints(t){const e=!t.naturalChild&&t.companion;if(e){const[a,i]=e.getBox(2);0===a?t.modifyBox(2,i-t.getBox(2)[1],false):t.setBox(2,{adjustment:0})}}}const{BOX_STANDARD:Wn}=squared.base.lib.enumeration;class Bn extends squared.base.extensions.Relative{is(t){if(t.inlineStatic||t.imageOrSvgElement)switch(t.verticalAlign){case"sub":case"super":return true}return super.is(t)}postOptimize(t){if(!t.baselineAltered)switch(t.verticalAlign){case"sub":t.outerMostWrapper.renderParent.layoutHorizontal||t.modifyBox(8,-1*Math.floor(t.baselineHeight*this.controller.localSettings.deviations.subscriptBottomOffset));break;case"super":t.outerMostWrapper.renderParent.layoutHorizontal||t.modifyBox(2,-1*Math.floor(t.baselineHeight*this.controller.localSettings.deviations.superscriptTopOffset));break}super.postOptimize(t)}}var Xn=squared.base.LayoutUI;const{formatPX:Gn}=squared.lib.css,Hn=squared.base.lib,{APP_SECTION:Vn,BOX_STANDARD:Fn,NODE_ALIGNMENT:zn,NODE_PROCEDURE:Un,NODE_RESOURCE:qn}=Hn.enumeration,Yn=Hn.constant.EXT_NAME.SPRITE;class jn extends squared.base.extensions.Sprite{processNode(t,a){const i=t.data(Yn,"mainData");if(i){const o=this.resource.addImageSrc(t.backgroundImage);if(""!==o){const{width:r,height:s}=i.image,{top:l,left:c}=i.position,h=this.application.createNode({parent:a,replace:t});return h.inherit(t,"base","initial","styleMap"),h.setControlType(n.FRAME,e.FRAME),h.exclude({resource:qn.ASSET,procedure:Un.CUSTOMIZATION,section:Vn.ALL}),t.setControlType(n.IMAGE,e.IMAGE),t.resetBox(30),t.resetBox(480),t.registerBox(2,h),t.registerBox(4,h),t.registerBox(8,h),t.registerBox(16,h),t.exclude({resource:qn.FONT_STYLE|qn.BOX_STYLE|qn.BOX_SPACING}),t.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:r>0?Gn(r):"auto",height:s>0?Gn(s):"auto",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"transparent"}),t.unsetCache(),t.android("src","@drawable/"+o),t.android("layout_marginTop",Gn(l)),t.android(t.localizeString("layout_marginLeft"),Gn(c)),{renderAs:h,outputAs:this.application.renderNode(new Xn(a,h,e.FRAME,4096,h.children)),parent:h,complete:true}}}}}const{convertCamelCase:Kn}=squared.lib.util,{NODE_ALIGNMENT:$n,NODE_TEMPLATE:Zn}=squared.base.lib.enumeration;class Jn extends squared.base.ExtensionUI{constructor(t,e,a,n){super(t,e,a,n),this.require(i.EXTERNAL,true)}processNode(t,a){const i=et(t.dataset,Kn(this.name,"."));if(i){const n=i.tag;if(n){t.setControlType(n,t.blockStatic?e.BLOCK:e.INLINE),t.render(a);const o=i.tagChild;if(o){const e=this.name;t.addAlign(4),t.each(t=>{if(t.styleElement){const a=t.dataset;a.use=e,a.androidSubstituteTag=o}})}return{output:{type:1,node:t,controlName:n},include:true}}}}postOptimize(t){t.apply(B.formatOptions(it(this.options[t.elementId]),this.application.extensionManager.optionValueAsBoolean(i.RESOURCE_STRINGS,"numberResourceValue")))}}var Qn=squared.base.LayoutUI;const to=squared.lib,eo=squared.base.lib,{CSS_UNIT:ao,formatPX:io}=to.css,{convertFloat:no,convertInt:oo,trimEnd:ro}=to.util,{NODE_ALIGNMENT:so}=eo.enumeration,lo=eo.constant.EXT_NAME.TABLE;function co(t){t.hasPX("height")&&t.height+t.contentBoxHeight<Math.floor(t.bounds.height)&&"top"!==t.css("verticalAlign")&&t.setLayoutHeight("wrap_content")}class ho extends squared.base.extensions.Table{processNode(t,a){super.processNode(t,a);const i=t.data(lo,"mainData");let n=false;return i.columnCount>1?(n=i.expand,t.each(t=>{const e=t.data(lo,"cellData");if(e.flexible)t.android("layout_columnWeight",e.colSpan.toString()),t.setLayoutWidth("0px"),n=true;else{const{downsized:a,expand:i,percent:o}=e;if(i){if(o){const e=no(o)/100;e>0&&(t.setLayoutWidth("0px"),t.android("layout_columnWeight",ro(e.toPrecision(3),"0")),n=true)}}else false===i&&t.android("layout_columnWeight","0");if(a)if(e.exceed)t.setLayoutWidth("0px"),t.android("layout_columnWeight","0.01"),n=true;else if(t.hasPX("width")){const e=t.bounds.width;t.actualWidth<e&&t.setLayoutWidth(io(e))}}"TD"===t.tagName&&t.setSingleLine(true),co(t)})):t.each(t=>{t.has("width",{type:4})&&(t.setLayoutWidth("wrap_content"),n=true),co(t)}),t.hasWidth?t.width<Math.floor(t.bounds.width)&&(i.layoutFixed?t.android("width",io(t.bounds.width)):(t.hasPX("minWidth")||t.android("minWidth",io(t.actualWidth)),t.css("width","auto"))):n&&((a.blockStatic||a.hasPX("width"))&&Math.ceil(t.bounds.width)>=a.box.width?t.setLayoutWidth("match_parent"):t.css("width",io(t.actualWidth))),t.hasHeight&&t.height<Math.floor(t.bounds.height)&&(t.hasPX("minHeight")||t.android("minHeight",io(t.actualHeight)),t.css("height","auto")),{output:this.application.renderNode(Qn.create({parent:a,node:t,containerType:e.GRID,alignmentType:4,children:t.children,rowCount:i.rowCount,columnCount:i.columnCount})),include:true,complete:true}}processChild(t,e){const a=t.data(lo,"cellData");if(a){const{rowSpan:i,colSpan:n,spaceSpan:o}=a;if(i>1&&t.android("layout_rowSpan",i.toString()),n>1&&t.android("layout_columnSpan",n.toString()),o){const e=this.controller;e.addAfterOutsideTemplate(t.id,e.renderSpace({width:"wrap_content",height:"wrap_content",columnSpan:o,android:{}}),false)}t.mergeGravity("layout_gravity","fill"),"hide"===e.css("empty-cells")&&0===t.naturalChildren.length&&""===t.textContent&&t.hide({hidden:true})}}postOptimize(t){const e=oo(t.layoutWidth);if(e>0){const a=t.bounds.width;a>e&&t.setLayoutWidth(io(a)),"auto"===t.cssInitial("width")&&t.renderChildren.every(t=>t.inlineWidth)&&t.renderEach(t=>{t.setLayoutWidth("0px"),t.android("layout_columnWeight","1")})}}}var uo=squared.base.LayoutUI;const{NODE_ALIGNMENT:fo}=squared.base.lib.enumeration;class po extends squared.base.extensions.VerticalAlign{processNode(t,a){return super.processNode(t,a),{output:this.application.renderNode(new uo(a,t,e.RELATIVE,8,t.children)),subscribe:true}}}class go extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=true}}var mo=squared.base.LayoutUI;const yo=squared.lib,{formatPX:bo}=yo.css,{hypotenuse:To}=yo.math,{withinRange:Eo}=yo.util,{NODE_ALIGNMENT:So}=squared.base.lib.enumeration;class Ao extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:false}}is(t){return this.included(t.element)}condition(t){return t.length>0}processNode(t,a){return{output:this.application.renderNode(new mo(a,t,e.CONSTRAINT,32,t.children))}}postBaseLayout(t){const e=this.controller,a=this.options.circlePosition,{left:i,top:n}=t.box;let o;if(t.each(t=>{const e=t.linear;if(Eo(e.left,i)&&t.anchorParent("horizontal",0),Eo(e.top,n)&&t.anchorParent("vertical",0),a)if(t.anchored)o=t;else{const{horizontal:e,vertical:a}=t.constraint;o?a&&!o.constraint.vertical&&(o=t):(a||e)&&(o=t)}t.positioned=true}),a){o||(o=t.item(0)),o.anchored||e.addGuideline(o,t);const{x:a,y:i}=o.center;t.each(t=>{if(t!==o){const{x:e,y:n}=t.center,r=Math.abs(e-a),s=Math.abs(n-i),l=Math.round(To(r,s));let c=Math.round(Math.atan(Math.min(r,s)/Math.max(r,s))*(180/Math.PI));n>i?e>a?r>s?c+=90:c=180-c:r>s?c=270-c:c+=180:n<i?a>e?r>s?c+=270:c=360-c:r>s&&(c=90-c):c=e>a?90:270,t.app("layout_constraintCircle",o.documentId),t.app("layout_constraintCircleRadius",bo(l)),t.app("layout_constraintCircleAngle",c.toString())}})}else t.each(a=>{a.anchored||e.addGuideline(a,t)})}}var vo=squared.base.LayoutUI;const xo=squared.base,{CSS_UNIT:wo,isLength:_o}=squared.lib.css,{BOX_STANDARD:No,NODE_ALIGNMENT:Io,NODE_RESOURCE:Ro,NODE_TEMPLATE:Co}=xo.lib.enumeration,Lo=xo.extensions.CssGrid,Po=Ro.BOX_SPACING|Ro.FONT_STYLE|Ro.VALUE_STRING,Oo=t=>!t.blockStatic&&!t.hasPX("width")||t.has("width",{type:6,not:"100%"})&&"100%"!==t.css("minWidth")||t.has("maxWidth",{type:6,not:"100%"}),ko=t=>"100%"===t.css("height")||"100%"===t.css("minHeight"),Do=t=>t.marginTop>0||t.marginRight>0||t.marginBottom>0||t.marginLeft>0,Mo=(t,e)=>e.visibleStyle.background&&(Oo(t)||!ko(e)||!ko(t)),Wo=t=>"HTML"===t.tagName&&(t.contentBoxWidth>0||t.contentBoxHeight>0||Do(t)),Bo=(t,e,a,i,n,o,r)=>a&&i&&((!n||!o)&&(t.has("backgroundPositionX")||t.has("backgroundPositionY")||r&&(Oo(t)||!ko(e)||!ko(t)))||"fixed"===t.css("backgroundAttachment"));class Xo extends squared.base.ExtensionUI{is(t){return t.documentBody}condition(t,e){const{backgroundColor:a,backgroundImage:i,backgroundRepeatX:n,backgroundRepeatY:o,borderWidth:r}=t.visibleStyle;return((t,e,a,i,n)=>(a||i)&&!Mo(t,e)&&(n||t.gridElement&&(Lo.isJustified(t)||Lo.isAligned(t))))(t,e,a,i,r)||Bo(t,e,a,i,n,o,r)||((t,e)=>e&&Do(t))(t,i)||Wo(e)}processNode(t,a){var i;const n=this.controller,{backgroundColor:o,backgroundImage:r,visibleStyle:s}=t,{backgroundColor:l,backgroundImage:c,backgroundRepeatX:h,backgroundRepeatY:d,borderWidth:u}=s,f=Bo(t,a,l,c,h,d,u),p=t.hasHeight||true===(null===(i=t.actualParent)||void 0===i?void 0:i.hasHeight);let g,m,y=a;const b=a=>{a.setControlType(de.getControlName(e.CONSTRAINT,t.api),e.CONSTRAINT),a.addAlign(16),a.render(y),this.application.addLayoutTemplate(y,a,{type:1,node:a,controlName:a.controlName}),m=a,y=a},T=Mo(t,a),E="fixed"===t.css("backgroundAttachment");if(""!==o&&(c&&h&&d||(g=n.createNodeWrapper(t,y,{resource:Po}),g.css("backgroundColor",o),g.setCacheValue("backgroundColor",o),T?Oo(t)||g.setLayoutWidth("match_parent"):(g.setLayoutWidth("match_parent"),g.setLayoutHeight("match_parent")),g.unsetCache("visibleStyle")),t.css("backgroundColor","transparent"),t.setCacheValue("backgroundColor",""),s.backgroundColor=false),""!==r&&(T||f||d||a.visibleStyle.background||Do(t))){g?(f||E)&&(b(g),g=n.createNodeWrapper(t,m,{resource:Ro.BOX_SPACING})):g=n.createNodeWrapper(t,y,{resource:Po}),g.setLayoutWidth("match_parent");const e=a.cssInitial("height"),i=a.cssInitial("minHeight");let o=t.css("backgroundSize");if(""===e&&""===i)g.setLayoutHeight(T||!E&&(f&&p||!(d||t.has("backgroundSize")||t.css("backgroundPosition").split(" ").some(t=>_o(t)&&parseInt(t)>0)))?"wrap_content":"match_parent");else{if("100%"!==e&&"100%"!==i){const t=a.toElementInt("offsetHeight");t<window.innerHeight&&(o=`auto ${t}px`)}g.setLayoutHeight("match_parent")}g.cssApply({backgroundImage:r,backgroundSize:o,border:"0px none solid",borderRadius:"0px"}),g.cssApply(t.cssAsObject("backgroundRepeat","backgroundPositionX","backgroundPositionY","backgroundClip")),g.setCacheValue("backgroundImage",r),g.unsetCache("visibleStyle"),E&&g.android("scrollbars","vertical"),t.css("backgroundImage","none"),t.setCacheValue("backgroundImage",""),s.backgroundImage=false,s.backgroundRepeatX=false,s.backgroundRepeatY=false}return Wo(a)&&(g||(g=n.createNodeWrapper(t,y)),g.unsafe("excludeResource",Ro.FONT_STYLE|Ro.VALUE_STRING),a.resetBox(30,g),a.resetBox(480,g),g.setLayoutWidth("match_parent",false),g.setLayoutHeight("wrap_content",false)),g?(s.background=s.borderWidth||s.backgroundImage||s.backgroundColor,{parent:g,parentAs:m,renderAs:g,outputAs:this.application.renderNode(new vo(m||a,g,e.CONSTRAINT,16,g.children)),remove:true}):{remove:true}}}var Go=squared.base.LayoutUI;const Ho=squared.base,{BOX_STANDARD:Vo,NODE_ALIGNMENT:Fo,NODE_RESOURCE:zo}=Ho.lib.enumeration,Uo=Ho.extensions.CssGrid,qo=t=>"space-between"===t?"match_parent":"wrap_content";class Yo extends squared.base.ExtensionUI{is(t){return t.gridElement}condition(t){return Uo.isJustified(t)||Uo.isAligned(t)}processNode(t,a){const n=this.controller.createNodeWrapper(t,a,{containerType:e.CONSTRAINT,resource:zo.ASSET});return n.inherit(t,"styleMap","boxStyle"),t.resetBox(30,n),t.resetBox(480,n),t.data(i.DELEGATE_CSS_GRID,"unsetContentBox",true),Uo.isJustified(t)?t.setLayoutWidth(qo(t.css("justifyContent"))):t.hasPX("width",false)?t.setLayoutWidth("match_parent"):n.setLayoutWidth(t.blockStatic?"match_parent":"wrap_content"),Uo.isAligned(t)?t.setLayoutHeight(qo(t.css("alignContent"))):t.hasPX("height",false)?t.setLayoutHeight("match_parent"):n.setLayoutHeight("wrap_content"),{parent:n,renderAs:n,outputAs:this.application.renderNode(new Go(a,n,e.CONSTRAINT,4096,n.children)),include:true}}}var jo=squared.base.LayoutUI;const{NODE_ALIGNMENT:Ko}=squared.base.lib.enumeration;class $o extends squared.base.ExtensionUI{is(t){return!t.inputElement&&!t.support.maxDimension}condition(t,e){const a=t.hasPX("maxWidth")&&!e.layoutConstraint&&!e.layoutElement&&(e.layoutVertical||e.layoutFrame||t.blockStatic||t.onlyChild&&(e.blockStatic||e.hasWidth)),n=t.hasPX("maxHeight")&&(e.hasHeight||e.gridElement||e.tableElement);return!(!a&&!n)&&(t.data(i.DELEGATE_MAXWIDTHHEIGHT,"mainData",{maxWidth:a,maxHeight:n}),true)}processNode(t,a){const n=t.data(i.DELEGATE_MAXWIDTHHEIGHT,"mainData");if(n){const i=this.controller.createNodeWrapper(t,a,{containerType:e.CONSTRAINT,alignmentType:64,resetMargin:true});if(n.maxWidth&&(t.setLayoutWidth("0px"),i.setLayoutWidth("match_parent"),a.layoutElement)){const e=t.autoMargin;e.horizontal=false,e.left=false,e.right=false,e.leftRight=false}if(n.maxHeight&&(t.setLayoutHeight("0px"),i.setLayoutHeight("match_parent"),a.layoutElement)){const e=t.autoMargin;e.vertical=false,e.top=false,e.bottom=false,e.topBottom=false,n.maxHeight||!t.blockStatic||t.hasWidth||t.setLayoutWidth("match_parent",false)}return{parent:i,renderAs:i,outputAs:this.application.renderNode(new jo(a,i,i.containerType,4096,i.children))}}}}var Zo=squared.base.LayoutUI;const{BOX_STANDARD:Jo,NODE_ALIGNMENT:Qo}=squared.base.lib.enumeration;function tr(t,e){return t.pageFlow?t===e.firstStaticChild&&t.inlineFlow&&!t.centerAligned&&!t.rightAligned&&t.marginLeft<0&&Math.abs(t.marginLeft)<=e.marginLeft+e.paddingLeft&&!e.some(t=>t.multiline):t.leftTopAxis&&(t.left<0||!t.hasPX("left")&&t.right<0)}class er extends squared.base.ExtensionUI{is(t){return t.length>0&&!t.originalRoot&&"hidden"!==t.css("overflowX")}condition(t){return t.some(e=>tr(e,t))}processNode(t,a){const n=t.children.filter(e=>tr(e,t)),o=this.controller.createNodeWrapper(t,a,{children:n,containerType:e.CONSTRAINT});t.resetBox(10,o);let r,s=NaN,l=NaN;if(n.forEach(t=>{const e=t.linear;t.pageFlow?((isNaN(s)||e.left<s)&&(s=e.left),r=t):t.hasPX("left")?t.left<0&&(isNaN(s)||e.left<s)&&(s=e.left):t.right<0&&(isNaN(l)||e.right>l)&&(l=e.right)}),t.pageFlow)t.hasWidth&&o.setLayoutWidth("wrap_content");else{if(!isNaN(s)&&!t.has("left")){const e=t.linear.left-s;e>0&&t.modifyBox(16,e)}if(!isNaN(l)&&!t.has("right")){const e=l-t.linear.right;e>0&&t.modifyBox(4,e)}}return t.data(i.DELEGATE_NEGATIVEX,"mainData",{container:o,children:n,offsetLeft:t.marginLeft+t.paddingLeft,firstChild:r}),{parent:o,renderAs:o,outputAs:this.application.renderNode(new Zo(a,o,o.containerType,4104,o.children)),subscribe:true}}postBaseLayout(t){const e=t.data(i.DELEGATE_NEGATIVEX,"mainData");if(e){let a=e.firstChild;a&&(a=a.ascend({excluding:t,attr:"outerWrapper"}).pop()||a,a.anchor("left","parent"),a.anchorStyle("horizontal",0),a.anchorParent("vertical",0),a.modifyBox(16,e.offsetLeft),de.setConstraintDimension(a),a.positioned=true),e.children.forEach(e=>{e!==a&&(e.hasPX("left")?(e.translateX(e.left),e.alignSibling("left",t.documentId),e.constraint.horizontal=true):e.hasPX("right")&&(e.translateX(-e.right),e.alignSibling("right",t.documentId),e.constraint.horizontal=true))}),t.anchorParent("horizontal",0),t.anchorParent("vertical",0),de.setConstraintDimension(t),t.positioned=true}}beforeCascade(){for(const t of this.subscribers){const e=t.data(i.DELEGATE_NEGATIVEX,"mainData");if(e){const a=t.android("translationX"),i=t.android("translationY");if(""!==a||""!==i){const t=parseInt(a),n=parseInt(i);e.children.forEach(e=>{isNaN(t)||e.translateX(t),isNaN(n)||e.translateY(n)})}}}}}var ar=squared.base.LayoutUI;const{BOX_STANDARD:ir,NODE_ALIGNMENT:nr}=squared.base.lib.enumeration,or=(t,e)=>e.marginLeft<0&&(t.originalRoot||e.linear.left<Math.floor(t.box.left)),rr=(t,e)=>e.marginTop<0&&(t.originalRoot||e.linear.top<Math.floor(t.box.top));function sr(t,e){const a=t.documentBody;if(!e&&!a)return false;const n=t.originalRoot,o=a&&t.positionStatic,r=new Set,s=t.paddingTop+(a?t.marginTop:0),l=t.paddingRight+(a?t.marginRight:0),c=t.paddingBottom+(a?t.marginBottom:0),h=t.paddingLeft+(a?t.marginLeft:0);let d=false,u=false;return t.each(i=>{const f=n&&"fixed"===i.css("position");if(i.pageFlow||!e&&!f)return;const p=f&&i.autoPosition;if(i.hasPX("left")||p)if(!a||"100%"!==i.css("width")&&"100%"!==i.css("minWidth")){const e=i.left;((e>=0||n)&&e<h||e<0&&t.marginLeft>0||!i.hasPX("right")&&or(t,i))&&r.add(i)}else r.add(i),d=true;else if(i.hasPX("right"))if(o)r.add(i),d=true;else{const e=i.right;((e>=0||n)&&e<l||e<0&&t.marginRight>0||((t,e)=>e.marginRight<0&&(t.originalRoot||e.linear.right>Math.ceil(t.box.right)))(t,i))&&r.add(i)}else or(t,i)&&r.add(i);if(i.hasPX("top")||p)if(!a||"100%"!==i.css("height")&&"100%"!==i.css("minHeight")){const e=i.top;((e>=0||n)&&e<s||e<0&&t.marginTop>0||!i.hasPX("bottom")&&rr(t,i))&&r.add(i)}else r.add(i),u=true;else if(i.hasPX("bottom"))if(o)r.add(i),u=true;else{const e=i.bottom;((e>=0||n)&&e<c||e<0&&t.marginBottom>0||((t,e)=>e.marginBottom<0&&(t.originalRoot||e.linear.bottom>Math.ceil(t.box.bottom)))(t,i))&&r.add(i)}else rr(t,i)&&r.add(i)}),!!r.size&&(t.data(i.DELEGATE_POSITIVEX,"mainData",{children:Array.from(r),right:d,bottom:u}),true)}class lr extends squared.base.ExtensionUI{is(t){return t.length>0}condition(t){return sr(t,t.contentBoxWidth>0||t.contentBoxHeight>0||t.marginTop>0||t.marginRight>0||t.marginBottom>0||t.marginLeft>0)}processNode(t,a){const n=t.data(i.DELEGATE_POSITIVEX,"mainData");if(n){const i=this.controller.createNodeWrapper(t,a,{children:n.children,resetMargin:!t.originalRoot&&!t.pageFlow||a.layoutGrid,cascade:true,inheritDataset:true});return t.documentBody?(n.right&&i.setLayoutWidth("match_parent"),n.bottom&&i.setLayoutHeight("match_parent")):t.pageFlow||(!t.hasPX("width")&&t.hasPX("left")&&t.hasPX("right")&&t.setLayoutWidth("match_parent"),!t.hasPX("height")&&t.hasPX("top")&&t.hasPX("bottom")&&t.setLayoutHeight("match_parent")),{parent:i,renderAs:i,outputAs:this.application.renderNode(new ar(a,i,e.CONSTRAINT,32,i.children)),subscribe:true}}}postBaseLayout(t){const e=t.data(i.DELEGATE_POSITIVEX,"mainData");if(e){const a=t.documentId;e.children.forEach(e=>{const i=!e.pageFlow&&(e.absoluteParent!==e.documentParent||"fixed"===e.css("position")||t.documentBody),n=e.outerMostWrapper;e.hasPX("left")&&(i||(e.translateX(e.left),e.alignSibling("left",a),e.constraint.horizontal=true),n.modifyBox(16,t.borderLeftWidth)),e.hasPX("right")?(i||(e.translateX(-e.right),e.alignSibling("right",a),e.constraint.horizontal=true),n.modifyBox(4,t.borderRightWidth)):e.marginLeft<0&&or(t,e)&&(n.alignSibling("left",a),n.translateX(e.linear.left-t.bounds.left),n.modifyBox(16,t.borderLeftWidth),n.constraint.horizontal=true,e.setBox(16,{reset:1})),e.hasPX("top")&&(i||(e.translateY(e.top),e.alignSibling("top",a),e.constraint.vertical=true),n.modifyBox(2,t.borderTopWidth)),e.hasPX("bottom")?(i||(e.translateY(-e.bottom),e.alignSibling("bottom",a),e.constraint.vertical=true),n.modifyBox(8,t.borderBottomWidth)):e.marginTop<0&&rr(t,e)&&(n.alignSibling("top",a),n.translateY(e.linear.top-t.bounds.top),n.modifyBox(2,t.borderTopWidth),n.constraint.vertical=true,e.setBox(2,{reset:1}))})}}}var cr=squared.base.LayoutUI;const{CSS_UNIT:hr}=squared.lib.css,{NODE_ALIGNMENT:dr}=squared.base.lib.enumeration;function ur(t){const e=t.percentWidth;return e>0&&e<1}function fr(t){const e=t.percentHeight;return e>0&&e<1}class pr extends squared.base.ExtensionUI{is(t){return t.pageFlow}condition(t,e){return(t=>!t.documentParent.layoutElement&&!t.display.startsWith("table"))(t)&&(ur(t)&&!e.layoutConstraint&&("100%"!==t.cssInitial("width")||t.has("maxWidth",{type:4,not:"100%"}))&&(t.originalRoot||t.hasPX("height")||(e.layoutVertical||t.onlyChild)&&(e.blockStatic||e.hasPX("width")))||fr(t)&&("100%"!==t.cssInitial("height")||t.has("maxHeight",{type:4,not:"100%"}))&&(t.originalRoot||e.hasHeight))}processNode(t,a){const i=this.controller.createNodeWrapper(t,a,{resetMargin:true});return ur(t)?(i.setCacheValue("hasWidth",true),i.css("display","block"),i.setLayoutWidth("match_parent"),t.setLayoutWidth("100%"!==t.cssInitial("width")||t.hasPX("maxWidth")?"0px":"match_parent")):i.setLayoutWidth("wrap_content"),fr(t)?(i.setCacheValue("hasHeight",true),i.setLayoutHeight("match_parent"),t.setLayoutHeight("100%"!==t.cssInitial("height")||t.hasPX("maxHeight")?"0px":"match_parent")):i.setLayoutHeight("wrap_content"),{parent:i,renderAs:i,outputAs:this.application.renderNode(new cr(a,i,e.CONSTRAINT,4096,i.children))}}}const gr=squared.base,{getElementAsNode:mr}=squared.lib.session,{NODE_ALIGNMENT:yr,NODE_RESOURCE:br,NODE_TEMPLATE:Tr}=gr.lib.enumeration,Er=gr.NodeUI;function Sr(t,e){let a=false;const i=t.length;let n=0;while(n<i){const i=t[n++];i.toElementBoolean("checked")&&i.android("checked","true"),!a&&i.baseline&&i.parent===e&&e.layoutLinear&&(0===n||e.layoutHorizontal)&&(e.android("baselineAlignedChildIndex",n.toString()),a=true),i.positioned=true}return a}const Ar=t=>{var e;return(null===(e=t.name)||void 0===e?void 0:e.trim())||""};class vr extends squared.base.ExtensionUI{is(t){return t.is(e.RADIO)}condition(t){return""!==Ar(t.element)&&!t.positioned}processNode(t,a){var i;const o=Ar(t.element),r=[],s=[];let l=-1,c=-1;a.each((a,i)=>{const n=a.renderAs;let h;n&&(n!==t&&(h=a),a=n),a.is(e.RADIO)&&!a.rendered&&Ar(a.element)===o?(r.push(a),-1===l&&(l=i),c=i):!a.visible&&r.includes(a.labelFor)&&(c=i),h&&s.push(h)});let h=r.length;if(h>1){const{target:i,use:o}=t.dataset,h=Er.linearData(a.children.slice(l,c+1)).linearX,d=this.controller.createNodeGroup(t,r,{parent:a,delegate:true}),u=n.RADIOGROUP;return d.setControlType(u,e.LINEAR),h?(d.addAlign(136),d.android("orientation","horizontal")):(d.addAlign(16),d.android("orientation","vertical")),d.inherit(t,"alignment"),d.exclude({resource:br.ASSET}),d.render(i&&!o?this.application.resolveTarget(i):a),Sr(r,d)||(d.css("verticalAlign","middle"),d.setCacheValue("baseline",false),d.setCacheValue("verticalAlign","middle")),s.forEach(t=>t.hide({remove:true})),this.subscribers.add(d),{renderAs:d,outputAs:{type:1,node:d,controlName:u},parent:d,complete:true}}{r.length=0;const a=Ar(t.element),o=t.sessionId;if(document.querySelectorAll(`input[type=radio][name=${a}]`).forEach(t=>{const e=mr(t,o);e&&r.push(e)}),h=r.length,h>1&&r.includes(t)){const t=n.RADIOGROUP,a=new Map;let o=0;while(o<h){const e=r[o++].ascend({condition:t=>t.layoutLinear,error:e=>e.controlName===t,every:true});if(!e.length){a.clear();break}e.forEach(t=>a.set(t,(a.get(t)||0)+1))}for(const[n,o]of a.entries())if(o===h){n.unsafe("controlName",t),n.containerType=e.RADIO;const a=n.renderParent;if(a){const e=null===(i=a.renderTemplates)||void 0===i?void 0:i.find(t=>(null==t?void 0:t.node)===n);e&&(e.controlName=t)}return void Sr(r,n)}}}}postBaseLayout(t){t.renderEach(e=>{e.naturalElement&&e.toElementBoolean("checked")&&t.android("checkedButton",e.documentId)})}}const xr=squared.lib,{formatPX:wr}=xr.css,{BOX_STANDARD:_r,NODE_RESOURCE:Nr,NODE_TEMPLATE:Ir}=squared.base.lib.enumeration;class Rr extends squared.base.ExtensionUI{is(t){return t.length>0}condition(t){return t.overflowX&&t.hasPX("width")||t.overflowY&&t.hasPX("height")&&t.hasHeight}processNode(t,a){const i=[],r=[],s=n.HORIZONTAL_SCROLL,l=t.api<29?n.VERTICAL_SCROLL:o.VERTICAL_SCROLL;if(t.overflowX&&t.overflowY?i.push(s,l):t.overflowX?i.push(s):t.overflowY&&i.push(l),i.includes(s)){const e=[];let a=t.actualWidth-t.contentBoxWidth,n=true,o=0;t.each(t=>{if(t.textElement&&"nowrap"!==t.css("whiteSpace"))e.push(t);else{const e=t.actualWidth;if(e<=a)return;e>o&&(o=e)}n=false}),n?i.shift():o>a&&(a=o),i.length&&e.forEach(t=>{t.textElement&&t.css("maxWidth",wr(a))})}const c=i.length;if(c){for(let n=0;n<c;++n){const o=this.application.createNode({parent:a});0===n?(o.inherit(t,"base","initial","styleMap"),a.appendTry(t,o)):(o.inherit(t,"base"),o.exclude({resource:Nr.BOX_STYLE})),o.setControlType(i[n],e.BLOCK),o.exclude({resource:Nr.ASSET}),o.resetBox(480),o.childIndex=t.childIndex,r.push(o)}for(let e=0;e<c;++e){const i=r[e];switch(i.controlName){case l:t.setLayoutHeight("wrap_content"),i.setLayoutHeight(wr(t.actualHeight)),i.android("scrollbars","vertical"),i.cssApply({width:1===c&&t.css("width")||"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case s:t.setLayoutWidth("wrap_content"),i.setLayoutWidth(wr(t.actualWidth)),i.android("scrollbars","horizontal"),i.cssApply({height:1===c&&t.css("height")||"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"})}if(0===e){const e=t.dataset;i.render(e.target&&!e.use?this.application.resolveTarget(e.target):a)}else i.render(r[e-1]);i.unsetCache(),this.application.addLayoutTemplate(i.renderParent||a,i,{type:1,node:i,controlName:i.controlName})}let n,o=true;do{n=r.pop(),o?(a=n,n.innerWrapped=t,o=false):n.innerWrapped=a}while(r.length);return t.exclude({resource:Nr.BOX_STYLE}),t.resetBox(30,n),t.parent=a,{parent:a}}}}var Cr={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},Lr={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","start","top","right","end","bottom","drawable","width","height","gravity"],">":{shape:Cr.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const Pr={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},Or={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":true,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:Pr.path},"#":"include"}};var kr={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:Pr.path},"#":"include"}};const Dr=squared.lib,Mr=squared.base,{reduceRGBA:Wr}=Dr.color,{extractURL:Br,formatPercent:Xr,formatPX:Gr,getBackgroundPosition:Hr}=Dr.css,{truncate:Vr}=Dr.math,{CHAR:Fr,XML:zr}=Dr.regex,{delimitString:Ur,flatArray:qr,isEqual:Yr,objectMap:jr,resolvePath:Kr}=Dr.util,{applyTemplate:$r}=Dr.xml,{BOX_STANDARD:Zr,NODE_RESOURCE:Jr}=Mr.lib.enumeration,Qr=Mr.NodeUI;function ts(t,e=-1,a=false){const{style:i,color:n}=t,o=us(t.width),r=fs(n);switch(i){case"solid":break;case"dotted":r.dashWidth=Gr(o),r.dashGap=r.dashWidth;break;case"dashed":{let t,e;switch(o){case 1:case 2:t=3*o,e=t-1;break;case 3:t=6,e=3;break;default:t=2*o,e=4}r.dashWidth=Gr(t),r.dashGap=Gr(e);break}case"inset":case"outset":case"groove":case"ridge":{const t=n.rgba;let r=1;if(1===o)"inset"!==i&&"outset"!==i||(r=.5);else{const n=t.r===t.g&&t.g===t.b;let o=0;if("ridge"===i?(a=!a,o+=.25):"groove"===i?o+=.25:n?"inset"===i&&(a=!a):"outset"===i&&(a=!a),a)switch(e){case 0:case 3:e=1;break;case 1:case 2:e=0}switch(e){case 0:case 3:n&&(r=.5+o);break;case 1:case 2:r=n?.75+o:-.75}}if(1!==r){const e=Wr(t,r,n.valueAsRGBA);if(e)return fs(e)}break}}return r}function es(t,e=-1,a=false,i=false){if(t){let n;if(ns(t.style)){const o=parseFloat(t.width);n=ts(t,e,!i),n.width=Gr(i?2*Math.ceil(o/2):a?Math.ceil(o/2):us(t.width))}else n=ts(t),n.width=Gr(us(t.width));return n}}function as(t){const[e,a,i,n]=t,o={};let r=false;return"0px"!==e&&(o.topLeftRadius=e,r=true),"0px"!==a&&(o.topRightRadius=a,r=true),"0px"!==i&&(o.bottomRightRadius=i,r=true),"0px"!==n&&(o.bottomLeftRadius=n,r=true),r?o:void 0}function is(t){const e=cs(t,false);return""!==e?{color:e}:void 0}function ns(t,e=0){switch(t){case"groove":case"ridge":case"inset":case"outset":return 1!==e;default:return false}}function os(t,e,a,i,n,o,r=0,s){const l=us(e.width),c=Math.max(1,Math.floor(l/3)),h=r>0?Gr(r):"";let d="-"+Gr(c+r+1);t.push({top:a?h:d,right:i?h:d,bottom:n?h:d,left:o?h:d,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Gr(c)},ts(e)),corners:s}});const u=l-c+r,f=Gr(u);d="-"+Gr(u+1),t.push({top:a?f:d,right:i?f:d,bottom:n?f:d,left:o?f:d,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Gr(c)},ts(e)),corners:s}})}function rs(t,e,a){return!t.includes(" ")&&e.includes(" ")?Fr.LOWERCASE.test(t)?("initial"===t?a:t)+" 0px":a+" "+t:"initial"===t?"0px":t}function ss(t,e=21,a){const i=t.type,n={type:i,item:false,positioning:true},o=e>=21;switch(i){case"conic":{const e=t.center;n.type="sweep",o?(n.centerX=(2*e.left).toString(),n.centerY=(2*e.top).toString()):(n.centerX=Xr(e.leftAsPercent),n.centerY=Xr(e.topAsPercent));break}case"radial":{const{center:e,radius:a}=t;o?(n.gradientRadius=a.toString(),n.centerX=e.left.toString(),n.centerY=e.top.toString()):(n.gradientRadius=Gr(a),n.centerX=Xr(e.leftAsPercent),n.centerY=Xr(e.topAsPercent));break}case"linear":{const{angle:e,angleExtent:i,dimension:o}=t,{width:r,height:s}=o;let l=i.x,c=i.y;e<=90?(c+=s,n.startX="0",n.startY=s.toString()):e<=180?(n.startX="0",n.startY="0"):e<=270?(l+=r,n.startX=r.toString(),n.startY="0"):(l+=r,c+=s,n.startX=r.toString(),n.startY=s.toString()),n.endX=Vr(l,a),n.endY=Vr(c,a);break}}const r=t.colorStops;if(o)n.item=ms(r);else{const t=r.length;n.startColor=cs(r[0].color),n.endColor=cs(r[t-1].color),t>2&&(n.centerColor=cs(r[Math.floor(t/2)].color))}return n}function ls(t,e,a=true){const i=[],n=[{"xmlns:android":h.android,item:i}],o=!a&&is(t.backgroundColor);return o&&i.push({shape:{"android:shape":"rectangle",solid:o}}),e&&e.forEach(t=>{const e=t.gradient;i.push(e?{shape:{"android:shape":"rectangle",gradient:e}}:t)}),n}function cs(t,e=true){const a=B.addColor(t,e);return""!==a?"@color/"+a:""}function hs(t,e){while(t.length<e)t=t.concat(t.slice(0));return t.length=e,t}function ds(t,e,a,i,n,o){const r=e[a];if(r){const e=us(r.width);if("double"===r.style&&e>1)os(t.item,r,0===a,1===a,2===a,3===a,n,i);else{const s=e>1&&ps(r);if(s){const i="-"+Gr(e+n+1);t.item.push({top:0===a?"":i,right:1===a?"":i,bottom:2===a?"":i,left:3===a?"":i,shape:{"android:shape":"rectangle",stroke:es(r,a,s,true)}})}const l="-"+Gr((s?Math.ceil(e/2):e)+n+1);t.item.push({top:0===a?o:l,right:1===a?o:l,bottom:2===a?o:l,left:3===a?o:l,shape:{"android:shape":"rectangle",corners:i,stroke:es(r,a,s)}})}}}const us=t=>Math.round(parseFloat(t)),fs=t=>({color:cs(t),dashWidth:"",dashGap:""}),ps=t=>"groove"===t.style||"ridge"===t.style||"double"===t.style&&us(t.width)>1,gs=(t,e)=>`${t}px ${e}px`;function ms(t,e){return jr(t,t=>({color:cs(t.color),offset:Vr(t.offset,e)}))}function ys(t,e,a=0,i=0,n){return n?(a=Vr(a,n),i=Vr(i,n),t=Vr(a+t,n),e=Vr(i+e,n)):(t+=a,e+=i),`M${a},${i} ${t},${i} ${t},${e} ${a},${e} Z`}class bs extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={drawOutlineAsInsetBorder:true},this.eventOnly=true}beforeParseDocument(){this._resourceSvgInstance=this.controller.localSettings.svg.enabled?this.application.builtInExtensions[i.RESOURCE_SVG]:void 0}afterResources(){const t=this.application.userSettings,e=this.options.drawOutlineAsInsetBorder;let a=false;const i=(t,e,i)=>{B.addTheme({name:t,parent:e,items:{"android:windowBackground":i,"android:windowFullscreen":"true","android:fitsSystemWindows":"true"}}),a=true},n=(t,e)=>{if(t!==e&&!e.hasResource(Jr.BOX_SPACING)&&0===t.percentWidth)switch(t.cssInitial("maxWidth")){case"":case"auto":case"100%":{const t=e.renderChildren;1===t.length&&e.removeTry(t[0]);break}}},o=(e,o)=>{if(""!==o){const r="@drawable/"+B.insertStoredAsset("drawables",`${e.containerName.toLowerCase()}_${e.controlId}`,o);if(!a){if("HTML"===e.tagName)return void i(t.manifestThemeName,t.manifestParentThemeName,r);{const a=e.innerMostWrapped;if(a.documentBody&&(""!==e.backgroundColor||e.visibleStyle.backgroundRepeatY))return i(t.manifestThemeName,t.manifestParentThemeName,r),void n(a,e)}}e.android("background",r,false)}};this.cacheProcessing.each(r=>{var s;const l=r.data(B.KEY_NAME,"boxStyle");if(l){if(r.inputElement){const t=r.companion;if("LABEL"===(null==t?void 0:t.tagName)&&!t.visible){const e=null===(s=t.data(B.KEY_NAME,"boxStyle"))||void 0===s?void 0:s.backgroundColor;e&&(l.backgroundColor=e)}}const c=this.getDrawableImages(r,l),h=l.outline;let[d,u]=this.getDrawableBorder(l,void 0,c,e&&h?function(t){const e=us(t.width);return 2===e&&"double"===t.style?3:e}(h):0);const f=void 0===d&&void 0===u;if(h&&(e||f)){const[t,e]=this.getDrawableBorder(l,h,f?c:void 0,void 0,!f);t?d||(d=t):e&&(u?u[0].item=u[0].item.concat(e[0].item):u=e)}if(d)o(r,$r("shape",Cr,d));else if(u)o(r,$r("layer-list",Lr,u));else{const e=l.backgroundColor;if(e){const o=cs(e,false);if(""!==o){if(!a){if("HTML"===r.tagName)return void i(t.manifestThemeName,t.manifestParentThemeName,o);{const e=r.innerMostWrapped;if(e.documentBody)return i(t.manifestThemeName,t.manifestParentThemeName,o),void n(e,r)}}const s=r.data(B.KEY_NAME,"fontStyle");s?s.backgroundColor=e:r.android("background",o,false)}}}}})}getDrawableBorder(t,e,a,i=0,n=false){const o=new Array(4),r=new Array(4),s=n?void 0:function(t){if(t){const e=t.length;if(1===e)return{radius:t[0]};if(8===e){const a=new Array(4);for(let i=0,n=0;i<e;i+=2)a[n++]=Gr((parseFloat(t[i])+parseFloat(t[i+1]))/2);return as(a)}return as(t)}}(t.borderRadius),l=i>0?Gr(i):"";let c,d,u,f,p=true,g=true;if(e){d=e;for(let t=0;t<4;++t)o[t]=e,r[t]=true}else{o[0]=t.borderTop,o[1]=t.borderRight,o[2]=t.borderBottom,o[3]=t.borderLeft;for(let t=0;t<4;++t){const e=o[t];e?(p&&d&&(p=Yr(d,e),p||(g=false)),d=e,r[t]=true):(r[t]=false,g=false)}}if(g&&(c=d),c&&!ns(c.style,us(c.width))&&!("double"===c.style&&parseInt(c.width)>1)||!d&&(s||(null==a?void 0:a.length))){const e=!!c&&es(c);(null==a?void 0:a.length)||i>0||n?(f=ls(t,a,n),(s||e)&&f[0].item.push({top:l,right:l,left:l,bottom:l,shape:{"android:shape":"rectangle",corners:s,stroke:e}})):u=function(t,e,a){return[{"xmlns:android":h.android,"android:shape":"rectangle",stroke:t,solid:e,corners:a}]}(e,!n&&is(t.backgroundColor),s)}else if(d)if(f=ls(t,a,n),p&&!ns(d.style)){const t=us(d.width);if("double"===d.style&&t>1)os(f[0].item,d,r[0],r[1],r[2],r[3],i,s);else{const e="-"+Gr(t+i+1);f[0].item.push({top:r[0]?l:e,right:r[1]?l:e,bottom:r[2]?l:e,left:r[3]?l:e,shape:{"android:shape":"rectangle",corners:s,stroke:es(d)}})}}else{const t=f[0];ds(t,o,0,s,i,l),ds(t,o,3,s,i,l),ds(t,o,2,s,i,l),ds(t,o,1,s,i,l)}return[u,f]}getDrawableImages(t,a){const i=a.backgroundImage,n=t.data(B.KEY_NAME,"embedded");if(i||n){const o=this.resource,l=t.localSettings.screenDimension,{bounds:c,fontSize:d}=t,{width:u,height:f}=c,p=[],g=[],m=[],y=[],b=[],T=a.backgroundPositionX.split(zr.SEPARATOR),E=a.backgroundPositionY.split(zr.SEPARATOR);let S=a.backgroundRepeat.split(zr.SEPARATOR),A=a.backgroundSize.split(zr.SEPARATOR),v=0;if(i){const e=this._resourceSvgInstance,a=i.length;S=hs(S,a),A=hs(A,a);let n=false;for(let r=0;r<a;++r){let a=i[r],s=false;if("string"==typeof a){if("initial"!==a){if(e){const[i,n]=e.createSvgElement(t,a);if(i&&n){const a=e.createSvgDrawable(t,n);if(""!==a){const e=t.data(B.KEY_NAME,"svgViewBox")||{width:n.width.baseVal.value,height:n.height.baseVal.value};if(!t.svgElement){let{width:t,height:a}=e;if(t>u||a>f){const e=t/u,i=a/f;e>i?e>1?(t=u,a/=e):a=f*(i/e):i>1?(a=f,t/=i):t=u*(e/i)}e.width=t,e.height=a}g[v]=a,y[v]=e,m[v]=true,s=true}i.removeChild(n)}}if(!s){const t=Br(a);if(""!==t)if(t.startsWith("data:image/")){const e=o.getRawData(t);if(e){const{base64:t,filename:a}=e;t&&(g[v]=a.substring(0,a.lastIndexOf(".")),y[v]=e.width&&e.height?{width:e.width,height:e.height}:void 0,o.writeRawImage(a,t),s=true)}}else{a=Kr(t);const e=o.addImageSet({mdpi:a});g[v]=e,""!==e&&(y[v]=o.getImage(a),s=true)}}}}else if(a.colorStops.length>1){const e=ss(a,t.api);e&&(g[v]=e,y[v]=a.dimension,s=true)}if(s){const e=T[r]||T[r-1],a=E[r]||E[r-1];b[v]=Hr(rs(e,a,"left")+" "+rs(a,e,"top"),t.actualDimension,{fontSize:d,imageDimension:y[v],imageSize:A[r],screenDimension:l}),v++}else S[r]=void 0,A[r]=void 0,n=true}n&&(S=qr(S),A=qr(A))}n&&(0===v&&(S.length=0,A.length=0),n.filter(t=>t.visible&&(t.imageElement||"INPUT_IMAGE"===t.containerName)).forEach(e=>{const a=e.element,i=o.addImageSrc(a);if(""!==i){const n=e.bounds;g[v]=i,S[v]="no-repeat",A[v]=gs(e.actualWidth,e.actualHeight);const r=Hr("INPUT_IMAGE"===e.containerName?gs(0,0):gs(n.left-c.left+t.borderLeftWidth,n.top-c.top+t.borderTopWidth),t.actualDimension,{fontSize:d,imageDimension:n,screenDimension:l}),s=o.getImage(a.src);if(!t.hasPX("width")){const e=((null==s?void 0:s.width)||0)+r.left-(t.paddingLeft+t.borderLeftWidth);e>0&&t.modifyBox(256,e)}y[v]=s,b[v]=r,v++}}));const{backgroundClip:x,backgroundOrigin:w}=a,_=t.innerMostWrapped.documentBody;for(let a=v-1,i=0;a>=0;--a){const n=g[a],o={order:Number.POSITIVE_INFINITY};if("object"==typeof n&&!n.positioning){o.gravity="fill",o.gradient=n;continue}const d=b[a],T=A[a],E=4===d.orientation.length;let v=y[a],N=NaN,I=NaN;v&&(v.width&&v.height?(N=v.width,I=v.height):v=void 0);let R=0,C=0,L=0,P=0,O=NaN,k=NaN,D=NaN,M=NaN,W=0,X=false,G=false,H=0,V=0,F="",z="",U="",q="",Y="",j=S[a];if(j.includes(" ")){const[t,e]=j.split(" ");j="no-repeat"===t?"no-repeat"===e?"no-repeat":"repeat-y":"no-repeat"===e?"repeat-x":"repeat"}else"space"!==j&&"round"!==j||(j="repeat");switch(j){case"repeat":F="repeat",z="repeat";break;case"repeat-x":F="repeat",z="disabled";break;case"repeat-y":F="disabled",z="repeat";break;default:F="disabled",z="disabled"}switch(d.horizontal){case"left":case"0%":case"0px":U=t.localizeString("left"),E&&(M=0,X=true);break;case"center":case"50%":U="center_horizontal";break;case"right":case"100%":U=t.localizeString("right"),k=0,E&&(X=true);break;default:d.leftAsPercent<1?(U="left",M=0,X=true):(U="right",k=0,X=true);break}switch(d.vertical){case"top":case"0%":case"0px":q="top",E&&(O=0,G=true);break;case"center":case"50%":q="center_vertical";break;case"bottom":case"100%":q="bottom",D=0,E&&(G=true);break;default:d.topAsPercent<1?(q="top",O=0,G=true):(q="bottom",D=0,G=true);break}switch(T){case"auto":case"auto auto":case"initial":"string"!=typeof n&&(Y="fill");break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":case"contain":case"cover":case"round":if(F="",z="",Y="fill",_){const e=t.visibleStyle;e.backgroundRepeat=true,e.backgroundRepeatY=true}break;default:""!==T&&T.split(" ").forEach((e,a)=>{"100%"===e?Y=0===a?"fill_horizontal":Ur({value:Y},"fill_vertical"):"auto"!==e&&(0===a?"repeat"!==F&&(H=t.parseWidth(e,false)):"repeat"!==z&&(V=t.parseHeight(e,false)))})}let K,$=true!==m[a],Z=t.is(e.IMAGE)||"string"!=typeof n,J=false,Q=false,tt=false,et=false,at=true;if(v){let e=u,a=f;if("contain"!==T&&!t.hasWidth){const i=window.innerWidth,n=l.width,o=()=>f*(e/u);u===i?i>=n?(e=n,a=o()):({width:e,height:a}=Qr.refitScreen(t,c)):i>=n&&(e=t.actualBoxWidth(u),a=o())}const i=N/e,n=I/a,o=()=>N*V/I,r=()=>I*H/N,s=()=>e*(i/n),h=()=>a*(n/i),p=(t,e)=>{F="",z="",Y="",t&&(U="",q=""),e&&(O=NaN,k=NaN,D=NaN,M=NaN,X=false,G=false),at=false};switch(T){case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(I>=f){tt=true,et=true,V=f,Z=true;break}case"cover":{const o="cover"===T;if(p(o,!o),i<n)if(H=e,V=h(),V>f){const e=d.topAsPercent;0!==e&&(R=Math.round((f-V)*e)),t.hasPX("height")||t.css("height",Gr(f-t.contentBoxHeight)),X||(Y="center_horizontal|fill_horizontal")}else V<f&&(H=e*f/V,V=f),X||(Y="center_horizontal|fill");else if(i>n){if(H=s(),V=a,H>u){if(t.hasWidth){const t=d.leftAsPercent;0!==t&&(P=Math.round((u-H)*t))}G||(Y="center_vertical|fill_vertical")}else H<u&&(H=u,V=a*u/H),G||(Y="center_vertical|fill");X=false}else Y="fill";G=false;break}case"contain":p(true,true),i>n?(V=h(),H=N<u?o():u,q="center_vertical",Y="fill_horizontal"):i<n?(H=s(),V=I<f?r():f,U="center_horizontal",Y="fill_vertical"):Y="fill";break;default:0===H&&V>0&&(H=o()),0===V&&H>0&&(V=r())}}if(x){const{top:e,right:a,left:i,bottom:n}=x;0===H?H=u:H+=t.contentBoxWidth,0===V?V=f:V+=t.contentBoxHeight,H-=i+a,V-=e+n,isNaN(k)?P+=i:C+=a,isNaN(D)?R+=e:L+=n,U="",q=""}else if(at&&(w&&("repeat"!==F&&(isNaN(k)?P+=w.left:C+=w.right),"repeat"!==z&&(isNaN(D)?R+=w.top:L+=w.bottom)),!Z&&!_)){if(N>u){H=u-(X?Math.min(d.left,0):0);let e=true;if("repeat"===z&&""!==U){switch(U){case"start":case"left":if(C+=u-N,X){const t=d.left;t<0&&(W=t),H=0,C-=t,e=false,U="right",z=""}else U="";M=NaN,k=0;break;case"center_horizontal":U+="|fill_vertical",z="";break;case"right":if(P+=u-N,X){const a=d.right;a<0&&(W=a),H=0,P-=a,e=false,U=t.localizeString("left"),z=""}else U="";M=0,k=NaN}X=false,q=""}e&&(Y=Ur({value:Y,not:["fill"]},"fill_horizontal")),"disabled"!==F&&(F=""),J=true}if(I>f){V=f;let t=true;if("repeat"===F&&""!==q){switch(q){case"top":if(G){L+=f-I;const e=d.top;e<0&&(W=e),V=0,L-=e,t=false,q="bottom",F="",O=NaN,D=0}break;case"center_vertical":q+="|fill_horizontal",F="";break;case"bottom":if(R+=f-I,G){const e=d.bottom;e<0&&(W=e),V=0,R-=e,t=false,q="top"}else q="";F="",O=0,D=NaN}U="",G=false}t&&(Y=Ur({value:Y,not:["fill"]},"fill_vertical")),"disabled"!==z&&(z=""),Q=true}}switch(t.controlName){case r.TOOLBAR:case s.TOOLBAR:U="",q="",Y="fill"}if(Z)0===H&&0===V&&"fill"===Y&&($=false);else{0===H&&N<u&&"disabled"===F&&(H=N,tt=true),0===V&&I<f&&"disabled"===z&&(V=I,et=true);const e=U;if("repeat"===F){switch(q){case"top":isNaN(O)||(F=""),q="";break;case"bottom":H>0&&!tt?F="":et&&(H=N,Y=Ur({value:Y,not:["fill"]},"fill_horizontal"),I>=N&&(F=""))}U=""}if("repeat"===z){switch(e){case"start":case"left":isNaN(M)||(z=""),U="";break;case"center_horizontal":t.renderChildren.length&&(z="");break;case"right":case"end":V>0&&!et?z="":tt&&(V=I,Y=Ur({value:Y,not:["fill"]},"fill_vertical"),N>=I&&(z=""))}q=""}""===U||J||(Y=Ur({value:Y},U),U=""),""===q||Q||(Y=Ur({value:Y},q),q="")}if("string"==typeof n)K="@drawable/"+n;else if(n.item){0===H&&(H=(null==v?void 0:v.width)||Qr.refitScreen(t,t.actualDimension).width),0===V&&(V=(null==v?void 0:v.height)||Qr.refitScreen(t,t.actualDimension).height);const e=B.insertStoredAsset("drawables",`${t.controlId}_gradient_${a+1}`,$r("vector",kr,[{"xmlns:android":h.android,"xmlns:aapt":h.aapt,"android:width":Gr(H),"android:height":Gr(V),"android:viewportWidth":H.toString(),"android:viewportHeight":V.toString(),path:{pathData:ys(H,V),"aapt:attr":{name:"android:fillColor",gradient:n}}}]));""!==e&&(K="@drawable/"+e,o.order=i++),"left"!==U&&"start"!==U||(U=""),"top"===q&&(q=""),"fill"!==Y&&("repeat"===F&&"repeat"===z?Y="fill":"repeat"===F?Y="fill_vertical"===Y?"fill":"fill_horizontal":"repeat"===z&&(Y="fill_horizontal"===Y?"fill":"fill_vertical"))}const it="center_horizontal"===U&&"center_vertical"===q?"center":Ur({value:U},q);if(K){if($&&(!Z&&(""!==Y&&""!==it||"repeat"===F||"repeat"===z||_)||tt||et)){let t="";"disabled"===F&&"disabled"===z?(t="disabled",F="",z=""):"repeat"===F&&"repeat"===z&&(t="repeat",F="",z=""),o.gravity=Y,o.bitmap=[{src:K,gravity:it,tileMode:t,tileModeX:F,tileModeY:z}]}else o.gravity=Ur({value:it},Y),o.drawable=K;(o.drawable||o.bitmap||o.gradient)&&(isNaN(D)?(G&&(R+=d.top),isNaN(O)||(R+=O),0!==R&&(o.top=Gr(R)),W<0&&(o.bottom=Gr(W))):(G&&(L+=d.bottom),L+=D,0!==L&&(o.bottom=Gr(L)),W<0&&(o.top=Gr(W))),isNaN(k)?(X&&(P+=d.left),isNaN(M)||(P+=M),0!==P&&(o[t.localizeString("left")]=Gr(P)),W<0&&(o[t.localizeString("right")]=Gr(W))):(X&&(C+=d.right),C+=k,0!==C&&(o[t.localizeString("right")]=Gr(C)),W<0&&(o[t.localizeString("left")]=Gr(W))),H>0&&(o.width=Gr(H)),V>0&&(o.height=Gr(V)),p.push(o))}}return p.sort((t,e)=>{const a=t.order,i=e.order;return a===i?0:a<i?-1:1})}}}const{capitalize:Ts}=squared.lib.util;class Es extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(t){const e=this.application.viewModel;if(e){const a=this.controller,i=new Set;this.cache.each(t=>{t.styleElement&&t.visible&&t.unsafe("namespaces").forEach(e=>{const a=et(t.dataset,"viewmodel"+Ts(e));if(a){for(const i in a)t.attr(e,i,`@{${a[i]}}`,true);i.add(t)}})}),i.size&&t.forEach(t=>{const n=t.node;for(const t of i)if(t.ascend({condition:t=>t===n,attr:"renderParent"}).length){const{import:o,variable:r}=e,{depth:s,id:l}=n,c="\t".repeat(s),h="\t".repeat(s+1),d="\t".repeat(s+2);let u=c+"<layout {#0}>\n"+h+"<data>\n";o&&o.forEach(t=>u+=d+`<import type="${t}" />\n`),r&&r.forEach(t=>u+=d+`<variable name="${t.name}" type="${t.type}" />\n`),u+=h+"</data>\n",a.addBeforeOutsideTemplate(l,u),a.addAfterOutsideTemplate(l,c+"</layout>\n"),n.depth=s-1,i.delete(t);break}})}}}const Ss=squared.lib,{XML:As}=Ss.regex,{convertUnderscore:vs,fromLastIndexOf:xs,safeNestedArray:ws,safeNestedMap:_s}=Ss.util,Ns=B.STORED,Is=/\dpx$/,Rs=/:(\w+)="(-?[\d.]+px)"/;function Cs(t,e,a){if(t.get(e)===a)return e;for(const[i,n]of t.entries())if(a===n&&i.startsWith(e))return i;return B.generateId("dimen",e)}function Ls(t,e,a){const i=e.namespace(t);for(const n in i)if("text"!==n){const o=i[n];Is.test(o)&&ws(a,`${t},${n},${o}`).push(e)}}const Ps=t=>xs(t,".");class Os extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){const t=Ns.dimens,e={};this.cache.each(t=>{if(t.visible){const a=t.containerName.toLowerCase(),i=_s(e,a);Ls("android",t,i),Ls("app",t,i)}});for(const a in e){const i=e[a];for(const e in i){const[n,o,r]=e.split(As.SEPARATOR),s=Cs(t,Ps(a)+"_"+vs(o),r);i[e].forEach(t=>t[n](o,"@dimen/"+s)),t.set(s,r)}}}afterFinalize(){if(this.controller.hasAppendProcessing()){const t=Ns.dimens;this.application.layouts.forEach(e=>{let a,i=e.content;while(null!==(a=Rs.exec(i))){const[e,n,o]=a;if("text"!==n){const a=Cs(t,"custom_"+vs(n),o);i=i.replace(e,e.replace(o,"@dimen/"+a)),t.set(a,o)}}e.content=i})}}}const ks=squared.lib,{XML:Ds}=ks.regex,{capitalize:Ms,convertInt:Ws,convertWord:Bs,safeNestedArray:Xs,safeNestedMap:Gs,objectMap:Hs,spliceArray:Vs,trimBoth:Fs}=ks.util,{NODE_RESOURCE:zs}=squared.base.lib.enumeration,Us=B.STORED,qs=/^(\w*?)(?:_(\d+))?$/,Ys=/"/g,js={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},Ks={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},$s={"arial black":"sans-serif","ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},Zs={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},Js={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'},Qs=Object.keys(Js);function tl(t,e,a){const i=t.length;e.split(";").forEach(e=>{for(let n=0;n<i;++n){let o=t[n],r=-1,s="";for(const t in o)if(t===e){r=n,s=t,n=i;break}if(-1!==r){o=t[r],o[s]=o[s].filter(t=>!a.includes(t)),0===o[s].length&&delete o[s];break}}})}class el extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:false},this.eventOnly=true}afterParseDocument(){const t=this.resource,e=this.options.disableFontAlias,a="dp"===t.userSettings.convertPixels,{fonts:i,styles:n}=Us,o={},r={};let s=[];this.cache.each(t=>{t.data(B.KEY_NAME,"fontStyle")&&t.hasResource(zs.FONT_STYLE)&&Xs(o,t.containerName).push(t)});for(const n in o){const l=[],c=o[n];s=s.concat(c),c.forEach(n=>{const{id:o,companion:r,api:s}=n,c=n.data(B.KEY_NAME,"fontStyle");let{fontFamily:h,fontStyle:d,fontWeight:u}=c;"LABEL"!==(null==r?void 0:r.tagName)||r.visible||(n=r),h.replace(Ys,"").split(Ds.SEPARATOR).some((a,o,r)=>{let l=a=Fs(a,"'").toLowerCase(),c="";if(!e&&$s[l]&&(l=this.options.systemDefaultFont),s>=js[l]||!e&&s>=js[Ks[l]])h=l;else{if(!d||!u)return false;{let e=false;if(t.getFont(a,d,u))e=true;else{const i=t.getFont(a,d);if(i)c=u,u=i.fontWeight.toString(),e=true;else{if(o<r.length-1)return false;h=this.options.systemDefaultFont}}if(e){l=Bs(l);const t=i.get(l)||{};t[a+"|"+d+"|"+u]=Zs[u]||u,i.set(l,t),h="@font/"+l}}}return"normal"===d&&(d=""),""!==c?u=c:("400"===u||n.api<26)&&(u=""),parseInt(u)>500&&(d+=(d?"|":"")+"bold"),true});const f={fontFamily:h,fontStyle:d,fontWeight:u,fontSize:c.fontSize,color:B.addColor(c.color),backgroundColor:B.addColor(c.backgroundColor)};for(let t=0;t<6;++t){const e=Qs[t];let i=f[e];i&&(3===t&&a&&(i=Z(i,true)),Xs(Gs(l,t),Js[e]+i+'"').push(o))}}),r[n]=l}const l={};for(const t in r){const e={};l[t]=e;const a=r[t].filter(t=>!!t).sort((t,e)=>{let a=0,i=0,n=0,o=0;for(const e in t){const i=t[e].length;a=Math.max(i,a),n+=i}for(const t in e){const a=e[t];if(a){const t=a.length;i=Math.max(t,i),o+=t}}return a!==i?a>i?-1:1:n!==o?n>o?-1:1:0});do{if(1===a.length){const t=a[0];for(const a in t){const i=t[a];i.length&&(e[a]=i)}break}{const i={};for(let n=0;n<a.length;++n){const r={},s=a[n];for(const e in s){const l=s[e];if(0===l.length)continue;if(l.length===o[t].length){i[e]=l,a[n]={};break}const c={};let h=false;for(let t=0;t<a.length;++t)if(n!==t){const e=a[t];for(const t in e){const a=e[t];a.length&&l.forEach(e=>{a.includes(e)&&Xs(c,t).push(e)})}}for(const t in c){const a=c[t];a.length>1&&(r[e<t?e+";"+t:t+";"+e]=a,h=true)}h||(r[e]=l)}if(Object.keys(r).length){const t={},i=new Set,n={};for(const t in r)n[t]=r[t].join(",");for(const e in r)for(const a in r){const o=n[e];if(e!==a&&o===n[a]){let n=t[o];n||(n=new Set(e.split(";")),t[o]=n),a.split(";").forEach(t=>n.add(t)),i.add(e).add(a)}}for(const t of i)delete r[t];for(const t in r)tl(a,t,r[t]),e[t]=r[t];for(const i in t){const n=Array.from(t[i]).sort().join(";"),o=Hs(i.split(Ds.SEPARATOR),t=>parseInt(t));tl(a,n,o),e[n]=o}}}const n=Object.keys(i);n.length&&(e[n.join(";")]=i[n[0]]),Vs(a,t=>{for(const e in t)if(t[e].length)return false;return true})}}while(a.length)}const c={},h={},d=new Set;for(const t in l){const e=l[t],a=[];for(const t in e){const i=[];t.split(";").forEach(t=>{const e=Ds.ATTRIBUTE.exec(t);e&&i.push({key:e[1],value:e[2]})}),a.push({name:"",parent:"",items:i,ids:e[t]})}a.sort((t,e)=>{let a=t.ids.length,i=e.ids.length;return a===i&&(a=t.items.length,i=e.items.length,a===i&&(a=t.name,i=e.name)),a<=i?1:-1});const i=a.length;for(let e=0;e<i;++e)a[e].name=Ms(t)+(e>0?"_"+e:"");c[t]=a}for(const t in c)c[t].forEach(t=>{var e;return null===(e=t.ids)||void 0===e?void 0:e.forEach(e=>Xs(h,e).push(t.name))});s.forEach(t=>{const e=h[t.id];e&&(e.length>1?(d.add(e.join(".")),e.shift()):d.add(e[0]),t.attr("_","style","@style/"+e.join(".")))}),d.forEach(t=>{const e=[];let a,i="";if(t.split(".").forEach((t,o,r)=>{const s=qs.exec(t);if(s){const l=c[s[1].toUpperCase()][Ws(s[2])];l&&(0===o?(i=t,1===r.length?a=l.items:n.has(t)||n.set(t,{name:t,parent:"",items:l.items})):(a?l.items.forEach(t=>{const e=t.key,i=a.findIndex(t=>t.key===e);-1!==i?a[i]=t:a.push(t)}):a=l.items.slice(0),e.push(t)))}}),a)if(0===e.length)n.set(i,{name:i,parent:"",items:a});else{const t=e.join(".");n.set(t,{name:t,parent:i,items:a})}})}}const{NODE_TEMPLATE:al}=squared.base.lib.enumeration;class il extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){this.cache.each(t=>{const e=t.renderTemplates;if(e){let a,i;if(t.renderEach((t,e)=>{const n=t.dataset,o=n.androidInclude,r="true"===n.androidIncludeEnd;if(o||r){if(t.documentRoot)return;const s={item:t,name:o,index:e,include:"false"===n.androidIncludeMerge};o&&(a||(a=[]),a.push(s)),r&&(i||(i=[]),i.push(s))}}),a&&i){const t=this.application,n=this.controller,o=Math.min(a.length,i.length),r=i.length-o;r>0&&i.splice(0,r);let s=o-1;while(s>=0){const{index:o,include:r,item:l,name:c}=a[s--];for(let a=0;a<i.length;++a){const s=i[a].index;if(s>=o){const h=[];let d=o;while(d<=s)h.push(e[d++]);const u=!r||h.length>1,f=u?1:0;e.splice(o,h.length,{type:2,node:h[0].node,content:n.renderNodeStatic({controlName:"include",width:"match_parent"},{layout:"@layout/"+c,android:{}}),indent:true});let p=n.cascadeDocument(h,f);u?p=n.getEnclosingXmlTag("merge",st(p),p):l.documentRoot=true,t.saveDocument(c,p,"",Number.POSITIVE_INFINITY),i.splice(a,1);break}}}}}})}}const nl=squared.lib,{formatPX:ol}=nl.css,{measureTextWidth:rl}=nl.dom,{capitalizeString:sl,lowerCaseString:ll,isNumber:cl,isString:hl}=nl.util,{STRING_SPACE:dl,replaceCharacterData:ul}=nl.xml,{NODE_RESOURCE:fl}=squared.base.lib.enumeration;class pl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:false,fontVariantSmallCapsReduction:.7},this.eventOnly=true}afterResources(){const t=this.options.numberResourceValue,e=(e,a,i,n)=>{""!==(i=B.addString(n,i,t))&&e.android(a,t||!cl(i)?"@string/"+i:i,false)};this.cacheProcessing.each(t=>{if(t.hasResource(fl.VALUE_STRING)){switch(t.tagName){case"SELECT":{const e=this.createOptionArray(t.element,t.controlId);""!==e&&t.android("entries","@array/"+e);break}case"IFRAME":{const e=t.data(B.KEY_NAME,"valueString");e&&B.addString(ul(e.value),e.key);break}default:if(!t.layoutFrame){const a=t.data(B.KEY_NAME,"valueString");if(a){let i=a.value;const n=a.key||i;if(t.naturalChild&&t.alignParent("left")&&t.pageFlow&&!(t.preserveWhiteSpace&&!t.plainText||t.plainText&&t.actualParent.preserveWhiteSpace)){let e=0;const a=t.textContent,n=a.length;let o=0;while(o<n)switch(a.charCodeAt(o++)){case 160:e++;case 32:continue}0===e&&(i=i.replace(/^(\s|&#160;)+/,""))}if("small-caps"===t.css("fontVariant"))if(t.api>=21)t.android("fontFeatureSettings","smcp");else{t.android("textAllCaps","true");const e=t.data(B.KEY_NAME,"fontStyle");e&&(e.fontSize*=this.options.fontVariantSmallCapsReduction)}switch(t.css("textTransform")){case"uppercase":t.android("textAllCaps","true");break;case"lowercase":i=ll(i);break;case"capitalize":i=sl(i)}const o=t.tagName;i=ul(i,t.preserveWhiteSpace||"CODE"===o);const r=t.css("textDecorationLine");"none"!==r&&r.split(" ").forEach(t=>{switch(t){case"underline":i=`<u>${i}</u>`;break;case"line-through":i=`<strike>${i}</strike>`}}),"INS"!==o||r.includes("line-through")||(i=`<strike>${i}</strike>`);let s=0;if(t.blockDimension||"table-cell"===t.display){const e=t.css("textIndent");s=t.parseUnit(e),("100%"===e||s+t.bounds.width<0)&&(i="",t.delete("android","ellipsize","maxLines"))}if(""!==i){if(0===s){const e=t.actualParent;(null==e?void 0:e.firstChild)!==t||!e.blockDimension&&"table-cell"!==e.display||(s=e.parseUnit(e.css("textIndent")))}if(s>0){const e=rl(" ",t.css("fontFamily"),t.fontSize)||t.fontSize/2;i=dl.repeat(Math.max(Math.floor(s/e),1))+i}e(t,"text",n,i)}}if(t.inputElement){if(t.controlName===n.EDIT_LIST){const e=t.element.list;e&&(this.createOptionArray(e,t.controlId),t.hasPX("width")||t.css("width",ol(t.actualWidth)))}const a=t.data(B.KEY_NAME,"hintString");hl(a)&&e(t,"hint","",a)}}}if(t.styleElement){const a=t.data(B.KEY_NAME,"titleString")||t.toElementString("title");""!==a&&e(t,"tooltipText",t.controlId.toLowerCase()+"_title",a)}}})}createOptionArray(t,e){const[a,i]=B.getOptionArray(t),n=this.options.numberResourceValue;let o;if(!n&&i)o=i;else{const t=a||i;t&&(o=[],t.forEach(t=>{""!==(t=B.addString(ul(t),"",n))&&o.push("@string/"+t)}))}return(null==o?void 0:o.length)?B.insertStoredAsset("arrays",e+"_array",o):""}}const gl=squared.lib,{XML:ml}=gl.regex,{capitalize:yl,trimString:bl}=gl.util,Tl=B.STORED,El=/(\w+):(\w+)="([^"]+)"/;class Sl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){const t={},e={};this.cache.each(a=>{if(a.controlId&&a.visible){const i=a.renderChildren,n=i.length;if(n>1){const o=new Map;let r=true,s="",l=0;while(l<n){let t=false;const e=i[l++].combine("_","android"),a=e.length;let n=0;while(n<a){const a=e[n++];if(!t&&a.startsWith("style=")){if(0===l)s=a;else if(""===s||a!==s){r=false;break}t=true}else o.set(a,(o.get(a)||0)+1)}if(!r||!t&&""!==s){r=false;break}}if(r){for(const[t,e]of o.entries())e!==n&&o.delete(t);if(o.size>1){""!==s&&(s=bl(s.substring(s.indexOf("/")+1),'"'));const n=[];for(const t of o.keys()){const e=El.exec(t);e&&(i.forEach(t=>t.delete(e[1],e[2])),n.push(e[0]))}n.sort();const r=n.join(";");let l="";for(const t in e)if(e[t]===r){l=t;break}""!==s&&l.startsWith(s+".")||(l=(""!==s?s+".":"")+yl(a.controlId),t[l]=n,e[l]=r),i.forEach(t=>t.attr("_","style","@style/"+l))}}}}});for(const e in t){const a=[];t[e].forEach(t=>{const e=ml.ATTRIBUTE.exec(t);e&&a.push({key:e[1],value:e[2]})}),Tl.styles.set(e,Object.assign(Object.assign({},nt()),{name:e,items:a}))}}}var Al={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const vl={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var xl={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":["ordering"],">":{set:{"^":"android","@":["ordering"],">":{objectAnimator:vl.objectAnimator}},objectAnimator:vl.objectAnimator}},objectAnimator:vl.objectAnimator}}};squared.svg||Object.assign(squared,{svg:{lib:{constant:{},util:{}}}});var wl=squared.svg.Svg,_l=squared.svg.SvgAnimate,Nl=squared.svg.SvgAnimateTransform,Il=squared.svg.SvgBuild,Rl=squared.svg.SvgG,Cl=squared.svg.SvgPath,Ll=squared.svg.SvgShape;const Pl=squared.lib,Ol=squared.svg.lib,{extractURL:kl,formatPX:Dl,isPercent:Ml}=Pl.css,{truncate:Wl}=Pl.math,{CHAR:Bl,FILE:Xl}=Pl.regex,{convertCamelCase:Gl,convertInt:Hl,convertWord:Vl,formatString:Fl,isArray:zl,isNumber:Ul,isString:ql,objectMap:Yl,partitionArray:jl,replaceMap:Kl}=Pl.util,{applyTemplate:$l}=Pl.xml,{KEYSPLINE_NAME:Zl,SYNCHRONIZE_MODE:Jl}=Ol.constant,{MATRIX:Ql,SVG:tc,TRANSFORM:ec}=Ol.util,ac=squared.base.NodeUI,ic=B.STORED,nc={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"},oc=["name","value","fill","stroke","fillPattern","fillRule","strokeWidth","fillOpacity","strokeOpacity","strokeLinecap","strokeLinejoin","strokeLineJoin","strokeMiterlimit"];Zl&&Object.assign(nc,{[Zl["ease-in"]]:nc.accelerate,[Zl["ease-out"]]:nc.decelerate,[Zl["ease-in-out"]]:nc.accelerate_decelerate,[Zl.linear]:nc.linear});const rc={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function sc(t,e){const a=null==t?void 0:t[e];return a?nc[a]||cc(a):""}function lc(t){for(const e in rc)if(rc[e].includes(t))return Gl(e);return""}function cc(t){const e=nc[t];if(e)return e;{const e="path_interpolator_"+Vl(t);return ic.animators.has(e)||ic.animators.set(e,Fl('<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',...t.split(Bl.SPACE))),"@anim/"+e}}function hc(t){const e={};return t.forEach(t=>{const{matrix:a,origin:i,type:n}=t;switch(n){case SVGTransform.SVG_TRANSFORM_SCALE:e.scaleX=a.a.toString(),e.scaleY=a.d.toString(),i&&(e.pivotX=i.x.toString(),e.pivotY=i.y.toString());break;case SVGTransform.SVG_TRANSFORM_ROTATE:e.rotation=t.angle.toString(),i?(e.pivotX=i.x.toString(),e.pivotY=i.y.toString()):(e.pivotX="0",e.pivotY="0");break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:e.translateX=a.e.toString(),e.translateY=a.f.toString()}}),e}function dc(t,e){let a=0,i=0;return function(t){const e=[];let a=t.parentElement;while(a)if(e.push(a),a=a.parentElement,a instanceof HTMLElement)break;return e}(t).forEach(t=>{(tc.svg(t)||tc.use(t))&&t!==e&&(a+=t.x.baseVal.value,i+=t.y.baseVal.value)}),{x:a,y:i}}function uc(t,e,a=1,i=1){const n=e.length;return n&&(tc.circle(t)||tc.ellipse(t))&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(a!==i||n>1&&e.some(t=>t.type===SVGTransform.SVG_TRANSFORM_SCALE&&t.matrix.a!==t.matrix.d))?fc(t,e):[[],e]}function fc(t,e,a=false){if(e.length){const i=[],n=[],o=e[0].fromCSS?[]:ec.rotateOrigin(t).reverse(),r=e.slice(0).reverse(),s=[],l=()=>{i.push(s.slice(0)),s.length=0};for(let t=1;t<r.length;++t){const e=r[t],a=r[t-1];if(e.type===a.type){let i;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:i=Ql.clone(e.matrix),i.e+=a.matrix.e,i.f+=a.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:i=Ql.clone(e.matrix),i.a*=a.matrix.a,i.d*=a.matrix.d}i&&(e.matrix=i,r.splice(--t,1))}}return r.forEach(t=>{switch(t.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:n.push(t);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:a||0!==i.length||0!==s.length?(s.push(t),l()):n.push(t);break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(o.length){const e=o.shift();if(e.angle===t.angle){0===e.x&&0===e.y||(t.origin=e);break}}if(!t.origin&&1===s.length&&s[0].type===SVGTransform.SVG_TRANSFORM_SCALE)return void s.push(t);case SVGTransform.SVG_TRANSFORM_SCALE:s.length&&l(),s.push(t)}}),s.length&&i.push(s),[i.reverse(),n]}return[[],e]}function pc(t,e,a,i=false,n){const o=t[e];let r;return o?r=Array.isArray(o)?o[a].toString():o:i||0!==e||(r=n),r||""}function gc(t){switch(t){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:return Ec(t)?"floatType":void 0}}function mc(t,e,a,i){const n=new _l;return n.attributeName=t,n.delay=e,n.duration=1,n.from=i||a,n.to=a,n.fillForwards=true,n.convertToValues(),n}function yc(t,e=true){let a=rc[t];return!a&&e&&Ec(t)&&(a=[t]),a}function bc(t){switch(t){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Tc(t){switch(t.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return Nl.toRotateList(t.values);case SVGTransform.SVG_TRANSFORM_SCALE:return Nl.toScaleList(t.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return Nl.toTranslateList(t.values)}}function Ec(t){switch(t){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Sc(t,e=false){const a="@color/"+B.addColor(t);return e?[a]:a}function Ac(t,e){return Nc(t.attributeName)?Sc(e):e.trim()||void 0}function vc(t){switch(t){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function xc(t,e){const a=t.synchronized,i=e.synchronized;return a&&i?a.key>=i.key?1:-1:0}function wc(t,e,a,i,n){const o=a.set,r=o.length;if(r){let s=false;if(r>1&&o.every(t=>""===t.ordering)){const t={set:[],objectAnimator:[]};o.forEach(e=>{t.set=t.set.concat(e.set),t.objectAnimator=t.objectAnimator.concat(e.objectAnimator)}),a=t}while(1===a.set.length){const t=a.set[0];if(s&&""!==t.ordering||0!==t.objectAnimator.length)break;a=t,s=true}a["xmlns:android"]=h.android,s&&(a["android:ordering"]=a.ordering,a.ordering=void 0);const l={name:e,animation:B.insertStoredAsset("animators",_c(i,n,"anim",e),$l("set",xl,[a]))};""!==l.animation&&(l.animation="@anim/"+l.animation,t[0].target.push(l))}}const _c=(t,e,a,i)=>t+(a?"_"+a:"")+(e?"_vector":"")+(i?"_"+i.toLowerCase():""),Nc=t=>"fill"===t||"stroke"===t,Ic=(t,e,a=-1)=>t.name+"_"+e+(-1!==a?"_"+(a+1):""),Rc=t=>Ml(t)?parseFloat(t)/100:.5,Cc=t=>"@drawable/"+t,Lc=(t="")=>({ordering:t,objectAnimator:[]});class Pc extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=true,this._vectorData=new Map,this._animateData=new Map,this._animateTarget=new Map,this._imageData=[],this._synchronizeMode=0,this._namespaceAapt=false}beforeParseDocument(){Il&&(Il.setName(),this.controller.localSettings.svg.enabled=true)}afterResources(){if(Il){let t,e;this.cacheProcessing.each(a=>{if(a.imageElement?[t,e]=this.createSvgElement(a,a.src):a.svgElement&&(e=a.element),e){const i=this.createSvgDrawable(a,e);""!==i&&(a.api>=21?a.android("src",Cc(i)):a.app("srcCompat",Cc(i))),a.hasWidth||a.setLayoutWidth("wrap_content"),a.hasHeight||a.setLayoutHeight("wrap_content"),a.baseline&&a.android("baselineAlignBottom","true"),t&&(t.removeChild(e),t=void 0),e=void 0}})}}afterFinalize(){this.controller.localSettings.svg.enabled=false}createSvgElement(t,e){const a=kl(e);if(""!==a&&(e=a),Xl.SVG.test(e)||e.startsWith("data:image/svg+xml")){const a=this.resource.getRawData(e);if(a){const e=(t.actualParent||t.documentParent).element;e.insertAdjacentHTML("beforeend",a.content);const i=e.lastElementChild;if(i instanceof SVGSVGElement){const a=i;return 0===a.width.baseVal.value&&a.setAttribute("width",t.actualWidth.toString()),0===a.height.baseVal.value&&a.setAttribute("height",t.actualHeight.toString()),[e,a]}}}return[]}createSvgDrawable(t,e){const{floatPrecisionValue:a,floatPrecisionKeyTime:i,transformExclude:n}=this.options,o=new wl(e),r=t.api>=23,s=2|(r?32:64),l=this._animateData,c=this._imageData;this._svgInstance=o,this._vectorData.clear(),l.clear(),this._animateTarget.clear(),c.length=0,this._namespaceAapt=false,this._synchronizeMode=s;const d=`${t.tagName}_${Vl(t.controlId,true)}_viewbox`.toLowerCase();o.build({exclude:n,residual:uc,precision:a}),o.synchronize({keyTimeMode:s,framesPerSecond:this.controller.userSettings.framesPerSecond,precision:a}),this.queueAnimations(o,o.name,t=>"opacity"===t.attributeName);const u=this.parseVectorData(o),f=o.viewBox,p=c.length;let g,m;{const{width:e,height:a}=ac.refitScreen(t,{width:o.width,height:o.height});m=B.insertStoredAsset("drawables",_c(d,p),$l("vector",kr,[{"xmlns:android":h.android,"xmlns:aapt":this._namespaceAapt?h.aapt:"","android:name":l.size?o.name:"","android:width":Dl(e),"android:height":Dl(a),"android:viewportWidth":(f.width||e).toString(),"android:viewportHeight":(f.height||a).toString(),"android:alpha":parseFloat(o.opacity)<1?o.opacity.toString():"",include:u}]))}if(l.size){const t=[{"xmlns:android":h.android,"android:drawable":Cc(m),target:[]}];for(const[e,n]of l.entries()){const o=new Map,s=new Map,l=[],c=[],h=[],u=[],f=[],[g,m]=jl(n.animate,t=>"companion"in t),y={set:[],objectAnimator:[]},b=m.length;let T=0;while(T<b){const t=m[T++];if(t.setterType)rc[t.attributeName]&&ql(t.to)&&(t.fillReplace&&t.duration>0?c.push(t):l.push(t));else if(Il.isAnimate(t)){const e=g.filter(e=>e.companion.value===t);if(e.length){e.sort((t,e)=>t.companion.key>=e.companion.key?1:0);const a=[],i=[],n=e.length;for(let o=0;o<n;++o){const n=e[o];n.companion.key<=0?(a.push(n),0===o&&(n.delay+=t.delay,t.delay=0)):i.push(n)}a.push(t),o.set("sequentially_companion_"+T,a.concat(i))}else{const e=t.synchronized;if(e){const a=e.value;if(Il.isAnimateTransform(t)){const e=s.get(a);e?e.push(t):s.set(a,[t])}else{const e=o.get(a);e?e.push(t):o.set(a,[t])}}else Il.isAnimateTransform(t)&&t.expandToValues(),-1===t.iterationCount?c.push(t):!(!t.fromToType||Il.isAnimateTransform(t)&&t.transformOrigin)||r&&"pathType"!==gc(t.attributeName)?t.fillReplace?c.push(t):l.push(t):h.push([t])}}}l.length&&h.push(l);for(const[t,e]of o.entries())t.startsWith("sequentially_companion")?h.push(e):h.push(e.sort(xc));for(const t of s.values())f.push(t.sort(xc));c.forEach(t=>u.push([[t]])),[h,f,...u].forEach((t,e)=>{if(0===t.length)return;const o={ordering:0===e||1===t.length?"":"sequentially",set:[],objectAnimator:[]};t.forEach(t=>{let s="",l=false,c=false,h=true;e<=1&&t.some(t=>!!t.synchronized&&""!==t.synchronized.value)?(Il.isAnimateTransform(t[0])||(s="sequentially"),l=true,h=false):e<=1&&t.some(t=>!!t.synchronized&&""===t.synchronized.value)?(s="sequentially",l=true,c=true):e<=1&&t.some(t=>"companion"in t)?s="sequentially":(e>0&&(s="sequentially"),e>1&&Il.isAnimateTransform(t[0])&&(c=true));const d=Lc(),u=Lc(),f=Lc(),p=Lc(),g=u.objectAnimator,m=f.objectAnimator;let y=d.objectAnimator,b=p.objectAnimator,T=[];(l?jl(t,t=>-1!==t.iterationCount):[t]).forEach((t,d)=>{1===d&&t.length>1&&(f.ordering="sequentially");const u=new Map;t.forEach(f=>{var p;const E=gc(f.attributeName);if(void 0===E)return;const S=f.delay>0;let A,v=false;const x=(t,e)=>{ql(e)&&-1===y.findIndex(e=>e.propertyName===t)&&y.push(this.createPropertyValue(t,e,"0",E))},w=(t,e,a)=>{if(!l&&f.fillReplace){let i,n=f.replaceValue;if(!n){if(v)n=Ec(t);else{const e=f.parent;if(e&&Il.isShape(e)){const a=e.path;a&&(n="pathData"===t?a.value:a[lc(t)])}}n||(n=f.baseValue)}if(null==e?void 0:e.length){const t=e[e.length-1];if(zl(t.propertyValuesHolder)){const e=t.propertyValuesHolder[t.propertyValuesHolder.length-1];i=e.keyframe[e.keyframe.length-1].value}else i=t.valueTo}if(ql(n)&&n!==i&&(n=Ac(f,n),n)){switch(t){case"trimPathStart":case"trimPathEnd":n=n.split(" ")["trimPathStart"===t?0:1]}b.push(this.createPropertyValue(t,n,"1",E,"pathType"===E?i:"",a?a.toString():""))}A&&(t.endsWith("X")?b.push(this.createPropertyValue("translateX","0","1",E)):t.endsWith("Y")&&b.push(this.createPropertyValue("translateY","0","1",E)))}};if(f.setterType){const t=yc(f.attributeName);if(t){const a=Nc(f.attributeName)?Sc(f.to,true):f.to.trim().split(" "),i=t.length;if(a.length===i&&!a.some(t=>""===t)){let n,o;for(let r=0;r<i;++r){let i;if("pathType"===E)i=a[r];else if(S){const t=f.baseValue;t&&(i=Ac(f,t.trim().split(" ")[r]))}const s=this.createPropertyValue(t[r],a[r],"1",E,i,f.delay>0?f.delay.toString():"");if(e>1)m.push(s),w(t[r],void 0,e>1?f.duration:0);else{const t=f.companion;t?t.key<=0?(n||(n=[]),n.push(s)):t.key>0&&(o||(o=[]),o.push(s)):T.push(s)}}n&&(y=y.concat(n)),o&&(b=b.concat(o))}}}else if(Il.isAnimate(f)){let y,b=c;y=1===d?t.length>1?"0":"-1":-1!==f.iterationCount?Math.ceil(f.iterationCount-1).toString():"-1";const T=this.createPropertyValue("","",f.duration.toString(),E,"",f.delay>0?f.delay.toString():"",y);let _,N,I;if(l||"pathType"!==E)if(Il.asAnimateTransform(f))N=bc(f.type),I=Tc(f),N&&I&&(c&&0===f.keyTimes[0]&&(b=false),(b||S)&&(_=Yl(N,t=>Ec(t)||"0")),A=f.transformOrigin),v=true;else if(Il.asAnimateMotion(f)){if(N=bc(f.type),I=Tc(f),N&&I){const t=f.rotateValues,e=I.length;if((null==t?void 0:t.length)===e){N.push("rotation");let a=0;while(a<e)I[a].push(t[a++])}}v=true}else switch(N=yc(f.attributeName),E){case"intType":if(I=Yl(f.values,t=>Hl(t).toString()),S){const t=f.baseValue;t&&(_=Kl(Il.parseCoordinates(t),t=>Math.trunc(t).toString()))}break;case"floatType":if(I="stroke-dasharray"===f.attributeName?Yl(f.values,t=>Kl(t.split(" "),t=>parseFloat(t))):f.values,S){const t=f.baseValue;t&&(_=Kl(Il.parseCoordinates(t),t=>t.toString()))}break;default:if(I=f.values.slice(0),Nc(f.attributeName)){if(S){const t=f.baseValue;t&&(_=Sc(t,true))}const t=I.length;for(let e=0;e<t;++e)""!==I[e]&&(I[e]=Sc(I[e]))}}else if(n.pathData){const t=f.parent;let e,i;t&&Il.isShape(t)&&(i=t,e=null===(p=t.path)||void 0===p?void 0:p.transformed),N=["pathData"],I=Cl.extrapolate(f.attributeName,n.pathData,f.values,e,i,a)}if(!f.keySplines){const t=f.timingFunction;T.interpolator=ql(t)?cc(t):this.options.animateInterpolator}if(I&&N){const{keyTimes:t,synchronized:p}=f,y=N.length,v=t.length,R=p?p.key+p.value:0!==e||y>1?JSON.stringify(T):"";for(let e=0;e<y;++e){const p=N[e];if(b&&_&&x(p,_[e]),h&&v>1)if(r&&"pathType"!==E){!b&&S&&_&&x(p,_[e]);const n=u.get(R)||[],o=[];for(let n=0;n<v;++n){let r=pc(I,n,e,true);r&&"floatType"===E&&(r=Wl(r,a)),o.push({interpolator:n>0&&""!==r&&"pivotX"!==p&&"pivotY"!==p?sc(f.keySplines,n-1):"",fraction:0===t[n]&&""===r?"":Wl(t[n],i),value:r})}n.push({propertyName:p,keyframe:o}),u.has(R)||(""!==R&&u.set(R,n),(0===d?g:m).push(Object.assign(Object.assign({},T),{propertyValuesHolder:n}))),A=void 0}else{s="sequentially";const i=Lc("sequentially");for(let o=0;o<v;++o){const r=t[o],s=Object.assign(Object.assign({},T),{propertyName:p,startOffset:0===o?(f.delay+(r>0?Math.floor(r*f.duration):0)).toString():"",propertyValuesHolder:false});let l=pc(I,o,e,false,"pathType"===E?n.pathData:f.baseValue);if(l){let h;0===o?(s.valueFrom=!c&&S&&_?_[e]:"pathType"===E?n.pathData||I[0].toString():f.baseValue||f.replaceValue||"",h=0):(s.valueFrom=pc(I,o-1,e).toString(),h=Math.floor((r-t[o-1])*f.duration)),"floatType"===E&&(l=Wl(l,a));const d=null==A?void 0:A[o];if(d){let t,e=0;if(p.endsWith("X")?(t="translateX",e=d.x):p.endsWith("Y")&&(t="translateY",e=d.y),t){const n=this.createPropertyValue(t,Wl(e,a),h.toString(),"floatType");n.interpolator=cc(Zl["step-start"]),i.objectAnimator.push(n)}}o>0&&(s.interpolator=sc(f.keySplines,o-1)),s.duration=h.toString(),s.valueTo=l,g.push(s)}}i.objectAnimator.length&&o.set.push(i)}else{const t=Object.assign(Object.assign({},T),{propertyName:p,interpolator:f.duration>1?sc(f.keySplines,0):"",propertyValuesHolder:false}),i=I.length;if(Array.isArray(I[0])){const a=I[i-1][e];if(i>1){const i=I[0][e];i!==a&&(t.valueFrom=i.toString())}t.valueTo=a.toString()}else{let a;i>1?(a=I[0].toString(),t.valueTo=I[i-1].toString()):(a=f.from||(!c&&S&&_?_[e]:""),t.valueTo=f.to),"pathType"===E?t.valueFrom=a||n.pathData||t.valueTo:a!==t.valueTo&&a&&(t.valueFrom=Ac(f,a))}const o=t.valueTo;o&&("floatType"===E&&(t.valueTo=Wl(o,a)),(0===d?g:m).push(t))}0!==d||l||-1===f.iterationCount||w(p,g)}S&&(null==A?void 0:A.length)&&(x("translateX","0"),x("translateY","0"))}}})});const E=g.length>0||m.length>0;"sequentially"===s&&(E&&1===y.length&&(g.unshift(y[0]),y.length=0),1===m.length&&(g.push(m[0]),m.length=0),E&&1===b.length&&(g.push(b[0]),b.length=0)),0===y.length&&0===m.length&&0===b.length&&("sequentially"===s&&1===g.length&&(s=""),"sequentially"!==o.ordering&&"sequentially"!==s&&(T=T.concat(g),g.length=0)),(g.length||m.length)&&(y.length&&(o.ordering="sequentially",o.set.push(d)),g.length&&(u.ordering=s,o.set.push(u)),m.length&&(o.ordering="sequentially",o.set.push(f)),b.length&&(o.ordering="sequentially",o.set.push(p))),T.length&&(o.objectAnimator=o.objectAnimator.concat(T))}),(o.set.length||o.objectAnimator.length)&&y.set.push(o)}),wc(t,e,y,d,p)}for(const[e,a]of this._animateTarget.entries()){let i;const n=(t,e,a,n,o)=>{i||(i=[]),i.push(this.createPropertyValue(t,e,"0",a,n,o))};a.animate.forEach(t=>{if(Il.asAnimateMotion(t)){const e=t.parent;if(e&&Il.isShape(e)){const a=e.path;if(a){const{value:e,baseValue:i}=a;e!==i&&(n("pathData",i,"pathType",e),-1===t.iterationCount||t.setterType||n("pathData",e,"pathType",i,t.getTotalDuration().toString()))}}}}),i&&wc(t,e,{set:[{set:void 0,objectAnimator:i}],objectAnimator:void 0},d,p)}t[0].target&&(m=B.insertStoredAsset("drawables",_c(d,p,"anim"),$l("animated-vector",Al,t)))}if(p){const t=this.resource,e=[],a=[{"xmlns:android":h.android,item:e}];""!==m&&e.push({drawable:Cc(m)}),c.forEach(a=>{const i=o.viewBox,n=o.width/i.width,r=o.height/i.height;let s=a.getBaseValue("x",0)*n,l=a.getBaseValue("y",0)*r,c=a.getBaseValue("width",0),h=a.getBaseValue("height",0);const d=dc(a.element,o.element);s+=d.x,l+=d.y,c*=n,h*=r;const u={width:Dl(c),height:Dl(h),left:0!==s?Dl(s):"",top:0!==l?Dl(l):""},f=Cc(t.addImageSet({mdpi:a.href}));a.rotateAngle?u.rotate={drawable:f,fromDegrees:a.rotateAngle.toString(),visible:a.visible?"true":"false"}:u.drawable=f,e.push(u)}),g=B.insertStoredAsset("drawables",d,$l("layer-list",Lr,a))}else g=m;return t.data(B.KEY_NAME,"svgViewBox",f),g}createPropertyValue(t,e,a,i,n="",o="",r="0"){const s=this.options.floatPrecisionValue;return{propertyName:t,startOffset:o,duration:a,repeatCount:r,valueType:i,valueFrom:Ul(n)?Wl(n,s):n,valueTo:Ul(e)?Wl(e,s):e,propertyValuesHolder:false}}parseVectorData(t,e=0){const a=this.options.floatPrecisionValue,i=this.createGroup(t),n=i.length,o=e+n;let r="";return t.each(e=>{if(e.visible)if(Il.isShape(e)){const t=e.path;if(null==t?void 0:t.value){const[i,n]=this.createPath(e,t),s=[];if(parseFloat(t.strokeWidth)>0&&(t.strokeDasharray||t.strokeDashoffset)){const o=this._animateData.get(e.name);if(!o||o.animate.every(t=>t.attributeName.startsWith("stroke-dash"))){const[r,l,c,h]=t.extractStrokeDash(null==o?void 0:o.animate,a);if(l){o&&(this._animateData.delete(e.name),r&&(o.animate=r));const t=Ic(e,"stroke"),d={name:t};""!==c&&(i.pathData=c),""!==h&&(d["clip-path"]=[{pathData:h}]);const u=l.length;for(let e=0;e<u;++e){const n=0===e?i:Object.assign({},i),r=l[e];n.name=`${t}_${e}`,o&&this._animateData.set(n.name,{element:o.element,animate:o.animate.filter(t=>void 0===t.id||t.id===e)}),n.trimPathStart=Wl(r.start,a),n.trimPathEnd=Wl(r.end,a),s.push(n)}n.unshift(d)}}}if(0===s.length&&s.push(i),n.length){n[n.length-1].path=s,r+=$l("group",Or,n,o+1)}else r+=$l("path",Pr,s,o+1)}}else Il.isContainer(e)?e.length&&(r+=this.parseVectorData(e,o)):Il.asImage(e)&&(Il.asPattern(t)||(e.extract(this.options.transformExclude.image),this._imageData.push(e)))}),n?(i[n-1].include=r,$l("group",Or,i,e+1)):r}createGroup(t){const e=[],a=[],i={"clip-path":e},n={"clip-path":a},o=[],r={};if(!(Il.asSvg(t)&&!t.documentRoot||Il.asUseSymbol(t)||Il.asUsePattern(t))||0===t.x&&0===t.y||(r.name=Ic(t,"main"),r.translateX=t.x.toString(),r.translateY=t.y.toString()),""!==t.clipRegion&&this.createClipPath(t,e,t.clipRegion),(e.length||Object.keys(r).length)&&(Object.assign(i,r),o.push(i)),t!==this._svgInstance){const e={},[i]=fc(t.element,t.transforms,true),r=Ic(t,"animate");if((Il.asG(t)||Il.asUseSymbol(t))&&ql(t.clipPath)&&this.createClipPath(t,a,t.clipPath)&&(e.name=r),this.queueAnimations(t,r,t=>Il.asAnimateTransform(t))&&(e.name=r),Object.keys(e).length&&(Object.assign(n,e),o.push(n)),i.length){let e=[];i.forEach(t=>{o.push(hc(t)),e=e.concat(t)}),t.transformed=e.reverse()}}return o}createPath(t,e){var a,i;const n=this.options.floatPrecisionValue,o={name:t.name},r=[],s=[],l={},c=Ic(t,"group"),h=function(t){let e=parseFloat(t.opacity),a=t.parent;while(a){const t=parseFloat(a.opacity||"1");!isNaN(t)&&t<1&&(e*=t),a=a.parent}return e}(t),d=Il.asUse(t);if(Il.asUse(t)&&ql(t.clipPath)&&this.createClipPath(t,s,t.clipPath),ql(e.clipPath)){const t=new Ll(e.element);t.build({exclude:this.options.transformExclude,residual:uc,precision:n}),t.synchronize({keyTimeMode:this._synchronizeMode,precision:n}),this.createClipPath(t,s,e.clipPath)}this.queueAnimations(t,c,t=>Il.isAnimateTransform(t),"",t.name)?l.name=c:s.length&&(l.name=""),!Il.asUse(t)||0===t.x&&0===t.y||(l.translateX=t.x.toString(),l.translateY=t.y.toString()),s.length&&(l["clip-path"]=s),Object.keys(l).length&&r.push(l),null===(a=e.transformResidual)||void 0===a||a.forEach(t=>r.push(hc(t))),oc.forEach(a=>{let i=d&&t[a]||e[a];if(i){switch(a){case"name":break;case"value":a="pathData";break;case"fill":if(a="fillColor","none"===i||o["aapt:attr"])return;{const t=B.addColor(i);""!==t&&(i="@color/"+t)}break;case"stroke":if(a="strokeColor","none"===i)return;{const t=B.addColor(i);""!==t&&(i="@color/"+t)}break;case"fillPattern":{const t=this._svgInstance.definitions.gradient.get(i);let r=false;if(t)switch(e.element.tagName){case"path":if(!/[zZ]\s*$/.test(e.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const a=function(t,e,a){const{colorStops:i,type:n}=t,o={type:n,item:ms(i,a),positioning:false};switch(n){case"radial":{const{cxAsString:a,cyAsString:i,rAsString:n,spreadMethod:r}=t,s=e.element;let l,c,h,d,u=[];switch(s.tagName){case"path":Il.getPathCommands(e.value).forEach(t=>u=u.concat(t.value));case"polygon":if(tc.polygon(s)&&(u=u.concat(Il.clonePoints(s.points))),!u.length)return;[l,c,h,d]=Il.minMaxPoints(u),h-=l,d-=c;break;default:if(tc.rect(s))l=s.x.baseVal.value,c=s.y.baseVal.value,h=s.width.baseVal.value,d=s.height.baseVal.value;else if(tc.circle(s))h=s.r.baseVal.value,l=s.cx.baseVal.value-h,c=s.cy.baseVal.value-h,h*=2,d=h;else{if(!tc.ellipse(s))return;h=s.rx.baseVal.value,d=s.ry.baseVal.value,l=s.cx.baseVal.value-h,c=s.cy.baseVal.value-d,h*=2,d*=2}}o.centerX=(l+h*Rc(a)).toString(),o.centerY=(c+d*Rc(i)).toString(),o.gradientRadius=((h+d)/2*(Ml(n)?parseFloat(n)/100:1)).toString(),r&&(o.tileMode=vc(r));break}case"linear":{const{x1:e,y1:a,x2:i,y2:n,spreadMethod:r}=t;o.startX=e.toString(),o.startY=a.toString(),o.endX=i.toString(),o.endY=n.toString(),r&&(o.tileMode=vc(r))}}return o}(t,e,n);a&&(i={name:"android:fillColor",gradient:a},r=true);break}}if(!r)return;a="aapt:attr",o.fillColor="",this._namespaceAapt=true;break}case"fillRule":if("evenodd"!==i)return;a="fillType",i="evenOdd";break;case"strokeWidth":if("0"===i)return;break;case"fillOpacity":case"strokeOpacity":if(i=((Ul(i)?parseFloat(i):1)*h).toString(),"1"===i)return;a="fillOpacity"===a?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===i)return;a="strokeLineCap";break;case"strokeLinejoin":if("miter"===i)return;a="strokeLineJoin";break;case"strokeMiterlimit":if("4"===i)return;a="strokeMiterLimit";break;default:return}o[a]=i}}),o.strokeWidth?o.strokeColor||(o.strokeWidth=""):o.strokeColor="";const u=new Map,f=[],p=[],g=e.value;let m=g,y=0;t.animations.forEach(t=>{if(Il.asAnimateTransform(t)&&!t.additiveSum&&t.transformFrom){let e=Math.max(0,t.delay-1);u.set(e,{index:y,time:e,to:t.transformFrom,reset:false,animate:t}),-1!==t.iterationCount&&t.fillReplace&&(e=t.delay+t.iterationCount*t.duration,u.has(e)||u.set(e,{index:y,time:e,to:g,reset:true})),y++}});const b=Array.from(u.values()).sort((t,e)=>t.time<e.time?-1:1),T=b.length;for(let t=0;t<T;++t){const e=b[t];if(!e.reset||e.to!==m){let a=true;if(e.reset)t:{let i=0;while(i<t){const n=b[i++];if(!n.reset){let i=t+1;while(i<T)switch(b[i++].index){case n.index:a=false;case e.index:break t}}}}else{const a=[],n=new Set;let o=0;while(o<t){const t=b[o++];a[t.index]=a[t.index]?2:1}const r=a.length;for(o=0;o<r;++o)if(1===a[o]){const t=null===(i=b.find(t=>t.index===o&&"animate"in t))||void 0===i?void 0:i.animate;t&&n.add(t.type)}n.forEach(t=>{const a=bc(t);if(a){const i=ec.typeAsValue(t).split(" "),n=i.length;o=0;while(o<n)f.push(mc(a[o],e.time,i[o++],""))}})}a&&(p.push(mc("d",e.time,e.to)),m=e.to)}}this.queueAnimations(t,o.name,t=>(Il.asAnimate(t)||Il.asSet(t))&&"clip-path"!==t.attributeName,g)||0!==p.length||l.name===c||(o.name="");const E=this._animateData;if(f.length){const t=E.get(c);t&&(t.animate=t.animate.concat(f))}if(p.length){const e=E.get(o.name);e?e.animate=e.animate.concat(p):E.set(o.name,{element:t.element,animate:p,pathData:g})}return[o,r]}createClipPath(t,e,a){const{transformExclude:i,floatPrecisionValue:n}=this.options,o=this._svgInstance.definitions,r=this._synchronizeMode;let s=0;return a.split(";").forEach((a,l,c)=>{if("#"===a.charAt(0)){const t=o.clipPath.get(a);if(t){const a=new Rl(t);a.build({exclude:i,residual:uc,precision:n}),a.synchronize({keyTimeMode:r,precision:n}),a.each(t=>{const a=t.path;if(a){const i=a.value;if(i){let a=Ic(t,"clip_path",c.length>1?l+1:-1);this.queueAnimations(t,a,t=>Il.asAnimate(t)||Il.asSet(t),i)||(a=""),e.push({name:a,pathData:i})}}})}s++}else{let i=Ic(t,"clip_path",c.length>1?l+1:-1);this.queueAnimations(t,i,t=>(Il.asAnimate(t)||Il.asSet(t))&&"clip-path"===t.attributeName,a)||(i=""),e.push({name:i,pathData:a}),s++}}),s>0}queueAnimations(t,e,a,i="",n){if(t.animations.length){const o=t.animations.filter((t,e,i)=>!t.paused&&(t.duration>=0||t.setterType)&&a(t,e,i));if(o.length){const a=t.element;return this._animateData.set(e,{element:a,animate:o,pathData:i}),n&&this._animateTarget.set(n,{element:a,animate:o,pathData:i}),true}}return false}}const Oc={builtInExtensions:["android.delegate.background","android.delegate.negative-x","android.delegate.positive-x","android.delegate.max-width-height","android.delegate.percent","android.delegate.css-grid","android.delegate.scrollbar","android.delegate.radiogroup","squared.accessibility","squared.relative","squared.css-grid","squared.flexbox","squared.table","squared.column","squared.list","squared.verticalalign","squared.grid","squared.sprite","squared.whitespace","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.data","android.resource.includes"],targetAPI:29,resolutionDPI:160,resolutionScreenWidth:1280,resolutionScreenHeight:900,framesPerSecond:60,supportRTL:true,preloadImages:true,compressImages:false,convertImages:"",supportNegativeLeftTop:true,exclusionsDisabled:false,customizationsOverwritePrivilege:true,showAttributes:true,createQuerySelectorMap:false,convertPixels:"dp",insertSpaces:4,autoCloseOnWrite:true,showErrorMessages:true,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputMainFileName:"activity_main.xml",outputDirectory:"app/src/main",outputEmptyCopyDirectory:false,outputArchiveName:"android-xml",outputArchiveFormat:"zip"},kc=squared.base.lib;let Dc,Mc,Wc,Bc=false;function Xc(t,e,a){return Object.assign(Object.assign({},t),{directory:e,filename:a})}const Gc=t=>Bc&&(t.closed||!(!Bc||Dc.initializing||Dc.closed||!Dc.userSettings.autoCloseOnWrite)&&(Dc.finalize(),true)),Hc={base:{ExtensionManager:va,Controller:Aa,File:Ka,Resource:B,View:de},extensions:{Accessibility:Ja,Column:fi,CssGrid:qi,External:Yi,Flexbox:pn,Grid:xn,List:Mn,Relative:Bn,Sprite:jn,Substitute:Jn,Table:ho,VerticalAlign:po,WhiteSpace:go,constraint:{Guideline:Ao},delegate:{Background:Xo,CssGrid:Yo,MaxWidthHeight:$o,NegativeX:er,Percent:pr,PositiveX:lr,RadioGroup:vr,ScrollBar:Rr},resource:{Background:bs,Data:Es,Dimens:Os,Fonts:el,Includes:il,Strings:pl,Styles:Sl,Svg:Pc}},lib:{constant:p,customization:F,enumeration:a,util:lt},system:{customize(t,e,a){if(H[t]){const i=H[t].assign;return i[e]?Object.assign(i[e],a):i[e]=a,i[e]}},addXmlNs(t,e){h[t]=e},copyLayoutAllXml(t,e){Gc(Dc)&&Mc.layoutAllToXml(Dc.layouts,Xc(e,t))},copyResourceAllXml(t,e){Gc(Dc)&&Mc.resourceAllToXml(Xc(e,t))},copyResourceStringXml(t,e){Gc(Dc)&&Mc.resourceStringToXml(Xc(e,t))},copyResourceArrayXml(t,e){Gc(Dc)&&Mc.resourceStringArrayToXml(Xc(e,t))},copyResourceFontXml(t,e){Gc(Dc)&&Mc.resourceFontToXml(Xc(e,t))},copyResourceColorXml(t,e){Gc(Dc)&&Mc.resourceColorToXml(Xc(e,t))},copyResourceStyleXml(t,e){Gc(Dc)&&Mc.resourceStyleToXml(Xc(e,t))},copyResourceDimenXml(t,e){Gc(Dc)&&Mc.resourceDimenToXml(Xc(e,t))},copyResourceDrawableXml(t,e){Gc(Dc)&&Mc.resourceDrawableToXml(Xc(e,t))},copyResourceAnimXml(t,e){Gc(Dc)&&Mc.resourceAnimToXml(Xc(e,t))},copyResourceDrawableImage(t,e){Gc(Dc)&&Mc.resourceDrawableImageToString(Xc(e,t))},copyResourceRawVideo(t,e){Gc(Dc)&&Mc.resourceRawVideoToString(Xc(e,t))},copyResourceRawAudio(t,e){Gc(Dc)&&Mc.resourceRawAudioToString(Xc(e,t))},saveLayoutAllXml(t,e){Gc(Dc)&&Mc.layoutAllToXml(Dc.layouts,Xc(e,void 0,t||Wc.outputArchiveName+"-layouts"))},saveResourceAllXml(t,e){Gc(Dc)&&Mc.resourceAllToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-resources"))},saveResourceStringXml(t,e){Gc(Dc)&&Mc.resourceStringToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-string"))},saveResourceArrayXml(t,e){Gc(Dc)&&Mc.resourceStringArrayToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-array"))},saveResourceFontXml(t,e){Gc(Dc)&&Mc.resourceFontToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-font"))},saveResourceColorXml(t,e){Gc(Dc)&&Mc.resourceColorToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-color"))},saveResourceStyleXml(t,e){Gc(Dc)&&Mc.resourceStyleToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-style"))},saveResourceDimenXml(t,e){Gc(Dc)&&Mc.resourceDimenToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-dimen"))},saveResourceDrawableXml(t,e){Gc(Dc)&&Mc.resourceDrawableToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-drawable"))},saveResourceAnimXml(t,e){Gc(Dc)&&Mc.resourceAnimToXml(Xc(e,void 0,t||Wc.outputArchiveName+"-anim"))},saveResourceDrawableImage(t,e){Gc(Dc)&&Mc.resourceDrawableImageToString(Xc(e,void 0,t||Wc.outputArchiveName+"-drawable-image"))},saveResourceRawVideo(t,e){Gc(Dc)&&Mc.resourceRawVideoToString(Xc(e,void 0,t||Wc.outputArchiveName+"-raw-video"))},saveResourceRawAudio(t,e){Gc(Dc)&&Mc.resourceRawAudioToString(Xc(e,void 0,t||Wc.outputArchiveName+"-raw-audio"))},writeLayoutAllXml:t=>Gc(Dc)?Mc.layoutAllToXml(Dc.layouts,t):{},writeResourceAllXml:t=>Gc(Dc)?Mc.resourceAllToXml(t):{},writeResourceStringXml:t=>Gc(Dc)?Mc.resourceStringToXml(t):[],writeResourceArrayXml:t=>Gc(Dc)?Mc.resourceStringArrayToXml(t):[],writeResourceFontXml:t=>Gc(Dc)?Mc.resourceFontToXml(t):[],writeResourceColorXml:t=>Gc(Dc)?Mc.resourceColorToXml(t):[],writeResourceStyleXml:t=>Gc(Dc)?Mc.resourceStyleToXml(t):[],writeResourceDimenXml:t=>Gc(Dc)?Mc.resourceDimenToXml(t):[],writeResourceDrawableXml:t=>Gc(Dc)?Mc.resourceDrawableToXml(t):[],writeResourceAnimXml:t=>Gc(Dc)?Mc.resourceAnimToXml(t):[],writeResourceDrawableImage:t=>Gc(Dc)?Mc.resourceDrawableImageToString(t):[],writeResourceRawVideo:t=>Gc(Dc)?Mc.resourceRawVideoToString(t):[],writeResourceRawAudio:t=>Gc(Dc)?Mc.resourceRawAudioToString(t):[]},create(){const e=kc.constant.EXT_NAME,a=i;return Dc=new t(2,de,Aa,B,va),Mc=new Ka,Dc.resourceHandler.setFileHandler(Mc),Wc=Object.assign({},Oc),Object.assign(Dc.builtInExtensions,{[e.TABLE]:new ho(e.TABLE,2,void 0,["TABLE"]),[e.LIST]:new Mn(e.LIST,2,void 0,["DIV","UL","OL","DL"]),[e.GRID]:new xn(e.GRID,2,void 0,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[e.CSS_GRID]:new qi(e.CSS_GRID,2),[e.FLEXBOX]:new pn(e.FLEXBOX,2),[e.COLUMN]:new fi(e.COLUMN,2),[e.SPRITE]:new jn(e.SPRITE,2),[e.ACCESSIBILITY]:new Ja(e.ACCESSIBILITY,2),[e.RELATIVE]:new Bn(e.RELATIVE,2),[e.VERTICAL_ALIGN]:new po(e.VERTICAL_ALIGN,2),[e.WHITESPACE]:new go(e.WHITESPACE,2),[a.EXTERNAL]:new Yi(a.EXTERNAL,2),[a.SUBSTITUTE]:new Jn(a.SUBSTITUTE,2),[a.DELEGATE_BACKGROUND]:new Xo(a.DELEGATE_BACKGROUND,2),[a.DELEGATE_CSS_GRID]:new Yo(a.DELEGATE_CSS_GRID,2),[a.DELEGATE_MAXWIDTHHEIGHT]:new $o(a.DELEGATE_MAXWIDTHHEIGHT,2),[a.DELEGATE_NEGATIVEX]:new er(a.DELEGATE_NEGATIVEX,2),[a.DELEGATE_PERCENT]:new pr(a.DELEGATE_PERCENT,2),[a.DELEGATE_POSITIVEX]:new lr(a.DELEGATE_POSITIVEX,2),[a.DELEGATE_RADIOGROUP]:new vr(a.DELEGATE_RADIOGROUP,2),[a.DELEGATE_SCROLLBAR]:new Rr(a.DELEGATE_SCROLLBAR,2),[a.RESOURCE_BACKGROUND]:new bs(a.RESOURCE_BACKGROUND,2),[a.RESOURCE_DATA]:new Es(a.RESOURCE_DATA,2),[a.RESOURCE_DIMENS]:new Os(a.RESOURCE_DIMENS,2),[a.RESOURCE_FONTS]:new el(a.RESOURCE_FONTS,2),[a.RESOURCE_INCLUDES]:new il(a.RESOURCE_INCLUDES,2),[a.RESOURCE_STRINGS]:new pl(a.RESOURCE_STRINGS,2),[a.RESOURCE_STYLES]:new Sl(a.RESOURCE_STYLES,2),[a.RESOURCE_SVG]:new Pc(a.RESOURCE_SVG,2),[a.CONSTRAINT_GUIDELINE]:new Ao(a.CONSTRAINT_GUIDELINE,2)}),Bc=true,{application:Dc,framework:2,userSettings:Wc}},cached:()=>Bc?{application:Dc,framework:2,userSettings:Wc}:Hc.create()};return Hc}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.bottomnavigation=function(){"use strict";const e=android.lib,{assignEmptyValue:t,iterateArray:n,safeNestedMap:i}=squared.lib.util,{NODE_RESOURCE:a,NODE_TEMPLATE:o}=squared.base.lib.enumeration,{EXT_ANDROID:s,SUPPORT_ANDROID:d,SUPPORT_ANDROID_X:r}=e.constant,{BUILD_ANDROID:u,CONTAINER_NODE:c}=e.enumeration,{createStyleAttribute:l,createViewAttribute:m}=e.util,p=android.base.Resource;class h extends squared.base.ExtensionUI{constructor(e,t,n,i){super(e,t,n,i),this.require("android.widget.menu")}processNode(e,i){const o=m(this.options[e.elementId]);t(o,"android","background","?android:attr/windowBackground"),n(e.children,e=>{e.hide(),e.cascade(e=>(e.hide(),false))},5);const u=e.api<29?d.BOTTOM_NAVIGATION:r.BOTTOM_NAVIGATION;return e.setControlType(u,c.BLOCK),e.exclude({resource:a.ASSET}),e.render(i),e.apply(p.formatOptions(o,this.application.extensionManager.optionValueAsBoolean(s.RESOURCE_STRINGS,"numberResourceValue"))),e.setLayoutWidth("match_parent"),e.setLayoutHeight("wrap_content"),e.cascade(e=>(this.addDescendant(e),false)),this.setStyleTheme(),{output:{type:1,node:e,controlName:u},complete:true,include:true}}postOptimize(e){var n;const a=e.renderParent;a.documentRoot&&(a.inlineWidth&&a.setLayoutWidth("match_parent"),a.inlineHeight&&a.setLayoutHeight("match_parent"));const o=null===(n=h.findNestedElement(e.element,"android.widget.menu"))||void 0===n?void 0:n.dataset.layoutName;if(o){const n=m(this.options[e.elementId]),a=i(n,"app");t(a,"menu","@menu/"+o),e.app("menu",a.menu)}}setStyleTheme(){const e=l(this.options.resource);t(e,"name",this.application.userSettings.manifestThemeName),t(e,"parent","Theme.AppCompat.Light.DarkActionBar"),p.addTheme(e)}}const O=new h("android.widget.bottomnavigation",2);return squared&&squared.include(O),O}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.coordinator=function(){"use strict";const e=android.lib,{getElementAsNode:t}=squared.lib.session,{NODE_RESOURCE:o,NODE_TEMPLATE:i}=squared.base.lib.enumeration,{EXT_ANDROID:n,SUPPORT_ANDROID:s,SUPPORT_ANDROID_X:d}=e.constant,{BUILD_ANDROID:r,CONTAINER_NODE:a}=e.enumeration,{createViewAttribute:u}=e.util,l=android.base.Resource;class c extends squared.base.ExtensionUI{processNode(e,i){var r;const O=this.application.extensionManager,R=u(this.options[e.elementId]);l.formatOptions(R,O.optionValueAsBoolean(n.RESOURCE_STRINGS,"numberResourceValue"));const m=c.findNestedElement(e.element,"android.widget.toolbar");if(m){const o=t(m,e.sessionId);if(o){const t=null===(r=O.retrieve("android.widget.toolbar"))||void 0===r?void 0:r.options[o.elementId];t&&"collapsingToolbar"in t&&e.android("fitsSystemWindows","true")}}const p=e.api<29?s.COORDINATOR:d.COORDINATOR;return e.setControlType(p,a.BLOCK),e.exclude({resource:o.ASSET}),e.render(i),e.renderExclude=false,{output:{type:1,node:e,controlName:p}}}postOptimize(e){e.documentRoot&&(e.inlineWidth&&e.some(t=>!!t.rightAligned&&(e.setLayoutWidth("match_parent",true),true)),e.inlineHeight&&e.some(t=>!!t.bottomAligned&&(e.setLayoutHeight("match_parent",true),true)))}}const O=new c("android.widget.coordinator",2);return squared&&squared.include(O),O}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const e=squared.lib,t=android.lib,{assignEmptyValue:i,cloneObject:n,safeNestedMap:a,includes:o,iterateArray:r}=e.util,{getElementAsNode:s}=e.session,{NODE_RESOURCE:d,NODE_TEMPLATE:u}=squared.base.lib.enumeration,{EXT_ANDROID:l,SUPPORT_ANDROID:c,SUPPORT_ANDROID_X:m}=t.constant,{BUILD_ANDROID:p,CONTAINER_NODE:h}=t.enumeration,{createStyleAttribute:N,createViewAttribute:E}=t.util,g=android.base.Resource;class f extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=true,this.require(l.EXTERNAL,true),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){if(r(e.children,e=>{if("NAV"===e.tagName){const t=e.dataset.use;o(t,l.EXTERNAL)||(e.dataset.use=(t?t+", ":"")+l.EXTERNAL)}}))return this.application.rootElements.add(e),true}return false}processNode(e,t){const n=E(this.options.self);if(f.findNestedElement(e.element,"android.widget.menu"))i(n,"android","fitsSystemWindows","true"),this.setStyleTheme(e.api);else{const t=E(this.options.navigationView);i(t,"android","layout_gravity",e.localizeString("left"));const n=e.item();n.mergeGravity("layout_gravity",t.android.layout_gravity),n.setLayoutHeight("match_parent"),n.positioned=true}e.documentRoot=true,e.renderExclude=false;const a=e.api<29?c.DRAWER:m.DRAWER;return e.setControlType(a,h.BLOCK),e.exclude({resource:d.FONT_STYLE}),e.apply(g.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(l.RESOURCE_STRINGS,"numberResourceValue"))),e.render(t),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:a},complete:true,include:true,remove:true}}afterParseDocument(){var e,t;for(const n of this.subscribers){const o=n.element,r=E(this.options.navigationView),s=null===(e=f.findNestedElement(o,"android.widget.menu"))||void 0===e?void 0:e.dataset.layoutName,d=null===(t=f.findNestedElement(o,l.EXTERNAL))||void 0===t?void 0:t.dataset.layoutName,u=a(r,"app");if(s&&i(u,"menu","@menu/"+s),d&&i(u,"headerLayout","@layout/"+d),s||d){const e=this.controller;i(r,"android","id",`@+id/${n.controlId}_navigation`),i(r,"android","fitsSystemWindows","true"),i(r,"android","layout_gravity",n.localizeString("left")),e.addAfterInsideTemplate(n.id,e.renderNodeStatic({controlName:n.api<29?c.NAVIGATION_VIEW:m.NAVIGATION_VIEW,width:"wrap_content",height:"match_parent"},g.formatOptions(r,this.application.extensionManager.optionValueAsBoolean(l.RESOURCE_STRINGS,"numberResourceValue"))))}}}postOptimize(e){const t=f.findNestedElement(e.element,"android.widget.coordinator");if(t){const i=s(t,e.sessionId);(null==i?void 0:i.inlineHeight)&&i.some(e=>e.positioned)&&i.setLayoutHeight("match_parent")}}setStyleTheme(e){const t=this.application.userSettings,a=N(this.options.resource);if(i(a,"name",t.manifestThemeName),i(a,"parent",t.manifestParentThemeName),i(a.items,"android:windowTranslucentStatus","true"),g.addTheme(a),e>=21){const e=N(n(a)),t={};i(e.output,"path","res/values-v21"),i(t,"android:windowDrawsSystemBarBackgrounds","true"),i(t,"android:statusBarColor","@android:color/transparent"),e.items=t,g.addTheme(e)}}}const y=new f("android.widget.drawer",2);return squared&&squared.include(y),y}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.floatingactionbutton=function(){"use strict";const t=squared.lib,e=android.lib,{parseColor:o}=t.color,{assignEmptyValue:a,safeNestedMap:r}=t.util,{BOX_STANDARD:i,NODE_PROCEDURE:n,NODE_RESOURCE:l,NODE_TEMPLATE:d}=squared.base.lib.enumeration,{adjustAbsolutePaddingOffset:s,createViewAttribute:c,getHorizontalBias:g,getVerticalBias:u}=e.util,{EXT_ANDROID:y,SUPPORT_ANDROID:m,SUPPORT_ANDROID_X:p}=e.constant,{BUILD_ANDROID:_,CONTAINER_NODE:T}=e.enumeration,N=android.base.Resource,b=["button","file","image","reset","search","submit"];class v extends squared.base.ExtensionUI{is(t){const e=t.element;return super.is(t)&&("INPUT"!==e.tagName||b.includes(e.type))}condition(t){return this.included(t.element)}processNode(t,e){const i=this.resource,d=t.element,_=t.dataset.target,b=c(this.options[d.id]),v=N.addColor(o(t.css("backgroundColor"),t.toFloat("opacity",1)));a(b,"android","backgroundTint",""!==v?"@color/"+v:"?attr/colorAccent"),t.hasProcedure(n.ACCESSIBILITY)||a(b,"android","focusable","false");let O="";switch(d.tagName){case"IMG":O=i.addImageSrc(d,"ic_dialog_");break;case"INPUT":if("image"===d.type){O=i.addImageSrc(d,"ic_dialog_");break}case"BUTTON":O=i.addImageSrc(t.backgroundImage,"ic_dialog_")}""!==O&&a(r(b,"app"),"srcCompat","@drawable/"+O);const f=t.api<29?m.FLOATING_ACTION_BUTTON:p.FLOATING_ACTION_BUTTON;t.setControlType(f,T.BUTTON),t.exclude({resource:l.BOX_STYLE|l.ASSET}),N.formatOptions(b,this.application.extensionManager.optionValueAsBoolean(y.RESOURCE_STRINGS,"numberResourceValue"));let h=this.application.resolveTarget(_);if(t.pageFlow){if(_){const e=g(t),o=u(t),a=t.documentParent;e<.5?(t.mergeGravity("layout_gravity",t.localizeString("left")),t.modifyBox(16,t.linear.left-a.box.left)):e>.5?(t.mergeGravity("layout_gravity",t.localizeString("right")),t.modifyBox(4,a.box.right-t.linear.right)):t.mergeGravity("layout_gravity","center_horizontal"),o<.5?(t.app("layout_dodgeInsetEdges","top"),t.mergeGravity("layout_gravity","top"),t.modifyBox(2,t.linear.top-a.box.top)):o>.5?(t.mergeGravity("layout_gravity","bottom"),t.modifyBox(8,a.box.bottom-t.linear.bottom)):t.mergeGravity("layout_gravity","center_vertical"),t.positioned=true}}else{const{leftRight:o,topBottom:a}=t.autoMargin,r=h||e;o?t.mergeGravity("layout_gravity","center_horizontal"):t.hasPX("left")?(t.mergeGravity("layout_gravity",t.localizeString("left")),t.modifyBox(16,s(r,256,t.left))):t.hasPX("right")&&(t.mergeGravity("layout_gravity",t.localizeString("right")),t.modifyBox(4,s(r,64,t.right))),a?t.mergeGravity("layout_gravity","center_vertical"):t.hasPX("top")?(t.app("layout_dodgeInsetEdges","top"),t.mergeGravity("layout_gravity","top"),t.modifyBox(2,s(r,32,t.top))):t.hasPX("bottom")&&(t.mergeGravity("layout_gravity","bottom"),t.modifyBox(8,s(r,128,t.bottom))),t.positioned=true}if(_){const o=t.android("layout_gravity");let a=e.documentId;if(e.controlName===(t.api<29?m.TOOLBAR:p.TOOLBAR)){const t=e.data("android.widget.toolbar","outerParent");t&&(a=t)}""!==o&&(t.app("layout_anchorGravity",o),t.delete("android","layout_gravity")),t.app("layout_anchor",a),t.exclude({procedure:n.ALIGNMENT}),t.render(h)}else t.render(e),h=void 0;return t.apply(b),{outerParent:h,output:{type:1,node:t,controlName:f},complete:true}}}const O=new v("android.widget.floatingactionbutton",2,["BUTTON","INPUT","IMG"]);return squared&&squared.include(O),O}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.menu=function(){"use strict";const e=android.lib,{appendSeparator:t,isNumber:n,sameArray:a,safeNestedMap:r}=squared.lib.util,{NODE_ALIGNMENT:i,NODE_PROCEDURE:o,NODE_RESOURCE:s,NODE_TEMPLATE:c}=squared.base.lib.enumeration,{EXT_ANDROID:d}=e.constant,{CONTAINER_NODE:l}=e.enumeration,{createViewAttribute:u}=e.util,m=android.base.Resource,h={id:/^@\+id\/\w+$/,title:/^.+$/,titleCondensed:/^.+$/,icon:/^@drawable\/.+$/,onClick:/^.+$/,showAsAction:/^(ifRoom|never|withText|always|collapseActionView)$/,actionLayout:/^@layout\/.+$/,actionViewClass:/^.+$/,actionProviderClass:/^.+$/,alphabeticShortcut:/^[a-zA-Z]+$/,alphabeticModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,numericShortcut:/^\d+$/,numericModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,checkable:/^(true|false)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^\d+$/},p={id:/^@\+id\/\w+$/,checkableBehavior:/^(none|all|single)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^\d+$/},N=["showAsAction","actionViewClass","actionProviderClass"],f="menu",g="item",A="group";function E(e,t,n){const a=t.dataset;for(const t in a){const i=e[t];if(i){const e=a[t];if(e){const a=i.exec(e);a&&(r(n,N.includes(t)?"app":"android")[t]=Array.from(new Set(a)).join("|"))}}}}function b(e,t){const n=t.title;if(n)return n;for(const t of e.naturalChildren)if(t.textElement)return t.textContent.trim();return""}const C=(e,t)=>e.some(e=>e.toElementString("type")===t);class y extends squared.base.ExtensionUI{constructor(e,t,n,a){super(e,t,n,a),this.cascadeAll=true,this.require(d.EXTERNAL,true)}init(e){if(this.included(e)&&e.childElementCount){if(!a(e.children,e=>e.tagName))return false;const t=this.application;let n=e.parentElement;while(n){if("NAV"===n.tagName&&t.rootElements.has(n))return false;n=n.parentElement}t.rootElements.add(e)}return false}condition(e){return this.included(e.element)}processNode(e,n){const a=this.application.createNode({parent:n,append:false});return a.childIndex=e.childIndex,a.actualParent=n.actualParent,e.documentRoot=true,e.setControlType(f,l.INLINE),e.addAlign(4),e.exclude({resource:s.ALL,procedure:o.ALL}),e.render(a),e.cascade(e=>(this.addDescendant(e),false)),e.dataset.pathname=t(this.controller.userSettings.outputDirectory,"res/menu"),{output:{type:1,node:e,controlName:f},outerParent:a,complete:true}}processChild(e,t){if(e.plainText)return e.hide(),{next:true};const a=u(),r=a.android,i=e.element;let c,N;switch("NAV"===e.tagName?(c=f,N=b(e,i)):e.some(e=>e.length>0)?(e.some(e=>"NAV"===e.tagName)?c=g:(c=A,e.every(e=>C(e,"radio"))?r.checkableBehavior="single":e.every(e=>C(e,"checkbox"))&&(r.checkableBehavior="all")),N=b(e,i)):(c=g,N=(i.title||i.innerText).trim(),C(e,"checkbox")&&!t.android("checkableBehavior")&&(r.checkable="true")),c){case f:e.addAlign(4);break;case A:e.addAlign(4),E(p,i,a);break;case g:if(E(h,i,a),!r.icon){const t=this.resource;let n=t.addImageSrc(e.backgroundImage,"ic_menu_");if(""!==n)r.icon="@drawable/"+n;else{const a=e.find(e=>e.imageElement);a&&(n=t.addImageSrc(a.element,"ic_menu_"),""!==n&&(r.icon="@drawable/"+n))}}e.each(e=>"NAV"!==e.tagName&&e.hide())}if(""!==N){const e=this.application.extensionManager.optionValueAsBoolean(d.RESOURCE_STRINGS,"numberResourceValue"),t=m.addString(N,"",e);r.title=e||!n(t)?"@string/"+t:N}return e.setControlType(c,l.INLINE),e.exclude({resource:s.ALL,procedure:o.ALL}),e.render(t),e.apply(a),{output:{type:1,node:e,controlName:c},complete:true,next:c===f}}}const T=new y("android.widget.menu",2,["NAV"]);return squared&&squared.include(T),T}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.toolbar=function(){"use strict";const e=squared.lib,t=android.lib,{formatPX:a}=e.css,{getElementAsNode:o}=e.session,{assignEmptyValue:r,safeNestedMap:n,includes:d,isString:i,iterateArray:s}=e.util,{NODE_PROCEDURE:l,NODE_RESOURCE:c,NODE_TEMPLATE:p}=squared.base.lib.enumeration,{CONTAINER_ANDROID:u,EXT_ANDROID:m,SUPPORT_ANDROID:h,SUPPORT_ANDROID_X:g}=t.constant,{BUILD_ANDROID:O,CONTAINER_NODE:y}=t.enumeration,{createStyleAttribute:f,createViewAttribute:I,getDocumentId:T}=t.util,A=android.base.Resource;class b extends squared.base.ExtensionUI{constructor(e,t,a,o){super(e,t,a,o),this.require("android.widget.menu")}init(e){if(this.included(e)){s(e.children,e=>{if("NAV"===e.tagName){const t=e.dataset.use;if(!d(t,m.EXTERNAL))return e.dataset.use=(t?t+", ":"")+m.EXTERNAL,true}});const t=e.dataset.target;if(t){const a=document.getElementById(t);a&&e.parentElement!==a&&!d(a.dataset.use,"android.widget.coordinator")&&this.application.rootElements.add(e)}}return false}processNode(e,t){const d=this.application,p=this.resource,O=d.userSettings,f=e.element,N=e.dataset.target,_=Object.assign({},this.options[f.id]),E=I(_.self),w=I(_.appBar),L=I(_.collapsingToolbar),B=d.extensionManager.optionValueAsBoolean(m.RESOURCE_STRINGS,"numberResourceValue"),R=b.findNestedElement(f,"android.widget.menu"),S=e.has("backgroundImage"),P=[],v=[];let C=n(E,"app");s(f.children,t=>{const a=t.dataset;if("IMG"===t.tagName){if(a.navigationIcon){const e=p.addImageSrc(t,"ic_menu_");""!==e&&r(C,"navigationIcon","@drawable/"+e)}if(a.collapseIcon){const e=p.addImageSrc(t,"ic_menu_");""!==e&&r(C,"collapseIcon","@drawable/"+e)}}if(!a.target){const r=o(t,e.sessionId);if(r)switch(a.targetModule){case"appBar":P.push(r);break;case"collapsingToolbar":v.push(r)}}});const[D,k,x]=e.api<29?[h.TOOLBAR,h.APPBAR,h.COLLAPSING_TOOLBAR]:[g.TOOLBAR,g.APPBAR,g.COLLAPSING_TOOLBAR],M="collapsingToolbar"in _||v.length>0,U="appBar"in _||P.length>0||M;let V,W,X,q="",G="";if(M?r(C,"layout_collapseMode","pin"):(r(C,"popupTheme","@style/ThemeOverlay.AppCompat.Light"),S||r(C,"layout_scrollFlags","scroll|enterAlways")),U){if(R){const e=C.popupTheme;e&&(G=e.replace("@style/","")),C.popupTheme=`@style/${O.manifestThemeName}.PopupOverlay`}}else e.exclude({procedure:l.LAYOUT}),r(E,"android","fitsSystemWindows","true");if(r(E,"android","layout_height",U||!e.hasPX("height")?"?android:attr/actionBarSize":""),e.setControlType(D,y.BLOCK),e.exclude({resource:c.FONT_STYLE}),U){let o=w.android;r(w,"android","id",`@+id/${e.controlId}_appbar`),r(w,"android","layout_height",e.hasHeight?a(e.actualHeight):"wrap_content"),r(w,"android","fitsSystemWindows","true"),R?(o.theme&&(q=o.theme),o.theme=`@style/${O.manifestThemeName}.AppBarOverlay`,e.data("android.widget.toolbar","themeData",{appBarOverlay:q,popupOverlay:G})):r(w,"android","theme","@style/ThemeOverlay.AppCompat.Dark.ActionBar"),V=this.createPlaceholder(e,P,N),V.parent=t;let d=o.id;if(i(d)&&(V.controlId=T(d),delete o.id),V.setControlType(k,y.BLOCK),M&&(C=n(L,"app"),r(L,"android","id",`@+id/${e.controlId}_collapsingtoolbar`),r(L,"android","fitsSystemWindows","true"),S||r(C,"contentScrim","?attr/colorPrimary"),r(C,"layout_scrollFlags","scroll|exitUntilCollapsed"),r(C,"toolbarId",e.documentId),W=this.createPlaceholder(e,v,N),W)){W.parent=V,o=L.android,d=o.id,d&&(V.controlId=T(d),delete o.id),W.setControlType(x,y.BLOCK);const e=W.controlId;W.each(t=>t.dataset.target=e)}}if(V){if(V.setLayoutWidth("match_parent"),V.setLayoutHeight("wrap_content"),V.apply(A.formatOptions(w,B)),V.render(N?d.resolveTarget(N):t),X={type:1,node:V,controlName:k},W){if(e.parent=W,W.apply(A.formatOptions(L,B)),W.render(V),W.setLayoutWidth("match_parent"),W.setLayoutHeight("match_parent"),d.addLayoutTemplate(W.renderParent,W,{type:1,node:W,controlName:x}),S){const t=p.addImageSrc(e.backgroundImage);if(""!==t){const a=this.controller,o=I(_.backgroundImage);let d;switch(e.css("backgroundSize")){case"cover":case"100% auto":case"auto 100%":d="centerCrop";break;case"contain":case"100%":case"100% 100%":d="fitXY";break;case"auto":d="matrix";break;default:d="center"}C=n(o,"app"),r(o,"android","id",`@+id/${e.controlId}_image`),r(o,"android","src","@drawable/"+t),r(o,"android","scaleType",d),r(o,"android","fitsSystemWindows","true"),r(C,"layout_collapseMode","parallax"),a.addBeforeOutsideTemplate(e.id,a.renderNodeStatic({controlName:u.IMAGE,width:"match_parent",height:"match_parent"},A.formatOptions(o,B))),e.setCacheValue("backgroundImage","")}}}else e.parent=V,S&&e.data("android.widget.toolbar","background",V);e.data("android.widget.toolbar","outerParent",V.android("id")||V.documentId),e.render(e.parent)}else e.render(N?d.resolveTarget(N):t);e.setLayoutWidth("match_parent"),e.apply(A.formatOptions(E,B));const $={type:1,node:e,controlName:D};return V?{output:$,outerParent:e.parent,renderAs:V,outputAs:X,include:true}:{output:$,include:true}}processChild(e){if(e.imageElement&&(e.dataset.navigationIcon||e.dataset.collapseIcon))return e.hide(),{next:true}}postOptimize(e){var t,a;const o=null===(t=b.findNestedElement(e.element,"android.widget.menu"))||void 0===t?void 0:t.dataset.layoutName;if(o){const t=I(null===(a=this.options[e.elementId])||void 0===a?void 0:a.self),d=n(t,"app");r(d,"menu","@menu/"+o),e.app("menu",d.menu)}const d=e.data("android.widget.toolbar","themeData");if(d){const e=this.application.userSettings,t=f(this.options.resource),a=f({name:".NoActionBar",output:t.output}),o=f({name:".AppBarOverlay",output:t.output}),n=f({name:".PopupOverlay",output:t.output}),i=a.items;r(t,"name",e.manifestThemeName),r(t,"parent","Theme.AppCompat.Light.DarkActionBar"),r(i,"windowActionBar","false"),r(i,"windowNoTitle","true"),r(o,"parent",d.appBarOverlay||"ThemeOverlay.AppCompat.Dark.ActionBar"),r(n,"parent",d.popupOverlay||"ThemeOverlay.AppCompat.Light"),A.addTheme(t),A.addTheme(a),A.addTheme(o),A.addTheme(n)}const i=e.data("android.widget.toolbar","background");if(i){const t=e.android("background");""!==t&&(i.android("background",t),e.delete("android","background"))}}createPlaceholder(e,t,a){const o=t.length>0,r=this.application.createNode({parent:e,children:t,delegate:o,cascade:true});if(r.inherit(e,"base"),o){let e=Number.POSITIVE_INFINITY;t.forEach(t=>e=Math.min(e,t.containerIndex)),r.containerIndex=e}return a&&(r.dataset.target=a),r.exclude({resource:c.ALL}),r.positioned=true,r.renderExclude=false,r}}const N=new b("android.widget.toolbar",2);return squared&&squared.include(N),N}();
