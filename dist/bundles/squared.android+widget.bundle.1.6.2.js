!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).squared={})}(this,(function(e){"use strict";const t="-?(?:\\d+(?:\\.\\d+)?|\\d*\\.\\d+)",r="px|em|pt|rem|ch|pc|vw|vh|vmin|vmax|mm|cm|in",n={DECIMAL:t,PERCENT:"-?\\d+(?:\\.\\d+)?%",LENGTH:`(${t})(${r})?`,LENGTH_PERCENTAGE:`(${t}(?:${r}|%)?)`,UNIT_LENGTH:r,DATAURI:"(?:data:([^,]+),)?(.*?)",CSS_SELECTOR_LABEL:"[\\.#]?[\\w\\-]+",CSS_SELECTOR_PSEUDO_ELEMENT:"::[\\w\\-]+",CSS_SELECTOR_PSEUDO_CLASS:":[\\w\\-]+(?:\\(\\s*([^()]+)\\s*\\)|\\(\\s*([\\w\\-]+\\(.+?\\))\\s*\\))?",CSS_SELECTOR_ATTR:"\\[((?:\\*\\|)?(?:\\w+\\\\:)?[\\w\\-]+)(?:([~^$*|])?=(?:\"([^\"]+)\"|'([^']+)'|([^\\s\\]]+))\\s*(i)?)?\\]",CSS_ANGLE:`(${t})(deg|rad|turn|grad)`,CSS_TIME:`(${t})(s|ms)`,CSS_CALC:"calc\\((.+)\\)"},i={DECIMAL:new RegExp(`^${n.DECIMAL}$`),LENGTH:new RegExp(`^${n.LENGTH}$`),PERCENT:new RegExp(`^${n.PERCENT}$`),LENGTH_PERCENTAGE:new RegExp(`^${n.LENGTH_PERCENTAGE}$`)},s={PX:/\dpx$/,ANGLE:new RegExp(`^${n.CSS_ANGLE}$`),TIME:new RegExp(`^${n.CSS_TIME}$`),CALC:new RegExp(`^${n.CSS_CALC}$`),VAR:/var\((--[A-Za-z\d-]+)\s*(?!,\s*var\()(?:,\s*([a-z-]+\([^)]+\)|[^)]+))?\)/,URL:/^url\((?:"(.+)"|(.+))\)$/,CUSTOM_PROPERTY:/^\s*var\(.+\)\s*$/,HEX:/[A-Za-z\d]{3,8}/,RGBA:/rgba?\((\d+),\s+(\d+),\s+(\d+)(?:,\s+([\d.]+))?\)/,HSLA:/hsla?\((\d+),\s+(\d+)%,\s+(\d+)%(?:,\s+([\d.]+))?\)/,SELECTOR_G:new RegExp(`\\s*((?:${n.CSS_SELECTOR_ATTR}|${n.CSS_SELECTOR_PSEUDO_CLASS}|${n.CSS_SELECTOR_PSEUDO_ELEMENT}|${n.CSS_SELECTOR_LABEL})+|[>~+*])\\s*`,"g"),SELECTOR_LABEL:new RegExp(n.CSS_SELECTOR_LABEL),SELECTOR_PSEUDO_ELEMENT:new RegExp(n.CSS_SELECTOR_PSEUDO_ELEMENT),SELECTOR_PSEUDO_CLASS:new RegExp(n.CSS_SELECTOR_PSEUDO_CLASS),SELECTOR_ATTR:new RegExp(n.CSS_SELECTOR_ATTR)},a={ATTRIBUTE:/([^\s]+)="([^"]+)"/,ENTITY:/&#?[A-Za-z\d]+;/,SEPARATOR:/\s*,\s*/,DELIMITER:/\s*;\s*/,BREAKWORD_G:/([A-Za-z\d]+|&#?[A-Za-z\d]+;)/g,NONWORD_G:/[^A-Za-z\d]+/g,TAGNAME_G:/(<([^>]+)>)/g},l={SPACE:/\s+/,LEADINGSPACE:/^\s+/,TRAILINGSPACE:/\s+$/,TRAILINGZERO:/\.(\d*?)(0+)$/,LEADINGNEWLINE:/^\s*\n+/,LEADINGNUMBER:/^\d/,LOWERCASE:/^[a-z]+$/,WORD:/\w/,UNITZERO:/^\s*0[a-z]*\s*$/,WORDDASH:/[a-zA-Z\d]/},o={PROTOCOL:/^([A-Za-z]{3,}:\/\/)([A-Za-z\d\-.]+)(:\d+)?(\/.*)?$/},c={ENTITY:/&#(\d+);/g,NONENTITY:/&(?!#?[A-Za-z\d]{2,};)/g};var u=Object.freeze({__proto__:null,STRING:n,FILE:{NAME:/[/\\]?(([^/\\]+?)\.([^/\\]+?))$/,SVG:/\.svg$/i},UNIT:i,CSS:s,XML:a,CHAR:l,COMPONENT:o,ESCAPE:c});const h=[8,4,4,4,12],f="ABCDEFGHIJKLMNOPQRSTUVWXYZ",g=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],d={},p={};function b(e){switch(L(e.trim(),".").toLowerCase()){case"aac":return"audio/aac";case"abw":return"application/x-abiword";case"apng":return"image/apng";case"arc":return"application/x-freearc";case"avi":return"video/x-msvideo";case"azw":return"application/vnd.amazon.ebook";case"bin":return"application/octet-stream";case"bmp":return"image/bmp";case"bz":return"application/x-bzip";case"bz2":return"application/x-bzip2";case"csh":return"application/x-csh";case"css":return"text/css";case"csv":return"text/csv";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"eot":case"embedded-opentype":return"application/vnd.ms-fontobject";case"epub":return"application/epub+zip";case"flac":return"audio/flac";case"gif":return"image/gif";case"gsm":return"audio/gsm";case"heic":return"image/heic";case"heif":return"image/heif";case"htm":case"html":return"text/html";case"cur":case"ico":return"image/x-icon";case"ics":return"text/calendar";case"jar":return"application/java-archive";case"jpeg":case"jpg":case"jfif":case"pjpeg":case"pjp":return"image/jpeg";case"js":case"mjs":return"text/javascript";case"json":return"application/json";case"jsonp":return"application/javascript";case"jsonld":return"application/ld+json";case"mid":case"midi":return"audio/midi";case"mkv":return"video/x-matroska";case"mp3":case"mpeg":return"audio/mpeg";case"mp4":return"video/mp4";case"mpkg":return"application/vnd.apple.installer+xml";case"odp":return"application/vnd.oasis.opendocument.presentation";case"ods":return"application/vnd.oasis.opendocument.spreadsheet";case"odt":return"application/vnd.oasis.opendocument.text";case"oga":case"spx":case"ogg":return"audio/ogg";case"ogv":case"ogm":return"video/ogg";case"ogx":return"application/ogg";case"otf":case"opentype":return"font/otf";case"png":return"image/png";case"pdf":return"application/pdf";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"rar":return"application/x-rar-compressed";case"rtf":return"application/rtf";case"sh":return"application/x-sh";case"svg":return"image/svg+xml";case"swf":return"application/x-shockwave-flash";case"tar":return"application/x-tar";case"tif":case"tiff":return"image/tiff";case"ts":return"video/mp2t";case"ttf":case"truetype":return"font/ttf";case"txt":return"text/plain";case"vsd":return"application/vnd.visio";case"wav":return"audio/wav";case"weba":case"webm":return"audio/webm";case"webp":return"image/webp";case"woff":return"font/woff";case"woff2":return"font/woff2";case"xhtml":return"application/xhtml+xml";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xml":return"application/xml";case"xul":return"application/vnd.mozilla.xul+xml";case"zip":return"application/zip";case"3gp":return"video/3gpp";case"3g2":return"video/3gpp2";case"7z":return"application/x-7z-compressed";default:return""}}function m(e,t,r){return 0===t?e.substring(r):e.substring(0,t)+e.substring(t+r)}function E(e,t="-"){let r=e.indexOf(t);if(-1===r)return e;const n=d[e];if(n)return n;let i=e.substring(0,r),s="";const a=e.length;while(r<a){const n=e.charAt(r++);if(n!==t)if(s===t)i+=n.toUpperCase();else i+=n;s=n}return d[e]=i,i}function v(e){return parseFloat(e)||0}function w(e){if(e>=0){let t="";const r=f.length;while(e>=r){const n=Math.floor(e/r);if(n>1&&n<=r)t+=f.charAt(n-1),e-=n*r;else if(n>0)return t+="Z",t+=w(e-=Math.pow(r,2)),t;const i=e%r;t+=f.charAt(i),e-=i+r}return f.charAt(e)+t}return e.toString()}function y(e){const t=e.toString().split("");let r="",n=3;while(n--)r=(g[parseInt(t.pop())+10*n]||"")+r;return"M".repeat(parseInt(t.join("")))+r}function k(e,t,r="",n="(",i=")"){if(r.length>1)return[];if(!S(t))t=n;const s=t!==n,a=s?t+n:n,l=[],o=e=>{e.split(r).forEach(e=>{if(""!==(e=e.trim()))l.push(e)})};let c=0,u=-1;const h=e.length;while(-1!==(u=e.indexOf(a,c))){let a="";if(u!==c){let n=e.substring(c,u);if(r){if(n=n.trim(),""!==n)if(o(n),!s){const r=l[l.length-1];if(e.substring(u-r.length,u+1)===r+t)a=r,l.length--}}else l.push(n)}let f=false;for(let o=u+(s?t.length:0)+1,g=1,d=0;o<h;++o){switch(e.charAt(o)){case n:++g;break;case i:++d;break}if(g===d){if(r){for(;o<h;++o)if(e.charAt(o)===r)break;c=o+1,l.push(a+e.substring(u,o).trim())}else c=o+1,l.push(e.substring(u,c));if(c===h)return l;f=true;break}}if(!f)return[]}if(c<h){const t=e.substring(c);if(r){const e=t.trim();if(""!==e)o(e)}else l.push(t)}return l}function x(e,t){return(e&t)===t}function A(e){return"string"==typeof e&&i.DECIMAL.test(e.trim())}function S(e){return"string"==typeof e&&""!==e.trim()}function R(e){return"object"==typeof e&&null!==e}function F(e){return R(e)&&e.constructor===Object}function T(e,t=[],r=false){return e.forEach(e=>{if(Array.isArray(e))t.push(T(e,[],r));else if(r&&F(e))t.push(C(e,{},true));else t.push(e)}),t}function C(e,t={},r=false){for(const n in e){const i=e[n];if(Array.isArray(i))t[n]=r?T(i,[],true):i;else if(F(i))t[n]=C(i,{},r);else t[n]=i}return t}function N(e,t){if(e=e.trim(),!o.PROTOCOL.test(e)){const r=location.origin;let n=((null==t?void 0:t.replace(r,""))||location.pathname).split("/");if(n.pop(),"/"===e.charAt(0))e=r+e;else if(e.startsWith("../")){const t=[];let i=0;e.split("/").forEach(e=>{if(".."===e)i++;else t.push(e)}),n=n.slice(0,Math.max(n.length-i,0)).concat(t),e=r+n.join("/")}else e=r+n.join("/")+"/"+e}return e}function P(e,t){return e.replace(new RegExp(`^${t}+`),"")}function I(e,t){return e.replace(new RegExp(t+"+$"),"")}function L(e,...t){for(const r of t){const t=e.lastIndexOf(r);if(-1!==t)return e.substring(t+1)}return e}function _(e){return null!=e&&""!==e}function B(e,t,r=1){return t>=e-r&&t<=e+r}function O(e,t){let r=0;for(const n of e)if(t(n,r++,e))return n}function M(e,t){const r=e.length,n=new Array(r),i=new Array(r);let s=0,a=0,l=0;while(s<r){const r=e[s];if(t(r,s++,e))n[a++]=r;else i[l++]=r}return n.length=a,i.length=l,[n,i]}function D(e,t){const r=e.length;if(r){let n,i=0;while(i<r){const r=t(e[i],i,e);if(0==i++)n=r;else if(r!==n)return false}return true}return false}function z(e,t,r="\n",n=true){let i="";const s=e.length;let a=0;while(a<s){const n=t(e[a],a++,e);if(""!==n)i+=n+r}return n?i:i.substring(0,i.length-r.length)}function j(e,t,r=0,n=Number.POSITIVE_INFINITY){r=Math.max(r,0);const i=Math.min(e.length,n);let s=r;while(s<i){if(true===t(e[s],s++,e))return Number.POSITIVE_INFINITY}return i}function $(e,t){const r=e.length,n=new Array(r);let i=0,s=0;while(i<r){const r=t(e[i],i++,e);if(_(r))n[s++]=r}return n.length=s,n}function W(e,t){const r=e.length;let n=0;while(n<r)e[n]=t(e[n],n++,e);return e}function G(e,t){const r=e.length,n=new Array(r);let i=0;while(i<r)n[i]=t(e[i],i++,e);return n}var H=Object.freeze({__proto__:null,hasMimeType:function(e,t){return"*"===e||e.includes(b(t))},parseMimeType:b,fromMimeType:function(e){switch(e){case"audio/aac":return"aac";case"application/x-abiword":return"abw";case"image/apng":return"apng";case"application/x-freearc":return"arc";case"video/x-msvideo":return"avi";case"application/vnd.amazon.ebook":return"azw";case"application/octet-stream":return"bin";case"image/bmp":return"bmp";case"application/x-bzip":return"bz";case"application/x-bzip2":return"bz2";case"application/x-csh":return"csh";case"text/css":return"css";case"text/csv":return"csv";case"application/msword":return"doc";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"docx";case"application/vnd.ms-fontobject":return"eot";case"application/epub+zip":return"epub";case"audio/flac":return"flac";case"image/gif":return"gif";case"audio/gsm":return"gsm";case"image/heic":return"heic";case"image/heif":return"heif";case"text/html":return"html";case"image/x-icon":return"ico";case"text/calendar":return"ics";case"application/java-archive":return"jar";case"image/jpeg":return"jpg";case"text/javascript":return"js";case"application/json":return"json";case"application/ld+json":return"jsonld";case"audio/midi":return"mid";case"video/x-matroska":return"mkv";case"audio/mpeg":return"mp3";case"video/mp4":return"mp4";case"application/vnd.apple.installer+xml":return"mpkg";case"application/vnd.oasis.opendocument.presentation":return"odp";case"application/vnd.oasis.opendocument.spreadsheet":return"ods";case"application/vnd.oasis.opendocument.text":return"odt";case"audio/ogg":return"ogg";case"video/ogg":return"ogv";case"application/ogg":return"ogx";case"font/otf":return"otf";case"image/png":return"png";case"application/pdf":return"pdf";case"application/vnd.ms-powerpoint":return"ppt";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"pptx";case"application/x-rar-compressed":return"rar";case"application/rtf":return"rtf";case"application/x-sh":return"sh";case"image/svg+xml":return"svg";case"application/x-shockwave-flash":return"swf";case"application/x-tar":return"tar";case"image/tiff":return"tif";case"video/mp2t":return"ts";case"font/ttf":return"ttf";case"text/plain":return"txt";case"application/vnd.visio":return"vsd";case"audio/wav":return"wav";case"audio/webm":return"video/webm";case"image/webp":return"webp";case"font/woff":return"woff";case"font/woff2":return"woff2";case"application/xhtml+xml":return"xhtml";case"application/vnd.ms-excel":return"xls";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"xlsx";case"text/xml":return"xml";case"application/vnd.mozilla.xul+xml":return"xul";case"application/zip":return"zip";case"video/3gpp":return"3gp";case"video/3gpp2":return"3g2";case"application/x-7z-compressed":return"7z";default:return""}},capitalize:function(e,t){return false===t?e.charAt(0).toLowerCase()+e.substring(1):e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},capitalizeString:function(e){const t=e.split("");let r;a.BREAKWORD_G.lastIndex=0;while(null!==(r=a.BREAKWORD_G.exec(e))){const e=r.index;if(void 0!==e)t[e]=r[1].charAt(0).toUpperCase()}return t.join("")},lowerCaseString:function(e){let t,r=e;a.BREAKWORD_G.lastIndex=0;while(null!==(t=a.BREAKWORD_G.exec(e))){const n=t.index;if(void 0!==n){const i=t[1];if(!a.ENTITY.test(i)){const s=n+i.length;r=(n>0?r.substring(0,t.index):"")+e.substring(n,s).toLowerCase()+r.substring(s)}}}return r},spliceString:m,convertUnderscore:function(e){const t=p[e];if(t)return t;let r=e[0].toLowerCase(),n=true;const i=e.length;let s=1;while(s<i){const t=e.charAt(s++),i=t===t.toUpperCase();if(n&&i&&"_"!==t)r+="_"+t.toLowerCase();else r+=t;n=!i}return p[e]=r,r},convertCamelCase:E,convertWord:function(e,t){let r="";const n=t?l.WORDDASH:l.WORD,i=e.length;let s=0;while(s<i){const t=e.charAt(s++);r+=n.test(t)?t:"_"}return r},convertInt:function(e){return parseInt(e)||0},convertFloat:v,convertAlpha:w,convertRoman:y,convertEnum:function(e,t,r){for(const n of Object.keys(t))if(e===t[n])return r[n];return""},randomUUID:function(e="-"){let t="";for(let r=0;r<5;++r){if(r>0)t+=e;const n=h[r];for(let e=0;e<n;++e)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()))}return t},formatString:function(e,...t){const r=t.length;let n=0;while(n<r)e=e.replace(`{${n}}`,t[n++]);return e},delimitString:function(e,...t){const r=e.value||"";if(""===r&&1===t.length)return t[0];const n=e.delimiter||"|",i=e.not||[],s=e.remove||false,a=""!==r?r.split(n):[],l=t.length;let o=-1;while(++o<l){const e=t[o];if(""!==e){if(a.includes(i[o]))continue;const t=a.findIndex(t=>t===e);if(-1===t)a.push(e);else if(s)a.splice(t,1)}}if(e.sort)a.sort();return a.join(n)},splitEnclosing:k,hasBit:x,isNumber:A,isString:S,isArray:function(e){return Array.isArray(e)&&e.length>0},isObject:R,isPlainObject:F,isEqual:function e(t,r){if(t===r)return true;else if(Array.isArray(t)&&Array.isArray(r)){const e=t.length;if(e===r.length){let n=0;while(n<e)if(t[n]!==r[n++])return false;return true}}else if(F(t)&&F(r))if(Object.keys(t).length===Object.keys(r).length){for(const n in t){const i=t[n],s=r[n];if(i!==s){if(F(i)&&F(s)&&e(i,s))continue;return false}}return true}return false},includes:function(e,t,r=a.SEPARATOR){if(e)for(const n of e.split(r))if(n===t)return true;return false},cloneInstance:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)},cloneArray:T,cloneObject:C,resolvePath:N,trimBoth:function(e,t='"'){const r=new RegExp(`^(${t})(.*?)\\1$`).exec(e);return r?r[2]:e},trimString:function(e,t){return P(I(e,t),t)},trimStart:P,trimEnd:I,appendSeparator:function(e,t,r="/"){return e=e.trim(),t=t.trim(),e+(""!==e&&""!==t&&!e.endsWith(r)&&!t.startsWith(r)?r:"")+t},fromLastIndexOf:L,searchObject:function(e,t){const r=[];if("object"==typeof t)for(const n in t){const i=t[n];if(_(e[i]))r.push([i,e[i]])}else{const n=/^\*.+\*$/.test(t)?e=>e.includes(t.replace(/^\*/,"").replace(/\*$/,"")):t.startsWith("*")?e=>e.endsWith(t.replace(/^\*/,"")):t.endsWith("*")?e=>e.startsWith(t.replace(/\*$/,"")):e=>e===t;for(const t in e)if(n(t))r.push([t,e[t]])}return r},hasValue:_,withinRange:B,aboveRange:function(e,t,r=1){return e+r>t},belowRange:function(e,t,r=1){return e-r<t},assignEmptyProperty:function(e,t){for(const r in t)if(!Object.prototype.hasOwnProperty.call(e,r))e[r]=t[r];return e},assignEmptyValue:function(e,...t){const r=t.length;if(r>1){let n=e,i=0;do{const e=t[i],s=n[e];if(i===r-2){if(!_(s))n[e]=t[i+1];break}else if(S(e))if(null==s)n={},n[e]=n;else if(R(s))n=s;else break;else break}while(++i)}},findSet:O,sortNumber:function(e,t=true){return t?e.sort((e,t)=>e<t?-1:1):e.sort((e,t)=>e>t?-1:1)},safeNestedArray:function(e,t){let r=e[t];if(null==r)r=[],e[t]=r;return r},safeNestedMap:function(e,t){let r=e[t];if(null==r)r={},e[t]=r;return r},sortArray:function(e,t,...r){return e.sort((e,n)=>{for(const i of r){let r=e,s=n;for(const e of i.split(".")){const t=r[e],n=s[e];if(void 0!==t&&void 0!==n)r=t,s=n;else if(void 0===t&&void 0===n)return 0;else if(void 0!==t)return-1;else return 1}if(r!==s)if(t)return r>s?1:-1;else return r<s?-1:1}return 0})},flatArray:function(e){let t=e.length,r=-1;while(++r<t){const n=e[r];if(null==n)e.splice(r--,1),t--}return e},flatMultiArray:function e(t){let r=[];const n=t.length;let i=0;while(i<n){const n=t[i++];if(Array.isArray(n)){if(n.length)r=r.concat(e(n))}else if(null!=n)r.push(n)}return r},spliceArray:function(e,t,r,n){let i=e.length,s=-1,a=0;while(++s<i){const l=e[s];if(t(l,s,e)){if(r)r(l,s,e);if(e.splice(s--,1),++a===n)break;i--}}return e},partitionArray:M,sameArray:D,joinArray:z,iterateArray:j,iterateReverseArray:function(e,t,r=0,n=Number.POSITIVE_INFINITY){r=Math.max(r,0);const i=Math.min(e.length,n);let s=i-1;while(s>=r){if(true===t(e[s],s--,e))return Number.POSITIVE_INFINITY}return i},conditionArray:function(e,t,r){const n=e.length;let i=-1;while(++i<n){const n=e[i];if(t(n,i,e)){if(false===r(n,i,e))break}}},flatMap:$,replaceMap:W,objectMap:G});class V{constructor(e){this._children=e||[]}[Symbol.iterator](){const e={done:false},t=this._children,r=t.length;let n=0;return{next(){if(n<r)e.value=t[n++];else e.done=true;return e}}}item(e,t){const r=this._children;if(void 0!==e){if(t)if(e>=0&&e<r.length)return r[e]=t,t;else return;return r[e]}return r[r.length-1]}append(e){return this._children.push(e),this}remove(...e){const t=[],r=this._children;return e.forEach(e=>{const n=r.length;let i=-1;while(++i<n)if(r[i]===e){r.splice(i,1),t.push(e);break}}),t}contains(e){return this._children.includes(e)}retain(e){return this._children=e,this}duplicate(){return this._children.slice(0)}clear(){return this._children.length=0,this}each(e){const t=this._children,r=t.length;let n=0;while(n<r)e(t[n],n++,t);return this}iterate(e,t,r){return j(this._children,e,t,r)}join(...e){let t=this._children;return e.forEach(e=>t=t.concat(e.children)),this._children=t,this}every(e){const t=this._children,r=t.length;if(r){let n=0;while(n<r)if(!e(t[n],n++,t))return false;return true}return false}same(e){return D(this._children,e)}partition(e){return M(this._children,e)}extract(e,t){let r,n;if(t)({also:r,error:n}=t);const i=[],s=this._children;let a=s.length,l=-1;while(++l<a){const t=s[l];if(n&&n(t,l,s))break;if(e(t,l,s))null==r||r.call(t,t),i.push(t),s.splice(l--,1),a--}return i}map(e){return G(this._children,e)}flatMap(e){return $(this._children,e)}findIndex(e,t){let r,n;if(t)({also:r,error:n}=t);const i=this._children,s=i.length;let a=-1;while(++a<s){const t=i[a];if(n&&n(t,a,i))return-1;if(e(t,a,i))return null==r||r.call(t,t),a}return-1}find(e,t){let r,n,i;if(t)({also:n,error:r,cascade:i}=t);let s=false;const a=t=>{const l=t.children,o=l.length;let c=-1;while(++c<o){const t=l[c];if(r&&r(t,c,l)){s=true;break}if(e(t,c,l))return null==n||n.call(t,t),t;if(i&&t instanceof V&&!t.isEmpty){const e=a(t);if(e)return null==n||n.call(t,t),e;else if(s)break}}};return a(this)}some(e,t){return void 0!==this.find(e,t)}cascade(e,t){let r,n;if(t)({also:n,error:r}=t);let i=false;const s=t=>{let a=[];const l=t.children,o=l.length;let c=-1;while(++c<o){const t=l[c];if(r&&r(t,c,l)){i=true;break}if(!e||e(t))null==n||n.call(t,t),a.push(t);if(t instanceof V&&!t.isEmpty)if(a=a.concat(s(t)),i)break}return a};return s(this)}sort(e){if(e)this._children.sort(e);return this}concat(e){return this._children=this._children.concat(e),this}get children(){return this._children}get isEmpty(){return 0===this._children.length}get length(){return this._children.length}}function U(e){const t=navigator.platform.toLowerCase();if("string"==typeof e)return t.includes(e.toLowerCase());else return x(e,2)&&t.includes("win")||x(e,4)&&/(mac|iphone|ipad|ipod)/.test(t)}function X(e){const t=navigator.userAgent;let r;if(t.includes("Safari")&&!t.includes("Chrome"))r=4;else if(t.includes("Firefox"))r=8;else if(t.includes("Edge"))r=16;else r=2;if("string"==typeof e){const t=e.toUpperCase();if(e=0,t.includes("CHROME"))e|=2;if(t.includes("SAFARI"))e|=4;if(t.includes("FIREFOX"))e|=8;if(t.includes("EDGE"))e|=16}return x(e,r)}function Y(){return 96*window.devicePixelRatio}var q=Object.freeze({__proto__:null,isWinEdge:function(){return X(16)&&U(2)},isPlatform:U,isUserAgent:X,getDeviceDPI:Y});const Z=/^(-?\d+\.\d+)e(-?\d+)$/,K=/^(-?\d+)\.(\d*?)(0{5,}|9{5,})\d*$/,Q={};function J(e){return Math.min.apply(null,e)}function ee(e,t,r=5){return r+=Math.floor(e).toString().length,e.toPrecision(r)===t.toPrecision(r)}function te(e,t=3){if("string"==typeof e)e=parseFloat(e);const r=Math.floor(e);if(e===r)return e.toString();else if(e>=0&&e<=1/Math.pow(10,t)||e<0&&e>=-1/Math.pow(10,t))return"0";else{if(0!==r)t+=r.toString().length;return ne(e.toPrecision(t))}}function re(e){if(e!==Math.floor(e)){const t=K.exec(function(e){const t=Z.exec(e.toString());return t?parseInt(t[2])>0?Number.MAX_SAFE_INTEGER.toString():"0":e.toString()}(e));if(t){const r=t[2];if(""===r)return Math.round(e);const n=t[1];return parseFloat(e.toPrecision(("0"!==n?n.length:0)+r.length))}}return e}function ne(e){const t=l.TRAILINGZERO.exec(e);return t?e.substring(0,e.length-t[t[1]?2:0].length):e}function ie(e){return e*Math.PI/180}function se(e,t){const r=t.x-e.x,n=t.y-e.y;return 180*Math.atan2(n,r)/Math.PI}function ae(e,t=0,r=1){if(e<t)e=t;else if(e>r)e=r;return e}function le(e,t=11){let r=e=ie(e);for(let n=3,i=0;n<=t;n+=2)r+=Math.pow(e,n)/ce(n)*(i++%2==0?-1:1);return r}function oe(e,t=10){e=ie(e);let r=1;for(let n=2,i=0;n<=t;n+=2)r+=Math.pow(e,n)/ce(n)*(i++%2==0?-1:1);return r}function ce(e){let t=2,r=3;while(r<=e)t*=r++;return t}var ue=Object.freeze({__proto__:null,minArray:J,maxArray:function(e){return Math.max.apply(null,e)},equal:ee,moreEqual:function(e,t,r=5){return e>t||ee(e,t,r)},lessEqual:function(e,t,r=5){return e<t||ee(e,t,r)},truncate:te,truncateFraction:re,truncateTrailingZero:ne,truncateString:function(e,t=3){let r=Q[t];if(!r)r=new RegExp(`(-?\\d+\\.\\d{${t}})(\\d)\\d*`,"g"),Q[t]=r;else r.lastIndex=0;let n,i=e;while(null!==(n=r.exec(e))){let e=n[1];if(parseInt(n[2])>=5)e=re(parseFloat(e)+1/Math.pow(10,t)).toString();i=i.replace(n[0],ne(e))}return i},convertRadian:ie,triangulate:function(e,t,r){const n=180-e-t;return[r/Math.sin(ie(n))*Math.sin(ie(e)),r/Math.sin(ie(n))*Math.sin(ie(t))]},absoluteAngle:se,relativeAngle:function(e,t,r=90){let n=se(e,t)+r;if(n<0)n+=360;return n},offsetAngleX:function(e,t){return t*Math.sin(ie(e))},offsetAngleY:function(e,t){return t*Math.cos(ie(e))*-1},clamp:ae,multipleOf:function(e,t=0,r){const n=e.length;if(n>1){const i=J(e);if((null==r?void 0:r.length)===n){let i=0;while(i<n)t=Math.max(t,r[i]+e[i++])}else r=void 0,t=Math.max(t,i);let s=0;while(s<t)s+=i;const a=(null==r?void 0:r[0])||0;let l=false;while(!l){const t=a+s;let o=1;while(o<n){if(t%((r?r[o]:0)+e[o++])==0)l=true;else{l=false,s+=i;break}}}return a+s}return e[0]},sin:le,cos:oe,tan:function(e,t=11){return le(e,t)/oe(e,t)},factorial:ce,hypotenuse:function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}});const he=[{value:"#000000",key:"black",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0}},{value:"#696969",key:"dimgray",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#696969",key:"dimgrey",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#808080",key:"gray",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#808080",key:"grey",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#A9A9A9",key:"darkgray",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#A9A9A9",key:"darkgrey",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#C0C0C0",key:"silver",rgb:{r:192,g:192,b:192},hsl:{h:0,s:0,l:75}},{value:"#D3D3D3",key:"lightgray",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#D3D3D3",key:"lightgrey",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#DCDCDC",key:"gainsboro",rgb:{r:220,g:220,b:220},hsl:{h:0,s:0,l:86}},{value:"#F5F5F5",key:"whitesmoke",rgb:{r:245,g:245,b:245},hsl:{h:0,s:0,l:96}},{value:"#FFFFFF",key:"white",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100}},{value:"#BC8F8F",key:"rosybrown",rgb:{r:188,g:143,b:143},hsl:{h:0,s:25,l:65}},{value:"#CD5C5C",key:"indianred",rgb:{r:205,g:92,b:92},hsl:{h:0,s:53,l:58}},{value:"#A52A2A",key:"brown",rgb:{r:165,g:42,b:42},hsl:{h:0,s:59,l:41}},{value:"#B22222",key:"firebrick",rgb:{r:178,g:34,b:34},hsl:{h:0,s:68,l:42}},{value:"#F08080",key:"lightcoral",rgb:{r:240,g:128,b:128},hsl:{h:0,s:79,l:72}},{value:"#800000",key:"maroon",rgb:{r:128,g:0,b:0},hsl:{h:0,s:100,l:25}},{value:"#8B0000",key:"darkred",rgb:{r:139,g:0,b:0},hsl:{h:0,s:100,l:27}},{value:"#FF0000",key:"red",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50}},{value:"#FFFAFA",key:"snow",rgb:{r:255,g:250,b:250},hsl:{h:0,s:100,l:99}},{value:"#FFE4E1",key:"mistyrose",rgb:{r:255,g:228,b:225},hsl:{h:6,s:100,l:94}},{value:"#FA8072",key:"salmon",rgb:{r:250,g:128,b:114},hsl:{h:6,s:93,l:71}},{value:"#FF6347",key:"tomato",rgb:{r:255,g:99,b:71},hsl:{h:9,s:100,l:64}},{value:"#E9967A",key:"darksalmon",rgb:{r:233,g:150,b:122},hsl:{h:15,s:72,l:70}},{value:"#FF7F50",key:"coral",rgb:{r:255,g:127,b:80},hsl:{h:16,s:100,l:66}},{value:"#FF4500",key:"orangered",rgb:{r:255,g:69,b:0},hsl:{h:16,s:100,l:50}},{value:"#FFA07A",key:"lightsalmon",rgb:{r:255,g:160,b:122},hsl:{h:17,s:100,l:74}},{value:"#A0522D",key:"sienna",rgb:{r:160,g:82,b:45},hsl:{h:19,s:56,l:40}},{value:"#FFF5EE",key:"seashell",rgb:{r:255,g:245,b:238},hsl:{h:25,s:100,l:97}},{value:"#D2691E",key:"chocolate",rgb:{r:210,g:105,b:30},hsl:{h:25,s:75,l:47}},{value:"#8B4513",key:"saddlebrown",rgb:{r:139,g:69,b:19},hsl:{h:25,s:76,l:31}},{value:"#F4A460",key:"sandybrown",rgb:{r:244,g:164,b:96},hsl:{h:28,s:87,l:67}},{value:"#FFDAB9",key:"peachpuff",rgb:{r:255,g:218,b:185},hsl:{h:28,s:100,l:86}},{value:"#CD853F",key:"peru",rgb:{r:205,g:133,b:63},hsl:{h:30,s:59,l:53}},{value:"#FAF0E6",key:"linen",rgb:{r:250,g:240,b:230},hsl:{h:30,s:67,l:94}},{value:"#FFE4C4",key:"bisque",rgb:{r:255,g:228,b:196},hsl:{h:33,s:100,l:88}},{value:"#FF8C00",key:"darkorange",rgb:{r:255,g:140,b:0},hsl:{h:33,s:100,l:50}},{value:"#DEB887",key:"burlywood",rgb:{r:222,g:184,b:135},hsl:{h:34,s:57,l:70}},{value:"#FAEBD7",key:"antiquewhite",rgb:{r:250,g:235,b:215},hsl:{h:34,s:78,l:91}},{value:"#D2B48C",key:"tan",rgb:{r:210,g:180,b:140},hsl:{h:34,s:44,l:69}},{value:"#FFDEAD",key:"navajowhite",rgb:{r:255,g:222,b:173},hsl:{h:36,s:100,l:84}},{value:"#FFEBCD",key:"blanchedalmond",rgb:{r:255,g:235,b:205},hsl:{h:36,s:100,l:90}},{value:"#FFEFD5",key:"papayawhip",rgb:{r:255,g:239,b:213},hsl:{h:37,s:100,l:92}},{value:"#FFE4B5",key:"moccasin",rgb:{r:255,g:228,b:181},hsl:{h:38,s:100,l:85}},{value:"#FFA500",key:"orange",rgb:{r:255,g:165,b:0},hsl:{h:39,s:100,l:50}},{value:"#F5DEB3",key:"wheat",rgb:{r:245,g:222,b:179},hsl:{h:39,s:77,l:83}},{value:"#FDF5E6",key:"oldlace",rgb:{r:253,g:245,b:230},hsl:{h:39,s:85,l:95}},{value:"#FFFAF0",key:"floralwhite",rgb:{r:255,g:250,b:240},hsl:{h:40,s:100,l:97}},{value:"#B8860B",key:"darkgoldenrod",rgb:{r:184,g:134,b:11},hsl:{h:43,s:89,l:38}},{value:"#DAA520",key:"goldenrod",rgb:{r:218,g:165,b:32},hsl:{h:43,s:74,l:49}},{value:"#FFF8DC",key:"cornsilk",rgb:{r:255,g:248,b:220},hsl:{h:48,s:100,l:93}},{value:"#FFD700",key:"gold",rgb:{r:255,g:215,b:0},hsl:{h:51,s:100,l:50}},{value:"#FFFACD",key:"lemonchiffon",rgb:{r:255,g:250,b:205},hsl:{h:54,s:100,l:90}},{value:"#F0E68C",key:"khaki",rgb:{r:240,g:230,b:140},hsl:{h:54,s:77,l:75}},{value:"#EEE8AA",key:"palegoldenrod",rgb:{r:238,g:232,b:170},hsl:{h:55,s:67,l:80}},{value:"#BDB76B",key:"darkkhaki",rgb:{r:189,g:183,b:107},hsl:{h:56,s:38,l:58}},{value:"#F5F5DC",key:"beige",rgb:{r:245,g:245,b:220},hsl:{h:60,s:56,l:91}},{value:"#FAFAD2",key:"lightgoldenrodyellow",rgb:{r:250,g:250,b:210},hsl:{h:60,s:80,l:90}},{value:"#808000",key:"olive",rgb:{r:128,g:128,b:0},hsl:{h:60,s:100,l:25}},{value:"#FFFF00",key:"yellow",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50}},{value:"#FFFFE0",key:"lightyellow",rgb:{r:255,g:255,b:224},hsl:{h:60,s:100,l:94}},{value:"#FFFFF0",key:"ivory",rgb:{r:255,g:255,b:240},hsl:{h:60,s:100,l:97}},{value:"#6B8E23",key:"olivedrab",rgb:{r:107,g:142,b:35},hsl:{h:80,s:60,l:35}},{value:"#9ACD32",key:"yellowgreen",rgb:{r:154,g:205,b:50},hsl:{h:80,s:61,l:50}},{value:"#556B2F",key:"darkolivegreen",rgb:{r:85,g:107,b:47},hsl:{h:82,s:39,l:30}},{value:"#ADFF2F",key:"greenyellow",rgb:{r:173,g:255,b:47},hsl:{h:84,s:100,l:59}},{value:"#7FFF00",key:"chartreuse",rgb:{r:127,g:255,b:0},hsl:{h:90,s:100,l:50}},{value:"#7CFC00",key:"lawngreen",rgb:{r:124,g:252,b:0},hsl:{h:90,s:100,l:49}},{value:"#8FBC8F",key:"darkseagreen",rgb:{r:143,g:188,b:143},hsl:{h:120,s:25,l:65}},{value:"#228B22",key:"forestgreen",rgb:{r:34,g:139,b:34},hsl:{h:120,s:61,l:34}},{value:"#32CD32",key:"limegreen",rgb:{r:50,g:205,b:50},hsl:{h:120,s:61,l:50}},{value:"#90EE90",key:"lightgreen",rgb:{r:144,g:238,b:144},hsl:{h:120,s:73,l:75}},{value:"#98FB98",key:"palegreen",rgb:{r:152,g:251,b:152},hsl:{h:120,s:93,l:79}},{value:"#006400",key:"darkgreen",rgb:{r:0,g:100,b:0},hsl:{h:120,s:100,l:20}},{value:"#008000",key:"green",rgb:{r:0,g:128,b:0},hsl:{h:120,s:100,l:25}},{value:"#00FF00",key:"lime",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50}},{value:"#F0FFF0",key:"honeydew",rgb:{r:240,g:255,b:240},hsl:{h:120,s:100,l:97}},{value:"#2E8B57",key:"seagreen",rgb:{r:46,g:139,b:87},hsl:{h:146,s:50,l:36}},{value:"#3CB371",key:"mediumseagreen",rgb:{r:60,g:179,b:113},hsl:{h:147,s:50,l:47}},{value:"#00FF7F",key:"springgreen",rgb:{r:0,g:255,b:127},hsl:{h:150,s:100,l:50}},{value:"#F5FFFA",key:"mintcream",rgb:{r:245,g:255,b:250},hsl:{h:150,s:100,l:98}},{value:"#00FA9A",key:"mediumspringgreen",rgb:{r:0,g:250,b:154},hsl:{h:157,s:100,l:49}},{value:"#66CDAA",key:"mediumaquamarine",rgb:{r:102,g:205,b:170},hsl:{h:160,s:51,l:60}},{value:"#7FFFD4",key:"aquamarine",rgb:{r:127,g:255,b:212},hsl:{h:160,s:100,l:75}},{value:"#40E0D0",key:"turquoise",rgb:{r:64,g:224,b:208},hsl:{h:174,s:72,l:56}},{value:"#20B2AA",key:"lightseagreen",rgb:{r:32,g:178,b:170},hsl:{h:177,s:70,l:41}},{value:"#48D1CC",key:"mediumturquoise",rgb:{r:72,g:209,b:204},hsl:{h:178,s:60,l:55}},{value:"#2F4F4F",key:"darkslategray",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#2F4F4F",key:"darkslategrey",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#AFEEEE",key:"paleturquoise",rgb:{r:175,g:238,b:238},hsl:{h:180,s:65,l:81}},{value:"#008080",key:"teal",rgb:{r:0,g:128,b:128},hsl:{h:180,s:100,l:25}},{value:"#008B8B",key:"darkcyan",rgb:{r:0,g:139,b:139},hsl:{h:180,s:100,l:27}},{value:"#00FFFF",key:"aqua",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#00FFFF",key:"cyan",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#E0FFFF",key:"lightcyan",rgb:{r:224,g:255,b:255},hsl:{h:180,s:100,l:94}},{value:"#F0FFFF",key:"azure",rgb:{r:240,g:255,b:255},hsl:{h:180,s:100,l:97}},{value:"#00CED1",key:"darkturquoise",rgb:{r:0,g:206,b:209},hsl:{h:181,s:100,l:41}},{value:"#5F9EA0",key:"cadetblue",rgb:{r:95,g:158,b:160},hsl:{h:182,s:25,l:50}},{value:"#B0E0E6",key:"powderblue",rgb:{r:176,g:224,b:230},hsl:{h:187,s:52,l:80}},{value:"#ADD8E6",key:"lightblue",rgb:{r:173,g:216,b:230},hsl:{h:195,s:53,l:79}},{value:"#00BFFF",key:"deepskyblue",rgb:{r:0,g:191,b:255},hsl:{h:195,s:100,l:50}},{value:"#87CEEB",key:"skyblue",rgb:{r:135,g:206,b:235},hsl:{h:197,s:71,l:73}},{value:"#87CEFA",key:"lightskyblue",rgb:{r:135,g:206,b:250},hsl:{h:203,s:92,l:75}},{value:"#4682B4",key:"steelblue",rgb:{r:70,g:130,b:180},hsl:{h:207,s:44,l:49}},{value:"#F0F8FF",key:"aliceblue",rgb:{r:240,g:248,b:255},hsl:{h:208,s:100,l:97}},{value:"#1E90FF",key:"dodgerblue",rgb:{r:30,g:144,b:255},hsl:{h:210,s:100,l:56}},{value:"#708090",key:"slategray",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#708090",key:"slategrey",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#778899",key:"lightslategray",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#778899",key:"lightslategrey",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#B0C4DE",key:"lightsteelblue",rgb:{r:176,g:196,b:222},hsl:{h:214,s:41,l:78}},{value:"#6495ED",key:"cornflower",rgb:{r:100,g:149,b:237},hsl:{h:219,s:79,l:66}},{value:"#4169E1",key:"royalblue",rgb:{r:65,g:105,b:225},hsl:{h:225,s:73,l:57}},{value:"#191970",key:"midnightblue",rgb:{r:25,g:25,b:112},hsl:{h:240,s:64,l:27}},{value:"#E6E6FA",key:"lavender",rgb:{r:230,g:230,b:250},hsl:{h:240,s:67,l:94}},{value:"#000080",key:"navy",rgb:{r:0,g:0,b:128},hsl:{h:240,s:100,l:25}},{value:"#00008B",key:"darkblue",rgb:{r:0,g:0,b:139},hsl:{h:240,s:100,l:27}},{value:"#0000CD",key:"mediumblue",rgb:{r:0,g:0,b:205},hsl:{h:240,s:100,l:40}},{value:"#0000FF",key:"blue",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50}},{value:"#F8F8FF",key:"ghostwhite",rgb:{r:248,g:248,b:255},hsl:{h:240,s:100,l:99}},{value:"#6A5ACD",key:"slateblue",rgb:{r:106,g:90,b:205},hsl:{h:248,s:53,l:58}},{value:"#483D8B",key:"darkslateblue",rgb:{r:72,g:61,b:139},hsl:{h:248,s:39,l:39}},{value:"#7B68EE",key:"mediumslateblue",rgb:{r:123,g:104,b:238},hsl:{h:249,s:80,l:67}},{value:"#9370DB",key:"mediumpurple",rgb:{r:147,g:112,b:219},hsl:{h:260,s:60,l:65}},{value:"#8A2BE2",key:"blueviolet",rgb:{r:138,g:43,b:226},hsl:{h:271,s:76,l:53}},{value:"#4B0082",key:"indigo",rgb:{r:75,g:0,b:130},hsl:{h:275,s:100,l:25}},{value:"#9932CC",key:"darkorchid",rgb:{r:153,g:50,b:204},hsl:{h:280,s:61,l:50}},{value:"#9400D3",key:"darkviolet",rgb:{r:148,g:0,b:211},hsl:{h:282,s:100,l:41}},{value:"#BA55D3",key:"mediumorchid",rgb:{r:186,g:85,b:211},hsl:{h:288,s:59,l:58}},{value:"#D8BFD8",key:"thistle",rgb:{r:216,g:191,b:216},hsl:{h:300,s:24,l:80}},{value:"#DDA0DD",key:"plum",rgb:{r:221,g:160,b:221},hsl:{h:300,s:47,l:75}},{value:"#EE82EE",key:"violet",rgb:{r:238,g:130,b:238},hsl:{h:300,s:76,l:72}},{value:"#800080",key:"purple",rgb:{r:128,g:0,b:128},hsl:{h:300,s:100,l:25}},{value:"#8B008B",key:"darkmagenta",rgb:{r:139,g:0,b:139},hsl:{h:300,s:100,l:27}},{value:"#FF00FF",key:"fuchsia",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#FF00FF",key:"magenta",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#DA70D6",key:"orchid",rgb:{r:218,g:112,b:214},hsl:{h:302,s:59,l:65}},{value:"#C71585",key:"mediumvioletred",rgb:{r:199,g:21,b:133},hsl:{h:322,s:81,l:43}},{value:"#FF1493",key:"deeppink",rgb:{r:255,g:20,b:147},hsl:{h:328,s:100,l:54}},{value:"#FF69B4",key:"hotpink",rgb:{r:255,g:105,b:180},hsl:{h:330,s:100,l:71}},{value:"#FFF0F5",key:"lavenderblush",rgb:{r:255,g:240,b:245},hsl:{h:340,s:100,l:97}},{value:"#DB7093",key:"palevioletred",rgb:{r:219,g:112,b:147},hsl:{h:340,s:60,l:65}},{value:"#DC143C",key:"crimson",rgb:{r:220,g:20,b:60},hsl:{h:348,s:83,l:47}},{value:"#FFC0CB",key:"pink",rgb:{r:255,g:192,b:203},hsl:{h:350,s:100,l:88}},{value:"#FFB6C1",key:"lightpink",rgb:{r:255,g:182,b:193},hsl:{h:351,s:100,l:86}}],fe={},ge=e=>255*ae(e);function de(e){e=e.toLowerCase();const t=he.length;let r=0;while(r<t){const t=he[r++];if(t.key===e)return t}}function pe(e,t=1,r=false){if(e&&("transparent"!==e||r)){let n=fe[e];if(n)return n;let i,a="";if(e.startsWith("#"))i=me(e);else{let r=s.RGBA.exec(e);if(r)i={r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:r[4]?255*parseFloat(r[4]):ge(t)};else if(r=s.HSLA.exec(e),r)i=ve({h:parseInt(r[1]),s:parseInt(r[2]),l:parseInt(r[3]),a:ae(r[4]?parseFloat(r[4]):t)});else switch(e){case"transparent":i={r:0,g:0,b:0,a:0},a="transparent";break;case"initial":i={r:0,g:0,b:0,a:255},a="black";break;default:{const r=de(e);if(r)i=Object.assign(Object.assign({},r.rgb),{a:ge(t)}),a=e;break}}}if(i){const{r:s,g:l,b:o,a:c}=i;if(c>0||r){const r=be(s,l,o),u=be(c),h="#"+(r+u);if(fe[h])return fe[h];if(t=c/255,n={key:a,value:e="#"+r,valueAsRGBA:h,valueAsARGB:"#"+(u+r),rgba:i,hsl:Ee(i),opacity:t,transparent:0===t},1===t)fe[e]=n;return fe[h]=n,n}}}}function be(...e){let t="";return e.forEach(e=>{const r=Math.max(0,Math.min(e,255));t+=isNaN(r)?"00":"0123456789ABCDEF".charAt((r-r%16)/16)+"0123456789ABCDEF".charAt(r%16)}),t}function me(e){if(e=e.replace(/#/g,"").trim(),s.HEX.test(e)){let t=255;switch(e.length){case 4:t=parseInt(e.charAt(3).repeat(2),16);case 3:e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2);break;case 5:e+=e.charAt(4);break;default:if(e.length>=8)t=parseInt(e.substring(6,8),16);e=e.substring(0,6);break}if(6===e.length)return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16),a:t}}}function Ee(e){const t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n);let a=(s+i)/2;const l=a;let o;if(s===i)a=0,o=0;else{const e=s-i;switch(o=l>.5?e/(2-s-i):e/(s+i),s){case t:a=(r-n)/e+(r<n?6:0);break;case r:a=(n-t)/e+2;break;case n:a=(t-r)/e+4;break}a/=6}return{h:Math.round(360*a),s:Math.round(100*o),l:Math.round(100*l),a:e.a/255}}function ve(e){let t,r,n,{h:i,s:s,l:a,a:l}=e;if(i/=360,s/=100,a/=100,0===s)t=a,r=a,n=a;else{const e=a<.5?a*(1+s):a+s-a*s,l=2*a-e,o=t=>{if(t<0)t+=1;else if(t>1)t-=1;if(t<1/6)return l+6*(e-l)*t;else if(t<.5)return e;else if(t<2/3)return l+(e-l)*(2/3-t)*6;return l};t=o(i+1/3),r=o(i),n=o(i-1/3)}return t=Math.round(255*Math.min(t,1)),r=Math.round(255*Math.min(r,1)),n=Math.round(255*Math.min(n,1)),l=Math.round(255*Math.min(l,1)),{r:t,g:r,b:n,a:l}}function we(e){return`rgb${e.a<255?"a":""}(${e.r}, ${e.g}, ${e.b}`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}var ye=Object.freeze({__proto__:null,findColorName:de,findColorShade:function(e){const t=me(e);if(t){const r=Ee(t),n=[];let i=-1;const s=he.length;let a=0;while(a<s){const t=he[a++];if(t.value===e)return t;else if(-1!==i){if(i===t.hsl.h)n.push(t)}else if(r.h<=t.hsl.h)n.push(t),i=t.hsl.h}const l=n.length;if(1===l)return n[0];else if(l>1){const e=r.l+r.s;let t=Number.POSITIVE_INFINITY,i=-1;for(a=0;a<l;++a){const{l:r,s:s}=n[a].hsl,l=Math.abs(e-(r+s));if(l<t)t=l,i=a}return n[i]}else return he[he.length-1]}},parseColor:pe,reduceRGBA:function(e,t,r){if(r){const e=fe[r+="_"+t];if(e)return e}let{r:n,g:i,b:s}=e;if(0===n&&0===i&&0===s)if(n=255,i=255,s=255,t>0)t*=-1;const a=t<0?0:255;t=Math.abs(t);const l=pe(we({r:(n+Math.round((a-n)*t))%255,g:(i+Math.round((a-i)*t))%255,b:(s+Math.round((a-s)*t))%255,a:e.a}));if(r)fe[r]=l;return l},getHexCode:be,convertHex:function(e){return"#"+be(e.r,e.g,e.b)+(e.a<255?be(e.a):"")},parseRGBA:me,convertHSLA:Ee,convertRGBA:ve,formatRGBA:we,formatHSLA:function(e){return`hsl${e.a<255?"a":""}(${e.h}, ${e.s}%, ${e.l}%`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}});const ke=`(\\(\\s*(?:orientation:\\s*(?:portrait|landscape)|(?:max|min)-width:\\s*${n.LENGTH_PERCENTAGE})\\s*\\))`,xe=/((?:\d+%\s*,?\s*)+|from|to)\s*{\s*(.+?)\s*}/,Ae=/(?:(not|only)?\s*(?:all|screen)\s+and\s+)?((?:\([^)]+\)(?:\s+and\s+)?)+),?\s*/g,Se=/\(([a-z-]+)\s*(:|<?=?|=?>?)?\s*([\w.%]+)?\)(?:\s+and\s+)?/g,Re=/^(.*?)\s+(?:([\d.]+)([xw]))?$/,Fe=/\s+([+-]\s+|\s*[*/])\s*/,Te=/^\s*-?\d+\s*$/,Ce=/\s*\/\s*/,Ne=/^\*(\s+\*){0,2}$/,Pe=/^(\*\s+){1,2}/,Ie=new RegExp(n.CSS_CALC),Le=new RegExp(`(${n.UNIT_LENGTH}|%)`),_e=new RegExp(`\\s*(?:(\\(\\s*)?${ke}|(\\(\\s*))?\\s*(and|or|not)?\\s*(?:${ke}(\\s*\\))?)?\\s*(.+)`);function Be(e,t,r){switch(e){case"<=":return t<=r;case"<":return t<r;case">=":return t>=r;case">":return t>r;default:return t===r}}function Oe(e,t,r){const n=[];W(k(t.trim(),"calc"),e=>e.trim()).forEach(e=>{if(e.includes(" ")&&!wt(e))n.push(...e.split(l.SPACE));else n.push(e)});const i=n.length;switch(i){case 1:case 2:return ct(e,n.join(" "),{dimension:["width","height"],boundingBox:r,parent:false});case 3:case 4:{let t=0,s=0;for(let a=0;a<i;++a){const l=n[a];switch(l){case"top":case"bottom":if(2==++s)return"";break;case"center":if(4===i)return"";break;case"left":case"right":if(2==++t)return"";break;default:{let t;switch(n[a-1]){case"top":case"bottom":t="height";break;case"left":case"right":t="width";break;default:return""}if(wt(l)){const i=Ze(ut(e,l,{dimension:t,boundingBox:r}));if(""!==i)n[a]=i;else return""}break}}}return n.join(" ")}}return""}function Me(e,t){const r=k(t),n=r.length;if(n>1){for(let t=1;t<n;++t){const n=r[t].trim();if(St(n)){const i=r[t-1].trim();if(qe(i)){const s=Qe(n).split(a.SEPARATOR),l=s.length;if(l>=3){const n=i.startsWith("hsl");for(let t=0;t<l;++t){const r=s[t];if(wt(r))if(n&&(1===t||2===t)){const n=ut(e,r,{unitType:4,supportPercent:true});if(!isNaN(n))s[t]=ae(n,0,100)+"%";else return""}else if(3===t){const n=r.includes("%");let i=ut(e,r,n?{unitType:4}:{unitType:64});if(!isNaN(i)){if(n)i/=100;s[t]=ae(i).toString()}else return""}else{const n=ut(e,r,{unitType:64,supportPercent:false});if(!isNaN(n))s[t]=ae(n,0,255).toString();else return""}}r[t]=`(${s.join(", ")})`;continue}}return""}}return r.join("")}return t}function De(e,t,r,n,i,s="width"){const a=k(t,"calc"),l=a.length;for(let t=0;t<l;++t){const l=a[t];if(wt(l)){const o=Le.test(l),c=ut(e,l,o?{dimension:s,boundingBox:i,min:0,parent:false}:{unitType:r,min:n,supportPercent:false});if(!isNaN(c))a[t]=c+(o?"px":"");else return""}}return a.join("").trim()}function ze(e){switch(e){case"vertical-lr":return 1;case"vertical-rl":return 2}return 0}function je(e){switch(e){case"none":case"initial":case"hidden":return false}return true}function $e(e){return(je(e.getPropertyValue("border-left-style"))?parseFloat(e.getPropertyValue("border-left-width")):0)+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))+(je(e.getPropertyValue("border-right-style"))?parseFloat(e.getPropertyValue("border-right-width")):0)}function We(e){return(je(e.getPropertyValue("border-top-style"))?parseFloat(e.getPropertyValue("border-top-width")):0)+parseFloat(e.getPropertyValue("padding-top"))+parseFloat(e.getPropertyValue("padding-bottom"))+(je(e.getPropertyValue("border-bottom-style"))?parseFloat(e.getPropertyValue("border-bottom-width")):0)}function Ge(e){switch(e){case"absolute":case"fixed":return true}return false}function He(e=["left","top"]){return{static:true,top:0,left:0,right:0,bottom:0,topAsPercent:0,leftAsPercent:0,rightAsPercent:0,bottomAsPercent:0,horizontal:"left",vertical:"top",orientation:e}}const Ve=e=>(null==e?void 0:e.width)||window.innerWidth,Ue=e=>(null==e?void 0:e.height)||window.innerHeight,Xe=(e,t,r,n)=>At(e)?Math.round(v(e)/100*t):pt(e,r,n),Ye=(e,t,r,n)=>At(e)?parseFloat(e)/100:pt(e,r,n)/t,qe=e=>/(rgb|hsl)a?/.test(e),Ze=e=>!isNaN(e)?e+"px":"",Ke=e=>!isNaN(e)?e.toString():"",Qe=e=>e.substring(1,e.length-1),Je=e=>Ne.test(e)?"*":e.replace(Pe,"");function et(e,t=""){if(e){const r=e["__style"+t];if(r)return r;if(rt(e)){const r=getComputedStyle(e,t);return e["__style"+t]=r,r}return{position:"static",display:"inline"}}return{position:"static",display:"none"}}function tt(e){if("#"===e.nodeName.charAt(0))e=e.parentElement||document.body;return parseFloat(et(e).getPropertyValue("font-size"))}function rt(e){return"#"!==e.nodeName.charAt(0)&&(e instanceof HTMLElement||e instanceof SVGElement)}function nt(e,t){switch(e){case"inlineSize":return 0===ze(t)?"width":"height";case"blockSize":return 0===ze(t)?"height":"width";case"maxInlineSize":return 0===ze(t)?"maxWidth":"maxHeight";case"maxBlockSize":return 0===ze(t)?"maxHeight":"maxWidth";case"minInlineSize":return 0===ze(t)?"minWidth":"minHeight";case"minBlockSize":return 0===ze(t)?"minHeight":"minWidth";case"borderInlineStart":return 0===ze(t)?"borderLeft":"borderTop";case"borderInlineEnd":return 0===ze(t)?"borderRight":"borderBottom";case"borderInlineStartWidth":return 0===ze(t)?"borderLeftWidth":"borderTopWidth";case"borderInlineEndWidth":return 0===ze(t)?"borderRightWidth":"borderBottomWidth";case"insetInlineStart":return 0===ze(t)?"left":"top";case"insetInlineEnd":return 0===ze(t)?"right":"bottom";case"marginInlineStart":return 0===ze(t)?"marginLeft":"marginTop";case"marginInlineEnd":return 0===ze(t)?"marginRight":"marginBottom";case"paddingInlineStart":return 0===ze(t)?"paddingLeft":"paddingTop";case"paddingInlineEnd":return 0===ze(t)?"paddingRight":"paddingBottom";case"scrollMarginInlineStart":return 0===ze(t)?"scrollMarginLeft":"scrollMarginTop";case"scrollMarginInlineEnd":return 0===ze(t)?"scrollMarginRight":"scrollMarginBottom";case"scrollPaddingInlineStart":return 0===ze(t)?"scrollPaddingLeft":"scrollPaddingTop";case"scrollPaddingInlineEnd":return 0===ze(t)?"scrollPaddingRight":"scrollPaddingBottom";case"borderBlockStart":switch(ze(t)){case 0:return"borderTop";case 1:return"borderLeft";case 2:return"borderRight"}case"borderBlockEnd":switch(ze(t)){case 0:return"borderBottom";case 1:return"borderRight";case 2:return"borderLeft"}case"borderBlockStartWidth":switch(ze(t)){case 0:return"borderTopWidth";case 1:return"borderLeftWidth";case 2:return"borderRightWidth"}case"borderBlockEndWidth":switch(ze(t)){case 0:return"borderBottomWidth";case 1:return"borderRightWidth";case 2:return"borderLeftWidth"}case"insetBlockStart":switch(ze(t)){case 0:return"top";case 1:return"left";case 2:return"right"}case"insetBlockEnd":switch(ze(t)){case 0:return"bottom";case 1:return"right";case 2:return"left"}case"marginBlockStart":switch(ze(t)){case 0:return"marginTop";case 1:return"marginLeft";case 2:return"marginRight"}case"marginBlockEnd":switch(ze(t)){case 0:return"marginBottom";case 1:return"marginRight";case 2:return"marginLeft"}case"paddingBlockStart":switch(ze(t)){case 0:return"paddingTop";case 1:return"paddingLeft";case 2:return"paddingRight"}case"paddingBlockEnd":switch(ze(t)){case 0:return"paddingBottom";case 1:return"paddingRight";case 2:return"paddingLeft"}case"scrollMarginBlockStart":switch(ze(t)){case 0:return"scrollMarginTop";case 1:return"scrollMarginLeft";case 2:return"scrollMarginRight"}case"scrollMarginBlockEnd":switch(ze(t)){case 0:return"scrollMarginBottom";case 1:return"scrollMarginRight";case 2:return"scrollMarginLeft"}case"scrollPaddingBlockStart":switch(ze(t)){case 0:return"scrollPaddingTop";case 1:return"scrollPaddingLeft";case 2:return"scrollPaddingRight"}case"scrollPaddingBlockEnd":switch(ze(t)){case 0:return"scrollPaddingBottom";case 1:return"scrollPaddingRight";case 2:return"scrollPaddingLeft"}}return""}function it(e,t,r,n){switch(t){case"left":case"right":case"textIndent":return Ze(ut(e,r,{dimension:"width",boundingBox:n}));case"columnWidth":case"marginBottom":case"marginLeft":case"marginRight":case"marginTop":case"maxWidth":case"minWidth":case"paddingBottom":case"paddingLeft":case"paddingRight":case"paddingTop":case"scrollMarginBottom":case"scrollMarginLeft":case"scrollMarginRight":case"scrollMarginTop":case"scrollPaddingBottom":case"scrollPaddingLeft":case"scrollPaddingRight":case"scrollPaddingTop":case"width":return Ze(ut(e,r,{dimension:"width",boundingBox:n,min:0}));case"columnGap":case"gridColumnGap":case"shapeMargin":return Ze(ut(e,r,{dimension:"width",boundingBox:n,min:0,parent:false}));case"bottom":case"top":case"verticalAlign":return Ze(ut(e,r,{dimension:"height",boundingBox:n}));case"height":case"maxHeight":case"minHeight":return Ze(ut(e,r,{dimension:"height",boundingBox:n,min:0}));case"gridRowGap":case"rowGap":return Ze(ut(e,r,{dimension:"height",boundingBox:n,min:0,parent:false}));case"flexBasis":{const t=e.parentElement;return Ze(ut(e,r,{dimension:!!t&&et(t).flexDirection.includes("column")?"height":"width",boundingBox:n,min:0}))}case"borderBottomWidth":case"borderLeftWidth":case"borderRightWidth":case"borderTopWidth":case"letterSpacing":case"outlineOffset":case"outlineWidth":case"perspective":case"wordSpacing":return Ze(ut(e,r,{min:0,supportPercent:false}));case"offsetDistance":{let t=0;if(r.includes("%")){const r=et(e).getPropertyValue("offset-path");if("none"!==r){const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",r),t=e.getTotalLength()}}return Ze(ut(e,r,{boundingSize:t}))}case"lineHeight":return Ze(ut(e,r,{boundingSize:tt(e),min:0}));case"fontSize":return Ze(ut(e,r,{boundingSize:tt(e.parentElement||document.body),min:0}));case"margin":return ct(e,r,{dimension:"width",boundingBox:n});case"borderBottomLeftRadius":case"borderBottomRightRadius":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderRadius":case"padding":case"scrollMargin":case"scrollMarginBlock":case"scrollMarginInline":case"scrollPadding":case"scrollPaddingBlock":case"scrollPaddingInline":return ct(e,r,{dimension:"width",boundingBox:n,min:0});case"objectPosition":return ct(e,r,{dimension:["width","height"],boundingBox:n});case"gridGap":case"perspectiveOrigin":return ct(e,r,{dimension:["width","height"],boundingBox:n,min:"gridGap"===t?0:void 0,parent:false});case"borderImageOutset":case"borderImageWidth":return ct(e,r,{dimension:["height","width","height","width"],boundingBox:n,min:0,parent:false});case"borderWidth":case"borderSpacing":case"columnRule":return ct(e,r,{min:0,supportPercent:false});case"gridAutoColumns":case"gridTemplateColumns":return De(e,r,32,1,n);case"gridAutoRows":case"gridTemplateRows":return De(e,r,32,1,n,"height");case"zIndex":return Ke(ut(e,r,{unitType:32}));case"tabSize":return Ke(ut(e,r,{unitType:32,min:0}));case"columnCount":case"fontWeight":case"widows":return Ke(ut(e,r,{unitType:32,min:1}));case"gridRow":case"gridRowEnd":case"gridRowStart":case"gridColumn":case"gridColumnEnd":case"gridColumnStart":case"counterIncrement":case"counterReset":return ct(e,r,{unitType:32});case"fontVariationSettings":return ct(e,r,{unitType:32,min:0});case"gridArea":return ct(e,r,{unitType:32,min:1});case"flexGrow":case"flexShrink":return Ke(ut(e,r,{unitType:64,min:0}));case"animationIterationCount":case"fontSizeAdjust":return Ke(ut(e,r,{unitType:64,min:0,supportPercent:false}));case"opacity":case"shapeImageThreshold":{const t=r.includes("%"),n=ut(e,r,{unitType:t?4:64});return!isNaN(n)?ae(n*(t?.01:1)).toString():""}case"fontStretch":return ct(e,r,{unitType:4,min:0,supportPercent:true});case"fontStyle":case"offsetRotate":return ct(e,r,{unitType:16,supportPercent:false});case"offsetAnchor":case"transformOrigin":return Oe(e,r,n);case"transform":{const t=k(r=r.trim()),i=t.length;if(i>1){for(let r=1;r<i;++r){let i=t[r];if(St(i)){let s;switch(i=Qe(i),t[r-1].trim()){case"matrix":case"matrix3d":s=ct(e,i,{unitType:64,supportPercent:false});break;case"scaleX":case"scaleY":case"scaleZ":{const t=ut(e,i,{unitType:64,min:0,supportPercent:false});if(!isNaN(t))s=t.toString();break}case"scale":case"scale3d":s=ct(e,i,{unitType:64,min:0,supportPercent:false});break;case"translateX":s=Ze(ut(e,i,{dimension:"width",boundingBox:n,parent:true}));break;case"translateY":s=Ze(ut(e,i,{dimension:"height",boundingBox:n,parent:true}));break;case"translateZ":case"perspective":s=Ze(ut(e,i,{supportPercent:false}));break;case"translate":case"translate3d":s=ct(e,i,{dimension:["width","height"],boundingBox:n,parent:true});break;case"skew":case"rotate":s=ct(e,i,{unitType:16,supportPercent:false});break;case"skewX":case"skewY":case"rotateX":case"rotateY":case"rotateZ":{const t=ut(e,i,{unitType:16,supportPercent:false});if(!isNaN(t))s=t+"deg";break}case"rotate3d":{const t=i.split(a.SEPARATOR),r=t.length;if(3===r||4===r){s="";for(let n=0;n<r;++n){let r=t[n];if(wt(r)){const t=ut(e,r,{unitType:3===n?16:64,supportPercent:false});if(!isNaN(t))r=t+(3===n?"deg":"");else return""}s+=(""!==s?", ":"")+r}}break}}if(s)t[r]=`(${s})`;else return""}}return t.join("")}return r}case"backgroundImage":case"borderImageSource":case"maskImage":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r];if(qe(n)&&St(n)){const i=k(Qe(n)),s=i.length;for(let t=1;t<s;++t)if(St(i[t])){const r=i[t-1];if(qe(r)){const n=r.split(l.SPACE).pop(),s=Me(e,n+i[t]);if(""!==s){i[t]=s.replace(n,"");continue}}return""}t[r]=`(${i.join("")})`}}return t.join("")}return r}case"borderColor":case"scrollbarColor":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1];if(qe(n)&&St(t[r])){const i=n.split(l.SPACE).pop(),s=Me(e,i+t[r]);if(""!==s)t[r]=s,t[r-1]=n.substring(0,n.length-i.length);else return""}}return t.join("")}return r}case"boxShadow":case"textShadow":return ct(e,it(e,"borderColor",r),{supportPercent:false,errorString:/-?[\d.]+[a-z]*\s+-?[\d.]+[a-z]*(\s+-[\d.]+[a-z]*)/});case"backgroundSize":case"maskPosition":case"maskSize":return ct(e,r,{dimension:["width","height"],boundingBox:n,min:"maskPosition"!==t?0:void 0,parent:false,separator:","});case"animation":case"animationDelay":case"animationDuration":case"transition":case"transitionDelay":case"transitionDuration":return ct(e,r,{unitType:8,min:0,precision:0,separator:","});case"columns":return De(e,r,32,1,n);case"borderImageSlice":case"flex":case"font":return De(e,r,64,0,n);case"backgroundPosition":{const t=[];for(const i of r.split(a.SEPARATOR)){const r=Oe(e,i,n);if(""!==r)t.push(r);else return""}return t.join(", ")}case"border":case"borderBottom":case"borderLeft":case"borderRight":case"borderTop":case"outline":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1],i=n.split(l.SPACE).pop();let s;if("calc"===i)s=Ze(ut(e,i+t[r],{min:0,supportPercent:false}));else if(qe(i))s=Me(e,i+t[r]);else continue;if(""!==s)t[r]=s,t[r-1]=n.substring(0,n.length-i.length);else return""}return t.join("")}return r}case"animationTimingFunction":case"transitionTimingFunction":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){let n=t[r];if(St(n)){const i=t[r-1].trim();let s;if(n=Qe(n),i.endsWith("cubic-bezier")){const t=n.split(a.SEPARATOR),r=t.length;if(4===r){s="";const n={unitType:64,supportPercent:false};for(let i=0;i<r;++i){let r=t[i];if(wt(r)){if(i%2==0)n.min=0,n.max=1;else n.min=void 0,n.max=void 0;const t=ut(e,r,n);if(!isNaN(t))r=t.toString();else return""}s+=(""!==s?", ":"")+r}}}else if(i.endsWith("steps"))s=ct(e,n,{unitType:32,min:1});if(s)t[r]=`(${s})`;else return""}}return t.join("")}return r}case"clip":return Ge(et(e).position)?ct(e,r,{supportPercent:false}):"";case"clipPath":case"offsetPath":case"shapeOutside":{const t=k(r=r.trim());if(2===t.length){const i=t[0].trim();switch(i){case"url":case"path":return!St(t[1])?r:"";case"linear-gradient":case"repeating-linear-gradient":case"radial-gradient":case"repeating-radial-gradient":case"conic-gradient":return it(e,"backgroundImage",r,n)}let s=t[1].trim();switch(s=Qe(s),i){case"circle":case"ellipse":{const t=[];let[r,a]=s.split(/\s+at\s+/);if(St(r)){const s={boundingBox:n,min:0,parent:true};if("circle"===i){if(r.includes("%")){const{width:t,height:r}=n||ht(e);if(t>0&&r>0)s.boundingSize=Math.min(t,r);else return""}}else s.dimension=["width","height"];if(r=ct(e,r,s),""!==r)t.push(r);else return""}else if(r)t.push(r);if(St(a))if(a=ct(e,a,{dimension:["width","height"],boundingBox:n,parent:true}),""!==a)t.push(a);else return"";else if(a)t.push(a);s=t.join(" at ");break}case"inset":s=ct(e,s,{dimension:["height","width","height","width","width"],boundingBox:n,checkUnit:true});break;case"polygon":{const t=[];for(let r of s.split(a.SEPARATOR))if(St(r))if(r=ct(e,r,{dimension:["width","height"],boundingBox:n,parent:true}),""!==r)t.push(r);else return"";else t.push(r);s=t.join(", ");break}}if(""!==s)return`${i}(${s})`}return r}case"grid":{let[t,i]=r.trim().split(Ce);if(St(t)){const r=it(e,"gridTemplateRows",t,n);if(""!==r)t=r;else return""}if(St(i)){const t=it(e,"gridTemplateColumns",i,n);if(""!==t)i=t;else return""}return t+(i?" / "+i:"")}case"offset":{let[t,i]=r.trim().split(Ce);if(St(t)){const r=k(t.trim()),i=r.length;if(i>=2){if(t=r[0]+r[1],St(t))if(t=it(e,"offsetPath",t,n),""===t)return"";if(i>2){let i=r.slice(2).join("");if(St(t))if(i=it(e,Le.test(i)?"offsetDistance":"offsetRotate",i,n),""===i)return"";t+=" "+i}}else return""}if(St(i)){const t=it(e,"offsetAnchor",i,n);if(""!==t)i=t;else return""}return t+(i?" / "+i:"")}case"borderImage":{const t=/([a-z-]+\(.+?\))\s*([^/]+)(?:\s*\/\s*)?(.+)?/.exec(r.trim());if(t){let r=t[2].trim();if(St(r))r=it(e,"borderImageSlice",r,n);if(""!==r){let i,s;if(t[3]){if([i,s]=t[3].trim().split(Ce),St(i)){const t=it(e,"borderImageWidth",i,n);if(""!==t)i=t;else return""}if(St(s)){const t=it(e,"borderImageOutset",s,n);if(""!==t)s=t;else return""}}return t[1]+" "+r+(i?" / "+i:"")+(s?" / "+s:"")}}return""}case"background":case"gridTemplate":return et(e)[t];default:if(t.endsWith("Color"))return Me(e,r.trim());else{const i=nt(t,et(e).writingMode);if(""!==i)return it(e,i,r,n)}}return""}function st(e){const t={},r=e.length;let n=0;while(n<r){const r=e[n++],i=xe.exec(r.cssText);if(i)(r.keyText||i[1]).trim().split(a.SEPARATOR).forEach(e=>{switch(e){case"from":e="0%";break;case"to":e="100%";break}const r={};i[2].split(a.DELIMITER).forEach(e=>{const t=e.indexOf(":");if(-1!==t){const n=e.substring(t+1).trim();if(""!==n){const i=e.substring(0,t).trim();r[i]=n}}}),t[e]=r})}return t}function at(e,t){switch(e){case"only all":case"only screen":return true;default:{let r;Ae.lastIndex=0;while(null!==(r=Ae.exec(e))){const e="not"===r[1];let n,i=false;Se.lastIndex=0;while(null!==(n=Se.exec(r[2]))){const e=n[1];let r=n[2];const s=n[3];if(e.startsWith("min"))r=">=";else if(e.startsWith("max"))r="<=";switch(e){case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":if(s){const[e,t]=W(s.split("/"),e=>parseInt(e));i=Be(r,window.innerWidth/window.innerHeight,e/t)}else i=false;break;case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":i=Be(r,e.endsWith("width")?window.innerWidth:window.innerHeight,pt(s,t));break;case"orientation":i="portrait"===s&&window.innerWidth<=window.innerHeight||"landscape"===s&&window.innerWidth>window.innerHeight;break;case"resolution":case"min-resolution":case"max-resolution":if(s){let e=parseFloat(s);if(s.endsWith("dpcm"))e*=2.54;else if(s.endsWith("dppx"))e*=96;i=Be(r,Y(),e)}else i=false;break;case"grid":i="0"===s;break;case"color":i=void 0===s||parseInt(s)>0;break;case"min-color":i=parseInt(s)<=screen.colorDepth/3;break;case"max-color":i=parseInt(s)>=screen.colorDepth/3;break;case"color-index":case"min-color-index":case"monochrome":case"min-monochrome":i="0"===s;break;case"max-color-index":case"max-monochrome":i=parseInt(s)>=0;break;default:i=false;break}if(!i)break}if(!e&&i||e&&!i)return true}}}return false}function lt(e,t,r,...n){let i="",s=e.parentElement;while(s&&!n.includes(s.tagName)){if(i=et(s)[t],"inherit"===i||(null==r?void 0:r.test(i)))i="";else if(i)break;s=s.parentElement}return i}function ot(e,t){const r=et(e);let n;while(null!==(n=s.VAR.exec(t))){let e=r.getPropertyValue(n[1]).trim();const i=n[2];if(i&&(""===e||vt(i,true)&&!vt(e,true)||A(i)&&!A(e)||pe(i)&&!pe(e)))e=i;if(e)t=t.replace(n[0],e).trim();else return""}return t}function ct(e,t,r){t=t.trim();const n=Object.assign({},r);let i,s,a,l,o,c,u;if(r){if(Array.isArray(r.orderedSize))i=r.orderedSize;if(Array.isArray(r.dimension))s=r.dimension;({separator:a,unitType:l,checkUnit:o,errorString:c}=r)}switch(l){case 32:case 64:u="";break;case 4:u="%";break;case 8:u="ms";break;case 16:u="deg";break;default:u="px",l=2;break}const h=[];for(let r of a?t.split(a):[t])if(r=r.trim(),""!==r){const t=k(r,"calc"),a=t.length;if(a){let r="",c=0,f=0;while(c<a){let a=t[c++];if(wt(a)){if(void 0!==(null==i?void 0:i[f]))n.boundingSize=i[f++];else if(s)n.dimension=s[f++],n.boundingSize=void 0;else if(i)n.boundingSize=void 0;const t=ut(e,a,n);if(!isNaN(t))r+=t+u;else return""}else if(r+=a,s)if(a=a.trim(),""!==a&&(!o||2===l&&(vt(a,true)||"auto"===a)))++f}h.push(r)}else return""}if(t=1===h.length?h[0]:h.join(" "===a?" ":a?a+" ":""),c){let e;while(null!==(e=c.exec(t))){if(void 0===e[1])return"";const r=e[0];let n=r;let i=e.length-1;while(i>=1)n=n.replace(new RegExp(e[i--]+"$"),"");if(n===r)return"";else t=t.replace(r,n)}}return t}function ut(e,t,r={}){const n=ot(e,t);if(n){const{precision:i,unitType:s}=r;if(t.includes("%")){if(false===r.supportPercent||32===s)return NaN;else if(void 0===r.boundingSize){const{dimension:t,boundingBox:n}=r;if(t)if(n)r.boundingSize=n[t];else{let n,i=0;if(false===r.parent)n=e;else if(n=e.parentElement,n instanceof HTMLElement){let r;if(Ge(et(e).position))do{if(r=et(n),n===document.body)break;switch(r.position){case"static":case"initial":case"unset":n=n.parentElement;continue}break}while(n);else r=et(n);if(r)i="width"===t?$e(r):We(r)}else if(e instanceof SVGElement){if(true!==r.parent)n=e}else n=null;if(n)r.boundingSize=Math.max(0,n.getBoundingClientRect()[t]-i)}}}else if(r.supportPercent)return NaN;if((!s||2===s)&&/\d(em|ch)/.test(t)&&void 0===r.fontSize)r.fontSize=tt(e);let a=dt(n,r);if(void 0!==i)a=0===i?Math.floor(a):parseFloat(te(a,i));else if(r.roundValue)a=Math.round(a);return a}return NaN}function ht(e){const t=e.parentElement;let r=0,n=0;if(t){const e=et(t);({width:r,height:n}=t.getBoundingClientRect()),r=Math.max(0,r-$e(e)),n=Math.max(0,n-We(e))}return{width:r,height:n}}function ft(e){const t=s.URL.exec(e);return t?t[1]||t[2]:""}function gt(e,t="deg"){let r=v(e);switch(t){case"rad":r*=180/Math.PI;break;case"grad":r/=400;case"turn":r*=360;break}return r}function dt(e,t={}){if(""===(e=e.trim()))return NaN;const{boundingSize:r,min:n,max:i,unitType:s,fontSize:a}=t;let l=e.length;if("("!==e.charAt(0)||")"!==e.charAt(l-1))e=`(${e})`,l+=2;let o=0;const c=[],u=[];for(let t=0;t<l;++t)switch(e.charAt(t)){case"(":o++,c[t]=true;break;case")":u.push(t);break}if(o===u.length){const t=[];let l=0;while(true)for(let o=0;o<u.length;++o){let h=u[o]-1,f=false;for(;h>=0;h--)if(c[h]){f=true,c[h]=false;break}else if(u.includes(h))break;if(f){let c,f;const g=()=>{if(c)switch(f){case"+":case"-":if(A(c))return false;break;case"*":case"/":if(!A(c))return false;break}return true},d=()=>{if(c)switch(f){case"+":case"-":return false}return true};let p=false;const b=[],m=[],E=e.substring(h+1,u[o]).split(Fe),v=E.length;let w=0;while(w<v){const e=E[w++].trim();switch(e){case"+":case"-":case"*":case"/":m.push(e),f=e;break;default:{const n=/\s*{(\d+)}\s*/.exec(e);if(n){switch(s){case 32:case 64:break;default:if(!g())return NaN;break}const e=t[parseInt(n[1])];b.push(e),c=e.toString(),p=true}else{switch(s){case 4:if(A(e)){if(!d())return NaN;b.push(parseFloat(e))}else if(At(e)){if(!g())return NaN;b.push(parseFloat(e)),p=true}else return NaN;break;case 8:if(A(e)){if(!d())return NaN;b.push(parseFloat(e))}else if(xt(e)){if(!g())return NaN;b.push(mt(e)),p=true}else return NaN;break;case 16:if(A(e)){if(!d())return NaN;b.push(parseFloat(e))}else if(kt(e)){if(!g())return NaN;b.push(bt(e)),p=true}else return NaN;break;case 32:if(Te.test(e))b.push(parseInt(e)),p=true;else return NaN;break;case 64:if(A(e))b.push(parseFloat(e)),p=true;else if(At(e)&&void 0!==r&&!isNaN(r))b.push(parseFloat(e)/100*r);else return NaN;break;default:if(A(e)){if(!d())return NaN;b.push(parseFloat(e))}else if(vt(e)){if(!g())return NaN;b.push(pt(e,a)),p=true}else if(At(e)&&void 0!==r&&!isNaN(r)){if(!g())return NaN;b.push(parseFloat(e)/100*r),p=true}else return NaN;break}c=e}break}}}if(!p||b.length!==m.length+1)return NaN;for(w=0;w<m.length;++w)if("/"===m[w])if(0!==Math.abs(b[w+1]))b.splice(w,2,b[w]/b[w+1]),m.splice(w--,1);else return NaN;for(w=0;w<m.length;++w)if("*"===m[w])b.splice(w,2,b[w]*b[w+1]),m.splice(w--,1);for(w=0;w<m.length;++w)b.splice(w,2,b[w]+b[w+1]*("-"===m[w]?-1:1)),m.splice(w--,1);if(1===b.length)if(1===u.length){const e=b[0];if(void 0!==n&&e<n||void 0!==i&&e>i)return NaN;else return re(e)}else{t[l]=b[0];const r=`{${l++}}`,n=u[o]+1;e=e.substring(0,h)+r+" ".repeat(n-(h+r.length))+e.substring(n),u.splice(o--,1)}else return NaN}}}return NaN}function pt(e,t,r){const n=i.LENGTH.exec(e);if(n){let e=parseFloat(n[1]);switch(n[2]){case"px":return e;case"em":case"ch":return e*(null!=t?t:tt(document.body)||16);case"rem":return e*(tt(document.body)||16);case"pc":e*=12;case"pt":return 4*e/3;case"mm":e/=10;case"cm":e/=2.54;case"in":return e*Y();case"vw":return e*Ve(r)/100;case"vh":return e*Ue(r)/100;case"vmin":return e*Math.min(Ve(r),Ue(r))/100;case"vmax":return e*Math.max(Ve(r),Ue(r))/100}}return 0}function bt(e){const t=s.ANGLE.exec(e);return t?gt(t[1],t[2]):0}function mt(e){const t=s.TIME.exec(e);if(t)switch(t[2]){case"ms":return parseInt(t[1]);case"s":return 1e3*parseFloat(t[1])}return 0}function Et(e,t=true){if("string"==typeof e)if(e=parseFloat(e),isNaN(e))return"0%";return e*=100,(t?Math.round(e):e)+"%"}function vt(e,t){return!t?i.LENGTH.test(e):i.LENGTH_PERCENTAGE.test(e)}function wt(e){return s.CALC.test(e)}function yt(e){return s.CUSTOM_PROPERTY.test(e)}function kt(e){return s.ANGLE.test(e)}function xt(e){return s.TIME.test(e)}function At(e){return i.PERCENT.test(e)}function St(e){return Ie.test(e)}var Rt=Object.freeze({__proto__:null,BOX_POSITION:["top","right","bottom","left"],BOX_MARGIN:["marginTop","marginRight","marginBottom","marginLeft"],BOX_BORDER:[["borderTopStyle","borderTopWidth","borderTopColor"],["borderRightStyle","borderRightWidth","borderRightColor"],["borderBottomStyle","borderBottomWidth","borderBottomColor"],["borderLeftStyle","borderLeftWidth","borderLeftColor"],["outlineStyle","outlineWidth","outlineColor"]],BOX_PADDING:["paddingTop","paddingRight","paddingBottom","paddingLeft"],TEXT_STYLE:["fontFamily","fontSize","fontWeight","fontStyle","color","whiteSpace","textDecoration","textTransform","letterSpacing","wordSpacing"],getStyle:et,getFontSize:tt,hasComputedStyle:rt,parseSelectorText:function(e,t){if((e=t?e.trim():Je(e.trim())).includes(",")){let t,r=e,n=false;while(null!==(t=s.SELECTOR_ATTR.exec(r))){const e=t.index,i=t[0].length;r=(e>0?r.substring(0,e):"")+"_".repeat(i)+r.substring(e+i),n=true}if(n){const t=[];let n=0;while(true){const i=r.indexOf(",",n);if(-1!==i){const r=e.substring(n,i).trim();t.push(0===n?r:Je(r)),n=i+1}else{if(n>0)t.push(Je(e.substring(n).trim()));break}}return t}return W(e.split(a.SEPARATOR),e=>Je(e))}return[e]},getSpecificity:function e(t){let r,n=0;s.SELECTOR_G.lastIndex=0;while(null!==(r=s.SELECTOR_G.exec(t))){let t,i=r[1];if(1===i.length)switch(i.charAt(0)){case"+":case"~":case">":case"*":continue}else if(i.startsWith("*|*")){if(i.length>3)return 0}else if(i.startsWith("*|"))i=i.substring(2);else if(i.startsWith("::"))return 0;while(null!==(t=s.SELECTOR_ATTR.exec(i))){if(t[1])n+=1;if(t[3]||t[4]||t[5])n+=10;i=m(i,t.index,t[0].length)}while(null!==(t=s.SELECTOR_PSEUDO_CLASS.exec(i))){if(t[0].startsWith(":not(")){const r=t[1];if(r){const t=s.SELECTOR_G.lastIndex;n+=e(r),s.SELECTOR_G.lastIndex=t}}else switch(r[2]){case":scope":case":root":break;default:n+=10;break}i=m(i,t.index,t[0].length)}while(null!==(t=s.SELECTOR_PSEUDO_ELEMENT.exec(i)))n+=1,i=m(i,t.index,t[0].length);while(null!==(t=s.SELECTOR_LABEL.exec(i))){const e=t[0];switch(e.charAt(0)){case"#":n+=100;break;case".":n+=10;break;default:n+=1;break}i=m(i,t.index,e.length)}}return n},checkWritingMode:nt,calculateStyle:it,checkStyleValue:function(e,t,r,n){if("inherit"===r)switch(t){case"fontSize":case"lineHeight":if(n)return n[t];default:return lt(e,t)}else if(St(r)){if(""===(r=it(e,t,r))&&n)r=n[t]}else if(yt(r))if(""===(r=ot(e,r))&&n)r=n[t];return r||""},getKeyframesRules:function(){const e={};e:{const t=document.styleSheets,r=t.length;let n=0;while(n<r){const r=t[n++].cssRules;if(r){const t=r.length;for(let n=0;n<t;++n)try{const t=r[n];if(t.type===CSSRule.KEYFRAMES_RULE){const r=st(t.cssRules);if(Object.keys(r).length){const n=t.name;if(e[n])Object.assign(e[n],r);else e[n]=r}}}catch(e){break e}}}}return e},parseKeyframes:st,checkMediaRule:at,isParentStyle:function(e,t,...r){if("#"!==e.nodeName.charAt(0)&&r.includes(et(e)[t]))return true;else{const n=e.parentElement;if(n)return r.includes(et(n)[t])}return false},getInheritedStyle:lt,parseVar:ot,calculateVarAsString:ct,calculateVar:ut,getParentBoxDimension:ht,getBackgroundPosition:function(e,t,r={}){if(""!==(e=e.trim())){const{fontSize:n,imageDimension:i,imageSize:s,screenDimension:a}=r,{width:o,height:c}=t,u=e.split(l.SPACE);if(1===u.length)u.push("center");const h=u.length;if(h<=4){const e=He(u),t=(t,r,u,h)=>{if(i&&!vt(t)){let t=e[h];if(s&&"auto"!==s&&"initial"!==s){const[e,u]=s.split(l.SPACE);if(r){let r=o;if(vt(e,true))if(At(e))r*=parseFloat(e)/100;else{const t=pt(e,n,a);if(t)r=t}else if(u){let e=1;if(At(u))e=parseFloat(u)/100*c/i.height;else if(vt(u)){const t=pt(u,n,a);if(t)e=t/i.height}r=e*i.width}t*=r}else{let r=c;if(vt(u,true))if(At(u))r*=parseFloat(u)/100;else{const e=pt(u,n,a);if(e)r=e}else if(e){let t=1;if(At(e))t=parseFloat(e)/100*o/i.width;else if(vt(e)){const r=pt(e,n,a);if(r)t=r/i.width}r=t*i.height}t*=r}}else t*=r?i.width:i.height;e[u]-=t}};if(2===h){u.sort((e,t)=>{switch(e){case"left":case"right":return-1;case"top":case"bottom":return 1}switch(t){case"left":case"right":return 1;case"top":case"bottom":return-1}return 0});for(let r=0;r<2;++r){let i=u[r];const s=0===r,[l,h]=s?["left",o]:["top",c],f=l+"AsPercent";switch(i){case"0%":if(s)i="left";case"left":case"top":break;case"100%":if(s)i="right";case"right":case"bottom":e[l]=h,e[f]=1;break;case"50%":case"center":i="center",e[l]=h/2,e[f]=.5;break;default:{const t=Ye(i,h,n,a);if(t>1)u[r]="100%",i=s?"right":"bottom",e[i]=-1*Xe(Et(t-1),h,n,a);else e[l]=Xe(i,h,n,a);e[f]=t;break}}if(s)e.horizontal=i;else e.vertical=i;t(i,s,l,f)}}else{let r=0,i=0;const s=(n,s)=>{switch(n){case"left":case"right":e.horizontal=n,r++;break;case"center":if(4===h)return false;else{let i=true;if(void 0===s)if(r>0)e.vertical=n,i=false;else e.horizontal=n;else switch(s){case"left":case"right":e.vertical=n,i=false;break;case"top":case"bottom":e.horizontal=n;break;default:return false}if(i)e.left=o/2,e.leftAsPercent=.5,t(n,true,"left","leftAsPercent");else e.top=c/2,e.topAsPercent=.5,t(n,false,"top","topAsPercent")}break;case"top":case"bottom":e.vertical=n,i++;break;default:return false}return r<2&&i<2};for(let r=0;r<h;++r){const i=u[r];if(vt(i,true)){const s=u[r-1];switch(s){case"left":case"right":{const r=Xe(i,o,n,a),l=Ye(i,o,n,a);if("right"===s)e.right=r,e.rightAsPercent=l,t(i,true,"right","rightAsPercent"),e.left=o-r,e.leftAsPercent=1-l;else{if(l>1){const r=1-l;e.horizontal="right",e.right=Xe(Et(r),o,n,a),e.rightAsPercent=r,t(i,true,"right","rightAsPercent")}e.left=r,e.leftAsPercent=l}t(i,true,"left","leftAsPercent");break}case"top":case"bottom":{const r=Xe(i,c,n,a),l=Ye(i,c,n,a);if("bottom"===s)e.bottom=r,e.bottomAsPercent=l,t(i,false,"bottom","bottomAsPercent"),e.top=c-r,e.topAsPercent=1-l;else{if(l>1){const r=1-l;e.horizontal="bottom",e.bottom=Xe(Et(r),c,n,a),e.bottomAsPercent=r,t(i,false,"bottom","bottomAsPercent")}e.top=r,e.topAsPercent=l}t(i,false,"top","topAsPercent");break}default:return He()}}else if(!s(i,u[r+1]))return He()}}return e.static=0===e.top&&0===e.right&&0===e.bottom&&0===e.left,e}}return He()},getSrcSet:function(e,t){const r=e.parentElement,n=[];let{srcset:i,sizes:o}=e;if("PICTURE"===(null==r?void 0:r.tagName))j(r.children,e=>{if("SOURCE"===e.tagName){const{media:r,type:n,srcset:s}=e;if(S(s)&&!(S(r)&&!at(r))&&(!S(n)||!t||t.includes(n.trim().toLowerCase())))return i=s,o=e.sizes,true}});if(""!==i)i.trim().split(a.SEPARATOR).forEach(e=>{const t=Re.exec(e);if(t){let e=0,r=0;switch(t[3]){case"w":e=v(t[2]);break;case"x":r=v(t[2]);break;default:r=1;break}n.push({src:N(t[1].split(l.SPACE)[0]),pixelRatio:r,width:e})}});const c=n.length;if(0===c)n.push({src:e.src,pixelRatio:1,width:0});else if(c>1)if(n.sort((e,t)=>{const r=e.pixelRatio,n=t.pixelRatio;if(r>0&&n>0){if(r!==n)return r<n?-1:1}else{const r=e.width,n=t.width;if(r!==n&&r>0&&n>0)return r<n?-1:1}return 0}),S(o)){let t=NaN;for(const r of o.trim().split(a.SEPARATOR)){let n=_e.exec(r);if(n){const r=n[2]?at(n[2]):void 0,i=n[6]?at(n[6]):void 0;switch(n[5]){case"and":if(!r||!i)continue;break;case"or":if(!r&&!i)continue;break;case"not":if(void 0!==r||i)continue;break;default:if(false===r||void 0!==i)continue;break}const a=n[9];if(a)if(n=s.CALC.exec(a),n)t=dt(n[1],n[1].includes("%")?{boundingSize:ht(e).width}:void 0);else if(At(a))t=parseFloat(a)/100*ht(e).width;else if(vt(a))t=pt(a);if(!isNaN(t))break}}if(!isNaN(t)){const e=t*window.devicePixelRatio;let r=-1;for(let t=0;t<c;++t){const i=n[t].width;if(i>0&&i<=e&&(-1===r||n[r].width<i))r=t}if(0===r){const e=n[0];e.pixelRatio=1,e.actualWidth=t}else if(r>0){const e=n.splice(r,1)[0];e.pixelRatio=1,e.actualWidth=t,n.unshift(e)}let i=1;while(i<c){const e=n[i++];if(0===e.pixelRatio)e.pixelRatio=e.width/t}}}return n},convertListStyle:function(e,t,r){switch(e){case"decimal":return t.toString();case"decimal-leading-zero":return(t<9?"0":"")+t.toString();case"upper-alpha":case"upper-latin":if(t>=1)return w(t-1);break;case"lower-alpha":case"lower-latin":if(t>=1)return w(t-1).toLowerCase();break;case"upper-roman":return y(t);case"lower-roman":return y(t).toLowerCase()}return r?t.toString():""},extractURL:ft,resolveURL:function(e){return""!==(e=ft(e))?N(e):""},insertStyleSheetRule:function(e,t=0){const r=document.createElement("style");if(X(4))r.appendChild(document.createTextNode(""));document.head.appendChild(r);const n=r.sheet;if("function"==typeof(null==n?void 0:n.insertRule))try{n.insertRule(e,t)}catch(e){return null}return r},convertAngle:gt,convertPX:function(e,t){return e?pt(e,t)+"px":"0px"},calculate:dt,parseUnit:pt,parseAngle:bt,parseTime:mt,formatPX:function(e){return Math.round(e)+"px"},formatPercent:Et,isLength:vt,isCalc:wt,isCustomProperty:yt,isAngle:kt,isTime:xt,isPercent:At,hasCalc:St});function Ft(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}}function Tt(e,t=true){const r={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height};if(t){const{scrollX:e,scrollY:t}=window;if(0!==t)r.top+=t,r.bottom+=t;if(0!==e)r.left+=e,r.right+=e}return r}function Ct(e){const t=[],r=document.createRange();r.selectNodeContents(e);const n=r.getClientRects();let i,s=n.length,a=0;while(a<s){const e=n.item(a++);if(Math.round(e.width)>0&&!B(e.left,e.right,.5))t.push(e)}if(s=t.length,s){i=Tt(t[0]);let e=1,r=false;a=0;while(++a<s){const{left:n,right:s,top:l,bottom:o,width:c}=t[a];if(n<i.left)i.left=n;else if(n>i.right)r=true;if(s>i.right)i.right=s;if(l<i.top)i.top=l;else if(l>=t[a-1].bottom)e++;if(o>i.bottom)i.bottom=o;i.width+=c}if(i.height=i.bottom-i.top,e>1)i.numberOfLines=e,i.overflow=r}else i={top:0,left:0,right:0,bottom:0,width:0,height:0};return i}var Nt=Object.freeze({__proto__:null,ELEMENT_BLOCK:["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DD","DETAILS","DIALOG","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","TABLE","UL"],newBoxRect:function(){return{top:0,left:0,right:0,bottom:0}},newBoxRectDimension:Ft,newBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},withinViewport:function(e){return!(e.top+window.scrollY+e.height<0||e.left+window.scrollX+e.width<0)},assignRect:Tt,getRangeClientRect:Ct,removeElementsByClassName:function(e){Array.from(document.getElementsByClassName(e)).forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.removeChild(e)})},getElementsBetweenSiblings:function(e,t){const r=[];if(!e||e.parentElement===t.parentElement){const n=t.parentElement;if(n){let i=e?-1:0,s=-1;if(j(n.childNodes,(r,n)=>{if(r===t){if(s=n,-1!==i)return true}else if(r===e)if(i=n,-1!==s)return true}),-1!==i&&-1!==s)j(n.childNodes,e=>{const t=e.nodeName;if("#"!==t[0]||"#text"===t)r.push(e)},Math.min(i,s),Math.max(i,s)+1)}}return r},createElement:function(e,t,r){const n=document.createElement(t),i=n.style;for(const e in r)if(e.includes("-"))i.setProperty(e,r[e]);else i[e]=r[e];return e.appendChild(n),n},measureTextWidth:function(e,t,r){if(t&&r){const n=document.createElement("canvas").getContext("2d");if(n)return n.font=`${r}px ${t}`,n.measureText(e).width}return 0},getNamedItem:function(e,t){var r;return(null===(r=e.attributes.getNamedItem(t))||void 0===r?void 0:r.value.trim())||""},isTextNode:function(e){return"#text"===e.nodeName}});function Pt(e,t,r,n){e[`__${t}::${r}`]=n}function It(e,t,r){if(!r)r=e["__sessionId::0"]||"0";return e[`__${t}::${r}`]}var Lt=Object.freeze({__proto__:null,actualClientRect:function(e,t){if(t){const r=It(e,"clientRect",t);if(r)return r}const r=e.getBoundingClientRect();if(t)Pt(e,"clientRect",t,r);return r},actualTextRangeRect:function(e,t){if(t){const r=It(e,"textRangeRect",t);if(r)return r}let r;if(e.childElementCount)j(e.children,e=>{const t=et(e);if("visible"!==t.getPropertyValue("visibility")){const n=t.getPropertyValue("position");if("absolute"===n||"fixed"===n){const n=t.getPropertyValue("display");if("none"!==n){if(e.style.display="none",!r)r=[];r.push([e,n])}}}});const n=Ct(e);if(null==r||r.forEach(e=>e[0].style.display=e[1]),t)Pt(e,"textRangeRect",t,n);return n},getStyleValue:function(e,t,r){var n;return(null===(n=It(e,"styleMap",r))||void 0===n?void 0:n[E(t)])||""},getPseudoElt:function(e,t){return It(e,"pseudoElement",t)||""},getElementAsNode:function(e,t){return It(e,"node",t)||null},setElementCache:Pt,getElementCache:It,deleteElementCache:function(e,t,r){delete e[`__${t}::${r}`]}});const _t=/^(\t+)(.*)$/,Bt={ITEM:/\s*(<(\/)?([?\w]+)[^>]*>)\n?([^<]*)/g,OPENTAG:/\s*>$/,CLOSETAG:/\/>\n*$/,NBSP:/&nbsp;/g,AMP:/&/g},Ot="&#160;".repeat(8);function Mt(e,t,r="\t",n){if(t>0){if(void 0===n)n=r.repeat(t);return z(e.split("\n"),e=>""!==e?n+e:"")}return e}var Dt=Object.freeze({__proto__:null,STRING_XMLENCODING:'<?xml version="1.0" encoding="utf-8"?>\n',STRING_SPACE:"&#160;",STRING_TABSPACE:Ot,isPlainText:function(e){const t=e.length;let r=0;while(r<t)switch(e.charCodeAt(r++)){case 9:case 10:case 13:case 32:continue;default:return true}return false},pushIndent:Mt,pushIndentArray:function(e,t,r="\t",n=""){if(t>0){const n=r.repeat(t),i=e.length;let s=0;while(s<i)e[s]=Mt(e[s++],t,r,n)}return e.join(n)},replaceIndent:function(e,t,r){if(t>=0){let n=-1;return z(e.split("\n"),e=>{const i=r.exec(e);if(i){if(-1===n)n=i[2].length;return(i[1]||"")+"\t".repeat(t+(i[2].length-n))+i[3]}return e})}return e},replaceTab:function(e,t=4,r=false){if(t>0)if(r)return z(e.split("\n"),e=>{const r=_t.exec(e);if(r)return" ".repeat(t*r[1].length)+r[2];else return e});else return e.replace(/\t/g," ".repeat(t));return e},applyTemplate:function e(t,r,n,i){const s=r[t],a=true===s[">>"];let l="",o="";if(void 0===i)l+='<?xml version="1.0" encoding="utf-8"?>\n',i=0;else o+="\t".repeat(i);let c=n.length,u=-1;while(++u<c){const r=n[u],c=s["#"]&&r[s["#"]],h=!a&&!c,f=s["@"],g=s[">"];let d=false;if(l+=o+"<"+t,null==f||f.forEach(e=>{const t=r[e];if(t)l+=` ${(s["^"]?s["^"]+":":"")+e}="${t}"`}),g){let n="";const s=i+(a?u:0)+1;for(const t in g){const i=r[t];if(Array.isArray(i))n+=e(t,g,i,s);else if(F(i))n+=e(t,g,[i],s)}if(""!==n){if(l+=">\n"+n,h)l+=o+`</${t}>\n`}else l+=h?" />\n":">\n";d=true}else if(s["~"]){if(l+=">"+r.innerText,h)l+=`</${t}>\n`;d=true}else if(h)l+=" />\n";if(c){if(!d)l+=">\n";if(l+=c,!a)l+=o+`</${t}>\n`}if(a)o+="\t"}if(a)while(--c>=0)o=o.substring(1),l+=o+`</${t}>\n`;return l},formatTemplate:function(e,t=true,r=-1,n="\t"){const i=[];let s;while(null!==(s=Bt.ITEM.exec(e)))i.push({tag:s[1],closing:!!s[2],tagName:s[3],value:s[4].trim()});let a="",l=r;const o=i.length;let c=-1;while(++c<o){const e=i[c];let s=l;if(c>0){if(e.closing)--l;else if(++s,!Bt.CLOSETAG.exec(e.tag))if(t&&""===e.value.trim()){const t=i[c+1];if((null==t?void 0:t.closing)&&t.tagName===e.tagName)e.tag=e.tag.replace(Bt.OPENTAG," />"),++c;else++l}else++l;let r=true;e.tag.trim().split("\n").forEach(e=>{const t=s+(r?0:1);a+=(t>0?n.repeat(t):"")+e.trim()+"\n",r=false})}else a+=(r>0?n.repeat(r):"")+e.tag+"\n";a+=e.value}return a},replaceCharacterData:function(e,t=false){const r=[];let n=(e=e.replace(Bt.NBSP,"&#160;").replace(c.NONENTITY,"&amp;")).length,i=-1;while(++i<n){switch(e.charAt(i)){case"'":r.push({i:i,text:"\\'"});break;case'"':r.push({i:i,text:"&quot;"});break;case"<":r.push({i:i,text:"&lt;"});break;case">":r.push({i:i,text:"&gt;"});break;case"\t":if(t)r.push({i:i,text:Ot});break;case"":r.push({i:i,text:" "});break;case"":r.push({i:i,text:"&#160;"});break}}if(n=r.length,n){const t=e.split("");let s,a=0;while(a<n)({i:i,text:s}=r[a++]),t[i]=s;return t.join("")}return e}}),zt=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{o(n.next(e))}catch(e){s(e)}}function l(e){try{o(n.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}o((n=n.apply(e,t||[])).next())}))};const jt=new Set,$t=new Map,Wt={},Gt=new Set,Ht={};let Vt,Ut;function Xt(e,t){if(Vt&&!e.includes(t))t.application=Vt,e.push(t)}const Yt=e=>false===(null==e?void 0:e.initializing)&&e.length>0;function qt(...e){if(Vt){const t=Vt.extensionManager;for(const e of jt)t.include(e);for(const[e,t]of $t.entries())Zt(e,t);if(jt.clear(),$t.clear(),!Vt.closed)return Vt.parseDocument(...e);else if(!Wt.showErrorMessages||confirm("ERROR: Document is closed. Reset and rerun?"))return Vt.reset(),Vt.parseDocument(...e)}else if(Wt.showErrorMessages)alert("ERROR: Framework not installed.");return new class{then(e){return this}catch(e){return e(new Error("Framework not installed.")),this}finally(e){return this}}}function Zt(e,t){if(F(t))if("string"==typeof e){if(Vt){e=e.trim();const r=Vt.extensionManager.retrieve(e)||O(jt,t=>t.name===e);if(r)return Object.assign(r.options,t),true;else return $t.set(e,t),true}}else if(e instanceof squared.base.Extension)return Object.assign(e.options,t),true;return false}function Kt(e){let t=null;if(Vt)if(t=Vt.extensionManager.retrieve(e),null===t)for(const t of Gt)if(t.name===e)return t;return t}function Qt(){null==Vt||Vt.reset()}const Jt={base:{Container:V},client:q,color:ye,css:Rt,dom:Nt,math:ue,regex:u,session:Lt,util:H,xml:Dt};e.appendFromArchive=function(e,t){var r;if(Yt(Vt)&&S(e)&&F(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length))Vt.appendFromArchive(e,t)},e.appendToArchive=function(e,t){if(Yt(Vt)&&S(e))Vt.finalize(),Vt.appendToArchive(e,t)},e.close=function(){if(Yt(Vt))Vt.finalize()},e.configure=Zt,e.copyToDisk=function(e,t){if(Yt(Vt)&&S(e))Vt.finalize(),Vt.copyToDisk(e,t)},e.createFrom=function(e,t){var r;if(Yt(Vt)&&S(e)&&F(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length))Vt.createFrom(e,t)},e.exclude=function(e){if(Vt){const t=Vt.extensionManager;if("string"==typeof e)e=t.retrieve(e.trim());if(e instanceof squared.base.Extension)return jt.delete(e),Gt.delete(e),t.exclude(e)}return false},e.include=function(e,t){if(Vt){if("string"==typeof e)e=e.trim(),e=Vt.builtInExtensions[e]||Kt(e);if(e instanceof squared.base.Extension){if(Gt.add(e),!Vt.extensionManager.include(e))jt.add(e);if(t)Zt(e,t);return true}}return false},e.lib=Jt,e.parseDocument=qt,e.parseDocumentAsync=function(...e){return zt(this,void 0,void 0,(function*(){return yield qt(...e)}))},e.ready=function(){return false===(null==Vt?void 0:Vt.initializing)&&!Vt.closed},e.reset=Qt,e.retrieve=Kt,e.saveToArchive=function(e,t){if(Yt(Vt))Vt.finalize(),Vt.saveToArchive(e,t)},e.setFramework=function(e,t=false){const r=void 0!==Ut;if(Ut!==e){const n=t?e.cached():e.create();if(!r)Object.assign(n.userSettings,Wt);Object.assign(Wt,n.userSettings),Vt=n.application,Vt.userSettings=Wt;const{builtInExtensions:i,extensions:s}=Vt;if(s.length=0,Wt.builtInExtensions.forEach(e=>{const t=i[e];if(t)Xt(s,t);else{e+=".";for(const t in i)if(t.startsWith(e))Xt(s,i[t])}}),Ut=e,r)Object.keys(Ht).forEach(e=>delete Ht[e]);Object.assign(Ht,e.system)}if(r)Qt()},e.setViewModel=function(e){if(Vt)Vt.viewModel=e},e.settings=Wt,e.system=Ht,e.toString=function(){return(null==Vt?void 0:Vt.toString())||""},Object.defineProperty(e,"__esModule",{value:true})}));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.base={}))}(this,(function(e){"use strict";class t extends squared.lib.base.Container{constructor(e){super(e),this._currentId=0}append(e,t=false,i=false){var s;if(super.append(e),t)null===(s=this.afterAppend)||void 0===s||s.call(this,e,i);return this}reset(){return this._currentId=0,this.clear(),this}get nextId(){return++this._currentId}}const i=squared.lib,{STRING:s,XML:n}=i.regex,{extractURL:a}=i.css,{fromLastIndexOf:r,fromMimeType:l,hasMimeType:o,randomUUID:c}=i.util;class h{reset(){const e=h.ASSETS;for(const t in e)e[t].clear()}addImage(e){var t;if(null==e?void 0:e.complete){const i=e.src;if(i.startsWith("data:image/")){const a=new RegExp(`^${s.DATAURI}$`).exec(i);if(a){const s=a[1].split(n.DELIMITER);this.addRawData(i,s[0].trim(),(null===(t=s[1])||void 0===t?void 0:t.trim())||"base64",a[2],e.naturalWidth,e.naturalHeight)}}if(""!==i)h.ASSETS.image.set(i,{width:e.naturalWidth,height:e.naturalHeight,uri:i})}}addVideo(e,t){h.ASSETS.video.set(e,{uri:e,mimeType:t})}addAudio(e,t){h.ASSETS.audio.set(e,{uri:e,mimeType:t})}addFont(e){const t=h.ASSETS.fonts,i=e.fontFamily.trim().toLowerCase();e.fontFamily=i;const s=t.get(i);if(s)s.push(e);else t.set(i,[e])}addRawData(e,t,i,s,n=0,a=0){let o;if(t=t.toLowerCase(),"base64"===(i=i.toLowerCase())){if(o=s,"image/svg+xml"===t)s=window.atob(s)}else s=s.replace(/\\(["'])/g,(e,...t)=>t[0]);const c=this.mimeTypeMap.image;if("*"===c||c.includes(t)){const i=location.origin,c=l(t),d=e.endsWith("."+c)?r(e,"/"):this.randomUUID+"."+c;return h.ASSETS.rawData.set(e,{pathname:e.startsWith(i)?e.substring(i.length+1,e.lastIndexOf("/")):"",filename:d,content:s,base64:o,mimeType:t,width:n,height:a}),d}return""}getImage(e){return h.ASSETS.image.get(e)}getVideo(e){return h.ASSETS.video.get(e)}getAudio(e){return h.ASSETS.audio.get(e)}getFont(e,t="normal",i){const s=h.ASSETS.fonts.get(e.trim().toLowerCase());if(s){const e=this.mimeTypeMap.font;return s.find(s=>s.fontStyle===t&&(!i||s.fontWeight===parseInt(i))&&(o(e,s.srcFormat)||s.srcUrl&&o(e,s.srcUrl)))}}getRawData(e){if(e.startsWith("url("))if(""===(e=a(e)))return;return h.ASSETS.rawData.get(e)}setFileHandler(e){e.resource=this,this.fileHandler=e}get mimeTypeMap(){return this.controllerSettings.mimeType}get randomUUID(){return c()}}h.KEY_NAME="squared.resource",h.ASSETS={ids:new Map,fonts:new Map,image:new Map,video:new Map,audio:new Map,rawData:new Map},h.canCompressImage=e=>/\.(png|jpg|jpeg)$/i.test(e);var d=function(e,t,i,s){return new(i||(i=Promise))((function(n,a){function r(e){try{o(s.next(e))}catch(e){a(e)}}function l(e){try{o(s.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}o((s=s.apply(e,t||[])).next())}))};const u=squared.lib,{getSpecificity:f,getStyle:g,hasComputedStyle:p,insertStyleSheetRule:m,parseSelectorText:b,checkMediaRule:x}=u.css,{isTextNode:y}=u.dom,{convertCamelCase:v,isString:E,objectMap:S,resolvePath:I}=u.util,{CHAR:w,FILE:_,STRING:T,XML:k}=u.regex,{getElementCache:A,setElementCache:N}=u.session,{image:C,rawData:R}=h.ASSETS,P=/all|screen/,M=/^background/,B=/\s*([a-z-]+):[^!;]+!important;/g,L=/\s*@font-face\s*{([^}]+)}\s*/,F=/\s*font-family:[^\w]*([^'";]+)/,W=/\s*src:\s*([^;]+);/,O=/\s*font-style:\s*(\w+)\s*;/,V=/\s*font-weight:\s*(\d+)\s*;/,D=/\s*(url|local)\((?:["']([^'")]+)["']|([^)]+))\)(?:\s*format\(["']?([\w-]+)["']?\))?\s*/,H=new RegExp(`url\\(["']?(${T.DATAURI})["']?\\),?\\s*`,"g");function X(e,t=0,i=0){if(""!==e){const s=C.get(e);if(t>0&&i>0||!s||0===s.width||0===s.height)C.set(e,{width:t,height:i,uri:e})}}function Y(e){if(""!==e)e.split(k.SEPARATOR).forEach(e=>{if(""!==e)X(I(e.split(w.SPACE)[0]))})}const U=e=>_.SVG.test(e),z=(e,t)=>{var i;return(null===(i=new RegExp(`\\s*@${e}([^{]+)`).exec(t))||void 0===i?void 0:i[1].trim())||t};class G{constructor(e,i,s,n,a){this.framework=e,this.initializing=false,this.closed=false,this.rootElements=new Set,this.session={active:[]},this.processing={cache:new t,excluded:new t,sessionId:""},this._cascadeAll=false;const r=this.processing.cache;this._cache=r,this._controllerHandler=new s(this,r),this._resourceHandler=new n(this,r),this._extensionManager=new a(this,r),this._afterInsertNode=this._controllerHandler.afterInsertNode,this.Node=i}copyToDisk(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.copyToDisk(e,t)}appendToArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.appendToArchive(e,t)}saveToArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.saveToArchive(e||this.userSettings.outputArchiveName,t)}createFrom(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.createFrom(e,t)}appendFromArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.appendFromArchive(e,t)}reset(){var e;const t=this.processing;t.cache.reset(),t.excluded.clear(),t.sessionId="",this.session.active.length=0,this.controllerHandler.reset(),this.resourceHandler.reset(),null===(e=this.fileHandler)||void 0===e||e.reset(),this.extensions.forEach(e=>e.subscribers.clear()),this.closed=false}parseDocument(...e){const{controllerHandler:t,resourceHandler:i}=this;this.initializing=false,this.rootElements.clear();const s=t.generateSessionId;this.processing.sessionId=s,this.session.active.push(s),t.sessionId=s,t.init(),this.setStyleMap();const n=[],a=this.userSettings.preloadImages,r=[],l=m("html > body { overflow: hidden !important; }"),o=()=>{this.initializing=false,n.forEach(e=>{if(e.parentElement)g.removeChild(e)}),n.length=0};let c,h,u;const f=()=>{o(),this.extensions.forEach(e=>e.beforeParseDocument());for(const e of this.rootElements){const t=this.createCache(e);if(t)this.afterCreateCache(t)}this.extensions.forEach(e=>e.afterParseDocument());try{document.head.removeChild(l)}catch(e){}if("function"==typeof c)c.call(this);if("function"==typeof u)u.call(this)};if(0===e.length)e.push(document.body);e.forEach(e=>{let t;if("string"==typeof e)t=document.getElementById(e);else if(p(e))t=e;else return;if(t)this.rootElements.add(t)});const g=this.rootElements.values().next().value;if(a){for(const e of this.rootElements)e.querySelectorAll("picture > source").forEach(e=>Y(e.srcset)),e.querySelectorAll("video").forEach(e=>X(e.poster)),e.querySelectorAll("input[type=image]").forEach(e=>X(e.src,e.width,e.height));for(const e of C.values()){const t=e.uri;if(U(t))r.push(t);else if(0===e.width||0===e.height){const i=document.createElement("img");if(i.src=t,i.naturalWidth>0&&i.naturalHeight>0)e.width=i.naturalWidth,e.height=i.naturalHeight;else g.appendChild(i),n.push(i)}}}for(const[e,t]of R.entries()){const i=t.mimeType;if((null==i?void 0:i.startsWith("image/"))&&!i.endsWith("svg+xml")){const s=document.createElement("img");s.src=`data:${i};${t.base64?"base64,"+t.base64:t.content}`;const{naturalWidth:a,naturalHeight:r}=s;if(a>0&&r>0)t.width=a,t.height=r,C.set(e,{width:a,height:r,uri:t.filename});else document.body.appendChild(s),n.push(s)}}for(const e of this.rootElements)e.querySelectorAll("img").forEach(e=>{if(U(e.src)){if(a)r.push(e.src)}else{if(a)Y(e.srcset);if(e.complete)i.addImage(e);else if(a)r.push(e)}});if(r.length)this.initializing=true,Promise.all(S(r,e=>new Promise((t,i)=>{if("string"==typeof e)t(function(e){return d(this,void 0,void 0,(function*(){return(yield fetch(e,{method:"GET",headers:new Headers({Accept:"application/xhtml+xml, image/svg+xml","Content-Type":"image/svg+xml"})})).text()}))}(e));else e.addEventListener("load",()=>t(e)),e.addEventListener("error",()=>i(e))}))).then(e=>{const t=e.length;for(let s=0;s<t;++s){const t=e[s];if("string"==typeof t){const e=r[s];if("string"==typeof e)i.addRawData(e,"image/svg+xml","utf8",t)}else i.addImage(t)}f()}).catch(e=>{let t=e;if(e instanceof Event)t=e.target;const i=t instanceof HTMLImageElement?t.src:"";if("function"==typeof h){if(!(e instanceof Error))e=new Error(i?"FAIL: "+i:"Unable to preload images.");o(),h.call(this,e)}else if(!this.userSettings.showErrorMessages||!E(i)||confirm("FAIL: "+i))return void f();else o();if("function"==typeof u)u.call(this)});else f();return new class{constructor(e){this.thisArg=e,this.complete=false}then(e){if(r.length)c=e;else if(e.call(this.thisArg),"function"==typeof u)u.call(this.thisArg);else this.complete=true;return this}catch(e){return h=e,this}finally(e){if(this.complete){if("function"==typeof e)e.call(this.thisArg)}else u=e;return this}}(this)}parseDocumentAsync(...e){return d(this,void 0,void 0,(function*(){return yield this.parseDocument(...e)}))}createCache(e){const t=this.createRootNode(e);if(t)this.controllerHandler.sortInitialCache();return t}toString(){return""}createRootNode(e){const t=this.processing,i=t.cache;i.clear(),t.excluded.clear(),this._cascadeAll=false;const s=this.extensionsCascade,n=this.cascadeParentNode(e,0,s.length?s:void 0);if(n){const i=new this.Node(0,t.sessionId,e.parentElement||document.body,this._afterInsertNode);n.parent=i,n.actualParent=i,n.childIndex=0,n.documentRoot=true}return t.node=n,i.afterAppend=void 0,n}cascadeParentNode(e,t,i){const s=this.insertNode(e);if(s){const{controllerHandler:n,processing:a}=this,r=a.cache;if(s.depth=t,0===t)r.append(s);if(n.preventNodeCascade(e))return s;const{childElementCount:l,childNodes:o}=e,c=o.length,h=new Array(c),d=new Array(l);let u=true,f=0,g=0,p=0;while(f<c){const e=o[f++];let l;if("#"===e.nodeName.charAt(0)){if(y(e))l=this.insertNode(e,s)}else if(n.includeElement(e)){if(l=this.cascadeParentNode(e,t+1,i),l)d[p++]=l,r.append(l),u=false}else if(l=this.insertNode(e),l)a.excluded.append(l),u=false;if(l)l.parent=s,l.actualParent=s,l.childIndex=g,h[g++]=l}if(h.length=g,d.length=p,s.naturalChildren=h,s.naturalElements=d,s.inlineText=u,p>0&&this.userSettings.createQuerySelectorMap)s.queryMap=this.createQueryMap(d,p)}return s}createQueryMap(e,t){var i;const s=[e];let n=0;while(n<t){const t=e[n++].queryMap;if(t){const e=t.length;for(let n=0;n<e;++n){const e=n+1;s[e]=(null===(i=s[e])||void 0===i?void 0:i.concat(t[n]))||t[n]}}}return s}setStyleMap(){let e=false;const t=i=>{try{const e=i.cssRules;if(e){const i=e.length;let s=0;while(s<i){const i=e[s++];switch(i.type){case CSSRule.STYLE_RULE:case CSSRule.FONT_FACE_RULE:this.applyStyleRule(i);break;case CSSRule.IMPORT_RULE:t(i.styleSheet);break;case CSSRule.MEDIA_RULE:if(x(i.conditionText||z("media",i.cssText)))this.applyCSSRuleList(i.cssRules);break;case CSSRule.SUPPORTS_RULE:if(CSS.supports&&CSS.supports(i.conditionText||z("supports",i.cssText)))this.applyCSSRuleList(i.cssRules);break}}}}catch(t){if(this.userSettings.showErrorMessages&&!e)alert("CSS cannot be parsed inside <link> tags when loading files directly from your hard drive or from external websites. Either use a local web server, embed your CSS into a <style> tag, or you can also try using a different browser. See the README for more detailed instructions.\n\n"+i.href+"\n\n"+t),e=true}},i=document.styleSheets,s=i.length;let n=0;while(n<s){const e=i[n++];let s;try{s=e.media.mediaText}catch(e){}if(!E(s)||P.test(s))t(e)}}applyStyleRule(e){var t,i,s,n,a,r;const l=this.resourceHandler,o=this.processing.sessionId,c=(null===(t=e.parentStyleSheet)||void 0===t?void 0:t.href)||void 0,h=e.cssText;switch(e.type){case CSSRule.SUPPORTS_RULE:this.applyCSSRuleList(e.cssRules);break;case CSSRule.STYLE_RULE:{const t=e.style,i={},s={},n=e=>{var t;const i=s[e];if(i&&"initial"!==i){let n,a=i;H.lastIndex=0;while(null!==(n=H.exec(i)))if(n[2]){const e=n[2].split(k.DELIMITER);l.addRawData(n[1],e[0].trim(),(null===(t=e[1])||void 0===t?void 0:t.trim())||"utf8",n[3])}else if(this.userSettings.preloadImages){const e=I(n[3],c);if(""!==e){if(!l.getImage(e))X(e);a=a.replace(n[0],`url("${e}")`)}}s[e]=a}};let a;Array.from(t).forEach(e=>s[v(e)]=t[e]),n("backgroundImage"),n("listStyleImage"),n("content"),B.lastIndex=0;while(null!==(a=B.exec(h))){const e=v(a[1]);switch(e){case"margin":i.marginTop=true,i.marginRight=true,i.marginBottom=true,i.marginLeft=true;break;case"padding":i.paddingTop=true,i.paddingRight=true,i.paddingBottom=true,i.paddingLeft=true;break;case"background":i.backgroundColor=true,i.backgroundImage=true,i.backgroundSize=true,i.backgroundRepeat=true,i.backgroundPositionX=true,i.backgroundPositionY=true;break;case"backgroundPosition":i.backgroundPositionX=true,i.backgroundPositionY=true;break;case"border":i.borderTopStyle=true,i.borderRightStyle=true,i.borderBottomStyle=true,i.borderLeftStyle=true,i.borderTopWidth=true,i.borderRightWidth=true,i.borderBottomWidth=true,i.borderLeftWidth=true,i.borderTopColor=true,i.borderRightColor=true,i.borderBottomColor=true,i.borderLeftColor=true;break;case"borderStyle":i.borderTopStyle=true,i.borderRightStyle=true,i.borderBottomStyle=true,i.borderLeftStyle=true;break;case"borderWidth":i.borderTopWidth=true,i.borderRightWidth=true,i.borderBottomWidth=true,i.borderLeftWidth=true;break;case"borderColor":i.borderTopColor=true,i.borderRightColor=true,i.borderBottomColor=true,i.borderLeftColor=true;break;case"font":i.fontFamily=true,i.fontStyle=true,i.fontSize=true,i.fontWeight=true,i.lineHeight=true;break}i[e]=true}b(e.selectorText,true).forEach(e=>{const n=f(e),[a,r]=e.split("::"),l=r?"::"+r:"";document.querySelectorAll(a||"*").forEach(e=>{const a="styleMap"+l,r="styleSpecificity"+l,c=A(e,a,o);if(c){const a=A(e,r,o)||{};for(const e in s){const r=a[e],l=n+(i[e]?1e3:0);if(void 0===r||l>=r){const i=s[e];if("initial"===i&&M.test(e)){if("none"===t.background)delete c[e]}else c[e]=i;a[e]=l}}}else{const t=Object.assign({},s),c={};for(const e in t)c[e]=n+(i[e]?1e3:0);N(e,"style"+l,"0",g(e,l)),N(e,"sessionId","0",o),N(e,a,o,t),N(e,r,o,c)}})});break}case CSSRule.FONT_FACE_RULE:{const e=null===(i=L.exec(h))||void 0===i?void 0:i[1];if(e){const t=((null===(s=F.exec(e))||void 0===s?void 0:s[1])||"").trim(),i=((null===(n=W.exec(e))||void 0===n?void 0:n[1])||"").split(k.SEPARATOR);if(""!==t&&i.length){const s=(null===(a=O.exec(e))||void 0===a?void 0:a[1].toLowerCase())||"normal",n=parseInt((null===(r=V.exec(e))||void 0===r?void 0:r[1])||"400");i.forEach(e=>{var i;const a=D.exec(e);if(a){let e,r;const o=(a[2]||a[3]).trim();if("url"===a[1])e=I(o,c);else r=o;l.addFont({fontFamily:t,fontWeight:n,fontStyle:s,srcUrl:e,srcLocal:r,srcFormat:(null===(i=a[4])||void 0===i?void 0:i.toLowerCase().trim())||"truetype"})}})}}break}}}applyCSSRuleList(e){const t=e.length;let i=0;while(i<t)this.applyStyleRule(e[i++])}get controllerHandler(){return this._controllerHandler}get resourceHandler(){return this._resourceHandler}get extensionManager(){return this._extensionManager}get fileHandler(){return this._resourceHandler.fileHandler}get extensionsCascade(){return[]}get nextId(){return this._cache.nextId}get length(){return 0}}G.KEY_NAME="squared.application";class j{preventNodeCascade(e){return false}get generateSessionId(){return(new Date).getTime().toString()}}class q{constructor(e,t,i){if(this.name=e,this.framework=t,this.options={},this.dependencies=[],this.subscribers=new Set,i)Object.assign(this.options,i)}require(e,t=false){this.dependencies.push({name:e,preload:t})}beforeParseDocument(){}afterParseDocument(){}set application(e){this._application=e,this._controller=e.controllerHandler}get application(){return this._application}get controller(){return this._controller}}const{hasBit:$,isObject:K}=squared.lib.util;const{fromLastIndexOf:Q,isString:J}=squared.lib.util,Z=()=>location.protocol.startsWith("http");class ee{constructor(){this.assets=[]}static downloadFile(e,t,i){const s=new Blob([e],{type:i||"application/octet-stream"}),n=window.URL.createObjectURL(s),a=document.createElement("a");if(a.style.setProperty("display","none"),a.setAttribute("href",n),a.setAttribute("download",t),!a.download)a.setAttribute("target","_blank");const r=document.body;r.appendChild(a),a.click(),r.removeChild(a),setTimeout(()=>window.URL.revokeObjectURL(n),1)}createFrom(e,t){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{format:e}))}appendFromArchive(e,t){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{appendTo:e,format:e.substring(e.lastIndexOf(".")+1)}))}addAsset(e){if(e.content||e.uri||e.base64){const{pathname:t,filename:i}=e,s=this.assets.find(e=>e.pathname===t&&e.filename===i);if(s)Object.assign(s,e);else this.assets.push(e)}}reset(){this.assets.length=0}copying(e){if(Z()){const{assets:t,directory:i}=e;if(J(i)){const s=t?t.concat(this.assets):this.assets;if(s.length)s[0].exclusions=e.exclusions,fetch("/api/assets/copy?to="+encodeURIComponent(i.trim())+"&empty="+(this.userSettings.outputEmptyCopyDirectory?"1":"0"),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(s)}).then(e=>e.json()).then(t=>{if(t){if("function"==typeof e.callback)e.callback(t);if(this.userSettings.showErrorMessages){const{application:e,system:i}=t;if(i)alert(e+"\n\n"+i)}}}).catch(e=>{if(this.userSettings.showErrorMessages)alert("ERROR: "+e)})}}else if(this.userSettings.showErrorMessages)alert("SERVER (required): See README for instructions")}archiving(e){if(Z()){const{assets:t,filename:i}=e;if(J(i)){const s=t?t.concat(this.assets):this.assets;if(s.length)s[0].exclusions=e.exclusions,fetch("/api/assets/archive?filename="+encodeURIComponent(i.trim())+"&format="+(e.format||this.userSettings.outputArchiveFormat).trim().toLowerCase()+"&append_to="+encodeURIComponent((e.appendTo||"").trim()),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(s)}).then(e=>e.json()).then(t=>{if(t){if("function"==typeof e.callback)e.callback(t);const i=t.zipname;if(J(i))fetch("/api/browser/download?filepath="+encodeURIComponent(i)).then(e=>e.blob()).then(e=>ee.downloadFile(e,Q(i,"/","\\")));else if(this.userSettings.showErrorMessages){const{application:e,system:i}=t;if(i)alert(e+"\n\n"+i)}}}).catch(e=>{if(this.userSettings.showErrorMessages)alert("ERROR: "+e)})}}else if(this.userSettings.showErrorMessages)alert("SERVER (required): See README for instructions")}}const te=squared.lib,{USER_AGENT:ie,isUserAgent:se}=te.client,{BOX_BORDER:ne,CSS_UNIT:ae,TEXT_STYLE:re,checkStyleValue:le,checkWritingMode:oe,formatPX:ce,getInheritedStyle:he,getStyle:de,hasComputedStyle:ue,isLength:fe,isPercent:ge,parseSelectorText:pe,parseUnit:me}=te.css,{ELEMENT_BLOCK:be,assignRect:xe,getNamedItem:ye,getRangeClientRect:ve,newBoxRectDimension:Ee}=te.dom,{CHAR:Se,CSS:Ie,FILE:we,XML:_e}=te.regex,{actualClientRect:Te,actualTextRangeRect:ke,deleteElementCache:Ae,getElementAsNode:Ne,getElementCache:Ce,getPseudoElt:Re,setElementCache:Pe}=te.session,{aboveRange:Me,belowRange:Be,convertCamelCase:Le,convertFloat:Fe,convertInt:We,hasBit:Oe,hasValue:Ve,isNumber:De,isObject:He,isString:Xe,iterateArray:Ye,spliceString:Ue,splitEnclosing:ze}=te.util,{PX:Ge,SELECTOR_ATTR:je,SELECTOR_G:qe,SELECTOR_LABEL:$e,SELECTOR_PSEUDO_CLASS:Ke}=Ie,Qe=/\s*(url|[a-z-]+gradient)/,Je=/^:lang\(\s*(.+)\s*\)$/,Ze=/^:nth(-last)?-(child|of-type)\((.+)\)$/,et=/^(-)?(\d+)?n\s*([+-]\d+)?$/,tt=/\dem$/;function it(e,t,i,s){const n=(s||e).css(t);if(De(n))return parseFloat(n);else if("inherit"===n&&!s)return it(e,t,i,e.actualParent);return i}function st(e,t,i,s,n){var a,r;if(t.all)return true;let l=t.tagName;if(l&&l!==e.tagName.toUpperCase())return false;const o=t.id;if(o&&o!==e.elementId)return false;const{attrList:c,classList:h,notList:d,pseudoList:u}=t;if(u){const t=e.actualParent;l=e.tagName;for(const i of u)switch(i){case":first-child":case":nth-child(1)":if(e!==t.firstChild)return false;break;case":last-child":case":nth-last-child(1)":if(e!==t.lastChild)return false;break;case":only-child":if(t.naturalElements.length>1)return false;break;case":only-of-type":{let e=0;for(const i of t.naturalElements)if(i.tagName===l&&++e>1)return false;break}case":first-of-type":for(const i of t.naturalElements)if(i.tagName===l){if(i!==e)return false;break}break;case":nth-child(n)":case":nth-last-child(n)":break;case":empty":if(e.element.childNodes.length)return false;break;case":checked":switch(l){case"INPUT":if(!e.toElementBoolean("checked"))return false;break;case"OPTION":if(!e.toElementBoolean("selected"))return false;break;default:return false}break;case":enabled":if(!e.inputElement||e.toElementBoolean("disabled"))return false;break;case":disabled":if(!e.inputElement||!e.toElementBoolean("disabled"))return false;break;case":read-only":{const t=e.element;if(t.isContentEditable||("INPUT"===l||"TEXTAREA"===l)&&!t.readOnly)return false;break}case":read-write":{const t=e.element;if(!t.isContentEditable||("INPUT"===l||"TEXTAREA"===l)&&t.readOnly)return false;break}case":required":if(!e.inputElement||"BUTTON"===l||!e.toElementBoolean("required"))return false;break;case":optional":if(!e.inputElement||"BUTTON"===l||e.toElementBoolean("required"))return false;break;case":placeholder-shown":if(!(("INPUT"===l||"TEXTAREA"===l)&&""!==e.toElementString("placeholder")))return false;break;case":default":switch(l){case"INPUT":{const t=e.element;switch(t.type){case"radio":case"checkbox":if(!t.checked)return false;break;default:return false}break}case"OPTION":if(void 0===e.element.attributes.selected)return false;break;case"BUTTON":{const t=e.ascend({condition:e=>"FORM"===e.tagName})[0];if(t){let i=false;const s=e.element;if(Ye(t.element.querySelectorAll("*"),e=>{switch(e.tagName){case"BUTTON":return i=s===e,true;case"INPUT":switch(e.type){case"submit":case"image":return i=s===e,true}break}}),!i)return false}break}default:return false}break;case":in-range":case":out-of-range":if("INPUT"===l){const t=e.element,s=parseFloat(t.value);if(!isNaN(s)){const e=parseFloat(t.min),n=parseFloat(t.max);if(s>=e&&s<=n){if(":out-of-range"===i)return false}else if(":in-range"===i)return false}else if(":in-range"===i)return false}else return false;break;case":indeterminate":if("INPUT"===l){const t=e.element;switch(t.type){case"checkbox":if(!t.indeterminate)return false;break;case"radio":if(t.checked)return false;else if(t.name)if(Ye(((null===(a=e.ascend({condition:e=>"FORM"===e.tagName})[0])||void 0===a?void 0:a.element)||document).querySelectorAll(`input[type=radio][name="${t.name}"`),e=>e.checked)===Number.POSITIVE_INFINITY)return false;break;default:return false}}else if("PROGRESS"===l){if(-1!==e.toElementInt("value",-1))return false}else return false;break;case":target":if(""===location.hash)return false;else{const t=e.element;if(!(location.hash==="#"+t.id||"A"===l&&location.hash==="#"+t.name))return false}break;case":scope":if(!s||">"===n&&e!==this)return false;break;case":root":if(!s||n)return false;break;case":link":case":visited":case":any-link":case":hover":case":focus":case":focus-within":case":valid":case":invalid":{const s=e.element;if(Ye(t.element.querySelectorAll(":scope > "+i),e=>e===s)!==Number.POSITIVE_INFINITY)return false;break}default:{let s=Ze.exec(i);if(s){const i=s[3].trim();let n=t.naturalElements;if(s[1])n=n.slice(0).reverse();const a=("child"===s[2]?n.indexOf(e):n.filter(e=>e.tagName===l).indexOf(e))+1;if(a>0){if(De(i)){if(parseInt(i)!==a)return false}else switch(i){case"even":if(a%2!=0)return false;break;case"odd":if(a%2==0)return false;break;default:{const e=et.exec(i);if(e){const t=We(e[3]);if(e[2]){if(e[1])return false;const i=parseInt(e[2]);if(0!==i){if(a!==t)for(let e=i;;e+=i){const e=i+t;if(e===a)break;else if(e>a)return false}}else if(a!==t)return false}else if(e[3])if(t>0){if(e[1]){if(a>t)return false}else if(a<t)return false}else return false}break}}continue}}else if(s=Je.exec(i),s)if((null===(r=e.attributes.lang)||void 0===r?void 0:r.trim().toLowerCase())===s[1].toLowerCase())continue;return false}}}if(d)for(const t of d){const n={};switch(t.charAt(0)){case".":n.classList=[t];break;case"#":n.id=t.substring(1);break;case":":n.pseudoList=[t];break;case"[":{je.lastIndex=0;const e=je.exec(t);if(e){const t="i"===e[6];let i=e[3]||e[4]||e[5]||"";if(t)i=i.toLowerCase();n.attrList=[{key:e[1],symbol:e[2],value:i,caseInsensitive:t}]}else continue;break}default:if(Se.WORDDASH.test(t))n.tagName=t;else return false;break}if(st.call(this,e,n,i,s))return false}if(h){const t=e.element.classList;for(const e of h)if(!t.contains(e))return false}if(c){const t=e.attributes;for(const e of c){let i;if(e.endsWith){const s=new RegExp(`^(.+:)?${e.key}$`);for(const e in t)if(s.test(e)){i=t[e];break}}else i=t[e.key];if(void 0===i)return false;else{const t=e.value;if(t){if(e.caseInsensitive)i=i.toLowerCase();if(e.symbol)switch(e.symbol){case"~":if(!i.split(Se.SPACE).includes(t))return false;break;case"^":if(!i.startsWith(t))return false;break;case"$":if(!i.endsWith(t))return false;break;case"*":if(!i.includes(t))return false;break;case"|":if(i!==t&&!i.startsWith(t+"-"))return false;break}else if(i!==t)return false}}}}return true}function nt(e,t,i){const s=e.cssAscend("textAlign",e.textElement&&e.blockStatic&&!e.hasPX("width"));return(s===t||s===i)&&(e.blockStatic?e.textElement&&!e.hasPX("width",true,true)&&!e.hasPX("maxWidth",true,true):e.display.startsWith("inline"))}function at(e,t,i,s,n){if(n!==s)if(e.style.setProperty(t,s),pt(s,e.style.getPropertyValue(t)))return Pe(e,t,i,"auto"!==s?n:""),true;else return false;return true}function rt(e,t,i){const s=Ce(e,t,i);if(void 0!==s)e.style.setProperty(t,s),Ae(e,t,i)}function lt(e,t){const i=e.actualParent;return true===(null==i?void 0:i.flexElement)&&true===i.flexdata[t]}function ot(e,t,i,s,n){const a=t[i],r=e.parseUnit(a,i);let l=Math.max(r,e.parseUnit(t[s],i));if(0===l&&e.styleElement){const t=e.element;switch(t.tagName){case"IMG":case"INPUT":if("image"!==t.type)break;case"TD":case"TH":case"SVG":case"IFRAME":case"VIDEO":case"AUDIO":case"CANVAS":case"OBJECT":case"EMBED":{const s=ye(t,i);if(""!==s)if(l=De(s)?parseFloat(s):e.parseUnit(s,i),l>0)e.css(i,ge(s)?s:s+"px");break}}}let o=0;if(r>0&&!e.imageElement){const s=t[n];if(a===s)delete t[n];else if(o=e.parseUnit(s,i),o>0&&o<=r&&fe(a))o=0,t[i]=s,delete t[n]}return o>0?Math.min(l,o):l}function ct(e){let t=0;if(e.htmlElement&&!e.inputElement&&!e.imageElement&&"HR"!==e.tagName&&!e.documentBody){const i=e.element,{overflowX:s,overflowY:n}=e.cssAsObject("overflowX","overflowY");if(e.hasHeight&&(e.hasPX("height")||e.hasPX("maxHeight"))&&("scroll"===n||"auto"===n&&i.clientHeight!==i.scrollHeight))t|=16;if((e.hasPX("width")||e.hasPX("maxWidth"))&&("scroll"===s||"auto"===s&&i.clientWidth!==i.scrollWidth))t|=8}return t}function ht(e){if(!this.positionStatic){const t=ft.call(this,e,true);if(fe(t))return this.parseUnit(t,"left"===e||"right"===e?"width":"height");else if(ge(t)&&this.styleElement)return Fe(this.style[e])}return 0}function dt(e,t,i){if(!e.plainText){switch(e.css(i[0])){case"none":case"initial":case"hidden":return 0}const s=e.css(i[1]),n=fe(s,true)?e.parseUnit(s,t):Fe(e.style[i[1]]);if(n>0)return Math.max(Math.round(n),1)}return 0}function ut(e,t,i){var s,n;switch(e.display){case"table":if(!i&&"collapse"===e.css("borderCollapse"))return 0;break;case"table-row":return 0;case"table-cell":if(i){switch(e.tagName){case"TD":case"TH":return 0;default:{const i=e.ascend({condition:e=>"TABLE"===e.tagName})[0];if(i){const[n,a]=i.css("borderSpacing").split(" ");switch(t){case"marginTop":case"marginBottom":return a?e.parseUnit(a,"height",false):e.parseUnit(n,"width",false);case"marginRight":if((null===(s=e.actualParent)||void 0===s?void 0:s.lastChild)!==e)return e.parseUnit(n,"width",false);case"marginLeft":return 0}}break}}return 0}break}return e.parseUnit(e.css(t),"width",true!==(null===(n=e.actualParent)||void 0===n?void 0:n.gridElement))}function ft(e,t,i){return!this._preferInitial&&this._styleMap[e]||this.cssInitial(e,t,i)}const gt=e=>e.naturalChild&&(e.inlineVertical||0===e.length)&&!e.floating&&true!==e.autoMargin.horizontal,pt=(e,t)=>e===t||fe(e,true)&&Ge.test(t),mt=(e,t)=>e.id<t.id?-1:1;class bt extends squared.lib.base.Container{constructor(e,t="0",i){if(super(),this.id=e,this.sessionId=t,this.documentRoot=false,this.depth=-1,this.childIndex=Number.POSITIVE_INFINITY,this._element=null,this._data={},this._documentBody=false,this._inlineText=false,i)this._element=i,this._documentBody=i===document.body;else this.style={},this._styleMap={},this._cssStyle={}}init(){const e=this._element;if(e){const t=this.styleElement,i=this.sessionId,s=Ce(e,"styleMap",i)||{};let n;if(!this.pseudoElement){if(n=de(e),t){const t=Array.from(e.style),i=t.length;if(i){const n=e.style;let a=0;while(a<i){const e=t[a++];s[Le(e)]=n.getPropertyValue(e)}}}}else n=de(e.parentElement,Re(e,i));if(t){const t={},i=n.writingMode;for(let a in s){const r=s[a],l=oe(a,i);if(""!==l)if(!s[l])a=l;else continue;const o=le(e,a,r,n);if(""!==o)t[a]=o}this._styleMap=t}else this._styleMap=s;if(this.style=n,this._cssStyle=s,"0"!==i)Pe(e,"node",i,this)}}saveAsInitial(e=false){if(void 0===this._initial||e)this._initial={children:this.duplicate(),styleMap:Object.assign({},this._styleMap)}}data(e,t,i,s=true){const n=this._data;if(Ve(i)){let a=n[e];if(!He(a))a={},n[e]=a;if(s||void 0===a[t])a[t]=i}else if(null===i)return void delete n[e];const a=n[e];return He(a)?a[t]:void 0}unsetCache(...e){const t=(e=true)=>{if(!this._preferInitial)if(this.resetBounds(),e)this.cascade(e=>(e.resetBounds(),false))};if(e.length){const i=this._cached;e.forEach(e=>{switch(e){case"position":if(this._preferInitial)this.cascade(e=>{if(!e.pageFlow)e.unsetCache("absoluteParent");return e.resetBounds(),false});this._cached={},t();break;case"display":case"float":case"tagName":return this._cached={},void t();case"width":i.actualWidth=void 0,i.percentWidth=void 0;case"minWidth":i.width=void 0;case"maxWidth":i.overflow=void 0,t();break;case"height":i.actualHeight=void 0,i.percentHeight=void 0;case"minHeight":if(i.height=void 0,this._preferInitial)i.blockVertical=void 0,i.overflow=void 0,this.each(e=>e.unsetCache("height","blockVertical","overflow","bottomAligned"));case"maxHeight":i.overflow=void 0,t();break;case"verticalAlign":i.baseline=void 0,t();break;case"left":case"right":t();case"textAlign":i.rightAligned=void 0,i.centerAligned=void 0;break;case"top":case"bottom":i.bottomAligned=void 0,t();break;case"overflowX":case"overflowY":i.overflow=void 0,t();break;default:if(e.startsWith("margin"))i.autoMargin=void 0,i.rightAligned=void 0,i.centerAligned=void 0,t();else if(e.startsWith("padding"))i.contentBoxWidth=void 0,i.contentBoxHeight=void 0,t();else if(e.startsWith("border"))i.visibleStyle=void 0,i.contentBoxWidth=void 0,i.contentBoxHeight=void 0,t();else if(e.startsWith("background"))i.visibleStyle=void 0;else if(re.includes(e))i.lineHeight=void 0,this._textStyle=void 0,t();break}i[e]=void 0})}else this._cached={},this._textStyle=void 0,t()}ascend(e={}){let t=e.attr;if(!Xe(t))t="actualParent";else if(!/Parent$/i.test(t))return[];const{condition:i,including:s,error:n,every:a,excluding:r}=e,l=[];let o=e.startSelf?this:this[t];while(o&&o!==r){if(n&&n(o))break;if(i){if(i(o))if(l.push(o),!a)break}else l.push(o);if(o===s)break;o=o[t]}return l}intersectX(e,t="linear"){if(e.width>0){const{left:i,right:s}=this[t],{left:n,right:a}=e;return Math.ceil(i)>=n&&Math.floor(i)<=a||s>=Math.floor(n)&&s<=Math.ceil(a)||Math.ceil(n)>=i&&Math.floor(n)<=s||a>=Math.floor(i)&&a<=Math.ceil(s)}return false}intersectY(e,t="linear"){if(e.height>0){const{top:i,bottom:s}=this[t],{top:n,bottom:a}=e;return Math.ceil(i)>=n&&Math.floor(i)<=a||s>=Math.floor(n)&&s<=Math.ceil(a)||Math.ceil(n)>=i&&Math.floor(n)<=s||a>=Math.floor(i)&&a<=Math.ceil(s)}return false}withinX(e,t="linear"){if(this.pageFlow||e.width>0){const i=this[t];return Me(i.left,e.left)&&Be(i.right,e.right)}return true}withinY(e,t="linear"){if(this.pageFlow||e.height>0){const i=this[t];return Math.ceil(i.top)>=e.top&&Math.floor(i.bottom)<=e.bottom}return true}outsideX(e,t="linear"){if(this.pageFlow||e.width>0){const i=this[t];return i.left<Math.floor(e.left)||i.right>Math.ceil(e.right)}return false}outsideY(e,t="linear"){if(this.pageFlow||e.height>0){const i=this[t];return i.top<Math.floor(e.top)||i.bottom>Math.ceil(e.bottom)}return false}css(e,t,i=true){if(t&&this.styleElement)if(this.style[e]=t,pt(t,this.style[e])){if(this._styleMap[e]=t,i)this.unsetCache(e);return t}return this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=true){for(const i in e){const s=e[i];if(this.css(i,s,t)===s&&t)this.unsetCache(i)}return this}cssInitial(e,t=false,i=false){var s;let n=((null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e]||t&&this._styleMap[e];if(!n&&i)n=this.style[e];return n||""}cssAny(e,...t){const i=this.css(e);for(const e of t)if(i===e)return true;return false}cssInitialAny(e,...t){for(const i of t)if(this.cssInitial(e)===i)return true;return false}cssAscend(e,t=false){let i,s=t?this:this.actualParent;while(s){if(i=s.cssInitial(e),""!==i)return i;if(s.documentBody)break;s=s.actualParent}return""}cssSort(e,t=true,i=false){return(i?this.duplicate():this.children).sort((i,s)=>{const n=i.toFloat(e,i.childIndex),a=s.toFloat(e,s.childIndex);if(n===a)return 0;else if(t)return n<a?-1:1;return n>a?-1:1})}cssPX(e,t,i=false,s=false){const n=this._styleMap[e];if(n&&fe(n)){if(t+=me(n,this.fontSize),!i&&t<0)t=0;const a=ce(t);if(this.css(e,a),s)this.unsetCache(e);return a}return""}cssSpecificity(e){var t,i;let s;if(this.styleElement)if(this.pseudoElement){const i=this._element,n=this.sessionId;s=null===(t=Ce(i.parentElement,"styleSpecificity"+Re(i,n),n))||void 0===t?void 0:t[e]}else s=null===(i=Ce(this._element,"styleSpecificity",this.sessionId))||void 0===i?void 0:i[e];return s||0}cssTry(e,t){if(this.styleElement){const i=this._element;return at(i,e,this.sessionId,t,de(i).getPropertyValue(e))}return false}cssFinally(e){if(this.styleElement)if("string"==typeof e)rt(this._element,e,this.sessionId);else{const t=this.sessionId,i=this._element;for(const s in e)rt(i,s,t)}}cssTryAll(e){if(this.styleElement){const t=this.sessionId,i=this._element,s=de(i),n=[];for(const a in e)if(at(i,a,t,e[a],s.getPropertyValue(a)))n.push(a);else return void n.forEach(e=>this.cssFinally(e));return e}}cssParent(e,t,i=false){return this.naturalChild?this.actualParent.css(e,t,i):""}cssCopy(e,...t){const i=this._styleMap;t.forEach(t=>i[t]=e.css(t))}cssCopyIfEmpty(e,...t){const i=this._styleMap;t.forEach(t=>{if(!Ve(i[t]))i[t]=e.css(t)})}cssAsTuple(...e){const t=e.length,i=new Array(t);let s=0;while(s<t)i[s]=this.css(e[s++]);return i}cssAsObject(...e){const t={};return e.forEach(e=>t[e]=this.css(e)),t}toInt(e,t=NaN,i=false){var s;const n=parseInt((i&&(null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e]);return isNaN(n)?t:n}toFloat(e,t=NaN,i=false){var s;const n=parseFloat((i&&(null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e]);return isNaN(n)?t:n}toElementInt(e,t=NaN){var i;const s=parseInt(null===(i=this._element)||void 0===i?void 0:i[e]);return!isNaN(s)?s:t}toElementFloat(e,t=NaN){var i;const s=parseFloat(null===(i=this._element)||void 0===i?void 0:i[e]);return!isNaN(s)?s:t}toElementBoolean(e,t=false){var i;const s=null===(i=this._element)||void 0===i?void 0:i[e];return"boolean"==typeof s?s:t}toElementString(e,t=""){var i;return((null===(i=this._element)||void 0===i?void 0:i[e])||t).toString()}parseUnit(e,t="width",i=true,s){var n;if(e){if(ge(e)){const s=i&&(null===(n=this.absoluteParent)||void 0===n?void 0:n.box)||this.bounds;let a=parseFloat(e)/100;switch(t){case"width":a*=s.width;break;case"height":a*=s.height;break}return a}return me(e,this.fontSize,s)}return 0}has(e,t){var i;let s,n,a;if(t)({map:s,not:n,type:a}=t);const r=("initial"===s&&(null===(i=this._initial)||void 0===i?void 0:i.styleMap)||this._styleMap)[e];if(r)switch(r){case"auto":case"none":case"initial":case"normal":case"rgba(0, 0, 0, 0)":return false;case"baseline":return"verticalAlign"!==e;case"left":case"start":return"textAlign"!==e;default:if(n)if(Array.isArray(n)){for(const e of n)if(r===e)return false}else if(r===n)return false;if(a)if(Oe(a,2)&&fe(r)||Oe(a,4)&&ge(r))return true;else return false;return true}return false}hasPX(e,t=true,i=false){var s;return fe((i&&(null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e],t)}hasFlex(e){return lt(this,e)}setBounds(e=true){let t;if(this.styleElement){if(!e)Ae(this._element,"clientRect",this.sessionId);t=xe(Te(this._element,this.sessionId)),this._bounds=t}else if(this.plainText){const e=ve(this._element);t=xe(e);const i=e.numberOfLines;t.numberOfLines=i,this._bounds=t,this._textBounds=t,this._cached.multiline=i>1}if(!e&&t)this._box=void 0,this._linear=void 0;return t}resetBounds(){this._bounds=void 0,this._box=void 0,this._linear=void 0,this._textBounds=void 0,this._cached.multiline=void 0}querySelector(e){return this.querySelectorAll(e,1)[0]||null}querySelectorAll(e,t=-1){let i=[];const s=this.queryMap;if(s&&0!==t){const n=pe(e);let a=n.length,r=0;while(r<a){const e=n[r++],l=[];let o=-1;e:if("*"===e)l.push({all:true}),o++;else{let t,i;qe.lastIndex=0;while(null!==(i=qe.exec(e))){let e=i[1],s=false;if(1===e.length){const i=e.charAt(0);switch(i){case"+":case"~":o--;case">":if(t||0===l.length){l.length=0;break e}t=i;continue;case"*":s=true;break}}else if(e.startsWith("*|*")){if(e.length>3){l.length=0;break e}s=true}else if(e.startsWith("*|"))e=e.substring(2);else if(e.startsWith("::")){l.length=0;break e}if(s)l.push({all:true});else{let i,s,n,a,r,o,c;while(null!==(c=je.exec(e))){if(void 0===a)a=[];let t=c[1].replace("\\:",":"),i=false;switch(t.indexOf("|")){case-1:break;case 1:if("*"===t.charAt(0)){i=true,t=t.substring(2);break}default:l.length=0;break e}const s="i"===c[6];let n=c[3]||c[4]||c[5]||"";if(s)n=n.toLowerCase();a.push({key:t,symbol:c[2],value:n,endsWith:i,caseInsensitive:s}),e=Ue(e,c.index,c[0].length)}if(e.includes("::")){l.length=0;break e}while(null!==(c=Ke.exec(e))){const t=c[0];if(t.startsWith(":not(")){if(c[1]){if(void 0===o)o=[];o.push(c[1])}}else{if(void 0===r)r=[];r.push(t)}e=Ue(e,c.index,t.length)}while(null!==(c=$e.exec(e))){const t=c[0];switch(t.charAt(0)){case"#":s=t.substring(1);break;case".":if(void 0===n)n=[];n.push(t.substring(1));break;default:i=t.toUpperCase();break}e=Ue(e,c.index,t.length)}l.push({tagName:i,id:s,adjacent:t,classList:n,pseudoList:r,notList:o,attrList:a})}o++,t=void 0}}if(a=s.length,l.length&&-1!==o&&o<a){const e=l.pop(),c=0===l.length,h=i.length;let d;if(e.all&&a-o==1)d=s[o];else{d=[];let t=o;while(t<a){const n=s[t++];if(e.all)d=d.concat(n);else{const t=n.length;let s=0;while(s<t){const t=n[s++];if((0===h||!i.includes(t))&&st.call(this,t,e,r,c))d.push(t)}}}}if(l.length){const s=this.depth;l.reverse(),a=l.length;const n=(e,t,i)=>{const o=l[e],c=e===a-1,h=[],d=i.length;let u=0;while(u<d){const n=i[u++];if(t){const e=n.actualParent;if(">"===t){if(st.call(this,e,o,r,c,t))h.push(e)}else{const i=e.naturalElements;switch(t){case"+":{const e=i.indexOf(n);if(e>0){const s=i[e-1];if(s&&st.call(this,s,o,r,c,t))h.push(s)}break}case"~":{const e=i.length;let s=0;while(s<e){const e=i[s++];if(e===n)break;else if(st.call(this,e,o,r,c,t))h.push(e)}break}}}}else if(n.depth-s>=a-e){let e=n.actualParent;do{if(st.call(this,e,o,r,c))h.push(e);e=e.actualParent}while(e)}}if(h.length)if(++e===a)return true;else return n(e,o.adjacent,h);return false};let o=h;const c=d.length;let u=0;while(u<c){const s=d[u++];if((0===h||!i.includes(s))&&n(0,e.adjacent,[s]))if(i.push(s),++o===t)return i.sort(mt)}}else if(0===h)if(r===n.length-1||t>0&&t<=d.length){if(t>0&&d.length>t)d.length=t;return d.sort(mt)}else i=d;else{const e=d.length;if(t>0){let s=h,n=0;while(n<e){const e=d[n++];if(!i.includes(e))if(i.push(e),++s===t)return i.sort(mt)}}else{let t=0;while(t<e){const e=d[t++];if(!i.includes(e))i.push(e)}}}}}}return i.sort(mt)}set parent(e){if(e){const t=this._parent;if(e!==t)null==t||t.remove(this),this._parent=e;if(!e.contains(this))e.append(this);if(-1===this.depth)this.depth=e.depth+1}}get parent(){return this._parent}get tagName(){let e=this._cached.tagName;if(void 0===e){const t=this._element;if(t){const i=t.nodeName;e="#"===i.charAt(0)?i:t.tagName}else e="";this._cached.tagName=e}return e}get element(){return this._element}get elementId(){var e;return(null===(e=this._element)||void 0===e?void 0:e.id)||""}get htmlElement(){let e=this._cached.htmlElement;if(void 0===e)e=!this.plainText&&this._element instanceof HTMLElement,this._cached.htmlElement=e;return e}get svgElement(){let e=this._cached.svgElement;if(void 0===e)e=!this.htmlElement&&!this.plainText&&this._element instanceof SVGElement||this.imageElement&&we.SVG.test(this.src),this._cached.svgElement=e;return e}get styleElement(){return this.htmlElement||this.svgElement}get naturalChild(){return true}get naturalElement(){let e=this._cached.naturalElement;if(void 0===e)e=this.naturalChild&&this.styleElement&&!this.pseudoElement,this._cached.naturalElement=e;return e}get pseudoElement(){return false}get imageElement(){return"IMG"===this.tagName}get flexElement(){let e=this._cached.flexElement;if(void 0===e)e=this.display.endsWith("flex"),this._cached.flexElement=e;return e}get gridElement(){let e=this._cached.gridElement;if(void 0===e)e=this.display.endsWith("grid"),this._cached.gridElement=e;return e}get textElement(){let e=this._cached.textElement;if(void 0===e)e=this.plainText||this.inlineText&&!this.inputElement,this._cached.textElement=e;return e}get tableElement(){let e=this._cached.tableElement;if(void 0===e)e="TABLE"===this.tagName||"table"===this.display,this._cached.tableElement=e;return e}get inputElement(){let e=this._cached.inputElement;if(void 0===e){switch(this.tagName){case"INPUT":case"BUTTON":case"SELECT":case"TEXTAREA":e=true;break;default:e=false;break}this._cached.inputElement=e}return e}get layoutElement(){let e=this._cached.layoutElement;if(void 0===e)e=this.flexElement||this.gridElement,this._cached.layoutElement=e;return e}get plainText(){return"#text"===this.tagName}get styleText(){return this.naturalElement&&this.inlineText}get lineBreak(){return"BR"===this.tagName}get documentBody(){return this._documentBody}get initial(){return this._initial}get bounds(){return this._bounds||this.setBounds(false)||xe(this.boundingClientRect)}get linear(){return this._linear||(()=>{const e=this.bounds;if(e){if(this.styleElement){const{marginBottom:t,marginRight:i}=this,s=Math.max(this.marginTop,0),n=Math.max(this.marginLeft,0);this._linear={top:e.top-s,right:e.right+i,bottom:e.bottom+t,left:e.left-n,width:e.width+n+i,height:e.height+s+t}}else this._linear=e;return this._linear}return Ee()})()}get box(){return this._box||(()=>{const e=this.bounds;if(e){if(this.styleElement)this._box={top:e.top+(this.paddingTop+this.borderTopWidth),right:e.right-(this.paddingRight+this.borderRightWidth),bottom:e.bottom-(this.paddingBottom+this.borderBottomWidth),left:e.left+(this.paddingLeft+this.borderLeftWidth),width:e.width-this.contentBoxWidth,height:e.height-this.contentBoxHeight};else this._box=e;return this._box}return Ee()})()}get dataset(){if(this.styleElement)return this._element.dataset;else{let e=this._dataset;if(void 0===e)e={},this._dataset=e;return e}}get flexdata(){let e=this._cached.flexdata;if(void 0===e){if(this.flexElement){const{flexWrap:t,flexDirection:i,alignContent:s,justifyContent:n}=this.cssAsObject("flexWrap","flexDirection","alignContent","justifyContent"),a=i.startsWith("row");e={row:a,column:!a,reverse:i.endsWith("reverse"),wrap:t.startsWith("wrap"),wrapReverse:"wrap-reverse"===t,alignContent:s,justifyContent:n}}else e={};this._cached.flexdata=e}return e}get flexbox(){var e;let t=this._cached.flexbox;if(void 0===t){if((null===(e=this.actualParent)||void 0===e?void 0:e.flexElement)&&this.styleElement){const e=this.css("alignSelf"),i=this.css("justifySelf");t={alignSelf:"auto"===e?this.cssParent("alignItems"):e,justifySelf:"auto"===i?this.cssParent("justifyItems"):i,basis:this.css("flexBasis"),grow:it(this,"flexGrow",0),shrink:it(this,"flexShrink",1),order:this.toInt("order",0)}}else t={alignSelf:"auto",justifySelf:"auto",basis:"auto",grow:0,shrink:1,order:0};this._cached.flexbox=t}return t}get width(){let e=this._cached.width;if(void 0===e)e=ot(this,this._styleMap,"width","minWidth","maxWidth"),this._cached.width=e;return e}get height(){let e=this._cached.height;if(void 0===e)e=ot(this,this._styleMap,"height","minHeight","maxHeight"),this._cached.height=e;return e}get hasWidth(){let e=this._cached.hasWidth;if(void 0===e)e=this.width>0,this._cached.hasWidth=e;return e}get hasHeight(){var e;let t=this._cached.hasHeight;if(void 0===t){const i=this.css("height");if(ge(i))t=this.pageFlow&&((null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||this.documentBody)?parseFloat(i)>0:"fixed"===this.css("position");else t=this.height>0;this._cached.hasHeight=t}return t}get lineHeight(){let e=this._cached.lineHeight;if(void 0===e){if(e=0,!this.imageElement&&!this.svgElement){let t=this.has("lineHeight"),i=0;if(t){const e=this.css("lineHeight");if(ge(e))i=Fe(this.style.lineHeight);else if(De(e))i=parseFloat(e)*this.fontSize;else if(i=me(e,this.fontSize),Ge.test(e)&&"inherit"!==this._cssStyle.lineHeight){const e=ft.call(this,"fontSize");if(tt.test(e))i*=parseFloat(e)}}else{const e=this.ascend({condition:e=>e.lineHeight>0})[0];if(e)i=e.lineHeight;if(this.styleElement){const e=ft.call(this,"fontSize");if(tt.test(e)){const s=parseFloat(e);if(1!==s)i*=s,this.css("lineHeight",ce(i)),t=true}}}if(t||i>this.height||this.multiline||this.block&&this.naturalChildren.some(e=>e.textElement))e=i}this._cached.lineHeight=e}return e}get display(){return this.css("display")}get positionStatic(){let e=this._cached.positionStatic;if(void 0===e){switch(this.css("position")){case"fixed":case"absolute":e=false;break;case"relative":if(!this.documentBody){if(e=!(this.hasPX("top")||this.hasPX("right")||this.hasPX("bottom")||this.hasPX("left")),e)this._cached.positionRelative=false}else e=false;break;case"inherit":{const t=this._element,i=(null==t?void 0:t.parentElement)?he(t.parentElement,"position"):"";e=""!==i&&!("absolute"===i||"fixed"===i);break}default:e=true;break}this._cached.positionStatic=e}return e}get positionRelative(){let e=this._cached.positionRelative;if(void 0===e)e="relative"===this.css("position"),this._cached.positionRelative=e;return e}get top(){let e=this._cached.top;if(void 0===e)e=ht.call(this,"top"),this._cached.top=e;return e}get right(){let e=this._cached.right;if(void 0===e)e=ht.call(this,"right"),this._cached.right=e;return e}get bottom(){let e=this._cached.bottom;if(void 0===e)e=ht.call(this,"bottom"),this._cached.bottom=e;return e}get left(){let e=this._cached.left;if(void 0===e)e=ht.call(this,"left"),this._cached.left=e;return e}get marginTop(){let e=this._cached.marginTop;if(void 0===e)e=this.inlineStatic?0:ut(this,"marginTop",true),this._cached.marginTop=e;return e}get marginRight(){let e=this._cached.marginRight;if(void 0===e)e=ut(this,"marginRight",true),this._cached.marginRight=e;return e}get marginBottom(){let e=this._cached.marginBottom;if(void 0===e)e=this.inlineStatic?0:ut(this,"marginBottom",true),this._cached.marginBottom=e;return e}get marginLeft(){let e=this._cached.marginLeft;if(void 0===e)e=ut(this,"marginLeft",true),this._cached.marginLeft=e;return e}get borderTopWidth(){let e=this._cached.borderTopWidth;if(void 0===e)e=dt(this,"height",ne[0]),this._cached.borderTopWidth=e;return e}get borderRightWidth(){let e=this._cached.borderRightWidth;if(void 0===e)e=dt(this,"height",ne[1]),this._cached.borderRightWidth=e;return e}get borderBottomWidth(){let e=this._cached.borderBottomWidth;if(void 0===e)e=dt(this,"width",ne[2]),this._cached.borderBottomWidth=e;return e}get borderLeftWidth(){let e=this._cached.borderLeftWidth;if(void 0===e)e=dt(this,"width",ne[3]),this._cached.borderLeftWidth=e;return e}get paddingTop(){let e=this._cached.paddingTop;if(void 0===e)e=ut(this,"paddingTop",false),this._cached.paddingTop=e;return e}get paddingRight(){let e=this._cached.paddingRight;if(void 0===e)e=ut(this,"paddingRight",false),this._cached.paddingRight=e;return e}get paddingBottom(){let e=this._cached.paddingBottom;if(void 0===e)e=ut(this,"paddingBottom",false),this._cached.paddingBottom=e;return e}get paddingLeft(){let e=this._cached.paddingLeft;if(void 0===e)e=ut(this,"paddingLeft",false),this._cached.paddingLeft=e;return e}get contentBox(){return"border-box"!==this.css("boxSizing")||this.tableElement&&se(8)}get contentBoxWidth(){let e=this._cached.contentBoxWidth;if(void 0===e)e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderLeftWidth+this.paddingLeft+this.paddingRight+this.borderRightWidth,this._cached.contentBoxWidth=e;return e}get contentBoxHeight(){let e=this._cached.contentBoxHeight;if(void 0===e)e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderTopWidth+this.paddingTop+this.paddingBottom+this.borderBottomWidth,this._cached.contentBoxHeight=e;return e}get inline(){let e=this._cached.inline;if(void 0===e){const t=this.display;e="inline"===t||"initial"===t&&!be.includes(this.tagName),this._cached.inline=e}return e}get inlineStatic(){let e=this._cached.inlineStatic;if(void 0===e)e=this.inline&&this.pageFlow&&!this.floating&&!this.imageElement,this._cached.inlineStatic=e;return e}get inlineVertical(){let e=this._cached.inlineVertical;if(void 0===e){if(this.naturalElement&&!this.floating){const t=this.display;e=t.startsWith("inline")||"table-cell"===t}else e=false;this._cached.inlineVertical=e}return e}get inlineDimension(){let e=this._cached.inlineDimension;if(void 0===e)e=this.naturalElement&&(this.display.startsWith("inline-")||this.floating),this._cached.inlineDimension=e;return e}set inlineText(e){switch(this.tagName){case"INPUT":case"IMG":case"SELECT":case"SVG":case"BR":case"HR":case"TEXTAREA":case"PROGRESS":case"METER":case"CANVAS":this._inlineText=false;break;case"BUTTON":this._inlineText=""!==this.textContent.trim();break;default:this._inlineText=e,this._cached.textElement=void 0;break}}get inlineText(){return this._inlineText}get block(){var e;let t=this._cached.block;if(void 0===t){switch(this.display){case"block":case"flex":case"grid":case"list-item":t=true;break;case"initial":t=be.includes(this.tagName);break;case"inline":if("svg"===this.tagName&&(null===(e=this.actualParent)||void 0===e?void 0:e.htmlElement)){t=!this.hasPX("width")&&0===Fe(ye(this._element,"width"));break}default:t=false;break}this._cached.block=t}return t}get blockStatic(){let e=this._cached.blockStatic;if(void 0===e)e=this.pageFlow&&(this.block&&!this.floating||this.lineBreak||this.blockDimension&&("100%"===ft.call(this,"width")||"100%"===ft.call(this,"minWidth"))&&!this.hasPX("maxWidth")),this._cached.blockStatic=e;return e}get blockDimension(){let e=this._cached.blockDimension;if(void 0===e){if(this.block||this.floating||this.imageElement||this.svgElement)e=true;else{const t=this.display;e=t.startsWith("inline-")||"table"===t}this._cached.blockDimension=e}return e}get blockVertical(){let e=this._cached.blockVertical;if(void 0===e)e=this.blockDimension&&this.hasHeight,this._cached.blockVertical=e;return e}get pageFlow(){let e=this._cached.pageFlow;if(void 0===e)e=this.positionStatic||this.positionRelative,this._cached.pageFlow=e;return e}get inlineFlow(){let e=this._cached.inlineFlow;if(void 0===e)e=this.inline||this.inlineDimension||this.inlineVertical||this.imageElement,this._cached.inlineFlow=e;return e}get centerAligned(){let e=this._cached.centerAligned;if(void 0===e){if(!this.pageFlow)e=this.hasPX("left")&&this.hasPX("right");else e=this.autoMargin.leftRight||gt(this)&&nt(this,"center");this._cached.centerAligned=e}return e}get rightAligned(){let e=this._cached.rightAligned;if(void 0===e){if(!this.pageFlow)e=this.hasPX("right")&&!this.hasPX("left");else e="right"===this.float||this.autoMargin.left||gt(this)&&nt(this,"right","end");this._cached.rightAligned=e}return e}get bottomAligned(){var e;let t=this._cached.bottomAligned;if(void 0===t){if(!this.pageFlow)t=this.hasPX("bottom")&&!this.hasPX("top");else t=true===(null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)&&true===this.autoMargin.top;this._cached.bottomAligned=t}return t}get autoMargin(){let e=this._cached.autoMargin;if(void 0===e){if(!this.pageFlow||this.blockStatic||"table"===this.display){const t=this._styleMap,i="auto"===t.marginLeft&&(this.pageFlow||this.hasPX("right")),s="auto"===t.marginRight&&(this.pageFlow||this.hasPX("left")),n="auto"===t.marginTop&&(this.pageFlow||this.hasPX("bottom")),a="auto"===t.marginBottom&&(this.pageFlow||this.hasPX("top"));e={horizontal:i||s,left:i&&!s,right:!i&&s,leftRight:i&&s,vertical:n||a,top:n&&!a,bottom:!n&&a,topBottom:n&&a}}else e={};this._cached.autoMargin=e}return e}get floating(){let e=this._cached.floating;if(void 0===e)e="none"!==this.float,this._cached.floating=e;return e}get float(){let e=this._cached.float;if(void 0===e)e=this.pageFlow&&this.css("float")||"none",this._cached.float=e;return e}get zIndex(){return this.toInt("zIndex",0)}get textContent(){let e=this._cached.textContent;if(void 0===e)e=!this.svgElement?this._element.textContent:"",this._cached.textContent=e;return e}get src(){return this.htmlElement&&this._element.src||""}get overflowX(){let e=this._cached.overflow;if(void 0===e)e=ct(this),this._cached.overflow=e;return Oe(e,8)}get overflowY(){let e=this._cached.overflow;if(void 0===e)e=ct(this),this._cached.overflow=e;return Oe(e,16)}get baseline(){let e=this._cached.baseline;if(void 0===e){if(this.pageFlow&&!this.floating){const t=this.css("verticalAlign");e="baseline"===t||"initial"===t||0===this.naturalElements.length&&fe(t,true)}else e=false;this._cached.baseline=e}return e}get verticalAlign(){let e=this._cached.verticalAlign;if(void 0===e){if(this.pageFlow){if(e=this.css("verticalAlign"),fe(e,true))e=this.parseUnit(e,"height")+"px"}else e="0px";this._cached.verticalAlign=e}return e}set textBounds(e){this._textBounds=e}get textBounds(){let e=this._textBounds;if(void 0===e){if(e=null,this.naturalChild)if(this.textElement)e=ke(this._element,this.sessionId);else{const t=this.naturalChildren,i=t.length;if(i){let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,l=0,o=0;while(o<i){const e=t[o++];if(e.textElement){const t=ke(e.element,e.sessionId);s=Math.min(t.top,s),n=Math.max(t.right,n),a=Math.min(t.left,a),r=Math.max(t.bottom,r),l+=t.numberOfLines||0}}if(l>0)e={top:s,right:n,left:a,bottom:r,width:n-a,height:r-s,numberOfLines:l}}}this._textBounds=e}return e}get multiline(){var e;let t=this._cached.multiline;if(void 0===t){if(this.plainText)t=Math.floor(ve(this._element).width)>this.actualParent.box.width;else if(this.styleText&&(this.inlineFlow||0===this.naturalElements.length))t=(null===(e=this.textBounds)||void 0===e?void 0:e.numberOfLines)>1;else t=false;this._cached.multiline=t}return t}get backgroundColor(){let e=this._cached.backgroundColor;if(void 0===e){switch(e=this.css("backgroundColor"),e){case"initial":case"transparent":case"rgba(0, 0, 0, 0)":e="";break;default:if(""!==e&&this.pageFlow&&this.styleElement&&!this.inputElement&&(!this._initial||ft.call(this,"backgroundColor")===e)){let t=this.actualParent;while(t){const i=ft.call(t,"backgroundColor",true);if(""!==i){if(i===e&&""===t.backgroundColor)e="";break}t=t.actualParent}}break}this._cached.backgroundColor=e}return e}get backgroundImage(){let e=this._cached.backgroundImage;if(void 0===e){let t=this.css("backgroundImage");if(""!==t&&"none"!==t&&"initial"!==t)e=t;else if(t=this.css("background"),Qe.test(t)){const i=[],s=ze(t),n=s.length;for(let e=1;e<n;++e){const t=s[e-1].trim();if(Qe.test(t))i.push(t+s[e])}e=i.join(", ")}else e="";this._cached.backgroundImage=e}return e}get percentWidth(){let e=this._cached.percentWidth;if(void 0===e){const t=ft.call(this,"width");e=ge(t)?parseFloat(t)/100:0,this._cached.percentWidth=e}return e}get percentHeight(){var e;let t=this._cached.percentHeight;if(void 0===t){const i=ft.call(this,"height");t=ge(i)&&((null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||"fixed"===this.css("position"))?parseFloat(i)/100:0,this._cached.percentHeight=t}return t}get visibleStyle(){let e=this._cached.visibleStyle;if(void 0===e){if(this.plainText)e={background:false,borderWidth:false,backgroundImage:false,backgroundColor:false,backgroundRepeat:false,backgroundRepeatX:false,backgroundRepeatY:false};else{const t=this.borderTopWidth>0||this.borderRightWidth>0||this.borderBottomWidth>0||this.borderLeftWidth>0,i=""!==this.backgroundColor,s=""!==this.backgroundImage;let n=false,a=false;if(s)this.css("backgroundRepeat").split(_e.SEPARATOR).forEach(e=>{const[t,i]=e.split(Se.SPACE);if(!n)n="repeat"===t||"repeat-x"===t;if(!a)a="repeat"===t||"repeat-y"===t||"repeat"===i});e={background:t||s||i,borderWidth:t,backgroundImage:s,backgroundColor:i,backgroundRepeat:n||a,backgroundRepeatX:n,backgroundRepeatY:a}}this._cached.visibleStyle=e}return e}get absoluteParent(){let e=this._cached.absoluteParent;if(void 0===e){if(e=this.actualParent,!this.pageFlow&&!this.documentBody)while(e&&!e.documentBody){switch(ft.call(e,"position",false,true)){case"static":case"initial":case"unset":e=e.actualParent;continue}break}this._cached.absoluteParent=e}return e}set actualParent(e){this._cached.actualParent=e}get actualParent(){var e;let t=this._cached.actualParent;if(void 0===t){const i=null===(e=this._element)||void 0===e?void 0:e.parentElement;t=i&&Ne(i,this.sessionId)||null,this._cached.actualParent=t}return t}get actualWidth(){let e=this._cached.actualWidth;if(void 0===e){if(this.plainText){const t=this.bounds;switch(t.numberOfLines||1){case 1:e=t.width;break;case 2:e=Math.min(t.width,this.actualParent.box.width);break;default:e=Math.min(t.right-t.left,this.actualParent.box.width);break}}else if(this.inlineStatic||"table-cell"===this.display||lt(this,"row"))e=this.bounds.width;else if(e=this.width,e>0){if(this.contentBox&&!this.tableElement)e+=this.contentBoxWidth}else e=this.bounds.width;this._cached.actualWidth=e}return e}get actualHeight(){let e=this._cached.actualHeight;if(void 0===e){if(!this.inlineStatic&&"table-cell"!==this.display&&!lt(this,"column"))if(e=this.height,e>0){if(this.contentBox&&!this.tableElement)e+=this.contentBoxHeight}else e=this.bounds.height;else e=this.bounds.height;this._cached.actualHeight=e}return e}get actualDimension(){return{width:this.actualWidth,height:this.actualHeight}}set naturalChildren(e){this._naturalChildren=e}get naturalChildren(){return this._naturalChildren||function(e){var t;let i;if(e.naturalElement){const t=e.sessionId;i=[];let s=0;e.element.childNodes.forEach(e=>{const n=Ne(e,t);if(n)n.childIndex=s++,i.push(n)})}else i=((null===(t=e.initial)||void 0===t?void 0:t.children)||e.children).slice(0);return e.naturalChildren=i,i}(this)}set naturalElements(e){this._naturalElements=e}get naturalElements(){return this._naturalElements||function(e){const t=e.naturalChildren.filter(e=>e.naturalElement);return e.naturalElements=t,t}(this)}get firstChild(){return this.naturalElements[0]||null}get lastChild(){const e=this.naturalElements,t=e.length;return t?e[t-1]:null}get firstStaticChild(){for(const e of this.naturalChildren)if(e.pageFlow)return e;return null}get lastStaticChild(){const e=this.naturalChildren;let t=e.length-1;while(t>=0){const i=e[t--];if(i.pageFlow)return i}return null}get previousSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex-1])||null}get nextSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex+1])||null}get previousElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(e>0)return t[e-1]}return null}get nextElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(-1!==e)return t[e+1]||null}return null}get attributes(){let e=this._cached.attributes;if(void 0===e){if(e={},this.styleElement){const t=this._element.attributes,i=t.length;let s=0;while(s<i){const{name:i,value:n}=t.item(s++);e[i]=n}}this._cached.attributes=e}return e}get boundingClientRect(){var e;return this.naturalElement&&(null===(e=this._element)||void 0===e?void 0:e.getBoundingClientRect())||this._bounds||Ee()}get fontSize(){var e,t,i;let s=this._fontSize;if(void 0===s){const n=e=>parseFloat(e.getPropertyValue("font-size"));if(this.naturalChild&&this.styleElement){const t=this.css("fontSize");if(Ge.test(t))s=parseFloat(t);else if(ge(t)&&!this.documentBody)s=((null===(e=this.actualParent)||void 0===e?void 0:e.fontSize)||n(de(document.body)))*parseFloat(t)/100;else s=n(this.style)}else s=me(this.css("fontSize"));if(0===s&&!this.naturalChild){const e=this.element;if(e&&ue(e))s=(null===(t=Ne(e,this.sessionId))||void 0===t?void 0:t.fontSize)||n(de(e));else s=(null===(i=this.ascend({condition:e=>e.fontSize>0})[0])||void 0===i?void 0:i.fontSize)||n(de(document.body))}this._fontSize=s}return s}get cssStyle(){return this._cssStyle}get textStyle(){let e=this._textStyle;if(void 0===e)e=this.cssAsObject(...re),e.fontSize=this.fontSize+"px",this._textStyle=e;return e}set dir(e){this._cached.dir=e}get dir(){let e=this._cached.dir;if(void 0===e){if(e=this.naturalElement?this._element.dir:"",""===e){let t=this.actualParent;while(t){if(e=t.dir,""!==e)break;t=t.actualParent}}this._cached.dir=e}return e}get center(){const e=this.bounds;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}}const xt=new Map([[2,"marginTop"],[4,"marginRight"],[8,"marginBottom"],[16,"marginLeft"],[32,"paddingTop"],[64,"paddingRight"],[128,"paddingBottom"],[256,"paddingLeft"]]),yt={ACCESSIBILITY:"squared.accessibility",COLUMN:"squared.column",CSS_GRID:"squared.css-grid",FLEXBOX:"squared.flexbox",GRID:"squared.grid",LIST:"squared.list",RELATIVE:"squared.relative",SPRITE:"squared.sprite",TABLE:"squared.table",VERTICAL_ALIGN:"squared.verticalalign",WHITESPACE:"squared.whitespace"};var vt,Et,St,It=Object.freeze({__proto__:null,CSS_SPACING:xt,EXT_NAME:yt});!function(e){e[e.DOM_TRAVERSE=2]="DOM_TRAVERSE",e[e.EXTENSION=4]="EXTENSION",e[e.RENDER=8]="RENDER",e[e.ALL=14]="ALL"}(vt||(vt={})),function(e){e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.IMAGE_SOURCE=32]="IMAGE_SOURCE",e[e.ASSET=56]="ASSET",e[e.ALL=126]="ALL"}(Et||(Et={})),function(e){e[e.CONSTRAINT=2]="CONSTRAINT",e[e.LAYOUT=4]="LAYOUT",e[e.ALIGNMENT=8]="ALIGNMENT",e[e.ACCESSIBILITY=16]="ACCESSIBILITY",e[e.LOCALIZATION=32]="LOCALIZATION",e[e.CUSTOMIZATION=64]="CUSTOMIZATION",e[e.ALL=126]="ALL"}(St||(St={}));var wt=Object.freeze({__proto__:null,get APP_SECTION(){return vt},get NODE_RESOURCE(){return Et},get NODE_PROCEDURE(){return St}});const _t=squared.lib,{BOX_MARGIN:Tt,BOX_PADDING:kt,BOX_POSITION:At}=_t.css,{isTextNode:Nt}=_t.dom,{equal:Ct}=_t.math,{XML:Rt}=_t.regex,{getElementAsNode:Pt}=_t.session,{cloneObject:Mt,convertWord:Bt,hasBit:Lt,isArray:Ft,iterateArray:Wt,safeNestedMap:Ot,searchObject:Vt,spliceArray:Dt,withinRange:Ht}=_t.util,Xt=Array.from(xt.keys()),Yt=["position","display","verticalAlign","float","clear","zIndex"];function Ut(e={},t,i,s){const{floating:n,pageFlow:a,lineBreak:r,excluded:l}=e,o=[];while(t){const e=Pt(t,s);if(e)if(false!==r&&e.lineBreak||false!==l&&e.excluded&&!e.lineBreak)o.push(e);else if(e.pageFlow&&!e.excluded){if(false===a)break;if(o.push(e),false!==n||!e.floating&&(e.visible||e.rendered)&&"none"!==e.display)break}t=t[i]}return o}const zt=e=>e.naturalElements.length>0&&!e.layoutElement&&!e.tableElement,Gt=e=>e.blockVertical||e.percentWidth>0,jt=(e,t)=>e.blockDimension&&Math.ceil(e.bounds.top)>=t.bounds.bottom&&(Gt(e)||Gt(t)),qt=e=>e.inlineDimension&&!e.hasPX("maxWidth")?e.percentWidth:Number.NEGATIVE_INFINITY;class $t extends bt{constructor(){super(...arguments),this.alignmentType=0,this.rendered=false,this.excluded=false,this.originalRoot=false,this.floatContainer=false,this.lineBreakLeading=false,this.lineBreakTrailing=false,this.baselineActive=false,this.baselineAltered=false,this.positioned=false,this._boxRegister={},this._preferInitial=true,this._excludeSection=0,this._excludeProcedure=0,this._excludeResource=0,this._childIndex=Number.POSITIVE_INFINITY,this._containerIndex=Number.POSITIVE_INFINITY,this._visible=true,this._locked={}}static refitScreen(e,t){const{width:i,height:s}=e.localSettings.screenDimension;let{width:n,height:a}=t;if(n>i)a=Math.round(a*i/n),n=i;else if(a>s)n=Math.round(n*s/a),a=s;else return t;return{width:n,height:a}}static outerRegion(e){let t,i,s,n,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;return e.each(e=>{if(e.companion)t=e.actualRect("top"),i=e.actualRect("right"),s=e.actualRect("bottom"),n=e.actualRect("left");else{if(({top:t,right:i,bottom:s,left:n}=e.linear),e.marginRight<0){const t=i+Math.abs(e.marginRight);if(t>c)c=t}if(e.marginBottom<0){const t=s+Math.abs(e.marginBottom);if(t>h)h=t}}if(t<a)a=t;if(i>r)r=i;if(s>l)l=s;if(n<o)o=n}),{top:a,right:r,bottom:l,left:o,width:Math.max(r,c)-o,height:Math.max(l,h)-a}}static baseline(e,t=false){const i=[],s=e.length;let n=0;while(n<s){const s=e[n++];if(s.baseline&&(!t||s.textElement)&&!s.baselineAltered)if(s.naturalElements.length){if(s.baselineElement)i.push(s)}else i.push(s)}if(i.length>1)i.sort((e,t)=>{if(e.length&&0===t.length)return 1;else if(t.length&&0===e.length)return-1;const i=e.baselineHeight+e.marginBottom,s=t.baselineHeight+t.marginBottom;if(!Ct(i,s))return i>s?-1:1;else if(e.textElement&&t.textElement){if(!e.pseudoElement&&t.pseudoElement)return-1;else if(e.pseudoElement&&!t.pseudoElement)return 1;else if(!e.plainText&&t.plainText)return-1;else if(e.plainText&&!t.plainText)return 1}else if(e.inputElement&&t.inputElement&&e.containerType!==t.containerType)return e.containerType>t.containerType?-1:1;else if(t.textElement&&e.inputElement&&t.childIndex<e.childIndex)return 1;else if(e.textElement&&t.inputElement&&e.childIndex<t.childIndex)return-1;const n=e.bounds.bottom,a=t.bounds.bottom;if(n>a)return-1;else if(n<a)return 1;return 0});return i[0]||null}static linearData(e,t){const i=new Set;let s=false,n=false;const a=e.length;if(a>1){const r=new Array(a);let l=0,o=0;while(l<a){const t=e[l++];if(t.pageFlow){if(t.floating)i.add(t.float);r[o++]=t}else if(t.autoPosition)r[o++]=t}if(o){r.length=o;const e=[r[0]];let a=1,c=1;l=1;while(l<o){const i=r[l++];if(i.alignedVertically(e,t)>0)c++;else a++;if(a>1&&c>1)break;e.push(i)}if(s=a===o,n=c===o,s&&i.size){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;l=0;while(l<o){const s=r[l++],{left:a,right:o}=s.linear;switch(e=Math.min(e,a),t=Math.max(t,o),s.float){case"left":i=Math.max(i,o);break;case"right":n=Math.min(n,a);break}}let a=0,c=0,h=0,d=0;for(l=0;l<o;++l){const o=r[l],{left:u,right:f}=o.linear;if(Math.floor(u)<=e)++a;if(Math.ceil(f)>=t)++c;if(!o.floating){if(u===i)++h;if(f===n)++d}if(0===l)continue;if(2===a||2===c||2===h||2===d){s=false;break}const g=r[l-1];if(Ht(u,g.linear.left)||g.floating&&Math.ceil(o.bounds.top)>=g.bounds.bottom){s=false;break}}}}}else if(a)n=e[0].blockStatic,s=!n;return{linearX:s,linearY:n,floated:i,cleared:t}}static partitionRows(e,t){const i=[];let s=[],n=[];const a=e.length;let r=0;while(r<a){const a=e[r++];let l=a;if(!a.naturalChild){if(a.nodeGroup){if(s.length)i.push(s);i.push([a]),s=[],n.length=0;continue}const e=a.innerMostWrapped;if(e!==a)l=e}if(0===s.length)s.push(a),n.push(l);else if(l.alignedVertically(n,t)>0){if(s.length)i.push(s);s=[a],n=[l]}else s.push(a),n.push(l)}if(s.length)i.push(s);return i}is(e){return this.containerType===e}of(e,...t){return this.is(e)&&t.some(e=>this.hasAlign(e))}attr(e,t,i,s=true){let n=this["__"+e];if(i){if(!n){if(!this._namespaces.includes(e))this._namespaces.push(e);n={},this["__"+e]=n}if(s&&this.lockedAttr(e,t))s=false;if(!s&&n[t])i=n[t];else n[t]=i;return i}else return(null==n?void 0:n[t])||""}unsafe(e,t){if(void 0!==t)this["_"+e]=t;else return this["_"+e]}unset(e){delete this["_"+e]}namespace(e){return this["__"+e]||{}}delete(e,...t){const i=this["__"+e];if(i)t.forEach(e=>{if(e.includes("*"))for(const[t]of Vt(i,e))delete i[t];else delete i[e]})}lockAttr(e,t){Ot(this._locked,e)[t]=true}unlockAttr(e,t){const i=this._locked[e];if(i)i[t]=false}lockedAttr(e,t){var i;return true===(null===(i=this._locked[e])||void 0===i?void 0:i[t])}render(e){this.renderParent=e,this.rendered=true}parseUnit(e,t="width",i=true,s){return super.parseUnit(e,t,i,s||this.localSettings.screenDimension)}parseWidth(e,t=true){return super.parseUnit(e,"width",t,this.localSettings.screenDimension)}parseHeight(e,t=true){return super.parseUnit(e,"height",t,this.localSettings.screenDimension)}renderEach(e){const t=this.renderChildren,i=t.length;let s=0;while(s<i)e(t[s],s++,t);return this}hide(e){let t,i;if(e)({remove:t,replacement:i}=e);if(t)this.removeTry(i);this.rendered=true,this.visible=false}inherit(e,...t){t.forEach(t=>{switch(t){case"base":{if(this._documentParent=e.documentParent,this._bounds=e.bounds,this._linear=e.linear,this._box=e.box,-1===this.depth)this.depth=e.depth;const t=e.actualParent;if(t)this.actualParent=t,this.dir=t.dir;break}case"initial":Mt(e.unsafe("initial"),this.initial);break;case"alignment":{const t=this._styleMap;if(Yt.forEach(i=>t[i]=e.css(i)),!this.positionStatic)At.forEach(i=>{if(e.hasPX(i))t[i]=e.css(i)});Object.assign(this.autoMargin,e.autoMargin),this.autoPosition=e.autoPosition;break}case"styleMap":this.cssCopyIfEmpty(e,...Object.keys(e.unsafe("styleMap")));break;case"textStyle":this.cssApply(e.textStyle),this.setCacheValue("fontSize",e.fontSize);break;case"boxStyle":{const{backgroundColor:t,backgroundImage:i}=e;this.cssApply(e.cssAsObject("backgroundRepeat","backgroundSize","backgroundPositionX","backgroundPositionY","backgroundClip","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius")),this.cssApply({backgroundColor:t,backgroundImage:i,border:"inherit",borderRadius:"inherit"}),this.unsetCache("borderTopWidth","borderBottomWidth","borderRightWidth","borderLeftWidth"),this.setCacheValue("backgroundColor",t),this.setCacheValue("backgroundImage",i),e.setCacheValue("backgroundColor",""),e.setCacheValue("backgroundImage",""),e.cssApply({backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"none",border:"initial",borderRadius:"initial"});const s=e.visibleStyle;s.background=false,s.backgroundImage=false,s.backgroundRepeatX=false,s.backgroundRepeatY=false,s.backgroundColor=false,s.borderWidth=false;break}}})}addAlign(e){if(!this.hasAlign(e))this.alignmentType|=e}removeAlign(e){if(this.hasAlign(e))this.alignmentType^=e}hasAlign(e){return Lt(this.alignmentType,e)}hasResource(e){return!Lt(this._excludeResource,e)}hasProcedure(e){return!Lt(this._excludeProcedure,e)}hasSection(e){return!Lt(this._excludeSection,e)}exclude(e){const{resource:t,procedure:i,section:s}=e;if(t&&!Lt(this._excludeResource,t))this._excludeResource|=t;if(i&&!Lt(this._excludeProcedure,i))this._excludeProcedure|=i;if(s&&!Lt(this._excludeSection,s))this._excludeSection|=s}setExclusions(){var e;if(this.naturalElement){const t=this._element.dataset,i=(null===(e=this.actualParent)||void 0===e?void 0:e.dataset)||{};if(Object.keys(t).length||Object.keys(i).length){const e=(e,s)=>{let n=t[e]||"",a=0;const r=i[e+"Child"];if(r)n+=(""!==n?"|":"")+r;if(""!==n)n.split(/\s*\|\s*/).forEach(e=>{const t=s[e.toUpperCase()]||0;if(t>0&&!Lt(a,t))a|=t});return a};this.exclude({resource:e("excludeResource",Et),procedure:e("excludeProcedure",St),section:e("excludeSection",vt)})}}}appendTry(e,t,i=true){const s=this.children,n=s.length;for(let i=0;i<n;++i){const n=s[i];if(n===e||n===e.innerMostWrapped||n===e.outerMostWrapper)return s[i]=t,t.parent=this,t.containerIndex=e.containerIndex,true}if(i)return t.parent=this,true;else return false}removeTry(e,t){const i=this.renderParent;if(i){const{renderTemplates:s,renderChildren:n}=i;if(s){const a=n.findIndex(e=>e===this);if(-1!==a){const r=s[a];if((null==r?void 0:r.node)===this)if(e){const r=e.renderParent;if(r===this){const l=r.renderTemplates;if(l){const o=l.findIndex(t=>(null==t?void 0:t.node)===e);if(-1!==o)r.renderChildren.splice(o,1);if(i.appendTry(this,e,false)){if(null==t||t.call(this,e),s[a]=l[o],e.renderParent=i,n[a]=e,this.documentRoot)e.documentRoot=true,this.documentRoot=false;return e.depth=this.depth,this.renderParent=void 0,true}}}}else return null==t||t.call(this,e),s.splice(a,1),n.splice(a,1),this.renderParent=void 0,true}}}return false}sort(e){if(e)super.sort(e);else this.children.sort((e,t)=>e.containerIndex<t.containerIndex?-1:1);return this}alignedVertically(e,t,i){if(this.lineBreak)return 2;else if(this.autoPosition&&Ft(e))return e[e.length-1].blockStatic?1:0;else if(this.pageFlow){const s=this.floating;if(Ft(e)){const n=e[e.length-1];if(t)if(t.size&&(t.has(this)||this.siblingsLeading.some(e=>e.excluded&&t.has(e))))return 4;else if(s&&n.floating){if(i&&this.float===n.float||Math.floor(this.bounds.top)===Math.floor(n.bounds.top))return 0;else if(Math.ceil(this.bounds.top)>=n.bounds.bottom){if(e.every(e=>e.inlineDimension)){const t=this.actualParent;if(t&&t.ascend({condition:e=>!e.inline&&e.hasWidth,error:e=>e.layoutElement,startSelf:true})){if(t.naturalChildren.filter(e=>e.visible&&e.pageFlow).length===e.length+1){const i=e=>e.actualWidth+Math.max(e.marginLeft,0)+e.marginRight;let s=t.box.width-i(this);if(e.forEach(e=>s-=i(e)),s>=0)return 0}}}return 6}}else if(this.blockStatic&&e.reduce((e,t)=>e+(t.floating?t.linear.width:Number.NEGATIVE_INFINITY),0)/this.actualParent.box.width>=.8)return 7;else if(e.every(e=>e.inlineDimension&&Math.ceil(this.bounds.top)>=e.bounds.bottom))return 5;else if(void 0!==i)if(s&&!i&&n.blockStatic)return 0;else if(!this.display.startsWith("inline-")){let{top:s,bottom:n}=this.bounds;if(this.textElement&&t.size&&e.some(e=>t.has(e))&&e.some(e=>Math.floor(s)<e.bounds.top&&Math.ceil(n)>e.bounds.bottom))return 7;else if(e[0].floating)if(e.length>1){const t=e[0].float;let a=Number.NEGATIVE_INFINITY,r=0;if(e.forEach(e=>{if(e.floating){if(e.float===t)a=Math.max(e.actualRect("bottom","bounds"),a);r+=e.linear.width}}),Math.ceil(r)>=this.actualParent.box.width)return 5;else if(this.multiline){if(this.styleText){const e=this.textBounds;if(e)n=e.bottom}const e=n-a;s=e<=0||e/(n-s)<.5?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY}else s=Math.ceil(s);if(s<Math.floor(a))return i?0:5;else return i?5:0}else if(!i)return 5}if(jt(this,n))return 3;else{const t=qt(this);if(t>0&&e.reduce((e,t)=>e+qt(t),t)>1)return 8}}for(const n of this.siblingsLeading){if(n.lineBreak)return 2;else if(n.blockStatic||n.autoMargin.leftRight||(s&&0===n.childIndex||false===i)&&n.plainText&&n.multiline)return 1;else if((this.blockStatic||"table"===this.display)&&(!n.floating||(null==t?void 0:t.has(n))))return 1;else if(n.floating){if("left"===n.float){if(this.autoMargin.right)return 5}else if(this.autoMargin.left)return 5;if(this.floatContainer&&this.some(e=>e.floating&&Math.ceil(e.bounds.top)>=n.bounds.bottom))return 5}if((null==t?void 0:t.has(n))&&!((null==e?void 0:e[0])===n))return 4;else if(jt(this,n))return 3}}else return 1;return 0}previousSiblings(e={}){var t,i,s;return Ut(e,this.nodeGroup?null===(i=null===(t=this.firstChild)||void 0===t?void 0:t.element)||void 0===i?void 0:i.previousSibling:null===(s=this.innerMostWrapped.element)||void 0===s?void 0:s.previousSibling,"previousSibling",this.sessionId)}nextSiblings(e={}){var t,i,s;return Ut(e,this.nodeGroup?null===(i=null===(t=this.firstChild)||void 0===t?void 0:t.element)||void 0===i?void 0:i.nextSibling:null===(s=this.innerMostWrapped.element)||void 0===s?void 0:s.nextSibling,"nextSibling",this.sessionId)}modifyBox(e,t,i=true){if(0!==t){const s=xt.get(e);if(s){const n=this._boxRegister[e];if(void 0===t)if(n){const t=this[s]||n.getBox(e)[1];if(t>0)n.modifyBox(e,-t,i)}else this._boxReset[s]=1;else if(n)n.modifyBox(e,t,i);else{const e=this._boxAdjustment;if(!i&&(0===this._boxReset[s]?this[s]:0)+e[s]+t<=0){if(e[s]=0,this[s]>=0&&t<0)this._boxReset[s]=1}else e[s]+=t}}}}getBox(e){const t=xt.get(e);return t?[this._boxReset[t],this._boxAdjustment[t]]:[NaN,0]}setBox(e,t){const i=xt.get(e);if(i){const s=this._boxRegister[e];if(s)s.setBox(e,t);else{const{reset:e,adjustment:s}=t,n=this._boxReset,a=this._boxAdjustment;if(void 0!==e)n[i]=e;if(void 0!==s){let e=a[i];if(t.accumulate)e+=s;else e=s;if(false===t.negative&&(0===n[i]?this[i]:0)+e<=0)if(e=0,this[i]>=0&&e<0)n[i]=1;a[i]=e}else if(1===e&&!this.naturalChild)a[i]=0}}}resetBox(e,t){const i=this._boxReset,s=(s,n)=>{for(let a=0;a<4;++a){const r=Xt[a+n];if(Lt(e,r)){const e=s[a];if(i[e]=1,t){const i=this.registerBox(r);if(i)i.resetBox(r,t);else{if(this.naturalChild){const i=this[e];if(i>=0)t.modifyBox(r,i)}this.transferBox(r,t)}}}}};if(Lt(30,e))s(Tt,0);if(Lt(480,e))s(kt,4)}transferBox(e,t){const i=this._boxAdjustment,s=(s,n)=>{for(let a=0;a<4;++a){const r=Xt[a+n];if(Lt(e,r)){const e=this.registerBox(r);if(e)e.transferBox(r,t);else{const e=s[a],n=i[e];if(0!==n)t.modifyBox(r,n,false),i[e]=0;this.registerBox(r,t)}}}};if(Lt(30,e))s(Tt,0);if(Lt(480,e))s(kt,4)}registerBox(e,t){const i=this._boxRegister;if(t)i[e]=t;else t=i[e];while(t){const i=t.unsafe("boxRegister")[e];if(i)t=i;else break}return t}actualPadding(e,t){if(t>0){if(!this.layoutElement){const i=this.innerMostWrapped;if(i!==this)if(i.naturalChild){if(0===i.getBox("paddingTop"===e?32:128)[0])return 0}else return t;if(i.naturalChild)return zt(i)&&function e(t,i,s){let n=false;const a=t.length;let r=0;while(r<a){const a=t[r++];if(a.blockStatic)return false;else if(a.inlineStatic)if(a.has("lineHeight")&&a.lineHeight>a.bounds.height)return false;else if(a[i]>=s)n=true;else if(zt(a))if(!e(a.naturalChildren,i,s))return false;else n=true}return n}(i.naturalChildren,e,t)?0:t}else if(this.gridElement)switch(this.css("alignContent")){case"space-around":case"space-evenly":return 0}return t}return 0}actualBoxWidth(e){if(!e)e=this.box.width;if(this.pageFlow&&!this.documentRoot){let t=0,i=0,s=this.actualParent;while(s){if(s.hasPX("width",false)||!s.pageFlow)return e;else t+=Math.max(s.marginLeft,0)+s.borderLeftWidth+s.paddingLeft,i+=s.paddingRight+s.borderRightWidth+s.marginRight;if(s.documentRoot)break;else s=s.actualParent}const n=this.localSettings.screenDimension.width-t-i;if(n>0)return Math.min(e,n)}return e}cloneBase(e){if(e.localSettings=this.localSettings,e.alignmentType=this.alignmentType,e.containerName=this.containerName,e.depth=this.depth,e.visible=this.visible,e.excluded=this.excluded,e.rendered=this.rendered,e.childIndex=this.childIndex,e.containerIndex=this.containerIndex,e.inlineText=this.inlineText,e.lineBreakLeading=this.lineBreakLeading,e.lineBreakTrailing=this.lineBreakTrailing,e.actualParent=this.actualParent,e.documentParent=this.documentParent,e.documentRoot=this.documentRoot,e.renderParent=this.renderParent,this.length)e.retain(this.duplicate());e.inherit(this,"initial","base","alignment","styleMap","textStyle"),Object.assign(e.unsafe("cached"),this._cached)}unsetCache(...e){if(e.length){const t=this._cached;e.forEach(e=>{switch(e){case"top":case"right":case"bottom":case"left":t.autoPosition=void 0,t.positiveAxis=void 0;break;case"fontSize":case"lineHeight":t.baselineHeight=void 0;break;case"whiteSpace":t.preserveWhiteSpace=void 0,t.textEmpty=void 0;break}})}super.unsetCache(...e)}css(e,t,i=false){if(arguments.length>=2){if(t)this._styleMap[e]=t;else delete this._styleMap[e];if(i)this.unsetCache(e)}return this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=false){if(Object.assign(this._styleMap,e),t)this.unsetCache(...Object.keys(e));return this}cssSet(e,t,i=true){return super.css(e,t,i)}setCacheValue(e,t){this._cached[e]=t}get element(){return this._element||!!this.innerWrapped&&this.innerMostWrapped.unsafe("element")||null}set naturalChild(e){this._cached.naturalChild=e}get naturalChild(){var e;let t=this._cached.naturalChild;if(void 0===t)t=!!(null===(e=this._element)||void 0===e?void 0:e.parentElement),this._cached.naturalChild=t;return t}get pseudoElement(){var e;return"__squared.pseudo"===(null===(e=this._element)||void 0===e?void 0:e.className)}set documentParent(e){this._documentParent=e}get documentParent(){return this._documentParent||this.absoluteParent||this.actualParent||this.parent||this}set containerName(e){this._cached.containerName=e.toUpperCase()}get containerName(){let e=this._cached.containerName;if(void 0===e){const t=this.element;if(t)if(Nt(t))e="PLAINTEXT";else if("INPUT"===t.tagName)e="INPUT_"+Bt(t.type,true).toUpperCase();else e=t.tagName.toUpperCase();else e="";this._cached.containerName=e}return e}get layoutHorizontal(){return this.hasAlign(8)}get layoutVertical(){if(this.hasAlign(16))return true;else if(this.naturalChild){const e=this.naturalChildren;return 1===e.length&&e[0].blockStatic}return false}get nodeGroup(){return false}set renderAs(e){if(!this.rendered&&false===(null==e?void 0:e.rendered))this._renderAs=e}get renderAs(){return this._renderAs}get blockStatic(){return super.blockStatic||this.hasAlign(64)&&this.pageFlow&&!this.floating}get rightAligned(){return super.rightAligned||this.hasAlign(2048)}set autoPosition(e){this._cached.autoPosition=e}get autoPosition(){let e=this._cached.autoPosition;if(void 0===e){if(this.pageFlow)e=false;else{const{top:t,right:i,bottom:s,left:n}=this._styleMap;e=!(t&&"auto"!==t||n&&"auto"!==n||i&&"auto"!==i||s&&"auto"!==s)}this._cached.autoPosition=e}return e}set textContent(e){this._cached.textContent=e}get textContent(){let e=this._cached.textContent;if(void 0===e)e=this.naturalChild&&this._element.textContent||"",this._cached.textContent=e;return e}get positiveAxis(){let e=this._cached.positiveAxis;if(void 0===e)e=(!this.positionRelative||this.positionRelative&&this.top>=0&&this.left>=0&&(this.right<=0||this.hasPX("left"))&&(this.bottom<=0||this.hasPX("top")))&&this.marginTop>=0&&this.marginLeft>=0&&this.marginRight>=0,this._cached.positiveAxis=e;return e}get leftTopAxis(){let e=this._cached.leftTopAxis;if(void 0===e){switch(this.cssInitial("position")){case"absolute":e=this.absoluteParent===this.documentParent;break;case"fixed":e=true;break;default:e=false;break}this._cached.leftTopAxis=e}return e}get baselineElement(){let e=this._cached.baselineElement;if(void 0===e){if(this.baseline){const t=this.naturalChildren;if(t.length)e=t.every(e=>e.baselineElement&&0===e.length);else e=this.inlineText&&this.textElement||this.plainText&&!this.multiline||this.inputElement||this.imageElement||this.svgElement}else e=false;this._cached.baselineElement=e}return e}set multiline(e){this._cached.multiline=e,this._cached.baselineElement=void 0}get multiline(){return super.multiline}set visible(e){this._visible=e}get visible(){return this._visible}set controlName(e){if(!this.rendered||!this._controlName)this._controlName=e}get controlName(){return this._controlName||""}set actualParent(e){this._cached.actualParent=e}get actualParent(){let e=this._cached.actualParent;if(void 0===e){if(e=super.actualParent,null===e)e=this.innerMostWrapped.actualParent;this._cached.actualParent=e}return e}set siblingsLeading(e){this._siblingsLeading=e}get siblingsLeading(){return this._siblingsLeading||this.previousSiblings()}set siblingsTrailing(e){this._siblingsTrailing=e}get siblingsTrailing(){return this._siblingsTrailing||this.nextSiblings()}get previousSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){let e=i-1;while(e>=0){const i=t[e--];if(i&&(!i.excluded||i.lineBreak))return i}}}return null}get nextSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){const e=t.length;let s=i+1;while(s<e){const e=t[s++];if(e&&(!e.excluded||e.lineBreak))return e}}}return null}get firstChild(){return this.naturalChildren[0]||null}get lastChild(){const e=this.naturalChildren;return e[e.length-1]||null}get onlyChild(){var e,t,i;return 1===(null!==(t=null===(e=this.renderParent)||void 0===e?void 0:e.renderChildren.length)&&void 0!==t?t:null===(i=this.parent)||void 0===i?void 0:i.length)&&!this.documentRoot}set childIndex(e){this._childIndex=e}get childIndex(){let e=this._childIndex;if(e===Number.POSITIVE_INFINITY){let t=this.innerWrapped;if(t)do{const i=t.childIndex;if(i!==Number.POSITIVE_INFINITY){e=i,this._childIndex=e;break}t=t.innerWrapped}while(t);else{const t=this._element;if(t){const i=t.parentElement;if(i)Wt(i.childNodes,(i,s)=>{if(i===t)return e=s,this._childIndex=s,true})}}}return e}set containerIndex(e){this._containerIndex=e}get containerIndex(){let e=this._containerIndex;if(e===Number.POSITIVE_INFINITY){let t=this.innerWrapped;while(t){const i=t.containerIndex;if(i!==Number.POSITIVE_INFINITY){e=i,this._containerIndex=e;break}t=t.innerWrapped}}return e}get textEmpty(){let e=this._cached.textEmpty;if(void 0===e){if(this.styleElement&&!this.imageElement&&!this.svgElement){const t=this.textContent;e=""===t||!this.preserveWhiteSpace&&""===t.trim()}else e=false;this._cached.textEmpty=e}return e}get innerMostWrapped(){if(this.naturalChild)return this;let e=this.innerWrapped;while(e){const t=e.innerWrapped;if(t)e=t;else break}return e||this}get outerMostWrapper(){let e=this.outerWrapper;while(e){const t=e.outerWrapper;if(t)e=t;else break}return e||this}get preserveWhiteSpace(){let e=this._cached.preserveWhiteSpace;if(void 0===e){const t=this.css("whiteSpace");e="pre"===t||"pre-wrap"===t,this._cached.preserveWhiteSpace=e}return e}get outerExtensionElement(){if(this.naturalChild){let e=this._element.parentElement;while(e){if(e.dataset.use)return e;e=e.parentElement}}return null}get extensions(){let e=this._cached.extensions;if(void 0===e){const t=this.dataset.use;e=t?Dt(t.split(Rt.SEPARATOR),e=>""===e):[],this._cached.extensions=e}return e}}const{hasBit:Kt}=squared.lib.util;class Qt extends squared.lib.base.Container{constructor(e,t,i=0,s=0,n){super(n),this.parent=e,this.node=t,this.containerType=i,this.alignmentType=s,this.rowCount=0,this.columnCount=0,this.renderType=0,this.renderIndex=-1}static create(e){const{parent:t,node:i,containerType:s,alignmentType:n,children:a,itemCount:r,rowCount:l,columnCount:o}=e,c=new Qt(t,i,s,n,a);if(r)c.itemCount=r;if(l)c.rowCount=l;if(o)c.columnCount=o;return c}init(){const e=this.length;if(e>1){const e=$t.linearData(this.children);this._floated=e.floated,this._linearX=e.linearX,this._linearY=e.linearY}else if(e)this._linearY=this.item(0).blockStatic,this._linearX=!this._linearY;else return;this._initialized=true}setContainerType(e,t){if(this.containerType=e,t)this.add(t)}hasAlign(e){return Kt(this.alignmentType,e)}add(e){if(!Kt(this.alignmentType,e))this.alignmentType|=e;return this.alignmentType}addRender(e){if(!Kt(this.renderType,e))this.renderType|=e;return this.renderType}delete(e){if(Kt(this.alignmentType,e))this.alignmentType^=e;return this.alignmentType}retain(e){return super.retain(e),this.init(),this}set itemCount(e){this._itemCount=e}get itemCount(){var e;return null!==(e=this._itemCount)&&void 0!==e?e:this.length}get linearX(){var e;if(!this._initialized)this.init();return null!==(e=this._linearX)&&void 0!==e?e:true}get linearY(){var e;if(!this._initialized)this.init();return null!==(e=this._linearY)&&void 0!==e?e:false}get floated(){if(!this._initialized)this.init();return this._floated||new Set}set type(e){this.setContainerType(e.containerType,e.alignmentType);const t=e.renderType;if(t)this.addRender(t)}get singleRowAligned(){let e=this._singleRow;if(void 0===e){const t=this.length;if(t){if(e=true,t>1){let i=Number.POSITIVE_INFINITY;const s=this.children;let n=0;while(n<t){const t=s[n++];if(t.blockStatic||t.multiline||Math.ceil(t.bounds.top)>=i){e=false;break}i=t.bounds.bottom}}this._singleRow=e}else e=false}return e}get unknownAligned(){return this.length>1&&!this.linearX&&!this.linearY}}const Jt=squared.lib,{BOX_POSITION:Zt,TEXT_STYLE:ei,convertListStyle:ti,formatPX:ii,getStyle:si,insertStyleSheetRule:ni,resolveURL:ai}=Jt.css,{getNamedItem:ri,isTextNode:li,removeElementsByClassName:oi}=Jt.dom,{maxArray:ci}=Jt.math,{appendSeparator:hi,convertFloat:di,convertWord:ui,flatArray:fi,hasBit:gi,hasMimeType:pi,isString:mi,iterateArray:bi,partitionArray:xi,safeNestedArray:yi,safeNestedMap:vi,trimBoth:Ei,trimString:Si}=Jt.util,{XML:Ii}=Jt.regex,{getElementCache:wi,getPseudoElt:_i,setElementCache:Ti}=Jt.session,{isPlainText:ki}=Jt.xml,Ai=/\s*(?:attr\(([^)]+)\)|(counter)\(([^,)]+)(?:,\s+([a-z-]+))?\)|(counters)\(([^,]+),\s+"([^"]*)"(?:,\s+([a-z-]+))?\)|"([^"]+)")\s*/g;function Ni(e,t,i,s,n,a){vi(e,i)[s]=a,t.style.setProperty(s,n)}function Ci(e,t,i=1){if("none"!==e){const s=/\s*([^\-\d][^\-\d]?[^\s]*)\s+(-?\d+)\s*/g;let n;while(null!==(n=s.exec(e)))if(n[1]===t)return parseInt(n[2]);return i}}function Ri(e,t,i,s,n){var a;const r=null===(a=wi(e,"styleMap"+i,s))||void 0===a?void 0:a.counterIncrement;return r?Ci(r,t,n):void 0}function Pi(e,t,i){if(i.length)return false;else return t.push(e),true}function Mi(e,t,i){if(t.length)return false;else return i.push(e),true}function Bi(e,t){if(e){const i=e.split(Ii.SEPARATOR),s=[],n=[];if(t.forEach(e=>{const t=i.indexOf(e.name);if(-1!==t)s[t]=e;else n.push(e)}),s.length)return fi(s).concat(n)}return t}const Li=e=>!e.blockStatic&&true!==e.autoMargin.horizontal&&!(e.blockDimension&&"100%"===e.css("width"))&&(!(e.plainText&&e.multiline)||e.floating),Fi=e=>e.textElement&&(e.blockStatic||e.multiline),Wi=(e,t)=>e.positionRelative?e.hasPX("left")?e.left*(t?1:-1):e.right*(t?-1:1):0;const Oi=squared.lib,{USER_AGENT:Vi,isUserAgent:Di,isWinEdge:Hi}=Oi.client,{BOX_BORDER:Xi,BOX_PADDING:Yi,formatPX:Ui,getStyle:zi,isLength:Gi,isPercent:ji}=Oi.css,{isTextNode:qi,withinViewport:$i}=Oi.dom,{capitalize:Ki,convertFloat:Qi,flatArray:Ji,isString:Zi,iterateArray:es,safeNestedArray:ts}=Oi.util,{actualClientRect:is,getElementCache:ss,setElementCache:ns}=Oi.session,{pushIndent:as,pushIndentArray:rs}=Oi.xml;function ls(e){switch(e.getPropertyValue("position")){case"absolute":case"fixed":return true}return false}const os=(e,t)=>parseInt(e.getPropertyValue(t));const cs=squared.lib,{hasComputedStyle:hs}=cs.css,{includes:ds}=cs.util;class us extends q{constructor(e,t,i,s=[]){super(e,t,i),this.eventOnly=false,this.documentBase=false,this.cascadeAll=false,this.removeIs=false,this.tagNames=s,this._isAll=0===s.length}static findNestedElement(e,t){if(e&&hs(e)){const i=e.children,s=i.length;let n=0;while(n<s){const e=i[n++];if(ds(e.dataset.use,t))return e}}return null}is(e){return this._isAll||this.tagNames.includes(e.tagName)}condition(e,t){return e.dataset.use?this.included(e.element):!this._isAll}included(e){return ds(e.dataset.use,this.name)}processNode(e,t){}processChild(e,t){}addDescendant(e){const t=this.application.session.extensionMap,i=e.id,s=t.get(i);if(s){if(!s.includes(this))s.push(this)}else t.set(i,[this])}postBaseLayout(e){}postConstraints(e){}postOptimize(e){}afterBaseLayout(){}afterConstraints(){}afterResources(){}beforeBaseLayout(){}beforeCascade(e){}afterFinalize(){}set application(e){this._application=e,this._controller=e.controllerHandler,this._resource=e.resourceHandler,this._cache=e.session.cache,this._cacheProcessing=e.processing.cache}get application(){return this._application}get controller(){return this._controller}get resource(){return this._resource}get cache(){return this._cache}get cacheProcessing(){return this._cacheProcessing}}const{isLength:fs}=squared.lib.css;const gs=squared.lib,{USER_AGENT:ps,isUserAgent:ms}=gs.client,{parseColor:bs}=gs.color,{BOX_BORDER:xs,calculate:ys,convertAngle:vs,formatPX:Es,getBackgroundPosition:Ss,getInheritedStyle:Is,isCalc:ws,isLength:_s,isParentStyle:Ts,isPercent:ks,parseAngle:As}=gs.css,{cos:Ns,equal:Cs,hypotenuse:Rs,offsetAngleX:Ps,offsetAngleY:Ms,relativeAngle:Bs,sin:Ls,triangulate:Fs,truncateFraction:Ws}=gs.math,{CHAR:Os,ESCAPE:Vs,STRING:Ds,XML:Hs}=gs.regex,{getElementAsNode:Xs}=gs.session,{appendSeparator:Ys,convertCamelCase:Us,convertFloat:zs,hasValue:Gs,isEqual:js,isNumber:qs,isString:$s,iterateArray:Ks,trimEnd:Qs,trimStart:Js}=gs.util,{STRING_SPACE:Zs,STRING_TABSPACE:en}=gs.xml,tn=`((?:rgb|hsl)a?\\(\\d+,\\s+\\d+%?,\\s+\\d+%?(?:,\\s+[\\d.]+)?\\)|#[A-Za-z\\d]{3,8}|[a-z]+)\\s*(${Ds.LENGTH_PERCENTAGE}|${Ds.CSS_ANGLE}|(?:${Ds.CSS_CALC}(?=,)|${Ds.CSS_CALC}))?,?\\s*`,sn=/\u00A0/g,nn=new RegExp(`(?:initial|url\\([^)]+\\)|(repeating-)?(linear|radial|conic)-gradient\\(((?:to\\s+[a-z\\s]+|(?:from\\s+)?-?[\\d.]+(?:deg|rad|turn|grad)|(?:circle|ellipse)?\\s*(?:closest-side|closest-corner|farthest-side|farthest-corner)?)?(?:\\s*(?:(?:-?[\\d.]+(?:[a-z%]+)?\\s*)+)?(?:at\\s+[\\w %]+)?)?),?\\s*((?:${tn})+)\\))`,"g"),an=new RegExp(tn,"g"),rn=/\n([^\S\n]*)?$/;function ln(e,t,i){const{width:s,height:n}=t.dimension,a=[];let r,l=false,o=true,c=1;switch(t.type){case"linear":{const{repeating:e,angle:i}=t;switch(l=e,i){case 0:case 180:case 360:r=n,o=false;break;case 90:case 270:r=s;break;default:r=Math.abs(s*Ls(i-180))+Math.abs(n*Ns(i-180)),o=s>=n;break}break}case"radial":{const{repeating:i,radiusExtent:s,radius:n}=t;o=e.actualWidth>=e.actualHeight,l=i,c=s/n,r=n;break}case"conic":r=Math.min(s,n);break;default:return a}let h,d=0;while(null!==(h=an.exec(i))){const i=bs(h[1],1,true);if(i){let s=-1;if("conic"===t.type){const e=h[3],t=h[4];if(e&&t)s=vs(e,t)/360}else{const t=h[2];if(ks(t))s=parseFloat(t)/100;else if(_s(t))s=(o?e.parseWidth(t,false):e.parseHeight(t,false))/r;else if(ws(t))if(s=ys(h[6],{boundingSize:r,fontSize:e.fontSize})/r,isNaN(s))s=-1;if(l&&-1!==s)s*=c}if(0===a.length)if(-1===s)s=0;else if(s>0)a.push({color:i,offset:0});if(-1!==s)s=Math.max(d,s),d=s;a.push({color:i,offset:s})}}const u=a.length,f=a[u-1];if(-1===f.offset)f.offset=1;let g=0;for(let e=0;e<u;++e){const t=a[e];if(-1===t.offset)if(0===e)t.offset=0;else{for(let i=e+1,s=2;i<u-1;++s){const e=a[i++];if(-1!==e.offset){t.offset=(g+e.offset)/s;break}}if(-1===t.offset)t.offset=g+f.offset/(u-1)}g=t.offset}if(l){if(g<100)e:{let e=g;const t=a.slice(0);while(g<100){let i=0;while(i<u){const s=t[i++];if(g=Math.min(e+s.offset,1),a.push(Object.assign(Object.assign({},s),{offset:g})),1===g)break e}e=g}}}else if(g<1)a.push(Object.assign(Object.assign({},a[u-1]),{offset:1}));return an.lastIndex=0,a}function on(e,t=0){if(""!==(e=e.trim())){let t=As(e);if(t<0)t+=360;return t}return t}function cn(e,t){var i,s,n;let a=false;switch(t=t.replace(sn,Zs),e.css("whiteSpace")){case"nowrap":t=t.replace(/\n/g," "),a=true;break;case"pre":case"pre-wrap":{if(false===(null===(i=e.renderParent)||void 0===i?void 0:i.layoutVertical))t=t.replace(/^\s*\n/,"");const s=pn.checkPreIndent(e);if(s){const[e,i]=s;if(""!==e)i.textContent=e+i.textContent;t=t.replace(rn,"")}return[t=t.replace(/\n/g,"\\n").replace(/\t/g,en).replace(/\s/g,Zs),true,false]}case"pre-line":return[t=t.replace(/\n/g,"\\n").replace(/\s+/g," "),true,false]}if(e.onlyChild&&e.htmlElement)t=t.replace(Os.LEADINGSPACE,"").replace(Os.TRAILINGSPACE,"");else{if(null===(s=e.previousSibling)||void 0===s?void 0:s.blockStatic)t=t.replace(Os.LEADINGSPACE,"");if(null===(n=e.nextSibling)||void 0===n?void 0:n.blockStatic)t=t.replace(Os.TRAILINGSPACE,"")}return[t,a,true]}function hn(e,t,i,s){if(i){const n=i.split(Hs.SEPARATOR);return pn.getBackgroundSize(e,n[t%n.length],s)}}function dn(e,t,i,s){const n=e.css(s[0])||"none";if("none"!==n){let a=Es("outline"!==i?e[s[1]]:zs(e.style[s[1]]));if("0px"!==a){let r=e.css(s[2])||"initial";switch(r){case"initial":r="rgb(0, 0, 0)";break;case"inherit":case"currentcolor":case"currentColor":r=Is(e.element,s[2]);break}if("2px"===a&&("inset"===n||"outset"===n))a="1px";if(r=bs(r,1,true),r)t[i]={width:a,style:n,color:r}}}}function un(e,t,i){let s=e.css(i);if("initial"===s)s="backgroundClip"===i?"border-box":"padding-box";switch(s){case"border-box":return true;case"padding-box":t[i]={top:e.borderTopWidth,right:e.borderRightWidth,bottom:e.borderBottomWidth,left:e.borderLeftWidth};break;case"content-box":t[i]={top:e.borderTopWidth+e.paddingTop,right:e.borderRightWidth+e.paddingRight,bottom:e.borderBottomWidth+e.paddingBottom,left:e.borderLeftWidth+e.paddingLeft};break}return false}const fn=e=>e.replace(/&/g,"&amp;"),gn=e=>$s(e)?e.includes("at ")?/(.+?)?\s*at (.+?)\s*$/.exec(e):[e,e]:null;class pn extends h{static isInheritedStyle(e,t){var i;return e.styleElement&&e.style[t]===(null===(i=e.actualParent)||void 0===i?void 0:i.style[t])&&("inherit"===e.cssStyle[t]||""===e.cssInitial(t))}static isBackgroundVisible(e){return!!e&&("backgroundImage"in e||"borderTop"in e||"borderRight"in e||"borderBottom"in e||"borderLeft"in e)}static generateId(e,t,i=1){const s=t;let n=i;if(1===i)t+="_"+n;const a=this.ASSETS.ids,r=a.get(e)||[];do{if(!r.includes(t)){r.push(t);break}else t=`${s}_${++n}`}while(true);return a.set(e,r),t}static insertStoredAsset(e,t,i){const s=pn.STORED[e];if(s&&Gs(i)){let n=function(e,t){const i=pn.STORED[e];if(i)for(const[e,s]of i.entries())if(js(t,s))return e;return""}(e,i);if(""===n){if(qs(t))t="__"+t;let e=0;do{if(n=t+(e>0?"_"+e:""),!s.has(n)){s.set(n,i);break}}while(++e)}return n}return""}static getOptionArray(e,t=false){let i=[],s=true;return Ks(e.children,e=>{if(!e.disabled||t)switch(e.tagName){case"OPTION":{const t=e.text.trim()||e.value.trim();if(""!==t){if(s&&!qs(t))s=false;i.push(t)}break}case"OPTGROUP":{const[n,a]=this.getOptionArray(e,t);if(n)i=i.concat(n),s=false;else if(a)i=i.concat(a);break}}}),s?[void 0,i]:[i]}static parseBackgroundImage(e,t,i){var s,n;if(""!==t){const a=[];let r,l=0;nn.lastIndex=0;while(null!==(r=nn.exec(t))){const t=r[0];if(t.startsWith("url(")||"initial"===t)a.push(t);else{const t=!!r[1],o=r[2],c=r[3],h=hn(e,l,e.css("backgroundSize"),i),d=$t.refitScreen(e,h||e.actualDimension);let u;switch(o){case"linear":{const{width:i,height:s}=d;let n=180;switch(c){case"to top":n=360;break;case"to right top":n=45;break;case"to right":n=90;break;case"to right bottom":n=135;break;case"to bottom":break;case"to left bottom":n=225;break;case"to left":n=270;break;case"to left top":n=315;break;default:if(c)n=on(c,180)||360;break}let a=Ws(Ps(n,i)),l=Ws(Ms(n,s));if(a!==i&&l!==s&&!Cs(Math.abs(a),Math.abs(l))){let e;if(n<=90)e=Bs({x:0,y:s},{x:i,y:0});else if(n<=180)e=Bs({x:0,y:0},{x:i,y:s});else if(n<=270)e=Bs({x:0,y:0},{x:-i,y:s});else e=Bs({x:0,y:s},{x:-i,y:0});const t=Math.abs(e-n);a=Ws(Ps(n,Fs(t,90-t,Rs(i,s))[1])),l=Ws(Ms(n,Fs(90,90-n,a)[0]))}const h={type:o,repeating:t,dimension:d,angle:n,angleExtent:{x:a,y:l}};h.colorStops=ln(e,h,r[4]),u=h;break}case"radial":{const a=gn(c),l=Ss((null==a?void 0:a[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i}),{left:f,top:g}=l,{width:p,height:m}=d;let b="ellipse",x=g,y=g,v=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,S=0,I=0;if(a){const t=null===(s=a[1])||void 0===s?void 0:s.trim();if(t)if(t.startsWith("circle"))b="circle";else{let i=Number.POSITIVE_INFINITY;const s=t.split(" "),n=s.length;for(let t=0;t<n;++t)i=Math.min(0===t?e.parseWidth(s[t],false):e.parseHeight(s[t],false),i);if(S=i,I=i,1===n||s[0]===s[1])b="circle"}}[[0,0],[p,0],[p,m],[0,m]].forEach(e=>{const t=Math.round(Rs(Math.abs(e[0]-f),Math.abs(e[1]-g)));v=Math.min(t,v),E=Math.max(t,E)}),[p-f,m-g,f].forEach(e=>{x=Math.min(e,x),y=Math.max(e,y)});const w={type:o,repeating:t,dimension:d,shape:b,center:l,closestSide:x,farthestSide:y,closestCorner:v,farthestCorner:E};if(0===S&&0===I){S=E;const e=(null===(n=null==a?void 0:a[1])||void 0===n?void 0:n.split(" ").pop())||"";switch(e){case"closest-corner":case"closest-side":case"farthest-side":{const i=w[Us(e)];if(t)I=i;else S=i;break}default:I=E;break}}w.radius=S,w.radiusExtent=I,w.colorStops=ln(e,w,r[4]),u=w;break}case"conic":{const t=gn(c),s={type:o,dimension:d,angle:on(c),center:Ss((null==t?void 0:t[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i})};s.colorStops=ln(e,s,r[4]),u=s;break}}a.push(u||"initial")}++l}if(a.length)return a}}static getBackgroundSize(e,t,i){let s=0,n=0;switch(t){case"":case"cover":case"contain":case"100% 100%":case"auto":case"auto auto":case"initial":return;default:{const a=t.split(Os.SPACE);if(1===a.length)a[1]=a[0];a.forEach((t,a)=>{if("auto"===t)t="100%";switch(a){case 0:s=e.parseUnit(t,"width",false,i);break;case 1:n=e.parseUnit(t,"height",false,i);break}});break}}return s>0&&n>0?{width:Math.round(s),height:Math.round(n)}:void 0}static hasLineBreak(e,t=false,i=false){if(e.naturalElements.length)return e.naturalElements.some(e=>e.lineBreak);else if(!t&&e.naturalChild){const t=e.element;let s=t.textContent;if(i)s=s.trim();return s.includes("\n")&&(e.plainText&&Ts(t,"whiteSpace","pre","pre-wrap")||e.css("whiteSpace").startsWith("pre"))}return false}static checkPreIndent(e){if(e.plainText){const t=e.actualParent;if((null==t?void 0:t.preserveWhiteSpace)&&t.ascend({condition:e=>"PRE"===e.tagName,startSelf:true}).length){let t=e.nextSibling;if(null==t?void 0:t.naturalElement){const i=e.textContent;if(""!==i.trim()){const e=rn.exec(i);if(e){if(!t.textElement)t=t.find(e=>e.naturalChild&&e.textElement,{cascade:true,error:e=>e.naturalChild&&!e.textElement&&0===e.length});if(t)return[e[1]?e[0]:"",t]}}}}}}finalize(e){}reset(){super.reset();const e=pn.STORED;for(const t in e)e[t].clear()}writeRawImage(e,t){const i=this.fileHandler;if(i){const s={pathname:Ys(this.userSettings.outputDirectory,this.controllerSettings.directory.image),filename:e,base64:t};return i.addAsset(s),s}}setBoxStyle(e){var t;if((e.styleElement||e.visibleStyle.background)&&e.hasResource(Et.BOX_STYLE)){const i=e.cssAsObject("backgroundSize","backgroundRepeat","backgroundPositionX","backgroundPositionY");if(un(e,i,"backgroundClip"))un(e,i,"backgroundOrigin");if("0px"!==e.css("borderRadius")){const{borderTopLeftRadius:t,borderTopRightRadius:s,borderBottomRightRadius:n,borderBottomLeftRadius:a}=e.cssAsObject("borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"),[r,l]=t.split(" "),[o,c]=s.split(" "),[h,d]=n.split(" "),[u,f]=a.split(" "),g=!(l||c||d||f)?[r,o,h,u]:[r,l||r,o,c||o,h,d||h,u,f||u],p=e.actualWidth>=e.actualHeight,m=g[0];if(g.every(e=>e===m))g.length="0px"===m||""===m?0:1;const b=g.length;if(b){const t=p?"width":"height";let s=0;while(s<b)g[s]=Es(e.parseUnit(g[s++],t,false));i.borderRadius=g}}if(e.visibleStyle.borderWidth){if(e.borderTopWidth>0)dn(e,i,"borderTop",xs[0]);if(e.borderRightWidth>0)dn(e,i,"borderRight",xs[1]);if(e.borderBottomWidth>0)dn(e,i,"borderBottom",xs[2]);if(e.borderLeftWidth>0)dn(e,i,"borderLeft",xs[3])}if(dn(e,i,"outline",xs[4]),e.hasResource(Et.IMAGE_SOURCE))i.backgroundImage=pn.parseBackgroundImage(e,e.backgroundImage,e.localSettings.screenDimension);let s=e.backgroundColor;if(""===s&&e.has("backgroundColor")&&!e.documentParent.visible)s=e.css("backgroundColor");if(""!==s)i.backgroundColor=(null===(t=bs(s))||void 0===t?void 0:t.valueAsRGBA)||"";e.data(pn.KEY_NAME,"boxStyle",i)}}setFontStyle(e){if((e.textElement||e.inlineText)&&(!e.textEmpty||e.visibleStyle.background||e.pseudoElement)||e.inputElement){const t=bs(e.css("color"));let i=e.css("fontWeight");if(!qs(i))switch(i){case"lighter":i="200";break;case"bold":i="700";break;case"bolder":i="900";break;default:i="400";break}e.data(pn.KEY_NAME,"fontStyle",{fontFamily:e.css("fontFamily").trim(),fontStyle:e.css("fontStyle"),fontSize:e.fontSize,fontWeight:i,color:(null==t?void 0:t.valueAsRGBA)||""})}}setValueString(e){const t=e.element;if(t){let i="",s="",n="",a=true,r=false;switch(t.tagName){case"INPUT":switch(s=t.value,t.type){case"radio":case"checkbox":{const t=e.companion;if(false===(null==t?void 0:t.visible))s=t.textContent.trim();break}case"submit":if(""===s&&!e.visibleStyle.backgroundImage)s="Submit";break;case"reset":if(""===s&&!e.visibleStyle.backgroundImage)s="Reset";break;case"time":if(""===s)n="--:-- --";break;case"date":case"datetime-local":if(""===s){switch((new Intl.DateTimeFormat).resolvedOptions().locale){case"en-US":n="mm/dd/yyyy";break;default:n="dd/mm/yyyy";break}if("datetime-local"===t.type)n+=" --:-- --"}break;case"week":if(""===s)n="Week: --, ----";break;case"month":if(""===s)n="--------- ----";break;case"text":case"password":case"url":case"email":case"search":case"number":case"tel":if(""===s)n=t.placeholder;break;case"file":s=ms(8)?"Browse...":"Choose File";break;case"color":{const t=this.controllerSettings.style.inputColorBorderColor,i=(bs(s)||bs("rgb(0, 0, 0)")).valueAsRGBA,{width:n,height:a}=e.actualDimension,r=`${n-10}px ${a-10}px, ${n-8}px ${a-8}px`,l="no-repeat, no-repeat",o="center, center",c="center, center",h=pn.parseBackgroundImage(e,`linear-gradient(${i}, ${i}), linear-gradient(${t}, ${t})`);s="";let d=e.data(pn.KEY_NAME,"boxStyle");if(d){const e=d.backgroundImage;if(e){d.backgroundSize=r+", "+d.backgroundSize,d.backgroundRepeat=l+", "+d.backgroundRepeat,d.backgroundPositionX=o+", "+d.backgroundPositionX,d.backgroundPositionY=c+", "+d.backgroundPositionY,e.unshift(...h);break}}else d={};e.data(pn.KEY_NAME,"boxStyle",Object.assign(d,{backgroundSize:r,backgroundRepeat:l,backgroundPositionX:o,backgroundPositionY:c,backgroundImage:h}));break}case"range":n=s,s="";break}break;case"TEXTAREA":s=t.value;break;case"IFRAME":s=t.src;break;default:{const n=e.textContent;if(e.plainText||e.pseudoElement)i=n.trim(),[s,r,a]=cn(e,fn(n)),r=true;else if(e.inlineText)i=n.trim(),[s,r,a]=cn(e,e.hasAlign(1024)?fn(n):this.removeExcludedFromText(e,t));else if(0===e.naturalChildren.length&&""===(null==n?void 0:n.trim())&&!e.hasPX("height")&&pn.isBackgroundVisible(e.data(pn.KEY_NAME,"boxStyle")))s=n;break}}if(""!==s){if(a&&e.pageFlow){const t=e.siblingsLeading[0];let i=false;if(s.length>1)if(!t||t.multiline||t.lineBreak||t.plainText&&Os.TRAILINGSPACE.test(t.textContent))s=s.replace(Os.LEADINGSPACE,"");else if(t.naturalElement){const e=t.textContent,s=e.length;if(s)i=32===e.charCodeAt(s-1)}if(r){const n=!e.lineBreakTrailing&&Os.TRAILINGSPACE.test(s);if(Os.LEADINGSPACE.test(s)&&false===(null==t?void 0:t.block)&&!t.lineBreak&&!i)s=Zs+s.trim();else s=s.trim();if(n){const t=e.siblingsTrailing.find(e=>!e.excluded||e.lineBreak);if(false===(null==t?void 0:t.blockStatic))s+=Zs}}else if(""!==s.trim())s=s.replace(Os.LEADINGSPACE,t&&(t.block||t.lineBreak||i&&t.htmlElement&&t.textContent.length>1||e.multiline&&pn.hasLineBreak(e))?"":Zs),s=s.replace(Os.TRAILINGSPACE,"table-cell"===e.display||e.lineBreakTrailing||e.blockStatic?"":Zs);else if(!e.inlineText)return}if(""!==s)e.data(pn.KEY_NAME,"valueString",{key:i,value:s})}if(""!==n)e.data(pn.KEY_NAME,"hintString",n)}else if(e.inlineText){const t=e.textContent;if(t)e.data(pn.KEY_NAME,"valueString",{key:t,value:t})}}removeExcludedFromText(e,t){const i=t.children.length>0||"CODE"===t.tagName,s=e.preserveWhiteSpace,n=i?"innerHTML":"textContent";let a=t[n]||"";if(""===a.trim())return s?a:Zs;const r=e.sessionId;if(t.childNodes.forEach((e,t)=>{const l=Xs(e,r);if(null===l||!l.textElement||!l.pageFlow||l.positioned||l.pseudoElement||l.excluded||l.dataset.target){if(l)if(i&&l.htmlElement){const e=l.toElementString("outerHTML");if(l.lineBreak)a=a.replace(!s?new RegExp(`\\s*${e}\\s*`):e,"\\n");else if(l.positioned)a=a.replace(e,"");else if(!s)a=a.replace(e,l.pageFlow&&""!==l.textContent.trim()?Zs:"");return}else{const e=l.plainText?l.textContent:l[n];if($s(e)){if(!s)a=a.replace(e,"");return}}else if(e instanceof HTMLElement){const t=getComputedStyle(e).getPropertyValue("position");a=a.replace(e.outerHTML,"absolute"!==t&&"fixed"!==t&&""!==e.textContent.trim()?Zs:"")}if(0===t)a=Js(a," ");else if(t===length-1)a=Qs(a," ")}}),i)a=a.replace(/^\\n\\n/,"\\n").replace(/\\n\\n$/,"\\n").replace(Vs.ENTITY,(e,t)=>String.fromCharCode(parseInt(t)));return a}}pn.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,images:new Map};const mn=squared.lib,{formatPercent:bn,formatPX:xn,isLength:yn,isPercent:vn}=mn.css,{CHAR:En,CSS:Sn}=mn.regex,{isNumber:In,safeNestedArray:wn,trimString:_n,withinRange:Tn}=mn.util,kn=yt.CSS_GRID,An="[\\d.]+[a-z%]+|auto|max-content|min-content",Nn="minmax\\(\\s*([^,]+),\\s+([^)]+)\\s*\\)",Cn="fit-content\\(\\s*([\\d.]+[a-z%]+)\\s*\\)",Rn=new RegExp(`^${An}$`),Pn=new RegExp(`\\s*(repeat\\(\\s*(auto-fit|auto-fill|\\d+),\\s+(.+)\\)|\\[([\\w\\s\\-]+)\\]|${Nn}|${Cn}|${An}\\s*)\\s*`,"g"),Mn=new RegExp(`\\s*(\\[([\\w\\s\\-]+)\\]|${Nn}|${Cn}|${An})\\s*`,"g"),Bn=new RegExp(An),Ln=new RegExp(Nn),Fn=new RegExp(Cn),Wn=new RegExp("\\[([\\w\\s\\-]+)\\]"),On=/^([\w-]+)-(start|end)$/;function Vn(e,t){const i=e.repeat,s=[],n=[],a=t.length;for(let e=0;e<a;++e)if(i[e])n.push(t[e]);else s.push(t[e]);const r=e.length,l=r-s.length,o=n.length,c=new Array(r);for(let e=0;e<r;++e)if(i[e]){for(let t=0,i=0;t<l;++e,++t,++i){if(i===o)i=0;c[e]=n[i]}--e}else c[e]=s.shift();return c}function Dn(e,t){const i=e.unit;if(1===i.length&&(e.autoFill||e.autoFit)){const s=e.unitMin;let n=0;if([i[0],s[0]].forEach(e=>{if(vn(e))n=Math.max(parseFloat(e)/100*t,n);else if(yn(e))n=Math.max(parseFloat(e),n)}),n>0)return e.length=Math.floor(t/(n+e.gap)),e.unit=Vn(e,i),e.unitMin=Vn(e,s),true}return false}function Hn(e,t,i,s,n){let a=0,r=0,l=1;const o=s.length;let c=0;while(c<o){const e=s[c++];if(Sn.PX.test(e))a+=parseFloat(e);else if(Gn.isFr(e))r+=parseFloat(e);else if(vn(e))l-=parseFloat(e)/100}if(l<1&&r>0){const h=(e*l-(i-1)*t-n.reduce((e,t)=>e+Math.max(0,t),0)-a)/r;if(h>0)for(c=0;c<o;++c){const e=s[c];if(Gn.isFr(e))s[c]=xn(parseFloat(e)*h)}}}function Xn(e,t){if(0===e.length){let i=0;while(i<t)e[i++]="1fr"}}function Yn(e,t,i){if(i){for(let s=0,n=-1,a=0;s<e;++s)if(0===i[s]){if(-1===n)n=s;if(++a===t)return n}else n=-1;return-1}return 0}function Un(e){const t=e.length;for(let i=0;i<t;++i){const t=e[i];for(const e of t)if(0===e)return i}return Math.max(0,t-1)}const zn=(e,t,i)=>yn(t)?xn(e.parseUnit(t,0!==i?"width":"height")):t;class Gn extends us{static createDataAttribute(e){const t=e.gridAutoFlow;return Object.assign(e,{children:[],rowData:[],rowSpanMultiple:[],rowDirection:!t.includes("column"),dense:t.includes("dense"),templateAreas:{},row:Gn.createDataRowAttribute(),column:Gn.createDataRowAttribute(),emptyRows:[],minCellHeight:0})}static createDataRowAttribute(){return{length:0,gap:0,unit:[],unitMin:[],unitTotal:[],repeat:[],auto:[],autoFill:false,autoFit:false,name:{},fixedWidth:false,flexible:false,frTotal:0}}is(e){return e.gridElement}condition(e){return e.length>0}processNode(e){const t=Gn.createDataAttribute(e.cssAsObject("alignItems","alignContent","justifyItems","justifyContent","gridAutoFlow")),{column:i,dense:s,row:n,rowDirection:a}=t,[r,l,o,c]=a?[0,1,2,3]:[1,0,3,2],h=[],d=[],u=[];if(i.gap=e.parseWidth(e.css("columnGap"),false),n.gap=e.parseHeight(e.css("rowGap"),false),[e.cssInitial("gridTemplateRows",true),e.cssInitial("gridTemplateColumns",true),e.css("gridAutoRows"),e.css("gridAutoColumns")].forEach((t,s)=>{if(""!==t&&"none"!==t&&"auto"!==t){const a=0===s?n:i,{name:r,repeat:l,unit:o,unitMin:c}=a;let h,d=1;Pn.lastIndex=0;while(null!==(h=Pn.exec(t))){const t=h[1].trim();switch(s){case 0:case 1:if(t.startsWith("["))h[4].split(En.SPACE).forEach(e=>wn(r,e).push(d));else if(t.startsWith("repeat")){let t=1;switch(h[2]){case"auto-fit":a.autoFit=true;break;case"auto-fill":a.autoFill=true;break;default:t=parseInt(h[2])||1;break}if(t>0){const i=[];let n;Mn.lastIndex=0;while(null!==(n=Mn.exec(h[3]))){const t=n[1];let a;if(null!==(a=Wn.exec(t))){const e=a[1];if(!r[e])r[e]=[];i.push({name:e})}else if(null!==(a=Ln.exec(t)))i.push({unit:zn(e,a[2],s),unitMin:zn(e,a[1],s)});else if(null!==(a=Fn.exec(t)))i.push({unit:zn(e,a[1],s),unitMin:"0px"});else if(null!==(a=Bn.exec(t)))i.push({unit:zn(e,a[0],s)})}if(i.length)for(let e=0;e<t;++e)i.forEach(e=>{const{name:t,unit:i}=e;if(t)r[t].push(d);else if(i)o.push(i),c.push(e.unitMin||""),l.push(true),++d})}}else if(t.startsWith("minmax"))o.push(zn(e,h[6],s)),c.push(zn(e,h[5],s)),l.push(false),++d;else if(t.startsWith("fit-content"))o.push(zn(e,h[7],s)),c.push("0px"),l.push(false),++d;else if(Rn.test(t))o.push(zn(e,t,s)),c.push(""),l.push(false),++d;break;case 2:case 3:(2===s?n:i).auto.push(yn(t)?xn(e.parseUnit(t,2!==s?"width":"height")):t);break}}}}),a)e.sort((e,t)=>{const{left:i,top:s}=e.linear,{left:n,top:a}=t.linear;if(!Tn(s,a))return s<a?-1:1;else if(!Tn(i,n))return i<n?-1:1;return 0});else e.sort((e,t)=>{const{left:i,top:s}=e.linear,{left:n,top:a}=t.linear;if(!Tn(i,n))return i<n?-1:1;else if(!Tn(s,a))return s<a?-1:1;return 0});let f,g=false,p=false;if(!e.has("gridTemplateAreas")&&e.every(e=>"auto"===e.css("gridRowStart")&&"auto"===e.css("gridColumnStart"))){const[s,r,l,o,c]=a?["top","bottom",2,1,3]:["left","right",3,0,2];let h,d=0,f=0,m=0;if(a){if(i.autoFill)g=Dn(i,e.actualWidth)}else if(n.autoFill)p=Dn(n,e.actualHeight);e.each((e,i)=>{if(!h||e.linear[s]>=h.linear[r]||f>0&&f===m)m=Math.max(f,m),d++,f=1;const{gridRowEnd:n,gridColumnEnd:g}=e.cssAsObject("gridRowEnd","gridColumnEnd");let p=1,b=1;if(n.startsWith("span"))p=parseInt(n.split(" ")[1]);else if(In(n))p=parseInt(n)-d;if(g.startsWith("span"))b=parseInt(g.split(" ")[1]);else if(In(g))b=parseInt(g)-f;if(1===f&&m>0){let e=false;do{const i=new Array(m-1).fill(1);u.forEach(e=>{const t=e.placement;if(t[l]>d)for(let e=t[o];e<t[c];++e)i[e-1]=0});const s=i.length;for(let t=0,n=0,a=0;t<s;++t)if(i[t]){if(0===n)a=t;if(++n===b){f=a+1,e=true;break}}else n=0;if(!e)t.emptyRows[d-1]=i,d++}while(!e)}if(a)u[i]={outerCoord:e.linear.top,placement:[d,f,d+p,f+b],rowSpan:p,columnSpan:b};else u[i]={outerCoord:e.linear.left,placement:[f,d,f+b,d+p],rowSpan:p,columnSpan:b};f+=b,h=e})}else{const s=t.templateAreas;let r;g=Dn(i,e.actualWidth),p=Dn(n,e.actualHeight),e.css("gridTemplateAreas").split(/"[\s\n]+"/).forEach((e,t)=>{if("none"!==e)_n(e.trim(),'"').split(En.SPACE).forEach((e,i)=>{if("."!==e.charAt(0)){const n=s[e];if(n)n.rowSpan=t-n.rowStart+1,n.columnSpan=i-n.columnStart+1;else s[e]={rowStart:t,rowSpan:1,columnStart:i,columnSpan:1}}})}),e.each((e,t)=>{const l=e.cssAsTuple("gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd"),o=[0,0,0,0];let c=-1,h=-1;if(Object.keys(s).length)for(let e=0;e<4;++e){const t=l[e];let i=s[t];if(i)switch(e){case 0:o[0]=i.rowStart+1;break;case 1:o[1]=i.columnStart+1;break;case 2:o[2]=i.rowStart+i.rowSpan+1;break;case 3:o[3]=i.columnStart+i.columnSpan+1;break}else{const n=On.exec(t);if(n)if(i=s[n[1]],i)if("start"===n[2])switch(e){case 0:case 2:o[e]=i.rowStart+1;break;case 1:case 3:o[e]=i.columnStart+1;break}else switch(e){case 0:case 2:o[e]=i.rowStart+i.rowSpan+1;break;case 1:case 3:o[e]=i.columnStart+i.columnSpan+1;break}}}if(0===o[0]||0===o[1]||0===o[2]||0===o[3]){const e=(e,t,i,s)=>{if(In(e)){const i=parseInt(e);if(i>0)return o[t]=i,true;else if(i<0&&t>=2){const e=t-2;return o[o[e]>0?t:e]=i+s+2,true}}else if(e.startsWith("span")){const n=parseInt(e.split(" ")[1]);if(n===s&&r)if(a){if(!i){const e=r[2];if(e>0&&0===o[0])o[0]=e}}else if(i){const e=r[3];if(e>0&&0===o[1])o[1]=e}const d=o[t-2];switch(t){case 0:{const e=l[2];if(In(e)){const t=parseInt(e);o[0]=t-n,o[2]=t}break}case 1:{const e=l[3];if(In(e)){const t=parseInt(e);o[1]=t-n,o[3]=t}break}case 2:case 3:if(d>0)o[t]=d+n;break}if(i){if(-1===c)c=n}else if(-1===h)h=n;return true}return false};let t,s;for(let a=0;a<4;++a){const r=l[a];if("auto"!==r&&0===o[a]){const d=a%2==0,u=d?n:i;if(!e(r,a,d,Math.max(1,u.unit.length))){const e=r.split(" ");if(1===e.length)e[1]=e[0],e[0]="1";else if(In(e[0]))if(d)if(t)c=parseInt(e[0])-parseInt(t[0]);else t=e;else if(s)h=parseInt(e[0])-parseInt(s[0]);else s=e;const i=u.name[e[1]];if(i){const t=parseInt(e[0]);if(t<=i.length)o[a]=i[t-1]+(e[1]===l[a-2]?1:0)}}}}}if(!r){if(0===o[0])o[0]=1;if(0===o[1])o[1]=1}const[d,f,g,p]=o;if(-1===c)c=d>0&&g>0?g-d:1;else if(d>0&&0===g)o[2]=d+c;if(-1===h)h=f>0&&p>0?p-f:1;else if(f>0&&0===p)o[3]=d+h;if(0===o[2]&&o[0]>0)o[2]=o[0]+c;if(0===o[3]&&o[1]>0)o[3]=o[1]+h;u[t]={outerCoord:a?e.bounds.top:e.bounds.left,placement:o,rowSpan:c,columnSpan:h},r=o})}{const[t,s]=a?[i,e.box.top]:[n,e.box.left];let r=t.unit,l=1,o=0;u.forEach(e=>{if(e){const[t,i,n]=a?[e.columnSpan,1,3]:[e.rowSpan,0,2],r=e.placement;if(r.some(e=>e>0))l=Math.max(l,t,r[i],r[n]-1);if(Tn(e.outerCoord,s))o+=t}});let c=r.length;if(f=Math.max(l,o,a&&!g||!a&&!p?c:0),t.length=f,c<f)if(t.autoFill||t.autoFit){if(0===c)r.push("auto"),t.unitMin.push(""),t.repeat.push(true);r=Vn(t,r),t.unit=r,t.unitMin=Vn(t,t.unitMin)}else{const e=t.auto,i=e.length;if(i){let t=0;while(r.length<f){if(t===i)t=0;r.push(e[t++])}}}else if(t.autoFit||t.autoFill&&e.blockStatic&&(a&&!e.hasWidth&&!e.hasPX("maxWidth",false)||!a&&!e.hasHeight))r.length=f;let h=1,d=0,m=0;if(r.forEach(e=>{if(vn(e))h-=parseFloat(e)/100;else if(Gn.isFr(e))d+=parseFloat(e);else if("auto"===e)m++}),t.flexible=h<1||d>0,h<1)if(d>0){c=r.length;for(let e=0;e<c;++e){const t=r[e];if(Gn.isFr(t))r[e]=h*(parseFloat(t)/d)+"fr"}}else if(1===m){const e=r.findIndex(e=>"auto"===e);if(-1!==e)r[e]=bn(h)}}if(e.each((e,i)=>{const{placement:n,rowSpan:g,columnSpan:p}=u[i],[m,b]=a?[g,p]:[p,g];while(0===n[0]||0===n[1]){const e=n.slice(0);if(0===e[r]){let t=h.length;for(let i=s?0:Un(d),n=0,a=-1;i<t;++i){if(-1!==Yn(f,b,d[i])){if(0===n)a=i,t=Math.max(t,i+m);if(++n===m){e[r]=a+1;break}}else n=0,a=-1,t=h.length}}if(0===e[r]){if(n[r]=h.length+1,0===n[l])n[l]=1}else if(0===e[l]){if(0===e[o])e[o]=e[r]+m;const t=[],i=e[r]-1,s=e[o]-1;let n=i;while(n<s){const e=h[n++];if(!e)t.push([[0,-1]]);else if(e.reduce((e,t)=>e+(t?1:0),0)+b<=f){const i=[];let s=0;for(let t=0,n=-1;t<f;++t){const a=e[t];if(!a){if(-1===n)n=t;s++}if(a||t===f-1){if(s>=b)i.push([n,n+s]);n=-1,s=0}}if(i.length)t.push(i);else break}else break}const a=t.length;if(a){const r=t[0];if(-1===r[0][1])e[l]=1;else if(a===s-i)if(a>1)e:for(const i of r)for(n=i[0];n<i[1];++n){let i=1;while(i<a){const s=t[i++],a=s.length;let r=0;while(r<a){const t=s[r++];if(n>=t[0]&&(-1===t[1]||n+b<=t[1])){e[l]=n+1;break e}}}}else e[l]=r[0][0]+1}}const t=e[r];if(t>0){const i=e[l];if(i>0)n[r]=t,n[l]=i}}if(0===n[o])n[o]=n[r]+m;if(0===n[c])n[c]=n[l]+b;if(((e,t,i)=>{if(t.every(e=>e>0)){for(let n=t[r]-1;n<t[o]-1;++n){const a=wn(h,n);let r=d[n],o=t[l]-1;if(!r){if(r=new Array(i).fill(0),!s){let e=0;while(e<o)r[e++]=1}d[n]=r}while(o<t[c]-1)wn(a,o).push(e),r[o++]=1}return true}return false})(e,n,f)){const[i,r,l,o]=n,c=i-1,h=l-i,u=r-1;if(!s){const e=a?c:u;if(e>0){const t=d[e-1];let i=0;while(i<f)t[i++]=1}}if(h>1){const e=t.rowSpanMultiple,i=c+h;let s=c;while(s<i)e[s++]=true}e.data(kn,"cellData",{rowStart:c,rowSpan:h,columnStart:u,columnSpan:o-r})}}),h.length){let s;if(a)s=h,t.rowData=h;else{s=t.rowData;const e=h.length;for(let t=0;t<e;++t){const e=h[t],i=e.length;let n=0;while(n<i)wn(s,n)[t]=e[n++]}}const r=a?n.unitTotal:i.unitTotal,l=t.children,o=i.unit.length;if(s.forEach(e=>{const t=e.length;let i=0;while(i<t){const t=e[i];let s=r[i]||0;if(t){let e=0;t.forEach(t=>{if(!l.includes(t))e=Math.max(e,a?t.bounds.height:t.bounds.width),l.push(t)}),s+=e}r[i++]=s}}),l.length===e.length){const{gap:r,unit:c}=n,{gap:h,unit:d}=i,u=Math.max(c.length,s.length),f=new Array(u).fill(0),g=new Array(o).fill(0),p=new Set;n.length=u,i.length=o;let m=0;for(let e=0;e<u;++e){const i=s[e],n=c[e];if(i)for(let s=0;s<o;++s){const n=i[s];if(n)n.forEach(t=>{if(!p.has(t)){const{columnSpan:i,rowSpan:n}=t.data(kn,"cellData"),a=s+i-1,l=e+n-1;if(h>0&&a<o-1)t.modifyBox(4,h);if(r>0&&l<u-1)t.modifyBox(8,r);if(1===n){const i=t.bounds.height,s=f[e];if(t.hasHeight)if(s<0){if(i>Math.abs(s))f[e]=i}else f[e]=Math.max(i,s);else if(i>Math.abs(s))f[e]=-i;m=Math.max(i,m)}if(1===i){const e=t.bounds.width,i=g[s];if(t.hasWidth)if(i<0){if(e>Math.abs(i))g[s]=e}else g[s]=Math.max(e,i);else if(e>Math.abs(i))g[s]=-e}p.add(t)}});else if(!a)t.emptyRows[s]=[Number.POSITIVE_INFINITY]}else if(f[e]=parseFloat(n)||0,a)t.emptyRows[e]=[Number.POSITIVE_INFINITY]}if(t.minCellHeight=m,a){if(e.hasPX("width",false))i.fixedWidth=true,i.flexible=false,Hn(e.actualWidth,h,o,d,g);if(e.hasHeight&&!Gn.isAligned(e))Xn(n.unit,u)}else{if(e.hasPX("height",false))n.fixedWidth=true,n.flexible=false,Hn(e.actualHeight,r,u,c,f);if(e.hasWidth&&!Gn.isJustified(e))Xn(i.unit,o)}if(e.retain(l),e.cssSort("zIndex"),e.cssTry("display","block"))e.each(e=>{const{width:t,height:i}=e.boundingClientRect;e.data(kn,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i}))}),e.cssFinally("display");e.data(kn,"mainData",t)}}}}Gn.isFr=e=>/\dfr$/.test(e),Gn.isPx=e=>Sn.PX.test(e),Gn.isAligned=e=>e.hasHeight&&/^space-|center|flex-end|end/.test(e.css("alignContent")),Gn.isJustified=e=>(e.blockStatic||e.hasWidth)&&/^space-|center|flex-end|end|right/.test(e.css("justifyContent"));const{withinRange:jn}=squared.lib.util,qn=yt.FLEXBOX;class $n extends us{static createDataAttribute(e,t){return Object.assign(Object.assign({},e.flexdata),{rowCount:0,columnCount:0,children:t})}is(e){return e.flexElement}condition(e){return e.length>0}processNode(e){const t=this.controller,[i,s]=e.partition(e=>e.pageFlow),n=$n.createDataAttribute(e,i);if(e.cssTry("align-items","start")){if(e.cssTry("justify-items","start"))i.forEach(e=>{if(e.cssTry("align-self","start")){if(e.cssTry("justify-self","start")){const{width:t,height:i}=e.boundingClientRect;e.data(qn,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i})),e.cssFinally("justify-self")}e.cssFinally("align-self")}}),e.cssFinally("justify-items");e.cssFinally("align-items")}if(n.wrap){const[a,r,l,o]=n.row?["top","left","right","intersectY"]:["left","top","bottom","intersectX"];i.sort((e,t)=>{const i=e.linear,s=t.linear;if(!e[o](t.bounds,"bounds"))return i[a]<s[a]?-1:1;else{const e=i[r],t=s[r];if(!jn(e,t))return e<t?-1:1}return 0});let c=i[0],h=[c];const d=[h];let u=i.length,f=1;while(f<u){const e=i[f++];if(c[o](e.bounds,"bounds"))h.push(e);else c=e,h=[e],d.push(h)}e.clear();let g,p=0;if(u=d.length,f=0,u>1){const i=e.box[l];while(f<u){const s=d[f];p=Math.max(s.length,p);const n=t.createNodeGroup(s[0],s,{parent:e,delegate:true,cascade:true});n.addAlign(128),n.box[l]=i,n.containerIndex=f++}g=u}else{const t=d[0];e.retain(t),p=t.length;while(f<p)t[f].containerIndex=f++;g=p}const m=s.length;f=0;while(f<m)s[f].containerIndex=g+f++;if(e.concat(s),e.sort(),n.row)n.rowCount=u,n.columnCount=p;else n.rowCount=p,n.columnCount=u}else{if(i.some(e=>0!==e.flexbox.order)){const[e,t]=n.reverse?[-1,1]:[1,-1];i.sort((i,s)=>{const n=i.flexbox.order,a=s.flexbox.order;if(n===a)return 0;else return n>a?e:t})}if(n.row)n.rowCount=1,n.columnCount=e.length;else n.rowCount=e.length,n.columnCount=1}e.data(qn,"mainData",n)}}const Kn=squared.lib,{aboveRange:Qn,belowRange:Jn,objectMap:Zn,safeNestedArray:ea,withinRange:ta}=Kn.util,ia=yt.GRID;function sa(e,t){const i=t.bounds.top,s=e.length;let n=0;while(n<s){const t=e[n++].findIndex(e=>{const t=e.bounds.top;return ta(i,t)||Math.ceil(i)>=t&&i<Math.floor(e.bounds.bottom)});if(-1!==t)return t}return-1}class na extends us{static createDataCellAttribute(){return{rowSpan:0,columnSpan:0,index:-1,cellStart:false,cellEnd:false,rowEnd:false,rowStart:false}}condition(e){if(e.length>1&&!e.layoutElement&&"TABLE"!==e.tagName&&!e.has("listStyle"))if("table"===e.display)return e.every(e=>"table-row"===e.display&&e.every(e=>"table-cell"===e.display))||e.every(e=>"table-cell"===e.display);else if(0===e.percentWidth||!e.find(e=>e.percentWidth>0,{cascade:true})){let t=false,i=0;for(const s of e)if(s.pageFlow&&!s.visibleStyle.background&&s.blockStatic&&0===s.percentWidth&&!s.autoMargin.leftRight&&!s.autoMargin.left){if(s.length>1)t=true;if("list-item"===s.display&&!s.has("listStyleType"))i++}else return false;return i===e.length||t&&e.every(e=>e.length>0&&$t.linearData(e.children).linearX)}return false}processNode(e){var t;const i=[],s={};let n=[];e.each(e=>{e.each(e=>{if(e.visible)ea(s,Math.floor(e.linear.left)).push(e)})});const a=Object.keys(s),r=a.length;if(r){let l=-1;for(let e=0;e<r;++e){const t=s[a[e]];if(0===e)l=r;else if(l!==t.length){l=-1;break}}if(-1!==l)n=Zn(a,e=>s[e]);else{const l=[];for(let e=0;e<r;++e){const t=s[a[e]],i=t.length;if(0===e&&0===i)return;l[e]=0===e?0:l[e-1];for(let s=0;s<i;++s){const a=t[s],{left:r,right:o}=a.linear;if(0===e||Qn(r,l[e-1])){const t=ea(n,e);if(0===e||n[0].length===i)t[s]=a;else{const e=sa(n,a);if(-1!==e)t[e]=a;else return}}else{const e=n[n.length-1];if(e){let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(e.forEach(e=>{const s=e.linear;t=Math.min(s.left,t),i=Math.max(s.right,i)}),Math.floor(r)>Math.ceil(t)&&Math.floor(o)>Math.ceil(i)){const t=sa(n,a);if(-1!==t){let i=n.length-1;while(i>=0){const s=n[i--];if(s){if(!s[t])e.length=0;break}}}}}}l[e]=Math.max(o,l[e])}}const o=l.length;for(let e=0,t=-1;e<o;++e)if(!n[e]){if(-1===t)t=e-1;else if(e===o-1)l[t]=l[e]}else if(-1!==t)l[t]=l[e-1],t=-1;for(let e=0;e<n.length;++e)if(null===(t=n[e])||void 0===t?void 0:t.length)i.push(l[e]);else n.splice(e--,1);const c=n.reduce((e,t)=>Math.max(e,t.length),0);for(let e=0;e<c;++e){const t=n.length;let i=0;while(i<t){const t=n[i++];if(!t[e])t[e]={spacer:1}}}i.push(e.box.right)}}const l=n.length;if(l>1&&n[0].length===e.length){const t=[],s=new Set;for(let e=0,a=0;e<l;++e){const r=n[e],o=r.length;for(let c=0,h=0,d=0;c<o;++c){const u=r[c],f=ea(t,c);if(!u.spacer){const t=Object.assign(na.createDataCellAttribute(),u.data(ia,"cellData"));let g=1,p=1+d,m=e+1;while(m<l){const e=n[m++][c];if(1===e.spacer)p++,e.spacer=2;else break}if(1===p){m=c+1;while(m<o){const e=r[m++];if(1===e.spacer)g++,e.spacer=2;else break}}if(i.length){const n=Math.min(e+(p-1),i.length-1);u.actualParent.naturalChildren.forEach(e=>{if(!s.has(e)&&e.visible&&!e.rendered){const{left:s,right:a}=e.linear;if(Qn(s,u.linear.right)&&Jn(a,i[n]))ea(t,"siblings").push(e)}})}t.rowSpan=g,t.columnSpan=p,t.rowStart=0==h++,t.rowEnd=p+e===l,t.cellStart=0==a++,t.cellEnd=t.rowEnd&&c===o-1,t.index=e,d=0,u.data(ia,"cellData",t),f.push(u),s.add(u)}else if(1===u.spacer)d++}}if(e.each(e=>e.hide()),e.clear(),t.forEach(t=>t.forEach(t=>t.parent=e)),e.tableElement&&"collapse"===e.css("borderCollapse"))e.resetBox(480);e.data(ia,"columnCount",l)}}}const aa=squared.lib,{convertListStyle:ra}=aa.css,{isNumber:la}=aa.util,oa=e=>e.backgroundImage&&!e.backgroundRepeat;class ca extends us{condition(e){const t=e.length;if(t){const i=new Set;let s=true,n=true,a=true,r=true,l=false;const o=e.children;for(let e=0;e<t;++e){const c=o[e],h=c.css("listStyleType");if("list-item"===c.display&&("none"!==h||c.innerBefore)||c.marginLeft<0&&"none"===h&&oa(c.visibleStyle))l=true;if(a||r)if(c.floating)i.add(c.float),r=false;else if(0===e||e===t-1||c.blockStatic||o[e-1].blockStatic&&o[e+1].blockStatic)a=false;else a=false,r=false;if(!c.blockStatic)s=false;if(!c.inlineVertical)n=false;if(!(s||n||r||a))return false}return l&&(s||n||a&&1===i.size||r)}return false}processNode(e){const t="OL"===e.tagName;let i=t&&e.toElementInt("start")||1;e.each(e=>{const s=ca.createDataAttribute(),n=e.css("listStyleType"),a="list-item"===e.display;if(a||""!==n&&"none"!==n||oa(e.visibleStyle)){if(e.has("listStyleImage"))s.imageSrc=e.css("listStyleImage");else{if(t&&a&&"LI"===e.tagName){const t=e.attributes.value;if(la(t))i=Math.floor(parseFloat(t))}let r=ra(n,i);if(""===r)switch(n){case"disc":r="";break;case"square":r="";break;case"none":{let t="",i="";if(!e.visibleStyle.backgroundRepeat)t=e.backgroundImage,i=e.css("backgroundPosition");if(""!==t&&"none"!==t)s.imageSrc=t,s.imagePosition=i,e.exclude({resource:Et.IMAGE_SOURCE});break}default:r="";break}else r+=".";s.ordinal=r}if(a)++i}e.data(yt.LIST,"mainData",s)})}}ca.createDataAttribute=()=>({ordinal:"",imageSrc:"",imagePosition:""});const ha=squared.lib,{assignRect:da}=ha.dom,{convertFloat:ua,withinRange:fa}=ha.util,ga={relative:true};const{getBackgroundPosition:pa,resolveURL:ma}=squared.lib.css,ba=/^0[a-z%]+|left|start|top/;const xa=squared.lib,{formatPercent:ya,formatPX:va,getInheritedStyle:Ea,getStyle:Sa,isLength:Ia,isPercent:wa}=xa.css,{getNamedItem:_a}=xa.dom,{maxArray:Ta}=xa.math,{isNumber:ka,replaceMap:Aa,safeNestedArray:Na,withinRange:Ca}=xa.util,Ra=yt.TABLE,Pa=/rgba\(0, 0, 0, 0\)|transparent/;function Ma(e,t,i){i.percent=Math.round(t.bounds.width/e.box.width*100)+"%",i.expand=true}function Ba(e,t,i){const s=t+"Style";e.ascend({including:i}).some(i=>{if(i.has(s)){const n=t+"Color",a=t+"Width";return e.css("border","inherit"),e.cssApply(i.cssAsObject(s,n,a)),e.unsetCache(a),true}return false})}function La(e){e.exclude({resource:Et.ALL}),e.hide()}const Fa=e=>e.css("width",va(e.bounds.width),true);class Wa extends us{static createDataAttribute(e){return{layoutType:0,rowCount:0,columnCount:0,layoutFixed:"fixed"===e.css("tableLayout"),borderCollapse:"collapse"===e.css("borderCollapse"),expand:false}}processNode(e){const t=Wa.createDataAttribute(e),i=[];let s,n,a=[];const r=e=>{if(e)e.cascade(t=>{switch(t.tagName){case"TH":case"TD":t.inherit(e,"styleMap"),t.unsetCache("visibleStyle");break}return false}),a=a.concat(e.children),La(e)};e.each(e=>{switch(e.tagName){case"THEAD":if(!n)n=e;else La(e);break;case"TBODY":i.push(e);break;case"TFOOT":if(!s)s=e;else La(e);break}}),r(n),i.forEach(e=>{a=a.concat(e.children),La(e)}),r(s);const l=e.hasWidth,o=t.borderCollapse,[c,h]=o?[0,0]:Aa(e.css("borderSpacing").split(" "),(t,i)=>0===i?e.parseWidth(t):e.parseHeight(t)),d=c>1?Math.round(c/2):c,u=h>1?Math.round(h/2):h,f=e.element.querySelector("COLGROUP"),g=e.find(e=>"CAPTION"===e.tagName),p="bottom"===e.css("captionSide"),m=[],b=[],x=[],y=[],v=a.length;let E=0;for(let i=0;i<v;++i){const s=a[i];m[i]=c;const n=x[i]||[];x[i]=n,s.each((s,a)=>{const r=s.element,l=r.rowSpan;let o=r.colSpan,g=0;while(n[g])g++;const p=i+l;let E=i;while(E<p){const e=Na(x,E++),t=g+o;for(let i=g,n=0;i<t;++i)if(!e[i])e[i]=s,n++;else{o=n;break}}if(!s.hasPX("width")){const e=_a(r,"width");if(wa(e))s.css("width",e,true);else if(ka(e))s.css("width",va(parseFloat(e)),true)}if(!s.hasPX("height")){const e=_a(r,"height");if(wa(e))s.css("height",e);else if(ka(e))s.css("height",va(parseFloat(e)))}if(""===s.cssInitial("verticalAlign"))s.css("verticalAlign","middle",true);if(!s.visibleStyle.backgroundImage&&!s.visibleStyle.backgroundColor)if(f){const{backgroundImage:e,backgroundColor:t}=Sa(f.children[a+1]);if(e&&"none"!==e)s.css("backgroundImage",e,true);if(t&&!Pa.test(t))s.css("backgroundColor",t),s.setCacheValue("backgroundColor",t)}else{let e=Ea(r,"backgroundImage",/none/,"TABLE");if(""!==e)s.css("backgroundImage",e,true);if(e=Ea(r,"backgroundColor",Pa,"TABLE"),""!==e)s.css("backgroundColor",e),s.setCacheValue("backgroundColor",e)}switch(s.tagName){case"TD":{const e=s.parent;if(0===s.borderTopWidth)Ba(s,"borderTop",e);if(0===s.borderRightWidth)Ba(s,"borderRight",e);if(0===s.borderBottomWidth)Ba(s,"borderBottom",e);if(0===s.borderLeftWidth)Ba(s,"borderLeft",e);break}case"TH":if(""===s.cssInitial("textAlign"))s.css("textAlign","center");if(0===s.borderTopWidth)Ba(s,"borderTop",e);if(0===s.borderBottomWidth)Ba(s,"borderBottom",e);break}const S=s.cssInitial("width"),I=void 0===y[g]||"auto"===y[g],w=s.bounds.width;if(0===i||I||!t.layoutFixed)if(""===S||"auto"===S){if(void 0===y[g])y[g]=S||"0px",b[g]=0;else if(i===v-1&&I&&0===b[g])b[g]=w}else{const e=wa(S),t=Ia(y[g]);if(I||w<b[g]||w===b[g]&&(t&&e||e&&wa(y[g])&&s.parseWidth(S)>=s.parseWidth(y[g])||t&&Ia(S)&&s.parseWidth(S)>s.parseWidth(y[g])))y[g]=S;if(I||1===r.colSpan)b[g]=w}if(s.length||s.inlineText)m[i]+=w+c;if(d>0)s.modifyBox(16,0===g?c:d),s.modifyBox(4,0===a?d:c);if(u>0)s.modifyBox(2,0===i?h:u),s.modifyBox(8,i+l<v?u:h);s.data(Ra,"cellData",{colSpan:o,rowSpan:l})}),La(s),E=Math.max(E,n.length)}if(e.hasPX("width",false)&&y.some(e=>wa(e)))Aa(y,(e,t)=>{if("auto"===e){const e=b[t];if(e>0)return va(e)}return e});let S=false,I=0;if(y.every(e=>wa(e))){if(y.reduce((e,t)=>e+parseFloat(t),0)>1){let e=100;Aa(y,t=>{const i=parseFloat(t);if(e<=0)t="0px";else if(e-i<0)t=ya(e/100);return e-=i,t})}if(!e.hasWidth)t.expand=true;S=true}else if(y.every(e=>Ia(e))){const i=y.reduce((e,t)=>e+parseFloat(t),0);if(e.hasWidth)if(i<e.width)Aa(y,e=>"0px"!==e?parseFloat(e)/i*100+"%":e);else if(i>e.width)if(e.css("width","auto"),!t.layoutFixed)e.cascade(e=>(e.css("width","auto"),false));if(t.layoutFixed&&!e.hasPX("width"))e.css("width",va(e.bounds.width))}if(t.layoutType=(()=>{if(y.length>1){if(I=y.reduce((e,t)=>e+(wa(t)?parseFloat(t):0),0),t.layoutFixed&&y.reduce((e,t)=>e+(Ia(t)?parseFloat(t):0),0)>=e.actualWidth)return 4;else if(y.length>1&&y.some(e=>wa(e))||y.every(e=>Ia(e)&&"0px"!==e))return 3;else if(y.every(e=>e===y[0]))if(e.find(e=>e.hasHeight,{cascade:true}))return t.expand=true,3;else if("auto"===y[0])if(e.hasWidth)return 3;else{const t=e.cascade(e=>"TD"===e.tagName);return t.length&&t.every(e=>Ca(e.bounds.width,t[0].bounds.width))?0:3}else if(e.hasWidth)return 2;if(y.every(e=>"auto"===e||Ia(e)&&"0px"!==e)){if(!e.hasWidth)t.expand=true;return 1}}return 0})(),e.clear(),g){if(!g.hasWidth)if(g.textElement){if(!g.hasPX("maxWidth"))g.css("maxWidth",va(g.bounds.width))}else if(g.bounds.width>Ta(m))Fa(g);if(!g.cssInitial("textAlign"))g.css("textAlign","center");if(g.data(Ra,"cellData",{colSpan:E}),!p)g.parent=e}let w=0;while(w<v){const i=x[w++],s=i.length;let n=0;while(n<s){const s=i[n],a=s.data(Ra,"cellData"),r=y[n];if(n+=a.colSpan,!a.placed){if(r)switch(t.layoutType){case 0:break;case 3:if("auto"===r)if(I>=1)Fa(s),a.exceed=!l,a.downsized=true;else Ma(e,s,a);else if(wa(r))if(S)a.percent=r,a.expand=true;else Fa(s);else if(Ia(r)&&parseInt(r)>0)if(s.bounds.width>=parseInt(r))Fa(s),a.expand=false,a.downsized=false;else if(t.layoutFixed)Ma(e,s,a),a.downsized=true;else Fa(s),a.expand=false;else{if(!s.hasPX("width",false)||s.percentWidth)Fa(s);a.expand=false}break;case 2:Ma(e,s,a);break;case 1:if("auto"===r)a.flexible=true;else{if(t.layoutFixed)a.downsized=true;else Fa(s);a.expand=false}break;case 4:if(!Ia(r))s.hide();break}a.placed=true,s.parent=e}}if(s<E){const e=i[s-1].data(Ra,"cellData");if(e)e.spaceSpan=E-s}}if(g&&p)g.parent=e;if(t.borderCollapse){const t=e.cssAsObject("borderTopColor","borderTopStyle","borderTopWidth"),i=e.cssAsObject("borderRightColor","borderRightStyle","borderRightWidth"),s=e.cssAsObject("borderBottomColor","borderBottomStyle","borderBottomWidth"),n=e.cssAsObject("borderLeftColor","borderLeftStyle","borderLeftWidth"),a=parseInt(t.borderTopWidth),r=parseInt(i.borderRightWidth),l=parseInt(s.borderBottomWidth),o=parseInt(n.borderLeftWidth);let c=false,h=false,d=false,u=false;for(w=0;w<v;++w){const e=x[w];for(let f=0;f<E;++f){const g=e[f];if("visible"===(null==g?void 0:g.css("visibility"))){if(0===w)if(g.borderTopWidth<a)g.cssApply(t),g.unsetCache("borderTopWidth");else c=true;if(w>=0&&w<v-1){const e=x[w+1][f];if("visible"===(null==e?void 0:e.css("visibility"))&&e!==g)if(g.borderBottomWidth>e.borderTopWidth)e.css("borderTopWidth","0px",true);else g.css("borderBottomWidth","0px",true)}if(w===v-1)if(g.borderBottomWidth<l)g.cssApply(s),g.unsetCache("borderBottomWidth");else d=true;if(0===f)if(g.borderLeftWidth<o)g.cssApply(n),g.unsetCache("borderLeftWidth");else u=true;if(f>=0&&f<E-1){const t=e[f+1];if("visible"===(null==t?void 0:t.css("visibility"))&&t!==g)if(g.borderRightWidth>=t.borderLeftWidth)t.css("borderLeftWidth","0px",true);else g.css("borderRightWidth","0px",true)}if(f===E-1)if(g.borderRightWidth<r)g.cssApply(i),g.unsetCache("borderRightWidth");else h=true}}}if(c||h||d||u)e.cssApply({borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"},true)}t.rowCount=v+(g?1:0),t.columnCount=E,e.data(Ra,"mainData",t)}}const Oa=squared.lib,{isLength:Va}=Oa.css,{convertFloat:Da}=Oa.util;var Ha;const Xa=squared.lib,{formatPX:Ya}=Xa.css,{maxArray:Ua}=Xa.math,{getElementCache:za}=Xa.session,{iterateReverseArray:Ga}=Xa.util,ja="html"===(null===(Ha=document.doctype)||void 0===Ha?void 0:Ha.name),qa=["marginTop","borderTopWidth","paddingTop",2],$a=["marginBottom","borderBottomWidth","paddingBottom",8];function Ka(e,t,i,s=0){let n;switch(t){case 2:n=e.actualRect("top")-i;break;case 16:n=e.actualRect("left")-i;break;case 8:n=i-e.actualRect("bottom");break;default:n=0;break}if(n-=s,n>0)(e.renderAs||e).modifyBox(t,n)}function Qa(e,t,i){if(!i||Ja(t,true)){const[s,n,a,r]=i?qa:$a;if(0===e[n])if(0===e[a]){let l=t;while(ja&&0===l[s]&&0===l[n]&&0===l[a]&&nr(l))if(i){const e=l.firstStaticChild;if(Ja(e,i))l=e;else break}else{const e=er(l);if(e)l=e;else break}const o=e[s],c=l[s],h=(e,t)=>{if(1===e.getBox(r)[0]){const i=e.registerBox(r);if(i){const[e,s]=i.getBox(r);if(t=Math.max(s,t),1===e)i.setBox(r,{adjustment:t});else i.setCacheValue("marginTop",t);return}}e.setBox(r,{reset:1,adjustment:t})};if(o>=0&&c>=0){const n=l.bounds.height;let a=false;if(!ja&&0===o&&c>0&&""===l.cssInitial(s))a=true;else{const s=o>=c;if(0===n&&s&&l.textEmpty&&0===l.extensions.length)l.hide({collapse:true});else{const n=l.registerBox(r);if(n){const t=n.getBox(r)[1];if(t>0){if(t>o)h(e,t);n.setBox(r,{reset:1,adjustment:0})}}else if(0===l.getBox(r)[0])if(s)a=c>0;else if(e.documentBody){if(ir(e,r),i){if(e.bounds.top>0)e.bounds.top=0,e.unset("box"),e.unset("linear");if(e.layoutVertical){const i=e.renderChildren[0];if((l.positionStatic||l.top>=0&&!l.hasPX("bottom"))&&i!==t.outerMostWrapper)h(i,c),h(l,0),a=true}}}else h(e,c),a=true}}if(a){if(ir(l,r),!i&&l.floating){const e=l.bounds;l.actualParent.naturalChildren.forEach(t=>{if(t.floating&&t!==l&&t.intersectY(e,"bounds"))ir(t,r)})}if(0===n&&!l.every(e=>e.floating||!e.pageFlow))ir(l,i?8:2)}}else if(o<0&&c<0)if(!i){if(c<o)h(e,c);ir(l,r)}}else if(0===t[s]&&0===t[n]&&nr(t)){let r=true;do{const l=i?t.firstStaticChild:t.lastStaticChild;if(l&&0===l[s]&&0===l[n]&&!l.visibleStyle.background&&nr(l)){const s=l[a];if(s>0){if(s>=e[a])e.setBox(i?32:128,{reset:1});else if(r)e.modifyBox(i?32:128,-s,false);break}else{if(!Ja(l,i))r=false;t=l}}else break}while(true)}}}function Ja(e,t){if(null===e||!e.styleElement||e.lineBreak)return false;else if(e.blockStatic)return true;else if(!e.floating){switch(e.display){case"table":case"list-item":return true}if(void 0!==t)if(t){const t=e.firstStaticChild;return Ja(t)&&ar(t,false)}else{const t=e.lastStaticChild;return Ja(t)&&rr(t,false)}}return false}function Za(e,t,i,s){let n=Number.POSITIVE_INFINITY;if(e.nodeGroup&&e.some(e=>e.floating))e.renderChildren.forEach(t=>{if(!t.floating){const i=t.linear.top;if(i<n)n=i,e=t}});if(n===Number.POSITIVE_INFINITY)n=e.linear.top;if(s){const a=Math.max(s.linear.top,t.linear.bottom);if(a<n)return[n-a-i,e]}return[Math.round(n-t.linear.bottom-i),e]}function er(e){let t;if(!e.floatContainer){if(t=e.lastStaticChild,!Ja(e,false)||e.hasHeight&&Math.floor(t.linear.bottom)<e.box.bottom)t=void 0}else{let i;const s=e.naturalChildren;let n=s.length-1;while(n>=0){const a=s[n--];if(a.floating){if(!t){const t=a.linear.bottom;if(i){if(t>i.linear.bottom)i=a}else if(Math.ceil(a.linear.bottom)>=e.box.bottom)i=a}else if(a.linear.bottom>=t.linear.bottom){t=a;break}}else if(!t){if(i&&i.linear.bottom>a.linear.bottom){t=i;break}t=a}}if(!t)t=i}return t}function tr(e){for(const t of[e.cssInitial("overflowX"),e.cssInitial("overflowY")])switch(t){case"auto":case"hidden":case"overlay":return true}return false}function ir(e,t,i){if(e.setBox(t,{reset:1}),i)e.registerBox(t,i)}const sr=(e,t)=>e.css("minHeight",Ya(Math.max(t,e.hasPX("minHeight",false)?e.parseHeight(e.css("minHeight")):0))),nr=(e,t=true)=>(!t&&e.blockStatic||t&&e.length>0&&!e.floating)&&!e.layoutElement&&!e.tableElement&&"FIELDSET"!==e.tagName,ar=(e,t)=>!e.hasHeight&&0===e.borderBottomWidth&&0===e.paddingBottom&&nr(e,t),rr=(e,t)=>!e.hasHeight&&0===e.borderTopWidth&&0===e.paddingTop&&nr(e,t);const lr={Accessibility:class or extends us{},Column:class cr extends us{is(e){return e.blockDimension&&"table"!==e.display&&!e.layoutElement&&e.length>1}condition(e){return e.has("columnCount")||e.hasPX("columnWidth")}processNode(e,t){let i=[];const s=[i];let n=Number.POSITIVE_INFINITY,a=false;if(e.each(e=>{var t;if("all"===e.css("columnSpan")){if(i.length)s.push([e]);else i.push(e);i=[],s.push(i)}else{if(e.textElement&&(null===(t=e.textBounds)||void 0===t?void 0:t.overflow))n=NaN;if(e.multiline)a=true;else if(!isNaN(n))n=Math.min(e.bounds.width,n);i.push(e)}}),0===i.length)s.pop();const[r,l,o]=e.cssAsTuple("columnRuleStyle","columnRuleWidth","columnRuleColor"),c=e.box.width,h=e.toInt("columnCount"),d=e.parseWidth(e.css("columnWidth"));let u,f=e.parseWidth(e.css("columnGap"));const g=()=>isNaN(h)&&d>0?c/(d+f):Number.POSITIVE_INFINITY;if(f>0)u=Math.floor(g());else f=(d>0&&!isNaN(n)&&n!==Number.POSITIVE_INFINITY?Math.max(n-d,0):0)+16,u=Math.ceil(g());e.data(yt.COLUMN,"mainData",{rows:s,columnCount:h,columnWidth:d,columnGap:f,columnSized:u,columnRule:{borderLeftStyle:r,borderLeftWidth:l,borderLeftColor:o},boxWidth:t.actualBoxWidth(c),multiline:a})}},CssGrid:Gn,Flexbox:$n,Grid:na,List:ca,Relative:class hr extends us{is(e){return e.positionRelative&&!e.autoPosition||0!==ua(e.verticalAlign)}condition(){return true}processNode(e){return{subscribe:true}}postOptimize(e){const t=e.renderParent,i=!e.baselineAltered?ua(e.verticalAlign):0;let s=0,n=0,a=0,r=0;if(e.hasPX("top"))s=e.top;else a=e.bottom;if(e.hasPX("left"))r=e.left;else n=e.right;if(t.support.positionTranslation){let t=0,l=0;if(0!==r)t=r;else if(0!==n)t=-n;if(0!==s)l=s;else if(0!==a)l=-a;if(0!==i)l-=i;if(0!==t)e.translateX(t,ga);if(0!==l)e.translateY(l,ga)}else{let l=e;if((0!==s||0!==a||0!==i)&&t.layoutHorizontal&&t.support.positionRelative&&0===e.renderChildren.length){const i=this.application;l=e.clone(i.nextId,true,true),l.baselineAltered=true,e.hide({hidden:true}),this.cache.append(l,false);const s=new Qt(t,l,l.containerType,l.alignmentType),n=t.renderChildren.findIndex(t=>t===e);if(-1!==n)s.renderIndex=n+1;if(i.addLayout(s),e.parseUnit(e.css("textIndent"))<0){const i=e.documentId;t.renderEach(e=>{if(e.alignSibling("topBottom")===i)e.alignSibling("topBottom",l.documentId);else if(e.alignSibling("bottomTop")===i)e.alignSibling("bottomTop",l.documentId)})}if(e.baselineActive&&!e.baselineAltered)for(const i of t.horizontalRows||[t.renderChildren])if(i.includes(e)){const t=i.filter(t=>t.positionRelative&&t.length>0&&0!==ua(e.verticalAlign)),s=t.length;if(s){t.sort((e,t)=>{const i=e.linear.top,s=t.linear.top;if(fa(i,s))return 0;else return i<s?-1:1});let i=true,n=0;while(n<s){const s=t[n++];if(i)e.modifyBox(2,ua(s.verticalAlign)),i=false;else s.modifyBox(2,s.linear.top-t[0].linear.top);s.setCacheValue("verticalAlign","0px")}}break}}else if(e.positionRelative&&e.naturalElement){const i=e.bounds,l=0!==s||0!==a,o=0!==r||0!==n;let c,h=false;const d=e.actualParent.naturalChildren,u=d.length;let f=0;while(f<u){const u=d[f++];if(u===e){if(h){if(l&&t.layoutVertical){const t=da(e.boundingClientRect);if(0!==s)s-=t.top-i.top;else if((null==c?void 0:c.positionRelative)&&c.hasPX("top"))a+=i.bottom-t.bottom;else a+=t.bottom-i.bottom}if(o&&t.layoutHorizontal&&!e.alignSibling("leftRight")){const t=da(e.boundingClientRect);if(0!==r)r-=t.left-i.left;else if((null==c?void 0:c.positionRelative)&&c.hasPX("right"))n+=i.right-t.right;else n+=t.right-i.right}}else if(t.layoutVertical)if(0!==s){if((null==c?void 0:c.blockStatic)&&c.positionRelative&&u.blockStatic)s-=c.top}else if(0!==a){if(1===u.getBox(2)[0])a-=u.marginTop}break}else if(u.positionRelative&&u.renderParent===t)h=true;if(u.pageFlow)c=u}}if(0!==i)l.modifyBox(2,-1*i);if(0!==s)l.modifyBox(2,s);else if(0!==a)l.modifyBox(2,-1*a);if(0!==r)if(l.autoMargin.left)l.modifyBox(4,-1*r);else l.modifyBox(16,r);else if(0!==n)l.modifyBox(16,-1*n);if(l!==e)l.setBoxSpacing()}}},Sprite:class dr extends us{is(e){return 0===e.length&&e.hasWidth&&e.hasHeight}condition(e){const t=e.backgroundImage;if(""!==t&&(this.included(e.element)||!e.dataset.use)){const i=this.resource.getRawData(t)||this.resource.getImage(ma(t));if(i){const t=e.actualDimension,{backgroundPositionX:s,backgroundPositionY:n}=e.cssAsObject("backgroundPositionX","backgroundPositionY"),a=pa(s+" "+n,t,{fontSize:e.fontSize,screenDimension:e.localSettings.screenDimension}),r=(a.left<0||ba.test(s))&&i.width>t.width,l=(a.top<0||ba.test(n))&&i.height>t.height;if((r||l)&&(r||0===a.left)&&(l||0===a.top))return e.data(yt.SPRITE,"mainData",{image:i,position:a}),true}}return false}},Table:Wa,VerticalAlign:class ur extends us{is(e){return e.length>0}condition(e){let t=false,i=0,s=0;const n=e.children,a=n.length;let r=0;while(r<a){const e=n[r++];if(!(e.positionStatic||e.positionRelative&&e.length))return false;else if(e.inlineVertical){const n=Da(e.verticalAlign);if(0!==n)t=true;if(!isNaN(s))if(0===s)s=n;else if(s!==n)s=NaN;i++}else s=NaN}return t&&isNaN(s)&&i>1&&$t.linearData(e.children).linearX}processNode(e){return e.each(e=>{if(e.inlineVertical&&Va(e.verticalAlign)||e.imageElement||e.svgElement)e.baselineAltered=true}),{subscribe:true}}postConstraints(e){if(e.layoutHorizontal)for(const t of e.horizontalRows||[e.renderChildren]){const e=[];let i,s=Number.POSITIVE_INFINITY;if(t.forEach(t=>{const n=t.linear.top;if(t.inlineVertical&&n<=s){if(n<s)e.length=0;e.push(t),s=n}if(t.baselineActive)i=t}),e.length){const s=e[0],n=s.linear.top;if(t.forEach(t=>{if(t!==i){if(t.inlineVertical)if(!e.includes(t)){if(Va(t.verticalAlign)||!i)t.setBox(2,{reset:1,adjustment:t.linear.top-n}),t.baselineAltered=true}else if(i&&(t.imageElement||t.svgElement)&&i.documentId===t.alignSibling("baseline"))t.setBox(2,{reset:1,adjustment:i.linear.top-t.linear.top});if(t.baselineAltered)t.setCacheValue("verticalAlign","0px")}}),i)i.setBox(2,{reset:1,adjustment:i.linear.top-n+Math.min(0,s.parseHeight(s.cssInitial("verticalAlign")))}),i.baselineAltered=true}}else e.each(e=>e.baselineAltered=false)}},WhiteSpace:class fr extends us{afterBaseLayout(){const e=this.application,t=new Set,i=e.session.clearMap;this.cacheProcessing.each(e=>{var s,n;if(e.naturalElement&&!e.hasAlign(4)){const a=e.naturalChildren,r=a.length;if(0===r)return;const l=e.pageFlow,o=l&&Ja(e,true)&&!e.actualParent.layoutElement;let c,h;for(let l=0;l<r;++l){const d=a[l];if(d.pageFlow){if(o)if(!d.floating){if(!c)c=d;h=d}else if(h){if(d.linear.bottom>=h.linear.bottom)h=d}else h=d;if(Ja(d,true))if(l>0){const a=d.previousSiblings({floating:false}),o=a.length;if(o){let h=false;const u=a[o-1];if(Ja(u,false)){let e=u.marginBottom,n=d.marginTop;if(u.marginTop<0&&0===u.bounds.height){const i=Math.min(e,u.marginTop);if(i<0){if(Math.abs(i)<n)d.modifyBox(2,i);else ir(d,2);t.add(u.id),u.hide({collapse:true});continue}}else if(d.marginBottom<0&&0===d.bounds.height){const i=Math.min(n,d.marginBottom);if(i<0){if(Math.abs(i)<e)u.modifyBox(8,i);else ir(u,8);t.add(d.id),d.hide({collapse:true});continue}}let a=false,r=u;while(ar(r,true)){let t=er(r);if(0===(null==t?void 0:t.getBox(8)[0])){let i=t.marginBottom,s=t;while(0===s.bounds.height&&!s.pseudoElement){const e=s.marginTop;if(i=Math.max(e,s.marginBottom,i),0!==e)ir(s,2);const n=s.previousSibling;if(n)if(n.marginBottom>=i){if(0!==s.marginBottom)ir(s,8);t=n,i=n.marginBottom,s=n}else if(n.bounds.height>0)break;else{if(0!==n.marginBottom)ir(n,8);s=n}else break}if(0!==i)ir(t,8,0===u.getBox(8)[0]?u:void 0);if(i>e)e=i,a=true;else if(0===i&&0===e){r=t;continue}}break}r=d;while(rr(r,true)){let e=r.firstStaticChild;if(Ja(e,true)&&0===e.getBox(2)[0]){let t=e.marginTop,i=e;while(0===i.bounds.height&&!i.pseudoElement){const s=i.marginBottom;if(t=Math.max(i.marginTop,s,t),0!==s)ir(i,8);const n=i.nextSibling;if(n)if(n.marginTop>=t){if(0!==i.marginTop)ir(i,2);e=n,t=n.marginTop,i=n}else if(n.bounds.height>0)break;else{if(0!==n.marginTop)ir(n,2);i=n}else break}if(0!==t)ir(e,2,0===d.getBox(2)[0]?d:void 0);if(t>n)n=t,h=true;else if(0===t&&0===n){r=e;continue}}break}if(e>0)if(n>0){if(n<=e){if(!h||!tr(d)){if(ir(d,2),0===d.bounds.height&&e>=d.marginBottom)ir(d,8);h=false}}else if(!a||!tr(u)){if(ir(u,8),0===u.bounds.height&&n>=u.marginTop)ir(u,2);a=false}}else if(0===d.bounds.height)if(n=Math.min(n,d.marginBottom),n<0)u.modifyBox(8,n),d.hide({collapse:true});if(n>0&&u.floatContainer&&0===d.getBox(2)[1]&&!tr(u)){let e=false;if(0===u.bounds.height)e=true;else{let t;if(Ga(u.naturalElements,e=>{if(i.has(e))return true;else if(e.floating){if(e.linear.bottom>Math.ceil(u.bounds.bottom))t=e.float;return true}}),t){const i=null===(s=za(u.element,"styleMap::after",u.sessionId))||void 0===s?void 0:s.clear;e=!("both"===i||i===t)}}if(e)d.modifyBox(2,u.box.top-Ua(u.naturalElements.map(e=>e.linear.bottom)),false)}if(h){let e=0;if(0===u.bounds.height){const t=u.previousSibling;e=t&&Ja(t,false)?Math.max(t.getBox(8)[1],t.marginBottom):0}if(n>e)(d.registerBox(2)||d).setCacheValue("marginTop",n)}if(a){let t=0;if(0===d.bounds.height){const e=d.nextSibling;t=e&&Ja(e,true)?Math.max(e.getBox(2)[1],e.marginTop):0}if(e>=t)(u.registerBox(8)||u).setCacheValue("marginBottom",e)}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;if(e>0&&t>0)if(e<t)ir(d,2);else if(l===r-1)d.setCacheValue("marginBottom",e),ir(d,2);else ir(d,8)}if(!h&&d!==c&&a.length>1&&(e.layoutVertical||(null===(n=d.renderParent)||void 0===n?void 0:n.layoutVertical))){const e=a.pop();if(e.floating&&Math.floor(e.bounds.top)===Math.floor(d.bounds.top))d.modifyBox(2,-e.bounds.height,false)}}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;if(e>0&&t>0){if(e<t)d.setCacheValue("marginTop",t);ir(d,8)}}}}if(l&&!tr(e)&&"FIELDSET"!==e.tagName){if(null==c?void 0:c.naturalElement)Qa(e,c,true);if(null==h?void 0:h.naturalElement)if(Qa(e,h,false),h.marginTop<0){const t=h.bounds.height+h.marginBottom+h.marginTop;if(t<0)e.modifyBox(128,t,false)}}}}),e.processing.excluded.each(e=>{if(e.lineBreak&&!e.lineBreakTrailing&&!i.has(e)&&!t.has(e.id)){let i=false;const s=e.previousSiblings({floating:false});if(s.length){const n=e.actualParent,a=e.nextSiblings();if(a.length){let r,l,o=s.pop(),c=a.pop(),h=0;if(o.rendered&&c.rendered){const a=o.inlineStatic&&c.inlineStatic;if(a&&0===s.length)return void t.add(e.id);if(!o.multiline&&o.has("lineHeight")){const e=Math.floor((o.lineHeight-o.bounds.height)/2);if(e>0)h+=e}if(!c.multiline&&c.has("lineHeight")){const e=Math.round((c.lineHeight-c.bounds.height)/2);if(e>0)h+=e}if(a){if(r=s[0],1===s.length)r=r.lineBreak?e:void 0;null==r||r.setBounds(false)}let d=o.renderParent,u=c.renderParent;if(d!==u){while(d&&d!==n)o=d,d=o.renderParent;while(u&&u!==n)c=u,u=c.renderParent}if([l,c]=Za(c,o,h,r),l>=1)if(c.visible)c.modifyBox(2,l),i=true;else if(o.visible)o.modifyBox(8,l),i=true}else if([l,c]=Za(c,o,h),l>=1)if((c.lineBreak||c.excluded)&&n.lastChild===c)n.modifyBox(128,l),i=true;else if((o.lineBreak||o.excluded)&&n.firstChild===o)n.modifyBox(32,l),i=true}else if(n.visible&&!n.preserveWhiteSpace&&"CODE"!==n.tagName){if(!n.originalRoot){const e=s[s.length-1],t=0===e.bounds.height&&e.length?$t.outerRegion(e):e.linear,i=n.box.bottom-(e.lineBreak||e.excluded?t.top:t.bottom);if(0!==i)if(e.rendered||n.visibleStyle.background)n.modifyBox(128,i);else if(!n.hasHeight)sr(n,i)}else if(a.length){const e=a[a.length-1],t=(e.lineBreak||e.excluded?e.linear.bottom:e.linear.top)-n.box.top;if(0!==t)if(e.rendered||n.visibleStyle.background)n.modifyBox(32,t);else if(!n.hasHeight)sr(n,t)}i=true}if(i)s.forEach(e=>t.add(e.id)),a.forEach(e=>t.add(e.id))}}})}afterConstraints(){this.cacheProcessing.each(e=>{if(e.naturalChild&&e.styleElement&&e.inlineVertical&&e.pageFlow&&!e.positioned&&!e.actualParent.layoutElement){const t=e.outerMostWrapper,i=t.renderParent;if(false===(null==i?void 0:i.hasAlign(4))){if(e.blockDimension&&!e.floating)if(i.layoutVertical){const s=i.renderChildren,n=s.findIndex(e=>e===t);if(-1!==n){if(!e.lineBreakLeading&&!e.baselineAltered){const e=s[n-1];if(null==e?void 0:e.pageFlow)Ka(t,2,e.actualRect("bottom"),e.getBox(8)[1])}if(!e.lineBreakTrailing){const e=s[n+1];if((null==e?void 0:e.pageFlow)&&e.styleElement&&!e.inlineVertical)Ka(t,8,e.actualRect("top"),e.getBox(2)[1])}}}else if(!e.baselineAltered){const s=i.horizontalRows,n=e=>e.pageFlow&&e.blockDimension&&!e.floating;let a;if(s&&s.length>1)e:{let e=Number.NEGATIVE_INFINITY;const i=s.length;for(let r=0;r<i;++r){const i=s[r],l=i.length;let o=0;while(o<l)if(t===i[o++]){if(r>0)Ka(t,2,e);else a=i;break e}if(i.forEach(t=>{const i=t.innerMostWrapped;if(n(i))e=Math.max(i.actualRect("bottom"),e)}),e===Number.NEGATIVE_INFINITY)break}}else if(i.layoutHorizontal||i.hasAlign(1024))a=i.renderChildren;if(a){let i=[];a.forEach(e=>{if(e.nodeGroup)i=i.concat(e.cascade(e=>e.naturalChild));else if(e.innerWrapped)i.push(e.innerMostWrapped);else i.push(e)});let s=Number.NEGATIVE_INFINITY;const r=e.actualParent,l=e.actualRect("top"),o=r.naturalChildren,c=o.length;let h=0;while(h<c){const e=o[h++];if(i.includes(e))break;else if(e.lineBreak||e.block)s=Number.NEGATIVE_INFINITY;else if(e.excluded)continue;else if(n(e))s=Math.max(e.actualRect("bottom"),s)}if(s!==Number.NEGATIVE_INFINITY&&l>s)Ka(t,2,s)}}if(!i.layoutVertical&&!t.alignParent("left")){const s=t.alignSibling("leftRight");if(""!==s){const e=i.renderChildren.find(e=>e.documentId===s);if(null==e?void 0:e.inlineVertical)Ka(t,16,e.actualRect("right"))}else{let i=e;while(true){const e=i.siblingsLeading;if(e.length&&!e.some(e=>e.lineBreak||e.excluded&&e.blockStatic)){const s=e[0];if(s.inlineVertical)Ka(t,16,s.actualRect("right"));else if(s.floating){i=s;continue}}break}}}}}if(e.floatContainer&&e.layoutVertical){const t=[];e.naturalChildren.forEach(i=>{if(i.pageFlow)if(!i.floating){if(t.length){const s=i.outerMostWrapper;let n=s.renderParent;if(n){const[a,r]=i.getBox(2);if((0===a?i.marginTop:0)+r>0){const i=Math.floor(e.bounds.top),a=t.length;let r=0;while(r<a){const a=t[r++];if(i<=Math.floor(a.bounds.top)){let t=a.outerMostWrapper.renderParent;if(t){if(n=n.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||n,t=t.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||t,n!==t)s.modifyBox(2,-1*(t!==e?t:a).linear.height,false);break}}}}}t.length=0}}else t.push(i)})}})}}},gr={constant:It,enumeration:wt};e.Application=G,e.ApplicationUI=class pr extends G{constructor(e,i,s,n,a){super(e,i,s,n,a),this.session={cache:new t,excluded:new t,extensionMap:new Map,clearMap:new Map,active:[],targetQueue:new Map},this.builtInExtensions={},this.extensions=[],this._layouts=[];const r=this.controllerHandler.localSettings;this._controllerSettings=r,this._excluded=r.unsupported.excluded}finalize(){if(this.closed)return;const{controllerHandler:e,session:t}=this,i=t.cache,s=this.extensions,n=this._layouts;for(const[e,s]of t.targetQueue.entries()){const t=this.resolveTarget(e.dataset.target);if(t)e.render(t),this.addLayoutTemplate(t,e,s);else if(!e.renderParent)i.remove(e)}const a=i.children,r=a.length,l=new Array(r);let o=0,c=0;while(o<r){const e=a[o++];if(e.renderParent&&e.visible){if(e.hasProcedure(St.LAYOUT))e.setLayout();if(e.hasProcedure(St.ALIGNMENT))e.setAlignment();l[c++]=e}}l.length=c,e.optimize(l),s.forEach(e=>{for(const t of e.subscribers)e.postOptimize(t)});const h=[];o=0;while(o<c){const e=l[o++];if(e.hasResource(Et.BOX_SPACING))e.setBoxSpacing();if(e.documentRoot){if(0===e.renderChildren.length&&!e.inlineText){const t=e.naturalElements;if(t.length&&t.every(e=>e.documentRoot))continue}const t=e.innerMostWrapped.data(G.KEY_NAME,"layoutName");if(t)h.push({node:e,layoutName:t})}}s.forEach(e=>e.beforeCascade(h));const d=this._controllerSettings.layout.baseTemplate;h.forEach(t=>{var i;const s=t.node,n=s.renderParent.renderTemplates;if(n)this.saveDocument(t.layoutName,d+e.cascadeDocument(n,Math.abs(s.depth)),s.dataset.pathname,(null===(i=s.renderExtension)||void 0===i?void 0:i.some(e=>e.documentBase))?0:void 0)}),this.resourceHandler.finalize(n),e.finalize(n),s.forEach(e=>e.afterFinalize()),oi("__squared.pseudo"),this.closed=true}copyToDisk(e,t){super.copyToDisk(e,this.createAssetOptions(t))}appendToArchive(e,t){super.appendToArchive(e,this.createAssetOptions(t))}saveToArchive(e,t){super.saveToArchive(e,this.createAssetOptions(t))}reset(){super.reset();for(const e of this.rootElements)e.dataset.iteration="";const e=this.session;e.cache.reset(),e.excluded.reset(),e.extensionMap.clear(),e.targetQueue.clear(),this._layouts.length=0}conditionElement(e,t){if(!this._excluded.has(e.tagName))if(this.controllerHandler.visibleElement(e,t)||this._cascadeAll)return true;else if(!t){switch(si(e).position){case"absolute":case"fixed":return this.useElement(e)}let t=e.parentElement;while(t){if("none"===si(t).display)return this.useElement(e);t=t.parentElement}const i=this.controllerHandler;if(bi(e.children,e=>i.visibleElement(e))===Number.POSITIVE_INFINITY)return true;else return this.useElement(e)}return false}insertNode(e,t,i){if(li(e)){if(ki(e.textContent)||(null==t?void 0:t.preserveWhiteSpace)&&("PRE"!==t.tagName||0===t.element.childElementCount)){this.controllerHandler.applyDefaultStyles(e);const i=this.createNode({parent:t,element:e,append:false});if(t)i.cssApply(t.textStyle),i.setCacheValue("fontSize",t.fontSize);return i}}else if(this.conditionElement(e,i))return this.controllerHandler.applyDefaultStyles(e),this.createNode({parent:t,element:e,append:false});else{const i=this.createNode({parent:t,element:e,append:false});return i.visible=false,i.excluded=true,i}}saveDocument(e,t,i,s){if(mi(t)){const n={pathname:i?Si(i,"/"):hi(this.userSettings.outputDirectory,this._controllerSettings.layout.pathName),filename:e,content:t,index:s},a=this._layouts;if(void 0!==s&&s>=0&&s<a.length)a.splice(s,0,n);else a.push(n)}}renderNode(e){return 0===e.itemCount?this.controllerHandler.renderNode(e):this.controllerHandler.renderNodeGroup(e)}addLayout(e){const t=e.renderType;if(gi(t,512))if(gi(t,8))e=this.processFloatHorizontal(e);else if(gi(t,16))e=this.processFloatVertical(e);if(0!==e.containerType){const t=this.renderNode(e);if(t)return this.addLayoutTemplate(t.parent||e.parent,e.node,t,e.renderIndex)}return false}addLayoutTemplate(e,t,i,s=-1){if(i){if(!t.renderExclude)if(t.renderParent){const n=yi(e,"renderTemplates");if(s>=0&&s<e.renderChildren.length)e.renderChildren.splice(s,0,t),n.splice(s,0,i);else e.renderChildren.push(t),n.push(i)}else this.session.targetQueue.set(t,i);else t.hide({remove:true}),t.excluded=true;return true}return false}createNode(e){const t=this.processing,{element:i,parent:s,children:n}=e,a=new this.Node(this.nextId,t.sessionId,i,this.controllerHandler.afterInsertNode);if(s){if(a.depth=s.depth+1,s.naturalElement&&(!i||null===i.parentElement))a.actualParent=s;const t=e.replace;if(t&&s.appendTry(t,a,false))t.parent=a,a.innerWrapped=t}if(null==n||n.forEach(e=>e.parent=a),false!==e.append)t.cache.append(a,true===e.delegate,true===e.cascade);return a}createCache(e){const t=this.createRootNode(e);if(t){const e=this.controllerHandler,i=this._cache,s=t.parent,n={},a=new Set,r=[];let l=false;if(t.documentBody)s.naturalChild=true,s.setCacheValue("naturalElement",true),s.visible=false,s.addAlign(4),s.exclude({resource:Et.FONT_STYLE|Et.VALUE_STRING,procedure:St.ALL}),i.append(s);if(t.originalRoot=true,t.documentParent=s,i.each(e=>{if(e.styleElement){const t=e.element;if(e.length){const i=e.cssInitial("textAlign");switch(i){case"center":case"right":case"end":Ni(n,t,e.id,"text-align","left",i);break}}if(e.positionRelative)Zt.forEach(i=>{if(e.hasPX(i))Ni(n,t,e.id,i,"auto",e.css(i))});if("rtl"===e.dir)t.dir="ltr",a.add(t),l=true}}),this.processing.excluded.each(e=>{if(!e.pageFlow)e.cssTry("display","none")}),i.each(e=>{if(!e.pseudoElement)e.setBounds(void 0===n[e.id]&&!l);else r.push(e)}),r.length){const e=[];r.forEach(t=>{const i=t.actualParent.element;let s,n=i.id;if(t.pageFlow){if(""===n)n="__squared_"+Math.round(Math.random()*(new Date).getTime()),i.id=n;s=ni(`#${n+_i(t.element,t.sessionId)} { display: none !important; }`)}if(t.cssTry("display",t.display))e.push({item:t,id:n,parentElement:i,styleElement:s})}),e.forEach(e=>e.item.setBounds(false)),e.forEach(e=>{const t=e.styleElement;if(e.id.startsWith("__squared_"))e.parentElement.id="";if(t)try{document.head.removeChild(t)}catch(e){}e.item.cssFinally("display")})}this.processing.excluded.each(e=>{if(!e.lineBreak)e.setBounds(),e.saveAsInitial();if(!e.pageFlow)e.cssFinally("display")}),i.each(e=>{if(e.styleElement){const t=e.element,i=n[e.id];if(i)for(const e in i)t.style.setProperty(e,i[e]);if(a.has(t))t.dir="rtl"}e.saveAsInitial()}),e.evaluateNonStatic(t,i),e.sortInitialCache()}return t}afterCreateCache(e){const t=e.dataset,{filename:i,iteration:s}=t,n=mi(i)&&i.replace(new RegExp(`\\.${this._controllerSettings.layout.fileExtension}$`),"")||e.elementId||"document_"+this.length,a=(s?parseInt(s):-1)+1,r=ui(a>0?`${n}_${a}`:n,true);t.iteration=a.toString(),t.layoutName=r,e.data(G.KEY_NAME,"layoutName",r),this.setBaseLayout(),this.setConstraints(),this.setResources()}resolveTarget(e){if(mi(e)){for(const t of this._cache)if(t.elementId===e||t.controlId===e)return t;for(const t of this.session.cache)if(t.elementId===e||t.controlId===e)return t}}useElement(e){const t=e.dataset.use;return mi(t)&&t.split(Ii.SEPARATOR).some(e=>!!this.extensionManager.retrieve(e))}toString(){var e;return(null===(e=this.layouts[0])||void 0===e?void 0:e.content)||""}cascadeParentNode(e,t,i){var s;const n=this.insertNode(e);if(n&&("none"!==n.display||0===t||n.outerExtensionElement)){if(n.depth=t,0===t){this._cache.append(n);for(const e of n.extensions)if(null===(s=this.extensionManager.retrieve(e))||void 0===s?void 0:s.cascadeAll){this._cascadeAll=true;break}}const a=this.controllerHandler;if(n.excluded&&null===n.outerExtensionElement||a.preventNodeCascade(e))return n;const r=this.processing.sessionId,l=this.createPseduoElement(e,"::before",r),o=this.createPseduoElement(e,"::after",r),c=e.childNodes,h=c.length,d=new Array(h),u=new Array(e.childElementCount);let f=true,g=0,p=0,m=0;while(g<h){const e=c[g++];let s;if(e===l){if(s=this.insertNode(l,void 0,"::before"),s){if(n.innerBefore=s,!s.textEmpty)s.inlineText=true;f=false}}else if(e===o){if(s=this.insertNode(o,void 0,"::after"),s){if(n.innerAfter=s,!s.textEmpty)s.inlineText=true;f=false}}else if("#"===e.nodeName.charAt(0)){if(li(e))s=this.insertNode(e,n)}else if(a.includeElement(e)){if(i)Bi(e.dataset.use,i).some(t=>t.init(e));if(!this.rootElements.has(e)){if(s=this.cascadeParentNode(e,t+1,i),false===(null==s?void 0:s.excluded))f=false}else{if(s=this.insertNode(e),s)s.documentRoot=true,s.visible=false,s.excluded=true;f=false}if(s)u[m++]=s}if(s)s.childIndex=p,s.naturalChild=true,d[p++]=s}if(d.length=p,u.length=m,n.naturalChildren=d,n.naturalElements=u,this.cacheNodeChildren(n,d,f),m>0&&this.userSettings.createQuerySelectorMap)n.queryMap=this.createQueryMap(u,m)}return n}cacheNodeChildren(e,t,i){const s=t.length;if(s){const n=this._cache;let a=[],r=[];if(s>1){let l=t[0],o=false;for(let c=0,h=0;c<s;++c){const d=t[c];if(d.excluded)this.processing.excluded.append(d);else if(!d.plainText||!i)d.containerIndex=h++,d.parent=e,n.append(d);if(d.pageFlow){if(d.floating)o=true;if(c>0)if(r.push(d),d.lineBreak)t[c-1].lineBreakTrailing=true;if(!d.excluded)d.siblingsLeading=a,l.siblingsTrailing=r,a=[],r=[],l=d;if(c<s-1)if(a.push(d),d.lineBreak)t[c+1].lineBreakLeading=true}d.actualParent=e}l.siblingsTrailing=r,e.floatContainer=o}else{const i=t[0];if(i.excluded)this.processing.excluded.append(i);else if(!i.plainText)i.siblingsLeading=a,i.siblingsTrailing=r,i.parent=e,i.containerIndex=0,n.append(i),e.floatContainer=i.floating;i.actualParent=e}}else i=!e.textEmpty;e.inlineText=i}setBaseLayout(){const{controllerHandler:e,processing:t,session:i}=this,{extensionMap:s,clearMap:n}=i,a=t.cache,r=t.node,l=new Map;let o=this.extensionsTraverse;{let e=0;const t=(e,t,i)=>{var s;return(null===(s=l.get(e))||void 0===s?void 0:s.set(t,i))||l.set(e,new Map([[t,i]]))},i=e=>-1*e-2;t(-1,0,r.parent),a.each(i=>{if(i.length){const s=i.depth;if(t(s,i.id,i),e=Math.max(s,e),i.floatContainer){const e=new Set,t={};i.naturalChildren.forEach(i=>{if(i.pageFlow){const s=i.floating;if(e.size){const a=i.css("clear");if("none"!==a){if(!s){let s;switch(a){case"left":s=[t.left];break;case"right":s=[t.right];break;case"both":s=[t.left,t.right];break}null==s||s.forEach(s=>{if(s){const n=s.float;if(e.has(n)&&Math.ceil(i.bounds.top)>=s.bounds.bottom)e.delete(n),t[n]=void 0}})}if(e.has(a)||"both"===a){if(n.set(i,2===e.size?"both":a),!s)i.setBox(2,{reset:1});e.clear(),t.left=void 0,t.right=void 0}}}if(s){const s=i.float;e.add(s),t[s]=i}}})}}});let s=0;while(s<e)l.set(i(s++),new Map);a.afterAppend=(e,s=false)=>{if(t(i(e.depth),e.id,e),s&&e.length)e.cascade(e=>{var s;if(e.length){const n=e.depth;null===(s=l.get(n))||void 0===s||s.delete(e.id),t(i(n),e.id,e)}return false})}}this.extensions.forEach(e=>e.beforeBaseLayout());for(const t of l.values())for(const i of t.values()){if(0===i.length)continue;const t=i.floatContainer,a=i.renderExtension,r=i.duplicate(),l=r.length;for(let i=0;i<l;++i){let c=r[i];if(c.rendered||!c.visible)continue;let h=c.parent;if(l>1&&i<l-1&&c.pageFlow&&(0===h.alignmentType||h.hasAlign(2)||c.hasAlign(8192))&&!h.hasAlign(4)&&!c.nodeGroup&&c.hasSection(vt.DOM_TRAVERSE)){const s=[],a=[];let o,d,u=i,f=0;if(h.layoutVertical&&c.hasAlign(8192))s.push(c),++u,++f;e:{let e=false;for(;u<l;++u,++f){const i=r[u];if(i.pageFlow){if(i.labelFor&&!i.visible){f--;continue}if(t){if(e){if(n.get(i))e=false}if(i.floating)e=true}if(0===f){const e=i.siblingsTrailing[0];if(e){if(!Li(i)||e.alignedVertically([i])>0)a.push(i);else s.push(i);continue}}const r=i.siblingsLeading[0];if(r){const l=s.length>0;if(t){const t=i.alignedVertically(l?s:a,n,l);if(t>0){if(l){if(t<4&&e&&!i.siblingsLeading.some(e=>e.lineBreak&&!n.has(e))){if(!i.floating||r.floating&&i.bounds.top<Math.floor(r.bounds.bottom)){let t=Number.NEGATIVE_INFINITY;if(!i.floating)s.forEach(e=>{if(e.floating)t=Math.max(t,e.bounds.bottom)});if(!i.floating&&i.bounds.top<Math.floor(t)||e)if(s.push(i),!i.floating&&Math.ceil(i.bounds.bottom)>t)break e;else continue}}else switch(t){case 6:case 7:if(!n.has(i))n.set(i,"both");break}break e}if(!Mi(i,s,a))break e}else if(!Pi(i,s,a))break e}else if(i.alignedVertically(l?s:a,void 0,l)>0){if(!Mi(i,s,a))break e}else if(!Pi(i,s,a))break e}else break e}else if(i.autoPosition){const e=a.length;if(e){if(a[e-1].blockStatic)a.push(i);break}else s.push(i)}}}let g=s.length;if(g>1)o=e.processTraverseHorizontal(new Qt(h,c,0,0,s),r),d=s[g-1];else if(g=a.length,g>1)if(o=e.processTraverseVertical(new Qt(h,c,0,0,a),r),d=a[g-1],Li(d)&&d!==r[l-1])d.addAlign(8192);let p=false;if(o){if(this.addLayout(o))p=true,h=c.parent}else p=true;if(p&&d===r[l-1])h.removeAlign(2)}if(c.removeAlign(8192),i===l-1)h.removeAlign(2);if(c.renderAs&&h.appendTry(c,c.renderAs,false))if(c.hide(),c=c.renderAs,c.positioned)h=c.parent;if(!c.rendered&&c.hasSection(vt.EXTENSION)){const e=s.get(c.id);let t=e?a?a.concat(e):e:a,i=false;if(t){const e=t.length;let s=0;while(s<e){const e=t[s++],n=e.processChild(c,h);if(n){const{output:t,renderAs:s,outputAs:a}=n;if(t)this.addLayoutTemplate(n.outerParent||h,c,t);if(s&&a)this.addLayoutTemplate(n.parentAs||h,s,a);if(h=n.parent||h,n.subscribe)e.subscribers.add(c);if(i=true===n.next,n.complete||i)break}}if(i)continue}if(c.styleElement){t=Bi(c.dataset.use,o);const s=t.length;let n=0;while(n<s){const s=t[n++];if(s.is(c))if(s.condition(c,h)&&(!e||!e.includes(s))){const e=s.processNode(c,h);if(e){const{output:t,renderAs:n,outputAs:a}=e;if(t)this.addLayoutTemplate(e.outerParent||h,c,t);if(n&&a)this.addLayoutTemplate(e.parentAs||h,n,a);if(h=e.parent||h,e.include)yi(c,"renderExtension").push(s),s.subscribers.add(c);else if(e.subscribe)s.subscribers.add(c);if(e.remove){const e=o.indexOf(s);if(-1!==e)o=o.slice(0),o.splice(e,1)}if(i=true===e.next,e.complete||i)break}}}if(i)continue}}if(!c.rendered&&c.hasSection(vt.RENDER)){let t=this.createLayoutControl(h,c);if(0===t.containerType){const i=c.length?e.processUnknownParent(t):e.processUnknownChild(t);if(i.next)continue;t=i.layout}this.addLayout(t)}}}a.sort((e,t)=>{if(e.depth===t.depth){const i=e.innerWrapped,s=t.innerWrapped;if(i===t)return-1;else if(e===s)return 1;const n=e.outerWrapper,a=t.outerWrapper;if(e===a||!n&&a)return-1;else if(t===n||!a&&n)return 1;const r=e.nodeGroup,l=t.nodeGroup;if(r&&l)return e.id<t.id?-1:1;else if(r)return-1;else if(l)return 1;return 0}return e.depth<t.depth?-1:1}),this.extensions.forEach(e=>{for(const t of e.subscribers)if(a.contains(t))e.postBaseLayout(t);e.afterBaseLayout()}),i.cache.join(a),i.excluded.join(t.excluded)}setConstraints(){const e=this._cache;this.controllerHandler.setConstraints(),this.extensions.forEach(t=>{for(const i of t.subscribers)if(e.contains(i))t.postConstraints(i);t.afterConstraints()})}setResources(){const e=this.resourceHandler;this._cache.each(t=>{if(e.setBoxStyle(t),!t.imageElement&&!t.svgElement&&t.visible)e.setFontStyle(t),e.setValueString(t)}),this.extensions.forEach(e=>e.afterResources())}processFloatHorizontal(e){const t=this.controllerHandler,{containerType:i,alignmentType:s}=t.containerTypeVertical,n=this.session.clearMap,a=[],r=[],l=[],o=[],c=[];let h,d,u,f,g=false;if(e.each((e,t)=>{if(t>0){if(n.get(e))g=true}const i=e.float;if(!g)if("left"===i)o.push(e);else if("right"===i)c.push(e);else if(o.length||c.length){let t=e.linear.top;if(e.styleText){const i=e.textBounds;if(i)t=Math.max(i.top,t)}if(t=Math.ceil(t),o.some(e=>t>=e.bounds.bottom)||c.some(e=>t>=e.bounds.bottom))l.push(e);else r.push(e)}else r.push(e);else if("left"===i)if(h)h.push(e);else h=[e];else if("right"===i)if(d)d.push(e);else d=[e];else l.push(e)}),o.length)u=h?[o,h]:o;if(c.length)f=d?[c,d]:c;if(c.length+((null==d?void 0:d.length)||0)===e.length)e.add(2048);if(l.length){const{node:n,parent:a}=e;if(l.length>1)l[0].addAlign(8192);l.unshift(n);const r=t.createNodeGroup(n,l,{parent:a});r.childIndex=n.childIndex,r.containerName=n.containerName,r.inherit(n,"boxStyle"),r.innerWrapped=n,n.resetBox(30,r),n.resetBox(480,r),this.addLayout(new Qt(a,r,i,s|(a.blockStatic?64:0),l)),e.parent=r}if(r.length)a.push(r);if(u)a.push(u);if(f)a.push(f);return e.type=t.containerTypeVerticalMargin,e.itemCount=a.length,e.add(64),a.forEach(n=>{let a,l;if(Array.isArray(n[0])){a=n;const r=a.length;let o=a[0],h=1;while(h<r)o=o.concat(a[h++]);o.sort((e,t)=>e.childIndex<t.childIndex?-1:1);const d=e.node;if(d.layoutVertical)l=d;else l=t.createNodeGroup(o[0],o,{parent:d}),this.addLayout(Qt.create({parent:d,node:l,containerType:i,alignmentType:s|(a.some(e=>e===f||e===c)?2048:0),itemCount:r}))}else a=[n];a.forEach(n=>{const a=n[0],h=l||e.node,d=t.createNodeGroup(a,n,{parent:h,delegate:true}),u=new Qt(h,d,0,128);if(n===r)u.add(256);else u.add(function(e){let t=0,i=true,s=true;const n=e.length;let a=0;while(a<n){const t=e[a++];if(!t.floating)i=false;if(!t.rightAligned)s=false;if(!i&&!s)break}if(i)t|=512;if(s)t|=2048;return t}(n));if(n.some(e=>e.percentWidth>0)){if(u.type=t.containerTypePercent,1===n.length)u.node.innerWrapped=a}else if(1===n.length)u.setContainerType(i,s);else if(u.linearY||u.unknownAligned)u.setContainerType(i,s|(u.unknownAligned?2:0));else t.processLayoutHorizontal(u);if(this.addLayout(u),n===r)this.setFloatPadding(h,d,r,o,c)})}),e}processFloatVertical(e){const t=this.controllerHandler,{containerType:i,alignmentType:s}=t.containerTypeVertical,n=this.session.clearMap;if(0!==e.containerType){const n=e.node,a=t.createNodeGroup(n,[n],{parent:e.parent});this.addLayout(new Qt(a,n,i,s,a.children)),e.node=a}else e.setContainerType(i,s);const a=[],r=[],l=[],o=[];let c=false,h=false,d=true;if(e.each(e=>{if(e.blockStatic&&0===o.length)l.push(e),h=true;else{if(n.has(e))if(!e.floating)e.setBox(2,{reset:1}),a.push(l.slice(0)),r.push(o.slice(0)),l.length=0,o.length=0;else c=true;if(e.floating){if(h)a.push(l.slice(0)),r.push(null),l.length=0,o.length=0,h=false;o.push(e)}else{if(c&&!n.has(e))d=false;l.push(e)}}}),o.length)r.push(o);if(l.length)a.push(l);if(!d){const n=e.node,l=Math.max(r.length,a.length);for(let e=0;e<l;++e){const l=a[e]||[];if(null===r[e]&&l.length){const e=t.containerTypeVertical;this.addLayout(new Qt(n,t.createNodeGroup(l[0],l,{parent:n}),e.containerType,192|e.alignmentType,l))}else{const a=r[e]||[];if(l.length||a.length){const e=t.createNodeGroup(a[0]||l[0],[],{parent:n}),r=new Qt(n,e);r.type=t.containerTypeVerticalMargin;const o=[];let c;if(a.length){const i=t.createNodeGroup(a[0],a,{parent:e});if(r.add(512),0===l.length&&a.every(e=>"right"===e.float))r.add(2048);o.push(i)}if(l.length)c=t.createNodeGroup(l[0],l,{parent:e}),o.push(c);if(r.itemCount=o.length,this.addLayout(r),o.forEach(n=>{if(!n.nodeGroup)n=t.createNodeGroup(n,[n],{parent:e,delegate:true});this.addLayout(new Qt(e,n,i,192|s,n.children))}),l.length&&a.length){const[e,t]=xi(a,e=>"right"!==e.float);this.setFloatPadding(n,c,l,e,t)}}}}}return e}createPseduoElement(e,t,i){let s=wi(e,"styleMap"+t,i),n=0;if("Q"===e.tagName){if(!s)s={},Ti(e,"styleMap"+t,i,s);let a=s.content;if(!a)a=si(e,t).getPropertyValue("content")||("::before"===t?"open-quote":"close-quote"),s.content=a;if(a.endsWith("-quote")){let t=e.parentElement;while("Q"===(null==t?void 0:t.tagName))n++,t=t.parentElement}}if(s){let a=s.content;if(a){const r=Ei(a);let l=false;switch(s.position){case"absolute":case"fixed":l=true;break}const o=()=>{if(!l&&""!==r){const t=e.childNodes[e.childNodes.length-1];if(li(t))return!/\s+$/.test(t.textContent)}return false};if(""===r.trim()){const i=e=>{if((e||0===di(s.width))&&0===di(s.height)){for(const e in s)if(/(padding|Width|Height)/.test(e)&&di(s[e])>0)return true;else if(!l&&e.startsWith("margin")&&0!==di(s[e]))return true;return false}return true};if("::after"===t){if(!o()&&!i(true))return}else{const t=e.childNodes,n=t.length;let a=0;while(a<n){const e=t[a++];if(li(e)){if(""!==e.textContent.trim())break}else if(e instanceof HTMLElement){const t=si(e);switch(t.getPropertyValue("position")){case"fixed":case"absolute":continue}if("none"!==t.getPropertyValue("float"))return;break}}switch(s.display){case void 0:case"block":case"inline":case"inherit":case"initial":if(!i(false))return;break}}}else if("inherit"===a){let t=e;do{if(a=si(t).getPropertyValue("content"),"inherit"!==a)break;t=t.parentElement}while(t)}const c=si(e);ei.forEach(e=>{if(!mi(s[e]))s[e]=c[e]});let h="",d="";switch(a){case"normal":case"none":case"initial":case"inherit":case"unset":case"no-open-quote":case"no-close-quote":case'""':break;case"open-quote":if("::before"===t)d=n%2==0?"":"";break;case"close-quote":if("::after"===t)d=n%2==0?"":"";break;default:{const s=ai(a);if(""!==s)if(d=s,pi(this._controllerSettings.mimeType.image,s))h="img";else d="";else{let s,n=false;Ai.lastIndex=0;while(null!==(s=Ai.exec(a))){const a=s[1];if(a)d+=ri(e,a.trim());else if(s[2]||s[5]){const n="counter"===s[2],[a,r]=n?[s[3],s[4]||"decimal"]:[s[6],s[8]||"decimal"],l=(Ri(e,a,t,i,0)||0)+(Ci(c.getPropertyValue("counter-reset"),a,0)||0),o=[];let h,u=e,f=l,g=false;const p=(e,t)=>{const i=o.length;if(0===i)f+=e;else if(g||t)o[i-1]+=e},m=e=>{if(void 0===Ci(si(e).getPropertyValue("counter-reset"),a))bi(e.children,e=>{if("__squared.pseudo"!==e.className){let s=Ri(e,a,t,i);if(s)p(s,true);const n=si(e);if(s=Ci(n.getPropertyValue("counter-increment"),a),s)p(s,false);if(s=Ci(n.getPropertyValue("counter-reset"),a),void 0!==s)return true;m(e)}})};while(u){if(g=false,u.previousElementSibling){if(u=u.previousElementSibling,u)m(u)}else if(u.parentElement)u=u.parentElement,g=true;else break;if(u&&"__squared.pseudo"!==u.className){const e=Ri(u,a,t,i);if(e)p(e,true);const s=si(u),r=Ci(s.getPropertyValue("counter-increment"),a);if(r)p(r,false);const l=Ci(s.getPropertyValue("counter-reset"),a);if(void 0!==l){if(!h)f+=l;if(h=u,n)break;else if(g)o.push((e||0)+l)}}}if(h){if(!n&&o.length>1){o.reverse().splice(1,1);const e=s[7];o.forEach(t=>d+=ti(r,t,true)+e)}}else f=l;d+=ti(r,f,true)}else if(s[9])d+=s[9];n=true}if(!n)d=a}break}}if(!mi(s.display))s.display="inline";if(d||'""'===a){if(""===h)h=/^(inline|table)/.test(s.display)?"span":"div";const n=function(e,t="span",i=-1){const s=document.createElement(t);if(s.className="__squared.pseudo",s.style.setProperty("display","none"),i>=0&&i<e.childNodes.length)e.insertBefore(s,e.childNodes[i]);else e.appendChild(s);return s}(e,h,"::before"===t?0:-1);if("img"===h){n.src=d;const e=this.resourceHandler.getImage(d);if(e){if(!mi(s.width)&&e.width>0)s.width=ii(e.width);if(!mi(s.height)&&e.height>0)s.height=ii(e.height)}}else if('""'!==a)n.innerText=d;for(const e in s)if("display"!==e)n.style[e]=s[e];return Ti(n,"pseudoElement",i,t),Ti(n,"styleMap",i,s),n}}}}createAssetOptions(e){let t=null==e?void 0:e.assets;if(t)t=this.layouts.concat(t);else t=this.layouts;return Object.assign(Object.assign({},e),{assets:t})}createLayoutControl(e,t){return new Qt(e,t,t.containerType,t.alignmentType,t.children)}setFloatPadding(e,t,i,s,n){let a=[];i.forEach(e=>{if(Fi(e)||e.centerAligned)a.push(e);if(e.blockStatic)a=a.concat(e.cascade(e=>Fi(e)))});const r=t.bounds.bottom,l=e.actualBoxWidth();if(s.length){let i=Number.NEGATIVE_INFINITY,n=0,o=false,c=false;if(s.forEach(e=>{if(e.bounds.top<r){const t=e.linear.right+Wi(e,false);if(t>i)i=t,c=e.marginRight>0;else if(t===i&&e.marginRight<=0)c=false}}),i!==Number.NEGATIVE_INFINITY)if(a.forEach(e=>{if(Math.floor(e.linear.left)<=i||e.centerAligned)n=Math.max(n,e.marginLeft),o=true}),o){const s=i-e.box.left-n-ci(t.map(e=>!a.includes(e)?e.marginLeft:0));if(s>0&&s<l)t.modifyBox(256,s+(!c&&t.find(e=>e.multiline,{cascade:true})?Math.max(n,this._controllerSettings.deviations.textMarginBoundarySize):0))}}if(n.length){let i=Number.POSITIVE_INFINITY,s=0,o=false,c=false;if(n.forEach(e=>{if(e.bounds.top<r){const t=e.linear.left+Wi(e,true);if(t<i)i=t,c=e.marginLeft>0;else if(t===i&&e.marginLeft<=0)c=false}}),i!==Number.POSITIVE_INFINITY)if(a.forEach(e=>{if(e.multiline||Math.ceil(e.linear.right)>=i)s=Math.max(s,e.marginRight),o=true}),o){const n=e.box.right-i-s-ci(t.map(e=>!a.includes(e)?e.marginRight:0));if(n>0&&n<l)t.modifyBox(64,n+(!c&&t.find(e=>e.multiline,{cascade:true})?Math.max(s,this._controllerSettings.deviations.textMarginBoundarySize):0))}}}get layouts(){return this._layouts.sort((e,t)=>{const i=e.index,s=t.index;if(i!==s)if(0===i||s===Number.POSITIVE_INFINITY||void 0===s&&!(i===Number.POSITIVE_INFINITY))return-1;else if(0===s||i===Number.POSITIVE_INFINITY||void 0===i&&!(s===Number.POSITIVE_INFINITY))return 1;else if(void 0!==i&&void 0!==s)return i<s?-1:1;return 0})}get clearMap(){return this.session.clearMap}get extensionsCascade(){return this.extensions.filter(e=>!!e.init)}get extensionsTraverse(){return this.extensions.filter(e=>!e.eventOnly)}get length(){return this.session.cache.length}},e.Controller=j,e.ControllerUI=class mr extends j{constructor(){super(...arguments),this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}init(){const e=this.localSettings.unsupported;this._unsupportedCascade=e.cascade,this._unsupportedTagName=e.tagName}reset(){this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}preventNodeCascade(e){return this._unsupportedCascade.has(e.tagName)}applyDefaultStyles(e){const t=this.sessionId;let i;if(qi(e))i={position:"static",display:"inline",verticalAlign:"baseline",float:"none",clear:"none"};else{i=ss(e,"styleMap",t)||{};const s=()=>{if(!Zi(i.border)&&a()){const e=this.localSettings.style.inputBorderColor;i.border="outset 1px "+e;for(let t=0;t<4;++t){const s=Xi[t];i[s[0]]="outset",i[s[1]]="1px",i[s[2]]=e}return true}return false},n=e=>{if(e){const e=i.backgroundColor;if(!Zi(e)||"initial"===e)i.backgroundColor=this.localSettings.style.inputBackgroundColor}if(!Zi(i.textAlign))i.textAlign="center";if(!Zi(i.padding)&&!Yi.some(e=>!!i[e]))i.paddingTop="2px",i.paddingRight="6px",i.paddingBottom="3px",i.paddingLeft="6px"},a=()=>!(Xi[0][0]in i||Xi[1][0]in i||Xi[2][0]in i||Xi[3][0]in i),r=e.tagName;if(Di(8))switch(r){case"BODY":if("rgba(0, 0, 0, 0)"===i.backgroundColor)i.backgroundColor="rgb(255, 255, 255)";break;case"INPUT":case"SELECT":case"BUTTON":case"TEXTAREA":if(!Zi(i.display))i.display="inline-block";break;case"FIELDSET":if(!Zi(i.display))i.display="block";break}else if(Hi())switch(r){case"BODY":if("transparent"===i.backgroundColor)i.backgroundColor="rgb(255, 255, 255)";break;case"INPUT":switch(e.type){case"text":case"password":case"time":case"date":case"datetime-local":case"week":case"month":case"url":case"email":case"search":case"number":case"tel":if(!Zi(i.fontSize))i.fontSize="13.3333px";break}break;case"CODE":if(!Zi(i.fontFamily))i.fontFamily="monospace";break;case"LEGEND":case"RT":if(!Zi(i.display))i.display="block";break}switch(r){case"INPUT":{const t=e.type;switch(t){case"radio":case"checkbox":case"image":break;case"week":case"month":case"time":case"date":case"datetime-local":i.paddingTop=Ui(Qi(i.paddingTop)+1),i.paddingRight=Ui(Qi(i.paddingRight)+1),i.paddingBottom=Ui(Qi(i.paddingBottom)+1),i.paddingLeft=Ui(Qi(i.paddingLeft)+1);break;default:{const e=s();switch(t){case"file":case"reset":case"submit":case"button":n(e);break}break}}break}case"BUTTON":n(s());break;case"TEXTAREA":case"SELECT":s();break;case"BODY":{const e=i.backgroundColor;if(!Zi(e)||"initial"===e)i.backgroundColor="rgb(255, 255, 255)";break}case"FORM":if(!Zi(i.marginTop))i.marginTop="0px";break;case"LI":if(!Zi(i.listStyleImage)){const t=zi(e);i.listStyleImage=t.getPropertyValue("list-style-image")}break;case"IFRAME":if(!Zi(i.display))i.display="block";case"VIDEO":case"CANVAS":case"svg":case"IMG":{const t=(t,s)=>{const n=i[t];if(!Zi(n)||"auto"===n){const n=new RegExp(`\\s+${t}="([^"]+)"`).exec(e.outerHTML);if(n){const e=n[1];if(Gi(e))i[t]=e+"px";else if(ji(e))i[t]=e}else if("IFRAME"===r)if("width"===t)i.width="300px";else i.height="150px";else{const n=i[s];if(n&&Gi(n)){const a="max"+Ki(t);if(!Zi(i[a])||!ji(a)){const a=this.application.resourceHandler.getImage(e.src);if(a&&a.width>0&&a.height>0)i[t]=Ui(a[t]*parseFloat(n)/a[s])}}}}};t("width","height"),t("height","width");break}}}ns(e,"styleMap",t,i)}addBeforeOutsideTemplate(e,t,i=true,s=-1){const n=ts(this._beforeOutside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addBeforeInsideTemplate(e,t,i=true,s=-1){const n=ts(this._beforeInside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addAfterInsideTemplate(e,t,i=true,s=-1){const n=ts(this._afterInside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addAfterOutsideTemplate(e,t,i=true,s=-1){const n=ts(this._afterOutside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}getBeforeOutsideTemplate(e,t){const i=this._beforeOutside[e];return i?rs(i,t):""}getBeforeInsideTemplate(e,t){const i=this._beforeInside[e];return i?rs(i,t):""}getAfterInsideTemplate(e,t){const i=this._afterInside[e];return i?rs(i,t):""}getAfterOutsideTemplate(e,t){const i=this._afterOutside[e];return i?rs(i,t):""}hasAppendProcessing(e){return void 0===e?this._requireFormat:e in this._beforeOutside||e in this._beforeInside||e in this._afterInside||e in this._afterOutside}includeElement(e){return!(this._unsupportedTagName.has(e.tagName)||"INPUT"===e.tagName&&this._unsupportedTagName.has(e.tagName+":"+e.type))||"true"===e.contentEditable}visibleElement(e,t){let i,s,n;if(t){const a=e.parentElement;i=a?zi(a,t):zi(e),s=1,n=1}else if(i=zi(e),"none"!==i.getPropertyValue("display")){const t=is(e,this.sessionId);if(!$i(t))return false;({width:s,height:n}=t)}else return false;if(s>0&&n>0)return"visible"===i.getPropertyValue("visibility")||!ls(i);else if(!t){if(es(e.children,e=>this.visibleElement(e))===Number.POSITIVE_INFINITY)return true;if("IMG"===e.tagName&&"none"!==i.getPropertyValue("display"))return true}if(!ls(i))return s>0&&"none"!==i.getPropertyValue("float")||!!t&&"none"!==i.getPropertyValue("clear")||"block"===i.getPropertyValue("display")&&(0!==os(i,"margin-top")||0!==os(i,"margin-bottom"));else return false}evaluateNonStatic(e,t){const i=new Set,s=new Set;t.each(t=>{if(!t.documentRoot&&!t.pageFlow){const n=t.parent;let a;switch(t.css("position")){case"fixed":if(!t.autoPosition){a=e;break}case"absolute":{const i=t.absoluteParent;if(i)if(a=i,t.autoPosition){if(!t.siblingsLeading.some(e=>e.multiline||e.excluded&&!e.blockStatic))t.cssApply({display:"inline-block",verticalAlign:"top"},true);else t.autoPosition=false;a=n}else if(this.userSettings.supportNegativeLeftTop){let s=false;while(a&&a!==e&&(!a.rightAligned&&!a.centerAligned||!a.pageFlow)){const e=a.linear;if(!s)if(t.hasPX("top")&&t.hasPX("bottom")||t.hasPX("left")&&t.hasPX("right"))break;else{const i="hidden"===a.css("overflowX"),n="hidden"===a.css("overflowY");if(i&&n)break;const r=!i&&t.outsideX(e),l=!n&&t.outsideY(e);if(r&&(t.left<0||t.right>0)||l&&(t.top<0||0!==t.bottom))s=true;else if(!i&&((t.left<0||t.right>0)&&Math.ceil(t.bounds.right)<e.left||(t.left>0||t.right<0)&&Math.floor(t.bounds.left)>e.right)&&a.some(e=>e.pageFlow))s=true;else if(!n&&((t.top<0||t.bottom>0)&&Math.ceil(t.bounds.bottom)<a.bounds.top||(t.top>0||t.bottom<0)&&Math.floor(t.bounds.top)>a.bounds.bottom))s=true;else if(r&&l&&(!a.pageFlow||a.actualParent.documentRoot)&&(t.top>0||t.left>0))s=true;else if(!(i||n||t.intersectX(e)||t.intersectY(e)))s=true;else break}else if(a.layoutElement){a=i;break}else if(t.withinX(e)&&t.withinY(e))break;a=a.actualParent}}break}}if(!a)a=e;if(a!==n){const e=t.absoluteParent;if((null==e?void 0:e.positionRelative)&&a!==e){const{left:i,right:s,top:n,bottom:a}=e,r=t.bounds;if(0!==i)r.left+=i,r.right+=i;else if(!e.hasPX("left")&&0!==s)r.left-=s,r.right-=s;if(0!==n)r.top+=n,r.bottom+=n;else if(!e.hasPX("top")&&0!==a)r.top-=a,r.bottom-=a;t.unset("box"),t.unset("linear")}let r=t.toFloat("opacity",1),l=n;do{r*=l.toFloat("opacity",1),l=l.actualParent}while(l&&l!==a);t.css("opacity",r.toString()),t.parent=a,t.containerIndex=Number.POSITIVE_INFINITY,i.add(a),s.add(n)}t.documentParent=a}});for(const e of s)e.each((e,t)=>e.containerIndex=t);for(const e of i){const t=[];let i=-1;e.each(s=>{if(s.containerIndex===Number.POSITIVE_INFINITY)e.some(e=>{let i=e.naturalElements.includes(s);if(!i){const t=e.cascade();i=s.ascend({condition:e=>t.includes(e)}).length>0}if(i)ts(t,e.containerIndex+(s.zIndex>=0||e!==s.actualParent?1:0)).push(s);return i});else if(s.containerIndex>i)i=s.containerIndex});const s=t.length;if(s){const n=e.children;for(let e=0,a=0,r=1;e<s;++e,++a){const s=t[e];if(s){s.sort((e,t)=>{if(e.parent===t.parent){const i=e.zIndex,s=t.zIndex;if(i===s)return e.id<t.id?-1:1;else return i<s?-1:1}return 0}).forEach(e=>e.containerIndex=i+r++);const e=n.length;for(let t=0;t<e;++t)if(s.includes(n[t]))n[t]=void 0;n.splice(a,0,...s),a+=s.length}}e.retain(Ji(n))}}}sortInitialCache(e){(e||this.cache).sort((e,t)=>{if(e.depth!==t.depth)return e.depth<t.depth?-1:1;else{const i=e.documentParent,s=t.documentParent;if(i!==s){const e=i.depth,t=s.depth;if(e!==t)return e<t?-1:1;else if(i.actualParent===s.actualParent)return i.childIndex<s.childIndex?-1:1;return i.id<s.id?-1:1}}return 0})}cascadeDocument(e,t){const i=this.userSettings.showAttributes,s="\t".repeat(t);let n="";const a=e.length;let r=0;while(r<a){const a=e[r++],l=a.node;switch(a.type){case 1:{const{controlName:e,attributes:r}=a,{id:o,renderTemplates:c}=l,h=t+1,d=l.depth<0?t+l.depth:t,u=this.getBeforeInsideTemplate(o,h),f=this.getAfterInsideTemplate(o,h);let g=s+"<"+e+(0===t?"{#0}":"")+(i?r?as(r,h):l.extractAttributes(h):"");if(c||""!==u||""!==f)g+=">\n"+u+(c?this.cascadeDocument(this.sortRenderPosition(l,c),h):"")+f+s+`</${e}>\n`;else g+=" />\n";n+=this.getBeforeOutsideTemplate(o,d)+g+this.getAfterOutsideTemplate(o,d);break}case 2:{const e=a.content;if(e)n+=as(e,t);break}}}return n}getEnclosingXmlTag(e,t="",i){return"<"+e+t+(i?`>\n${i}</${e}>\n`:" />\n")}get generateSessionId(){return(new Date).getTime().toString()}},e.Extension=q,e.ExtensionManager=class br{constructor(e){this.application=e}include(e){const t=this.application,i=t.extensions;let s=e.name;const n=i.findIndex(e=>e.name===s);if(-1!==n)return i[n]=e,true;else{const n=e.framework;if(n>0)e.dependencies.forEach(e=>{if(e.preload)if(s=e.name,null===this.retrieve(s)){const e=t.builtInExtensions[s];if(e)this.include(e)}});if((0===n||$(n,t.framework))&&e.dependencies.every(e=>!!this.retrieve(e.name)))return e.application=t,i.push(e),true}return false}exclude(e){const t=this.extensions,i=t.length;for(let s=0;s<i;++s)if(t[s]===e)return t.splice(s,1),true;return false}retrieve(e){const t=this.extensions,i=t.length;let s=0;while(s<i){const i=t[s++];if(i.name===e)return i}return null}optionValue(e,t){var i;const s=null===(i=this.retrieve(e))||void 0===i?void 0:i.options;return K(s)?s[t]:void 0}optionValueAsObject(e,t){const i=this.optionValue(e,t);return K(i)?i:null}optionValueAsString(e,t){const i=this.optionValue(e,t);return"string"==typeof i?i:""}optionValueAsNumber(e,t){const i=this.optionValue(e,t);return"number"==typeof i?i:NaN}optionValueAsBoolean(e,t){const i=this.optionValue(e,t);return"boolean"==typeof i?i:false}get extensions(){return this.application.extensions}},e.ExtensionUI=us,e.File=ee,e.FileUI=class xr extends ee{get directory(){return this.resource.controllerSettings.directory}},e.LayoutUI=Qt,e.Node=bt,e.NodeGroupUI=class yr extends $t{init(){var e;if(this.length)this.each(e=>e.parent=this),this.setBounds(),this.saveAsInitial(),this.dir=(null===(e=this.actualParent)||void 0===e?void 0:e.dir)||""}setBounds(){if(this.length)return this._bounds=$t.outerRegion(this),this._bounds}previousSiblings(e){var t;const i=((null===(t=this._initial)||void 0===t?void 0:t.children)||this.children)[0];return(null==i?void 0:i.previousSiblings(e))||[]}nextSiblings(e){var t;const i=(null===(t=this._initial)||void 0===t?void 0:t.children)||this.children,s=i[i.length-1];return(null==s?void 0:s.nextSiblings(e))||[]}get block(){let e=this._cached.block;if(void 0===e)e=this.some(e=>e.block),this._cached.block=e;return e}get blockStatic(){let e=this._cached.blockStatic;if(void 0===e){const t=this.actualParent||this.documentParent;if(e=this.some(e=>e.blockStatic||e.percentWidth>0)||t.percentWidth>0||this.layoutVertical&&(t.hasWidth||this.some(e=>e.centerAligned||e.rightAligned))||t.blockStatic&&(t.layoutVertical||this.hasAlign(256)),e||0!==this.containerType)this._cached.blockStatic=e}return e||this.hasAlign(64)}get blockDimension(){let e=this._cached.blockDimension;if(void 0===e)e=this.every(e=>e.blockDimension),this._cached.blockDimension=e;return e}get blockVertical(){let e=this._cached.blockVertical;if(void 0===e)e=this.every(e=>e.blockVertical),this._cached.blockVertical=e;return e}get inline(){let e=this._cached.inline;if(void 0===e)e=this.every(e=>e.inline),this._cached.inline=e;return e&&!this.hasAlign(64)}get inlineStatic(){let e=this._cached.inlineStatic;if(void 0===e)e=this.every(e=>e.inlineStatic),this._cached.inlineStatic=e;return e&&!this.hasAlign(64)}get inlineVertical(){let e=this._cached.inlineVertical;if(void 0===e)e=this.every(e=>e.inlineVertical),this._cached.inlineVertical=e;return e&&!this.hasAlign(64)}get inlineFlow(){let e=this._cached.inlineFlow;if(void 0===e)e=this.every(e=>e.inlineFlow),this._cached.inlineFlow=e;return e&&!this.hasAlign(64)}get inlineDimension(){let e=this._cached.inlineDimension;if(void 0===e)e=this.every(e=>e.inlineDimension),this._cached.inlineDimension=e;return e&&!this.hasAlign(64)}get pageFlow(){let e=this._cached.pageFlow;if(void 0===e){const t=this.css("position");e="absolute"!==t&&"fixed"!==t,this._cached.pageFlow=e}return e}set baseline(e){this._cached.baseline=e}get baseline(){let e=this._cached.baseline;if(void 0===e){const t=this.cssInitial("verticalAlign",true);if(""===t)e=this.every(e=>e.baseline);else e="baseline"===t||fs(t,true);this._cached.baseline=e}return e}get float(){let e=this._cached.float;if(void 0===e){if(this.floating)if(this.hasAlign(2048))e="right";else if(this.every(e=>"right"===e.float))this.addAlign(2048),e="right";else e="left";else e="none";this._cached.float=e}return e}get floating(){let e=this._cached.floating;if(void 0===e)e=this.every(e=>e.floating||e.hasAlign(512)),this._cached.floating=e;return e}get display(){return super.display||(this.some(e=>e.blockStatic)?"block":this.blockDimension?"inline-block":"inline")}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}set childIndex(e){super.childIndex=e}get childIndex(){let e=super.childIndex;if(e===Number.POSITIVE_INFINITY)this.each(t=>e=Math.min(t.childIndex,e)),super.childIndex=e;return e}set containerIndex(e){super.containerIndex=e}get containerIndex(){let e=super.containerIndex;if(e===Number.POSITIVE_INFINITY)this.each(t=>e=Math.min(t.containerIndex,e)),super.containerIndex=e;return e}get centerAligned(){let e=this._cached.centerAligned;if(void 0===e)e=this.every(e=>e.centerAligned),this._cached.centerAligned=e;return e}get rightAligned(){let e=this._cached.rightAligned;if(void 0===e)e=this.every(e=>e.rightAligned),this._cached.rightAligned=e;return e||this.hasAlign(2048)}get tagName(){return""}get plainText(){return false}get styleText(){return false}get multiline(){return false}get nodeGroup(){return true}get naturalChild(){return false}get naturalElement(){return false}get pseudoElement(){return false}get previousSibling(){return null}get nextSibling(){return null}get previousElementSibling(){return null}get nextElementSibling(){return null}},e.NodeList=t,e.NodeUI=$t,e.Resource=h,e.ResourceUI=pn,e.extensions=lr,e.lib=gr,Object.defineProperty(e,"__esModule",{value:true})}));
var android=function(){"use strict";class e extends squared.base.ApplicationUI{set viewModel(e){this._viewModel=e}get viewModel(){return this._viewModel}}var t;!function(e){e[e.RADIO=1]="RADIO",e[e.CHECKBOX=2]="CHECKBOX",e[e.SELECT=3]="SELECT",e[e.SVG=4]="SVG",e[e.IMAGE=5]="IMAGE",e[e.BUTTON=6]="BUTTON",e[e.PROGRESS=7]="PROGRESS",e[e.RANGE=8]="RANGE",e[e.EDIT=9]="EDIT",e[e.TEXT=10]="TEXT",e[e.INLINE=11]="INLINE",e[e.LINE=12]="LINE",e[e.SPACE=13]="SPACE",e[e.BLOCK=14]="BLOCK",e[e.FRAME=15]="FRAME",e[e.LINEAR=16]="LINEAR",e[e.GRID=17]="GRID",e[e.RELATIVE=18]="RELATIVE",e[e.CONSTRAINT=19]="CONSTRAINT",e[e.WEBVIEW=20]="WEBVIEW",e[e.VIDEOVIEW=21]="VIDEOVIEW",e[e.UNKNOWN=22]="UNKNOWN"}(t||(t={}));var i=Object.freeze({__proto__:null,get CONTAINER_NODE(){return t}});const a={EXTERNAL:"android.external",SUBSTITUTE:"android.substitute",DELEGATE_BACKGROUND:"android.delegate.background",DELEGATE_CSS_GRID:"android.delegate.css-grid",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_POSITIVEX:"android.delegate.positive-x",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_DATA:"android.resource.data",RESOURCE_STYLES:"android.resource.styles"},n={RADIO:"RadioButton",CHECKBOX:"CheckBox",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",EDIT:"EditText",SVG:"ImageView",IMAGE:"ImageView",BUTTON:"Button",RANGE:"SeekBar",METER:"ProgressBar",PROGRESS:"ProgressBar",TEXT:"TextView",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",VIDEOVIEW:"VideoView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},o={VERTICAL_SCROLL:"androidx.core.widget.NestedScrollView",CONSTRAINT:"androidx.constraintlayout.widget.ConstraintLayout",GUIDELINE:"androidx.constraintlayout.widget.Guideline",BARRIER:"androidx.constraintlayout.widget.Barrier"},r={DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},s={DRAWER:"androidx.drawerlayout.widget.DrawerLayout",NAVIGATION_VIEW:"com.google.android.material.navigation.NavigationView",COORDINATOR:"androidx.coordinatorlayout.widget.CoordinatorLayout",APPBAR:"com.google.android.material.appbar.AppBarLayout",COLLAPSING_TOOLBAR:"com.google.android.material.appbar.CollapsingToolbarLayout",TOOLBAR:"androidx.appcompat.widget.Toolbar",FLOATING_ACTION_BUTTON:"com.google.android.material.floatingactionbutton.FloatingActionButton",BOTTOM_NAVIGATION:"com.google.android.material.bottomnavigation.BottomNavigationView"},l={PLAINTEXT:t.TEXT,HR:t.LINE,SVG:t.SVG,IMG:t.IMAGE,BUTTON:t.BUTTON,SELECT:t.SELECT,TEXTAREA:t.EDIT,METER:t.PROGRESS,PROGRESS:t.PROGRESS,AUDIO:t.VIDEOVIEW,VIDEO:t.VIDEOVIEW,IFRAME:t.WEBVIEW,INPUT_RANGE:t.RANGE,INPUT_TEXT:t.EDIT,INPUT_PASSWORD:t.EDIT,INPUT_NUMBER:t.EDIT,INPUT_EMAIL:t.EDIT,INPUT_SEARCH:t.EDIT,INPUT_URL:t.EDIT,INPUT_DATE:t.EDIT,INPUT_TEL:t.EDIT,INPUT_TIME:t.EDIT,INPUT_WEEK:t.EDIT,INPUT_MONTH:t.EDIT,INPUT_BUTTON:t.BUTTON,INPUT_FILE:t.BUTTON,INPUT_IMAGE:t.BUTTON,INPUT_COLOR:t.BUTTON,INPUT_SUBMIT:t.BUTTON,INPUT_RESET:t.BUTTON,INPUT_CHECKBOX:t.CHECKBOX,INPUT_RADIO:t.RADIO,INPUT_DATETIME_LOCAL:t.EDIT},c={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},h={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},d={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},f={left:"start",right:"end",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toLeftOf:"layout_toStartOf",layout_toRightOf:"layout_toEndOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},u=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var p=Object.freeze({__proto__:null,EXT_ANDROID:a,CONTAINER_ANDROID:n,CONTAINER_ANDROID_X:o,SUPPORT_ANDROID:r,SUPPORT_ANDROID_X:s,ELEMENT_ANDROID:l,LAYOUT_ANDROID:c,XMLNS_ANDROID:h,STRING_ANDROID:d,LOCALIZE_ANDROID:f,RESERVED_JAVA:u});const g=squared.lib,{findColorShade:m,parseColor:y}=g.color,{extractURL:b,getSrcSet:T}=g.css,{CHAR:E,COMPONENT:S,FILE:A,XML:v}=g.regex,{fromLastIndexOf:x,hasMimeType:w,isNumber:_,isPlainObject:N,isString:I,randomUUID:R,resolvePath:C,safeNestedArray:L,spliceArray:k,trimString:P}=g.util,O=squared.base.ResourceUI.STORED,D=/[^\w+]/g;let M={};function W(e,t=false){var i;if(e)for(const a in e)if(N(e[a]))W(e,t);else{let n=null===(i=e[a])||void 0===i?void 0:i.toString();if(n){switch(a){case"text":if(n.startsWith("@string/"))continue;if(n=B.addString(n,"",t),""!==n)e[a]="@string/"+n;break;case"src":case"srcCompat":if(S.PROTOCOL.test(n))if(n=B.addImage({mdpi:n}),""!==n)e[a]="@drawable/"+n;continue}const i=y(n);if(i){const t=B.addColor(i);if(""!==t)e[a]="@color/"+t}}}}class B extends squared.base.ResourceUI{constructor(e,t){super(),this.application=e,this.cache=t,O.styles=new Map,O.themes=new Map,O.dimens=new Map,O.drawables=new Map,O.animators=new Map,this.controllerSettings=e.controllerHandler.localSettings;const i=this.controllerSettings.mimeType.image;if("*"!==i)this._imageFormat=k(i.slice(0),e=>"image/svg+xml"===e)}static formatOptions(e,t=false){for(const i in e){const a=e[i];if(N(a))W(a,t)}return e}static formatName(e){if(E.LEADINGNUMBER.test(e))e="__"+e;return e.replace(D,"_")}static addTheme(e,t="res/values",i="themes.xml"){const a=O.themes,{items:n,output:o}=e;if(o){if(I(o.path))t=o.path.trim();if(I(o.file))i=o.file.trim()}const r=P(t,"/")+"/"+P(i,"/"),s=a.get(r)||new Map;let l=e.name,c="";if(""===l||"."===l.charAt(0)){e:for(const e of a.values())for(const t of e.values())if(t.name){c=t.name;break e}if(""===c)return false}else c=l;l=c+("."===l.charAt(0)?l:""),e.name=l,B.formatOptions(n);const h=s.get(l);if(h){const e=h.items;for(const t in n)e[t]=n[t]}else s.set(l,e);return a.set(r,s),true}static addString(e,t="",i=false){if(""!==e){if(""===t)t=e.trim();const a=_(e);if(!a||i){const i=O.strings;for(const[t,a]of i.entries())if(a===e)return t;const n=P(t.replace(v.NONWORD_G,"_"),"_").split(/_+/);if(n.length>1){if(n.length>4)n.length=4;t=n.join("_")}else t=n[0];if(t=t.toLowerCase(),a||E.LEADINGNUMBER.test(t)||u.includes(t))t="__"+t;else if(""===t)t="__symbol"+Math.ceil(1e5*Math.random());if(i.has(t))t=B.generateId("string",t);i.set(t,e)}return t}return""}static addImage(e,t="",i){const a=e.mdpi;if(a){if(1===Object.keys(e).length){const e=M[a];if(e)return e}const n=x(a,"/");if(!i||w(i,n)){const i=B.insertStoredAsset("images",B.formatName(t+n.substring(0,n.length-x(n,".").length-1)).toLowerCase(),e);return M[a]=i,i}}return""}static addColor(e,t=false){if("string"==typeof e)e=y(e,1,t);if(e&&(!e.transparent||t)){const t=e.opacity<1?e.valueAsARGB:e.value;let i=O.colors.get(t);if(i)return i;const a=m(e.value);if(a)return i=t===a.value?a.key:B.generateId("color",a.key),O.colors.set(t,i),i}return""}reset(){super.reset(),M={}}addImageSrc(e,t="",i){const a={};let n;if("string"==typeof e){if(n=b(e),""!==n&&!n.startsWith("data:image/"))return this.addImageSet({mdpi:C(n)},t)}else{if(e.srcset)(i||T(e,this._imageFormat)).forEach(e=>{const t=e.pixelRatio;if(t>0){const i=e.src;if(t<1)a.ldpi=i;else if(1===t){if(!n||e.actualWidth)n=i}else if(t<=1.5)a.hdpi=i;else if(t<=2)a.xhdpi=i;else if(t<=3)a.xxhdpi=i;else a.xxxhdpi=i}});if(!n)n=e.src}if(n){const e=this.application.resourceHandler;a.mdpi=n;const i=e.getRawData(n);if(i){const{base64:a,filename:n}=i;if(a)if(A.SVG.test(n))return"";else return e.writeRawImage(t+n,a),n.substring(0,n.lastIndexOf("."))}}return this.addImageSet(a,t)}addImageSet(e,t){return B.addImage(e,t,this._imageFormat)}writeRawImage(e,t){const i=super.writeRawImage(e,t);if(i&&this.userSettings.compressImages&&B.canCompressImage(e))L(i,"compress").unshift({format:"png"});return i}get randomUUID(){return"__"+R("_")}get userSettings(){return this.application.userSettings}}const{isString:X}=squared.lib.util;function G(e,t,i,a=0){if(!i||i>=a)return e.attr=t,true;else return false}const H={29:{android:{},assign:{}},28:{android:{allowAudioPlaybackCapture:false,enforceNavigationBarContrast:false,enforceStatusBarContrast:false,forceDarkAllowed:false,forceUriPermissions:false,foregroundServiceType:false,hasFragileUserData:false,identifier:false,inheritShowWhenLocked:false,interactiveUiTimeout:false,isLightTheme:false,isSplitRequired:false,minAspectRatio:false,nonInteractiveUiTimeout:false,opticalInsetBottom:false,opticalInsetLeft:false,opticalInsetRight:false,opticalInsetTop:false,packageType:false,requestLegacyExternalStorage:false,secureElementName:false,selectionDividerHeight:false,settingsSliceUri:false,shell:false,supportsMultipleDisplays:false,textLocale:false,useAppZygote:false,useEmbeddedDex:false,zygotePreloadName:false},assign:{}},27:{android:{accessibilityHeading:false,accessibilityPaneTitle:false,appComponentFactory:false,buttonCornerRadius:false,cantSaveState:false,dialogCornerRadius:false,fallbackLineSpacing:false,firstBaselineToTopHeight:false,fontVariationSettings:false,lastBaselineToBottomHeight:false,lineHeight:false,maxLongVersionCode:false,outlineAmbientShadowColor:false,outlineSpotShadowColor:false,screenReaderFocusable:false,textFontWeight:false,ttcIndex:false,versionCodeMajor:false,versionMajor:false,widgetFeatures:false,windowLayoutInDisplayCutoutMode:false},assign:{}},26:{android:{classLoader:false,navigationBarDividerColor:false,showWhenLocked:false,turnScreenOn:false,windowLightNavigationBar:false},assign:{}},25:{android:{fontWeight:false,justificationMode:false,layout_marginHorizontal:false,layout_marginVertical:false,paddingHorizontal:false,paddingVertical:false,tooltipText:false},assign:{}},24:{android:{colorSecondary:false,contextDescription:false,contextUri:false,roundIcon:false,shortcutDisabledMessage:false,shortcutId:false,shortcutLongLabel:false,shortcutShortLabel:false,showMetadataInPreview:false},assign:{}},23:{android:{backupInForeground:false,bitmap:false,buttonGravity:false,canControlMagnification:false,canPerformGestures:false,canRecord:false,collapseIcon:false,contentInsetEndWithActions:false,contentInsetStartWithNavigation:false,contextPopupMenuStyle:false,countDown:false,defaultHeight:false,defaultToDeviceProtectedStorage:false,defaultWidth:false,directBootAware:false,enableVrMode:false,endX:false,endY:false,externalService:false,fillType:false,forceHasOverlappingRendering:false,hotSpotX:false,hotSpotY:false,languageTag:false,level:false,listMenuViewStyle:false,maxButtonHeight:false,networkSecurityConfig:false,numberPickerStyle:false,offset:false,pointerIcon:false,popupEnterTransition:false,popupExitTransition:false,preferenceFragmentStyle:false,resizeableActivity:false,startX:false,startY:false,subMenuArrow:false,supportsLocalInteraction:false,supportsPictureInPicture:false,textAppearancePopupMenuHeader:false,tickMark:false,tickMarkTint:false,tickMarkTintMode:false,titleMargin:false,titleMarginBottom:false,titleMarginEnd:false,titleMarginStart:false,titleMarginTop:false,tunerCount:false,use32bitAbi:false,version:false,windowBackgroundFallback:false},assign:{}},22:{android:{allowUndo:false,autoVerify:false,breakStrategy:false,colorBackgroundFloating:false,contextClickable:false,drawableTint:false,drawableTintMode:false,end:e=>G(e,"right"),extractNativeLibs:false,fingerprintAuthDrawable:false,fraction:false,fullBackupContent:false,hyphenationFrequency:false,lockTaskMode:false,logoDescription:false,numbersInnerTextColor:false,scrollIndicators:false,showForAllUsers:false,start:e=>G(e,"left"),subtitleTextColor:false,supportsAssist:false,supportsLaunchVoiceAssistFromKeyguard:false,thumbPosition:false,titleTextColor:false,trackTint:false,trackTintMode:false,usesCleartextTraffic:false,windowLightStatusBar:false},assign:{}},21:{android:{accessibilityTraversalAfter:false,accessibilityTraversalBefore:false,collapseContentDescription:false,dialogPreferredPadding:false,resizeClip:false,revisionCode:false,searchHintIcon:false},assign:{}},20:{android:{actionBarPopupTheme:false,actionBarTheme:false,actionModeFindDrawable:false,actionModeShareDrawable:false,actionModeWebSearchDrawable:false,actionOverflowMenuStyle:false,amPmBackgroundColor:false,amPmTextColor:false,ambientShadowAlpha:false,autoRemoveFromRecents:false,backgroundTint:false,backgroundTintMode:false,banner:false,buttonBarNegativeButtonStyle:false,buttonBarNeutralButtonStyle:false,buttonBarPositiveButtonStyle:false,buttonTint:false,buttonTintMode:false,calendarTextColor:false,checkMarkTint:false,checkMarkTintMode:false,closeIcon:false,colorAccent:false,colorButtonNormal:false,colorControlActivated:false,colorControlHighlight:false,colorControlNormal:false,colorEdgeEffect:false,colorPrimary:false,colorPrimaryDark:false,commitIcon:false,contentAgeHint:false,contentInsetEnd:false,contentInsetLeft:false,contentInsetRight:false,contentInsetStart:false,controlX1:false,controlX2:false,controlY1:false,controlY2:false,country:false,datePickerDialogTheme:false,datePickerMode:false,dayOfWeekBackground:false,dayOfWeekTextAppearance:false,documentLaunchMode:false,elegantTextHeight:false,elevation:false,excludeClass:false,excludeId:false,excludeName:false,fastScrollStyle:false,fillAlpha:false,fillColor:false,fontFeatureSettings:false,foregroundTint:false,foregroundTintMode:false,fragmentAllowEnterTransitionOverlap:false,fragmentAllowReturnTransitionOverlap:false,fragmentEnterTransition:false,fragmentExitTransition:false,fragmentReenterTransition:false,fragmentReturnTransition:false,fragmentSharedElementEnterTransition:false,fragmentSharedElementReturnTransition:false,fromId:false,fullBackupOnly:false,goIcon:false,headerAmPmTextAppearance:false,headerDayOfMonthTextAppearance:false,headerMonthTextAppearance:false,headerTimeTextAppearance:false,headerYearTextAppearance:false,hideOnContentScroll:false,indeterminateTint:false,indeterminateTintMode:false,inset:false,isGame:false,launchTaskBehindSourceAnimation:false,launchTaskBehindTargetAnimation:false,layout_columnWeight:false,layout_rowWeight:false,letterSpacing:false,matchOrder:false,maxRecentsv:false,maximumAngle:false,minimumHorizontalAngle:false,minimumVerticalAngle:false,multiArch:false,navigationBarColor:false,navigationContentDescription:false,navigationIcon:false,nestedScrollingEnabled:false,numbersBackgroundColor:false,numbersSelectorColor:false,numbersTextColor:false,outlineProvider:false,overlapAnchor:false,paddingMode:false,pathData:false,patternPathData:false,persistableMode:false,popupElevation:false,popupTheme:false,progressBackgroundTint:false,progressBackgroundTintMode:false,progressTint:false,progressTintMode:false,propertyXName:false,propertyYName:false,queryBackground:false,recognitionService:false,relinquishTaskIdentity:false,reparent:false,reparentWithOverlay:false,restrictionType:false,resumeWhilePausing:false,reversible:false,searchIcon:false,searchViewStyle:false,secondaryProgressTint:false,secondaryProgressTintMode:false,selectableItemBackgroundBorderless:false,sessionService:false,setupActivity:false,showText:false,slideEdge:false,splitTrack:false,spotShadowAlpha:false,src:(e,t,i)=>{if(i.svgElement)e.obj="app",e.attr="srcCompat";return true},stackViewStyle:false,stateListAnimator:false,statusBarColor:false,strokeAlpha:false,strokeColor:false,strokeLineCap:false,strokeLineJoin:false,strokeMiterLimit:false,strokeWidth:false,submitBackground:false,subtitleTextAppearance:false,suggestionRowLayout:false,switchStyle:false,targetName:false,textAppearanceListItemSecondary:false,thumbTint:false,thumbTintMode:false,tileModeX:false,tileModeY:false,timePickerDialogTheme:false,timePickerMode:false,timePickerStyle:false,tintMode:false,titleTextAppearance:false,toId:false,toolbarStyle:false,touchscreenBlocksFocus:false,transitionGroup:false,transitionName:false,transitionVisibilityMode:false,translateX:false,translateY:false,translationZ:false,trimPathEnd:false,trimPathOffset:false,trimPathStart:false,viewportHeight:false,viewportWidth:false,voiceIcon:false,windowActivityTransitions:false,windowAllowEnterTransitionOverlap:false,windowAllowReturnTransitionOverlap:false,windowClipToOutline:false,windowContentTransitionManager:false,windowContentTransitions:false,windowDrawsSystemBarBackgrounds:false,windowElevation:false,windowEnterTransition:false,windowExitTransition:false,windowReenterTransition:false,windowReturnTransition:false,windowSharedElementEnterTransition:false,windowSharedElementExitTransition:false,windowSharedElementReenterTransition:false,windowSharedElementReturnTransition:false,windowSharedElementsUseOverlay:false,windowTransitionBackgroundFadeDuration:false,yearListItemTextAppearance:false,yearListSelectorColor:false},assign:{}},19:{android:{allowEmbedded:false,windowSwipeToDismiss:false},assign:{}},18:{android:{accessibilityLiveRegion:false,addPrintersActivity:false,advancedPrintOptionsActivity:false,apduServiceBanner:false,autoMirrored:false,category:false,fadingMode:false,fromScene:false,isAsciiCapable:false,keySet:false,requireDeviceUnlock:false,ssp:false,sspPattern:false,sspPrefix:false,startDelay:false,supportsSwitchingToNextInputMethod:false,targetId:false,toScene:false,transition:false,transitionOrdering:false,vendor:false,windowTranslucentNavigation:false,windowTranslucentStatus:false},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(e,t)=>t<26,canRequestFilterKeyEvents:false,canRequestTouchExplorationMode:false,childIndicatorEnd:false,childIndicatorStart:false,indicatorEnd:false,indicatorStart:false,layoutMode:false,mipMap:false,mirrorForRtl:false,requiredAccountType:false,requiredForAllUsers:false,restrictedAccountType:false,windowOverscan:false},assign:{}},16:{android:{checkedTextViewStyle:false,format12Hour:false,format24Hour:false,initialKeyguardLayout:false,labelFor:false,layoutDirection:false,layout_alignEnd:e=>G(e,"layout_alignRight"),layout_alignParentEnd:e=>G(e,"layout_alignParentRight"),layout_alignParentStart:e=>G(e,"layout_alignParentLeft"),layout_alignStart:e=>G(e,"layout_alignLeft"),layout_marginEnd:e=>G(e,"layout_marginRight"),layout_marginStart:e=>G(e,"layout_marginLeft"),layout_toEndOf:e=>G(e,"layout_toRightOf"),layout_toStartOf:e=>G(e,"layout_toLeftOf"),listPreferredItemPaddingEnd:e=>G(e,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:e=>G(e,"listPreferredItemPaddingLeft"),paddingEnd:e=>G(e,d.PADDING_RIGHT),paddingStart:e=>G(e,d.PADDING_LEFT),permissionFlags:false,permissionGroupFlags:false,presentationTheme:false,showOnLockScreen:false,singleUser:false,subtypeId:false,supportsRtl:false,textAlignment:false,textDirection:false,timeZone:false,widgetCategory:false},assign:{}},15:{android:{fontFamily:false,importantForAccessibility:false,isolatedProcess:false,keyboardLayout:false,mediaRouteButtonStyle:false,mediaRouteTypes:false,parentActivityName:false},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},V={android:{amPmBackgroundColor:(e,t)=>G(e,"headerBackground",t,23),amPmTextColor:(e,t)=>G(e,"headerTextColor",t,23),animationResolution:(e,t)=>t<16,canRequestEnhancedWebAccessibility:(e,t)=>t<26,dayOfWeekBackground:(e,t)=>t<23,dayOfWeekTextAppearance:(e,t)=>t<23,directionDescriptions:(e,t)=>t<23,headerAmPmTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),headerDayOfMonthTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),headerMonthTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),headerTimeTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),headerYearTextAppearance:(e,t)=>G(e,"headerTextColor",t,23),showOnLockScreen:(e,t)=>G(e,"showForAllUsers",t,23),targetDescriptions:(e,t)=>t<23,yearListItemTextAppearance:(e,t)=>G(e,"yearListTextColor",t,23),yearListSelectorColor:(e,t)=>t<23}};var F=Object.freeze({__proto__:null,API_ANDROID:H,DEPRECATED_ANDROID:V,getValue:function(e,t,i,a){var n,o;for(const r of[H[e],H[0]]){const e=null===(o=null===(n=r.assign[t])||void 0===n?void 0:n[i])||void 0===o?void 0:o[a];if(X(e))return e}return""}});const z=squared.lib,{truncate:U}=z.math,{capitalize:q,isPlainObject:Y}=z.util,{BOX_STANDARD:j}=squared.base.lib.enumeration,K=/^@\+?id\//;function $(e,t,i=3){if(0===e)return 0;else if(0===t)return 1;return parseFloat(U(Math.max(e/(e+t),0),i))}function Z(e,t=false,i=3){if("string"==typeof e)e=parseFloat(e)||0;return!t?Math.round(e)+"dp":U(e,i)+"sp"}function J(e){return e.replace(K,"")}function Q(e){switch(e){case"left":case"start":case"right":case"end":case"center_horizontal":return true}return false}function ee(e){switch(e){case"top":case"bottom":case"center_vertical":return true}return false}function te(e,t){const i={};let a=false;for(const n in e)if(n.startsWith(t))i[q(n.substring(t.length),false)]=e[n],a=true;return a?i:void 0}function ie(e,t,i){if(i>0){if(e.documentBody)switch(t){case 32:if(0===e.getBox(2)[0])i-=e.marginTop;break;case 64:i-=e.marginRight;break;case 128:if(0===e.getBox(8)[0])i-=e.marginBottom;break;case 256:i-=e.marginLeft;break}if(0===e.getBox(t)[0])switch(t){case 32:i+=e.borderTopWidth-e.paddingTop;break;case 64:i+=e.borderRightWidth-e.paddingRight;break;case 128:i+=e.borderBottomWidth-e.paddingBottom;break;case 256:i+=e.borderLeftWidth-e.paddingLeft;break}return Math.max(i,0)}else if(i<0){switch(t){case 32:i+=e.marginTop;break;case 64:i+=e.marginRight;break;case 128:i+=e.marginBottom;break;case 256:i+=e.marginLeft;break}return i}return 0}function ae(e,t){if(!t)t={android:{}};else if(!t.android)t.android={};if(e){const{android:i,app:a}=e;if(i)Object.assign(t.android,i);if(a){if(!t.app)t.app={};Object.assign(t.app,a)}}return t}function ne(e){const t={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(Y(e))for(const i in t)if(typeof e[i]==typeof t[i])t[i]=e[i];return t}function oe(e,t,i){return t&&i>=17&&f[e]||e}function re(e){return h[e]?`xmlns:${e}="${h[e]}"`:""}function se(e){let t="";for(const i in h)if(e.includes(i+":"))t+="\n\t"+re(i);return t}var le=Object.freeze({__proto__:null,convertLength:Z,getDocumentId:J,isHorizontalAlign:Q,isVerticalAlign:ee,getDataSet:te,getHorizontalBias:function(e){const t=e.documentParent.box;return $(Math.max(0,e.actualRect("left","bounds")-t.left),Math.max(0,t.right-e.actualRect("right","bounds")),e.localSettings.floatPrecision)},getVerticalBias:function(e){const t=e.documentParent.box;return $(Math.max(0,e.actualRect("top","bounds")-t.top),Math.max(0,t.bottom-e.actualRect("bottom","bounds")),e.localSettings.floatPrecision)},adjustAbsolutePaddingOffset:ie,createViewAttribute:ae,createStyleAttribute:ne,localizeString:oe,getXmlNs:re,getRootNs:se});const{lib:ce,base:he}=squared,{BOX_MARGIN:de,BOX_PADDING:fe,CSS_UNIT:ue,formatPX:pe,isLength:ge,isPercent:me}=ce.css,{createElement:ye,getNamedItem:be,newBoxModel:Te}=ce.dom,{clamp:Ee,truncate:Se}=ce.math,{actualTextRangeRect:Ae}=ce.session,{capitalize:ve,convertFloat:xe,convertInt:we,convertWord:_e,fromLastIndexOf:Ne,isNumber:Ie,isPlainObject:Re,isString:Ce,replaceMap:Le}=ce.util,{EXT_NAME:ke}=he.lib.constant,{BOX_STANDARD:Pe,NODE_ALIGNMENT:Oe,NODE_PROCEDURE:De}=he.lib.enumeration,Me=he.ResourceUI,{constraint:We,relative:Be,relativeParent:Xe}=c,Ge=V.android,He=/^attr[A-Z]/,Ve=/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/,Fe=/[^\w$\-_.]/g,ze=/^rect\(0[a-z]*,\s+0[a-z]*,\s+0[a-z]*,\s+0[a-z]*\)$/;function Ue(e,t){switch(e){case"left":case"start":return!t?e:"";case"center":return"center_horizontal";case"justify":case"initial":case"inherit":return""}return e}function qe(e,t){if(t.horizontal&&(!e.blockWidth||e.hasWidth||e.hasPX("maxWidth")||e.innerMostWrapped.has("width",{type:4,not:"100%"})))return e.mergeGravity((e.blockWidth||!e.pageFlow)&&!e.outerWrapper?"gravity":"layout_gravity",t.leftRight?"center_horizontal":t.left?"right":"left"),true;else return false}function Ye(e,t,i){const a=Ze(e,t);if(e.api>=28)e.android("lineHeight",pe(t),i);else if(a>0)e.android("lineSpacingExtra",pe(a),i);else return;const n=Math.round(a);if(n>0)if(e.modifyBox(e.inline?2:32,n),!(e.block&&!e.floating))e.modifyBox(e.inline?8:128,Math.floor(a))}function je(e,t,i,a,n){const o=e.cssInitial("lineHeight");if(!e.imageOrSvgElement&&!e.renderChildren.length&&0!==e.actualHeight&&"initial"!==o)if(e.multiline)Ye(e,t,false);else{const r=e.height,s=(s,l=false)=>{let c=Math.round(s);if(c>0){const h=(i||r>t)&&(e.styleText||l)&&!e.inline&&!(e.inputElement&&!ge(o,true));if(a)if(h){if(c>0)e.modifyBox(32,c)}else if(i||!e.baselineAltered)if(c-=e.paddingTop,c>0)e.modifyBox(2,c);if(n)if(s=Math.floor(s),h){if(s>0)e.modifyBox(128,s)}else if((s-=e.paddingBottom)>0)e.modifyBox(8,s)}};if(t===r)e.mergeGravity("gravity","center_vertical",false);else if(r>0)if(e.styleText)s(Ze(e,t));else{const i=t/2-e.paddingTop;if(i>0)e.modifyBox(32,i)}else if(e.textElement)s(Ze(e,t));else if(e.inputElement){const i=ye(document.body,"div",Object.assign(Object.assign({},e.textStyle),{visibility:"hidden"}));i.innerText="AgjpyZ";const a=Ae(i).height;document.body.removeChild(i);let n=1;switch(e.tagName){case"SELECT":n=e.toElementInt("size",1);break;case"TEXTAREA":n=e.toElementInt("rows",1);break}s((t-a*Math.max(n,1))/2,true)}else s((t-e.bounds.height)/2)}}function Ke(e,t){if("0px"===t){const t=e.renderParent;return!!t&&(t.layoutConstraint||t.layoutGrid)}return false}function $e(e,t){const i=e+"_horizontal",a=e+"_vertical";if(t.has(e)||t.has(i)&&t.has(a))t.delete(i),t.delete(a),t.add(e)}function Ze(e,t){let i=NaN;if(e.styleText){const t=e.cssTryAll({display:"inline-block",height:"auto","max-height":"none","min-height":"auto","line-height":"normal","white-space":"nowrap"});if(t)i=Ae(e.element).height,e.cssFinally(t)}else if(e.plainText){const t=e.bounds;i=t.height/(t.numberOfLines||1)}return(t-(!isNaN(i)?i:e.boundingClientRect.height))/2}function Je(e,t){if(e.support.maxDimension&&(t&&e.floating||!t))return;if(!e.hasPX(t?"width":"height",false)){const i=e.cssInitial(t?"minWidth":"minHeight",true);if(ge(i,true)&&parseFloat(i)>0)if(t){if(nt(e))if(e.setLayoutWidth("0px",false),e.flexibleWidth)e.app("layout_constraintWidth_min",pe(e.parseWidth(i)+e.contentBoxWidth)),e.css("minWidth","auto")}else if(ot(e))if(e.setLayoutHeight("0px",false),e.flexibleHeight)e.app("layout_constraintHeight_min",pe(e.parseHeight(i)+e.contentBoxHeight)),e.css(t?"minWidth":"minHeight","auto")}const i=e.cssInitial(t?"maxWidth":"maxHeight",true);if(ge(i,true)&&"100%"!==i)if(t){if(nt(e)){const t=e.parseWidth(i);if(t>e.width||e.percentWidth>0)e.setLayoutWidth("0px"),e.app("layout_constraintWidth_max",pe(t+(e.contentBox?e.contentBoxWidth:0))),e.css("maxWidth","auto")}}else if(ot(e)){const t=e.parseHeight(i);if(t>e.height||e.percentHeight>0)e.setLayoutHeight("0px"),e.app("layout_constraintHeight_max",pe(t+(e.contentBox?e.contentBoxHeight:0))),e.css("maxHeight","auto")}}function Qe(e,t,i,a){if(t<1&&!isNaN(a)&&e.pageFlow){const n=e.actualParent||e.documentParent;let o,r;if(i){const t=n.box.width;o=!n.gridElement?e.contentBoxWidth/t:0,r=(Math.max(e.marginLeft,0)+e.marginRight)/t}else{const t=n.box.height;o=!n.gridElement?e.contentBoxHeight/t:0,r=(Math.max(e.marginTop,0)+e.marginBottom)/t}if(1===a&&t+r>=a)t=a-r;else{if(o>0)if(a<o)o=Math.max(a,0),a=0;else a-=o;if(0===a)o-=r;else a=Math.max(a-r,0);t=Math.min(t+o,1)}}if(1===t&&!e.hasPX(i?"maxWidth":"maxHeight"))et(e,"match_parent",i,false);else e.app(i?"layout_constraintWidth_percent":"layout_constraintHeight_percent",Se(t,e.localSettings.floatPrecision)),et(e,"0px",i,false);return a}function et(e,t,i,a){if(i)e.setLayoutWidth(t,a);else e.setLayoutHeight(t,a)}function tt(e,t,i){const a=t?e.percentWidth:e.percentHeight;return a>0?Qe(e,a,t,i):i}function it(e,t=1){const i=e.percentWidth;if(i>0)if(e.renderParent.hasPX("width",false)&&!(e.actualParent||e.documentParent).layoutElement)if(i<1)e.setLayoutWidth(pe(e.actualWidth));else e.setLayoutWidth("match_parent",false);else if(!e.inputElement)return tt(e,true,t);return t}function at(e,t=1){const i=e.percentHeight;if(i>0)if(e.renderParent.hasPX("height",false)&&!(e.actualParent||e.documentParent).layoutElement)if(i<1)e.setLayoutHeight(pe(e.actualHeight));else e.setLayoutHeight("match_parent",false);else if(!e.inputElement)return tt(e,false,t);return t}function nt(e){if(e.documentRoot&&(e.hasWidth||e.blockStatic||e.blockWidth))return true;let i=e.renderParent,a=0;while(i){if(!i.inlineWidth&&(i.hasWidth||parseInt(i.layoutWidth)>0||i.of(t.CONSTRAINT,64)||i.documentRoot&&(i.blockWidth||i.blockStatic)))return true;else if(i.flexibleWidth){if(++a>1)return false}else if(i.inlineWidth||i.naturalElement&&i.inlineVertical)return false;i=i.renderParent}return false}function ot(e){var t;if(e.documentRoot&&e.hasHeight)return true;const i=e.renderParent;return!!i&&(i.hasHeight||i.layoutConstraint&&i.blockHeight)||true===(null===(t=e.absoluteParent)||void 0===t?void 0:t.hasHeight)}const rt=e=>0===e.bounds.width&&0===e.contentBoxWidth&&e.textEmpty&&0===e.marginLeft&&0===e.marginRight&&!e.visibleStyle.background,st=e=>0===e.bounds.height&&0===e.contentBoxHeight&&(0===e.marginTop&&0===e.marginBottom||"hidden"===e.css("overflow"));function lt(e,t){const i=ct(e,t);if(i.size>1)$e("center",i),$e("fill",i);let a="",n="",o="",r="";for(const e of i.values())if(Q(e))n=e;else if(ee(e))o=e;else r+=(""!==r?"|":"")+e;if(a=""!==n&&""!==o?n+"|"+o:n||o,""!==r)a+=(""!==a?"|":"")+r;if(""!==a)e.android(t,a);else e.delete("android",t)}const ct=(e,t)=>new Set(e.android(t).split("|"));var ht=e=>class i extends e{constructor(e=0,t="0",i,a){if(super(e,t,i),this.api=29,this.renderChildren=[],this.constraint={horizontal:false,vertical:false,current:{}},this._namespaces=["android","app"],this._cached={},this._containerType=0,this._controlName="",this._boxAdjustment=Te(),this._boxReset=Te(),this.__android={},this.__app={},this.init(),a)a(this),this._localization=this.hasProcedure(De.LOCALIZATION)&&this.localSettings.supportRTL;else this._localization=false}static setConstraintDimension(e,t=NaN){if(t=it(e,t),at(e,1),!e.inputElement)Je(e,true),Je(e,false);return t}static setFlexDimension(e,t){const{grow:i,basis:a,shrink:n}=e.flexbox,o="width"===t,r=t=>{if(i>0)return e.app(o?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",Se(i,e.localSettings.floatPrecision)),true;else if(t>0){if(n>1)t/=n;else if(n>1)t*=1-n;e.app(o?"layout_constraintWidth_min":"layout_constraintHeight_min",pe(t))}return false};if(ge(a))r(e.parseUnit(a,t)),et(e,"0px",o,true);else if("0%"!==a&&me(a)){r(0);const t=parseFloat(a)/100;if(o)Qe(e,t,true,NaN);else Qe(e,t,false,NaN)}else{let i=false;if(e.hasFlex(o?"row":"column"))if(i=r(e.hasPX(t,false)?o?e.actualWidth:e.actualHeight:0),i)et(e,"0px",o,true);if(!i)if(o)it(e,0);else at(e,0)}if(n>1)e.app(o?"layout_constrainedWidth":"layout_constrainedHeight","true");if(o)at(e);if(!e.inputElement&&!e.imageOrSvgElement)Je(e,true),Je(e,false)}static availablePercent(e,t,i){const a="width"===t;let n=1,o=0;return e.forEach(e=>{if((e=e.innerMostWrapped).pageFlow){if(++o,e.hasPX(t,true,true)){const o=e.cssInitial(t);if(me(o))return void(n-=parseFloat(o)/100);else if(ge(o)){if(a)n-=Math.max(e.actualWidth+e.marginLeft+e.marginRight,0)/i;else n-=Math.max(e.actualHeight+e.marginTop+e.marginBottom,0)/i;return}}n-=e.linear[t]/i}}),o>0?Math.max(0,n):1}static getControlName(e,i=29){const a=t[e];return i>=29&&o[a]||n[a]}setControlType(e,i){if(this.controlName=e,i)this._containerType=i;else if(0===this._containerType)this._containerType=t.UNKNOWN}setLayout(){if(this.plainText)return this.setLayoutWidth("wrap_content",false),void this.setLayoutHeight("wrap_content",false);switch(this.css("visibility")){case"visible":break;case"hidden":this.hide({hidden:true});break;case"collapse":this.hide({collapse:true});break}if(!this.pageFlow&&ze.test(this.css("clip")))this.hide({hidden:true});const e=this.actualParent||this.documentParent,a=this.renderParent,n=!a.inlineWidth,o=!a.inlineHeight,r=this.support.maxDimension,s=a.layoutConstraint&&!a.flexibleWidth&&(!a.inlineWidth||this.renderChildren.length)&&!this.onlyChild&&(!this.textElement&&!this.inputElement&&!this.controlElement&&this.alignParent("left")&&this.alignParent("right")||this.alignSibling("leftRight")||this.alignSibling("rightLeft"))?"0px":"match_parent";let{layoutWidth:l,layoutHeight:c}=this;if(""===l){if(this.hasPX("width")&&(!this.inlineStatic||""===this.cssInitial("width"))){const t=this.css("width");let o=-1;if(me(t)){const c=()=>"100%"===t&&n&&(r||!this.hasPX("maxWidth"));if(this.inputElement)if(c())l=s;else o=this.actualWidth;else if(a.layoutConstraint)if(n)if(c())l=s;else i.setConstraintDimension(this,1),l=this.layoutWidth;else o=this.actualWidth;else if(a.layoutGrid)l="0px",this.android("layout_columnWeight",Se(parseFloat(t)/100,this.localSettings.floatPrecision));else if(this.imageElement)if(c())l=s;else o=this.bounds.width;else if("100%"===t){if(!r&&this.hasPX("maxWidth")){const t=this.css("maxWidth"),i=this.parseWidth(t),a=this.absoluteParent||e;if("100%"===t)if(n&&Math.ceil(i)>=a.box.width)l=s;else o=Math.min(this.actualWidth,i);else if(i>0)if(this.blockDimension)o=Math.min(this.actualWidth,i);else l=Math.floor(i)<a.box.width?"wrap_content":s}if(""===l&&(this.documentRoot||n))l=s}else o=this.actualWidth}else if(ge(t))o=this.actualWidth;if(-1!==o)l=pe(o)}else if(this.length)switch(this.cssInitial("width")){case"max-content":case"fit-content":this.renderEach(e=>{if(!e.hasPX("width")&&!e.hasPX("maxWidth"))e.setLayoutWidth("wrap_content")}),l="wrap_content";break;case"min-content":{const e=[];let t=0;if(this.renderEach(i=>{if(!i.textElement||i.hasPX("width"))t=Math.max(i.actualWidth,t);else if(t=Math.max(i.width,t),i.support.maxDimension)e.push(i)}),t>0&&e.length){const i=pe(t);e.forEach(e=>{if(!e.hasPX("maxWidth"))e.css("maxWidth",i)})}l="wrap_content";break}}if(""===l)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage)l=pe(this.actualWidth);else if(this.imageElement&&this.hasHeight)l="wrap_content";else if(n&&(this.nodeGroup&&(a.layoutFrame&&(this.hasAlign(512)||this.hasAlign(2048))||this.hasAlign(32768))||this.layoutGrid&&this.some(e=>e.flexibleWidth)))l="match_parent";else if(!this.imageElement&&!this.inputElement&&!this.controlElement){const t=t=>{var i;if(e.pageFlow||!this.some(e=>e.textElement)){if(this.styleText){if((null===(i=this.textBounds)||void 0===i?void 0:i.numberOfLines)>1){if(t)l="match_parent";return}else if(this.cssTry("display","inline-block")){const t=Math.ceil(Ae(this.element).width);return l=t>=e.box.width?"wrap_content":"match_parent",void this.cssFinally("display")}}l=s}};if(a.layoutGrid){if(this.blockStatic&&"1"===a.android("columnCount"))l=s}else if(this.blockStatic){if(!e.layoutElement)if(this.nodeGroup||a.hasWidth||this.hasAlign(64)||this.originalRoot||this.documentRoot)l=s;else t(true);else if(n&&e.gridElement&&!a.layoutElement)l=s}else if(this.floating&&this.block&&!this.rightAligned&&this.alignParent("left")&&this.alignParent("right"))l="match_parent";else if(this.inlineStatic&&!this.blockDimension&&this.naturalElement&&this.some(e=>e.naturalElement&&e.blockStatic)&&!e.layoutElement&&(a.layoutVertical||!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft")))t(false)}this.setLayoutWidth(l||"wrap_content")}if(""===this.layoutHeight){if(this.hasPX("height")&&(!this.inlineStatic||""===this.cssInitial("height"))){const i=this.css("height");let a=-1;if(me(i)){if(this.inputElement)a=this.bounds.height;else if(this.imageElement)if("100%"===i&&o)c="match_parent";else a=this.bounds.height;else if("100%"===i){if(!r){const t=this.css("maxHeight"),i=this.parseHeight(t),n=this.absoluteParent||e;if("100%"===t)if(o&&Math.ceil(i)>=n.box.height)c="match_parent";else a=Math.min(this.actualHeight,i);else if(i>0)if(this.blockDimension)a=Math.min(this.actualHeight,i);else c=Math.floor(i)<n.box.height?"wrap_content":"match_parent"}if(""===c&&(this.documentRoot||o&&this.onlyChild||"fixed"===this.css("position")))c="match_parent"}if(""===c&&this.hasHeight)a=this.actualHeight}else if(ge(i))a=this.actualHeight;if(-1!==a){if(this.is(t.LINE)&&"HR"!==this.tagName&&this.hasPX("height",true,true))a+=this.borderTopWidth+this.borderBottomWidth;if(this.styleText&&this.multiline&&!e.layoutElement&&!this.hasPX("minHeight"))this.android("minHeight",pe(a)),c="wrap_content";else c=pe(a)}}if(""===c)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage){if(a.layoutConstraint&&!this.floating&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||e).box.height)c="0px",this.anchor("bottom","parent");else if(this.naturalChild&&!this.pseudoElement)c=pe(this.actualHeight)}else if(this.imageElement&&this.hasWidth)c="wrap_content";else if("table-cell"===this.display&&e.hasHeight)c="match_parent";this.setLayoutHeight(c||"wrap_content")}else if("0px"===c&&a.inlineHeight&&""===a.android("minHeight")&&!e.layoutElement&&e===this.absoluteParent)this.setLayoutHeight("wrap_content");if(this.hasPX("minWidth")&&(!this.hasFlex("row")||e.flexElement&&!this.flexibleWidth)){const e=this.css("minWidth");if("100%"===e&&this.inlineWidth)this.setLayoutWidth(s);else this.android("minWidth",pe(this.parseWidth(e)+(this.contentBox?this.contentBoxWidth:0)),false)}if(this.hasPX("minHeight")&&"table-cell"!==this.display&&(!this.hasFlex("column")||e.flexElement&&!this.flexibleHeight)){const e=this.css("minHeight");if("100%"===e&&o&&this.inlineHeight)this.setLayoutHeight("match_parent");else this.android("minHeight",pe(this.parseHeight(e)+(this.contentBox?this.contentBoxHeight:0)),false)}if(r){const e=this.css("maxWidth");let t=this.css("maxHeight"),i=-1;if(ge(e,true))if("100%"===e){if(this.svgElement)i=this.bounds.width;else if(this.imageElement){if(i=this.toElementInt("naturalWidth"),i>this.documentParent.actualWidth)this.setLayoutWidth("match_parent"),this.setLayoutHeight("wrap_content"),i=-1,t=""}else if(n)this.setLayoutWidth("match_parent")}else i=this.parseWidth(e);else if(!this.pageFlow&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&(this.ascend({condition:e=>e.hasPX("width")}).length||!this.textContent.includes("\n")))i=this.actualWidth;if(i>=0)this.android("maxWidth",pe(i),false);if(ge(t,true)){let e=-1;if("100%"===t&&!this.svgElement)if(o)this.setLayoutHeight("match_parent");else e=this.imageElement?this.toElementInt("naturalHeight"):this.parseHeight(t);else e=this.parseHeight(t);if(e>=0)this.android("maxHeight",pe(e))}}}setAlignment(){const e=this.outerMostWrapper,t=this.renderParent,i=e.renderParent||t,a=this.autoMargin;let n=Ue(this.cssInitial("textAlign",true),false),o=Ue(this.cssAscend("textAlign"),true);if(this.nodeGroup&&""===n&&!this.hasAlign(512)){const e=this.actualParent;if(e)n=Ue(e.cssInitial("textAlign",true),false)}if(this.pageFlow){let r="";if(this.inlineVertical&&(i.layoutFrame||i.layoutGrid)||"table-cell"===this.display){const t="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",true)){case"top":e.mergeGravity(t,"top");break;case"middle":e.mergeGravity(t,"center_vertical");break;case"bottom":e.mergeGravity(t,"bottom");break}}if(!this.blockWidth){if(i.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))if(this.floating)e.mergeGravity("layout_gravity",this.float);else if(!qe(e,a)&&""!==n&&this.hasWidth&&!this.blockStatic&&!this.inputElement&&"table"!==this.display)e.mergeGravity("layout_gravity",n,false);if(this.rightAligned)r="right";else if(this.nodeGroup)if(this.renderChildren.every(e=>e.rightAligned))r="right";else if(this.hasAlign(512)&&!this.renderChildren.some(e=>e.rightAligned))r="left"}else if(this.rightAligned&&e.nodeGroup&&e.layoutVertical)e.renderEach(e=>{if(e.rightAligned)e.mergeGravity("layout_gravity","right")});if(t.layoutFrame){if(!qe(this,a)){if(!this.innerWrapped){if(this.floating)r=this.float;if(""!==r&&!t.naturalElement&&(t.inlineWidth||!t.documentRoot&&this.onlyChild))t.mergeGravity("layout_gravity",r),r=""}if(this.centerAligned)this.mergeGravity("layout_gravity",Ue("center",false));else if(this.rightAligned&&t.blockWidth)this.mergeGravity("layout_gravity","right")}if(this.onlyChild&&"table-cell"===t.display){let e;switch(t.css("verticalAlign")){case"top":e="top";break;case"bottom":e="bottom";break;default:e="center_vertical";break}this.mergeGravity("layout_gravity",e)}}if(""!==r)if(this.blockWidth){if(""===n||"right"===r)n=r}else(e.blockWidth&&this!==e?this:e).mergeGravity("layout_gravity",r);else if(qe(e.inlineWidth?e:this,a)&&""!==n)o=""}if(""!==o&&this.blockStatic&&!this.centerAligned&&!this.rightAligned)e.mergeGravity("layout_gravity","left",false);if(!(this.layoutConstraint||this.layoutFrame||this.layoutElement||this.layoutGrid))if(""!==n){if(!this.imageOrSvgElement)this.mergeGravity("gravity",n)}else if(""!==o&&!this.inputElement)if(this.imageOrSvgElement){if(this.pageFlow)this.mergeGravity("layout_gravity",o)}else if(!this.nodeGroup||!this.hasAlign(512))this.mergeGravity("gravity",o);if(a.vertical&&(t.layoutFrame||t.layoutVertical&&t.layoutLinear))e.mergeGravity("layout_gravity",a.topBottom?"center_vertical":a.top?"bottom":"top")}setBoxSpacing(){const e=this._boxReset,i=this._boxAdjustment,a=this.renderParent,o=(o,r,s)=>{let l=0,c=0,h=0,f=0;for(let t=0;t<4;++t){const a=o[t];let n=0===e[a]?this[a]:0;if(0!==n)switch(a){case"marginRight":if(this.inline){const e=this.documentParent.box.right,t=this.bounds.right;if(Math.floor(t)>e){if(!this.onlyChild&&!this.alignParent("left"))this.setSingleLine(true);continue}else if(t+n>e)n=Ee(e-t,0,n)}break;case"marginBottom":if(n<0&&this.pageFlow&&!this.blockStatic)n=0;break;case"paddingTop":n=this.actualPadding(a,n);break;case"paddingBottom":if(this.hasPX("height",false,true)&&(!this.layoutElement&&(this.layoutVertical||this.layoutFrame)||!this.pageFlow)||this.documentParent.gridElement&&this.hasPX("height",false))continue;else if(this.floatContainer){let e=Number.NEGATIVE_INFINITY;this.naturalChildren.forEach(t=>{if(t.floating)e=Math.max(t.bounds.bottom,e)}),n=Ee(this.bounds.bottom-e,0,n)}else n=this.actualPadding(a,n);break}if(i)n+=i[a];switch(t){case 0:l=n;break;case 1:c=n;break;case 2:h=n;break;case 3:f=n;break}}if(r){if(this.floating){let e=a.renderChildren.find(e=>!e.floating);if(e){const t=Math.floor(this.bounds.top);let i;while(Math.floor(e.bounds.top)===t){i=e;const t=e.innerWrapped;if(t)e=t;else break}if(i){const[e,t]=i.getBox(2);l+=(0===e?i.marginTop:0)+t}}}if(this.positionStatic&&!this.blockWidth&&(f<0||c<0))switch(this.cssAscend("textAlign")){case"center":if(f<c)c+=Math.abs(f),c/=2,f=0;else f+=Math.abs(c),f/=2,c=0;break;case"right":case"end":if(f<0)f=0;break}switch(this.controlName){case n.RADIO:case n.CHECKBOX:l=Math.max(l-4,0),h=Math.max(h-4,0);break;case n.SELECT:l=Math.max(l-2,0),h=Math.max(h-2,0);break}if(l<0)if(!this.pageFlow){if(h>=0&&this.leftTopAxis&&(this.hasPX("top")||!this.hasPX("bottom"))&&this.translateY(l))l=0}else if(this.blockDimension&&!this.inputElement&&this.translateY(l))this.anchorChain("bottom").forEach(e=>e.translateY(l)),l=0;if(h<0)if(!this.pageFlow){if(l>=0&&this.leftTopAxis&&this.hasPX("bottom")&&!this.hasPX("top")&&this.translateY(-h))h=0}else if(this.blockDimension&&!this.inputElement&&a.layoutConstraint)this.anchorChain("bottom").forEach(e=>e.translateY(-h)),h=0;if(f<0)if(!this.pageFlow){if(c>=0&&this.leftTopAxis&&(this.hasPX("left")||!this.hasPX("right"))&&this.translateX(f))f=0}else if("right"===this.float){const e=this.anchorChain("left");f=Math.min(-f,-this.bounds.width),e.forEach(e=>e.translateX(-f)),f=0}else if(this.blockDimension&&this.translateX(f))this.anchorChain("right").forEach(e=>e.translateX(f)),f=0;if(c<0)if(!this.pageFlow){if(f>=0&&this.leftTopAxis&&this.hasPX("right")&&!this.hasPX("left")&&this.translateX(-c))c=0}else if(this.rightAligned){if(this.translateX(-c))c=0}else if(this.blockDimension&&a.layoutConstraint)this.anchorChain("right").forEach(e=>e.translateX(c)),c=0}else if(this.visibleStyle.borderWidth&&!this.is(t.LINE))l+=this.borderTopWidth,h+=this.borderBottomWidth,c+=this.borderRightWidth,f+=this.borderLeftWidth;if(0!==l||0!==f||0!==h||0!==c){let e=0,t=0,i=0;if(!s&&this.api>=26)if(l===c&&c===h&&h===f)e=l;else{if(f===c)t=f;if(l===h)i=l}if(0!==e)this.android(r?d.MARGIN:d.PADDING,pe(e));else{if(0!==t)this.android(r?d.MARGIN_HORIZONTAL:d.PADDING_HORIZONTAL,pe(t));else{if(0!==f)this.android(this.localizeString(r?d.MARGIN_LEFT:d.PADDING_LEFT),pe(f));if(0!==c)this.android(this.localizeString(r?d.MARGIN_RIGHT:d.PADDING_RIGHT),pe(c))}if(0!==i)this.android(r?d.MARGIN_VERTICAL:d.PADDING_VERTICAL,pe(i));else{if(0!==l)this.android(r?d.MARGIN_TOP:d.PADDING_TOP,pe(l));if(0!==h)this.android(r?d.MARGIN_BOTTOM:d.PADDING_BOTTOM,pe(h))}}}};o(de,true,a.layoutGrid),o(fe,false,false)}apply(e){for(const t in e){const i=e[t];if(Re(i))for(const e in i)this.attr(t,e,i[e]);else if(i)this.attr("_",t,i.toString())}}clone(e,t=true,a=false){const n=new i(e||this.id,this.sessionId,this.element||void 0);if(n.unsafe("localization",this._localization),n.localSettings=Object.assign({},this.localSettings),void 0!==e)n.setControlType(this.controlName,this.containerType);else n.controlId=this.controlId,n.controlName=this.controlName,n.containerType=this.containerType;if(this.cloneBase(n),t)Object.assign(n.unsafe("boxReset"),this._boxReset),Object.assign(n.unsafe("boxAdjustment"),this._boxAdjustment),this._namespaces.forEach(e=>{const t=this["__"+e];for(const i in t)n.attr(e,i,"id"===i&&"android"===e?n.documentId:t[i])});if(a){n.anchorClear();const e=this.documentId;if(n.anchor("left",e))n.setBox(16,{reset:1,adjustment:0});if(n.anchor("top",e))n.setBox(2,{reset:1,adjustment:0})}return n.saveAsInitial(true),n}extractAttributes(e){if("rtl"===this.dir&&!this.imageOrSvgElement)if(this.textElement)this.android("textDirection","rtl");else if(this.renderChildren.length)this.android("layoutDirection","rtl");if(this.styleElement||this.hasAlign(16384)){const e=te(this.dataset,"android");if(e)for(const t in e){const i="attr"===t?"android":He.test(t)?ve(t.substring(4),false):"";if(""!==i)e[t].split(";").forEach(e=>{const[t,a]=e.split("::");if(a)this.attr(i,t,a)})}if(!this.svgElement){const e=this.css("opacity");if("1"!==e&&Ie(e))this.android("alpha",e)}}const t="\n"+"\t".repeat(e);let i="";return this.combine().forEach(e=>i+=t+e),i}alignParent(e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint){const i=We[e];if(i)return"parent"===t.app(this.localizeString(i))}else if(i.layoutRelative){const i=Xe[e];if(i)return"true"===t.android(this.localizeString(i))}else if(i.layoutLinear){const a=i.renderChildren;if(i.layoutVertical)switch(e){case"top":return t===a[0];case"bottom":return t===a[a.length-1]}else switch(e){case"left":case"start":return t===a[0];case"right":case"end":return t===a[a.length-1]}}return false}alignSibling(e,t){const i=this.anchorTarget,a=i.renderParent;if(a)if(t){if(a.layoutConstraint){const a=We[e];if(a)i.app(this.localizeString(a),t)}else if(a.layoutRelative){const a=Be[e];if(a)i.android(this.localizeString(a),t)}}else if(a.layoutConstraint){const t=We[e];if(t){const e=i.app(this.localizeString(t));return"parent"!==e&&e!==a.documentId?e:""}}else if(a.layoutRelative){const t=Be[e];if(t)return i.android(this.localizeString(t))}return""}actualRect(e,t="linear"){let i=this[t][e];if(this.positionRelative&&this.floating)switch(e){case"top":if(this.hasPX("top"))i+=this.top;else i-=this.bottom;break;case"bottom":if(!this.hasPX("top"))i-=this.bottom;else i+=this.top;break;case"left":if(this.hasPX("left"))i+=this.left;else i-=this.right;case"right":if(!this.hasPX("left"))i-=this.right;else i+=this.left;break}if(this.inputElement){const a=this.companion;if((null==a?void 0:a.labelFor)===this&&!a.visible){const n=a[t][e];switch(e){case"top":case"left":return Math.min(n,i);case"right":case"bottom":return Math.max(n,i)}}}return i}translateX(e,t={}){const i=this.anchorTarget,a=i.renderParent;if(null==a?void 0:a.layoutConstraint){let n=we(i.android("translationX"));if(false===t.oppose&&(n>0&&e<0||n<0&&e>0))return false;else if(false!==t.accumulate)n+=e;if(t.contain){const{left:e,right:t}=a.box,{left:i,right:o}=this.linear;if(i+n<e)n=Math.max(i-e,0);else if(o+n>t)n=Math.max(t-o,0)}if(0!==n)i.android("translationX",pe(n));else i.delete("android","translationX");return true}return false}translateY(e,t={}){const i=this.anchorTarget,a=i.renderParent;if(null==a?void 0:a.layoutConstraint){let n=we(i.android("translationY"));if(false===t.oppose&&(n>0&&e<0||n<0&&e>0))return false;else if(false!==t.accumulate)n+=e;if(t.contain){const{top:e,bottom:t}=a.box,{top:i,bottom:o}=this.linear;if(i+n<e)n=Math.max(i-e,0);else if(o+n>t)n=Math.max(t-o,0)}if(0!==n)i.android("translationY",pe(n));else i.delete("android","translationY");return true}return false}localizeString(e){return oe(e,this._localization,this.api)}removeTry(e,t){if(e&&!t)t=()=>e.anchorClear();return super.removeTry(e,t)}hasFlex(e){if(super.hasFlex(e)){const t=this.actualParent;if("column"===e&&!t.hasHeight){const e=t.actualParent;if(e){if(e.flexElement&&!e.flexdata.column){if(!e.hasHeight){let i=0,a=0;for(const n of e){const e=(n.data(ke.FLEXBOX,"boundsData")||n.bounds).height;if(e>i)i=e;if(n===t)if(a=e,a<i)break}if(a>=i)return false}}else if(!e.gridElement)return false}else return false}const{grow:i,shrink:a}=this.flexbox;return i>0||1!==a}return false}hide(e){if(e)if(e.hidden)return void this.android("visibility","invisible");else if(e.collapse)return void this.android("visibility","gone");super.hide(e)}android(e,t,i=true){if(t)if(""!==(t=this.attr("android",e,t,i)))return t;return this.__android[e]||""}app(e,t,i=true){if(t)if(""!==(t=this.attr("app",e,t,i)))return t;return this.__app[e]||""}formatted(e,t=true){const i=Ve.exec(e);if(i)this.attr(i[1]||"_",i[2],i[3],t)}anchor(e,t="",i){const a=this.anchorTarget,n=a.renderParent;if(n&&a.documentId!==t)if(n.layoutConstraint){if(""===t||void 0===a.constraint.current[e]||i){const n="parent"===t;if(void 0===i&&""!==t)i=n;const o=We[e];if(o){let r=false;switch(a.app(this.localizeString(o),t,i),e){case"left":case"right":if(n)a.constraint.horizontal=true;case"leftRight":case"rightLeft":r=true;break;case"top":case"bottom":case"baseline":if(n)a.constraint.vertical=true;break}return a.constraint.current[e]={documentId:t,horizontal:r},true}}}else if(n.layoutRelative){const n="true"===t;if(void 0===i&&""!==t)i=n;const o=(n?Xe:Be)[e];if(o)return a.android(this.localizeString(o),t,i),true}return false}anchorParent(e,t,i="",a){const n=this.anchorTarget,o=n.renderParent;if(o){const r="horizontal"===e;if(o.layoutConstraint){if(a||!n.constraint[e]){if(r)n.anchor("left","parent",a),n.anchor("right","parent",a),n.constraint.horizontal=true;else n.anchor("top","parent",a),n.anchor("bottom","parent",a),n.constraint.vertical=true;if(void 0!==t)n.anchorStyle(e,t,i,a);return true}}else if(o.layoutRelative)return n.anchor(r?"centerHorizontal":"centerVertical","true",a),true}return false}anchorStyle(e,t,i,a=true){const n=this.anchorTarget;if("horizontal"===e){if(n.app("layout_constraintHorizontal_bias",t.toString(),a),i)n.app("layout_constraintHorizontal_chainStyle",i,a)}else if(n.app("layout_constraintVertical_bias",t.toString(),a),i)n.app("layout_constraintVertical_chainStyle",i,a)}anchorChain(e){const t=[],i=this.anchorTarget,a=i.renderParent;if(a&&(a.layoutConstraint||a.layoutRelative)){let n,o;switch(e){case"top":n="topBottom",o="bottomTop";break;case"right":n="rightLeft",o="leftRight";break;case"bottom":n="bottomTop",o="topBottom";break;case"left":n="leftRight",o="rightLeft";break}const r=a.renderChildren;let s=i;do{const e=s.alignSibling(n);if(""!==e){const i=r.find(t=>t.documentId===e);if((null==i?void 0:i.alignSibling(o))===s.documentId)t.push(i),s=i;else break}else break}while(true)}return t}anchorDelete(...e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint)t.delete("app",...Le(e,e=>this.localizeString(We[e])));else if(i.layoutRelative){const i=[];e.forEach(e=>{let t=Be[e];if(t)i.push(this.localizeString(t));if(t=Xe[e],t)i.push(this.localizeString(t))}),t.delete("android",...i)}}anchorClear(){const e=this.anchorTarget,t=e.renderParent;if(t)if(t.layoutConstraint)e.anchorDelete(...Object.keys(We)),e.delete("app","layout_constraintHorizontal_bias","layout_constraintHorizontal_chainStyle","layout_constraintVertical_bias","layout_constraintVertical_chainStyle");else if(t.layoutRelative)e.anchorDelete(...Object.keys(Xe)),e.anchorDelete(...Object.keys(Be))}supported(e,t={}){var i;if("function"==typeof Ge[e]){const i=Ge[e](t,this.api,this);if(!i||Object.keys(t).length)return i}let a=this.api;while(a<=29){const n=null===(i=H[a++])||void 0===i?void 0:i.android[e];switch(typeof n){case"boolean":return n;case"function":return n(t,this.api,this)}}return true}combine(...e){const t=0===e.length,i=[];let a=false,n="";if(this._namespaces.forEach(o=>{if(t||e.includes(o)){const e=this["__"+o];if(e){let t=o+":";switch(o){case"android":if(this.api<29)for(let a in e)if("id"===a)n=e[a];else{const n={};let o=e[a];if(!this.supported(a,n))continue;if(Object.keys(n).length){if(Ce(n.attr))a=n.attr;if(Ce(n.value))o=n.value}i.push(t+`${a}="${o}"`)}else for(const a in e)if("id"===a)n=e[a];else i.push(t+`${a}="${e[a]}"`);a=true;break;case"_":t="";default:for(const a in e)i.push(t+`${a}="${e[a]}"`);break}}}}),i.sort((e,t)=>e>t?1:-1),a)i.unshift('android:id="'+(n||"@+id/"+this.controlId)+'"');return i}mergeGravity(e,i,a=true){if("layout_gravity"===e){const e=this.renderParent;if(e)if(Q(i)&&(this.blockWidth||e.inlineWidth&&this.onlyChild||!a&&this.outerWrapper&&this.hasPX("maxWidth")))return;else if(e.layoutRelative){if("center_horizontal"===i&&!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))return this.anchorDelete("left","right"),void this.anchor("centerHorizontal","true")}else if(e.layoutConstraint){if(!e.layoutHorizontal&&!this.positioned)switch(i){case"top":this.anchorStyle("vertical",0);break;case"right":case"end":if(!this.alignSibling("rightLeft"))if(this.anchor("right","parent",false),this.alignParent("left")||this.alignSibling("left"))this.anchorStyle("horizontal",1);break;case"bottom":this.anchorStyle("vertical",1);break;case"left":case"start":if(!this.alignSibling("leftRight"))if(this.anchor("left","parent",false),this.alignParent("right")||this.alignSibling("right"))this.anchorStyle("horizontal",0);break;case"center_horizontal":if(!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))this.anchorParent("horizontal",.5);break}return}}else switch(this.tagName){case"#text":case"IMG":case"SVG":case"HR":return;case"INPUT":switch(this.toElementString("type")){case"radio":case"checkbox":case"image":case"range":return}break;default:if(this.controlElement||this.is(t.TEXT)&&this.textEmpty||this.length&&(this.layoutFrame||this.layoutConstraint||this.layoutGrid))return;break}const n=ct(this,e),o=this.localizeString(i);if(!n.has(o)){n.add(o);let t="",i="",r="",s="";for(const e of n.values())if(Q(e)){if(""===i||a)i=e}else if(ee(e)){if(""===r||a)r=e}else s+=(""!==s?"|":"")+e;if(t=""!==i&&""!==r?i+"|"+r:i||r,""!==s)t+=(""!==t?"|":"")+s;if(""!==t)this.android(e,t)}}applyOptimizations(){const e=this.renderParent;if(e)if(this.alignLayout(e),function(e,t){var i;const a=e.lineHeight;if(a>0){const n=e.has("lineHeight",{map:"initial"});if(e.multiline)Ye(e,a,n);else if(e.renderChildren.length)if(!n&&e.layoutHorizontal&&e.alignSibling("baseline"));else if(e.layoutVertical||e.layoutFrame)e.renderChildren.forEach(e=>{if(0===e.length&&!e.multiline&&!isNaN(e.lineHeight)&&!e.has("lineHeight"))je(e,a,true,true,true)});else{const t=e.horizontalRows||[e.renderChildren];let n=false;const o=t.length;for(let e=0;e<o;++e){const r=t[e],s=r.length,l=t[e+1],c=!!l&&(1===l.length&&l[0].multiline||l[0].lineBreakLeading||e<o-1&&!!(null===(i=l.find(e=>e.baselineActive))||void 0===i?void 0:i.has("lineHeight"))),h=r[0],d=1===s,f=d&&!h.multiline,u=!d&&r.find(e=>e.baselineActive&&0===e.renderChildren.length),p=f||!n&&(e>0||1===o)||h.lineBreakLeading,g=f||!c&&(e<o-1||1===o);if(u&&s>1)if(!isNaN(u.lineHeight)&&!u.has("lineHeight"))je(u,a,false,p,g);else{n=true;continue}else r.forEach(e=>{if(0===e.length&&!e.multiline&&!isNaN(e.lineHeight)&&!e.has("lineHeight"))je(e,a,d,p,g)});n=d&&h.multiline}}else if(n||0===t.lineHeight)je(e,a,n,true,true)}}(this,e),lt(this,"layout_gravity"),lt(this,"gravity"),this.imageElement){const e=this.layoutWidth,t=this.layoutHeight;if("wrap_content"===e&&"wrap_content"!==t||"wrap_content"!==e&&"wrap_content"===t||"match_parent"===e||"match_parent"===t||"0px"===e||"0px"===t||""!==this.android("minWidth")||""!==this.android("minHeight")||""!==this.android("maxWidth")||""!==this.android("maxHeight"))this.android("adjustViewBounds","true")}}applyCustomizations(e=true){const t=t=>{if(t)for(const i in t){const a=t[i];for(const t in a)this.attr(i,t,a[t],e)}},{tagName:i,controlName:a}=this;let n=H[0].assign;t(n[i]),t(n[a]);const o=H[this.api];if(o)n=o.assign,t(n[i]),t(n[a])}setSingleLine(e=false){if(this.textElement&&this.naturalChild){const t=this.actualParent;if(!(t.preserveWhiteSpace||"CODE"===t.tagName||this.multiline&&"nowrap"!==t.css("whiteSpace")))this.android("maxLines","1");if(e&&this.textContent.trim().length>1)this.android("ellipsize","end")}}setLayoutWidth(e,t=true){this.android("layout_width",e,t)}setLayoutHeight(e,t=true){this.android("layout_height",e,t)}alignLayout(e){if(this.layoutLinear){const t=this.renderChildren;if(this.layoutVertical){if(!e.layoutFrame&&!this.documentRoot&&t.length&&(this.baselineElement||t.every(e=>e.textElement)))this.android("baselineAlignedChildIndex","0")}else{let e=!this.baselineActive;if(t.some(e=>e.floating)&&!t.some(e=>e.imageElement&&e.baseline))this.android("baselineAligned","false"),e=false;const i=t.length;for(let a=0;a<i;++a){const n=t[a];if(n.setSingleLine(a===i-1),e&&n.baselineElement)this.android("baselineAlignedChildIndex",a.toString()),e=false}}}}get controlElement(){switch(this.tagName){case"PROGRESS":case"METER":return true;case"INPUT":return"range"===this.toElementString("type")}return false}set containerType(e){this._containerType=e}get containerType(){if(0===this._containerType){const e=l[this.containerName];if(e>0)this._containerType=e}return this._containerType}set controlId(e){this._controlId=e}get controlId(){var e;let t=this._controlId;if(void 0===t){const i=this.controlName;if(i){let a;if(this.styleElement){const t=(null===(e=this.elementId)||void 0===e?void 0:e.trim())||be(this.element,"name");if(""!==t)if(a=t.replace(Fe,"_").toLowerCase(),"parent"===a||u.includes(a))a="_"+a}t=_e(Me.generateId("android",a||Ne(i,".").toLowerCase(),a?0:1)),this._controlId=t}else if(0===this.id)return"baseroot";else return""}return t}get documentId(){const e=this.controlId;return""!==e?"@id/"+e:""}get support(){let e=this._cached.support;if(void 0===e)if(e={positionTranslation:this.layoutConstraint,positionRelative:this.layoutRelative,maxDimension:this.textElement||this.imageOrSvgElement},0!==this.containerType)this._cached.support=e;return e}set renderExclude(e){this._cached.renderExclude=e}get renderExclude(){let e=this._cached.renderExclude;if(void 0===e){if(this.naturalChild&&!this.originalRoot){const t=this.renderParent;if(t)if(!this.onlyChild&&0===this.length&&this.styleElement&&!this.imageElement&&!this.pseudoElement)if(this.pageFlow)if(t.layoutVertical)e=st(this)&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop");else e=rt(this)&&(t.layoutHorizontal||st(this))&&""===this.alignSibling("leftRight")&&""===this.alignSibling("rightLeft")&&""===this.alignSibling("topBottom")&&""===this.alignSibling("bottomTop");else e=rt(this)||st(this);else e=false;else return false}else e=false;this._cached.renderExclude=e}return e}get baselineHeight(){var e;let t=this._cached.baselineHeight;if(void 0===t){if(t=0,this.plainText){const{height:e,numberOfLines:i}=this.bounds;t=e/(i||1)}else{if(this.multiline&&this.cssTry("white-space","nowrap"))t=this.boundingClientRect.height,this.cssFinally("white-space");else if(this.hasHeight)t=this.actualHeight;else if("PICTURE"===this.tagName)t=Math.max((null===(e=this.naturalElements.find(e=>"IMG"===e.tagName))||void 0===e?void 0:e.height)||0,this.bounds.height);else t=this.bounds.height;if(this.naturalElement&&!this.pseudoElement&&this.lineHeight>t)t=this.lineHeight;else if(this.inputElement)switch(this.controlName){case n.RADIO:case n.CHECKBOX:t+=8;break;case n.SELECT:t/=this.toElementInt("size")||1,t+=4;break;default:t+=Math.max(-1*xe(this.verticalAlign),0);break}}this._cached.baselineHeight=t}return t}get innerWrapped(){return this._innerWrapped}set innerWrapped(e){if(e)e=e.outerMostWrapper,this._innerWrapped=e,e.outerWrapper=this}get anchorTarget(){let e=this;do{const t=e.renderParent;if(t){if(t.layoutConstraint||t.layoutRelative)return e}else break;e=e.outerWrapper}while(e);return this}set anchored(e){const t=this.constraint;t.horizontal=e,t.vertical=e}get anchored(){const{horizontal:e,vertical:t}=this.constraint;return true===e&&true===t}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this._containerType===t.FRAME}get layoutLinear(){return this._containerType===t.LINEAR}get layoutGrid(){return this._containerType===t.GRID}get layoutRelative(){return this._containerType===t.RELATIVE}get layoutConstraint(){return this._containerType===t.CONSTRAINT}get layoutWidth(){return this.__android.layout_width||""}get layoutHeight(){return this.__android.layout_height||""}get inlineWidth(){return"wrap_content"===this.layoutWidth}get inlineHeight(){return"wrap_content"===this.layoutHeight}get blockWidth(){return"match_parent"===this.layoutWidth}get blockHeight(){return"match_parent"===this.layoutHeight}get flexibleWidth(){return Ke(this,this.layoutWidth)}get flexibleHeight(){return Ke(this,this.layoutHeight)}get labelFor(){return this._labelFor}set labelFor(e){if(e)e.companion=this;this._labelFor=e}set localSettings(e){if(this._localSettings)Object.assign(this._localSettings,e);else this._localSettings=Object.assign({},e)}get localSettings(){return this._localSettings}};class dt extends(ht(squared.base.NodeUI)){}class ft extends(ht(squared.base.NodeGroupUI)){constructor(e,t,i,a){super(e,t.sessionId,void 0,a),this.depth=t.depth,this.containerName=t.containerName+"_GROUP",this.actualParent=t.actualParent,this.documentParent=t.documentParent,this.retain(i)}set containerType(e){this._containerType=e}get containerType(){return this._containerType}set renderExclude(e){}get renderExclude(){return false}}const{lib:ut,base:pt}=squared,{PLATFORM:gt,isPlatform:mt}=ut.client,{parseColor:yt}=ut.color,{formatPX:bt,getSrcSet:Tt,hasComputedStyle:Et,isLength:St,isPercent:At}=ut.css,{getElementsBetweenSiblings:vt,getRangeClientRect:xt}=ut.dom,{truncate:wt}=ut.math,{CHAR:_t}=ut.regex,{getElementAsNode:Nt,getPseudoElt:It}=ut.session,{assignEmptyValue:Rt,convertFloat:Ct,hasBit:Lt,hasMimeType:kt,isString:Pt,iterateArray:Ot,objectMap:Dt,parseMimeType:Mt,partitionArray:Wt,withinRange:Bt}=ut.util,{STRING_XMLENCODING:Xt,replaceTab:Gt}=ut.xml,{APP_SECTION:Ht,BOX_STANDARD:Vt,NODE_ALIGNMENT:Ft,NODE_PROCEDURE:zt,NODE_RESOURCE:Ut,NODE_TEMPLATE:qt}=pt.lib.enumeration,Yt=pt.NodeUI,jt=/((?:rgb|hsl)a?\([^)]+\)|[a-z]{4,})?\s*(-?[\d.]+[a-z]+)\s+(-?[\d.]+[a-z]+)\s*([\d.]+[a-z]+)?/;function Kt(e){e.sort((e,t)=>{const i=e.float,a=t.float;if("none"!==i&&"none"!==a){if(i!==a)return"left"===i?-1:1;else if("right"===i&&"right"===a)return 1}else if("none"!==i)return"left"===i?-1:1;else if("none"!==a)return"left"===a?1:-1;return 0})}function $t(e,t){return function(e,t){const i=e.depth,a=t.depth;if(i===a){const i=e.actualParent,a=t.actualParent;if(e===a)return-1;else if(i===t)return 1;else if(i&&a)if(i===a)return Jt(e,t);else if(i.actualParent===a.actualParent)return Jt(i,a);return e.id<t.id?-1:1}return i<a?-1:1}(e.node.innerMostWrapped,t.node.innerMostWrapped)}function Zt(e,t){return Jt(e.node.innerMostWrapped,t.node.innerMostWrapped)}function Jt(e,t){const i=e.actualParent;if(e===t.actualParent)return-1;else if(i===t)return 1;const{pageFlow:a,zIndex:n}=e,{pageFlow:o,zIndex:r}=t;if(!a&&o)return n>=0?1:-1;else if(!o&&a)return r>=0?-1:1;else if(n===r)return e.childIndex<t.childIndex?-1:1;return n<r?-1:1}function Qt(e,i,a,n){const o=e.baselineHeight,r=e=>e.imageOrSvgElement&&e.baseline,s=e=>e.imageOrSvgElement?"baseline":"bottom";let l,c=0;const h=i.length;let d=0;while(d<h){const h=i[d++];if(h.baselineAltered)continue;let f=h.baselineHeight;if(f>0||h.textElement){if(h.blockVertical&&e.blockVertical){h.anchor("bottom",e.documentId);continue}else{const e=h.renderChildren.filter(e=>r(e));if(h.imageOrSvgElement||e.length)if(e.forEach(e=>f=Math.max(e.baselineHeight,f)),f>o){if(!l||f>=c)null==l||l.anchor(s(h),h.documentId),c=f,l=h;else h.anchor(s(l),l.documentId);continue}else if(Bt(h.linear.top,n)){h.anchor("top","true");continue}}if(a&&h.is(t.BUTTON))h.anchor("centerVertical","true");else if(h.naturalChild&&h.isEmpty)h.anchor("baseline",e.documentId);else if(h.baselineElement)h.anchor(h.naturalElements.find(e=>r(e))?"bottom":"baseline",e.documentId)}else if(r(h))l=h}if(l)e.anchor(s(l),l.documentId)}function ei(e,t){if("left"===t.float){if(t.marginRight<0){const i=Math.abs(t.marginRight);return e.modifyBox(16,t.actualWidth+(t.hasWidth?t.paddingLeft+t.borderLeftWidth:0)-i),e.anchor("left",t.documentId),t.setBox(4,{reset:1}),true}}else if("right"===e.float&&t.marginLeft<0){const i=Math.abs(t.marginLeft),a=t.actualWidth;if(i<a)e.modifyBox(4,a-i);return e.anchor("right",t.documentId),t.setBox(16,{reset:1}),true}return false}function ti(e){return e.filter(e=>(e.baseline||St(e.verticalAlign,true))&&("TEXTAREA"===e.tagName||"SELECT"===e.tagName&&e.toElementInt("size")>1)||"text-bottom"===e.verticalAlign&&"INPUT_IMAGE"!==e.containerName).sort((e,t)=>{if(e.baselineHeight===t.baselineHeight)return"SELECT"===e.tagName?1:0;else return e.baselineHeight>t.baselineHeight?-1:1})}function ii(e){if("BR"===e.tagName)return true;else if(Et(e)){const t=getComputedStyle(e),i=t.getPropertyValue("position");if(!("absolute"===i||"fixed"===i)){const e=t.getPropertyValue("display"),i="none"!==t.getPropertyValue("float"),a=()=>("100%"===t.getPropertyValue("width")||"100%"===t.getPropertyValue("minWidth"))&&"none"===t.getPropertyValue("max-width");switch(e){case"block":case"flex":case"grid":return!i||a()}return(e.startsWith("inline-")||"table"===e)&&a()}}return false}function ai(e){const t=e.element;if(t.readOnly)e.android("focusable","false");if(t.disabled)e.android("enabled","false")}function ni(e,t,i){const[a,n,o,r,s,l,c,h]=i?["horizontal","width","left","right",16,4,256,64]:["vertical","height","top","bottom",2,8,32,128],d=e.autoMargin,f=e.hasPX(n);if(f&&d[a])if(e.hasPX(o)&&d[r])e.anchor(o,"parent"),e.modifyBox(s,e[o]);else if(e.hasPX(r)&&d[o])e.anchor(r,"parent"),e.modifyBox(l,e[r]);else e.anchorParent(a,.5),e.modifyBox(s,e[o]),e.modifyBox(l,e[r]);else{const u="100%"===e.css(n)||"100%"===e.css(i?"minWidth":"minHeight");let p=0;if(e.hasPX(o)){if(e.anchor(o,"parent"),!e.hasPX(r)&&u)e.anchor(r,"parent"),p++;e.modifyBox(s,ie(t,c,e[o])),p++}if(e.hasPX(r)){if(u||!f||!e.hasPX(o))e.anchor(r,"parent"),e.modifyBox(l,ie(t,h,e[r]));p++}if(0===p){if(i)if(e.centerAligned)e.anchorParent("horizontal",.5);else if(e.rightAligned)if(e.blockStatic)e.anchorParent("horizontal",1);else e.anchor("right","parent")}else if(!(2!==p||f||d[a]&&!d[o]&&!d[r]))if(i)e.setLayoutWidth("0px");else e.setLayoutHeight("0px")}}function oi(e,t,i,a){if(e.css("width",bt(t),true),a&&a.width>0&&a.height>0)i=a.height*(t/a.width),e.css("height",bt(i),true);return[t,i]}function ri(e,t){const{minLength:i,maxLength:a}=t;if(-1!==i)e.android("minLength",i.toString());if(a>0)e.android("maxLength",a.toString())}function si(e,t){const{min:i,max:a}=t;if(Pt(i))e.android("min",i);if(Pt(a))e.android("max",a)}function li(e,t){if(e.naturalChild)return t.has(e);else if(e.nodeGroup)return e.some(e=>e.naturalChild&&t.has(e),{cascade:true});else return t.has(e.innerMostWrapped)}function ci(e,t){const i=e.parent;if(i.flexElement&&("baseline"===i.css("alignItems")||e.some(e=>"baseline"===e.flexbox.alignSelf)))return false;const a=e.length>1;return e.some(t=>a&&(t.rightAligned||t.centerAligned)&&e.singleRowAligned||t.percentWidth>0&&t.percentWidth<1||t.hasPX("maxWidth"))&&(!t||e.every(e=>e.marginTop>=0))}function hi(e,t){if(e.leftTopAxis){const i=e.absoluteParent;if(i.documentBody)switch(t){case"top":if(0===i.getBox(2)[0])return i.marginTop;break;case"left":return i.marginLeft}}return 0}function di(e){const{centerAligned:t,rightAligned:i}=e;e.css("display","inline-block",true),e.setCacheValue("centerAligned",t),e.setCacheValue("rightAligned",i)}function fi(e){return Wt(e,e=>"right"===e.float||true===e.autoMargin.left)}const ui=(e,t,i=true)=>t.size&&e.some((e,a)=>(a>0||!i)&&t.has(e)),pi=e=>e.plainText&&B.hasLineBreak(e,false,true)||e.preserveWhiteSpace&&_t.LEADINGNEWLINE.test(e.textContent),gi=e=>Math.max(e.actualHeight,e.lineHeight),mi=e=>ci(e,true)?t.CONSTRAINT:e.some(e=>e.positionRelative||!e.pageFlow&&e.autoPosition)?t.RELATIVE:t.LINEAR,yi=e=>ci(e,true)?t.CONSTRAINT:e.some(e=>e.positionRelative)?t.RELATIVE:t.LINEAR,bi=(e=false)=>e?{anchorStart:"right",anchorEnd:"left",chainStart:"rightLeft",chainEnd:"leftRight"}:{anchorStart:"left",anchorEnd:"right",chainStart:"leftRight",chainEnd:"rightLeft"},Ti=(e,t,i)=>e.containerType===t&&e.length===i&&(0===e.alignmentType||e.hasAlign(2));function Ei(e){if(e.centerAligned)e.anchorParent("horizontal",.5);else{const t=e.autoMargin;if(t.horizontal)e.anchorParent("horizontal",t.left?1:t.leftRight?.5:0);else{const t=e.rightAligned;if(t)e.anchor("right","parent"),e.anchorStyle("horizontal",1);else e.anchor("left","parent"),e.anchorStyle("horizontal",0);if(e.blockStatic||e.percentWidth>0||e.block&&e.multiline&&e.floating)e.anchor(t?"left":"right","parent")}}}function Si(e,t=true,i=false){const a=e.autoMargin;let n=t?0:NaN;if(e.floating)n=0;else if(a.vertical)n=a.top?1:a.topBottom?.5:0;else if(e.imageOrSvgElement||e.inlineVertical)switch(e.verticalAlign){case"baseline":n=t?0:1;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=0;break}else{const t=e.actualParent;if("table-cell"===(null==t?void 0:t.display))switch(t.verticalAlign){case"middle":n=.5;break;case"bottom":n=1;break;default:n=0;break}}if(!isNaN(n))if(i)e.app("layout_constraintVertical_bias",n.toString(),false),e.delete("layout_constraintVertical_chainStyle");else e.anchorStyle("vertical",n,t?"":"packed",false)}class Ai extends squared.base.ControllerUI{constructor(e,t){super(),this.application=e,this.cache=t,this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:Xt},directory:{string:"res/values",font:"res/font",image:"res/drawable",video:"res/raw",audio:"res/raw"},svg:{enabled:false},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:mt(4)?"rgb(255, 255, 255)":"rgb(221, 221, 221)",inputColorBorderColor:"rgb(119, 119, 199)",meterForegroundColor:"rgb(99, 206, 68)",meterBackgroundColor:"rgb(237, 237, 237)",progressForegroundColor:"rgb(138, 180, 248)",progressBackgroundColor:"rgb(237, 237, 237)"},mimeType:{font:["font/ttf","font/otf"],image:["image/jpeg","image/png","image/gif","image/bmp","image/webp","image/svg+xml","image/heic","image/heif","image/x-icon"],audio:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","audio/aac","audio/flac","audio/gsm","audio/midi","audio/mpeg","audio/wav","audio/ogg"],video:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","video/webm"]},unsupported:{cascade:new Set(["SELECT","svg"]),tagName:new Set(["HEAD","TITLE","META","SCRIPT","STYLE","LINK","OPTION","INPUT:hidden","COLGROUP","MAP","AREA","SOURCE","TEMPLATE","DATALIST","TRACK"]),excluded:new Set(["BR","WBR"])},precision:{standardFloat:3},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.35,superscriptTopOffset:.35,legendBottomOffset:.25}}}init(){const{resolutionDPI:e,resolutionScreenWidth:t,resolutionScreenHeight:i,supportRTL:a,targetAPI:n}=this.userSettings,o=160/e,r={width:t*o,height:i*o};this._targetAPI=n||29,this._screenDimension=r,this._defaultViewSettings={screenDimension:r,supportRTL:a,floatPrecision:this.localSettings.precision.standardFloat},super.init()}optimize(e){const t=e.length;let i=0;while(i<t){const t=e[i++];if(t.applyOptimizations(),t.hasProcedure(zt.CUSTOMIZATION))t.applyCustomizations(this.userSettings.customizationsOverwritePrivilege)}}finalize(e){const t=this.userSettings.insertSpaces;e.forEach(e=>{const i=e.content;e.content=Gt(i.replace("{#0}",se(i)),t)})}processUnknownParent(e){const i=e.node;if(e.some(e=>!e.pageFlow&&!e.autoPosition))e.setContainerType(t.CONSTRAINT,34);else if(e.length<=1){const a=i.item(0);if(a){if(i.originalRoot&&function(e,t){const i=t.dataset.target;if(i&&e){const t=document.getElementById(i);return!!t&&t!==e}return false}(i.element,a))return i.hide(),{layout:e,next:true};else if(i.naturalElement&&a.plainText)a.hide(),i.clear(),i.inlineText=true,i.textContent=a.textContent,e.setContainerType(t.TEXT),e.add(1024);else if(e.parent.flexElement&&a.baselineElement&&"baseline"===i.flexbox.alignSelf)e.setContainerType(t.LINEAR,8);else if(a.percentWidth>0&&a.percentWidth<1)e.setContainerType(t.CONSTRAINT,32768);else if(i.autoMargin.leftRight||i.autoMargin.left)e.setContainerType(t.CONSTRAINT);else if(a.baselineElement)e.setContainerType(yi(e),16);else e.setContainerType(t.FRAME);e.add(4096)}else return this.processUnknownChild(e)}else if(B.hasLineBreak(i,true))e.setContainerType(yi(e),18);else if(this.checkConstraintFloat(e))if(e.setContainerType(t.CONSTRAINT),e.every(e=>e.floating))e.add(512);else if(e.linearY)e.add(16);else if(e.some(e=>e.floating||e.rightAligned)&&e.singleRowAligned)e.add(8);else e.add(e.some(e=>e.blockStatic)?16:1024),e.add(2);else if(e.linearX||e.singleRowAligned){if(this.checkFrameHorizontal(e))e.addRender(512),e.addRender(8);else if(this.checkConstraintHorizontal(e))e.setContainerType(t.CONSTRAINT);else if(this.checkLinearHorizontal(e)){if(e.setContainerType(t.LINEAR),e.floated.size)Kt(e.children)}else e.setContainerType(ci(e,false)?t.CONSTRAINT:t.RELATIVE);e.add(8)}else if(e.linearY)e.setContainerType(mi(e),16|(i.originalRoot||e.some((t,i)=>i>0&&t.inlineFlow&&e.item(i-1).inlineFlow)?2:0));else if(e.every(e=>e.inlineFlow))if(this.checkFrameHorizontal(e))e.addRender(512),e.addRender(8);else e.setContainerType(mi(e),18);else{const i=e.children,a=this.application.clearMap;if(e.some((e,t)=>e.alignedVertically(t>0?i.slice(0,t):void 0,a)>0))e.setContainerType(mi(e),18);else e.setContainerType(t.CONSTRAINT,2)}return{layout:e}}processUnknownChild(e){const i=e.node,a=i.visibleStyle.background;if(i.inlineText&&(!i.textEmpty||a))e.setContainerType(t.TEXT);else if(i.blockStatic&&0===i.naturalChildren.length&&(a||i.contentBoxHeight>0))e.setContainerType(t.FRAME);else if(0===i.bounds.height&&i.naturalChild&&0===i.naturalElements.length&&""===i.elementId&&0===i.marginTop&&0===i.marginRight&&0===i.marginBottom&&0===i.marginLeft&&!i.originalRoot&&!a&&!i.dataset.use)return i.hide(),{layout:e,next:true};else switch(i.tagName){case"OUTPUT":e.setContainerType(t.TEXT);break;default:if(""!==i.textContent&&(a||i.pseudoElement&&"::after"===It(i.element,i.sessionId)))e.setContainerType(t.TEXT),i.inlineText=true;else e.setContainerType(t.FRAME)}return{layout:e}}processTraverseHorizontal(e,i){const a=e.parent;if(1===e.floated.size&&e.every(e=>e.floating))if(Ti(a,t.CONSTRAINT,e.length))return a.addAlign(512),void a.removeAlign(2);else e.node=this.createNodeGroup(e.node,e.children,{parent:a}),e.setContainerType(t.CONSTRAINT,512);else if(this.checkFrameHorizontal(e))e.node=this.createNodeGroup(e.node,e.children,{parent:a}),e.addRender(512),e.addRender(8);else if(e.length!==i.length||a.hasAlign(16))e.node=this.createNodeGroup(e.node,e.children,{parent:a}),this.processLayoutHorizontal(e);else{if(!a.hasAlign(1024))a.addAlign(8);a.removeAlign(2)}return e}processTraverseVertical(e){const i=e.parent,a=this.application.clearMap,n=e.floated.size,o=e.length,r=()=>{i.addAlign(16),i.removeAlign(2)};if(e.some((e,t)=>e.lineBreakTrailing&&t<o-1)){if(!i.hasAlign(16)){const t=mi(e);if(Ti(i,t,o))return void r();else{if(i.layoutConstraint)if(i.addAlign(16),!i.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,18)}}}else if(1===n&&e.every((e,t)=>0===t||t===o-1||a.has(e)))if(e.same(e=>e.float))if(Ti(i,t.CONSTRAINT,o))return void r();else e.node=this.createLayoutGroup(e),e.setContainerType(t.CONSTRAINT,512);else if(ui(e,a)||this.checkFrameHorizontal(e))e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(8);else{const t=yi(e);if(Ti(i,t,o))return void r();else{if(i.layoutConstraint)if(i.addAlign(16),!i.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,16)}}else if(n)if(ui(e,a))e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(16);else if(e.item(0).floating)e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(8);if(!i.hasAlign(16)){const t=yi(e);if(Ti(i,t,o))return void r();else{if(i.layoutConstraint)if(i.addAlign(16),!i.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,16)}}return e}processLayoutHorizontal(e){if(this.checkConstraintFloat(e))e.setContainerType(t.CONSTRAINT,e.every(e=>e.floating)?512:1024);else if(this.checkConstraintHorizontal(e))e.setContainerType(t.CONSTRAINT,8);else if(this.checkLinearHorizontal(e)){if(e.setContainerType(t.LINEAR,8),e.floated.size)Kt(e.children)}else e.setContainerType(t.RELATIVE,8);return e}sortRenderPosition(e,t){if(e.layoutRelative){if(t.some(e=>0!==e.node.zIndex))t.sort(Zt)}else if(e.layoutConstraint)if(t.some(e=>{return 0!==(t=e.node).zIndex||!t.pageFlow;var t})){let i=[];const a=e.innerMostWrapped,n=[],o=[];if(t.forEach(e=>{const t=e.node.innerMostWrapped;if(t.pageFlow||t.actualParent===t.documentParent||t===a)i.push(e),n.push(t);else o.push(e)}),i.sort(Zt),o.length){const e=new Map,t=[],a=[];o.forEach(i=>{var o;const r=i.node.innerMostWrapped,s=r.ascend({condition:e=>n.includes(e),error:e=>e.originalRoot})[0];if(s)(null===(o=e.get(s))||void 0===o?void 0:o.push(i))||e.set(s,[i]);else if(r.zIndex<0)a.push(i);else t.push(i)});for(const[n,o]of e.entries()){o.sort(Zt);const e=i.findIndex(e=>e.node.innerMostWrapped===n);if(-1!==e)i.splice(e+1,0,...o);else o.forEach(e=>{if(e.node.innerMostWrapped.zIndex<0)a.push(e);else t.push(e)})}if(a.length)a.sort($t),i=a.concat(i);if(t.length)t.sort($t),i=i.concat(t)}return i}return t}checkFrameHorizontal(e){switch(e.floated.size){case 1:if("center"===e.node.cssAscend("textAlign",true)&&e.some(e=>e.pageFlow))return true;else if(e.floated.has("right")){let t=0,i=false;for(const a of e)if(!a.floating){if(a.multiline)i=true;t++}else if(i)return false;return t>0&&!e.singleRowAligned}return e.item(0).floating&&(e.linearY||e.length>2&&!e.singleRowAligned&&!e.every(e=>e.inlineFlow)||e.every(e=>e.floating||e.block&&(!e.isEmpty||!(e.textElement||e.inputElement||e.imageElement||e.svgElement||e.controlElement))));case 2:return true}return false}checkConstraintFloat(e){if(e.length>1){const t=this.application.clearMap;let i=true,a=true;for(const n of e)if(!t.has(n)){const e=n.inputElement||n.controlElement;if(i&&!(n.floating||n.autoMargin.horizontal||n.inlineDimension&&!e||n.imageOrSvgElement||n.marginTop<0))i=false;if(a&&0===n.percentWidth)a=false;if(!i&&!a)return false}return true}return false}checkConstraintHorizontal(e){if(e.length>1&&e.singleRowAligned){const t=e.floated.size;if(t&&(2===t||ui(e,this.application.clearMap)||e.some(e=>"left"===e.float)&&e.some(e=>true===e.autoMargin.left)||e.some(e=>"right"===e.float)&&e.some(e=>true===e.autoMargin.right)))return false;else return e.some(t=>t.blockVertical||t.percentWidth>0&&t.percentWidth<1&&!t.inputElement&&!t.controlElement||t.marginTop<0||"bottom"===t.verticalAlign&&!e.parent.hasHeight)}return false}checkLinearHorizontal(e){const t=e.floated,i=t.size;if((0===i||1===i&&t.has("left"))&&0===e.node.lineHeight&&e.singleRowAligned){const{fontSize:t,lineHeight:i}=e.item(0),a=e.parent.actualBoxWidth();let n=0;for(const o of e){if(!(o.naturalChild&&o.isEmpty&&!o.inputElement&&!o.controlElement&&!o.positionRelative&&o.baseline&&!o.blockVertical&&0===o.zIndex&&o.lineHeight===i&&o.fontSize===t))return false;else n+=o.linear.width;if(n>=a)return false}return true}return false}setConstraints(){this.cache.each(e=>{const t=e.renderChildren;if(t.length&&e.hasProcedure(zt.CONSTRAINT))if(e.hasAlign(4)){if(e.layoutConstraint&&!e.layoutElement)this.evaluateAnchors(t)}else if(e.layoutRelative)this.processRelativeHorizontal(e,t);else if(e.layoutConstraint){let i=0;const a=t.length,n=new Array(a);if(t.forEach(t=>{if(!t.positioned)if(t.pageFlow||t.autoPosition)n[i++]=t;else{const i=t.constraint;if(t.outerWrapper===e){if(!i.horizontal)t.anchorParent("horizontal",0);if(!i.vertical)t.anchorParent("vertical",0)}else{if(t.leftTopAxis){if(!i.horizontal)ni(t,e,true);if(!i.vertical)ni(t,e,false)}if(!i.horizontal)this.addGuideline(t,e,{orientation:"horizontal"});if(!i.vertical)this.addGuideline(t,e,{orientation:"vertical"});t.positioned=true}}}),i>0){if(n.length=i,e.layoutHorizontal)this.processConstraintHorizontal(e,n);else if(i>1)this.processConstraintChain(e,n);else{const e=n[0],{horizontal:t,vertical:i}=e.constraint;if(!t)Ei(e);if(!i)e.anchorParent("vertical"),Si(e);dt.setConstraintDimension(e,1)}this.evaluateAnchors(n)}}})}renderNodeGroup(e){const{node:i,containerType:a}=e,n=ae();let o=false;switch(a){case t.LINEAR:n.android.orientation=Lt(e.alignmentType,16)?"vertical":"horizontal",o=true;break;case t.GRID:{const{columnCount:t,rowCount:i}=e,a=n.android;if(i>0)a.rowCount=i.toString();a.columnCount=t>0?t.toString():"1",o=true;break}case t.FRAME:case t.RELATIVE:case t.CONSTRAINT:o=true;break;default:if(e.isEmpty)return this.renderNode(e);break}if(o){const t=i.dataset,o=!t.use&&t.target;return i.setControlType(dt.getControlName(a,i.api),a),i.addAlign(e.alignmentType),i.render(o?this.application.resolveTarget(o):e.parent),i.apply(n),{type:1,node:i,controlName:i.controlName}}}renderNode(e){var i,a;let{parent:o,containerType:r}=e;const s=e.node,l=s.dataset;let c=!l.use&&l.target,h=dt.getControlName(r,s.api);switch(s.tagName){case"IMG":{const a=this.application,r=s.element,l=s.absoluteParent||s.documentParent;let h=s.toFloat("width",0),d=s.toFloat("height",0),f=s.percentWidth>0?h:-1;const u=s.percentHeight>0?d:-1;let p,g="fitXY";if(Pt(r.srcset)||"PICTURE"===(null===(i=s.actualParent)||void 0===i?void 0:i.tagName)){const e=this.localSettings.mimeType.image;if(p=Tt(r,"*"===e?void 0:e),p.length){const e=p[0],t=e.actualWidth;if(t)if(-1===f)[h,d]=oi(s,t,d,a.resourceHandler.getImage(r.src));else h=s.bounds.width,f=-1;else{const t=a.resourceHandler.getImage(e.src);if(t)if(-1===f)[h,d]=oi(s,t.width,d,t);else h=s.bounds.width,f=-1}}else p=void 0}if(-1!==f||-1!==u){const e=l.box;if(f>=0)if(h*=e.width/100,f<100&&!o.layoutConstraint)s.css("width",bt(h));if(u>=0)if(d*=e.height/100,u<100&&!(o.layoutConstraint&&l.hasHeight))s.css("height",bt(d))}else switch(s.css("objectFit")){case"contain":g="centerInside";break;case"cover":g="centerCrop";break;case"scale-down":g="fitCenter";break;case"none":g="center";break}if(s.android("scaleType",g),h>0&&o.hasPX("maxWidth",false)&&(-1===f||100===f)){const e=o.parseWidth(o.css("maxWidth"));if(e<=h)h=e,s.css("width",bt(h))}else if(d>0&&o.hasPX("maxHeight",false)&&(-1===u||100===u)){const e=o.parseHeight(o.css("maxHeight"));if(e<=d)d=e,s.css("maxHeight",bt(d)),s.setLayoutHeight("wrap_content")}if(s.baseline)if(s.android("baselineAlignBottom","true"),s.marginBottom>0&&o.layoutLinear&&o.layoutHorizontal)s.mergeGravity("layout_gravity","bottom");if(s.hasResource(Ut.IMAGE_SOURCE)){const e=a.resourceHandler.addImageSrc(r,"",p);if(""!==e)s.android("src","@drawable/"+e)}if(!s.pageFlow&&o===l&&(s.left<0&&"hidden"===o.css("overflowX")||s.top<0&&"hidden"===o.css("overflowY"))){const i=l.box,r=a.createNode({parent:o,replace:s});if(r.setControlType(n.FRAME,t.FRAME),r.inherit(s,"base"),r.cssCopy(s,"position","zIndex"),r.exclude({resource:Ut.ALL,procedure:zt.ALL}),r.autoPosition=false,h>0)r.setLayoutWidth(h<i.width?bt(h):"match_parent");else r.setLayoutWidth("wrap_content");if(d>0)r.setLayoutHeight(d<i.height?bt(d):"match_parent");else r.setLayoutHeight("wrap_content");if(r.render(c?a.resolveTarget(c):o),r.saveAsInitial(),!o.layoutConstraint)s.modifyBox(2,s.top),s.modifyBox(16,s.left);a.addLayoutTemplate(o,r,{type:1,node:r,controlName:n.FRAME}),o=r,e.parent=r,c=void 0}break}case"INPUT":{const e=s.element;switch(e.type){case"radio":case"checkbox":if(e.checked)s.android("checked","true");break;case"text":s.android("inputType","text");break;case"password":s.android("inputType","textPassword");break;case"number":case"range":s.android("inputType","number"),s.android("progress",e.value),si(s,e);break;case"time":s.android("inputType","time"),si(s,e);break;case"date":s.android("inputType","date"),si(s,e);break;case"datetime-local":s.android("inputType","datetime"),si(s,e);break;case"email":s.android("inputType","textEmailAddress"),ri(s,e);break;case"tel":s.android("inputType","phone"),ri(s,e);break;case"url":s.android("inputType","textUri"),ri(s,e);break;case"week":case"month":case"search":s.android("inputType","text"),ri(s,e);break;case"image":case"color":if(0===s.width)s.css("width",bt(s.bounds.width));break}break}case"BUTTON":s.naturalChildren.forEach(e=>{if(!e.pageFlow||!e.textElement)e.android("elevation","2px")});break;case"TEXTAREA":{const{cols:e,maxLength:t,placeholder:i,rows:a}=s.element;switch(s.android("minLines",a>0?a.toString():"2"),s.css("verticalAlign")){case"middle":s.mergeGravity("gravity","center_vertical");break;case"bottom":s.mergeGravity("gravity","bottom");break;default:s.mergeGravity("gravity","top");break}if(t>0)s.android("maxLength",t.toString());if(!s.hasPX("width")&&e>0)s.css("width",bt(8*e));if(s.android("hint",i),s.android("scrollbars","vertical"),s.android("inputType","textMultiLine"),s.overflowX)s.android("scrollHorizontally","true");break}case"LEGEND":{if(!s.hasWidth)s.css("minWidth",bt(s.actualWidth)),di(s);const e=s.actualHeight*this.localSettings.deviations.legendBottomOffset;s.modifyBox(8,e),s.linear.bottom+=e;break}case"METER":case"PROGRESS":{const{min:e,max:t,value:i}=s.element;let a,n;if("METER"===s.tagName){if(({meterForegroundColor:a,meterBackgroundColor:n}=this.localSettings.style),t){if(i)s.android("progress",Math.round(i/t*100).toString());if(100===t)s.android("min",e.toString()),s.android("max",t.toString())}}else{if(({progressForegroundColor:a,progressBackgroundColor:n}=this.localSettings.style),i)s.android("progress",i.toString());if(t)s.android("max",t.toString())}if(!s.hasWidth)s.css("width",bt(s.bounds.width));if(!s.hasHeight)s.css("height",bt(s.bounds.height));s.android("progressTint","@color/"+B.addColor(a)),s.android("progressBackgroundTint","@color/"+B.addColor(n)),s.attr("_","style","@android:style/Widget.ProgressBar.Horizontal"),s.exclude({resource:Ut.BOX_STYLE|Ut.FONT_STYLE});break}case"AUDIO":case"VIDEO":{const i=this.localSettings.mimeType.video,a=s.element;let n,o=a.src;if(kt(i,o))n=Mt(o);else o="",Ot(a.children,e=>{if("SOURCE"===e.tagName)if(kt(i,e.src))return o=e.src,n=Mt(o),true;else if(n=e.type.trim().toLowerCase(),i.includes(n))return o=e.src,true});if(!s.hasPX("width"))s.css("width",bt(s.actualWidth),true);if(!s.hasPX("height"))s.css("height",bt(s.actualHeight),true);if(s.inline)di(s);if(Pt(o))this.application.resourceHandler.addVideo(o,n),s.inlineText=false,s.exclude({resource:Ut.FONT_STYLE});else if(Pt(a.poster)){s.setCacheValue("tagName","IMG"),o=a.src,a.src=a.poster,e.containerType=t.IMAGE;const i=this.renderNode(e);return a.src=o,i}else r=t.TEXT,h=dt.getControlName(r,s.api),e.containerType=r,s.inlineText=true}}switch(h){case n.TEXT:{let e="";if(s.overflowX)e+="horizontal";if(s.overflowY)e+=(""!==e?"|":"")+"vertical";if(""!==e)s.android("scrollbars",e);if(s.has("letterSpacing"))s.android("letterSpacing",wt(s.toFloat("letterSpacing")/s.fontSize,s.localSettings.floatPrecision));if("justify"===s.css("textAlign"))s.android("justificationMode","inter_word");if(s.has("textShadow")){const e=jt.exec(s.css("textShadow"));if(e){const t=B.addColor(yt(e[1]||s.css("color")));if(""!==t){const i=s.localSettings.floatPrecision;s.android("shadowColor","@color/"+t),s.android("shadowDx",wt(2*s.parseWidth(e[2]),i)),s.android("shadowDy",wt(2*s.parseHeight(e[3]),i)),s.android("shadowRadius",wt(Pt(e[4])?Math.max(s.parseWidth(e[4]),0):.01,i))}}}if("nowrap"===s.css("whiteSpace"))if(s.android("maxLines","1"),"ellipsis"===s.css("textOverflow")&&"hidden"===s.css("overflow"))s.android("ellipsize","end");break}case n.BUTTON:if(!s.hasHeight)s.android("minHeight",bt(Math.ceil(s.actualHeight)));s.mergeGravity("gravity","center_vertical"),ai(s);break;case n.SELECT:case n.CHECKBOX:case n.RADIO:ai(s);break;case n.EDIT:if(!s.companion&&s.hasProcedure(zt.ACCESSIBILITY))[s.previousSibling,s.nextSibling].some(e=>{if((null==e?void 0:e.visible)&&e.pageFlow){const t=s.element,i=e.element,a="LABEL"===e.documentParent.tagName&&e.documentParent;if(t.id&&t.id===i.htmlFor)return e.android("labelFor",s.documentId),true;else if(a&&e.textElement)return a.android("labelFor",s.documentId),true}return false});if(null===(a=s.element.list)||void 0===a?void 0:a.children.length)h=n.EDIT_LIST;else if(s.api>=26)s.android("importantForAutofill","no");ai(s);case n.RANGE:if(!s.hasPX("width"))s.css("width",bt(s.bounds.width));break;case n.LINE:if(!s.hasHeight)s.setLayoutHeight(bt(s.contentBoxHeight||1));break}return s.setControlType(h,r),s.addAlign(e.alignmentType),s.render(c?this.application.resolveTarget(c):o),{type:1,node:s,parent:o,controlName:h}}renderNodeStatic(e,t){const{controlType:i,width:a,height:n,content:o}=e;let r=e.controlName;if(!Pt(r))if(i)r=dt.getControlName(i,this.userSettings.targetAPI);else return"";const s=new dt(0,"0",void 0,this.afterInsertNode);if(s.setControlType(r),s.setLayoutWidth(a||"wrap_content"),s.setLayoutHeight(n||"wrap_content"),t)s.apply(t),t.documentId=s.documentId;return this.getEnclosingXmlTag(r,this.userSettings.showAttributes?s.extractAttributes(1):void 0,o)}renderSpace(e){const{android:t,app:i,column:a,columnSpan:o,row:r,rowSpan:s}=e;let{width:l,height:c}=e;if(l){if(At(l))t.layout_columnWeight=wt(parseFloat(l)/100,this.localSettings.precision.standardFloat),l="0px"}else l="wrap_content";if(c){if(At(c))t.layout_rowWeight=wt(parseFloat(c)/100,this.localSettings.precision.standardFloat),c="0px"}else c="wrap_content";if(void 0!==a)t.layout_column=a.toString();if(o)t.layout_columnSpan=o.toString();if(void 0!==r)t.layout_row=r.toString();if(s)t.layout_rowSpan=s.toString();const h={android:t,app:i},d=this.renderNodeStatic({controlName:n.SPACE,width:l,height:c},h);return e.documentId=h.documentId,d}addGuideline(e,t,i={}){const{percent:a,opposing:r,orientation:s}=i;let l=e.documentParent;if(t.nodeGroup&&!l.hasAlign(4))l=t;const c=l.box,h=e.linear,d=(i,d)=>{var f,u;if(e.constraint[i]||s&&i!==s)return;let p,g;if(d)if(!r)p="left",g="right";else p="right",g="left";else if(!r)p="top",g="bottom";else p="bottom",g="top";if(!a&&!r){if(Bt(h[p],c[p]))return void e.anchor(p,"parent",true);if(e.autoPosition){const t=e.siblingsLeading,a=t.length;if(a&&!e.alignedVertically()){const n=t[a-1];if(n.pageFlow&&n.renderParent===e.renderParent)return e.anchor(d?"leftRight":"top",n.documentId,true),void(e.constraint[i]=true)}}if(!e.pageFlow&&"fixed"!==e.css("position")&&!t.hasAlign(4)){const a=e.innerMostWrapped.bounds,n=t.renderChildren,o=n.length;let r=0;while(r<o){const t=n[r++];if(t===e||t.plainText||t.pseudoElement||t.originalRoot)continue;const o=t.innerMostWrapped;if(o.pageFlow||t.constraint[i]){const{linear:n,bounds:r}=o;let s,l=NaN;if(Bt(a[p],r[p]))s=p;else if(Bt(h[p],n[p]))s=p,l=(d?a.left-r.left:a.top-r.top)+hi(e,p);else if(Bt(h[p],n[g]))if(d)if(!e.hasPX("left")&&!e.hasPX("right")||!t.inlineStatic&&t.hasPX("width",false,true))s="leftRight",l=a.left-r.right;else continue;else if(!e.hasPX("top")&&!e.hasPX("bottom")||!t.inlineStatic&&t.hasPX("height",false,true))s="topBottom",l=a.top-r.bottom;else continue;else continue;if(d){if(!isNaN(l))if(e.setBox(16,{reset:1,adjustment:0}),0!==l)e.translateX(l)}else if(!isNaN(l))if(e.setBox(2,{reset:1,adjustment:0}),0!==l)e.translateY(l);return e.anchor(s,t.documentId,true),void(e.constraint[i]=true)}}const s=d?"top":"left";let l,c;const f=(t,a,n)=>{e.anchor(a,t,true),e.setBox(d?16:2,{reset:1,adjustment:n}),e.constraint[i]=true};r=0;while(r<o){const t=n[r++];if(t===e||t.pageFlow||t.originalRoot||!t.constraint[i])continue;const o=t.innerMostWrapped,u=o.bounds;if(Bt(a[s],u[s])||Bt(h[s],o.linear[s])){const e=a[p]-u[g];if(e>=0)return void f(t.documentId,d?"leftRight":"topBottom",e)}else if(u[p]<=a[p])if(u[s]<=a[s])l=o;else c=o}if(!l)l=c;if(l){const t=a[p]-l.bounds[p]+hi(e,p);if(t>=0)return void f(l.documentId,p,t)}}}const m=e.absoluteParent,y=e.positionStatic?e.bounds:h;let b="layout_constraintGuide_",T=0;if(!e.leftTopAxis&&l.originalRoot){const t=e.renderParent;if(l.ascend({condition:e=>e===t,attr:"renderParent"}).length)if(d)T=!r?l.marginLeft:l.marginRight;else T=!r?l.marginTop:l.marginBottom}if(a){const t=Math.abs(y[p]-c[p])/(d?c.width:c.height);T+=parseFloat(wt(!r?t:1-t,e.localSettings.floatPrecision)),b+="percent"}else T+=y[p]-c[!r?p:g],b+="begin";if(!e.pageFlow){if(l.outerWrapper&&e.parent===l.outerMostWrapper)T+=l[!r?d?"paddingLeft":"paddingTop":d?"paddingRight":"paddingBottom"];else if(m===e.documentParent){let e;if(d)e=!r?256:64;else e=!r?32:128;T=ie(l,e,T)}}else if(e.inlineVertical){const t=Ct(e.verticalAlign);if(t<0)T+=t}if(!d&&e.marginTop<0)T-=e.marginTop,e.setBox(2,{reset:1});if(e.constraint[i]=true,T<=0)e.anchor(p,"parent",true);else if(d&&T+y.width>=c.right&&l.hasPX("width")&&!e.hasPX("right")||!d&&T+y.height>=c.bottom&&l.hasPX("height")&&!e.hasPX("bottom"))e.anchor(g,"parent",true);else{const s=t.constraint.guideline||{},l=null===(u=null===(f=s[i])||void 0===f?void 0:f[b])||void 0===u?void 0:u[p];if(l)for(const t in l)if(parseInt(l[t])===T)return e.anchor(p,t,true),void e.anchorDelete(g);const c=ae(void 0,{android:{orientation:d?"vertical":"horizontal"},app:{[b]:a?T.toString():"@dimen/"+B.insertStoredAsset("dimens","constraint_guideline_"+(!r?p:g),bt(T))}});this.addAfterOutsideTemplate(e.id,this.renderNodeStatic({controlName:e.api<29?n.GUIDELINE:o.GUIDELINE},c),false);const h=c.documentId;if(h)if(e.anchor(p,h,true),e.anchorDelete(g),T>0)Rt(s,i,b,p,h,T.toString()),t.constraint.guideline=s}};d("horizontal",true),d("vertical",false)}addBarrier(e,t){const i=[];if(e.forEach(e=>{const a=e.constraint.barrier;if(!a)e.constraint.barrier={};else if(a[t])return;i.push(e)}),i.length){const e=ae(void 0,{android:{},app:{barrierDirection:t,constraint_referenced_ids:Dt(i,e=>J(e.anchorTarget.documentId)).join(",")}}),{api:a,anchorTarget:r}=i[i.length-1],s=this.renderNodeStatic({controlName:a<29?n.BARRIER:o.BARRIER},e);switch(t){case"top":case"left":this.addBeforeOutsideTemplate(r.id,s,false);break;default:this.addAfterOutsideTemplate(r.id,s,false);break}const l=e.documentId;if(l)return i.forEach(e=>e.constraint.barrier[t]=l),l}return""}evaluateAnchors(e){const t=[],i=[],a=e.length;let n=0;while(n<a){const a=e[n++],{horizontal:o,vertical:r}=a.constraint;if(o)t.push(a);if(r)i.push(a);if(a.alignParent("top")||a.alignSibling("top")){let t=a;do{const i=t.alignSibling("bottomTop");if(""!==i){const a=e.find(e=>e.documentId===i);if((null==a?void 0:a.alignSibling("topBottom"))===t.documentId)if(a.alignParent("bottom"))break;else t=a;else break}else{if(t!==a&&!t.alignParent("bottom"))if(t.blockHeight)t.anchor("bottom","parent");else{const e=t.constraint.barrier,i=!e||!Pt(e.bottom)?this.addBarrier([t],"bottom"):e.bottom;if(i)t.anchor("bottomTop",i)}break}}while(true)}}n=0;while(n<a){const a=e[n++],o=a.constraint,r=o.current;if(!o.horizontal)for(const e in r){const{documentId:i,horizontal:s}=r[e];if(s&&t.some(e=>e.documentId===i)){o.horizontal=true,t.push(a),n=0;break}}if(!o.vertical)for(const e in r){const{documentId:t,horizontal:s}=r[e];if(!s&&i.some(e=>e.documentId===t)){o.vertical=true,i.push(a),n=0;break}}}}createNodeGroup(e,t,i={}){const{parent:a,delegate:n,cascade:o}=i,r=new ft(this.cache.nextId,e,t,this.afterInsertNode);if(a)a.appendTry(e,r),r.init();else r.containerIndex=e.containerIndex;return this.cache.append(r,true===n,true===o),r}createNodeWrapper(e,t,i={}){const{children:a,containerType:n,alignmentType:o,resource:r,procedure:s,section:l}=i,c=this.application.createNode({parent:t,children:a,append:true,replace:e,delegate:true,cascade:true===i.cascade||!!a&&a.length>0&&!e.originalRoot});if(c.inherit(e,"base","alignment"),e.documentRoot)c.documentRoot=true,e.documentRoot=false;if(null===c.actualParent&&t.naturalElement)c.actualParent=t;if(n)c.setControlType(dt.getControlName(n,e.api),n);if(o)c.addAlign(o);if(c.addAlign(16384),c.exclude({resource:void 0===r?Ut.BOX_STYLE|Ut.ASSET:r,procedure:void 0===s?zt.CUSTOMIZATION:s,section:void 0===l?Ht.ALL:l}),c.saveAsInitial(),c.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),false!==i.inheritContentBox)c.setCacheValue("contentBoxWidth",e.contentBoxWidth),c.setCacheValue("contentBoxHeight",e.contentBoxHeight);if(i.resetMargin)e.resetBox(30,c);if(i.inheritDataset&&e.naturalElement){const t=c.dataset;Object.assign(t,e.dataset),delete t.use}if(e.renderParent&&e.removeTry())e.rendered=false;if(e.documentParent.layoutElement){const t=e.namespace("android");for(const e in t)if(e.startsWith("layout_"))c.android(e,t[e]),delete t[e]}return c}processRelativeHorizontal(e,i){const a=[];let o,r=false,s=false;if(e.hasAlign(16)){let e;i.forEach(t=>{if(e)t.anchor("topBottom",e.documentId);else t.anchor("top","true");if(t.pageFlow)a.push([t]),e=t;else r=true})}else{const t=e.nodeGroup?e.documentParent:e,n=t.actualBoxWidth((()=>{const a=e.renderParent;if(a.overflowY)return a.box.width;else{const t=e.actualParent;if(t)if(e.naturalElement&&e.inlineStatic&&t.blockStatic&&t===a){const{left:i,width:a}=t.box;return a-(e.linear.left-i)}else if(t.floatContainer){const{containerType:a,alignmentType:n}=this.containerTypeVerticalMargin;if(e.ascend({condition:e=>e.of(a,n),including:t,attr:"renderParent"}).length){const{left:a,right:n,width:o}=e.box;let r=0,s=0;return t.naturalChildren.forEach(t=>{const o=t.linear;if(t.floating&&!i.includes(t)&&e.intersectY(o))if("left"===t.float){if(Math.floor(o.right)>a)r=Math.max(r,o.right-a)}else if(n>Math.ceil(o.left))s=Math.max(s,n-o.left)}),o-r-s}}}return t.box.width})()),s=this.application.clearMap,l="nowrap"!==e.css("whiteSpace");let c,h=0,d=false,f=0;if(e.naturalElement){if(e.blockDimension)f=e.parseUnit(e.css("textIndent"))}else{const t=e.actualParent;if((null==t?void 0:t.blockDimension)&&t.has("textIndent")){const e=i[0];if(!e.rightAligned){const i=t.css("textIndent");if(f=t.parseUnit(i),0!==f){if(f<0)t.setCacheValue("paddingLeft",Math.max(0,t.paddingLeft+f));e.setCacheValue("blockDimension",true),e.css("textIndent",i),t.css("textIndent","0px")}}}}if(fi(i).forEach((t,i)=>{const u=t.length;if(0===u)return;const p=1===i;let g,m,y,b,T=true;if(p){if((!e.naturalElement&&t[0].actualParent||e).cssInitialAny("textAlign","right","end"))g="right",T=false,t[u-1].anchor(g,"true");else g="left";if(t.some(e=>e.floating))Kt(t);m=a}else g="right",o=[],m=o;for(let i=0;i<u;++i){const a=t[i];let o;if(p&&T){if(o="leftRight",0===i&&a.inline&&Math.abs(f)>=a.actualWidth&&"right"!==a.float&&!a.positionRelative)if(d=true,!a.floating)a.setCacheValue("float","left"),a.setCacheValue("floating",true)}else o="rightLeft";if(!a.pageFlow){if(y){const e=y.documentId;a.anchor(o,e),a.anchor("top",e)}else a.anchor(g,"true"),a.anchor("top","true");r=true;continue}let E,S=a.bounds;if(a.styleText&&!a.hasPX("width")){const e=a.textBounds;if(e&&(e.numberOfLines>1||Math.ceil(e.width)<a.box.width))S=e}let A=a.multiline;if(A&&Math.floor(S.width)<=n&&!a.hasPX("width")&&!pi(a))A=false,a.multiline=false;let v=true===a.autoMargin.horizontal;if(v)if(a.autoMargin.leftRight)a.anchorParent("horizontal");else a.anchor(a.autoMargin.left?"right":"left","true");if(y){let t=0,r=0,p=false;const x=()=>{if(y.floating&&y.alignParent(y.float)&&(A||Math.floor(h+a.actualWidth)<n))return true;else if(e.floating&&i===u-1&&a.textElement&&!/[\s-]/.test(a.textContent.trim())){const t=e.css("width");if(St(t)&&e.parseWidth(t)>e.parseWidth(e.css("minWidth")))e.cssApply({width:"auto",minWidth:t});return e.android("maxLines","1"),true}return false},w=()=>{if(r=h+a.marginLeft,c&&!b.includes(c))r+=c.linear.width;if(!c||!a.plainText||A||!b.includes(c)||s.has(a))r+=S.width;if(a.marginRight<0)r+=a.marginRight;if(t=n,f<0){if(m.length<=1)t+=f}else if(f>0&&1===m.length)t-=f;if(a.styleElement&&a.inlineStatic)r-=a.contentBoxWidth;return t=Math.ceil(t),true},_=()=>{var e;if(y.textElement)if(1===i&&a.plainText&&a.previousSibling===y&&!_t.TRAILINGSPACE.test(y.textContent)&&!_t.LEADINGSPACE.test(a.textContent))return p=true,false;else if(l&&y.multiline&&(y.bounds.width>=n||a.plainText&&B.hasLineBreak(y,false,true)))return true;if(x())return false;else if(l)if(w()&&Math.floor(r)>t)return true;else if("CODE"!==(null===(e=a.actualParent)||void 0===e?void 0:e.tagName))return A&&a.plainText||pi(a);return false},N=a.textElement&&_();if(y.floating&&ei(a,y))o="";E=a.inlineVertical&&y.inlineVertical&&a.previousSibling!==y?vt(y.element,a.element):void 0;const I=s.has(a);if(N||a.nodeGroup&&!a.hasAlign(128)||Math.ceil(a.bounds.top)>=y.bounds.bottom&&(a.blockStatic||a.floating&&y.float===a.float)||!a.textElement&&!x()&&w()&&Math.floor(r)>t||!a.floating&&(y.blockStatic||a.previousSiblings().some(e=>e.excluded&&e.blockStatic)||(null==E?void 0:E.some(e=>ii(e))))||I||y.autoMargin.horizontal||B.checkPreIndent(y)){if(I&&!c)a.setBox(2,{reset:1});if(T){if(c&&(a.bounds.bottom<=c.bounds.bottom||d)){if(!v)a.anchor(o,c.documentId)}else{if(!v)a.anchor(g,"true");c=void 0}v=true}else{if(c&&a.linear.bottom>c.bounds.bottom)c=void 0;y.anchor(g,"true")}h=Math.min(0,N&&!y.multiline&&A&&!I?a.linear.right-e.box.right:0),b=[a],m.push(b)}else{if(""!==o)if(T){if(!v)a.anchor(o,y.documentId),v=true}else y.anchor(o,a.documentId);if(A&&!a.hasPX("width")&&!y.floating&&!p)a.multiline=false;b.push(a)}}else{if(T)if(!v)a.anchor(g,"true");b=[a],m.push(b)}if("left"===a.float&&p)if(c){if(a.linear.bottom>c.linear.bottom)c=a}else c=a;if(false===(null==E?void 0:E.some(e=>!!Nt(e,a.sessionId)||ii(e)))){const e=xt(E[0]);if(!e.numberOfLines){const t=E.length>1&&xt(E.pop());if(!t||!t.numberOfLines)h+=t?e.left-t.right:e.width}}h+=a.marginLeft+S.width+a.marginRight,y=a}}),f<0&&1===a.length)e.setCacheValue("paddingLeft",Math.max(0,e.paddingLeft+f))}if(a.length>1||o&&o.length>1)s=true;const l=a=>{let o=null;const r=a.length,l=1===r&&!e.hasHeight;for(let c=0;c<r;++c){const h=a[c];let d;const f=h.length;if(f>1){const a=ti(h);let u=a[0];if(d=Yt.baseline(a.length?h.filter(e=>!a.includes(e)):h),d&&u)if(d!==u&&d.bounds.height<u.bounds.height)d.anchor("bottom",u.documentId);else d=Yt.baseline(h),u=void 0;const p=[];let g=0===c?"true":null==d?void 0:d.documentId,m=0,y=null,b=0;while(b<f){const t=h[b++];if(t===d||t===u)continue;const i=t.inlineVertical?t.css("verticalAlign"):"";if(t.controlElement){let i=t.bounds.top;if(o)i-=o.linear.bottom;else t.anchor("top","true"),i-=e.box.top;t.setBox(2,{reset:1,adjustment:i}),t.baselineAltered=true;continue}let a=false;if(t.baseline)if(t.naturalElements.length&&(St(t.verticalAlign)||!t.baselineElement))a=true;else p.push(t);else switch(i){case"text-top":if(null===y)y=Yt.baseline(h,true);if(y&&t!==y)t.anchor("top",y.documentId);break;case"super":if(!t.baselineAltered)t.modifyBox(2,-1*Math.floor(t.baselineHeight*this.localSettings.deviations.superscriptTopOffset));case"top":if(g&&g!==t.documentId)t.anchor("top",g);else if(d)t.anchor("top",d.documentId);break;case"middle":{const e=Math.max(t.actualHeight,t.lineHeight);if(!s){if(t.anchor("centerVertical","true"),t.imageElement)m=Math.max(e,m)}else if(d){const i=Math.max(d.actualHeight,d.lineHeight);if(e<i)t.anchor("top",d.documentId),t.setBox(2,{reset:1,adjustment:Math.round((i-e)/2)}),t.baselineAltered=true;else if(e>m)m=e}break}case"text-bottom":if(null===y)y=Yt.baseline(h,true);if(y!==t&&y)t.anchor("bottom",y.documentId);else if(d)t.anchor("bottom",d.documentId);break;case"sub":if(!t.baselineAltered)t.modifyBox(8,-1*Math.ceil(t.baselineHeight*this.localSettings.deviations.subscriptBottomOffset));case"bottom":if(g&&!Bt(e.bounds.height,t.bounds.height)){if(!e.hasHeight&&"true"===g)if(!s)e.css("height",bt(e.bounds.height));else if(d)g=d.documentId;t.anchor("bottom",g)}break;default:a=!t.baselineAltered;break}if(0===c&&a)t.anchor("top","true")}const T=p.length;if(d){if(d.baselineActive=true,T){if(Qt(d,p,l,e.box.top),l&&d.is(t.BUTTON))d.anchor("centerVertical","true"),d=null}else if(d.textElement)if(m>Math.max(d.actualHeight,d.lineHeight))d.anchor("centerVertical","true"),d=null;else if(d.multiline){const{left:e,height:t}=d.bounds;let i=0;while(i<f){const a=h[i++];if(a===d)break;else if(e<a.bounds.right&&t<a.bounds.height){d.anchor("bottom",a.documentId);break}}}}else if(T>0&&T<f)if(u=ti(h)[0],u){let e=0;while(e<T){const t=p[e++];if(t.baseline&&!t.multiline&&u.bounds.height>t.bounds.height)t.anchor("bottom",u.documentId)}}let E=true,S=f-1;while(S>=0){const e=h[S--];if(e.textElement)e.setSingleLine(E&&!e.rightAligned&&!e.centerAligned),E=false}if("center"===e.cssInitial("textAlign")&&r>1){const a=this.application,r=this.createNodeGroup(h[0],h,{parent:e});r.setControlType(n.RELATIVE,t.RELATIVE),r.render(e),r.anchorParent("horizontal"),r.setLayoutWidth("wrap_content"),r.setLayoutHeight("wrap_content");let s=-1;if(h.forEach(e=>{const t=i.indexOf(e);if(-1!==t)if(-1===s)s=t;else s=Math.min(t,s);e.removeTry(),e.render(r),a.addLayoutTemplate(r,e,{type:1,node:e,controlName:e.controlName})}),a.addLayoutTemplate(e,r,{type:1,node:r,controlName:r.controlName},s),o)r.anchor("topBottom",o.documentId);else o=r;continue}}else if(d=h[0],d.centerAligned)d.anchorParent("horizontal"),d.anchorDelete("left","right");let u=false;if(null===d)d=h[0],u=true;let p=0;while(p<f){const e=h[p++];if(o&&!e.alignSibling("baseline"))e.anchor("topBottom",o.documentId);if(u&&e.linear.bottom>=d.linear.bottom)d=e}o=d}};if(l(a),o)l(o);if(e.horizontalRows=o?a.concat(o):a,r){const t=e.renderChildren,i=e.renderTemplates,a=[];for(let e=0;e<t.length;++e)if(!t[e].pageFlow)a.push(i[e]),t.splice(e,1),i.splice(e--,1);a.forEach(e=>{t.push(e.node),i.push(e)})}}processConstraintHorizontal(e,t){const i=e.hasAlign(2048),{anchorStart:a,anchorEnd:n,chainStart:o,chainEnd:r}=bi(i);let s,l,c,h=0,d=true,f=null,u=0;const p=t=>{t.anchorParent("vertical",0),t.setBox(2,{reset:1,adjustment:Math.max(t.bounds.top-e.box.top,Math.min(-1*Ct(t.verticalAlign),0))}),t.baselineAltered=true,d=false};if(!i)switch(e.cssAscend("textAlign",true)){case"center":h=.5;break;case"right":case"end":h=1;break}if(t.some(e=>e.floating)){if(!i)switch(h){case.5:{let i;if([i,t]=Wt(t,e=>e.floating||true===e.autoMargin.horizontal),i.length)this.processConstraintChain(e,i);break}case 1:{let i;if([i,t]=function(e){return Wt(e,e=>"left"===e.float||true===e.autoMargin.right)}(t),i.length)this.processConstraintChain(e,i);break}default:{let i;if([i,t]=fi(t),i.length)this.processConstraintChain(e,i);break}}Kt(t)}if(!e.hasPX("width")&&t.some(e=>e.percentWidth>0))e.setLayoutWidth("match_parent");const g=Yt.baseline(t),m=ti(t)[0],y=null==g?void 0:g.documentId;let b=dt.availablePercent(t,"width",e.box.width);const T=t.length;for(let e=0;e<T;++e){const i=t[e];if(c){if(i.pageFlow){if(c.anchor(r,i.documentId),i.anchor(o,c.documentId),e===T-1)i.anchor(n,"parent")}else if(i.autoPosition)i.anchor(o,c.documentId)}else if(1===T)if(h=i.centerAligned?.5:i.rightAligned?1:0,i.blockStatic||.5===h)i.anchorParent("horizontal",h);else i.anchor(a,"parent"),i.anchorStyle("horizontal",0);else i.anchor(a,"parent"),i.anchorStyle("horizontal",h,"packed");if(i.pageFlow){if(i!==g){if(i.controlElement)p(i);else if(i.inlineVertical){if(!s||gi(i)>gi(s))s=i;switch(i.css("verticalAlign")){case"text-top":if(null===f)f=Yt.baseline(t,true);if(f&&i!==f)i.anchor("top",f.documentId);else p(i);break;case"middle":if(false===(null==g?void 0:g.textElement)||m)p(i);else i.anchorParent("vertical",.5);break;case"text-bottom":if(null===f)f=Yt.baseline(t,true);if(f&&i!==f){if(i!==m)i.anchor("bottom",f.documentId);else if(m)p(i);break}case"bottom":if(!l)t.forEach(e=>{if(!e.baseline&&(!l||e.linear.bottom>l.linear.bottom))l=e});if(i===l)p(i);else i.anchor("bottom","parent");break;case"baseline":if(null===g||i.blockVertical||!i.textElement&&gi(i)>gi(g))p(i);else i.anchor("baseline",y||"parent"),u++;break;default:p(i);break}}else if(i.plainText)i.anchor("baseline",y||"parent"),u++;else p(i);i.anchored=true}b=dt.setConstraintDimension(i,b),c=i}else if(i.autoPosition)if(y)i.anchor("top",y);else i.anchorParent("vertical",0),i.anchored=true,d=false}if(g){if(s&&s!==g&&g.textElement&&gi(s)>gi(g))switch(s.verticalAlign){case"middle":g.anchorParent("vertical",.5,"",true);break;case"baseline":g.anchor("baseline",s.documentId);break;case"bottom":case"text-bottom":g.anchor("bottom",s.documentId);break;default:p(g);break}else if(d&&g.baselineElement&&!g.imageOrSvgElement&&e.ascend({condition:e=>e.layoutHorizontal,error:e=>e.naturalChild&&e.layoutVertical||e.layoutGrid,attr:"renderParent"}).length)g.anchorParent("vertical"),g.anchor("baseline","parent");else p(g);g.baselineActive=u>0,g.anchored=true}}processConstraintChain(e,t){const i=this.application.clearMap,a=e.hasAlign(512),n=t[0].actualParent||e,o=Yt.partitionRows(t,i),r=o.length;if(!e.hasWidth&&t.some(e=>e.percentWidth>0))e.setLayoutWidth("match_parent",false);let s,l=[];for(let t=0;t<r;++t){const c=o[t],[h,d]=Wt(c,e=>"right"===e.float||true===e.autoMargin.left);let f,u,p,g=false;const m=(o,h)=>{const d=o.length;if(0===d)return;const{anchorStart:m,anchorEnd:y,chainStart:b,chainEnd:T}=bi(h),E=o[0],S=o[d-1];if(d>1){if(E.anchor(m,"parent"),h)S.anchorStyle("horizontal",1,"packed");else E.anchorStyle("horizontal",!a&&"center"===n.css("textAlign")?.5:0,"packed");S.anchor(y,"parent")}else Ei(E);let A=dt.availablePercent(c,"width",e.box.width);g=!((1!==t||E.floating||true!==(null==s?void 0:s.every(e=>e.floating))||0!==i.size&&c.some(e=>li(e,i)))&&(E.pageFlow||E.autoPosition&&1!==d)),p=void 0;for(let e=0;e<d;++e){const c=o[e];if(0===t||g)if(1===r)c.anchorParent("vertical"),Si(c,1===d,true);else c.anchor("top","parent"),c.anchorStyle("vertical",0,"packed");else if(t===r-1&&!u)c.anchor("bottom","parent");if(c.autoMargin.leftRight)c.anchorParent("horizontal");else if(d>1){const t=o[e-1],i=o[e+1];if(t)if(!t.pageFlow&&t.autoPosition){let t,i=e-2;while(i>=0)if(t=o[i--],t.pageFlow)break;else t=void 0;if(t)c.anchor(b,t.documentId);else c.anchor(m,"parent")}else c.anchor(b,t.documentId);if(i)c.anchor(T,i.documentId)}if(A=dt.setConstraintDimension(c,A),s&&0===e){if(i.has(c)&&!c.floating)c.modifyBox(2,-s[s.length-1].bounds.height,false);if(a){let e=false;for(const t of l)if(c.bounds.top<Math.floor(t.bounds.bottom)){e=true;break}if(e){f=s[s.length-1];let e=l.length-2;while(e>=0){const t=l[e--];if(t.linear.bottom>f.linear.bottom){if(h&&Math.ceil(t.linear[y])-Math.floor(n.box[y])<c.linear.width)continue;if(c.anchorDelete(m),c.anchor(b,t.documentId,true),h)c.modifyBox(4,t.marginLeft);else c.modifyBox(16,t.marginRight);if(E.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),E.anchorDelete(T),S.anchorDelete(y),!u)u=c;break}}}}}if(!p||c.linear.height>p.linear.height)p=c}};if(m(d,false),m(h,true),a)l=l.concat(d,h);if(!g){if(s){const e=c[0],t=s.length,i=c.length;if(1===t&&1===i){const t=s[0];t.anchor("bottomTop",e.documentId),e.anchor("topBottom",t.documentId),e.app("layout_constraintVertical_bias","0")}else{if(!f||!u){f=s[0];let e=1;while(e<t){const t=s[e++];if(t.linear.bottom>f.linear.bottom)f=t}}if(!u){u=c[0];let e=u.linear.top,t=1;while(t<i){const i=c[t++],a=i.linear.top;if(a<e||a===e&&i.linear.height>u.linear.height)u=i,e=a}}const e=u.documentId;f.anchor("bottomTop",e),u.anchor("topBottom",f.documentId),Si(u,1===t,true);const a=u.marginTop;c.forEach(t=>{if(t!==u)Si(t,1===i),t.anchor("top",e),t.modifyBox(2,-1*a)})}}s=c}}e.horizontalRows=o}createLayoutGroup(e){return this.createNodeGroup(e.node,e.children,{parent:e.parent})}get containerTypeHorizontal(){return{containerType:t.RELATIVE,alignmentType:8}}get containerTypeVertical(){return{containerType:t.CONSTRAINT,alignmentType:16}}get containerTypeVerticalMargin(){return{containerType:t.FRAME,alignmentType:256}}get containerTypePercent(){return{containerType:t.CONSTRAINT,alignmentType:32768}}get afterInsertNode(){return e=>{if(!this.userSettings.exclusionsDisabled)e.setExclusions();e.localSettings=this._defaultViewSettings,e.api=this._targetAPI}}get userSettings(){return this.application.userSettings}get screenDimension(){return this._screenDimension}}class vi extends squared.base.ExtensionManager{}var xi={resources:{">":{color:{"@":["name"],"~":true}}}},wi={resources:{">":{dimen:{"@":["name"],"~":true}}}},_i={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},Ni={resources:{">":{string:{"@":["name"],"~":true}}}},Ii={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":true}}}}}},Ri={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":true}}}}}};const Ci=squared.lib,{fromLastIndexOf:Li,objectMap:ki,parseMimeType:Pi,trimEnd:Oi}=Ci.util,{applyTemplate:Di,replaceTab:Mi}=Ci.xml,Wi=B.ASSETS,Bi=B.STORED,Xi=/^(.+)\/(.+?\.\w+)$/,Gi=/"(-?[\d.]+)px"/g,Hi=/>(-?[\d.]+)px</g;function Vi(e,t){const i=t.length;if(i){const a=new Array(i/3);for(let n=0,o=0;n<i;n+=3)a[o++]={pathname:e+t[n+1],filename:t[n+2],content:t[n]};return a}return t}function Fi(e,t,i,a){const n=t.length;if(n){i=i.toLowerCase();let o=Pi(i);if(!o.startsWith("image/"))o="";if(!/^[a-z\d]/.test(i))i="@"+i;const r=new Array(n/3);for(let s=0,l=0;s<n;s+=3){const n=t[s+2].split("?")[0].trim().toLowerCase();let c;if(""!==o){const e=Pi(n);if(e.startsWith("image/")&&e!==o)c=i+":"+e}r[l++]={pathname:e+t[s+1],filename:n,mimeType:c,compress:a&&B.canCompressImage(n)?[{format:"png"}]:void 0,uri:t[s]}}return r}return t}function zi(e,t){const i=t.length;if(i){const a=new Array(i/3);for(let n=0,o=0;n<i;n+=3)a[o++]={pathname:e,filename:t[n+2].toLowerCase(),mimeType:t[n+1],uri:t[n]};return a}return t}function Ui(e){if((e=e.trim()).endsWith("\\"))return Oi(e,"\\")+"/";else if(!e.endsWith("/"))return e+"/";return e}const qi=(e,t,i)=>({pathname:e,filename:t,content:i}),Yi=(e,t)=>"dp"===t?e.replace(Gi,(e,...t)=>'"'+Z(t[0],false)+'"'):e,ji=(e,t)=>e.toString().toLowerCase()>=t.toString().toLowerCase()?1:-1;class Ki extends squared.base.FileUI{copyToDisk(e,t){this.copying(Object.assign(Object.assign({},t),{assets:this.getAssetsAll(null==t?void 0:t.assets),directory:e}))}appendToArchive(e,t){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{assets:this.getAssetsAll(null==t?void 0:t.assets),appendTo:e}))}saveToArchive(e,t){this.archiving(Object.assign(Object.assign({},t),{assets:this.getAssetsAll(null==t?void 0:t.assets),filename:e}))}resourceAllToXml(e={}){const{directory:t,filename:i}=e,a={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),anim:this.resourceAnimToXml(),drawableImage:this.resourceDrawableImageToString(),rawVideo:this.resourceRawVideoToString(),rawAudio:this.resourceRawAudioToString()};for(const e in a)if(0===a[e].length)delete a[e];if(t||i){const n=this.userSettings,o=Ui(n.outputDirectory);let r=[];for(const e in a)switch(e){case"drawableImage":r=r.concat(Fi(o,a[e],n.convertImages,n.compressImages));break;case"rawVideo":r=r.concat(zi(o+this.directory.video,a[e]));break;case"rawAudio":r=r.concat(zi(o+this.directory.audio,a[e]));break;default:r=r.concat(Vi(o,a[e]));break}if(e.assets=r.concat(e.assets||[]),t)this.copying(e);if(i)this.archiving(e)}return a}resourceStringToXml(e={}){const t={string:[]},i=t.string;if(!Bi.strings.has("app_name"))i.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[e,t]of Array.from(Bi.strings.entries()).sort(ji))i.push({name:e,innerText:t});return this.checkFileAssets([Mi(Di("resources",Ni,[t]),this.userSettings.insertSpaces,true),this.directory.string,"strings.xml"],e)}resourceStringArrayToXml(e={}){if(Bi.arrays.size){const t={"string-array":[]},i=t["string-array"];for(const[e,t]of Array.from(Bi.arrays.entries()).sort())i.push({name:e,item:ki(t,e=>({innerText:e}))});return this.checkFileAssets([Mi(Di("resources",Ii,[t]),this.userSettings.insertSpaces,true),this.directory.string,"string_arrays.xml"],e)}return[]}resourceFontToXml(e={}){var t;if(Bi.fonts.size){const i=this.resource,{insertSpaces:a,targetAPI:n}=this.userSettings,o=n<26?h.app:h.android,r=Ui(this.userSettings.outputDirectory),s=this.directory.font,l=[];for(const[e,c]of Array.from(Bi.fonts.entries()).sort()){const h={"xmlns:android":o,font:[]},d=h.font;for(const a in c){const[n,o,l]=a.split("|");let h=e;if("normal"===o)h+="400"===l?"_normal":"_"+c[a];else if(h+="_"+o,"400"!==l)h+="_"+c[a];d.push({font:"@font/"+h,fontStyle:o,fontWeight:l});const f=null===(t=i.getFont(n,o,l))||void 0===t?void 0:t.srcUrl;if(f)this.addAsset({pathname:r+s,filename:h+"."+Li(f.split("?")[0],".").toLowerCase(),uri:f})}let f=Mi(Di("font-family",_i,[h]),a);if(n<26)f=f.replace(/\s+android:/g," app:");l.push(f,s,e+".xml")}return this.checkFileAssets(l,e)}return[]}resourceColorToXml(e={}){if(Bi.colors.size){const t={color:[]},i=t.color;for(const[e,t]of Array.from(Bi.colors.entries()).sort())i.push({name:t,innerText:e});return this.checkFileAssets([Mi(Di("resources",xi,[t]),this.userSettings.insertSpaces),this.directory.string,"colors.xml"],e)}return[]}resourceStyleToXml(e={}){const t=[];if(Bi.styles.size){const e={style:[]},i=e.style;Array.from(Bi.styles.values()).sort((e,t)=>e.name.toString().toLowerCase()>=t.name.toString().toLowerCase()?1:-1).forEach(e=>{const t=e.items;if(Array.isArray(t))i.push({name:e.name,parent:e.parent,item:ki(t.sort((e,t)=>e.key>=t.key?1:-1),e=>({name:e.key,innerText:e.value}))})}),t.push(Mi(Di("resources",Ri,[e]),this.userSettings.insertSpaces),this.directory.string,"styles.xml")}if(Bi.themes.size){const{convertPixels:e,insertSpaces:a,manifestThemeName:n}=this.userSettings,o={};for(const[r,s]of Bi.themes.entries()){const l=Xi.exec(r);if(l){const c={style:[]},h=c.style;for(const[e,t]of s.entries()){const i=[],a=t.items;for(const e in a)i.push({name:e,innerText:a[e]});if(!o[r]||e!==n||c.length)h.push({name:e,parent:t.parent,item:i});if(e===n)o[r]=true}t.push(Mi((i=Di("resources",Ri,[c]),"dp"===e?i.replace(Hi,(e,...t)=>">"+Z(t[0],false)+"<"):i),a),l[1],l[2])}}}var i;return this.checkFileAssets(t,e)}resourceDimenToXml(e={}){if(Bi.dimens.size){const t=this.userSettings.convertPixels,i={dimen:[]},a=i.dimen;for(const[e,i]of Array.from(Bi.dimens.entries()).sort())a.push({name:e,innerText:t?Z(i,false):i});return this.checkFileAssets([Mi(Di("resources",wi,[i])),this.directory.string,"dimens.xml"],e)}return[]}resourceDrawableToXml(e={}){if(Bi.drawables.size){const{convertPixels:t,insertSpaces:i}=this.userSettings,a=this.directory.image,n=[];for(const[e,o]of Bi.drawables.entries())n.push(Mi(Yi(o,t),i),a,e+".xml");return this.checkFileAssets(n,e)}return[]}resourceAnimToXml(e={}){if(Bi.animators.size){const t=this.userSettings.insertSpaces,i=[];for(const[e,a]of Bi.animators.entries())i.push(Mi(a,t),"res/anim",e+".xml");return this.checkFileAssets(i,e)}return[]}resourceDrawableImageToString(e={}){if(Bi.images.size){const{directory:t,filename:i}=e,a=this.directory.image,n=[];for(const[e,t]of Bi.images.entries())if(Object.keys(t).length>1)for(const i in t){const o=t[i];n.push(o,`${a}-${i}`,e+"."+Li(o,".").toLowerCase())}else{const i=t.mdpi;if(i)n.push(i,a,e+"."+Li(i,".").toLowerCase())}if(t||i){const{outputDirectory:a,convertImages:o,compressImages:r}=this.userSettings;if(e.assets=Fi(Ui(a),n,o,r).concat(e.assets||[]),t)this.copying(e);if(i)this.archiving(e)}return n}return[]}resourceRawVideoToString(e={}){if(Wi.video.size){const{directory:t,filename:i}=e,a=this.directory.video,n=[];for(const e of Wi.video.values()){const t=e.uri;n.push(t,e.mimeType||"",Li(t,"/","\\"))}if(t||i){if(e.assets=zi(Ui(this.userSettings.outputDirectory)+a,n).concat(e.assets||[]),t)this.copying(e);if(i)this.archiving(e)}return n}return[]}resourceRawAudioToString(e={}){if(Wi.video.size){const{directory:t,filename:i}=e,a=this.directory.audio,n=[];for(const e of Wi.audio.values()){const t=e.uri;n.push(t,e.mimeType||"",Li(t,"/","\\"))}if(t||i){if(e.assets=zi(Ui(this.userSettings.outputDirectory)+a,n).concat(e.assets||[]),t)this.copying(e);if(i)this.archiving(e)}return n}return[]}layoutAllToXml(e,t={}){const{directory:i,filename:a}=t,n=i||a,o={},r=[],s=e.length;for(let t=0;t<s;++t){const{content:i,filename:a,pathname:s}=e[t];if(o[a]=[i],n)r.push(qi(s,0===t?this.userSettings.outputMainFileName:a+".xml",i))}if(n){if(t.assets=t.assets?r.concat(t.assets):r,i)this.copying(t);if(a)this.archiving(t)}return o}getAssetsAll(e){const t=this.userSettings;let i=[];if(e){const a=e.length;let n=true,o=0;while(o<a){const i=e[o++];if(!i.uri)if(n)i.filename=t.outputMainFileName,n=false;else{const e=i.filename;if(!e.endsWith(".xml"))i.filename=e+".xml"}}i=i.concat(e)}const a=Ui(t.outputDirectory);return i.concat(Vi(a,this.resourceStringToXml()),Vi(a,this.resourceStringArrayToXml()),Vi(a,this.resourceFontToXml()),Vi(a,this.resourceColorToXml()),Vi(a,this.resourceDimenToXml()),Vi(a,this.resourceStyleToXml()),Vi(a,this.resourceDrawableToXml()),Fi(a,this.resourceDrawableImageToString(),t.convertImages,t.compressImages),Vi(a,this.resourceAnimToXml()),zi(a+this.directory.video,this.resourceRawVideoToString()),zi(a+this.directory.audio,this.resourceRawAudioToString()))}checkFileAssets(e,t){const{directory:i,filename:a}=t;if(i||a){if(t.assets=Vi(Ui(this.userSettings.outputDirectory),e).concat(t.assets||[]),i)this.copying(t);if(a)this.archiving(t)}return e}get userSettings(){return this.resource.userSettings}}const{NODE_PROCEDURE:$i,NODE_RESOURCE:Zi}=squared.base.lib.enumeration;class Ji extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=true,this.options={displayLabel:false}}beforeBaseLayout(){this.cacheProcessing.each(e=>{if(e.inputElement&&e.hasProcedure($i.ACCESSIBILITY)){const t=e.attributes["aria-describedby"];if(t){const i=this.cacheProcessing.find(e=>e.elementId===t);if(i){const t=i.textContent.trim();if(""!==t)e.data(B.KEY_NAME,"titleString",t)}}switch(e.containerName){case"INPUT_RADIO":case"INPUT_CHECKBOX":{const t=e.elementId;[e.nextSibling,e.previousSibling].some(i=>{if((null==i?void 0:i.pageFlow)&&!i.visibleStyle.backgroundImage&&i.visible){let a=false;if(t&&t===i.toElementString("htmlFor"))a=true;else if(i.textElement){const t=i.actualParent;if("LABEL"===t.tagName)t.renderAs=e,a=true;else if(i.plainText)a=true}if(a){if(i.labelFor=e,!this.options.displayLabel)i.hide();return true}}return false});break}case"INPUT_IMAGE":if(e.hasResource(Zi.IMAGE_SOURCE))e.data(B.KEY_NAME,"embedded",[e]);break;case"BUTTON":if(e.length){const t=e.extract(e=>!e.textElement);if(t.length&&e.hasResource(Zi.IMAGE_SOURCE))e.data(B.KEY_NAME,"embedded",t);e.clear()}break}}})}}const Qi=squared.lib,ea=squared.base.lib,{formatPX:ta}=Qi.css,{createElement:ia}=Qi.dom,{maxArray:aa,truncate:na}=Qi.math,{safeNestedArray:oa}=Qi.util,{APP_SECTION:ra,BOX_STANDARD:sa,NODE_ALIGNMENT:la,NODE_PROCEDURE:ca,NODE_RESOURCE:ha,NODE_TEMPLATE:da}=ea.enumeration,fa=ea.constant.EXT_NAME.COLUMN;class ua extends squared.base.extensions.Column{processNode(e,i){return super.processNode(e,i),e.containerType=t.CONSTRAINT,e.addAlign(4),{complete:true,subscribe:true}}postBaseLayout(e){const i=e.data(fa,"mainData");if(i){const a=this.application,{columnCount:o,columnGap:r,columnWidth:s,columnRule:l,columnSized:c,boxWidth:h,rows:d,multiline:f}=i,{borderLeftWidth:u,borderLeftColor:p,borderLeftStyle:g}=l,m=e.parseUnit(u),y="none"!==g&&m>0,b=()=>{const i=a.createNode({parent:e,append:true});let o;if(i.inherit(e,"base"),i.containerName=e.containerName+"_COLUMNRULE",i.setControlType(n.LINE,t.LINE),i.exclude({resource:ha.ASSET,procedure:ca.ALL}),y)o=ta(m),i.cssApply({width:o,paddingLeft:o,borderLeftStyle:g,borderLeftWidth:u,borderLeftColor:p,lineHeight:"initial",boxSizing:"border-box",display:"inline-block"});else o=ta(r),i.cssApply({width:o,lineHeight:"initial",display:"inline-block"});return i.saveAsInitial(),i.setLayoutWidth(o),i.setLayoutHeight("0px"),i.render(e),i.positioned=true,i.renderExclude=false,a.addLayoutTemplate(e,i,{type:1,node:i,controlName:i.controlName}),i};let T;const E=d.length;for(let t=0;t<E;++t){const i=d[t],a=i.length;if(1===a){const e=i[0];if(0===t)e.anchor("top","parent"),e.anchorStyle("vertical",0,"packed");else T.anchor("bottomTop",e.documentId),e.anchor("topBottom",T.documentId);if(t===E-1)e.anchor("bottom","parent");else T=i[0];e.anchorParent("horizontal",e.rightAligned?1:e.centerAligned?.5:0),e.anchored=true,e.positioned=true}else{const n=[];let l=Math.min(a,c,o||Number.POSITIVE_INFINITY),d=0;if(l>1){const e=Math.floor(i.reduce((e,t)=>e+t.bounds.height,0)/l);let t=a>=l?Math.ceil(a/l):1,s=f||t>1&&(a%t!=0||!isNaN(o)&&t*o%a>1),c=s&&a%l!=0?a-l:Number.POSITIVE_INFINITY,u=0;for(let o=0,r=0,h=0;o<a;++o,++h){const d=i[o],f=h%t==0;if(r<l-1&&(f||c<=0||o>0&&(i[o-1].bounds.height>=e||n[r].length&&o<a-2&&a-o+1==l-r&&i[o-1].bounds.height>i[o+1].bounds.height))){if(o>0)if(++r,f)c--;else c++;if(h=0,!f&&c>0)s=true}const p=oa(n,r);if(p.push(d),d.length)u+=aa(d.map(e=>e.marginLeft+e.marginRight));if(o>0&&/^H\d/.test(d.tagName)){if(1===p.length&&o===a-2)l--,c=0;else if((h+1)%t==0&&a-o>l&&!i[o+1].multiline&&i[o+1].bounds.height<e)p.push(i[++o]),h=-1}else if(s&&a-o==l-r&&c!==Number.POSITIVE_INFINITY)t=1}d=l>1?Math.max((u+r*(l-1))/h/l,.01):0}else n.push(i);const u=n.length,p=new Array(u);let g=0;while(g<u){const t=n[g];t.forEach(t=>{t.app("layout_constraintWidth_percent",na(1/l-d,e.localSettings.floatPrecision)),t.setLayoutWidth("0px"),t.setBox(4,{reset:1}),t.exclude({section:ra.EXTENSION}),t.anchored=true,t.positioned=true}),p[g++]=t[0]}for(g=0;g<u;++g){const e=n[g];if(g<u-1&&e.length>1){const t=e[e.length-1];if(/^H\d/.test(t.tagName)){e.pop();const i=g+1;p[i]=t,n[i].unshift(t)}}}const m=new Array(u);g=0;while(g<u){const t=n[g],i=[];let a=0;const o=t.length;let r=0;while(r<o){const e=t[r++];if(e.naturalChild){const t=e.element.cloneNode(true);if(e.styleElement)if(e.imageOrSvgElement)t.style.height=ta(e.bounds.height);else{const i=e.textStyle;for(const e in i)t.style[e]=i[e]}i.push(t)}else a+=e.linear.height}if(i.length){const t=ia(document.body,"div",{width:ta(s||e.box.width/l),visibility:"hidden"});i.forEach(e=>t.appendChild(e)),a+=t.getBoundingClientRect().height,document.body.removeChild(t)}m[g++]=a}let y,S,A=0;for(g=0;g<u;++g){const e=m[g];if(e>=A){const t=n[g];y=t[0],S=t[t.length-1],A=e}}for(g=0;g<u;++g){const e=p[g];if(0===g)e.anchor("left","parent"),e.anchorStyle("horizontal",0,"spread_inside");else{const t=p[g-1];e.anchor("leftRight",t.documentId),e.modifyBox(16,r)}if(g===u-1)e.anchor("right","parent");else e.anchor("rightLeft",p[g+1].documentId)}const v=[];for(g=0;g<u;++g){const e=n[g],i=e.length;for(let a=0;a<i;++a){const o=e[a];if(0===a){if(g>0){const e=b();e.anchor("top",y.documentId),e.anchor("left",n[g-1][0].documentId),e.anchor("right",o.documentId),v.push(e)}if(0===t)o.anchor("top","parent");else if(o!==y)o.anchor("top",y.documentId);else T.anchor("bottomTop",o.documentId),o.anchor("topBottom",T.documentId);o.anchorStyle("vertical",0,"packed"),o.setBox(2,{reset:1})}else{const t=e[a-1];t.anchor("bottomTop",o.documentId),o.anchor("topBottom",t.documentId),o.app("layout_constraintVertical_bias","0"),o.anchor("left",e[0].documentId)}if(a===i-1){if(t===E-1)o.anchor("bottom","parent");o.setBox(8,{reset:1})}}}const x=t<E-1?S.documentId:"parent";v.forEach(e=>e.anchor("bottom",x)),T=S}}}}}const{lib:pa,base:ga}=squared,ma=ga.lib,{formatPercent:ya,formatPX:ba,isLength:Ta,isPercent:Ea}=pa.css,{maxArray:Sa,truncate:Aa}=pa.math,{CHAR:va}=pa.regex,{conditionArray:xa,flatMultiArray:wa,hasValue:_a,isArray:Na}=pa.util,{BOX_STANDARD:Ia,NODE_ALIGNMENT:Ra,NODE_PROCEDURE:Ca,NODE_RESOURCE:La}=ma.enumeration,ka=ga.LayoutUI,Pa=ma.constant.EXT_NAME.CSS_GRID,Oa=ga.extensions.CssGrid,Da=/start|left|center|right|end/,Ma=/(start|left|baseline)$/,Wa=/(right|end)$/,Ba=/start|end|center|baseline/,Xa=/(start|baseline)$/;function Ga(e,t,i,a,n){const o=i?t.column:t.row,r=o.unit,s=r.length;let l=0;if(s){const e=i?"width":"height";for(let i=0;i<s;++i){const a=r[i];if(Oa.isPx(a))l+=parseFloat(a);else{let a=0;xa(t.rowData[i],e=>Na(e),t=>a=Math.min(a,...t.map(t=>t.bounds[e]))),l+=a}}}else if(l=Sa(o.unitTotal),l<=0)return 0;if(l+=o.gap*(o.length-1),i)return l+=e.contentBox?e.borderLeftWidth+e.borderRightWidth:e.contentBoxWidth,(a>l?Math.min(a,e.actualWidth):e.actualWidth)-l;else return l+=e.contentBox?e.borderTopWidth+e.borderBottomWidth:e.contentBoxHeight,(n>l&&e.documentBody?Math.min(n,e.actualHeight):e.actualHeight)-l}function Ha(e,t){const i=Math.floor(t/e);return[i,t-i*e]}function Va(e,t,i,a,n,o,r,s,l,c){const h=a?t.column:t.row;if(i.startsWith("space")){const d=Ga(e,t,a,l,c);if(d>0){const e=function(e,t){const i=e.rowData;if(t){const t=e.column.length,a=e.row.length,n=new Array(t);let o=0;while(o<t){const e=new Array(a);let t=0;while(t<a)e[t]=i[t++][o];n[o++]=e}return n}else return i}(t,a),l=h.length,c=new Set;switch(i){case"space-around":{const[t,i]=Ha(2*l,d);for(let a=0;a<l;++a)for(const o of new Set(wa(e[a]))){const e=(a>0&&a<=i?1:0)+t;if(!c.has(o))o.modifyBox(r,e),o.modifyBox(s,t),c.add(o);else o.cssPX(n,d/l,false,true)}break}case"space-between":if(l>1){const[t,i]=Ha(l-1,d);for(let o=0;o<l;++o)for(const r of new Set(wa(e[o])))if(o<l-1){const e=t+(o<i?1:0);if(!c.has(r))r.modifyBox(s,e),c.add(r);else r.cssPX(n,e,false,true)}else{if(parseInt(r.android(a?"layout_columnSpan":"layout_rowSpan"))>1){const e=t+(i>0?Math.max(i-1,1):0);if(r.cssPX(n,e,false,true),c.has(r))r.modifyBox(s,-e,false)}}break}else return;case"space-evenly":{const[t,i]=Ha(l+1,d);for(let a=0;a<l;++a)for(const l of new Set(wa(e[a]))){let e=t+(a<i?1:0);if(!c.has(l)){if(o)e/=2,l.modifyBox(r,e),l.modifyBox(s,e);else{if(0===a)l.modifyBox(r,t);l.modifyBox(s,e)}c.add(l)}else l.cssPX(n,e,false,true)}break}}}}else if(!o){let n=Ga(e,t,a,l,c);if(n>0)switch(i){case"center":if(n/=2,a)e.modifyBox(256,Math.floor(n));else e.modifyBox(32,Math.floor(n)),e.modifyBox(128,Math.ceil(n));break;case"right":if(!a)break;case"end":case"flex-end":e.modifyBox(a?256:32,n);break}}}function Fa(e,t,i,a){let n,o,r,s;if(i.every(e=>Oa.isPx(e))){let e=a;i.forEach(t=>e+=parseFloat(t));const r=ba(e);if(t)n=r;else o=r}else if(i.every(e=>Oa.isFr(e))){let a=0;i.forEach(e=>a+=parseFloat(e));const l=Aa(a,e.localSettings.floatPrecision);if(t)n="0px",r=l;else o="0px",s=l}else if(i.every(e=>Ea(e))){const r=ya((i.reduce((e,t)=>e+parseFloat(t),0)+a/(t?e.actualWidth:e.actualHeight))/100);if(t)n=r;else o=r}else if(t)n="wrap_content";else o="wrap_content";return[n,o,r,s]}function za(e,t){const i=e.unit,a=i.length;if(a&&i.every(e=>"auto"===e))e.unit=new Array(a).fill(t?"1fr":"")}function Ua(e,t){const{gap:i,length:a,unit:n}=e;let o=0,r=0;for(const e of n)if(Oa.isPx(e))o+=parseFloat(e);else if(Ea(e))r+=parseFloat(e);else if(Oa.isFr(e))return 0;const s=Math.ceil(o+(a-1)*i);if(r>0)return r+s/t*100;else if(o>0)return s<t?-1:0;return 0}class qa extends squared.base.extensions.CssGrid{processNode(e,i){super.processNode(e,i);const a=e.data(Pa,"mainData");if(a){const{column:n,row:o}=a,r=n.unit,s=n.length,l=ka.create({parent:i,node:e,alignmentType:4,children:e.children,rowCount:o.length,columnCount:s});if(!e.originalRoot&&!e.hasWidth&&0===a.rowSpanMultiple.length&&r.length===s&&r.every(e=>Oa.isFr(e))&&function(e){return e.ascend({condition:e=>{const t=e.actualParent;if(null==t?void 0:t.gridElement){const i=t.data(Pa,"mainData"),a=e.data(Pa,"cellData");if(i&&a){const e=i.column.unit,{columnStart:t,columnSpan:n}=a;let o=false,r=0;while(r<n){const i=e[t+r++];if(Oa.isFr(i)||Ea(i))o=true;else if("auto"===i){o=false;break}}return o}}else if(e.hasFlex("row")&&e.flexbox.grow>0)return true;return false},error:e=>e.hasWidth}).length>0}(e)){const i=a.rowData,s=i.length,c=new Array(s);let h=true;e:{let e=0;while(e<s){const t=[],a=i[e],n=a.length;let o=0;while(o<n){const e=a[o++];if(1===(null==e?void 0:e.length))t.push(e[0]);else{h=false;break e}}c[e++]=t}}if(h)return n.frTotal=r.reduce((e,t)=>e+parseFloat(t),0),o.frTotal=o.unit.reduce((e,t)=>e+(Oa.isFr(t)?parseFloat(t):0),0),e.setLayoutWidth("match_parent"),e.lockAttr("android","layout_width"),e.data(Pa,"constraintData",c),l.setContainerType(t.CONSTRAINT),{output:this.application.renderNode(l),include:true,complete:true}}return za(n,true),za(o,false),l.setContainerType(t.GRID),{output:this.application.renderNode(l),include:true,complete:true}}}processChild(e,i){var a;const o=i.data(Pa,"mainData"),r=e.data(Pa,"cellData");let s,l;if(o&&r){const{alignContent:c,column:h,row:d}=o,f=e.has("alignSelf")?e.css("alignSelf"):o.alignItems,u=e.has("justifySelf")?e.css("justifySelf"):o.justifyItems,p=i.layoutConstraint,g=(t,a,n)=>{const[s,l,c,f]=a?[h,r.columnStart,r.columnSpan,"minWidth"]:[d,r.rowStart,r.rowSpan,"minHeight"],{unit:u,unitMin:g}=s;let m=0,y=0,b=0,T=0,E=false,S=false,A=0,v=0;while(A<c){const r=l+A++,h=g[r];if(""!==h)b+=i.parseUnit(h,a?"width":"height");let d=u[r];if(!_a(d)){const e=s.auto;if(e[v]){if(d=e[v],e[v+1])++v}else continue}if("auto"===d||"max-content"===d){if(S=true,c<u.length&&(!i.hasPX(n)||u.some(e=>Ta(e))||"max-content"===d)){m=e.bounds[n],y=0,T=0;break}else if(a){m=0,y=0,T=-1;break}}else if("min-content"===d){if(!t.hasPX(n)){if(a)t.setLayoutWidth("wrap_content",false);else t.setLayoutHeight("wrap_content",false);break}}else if(Oa.isFr(d)){if(a||i.hasHeight){if(-1===T)T=0;T+=parseFloat(d),y=m}else T=0,y+=o.minCellHeight*parseFloat(d);m=0}else if(Ea(d)){if(-1===T)T=0;T+=parseFloat(d)/100,y=m,m=0}else{const e=t.parseUnit(d,a?"width":"height");if(0===y)m+=e;else y+=e}if(e.textElement&&va.UNITZERO.test(h))E=true}if(c>1){const e=(c-1)*s.gap;if(m>0&&0===y)m+=e;else if(y>0)y+=e;if(b>0)b+=e}if(b>0)if(s.autoFill&&0===m&&1===(a?d.length:h.length))m=Math.max(e.actualWidth,b),T=0;else y=b;if(y>0&&!t.hasPX(f))t.css(f,ba(y),true);if(p){if(a){if(!t.hasPX("width",false))t.app("layout_constraintWidth_percent",Aa(T/h.frTotal,t.localSettings.floatPrecision)),t.setLayoutWidth("0px");if(0===l)t.anchor("left","parent"),t.anchorStyle("horizontal",0,"spread");else{const e=t.innerMostWrapped.previousSibling;if(e)e.anchor("rightLeft",t.documentId),t.anchor("leftRight",e.anchorTarget.documentId)}if(l+c===h.length)t.anchor("right","parent");t.positioned=true}else if(!t.hasPX("height",false))if(T>0)if(1===d.length)t.setLayoutHeight("match_parent");else t.app("layout_constraintHeight_percent",Aa(T/d.frTotal,t.localSettings.floatPrecision)),t.setLayoutHeight("0px");else if(m>0){if(t.contentBox)m-=t.contentBoxHeight;t.css(S?"minHeight":"height",ba(m),true)}}else{t.android(a?"layout_column":"layout_row",l.toString()),t.android(a?"layout_columnSpan":"layout_rowSpan",c.toString());let o=a&&h.flexible;if(0!==T){if(!t.hasPX(n))if(a){if(r.columnSpan===h.length)t.setLayoutWidth("match_parent");else t.setLayoutWidth("0px"),t.android("layout_columnWeight",-1===T?"0.01":Aa(T,e.localSettings.floatPrecision)),t.mergeGravity("layout_gravity","fill_horizontal");o=false}else if(r.rowSpan===d.length)t.setLayoutHeight("match_parent");else t.setLayoutHeight("0px"),t.android("layout_rowWeight",Aa(T,e.localSettings.floatPrecision)),t.mergeGravity("layout_gravity","fill_vertical")}else if(m>0){const e=a?"maxWidth":"maxHeight";if(E&&!t.hasPX(e))t.css(e,ba(m),true),t.mergeGravity("layout_gravity",a?"fill_horizontal":"fill_vertical");else if(!t.hasPX(n)){if(t.contentBox)m-=a?t.contentBoxWidth:t.contentBoxHeight;if(S&&!i.hasPX(e))if(t.css(f,ba(m),true),a)t.setLayoutWidth("wrap_content");else t.setLayoutHeight("wrap_content");else t.css(n,ba(m),true)}}else if(0===u.length&&!t.hasPX(n))if(a)t.setLayoutWidth("match_parent",false);else t.setLayoutHeight("wrap_content",false);if(o)t.android("layout_columnWeight","0")}return[l,c]};if(Ba.test(f)||Da.test(u)||p){s=this.application.createNode({parent:i,replace:e}),s.containerName=e.containerName,s.setControlType(n.FRAME,t.FRAME),s.inherit(e,"base","initial"),s.exclude({resource:La.BOX_STYLE|La.ASSET,procedure:Ca.CUSTOMIZATION}),s.resetBox(30),s.resetBox(480),s.render(i),e.transferBox(30,s);let a=true;if(Ma.test(u))e.mergeGravity("layout_gravity","left");else if(Wa.test(u))e.mergeGravity("layout_gravity","right");else if("center"===u)e.mergeGravity("layout_gravity","center_horizontal");else a=false;if(!e.hasWidth)e.setLayoutWidth(a?"wrap_content":"match_parent",false);if(Xa.test(f))e.mergeGravity("layout_gravity","top");else if(f.endsWith("end"))e.mergeGravity("layout_gravity","bottom");else if("center"===f)e.mergeGravity("layout_gravity","center_vertical");else if(!e.hasHeight)e.setLayoutHeight("match_parent",false);l=this.application.renderNode(new ka(i,s,t.FRAME,4096,s.children))}else e.mergeGravity("layout_gravity","top");const m=s||e;if(g(m,true,"width"),m!==e||e.hasPX("maxHeight"))m.mergeGravity("layout_gravity","fill");else if(!m.hasPX("width"))m.mergeGravity("layout_gravity","fill_horizontal");const[y,b]=g(m,false,"height");if("normal"===c&&!i.hasPX("height")&&!e.hasPX("minHeight")&&(!d.unit[y]||"auto"===d.unit[y])&&Math.floor(e.bounds.height)>(null===(a=e.data(Pa,"boundsData"))||void 0===a?void 0:a.height)&&function(e,t,i,a){if(1===i&&t.rowSpanMultiple[a]){const n=t.rowData,o=n.length;for(const t of wa(n[a]))if(t!==e){const e=t.data(Pa,"cellData");if(e&&e.rowSpan>i&&(0===a||e.rowSpan<o))return true}}return false}(e,o,b,y))m.css("minHeight",ba(e.box.height));else if(!(m.hasPX("height")||m.hasPX("maxHeight")||1===d.length&&c.startsWith("space")&&!Ba.test(o.alignItems)))m.mergeGravity("layout_gravity","fill_vertical")}return{parent:s,renderAs:s,outputAs:l}}postBaseLayout(e){const t=e.data(Pa,"mainData");if(t){const i=this.controller,{alignContent:n,children:o,column:r,emptyRows:s,justifyContent:l,row:c,rowDirection:h,rowData:f}=t,u=true===e.data(a.DELEGATE_CSS_GRID,"unsetContentBox"),p=o[o.length-1].id;if(Oa.isJustified(e)){switch(Va(e,t,l,true,"width",u,16,4,i.userSettings.resolutionScreenWidth-e.bounds.left,0),l){case"center":case"space-around":case"space-evenly":if(u)e.anchorParent("horizontal",.5,"",true);break;case"end":case"flex-end":if(u)e.anchorParent("horizontal",1,"",true);break;default:if(1===t.column.length)e.setLayoutWidth("match_parent");break}if(u)if(r.unit.some(e=>Oa.isFr(e)))e.setLayoutWidth("match_parent")}else{const t=r.length;if(e.blockStatic||e.hasWidth){const a=Ua(r,e.actualWidth);if(0!==a&&a<100){if(a>0)i.addAfterOutsideTemplate(p,i.renderSpace({width:ya((100-a)/100),height:"match_parent",rowSpan:c.length,android:{layout_row:"0",layout_column:t.toString(),layout_columnWeight:r.flexible?"0.01":""}}),false);e.android("columnCount",(t+1).toString())}}if(u)if(e.contentBoxWidth>0&&e.hasPX("width",false))e.anchorParent("horizontal",.5,"",true);else if(1===t)e.setLayoutWidth("match_parent");else e.setLayoutWidth("wrap_content",false)}if(Oa.isAligned(e)){if(Va(e,t,n,false,"height",u,2,8,0,this.controller.userSettings.resolutionScreenHeight),u)switch(n){case"center":case"space-around":case"space-evenly":e.anchorParent("vertical",.5,"",true);break;case"end":case"flex-end":e.anchorParent("vertical",1,"",true);break}}else{if(e.hasHeight){const t=Ua(c,e.actualHeight);if(0!==t&&t<100){const a=c.length;if(t>0)i.addAfterOutsideTemplate(p,i.renderSpace({width:"match_parent",height:ya((100-t)/100),columnSpan:r.length,android:{layout_row:a.toString(),layout_column:"0",layout_rowWeight:c.flexible?"0.01":""}}),false);e.android("rowCount",(a+1).toString())}}if(u)if(e.contentBoxHeight>0&&e.hasPX("height",false))e.anchorParent("vertical",.5,"",true);else e.setLayoutHeight("wrap_content",false)}const g=e.data(Pa,"constraintData");if(g){const{gap:t,length:a}=r,n=g.length,o=new Array(n-1);let s=1,l=0;while(s<n)o[l++]=i.addBarrier(g[s++],"top");for(s=0;s<n;++s){const c=g[s],h=o[s-1],d=o[s];let f;for(l=0;l<a;++l){const o=c[l];if(o){if(0===s)o.anchor("top","parent"),o.anchor("bottomTop",d),o.anchorStyle("vertical",0,"packed");else{if(s===n-1)o.anchor("bottom","parent");else o.anchor("bottomTop",d);o.anchor("topBottom",h)}if(l===a-1)o.anchor("right","parent");else o.modifyBox(4,-t);if(f)f.anchor("rightLeft",o.documentId),o.anchor("leftRight",f.documentId);else o.anchor("left","parent"),o.anchorStyle("horizontal",0,"packed");o.anchored=true,o.positioned=true,f=o}else if(f){const t={width:"0px",height:"wrap_content",android:{},app:{layout_constraintTop_toTopOf:0===s?"parent":"",layout_constraintTop_toBottomOf:h,layout_constraintBottom_toTopOf:s<a-1?d:"",layout_constraintBottom_toBottomOf:s===a-1?"parent":"",layout_constraintStart_toEndOf:f.anchorTarget.documentId,layout_constraintEnd_toEndOf:"parent",layout_constraintVertical_bias:0===s?"0":"",layout_constraintVertical_chainStyle:0===s?"packed":"",layout_constraintWidth_percent:(r.unit.slice(l,a).reduce((e,t)=>e+parseFloat(t),0)/r.frTotal).toString()}};i.addAfterInsideTemplate(e.id,i.renderSpace(t),false),f.anchor("rightLeft",t.documentId);break}}}}else{const{flexible:t,gap:a,unit:n}=h?r:c,o=n.length;let l=-1,u=0;const g=(a,n,o,r,s="wrap_content",c="",h=0)=>{if(-1!==l){const f=o.slice(l,l+u);let g,m,y="",b="",T="",E="",S=1,A=1;if(n)g=a.toString(),m=l.toString(),b=s,T=t?"0.01":"",E=c,A=u;else g=l.toString(),m=a.toString(),E=t?"0.01":"",T=c,y=s,S=u;if(f.length===o.length){if(n)y="match_parent",T="";else b="match_parent",E="";r=0}else{const[t,i,a,o]=Fa(e,n,f,r*(f.length-1));if(t)y=t;if(i)b=i;if(a)T=a;if(o)E=o}i.addAfterOutsideTemplate(p,i.renderSpace({width:y,height:b,rowSpan:S,columnSpan:A,android:{[n?e.localizeString(d.MARGIN_RIGHT):"bottom"]:r>0&&l+u<o.length?"@dimen/"+B.insertStoredAsset("dimens",`${e.controlId}_cssgrid_${n?"column":"row"}_gap`,ba(r)):"",[n?"bottom":e.localizeString(d.MARGIN_RIGHT)]:h>0?"@dimen/"+B.insertStoredAsset("dimens",`${e.controlId}_cssgrid_${n?"row":"column"}_gap`,ba(h)):"",layout_row:g,layout_column:m,layout_rowWeight:E,layout_columnWeight:T,layout_gravity:"fill"}}),Oa.isPx(y)||Oa.isPx(b)),l=-1}u=0};let m=Math.max(f.length,1);for(let e=0;e<m;++e)if(void 0===s[e]){const t=f[e];for(let i=0;i<o;++i)if(t[i])g(e,h,n,a);else{if(-1===l)l=i;++u}g(e,h,n,a)}m=s.length;for(let t=0;t<m;++t){const i=s[t];if(i){const a=i.length;for(let n=0;n<a;++n){const a=i[n];if(a>0){l=n;const{unit:i,gap:o}=h?c:r,{unit:s,gap:d}=!h?c:r,f=Fa(e,!h,[i[n]],0);u=a===Number.POSITIVE_INFINITY?s.length:1,g(t,h,s,d,f[h?1:0],f[h?3:2],t<m-1?o:0)}}}}}}}postOptimize(e){var t;const i=e.data(Pa,"mainData");if(i)if(e.blockStatic&&!e.hasPX("minWidth",false)&&false===(null===(t=e.actualParent)||void 0===t?void 0:t.layoutElement)){const{gap:t,length:a,unit:n}=i.column;let o=t*(a-1);for(const e of n)if(Oa.isPx(e))o+=parseFloat(e);else return;if(o>e.width)if(e.android("minWidth",ba(o)),!e.flexibleWidth&&!e.blockWidth)e.setLayoutWidth("wrap_content")}}}class Ya extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}init(e){if(this.included(e))this.application.rootElements.add(e);return false}}var ja=squared.base.LayoutUI;const{lib:Ka,base:$a}=squared,Za=$a.lib,{isLength:Ja}=Ka.css,{truncate:Qa}=Ka.math,{capitalize:en,sameArray:tn,withinRange:an}=Ka.util,{BOX_STANDARD:nn,NODE_ALIGNMENT:on}=Za.enumeration,rn=$a.NodeUI,sn=Za.constant.EXT_NAME.FLEXBOX,ln={orientation:"horizontal",orientationInverse:"vertical",WHL:"width",HWL:"height",LT:"left",TL:"top",RB:"right",BR:"bottom",LRTB:"leftRight",RLBT:"rightLeft"},cn={orientation:"vertical",orientationInverse:"horizontal",WHL:"height",HWL:"width",LT:"top",TL:"left",RB:"bottom",BR:"right",LRTB:"topBottom",RLBT:"bottomTop"};function hn(e,t,i){const a="width"===i,n=a?"hasWidth":"hasHeight",o=t=>t.flexbox.basis=t.bounds[i]/e.box[i]*100+"%";let r=e[n]||a&&e.blockStatic&&an(e.parseWidth(e.css("maxWidth")),e.box.width),s=0,l=0;const c=t.length;let h=0;while(h<c){const e=t[h++];if(r)if(a){if(e.innerMostWrapped.autoMargin.horizontal){r=false;break}}else if(e.innerMostWrapped.autoMargin.vertical){r=false;break}s+=e.flexbox.grow}if(c>1&&(a||r)){const e=[],a=[];let s,d=0,f=0,u=NaN;h=0;while(h<c){const o=t[h++],{alignSelf:c,basis:p,shrink:g,grow:m}=o.flexbox,y=o.bounds[i];let b=false;if(m>0||1!==g){const t=o.parseUnit("auto"===p?o.css(i):p,i);if(t>0){let i=false;if(y<t){if(isNaN(u)||g<u)u=g,i=true,l=1}else if(isNaN(u)||m>u)u=m,i=true,l=2;if(i)s=o,d=t,f=y;e.push({item:o,basis:t,dimension:y,shrink:g,grow:m});continue}else if(m>0)b=true}else if(Ja(p)){e.push({item:o,basis:Math.min(y,o.parseUnit(p,i)),dimension:y,shrink:g,grow:m}),o.flexbox.basis="auto";continue}if("auto"===c&&(r&&!o[n]||b))a.push(o)}if(l){if(e.length>1)e.forEach(e=>{const{basis:t,item:i}=e;if(i===s||t===d&&(1===l&&u===e.shrink||2===l&&u===e.grow))i.flexbox.grow=1;else if(t>0)i.flexbox.grow=e.dimension/t/(f/d)*t/d});a.forEach(e=>o(e))}}if(a&&0===l){h=0;while(h<c){if(t[h++].find(t=>t.multiline&&0===t.ascend({condition:e=>e[n],including:e}).length,{cascade:true})){t.forEach(e=>o(e));break}}}return s}function dn(e){const t=e.length;let i=0;while(i<t){const t=e[i++];if(t.textElement&&t.baseline)return t}return rn.baseline(e)}function fn(e,t,i){if(!i)e.setLayoutWidth(t);else e.setLayoutHeight(t)}function un(e){while(e){if(e.layoutFrame)return e.innerWrapped;e=e.innerWrapped}}class pn extends squared.base.extensions.Flexbox{processNode(e,i){super.processNode(e,i);const a=e.data(sn,"mainData"),{column:n,row:o,rowCount:r,columnCount:s}=a;if(o&&1===r||n&&1===s)return e.containerType=t.CONSTRAINT,e.addAlign(4),e.addAlign(n?16:8),a.wrap=false,{include:true,complete:true};else{const a=o&&e.hasHeight||n&&e.hasWidth||e.some(e=>!e.pageFlow)?t.CONSTRAINT:t.LINEAR;return{output:this.application.renderNode(ja.create({parent:i,node:e,containerType:a,alignmentType:4|(n?8:16),itemCount:e.length,rowCount:r,columnCount:s})),include:true,complete:true}}}processChild(e,i){if(e.hasAlign(128))return{output:this.application.renderNode(new ja(i,e,t.CONSTRAINT,4,e.children)),complete:true,subscribe:true};else{const a=e.autoMargin;if(a.horizontal||a.vertical&&i.hasHeight){const n=i.data(sn,"mainData");if(n){const o=n.children.findIndex(t=>t===e);if(-1!==o){const r=this.controller.createNodeWrapper(e,i);if(r.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},true),r.saveAsInitial(true),r.setCacheValue("flexbox",e.flexbox),n.children[o]=r,a.horizontal&&!e.hasWidth)e.setLayoutWidth("wrap_content");return{parent:r,renderAs:r,outputAs:this.application.renderNode(new ja(i,r,t.FRAME,4096,r.children))}}}}}}postBaseLayout(e){const t=e.data(sn,"mainData");if(t){const i=this.controller,{row:a,column:n,reverse:o,wrap:r,wrapReverse:s,alignContent:l,justifyContent:c,children:h}=t,d=e.hasPX("height",false)||e.percentHeight>0?e.linear.bottom:0,f=[],u=[],p=[];let g=0;if(r){let t;if(e.each(e=>{if(e.hasAlign(128)){const i=e.renderChildren.filter(e=>e.pageFlow);if(i.length){if(a)e.setLayoutWidth("match_parent"),f.push(i);else{if(e.setLayoutHeight("match_parent"),t){const i=t.length;let a=t[0],n=1;while(n<i){const e=t[n++];if(e.linear.right>a.linear.right)a=e}if(s){const t=e.linear.left-a.actualRect("right");if(t>0)e.modifyBox(16,t)}e.constraint.horizontal=true}u.push(i),t=i}p.push(e)}}}),e.layoutLinear){if(s&&n)e.mergeGravity("gravity","right")}else if(p.length)if(a)u.push(p);else f.push(p)}else if(a){if(o)h.reverse();f[0]=h}else{if(o)h.reverse();u[0]=h}const m=(t,a)=>{const h=t.length;if(0===h)return;const{orientation:f,orientationInverse:u,WHL:m,HWL:y,LT:b,TL:T,RB:E,BR:S,LRTB:A,RLBT:v}=a?ln:cn,[x,w]=a?[e.hasHeight,e.hasWidth]:[e.hasWidth,e.hasHeight],_=`layout_constraint${en(f)}_weight`,N=(e,t)=>{if(0===e[m])if(e.app(_,Qa(t,e.localSettings.floatPrecision)),a)e.setLayoutWidth("0px");else e.setLayoutHeight("0px")};for(let I=0;I<h;++I){const R=t[I],C=R.length,L=R[0],k=R[C-1],P=R===p,O=!P&&R.every(e=>0===e.flexbox.grow),D=O&&("space-between"===c||"space-around"===c&&C>1),M=[];let W,B=0,X=0,G=true,H=null;if(L.anchor(b,"parent"),k.anchor(E,"parent"),P)if(W=false,w){let e="spread",t=0;switch(l){case"left":case"right":case"flex-end":t=1;case"baseline":case"start":case"end":case"flex-start":e="packed",G=false;break}L.anchorStyle(f,t,e)}else L.anchorStyle(f,0,"packed");else if(W=a||w,X=1-hn(e,R,m),C>1){let e=0;if(R.forEach(t=>{const i=(t.data(sn,"boundsData")||t.bounds)[y];if(0===e)B=i,e++;else if(i===B)e++;else if(i>B)B=i,e=1}),e===C)B=NaN}for(let e=0;e<C;++e){const t=R[e],i=R[e-1],n=R[e+1];if(n)t.anchor(v,n.documentId);if(i)t.anchor(A,i.documentId);if(P){if(G&&C>1&&w)N(t,1);t.anchor(T,"parent")}else{const o=un(t),c=t.innerMostWrapped.autoMargin;if(a){if(c.horizontal)if(o){if(o.mergeGravity("layout_gravity",c.leftRight?"center_horizontal":t.localizeString(c.left?"right":"left")),X>0)t.flexbox.basis="0%",M.push(t)}else if(!c.leftRight)if(c.left){if(i)t.anchorDelete(A)}else if(n)t.anchorDelete(v)}else if(c.vertical)if(o){if(o.mergeGravity("layout_gravity",c.topBottom?"center_vertical":t.localizeString(c.top?"bottom":"top")),X>0)t.flexbox.basis="0%",M.push(t)}else if(!c.topBottom)if(c.top){if(i)t.anchorDelete(A)}else if(n)t.anchorDelete(v);switch(t.flexbox.alignSelf){case"start":case"flex-start":t.anchor(T,"parent");break;case"end":case"flex-end":t.anchor(S,"parent");break;case"baseline":if(a){if(null===H)H=dn(R);if(H)if(H!==t)t.anchor("baseline",H.documentId);else t.anchorParent(u,0)}break;case"center":if(t.anchorParent(u,.5),!a&&t.textElement)t.mergeGravity("gravity","center");break;default:{const i=un(t);switch(l){case"center":if(h%2==1&&I===Math.floor(h/2))t.anchorParent(u);else if(I<h/2)t.anchor(S,"parent");else if(I>=h/2)t.anchor(T,"parent");break;case"space-evenly":case"space-around":if(i)i.mergeGravity("layout_gravity",a?"center_vertical":"center_horizontal");else t.anchorParent(u);break;case"space-between":if(D&&2===C)t.anchorDelete(0===e?v:A);if(0===I)if(i)i.mergeGravity("layout_gravity",s?S:T);else t.anchor(s?S:T,"parent");else if(h>2&&I<h-1)if(i)i.mergeGravity("layout_gravity",a?"center_vertical":"center_horizontal");else t.anchorParent(u);else if(i)i.mergeGravity("layout_gravity",s?T:S);else t.anchor(s?T:S,"parent");break;default:if(t.anchorParent(u),!o||!t.innerMostWrapped.autoMargin[u])t.anchorStyle(u,s?1:0);if(0===t[y])if(!a&&t.blockStatic)fn(t,"match_parent",a);else if(isNaN(B))if(!a&&!r&&t.length||x&&"normal"===l)fn(t,x?"0px":"match_parent",a);else fn(t,"wrap_content",a);else if(1===C)if(!a)fn(t,x?"0px":"match_parent",a);else fn(t,"wrap_content",a);else if((t.naturalElement?(t.data(sn,"boundsData")||t.bounds)[y]:Number.POSITIVE_INFINITY)<B){if(fn(t,t.flexElement&&t.css("flexDirection").startsWith(a?"row":"column")?"match_parent":"0px",a),o&&!o.autoMargin[f])fn(o,"match_parent",a)}else if(x)fn(t,"0px",a);else fn(t,"wrap_content",a),t.lockAttr("android","layout_"+y);break}break}}if(dt.setFlexDimension(t,m),!t.innerMostWrapped.has("flexGrow"))W=false;if(d>0&&I===h-1){if(t.linear.bottom-d>0)g=Math.max(t.linear.bottom-d,g);t.setBox(8,{reset:1})}}t.anchored=true,t.positioned=true}if(!P){if(W)R.forEach(e=>N(e,e.flexbox.grow));else if(X>0)M.forEach(e=>{const t=e.innerMostWrapped.autoMargin;let i=1;if(a){if(t.leftRight)i=2}else if(t.topBottom)i=2;N(e,Math.max(e.flexbox.grow,X*i/M.length))});if(g>0)e.modifyBox(8,g);if(a||n){let t=false;if(O)switch(c){case"normal":if(n){L.anchorStyle(f,o?1:0,"packed");continue}break;case"left":if(!a)break;case"start":case"flex-start":L.anchorStyle(f,o?1:0,"packed");continue;case"center":if(C>1){L.anchorStyle(f,.5,"packed");continue}t=true;break;case"right":if(!a)break;case"end":case"flex-end":L.anchorStyle(f,1,"packed");continue;case"space-between":if(1===C){k.anchorDelete(E);continue}break;case"space-evenly":if(C>1){L.anchorStyle(f,0,"spread");continue}t=true;break;case"space-around":if(C>1){L.constraint[f]=false,k.constraint[f]=false,i.addGuideline(L,e,{orientation:f,percent:true}),i.addGuideline(k,e,{orientation:f,percent:true,opposing:true}),L.anchorStyle(f,0,"spread_inside");continue}t=true;break}if(D||!r&&R.some(e=>""!==e.app(_))&&!tn(R,e=>e.app(_)))L.anchorStyle(f,0,"spread_inside",false);else if(!t)L.anchorStyle(f,o?1:0,"packed",false)}}}};m(f,true),m(u,false)}}}var gn=squared.base.LayoutUI;const mn=squared.lib,yn=squared.base.lib,{formatPX:bn}=mn.css,{withinRange:Tn}=mn.util,{BOX_STANDARD:En,NODE_ALIGNMENT:Sn}=yn.enumeration,An=squared.base.extensions.Grid,vn=yn.constant.EXT_NAME.GRID;class xn extends squared.base.extensions.Grid{processNode(e,i){super.processNode(e,i);const a=e.data(vn,"columnCount");if(a)return{output:this.application.renderNode(gn.create({parent:i,node:e,containerType:t.GRID,alignmentType:256,children:e.children,columnCount:a})),include:true,complete:true}}processChild(e,t){var i;const a=e.data(vn,"cellData");if(a){const n=null===(i=a.siblings)||void 0===i?void 0:i.slice(0);let o;if(n){const i=this.controller;n.unshift(e),o=i.processLayoutHorizontal(new gn(t,i.createNodeGroup(e,n,{parent:t,delegate:true,cascade:true}),0,0,n)),function(e,t){const i=An.createDataCellAttribute();t.forEach(e=>{const t=e.data(vn,"cellData");if(t){if(t.cellStart)i.cellStart=true;if(t.cellEnd)i.cellEnd=true;if(t.rowEnd)i.rowEnd=true;if(t.rowStart)i.rowStart=true;e.data(vn,"cellData",null)}}),e.data(vn,"cellData",i)}(e=o.node,n)}if(a.rowSpan>1)e.android("layout_rowSpan",a.rowSpan.toString());if(a.columnSpan>1)e.android("layout_columnSpan",a.columnSpan.toString());if("table-cell"===e.display)e.mergeGravity("layout_gravity","fill");if(o)return{parent:o.node,renderAs:o.node,outputAs:this.application.renderNode(o)}}}postConstraints(e){if("collapse"!==e.css("borderCollapse")){const t=e.data(vn,"columnCount");if(t){let i=0,a=0,n=0,o=0;e.renderEach(r=>{const s=r.data(vn,"cellData");if(s){const l=r.actualParent;if(false===(null==l?void 0:l.visible)){const c=0===l.getBox(2)[0]?l.marginTop:0,h=0===l.getBox(8)[0]?l.marginBottom:0;if(s.cellStart)i=c+l.paddingTop;if(s.rowStart)o=Math.max(l.marginLeft+l.paddingLeft,o);if(s.rowEnd){const i=h+l.paddingBottom+(s.cellEnd?0:c+l.paddingTop);if(i>0)if(s.cellEnd)n=i;else{const a=this.controller;a.addAfterOutsideTemplate(r.id,a.renderSpace({width:"match_parent",height:"@dimen/"+B.insertStoredAsset("dimens",e.controlId+"_grid_space",bn(i)),columnSpan:t,android:{}}),false)}a=Math.max(l.marginRight+l.paddingRight,a)}}}}),e.modifyBox(32,i),e.modifyBox(64,a),e.modifyBox(128,n),e.modifyBox(256,o)}}if(!e.hasWidth){let t=Number.NEGATIVE_INFINITY;if(e.renderEach(e=>{if(e.inlineFlow||!e.blockStatic)t=Math.max(t,e.linear.right)}),Tn(e.box.right,t))e.setLayoutWidth("wrap_content")}}}var wn=squared.base.LayoutUI;const _n=squared.lib,Nn=squared.base.lib,{formatPX:In,getBackgroundPosition:Rn}=_n.css,{convertInt:Cn}=_n.util,{STRING_SPACE:Ln}=_n.xml,{BOX_STANDARD:kn,NODE_ALIGNMENT:Pn,NODE_TEMPLATE:On}=Nn.enumeration,Dn=Nn.constant.EXT_NAME.LIST;class Mn extends squared.base.extensions.List{processNode(e,i){const a=new wn(i,e,0,0,e.children);if(!a.unknownAligned||a.singleRowAligned){if(super.processNode(e,i),a.linearY)a.rowCount=e.length,a.columnCount=e.some(e=>"inside"===e.css("listStylePosition"))?3:2,a.setContainerType(t.GRID,16);else if(a.linearX||a.singleRowAligned)a.rowCount=1,a.columnCount=a.length,a.setContainerType(t.LINEAR,8);else return;return{output:this.application.renderNode(a),complete:true,include:true}}}processChild(e,i){const a=e.data(Dn,"mainData");if(a){const o=this.application,r=this.controller,s=i.firstStaticChild===e,l=e.marginTop;let c,h,d=a.ordinal||"",f=e.marginLeft,u=0,p=0,g=false,m=NaN;if(e.setBox(16,{reset:1}),i.layoutGrid)p=Cn(i.android("columnCount"))||1,g=true;else if(s)g=true;if(g)if(i.paddingLeft>0)f+=i.paddingLeft;else f+=i.marginLeft;if(0===e.length)c=r.createNodeWrapper(e,i,Object.assign({},r.containerTypeVertical)),e.resetBox(10,c);else c=e;if(""===d)h=e.find(e=>"left"===e.float&&e.marginLeft<0&&Math.abs(e.marginLeft)<=e.documentParent.marginLeft);if(h){if(3===p)e.android("layout_columnSpan","2");if(!h.hasWidth)if(f+=h.marginLeft,f>0)h.android("minWidth",In(f));h.parent=i,h.setControlType(n.TEXT,t.INLINE),h.setBox(16,{reset:1}),h.render(i);const a=new wn(i,h);if(h.inlineText||0===h.length)a.setContainerType(t.TEXT);else{if(a.singleRowAligned)a.setContainerType(t.RELATIVE,8);else a.setContainerType(t.CONSTRAINT,2);a.retain(h.children)}o.addLayoutTemplate(i,h,o.renderNode(a))}else{let r,s="right",l=0,y=0,b=0;if(""!==a.imageSrc){const t=this.resource;if(a.imagePosition){if(({top:y,left:b}=Rn(a.imagePosition,e.actualDimension,{fontSize:e.fontSize,imageDimension:t.getImage(a.imageSrc),screenDimension:e.localSettings.screenDimension})),e.marginLeft<0)m=e.marginLeft+(i.paddingLeft>0?i.paddingLeft:i.marginLeft);else g=false,u=e.marginLeft;f=e.paddingLeft-b,e.setBox(256,{reset:1}),s=""}r=t.addImageSrc(a.imageSrc)}const T=ae();if(h=o.createNode({parent:i}),h.childIndex=e.childIndex,h.containerName=e.containerName+"_ORDINAL",h.inherit(e,"textStyle"),""!==d&&!d.endsWith("."))h.setCacheValue("fontSize",.75*h.fontSize);if("right"===s)if(r)l=Math.max(f/6,4),f-=l;else if(""!==d)d+=Ln.repeat(1===d.length?3:2);if(3===p)c.android("layout_columnSpan","2");if("DT"===e.tagName&&!r)c.android("layout_columnSpan",p.toString());else{if(r)h.setControlType(n.IMAGE,t.IMAGE),Object.assign(T.android,{src:"@drawable/"+r,scaleType:"right"===s?"fitEnd":"fitStart",baselineAlignBottom:g?"true":""});else if(""!==d){if(h.textContent=d,h.inlineText=true,h.setControlType(n.TEXT,t.TEXT),"DFN"===e.tagName)f+=8,h.modifyBox(64,8)}else h.setControlType(n.SPACE,t.SPACE),h.renderExclude=false,e.setBox(256,{reset:1});const{paddingTop:a,lineHeight:c}=e;if(h.cssApply({minWidth:f>0?In(f):"",marginLeft:u>0?In(u):"",paddingTop:a>0&&0===e.getBox(32)[0]?In(a):"",paddingRight:l>0?In(l):"",lineHeight:c>0?In(c):""}),h.apply(T),h.modifyBox(256,2),h.cssTry("display","block"))h.setBounds(),h.cssFinally("display");if(h.saveAsInitial(),""!==s)h.mergeGravity("gravity",e.localizeString(s));if(0!==y)h.modifyBox(2,y);if(0!==b)h.modifyBox(16,b);h.render(i),o.addLayoutTemplate(i,h,{type:1,node:h,controlName:h.controlName})}}if(0!==l)h.modifyBox(2,l),h.companion=c,this.subscribers.add(h);if(h.positioned=true,g){if(isNaN(m)||m<=0)i.setBox(i.paddingLeft>0?256:16,{reset:1});if(m<0)i.modifyBox(16,m)}if(p>0)c.setLayoutWidth("0px"),c.android("layout_columnWeight","1");if(e!==c)return{parent:c,renderAs:c,outputAs:o.renderNode(new wn(i,c,t.LINEAR,18,c.children)),subscribe:true}}}postConstraints(e){const t=!e.naturalChild&&e.companion;if(t){const[i,a]=t.getBox(2);if(0===i)e.modifyBox(2,a-e.getBox(2)[1],false);else e.setBox(2,{adjustment:0})}}}const{BOX_STANDARD:Wn}=squared.base.lib.enumeration;class Bn extends squared.base.extensions.Relative{is(e){if(e.inlineStatic||e.imageOrSvgElement)switch(e.verticalAlign){case"sub":case"super":return true}return super.is(e)}postOptimize(e){if(!e.baselineAltered)switch(e.verticalAlign){case"sub":if(!e.outerMostWrapper.renderParent.layoutHorizontal)e.modifyBox(8,-1*Math.floor(e.baselineHeight*this.controller.localSettings.deviations.subscriptBottomOffset));break;case"super":if(!e.outerMostWrapper.renderParent.layoutHorizontal)e.modifyBox(2,-1*Math.floor(e.baselineHeight*this.controller.localSettings.deviations.superscriptTopOffset));break}super.postOptimize(e)}}var Xn=squared.base.LayoutUI;const{formatPX:Gn}=squared.lib.css,Hn=squared.base.lib,{APP_SECTION:Vn,BOX_STANDARD:Fn,NODE_ALIGNMENT:zn,NODE_PROCEDURE:Un,NODE_RESOURCE:qn}=Hn.enumeration,Yn=Hn.constant.EXT_NAME.SPRITE;class jn extends squared.base.extensions.Sprite{processNode(e,i){const a=e.data(Yn,"mainData");if(a){const o=this.resource.addImageSrc(e.backgroundImage);if(""!==o){const{width:r,height:s}=a.image,{top:l,left:c}=a.position,h=this.application.createNode({parent:i,replace:e});return h.inherit(e,"base","initial","styleMap"),h.setControlType(n.FRAME,t.FRAME),h.exclude({resource:qn.ASSET,procedure:Un.CUSTOMIZATION,section:Vn.ALL}),e.setControlType(n.IMAGE,t.IMAGE),e.resetBox(30),e.resetBox(480),e.registerBox(2,h),e.registerBox(4,h),e.registerBox(8,h),e.registerBox(16,h),e.exclude({resource:qn.FONT_STYLE|qn.BOX_STYLE|qn.BOX_SPACING}),e.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:r>0?Gn(r):"auto",height:s>0?Gn(s):"auto",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"transparent"}),e.unsetCache(),e.android("src","@drawable/"+o),e.android("layout_marginTop",Gn(l)),e.android(e.localizeString("layout_marginLeft"),Gn(c)),{renderAs:h,outputAs:this.application.renderNode(new Xn(i,h,t.FRAME,4096,h.children)),parent:h,complete:true}}}}}const{convertCamelCase:Kn}=squared.lib.util,{NODE_ALIGNMENT:$n,NODE_TEMPLATE:Zn}=squared.base.lib.enumeration;class Jn extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.require(a.EXTERNAL,true)}processNode(e,i){const a=te(e.dataset,Kn(this.name,"."));if(a){const n=a.tag;if(n){e.setControlType(n,e.blockStatic?t.BLOCK:t.INLINE),e.render(i);const o=a.tagChild;if(o){const t=this.name;e.addAlign(4),e.each(e=>{if(e.styleElement){const i=e.dataset;i.use=t,i.androidSubstituteTag=o}})}return{output:{type:1,node:e,controlName:n},include:true}}}}postOptimize(e){e.apply(B.formatOptions(ae(this.options[e.elementId]),this.application.extensionManager.optionValueAsBoolean(a.RESOURCE_STRINGS,"numberResourceValue")))}}var Qn=squared.base.LayoutUI;const eo=squared.lib,to=squared.base.lib,{CSS_UNIT:io,formatPX:ao}=eo.css,{convertFloat:no,convertInt:oo,trimEnd:ro}=eo.util,{NODE_ALIGNMENT:so}=to.enumeration,lo=to.constant.EXT_NAME.TABLE;function co(e){if(e.hasPX("height")&&e.height+e.contentBoxHeight<Math.floor(e.bounds.height)&&"top"!==e.css("verticalAlign"))e.setLayoutHeight("wrap_content")}class ho extends squared.base.extensions.Table{processNode(e,i){super.processNode(e,i);const a=e.data(lo,"mainData");let n=false;if(a.columnCount>1)n=a.expand,e.each(e=>{const t=e.data(lo,"cellData");if(t.flexible)e.android("layout_columnWeight",t.colSpan.toString()),e.setLayoutWidth("0px"),n=true;else{const{downsized:i,expand:a,percent:o}=t;if(a){if(o){const t=no(o)/100;if(t>0)e.setLayoutWidth("0px"),e.android("layout_columnWeight",ro(t.toPrecision(3),"0")),n=true}}else if(false===a)e.android("layout_columnWeight","0");if(i)if(t.exceed)e.setLayoutWidth("0px"),e.android("layout_columnWeight","0.01"),n=true;else if(e.hasPX("width")){const t=e.bounds.width;if(e.actualWidth<t)e.setLayoutWidth(ao(t))}}if("TD"===e.tagName)e.setSingleLine(true);co(e)});else e.each(e=>{if(e.has("width",{type:4}))e.setLayoutWidth("wrap_content"),n=true;co(e)});if(e.hasWidth){if(e.width<Math.floor(e.bounds.width))if(a.layoutFixed)e.android("width",ao(e.bounds.width));else{if(!e.hasPX("minWidth"))e.android("minWidth",ao(e.actualWidth));e.css("width","auto")}}else if(n)if((i.blockStatic||i.hasPX("width"))&&Math.ceil(e.bounds.width)>=i.box.width)e.setLayoutWidth("match_parent");else e.css("width",ao(e.actualWidth));if(e.hasHeight&&e.height<Math.floor(e.bounds.height)){if(!e.hasPX("minHeight"))e.android("minHeight",ao(e.actualHeight));e.css("height","auto")}return{output:this.application.renderNode(Qn.create({parent:i,node:e,containerType:t.GRID,alignmentType:4,children:e.children,rowCount:a.rowCount,columnCount:a.columnCount})),include:true,complete:true}}processChild(e,t){const i=e.data(lo,"cellData");if(i){const{rowSpan:a,colSpan:n,spaceSpan:o}=i;if(a>1)e.android("layout_rowSpan",a.toString());if(n>1)e.android("layout_columnSpan",n.toString());if(o){const t=this.controller;t.addAfterOutsideTemplate(e.id,t.renderSpace({width:"wrap_content",height:"wrap_content",columnSpan:o,android:{}}),false)}if(e.mergeGravity("layout_gravity","fill"),"hide"===t.css("empty-cells")&&0===e.naturalChildren.length&&""===e.textContent)e.hide({hidden:true})}}postOptimize(e){const t=oo(e.layoutWidth);if(t>0){const i=e.bounds.width;if(i>t)e.setLayoutWidth(ao(i));if("auto"===e.cssInitial("width")&&e.renderChildren.every(e=>e.inlineWidth))e.renderEach(e=>{e.setLayoutWidth("0px"),e.android("layout_columnWeight","1")})}}}var fo=squared.base.LayoutUI;const{NODE_ALIGNMENT:uo}=squared.base.lib.enumeration;class po extends squared.base.extensions.VerticalAlign{processNode(e,i){return super.processNode(e,i),{output:this.application.renderNode(new fo(i,e,t.RELATIVE,8,e.children)),subscribe:true}}}class go extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=true}}var mo=squared.base.LayoutUI;const yo=squared.lib,{formatPX:bo}=yo.css,{hypotenuse:To}=yo.math,{withinRange:Eo}=yo.util,{NODE_ALIGNMENT:So}=squared.base.lib.enumeration;class Ao extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:false}}is(e){return this.included(e.element)}condition(e){return e.length>0}processNode(e,i){return{output:this.application.renderNode(new mo(i,e,t.CONSTRAINT,32,e.children))}}postBaseLayout(e){const t=this.controller,i=this.options.circlePosition,{left:a,top:n}=e.box;let o;if(e.each(e=>{const t=e.linear;if(Eo(t.left,a))e.anchorParent("horizontal",0);if(Eo(t.top,n))e.anchorParent("vertical",0);if(i)if(e.anchored)o=e;else{const{horizontal:t,vertical:i}=e.constraint;if(o){if(i&&!o.constraint.vertical)o=e}else if(i)o=e;else if(t)o=e}e.positioned=true}),i){if(!o)o=e.item(0);if(!o.anchored)t.addGuideline(o,e);const{x:i,y:a}=o.center;e.each(e=>{if(e!==o){const{x:t,y:n}=e.center,r=Math.abs(t-i),s=Math.abs(n-a),l=Math.round(To(r,s));let c=Math.round(Math.atan(Math.min(r,s)/Math.max(r,s))*(180/Math.PI));if(n>a)if(t>i)if(r>s)c+=90;else c=180-c;else if(r>s)c=270-c;else c+=180;else if(n<a){if(i>t)if(r>s)c+=270;else c=360-c;else if(r>s)c=90-c}else c=t>i?90:270;e.app("layout_constraintCircle",o.documentId),e.app("layout_constraintCircleRadius",bo(l)),e.app("layout_constraintCircleAngle",c.toString())}})}else e.each(i=>{if(!i.anchored)t.addGuideline(i,e)})}}var vo=squared.base.LayoutUI;const xo=squared.base,{CSS_UNIT:wo,isLength:_o}=squared.lib.css,{BOX_STANDARD:No,NODE_ALIGNMENT:Io,NODE_RESOURCE:Ro,NODE_TEMPLATE:Co}=xo.lib.enumeration,Lo=xo.extensions.CssGrid,ko=Ro.BOX_SPACING|Ro.FONT_STYLE|Ro.VALUE_STRING,Po=e=>!e.blockStatic&&!e.hasPX("width")||e.has("width",{type:6,not:"100%"})&&"100%"!==e.css("minWidth")||e.has("maxWidth",{type:6,not:"100%"}),Oo=e=>"100%"===e.css("height")||"100%"===e.css("minHeight"),Do=e=>e.marginTop>0||e.marginRight>0||e.marginBottom>0||e.marginLeft>0,Mo=(e,t)=>t.visibleStyle.background&&(Po(e)||!Oo(t)||!Oo(e)),Wo=e=>"HTML"===e.tagName&&(e.contentBoxWidth>0||e.contentBoxHeight>0||Do(e)),Bo=(e,t,i,a,n,o,r)=>i&&a&&((!n||!o)&&(e.has("backgroundPositionX")||e.has("backgroundPositionY")||r&&(Po(e)||!Oo(t)||!Oo(e)))||"fixed"===e.css("backgroundAttachment"));class Xo extends squared.base.ExtensionUI{is(e){return e.documentBody}condition(e,t){const{backgroundColor:i,backgroundImage:a,backgroundRepeatX:n,backgroundRepeatY:o,borderWidth:r}=e.visibleStyle;return((e,t,i,a,n)=>(i||a)&&!Mo(e,t)&&(n||e.gridElement&&(Lo.isJustified(e)||Lo.isAligned(e))))(e,t,i,a,r)||Bo(e,t,i,a,n,o,r)||((e,t)=>t&&Do(e))(e,a)||Wo(t)}processNode(e,i){var a;const n=this.controller,{backgroundColor:o,backgroundImage:r,visibleStyle:s}=e,{backgroundColor:l,backgroundImage:c,backgroundRepeatX:h,backgroundRepeatY:d,borderWidth:f}=s,u=Bo(e,i,l,c,h,d,f),p=e.hasHeight||true===(null===(a=e.actualParent)||void 0===a?void 0:a.hasHeight);let g,m,y=i;const b=i=>{i.setControlType(dt.getControlName(t.CONSTRAINT,e.api),t.CONSTRAINT),i.addAlign(16),i.render(y),this.application.addLayoutTemplate(y,i,{type:1,node:i,controlName:i.controlName}),m=i,y=i},T=Mo(e,i),E="fixed"===e.css("backgroundAttachment");if(""!==o){if(!(c&&h&&d)){if(g=n.createNodeWrapper(e,y,{resource:ko}),g.css("backgroundColor",o),g.setCacheValue("backgroundColor",o),!T)g.setLayoutWidth("match_parent"),g.setLayoutHeight("match_parent");else if(!Po(e))g.setLayoutWidth("match_parent");g.unsetCache("visibleStyle")}e.css("backgroundColor","transparent"),e.setCacheValue("backgroundColor",""),s.backgroundColor=false}if(""!==r&&(T||u||d||i.visibleStyle.background||Do(e))){if(g){if(u||E)b(g),g=n.createNodeWrapper(e,m,{resource:Ro.BOX_SPACING})}else g=n.createNodeWrapper(e,y,{resource:ko});g.setLayoutWidth("match_parent");const t=i.cssInitial("height"),a=i.cssInitial("minHeight");let o=e.css("backgroundSize");if(""===t&&""===a)g.setLayoutHeight(!T&&(E||!(u&&p)&&(d||e.has("backgroundSize")||e.css("backgroundPosition").split(" ").some(e=>_o(e)&&parseInt(e)>0)))?"match_parent":"wrap_content");else{if("100%"!==t&&"100%"!==a){const e=i.toElementInt("offsetHeight");if(e<window.innerHeight)o=`auto ${e}px`}g.setLayoutHeight("match_parent")}if(g.cssApply({backgroundImage:r,backgroundSize:o,border:"0px none solid",borderRadius:"0px"}),g.cssApply(e.cssAsObject("backgroundRepeat","backgroundPositionX","backgroundPositionY","backgroundClip")),g.setCacheValue("backgroundImage",r),g.unsetCache("visibleStyle"),E)g.android("scrollbars","vertical");e.css("backgroundImage","none"),e.setCacheValue("backgroundImage",""),s.backgroundImage=false,s.backgroundRepeatX=false,s.backgroundRepeatY=false}if(Wo(i)){if(!g)g=n.createNodeWrapper(e,y);g.unsafe("excludeResource",Ro.FONT_STYLE|Ro.VALUE_STRING),i.resetBox(30,g),i.resetBox(480,g),g.setLayoutWidth("match_parent",false),g.setLayoutHeight("wrap_content",false)}if(g)return s.background=s.borderWidth||s.backgroundImage||s.backgroundColor,{parent:g,parentAs:m,renderAs:g,outputAs:this.application.renderNode(new vo(m||i,g,t.CONSTRAINT,16,g.children)),remove:true};else return{remove:true}}}var Go=squared.base.LayoutUI;const Ho=squared.base,{BOX_STANDARD:Vo,NODE_ALIGNMENT:Fo,NODE_RESOURCE:zo}=Ho.lib.enumeration,Uo=Ho.extensions.CssGrid,qo=e=>"space-between"===e?"match_parent":"wrap_content";class Yo extends squared.base.ExtensionUI{is(e){return e.gridElement}condition(e){return Uo.isJustified(e)||Uo.isAligned(e)}processNode(e,i){const n=this.controller.createNodeWrapper(e,i,{containerType:t.CONSTRAINT,resource:zo.ASSET});if(n.inherit(e,"styleMap","boxStyle"),e.resetBox(30,n),e.resetBox(480,n),e.data(a.DELEGATE_CSS_GRID,"unsetContentBox",true),Uo.isJustified(e))e.setLayoutWidth(qo(e.css("justifyContent")));else if(e.hasPX("width",false))e.setLayoutWidth("match_parent");else n.setLayoutWidth(e.blockStatic?"match_parent":"wrap_content");if(Uo.isAligned(e))e.setLayoutHeight(qo(e.css("alignContent")));else if(e.hasPX("height",false))e.setLayoutHeight("match_parent");else n.setLayoutHeight("wrap_content");return{parent:n,renderAs:n,outputAs:this.application.renderNode(new Go(i,n,t.CONSTRAINT,4096,n.children)),include:true}}}var jo=squared.base.LayoutUI;const{NODE_ALIGNMENT:Ko}=squared.base.lib.enumeration;class $o extends squared.base.ExtensionUI{is(e){return!e.inputElement&&!e.support.maxDimension}condition(e,t){const i=e.hasPX("maxWidth")&&!t.layoutConstraint&&!t.layoutElement&&(t.layoutVertical||t.layoutFrame||e.blockStatic||e.onlyChild&&(t.blockStatic||t.hasWidth)),n=e.hasPX("maxHeight")&&(t.hasHeight||t.gridElement||t.tableElement);if(i||n)return e.data(a.DELEGATE_MAXWIDTHHEIGHT,"mainData",{maxWidth:i,maxHeight:n}),true;else return false}processNode(e,i){const n=e.data(a.DELEGATE_MAXWIDTHHEIGHT,"mainData");if(n){const a=this.controller.createNodeWrapper(e,i,{containerType:t.CONSTRAINT,alignmentType:64,resetMargin:true});if(n.maxWidth)if(e.setLayoutWidth("0px"),a.setLayoutWidth("match_parent"),i.layoutElement){const t=e.autoMargin;t.horizontal=false,t.left=false,t.right=false,t.leftRight=false}if(n.maxHeight)if(e.setLayoutHeight("0px"),a.setLayoutHeight("match_parent"),i.layoutElement){const t=e.autoMargin;if(t.vertical=false,t.top=false,t.bottom=false,t.topBottom=false,!n.maxHeight&&e.blockStatic&&!e.hasWidth)e.setLayoutWidth("match_parent",false)}return{parent:a,renderAs:a,outputAs:this.application.renderNode(new jo(i,a,a.containerType,4096,a.children))}}}}var Zo=squared.base.LayoutUI;const{BOX_STANDARD:Jo,NODE_ALIGNMENT:Qo}=squared.base.lib.enumeration;function er(e,t){if(e.pageFlow)return e===t.firstStaticChild&&e.inlineFlow&&!e.centerAligned&&!e.rightAligned&&e.marginLeft<0&&Math.abs(e.marginLeft)<=t.marginLeft+t.paddingLeft&&!t.some(e=>e.multiline);else return e.leftTopAxis&&(e.left<0||!e.hasPX("left")&&e.right<0)}class tr extends squared.base.ExtensionUI{is(e){return e.length>0&&!e.originalRoot&&"hidden"!==e.css("overflowX")}condition(e){return e.some(t=>er(t,e))}processNode(e,i){const n=e.children.filter(t=>er(t,e)),o=this.controller.createNodeWrapper(e,i,{children:n,containerType:t.CONSTRAINT});e.resetBox(10,o);let r,s=NaN,l=NaN;if(n.forEach(e=>{const t=e.linear;if(e.pageFlow){if(isNaN(s)||t.left<s)s=t.left;r=e}else if(e.hasPX("left")){if(e.left<0&&(isNaN(s)||t.left<s))s=t.left}else if(e.right<0&&(isNaN(l)||t.right>l))l=t.right}),!e.pageFlow){if(!isNaN(s)&&!e.has("left")){const t=e.linear.left-s;if(t>0)e.modifyBox(16,t)}if(!isNaN(l)&&!e.has("right")){const t=l-e.linear.right;if(t>0)e.modifyBox(4,t)}}else if(e.hasWidth)o.setLayoutWidth("wrap_content");return e.data(a.DELEGATE_NEGATIVEX,"mainData",{container:o,children:n,offsetLeft:e.marginLeft+e.paddingLeft,firstChild:r}),{parent:o,renderAs:o,outputAs:this.application.renderNode(new Zo(i,o,o.containerType,4104,o.children)),subscribe:true}}postBaseLayout(e){const t=e.data(a.DELEGATE_NEGATIVEX,"mainData");if(t){let i=t.firstChild;if(i)i=i.ascend({excluding:e,attr:"outerWrapper"}).pop()||i,i.anchor("left","parent"),i.anchorStyle("horizontal",0),i.anchorParent("vertical",0),i.modifyBox(16,t.offsetLeft),dt.setConstraintDimension(i),i.positioned=true;t.children.forEach(t=>{if(t!==i)if(t.hasPX("left"))t.translateX(t.left),t.alignSibling("left",e.documentId),t.constraint.horizontal=true;else if(t.hasPX("right"))t.translateX(-t.right),t.alignSibling("right",e.documentId),t.constraint.horizontal=true}),e.anchorParent("horizontal",0),e.anchorParent("vertical",0),dt.setConstraintDimension(e),e.positioned=true}}beforeCascade(){for(const e of this.subscribers){const t=e.data(a.DELEGATE_NEGATIVEX,"mainData");if(t){const i=e.android("translationX"),a=e.android("translationY");if(""!==i||""!==a){const e=parseInt(i),n=parseInt(a);t.children.forEach(t=>{if(!isNaN(e))t.translateX(e);if(!isNaN(n))t.translateY(n)})}}}}}var ir=squared.base.LayoutUI;const{BOX_STANDARD:ar,NODE_ALIGNMENT:nr}=squared.base.lib.enumeration,or=(e,t)=>t.marginLeft<0&&(e.originalRoot||t.linear.left<Math.floor(e.box.left)),rr=(e,t)=>t.marginTop<0&&(e.originalRoot||t.linear.top<Math.floor(e.box.top));function sr(e,t){const i=e.documentBody;if(!t&&!i)return false;const n=e.originalRoot,o=i&&e.positionStatic,r=new Set,s=e.paddingTop+(i?e.marginTop:0),l=e.paddingRight+(i?e.marginRight:0),c=e.paddingBottom+(i?e.marginBottom:0),h=e.paddingLeft+(i?e.marginLeft:0);let d=false,f=false;if(e.each(a=>{const u=n&&"fixed"===a.css("position");if(a.pageFlow||!t&&!u)return;const p=u&&a.autoPosition;if(a.hasPX("left")||p)if(i&&("100%"===a.css("width")||"100%"===a.css("minWidth")))r.add(a),d=true;else{const t=a.left;if((t>=0||n)&&t<h)r.add(a);else if(t<0&&e.marginLeft>0)r.add(a);else if(!a.hasPX("right")&&or(e,a))r.add(a)}else if(a.hasPX("right"))if(o)r.add(a),d=true;else{const t=a.right;if((t>=0||n)&&t<l)r.add(a);else if(t<0&&e.marginRight>0)r.add(a);else if(((e,t)=>t.marginRight<0&&(e.originalRoot||t.linear.right>Math.ceil(e.box.right)))(e,a))r.add(a)}else if(or(e,a))r.add(a);if(a.hasPX("top")||p)if(i&&("100%"===a.css("height")||"100%"===a.css("minHeight")))r.add(a),f=true;else{const t=a.top;if((t>=0||n)&&t<s)r.add(a);else if(t<0&&e.marginTop>0)r.add(a);else if(!a.hasPX("bottom")&&rr(e,a))r.add(a)}else if(a.hasPX("bottom"))if(o)r.add(a),f=true;else{const t=a.bottom;if((t>=0||n)&&t<c)r.add(a);else if(t<0&&e.marginBottom>0)r.add(a);else if(((e,t)=>t.marginBottom<0&&(e.originalRoot||t.linear.bottom>Math.ceil(e.box.bottom)))(e,a))r.add(a)}else if(rr(e,a))r.add(a)}),r.size)return e.data(a.DELEGATE_POSITIVEX,"mainData",{children:Array.from(r),right:d,bottom:f}),true;else return false}class lr extends squared.base.ExtensionUI{is(e){return e.length>0}condition(e){return sr(e,e.contentBoxWidth>0||e.contentBoxHeight>0||e.marginTop>0||e.marginRight>0||e.marginBottom>0||e.marginLeft>0)}processNode(e,i){const n=e.data(a.DELEGATE_POSITIVEX,"mainData");if(n){const a=this.controller.createNodeWrapper(e,i,{children:n.children,resetMargin:!e.originalRoot&&!e.pageFlow||i.layoutGrid,cascade:true,inheritDataset:true});if(e.documentBody){if(n.right)a.setLayoutWidth("match_parent");if(n.bottom)a.setLayoutHeight("match_parent")}else if(!e.pageFlow){if(!e.hasPX("width")&&e.hasPX("left")&&e.hasPX("right"))e.setLayoutWidth("match_parent");if(!e.hasPX("height")&&e.hasPX("top")&&e.hasPX("bottom"))e.setLayoutHeight("match_parent")}return{parent:a,renderAs:a,outputAs:this.application.renderNode(new ir(i,a,t.CONSTRAINT,32,a.children)),subscribe:true}}}postBaseLayout(e){const t=e.data(a.DELEGATE_POSITIVEX,"mainData");if(t){const i=e.documentId;t.children.forEach(t=>{const a=!t.pageFlow&&(t.absoluteParent!==t.documentParent||"fixed"===t.css("position")||e.documentBody),n=t.outerMostWrapper;if(t.hasPX("left")){if(!a)t.translateX(t.left),t.alignSibling("left",i),t.constraint.horizontal=true;n.modifyBox(16,e.borderLeftWidth)}if(t.hasPX("right")){if(!a)t.translateX(-t.right),t.alignSibling("right",i),t.constraint.horizontal=true;n.modifyBox(4,e.borderRightWidth)}else if(t.marginLeft<0&&or(e,t))n.alignSibling("left",i),n.translateX(t.linear.left-e.bounds.left),n.modifyBox(16,e.borderLeftWidth),n.constraint.horizontal=true,t.setBox(16,{reset:1});if(t.hasPX("top")){if(!a)t.translateY(t.top),t.alignSibling("top",i),t.constraint.vertical=true;n.modifyBox(2,e.borderTopWidth)}if(t.hasPX("bottom")){if(!a)t.translateY(-t.bottom),t.alignSibling("bottom",i),t.constraint.vertical=true;n.modifyBox(8,e.borderBottomWidth)}else if(t.marginTop<0&&rr(e,t))n.alignSibling("top",i),n.translateY(t.linear.top-e.bounds.top),n.modifyBox(2,e.borderTopWidth),n.constraint.vertical=true,t.setBox(2,{reset:1})})}}}var cr=squared.base.LayoutUI;const{CSS_UNIT:hr}=squared.lib.css,{NODE_ALIGNMENT:dr}=squared.base.lib.enumeration;function fr(e){const t=e.percentWidth;return t>0&&t<1}function ur(e){const t=e.percentHeight;return t>0&&t<1}class pr extends squared.base.ExtensionUI{is(e){return e.pageFlow}condition(e,t){return(e=>!e.documentParent.layoutElement&&!e.display.startsWith("table"))(e)&&(fr(e)&&!t.layoutConstraint&&("100%"!==e.cssInitial("width")||e.has("maxWidth",{type:4,not:"100%"}))&&(e.originalRoot||e.hasPX("height")||(t.layoutVertical||e.onlyChild)&&(t.blockStatic||t.hasPX("width")))||ur(e)&&("100%"!==e.cssInitial("height")||e.has("maxHeight",{type:4,not:"100%"}))&&(e.originalRoot||t.hasHeight))}processNode(e,i){const a=this.controller.createNodeWrapper(e,i,{resetMargin:true});if(fr(e))a.setCacheValue("hasWidth",true),a.css("display","block"),a.setLayoutWidth("match_parent"),e.setLayoutWidth("100%"===e.cssInitial("width")&&!e.hasPX("maxWidth")?"match_parent":"0px");else a.setLayoutWidth("wrap_content");if(ur(e))a.setCacheValue("hasHeight",true),a.setLayoutHeight("match_parent"),e.setLayoutHeight("100%"===e.cssInitial("height")&&!e.hasPX("maxHeight")?"match_parent":"0px");else a.setLayoutHeight("wrap_content");return{parent:a,renderAs:a,outputAs:this.application.renderNode(new cr(i,a,t.CONSTRAINT,4096,a.children))}}}const gr=squared.base,{getElementAsNode:mr}=squared.lib.session,{NODE_ALIGNMENT:yr,NODE_RESOURCE:br,NODE_TEMPLATE:Tr}=gr.lib.enumeration,Er=gr.NodeUI;function Sr(e,t){let i=false;const a=e.length;let n=0;while(n<a){const a=e[n++];if(a.toElementBoolean("checked"))a.android("checked","true");if(!i&&a.baseline&&a.parent===t&&t.layoutLinear&&(0===n||t.layoutHorizontal))t.android("baselineAlignedChildIndex",n.toString()),i=true;a.positioned=true}return i}const Ar=e=>{var t;return(null===(t=e.name)||void 0===t?void 0:t.trim())||""};class vr extends squared.base.ExtensionUI{is(e){return e.is(t.RADIO)}condition(e){return""!==Ar(e.element)&&!e.positioned}processNode(e,i){var a;const o=Ar(e.element),r=[],s=[];let l=-1,c=-1;i.each((i,a)=>{const n=i.renderAs;let h;if(n){if(n!==e)h=i;i=n}if(i.is(t.RADIO)&&!i.rendered&&Ar(i.element)===o){if(r.push(i),-1===l)l=a;c=a}else if(!i.visible&&r.includes(i.labelFor))c=a;if(h)s.push(h)});let h=r.length;if(h>1){const{target:a,use:o}=e.dataset,h=Er.linearData(i.children.slice(l,c+1)).linearX,d=this.controller.createNodeGroup(e,r,{parent:i,delegate:true}),f=n.RADIOGROUP;if(d.setControlType(f,t.LINEAR),h)d.addAlign(136),d.android("orientation","horizontal");else d.addAlign(16),d.android("orientation","vertical");if(d.inherit(e,"alignment"),d.exclude({resource:br.ASSET}),d.render(a&&!o?this.application.resolveTarget(a):i),!Sr(r,d))d.css("verticalAlign","middle"),d.setCacheValue("baseline",false),d.setCacheValue("verticalAlign","middle");return s.forEach(e=>e.hide({remove:true})),this.subscribers.add(d),{renderAs:d,outputAs:{type:1,node:d,controlName:f},parent:d,complete:true}}else{r.length=0;const i=Ar(e.element),o=e.sessionId;if(document.querySelectorAll(`input[type=radio][name=${i}]`).forEach(e=>{const t=mr(e,o);if(t)r.push(t)}),h=r.length,h>1&&r.includes(e)){const e=n.RADIOGROUP,i=new Map;let o=0;while(o<h){const t=r[o++].ascend({condition:e=>e.layoutLinear,error:t=>t.controlName===e,every:true});if(t.length)t.forEach(e=>i.set(e,(i.get(e)||0)+1));else{i.clear();break}}for(const[n,o]of i.entries())if(o===h){n.unsafe("controlName",e),n.containerType=t.RADIO;const i=n.renderParent;if(i){const t=null===(a=i.renderTemplates)||void 0===a?void 0:a.find(e=>(null==e?void 0:e.node)===n);if(t)t.controlName=e}return void Sr(r,n)}}}}postBaseLayout(e){e.renderEach(t=>{if(t.naturalElement&&t.toElementBoolean("checked"))e.android("checkedButton",t.documentId)})}}const xr=squared.lib,{formatPX:wr}=xr.css,{BOX_STANDARD:_r,NODE_RESOURCE:Nr,NODE_TEMPLATE:Ir}=squared.base.lib.enumeration;class Rr extends squared.base.ExtensionUI{is(e){return e.length>0}condition(e){return e.overflowX&&e.hasPX("width")||e.overflowY&&e.hasPX("height")&&e.hasHeight}processNode(e,i){const a=[],r=[],s=n.HORIZONTAL_SCROLL,l=e.api<29?n.VERTICAL_SCROLL:o.VERTICAL_SCROLL;if(e.overflowX&&e.overflowY)a.push(s,l);else if(e.overflowX)a.push(s);else if(e.overflowY)a.push(l);if(a.includes(s)){const t=[];let i=e.actualWidth-e.contentBoxWidth,n=true,o=0;if(e.each(e=>{if(e.textElement&&"nowrap"!==e.css("whiteSpace"))t.push(e);else{const t=e.actualWidth;if(t<=i)return;else if(t>o)o=t}n=false}),!n){if(o>i)i=o}else a.shift();if(a.length)t.forEach(e=>{if(e.textElement)e.css("maxWidth",wr(i))})}const c=a.length;if(c){for(let n=0;n<c;++n){const o=this.application.createNode({parent:i});if(0===n)o.inherit(e,"base","initial","styleMap"),i.appendTry(e,o);else o.inherit(e,"base"),o.exclude({resource:Nr.BOX_STYLE});o.setControlType(a[n],t.BLOCK),o.exclude({resource:Nr.ASSET}),o.resetBox(480),o.childIndex=e.childIndex,r.push(o)}for(let t=0;t<c;++t){const a=r[t];switch(a.controlName){case l:e.setLayoutHeight("wrap_content"),a.setLayoutHeight(wr(e.actualHeight)),a.android("scrollbars","vertical"),a.cssApply({width:1===c&&e.css("width")||"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case s:e.setLayoutWidth("wrap_content"),a.setLayoutWidth(wr(e.actualWidth)),a.android("scrollbars","horizontal"),a.cssApply({height:1===c&&e.css("height")||"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"});break}if(0===t){const t=e.dataset;a.render(t.target&&!t.use?this.application.resolveTarget(t.target):i)}else a.render(r[t-1]);a.unsetCache(),this.application.addLayoutTemplate(a.renderParent||i,a,{type:1,node:a,controlName:a.controlName})}let n,o=true;do{if(n=r.pop(),o)i=n,n.innerWrapped=e,o=false;else n.innerWrapped=i}while(r.length);return e.exclude({resource:Nr.BOX_STYLE}),e.resetBox(30,n),e.parent=i,{parent:i}}}}var Cr={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},Lr={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","start","top","right","end","bottom","drawable","width","height","gravity"],">":{shape:Cr.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const kr={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},Pr={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":true,">":{"clip-path":{"^":"android","@":["name","pathData"]},path:kr.path},"#":"include"}};var Or={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:kr.path},"#":"include"}};const Dr=squared.lib,Mr=squared.base,{reduceRGBA:Wr}=Dr.color,{extractURL:Br,formatPercent:Xr,formatPX:Gr,getBackgroundPosition:Hr}=Dr.css,{truncate:Vr}=Dr.math,{CHAR:Fr,XML:zr}=Dr.regex,{delimitString:Ur,flatArray:qr,isEqual:Yr,objectMap:jr,resolvePath:Kr}=Dr.util,{applyTemplate:$r}=Dr.xml,{BOX_STANDARD:Zr,NODE_RESOURCE:Jr}=Mr.lib.enumeration,Qr=Mr.NodeUI;function es(e,t=-1,i=false){const{style:a,color:n}=e,o=fs(e.width),r=us(n);switch(a){case"solid":break;case"dotted":r.dashWidth=Gr(o),r.dashGap=r.dashWidth;break;case"dashed":{let e,t;switch(o){case 1:case 2:e=3*o,t=e-1;break;case 3:e=6,t=3;break;default:e=2*o,t=4;break}r.dashWidth=Gr(e),r.dashGap=Gr(t);break}case"inset":case"outset":case"groove":case"ridge":{const e=n.rgba;let r=1;if(1===o){if("inset"===a||"outset"===a)r=.5}else{const n=e.r===e.g&&e.g===e.b;let o=0;if("ridge"===a)i=!i,o+=.25;else if("groove"===a)o+=.25;else if(n){if("inset"===a)i=!i}else if("outset"===a)i=!i;if(i)switch(t){case 0:case 3:t=1;break;case 1:case 2:t=0;break}switch(t){case 0:case 3:if(n)r=.5+o;break;case 1:case 2:r=n?.75+o:-.75;break}}if(1!==r){const t=Wr(e,r,n.valueAsRGBA);if(t)return us(t)}break}}return r}function ts(e,t=-1,i=false,a=false){if(e){let n;if(ns(e.style)){const o=parseFloat(e.width);if(n=es(e,t,!a),a)n.width=Gr(2*Math.ceil(o/2));else n.width=Gr(i?Math.ceil(o/2):fs(e.width))}else n=es(e),n.width=Gr(fs(e.width));return n}}function is(e){const[t,i,a,n]=e,o={};let r=false;if("0px"!==t)o.topLeftRadius=t,r=true;if("0px"!==i)o.topRightRadius=i,r=true;if("0px"!==a)o.bottomRightRadius=a,r=true;if("0px"!==n)o.bottomLeftRadius=n,r=true;return r?o:void 0}function as(e){const t=cs(e,false);return""!==t?{color:t}:void 0}function ns(e,t=0){switch(e){case"groove":case"ridge":case"inset":case"outset":return 1!==t;default:return false}}function os(e,t,i,a,n,o,r=0,s){const l=fs(t.width),c=Math.max(1,Math.floor(l/3)),h=r>0?Gr(r):"";let d="-"+Gr(c+r+1);e.push({top:i?h:d,right:a?h:d,bottom:n?h:d,left:o?h:d,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Gr(c)},es(t)),corners:s}});const f=l-c+r,u=Gr(f);d="-"+Gr(f+1),e.push({top:i?u:d,right:a?u:d,bottom:n?u:d,left:o?u:d,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Gr(c)},es(t)),corners:s}})}function rs(e,t,i){if(!e.includes(" ")&&t.includes(" "))return Fr.LOWERCASE.test(e)?("initial"===e?i:e)+" 0px":i+" "+e;else if("initial"===e)return"0px";return e}function ss(e,t=21,i){const a=e.type,n={type:a,item:false,positioning:true},o=t>=21;switch(a){case"conic":{const t=e.center;if(n.type="sweep",o)n.centerX=(2*t.left).toString(),n.centerY=(2*t.top).toString();else n.centerX=Xr(t.leftAsPercent),n.centerY=Xr(t.topAsPercent);break}case"radial":{const{center:t,radius:i}=e;if(o)n.gradientRadius=i.toString(),n.centerX=t.left.toString(),n.centerY=t.top.toString();else n.gradientRadius=Gr(i),n.centerX=Xr(t.leftAsPercent),n.centerY=Xr(t.topAsPercent);break}case"linear":{const{angle:t,angleExtent:a,dimension:o}=e,{width:r,height:s}=o;let l=a.x,c=a.y;if(t<=90)c+=s,n.startX="0",n.startY=s.toString();else if(t<=180)n.startX="0",n.startY="0";else if(t<=270)l+=r,n.startX=r.toString(),n.startY="0";else l+=r,c+=s,n.startX=r.toString(),n.startY=s.toString();n.endX=Vr(l,i),n.endY=Vr(c,i);break}}const r=e.colorStops;if(o)n.item=ms(r);else{const e=r.length;if(n.startColor=cs(r[0].color),n.endColor=cs(r[e-1].color),e>2)n.centerColor=cs(r[Math.floor(e/2)].color)}return n}function ls(e,t,i=true){const a=[],n=[{"xmlns:android":h.android,item:a}],o=!i&&as(e.backgroundColor);if(o)a.push({shape:{"android:shape":"rectangle",solid:o}});if(t)t.forEach(e=>{const t=e.gradient;a.push(t?{shape:{"android:shape":"rectangle",gradient:t}}:e)});return n}function cs(e,t=true){const i=B.addColor(e,t);return""!==i?"@color/"+i:""}function hs(e,t){while(e.length<t)e=e.concat(e.slice(0));return e.length=t,e}function ds(e,t,i,a,n,o){const r=t[i];if(r){const t=fs(r.width);if("double"===r.style&&t>1)os(e.item,r,0===i,1===i,2===i,3===i,n,a);else{const s=t>1&&ps(r);if(s){const a="-"+Gr(t+n+1);e.item.push({top:0===i?"":a,right:1===i?"":a,bottom:2===i?"":a,left:3===i?"":a,shape:{"android:shape":"rectangle",stroke:ts(r,i,s,true)}})}const l="-"+Gr((s?Math.ceil(t/2):t)+n+1);e.item.push({top:0===i?o:l,right:1===i?o:l,bottom:2===i?o:l,left:3===i?o:l,shape:{"android:shape":"rectangle",corners:a,stroke:ts(r,i,s)}})}}}const fs=e=>Math.round(parseFloat(e)),us=e=>({color:cs(e),dashWidth:"",dashGap:""}),ps=e=>"groove"===e.style||"ridge"===e.style||"double"===e.style&&fs(e.width)>1,gs=(e,t)=>`${e}px ${t}px`;function ms(e,t){return jr(e,e=>({color:cs(e.color),offset:Vr(e.offset,t)}))}function ys(e,t,i=0,a=0,n){if(n)i=Vr(i,n),a=Vr(a,n),e=Vr(i+e,n),t=Vr(a+t,n);else e+=i,t+=a;return`M${i},${a} ${e},${a} ${e},${t} ${i},${t} Z`}class bs extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={drawOutlineAsInsetBorder:true},this.eventOnly=true}beforeParseDocument(){this._resourceSvgInstance=this.controller.localSettings.svg.enabled?this.application.builtInExtensions[a.RESOURCE_SVG]:void 0}afterResources(){const e=this.application.userSettings,t=this.options.drawOutlineAsInsetBorder;let i=false;const a=(e,t,a)=>{B.addTheme({name:e,parent:t,items:{"android:windowBackground":a,"android:windowFullscreen":"true","android:fitsSystemWindows":"true"}}),i=true},n=(e,t)=>{if(e!==t&&!t.hasResource(Jr.BOX_SPACING)&&0===e.percentWidth)switch(e.cssInitial("maxWidth")){case"":case"auto":case"100%":{const e=t.renderChildren;if(1===e.length)t.removeTry(e[0]);break}}},o=(t,o)=>{if(""!==o){const r="@drawable/"+B.insertStoredAsset("drawables",`${t.containerName.toLowerCase()}_${t.controlId}`,o);if(!i)if("HTML"===t.tagName)return void a(e.manifestThemeName,e.manifestParentThemeName,r);else{const i=t.innerMostWrapped;if(i.documentBody&&(""!==t.backgroundColor||t.visibleStyle.backgroundRepeatY))return a(e.manifestThemeName,e.manifestParentThemeName,r),void n(i,t)}t.android("background",r,false)}};this.cacheProcessing.each(r=>{var s;const l=r.data(B.KEY_NAME,"boxStyle");if(l){if(r.inputElement){const e=r.companion;if("LABEL"===(null==e?void 0:e.tagName)&&!e.visible){const t=null===(s=e.data(B.KEY_NAME,"boxStyle"))||void 0===s?void 0:s.backgroundColor;if(t)l.backgroundColor=t}}const c=this.getDrawableImages(r,l),h=l.outline;let[d,f]=this.getDrawableBorder(l,void 0,c,t&&h?function(e){const t=fs(e.width);return 2===t&&"double"===e.style?3:t}(h):0);const u=void 0===d&&void 0===f;if(h&&(t||u)){const[e,t]=this.getDrawableBorder(l,h,u?c:void 0,void 0,!u);if(e){if(!d)d=e}else if(t)if(f)f[0].item=f[0].item.concat(t[0].item);else f=t}if(d)o(r,$r("shape",Cr,d));else if(f)o(r,$r("layer-list",Lr,f));else{const t=l.backgroundColor;if(t){const o=cs(t,false);if(""!==o){if(!i)if("HTML"===r.tagName)return void a(e.manifestThemeName,e.manifestParentThemeName,o);else{const t=r.innerMostWrapped;if(t.documentBody)return a(e.manifestThemeName,e.manifestParentThemeName,o),void n(t,r)}const s=r.data(B.KEY_NAME,"fontStyle");if(s)s.backgroundColor=t;else r.android("background",o,false)}}}}})}getDrawableBorder(e,t,i,a=0,n=false){const o=new Array(4),r=new Array(4),s=!n?function(e){if(e){const t=e.length;if(1===t)return{radius:e[0]};else if(8===t){const i=new Array(4);for(let a=0,n=0;a<t;a+=2)i[n++]=Gr((parseFloat(e[a])+parseFloat(e[a+1]))/2);return is(i)}else return is(e)}}(e.borderRadius):void 0,l=a>0?Gr(a):"";let c,d,f,u,p=true,g=true;if(t){d=t;for(let e=0;e<4;++e)o[e]=t,r[e]=true}else{o[0]=e.borderTop,o[1]=e.borderRight,o[2]=e.borderBottom,o[3]=e.borderLeft;for(let e=0;e<4;++e){const t=o[e];if(t){if(p&&d)if(p=Yr(d,t),!p)g=false;d=t,r[e]=true}else r[e]=false,g=false}}if(g)c=d;if(c&&!ns(c.style,fs(c.width))&&!("double"===c.style&&parseInt(c.width)>1)||!d&&(s||(null==i?void 0:i.length))){const t=c?ts(c):false;if((null==i?void 0:i.length)||a>0||n){if(u=ls(e,i,n),s||t)u[0].item.push({top:l,right:l,left:l,bottom:l,shape:{"android:shape":"rectangle",corners:s,stroke:t}})}else f=function(e,t,i){return[{"xmlns:android":h.android,"android:shape":"rectangle",stroke:e,solid:t,corners:i}]}(t,!n&&as(e.backgroundColor),s)}else if(d)if(u=ls(e,i,n),p&&!ns(d.style)){const e=fs(d.width);if("double"===d.style&&e>1)os(u[0].item,d,r[0],r[1],r[2],r[3],a,s);else{const t="-"+Gr(e+a+1);u[0].item.push({top:r[0]?l:t,right:r[1]?l:t,bottom:r[2]?l:t,left:r[3]?l:t,shape:{"android:shape":"rectangle",corners:s,stroke:ts(d)}})}}else{const e=u[0];ds(e,o,0,s,a,l),ds(e,o,3,s,a,l),ds(e,o,2,s,a,l),ds(e,o,1,s,a,l)}return[f,u]}getDrawableImages(e,i){const a=i.backgroundImage,n=e.data(B.KEY_NAME,"embedded");if(a||n){const o=this.resource,l=e.localSettings.screenDimension,{bounds:c,fontSize:d}=e,{width:f,height:u}=c,p=[],g=[],m=[],y=[],b=[],T=i.backgroundPositionX.split(zr.SEPARATOR),E=i.backgroundPositionY.split(zr.SEPARATOR);let S=i.backgroundRepeat.split(zr.SEPARATOR),A=i.backgroundSize.split(zr.SEPARATOR),v=0;if(a){const t=this._resourceSvgInstance,i=a.length;S=hs(S,i),A=hs(A,i);let n=false;for(let r=0;r<i;++r){let i=a[r],s=false;if("string"==typeof i){if("initial"!==i){if(t){const[a,n]=t.createSvgElement(e,i);if(a&&n){const i=t.createSvgDrawable(e,n);if(""!==i){const t=e.data(B.KEY_NAME,"svgViewBox")||{width:n.width.baseVal.value,height:n.height.baseVal.value};if(!e.svgElement){let{width:e,height:i}=t;if(e>f||i>u){const t=e/f,a=i/u;if(t>a)if(t>1)e=f,i/=t;else i=u*(a/t);else if(a>1)i=u,e/=a;else e=f*(t/a)}t.width=e,t.height=i}g[v]=i,y[v]=t,m[v]=true,s=true}a.removeChild(n)}}if(!s){const e=Br(i);if(""!==e)if(e.startsWith("data:image/")){const t=o.getRawData(e);if(t){const{base64:e,filename:i}=t;if(e)g[v]=i.substring(0,i.lastIndexOf(".")),y[v]=t.width&&t.height?{width:t.width,height:t.height}:void 0,o.writeRawImage(i,e),s=true}}else{i=Kr(e);const t=o.addImageSet({mdpi:i});if(g[v]=t,""!==t)y[v]=o.getImage(i),s=true}}}}else if(i.colorStops.length>1){const t=ss(i,e.api);if(t)g[v]=t,y[v]=i.dimension,s=true}if(s){const t=T[r]||T[r-1],i=E[r]||E[r-1];b[v]=Hr(rs(t,i,"left")+" "+rs(i,t,"top"),e.actualDimension,{fontSize:d,imageDimension:y[v],imageSize:A[r],screenDimension:l}),v++}else S[r]=void 0,A[r]=void 0,n=true}if(n)S=qr(S),A=qr(A)}if(n){if(0===v)S.length=0,A.length=0;n.filter(e=>e.visible&&(e.imageElement||"INPUT_IMAGE"===e.containerName)).forEach(t=>{const i=t.element,a=o.addImageSrc(i);if(""!==a){const n=t.bounds;g[v]=a,S[v]="no-repeat",A[v]=gs(t.actualWidth,t.actualHeight);const r=Hr("INPUT_IMAGE"===t.containerName?gs(0,0):gs(n.left-c.left+e.borderLeftWidth,n.top-c.top+e.borderTopWidth),e.actualDimension,{fontSize:d,imageDimension:n,screenDimension:l}),s=o.getImage(i.src);if(!e.hasPX("width")){const t=((null==s?void 0:s.width)||0)+r.left-(e.paddingLeft+e.borderLeftWidth);if(t>0)e.modifyBox(256,t)}y[v]=s,b[v]=r,v++}})}const{backgroundClip:x,backgroundOrigin:w}=i,_=e.innerMostWrapped.documentBody;for(let i=v-1,a=0;i>=0;--i){const n=g[i],o={order:Number.POSITIVE_INFINITY};if("object"==typeof n&&!n.positioning){o.gravity="fill",o.gradient=n;continue}const d=b[i],T=A[i],E=4===d.orientation.length;let v=y[i],N=NaN,I=NaN;if(v)if(!v.width||!v.height)v=void 0;else N=v.width,I=v.height;let R=0,C=0,L=0,k=0,P=NaN,O=NaN,D=NaN,M=NaN,W=0,X=false,G=false,H=0,V=0,F="",z="",U="",q="",Y="",j=S[i];if(j.includes(" ")){const[e,t]=j.split(" ");if("no-repeat"===e)j="no-repeat"===t?"no-repeat":"repeat-y";else if("no-repeat"===t)j="repeat-x";else j="repeat"}else if("space"===j||"round"===j)j="repeat";switch(j){case"repeat":F="repeat",z="repeat";break;case"repeat-x":F="repeat",z="disabled";break;case"repeat-y":F="disabled",z="repeat";break;default:F="disabled",z="disabled";break}switch(d.horizontal){case"left":case"0%":case"0px":if(U=e.localizeString("left"),E)M=0,X=true;break;case"center":case"50%":U="center_horizontal";break;case"right":case"100%":if(U=e.localizeString("right"),O=0,E)X=true;break;default:if(d.leftAsPercent<1)U="left",M=0,X=true;else U="right",O=0,X=true;break}switch(d.vertical){case"top":case"0%":case"0px":if(q="top",E)P=0,G=true;break;case"center":case"50%":q="center_vertical";break;case"bottom":case"100%":if(q="bottom",D=0,E)G=true;break;default:if(d.topAsPercent<1)q="top",P=0,G=true;else q="bottom",D=0,G=true;break}switch(T){case"auto":case"auto auto":case"initial":if("string"!=typeof n)Y="fill";break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":case"contain":case"cover":case"round":if(F="",z="",Y="fill",_){const t=e.visibleStyle;t.backgroundRepeat=true,t.backgroundRepeatY=true}break;default:if(""!==T)T.split(" ").forEach((t,i)=>{if("100%"===t)if(0===i)Y="fill_horizontal";else Y=Ur({value:Y},"fill_vertical");else if("auto"!==t)if(0===i){if("repeat"!==F)H=e.parseWidth(t,false)}else if("repeat"!==z)V=e.parseHeight(t,false)});break}let K,$=true!==m[i],Z=e.is(t.IMAGE)||"string"!=typeof n,J=false,Q=false,ee=false,te=false,ie=true;if(v){let t=f,i=u;if("contain"!==T)if(!e.hasWidth){const a=window.innerWidth,n=l.width,o=()=>u*(t/f);if(f===a)if(a>=n)t=n,i=o();else({width:t,height:i}=Qr.refitScreen(e,c));else if(a>=n)t=e.actualBoxWidth(f),i=o()}const a=N/t,n=I/i,o=()=>N*V/I,r=()=>I*H/N,s=()=>t*(a/n),h=()=>i*(n/a),p=(e,t)=>{if(F="",z="",Y="",e)U="",q="";if(t)P=NaN,O=NaN,D=NaN,M=NaN,X=false,G=false;ie=false};switch(T){case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(I>=u){ee=true,te=true,V=u,Z=true;break}case"cover":{const o="cover"===T;if(p(o,!o),a<n)if(H=t,V=h(),V>u){const t=d.topAsPercent;if(0!==t)R=Math.round((u-V)*t);if(!e.hasPX("height"))e.css("height",Gr(u-e.contentBoxHeight));if(!X)Y="center_horizontal|fill_horizontal"}else{if(V<u)H=t*u/V,V=u;if(!X)Y="center_horizontal|fill"}else if(a>n){if(H=s(),V=i,H>f){if(e.hasWidth){const e=d.leftAsPercent;if(0!==e)k=Math.round((f-H)*e)}if(!G)Y="center_vertical|fill_vertical"}else{if(H<f)H=f,V=i*f/H;if(!G)Y="center_vertical|fill"}X=false}else Y="fill";G=false;break}case"contain":if(p(true,true),a>n)V=h(),H=N<f?o():f,q="center_vertical",Y="fill_horizontal";else if(a<n)H=s(),V=I<u?r():u,U="center_horizontal",Y="fill_vertical";else Y="fill";break;default:if(0===H&&V>0)H=o();if(0===V&&H>0)V=r();break}}if(x){const{top:t,right:i,left:a,bottom:n}=x;if(0===H)H=f;else H+=e.contentBoxWidth;if(0===V)V=u;else V+=e.contentBoxHeight;if(H-=a+i,V-=t+n,!isNaN(O))C+=i;else k+=a;if(!isNaN(D))L+=n;else R+=t;U="",q=""}else if(ie){if(w){if("repeat"!==F)if(!isNaN(O))C+=w.right;else k+=w.left;if("repeat"!==z)if(!isNaN(D))L+=w.bottom;else R+=w.top}if(!Z&&!_){if(N>f){H=f-(X?Math.min(d.left,0):0);let t=true;if("repeat"===z&&""!==U){switch(U){case"start":case"left":if(C+=f-N,X){const e=d.left;if(e<0)W=e;H=0,C-=e,t=false,U="right",z=""}else U="";M=NaN,O=0;break;case"center_horizontal":U+="|fill_vertical",z="";break;case"right":if(k+=f-N,X){const i=d.right;if(i<0)W=i;H=0,k-=i,t=false,U=e.localizeString("left"),z=""}else U="";M=0,O=NaN;break}X=false,q=""}if(t)Y=Ur({value:Y,not:["fill"]},"fill_horizontal");if("disabled"!==F)F="";J=true}if(I>u){V=u;let e=true;if("repeat"===F&&""!==q){switch(q){case"top":if(G){L+=u-I;const t=d.top;if(t<0)W=t;V=0,L-=t,e=false,q="bottom",F="",P=NaN,D=0}break;case"center_vertical":q+="|fill_horizontal",F="";break;case"bottom":if(R+=u-I,G){const t=d.bottom;if(t<0)W=t;V=0,R-=t,e=false,q="top"}else q="";F="",P=0,D=NaN;break}U="",G=false}if(e)Y=Ur({value:Y,not:["fill"]},"fill_vertical");if("disabled"!==z)z="";Q=true}}}switch(e.controlName){case r.TOOLBAR:case s.TOOLBAR:U="",q="",Y="fill";break}if(!Z){if(0===H&&N<f&&"disabled"===F)H=N,ee=true;if(0===V&&I<u&&"disabled"===z)V=I,te=true;const t=U;if("repeat"===F){switch(q){case"top":if(!isNaN(P))F="";q="";break;case"bottom":if(H>0&&!ee)F="";else if(te)if(H=N,Y=Ur({value:Y,not:["fill"]},"fill_horizontal"),I>=N)F="";break}U=""}if("repeat"===z){switch(t){case"start":case"left":if(!isNaN(M))z="";U="";break;case"center_horizontal":if(e.renderChildren.length)z="";break;case"right":case"end":if(V>0&&!te)z="";else if(ee)if(V=I,Y=Ur({value:Y,not:["fill"]},"fill_vertical"),N>=I)z="";break}q=""}if(""!==U&&!J)Y=Ur({value:Y},U),U="";if(""!==q&&!Q)Y=Ur({value:Y},q),q=""}else if(0===H&&0===V&&"fill"===Y)$=false;if("string"==typeof n)K="@drawable/"+n;else if(n.item){if(0===H)H=(null==v?void 0:v.width)||Qr.refitScreen(e,e.actualDimension).width;if(0===V)V=(null==v?void 0:v.height)||Qr.refitScreen(e,e.actualDimension).height;const t=B.insertStoredAsset("drawables",`${e.controlId}_gradient_${i+1}`,$r("vector",Or,[{"xmlns:android":h.android,"xmlns:aapt":h.aapt,"android:width":Gr(H),"android:height":Gr(V),"android:viewportWidth":H.toString(),"android:viewportHeight":V.toString(),path:{pathData:ys(H,V),"aapt:attr":{name:"android:fillColor",gradient:n}}}]));if(""!==t)K="@drawable/"+t,o.order=a++;if("left"===U||"start"===U)U="";if("top"===q)q="";if("fill"!==Y)if("repeat"===F&&"repeat"===z)Y="fill";else if("repeat"===F)if("fill_vertical"===Y)Y="fill";else Y="fill_horizontal";else if("repeat"===z)if("fill_horizontal"===Y)Y="fill";else Y="fill_vertical"}const ae="center_horizontal"===U&&"center_vertical"===q?"center":Ur({value:U},q);if(K){if($&&(!Z&&(""!==Y&&""!==ae||"repeat"===F||"repeat"===z||_)||ee||te)){let e="";if("disabled"===F&&"disabled"===z)e="disabled",F="",z="";else if("repeat"===F&&"repeat"===z)e="repeat",F="",z="";o.gravity=Y,o.bitmap=[{src:K,gravity:ae,tileMode:e,tileModeX:F,tileModeY:z}]}else o.gravity=Ur({value:ae},Y),o.drawable=K;if(o.drawable||o.bitmap||o.gradient){if(!isNaN(D)){if(G)L+=d.bottom;if(L+=D,0!==L)o.bottom=Gr(L);if(W<0)o.top=Gr(W)}else{if(G)R+=d.top;if(!isNaN(P))R+=P;if(0!==R)o.top=Gr(R);if(W<0)o.bottom=Gr(W)}if(!isNaN(O)){if(X)C+=d.right;if(C+=O,0!==C)o[e.localizeString("right")]=Gr(C);if(W<0)o[e.localizeString("left")]=Gr(W)}else{if(X)k+=d.left;if(!isNaN(M))k+=M;if(0!==k)o[e.localizeString("left")]=Gr(k);if(W<0)o[e.localizeString("right")]=Gr(W)}if(H>0)o.width=Gr(H);if(V>0)o.height=Gr(V);p.push(o)}}}return p.sort((e,t)=>{const i=e.order,a=t.order;if(i===a)return 0;else return i<a?-1:1})}}}const{capitalize:Ts}=squared.lib.util;class Es extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e){const t=this.application.viewModel;if(t){const i=this.controller,a=new Set;if(this.cache.each(e=>{if(e.styleElement&&e.visible)e.unsafe("namespaces").forEach(t=>{const i=te(e.dataset,"viewmodel"+Ts(t));if(i){for(const a in i)e.attr(t,a,`@{${i[a]}}`,true);a.add(e)}})}),a.size)e.forEach(e=>{const n=e.node;for(const e of a)if(e.ascend({condition:e=>e===n,attr:"renderParent"}).length){const{import:o,variable:r}=t,{depth:s,id:l}=n,c="\t".repeat(s),h="\t".repeat(s+1),d="\t".repeat(s+2);let f=c+"<layout {#0}>\n"+h+"<data>\n";if(o)o.forEach(e=>f+=d+`<import type="${e}" />\n`);if(r)r.forEach(e=>f+=d+`<variable name="${e.name}" type="${e.type}" />\n`);f+=h+"</data>\n",i.addBeforeOutsideTemplate(l,f),i.addAfterOutsideTemplate(l,c+"</layout>\n"),n.depth=s-1,a.delete(e);break}})}}}const Ss=squared.lib,{XML:As}=Ss.regex,{convertUnderscore:vs,fromLastIndexOf:xs,safeNestedArray:ws,safeNestedMap:_s}=Ss.util,Ns=B.STORED,Is=/\dpx$/,Rs=/:(\w+)="(-?[\d.]+px)"/;function Cs(e,t,i){if(e.get(t)===i)return t;for(const[a,n]of e.entries())if(i===n&&a.startsWith(t))return a;return B.generateId("dimen",t)}function Ls(e,t,i){const a=t.namespace(e);for(const n in a)if("text"!==n){const o=a[n];if(Is.test(o))ws(i,`${e},${n},${o}`).push(t)}}const ks=e=>xs(e,".");class Ps extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){const e=Ns.dimens,t={};this.cache.each(e=>{if(e.visible){const i=e.containerName.toLowerCase(),a=_s(t,i);Ls("android",e,a),Ls("app",e,a)}});for(const i in t){const a=t[i];for(const t in a){const[n,o,r]=t.split(As.SEPARATOR),s=Cs(e,ks(i)+"_"+vs(o),r);a[t].forEach(e=>e[n](o,"@dimen/"+s)),e.set(s,r)}}}afterFinalize(){if(this.controller.hasAppendProcessing()){const e=Ns.dimens;this.application.layouts.forEach(t=>{let i,a=t.content;while(null!==(i=Rs.exec(a))){const[t,n,o]=i;if("text"!==n){const i=Cs(e,"custom_"+vs(n),o);a=a.replace(t,t.replace(o,"@dimen/"+i)),e.set(i,o)}}t.content=a})}}}const Os=squared.lib,{XML:Ds}=Os.regex,{capitalize:Ms,convertInt:Ws,convertWord:Bs,safeNestedArray:Xs,safeNestedMap:Gs,objectMap:Hs,spliceArray:Vs,trimBoth:Fs}=Os.util,{NODE_RESOURCE:zs}=squared.base.lib.enumeration,Us=B.STORED,qs=/^(\w*?)(?:_(\d+))?$/,Ys=/"/g,js={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},Ks={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},$s={"arial black":"sans-serif","ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},Zs={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},Js={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'},Qs=Object.keys(Js);function el(e,t,i){const a=e.length;t.split(";").forEach(t=>{for(let n=0;n<a;++n){let o=e[n],r=-1,s="";for(const e in o)if(e===t){r=n,s=e,n=a;break}if(-1!==r){if(o=e[r],o[s]=o[s].filter(e=>!i.includes(e)),0===o[s].length)delete o[s];break}}})}class tl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:false},this.eventOnly=true}afterParseDocument(){const e=this.resource,t=this.options.disableFontAlias,i="dp"===e.userSettings.convertPixels,{fonts:a,styles:n}=Us,o={},r={};let s=[];this.cache.each(e=>{if(e.data(B.KEY_NAME,"fontStyle")&&e.hasResource(zs.FONT_STYLE))Xs(o,e.containerName).push(e)});for(const n in o){const l=[],c=o[n];s=s.concat(c),c.forEach(n=>{const{id:o,companion:r,api:s}=n,c=n.data(B.KEY_NAME,"fontStyle");let{fontFamily:h,fontStyle:d,fontWeight:f}=c;if("LABEL"===(null==r?void 0:r.tagName)&&!r.visible)n=r;h.replace(Ys,"").split(Ds.SEPARATOR).some((i,o,r)=>{let l=i=Fs(i,"'").toLowerCase(),c="";if(!t&&$s[l])l=this.options.systemDefaultFont;if(s>=js[l]||!t&&s>=js[Ks[l]])h=l;else if(d&&f){let t=false;if(e.getFont(i,d,f))t=true;else{const a=e.getFont(i,d);if(a)c=f,f=a.fontWeight.toString(),t=true;else if(o<r.length-1)return false;else h=this.options.systemDefaultFont}if(t){l=Bs(l);const e=a.get(l)||{};e[i+"|"+d+"|"+f]=Zs[f]||f,a.set(l,e),h="@font/"+l}}else return false;if("normal"===d)d="";if(""!==c)f=c;else if("400"===f||n.api<26)f="";if(parseInt(f)>500)d+=(d?"|":"")+"bold";return true});const u={fontFamily:h,fontStyle:d,fontWeight:f,fontSize:c.fontSize,color:B.addColor(c.color),backgroundColor:B.addColor(c.backgroundColor)};for(let e=0;e<6;++e){const t=Qs[e];let a=u[t];if(a){if(3===e&&i)a=Z(a,true);Xs(Gs(l,e),Js[t]+a+'"').push(o)}}}),r[n]=l}const l={};for(const e in r){const t={};l[e]=t;const i=r[e].filter(e=>!!e).sort((e,t)=>{let i=0,a=0,n=0,o=0;for(const t in e){const a=e[t].length;i=Math.max(a,i),n+=a}for(const e in t){const i=t[e];if(i){const e=i.length;a=Math.max(e,a),o+=e}}if(i!==a)return i>a?-1:1;else if(n!==o)return n>o?-1:1;return 0});do{if(1===i.length){const e=i[0];for(const i in e){const a=e[i];if(a.length)t[i]=a}break}else{const a={};for(let n=0;n<i.length;++n){const r={},s=i[n];for(const t in s){const l=s[t];if(0===l.length)continue;else if(l.length===o[e].length){a[t]=l,i[n]={};break}const c={};let h=false;for(let e=0;e<i.length;++e)if(n!==e){const t=i[e];for(const e in t){const i=t[e];if(i.length)l.forEach(t=>{if(i.includes(t))Xs(c,e).push(t)})}}for(const e in c){const i=c[e];if(i.length>1)r[t<e?t+";"+e:e+";"+t]=i,h=true}if(!h)r[t]=l}if(Object.keys(r).length){const e={},a=new Set,n={};for(const e in r)n[e]=r[e].join(",");for(const t in r)for(const i in r){const o=n[t];if(t!==i&&o===n[i]){let n=e[o];if(!n)n=new Set(t.split(";")),e[o]=n;i.split(";").forEach(e=>n.add(e)),a.add(t).add(i)}}for(const e of a)delete r[e];for(const e in r)el(i,e,r[e]),t[e]=r[e];for(const a in e){const n=Array.from(e[a]).sort().join(";"),o=Hs(a.split(Ds.SEPARATOR),e=>parseInt(e));el(i,n,o),t[n]=o}}}const n=Object.keys(a);if(n.length)t[n.join(";")]=a[n[0]];Vs(i,e=>{for(const t in e)if(e[t].length)return false;return true})}}while(i.length)}const c={},h={},d=new Set;for(const e in l){const t=l[e],i=[];for(const e in t){const a=[];e.split(";").forEach(e=>{const t=Ds.ATTRIBUTE.exec(e);if(t)a.push({key:t[1],value:t[2]})}),i.push({name:"",parent:"",items:a,ids:t[e]})}i.sort((e,t)=>{let i=e.ids.length,a=t.ids.length;if(i===a)if(i=e.items.length,a=t.items.length,i===a)i=e.name,a=t.name;return i<=a?1:-1});const a=i.length;for(let t=0;t<a;++t)i[t].name=Ms(e)+(t>0?"_"+t:"");c[e]=i}for(const e in c)c[e].forEach(e=>{var t;return null===(t=e.ids)||void 0===t?void 0:t.forEach(t=>Xs(h,t).push(e.name))});s.forEach(e=>{const t=h[e.id];if(t){if(t.length>1)d.add(t.join(".")),t.shift();else d.add(t[0]);e.attr("_","style","@style/"+t.join("."))}}),d.forEach(e=>{const t=[];let i,a="";if(e.split(".").forEach((e,o,r)=>{const s=qs.exec(e);if(s){const l=c[s[1].toUpperCase()][Ws(s[2])];if(l)if(0===o){if(a=e,1===r.length)i=l.items;else if(!n.has(e))n.set(e,{name:e,parent:"",items:l.items})}else{if(i)l.items.forEach(e=>{const t=e.key,a=i.findIndex(e=>e.key===t);if(-1!==a)i[a]=e;else i.push(e)});else i=l.items.slice(0);t.push(e)}}}),i)if(0===t.length)n.set(a,{name:a,parent:"",items:i});else{const e=t.join(".");n.set(e,{name:e,parent:a,items:i})}})}}const{NODE_TEMPLATE:il}=squared.base.lib.enumeration;class al extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){this.cache.each(e=>{const t=e.renderTemplates;if(t){let i,a;if(e.renderEach((e,t)=>{const n=e.dataset,o=n.androidInclude,r="true"===n.androidIncludeEnd;if(o||r){if(e.documentRoot)return;const s={item:e,name:o,index:t,include:"false"===n.androidIncludeMerge};if(o){if(!i)i=[];i.push(s)}if(r){if(!a)a=[];a.push(s)}}}),i&&a){const e=this.application,n=this.controller,o=Math.min(i.length,a.length),r=a.length-o;if(r>0)a.splice(0,r);let s=o-1;while(s>=0){const{index:o,include:r,item:l,name:c}=i[s--];for(let i=0;i<a.length;++i){const s=a[i].index;if(s>=o){const h=[];let d=o;while(d<=s)h.push(t[d++]);const f=!r||h.length>1,u=f?1:0;t.splice(o,h.length,{type:2,node:h[0].node,content:n.renderNodeStatic({controlName:"include",width:"match_parent"},{layout:"@layout/"+c,android:{}}),indent:true});let p=n.cascadeDocument(h,u);if(f)p=n.getEnclosingXmlTag("merge",se(p),p);else l.documentRoot=true;e.saveDocument(c,p,"",Number.POSITIVE_INFINITY),a.splice(i,1);break}}}}}})}}const nl=squared.lib,{formatPX:ol}=nl.css,{measureTextWidth:rl}=nl.dom,{capitalizeString:sl,lowerCaseString:ll,isNumber:cl,isString:hl}=nl.util,{STRING_SPACE:dl,replaceCharacterData:fl}=nl.xml,{NODE_RESOURCE:ul}=squared.base.lib.enumeration;class pl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:false,fontVariantSmallCapsReduction:.7},this.eventOnly=true}afterResources(){const e=this.options.numberResourceValue,t=(t,i,a,n)=>{if(""!==(a=B.addString(n,a,e)))t.android(i,e||!cl(a)?"@string/"+a:a,false)};this.cacheProcessing.each(e=>{if(e.hasResource(ul.VALUE_STRING)){switch(e.tagName){case"SELECT":{const t=this.createOptionArray(e.element,e.controlId);if(""!==t)e.android("entries","@array/"+t);break}case"IFRAME":{const t=e.data(B.KEY_NAME,"valueString");if(t)B.addString(fl(t.value),t.key);break}default:if(!e.layoutFrame){const i=e.data(B.KEY_NAME,"valueString");if(i){let a=i.value;const n=i.key||a;if(e.naturalChild&&e.alignParent("left")&&e.pageFlow&&!(e.preserveWhiteSpace&&!e.plainText||e.plainText&&e.actualParent.preserveWhiteSpace)){let t=0;const i=e.textContent,n=i.length;let o=0;while(o<n)switch(i.charCodeAt(o++)){case 160:t++;case 32:continue;default:break}if(0===t)a=a.replace(/^(\s|&#160;)+/,"")}if("small-caps"===e.css("fontVariant"))if(e.api>=21)e.android("fontFeatureSettings","smcp");else{e.android("textAllCaps","true");const t=e.data(B.KEY_NAME,"fontStyle");if(t)t.fontSize*=this.options.fontVariantSmallCapsReduction}switch(e.css("textTransform")){case"uppercase":e.android("textAllCaps","true");break;case"lowercase":a=ll(a);break;case"capitalize":a=sl(a);break}const o=e.tagName;a=fl(a,e.preserveWhiteSpace||"CODE"===o);const r=e.css("textDecorationLine");if("none"!==r)r.split(" ").forEach(e=>{switch(e){case"underline":a=`<u>${a}</u>`;break;case"line-through":a=`<strike>${a}</strike>`;break}});if("INS"===o&&!r.includes("line-through"))a=`<strike>${a}</strike>`;let s=0;if(e.blockDimension||"table-cell"===e.display){const t=e.css("textIndent");if(s=e.parseUnit(t),"100%"===t||s+e.bounds.width<0)a="",e.delete("android","ellipsize","maxLines")}if(""!==a){if(0===s){const t=e.actualParent;if((null==t?void 0:t.firstChild)===e&&(t.blockDimension||"table-cell"===t.display))s=t.parseUnit(t.css("textIndent"))}if(s>0){const t=rl(" ",e.css("fontFamily"),e.fontSize)||e.fontSize/2;a=dl.repeat(Math.max(Math.floor(s/t),1))+a}t(e,"text",n,a)}}if(e.inputElement){if(e.controlName===n.EDIT_LIST){const t=e.element.list;if(t)if(this.createOptionArray(t,e.controlId),!e.hasPX("width"))e.css("width",ol(e.actualWidth))}const i=e.data(B.KEY_NAME,"hintString");if(hl(i))t(e,"hint","",i)}}}if(e.styleElement){const i=e.data(B.KEY_NAME,"titleString")||e.toElementString("title");if(""!==i)t(e,"tooltipText",e.controlId.toLowerCase()+"_title",i)}}})}createOptionArray(e,t){const[i,a]=B.getOptionArray(e),n=this.options.numberResourceValue;let o;if(!n&&a)o=a;else{const e=i||a;if(e)o=[],e.forEach(e=>{if(""!==(e=B.addString(fl(e),"",n)))o.push("@string/"+e)})}return(null==o?void 0:o.length)?B.insertStoredAsset("arrays",t+"_array",o):""}}const gl=squared.lib,{XML:ml}=gl.regex,{capitalize:yl,trimString:bl}=gl.util,Tl=B.STORED,El=/(\w+):(\w+)="([^"]+)"/;class Sl extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(){const e={},t={};this.cache.each(i=>{if(i.controlId&&i.visible){const a=i.renderChildren,n=a.length;if(n>1){const o=new Map;let r=true,s="",l=0;while(l<n){let e=false;const t=a[l++].combine("_","android"),i=t.length;let n=0;while(n<i){const i=t[n++];if(!e&&i.startsWith("style=")){if(0===l)s=i;else if(""===s||i!==s){r=false;break}e=true}else o.set(i,(o.get(i)||0)+1)}if(!r||!e&&""!==s){r=false;break}}if(r){for(const[e,t]of o.entries())if(t!==n)o.delete(e);if(o.size>1){if(""!==s)s=bl(s.substring(s.indexOf("/")+1),'"');const n=[];for(const e of o.keys()){const t=El.exec(e);if(t)a.forEach(e=>e.delete(t[1],t[2])),n.push(t[0])}n.sort();const r=n.join(";");let l="";for(const e in t)if(t[e]===r){l=e;break}if(""===s||!l.startsWith(s+"."))l=(""!==s?s+".":"")+yl(i.controlId),e[l]=n,t[l]=r;a.forEach(e=>e.attr("_","style","@style/"+l))}}}}});for(const t in e){const i=[];e[t].forEach(e=>{const t=ml.ATTRIBUTE.exec(e);if(t)i.push({key:t[1],value:t[2]})}),Tl.styles.set(t,Object.assign(Object.assign({},ne()),{name:t,items:i}))}}}var Al={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const vl={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var xl={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":["ordering"],">":{set:{"^":"android","@":["ordering"],">":{objectAnimator:vl.objectAnimator}},objectAnimator:vl.objectAnimator}},objectAnimator:vl.objectAnimator}}};if(!squared.svg)Object.assign(squared,{svg:{lib:{constant:{},util:{}}}});var wl=squared.svg.Svg,_l=squared.svg.SvgAnimate,Nl=squared.svg.SvgAnimateTransform,Il=squared.svg.SvgBuild,Rl=squared.svg.SvgG,Cl=squared.svg.SvgPath,Ll=squared.svg.SvgShape;const kl=squared.lib,Pl=squared.svg.lib,{extractURL:Ol,formatPX:Dl,isPercent:Ml}=kl.css,{truncate:Wl}=kl.math,{CHAR:Bl,FILE:Xl}=kl.regex,{convertCamelCase:Gl,convertInt:Hl,convertWord:Vl,formatString:Fl,isArray:zl,isNumber:Ul,isString:ql,objectMap:Yl,partitionArray:jl,replaceMap:Kl}=kl.util,{applyTemplate:$l}=kl.xml,{KEYSPLINE_NAME:Zl,SYNCHRONIZE_MODE:Jl}=Pl.constant,{MATRIX:Ql,SVG:ec,TRANSFORM:tc}=Pl.util,ic=squared.base.NodeUI,ac=B.STORED,nc={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"},oc=["name","value","fill","stroke","fillPattern","fillRule","strokeWidth","fillOpacity","strokeOpacity","strokeLinecap","strokeLinejoin","strokeLineJoin","strokeMiterlimit"];if(Zl)Object.assign(nc,{[Zl["ease-in"]]:nc.accelerate,[Zl["ease-out"]]:nc.decelerate,[Zl["ease-in-out"]]:nc.accelerate_decelerate,[Zl.linear]:nc.linear});const rc={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function sc(e,t){const i=null==e?void 0:e[t];return i?nc[i]||cc(i):""}function lc(e){for(const t in rc)if(rc[t].includes(e))return Gl(t);return""}function cc(e){const t=nc[e];if(t)return t;else{const t="path_interpolator_"+Vl(e);if(!ac.animators.has(t))ac.animators.set(t,Fl('<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',...e.split(Bl.SPACE)));return"@anim/"+t}}function hc(e){const t={};return e.forEach(e=>{const{matrix:i,origin:a,type:n}=e;switch(n){case SVGTransform.SVG_TRANSFORM_SCALE:if(t.scaleX=i.a.toString(),t.scaleY=i.d.toString(),a)t.pivotX=a.x.toString(),t.pivotY=a.y.toString();break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(t.rotation=e.angle.toString(),a)t.pivotX=a.x.toString(),t.pivotY=a.y.toString();else t.pivotX="0",t.pivotY="0";break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:t.translateX=i.e.toString(),t.translateY=i.f.toString();break}}),t}function dc(e,t){let i=0,a=0;return function(e){const t=[];let i=e.parentElement;while(i)if(t.push(i),i=i.parentElement,i instanceof HTMLElement)break;return t}(e).forEach(e=>{if((ec.svg(e)||ec.use(e))&&e!==t)i+=e.x.baseVal.value,a+=e.y.baseVal.value}),{x:i,y:a}}function fc(e,t,i=1,a=1){const n=t.length;if(n&&(ec.circle(e)||ec.ellipse(e)))if(t.some(e=>e.type===SVGTransform.SVG_TRANSFORM_ROTATE)&&(i!==a||n>1&&t.some(e=>e.type===SVGTransform.SVG_TRANSFORM_SCALE&&e.matrix.a!==e.matrix.d)))return uc(e,t);return[[],t]}function uc(e,t,i=false){if(t.length){const a=[],n=[],o=t[0].fromCSS?[]:tc.rotateOrigin(e).reverse(),r=t.slice(0).reverse(),s=[],l=()=>{a.push(s.slice(0)),s.length=0};for(let e=1;e<r.length;++e){const t=r[e],i=r[e-1];if(t.type===i.type){let a;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:a=Ql.clone(t.matrix),a.e+=i.matrix.e,a.f+=i.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:a=Ql.clone(t.matrix),a.a*=i.matrix.a,a.d*=i.matrix.d;break}if(a)t.matrix=a,r.splice(--e,1)}}if(r.forEach(e=>{switch(e.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:n.push(e);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(!i&&0===a.length&&0===s.length)n.push(e);else s.push(e),l();break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(o.length){const t=o.shift();if(t.angle===e.angle){if(0!==t.x||0!==t.y)e.origin=t;break}}if(!e.origin&&1===s.length&&s[0].type===SVGTransform.SVG_TRANSFORM_SCALE)return void s.push(e);case SVGTransform.SVG_TRANSFORM_SCALE:if(s.length)l();s.push(e);break}}),s.length)a.push(s);return[a.reverse(),n]}return[[],t]}function pc(e,t,i,a=false,n){const o=e[t];let r;if(o)r=Array.isArray(o)?o[i].toString():o;else if(!a&&0===t)r=n;return r||""}function gc(e){switch(e){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:if(Ec(e))return"floatType";else return}}function mc(e,t,i,a){const n=new _l;return n.attributeName=e,n.delay=t,n.duration=1,n.from=a||i,n.to=i,n.fillForwards=true,n.convertToValues(),n}function yc(e,t=true){let i=rc[e];if(!i&&t&&Ec(e))i=[e];return i}function bc(e){switch(e){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Tc(e){switch(e.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return Nl.toRotateList(e.values);case SVGTransform.SVG_TRANSFORM_SCALE:return Nl.toScaleList(e.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return Nl.toTranslateList(e.values)}}function Ec(e){switch(e){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Sc(e,t=false){const i="@color/"+B.addColor(e);return t?[i]:i}function Ac(e,t){if(Nc(e.attributeName))return Sc(t);else return t.trim()||void 0}function vc(e){switch(e){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function xc(e,t){const i=e.synchronized,a=t.synchronized;if(i&&a)return i.key>=a.key?1:-1;else return 0}function wc(e,t,i,a,n){const o=i.set,r=o.length;if(r){let s=false;if(r>1&&o.every(e=>""===e.ordering)){const e={set:[],objectAnimator:[]};o.forEach(t=>{e.set=e.set.concat(t.set),e.objectAnimator=e.objectAnimator.concat(t.objectAnimator)}),i=e}while(1===i.set.length){const e=i.set[0];if((!s||""===e.ordering)&&0===e.objectAnimator.length)i=e,s=true;else break}if(i["xmlns:android"]=h.android,s)i["android:ordering"]=i.ordering,i.ordering=void 0;const l={name:t,animation:B.insertStoredAsset("animators",_c(a,n,"anim",t),$l("set",xl,[i]))};if(""!==l.animation)l.animation="@anim/"+l.animation,e[0].target.push(l)}}const _c=(e,t,i,a)=>e+(i?"_"+i:"")+(t?"_vector":"")+(a?"_"+a.toLowerCase():""),Nc=e=>"fill"===e||"stroke"===e,Ic=(e,t,i=-1)=>e.name+"_"+t+(-1!==i?"_"+(i+1):""),Rc=e=>Ml(e)?parseFloat(e)/100:.5,Cc=e=>"@drawable/"+e,Lc=(e="")=>({ordering:e,objectAnimator:[]});class kc extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{path:[],line:[],rect:[],ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],polyline:[],polygon:[],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=true,this._vectorData=new Map,this._animateData=new Map,this._animateTarget=new Map,this._imageData=[],this._synchronizeMode=0,this._namespaceAapt=false}beforeParseDocument(){if(Il)Il.setName(),this.controller.localSettings.svg.enabled=true}afterResources(){if(Il){let e,t;this.cacheProcessing.each(i=>{if(i.imageElement)[e,t]=this.createSvgElement(i,i.src);else if(i.svgElement)t=i.element;if(t){const a=this.createSvgDrawable(i,t);if(""!==a)if(i.api>=21)i.android("src",Cc(a));else i.app("srcCompat",Cc(a));if(!i.hasWidth)i.setLayoutWidth("wrap_content");if(!i.hasHeight)i.setLayoutHeight("wrap_content");if(i.baseline)i.android("baselineAlignBottom","true");if(e)e.removeChild(t),e=void 0;t=void 0}})}}afterFinalize(){this.controller.localSettings.svg.enabled=false}createSvgElement(e,t){const i=Ol(t);if(""!==i)t=i;if(Xl.SVG.test(t)||t.startsWith("data:image/svg+xml")){const i=this.resource.getRawData(t);if(i){const t=(e.actualParent||e.documentParent).element;t.insertAdjacentHTML("beforeend",i.content);const a=t.lastElementChild;if(a instanceof SVGSVGElement){const i=a;if(0===i.width.baseVal.value)i.setAttribute("width",e.actualWidth.toString());if(0===i.height.baseVal.value)i.setAttribute("height",e.actualHeight.toString());return[t,i]}}}return[]}createSvgDrawable(e,t){const{floatPrecisionValue:i,floatPrecisionKeyTime:a,transformExclude:n}=this.options,o=new wl(t),r=e.api>=23,s=2|(r?32:64),l=this._animateData,c=this._imageData;this._svgInstance=o,this._vectorData.clear(),l.clear(),this._animateTarget.clear(),c.length=0,this._namespaceAapt=false,this._synchronizeMode=s;const d=`${e.tagName}_${Vl(e.controlId,true)}_viewbox`.toLowerCase();o.build({exclude:n,residual:fc,precision:i}),o.synchronize({keyTimeMode:s,framesPerSecond:this.controller.userSettings.framesPerSecond,precision:i}),this.queueAnimations(o,o.name,e=>"opacity"===e.attributeName);const f=this.parseVectorData(o),u=o.viewBox,p=c.length;let g,m;{const{width:t,height:i}=ic.refitScreen(e,{width:o.width,height:o.height});m=B.insertStoredAsset("drawables",_c(d,p),$l("vector",Or,[{"xmlns:android":h.android,"xmlns:aapt":this._namespaceAapt?h.aapt:"","android:name":l.size?o.name:"","android:width":Dl(t),"android:height":Dl(i),"android:viewportWidth":(u.width||t).toString(),"android:viewportHeight":(u.height||i).toString(),"android:alpha":parseFloat(o.opacity)<1?o.opacity.toString():"",include:f}]))}if(l.size){const e=[{"xmlns:android":h.android,"android:drawable":Cc(m),target:[]}];for(const[t,n]of l.entries()){const o=new Map,s=new Map,l=[],c=[],h=[],f=[],u=[],[g,m]=jl(n.animate,e=>"companion"in e),y={set:[],objectAnimator:[]},b=m.length;let T=0;while(T<b){const e=m[T++];if(e.setterType){if(rc[e.attributeName]&&ql(e.to))if(e.fillReplace&&e.duration>0)c.push(e);else l.push(e)}else if(Il.isAnimate(e)){const t=g.filter(t=>t.companion.value===e);if(t.length){t.sort((e,t)=>e.companion.key>=t.companion.key?1:0);const i=[],a=[],n=t.length;for(let o=0;o<n;++o){const n=t[o];if(n.companion.key<=0){if(i.push(n),0===o)n.delay+=e.delay,e.delay=0}else a.push(n)}i.push(e),o.set("sequentially_companion_"+T,i.concat(a))}else{const t=e.synchronized;if(t){const i=t.value;if(Il.isAnimateTransform(e)){const t=s.get(i);if(t)t.push(e);else s.set(i,[e])}else{const t=o.get(i);if(t)t.push(e);else o.set(i,[e])}}else{if(Il.isAnimateTransform(e))e.expandToValues();if(-1===e.iterationCount)c.push(e);else if((!e.fromToType||Il.isAnimateTransform(e)&&e.transformOrigin)&&!(r&&"pathType"!==gc(e.attributeName)))h.push([e]);else if(e.fillReplace)c.push(e);else l.push(e)}}}}if(l.length)h.push(l);for(const[e,t]of o.entries())if(e.startsWith("sequentially_companion"))h.push(t);else h.push(t.sort(xc));for(const e of s.values())u.push(e.sort(xc));c.forEach(e=>f.push([[e]])),[h,u,...f].forEach((e,t)=>{if(0===e.length)return;const o={ordering:0===t||1===e.length?"":"sequentially",set:[],objectAnimator:[]};if(e.forEach(e=>{let s="",l=false,c=false,h=true;if(t<=1&&e.some(e=>!!e.synchronized&&""!==e.synchronized.value)){if(!Il.isAnimateTransform(e[0]))s="sequentially";l=true,h=false}else if(t<=1&&e.some(e=>!!e.synchronized&&""===e.synchronized.value))s="sequentially",l=true,c=true;else if(t<=1&&e.some(e=>"companion"in e))s="sequentially";else{if(t>0)s="sequentially";if(t>1&&Il.isAnimateTransform(e[0]))c=true}const d=Lc(),f=Lc(),u=Lc(),p=Lc(),g=f.objectAnimator,m=u.objectAnimator;let y=d.objectAnimator,b=p.objectAnimator,T=[];(l?jl(e,e=>-1!==e.iterationCount):[e]).forEach((e,d)=>{if(1===d&&e.length>1)u.ordering="sequentially";const f=new Map;e.forEach(u=>{var p;const E=gc(u.attributeName);if(void 0===E)return;const S=u.delay>0;let A,v=false;const x=(e,t)=>{if(ql(t)&&-1===y.findIndex(t=>t.propertyName===e))y.push(this.createPropertyValue(e,t,"0",E))},w=(e,t,i)=>{if(!l&&u.fillReplace){let a,n=u.replaceValue;if(!n){if(v)n=Ec(e);else{const t=u.parent;if(t)if(Il.isShape(t)){const i=t.path;if(i)n="pathData"===e?i.value:i[lc(e)]}}if(!n)n=u.baseValue}if(null==t?void 0:t.length){const e=t[t.length-1];if(zl(e.propertyValuesHolder)){const t=e.propertyValuesHolder[e.propertyValuesHolder.length-1];a=t.keyframe[t.keyframe.length-1].value}else a=e.valueTo}if(ql(n)&&n!==a)if(n=Ac(u,n),n){switch(e){case"trimPathStart":case"trimPathEnd":n=n.split(" ")["trimPathStart"===e?0:1];break}b.push(this.createPropertyValue(e,n,"1",E,"pathType"===E?a:"",i?i.toString():""))}if(A)if(e.endsWith("X"))b.push(this.createPropertyValue("translateX","0","1",E));else if(e.endsWith("Y"))b.push(this.createPropertyValue("translateY","0","1",E))}};if(u.setterType){const e=yc(u.attributeName);if(e){const i=Nc(u.attributeName)?Sc(u.to,true):u.to.trim().split(" "),a=e.length;if(i.length===a&&!i.some(e=>""===e)){let n,o;for(let r=0;r<a;++r){let a;if("pathType"===E)a=i[r];else if(S){const e=u.baseValue;if(e)a=Ac(u,e.trim().split(" ")[r])}const s=this.createPropertyValue(e[r],i[r],"1",E,a,u.delay>0?u.delay.toString():"");if(t>1)m.push(s),w(e[r],void 0,t>1?u.duration:0);else{const e=u.companion;if(e){if(e.key<=0){if(!n)n=[];n.push(s)}else if(e.key>0){if(!o)o=[];o.push(s)}}else T.push(s)}}if(n)y=y.concat(n);if(o)b=b.concat(o)}}}else if(Il.isAnimate(u)){let y,b=c;if(1===d)y=e.length>1?"0":"-1";else y=-1!==u.iterationCount?Math.ceil(u.iterationCount-1).toString():"-1";const T=this.createPropertyValue("","",u.duration.toString(),E,"",u.delay>0?u.delay.toString():"",y);let _,N,I;if(!l&&"pathType"===E){if(n.pathData){const e=u.parent;let t,a;if(e&&Il.isShape(e))a=e,t=null===(p=e.path)||void 0===p?void 0:p.transformed;N=["pathData"],I=Cl.extrapolate(u.attributeName,n.pathData,u.values,t,a,i)}}else if(Il.asAnimateTransform(u)){if(N=bc(u.type),I=Tc(u),N&&I){if(c&&0===u.keyTimes[0])b=false;if(b||S)_=Yl(N,e=>Ec(e)||"0");A=u.transformOrigin}v=true}else if(Il.asAnimateMotion(u)){if(N=bc(u.type),I=Tc(u),N&&I){const e=u.rotateValues,t=I.length;if((null==e?void 0:e.length)===t){N.push("rotation");let i=0;while(i<t)I[i].push(e[i++])}}v=true}else switch(N=yc(u.attributeName),E){case"intType":if(I=Yl(u.values,e=>Hl(e).toString()),S){const e=u.baseValue;if(e)_=Kl(Il.parseCoordinates(e),e=>Math.trunc(e).toString())}break;case"floatType":if("stroke-dasharray"===u.attributeName)I=Yl(u.values,e=>Kl(e.split(" "),e=>parseFloat(e)));else I=u.values;if(S){const e=u.baseValue;if(e)_=Kl(Il.parseCoordinates(e),e=>e.toString())}break;default:if(I=u.values.slice(0),Nc(u.attributeName)){if(S){const e=u.baseValue;if(e)_=Sc(e,true)}const e=I.length;for(let t=0;t<e;++t)if(""!==I[t])I[t]=Sc(I[t])}break}if(!u.keySplines){const e=u.timingFunction;T.interpolator=ql(e)?cc(e):this.options.animateInterpolator}if(I&&N){const{keyTimes:e,synchronized:p}=u,y=N.length,v=e.length,R=p?p.key+p.value:0!==t||y>1?JSON.stringify(T):"";for(let t=0;t<y;++t){const p=N[t];if(b&&_)x(p,_[t]);if(h&&v>1)if(r&&"pathType"!==E){if(!b&&S&&_)x(p,_[t]);const n=f.get(R)||[],o=[];for(let n=0;n<v;++n){let r=pc(I,n,t,true);if(r&&"floatType"===E)r=Wl(r,i);o.push({interpolator:n>0&&""!==r&&"pivotX"!==p&&"pivotY"!==p?sc(u.keySplines,n-1):"",fraction:0===e[n]&&""===r?"":Wl(e[n],a),value:r})}if(n.push({propertyName:p,keyframe:o}),!f.has(R)){if(""!==R)f.set(R,n);(0===d?g:m).push(Object.assign(Object.assign({},T),{propertyValuesHolder:n}))}A=void 0}else{s="sequentially";const a=Lc("sequentially");for(let o=0;o<v;++o){const r=e[o],s=Object.assign(Object.assign({},T),{propertyName:p,startOffset:0===o?(u.delay+(r>0?Math.floor(r*u.duration):0)).toString():"",propertyValuesHolder:false});let l=pc(I,o,t,false,"pathType"===E?n.pathData:u.baseValue);if(l){let h;if(0===o){if(!c&&S&&_)s.valueFrom=_[t];else if("pathType"===E)s.valueFrom=n.pathData||I[0].toString();else s.valueFrom=u.baseValue||u.replaceValue||"";h=0}else s.valueFrom=pc(I,o-1,t).toString(),h=Math.floor((r-e[o-1])*u.duration);if("floatType"===E)l=Wl(l,i);const d=null==A?void 0:A[o];if(d){let e,t=0;if(p.endsWith("X"))e="translateX",t=d.x;else if(p.endsWith("Y"))e="translateY",t=d.y;if(e){const n=this.createPropertyValue(e,Wl(t,i),h.toString(),"floatType");n.interpolator=cc(Zl["step-start"]),a.objectAnimator.push(n)}}if(o>0)s.interpolator=sc(u.keySplines,o-1);s.duration=h.toString(),s.valueTo=l,g.push(s)}}if(a.objectAnimator.length)o.set.push(a)}else{const e=Object.assign(Object.assign({},T),{propertyName:p,interpolator:u.duration>1?sc(u.keySplines,0):"",propertyValuesHolder:false}),a=I.length;if(Array.isArray(I[0])){const i=I[a-1][t];if(a>1){const a=I[0][t];if(a!==i)e.valueFrom=a.toString()}e.valueTo=i.toString()}else{let i;if(a>1)i=I[0].toString(),e.valueTo=I[a-1].toString();else i=u.from||(!c&&S&&_?_[t]:""),e.valueTo=u.to;if("pathType"===E)e.valueFrom=i||n.pathData||e.valueTo;else if(i!==e.valueTo&&i)e.valueFrom=Ac(u,i)}const o=e.valueTo;if(o){if("floatType"===E)e.valueTo=Wl(o,i);(0===d?g:m).push(e)}}if(0===d&&!l&&-1!==u.iterationCount)w(p,g)}if(S&&(null==A?void 0:A.length))x("translateX","0"),x("translateY","0")}}})});const E=g.length>0||m.length>0;if("sequentially"===s){if(E&&1===y.length)g.unshift(y[0]),y.length=0;if(1===m.length)g.push(m[0]),m.length=0;if(E&&1===b.length)g.push(b[0]),b.length=0}if(0===y.length&&0===m.length&&0===b.length){if("sequentially"===s&&1===g.length)s="";if("sequentially"!==o.ordering&&"sequentially"!==s)T=T.concat(g),g.length=0}if(g.length||m.length){if(y.length)o.ordering="sequentially",o.set.push(d);if(g.length)f.ordering=s,o.set.push(f);if(m.length)o.ordering="sequentially",o.set.push(u);if(b.length)o.ordering="sequentially",o.set.push(p)}if(T.length)o.objectAnimator=o.objectAnimator.concat(T)}),o.set.length||o.objectAnimator.length)y.set.push(o)}),wc(e,t,y,d,p)}for(const[t,i]of this._animateTarget.entries()){let a;const n=(e,t,i,n,o)=>{if(!a)a=[];a.push(this.createPropertyValue(e,t,"0",i,n,o))};if(i.animate.forEach(e=>{if(Il.asAnimateMotion(e)){const t=e.parent;if(t&&Il.isShape(t)){const i=t.path;if(i){const{value:t,baseValue:a}=i;if(t!==a)if(n("pathData",a,"pathType",t),-1!==e.iterationCount&&!e.setterType)n("pathData",t,"pathType",a,e.getTotalDuration().toString())}}}}),a)wc(e,t,{set:[{set:void 0,objectAnimator:a}],objectAnimator:void 0},d,p)}if(e[0].target)m=B.insertStoredAsset("drawables",_c(d,p,"anim"),$l("animated-vector",Al,e))}if(p){const e=this.resource,t=[],i=[{"xmlns:android":h.android,item:t}];if(""!==m)t.push({drawable:Cc(m)});c.forEach(i=>{const a=o.viewBox,n=o.width/a.width,r=o.height/a.height;let s=i.getBaseValue("x",0)*n,l=i.getBaseValue("y",0)*r,c=i.getBaseValue("width",0),h=i.getBaseValue("height",0);const d=dc(i.element,o.element);s+=d.x,l+=d.y,c*=n,h*=r;const f={width:Dl(c),height:Dl(h),left:0!==s?Dl(s):"",top:0!==l?Dl(l):""},u=Cc(e.addImageSet({mdpi:i.href}));if(i.rotateAngle)f.rotate={drawable:u,fromDegrees:i.rotateAngle.toString(),visible:i.visible?"true":"false"};else f.drawable=u;t.push(f)}),g=B.insertStoredAsset("drawables",d,$l("layer-list",Lr,i))}else g=m;return e.data(B.KEY_NAME,"svgViewBox",u),g}createPropertyValue(e,t,i,a,n="",o="",r="0"){const s=this.options.floatPrecisionValue;return{propertyName:e,startOffset:o,duration:i,repeatCount:r,valueType:a,valueFrom:Ul(n)?Wl(n,s):n,valueTo:Ul(t)?Wl(t,s):t,propertyValuesHolder:false}}parseVectorData(e,t=0){const i=this.options.floatPrecisionValue,a=this.createGroup(e),n=a.length,o=t+n;let r="";if(e.each(t=>{if(t.visible)if(Il.isShape(t)){const e=t.path;if(null==e?void 0:e.value){const[a,n]=this.createPath(t,e),s=[];if(parseFloat(e.strokeWidth)>0&&(e.strokeDasharray||e.strokeDashoffset)){const o=this._animateData.get(t.name);if(!o||o.animate.every(e=>e.attributeName.startsWith("stroke-dash"))){const[r,l,c,h]=e.extractStrokeDash(null==o?void 0:o.animate,i);if(l){if(o)if(this._animateData.delete(t.name),r)o.animate=r;const e=Ic(t,"stroke"),d={name:e};if(""!==c)a.pathData=c;if(""!==h)d["clip-path"]=[{pathData:h}];const f=l.length;for(let t=0;t<f;++t){const n=0===t?a:Object.assign({},a),r=l[t];if(n.name=`${e}_${t}`,o)this._animateData.set(n.name,{element:o.element,animate:o.animate.filter(e=>void 0===e.id||e.id===t)});n.trimPathStart=Wl(r.start,i),n.trimPathEnd=Wl(r.end,i),s.push(n)}n.unshift(d)}}}if(0===s.length)s.push(a);if(n.length){n[n.length-1].path=s,r+=$l("group",Pr,n,o+1)}else r+=$l("path",kr,s,o+1)}}else if(Il.isContainer(t)){if(t.length)r+=this.parseVectorData(t,o)}else if(Il.asImage(t))if(!Il.asPattern(e))t.extract(this.options.transformExclude.image),this._imageData.push(t)}),n)return a[n-1].include=r,$l("group",Pr,a,t+1);else return r}createGroup(e){const t=[],i=[],a={"clip-path":t},n={"clip-path":i},o=[],r={};if((Il.asSvg(e)&&!e.documentRoot||Il.asUseSymbol(e)||Il.asUsePattern(e))&&(0!==e.x||0!==e.y))r.name=Ic(e,"main"),r.translateX=e.x.toString(),r.translateY=e.y.toString();if(""!==e.clipRegion)this.createClipPath(e,t,e.clipRegion);if(t.length||Object.keys(r).length)Object.assign(a,r),o.push(a);if(e!==this._svgInstance){const t={},[a]=uc(e.element,e.transforms,true),r=Ic(e,"animate");if((Il.asG(e)||Il.asUseSymbol(e))&&ql(e.clipPath)&&this.createClipPath(e,i,e.clipPath))t.name=r;if(this.queueAnimations(e,r,e=>Il.asAnimateTransform(e)))t.name=r;if(Object.keys(t).length)Object.assign(n,t),o.push(n);if(a.length){let t=[];a.forEach(e=>{o.push(hc(e)),t=t.concat(e)}),e.transformed=t.reverse()}}return o}createPath(e,t){var i,a;const n=this.options.floatPrecisionValue,o={name:e.name},r=[],s=[],l={},c=Ic(e,"group"),h=function(e){let t=parseFloat(e.opacity),i=e.parent;while(i){const e=parseFloat(i.opacity||"1");if(!isNaN(e)&&e<1)t*=e;i=i.parent}return t}(e),d=Il.asUse(e);if(Il.asUse(e)&&ql(e.clipPath))this.createClipPath(e,s,e.clipPath);if(ql(t.clipPath)){const e=new Ll(t.element);e.build({exclude:this.options.transformExclude,residual:fc,precision:n}),e.synchronize({keyTimeMode:this._synchronizeMode,precision:n}),this.createClipPath(e,s,t.clipPath)}if(this.queueAnimations(e,c,e=>Il.isAnimateTransform(e),"",e.name))l.name=c;else if(s.length)l.name="";if(Il.asUse(e)&&(0!==e.x||0!==e.y))l.translateX=e.x.toString(),l.translateY=e.y.toString();if(s.length)l["clip-path"]=s;if(Object.keys(l).length)r.push(l);if(null===(i=t.transformResidual)||void 0===i||i.forEach(e=>r.push(hc(e))),oc.forEach(i=>{let a=d&&e[i]||t[i];if(a){switch(i){case"name":break;case"value":i="pathData";break;case"fill":if(i="fillColor","none"!==a&&!o["aapt:attr"]){const e=B.addColor(a);if(""!==e)a="@color/"+e}else return;break;case"stroke":if(i="strokeColor","none"!==a){const e=B.addColor(a);if(""!==e)a="@color/"+e}else return;break;case"fillPattern":{const e=this._svgInstance.definitions.gradient.get(a);let r=false;if(e)switch(t.element.tagName){case"path":if(!/[zZ]\s*$/.test(t.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const i=function(e,t,i){const{colorStops:a,type:n}=e,o={type:n,item:ms(a,i),positioning:false};switch(n){case"radial":{const{cxAsString:i,cyAsString:a,rAsString:n,spreadMethod:r}=e,s=t.element;let l,c,h,d,f=[];switch(s.tagName){case"path":Il.getPathCommands(t.value).forEach(e=>f=f.concat(e.value));case"polygon":if(ec.polygon(s))f=f.concat(Il.clonePoints(s.points));if(!f.length)return;[l,c,h,d]=Il.minMaxPoints(f),h-=l,d-=c;break;default:if(ec.rect(s))l=s.x.baseVal.value,c=s.y.baseVal.value,h=s.width.baseVal.value,d=s.height.baseVal.value;else if(ec.circle(s))h=s.r.baseVal.value,l=s.cx.baseVal.value-h,c=s.cy.baseVal.value-h,h*=2,d=h;else if(ec.ellipse(s))h=s.rx.baseVal.value,d=s.ry.baseVal.value,l=s.cx.baseVal.value-h,c=s.cy.baseVal.value-d,h*=2,d*=2;else return;break}if(o.centerX=(l+h*Rc(i)).toString(),o.centerY=(c+d*Rc(a)).toString(),o.gradientRadius=((h+d)/2*(Ml(n)?parseFloat(n)/100:1)).toString(),r)o.tileMode=vc(r);break}case"linear":{const{x1:t,y1:i,x2:a,y2:n,spreadMethod:r}=e;if(o.startX=t.toString(),o.startY=i.toString(),o.endX=a.toString(),o.endY=n.toString(),r)o.tileMode=vc(r)}}return o}(e,t,n);if(i)a={name:"android:fillColor",gradient:i},r=true;break}}if(r)i="aapt:attr",o.fillColor="",this._namespaceAapt=true;else return;break}case"fillRule":if("evenodd"===a)i="fillType",a="evenOdd";else return;break;case"strokeWidth":if("0"===a)return;break;case"fillOpacity":case"strokeOpacity":if(a=((Ul(a)?parseFloat(a):1)*h).toString(),"1"===a)return;i="fillOpacity"===i?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===a)return;i="strokeLineCap";break;case"strokeLinejoin":if("miter"===a)return;i="strokeLineJoin";break;case"strokeMiterlimit":if("4"===a)return;i="strokeMiterLimit";break;default:return}o[i]=a}}),!o.strokeWidth)o.strokeColor="";else if(!o.strokeColor)o.strokeWidth="";const f=new Map,u=[],p=[],g=t.value;let m=g,y=0;e.animations.forEach(e=>{if(Il.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);if(f.set(t,{index:y,time:t,to:e.transformFrom,reset:false,animate:e}),-1!==e.iterationCount&&e.fillReplace)if(t=e.delay+e.iterationCount*e.duration,!f.has(t))f.set(t,{index:y,time:t,to:g,reset:true});y++}});const b=Array.from(f.values()).sort((e,t)=>e.time<t.time?-1:1),T=b.length;for(let e=0;e<T;++e){const t=b[e];if(!t.reset||t.to!==m){let i=true;if(t.reset)e:{let a=0;while(a<e){const n=b[a++];if(!n.reset){let a=e+1;while(a<T)switch(b[a++].index){case n.index:i=false;case t.index:break e}}}}else{const i=[],n=new Set;let o=0;while(o<e){const e=b[o++];i[e.index]=i[e.index]?2:1}const r=i.length;for(o=0;o<r;++o)if(1===i[o]){const e=null===(a=b.find(e=>e.index===o&&"animate"in e))||void 0===a?void 0:a.animate;if(e)n.add(e.type)}n.forEach(e=>{const i=bc(e);if(i){const a=tc.typeAsValue(e).split(" "),n=a.length;o=0;while(o<n)u.push(mc(i[o],t.time,a[o++],""))}})}if(i)p.push(mc("d",t.time,t.to)),m=t.to}}if(!this.queueAnimations(e,o.name,e=>(Il.asAnimate(e)||Il.asSet(e))&&"clip-path"!==e.attributeName,g)&&0===p.length&&l.name!==c)o.name="";const E=this._animateData;if(u.length){const e=E.get(c);if(e)e.animate=e.animate.concat(u)}if(p.length){const t=E.get(o.name);if(t)t.animate=t.animate.concat(p);else E.set(o.name,{element:e.element,animate:p,pathData:g})}return[o,r]}createClipPath(e,t,i){const{transformExclude:a,floatPrecisionValue:n}=this.options,o=this._svgInstance.definitions,r=this._synchronizeMode;let s=0;return i.split(";").forEach((i,l,c)=>{if("#"===i.charAt(0)){const e=o.clipPath.get(i);if(e){const i=new Rl(e);i.build({exclude:a,residual:fc,precision:n}),i.synchronize({keyTimeMode:r,precision:n}),i.each(e=>{const i=e.path;if(i){const a=i.value;if(a){let i=Ic(e,"clip_path",c.length>1?l+1:-1);if(!this.queueAnimations(e,i,e=>Il.asAnimate(e)||Il.asSet(e),a))i="";t.push({name:i,pathData:a})}}})}s++}else{let a=Ic(e,"clip_path",c.length>1?l+1:-1);if(!this.queueAnimations(e,a,e=>(Il.asAnimate(e)||Il.asSet(e))&&"clip-path"===e.attributeName,i))a="";t.push({name:a,pathData:i}),s++}}),s>0}queueAnimations(e,t,i,a="",n){if(e.animations.length){const o=e.animations.filter((e,t,a)=>!e.paused&&(e.duration>=0||e.setterType)&&i(e,t,a));if(o.length){const i=e.element;if(this._animateData.set(t,{element:i,animate:o,pathData:a}),n)this._animateTarget.set(n,{element:i,animate:o,pathData:a});return true}}return false}}const Pc={builtInExtensions:["android.delegate.background","android.delegate.negative-x","android.delegate.positive-x","android.delegate.max-width-height","android.delegate.percent","android.delegate.css-grid","android.delegate.scrollbar","android.delegate.radiogroup","squared.accessibility","squared.relative","squared.css-grid","squared.flexbox","squared.table","squared.column","squared.list","squared.verticalalign","squared.grid","squared.sprite","squared.whitespace","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.data","android.resource.includes"],targetAPI:29,resolutionDPI:160,resolutionScreenWidth:1280,resolutionScreenHeight:900,framesPerSecond:60,supportRTL:true,preloadImages:true,compressImages:false,convertImages:"",supportNegativeLeftTop:true,exclusionsDisabled:false,customizationsOverwritePrivilege:true,showAttributes:true,createQuerySelectorMap:false,convertPixels:"dp",insertSpaces:4,autoCloseOnWrite:true,showErrorMessages:true,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputMainFileName:"activity_main.xml",outputDirectory:"app/src/main",outputEmptyCopyDirectory:false,outputArchiveName:"android-xml",outputArchiveFormat:"zip"},Oc=squared.base.lib;let Dc,Mc,Wc,Bc=false;function Xc(e,t,i){return Object.assign(Object.assign({},e),{directory:t,filename:i})}const Gc=e=>Bc&&(e.closed||function(){if(Bc&&!Dc.initializing&&!Dc.closed&&Dc.userSettings.autoCloseOnWrite)return Dc.finalize(),true;else return false}()),Hc={base:{ExtensionManager:vi,Controller:Ai,File:Ki,Resource:B,View:dt},extensions:{Accessibility:Ji,Column:ua,CssGrid:qa,External:Ya,Flexbox:pn,Grid:xn,List:Mn,Relative:Bn,Sprite:jn,Substitute:Jn,Table:ho,VerticalAlign:po,WhiteSpace:go,constraint:{Guideline:Ao},delegate:{Background:Xo,CssGrid:Yo,MaxWidthHeight:$o,NegativeX:tr,Percent:pr,PositiveX:lr,RadioGroup:vr,ScrollBar:Rr},resource:{Background:bs,Data:Es,Dimens:Ps,Fonts:tl,Includes:al,Strings:pl,Styles:Sl,Svg:kc}},lib:{constant:p,customization:F,enumeration:i,util:le},system:{customize(e,t,i){if(H[e]){const a=H[e].assign;if(a[t])Object.assign(a[t],i);else a[t]=i;return a[t]}},addXmlNs(e,t){h[e]=t},copyLayoutAllXml(e,t){if(Gc(Dc))Mc.layoutAllToXml(Dc.layouts,Xc(t,e))},copyResourceAllXml(e,t){if(Gc(Dc))Mc.resourceAllToXml(Xc(t,e))},copyResourceStringXml(e,t){if(Gc(Dc))Mc.resourceStringToXml(Xc(t,e))},copyResourceArrayXml(e,t){if(Gc(Dc))Mc.resourceStringArrayToXml(Xc(t,e))},copyResourceFontXml(e,t){if(Gc(Dc))Mc.resourceFontToXml(Xc(t,e))},copyResourceColorXml(e,t){if(Gc(Dc))Mc.resourceColorToXml(Xc(t,e))},copyResourceStyleXml(e,t){if(Gc(Dc))Mc.resourceStyleToXml(Xc(t,e))},copyResourceDimenXml(e,t){if(Gc(Dc))Mc.resourceDimenToXml(Xc(t,e))},copyResourceDrawableXml(e,t){if(Gc(Dc))Mc.resourceDrawableToXml(Xc(t,e))},copyResourceAnimXml(e,t){if(Gc(Dc))Mc.resourceAnimToXml(Xc(t,e))},copyResourceDrawableImage(e,t){if(Gc(Dc))Mc.resourceDrawableImageToString(Xc(t,e))},copyResourceRawVideo(e,t){if(Gc(Dc))Mc.resourceRawVideoToString(Xc(t,e))},copyResourceRawAudio(e,t){if(Gc(Dc))Mc.resourceRawAudioToString(Xc(t,e))},saveLayoutAllXml(e,t){if(Gc(Dc))Mc.layoutAllToXml(Dc.layouts,Xc(t,void 0,e||Wc.outputArchiveName+"-layouts"))},saveResourceAllXml(e,t){if(Gc(Dc))Mc.resourceAllToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-resources"))},saveResourceStringXml(e,t){if(Gc(Dc))Mc.resourceStringToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-string"))},saveResourceArrayXml(e,t){if(Gc(Dc))Mc.resourceStringArrayToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-array"))},saveResourceFontXml(e,t){if(Gc(Dc))Mc.resourceFontToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-font"))},saveResourceColorXml(e,t){if(Gc(Dc))Mc.resourceColorToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-color"))},saveResourceStyleXml(e,t){if(Gc(Dc))Mc.resourceStyleToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-style"))},saveResourceDimenXml(e,t){if(Gc(Dc))Mc.resourceDimenToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-dimen"))},saveResourceDrawableXml(e,t){if(Gc(Dc))Mc.resourceDrawableToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-drawable"))},saveResourceAnimXml(e,t){if(Gc(Dc))Mc.resourceAnimToXml(Xc(t,void 0,e||Wc.outputArchiveName+"-anim"))},saveResourceDrawableImage(e,t){if(Gc(Dc))Mc.resourceDrawableImageToString(Xc(t,void 0,e||Wc.outputArchiveName+"-drawable-image"))},saveResourceRawVideo(e,t){if(Gc(Dc))Mc.resourceRawVideoToString(Xc(t,void 0,e||Wc.outputArchiveName+"-raw-video"))},saveResourceRawAudio(e,t){if(Gc(Dc))Mc.resourceRawAudioToString(Xc(t,void 0,e||Wc.outputArchiveName+"-raw-audio"))},writeLayoutAllXml:e=>Gc(Dc)?Mc.layoutAllToXml(Dc.layouts,e):{},writeResourceAllXml:e=>Gc(Dc)?Mc.resourceAllToXml(e):{},writeResourceStringXml:e=>Gc(Dc)?Mc.resourceStringToXml(e):[],writeResourceArrayXml:e=>Gc(Dc)?Mc.resourceStringArrayToXml(e):[],writeResourceFontXml:e=>Gc(Dc)?Mc.resourceFontToXml(e):[],writeResourceColorXml:e=>Gc(Dc)?Mc.resourceColorToXml(e):[],writeResourceStyleXml:e=>Gc(Dc)?Mc.resourceStyleToXml(e):[],writeResourceDimenXml:e=>Gc(Dc)?Mc.resourceDimenToXml(e):[],writeResourceDrawableXml:e=>Gc(Dc)?Mc.resourceDrawableToXml(e):[],writeResourceAnimXml:e=>Gc(Dc)?Mc.resourceAnimToXml(e):[],writeResourceDrawableImage:e=>Gc(Dc)?Mc.resourceDrawableImageToString(e):[],writeResourceRawVideo:e=>Gc(Dc)?Mc.resourceRawVideoToString(e):[],writeResourceRawAudio:e=>Gc(Dc)?Mc.resourceRawAudioToString(e):[]},create(){const t=Oc.constant.EXT_NAME,i=a;return Dc=new e(2,dt,Ai,B,vi),Mc=new Ki,Dc.resourceHandler.setFileHandler(Mc),Wc=Object.assign({},Pc),Object.assign(Dc.builtInExtensions,{[t.TABLE]:new ho(t.TABLE,2,void 0,["TABLE"]),[t.LIST]:new Mn(t.LIST,2,void 0,["DIV","UL","OL","DL"]),[t.GRID]:new xn(t.GRID,2,void 0,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[t.CSS_GRID]:new qa(t.CSS_GRID,2),[t.FLEXBOX]:new pn(t.FLEXBOX,2),[t.COLUMN]:new ua(t.COLUMN,2),[t.SPRITE]:new jn(t.SPRITE,2),[t.ACCESSIBILITY]:new Ji(t.ACCESSIBILITY,2),[t.RELATIVE]:new Bn(t.RELATIVE,2),[t.VERTICAL_ALIGN]:new po(t.VERTICAL_ALIGN,2),[t.WHITESPACE]:new go(t.WHITESPACE,2),[i.EXTERNAL]:new Ya(i.EXTERNAL,2),[i.SUBSTITUTE]:new Jn(i.SUBSTITUTE,2),[i.DELEGATE_BACKGROUND]:new Xo(i.DELEGATE_BACKGROUND,2),[i.DELEGATE_CSS_GRID]:new Yo(i.DELEGATE_CSS_GRID,2),[i.DELEGATE_MAXWIDTHHEIGHT]:new $o(i.DELEGATE_MAXWIDTHHEIGHT,2),[i.DELEGATE_NEGATIVEX]:new tr(i.DELEGATE_NEGATIVEX,2),[i.DELEGATE_PERCENT]:new pr(i.DELEGATE_PERCENT,2),[i.DELEGATE_POSITIVEX]:new lr(i.DELEGATE_POSITIVEX,2),[i.DELEGATE_RADIOGROUP]:new vr(i.DELEGATE_RADIOGROUP,2),[i.DELEGATE_SCROLLBAR]:new Rr(i.DELEGATE_SCROLLBAR,2),[i.RESOURCE_BACKGROUND]:new bs(i.RESOURCE_BACKGROUND,2),[i.RESOURCE_DATA]:new Es(i.RESOURCE_DATA,2),[i.RESOURCE_DIMENS]:new Ps(i.RESOURCE_DIMENS,2),[i.RESOURCE_FONTS]:new tl(i.RESOURCE_FONTS,2),[i.RESOURCE_INCLUDES]:new al(i.RESOURCE_INCLUDES,2),[i.RESOURCE_STRINGS]:new pl(i.RESOURCE_STRINGS,2),[i.RESOURCE_STYLES]:new Sl(i.RESOURCE_STYLES,2),[i.RESOURCE_SVG]:new kc(i.RESOURCE_SVG,2),[i.CONSTRAINT_GUIDELINE]:new Ao(i.CONSTRAINT_GUIDELINE,2)}),Bc=true,{application:Dc,framework:2,userSettings:Wc}},cached(){if(Bc)return{application:Dc,framework:2,userSettings:Wc};else return Hc.create()}};return Hc}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.bottomnavigation=function(){"use strict";const e=android.lib,{assignEmptyValue:t,iterateArray:n,safeNestedMap:i}=squared.lib.util,{NODE_RESOURCE:a,NODE_TEMPLATE:o}=squared.base.lib.enumeration,{EXT_ANDROID:s,SUPPORT_ANDROID:d,SUPPORT_ANDROID_X:r}=e.constant,{BUILD_ANDROID:u,CONTAINER_NODE:c}=e.enumeration,{createStyleAttribute:l,createViewAttribute:m}=e.util,p=android.base.Resource;class h extends squared.base.ExtensionUI{constructor(e,t,n,i){super(e,t,n,i),this.require("android.widget.menu")}processNode(e,i){const o=m(this.options[e.elementId]);t(o,"android","background","?android:attr/windowBackground"),n(e.children,e=>{e.hide(),e.cascade(e=>(e.hide(),false))},5);const u=e.api<29?d.BOTTOM_NAVIGATION:r.BOTTOM_NAVIGATION;return e.setControlType(u,c.BLOCK),e.exclude({resource:a.ASSET}),e.render(i),e.apply(p.formatOptions(o,this.application.extensionManager.optionValueAsBoolean(s.RESOURCE_STRINGS,"numberResourceValue"))),e.setLayoutWidth("match_parent"),e.setLayoutHeight("wrap_content"),e.cascade(e=>(this.addDescendant(e),false)),this.setStyleTheme(),{output:{type:1,node:e,controlName:u},complete:true,include:true}}postOptimize(e){var n;const a=e.renderParent;if(a.documentRoot){if(a.inlineWidth)a.setLayoutWidth("match_parent");if(a.inlineHeight)a.setLayoutHeight("match_parent")}const o=null===(n=h.findNestedElement(e.element,"android.widget.menu"))||void 0===n?void 0:n.dataset.layoutName;if(o){const n=m(this.options[e.elementId]),a=i(n,"app");t(a,"menu","@menu/"+o),e.app("menu",a.menu)}}setStyleTheme(){const e=l(this.options.resource);t(e,"name",this.application.userSettings.manifestThemeName),t(e,"parent","Theme.AppCompat.Light.DarkActionBar"),p.addTheme(e)}}const O=new h("android.widget.bottomnavigation",2);if(squared)squared.include(O);return O}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.coordinator=function(){"use strict";const e=android.lib,{getElementAsNode:t}=squared.lib.session,{NODE_RESOURCE:i,NODE_TEMPLATE:n}=squared.base.lib.enumeration,{EXT_ANDROID:o,SUPPORT_ANDROID:r,SUPPORT_ANDROID_X:s}=e.constant,{BUILD_ANDROID:d,CONTAINER_NODE:a}=e.enumeration,{createViewAttribute:u}=e.util,l=android.base.Resource;class c extends squared.base.ExtensionUI{processNode(e,n){var d;const O=this.application.extensionManager,R=u(this.options[e.elementId]);l.formatOptions(R,O.optionValueAsBoolean(o.RESOURCE_STRINGS,"numberResourceValue"));const m=c.findNestedElement(e.element,"android.widget.toolbar");if(m){const i=t(m,e.sessionId);if(i){const t=null===(d=O.retrieve("android.widget.toolbar"))||void 0===d?void 0:d.options[i.elementId];if(t&&"collapsingToolbar"in t)e.android("fitsSystemWindows","true")}}const f=e.api<29?r.COORDINATOR:s.COORDINATOR;return e.setControlType(f,a.BLOCK),e.exclude({resource:i.ASSET}),e.render(n),e.renderExclude=false,{output:{type:1,node:e,controlName:f}}}postOptimize(e){if(e.documentRoot){if(e.inlineWidth)e.some(t=>{if(t.rightAligned)return e.setLayoutWidth("match_parent",true),true;else return false});if(e.inlineHeight)e.some(t=>{if(t.bottomAligned)return e.setLayoutHeight("match_parent",true),true;else return false})}}}const O=new c("android.widget.coordinator",2);if(squared)squared.include(O);return O}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const e=squared.lib,t=android.lib,{assignEmptyValue:i,cloneObject:n,safeNestedMap:a,includes:o,iterateArray:r}=e.util,{getElementAsNode:s}=e.session,{NODE_RESOURCE:d,NODE_TEMPLATE:u}=squared.base.lib.enumeration,{EXT_ANDROID:l,SUPPORT_ANDROID:c,SUPPORT_ANDROID_X:m}=t.constant,{BUILD_ANDROID:p,CONTAINER_NODE:h}=t.enumeration,{createStyleAttribute:N,createViewAttribute:E}=t.util,f=android.base.Resource;class g extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.documentBase=true,this.require(l.EXTERNAL,true),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e){if(this.included(e)){if(r(e.children,e=>{if("NAV"===e.tagName){const t=e.dataset.use;if(!o(t,l.EXTERNAL))e.dataset.use=(t?t+", ":"")+l.EXTERNAL}}))return this.application.rootElements.add(e),true}return false}processNode(e,t){const n=E(this.options.self);if(g.findNestedElement(e.element,"android.widget.menu"))i(n,"android","fitsSystemWindows","true"),this.setStyleTheme(e.api);else{const t=E(this.options.navigationView);i(t,"android","layout_gravity",e.localizeString("left"));const n=e.item();n.mergeGravity("layout_gravity",t.android.layout_gravity),n.setLayoutHeight("match_parent"),n.positioned=true}e.documentRoot=true,e.renderExclude=false;const a=e.api<29?c.DRAWER:m.DRAWER;return e.setControlType(a,h.BLOCK),e.exclude({resource:d.FONT_STYLE}),e.apply(f.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(l.RESOURCE_STRINGS,"numberResourceValue"))),e.render(t),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:a},complete:true,include:true,remove:true}}afterParseDocument(){var e,t;for(const n of this.subscribers){const o=n.element,r=E(this.options.navigationView),s=null===(e=g.findNestedElement(o,"android.widget.menu"))||void 0===e?void 0:e.dataset.layoutName,d=null===(t=g.findNestedElement(o,l.EXTERNAL))||void 0===t?void 0:t.dataset.layoutName,u=a(r,"app");if(s)i(u,"menu","@menu/"+s);if(d)i(u,"headerLayout","@layout/"+d);if(s||d){const e=this.controller;i(r,"android","id",`@+id/${n.controlId}_navigation`),i(r,"android","fitsSystemWindows","true"),i(r,"android","layout_gravity",n.localizeString("left")),e.addAfterInsideTemplate(n.id,e.renderNodeStatic({controlName:n.api<29?c.NAVIGATION_VIEW:m.NAVIGATION_VIEW,width:"wrap_content",height:"match_parent"},f.formatOptions(r,this.application.extensionManager.optionValueAsBoolean(l.RESOURCE_STRINGS,"numberResourceValue"))))}}}postOptimize(e){const t=g.findNestedElement(e.element,"android.widget.coordinator");if(t){const i=s(t,e.sessionId);if((null==i?void 0:i.inlineHeight)&&i.some(e=>e.positioned))i.setLayoutHeight("match_parent")}}setStyleTheme(e){const t=this.application.userSettings,a=N(this.options.resource);if(i(a,"name",t.manifestThemeName),i(a,"parent",t.manifestParentThemeName),i(a.items,"android:windowTranslucentStatus","true"),f.addTheme(a),e>=21){const e=N(n(a)),t={};i(e.output,"path","res/values-v21"),i(t,"android:windowDrawsSystemBarBackgrounds","true"),i(t,"android:statusBarColor","@android:color/transparent"),e.items=t,f.addTheme(e)}}}const y=new g("android.widget.drawer",2);if(squared)squared.include(y);return y}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.floatingactionbutton=function(){"use strict";const t=squared.lib,e=android.lib,{parseColor:o}=t.color,{assignEmptyValue:a,safeNestedMap:i}=t.util,{BOX_STANDARD:r,NODE_PROCEDURE:n,NODE_RESOURCE:l,NODE_TEMPLATE:s}=squared.base.lib.enumeration,{adjustAbsolutePaddingOffset:d,createViewAttribute:c,getHorizontalBias:g,getVerticalBias:u}=e.util,{EXT_ANDROID:y,SUPPORT_ANDROID:m,SUPPORT_ANDROID_X:p}=e.constant,{BUILD_ANDROID:f,CONTAINER_NODE:_}=e.enumeration,T=android.base.Resource,b=["button","file","image","reset","search","submit"];class N extends squared.base.ExtensionUI{is(t){const e=t.element;return super.is(t)&&("INPUT"!==e.tagName||b.includes(e.type))}condition(t){return this.included(t.element)}processNode(t,e){const r=this.resource,s=t.element,f=t.dataset.target,b=c(this.options[s.id]),N=T.addColor(o(t.css("backgroundColor"),t.toFloat("opacity",1)));if(a(b,"android","backgroundTint",""!==N?"@color/"+N:"?attr/colorAccent"),!t.hasProcedure(n.ACCESSIBILITY))a(b,"android","focusable","false");let v="";switch(s.tagName){case"IMG":v=r.addImageSrc(s,"ic_dialog_");break;case"INPUT":if("image"===s.type){v=r.addImageSrc(s,"ic_dialog_");break}case"BUTTON":v=r.addImageSrc(t.backgroundImage,"ic_dialog_");break}if(""!==v)a(i(b,"app"),"srcCompat","@drawable/"+v);const O=t.api<29?m.FLOATING_ACTION_BUTTON:p.FLOATING_ACTION_BUTTON;t.setControlType(O,_.BUTTON),t.exclude({resource:l.BOX_STYLE|l.ASSET}),T.formatOptions(b,this.application.extensionManager.optionValueAsBoolean(y.RESOURCE_STRINGS,"numberResourceValue"));let h=this.application.resolveTarget(f);if(!t.pageFlow){const{leftRight:o,topBottom:a}=t.autoMargin,i=h||e;if(o)t.mergeGravity("layout_gravity","center_horizontal");else if(t.hasPX("left"))t.mergeGravity("layout_gravity",t.localizeString("left")),t.modifyBox(16,d(i,256,t.left));else if(t.hasPX("right"))t.mergeGravity("layout_gravity",t.localizeString("right")),t.modifyBox(4,d(i,64,t.right));if(a)t.mergeGravity("layout_gravity","center_vertical");else if(t.hasPX("top"))t.app("layout_dodgeInsetEdges","top"),t.mergeGravity("layout_gravity","top"),t.modifyBox(2,d(i,32,t.top));else if(t.hasPX("bottom"))t.mergeGravity("layout_gravity","bottom"),t.modifyBox(8,d(i,128,t.bottom));t.positioned=true}else if(f){const e=g(t),o=u(t),a=t.documentParent;if(e<.5)t.mergeGravity("layout_gravity",t.localizeString("left")),t.modifyBox(16,t.linear.left-a.box.left);else if(e>.5)t.mergeGravity("layout_gravity",t.localizeString("right")),t.modifyBox(4,a.box.right-t.linear.right);else t.mergeGravity("layout_gravity","center_horizontal");if(o<.5)t.app("layout_dodgeInsetEdges","top"),t.mergeGravity("layout_gravity","top"),t.modifyBox(2,t.linear.top-a.box.top);else if(o>.5)t.mergeGravity("layout_gravity","bottom"),t.modifyBox(8,a.box.bottom-t.linear.bottom);else t.mergeGravity("layout_gravity","center_vertical");t.positioned=true}if(f){const o=t.android("layout_gravity");let a=e.documentId;if(e.controlName===(t.api<29?m.TOOLBAR:p.TOOLBAR)){const t=e.data("android.widget.toolbar","outerParent");if(t)a=t}if(""!==o)t.app("layout_anchorGravity",o),t.delete("android","layout_gravity");t.app("layout_anchor",a),t.exclude({procedure:n.ALIGNMENT}),t.render(h)}else t.render(e),h=void 0;return t.apply(b),{outerParent:h,output:{type:1,node:t,controlName:O},complete:true}}}const v=new N("android.widget.floatingactionbutton",2,["BUTTON","INPUT","IMG"]);if(squared)squared.include(v);return v}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.menu=function(){"use strict";const e=android.lib,{appendSeparator:t,isNumber:n,sameArray:a,safeNestedMap:i}=squared.lib.util,{NODE_ALIGNMENT:r,NODE_PROCEDURE:o,NODE_RESOURCE:s,NODE_TEMPLATE:c}=squared.base.lib.enumeration,{EXT_ANDROID:l}=e.constant,{CONTAINER_NODE:d}=e.enumeration,{createViewAttribute:u}=e.util,m=android.base.Resource,h={id:/^@\+id\/\w+$/,title:/^.+$/,titleCondensed:/^.+$/,icon:/^@drawable\/.+$/,onClick:/^.+$/,showAsAction:/^(ifRoom|never|withText|always|collapseActionView)$/,actionLayout:/^@layout\/.+$/,actionViewClass:/^.+$/,actionProviderClass:/^.+$/,alphabeticShortcut:/^[a-zA-Z]+$/,alphabeticModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,numericShortcut:/^\d+$/,numericModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,checkable:/^(true|false)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^\d+$/},f={id:/^@\+id\/\w+$/,checkableBehavior:/^(none|all|single)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^\d+$/},p=["showAsAction","actionViewClass","actionProviderClass"],N="menu",g="item",A="group";function E(e,t,n){const a=t.dataset;for(const t in a){const r=e[t];if(r){const e=a[t];if(e){const a=r.exec(e);if(a)i(n,p.includes(t)?"app":"android")[t]=Array.from(new Set(a)).join("|")}}}}function b(e,t){const n=t.title;if(n)return n;else for(const t of e.naturalChildren)if(t.textElement)return t.textContent.trim();return""}const C=(e,t)=>e.some(e=>e.toElementString("type")===t);class y extends squared.base.ExtensionUI{constructor(e,t,n,a){super(e,t,n,a),this.cascadeAll=true,this.require(l.EXTERNAL,true)}init(e){if(this.included(e))if(e.childElementCount){if(!a(e.children,e=>e.tagName))return false;const t=this.application;let n=e.parentElement;while(n){if("NAV"===n.tagName&&t.rootElements.has(n))return false;n=n.parentElement}t.rootElements.add(e)}return false}condition(e){return this.included(e.element)}processNode(e,n){const a=this.application.createNode({parent:n,append:false});return a.childIndex=e.childIndex,a.actualParent=n.actualParent,e.documentRoot=true,e.setControlType(N,d.INLINE),e.addAlign(4),e.exclude({resource:s.ALL,procedure:o.ALL}),e.render(a),e.cascade(e=>(this.addDescendant(e),false)),e.dataset.pathname=t(this.controller.userSettings.outputDirectory,"res/menu"),{output:{type:1,node:e,controlName:N},outerParent:a,complete:true}}processChild(e,t){if(e.plainText)return e.hide(),{next:true};const a=u(),i=a.android,r=e.element;let c,p;if("NAV"===e.tagName)c=N,p=b(e,r);else if(e.some(e=>e.length>0)){if(e.some(e=>"NAV"===e.tagName))c=g;else if(c=A,e.every(e=>C(e,"radio")))i.checkableBehavior="single";else if(e.every(e=>C(e,"checkbox")))i.checkableBehavior="all";p=b(e,r)}else if(c=g,p=(r.title||r.innerText).trim(),C(e,"checkbox")&&!t.android("checkableBehavior"))i.checkable="true";switch(c){case N:e.addAlign(4);break;case A:e.addAlign(4),E(f,r,a);break;case g:if(E(h,r,a),!i.icon){const t=this.resource;let n=t.addImageSrc(e.backgroundImage,"ic_menu_");if(""!==n)i.icon="@drawable/"+n;else{const a=e.find(e=>e.imageElement);if(a)if(n=t.addImageSrc(a.element,"ic_menu_"),""!==n)i.icon="@drawable/"+n}}e.each(e=>"NAV"!==e.tagName&&e.hide());break}if(""!==p){const e=this.application.extensionManager.optionValueAsBoolean(l.RESOURCE_STRINGS,"numberResourceValue"),t=m.addString(p,"",e);i.title=e||!n(t)?"@string/"+t:p}return e.setControlType(c,d.INLINE),e.exclude({resource:s.ALL,procedure:o.ALL}),e.render(t),e.apply(a),{output:{type:1,node:e,controlName:c},complete:true,next:c===N}}}const T=new y("android.widget.menu",2,["NAV"]);if(squared)squared.include(T);return T}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.toolbar=function(){"use strict";const e=squared.lib,t=android.lib,{formatPX:a}=e.css,{getElementAsNode:o}=e.session,{assignEmptyValue:r,safeNestedMap:n,includes:i,isString:d,iterateArray:s}=e.util,{NODE_PROCEDURE:l,NODE_RESOURCE:c,NODE_TEMPLATE:p}=squared.base.lib.enumeration,{CONTAINER_ANDROID:u,EXT_ANDROID:m,SUPPORT_ANDROID:h,SUPPORT_ANDROID_X:g}=t.constant,{BUILD_ANDROID:f,CONTAINER_NODE:O}=t.enumeration,{createStyleAttribute:y,createViewAttribute:I,getDocumentId:T}=t.util,b=android.base.Resource;class A extends squared.base.ExtensionUI{constructor(e,t,a,o){super(e,t,a,o),this.require("android.widget.menu")}init(e){if(this.included(e)){s(e.children,e=>{if("NAV"===e.tagName){const t=e.dataset.use;if(!i(t,m.EXTERNAL))return e.dataset.use=(t?t+", ":"")+m.EXTERNAL,true}});const t=e.dataset.target;if(t){const a=document.getElementById(t);if(a&&e.parentElement!==a&&!i(a.dataset.use,"android.widget.coordinator"))this.application.rootElements.add(e)}}return false}processNode(e,t){const i=this.application,p=this.resource,f=i.userSettings,y=e.element,N=e.dataset.target,_=Object.assign({},this.options[y.id]),E=I(_.self),w=I(_.appBar),L=I(_.collapsingToolbar),B=i.extensionManager.optionValueAsBoolean(m.RESOURCE_STRINGS,"numberResourceValue"),R=A.findNestedElement(y,"android.widget.menu"),S=e.has("backgroundImage"),P=[],v=[];let C=n(E,"app");s(y.children,t=>{const a=t.dataset;if("IMG"===t.tagName){if(a.navigationIcon){const e=p.addImageSrc(t,"ic_menu_");if(""!==e)r(C,"navigationIcon","@drawable/"+e)}if(a.collapseIcon){const e=p.addImageSrc(t,"ic_menu_");if(""!==e)r(C,"collapseIcon","@drawable/"+e)}}if(!a.target){const r=o(t,e.sessionId);if(r)switch(a.targetModule){case"appBar":P.push(r);break;case"collapsingToolbar":v.push(r);break}}});const[D,k,x]=e.api<29?[h.TOOLBAR,h.APPBAR,h.COLLAPSING_TOOLBAR]:[g.TOOLBAR,g.APPBAR,g.COLLAPSING_TOOLBAR],M="collapsingToolbar"in _||v.length>0,U="appBar"in _||P.length>0||M;let V,W,X,q="",G="";if(M)r(C,"layout_collapseMode","pin");else if(r(C,"popupTheme","@style/ThemeOverlay.AppCompat.Light"),!S)r(C,"layout_scrollFlags","scroll|enterAlways");if(U){if(R){const e=C.popupTheme;if(e)G=e.replace("@style/","");C.popupTheme=`@style/${f.manifestThemeName}.PopupOverlay`}}else e.exclude({procedure:l.LAYOUT}),r(E,"android","fitsSystemWindows","true");if(r(E,"android","layout_height",U||!e.hasPX("height")?"?android:attr/actionBarSize":""),e.setControlType(D,O.BLOCK),e.exclude({resource:c.FONT_STYLE}),U){let o=w.android;if(r(w,"android","id",`@+id/${e.controlId}_appbar`),r(w,"android","layout_height",e.hasHeight?a(e.actualHeight):"wrap_content"),r(w,"android","fitsSystemWindows","true"),R){if(o.theme)q=o.theme;o.theme=`@style/${f.manifestThemeName}.AppBarOverlay`,e.data("android.widget.toolbar","themeData",{appBarOverlay:q,popupOverlay:G})}else r(w,"android","theme","@style/ThemeOverlay.AppCompat.Dark.ActionBar");V=this.createPlaceholder(e,P,N),V.parent=t;let i=o.id;if(d(i))V.controlId=T(i),delete o.id;if(V.setControlType(k,O.BLOCK),M){if(C=n(L,"app"),r(L,"android","id",`@+id/${e.controlId}_collapsingtoolbar`),r(L,"android","fitsSystemWindows","true"),!S)r(C,"contentScrim","?attr/colorPrimary");if(r(C,"layout_scrollFlags","scroll|exitUntilCollapsed"),r(C,"toolbarId",e.documentId),W=this.createPlaceholder(e,v,N),W){if(W.parent=V,o=L.android,i=o.id,i)V.controlId=T(i),delete o.id;W.setControlType(x,O.BLOCK);const e=W.controlId;W.each(t=>t.dataset.target=e)}}}if(V){if(V.setLayoutWidth("match_parent"),V.setLayoutHeight("wrap_content"),V.apply(b.formatOptions(w,B)),V.render(N?i.resolveTarget(N):t),X={type:1,node:V,controlName:k},W){if(e.parent=W,W.apply(b.formatOptions(L,B)),W.render(V),W.setLayoutWidth("match_parent"),W.setLayoutHeight("match_parent"),i.addLayoutTemplate(W.renderParent,W,{type:1,node:W,controlName:x}),S){const t=p.addImageSrc(e.backgroundImage);if(""!==t){const a=this.controller,o=I(_.backgroundImage);let i;switch(e.css("backgroundSize")){case"cover":case"100% auto":case"auto 100%":i="centerCrop";break;case"contain":case"100%":case"100% 100%":i="fitXY";break;case"auto":i="matrix";break;default:i="center";break}C=n(o,"app"),r(o,"android","id",`@+id/${e.controlId}_image`),r(o,"android","src","@drawable/"+t),r(o,"android","scaleType",i),r(o,"android","fitsSystemWindows","true"),r(C,"layout_collapseMode","parallax"),a.addBeforeOutsideTemplate(e.id,a.renderNodeStatic({controlName:u.IMAGE,width:"match_parent",height:"match_parent"},b.formatOptions(o,B))),e.setCacheValue("backgroundImage","")}}}else if(e.parent=V,S)e.data("android.widget.toolbar","background",V);e.data("android.widget.toolbar","outerParent",V.android("id")||V.documentId),e.render(e.parent)}else e.render(N?i.resolveTarget(N):t);e.setLayoutWidth("match_parent"),e.apply(b.formatOptions(E,B));const $={type:1,node:e,controlName:D};if(V)return{output:$,outerParent:e.parent,renderAs:V,outputAs:X,include:true};else return{output:$,include:true}}processChild(e){if(e.imageElement&&(e.dataset.navigationIcon||e.dataset.collapseIcon))return e.hide(),{next:true}}postOptimize(e){var t,a;const o=null===(t=A.findNestedElement(e.element,"android.widget.menu"))||void 0===t?void 0:t.dataset.layoutName;if(o){const t=I(null===(a=this.options[e.elementId])||void 0===a?void 0:a.self),i=n(t,"app");r(i,"menu","@menu/"+o),e.app("menu",i.menu)}const i=e.data("android.widget.toolbar","themeData");if(i){const e=this.application.userSettings,t=y(this.options.resource),a=y({name:".NoActionBar",output:t.output}),o=y({name:".AppBarOverlay",output:t.output}),n=y({name:".PopupOverlay",output:t.output}),d=a.items;r(t,"name",e.manifestThemeName),r(t,"parent","Theme.AppCompat.Light.DarkActionBar"),r(d,"windowActionBar","false"),r(d,"windowNoTitle","true"),r(o,"parent",i.appBarOverlay||"ThemeOverlay.AppCompat.Dark.ActionBar"),r(n,"parent",i.popupOverlay||"ThemeOverlay.AppCompat.Light"),b.addTheme(t),b.addTheme(a),b.addTheme(o),b.addTheme(n)}const d=e.data("android.widget.toolbar","background");if(d){const t=e.android("background");if(""!==t)d.android("background",t),e.delete("android","background")}}createPlaceholder(e,t,a){const o=t.length>0,r=this.application.createNode({parent:e,children:t,delegate:o,cascade:true});if(r.inherit(e,"base"),o){let e=Number.POSITIVE_INFINITY;t.forEach(t=>e=Math.min(e,t.containerIndex)),r.containerIndex=e}if(a)r.dataset.target=a;return r.exclude({resource:c.ALL}),r.positioned=true,r.renderExclude=false,r}}const N=new A("android.widget.toolbar",2);if(squared)squared.include(N);return N}();
