!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).squared={})}(this,(function(e){"use strict";const t="-?(?:\\d+(?:\\.\\d+)?|\\d*\\.\\d+)",r="px|em|pt|rem|ch|pc|vw|vh|vmin|vmax|mm|cm|in|ex|Q",n={DECIMAL:t,PERCENT:"-?\\d+(?:\\.\\d+)?%",LENGTH:`(${t})(${r})?`,LENGTH_PERCENTAGE:`(${t}(?:${r}|%)?)`,UNIT_LENGTH:r,DATAURI:"(?:data:([^,]+),)?(.+?)",CSS_SELECTOR_LABEL:"[\\.#]?[\\w\\-]+",CSS_SELECTOR_PSEUDO_ELEMENT:"::[\\w\\-]+",CSS_SELECTOR_PSEUDO_CLASS:":[\\w\\-]+(?:\\(\\s*([^()]+)\\s*\\)|\\(\\s*([\\w\\-]+\\(.+?\\))\\s*\\))?",CSS_SELECTOR_ATTR:"\\[((?:\\*\\|)?(?:\\w+\\\\:)?[\\w\\-]+)(?:([~^$*|])?=(?:\"((?:[^\"]|\\\\\")+)\"|'((?:[^']|\\')+)'|([^\\s\\]]+))\\s*(i)?)?\\]",CSS_ANGLE:`(${t})(deg|rad|turn|grad)`,CSS_TIME:`(${t})(s|ms)`,CSS_CALC:"calc\\((.+)\\)"},i={NAME:/[/\\]?(([^/\\]+?)\.([^/\\]+?))$/,PROTOCOL:/^([A-Za-z]{3,}:\/\/)([A-Za-z\d\-.]+)(:\d+)?(\/[^?]*)?[?]?(.*)?$/,SVG:/\.svg$/i},a={URL:/^\s*url\((.+)\)\s*$/,HEX:/^#[A-Fa-f\d]{3,8}$/,RGBA:/rgba?\((\d+),\s+(\d+),\s+(\d+)(?:,\s+([\d.]+%?))?\)/,HSLA:/hsla?\((\d+),\s+(\d+)%,\s+(\d+)%(?:,\s+([\d.]+%?))?\)/,SELECTOR_G:new RegExp(`\\s*((?:${n.CSS_SELECTOR_ATTR}|${n.CSS_SELECTOR_PSEUDO_CLASS}|${n.CSS_SELECTOR_PSEUDO_ELEMENT}|${n.CSS_SELECTOR_LABEL})+|[>~+*])\\s*`,"g"),SELECTOR_LABEL:new RegExp(n.CSS_SELECTOR_LABEL),SELECTOR_PSEUDO_ELEMENT:new RegExp(n.CSS_SELECTOR_PSEUDO_ELEMENT),SELECTOR_PSEUDO_CLASS:new RegExp(n.CSS_SELECTOR_PSEUDO_CLASS),SELECTOR_ATTR:new RegExp(n.CSS_SELECTOR_ATTR)},s={MATRIX:new RegExp(`(matrix(?:3d)?)\\((${n.DECIMAL}),\\s+(${n.DECIMAL}),\\s+(${n.DECIMAL}),\\s+(${n.DECIMAL}),\\s+(${n.DECIMAL}),\\s+(${n.DECIMAL})(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?\\)`),ROTATE:new RegExp(`(rotate[XYZ]?)\\(${n.CSS_ANGLE}\\)`),SKEW:new RegExp(`(skew[XY]?)\\(${n.CSS_ANGLE}(?:,\\s+${n.CSS_ANGLE})?\\)`),SCALE:new RegExp(`(scale[XYZ]?)\\((${n.DECIMAL})(?:,\\s+(${n.DECIMAL}))?\\)`),TRANSLATE:new RegExp(`(translate[XYZ]?)\\(${n.LENGTH_PERCENTAGE}(?:,\\s+${n.LENGTH_PERCENTAGE})?\\)`),PERSPECTIVE:new RegExp(`(perspective)\\(${n.LENGTH_PERCENTAGE}\\)`)};var l=Object.freeze({__proto__:null,STRING:n,FILE:i,CSS:a,TRANSFORM:s});const o=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],c={},u={},h=new RegExp(`^${n.DECIMAL}$`);function f(e){switch(I(e.trim(),".").toLowerCase()){case"aac":return"audio/aac";case"abw":return"application/x-abiword";case"apng":return"image/apng";case"arc":return"application/x-freearc";case"avi":return"video/x-msvideo";case"azw":return"application/vnd.amazon.ebook";case"bin":return"application/octet-stream";case"bmp":case"bmpf":case"bmpp":return"image/bmp";case"bz":return"application/x-bzip";case"bz2":return"application/x-bzip2";case"csh":return"application/x-csh";case"css":return"text/css";case"csv":return"text/csv";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"eot":case"embedded-opentype":return"application/vnd.ms-fontobject";case"epub":return"application/epub+zip";case"flac":return"audio/flac";case"gif":return"image/gif";case"gsm":return"audio/gsm";case"heic":return"image/heic";case"heif":return"image/heif";case"htm":case"html":return"text/html";case"cur":case"ico":return"image/x-icon";case"ics":return"text/calendar";case"jar":return"application/java-archive";case"jpeg":case"jpg":case"jfif":case"pjpeg":case"pjp":return"image/jpeg";case"js":case"mjs":return"text/javascript";case"json":return"application/json";case"jsonp":return"application/javascript";case"jsonld":return"application/ld+json";case"mid":case"midi":return"audio/midi";case"mkv":return"video/x-matroska";case"mp3":case"mpeg":return"audio/mpeg";case"mp4":return"video/mp4";case"mpkg":return"application/vnd.apple.installer+xml";case"odp":return"application/vnd.oasis.opendocument.presentation";case"ods":return"application/vnd.oasis.opendocument.spreadsheet";case"odt":return"application/vnd.oasis.opendocument.text";case"oga":case"spx":case"ogg":return"audio/ogg";case"ogv":case"ogm":return"video/ogg";case"ogx":return"application/ogg";case"otf":case"opentype":return"font/otf";case"png":return"image/png";case"pdf":return"application/pdf";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"rar":return"application/x-rar-compressed";case"rtf":return"application/rtf";case"sh":return"application/x-sh";case"svg":return"image/svg+xml";case"swf":return"application/x-shockwave-flash";case"tar":return"application/x-tar";case"tif":case"tiff":return"image/tiff";case"ts":return"video/mp2t";case"ttf":case"truetype":return"font/ttf";case"txt":return"text/plain";case"vsd":return"application/vnd.visio";case"vtt":return"text/vtt";case"wav":return"audio/wav";case"weba":case"webm":return"audio/webm";case"webp":return"image/webp";case"woff":return"font/woff";case"woff2":return"font/woff2";case"xhtml":return"application/xhtml+xml";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xml":return"application/xml";case"xul":return"application/vnd.mozilla.xul+xml";case"zip":return"application/zip";case"3gp":return"video/3gpp";case"3g2":return"video/3gpp2";case"7z":return"application/x-7z-compressed";default:return""}}function g(e){for(const t in e)return void 0!==e[t];return false}function d(e,t,r){return 0===t?e.substring(r):e.substring(0,t)+e.substring(t+r)}function p(e,t="-"){let r=e.indexOf(t);if(-1===r)return e;const n=c[e];if(n)return n;let i=e.substring(0,r),a="";const s=e.length;while(r<s){const n=e.charAt(r++);if(n!==t)if(a===t)i+=n.toUpperCase();else i+=n;a=n}return c[e]=i,i}function b(e){return parseFloat(e)||0}function m(e){if(e>=0){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let r="";const n=t.length;while(e>=n){const i=Math.floor(e/n);if(i>1&&i<=n)r+=t.charAt(i-1),e-=i*n;else if(i>0)return r+="Z",r+=m(e-=Math.pow(n,2)),r;const a=e%n;r+=t.charAt(a),e-=a+n}return t.charAt(e)+r}return e.toString()}function v(e){const t=e.toString().split("");let r="",n=3;while(n--)r=(o[parseInt(t.pop())+10*n]||"")+r;return"M".repeat(parseInt(t.join("")))+r}function w(e,t,r="",n="(",i=")"){if(r.length>1)return[];if(!t)t=n;const a=t!==n,s=a?t+n:n,l=[],o=e=>{for(let t of e.split(r))if(t=t.trim(),""!==t)l.push(t)};let c=0,u=-1;const h=e.length;while(-1!==(u=e.indexOf(s,c))){let s="";if(u!==c){let n=e.substring(c,u);if(r){if(n=n.trim(),""!==n)if(o(n),!a){const r=l[l.length-1];if(e.substring(u-r.length,u+1)===r+t)s=r,--l.length}}else l.push(n)}let f=false;for(let o=u+(a?t.length:0)+1,g=1,d=0;o<h;++o){switch(e.charAt(o)){case n:++g;break;case i:++d;break}if(g===d){if(r){for(;o<h;++o)if(e.charAt(o)===r)break;c=o+1,l.push(s+e.substring(u,o).trim())}else c=o+1,l.push(e.substring(u,c));if(c===h)return l;f=true;break}}if(!f)return[]}if(c<h){const t=e.substring(c);if(r){const e=t.trim();if(""!==e)o(e)}else l.push(t)}return l}function y(e,t){return(e&t)===t}function k(e){return h.test(e)}function x(e){return"string"==typeof e&&""!==e.trim()}function E(e){return"object"==typeof e&&null!==e}function S(e){return E(e)&&(e.constructor===Object||null===Object.getPrototypeOf(Object(e)))}function A(e,t=[],r){for(let n=0;n<e.length;++n){const i=e[n];if(Array.isArray(i))t.push(A(i,[],r));else if(r&&S(i))t.push(C(i,{},true));else t.push(i)}return t}function C(e,t={},r){for(const n in e){const i=e[n];if(Array.isArray(i))t[n]=r?A(i,[],true):i;else if(S(i))t[n]=C(i,{},r);else t[n]=i}return t}function R(e,t){if(""!==(e=e.trim())&&!i.PROTOCOL.test(e)){const r=((null==t?void 0:t.replace(location.origin,""))||location.pathname).replace(/\\/g,"/").split("/");if(r.pop(),"/"===(e=e.replace(/\\/g,"/")).charAt(0))return location.origin+e;else if(e.startsWith("../")){const t=[];for(const n of e.split("/"))if(".."===n)if(0===t.length)r.pop();else t.pop();else t.push(n);e=t.join("/")}else if(e.startsWith("./"))e=e.substring(2);return location.origin+r.join("/")+"/"+e}return e}function F(e,t){const r=new RegExp(`^(${t})+(.*?)\\1$`).exec(e);return r?r[2]:e}function T(e,t){return e.replace(new RegExp(`^(${t})+`),"")}function L(e,t){return e.replace(new RegExp(`(${t})+$`),"")}function I(e,...t){for(let r=0;r<t.length;++r){const n=e.lastIndexOf(t[r]);if(-1!==n)return e.substring(n+1)}return e}function N(e){return null!=e&&""!==e}function P(e,t,r=1){return t>=e-r&&t<=e+r}function M(e,t){let r=0;for(const n of e)if(t(n,r++,e))return n}function B(e,t){const r=e.length,n=new Array(r),i=new Array(r);let a=0,s=0,l=0;while(a<r){const r=e[a];if(t(r,a++,e))n[s++]=r;else i[l++]=r}return n.length=s,i.length=l,[n,i]}function _(e,t){const r=e.length;if(r>0){let n;for(let i=0;i<r;++i){const r=t(e[i],i,e);if(0===i)n=r;else if(r!==n)return false}return true}return false}function D(e,t,r="\n",n=true){let i="";const a=e.length;let s=0;while(s<a){const n=t(e[s],s++,e);if(""!==n)i+=n+r}return n?i:i.substring(0,i.length-r.length)}function O(e,t,r=0,n=1/0){r=Math.max(r,0);const i=Math.min(e.length,n);let a=r;while(a<i){if(true===t(e[a],a++,e))return 1/0}return i}function z(e,t){const r=e.length;let n=0;while(n<r)e[n]=t(e[n],n++,e);return e}function $(e,t){const r=e.length,n=new Array(r);let i=0;while(i<r)n[i]=t(e[i],i++,e);return n}var W=Object.freeze({__proto__:null,promisify:function(e){return(...t)=>new Promise((r,n)=>{try{r(e.call(null,...t))}catch(e){n(e)}})},hasMimeType:function(e,t){return"*"===e||e.includes(f(t))},parseMimeType:f,fromMimeType:function(e){switch(e){case"audio/aac":return"aac";case"application/x-abiword":return"abw";case"image/apng":return"apng";case"application/x-freearc":return"arc";case"video/x-msvideo":return"avi";case"application/vnd.amazon.ebook":return"azw";case"application/octet-stream":return"bin";case"image/bmp":case"image/x-ms-bmp":return"bmp";case"application/x-bzip":return"bz";case"application/x-bzip2":return"bz2";case"application/x-csh":return"csh";case"text/css":return"css";case"text/csv":return"csv";case"application/msword":return"doc";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"docx";case"application/vnd.ms-fontobject":return"eot";case"application/epub+zip":return"epub";case"audio/flac":return"flac";case"image/gif":return"gif";case"audio/gsm":return"gsm";case"image/heic":return"heic";case"image/heif":return"heif";case"text/html":return"html";case"image/x-icon":return"ico";case"text/calendar":return"ics";case"application/java-archive":return"jar";case"image/jpeg":return"jpg";case"text/javascript":return"js";case"application/json":return"json";case"application/ld+json":return"jsonld";case"audio/midi":return"mid";case"video/x-matroska":return"mkv";case"audio/mpeg":return"mp3";case"video/mp4":return"mp4";case"application/vnd.apple.installer+xml":return"mpkg";case"application/vnd.oasis.opendocument.presentation":return"odp";case"application/vnd.oasis.opendocument.spreadsheet":return"ods";case"application/vnd.oasis.opendocument.text":return"odt";case"audio/ogg":return"ogg";case"video/ogg":return"ogv";case"application/ogg":return"ogx";case"font/otf":return"otf";case"image/png":return"png";case"application/pdf":return"pdf";case"application/vnd.ms-powerpoint":return"ppt";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"pptx";case"application/x-rar-compressed":return"rar";case"application/rtf":return"rtf";case"application/x-sh":return"sh";case"image/svg+xml":return"svg";case"application/x-shockwave-flash":return"swf";case"application/x-tar":return"tar";case"image/tiff":return"tif";case"video/mp2t":return"ts";case"font/ttf":return"ttf";case"text/plain":return"txt";case"application/vnd.visio":return"vsd";case"text/vtt":return"vtt";case"audio/wav":return"wav";case"audio/webm":return"video/webm";case"image/webp":return"webp";case"font/woff":return"woff";case"font/woff2":return"woff2";case"application/xhtml+xml":return"xhtml";case"application/vnd.ms-excel":return"xls";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"xlsx";case"text/xml":return"xml";case"application/vnd.mozilla.xul+xml":return"xul";case"application/zip":return"zip";case"video/3gpp":return"3gp";case"video/3gpp2":return"3g2";case"application/x-7z-compressed":return"7z";default:return""}},hasKeys:g,capitalize:function(e,t){return false===t?e.charAt(0).toLowerCase()+e.substring(1):e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},capitalizeString:function(e){let t;const r=/\b([a-z].*?)\b/g;let n;while(n=r.exec(e)){if(void 0===t)t=e.split("");t[n.index]=n[1].charAt(0).toUpperCase()}return(null==t?void 0:t.join(""))||e},lowerCaseString:function(e){const t=[],r=/&#?[A-Za-z\d]+?;/g;let n;while(n=r.exec(e))t.push(n[0]);if(t.length>0){let n="";const i=e.split(r),a=i.length;for(let e=0;e<a;++e)n+=i[e].toLowerCase()+(t[e]||"");return n}return e.toLowerCase()},spliceString:d,convertUnderscore:function(e){const t=u[e];if(t)return t;let r=e[0].toLowerCase(),n=true;const i=e.length;let a=1;while(a<i){const t=e.charAt(a++),i=t===t.toUpperCase();if(n&&i&&"_"!==t)r+="_"+t.toLowerCase();else r+=t;n=!i}return u[e]=r,r},convertCamelCase:p,convertWord:function(e,t){let r="";const n=t?/[a-zA-Z\d]/:/\w/,i=e.length;let a=0;while(a<i){const t=e.charAt(a++);r+=n.test(t)?t:"_"}return r},convertInt:function(e){return parseInt(e)||0},convertFloat:b,convertAlpha:m,convertRoman:v,convertEnum:function(e,t,r){for(const n of Object.keys(t))if(e===t[n])return r[n];return""},randomUUID:function(e="-"){let t="";for(const r of[8,4,4,4,12]){if(""!==t)t+=e;for(let e=0;e<r;++e)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()))}return t},formatString:function(e,...t){const r=t.length;let n=0;while(n<r)e=e.replace(`{${n}}`,t[n++]);return e},delimitString:function(e,...t){const r=t.length,n=e.value;if(1===r&&!n)return t[0];const i=e.delimiter||", ",a=e.not||[],s=e.remove||false,l=""!==n?n.split(i):[];for(let e=0;e<r;++e){const r=t[e];if(""!==r){if(l.includes(a[e]))continue;const t=l.findIndex(e=>e===r);if(-1===t)l.push(r);else if(s)l.splice(t,1)}}if(e.sort)l.sort();return l.join(i)},splitEnclosing:w,hasBit:y,isNumber:k,isString:x,isArray:function(e){return Array.isArray(e)&&e.length>0},isObject:E,isPlainObject:S,isEqual:function e(t,r){if(t===r)return true;else if(Array.isArray(t)&&Array.isArray(r)){const e=t.length;if(e===r.length){let n=0;while(n<e)if(t[n]!==r[n++])return false;return true}}else if(S(t)&&S(r))if(Object.keys(t).length===Object.keys(r).length){for(const n in t){const i=t[n],a=r[n];if(i!==a){if(S(i)&&S(a)&&e(i,a))continue;return false}}return true}return false},includes:function(e,t,r=","){if(e)for(const n of e.split(r))if(n.trim()===t)return true;return false},cloneInstance:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)},cloneArray:A,cloneObject:C,resolvePath:R,trimBoth:F,trimString:function(e,t){return T(L(e,t),t)},trimStart:T,trimEnd:L,appendSeparator:function(e,t,r="/"){switch(e=e.trim(),t=t.trim(),r){case"\\":e=e.replace(/\//g,"\\"),t=t.replace(/\//g,"\\");break;case"/":e=e.replace(/\\/g,"/"),t=t.replace(/\\/g,"/");break}return e+(""!==e&&""!==t&&!e.endsWith(r)&&!t.startsWith(r)?r:"")+t},fromLastIndexOf:I,partitionLastIndexOf:function(e,...t){for(let r=0;r<t.length;++r){const n=e.lastIndexOf(t[r]);if(-1!==n)return[e.substring(0,n),e.substring(n+1)]}return["",e]},searchObject:function(e,t){const r=[];if("object"==typeof t)for(const n in t){const i=t[n];if(N(e[i]))r.push([i,e[i]])}else{const n=/^\*.+\*$/.test(t)?e=>e.includes(t.replace(/^\*/,"").replace(/\*$/,"")):t.startsWith("*")?e=>e.endsWith(t.replace(/^\*/,"")):t.endsWith("*")?e=>e.startsWith(t.replace(/\*$/,"")):e=>e===t;for(const t in e)if(n(t))r.push([t,e[t]])}return r},hasValue:N,withinRange:P,aboveRange:function(e,t,r=1){return e+r>t},belowRange:function(e,t,r=1){return e-r<t},assignEmptyProperty:function(e,t){for(const r in t)if(!Object.prototype.hasOwnProperty.call(e,r))e[r]=t[r];return e},assignEmptyValue:function(e,...t){const r=t.length;if(r>1){let n=e,i=0;do{const e=t[i],a=n[e];if(i===r-2){if(!N(a))n[e]=t[i+1];break}else if(e)if(null==a)n={},n[e]=n;else if(E(a))n=a;else break;else break}while(++i)}},findSet:M,sortNumber:function(e,t=true){return t?e.sort((e,t)=>e<t?-1:1):e.sort((e,t)=>e>t?-1:1)},safeNestedArray:function(e,t){let r=e[t];if(null==r)r=[],e[t]=r;return r},safeNestedMap:function(e,t){let r=e[t];if(null==r)r={},e[t]=r;return r},sortArray:function(e,t,...r){return e.sort((e,n)=>{for(let i=0;i<r.length;++i){let a=e,s=n;for(const e of r[i].split(".")){const t=a[e],r=s[e];if(void 0!==t&&void 0!==r)a=t,s=r;else if(void 0===t&&void 0===r)return 0;else if(void 0!==t)return-1;else return 1}if(a!==s)if(t)return a>s?1:-1;else return a<s?-1:1}return 0})},flatArray:function e(t,r=0,n=0){let i=[];const a=t.length;let s=0;while(s<a){const a=t[s++];if(n<r&&Array.isArray(a)){if(a.length>0)i=i.concat(e(a,r,n+1))}else if(null!=a)i.push(a)}return i},spliceArray:function(e,t,r,n){let i=0;for(let a=0;a<e.length;++a){const s=e[a];if(t(s,a,e)){if(r)r(s,a,e);if(e.splice(a--,1),++i===n)break}}return e},partitionArray:B,sameArray:_,joinArray:D,iterateArray:O,iterateReverseArray:function(e,t,r=0,n=1/0){r=Math.max(r,0);const i=Math.min(e.length,n);let a=i-1;while(a>=r){if(true===t(e[a],a--,e))return 1/0}return i},conditionArray:function(e,t,r){const n=e.length;for(let i=0;i<n;++i){const n=e[i];if(t(n,i,e)){if(false===r(n,i,e))break}}},replaceMap:z,plainMap:$});function j(e){const t=navigator.userAgent;let r=2;if(t.includes("Safari/")&&!t.includes("Chrome/"))r=4;else if(t.includes("Firefox/"))r=8;else if(t.includes("Edg/"))r=16;if("string"==typeof e){const t=e.toUpperCase();if(e=0,t.includes("CHROME"))e|=2;if(t.includes("SAFARI"))e|=4;if(t.includes("FIREFOX"))e|=8;if(t.includes("EDGE"))e|=16}return y(e,r)}function G(){return 96*window.devicePixelRatio}var V=Object.freeze({__proto__:null,isPlatform:function(e){const t=navigator.platform.toLowerCase();if("string"==typeof e)return t.includes(e.toLowerCase());else return y(e,2)&&t.includes("win")||y(e,4)&&/(mac|iphone|ipad|ipod)/.test(t)},isUserAgent:j,getDeviceDPI:G});const H={};function X(e){return Math.min.apply(null,e)}function U(e,t,r=5){return r+=Math.floor(e).toString().length,e.toPrecision(r)===t.toPrecision(r)}function Y(e,t=3){if("string"==typeof e)e=parseFloat(e);const r=Math.floor(e);if(e===r)return e.toString();else if(e>=0&&e<=1/Math.pow(10,t)||e<0&&e>=-1/Math.pow(10,t))return"0";else{if(0!==r)t+=r.toString().length;return Z(e.toPrecision(t))}}function q(e){if(e!==Math.floor(e)){const t=/^(-?\d+)\.(\d*?)(0{5,}|9{5,})\d*$/.exec(function(e){const t=/^(-?\d+\.\d+)e(-?\d+)$/.exec(e.toString());return t?parseInt(t[2])>0?Number.MAX_SAFE_INTEGER.toString():"0":e.toString()}(e));if(t){const r=t[2];if(""===r)return Math.round(e);const n=t[1];return parseFloat(e.toPrecision(("0"!==n?n.length:0)+r.length))}}return e}function Z(e){const t=/\.(\d*?)(0+)$/.exec(e);return t?e.substring(0,e.length-t[t[1]?2:0].length):e}function K(e){return e*Math.PI/180}function Q(e,t){const r=t.x-e.x,n=t.y-e.y;return 180*Math.atan2(n,r)/Math.PI}function J(e,t=0,r=1){if(e<t)e=t;else if(e>r)e=r;return e}function ee(e,t=11){let r=e=K(e);for(let n=3,i=0;n<=t;n+=2,++i)r+=Math.pow(e,n)/re(n)*(i%2==0?-1:1);return r}function te(e,t=10){e=K(e);let r=1;for(let n=2,i=0;n<=t;n+=2,++i)r+=Math.pow(e,n)/re(n)*(i%2==0?-1:1);return r}function re(e){let t=2,r=3;while(r<=e)t*=r++;return t}var ne=Object.freeze({__proto__:null,minArray:X,maxArray:function(e){return Math.max.apply(null,e)},equal:U,moreEqual:function(e,t,r=5){return e>t||U(e,t,r)},lessEqual:function(e,t,r=5){return e<t||U(e,t,r)},truncate:Y,truncateFraction:q,truncateTrailingZero:Z,truncateString:function(e,t=3){let r=H[t];if(!r)r=new RegExp(`(-?\\d+\\.\\d{${t}})(\\d)\\d*`,"g"),H[t]=r;let n,i=e;while(n=r.exec(e)){let e=n[1];if(parseInt(n[2])>=5)e=q(parseFloat(e)+1/Math.pow(10,t)).toString();i=i.replace(n[0],Z(e))}return r.lastIndex=0,i},convertRadian:K,triangulate:function(e,t,r){const n=180-e-t;return[r/Math.sin(K(n))*Math.sin(K(e)),r/Math.sin(K(n))*Math.sin(K(t))]},absoluteAngle:Q,relativeAngle:function(e,t,r=90){let n=Q(e,t)+r;if(n<0)n+=360;return n},offsetAngleX:function(e,t){return t*Math.sin(K(e))},offsetAngleY:function(e,t){return t*Math.cos(K(e))*-1},clamp:J,multipleOf:function(e,t=0,r){const n=e.length;if(n>1){const i=X(e);if((null==r?void 0:r.length)===n){let i=0;while(i<n)t=Math.max(t,r[i]+e[i++])}else r=void 0,t=Math.max(t,i);let a=0;while(a<t)a+=i;const s=(null==r?void 0:r[0])||0;let l=false;while(!l){const t=s+a;let o=1;while(o<n){if(t%((r?r[o]:0)+e[o++])==0)l=true;else{l=false,a+=i;break}}}return s+a}return e[0]},sin:ee,cos:te,tan:function(e,t=11){return ee(e,t)/te(e,t)},factorial:re,hypotenuse:function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}});const ie=[{value:"#000000",key:"black",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0}},{value:"#696969",key:"dimgray",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#696969",key:"dimgrey",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#808080",key:"gray",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#808080",key:"grey",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#A9A9A9",key:"darkgray",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#A9A9A9",key:"darkgrey",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#C0C0C0",key:"silver",rgb:{r:192,g:192,b:192},hsl:{h:0,s:0,l:75}},{value:"#D3D3D3",key:"lightgray",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#D3D3D3",key:"lightgrey",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#DCDCDC",key:"gainsboro",rgb:{r:220,g:220,b:220},hsl:{h:0,s:0,l:86}},{value:"#F5F5F5",key:"whitesmoke",rgb:{r:245,g:245,b:245},hsl:{h:0,s:0,l:96}},{value:"#FFFFFF",key:"white",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100}},{value:"#BC8F8F",key:"rosybrown",rgb:{r:188,g:143,b:143},hsl:{h:0,s:25,l:65}},{value:"#CD5C5C",key:"indianred",rgb:{r:205,g:92,b:92},hsl:{h:0,s:53,l:58}},{value:"#A52A2A",key:"brown",rgb:{r:165,g:42,b:42},hsl:{h:0,s:59,l:41}},{value:"#B22222",key:"firebrick",rgb:{r:178,g:34,b:34},hsl:{h:0,s:68,l:42}},{value:"#F08080",key:"lightcoral",rgb:{r:240,g:128,b:128},hsl:{h:0,s:79,l:72}},{value:"#800000",key:"maroon",rgb:{r:128,g:0,b:0},hsl:{h:0,s:100,l:25}},{value:"#8B0000",key:"darkred",rgb:{r:139,g:0,b:0},hsl:{h:0,s:100,l:27}},{value:"#FF0000",key:"red",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50}},{value:"#FFFAFA",key:"snow",rgb:{r:255,g:250,b:250},hsl:{h:0,s:100,l:99}},{value:"#FFE4E1",key:"mistyrose",rgb:{r:255,g:228,b:225},hsl:{h:6,s:100,l:94}},{value:"#FA8072",key:"salmon",rgb:{r:250,g:128,b:114},hsl:{h:6,s:93,l:71}},{value:"#FF6347",key:"tomato",rgb:{r:255,g:99,b:71},hsl:{h:9,s:100,l:64}},{value:"#E9967A",key:"darksalmon",rgb:{r:233,g:150,b:122},hsl:{h:15,s:72,l:70}},{value:"#FF7F50",key:"coral",rgb:{r:255,g:127,b:80},hsl:{h:16,s:100,l:66}},{value:"#FF4500",key:"orangered",rgb:{r:255,g:69,b:0},hsl:{h:16,s:100,l:50}},{value:"#FFA07A",key:"lightsalmon",rgb:{r:255,g:160,b:122},hsl:{h:17,s:100,l:74}},{value:"#A0522D",key:"sienna",rgb:{r:160,g:82,b:45},hsl:{h:19,s:56,l:40}},{value:"#FFF5EE",key:"seashell",rgb:{r:255,g:245,b:238},hsl:{h:25,s:100,l:97}},{value:"#D2691E",key:"chocolate",rgb:{r:210,g:105,b:30},hsl:{h:25,s:75,l:47}},{value:"#8B4513",key:"saddlebrown",rgb:{r:139,g:69,b:19},hsl:{h:25,s:76,l:31}},{value:"#F4A460",key:"sandybrown",rgb:{r:244,g:164,b:96},hsl:{h:28,s:87,l:67}},{value:"#FFDAB9",key:"peachpuff",rgb:{r:255,g:218,b:185},hsl:{h:28,s:100,l:86}},{value:"#CD853F",key:"peru",rgb:{r:205,g:133,b:63},hsl:{h:30,s:59,l:53}},{value:"#FAF0E6",key:"linen",rgb:{r:250,g:240,b:230},hsl:{h:30,s:67,l:94}},{value:"#FFE4C4",key:"bisque",rgb:{r:255,g:228,b:196},hsl:{h:33,s:100,l:88}},{value:"#FF8C00",key:"darkorange",rgb:{r:255,g:140,b:0},hsl:{h:33,s:100,l:50}},{value:"#DEB887",key:"burlywood",rgb:{r:222,g:184,b:135},hsl:{h:34,s:57,l:70}},{value:"#FAEBD7",key:"antiquewhite",rgb:{r:250,g:235,b:215},hsl:{h:34,s:78,l:91}},{value:"#D2B48C",key:"tan",rgb:{r:210,g:180,b:140},hsl:{h:34,s:44,l:69}},{value:"#FFDEAD",key:"navajowhite",rgb:{r:255,g:222,b:173},hsl:{h:36,s:100,l:84}},{value:"#FFEBCD",key:"blanchedalmond",rgb:{r:255,g:235,b:205},hsl:{h:36,s:100,l:90}},{value:"#FFEFD5",key:"papayawhip",rgb:{r:255,g:239,b:213},hsl:{h:37,s:100,l:92}},{value:"#FFE4B5",key:"moccasin",rgb:{r:255,g:228,b:181},hsl:{h:38,s:100,l:85}},{value:"#FFA500",key:"orange",rgb:{r:255,g:165,b:0},hsl:{h:39,s:100,l:50}},{value:"#F5DEB3",key:"wheat",rgb:{r:245,g:222,b:179},hsl:{h:39,s:77,l:83}},{value:"#FDF5E6",key:"oldlace",rgb:{r:253,g:245,b:230},hsl:{h:39,s:85,l:95}},{value:"#FFFAF0",key:"floralwhite",rgb:{r:255,g:250,b:240},hsl:{h:40,s:100,l:97}},{value:"#B8860B",key:"darkgoldenrod",rgb:{r:184,g:134,b:11},hsl:{h:43,s:89,l:38}},{value:"#DAA520",key:"goldenrod",rgb:{r:218,g:165,b:32},hsl:{h:43,s:74,l:49}},{value:"#FFF8DC",key:"cornsilk",rgb:{r:255,g:248,b:220},hsl:{h:48,s:100,l:93}},{value:"#FFD700",key:"gold",rgb:{r:255,g:215,b:0},hsl:{h:51,s:100,l:50}},{value:"#FFFACD",key:"lemonchiffon",rgb:{r:255,g:250,b:205},hsl:{h:54,s:100,l:90}},{value:"#F0E68C",key:"khaki",rgb:{r:240,g:230,b:140},hsl:{h:54,s:77,l:75}},{value:"#EEE8AA",key:"palegoldenrod",rgb:{r:238,g:232,b:170},hsl:{h:55,s:67,l:80}},{value:"#BDB76B",key:"darkkhaki",rgb:{r:189,g:183,b:107},hsl:{h:56,s:38,l:58}},{value:"#F5F5DC",key:"beige",rgb:{r:245,g:245,b:220},hsl:{h:60,s:56,l:91}},{value:"#FAFAD2",key:"lightgoldenrodyellow",rgb:{r:250,g:250,b:210},hsl:{h:60,s:80,l:90}},{value:"#808000",key:"olive",rgb:{r:128,g:128,b:0},hsl:{h:60,s:100,l:25}},{value:"#FFFF00",key:"yellow",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50}},{value:"#FFFFE0",key:"lightyellow",rgb:{r:255,g:255,b:224},hsl:{h:60,s:100,l:94}},{value:"#FFFFF0",key:"ivory",rgb:{r:255,g:255,b:240},hsl:{h:60,s:100,l:97}},{value:"#6B8E23",key:"olivedrab",rgb:{r:107,g:142,b:35},hsl:{h:80,s:60,l:35}},{value:"#9ACD32",key:"yellowgreen",rgb:{r:154,g:205,b:50},hsl:{h:80,s:61,l:50}},{value:"#556B2F",key:"darkolivegreen",rgb:{r:85,g:107,b:47},hsl:{h:82,s:39,l:30}},{value:"#ADFF2F",key:"greenyellow",rgb:{r:173,g:255,b:47},hsl:{h:84,s:100,l:59}},{value:"#7FFF00",key:"chartreuse",rgb:{r:127,g:255,b:0},hsl:{h:90,s:100,l:50}},{value:"#7CFC00",key:"lawngreen",rgb:{r:124,g:252,b:0},hsl:{h:90,s:100,l:49}},{value:"#8FBC8F",key:"darkseagreen",rgb:{r:143,g:188,b:143},hsl:{h:120,s:25,l:65}},{value:"#228B22",key:"forestgreen",rgb:{r:34,g:139,b:34},hsl:{h:120,s:61,l:34}},{value:"#32CD32",key:"limegreen",rgb:{r:50,g:205,b:50},hsl:{h:120,s:61,l:50}},{value:"#90EE90",key:"lightgreen",rgb:{r:144,g:238,b:144},hsl:{h:120,s:73,l:75}},{value:"#98FB98",key:"palegreen",rgb:{r:152,g:251,b:152},hsl:{h:120,s:93,l:79}},{value:"#006400",key:"darkgreen",rgb:{r:0,g:100,b:0},hsl:{h:120,s:100,l:20}},{value:"#008000",key:"green",rgb:{r:0,g:128,b:0},hsl:{h:120,s:100,l:25}},{value:"#00FF00",key:"lime",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50}},{value:"#F0FFF0",key:"honeydew",rgb:{r:240,g:255,b:240},hsl:{h:120,s:100,l:97}},{value:"#2E8B57",key:"seagreen",rgb:{r:46,g:139,b:87},hsl:{h:146,s:50,l:36}},{value:"#3CB371",key:"mediumseagreen",rgb:{r:60,g:179,b:113},hsl:{h:147,s:50,l:47}},{value:"#00FF7F",key:"springgreen",rgb:{r:0,g:255,b:127},hsl:{h:150,s:100,l:50}},{value:"#F5FFFA",key:"mintcream",rgb:{r:245,g:255,b:250},hsl:{h:150,s:100,l:98}},{value:"#00FA9A",key:"mediumspringgreen",rgb:{r:0,g:250,b:154},hsl:{h:157,s:100,l:49}},{value:"#66CDAA",key:"mediumaquamarine",rgb:{r:102,g:205,b:170},hsl:{h:160,s:51,l:60}},{value:"#7FFFD4",key:"aquamarine",rgb:{r:127,g:255,b:212},hsl:{h:160,s:100,l:75}},{value:"#40E0D0",key:"turquoise",rgb:{r:64,g:224,b:208},hsl:{h:174,s:72,l:56}},{value:"#20B2AA",key:"lightseagreen",rgb:{r:32,g:178,b:170},hsl:{h:177,s:70,l:41}},{value:"#48D1CC",key:"mediumturquoise",rgb:{r:72,g:209,b:204},hsl:{h:178,s:60,l:55}},{value:"#2F4F4F",key:"darkslategray",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#2F4F4F",key:"darkslategrey",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#AFEEEE",key:"paleturquoise",rgb:{r:175,g:238,b:238},hsl:{h:180,s:65,l:81}},{value:"#008080",key:"teal",rgb:{r:0,g:128,b:128},hsl:{h:180,s:100,l:25}},{value:"#008B8B",key:"darkcyan",rgb:{r:0,g:139,b:139},hsl:{h:180,s:100,l:27}},{value:"#00FFFF",key:"aqua",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#00FFFF",key:"cyan",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#E0FFFF",key:"lightcyan",rgb:{r:224,g:255,b:255},hsl:{h:180,s:100,l:94}},{value:"#F0FFFF",key:"azure",rgb:{r:240,g:255,b:255},hsl:{h:180,s:100,l:97}},{value:"#00CED1",key:"darkturquoise",rgb:{r:0,g:206,b:209},hsl:{h:181,s:100,l:41}},{value:"#5F9EA0",key:"cadetblue",rgb:{r:95,g:158,b:160},hsl:{h:182,s:25,l:50}},{value:"#B0E0E6",key:"powderblue",rgb:{r:176,g:224,b:230},hsl:{h:187,s:52,l:80}},{value:"#ADD8E6",key:"lightblue",rgb:{r:173,g:216,b:230},hsl:{h:195,s:53,l:79}},{value:"#00BFFF",key:"deepskyblue",rgb:{r:0,g:191,b:255},hsl:{h:195,s:100,l:50}},{value:"#87CEEB",key:"skyblue",rgb:{r:135,g:206,b:235},hsl:{h:197,s:71,l:73}},{value:"#87CEFA",key:"lightskyblue",rgb:{r:135,g:206,b:250},hsl:{h:203,s:92,l:75}},{value:"#4682B4",key:"steelblue",rgb:{r:70,g:130,b:180},hsl:{h:207,s:44,l:49}},{value:"#F0F8FF",key:"aliceblue",rgb:{r:240,g:248,b:255},hsl:{h:208,s:100,l:97}},{value:"#1E90FF",key:"dodgerblue",rgb:{r:30,g:144,b:255},hsl:{h:210,s:100,l:56}},{value:"#708090",key:"slategray",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#708090",key:"slategrey",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#778899",key:"lightslategray",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#778899",key:"lightslategrey",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#B0C4DE",key:"lightsteelblue",rgb:{r:176,g:196,b:222},hsl:{h:214,s:41,l:78}},{value:"#6495ED",key:"cornflower",rgb:{r:100,g:149,b:237},hsl:{h:219,s:79,l:66}},{value:"#4169E1",key:"royalblue",rgb:{r:65,g:105,b:225},hsl:{h:225,s:73,l:57}},{value:"#191970",key:"midnightblue",rgb:{r:25,g:25,b:112},hsl:{h:240,s:64,l:27}},{value:"#E6E6FA",key:"lavender",rgb:{r:230,g:230,b:250},hsl:{h:240,s:67,l:94}},{value:"#000080",key:"navy",rgb:{r:0,g:0,b:128},hsl:{h:240,s:100,l:25}},{value:"#00008B",key:"darkblue",rgb:{r:0,g:0,b:139},hsl:{h:240,s:100,l:27}},{value:"#0000CD",key:"mediumblue",rgb:{r:0,g:0,b:205},hsl:{h:240,s:100,l:40}},{value:"#0000FF",key:"blue",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50}},{value:"#F8F8FF",key:"ghostwhite",rgb:{r:248,g:248,b:255},hsl:{h:240,s:100,l:99}},{value:"#6A5ACD",key:"slateblue",rgb:{r:106,g:90,b:205},hsl:{h:248,s:53,l:58}},{value:"#483D8B",key:"darkslateblue",rgb:{r:72,g:61,b:139},hsl:{h:248,s:39,l:39}},{value:"#7B68EE",key:"mediumslateblue",rgb:{r:123,g:104,b:238},hsl:{h:249,s:80,l:67}},{value:"#9370DB",key:"mediumpurple",rgb:{r:147,g:112,b:219},hsl:{h:260,s:60,l:65}},{value:"#8A2BE2",key:"blueviolet",rgb:{r:138,g:43,b:226},hsl:{h:271,s:76,l:53}},{value:"#4B0082",key:"indigo",rgb:{r:75,g:0,b:130},hsl:{h:275,s:100,l:25}},{value:"#9932CC",key:"darkorchid",rgb:{r:153,g:50,b:204},hsl:{h:280,s:61,l:50}},{value:"#9400D3",key:"darkviolet",rgb:{r:148,g:0,b:211},hsl:{h:282,s:100,l:41}},{value:"#BA55D3",key:"mediumorchid",rgb:{r:186,g:85,b:211},hsl:{h:288,s:59,l:58}},{value:"#D8BFD8",key:"thistle",rgb:{r:216,g:191,b:216},hsl:{h:300,s:24,l:80}},{value:"#DDA0DD",key:"plum",rgb:{r:221,g:160,b:221},hsl:{h:300,s:47,l:75}},{value:"#EE82EE",key:"violet",rgb:{r:238,g:130,b:238},hsl:{h:300,s:76,l:72}},{value:"#800080",key:"purple",rgb:{r:128,g:0,b:128},hsl:{h:300,s:100,l:25}},{value:"#8B008B",key:"darkmagenta",rgb:{r:139,g:0,b:139},hsl:{h:300,s:100,l:27}},{value:"#FF00FF",key:"fuchsia",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#FF00FF",key:"magenta",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#DA70D6",key:"orchid",rgb:{r:218,g:112,b:214},hsl:{h:302,s:59,l:65}},{value:"#C71585",key:"mediumvioletred",rgb:{r:199,g:21,b:133},hsl:{h:322,s:81,l:43}},{value:"#FF1493",key:"deeppink",rgb:{r:255,g:20,b:147},hsl:{h:328,s:100,l:54}},{value:"#FF69B4",key:"hotpink",rgb:{r:255,g:105,b:180},hsl:{h:330,s:100,l:71}},{value:"#FFF0F5",key:"lavenderblush",rgb:{r:255,g:240,b:245},hsl:{h:340,s:100,l:97}},{value:"#DB7093",key:"palevioletred",rgb:{r:219,g:112,b:147},hsl:{h:340,s:60,l:65}},{value:"#DC143C",key:"crimson",rgb:{r:220,g:20,b:60},hsl:{h:348,s:83,l:47}},{value:"#FFC0CB",key:"pink",rgb:{r:255,g:192,b:203},hsl:{h:350,s:100,l:88}},{value:"#FFB6C1",key:"lightpink",rgb:{r:255,g:182,b:193},hsl:{h:351,s:100,l:86}}],ae={};function se(e,t,r){if(e<0)e+=1;else if(e>1)e-=1;if(e<1/6)return t+6*(r-t)*e;else if(e<.5)return r;else if(e<2/3)return t+(r-t)*(2/3-e)*6;return t}const le=e=>parseFloat(e)/(e.includes("%")?100:1),oe=e=>255*J(e);function ce(e){e=e.toLowerCase();const t=ie.length;let r=0;while(r<t){const t=ie[r++];if(t.key===e)return t}}function ue(e,t=1,r){if(e&&("transparent"!==e||r)){let n=ae[e];if(n)return n;let i,s="";if("#"===e.charAt(0))i=fe(e);else{let r=a.RGBA.exec(e);if(r)i={r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:r[4]?255*le(r[4]):oe(t)};else if(r=a.HSLA.exec(e),r)i=de({h:parseInt(r[1]),s:parseInt(r[2]),l:parseInt(r[3]),a:J(r[4]?le(r[4]):t)});else switch(e){case"transparent":i={r:0,g:0,b:0,a:0},s="transparent";break;case"initial":i={r:0,g:0,b:0,a:255},s="black";break;default:{const r=ce(e);if(r)i=Object.assign(Object.assign({},r.rgb),{a:oe(t)}),s=e;break}}}if(i){const a=i.a;if(a>0||r){const r=he(i.r,i.g,i.b),l=he(a),o="#"+(r+l);if(ae[o])return ae[o];if(t=a/255,n={key:s,value:e="#"+r,valueAsRGBA:o,valueAsARGB:"#"+(l+r),rgba:i,hsl:ge(i),opacity:t,transparent:0===t},1===t)ae[e]=n;return ae[o]=n,n}}}}function he(...e){let t="",r=0;while(r<e.length){const n=Math.max(0,Math.min(e[r++],255));t+=isNaN(n)?"00":"0123456789ABCDEF".charAt((n-n%16)/16)+"0123456789ABCDEF".charAt(n%16)}return t}function fe(e){if(a.HEX.test(e)){let t=255;switch((e=e.substring(1)).length){case 4:t=parseInt(e.charAt(3).repeat(2),16);case 3:e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2);break;case 5:e+=e.charAt(4);break;default:if(e.length>=8)t=parseInt(e.substring(6,8),16);e=e.substring(0,6);break}if(6===e.length)return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16),a:t}}}function ge(e){const t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n);let s=(a+i)/2;const l=s;let o;if(a===i)s=0,o=0;else{const e=a-i;switch(o=l>.5?e/(2-a-i):e/(a+i),a){case t:s=(r-n)/e+(r<n?6:0);break;case r:s=(n-t)/e+2;break;case n:s=(t-r)/e+4;break}s/=6}return{h:Math.round(360*s),s:Math.round(100*o),l:Math.round(100*l),a:e.a/255}}function de(e){let t,r,n,{h:i,s:a,l:s,a:l}=e;if(i/=360,a/=100,s/=100,0===a)t=s,r=s,n=s;else{const e=s<.5?s*(1+a):s+a-s*a,l=2*s-e;t=se(i+1/3,l,e),r=se(i,l,e),n=se(i-1/3,l,e)}return t=Math.round(255*Math.min(t,1)),r=Math.round(255*Math.min(r,1)),n=Math.round(255*Math.min(n,1)),l=Math.round(255*Math.min(l,1)),{r:t,g:r,b:n,a:l}}function pe(e){return`rgb${e.a<255?"a":""}(${e.r}, ${e.g}, ${e.b}`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}var be=Object.freeze({__proto__:null,findColorName:ce,findColorShade:function(e){const t=fe(e);if(t){const r=ge(t),n=[];let i=-1;const a=ie.length;let s=0;while(s<a){const t=ie[s++];if(t.value===e)return t;else if(-1!==i){if(i===t.hsl.h)n.push(t)}else if(r.h<=t.hsl.h)n.push(t),i=t.hsl.h}const l=n.length;if(1===l)return n[0];else if(l>1){const e=r.l+r.s;let t=1/0,i=-1;for(s=0;s<l;++s){const{l:r,s:a}=n[s].hsl,l=Math.abs(e-(r+a));if(l<t)t=l,i=s}return n[i]}else return ie[ie.length-1]}},parseColor:ue,reduceRGBA:function(e,t,r){if(r){const e=ae[r+="_"+t];if(e)return e}let{r:n,g:i,b:a}=e;if(0===n&&0===i&&0===a)if(n=255,i=255,a=255,t>0)t*=-1;const s=t<0?0:255;t=Math.abs(t);const l=ue(pe({r:(n+Math.round((s-n)*t))%255,g:(i+Math.round((s-i)*t))%255,b:(a+Math.round((s-a)*t))%255,a:e.a}));if(r)ae[r]=l;return l},getHexCode:he,convertHex:function(e){return"#"+he(e.r,e.g,e.b)+(e.a<255?he(e.a):"")},parseRGBA:fe,convertHSLA:ge,convertRGBA:de,formatRGBA:pe,formatHSLA:function(e){return`hsl${e.a<255?"a":""}(${e.h}, ${e.s}%, ${e.l}%`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}});const me=`(\\(\\s*(?:orientation:\\s*(?:portrait|landscape)|(?:max|min)-width:\\s*${n.LENGTH_PERCENTAGE})\\s*\\))`,ve=new RegExp(`^${n.LENGTH}$`),we=new RegExp(`^${n.PERCENT}$`),ye=new RegExp(`^${n.LENGTH_PERCENTAGE}$`),ke=new RegExp(`^${n.CSS_ANGLE}$`),xe=new RegExp(`^${n.CSS_TIME}$`),Ee=new RegExp(`^${n.CSS_CALC}$`),Se=new RegExp(n.CSS_CALC),Ae=new RegExp(`\\s*(?:(\\(\\s*)?${me}|(\\(\\s*))?\\s*(and|or|not)?\\s*(?:${me}(\\s*\\))?)?\\s*(.+)`),Ce=/\s+/,Re=/\s*,\s*/,Fe=/\s*\/\s*/;function Te(e,t,r){switch(e){case"<=":return t<=r;case"<":return t<r;case">=":return t>=r;case">":return t>r;default:return t===r}}function Le(e,t,r){const n=[];for(const e of z(w(t.trim(),"calc"),e=>e.trim()))if(e.includes(" ")&&!pt(e))n.push(...e.split(Ce));else n.push(e);const i=n.length;switch(i){case 1:case 2:return it(e,n.join(" "),{dimension:["width","height"],boundingBox:r,parent:false});case 3:case 4:{let t=0,a=0;for(let s=0;s<i;++s){const l=n[s];switch(l){case"top":case"bottom":if(2==++a)return"";break;case"center":if(4===i)return"";break;case"left":case"right":if(2==++t)return"";break;default:{let t;switch(n[s-1]){case"top":case"bottom":t="height";break;case"left":case"right":t="width";break;default:return""}if(pt(l)){const i=He(at(e,l,{dimension:t,boundingBox:r}));if(""!==i)n[s]=i;else return""}break}}}return n.join(" ")}}return""}function Ie(e,t){const r=w(t),n=r.length;if(n>1){for(let t=1;t<n;++t){const n=r[t].trim();if(yt(n)){const i=r[t-1].trim();if(Ve(i)){const a=Ue(n).split(Re),s=a.length;if(s>=3){const n=i.startsWith("hsl");for(let t=0;t<s;++t){const r=a[t];if(pt(r))if(n&&(1===t||2===t)){const n=at(e,r,{unitType:4,supportPercent:true});if(!isNaN(n))a[t]=J(n,0,100)+"%";else return""}else if(3===t){const n=r.includes("%");let i=at(e,r,n?{unitType:4}:{unitType:64});if(!isNaN(i)){if(n)i/=100;a[t]=J(i).toString()}else return""}else{const n=at(e,r,{unitType:64,supportPercent:false});if(!isNaN(n))a[t]=J(n,0,255).toString();else return""}}r[t]=`(${a.join(", ")})`;continue}}return""}}return r.join("")}return t}function Ne(e,t,r,n,i,a="width"){const s=w(t,"calc"),l=s.length;for(let t=0;t<l;++t){const l=s[t];if(pt(l)){const o=ve.test(l),c=at(e,l,o?{dimension:a,boundingBox:i,min:0,parent:false}:{unitType:r,min:n,supportPercent:false});if(!isNaN(c))s[t]=c+(o?"px":"");else return""}}return s.join("").trim()}function Pe(e){switch(e){case"vertical-lr":return 1;case"vertical-rl":return 2;default:return 0}}function Me(e){switch(e){case"none":case"initial":case"hidden":return false;default:return true}}function Be(e){return(Me(e.getPropertyValue("border-left-style"))?parseFloat(e.getPropertyValue("border-left-width")):0)+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))+(Me(e.getPropertyValue("border-right-style"))?parseFloat(e.getPropertyValue("border-right-width")):0)}function _e(e){return(Me(e.getPropertyValue("border-top-style"))?parseFloat(e.getPropertyValue("border-top-width")):0)+parseFloat(e.getPropertyValue("padding-top"))+parseFloat(e.getPropertyValue("padding-bottom"))+(Me(e.getPropertyValue("border-bottom-style"))?parseFloat(e.getPropertyValue("border-bottom-width")):0)}function De(e=["left","top"]){return{static:true,top:0,left:0,right:0,bottom:0,topAsPercent:0,leftAsPercent:0,rightAsPercent:0,bottomAsPercent:0,horizontal:"left",vertical:"top",orientation:e}}function Oe(e,t){if(e)switch(t){case"+":case"-":if(k(e))return false;break;case"*":case"/":if(!k(e))return false;break}return true}function ze(e,t){if(e)switch(t){case"+":case"-":return false}return true}const $e=e=>(null==e?void 0:e.width)||window.innerWidth,We=e=>(null==e?void 0:e.height)||window.innerHeight,je=(e,t,r,n)=>wt(e)?Math.round(b(e)/100*t):ct(e,r,n),Ge=(e,t,r,n)=>wt(e)?parseFloat(e)/100:ct(e,r,n)/t,Ve=e=>/(rgb|hsl)a?/.test(e),He=e=>!isNaN(e)?e+"px":"",Xe=e=>!isNaN(e)?e.toString():"",Ue=e=>e.substring(1,e.length-1),Ye=e=>/^\*(\s+\*){0,2}$/.test(e)?"*":e.replace(/^(\*\s+){1,2}/,"");function qe(e,t=""){if(e){const r=e["__style"+t];if(r)return r;if(Ke(e)){const r=getComputedStyle(e,t);return e["__style"+t]=r,r}return{position:"static",display:"inline"}}return{position:"static",display:"none"}}function Ze(e){if("#"===e.nodeName.charAt(0))e=e.parentElement||document.documentElement;return parseFloat(qe(e).getPropertyValue("font-size"))}function Ke(e){return"#"!==e.nodeName.charAt(0)&&(e instanceof HTMLElement||e instanceof SVGElement)}function Qe(e,t){switch(e){case"inlineSize":return 0===Pe(t)?"width":"height";case"blockSize":return 0===Pe(t)?"height":"width";case"maxInlineSize":return 0===Pe(t)?"maxWidth":"maxHeight";case"maxBlockSize":return 0===Pe(t)?"maxHeight":"maxWidth";case"minInlineSize":return 0===Pe(t)?"minWidth":"minHeight";case"minBlockSize":return 0===Pe(t)?"minHeight":"minWidth";case"borderInlineStart":return 0===Pe(t)?"borderLeft":"borderTop";case"borderInlineEnd":return 0===Pe(t)?"borderRight":"borderBottom";case"borderInlineStartWidth":return 0===Pe(t)?"borderLeftWidth":"borderTopWidth";case"borderInlineEndWidth":return 0===Pe(t)?"borderRightWidth":"borderBottomWidth";case"insetInlineStart":return 0===Pe(t)?"left":"top";case"insetInlineEnd":return 0===Pe(t)?"right":"bottom";case"marginInlineStart":return 0===Pe(t)?"marginLeft":"marginTop";case"marginInlineEnd":return 0===Pe(t)?"marginRight":"marginBottom";case"paddingInlineStart":return 0===Pe(t)?"paddingLeft":"paddingTop";case"paddingInlineEnd":return 0===Pe(t)?"paddingRight":"paddingBottom";case"scrollMarginInlineStart":return 0===Pe(t)?"scrollMarginLeft":"scrollMarginTop";case"scrollMarginInlineEnd":return 0===Pe(t)?"scrollMarginRight":"scrollMarginBottom";case"scrollPaddingInlineStart":return 0===Pe(t)?"scrollPaddingLeft":"scrollPaddingTop";case"scrollPaddingInlineEnd":return 0===Pe(t)?"scrollPaddingRight":"scrollPaddingBottom";case"borderBlockStart":switch(Pe(t)){case 0:return"borderTop";case 1:return"borderLeft";case 2:return"borderRight"}case"borderBlockEnd":switch(Pe(t)){case 0:return"borderBottom";case 1:return"borderRight";case 2:return"borderLeft"}case"borderBlockStartWidth":switch(Pe(t)){case 0:return"borderTopWidth";case 1:return"borderLeftWidth";case 2:return"borderRightWidth"}case"borderBlockEndWidth":switch(Pe(t)){case 0:return"borderBottomWidth";case 1:return"borderRightWidth";case 2:return"borderLeftWidth"}case"insetBlockStart":switch(Pe(t)){case 0:return"top";case 1:return"left";case 2:return"right"}case"insetBlockEnd":switch(Pe(t)){case 0:return"bottom";case 1:return"right";case 2:return"left"}case"marginBlockStart":switch(Pe(t)){case 0:return"marginTop";case 1:return"marginLeft";case 2:return"marginRight"}case"marginBlockEnd":switch(Pe(t)){case 0:return"marginBottom";case 1:return"marginRight";case 2:return"marginLeft"}case"paddingBlockStart":switch(Pe(t)){case 0:return"paddingTop";case 1:return"paddingLeft";case 2:return"paddingRight"}case"paddingBlockEnd":switch(Pe(t)){case 0:return"paddingBottom";case 1:return"paddingRight";case 2:return"paddingLeft"}case"scrollMarginBlockStart":switch(Pe(t)){case 0:return"scrollMarginTop";case 1:return"scrollMarginLeft";case 2:return"scrollMarginRight"}case"scrollMarginBlockEnd":switch(Pe(t)){case 0:return"scrollMarginBottom";case 1:return"scrollMarginRight";case 2:return"scrollMarginLeft"}case"scrollPaddingBlockStart":switch(Pe(t)){case 0:return"scrollPaddingTop";case 1:return"scrollPaddingLeft";case 2:return"scrollPaddingRight"}case"scrollPaddingBlockEnd":switch(Pe(t)){case 0:return"scrollPaddingBottom";case 1:return"scrollPaddingRight";case 2:return"scrollPaddingLeft"}}return""}function Je(e,t,r,n){switch(t){case"left":case"right":case"textIndent":return He(at(e,r,{dimension:"width",boundingBox:n}));case"columnWidth":case"marginBottom":case"marginLeft":case"marginRight":case"marginTop":case"maxWidth":case"minWidth":case"paddingBottom":case"paddingLeft":case"paddingRight":case"paddingTop":case"scrollMarginBottom":case"scrollMarginLeft":case"scrollMarginRight":case"scrollMarginTop":case"scrollPaddingBottom":case"scrollPaddingLeft":case"scrollPaddingRight":case"scrollPaddingTop":case"width":return He(at(e,r,{dimension:"width",boundingBox:n,min:0}));case"columnGap":case"gridColumnGap":case"shapeMargin":return He(at(e,r,{dimension:"width",boundingBox:n,min:0,parent:false}));case"bottom":case"top":case"verticalAlign":return He(at(e,r,{dimension:"height",boundingBox:n}));case"height":case"maxHeight":case"minHeight":return He(at(e,r,{dimension:"height",boundingBox:n,min:0}));case"gridRowGap":case"rowGap":return He(at(e,r,{dimension:"height",boundingBox:n,min:0,parent:false}));case"flexBasis":{const t=e.parentElement;return He(at(e,r,{dimension:!!t&&qe(t).flexDirection.includes("column")?"height":"width",boundingBox:n,min:0}))}case"borderBottomWidth":case"borderLeftWidth":case"borderRightWidth":case"borderTopWidth":case"columnRuleWidth":case"letterSpacing":case"outlineOffset":case"outlineWidth":case"perspective":case"wordSpacing":return He(at(e,r,{min:0,supportPercent:false}));case"offsetDistance":{let t=0;if(r.includes("%")){const r=qe(e).getPropertyValue("offset-path");if("none"!==r){const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",r),t=e.getTotalLength()}}return He(at(e,r,{boundingSize:t}))}case"lineHeight":return He(at(e,r,{boundingSize:Ze(e),min:0}));case"fontSize":return He(at(e,r,{boundingSize:Ze(e.parentElement||document.documentElement),min:0}));case"margin":return it(e,r,{dimension:"width",boundingBox:n});case"borderBottomLeftRadius":case"borderBottomRightRadius":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderRadius":case"padding":case"scrollMargin":case"scrollMarginBlock":case"scrollMarginInline":case"scrollPadding":case"scrollPaddingBlock":case"scrollPaddingInline":return it(e,r,{dimension:"width",boundingBox:n,min:0});case"objectPosition":return it(e,r,{dimension:["width","height"],boundingBox:n});case"gap":case"gridGap":case"perspectiveOrigin":return it(e,r,{dimension:["width","height"],boundingBox:n,min:"perspectiveOrigin"===t?void 0:0,parent:false});case"borderImageOutset":case"borderImageWidth":return it(e,r,{dimension:["height","width","height","width"],boundingBox:n,min:0,parent:false});case"borderWidth":case"borderSpacing":return it(e,r,{min:0,supportPercent:false});case"gridAutoColumns":case"gridTemplateColumns":return Ne(e,r,32,1,n);case"gridAutoRows":case"gridTemplateRows":return Ne(e,r,32,1,n,"height");case"zIndex":return Xe(at(e,r,{unitType:32}));case"tabSize":return Xe(at(e,r,{unitType:32,min:0}));case"columnCount":case"fontWeight":case"widows":return Xe(at(e,r,{unitType:32,min:1}));case"gridRow":case"gridRowEnd":case"gridRowStart":case"gridColumn":case"gridColumnEnd":case"gridColumnStart":case"counterIncrement":case"counterReset":return it(e,r,{unitType:32});case"gridArea":return it(e,r,{unitType:32,min:1});case"flexGrow":case"flexShrink":return Xe(at(e,r,{unitType:64,min:0}));case"animationIterationCount":case"fontSizeAdjust":return Xe(at(e,r,{unitType:64,min:0,supportPercent:false}));case"opacity":case"shapeImageThreshold":{const t=r.includes("%"),n=at(e,r,{unitType:t?4:64});return!isNaN(n)?J(n/(t?100:1)).toString():""}case"fontStretch":return it(e,r,{unitType:4,min:0,supportPercent:true});case"fontStyle":case"offsetRotate":return it(e,r,{unitType:16,supportPercent:false});case"offsetAnchor":case"transformOrigin":return Le(e,r,n);case"transform":{const t=w(r=r.trim()),i=t.length;if(i>1){for(let r=1;r<i;++r){let i=t[r];if(yt(i)){let a;switch(i=Ue(i),t[r-1].trim()){case"matrix":case"matrix3d":a=it(e,i,{unitType:64,supportPercent:false});break;case"scaleX":case"scaleY":case"scaleZ":{const t=at(e,i,{unitType:64,min:0,supportPercent:false});if(!isNaN(t))a=t.toString();break}case"scale":case"scale3d":a=it(e,i,{unitType:64,min:0,supportPercent:false});break;case"translateX":a=He(at(e,i,{dimension:"width",boundingBox:n,parent:true}));break;case"translateY":a=He(at(e,i,{dimension:"height",boundingBox:n,parent:true}));break;case"translateZ":case"perspective":a=He(at(e,i,{supportPercent:false}));break;case"translate":case"translate3d":a=it(e,i,{dimension:["width","height"],boundingBox:n,parent:true});break;case"skew":case"rotate":a=it(e,i,{unitType:16,supportPercent:false});break;case"skewX":case"skewY":case"rotateX":case"rotateY":case"rotateZ":{const t=at(e,i,{unitType:16,supportPercent:false});if(!isNaN(t))a=t+"deg";break}case"rotate3d":{const t=i.split(Re),r=t.length;if(3===r||4===r){a="";for(let n=0;n<r;++n){let r=t[n];if(pt(r)){const t=at(e,r,{unitType:3===n?16:64,supportPercent:false});if(!isNaN(t))r=t+(3===n?"deg":"");else return""}a+=(""!==a?", ":"")+r}}break}}if(a)t[r]=`(${a})`;else return""}}return t.join("")}return r}case"backgroundImage":case"borderImageSource":{const t=w(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r];if(Ve(n)&&yt(n)){const i=w(Ue(n)),a=i.length;for(let t=1;t<a;++t)if(yt(i[t])){const r=i[t-1];if(Ve(r)){const n=r.split(Ce).pop(),a=Ie(e,n+i[t]);if(""!==a){i[t]=a.replace(n,"");continue}}return""}t[r]=`(${i.join("")})`}}return t.join("")}return r}case"borderColor":case"scrollbarColor":{const t=w(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1];if(Ve(n)&&yt(t[r])){const i=n.split(Ce).pop(),a=Ie(e,i+t[r]);if(""!==a)t[r]=a,t[r-1]=n.substring(0,n.length-i.length);else return""}}return t.join("")}return r}case"boxShadow":case"textShadow":return it(e,Je(e,"borderColor",r),{supportPercent:false,errorString:/-?[\d.]+[a-z]*\s+-?[\d.]+[a-z]*(\s+-[\d.]+[a-z]*)/});case"backgroundSize":case"animation":case"animationDelay":case"animationDuration":case"transition":case"transitionDelay":case"transitionDuration":return it(e,r,{unitType:8,min:0,precision:0,separator:","});case"fontFeatureSettings":case"fontVariantCaps":case"fontVariantEastAsian":case"fontVariantLigatures":case"fontVariantNumeric":case"fontVariationSettings":return it(e,r,{unitType:32,min:0,separator:","});case"columns":return Ne(e,r,32,1,n);case"borderImageSlice":case"flex":case"font":return Ne(e,r,64,0,n);case"backgroundPosition":{const t=[];for(const i of r.split(Re)){const r=Le(e,i,n);if(""!==r)t.push(r);else return""}return t.join(", ")}case"border":case"borderBottom":case"borderLeft":case"borderRight":case"borderTop":case"columnRule":case"outline":{const t=w(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1],i=n.split(Ce).pop();let a;if("calc"===i)a=He(at(e,i+t[r],{min:0,supportPercent:false}));else if(Ve(i))a=Ie(e,i+t[r]);else continue;if(""!==a)t[r]=a,t[r-1]=n.substring(0,n.length-i.length);else return""}return t.join("")}return r}case"animationTimingFunction":case"transitionTimingFunction":{const t=w(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){let n=t[r];if(yt(n)){const i=t[r-1].trim();let a;if(n=Ue(n),i.endsWith("cubic-bezier")){const t=n.split(Re),r=t.length;if(4===r){a="";const n={unitType:64,supportPercent:false};for(let i=0;i<r;++i){let r=t[i];if(pt(r)){if(i%2==0)n.min=0,n.max=1;else n.min=void 0,n.max=void 0;const t=at(e,r,n);if(!isNaN(t))r=t.toString();else return""}a+=(""!==a?", ":"")+r}}}else if(i.endsWith("steps"))a=it(e,n,{unitType:32,min:1});if(a)t[r]=`(${a})`;else return""}}return t.join("")}return r}case"clip":return kt(qe(e).position)?it(e,r,{supportPercent:false}):"";case"clipPath":case"offsetPath":case"shapeOutside":{const t=w(r=r.trim());if(2===t.length){const i=t[0].trim();let a=Ue(t[1].trim());switch(i){case"url":case"path":return!yt(t[1])?r:"";case"linear-gradient":case"radial-gradient":case"conic-gradient":case"repeating-linear-gradient":case"repeating-radial-gradient":return Je(e,"backgroundImage",r,n);case"circle":case"ellipse":{const t=[];let[r,s]=a.split(/\s+at\s+/);if(yt(r)){const a={boundingBox:n,min:0,parent:true};if("circle"===i){if(r.includes("%")){const{width:t,height:r}=n||st(e.parentElement);if(t>0&&r>0)a.boundingSize=Math.min(t,r);else return""}}else a.dimension=["width","height"];if(r=it(e,r,a),""!==r)t.push(r);else return""}else if(r)t.push(r);if(yt(s))if(s=it(e,s,{dimension:["width","height"],boundingBox:n,parent:true}),""!==s)t.push(s);else return"";else if(s)t.push(s);a=t.join(" at ");break}case"inset":a=it(e,a,{dimension:["height","width","height","width","width"],boundingBox:n,checkUnit:true});break;case"polygon":{const t=[];for(let r of a.split(Re))if(yt(r))if(r=it(e,r,{dimension:["width","height"],boundingBox:n,parent:true}),""!==r)t.push(r);else return"";else t.push(r);a=t.join(", ");break}default:return r}if(""!==a)return`${i}(${a})`}return r}case"grid":{let[t,i]=r.trim().split(Fe);if(yt(t)){const r=Je(e,"gridTemplateRows",t,n);if(""!==r)t=r;else return""}if(yt(i)){const t=Je(e,"gridTemplateColumns",i,n);if(""!==t)i=t;else return""}return t+(i?" / "+i:"")}case"offset":{let[t,i]=r.trim().split(Fe);if(yt(t)){const r=w(t.trim()),i=r.length;if(i>=2){if(t=r[0]+r[1],yt(t))if(t=Je(e,"offsetPath",t,n),""===t)return"";if(i>2){let i=r.slice(2).join("");if(yt(t))if(i=Je(e,ve.test(i)?"offsetDistance":"offsetRotate",i,n),""===i)return"";t+=" "+i}}else return""}if(yt(i)){const t=Je(e,"offsetAnchor",i,n);if(""!==t)i=t;else return""}return t+(i?" / "+i:"")}case"borderImage":{const t=/([a-z-]+\(.+?\))\s*([^/]+)(?:\s*\/\s*)?(.+)?/.exec(r.trim());if(t){let r=t[2].trim();if(yt(r))r=Je(e,"borderImageSlice",r,n);if(""!==r){let i,a;if(t[3]){if([i,a]=t[3].trim().split(Fe),yt(i)){const t=Je(e,"borderImageWidth",i,n);if(""!==t)i=t;else return""}if(yt(a)){const t=Je(e,"borderImageOutset",a,n);if(""!==t)a=t;else return""}}return t[1]+" "+r+(i?" / "+i:"")+(a?" / "+a:"")}}return""}case"background":case"gridTemplate":return qe(e)[t];default:if(t.endsWith("Color"))return Ie(e,r.trim());else{const i=Qe(t,qe(e).writingMode);if(""!==i)return Je(e,i,r,n)}}return""}function et(e){const t={},r=e.length;let n=0;while(n<r){const r=e[n++],i=/((?:\d+%\s*,?\s*)+|from|to)\s*{\s*(.+?)\s*}/.exec(r.cssText);if(i){const e=(r.keyText||i[1]).trim().split(Re),n=e.length;let a=0;while(a<n){let r=e[a++];switch(r){case"from":r="0%";break;case"to":r="100%";break}const n={};for(const e of i[2].split(/\s*;\s*/)){const t=e.indexOf(":");if(-1!==t){const r=e.substring(t+1).trim();if(""!==r){n[e.substring(0,t).trim()]=r}}}t[r]=n}}}return t}function tt(e,t){switch(e.trim()){case"all":case"screen":case"only all":case"only screen":return true;default:{const r=/(?:(not|only)?\s*(?:all|screen)\s+and\s+)?((?:\([^)]+\)(?:\s+and\s+)?)+),?\s*/g;let n;while(n=r.exec(e)){const e=/\(([a-z-]+)\s*(:|<?=?|=?>?)?\s*([\w.%]+)?\)(?:\s+and\s+)?/g,r="not"===n[1];let i,a=false;while(i=e.exec(n[2])){const e=i[1];let r=i[2];const n=i[3];if(e.startsWith("min"))r=">=";else if(e.startsWith("max"))r="<=";switch(e){case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":if(n){const[e,t]=z(n.split("/"),e=>parseInt(e));a=Te(r,window.innerWidth/window.innerHeight,e/t)}else a=false;break;case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":a=Te(r,e.endsWith("width")?window.innerWidth:window.innerHeight,ct(n,t));break;case"orientation":a="portrait"===n&&window.innerWidth<=window.innerHeight||"landscape"===n&&window.innerWidth>window.innerHeight;break;case"resolution":case"min-resolution":case"max-resolution":if(n){let e=parseFloat(n);if(n.endsWith("dpcm"))e*=2.54;else if(n.endsWith("dppx"))e*=96;a=Te(r,G(),e)}else a=false;break;case"grid":a="0"===n;break;case"color":a=void 0===n||parseInt(n)>0;break;case"min-color":a=parseInt(n)<=screen.colorDepth/3;break;case"max-color":a=parseInt(n)>=screen.colorDepth/3;break;case"color-index":case"min-color-index":case"monochrome":case"min-monochrome":a="0"===n;break;case"max-color-index":case"max-monochrome":a=parseInt(n)>=0;break;default:a=false;break}if(!a)break}if(!r&&a||r&&!a)return true}}}return false}function rt(e,t,r,...n){let i="",a=e.parentElement;while(a&&!n.includes(a.tagName)){if(i=qe(a)[t],"inherit"===i||(null==r?void 0:r.test(i)))i="";else if(i)break;a=a.parentElement}return i}function nt(e,t){const r=qe(e),n=/var\((--[A-Za-z\d-]+)\s*(?!,\s*var\()(?:,\s*([a-z-]+\([^)]+\)|[^)]+))?\)/;let i;while(i=n.exec(t)){let e=r.getPropertyValue(i[1]).trim();const n=i[2];if(n&&(""===e||dt(n,true)&&!dt(e,true)||k(n)&&!k(e)||ue(n)&&!ue(e)))e=n;if(e)t=t.replace(i[0],e).trim();else return""}return t}function it(e,t,r){let n,i,a,s,l,o;const c={};if(r){if(Object.assign(c,r),Array.isArray(r.orderedSize))n=r.orderedSize;if(Array.isArray(r.dimension))i=r.dimension;({separator:a,unitType:s,checkUnit:l,errorString:o}=r)}let u;switch(t=t.trim(),s){case 32:case 64:u="";break;case 4:u="%";break;case 8:u="ms";break;case 16:u="deg";break;default:u="px",s=2;break}const h=[];for(let r of a?t.split(a):[t])if(r=r.trim(),""!==r){const t=w(r,"calc"),a=t.length;if(a>0){let r="",o=0,f=0;while(o<a){let a=t[o++];if(pt(a)){if(void 0!==(null==n?void 0:n[f]))c.boundingSize=n[f++];else if(i)c.dimension=i[f++],c.boundingSize=void 0;else if(n)c.boundingSize=void 0;const t=at(e,a,c);if(!isNaN(t))r+=t+u;else return""}else if(r+=a,i)if(a=a.trim(),""!==a&&(!l||2===s&&(dt(a,true)||"auto"===a)))++f}h.push(r)}else return""}if(t=1===h.length?h[0]:h.join(" "===a?" ":a?a+" ":""),o){let e;while(e=o.exec(t)){if(void 0===e[1])return"";const r=e[0];let n=r;let i=e.length-1;while(i>=1)n=n.replace(new RegExp(e[i--]+"$"),"");if(n===r)return"";else t=t.replace(r,n)}}return t}function at(e,t,r={}){const n=nt(e,t);if(n){if(t.includes("%")){if(false===r.supportPercent||32===r.unitType)return NaN;else if(void 0===r.boundingSize){const{dimension:t,boundingBox:n}=r;if(t)if(n)r.boundingSize=n[t];else{let n,i=0;if(false===r.parent)n=e;else if(n=e.parentElement,n instanceof HTMLElement){let r;if(kt(qe(e).position))do{if(r=qe(n),n===document.body)break;switch(r.position){case"static":case"initial":case"unset":n=n.parentElement;continue}break}while(n);else r=qe(n);if(r)i="width"===t?Be(r):_e(r)}else if(e instanceof SVGElement){if(true!==r.parent)n=e}else n=null;if(n)r.boundingSize=Math.max(0,n.getBoundingClientRect()[t]-i)}}}else if(r.supportPercent)return NaN;if((!r.unitType||2===r.unitType)&&/\d(em|ch)/.test(t)&&void 0===r.fontSize)r.fontSize=Ze(e);let i=ot(n,r);if(void 0!==r.precision)i=0===r.precision?Math.floor(i):parseFloat(Y(i,r.precision));else if(r.roundValue)i=Math.round(i);return i}return NaN}function st(e){let t=0,r=0;if(e){const n=qe(e);({width:t,height:r}=e.getBoundingClientRect()),t=Math.max(0,t-Be(n)),r=Math.max(0,r-_e(n))}return{width:t,height:r}}function lt(e){const t=a.URL.exec(e);return t?F(t[1].trim(),'"').trim():void 0}function ot(e,t){if(""===(e=e.trim()))return NaN;let r=e.length;if("("!==e.charAt(0)||")"!==e.charAt(r-1))e=`(${e})`,r+=2;let n=0;const i=[],a=[];for(let t=0;t<r;++t)switch(e.charAt(t)){case"(":++n,i[t]=true;break;case")":a.push(t);break}if(n===a.length){const r=[];let n=0;while(true)for(let s=0;s<a.length;++s){let l=false,o=a[s]-1;for(;o>=0;o--)if(i[o]){l=true,i[o]=false;break}else if(a.includes(o))break;if(l){let i,l,c,u,h;if(t)({boundingSize:i,min:l,max:c,unitType:u,fontSize:h}=t);let f,g,d=false;const p=[],b=[],m=e.substring(o+1,a[s]).split(/\s+([+-]\s+|\s*[*/])\s*/),v=m.length;let w=0;while(w<v){const e=m[w++].trim();switch(e){case"+":case"-":case"*":case"/":b.push(e),g=e;break;default:{const t=/\s*{(\d+)}\s*/.exec(e);if(t){switch(u){case 32:case 64:break;default:if(!Oe(f,g))return NaN;break}const e=r[parseInt(t[1])];p.push(e),f=e.toString(),d=true}else{switch(u){case 4:if(k(e)){if(!ze(f,g))return NaN;p.push(parseFloat(e))}else if(wt(e)){if(!Oe(f,g))return NaN;p.push(parseFloat(e)),d=true}else return NaN;break;case 8:if(k(e)){if(!ze(f,g))return NaN;p.push(parseFloat(e))}else if(vt(e)){if(!Oe(f,g))return NaN;p.push(ft(e)),d=true}else return NaN;break;case 16:if(k(e)){if(!ze(f,g))return NaN;p.push(parseFloat(e))}else if(mt(e)){if(!Oe(f,g))return NaN;const t=ut(e);if(!isNaN(t))p.push(),d=true;else return NaN}else return NaN;break;case 32:if(/^\s*-?\d+\s*$/.test(e))p.push(parseInt(e)),d=true;else return NaN;break;case 64:if(k(e))p.push(parseFloat(e)),d=true;else if(wt(e)&&void 0!==i&&!isNaN(i))p.push(parseFloat(e)/100*i);else return NaN;break;default:if(k(e)){if(!ze(f,g))return NaN;p.push(parseFloat(e))}else if(dt(e)){if(!Oe(f,g))return NaN;p.push(ct(e,h)),d=true}else if(wt(e)&&void 0!==i&&!isNaN(i)){if(!Oe(f,g))return NaN;p.push(parseFloat(e)/100*i),d=true}else return NaN;break}f=e}break}}}if(!d||p.length!==b.length+1)return NaN;for(w=0;w<b.length;++w)if("/"===b[w])if(0!==Math.abs(p[w+1]))p.splice(w,2,p[w]/p[w+1]),b.splice(w--,1);else return NaN;for(w=0;w<b.length;++w)if("*"===b[w])p.splice(w,2,p[w]*p[w+1]),b.splice(w--,1);for(w=0;w<b.length;++w)p.splice(w,2,p[w]+p[w+1]*("-"===b[w]?-1:1)),b.splice(w--,1);if(1===p.length)if(1===a.length){const e=p[0];if(void 0!==l&&e<l||void 0!==c&&e>c)return NaN;else return q(e)}else{r[n]=p[0];const t=`{${n++}}`,i=a[s]+1;e=e.substring(0,o)+t+" ".repeat(i-(o+t.length))+e.substring(i),a.splice(s--,1)}else return NaN}}}return NaN}function ct(e,t,r){const n=ve.exec(e);if(n){let e=parseFloat(n[1]);switch(n[2]){case"px":return e;case"ex":e/=2;case"em":case"ch":return e*(null!=t?t:Ze(document.documentElement));case"rem":return e*Ze(document.documentElement);case"pc":e*=12;case"pt":return 4*e/3;case"Q":e/=4;case"mm":e/=10;case"cm":e/=2.54;case"in":return e*G();case"vw":return e*$e(r)/100;case"vh":return e*We(r)/100;case"vmin":return e*Math.min($e(r),We(r))/100;case"vmax":return e*Math.max($e(r),We(r))/100}}return 0}function ut(e,t=NaN){const r=ke.exec(e);return r?ht(r[1],r[2]):t}function ht(e,t="deg",r=NaN){let n=b(e);if(isNaN(n))return r;switch(t){case"rad":n*=180/Math.PI;break;case"grad":n/=400;case"turn":n*=360;break}return n}function ft(e){const t=xe.exec(e);if(t)switch(t[2]){case"ms":return parseInt(t[1]);case"s":return 1e3*parseFloat(t[1])}return 0}function gt(e,t){if("string"==typeof e)if(e=parseFloat(e),isNaN(e))return"0%";return e*=100,(t?Math.round(e):e)+"%"}function dt(e,t){return!t?ve.test(e):ye.test(e)}function pt(e){return Ee.test(e)}function bt(e){return/^\s*var\(.+\)\s*$/.test(e)}function mt(e){return ke.test(e)}function vt(e){return xe.test(e)}function wt(e){return we.test(e)}function yt(e){return Se.test(e)}function kt(e){return"absolute"===e||"fixed"===e}var xt=Object.freeze({__proto__:null,CSS_PROPERTIES:{alignContent:{trait:16,value:"normal"},alignItems:{trait:16,value:"normal"},alignSelf:{trait:16,value:"auto"},animation:{trait:6,value:["animationDuration","animationTimingFunction","animationDelay","animationIterationCount","animationDirection","animationFillMode","animationPlayState","animationName"]},animationDelay:{trait:2,value:"0s"},animationDirection:{trait:0,value:"normal"},animationDuration:{trait:2,value:"0s"},animationFillMode:{trait:0,value:"none"},animationIterationCount:{trait:2,value:"1"},animationName:{trait:0,value:"none"},animationPlayState:{trait:0,value:"running"},animationTimingFunction:{trait:0,value:"ease"},backfaceVisibility:{trait:0,value:"visible"},background:{trait:6,value:["backgroundImage","backgroundPositionX","backgroundPositionY","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"]},backgroundAttachment:{trait:0,value:"scroll"},backgroundClip:{trait:0,value:"border-box"},backgroundColor:{trait:2,value:"rgba(0, 0, 0, 0)"},backgroundImage:{trait:2,value:"none"},backgroundOrigin:{trait:0,value:"padding-box"},backgroundPosition:{trait:6,value:["backgroundPositionX","backgroundPositionY"]},backgroundPositionX:{trait:2,value:"0%"},backgroundPositionY:{trait:2,value:"0%"},backgroundRepeat:{trait:0,value:"repeat"},backgroundSize:{trait:2,value:"auto"},border:{trait:14,value:["borderTopWidth","borderTopStyle","borderTopColor","borderRightWidth","borderRightStyle","borderRightColor","borderBottomWidth","borderBottomStyle","borderBottomColor","borderLeftWidth","borderLeftStyle","borderLeftColor"]},borderBottom:{trait:6,value:["borderBottomWidth","borderBottomStyle","borderBottomColor"]},borderBottomColor:{trait:34,value:""},borderBottomLeftRadius:{trait:2,value:"0"},borderBottomRightRadius:{trait:2,value:"0"},borderBottomStyle:{trait:0,value:"none"},borderBottomWidth:{trait:10,value:"0"},borderCollapse:{trait:8,value:"separate"},borderColor:{trait:6,value:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"]},borderImage:{trait:6,value:["borderImageSource","borderImageSlice","borderImageWidth","borderImageOutset","borderImageRepeat"]},borderImageOutset:{trait:2,value:"0"},borderImageRepeat:{trait:0,value:"stretch"},borderImageSlice:{trait:2,value:"100%"},borderImageSource:{trait:2,value:"none"},borderImageWidth:{trait:2,value:"1"},borderLeft:{trait:6,value:["borderLeftWidth","borderLeftStyle","borderLeftColor"]},borderLeftColor:{trait:34,value:""},borderLeftStyle:{trait:0,value:"none"},borderLeftWidth:{trait:10,value:"0"},borderRadius:{trait:6,value:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"]},borderRight:{trait:6,value:["borderRightWidth","borderRightStyle","borderRightColor"]},borderRightColor:{trait:34,value:""},borderRightStyle:{trait:0,value:"none"},borderRightWidth:{trait:10,value:"0"},borderSpacing:{trait:2,value:"0"},borderStyle:{trait:4,value:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"]},borderTop:{trait:6,value:["borderTopWidth","borderTopStyle","borderTopColor"]},borderTopColor:{trait:34,value:""},borderTopLeftRadius:{trait:2,value:"0"},borderTopRightRadius:{trait:2,value:"0"},borderTopStyle:{trait:0,value:"none"},borderTopWidth:{trait:10,value:"0"},borderWidth:{trait:14,value:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"]},bottom:{trait:10,value:"auto"},boxShadow:{trait:10,value:"none"},boxSizing:{trait:8,value:"content-box"},captionSide:{trait:0,value:"top"},clear:{trait:8,value:"none"},clip:{trait:66,value:"clip"},clipPath:{trait:2,value:"none"},color:{trait:34,value:""},columnCount:{trait:2,value:"auto"},columnFill:{trait:0,value:"balance"},columnGap:{trait:2,value:"normal"},columnRule:{trait:6,value:["columRuleWidth","columnRuleStyle","columnRuleColor"]},columnRuleColor:{trait:34,value:""},columnRuleStyle:{trait:0,value:"none"},columnRuleWidth:{trait:2,value:"0"},columnSpan:{trait:0,value:"none"},columnWidth:{trait:2,value:"auto"},columns:{trait:6,value:["columnCount","columnWidth"]},content:{trait:0,value:"normal"},counterIncrement:{trait:2,value:"none"},counterReset:{trait:2,value:"none"},cursor:{trait:0,value:"auto"},direction:{trait:8,value:"ltr"},display:{trait:8,value:"inline"},emptyCells:{trait:0,value:"show"},flex:{trait:6,value:["flexGrow","flexShrink","flexBasis"]},flexBasis:{trait:10,value:"auto"},flexDirection:{trait:8,value:"row"},flexFlow:{trait:12,value:["flexDirection","flexWrap"]},flexGrow:{trait:10,value:"0"},flexShrink:{trait:10,value:"1"},flexWrap:{trait:8,value:"nowrap"},float:{trait:8,value:"none"},font:{trait:14,value:["fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily"]},fontFamily:{trait:8,value:""},fontFeatureSettings:{trait:10,value:"normal"},fontKerning:{trait:8,value:"auto"},fontSize:{trait:10,value:"medium"},fontSizeAdjust:{trait:10,value:"none"},fontStretch:{trait:10,value:"normal"},fontStyle:{trait:10,value:"normal"},fontVariant:{trait:14,value:["fontVariantCaps","fontVariantLigatures","fontVariantNumeric","fontVariantEastAsian"]},fontVariantCaps:{trait:10,value:"normal"},fontVariantEastAsian:{trait:10,value:"normal"},fontVariantLigatures:{trait:10,value:"normal"},fontVariantNumeric:{trait:10,value:"normal"},fontVariationSettings:{trait:10,value:"normal"},fontWeight:{trait:10,value:"normal"},gap:{trait:14,value:["rowGap","columnGap"]},grid:{trait:14,value:["gridTemplateRows","gridAutoColumns","gridTemplateColumns","gridAutoRows","gridTemplateAreas","gridAutoFlow","gridRowGap","gridColumnGap"]},gridArea:{trait:14,value:["gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd"]},gridAutoColumns:{trait:10,value:"auto"},gridAutoFlow:{trait:8,value:"row"},gridAutoRows:{trait:10,value:"auto"},gridColumn:{trait:14,value:["gridColumnStart","gridColumnEnd"]},gridColumnEnd:{trait:10,value:"auto"},gridColumnGap:{trait:10,value:"normal"},gridColumnStart:{trait:10,value:"auto"},gridGap:{trait:14,value:["gridRowGap","gridColumnGap"]},gridRow:{trait:14,value:["gridRowStart","gridRowEnd"]},gridRowEnd:{trait:10,value:"auto"},gridRowGap:{trait:10,value:"normal"},gridRowStart:{trait:10,value:"auto"},gridTemplate:{trait:14,value:["gridTemplateRows","gridTemplateColumns","gridTemplateAreas"]},gridTemplateAreas:{trait:8,value:"none"},gridTemplateColumns:{trait:10,value:"none"},gridTemplateRows:{trait:10,value:"none"},height:{trait:10,value:"auto"},justifyContent:{trait:16,value:"normal"},justifyIems:{trait:16,value:"normal"},justifySelf:{trait:16,value:"auto"},left:{trait:10,value:"auto"},letterSpacing:{trait:10,value:"normal"},lineHeight:{trait:10,value:"normal"},listStyle:{trait:12,value:["listStyleType","listStylePosition","listStyleImage"]},listStyleImage:{trait:8,value:"none"},listStylePosition:{trait:8,value:"outside"},listStyleType:{trait:8,value:"disc"},margin:{trait:14,value:["marginTop","marginRight","marginBottom","marginLeft"]},marginBottom:{trait:10,value:"0"},marginLeft:{trait:10,value:"0"},marginRight:{trait:10,value:"0"},marginTop:{trait:10,value:"0"},maxHeight:{trait:10,value:"none"},maxWidth:{trait:10,value:"none"},minHeight:{trait:10,value:"0"},minWidth:{trait:10,value:"0"},offset:{trait:6,value:["offsetPath","offsetDistance","offsetRotate","offsetAnchor"]},offsetPath:{trait:0,value:"none"},offsetDistance:{trait:2,value:"0"},offsetRotate:{trait:2,value:"auto 0deg"},offsetAnchor:{trait:2,value:"auto"},opacity:{trait:2,value:"1"},order:{trait:14,value:"0"},outline:{trait:6,value:["outlineWidth","outlineStyle","outlineColor"]},outlineColor:{trait:34,value:""},outlineOffset:{trait:2,value:"0"},outlineStyle:{trait:0,value:"none"},outlineWidth:{trait:2,value:"0"},overflow:{trait:12,value:["overflowX","overflowY"]},overflowX:{trait:8,value:"visible"},overflowY:{trait:8,value:"visible"},padding:{trait:14,value:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},paddingBottom:{trait:10,value:"0"},paddingLeft:{trait:10,value:"0"},paddingRight:{trait:10,value:"0"},paddingTop:{trait:10,value:"0"},pageBreakAfter:{trait:0,value:"auto"},pageBreakBefore:{trait:0,value:"auto"},pageBreakInside:{trait:0,value:"auto"},perspective:{trait:2,value:"none"},perspectiveOrigin:{trait:2,value:"50% 50%"},placeContent:{trait:16,value:["alignContent","justifyContent"]},placeItems:{trait:20,value:["alignItems","justifyItems"]},placeSelf:{trait:20,value:["alignSelf","justifySelf"]},position:{trait:8,value:"static"},quotes:{trait:8,value:"none"},resize:{trait:8,value:"none"},right:{trait:10,value:"0"},rowGap:{trait:10,value:"normal"},scrollMargin:{trait:14,value:["scrollMarginTop","scrollMarginRight","scrollMarginBottom","scrollMarginLeft"]},scrollMarginBottom:{trait:10,value:"0"},scrollMarginLeft:{trait:10,value:"0"},scrollMarginRight:{trait:10,value:"0"},scrollMarginTop:{trait:10,value:"0"},scrollPadding:{trait:14,value:["scrollPaddingTop","scrollPaddingRight","scrollPaddingBottom","scrollPaddingLeft"]},scrollPaddingBottom:{trait:8,value:"0"},scrollPaddingLeft:{trait:8,value:"0"},scrollPaddingRight:{trait:8,value:"0"},scrollPaddingTop:{trait:8,value:"0"},shapeOutside:{trait:2,value:"none"},tabSize:{trait:8,value:"8"},tableLayout:{trait:8,value:"auto"},textAlign:{trait:0,value:"start"},textAlignLast:{trait:0,value:"auto"},textDecoration:{trait:4,value:["textDecorationLine","textDecorationStyle","textDecorationColor"]},textDecorationColor:{trait:34,value:""},textDecorationLine:{trait:0,value:"none"},textDecorationStyle:{trait:0,value:"solid"},textIndent:{trait:10,value:"0"},textJustify:{trait:0,value:"auto"},textOverflow:{trait:0,value:"clip"},textShadow:{trait:2,value:"none"},textTransform:{trait:8,value:"none"},top:{trait:10,value:"0"},transform:{trait:2,value:"none"},transformOrigin:{trait:2,value:"50% 50% 0"},transformStyle:{trait:0,value:"flat"},transition:{trait:6,value:["transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay"]},transitionDelay:{trait:2,value:"0s"},transitionDuration:{trait:2,value:"0s"},transitionProperty:{trait:0,value:"all"},transitionTimingFunction:{trait:2,value:"ease"},unicodeBidi:{trait:8,value:"normal"},verticalAlign:{trait:10,value:"baseline"},visibility:{trait:8,value:"visible"},whiteSpace:{trait:8,value:"normal"},width:{trait:10,value:"auto"},wordBreak:{trait:8,value:"normal"},wordSpacing:{trait:10,value:"normal"},wordWrap:{trait:8,value:"normal"},zIndex:{trait:2,value:"auto"}},SVG_PROPERTIES:{clipRule:{trait:0,value:"nonzero"},cx:{trait:2,value:"0"},cy:{trait:2,value:"0"},fill:{trait:34,value:"black"},fillOpacity:{trait:2,value:"1"},fillRule:{trait:0,value:"nonzero"},stroke:{trait:34,value:"none"},strokeDasharray:{trait:2,value:"none"},strokeDashoffset:{trait:2,value:"0"},strokeLinecap:{trait:0,value:"butt"},strokeLinejoin:{trait:0,value:"miter"},strokeMiterlimit:{trait:2,value:"4"},strokeOpacity:{trait:2,value:"1"},strokeWidth:{trait:2,value:"1"},r:{trait:2,value:"0"},rx:{trait:2,value:"0"},ry:{trait:2,value:"0"},x:{trait:2,value:"0"},x1:{trait:2,value:"0"},x2:{trait:2,value:"0"},y:{trait:2,value:"0"},y1:{trait:2,value:"0"},y2:{trait:2,value:"0"}},newBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},getStyle:qe,getFontSize:Ze,hasComputedStyle:Ke,parseSelectorText:function(e,t){if((e=t?e.trim():Ye(e.trim())).includes(",")){let t,r=e,n=false;while(t=a.SELECTOR_ATTR.exec(r)){const e=t.index,i=t[0].length;r=(e>0?r.substring(0,e):"")+"_".repeat(i)+r.substring(e+i),n=true}if(n){const t=[];let n=0;while(true){const i=r.indexOf(",",n);if(-1!==i){const r=e.substring(n,i).trim();t.push(0===n?r:Ye(r)),n=i+1}else{if(n>0)t.push(Ye(e.substring(n).trim()));break}}return t}return z(e.split(Re),e=>Ye(e))}return[e]},getSpecificity:function e(t){let r,n=0;while(r=a.SELECTOR_G.exec(t)){let t,i=r[1];if(1===i.length)switch(i.charAt(0)){case"+":case"~":case">":case"*":continue}else if(i.startsWith("*|*")){if(i.length>3){n=0;break}}else if(i.startsWith("*|"))i=i.substring(2);else if(i.startsWith("::")){n=0;break}while(t=a.SELECTOR_ATTR.exec(i)){if(t[1])n+=1;if(t[3]||t[4]||t[5])n+=10;i=d(i,t.index,t[0].length)}while(t=a.SELECTOR_PSEUDO_CLASS.exec(i)){if(t[0].startsWith(":not(")){const r=t[1];if(r){const t=a.SELECTOR_G.lastIndex;n+=e(r),a.SELECTOR_G.lastIndex=t}}else switch(r[2]){case":scope":case":root":break;default:n+=10;break}i=d(i,t.index,t[0].length)}while(t=a.SELECTOR_PSEUDO_ELEMENT.exec(i))n+=1,i=d(i,t.index,t[0].length);while(t=a.SELECTOR_LABEL.exec(i)){const e=t[0];switch(e.charAt(0)){case"#":n+=100;break;case".":n+=10;break;default:n+=1;break}i=d(i,t.index,e.length)}}return a.SELECTOR_G.lastIndex=0,n},checkWritingMode:Qe,calculateStyle:Je,checkStyleValue:function(e,t,r,n){if("initial"===r)switch(t){case"position":case"display":case"baseline":case"lineHeight":case"backgroundColor":case"backgroundImage":case"borderTopStyle":case"borderRightStyle":case"borderBottomStyle":case"borderLeftStyle":return r;default:return""}else if("inherit"===r)switch(t){case"fontSize":case"lineHeight":if(n)return n[t];default:return rt(e,t)}else if(yt(r))r=Je(e,t,r);else if(bt(r))r=nt(e,r);return""===r&&(null==n?void 0:n[t])||r},getKeyframesRules:function(){const e={};e:{const t=document.styleSheets,r=t.length;let n=0;while(n<r)try{const r=t[n++].cssRules;if(r){const t=r.length;for(let n=0;n<t;++n)try{const t=r[n];if(t.type===CSSRule.KEYFRAMES_RULE){const r=et(t.cssRules);if(g(r)){const n=t.name;if(e[n])Object.assign(e[n],r);else e[n]=r}}}catch(e){break e}}}catch(e){}}return e},parseKeyframes:et,checkMediaRule:tt,isParentStyle:function(e,t,...r){if("#"!==e.nodeName.charAt(0)&&r.includes(qe(e)[t]))return true;const n=e.parentElement;return!!n&&r.includes(qe(n)[t])},getInheritedStyle:rt,parseVar:nt,calculateVarAsString:it,calculateVar:at,getContentBoxDimension:st,getBackgroundPosition:function(e,t,r){if(""!==(e=e.trim())){let n,i,a,s;if(r)({fontSize:n,imageDimension:i,imageSize:a,screenDimension:s}=r);const{width:l,height:o}=t,c=(e,t,r,c)=>{if(i&&!dt(e)){let e=h[c];if(a&&"auto"!==a&&"initial"!==a){const[r,c]=a.split(Ce);if(t){let t=l;if(dt(r,true))if(wt(r))t*=parseFloat(r)/100;else{const e=ct(r,n,s);if(e)t=e}else if(c){let e=1;if(wt(c))e=parseFloat(c)/100*o/i.height;else if(dt(c)){const t=ct(c,n,s);if(t)e=t/i.height}t=e*i.width}e*=t}else{let t=o;if(dt(c,true))if(wt(c))t*=parseFloat(c)/100;else{const e=ct(c,n,s);if(e)t=e}else if(r){let e=1;if(wt(r))e=parseFloat(r)/100*l/i.width;else if(dt(r)){const t=ct(r,n,s);if(t)e=t/i.width}t=e*i.height}e*=t}}else e*=t?i.width:i.height;h[r]-=e}},u=e.split(Ce);if(1===u.length)u.push("center");const h=De(u),f=Math.min(u.length,4);if(2===f){u.sort((e,t)=>{switch(e){case"left":case"right":return-1;case"top":case"bottom":return 1}switch(t){case"left":case"right":return 1;case"top":case"bottom":return-1}return 0});for(let e=0;e<2;++e){let t=u[e];const r=0===e,[i,a]=r?["left",l]:["top",o],f=i+"AsPercent";switch(t){case"0%":if(r)t="left";case"left":case"top":break;case"100%":if(r)t="right";case"right":case"bottom":h[i]=a,h[f]=1;break;case"50%":case"center":t="center",h[i]=a/2,h[f]=.5;break;default:{const l=Ge(t,a,n,s);if(l>1)u[e]="100%",t=r?"right":"bottom",h[t]=-1*je(gt(l-1),a,n,s);else h[i]=je(t,a,n,s);h[f]=l;break}}if(r)h.horizontal=t;else h.vertical=t;c(t,r,i,f)}}else{let e=0,t=0;const r=(r,n)=>{switch(r){case"left":case"right":h.horizontal=r,++e;break;case"center":if(4===f)return false;else{let t=true;if(void 0===n)if(e>0)h.vertical=r,t=false;else h.horizontal=r;else switch(n){case"left":case"right":h.vertical=r,t=false;break;case"top":case"bottom":h.horizontal=r;break;default:return false}if(t)h.left=l/2,h.leftAsPercent=.5,c(r,true,"left","leftAsPercent");else h.top=o/2,h.topAsPercent=.5,c(r,false,"top","topAsPercent")}break;case"top":case"bottom":h.vertical=r,++t;break;default:return false}return e<2&&t<2};for(let e=0;e<f;++e){const t=u[e];if(dt(t,true)){const r=u[e-1];switch(r){case"left":case"right":{const e=je(t,l,n,s),i=Ge(t,l,n,s);if("right"===r)h.right=e,h.rightAsPercent=i,c(t,true,"right","rightAsPercent"),h.left=l-e,h.leftAsPercent=1-i;else{if(i>1){const e=1-i;h.horizontal="right",h.right=je(gt(e),l,n,s),h.rightAsPercent=e,c(t,true,"right","rightAsPercent")}h.left=e,h.leftAsPercent=i}c(t,true,"left","leftAsPercent");break}case"top":case"bottom":{const e=je(t,o,n,s),i=Ge(t,o,n,s);if("bottom"===r)h.bottom=e,h.bottomAsPercent=i,c(t,false,"bottom","bottomAsPercent"),h.top=o-e,h.topAsPercent=1-i;else{if(i>1){const e=1-i;h.horizontal="bottom",h.bottom=je(gt(e),o,n,s),h.bottomAsPercent=e,c(t,false,"bottom","bottomAsPercent")}h.top=e,h.topAsPercent=i}c(t,false,"top","topAsPercent");break}default:return De()}}else if(!r(t,u[e+1]))return De()}}return h.static=0===h.top&&0===h.right&&0===h.bottom&&0===h.left,h}return De()},getSrcSet:function(e,t){const r=[],n=e.parentElement;let{srcset:i,sizes:a}=e;if("PICTURE"===(null==n?void 0:n.tagName))O(n.children,e=>{if("SOURCE"===e.tagName)if(x(e.srcset)&&!(x(e.media)&&!tt(e.media))&&(!x(e.type)||!t||t.includes(e.type.trim().toLowerCase())))return({srcset:i,sizes:a}=e),true});if(""!==i)for(const e of i.trim().split(Re)){const t=/^(.*?)(?:\s+([\d.]+)([xw]))?$/.exec(e);if(t){let e=0,n=0;switch(t[3]){case"w":e=b(t[2]);break;case"x":n=b(t[2]);break;default:n=1;break}r.push({src:R(t[1].split(Ce)[0]),pixelRatio:n,width:e})}}const s=r.length;if(0!==s){if(s>1)if(r.sort((e,t)=>{const r=e.pixelRatio,n=t.pixelRatio;if(r>0&&n>0){if(r!==n)return r<n?-1:1}else{const r=e.width,n=t.width;if(r!==n&&r>0&&n>0)return r<n?-1:1}return 0}),x(a)){let t=NaN;for(const r of a.trim().split(Re)){let n=Ae.exec(r);if(n){const r=n[2]?tt(n[2]):void 0,i=n[6]?tt(n[6]):void 0;switch(n[5]){case"and":if(!r||!i)continue;break;case"or":if(!r&&!i)continue;break;case"not":if(void 0!==r||i)continue;break;default:if(false===r||void 0!==i)continue;break}const a=n[9];if(a)if(n=Ee.exec(a),n)t=ot(n[1],n[1].includes("%")?{boundingSize:st(e.parentElement).width}:void 0);else if(wt(a))t=parseFloat(a)/100*st(e.parentElement).width;else if(dt(a))t=ct(a);if(!isNaN(t))break}}if(!isNaN(t)){const e=t*window.devicePixelRatio;let n=-1;for(let t=0;t<s;++t){const i=r[t].width;if(i>0&&i<=e&&(-1===n||r[n].width<i))n=t}if(0===n){const e=r[0];e.pixelRatio=1,e.actualWidth=t}else if(n>0){const e=r.splice(n,1)[0];e.pixelRatio=1,e.actualWidth=t,r.unshift(e)}let i=1;while(i<s){const e=r[i++];if(0===e.pixelRatio)e.pixelRatio=e.width/t}}}return r}},convertListStyle:function(e,t,r){switch(e){case"decimal":return t.toString();case"decimal-leading-zero":return(t<9?"0":"")+t.toString();case"upper-alpha":case"upper-latin":if(t>=1)return m(t-1);break;case"lower-alpha":case"lower-latin":if(t>=1)return m(t-1).toLowerCase();break;case"upper-roman":return v(t);case"lower-roman":return v(t).toLowerCase()}return r?t.toString():""},extractURL:lt,resolveURL:function(e){const t=lt(e);return t?R(t):void 0},insertStyleSheetRule:function(e,t=0){const r=document.createElement("style");if(j(4))r.appendChild(document.createTextNode(""));document.head.appendChild(r);const n=r.sheet;if("function"==typeof(null==n?void 0:n.insertRule))try{n.insertRule(e,t)}catch(e){return null}return r},calculate:ot,parseUnit:ct,parseTransform:function(e,t){var r,n,i,a;let l,o,c;if(t)({accumulate:l,fontSize:o,boundingBox:c}=t);const u=[],h=/(\w+)\([^)]+\)/g;let f;while(f=h.exec(e)){const e=f[1];if(e.startsWith("translate")){const t=s.TRANSLATE.exec(f[0]);if(t){const n=t[2],i=t[3];if(l){let t=0,a=0,s=0;switch(e){case"translate":if(wt(n)){if(c)t=parseFloat(n)/100*c.width}else t=ct(n,o);if(i)if(wt(i)){if(c)a=parseFloat(i)/100*c.height}else a=ct(i,o);break;case"translateX":if(wt(n)){if(c)t=parseFloat(n)/100*c.width}else t=ct(n,o);break;case"translateY":if(wt(i)){if(c)a=parseFloat(i)/100*c.height}else a=ct(i,o);break;case"translateZ":s=ct(n,o);break}const l=null===(r=u.find(e=>"translate"===e.method))||void 0===r?void 0:r.values;if(l)l[0]+=t,l[1]+=a,l[2]+=s;else u.push({method:"translate",values:[t,a,s]})}else{const t=[ct(n,o)];if("translate"===e&&i)t.push(ct(i,o));u.push({method:e,values:t})}}}else if(e.startsWith("rotate")){const t=s.ROTATE.exec(f[0]);if(t){const r=ht(t[2],t[3]);if(!isNaN(r))if(l){let t=0,i=0,a=0;switch(e){case"rotate":t=r,i=r;break;case"rotateX":t=r;break;case"rotateY":i=r;break;case"rotateZ":a=r;break}const s=null===(n=u.find(e=>"rotate"===e.method))||void 0===n?void 0:n.values;if(s)s[0]+=t,s[1]+=i,s[2]+=a;else u.push({method:"rotate",values:[t,i,a]})}else u.push({method:e,values:[r]})}}else if(e.startsWith("scale")){const t=s.SCALE.exec(f[0]);if(t)if(l){let r=1,n=1,a=1;switch(e){case"scale":r=parseFloat(t[2]),n=parseFloat(t[3])||r;break;case"scaleX":r=parseFloat(t[2]);break;case"scaleY":n=parseFloat(t[2]);break;case"scaleZ":a=parseFloat(t[2]);break}const s=null===(i=u.find(e=>"scale"===e.method))||void 0===i?void 0:i.values;if(s)s[0]*=r,s[1]*=n,s[2]*=a;else u.push({method:"scale",values:[r,n,a]})}else{const r=[parseFloat(t[2])];if("scale"===e&&t[3])r.push(parseFloat(t[3]));u.push({method:e,values:r})}}else if(e.startsWith("skew")){const t=s.SKEW.exec(f[0]);if(t){let r=ht(t[2],t[3]);if(!isNaN(r))if(l){let n=0,i=0;switch(e){case"skew":if(n=r,t[4]&&t[5])i=ht(t[4],t[5],0);break;case"skewX":n=r;break;case"skewY":i=r;break}const s=null===(a=u.find(e=>"skew"===e.method))||void 0===a?void 0:a.values;if(s)s[0]+=n,s[1]+=i;else u.push({method:"skew",values:[n,i]})}else{const n=[r];if("skew"===e&&t[4]&&t[5])if(r=ht(t[4],t[5]),!isNaN(r))n.push(r);u.push({method:e,values:n})}}}else if(e.startsWith("matrix")&&!l){const t=s.MATRIX.exec(f[0]);if(t)u.push({method:e,values:[parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6]),parseFloat(t[7])]})}}return u},parseAngle:ut,convertAngle:ht,parseTime:ft,formatPX:function(e){return Math.round(e)+"px"},formatPercent:gt,isLength:dt,isPx:function(e){return/\dpx$/.test(e)},isCalc:pt,isCustomProperty:bt,isAngle:mt,isTime:vt,isPercent:wt,hasCalc:yt,hasCoords:kt});function Et(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}}function St(e,t=true){const r={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height};if(t){if(0!==window.scrollY)r.top+=window.scrollY,r.bottom+=window.scrollY;if(0!==window.scrollX)r.left+=window.scrollX,r.right+=window.scrollX}return r}function At(e){const t=[],r=document.createRange();r.selectNodeContents(e);const n=r.getClientRects();let i,a=n.length,s=0;while(s<a){const e=n.item(s++);if(Math.round(e.width)>0&&!P(e.left,e.right,.5))t.push(e)}if(a=t.length,a>0){let e=1,r=false;i=St(t[0]),s=0;while(++s<a){const{left:n,right:a,top:l,bottom:o,width:c}=t[s];if(n<i.left)i.left=n;else if(n>i.right)r=true;if(a>i.right)i.right=a;if(l<i.top)i.top=l;else if(l>=t[s-1].bottom)++e;if(o>i.bottom)i.bottom=o;i.width+=c}if(i.height=i.bottom-i.top,e>1)i.numberOfLines=e,i.overflow=r}else i={top:0,left:0,right:0,bottom:0,width:0,height:0};return i}var Ct=Object.freeze({__proto__:null,ELEMENT_BLOCK:["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DD","DETAILS","DIALOG","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","TABLE","UL"],newBoxRect:function(){return{top:0,left:0,right:0,bottom:0}},newBoxRectDimension:Et,withinViewport:function(e){return!(e.top+window.scrollY+e.height<0||e.left+window.scrollX+e.width<0)},assignRect:St,getRangeClientRect:At,removeElementsByClassName:function(e){Array.from(document.getElementsByClassName(e)).forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.removeChild(e)})},getElementsBetweenSiblings:function(e,t){const r=[];if(!e||e.parentElement===t.parentElement){const n=t.parentElement;if(n){let i=e?-1:0,a=-1;if(O(n.childNodes,(r,n)=>{if(r===t){if(a=n,-1!==i)return true}else if(r===e)if(i=n,-1!==a)return true}),-1!==i&&-1!==a)O(n.childNodes,e=>{const t=e.nodeName;if("#"!==t[0]||"#text"===t)r.push(e)},Math.min(i,a),Math.max(i,a)+1)}}return r},createElement:function(e,t){const r=document.createElement(e);if(t){const{parent:e,attrs:n,style:i}=t;if(i)for(const e in i)if(e.includes("-"))r.style.setProperty(e,i[e]);else r.style[e]=i[e];if(n)for(const e in n)if(e in r)r[e]=n[e];null==e||e.appendChild(r)}return r},measureTextWidth:function(e,t,r){if(t&&r){const n=document.createElement("canvas").getContext("2d");if(n)return n.font=`${r}px ${t}`,n.measureText(e).width}return 0},getNamedItem:function(e,t){var r;return(null===(r=e.attributes.getNamedItem(t))||void 0===r?void 0:r.value.trim())||""}});function Rt(){return Promise.reject(new Error("Framework not installed."))}function Ft(e,t){return Lt(e,"node",t)||null}function Tt(e,t,r,n){e[`__${t}::${r}`]=n}function Lt(e,t,r){if(!r)r=e["__sessionId::0"]||"0";return e[`__${t}::${r}`]}var It=Object.freeze({__proto__:null,frameworkNotInstalled:Rt,actualClientRect:function(e,t){if(t){const r=Lt(e,"clientRect",t);if(r)return r}const r=e.getBoundingClientRect();if(t)Tt(e,"clientRect",t,r);return r},actualTextRangeRect:function(e,t){if(t){const r=Lt(e,"textRangeRect",t);if(r)return r}let r;if(e.childElementCount>0)O(e.children,e=>{const t=qe(e);if("visible"!==t.getPropertyValue("visibility")){const n=t.getPropertyValue("position");if("absolute"===n||"fixed"===n){const n=t.getPropertyValue("display");if("none"!==n){if(e.style.display="none",!r)r=[];r.push([e,n])}}}});const n=At(e);if(r)for(let e=0;e<r.length;++e){const[t,n]=r[e];t.style.display=n}if(t)Tt(e,"textRangeRect",t,n);return n},getStyleValue:function(e,t,r){var n;return(null===(n=Lt(e,"styleMap",r))||void 0===n?void 0:n[p(t)])||""},getPseudoElt:function(e,t){return Lt(e,"pseudoElement",t)||""},getElementAsNode:Ft,setElementCache:Tt,getElementCache:Lt,deleteElementCache:function(e,t,r){e[`__${t}::${r}`]=void 0}});function Nt(e,t,r="\t",n){if(t>0){if(void 0===n)n=r.repeat(t);return D(e.split("\n"),e=>""!==e?n+e:"")}return e}var Pt=Object.freeze({__proto__:null,STRING_XMLENCODING:'<?xml version="1.0" encoding="utf-8"?>\n',STRING_SPACE:"&#160;",isPlainText:function(e){const t=e.length;let r=0;while(r<t)switch(e.charCodeAt(r++)){case 32:case 9:case 10:case 11:case 13:continue;default:return true}return false},pushIndent:Nt,pushIndentArray:function(e,t,r="\t",n=""){if(t>0){let i="";const a=r.repeat(t),s=e.length;let l=0;while(l<s)i+=(l>0?n:"")+Nt(e[l++],t,r,a);return i}return e.join(n)},replaceIndent:function(e,t,r){if(t>=0){let n=-1;return D(e.split("\n"),e=>{const i=r.exec(e);if(i){if(-1===n)n=i[2].length;return(i[1]||"")+"\t".repeat(t+(i[2].length-n))+i[3]}return e})}return e},replaceTab:function(e,t=4,r){if(t>0)if(r)return D(e.split("\n"),e=>{const r=/^(\t+)(.*)$/.exec(e);return r?" ".repeat(t*r[1].length)+r[2]:e});else return e.replace(/\t/g," ".repeat(t));return e},applyTemplate:function e(t,r,n,i){const a=r[t],s=true===a[">>"];let l="",o="",c=n.length;if(void 0===i)l+='<?xml version="1.0" encoding="utf-8"?>\n',i=0;else o+="\t".repeat(i);for(let r=0;r<c;++r){const c=n[r],u=a["#"]&&c[a["#"]],h=!s&&!u,f=a["@"],g=a[">"];let d=false;if(l+=o+"<"+t,f){const e=f.length;let t=0;while(t<e){const e=f[t++],r=c[e];if(r)l+=` ${(a["^"]?a["^"]+":":"")+e}="${r}"`}}if(g){let n="";const a=i+(s?r:0)+1;for(const t in g){const r=c[t];if(Array.isArray(r))n+=e(t,g,r,a);else if(S(r))n+=e(t,g,[r],a)}if(""!==n){if(l+=">\n"+n,h)l+=o+`</${t}>\n`}else l+=h?" />\n":">\n";d=true}else if(a["~"]){if(l+=">"+c.innerText,h)l+=`</${t}>\n`;d=true}else if(h)l+=" />\n";if(u){if(!d)l+=">\n";if(l+=u,!s)l+=o+`</${t}>\n`}if(s)o+="\t"}if(s)while(--c>=0)o=o.substring(1),l+=o+`</${t}>\n`;return l},formatTemplate:function(e,t,r=-1,n="\t"){const i=[],a=/\s*(<(\/)?([?\w]+)[^>]*>)\n?([^<]*)/g;let s,l="",o=r,c=false;while(s=a.exec(e))i.push({tag:s[1],closing:!!s[2],tagName:s[3],value:s[4]});const u=i.length;for(let e=0;e<u;++e){const a=i[e];let s=o;if(e>0){let r=false;if(a.closing)--o;else{const n=i[e+1];if(r=n.closing&&a.tagName===n.tagName,!/\/>\n*$/.exec(a.tag))if(t&&!x(a.value))if((null==n?void 0:n.closing)&&n.tagName===a.tagName)a.tag=a.tag.replace(/\s*>$/," />"),++e;else++o;else++o;++s}const u=a.tag.trim().split("\n"),h=u.length;for(let e=0;e<h;++e){const t=u[e];if(c)l+=t,c=false;else{const r=s+Math.min(e,1);l+=(r>0?n.repeat(r):"")+t.trim()}if(r&&1===h)c=true;else l+="\n"}}else l+=(r>0?n.repeat(r):"")+a.tag+"\n";l+=a.value}return l},replaceCharacterData:function(e,t){const r=[],n=(e=e.replace(/&nbsp;/g,"&#160;").replace(/&(?!#?[A-Za-z\d]{2,};)/g,"&amp;")).length;for(let i=0;i<n;++i)switch(e.charAt(i)){case"'":r.push({i:i,text:"\\'"});break;case'"':r.push({i:i,text:"&quot;"});break;case"<":r.push({i:i,text:"&lt;"});break;case">":r.push({i:i,text:"&gt;"});break;case"\t":if(t)r.push({i:i,text:"&#160;".repeat(t)});break;case"":r.push({i:i,text:" "});break;case"":r.push({i:i,text:"&#160;"});break}if(r.length>0){const t=e.split("");let n=0;while(n<r.length){const e=r[n++];t[e.i]=e.text}return t.join("")}return e}});class Iterator{constructor(e){this.children=e,this.index=-1,this._iterating=0,this.length=e.length}next(){if(this.hasNext())return this._iterating=1,this.children[++this.index]}hasNext(){return this.index<this.length-1}remove(){const e=this._iterating;if(0!==e)this.children.splice(this.index,1),this.index-=e,--this.length,this._iterating=0}forEachRemaining(e){while(this.hasNext())e(this.children[++this.index])}}class ListIterator extends Iterator{constructor(e){super(e)}add(e){const t=this._iterating;if(0!==t)this.children.splice(1===t?Math.min(++this.index,this.length):Math.max(--this.index,0),0,e),++this.length,this._iterating=0}set(e){if(0!==this._iterating)this.children[this.index]=e,this._iterating=0}nextIndex(){return Math.min(this.index+1,this.length)}hasPrevious(){return this.previousIndex()>0}previous(){if(this.hasPrevious())return this._iterating=-1,this.children[--this.index]}previousIndex(){return Math.max(this.index-1,-1)}}class Iter{constructor(e){this.children=e,this.index=-1,this.length=e.length}next(){const e=++this.index;return e<this.length?{value:this.children[e]}:{done:true}}}class Container{constructor(e){this._children=e||[]}[Symbol.iterator](){return new Iter(this._children)}item(e,t){const r=this._children;if(void 0!==e){if(t)if(e>=0&&e<r.length)return r[e]=t,t;else return;return r[e]}return r[r.length-1]}add(e){return this._children.push(e),this}addAll(e){return this._children=this._children.concat(e),this}remove(...e){const t=[],r=this._children;let n=0;while(n<e.length){const i=e[n++];for(let e=0;e<r.length;++e)if(r[e]===i){r.splice(e,1),t.push(i);break}}return t}removeAt(e){return this._children.splice(e,1)[0]}retainAs(e){return this._children=e,this}contains(e){return this._children.includes(e)}duplicate(){return this._children.slice(0)}clear(){return this._children.length=0,this}each(e){const t=this._children,r=t.length;let n=0;while(n<r)e(t[n],n++,t);return this}iterate(e,t){let r,n;if(t)({start:r,end:n}=t);return O(this._children,e,r,n)}every(e,t){const r=this._children;let n=r.length;if(n>0){let i=0;if(t){if(t.start)i=Math.max(t.start,0);if(t.end)n=Math.min(n,t.end)}while(i<n)if(!e(r[i],i++,r))return false;return true}return false}extract(e,t){let r,n;if(t)({also:r,error:n}=t);const i=[],a=this._children;for(let t=0;t<a.length;++t){const s=a[t];if(n&&n(s,t,a))break;if(e(s,t,a))null==r||r.call(s,s),i.push(s),a.splice(t--,1)}return i}findIndex(e,t){let r,n;if(t)({also:r,error:n}=t);const i=this._children,a=i.length;for(let t=0;t<a;++t){const a=i[t];if(n&&n(a,t,i))return-1;if(e(a,t,i))return null==r||r.call(a,a),t}return-1}find(e,t){let r,n,i,a,s;if(t)if(({also:r,error:n,cascade:i}=t),!i){if(({start:a,end:s}=t),a)a=Math.max(a,0);if(s)s=Math.min(this.length,s)}let l=false;const o=t=>{const c=t.children,u=null!=s?s:c.length;for(let t=a||0;t<u;++t){const a=c[t];if(n&&n(a,t,c)){l=true;break}if(e(a,t,c))return null==r||r.call(a,a),a;if(i&&a instanceof Container&&!a.isEmpty){const e=o(a);if(e)return null==r||r.call(a,a),e;else if(l)break}}};return o(this)}some(e,t){return void 0!==this.find(e,t)}cascade(e,t){let r,n;if(t)({also:r,error:n}=t);let i=false;const a=t=>{let s=[];const l=t.children,o=l.length;for(let t=0;t<o;++t){const o=l[t];if(n&&n(o,t,l)){i=true;break}if(!e||true===e(o))null==r||r.call(o,o),s.push(o);if(o instanceof Container&&!o.isEmpty)if(s=s.concat(a(o)),i)break}return s};return a(this)}map(e){return $(this._children,e)}same(e){return _(this._children,e)}partition(e){return B(this._children,e)}sort(e){return this._children.sort(e),this}joinWith(...e){let t=this._children,r=0;while(r<e.length)t=t.concat(e[r++].children);return this._children=t,this}iterator(){return new ListIterator(this._children)}get children(){return this._children}get isEmpty(){return 0===this._children.length}get length(){return this._children.length}}const Mt=new Set,Bt=new Set,_t=new Map,Dt={},Ot={};let zt,$t;function Wt(e,t){if(!e.includes(t))t.application=zt,e.push(t)}function jt(e){for(const t in e)delete e[t]}const Gt=e=>false===(null==e?void 0:e.initializing)&&e.length>0;function Vt(e,t){const r=null==zt?void 0:zt.extensionManager;if(r&&S(t))if("string"==typeof e){e=e.trim();const n=r.retrieve(e)||M(Mt,t=>t.name===e);if(n)Object.assign(n.options,t);else _t.set(e,t);return true}else if(e instanceof squared.base.Extension)return Object.assign(e.options,t),true;return false}function Ht(e){const t=null==zt?void 0:zt.extensionManager;if(t){const r=t.retrieve(e)||null;if(!r)for(const t of Bt)if(t.name===e)return t;return r}return null}function Xt(){null==zt||zt.reset()}const Ut={base:{Container:Container,ArrayIterator:Iterator,ListIterator:ListIterator},client:V,color:be,css:xt,dom:Ct,math:ne,regex:l,session:It,util:W,xml:Pt};e.appendFromArchive=function(e,t){var r;if(Gt(zt)&&x(e)&&S(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length))return zt.appendFromArchive(e,t);else return Rt()},e.appendToArchive=function(e,t){if(Gt(zt)&&x(e))return zt.finalize(),zt.appendToArchive(e,t);else return Rt()},e.close=function(){if(Gt(zt))zt.finalize()},e.configure=Vt,e.copyToDisk=function(e,t){if(Gt(zt)&&x(e))return zt.finalize(),zt.copyToDisk(e,t);else return Rt()},e.createFrom=function(e,t){var r;if(Gt(zt)&&x(e)&&S(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length))return zt.createFrom(e,t);else return Rt()},e.exclude=function(e){const t=null==zt?void 0:zt.extensionManager;if(t){if("string"==typeof e)e=t.retrieve(e.trim());if(e instanceof squared.base.Extension)return Mt.delete(e),Bt.delete(e),t.exclude(e)}return false},e.get=function(...e){const t=new Map,r=e.length;if(zt)for(const n of zt.session.active.keys()){let i=0;while(i<r){let r=e[i++];if("string"==typeof r)r=document.getElementById(r);if(r instanceof Element){const e=Ft(r,n);if(e)if(t.has(r))t.get(r).push(e);else t.set(r,[e])}}}return r<=1?1===t.size?t.values().next().value:[]:t},e.include=function(e,t){const r=null==zt?void 0:zt.extensionManager;if(r){if("string"==typeof e)e=e.trim(),e=zt.builtInExtensions[e]||Ht(e);if(e instanceof squared.base.Extension){if(Bt.add(e),!r.include(e))Mt.add(e);if(t)Vt(e,t);return true}}return false},e.latest=function(){let e="";if(zt)for(const t of zt.session.active.keys())e=t;return e},e.lib=Ut,e.parseDocument=function(...e){if(zt){const t=zt.extensionManager;if(t)if(Mt.size>0){for(const e of Mt)t.include(e);Mt.clear()}if(_t.size>0){for(const[e,t]of _t.entries())Vt(e,t);_t.clear()}if(!zt.closed)return zt.parseDocument(...e);else if(!Dt.showErrorMessages||confirm("ERROR: Document is closed. Reset and rerun?"))return zt.reset(),zt.parseDocument(...e)}return Rt()},e.ready=function(){return false===(null==zt?void 0:zt.initializing)&&!zt.closed},e.reset=Xt,e.retrieve=Ht,e.saveToArchive=function(e,t){if(Gt(zt))return zt.finalize(),zt.saveToArchive(e,t);else return Rt()},e.setFramework=function(e,t,r){const n=void 0!==$t;if($t!==e){const i=r?e.cached():e.create();if(!$t)Object.assign(i.userSettings,Dt);if(S(t))Object.assign(i.userSettings,t);jt(Dt),Object.assign(Dt,i.userSettings),zt=i.application,zt.userSettings=Dt;const{builtInExtensions:a,extensions:s}=zt;s.length=0;for(const e of Dt.builtInExtensions){const t=a[e];if(t)Wt(s,t);else{const t=e+".";for(const e in a)if(e.startsWith(t))Wt(s,a[e])}}if(n)jt(Ot);Object.assign(Ot,e.system),$t=e}if(n)Xt()},e.setHostname=function(e){var t;const r=null===(t=null==zt?void 0:zt.resourceHandler)||void 0===t?void 0:t.fileHandler;if(r){const t=i.PROTOCOL.exec(e);if(null==t?void 0:t[1].startsWith("http"))r.hostname=t[1]+t[2]+(t[3]||"")}},e.setViewModel=function(e){if(zt)zt.viewModel=e},e.settings=Dt,e.system=Ot,e.toString=function(){return(null==zt?void 0:zt.toString())||""},Object.defineProperty(e,"__esModule",{value:true})}));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.base={}))}(this,(function(e){"use strict";class NodeList extends squared.lib.base.Container{constructor(e){super(e)}add(e,t=false,i=false){var s;if(super.add(e),t)null===(s=this.afterAdd)||void 0===s||s.call(this,e,i);return this}reset(){return this.clear(),this}}const{CSS_PROPERTIES:t,checkMediaRule:i,getSpecificity:s,hasComputedStyle:n,insertStyleSheetRule:a,parseSelectorText:l}=squared.lib.css,{FILE:r,STRING:o}=squared.lib.regex,{frameworkNotInstalled:c,getElementCache:h,setElementCache:d}=squared.lib.session,{capitalize:u,convertCamelCase:f,isString:g,parseMimeType:p,plainMap:m,promisify:b,resolvePath:x,trimBoth:y}=squared.lib.util,v=new RegExp(`url\\("?(${o.DATAURI})"?\\),?\\s*`,"g"),w=["backgroundImage","listStyleImage","content"];function S(e,t,i=0,s=0){if(g(t))if(i>0&&s>0||!e.getImage(t))e.addUnsafeData("image",t,{width:i,height:s,uri:t})}function E(e,t){if(g(t))for(const i of t.split(","))S(e,x(i.trim().split(" ")[0]))}const k=e=>r.SVG.test(e),_=(e,t)=>{var i;return(null===(i=new RegExp(`\\s*@${e}([^{]+)`).exec(t))||void 0===i?void 0:i[1].trim())||t};class Application{constructor(e,t,i,s,n){if(this.framework=e,this.builtInExtensions={},this.extensions=[],this.closed=false,this.session={active:new Map,unusedStyles:new Set},this._nextId=0,this._controllerHandler=new i(this),s)this._resourceHandler=new s(this);if(n)this._extensionManager=new n(this);this._afterInsertNode=this._controllerHandler.afterInsertNode,this.Node=t}createNode(e,t){return new this.Node(this.nextId,e,t.element)}copyToDisk(e,t){var i,s;return(null===(s=null===(i=this._resourceHandler)||void 0===i?void 0:i.fileHandler)||void 0===s?void 0:s.copyToDisk(e,t))||c()}appendToArchive(e,t){var i,s;return(null===(s=null===(i=this._resourceHandler)||void 0===i?void 0:i.fileHandler)||void 0===s?void 0:s.appendToArchive(e,t))||c()}saveToArchive(e,t){var i;const s=this._resourceHandler;return s&&(null===(i=s.fileHandler)||void 0===i?void 0:i.saveToArchive(e||s.userSettings.outputArchiveName,t))||c()}createFrom(e,t){var i,s;return(null===(s=null===(i=this._resourceHandler)||void 0===i?void 0:i.fileHandler)||void 0===s?void 0:s.createFrom(e,t))||c()}appendFromArchive(e,t){var i,s;return(null===(s=null===(i=this._resourceHandler)||void 0===i?void 0:i.fileHandler)||void 0===s?void 0:s.appendFromArchive(e,t))||c()}finalize(){return this.closed}reset(){var e;this._nextId=0,this.session.active.clear(),this.session.unusedStyles.clear(),this.controllerHandler.reset(),null===(e=this.resourceHandler)||void 0===e||e.reset(),this.extensions.forEach(e=>e.subscribers.clear()),this.closed=false}parseDocument(...e){const t=this._resourceHandler,i=true===(null==t?void 0:t.userSettings.preloadImages),s=this._controllerHandler.generateSessionId,l=new Set,r=[],o={cache:new NodeList,excluded:new NodeList,rootElements:l,initializing:false};let c,h;this.session.active.set(s,o),this._controllerHandler.init(),this.setStyleMap(s);const d=a("html > body { overflow: hidden !important; }");if(0===e.length)c=this.mainElement,l.add(c);else{let t=0;while(t<e.length){let i=e[t++];if("string"==typeof i)i=document.getElementById(i);if(i&&n(i)){if(!c)c=i;l.add(i)}}}if(!c)return Promise.reject(new Error("Document root not found."));if(t)for(const e of l)e.querySelectorAll("picture > source").forEach(e=>E(t,e.srcset)),e.querySelectorAll("video").forEach(e=>S(t,e.poster)),e.querySelectorAll("input[type=image]").forEach(e=>S(t,e.src,e.width,e.height)),e.querySelectorAll("object, embed").forEach(e=>{const i=e.data||e.src;if(i&&(e.type.startsWith("image/")||p(i).startsWith("image/")))S(t,i.trim())}),e.querySelectorAll("svg use").forEach(e=>{const i=e.href.baseVal||e.getAttributeNS("xlink","href");if(i&&i.indexOf("#")>0){const e=x(i.split("#")[0]);if(k(e))S(t,e)}});const u=()=>{const t=this.extensions;let i,n;if(o.initializing=false,h){n=h.length,i=0;while(i<n){const e=h[i++];if(e.parentElement)c.removeChild(e)}}n=t.length,i=0;while(i<n)t[i++].beforeParseDocument(s);const a=[];for(const e of l){const t=this.createCache(e,s);if(t)this.afterCreateCache(t),a.push(t)}i=0;while(i<n)t[i++].afterParseDocument(s);try{document.head.removeChild(d)}catch(e){}return e.length>1?a:a[0]};if(i){const{image:e,rawData:i}=t.mapOfAssets;h=[];for(const t of e.values()){const e=t.uri;if(k(e))r.push(e);else if(0===t.width||0===t.height){const i=document.createElement("img");if(i.src=e,i.naturalWidth>0&&i.naturalHeight>0)t.width=i.naturalWidth,t.height=i.naturalHeight;else c.appendChild(i),h.push(i)}}for(const[t,s]of i.entries()){const i=s.mimeType;if((null==i?void 0:i.startsWith("image/"))&&!i.endsWith("svg+xml")){const n=document.createElement("img");n.src=`data:${i};${s.base64?"base64,"+s.base64:s.content}`;const{naturalWidth:a,naturalHeight:l}=n;if(a>0&&l>0)s.width=a,s.height=l,e.set(t,{width:a,height:l,uri:s.filename});else document.body.appendChild(n),h.push(n)}}}if(t)for(const e of l)e.querySelectorAll("img").forEach(e=>{if(E(t,e.srcset),!i)t.addImage(e);else if(k(e.src))r.push(e.src);else if(e.complete)t.addImage(e);else r.push(e)});if(r.length>0)return o.initializing=true,Promise.all(m(r,e=>new Promise((t,i)=>{if("string"==typeof e)(async()=>{const i=await fetch(e,{method:"GET",headers:new Headers({Accept:"application/xhtml+xml, image/svg+xml","Content-Type":"image/svg+xml"})});t(await i.text())})();else e.addEventListener("load",()=>t(e)),e.addEventListener("error",()=>i(e))}))).then(e=>{const i=e.length;for(let s=0;s<i;++s){const i=e[s];if("string"==typeof i){const e=r[s];if("string"==typeof e)t.addRawData(e,"image/svg+xml",i,{encoding:"utf8"})}else t.addImage(i)}return u()}).catch(e=>{let t=e;if(e instanceof Event)t=e.target;const i=t instanceof HTMLImageElement?t.src:"";return!g(i)||!this.userSettings.showErrorMessages||confirm("FAIL: "+i)?u():Promise.reject(i)});else return b(u)()}createCache(e,t){const i=this.createRootNode(e,t);if(i)this.controllerHandler.sortInitialCache(this.getProcessingCache(t));return i}setStyleMap(e){const t=document.styleSheets,s=t.length;let n=0;while(n<s){const s=t[n++];let a;try{a=s.media.mediaText}catch(e){}if(!g(a)||i(a))this.applyStyleSheet(s,e)}}getProcessing(e){return this.session.active.get(e)}getProcessingCache(e){var t;return(null===(t=this.session.active.get(e))||void 0===t?void 0:t.cache)||new NodeList}getDatasetName(e,t){return t.dataset[e+u(this.systemName)]||t.dataset[e]}setDatasetName(e,t,i){t.dataset[e+u(this.systemName)]=i}toString(){return this.systemName}createRootNode(e,t){const i=this.getProcessing(t),s=this.extensionsCascade,n=this.cascadeParentNode(i.cache,i.excluded,i.rootElements,e,t,0,s.length>0?s:void 0);if(n){const s=new this.Node(0,t,e.parentElement);if(this._afterInsertNode(s),n.parent=s,n.actualParent=s,"HTML"===n.tagName)i.documentElement=n;else if("HTML"===s.tagName)i.documentElement=s;n.depth=0,n.childIndex=0,n.documentRoot=true,i.node=n}return n}cascadeParentNode(e,t,i,s,n,a,l){const r=this.insertNode(s,n);if(r){const o=this.controllerHandler;if(0===a)e.add(r);if(o.preventNodeCascade(r))return r;const c=a+1,h=s.childNodes,d=h.length,u=new Array(d),f=new Array(s.childElementCount);let g=true,p=0,m=0,b=0;while(p<d){const s=h[p++];let a;if("#"===s.nodeName.charAt(0)){if("#text"===s.nodeName)a=this.insertNode(s,n),null==a||a.cssApply(r.textStyle)}else if(o.includeElement(s)){if(a=this.cascadeParentNode(e,t,i,s,n,c,l),a)f[b++]=a,g=false}else if(a=this.insertNode(s,n),a)t.add(a),g=false;if(a)a.$parent=r,a.childIndex=m,a.actualParent=r,a.depth=c,u[m++]=a,e.add(a)}if(u.length=m,f.length=b,r.naturalChildren=u,r.naturalElements=f,r.inlineText=g,r.retainAs(u),b>0&&this.userSettings.createQuerySelectorMap)r.queryMap=this.createQueryMap(f,b)}return r}createQueryMap(e,t){var i;const s=[e];let n=0;while(n<t){const t=e[n++].queryMap;if(t){const e=t.length;for(let n=0;n<e;++n){const e=n+1;s[e]=(null===(i=s[e])||void 0===i?void 0:i.concat(t[n]))||t[n]}}}return s}applyStyleRule(e,i){var n,a,r,o,c,u,g,p;const m=this.resourceHandler,b=(null===(n=e.parentStyleSheet)||void 0===n?void 0:n.href)||location.href,E=e.cssText;switch(e.type){case CSSRule.SUPPORTS_RULE:this.applyCSSRuleList(e.cssRules,i);break;case CSSRule.STYLE_RULE:{const n=this.session.unusedStyles,r={},o={};{const i=e.style,s=Array.from(i),n=s.length;let l=0;while(l<n){const e=s[l++];r[f(e)]=i[e]}const c=/\s*([a-z-]+):[^!;]+!important;/g;let h;while(h=c.exec(E)){const e=f(h[1]),i=null===(a=t[e])||void 0===a?void 0:a.value;if(Array.isArray(i)){l=0;while(l<i.length)o[i[l++]]=true}else o[e]=true}l=0;while(l<3){const e=w[l++],t=r[e];if(t&&"initial"!==t){let i;while(h=v.exec(t))if(h[2]){if(m){const[e,t]=h[2].trim().split(/\s*;\s*/);m.addRawData(h[1],e,h[3],{encoding:t})}}else{const e=x(h[3],b);if(""!==e){if(m)S(m,e);i=(i||t).replace(h[0],`url("${e}")`)}}if(i)r[e]=i;v.lastIndex=0}}}for(const t of l(e.selectorText,true)){const e=s(t),[a,l]=t.split("::"),c=l?"::"+l:"",u=document.querySelectorAll(a||"*"),f=u.length;if(0===f){n.add(t);continue}let g=0;while(g<f){const t=u[g++],s="styleMap"+c,n="styleSpecificity"+c,a=h(t,s,i);if(a){const s=h(t,n,i)||{};for(const t in r){const i=s[t],n=e+(o[t]?1e3:0);if(void 0===i||n>=i)a[t]=r[t],s[t]=n}}else{const a=Object.assign({},r),l={};for(const t in a)l[t]=e+(o[t]?1e3:0);d(t,"sessionId","0",i),d(t,s,i,a),d(t,n,i,l)}}}break}case CSSRule.FONT_FACE_RULE:if(m){const e=null===(r=/\s*@font-face\s*{([^}]+)}\s*/.exec(E))||void 0===r?void 0:r[1];if(e){const t=y(((null===(o=/\s*font-family:([^;]+);/.exec(e))||void 0===o?void 0:o[1])||"").trim(),'"');if(""!==t){const i=((null===(c=/\s*src:\s*([^;]+);/.exec(e))||void 0===c?void 0:c[1])||"").split(","),s=i.length;if(s>0){const n=(null===(u=/\s*font-style:\s*(\w+)\s*;/.exec(e))||void 0===u?void 0:u[1].toLowerCase())||"normal",a=parseInt((null===(g=/\s*font-weight:\s*(\d+)\s*;/.exec(e))||void 0===g?void 0:g[1])||"400");let l=0;while(l<s){const e=/\s*(url|local)\((?:"((?:[^"]|\\")+)"|([^)]+))\)(?:\s*format\("?([\w-]+)"?\))?\s*/.exec(i[l++]);if(e){const i={fontFamily:t,fontWeight:a,fontStyle:n,srcFormat:(null===(p=e[4])||void 0===p?void 0:p.toLowerCase().trim())||"truetype"},s=(e[2]||e[3]).trim();if("url"===e[1])i.srcUrl=x(s,b);else i.srcLocal=s;m.addFont(i)}}}}}}break}}applyStyleSheet(e,t){var s,n;try{const a=e.cssRules;if(a){const e=a.length;let l=0;while(l<e){const e=a[l++];switch(e.type){case CSSRule.STYLE_RULE:case CSSRule.FONT_FACE_RULE:this.applyStyleRule(e,t);break;case CSSRule.IMPORT_RULE:{const i=x(e.href,(null===(s=e.parentStyleSheet)||void 0===s?void 0:s.href)||location.href);if(""!==i)null===(n=this.resourceHandler)||void 0===n||n.addRawData(i,"text/css",void 0,{encoding:"utf8"});this.applyStyleSheet(e.styleSheet,t);break}case CSSRule.MEDIA_RULE:if(i(e.conditionText||_("media",e.cssText)))this.applyCSSRuleList(e.cssRules,t);break;case CSSRule.SUPPORTS_RULE:if(CSS.supports&&CSS.supports(e.conditionText||_("supports",e.cssText)))this.applyCSSRuleList(e.cssRules,t);break}}}}catch(t){(this.userSettings.showErrorMessages?alert:console.log)("CSS cannot be parsed inside <link> tags when loading files directly from your hard drive or from external websites. Either use a local web server, embed your CSS into a <style> tag, or you can also try using a different browser. See the README for more detailed instructions.\n\n"+e.href+"\n\n"+t)}}applyCSSRuleList(e,t){const i=e.length;let s=0;while(s<i)this.applyStyleRule(e[s++],t)}get mainElement(){return document.documentElement}get initializing(){for(const e of this.session.active.values())if(e.initializing)return true;return false}get controllerHandler(){return this._controllerHandler}get resourceHandler(){return this._resourceHandler}get extensionManager(){return this._extensionManager}get extensionsCascade(){return[]}get childrenAll(){const e=this.session.active;if(1===e.size)return e.values().next().value.cache.children;let t=[];for(const i of e.values())t=t.concat(i.cache.children);return t}get nextId(){return++this._nextId}get length(){return this.session.active.size}}Application.KEY_NAME="squared.application";class Controller{constructor(e){this.application=e,this.localSettings={mimeType:{font:"*",image:"*",audio:"*",video:"*"}}}init(){}sortInitialCache(e){}applyDefaultStyles(e,t){}reset(){}includeElement(e){return true}preventNodeCascade(e){return false}get generateSessionId(){return Date.now().toString()+"-"+this.application.session.active.size}get afterInsertNode(){return e=>{}}get userSettings(){return this.application.userSettings}}class Extension{constructor(e,t,i){if(this.name=e,this.framework=t,this.options={},this.dependencies=[],this.subscribers=new Set,i)Object.assign(this.options,i)}require(e,t=false){this.dependencies.push({name:e,preload:t})}beforeParseDocument(e){}afterParseDocument(e){}set application(e){this._application=e,this._controller=e.controllerHandler}get application(){return this._application}get controller(){return this._controller}}const{hasBit:T,isObject:C}=squared.lib.util;const{frameworkNotInstalled:A}=squared.lib.session,{fromLastIndexOf:I,trimEnd:R}=squared.lib.util;class File{constructor(){this.assets=[]}static downloadFile(e,t,i){const s=new Blob([e],{type:i||"application/octet-stream"}),n=window.URL.createObjectURL(s),a=document.createElement("a");if(a.style.setProperty("display","none"),a.setAttribute("href",n),a.setAttribute("download",t),!a.download)a.setAttribute("target","_blank");const l=document.body;l.appendChild(a),a.click(),l.removeChild(a),setTimeout(()=>window.URL.revokeObjectURL(n),1)}getDataMap(e){}getCopyQueryParameters(e){return""}getArchiveQueryParameters(e){return""}createFrom(e,t){return this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{format:e}))}appendFromArchive(e,t){return this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{appendTo:e,format:e.substring(e.lastIndexOf(".")+1)}))}addAsset(e){if(e.content||e.bytes||e.base64||e.uri){const{pathname:t,filename:i}=e,s=this.assets.find(e=>e.pathname===t&&e.filename===i);if(s)Object.assign(s,e);else this.assets.push(e)}}reset(){this.assets.length=0}copying(e){if(this.hasHttpProtocol()){const t=this.createRequestBody(e.assets,e);if(t&&e.directory)return fetch(this.hostname+"/api/assets/copy?to="+encodeURIComponent(e.directory.trim())+"&empty="+(this.userSettings.outputEmptyCopyDirectory?"1":"0")+this.getCopyQueryParameters(e),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(t)}).then(async e=>await e.json()).then(t=>{if(t){if("function"==typeof e.callback)e.callback(t);if(t.system)(this.userSettings.showErrorMessages?alert:console.log)(t.application+"\n\n"+t.system)}return t})}else(this.userSettings.showErrorMessages?alert:console.log)("SERVER (required): See README for instructions");return A()}archiving(e){if(this.hasHttpProtocol()){const t=this.createRequestBody(e.assets,e);if(t&&e.filename)return fetch(this.hostname+"/api/assets/archive?filename="+encodeURIComponent(e.filename.trim())+"&format="+(e.format||this.userSettings.outputArchiveFormat).trim().toLowerCase()+"&to="+encodeURIComponent((e.copyTo||"").trim())+"&append_to="+encodeURIComponent((e.appendTo||"").trim())+this.getArchiveQueryParameters(e),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(t)}).then(async e=>await e.json()).then(t=>{if(t){if("function"==typeof e.callback)e.callback(t);const i=t.zipname;if(i)fetch("/api/browser/download?filepath="+encodeURIComponent(i)).then(async e=>File.downloadFile(await e.blob(),I(i,"/","\\")));else if(t.system)(this.userSettings.showErrorMessages?alert:console.log)(t.application+"\n\n"+t.system)}return t})}else(this.userSettings.showErrorMessages?alert:console.log)("SERVER (required): See README for instructions");return A()}createRequestBody(e,t){const i=e?e.concat(this.assets):this.assets,s=i[0];if(s){if(t.exclusions)s.exclusions=t.exclusions;const e=this.getDataMap(t);if(e)s.dataMap=e;return i}}hasHttpProtocol(){return(this._hostname||location.protocol).startsWith("http")}set hostname(e){if(null==e?void 0:e.startsWith("http"))this._hostname=R(e,"/")}get hostname(){return this._hostname||location.origin}}const{USER_AGENT:N,isUserAgent:M}=squared.lib.client,{CSS_PROPERTIES:P,CSS_TRAITS:B,CSS_UNIT:L,checkStyleValue:W,checkWritingMode:F,formatPX:O,getInheritedStyle:U,getStyle:H,hasComputedStyle:D,isAngle:V,isLength:q,isPercent:z,isTime:X,isPx:j,parseSelectorText:G,parseUnit:Y}=squared.lib.css,{ELEMENT_BLOCK:$,assignRect:K,getNamedItem:Q,getRangeClientRect:J,newBoxRectDimension:Z}=squared.lib.dom,{CSS:ee,FILE:te}=squared.lib.regex,{actualClientRect:ie,actualTextRangeRect:se,deleteElementCache:ne,getElementAsNode:ae,getElementCache:le,getPseudoElt:re,setElementCache:oe}=squared.lib.session,{aboveRange:ce,belowRange:he,convertCamelCase:de,convertFloat:ue,convertInt:fe,hasBit:ge,hasValue:pe,isNumber:me,isObject:be,iterateArray:xe,spliceString:ye,splitEnclosing:ve}=squared.lib.util,{SELECTOR_ATTR:we,SELECTOR_G:Se,SELECTOR_LABEL:Ee,SELECTOR_PSEUDO_CLASS:ke}=ee,_e=P.borderTop.value,Te=P.borderRight.value,Ce=P.borderBottom.value,Ae=P.borderLeft.value;function Ie(e,t,i,s,n){if(n!==s)if(e.style.setProperty(t,s),Ne(s,e.style.getPropertyValue(t)))oe(e,t,i,"auto"!==s?n:"");else return false;return true}function Re(e,t,i){const s=le(e,t,i);if(void 0!==s)e.style.setProperty(t,s),ne(e,t,i)}const Ne=(e,t)=>e===t||q(e,true)&&j(t),Me=(e,t)=>e.id<t.id?-1:1,Pe=e=>parseFloat(e.getPropertyValue("font-size")),Be=e=>/\dem$/.test(e),Le=e=>/^(inline|table-cell)/.test(e);function We(e,t,i,s){const n=(s||e).css(t);if(me(n))return parseFloat(n);else if("inherit"===n&&!s)return We(e,t,i,e.actualParent);return i}function Fe(e,...t){const i=e.cssAscend("textAlign",{startSelf:e.textElement&&e.blockStatic&&!e.hasPX("width",{initial:true})});return""!==i&&t.includes(i)&&(e.blockStatic?e.textElement&&!e.hasPX("width",{initial:true})&&!e.hasPX("maxWidth",{initial:true}):e.display.startsWith("inline"))}function Oe(e,t,i,s,n){const a={dimension:i},l=t[i],r=l?e.parseUnit(l,a):0;let o=Math.max(r,t[s]?e.parseUnit(t[s],a):0);if(0===o&&e.styleElement){const t=e.element;switch(t.tagName){case"IMG":case"INPUT":if("image"!==t.type)break;case"TD":case"TH":case"SVG":case"IFRAME":case"VIDEO":case"AUDIO":case"CANVAS":case"OBJECT":case"EMBED":{const s=Q(t,i);if(""!==s)if(o=me(s)?parseFloat(s):e.parseUnit(s,a),o>0)e.css(i,z(s)?s:s+"px");break}}}let c=0;if(r>0&&!e.imageElement){const s=t[n];if(s)if(l===s)delete t[n];else if(c=e.parseUnit(s,{dimension:i}),c>0&&c<=r&&l&&q(l))c=0,t[i]=s,delete t[n]}return c>0?Math.min(o,c):o}function Ue(e,t,i){if(!e.plainText){switch(e.css(i[1])){case"none":case"initial":case"hidden":return 0}const s=e.css(i[0]),n=q(s,true)?e.parseUnit(s,{dimension:t}):ue(e.style[i[0]]);if(n>0)return Math.max(Math.round(n),1)}return 0}function He(e,t,i){var s;switch(e.display){case"table":if(!i&&"collapse"===e.css("borderCollapse"))return 0;break;case"table-row":return 0;case"table-cell":if(i){switch(e.tagName){case"TD":case"TH":return 0;default:{const i=e.ascend({condition:e=>"TABLE"===e.tagName})[0];if(i){const[s,n]=i.css("borderSpacing").split(" ");switch(t){case"marginTop":case"marginBottom":return n?e.parseUnit(n,{dimension:"height",parent:false}):e.parseUnit(s,{parent:false});case"marginRight":if(e.actualParent.lastChild!==e)return e.parseUnit(s,{parent:false});case"marginLeft":return 0}}break}}return 0}break}return e.parseUnit(e.css(t),{parent:!(true===(null===(s=e.actualParent)||void 0===s?void 0:s.gridElement))})}function De(e,t){if(!e.positionStatic){const i=Xe.call(e,t,{modified:true});if(q(i))return e.parseUnit(i,{dimension:"left"===t||"right"===t?"width":"height"});else if(z(i)&&e.styleElement)return ue(e.style[t])}return 0}function Ve(e,t,i,s,n,a){var l;if(i.all)return true;let r=i.tagName;if(r&&r!==t.tagName.toUpperCase())return false;if(i.id&&i.id!==t.elementId)return false;const{attrList:o,classList:c,notList:h,pseudoList:d}=i;if(d){const i=t.actualParent;r=t.tagName;let s=0;while(s<d.length){const o=d[s++];switch(o){case":first-child":case":nth-child(1)":if(t!==i.firstChild)return false;break;case":last-child":case":nth-last-child(1)":if(t!==i.lastChild)return false;break;case":only-child":if(i.naturalElements.length>1)return false;break;case":only-of-type":{const e=i.naturalElements,t=e.length;let s=0,n=0;while(s<t)if(e[s++].tagName===r&&++n>1)return false;break}case":first-of-type":{const e=i.naturalElements,s=e.length;let n=0;while(n<s){const i=e[n++];if(i.tagName===r){if(i!==t)return false;break}}break}case":nth-child(n)":case":nth-last-child(n)":break;case":empty":if(t.element.childNodes.length>0)return false;break;case":checked":switch(r){case"INPUT":if(!t.toElementBoolean("checked"))return false;break;case"OPTION":if(!t.toElementBoolean("selected"))return false;break;default:return false}break;case":enabled":if(!t.inputElement||t.toElementBoolean("disabled"))return false;break;case":disabled":if(!t.inputElement||!t.toElementBoolean("disabled"))return false;break;case":read-only":{const e=t.element;if(e.isContentEditable||("INPUT"===r||"TEXTAREA"===r)&&!e.readOnly)return false;break}case":read-write":{const e=t.element;if(!e.isContentEditable||("INPUT"===r||"TEXTAREA"===r)&&e.readOnly)return false;break}case":required":if(!t.inputElement||"BUTTON"===r||!t.toElementBoolean("required"))return false;break;case":optional":if(!t.inputElement||"BUTTON"===r||t.toElementBoolean("required"))return false;break;case":placeholder-shown":if(!(("INPUT"===r||"TEXTAREA"===r)&&""!==t.toElementString("placeholder")))return false;break;case":default":switch(r){case"INPUT":{const e=t.element;switch(e.type){case"radio":case"checkbox":if(!e.checked)return false;break;default:return false}break}case"OPTION":if(void 0===t.element.attributes.selected)return false;break;case"BUTTON":{const e=t.ascend({condition:e=>"FORM"===e.tagName})[0];if(e){let i=false;const s=t.element;if(xe(e.element.querySelectorAll("*"),e=>{switch(e.tagName){case"BUTTON":return i=s===e,true;case"INPUT":switch(e.type){case"submit":case"image":return i=s===e,true}break}}),!i)return false}break}default:return false}break;case":in-range":case":out-of-range":if("INPUT"===r){const e=t.element,i=parseFloat(e.value);if(!isNaN(i)){const t=parseFloat(e.min),s=parseFloat(e.max);if(i>=t&&i<=s){if(":out-of-range"===o)return false}else if(":in-range"===o)return false}else if(":in-range"===o)return false}else return false;break;case":indeterminate":if("INPUT"===r){const e=t.element;switch(e.type){case"checkbox":if(!e.indeterminate)return false;break;case"radio":if(e.checked)return false;else if(e.name)if(xe(((null===(l=t.ascend({condition:e=>"FORM"===e.tagName})[0])||void 0===l?void 0:l.element)||document).querySelectorAll(`input[type=radio][name="${e.name}"`),e=>e.checked)===1/0)return false;break;default:return false}}else if("PROGRESS"===r){if(-1!==t.toElementInt("value",-1))return false}else return false;break;case":target":if(""===location.hash)return false;else if(!(location.hash==="#"+t.elementId||"A"===r&&location.hash==="#"+t.toElementString("name")))return false;break;case":scope":if(!n||">"===a&&t!==e)return false;break;case":root":if(!n&&"HTML"!==e.tagName)return false;break;case":link":case":visited":case":any-link":case":hover":case":focus":case":focus-within":case":valid":case":invalid":{const e=t.element;if(xe(i.element.querySelectorAll(":scope > "+o),t=>t===e)!==1/0)return false;break}default:{let e=/^:nth(-last)?-(child|of-type)\((.+)\)$/.exec(o);if(e){const s=e[3].trim();let n=i.naturalElements;if(e[1])n=n.slice(0).reverse();const a="child"===e[2]?n.indexOf(t)+1:n.filter(e=>e.tagName===r).indexOf(t)+1;if(a>0){if(me(s)){if(parseInt(s)!==a)return false}else switch(s){case"even":if(a%2!=0)return false;break;case"odd":if(a%2==0)return false;break;default:{const e=/^(-)?(\d+)?n\s*([+-]\d+)?$/.exec(s);if(e){const t=fe(e[3]);if(e[2]){if(e[1])return false;const i=parseInt(e[2]);if(0!==i){if(a!==t)for(let e=i;;e+=i){const e=i+t;if(e===a)break;else if(e>a)return false}}else if(a!==t)return false}else if(e[3])if(t>0){if(e[1]){if(a>t)return false}else if(a<t)return false}else return false}break}}continue}}else if(t.attributes.lang)if(e=/^:lang\((.+)\)$/.exec(o),e)if(t.attributes.lang.trim().toLowerCase()===e[1].trim().toLowerCase())continue;return false}}}}if(h){let i=0;while(i<h.length){const a=h[i++],l={};switch(a.charAt(0)){case".":l.classList=[a];break;case"#":l.id=a.substring(1);break;case":":l.pseudoList=[a];break;case"[":{const e=we.exec(a);if(e){const t="i"===e[6];let i=e[3]||e[4]||e[5]||"";if(t)i=i.toLowerCase();l.attrList=[{key:e[1],symbol:e[2],value:i,caseInsensitive:t}],we.lastIndex=0}else continue;break}default:if(/^[a-z\d+#.-]+$/i.test(a))l.tagName=a;else return false;break}if(Ve(e,t,l,s,n))return false}}if(c){const e=t.element.classList;let i=0;while(i<c.length)if(!e.contains(c[i++]))return false}if(o){const e=t.attributes;let i=0;while(i<o.length){const t=o[i++];let s;if(t.endsWith){const i=new RegExp(`^(.+:)?${t.key}$`);for(const t in e)if(i.test(t)){s=e[t];break}}else s=e[t.key];if(void 0===s)return false;else{const e=t.value;if(e){if(t.caseInsensitive)s=s.toLowerCase();if(t.symbol)switch(t.symbol){case"~":if(!s.split(/\s+/).includes(e))return false;break;case"^":if(!s.startsWith(e))return false;break;case"$":if(!s.endsWith(e))return false;break;case"*":if(!s.includes(e))return false;break;case"|":if(s!==e&&!s.startsWith(e+"-"))return false;break}else if(s!==e)return false}}}}return true}function qe(e,t,i,s,n,a){const l=e.depth,r=t[s],o=t.length,c=s===o-1,h=[],d=a.length;let u=0;while(u<d){const t=a[u++];if(n){const s=t.actualParent;if(">"===n){if(Ve(e,s,r,i,c,n))h.push(s)}else{const a=s.naturalElements;switch(n){case"+":{const s=a.indexOf(t)-1;if(s>=0){const t=a[s];if(Ve(e,t,r,i,c,n))h.push(t)}break}case"~":{const s=a.length;let l=0;while(l<s){const s=a[l++];if(s===t)break;else if(Ve(e,s,r,i,c,n))h.push(s)}break}}}}else if(t.depth-l>=o-s){let s=t.actualParent;do{if(Ve(e,s,r,i,c))h.push(s);s=s.actualParent}while(s)}}return h.length?++s===o?true:qe(e,t,i,s,r.adjacent,h):false}const ze=e=>e.naturalChild&&(0===e.length||Le(e.display))&&!e.floating&&true!==e.autoMargin.horizontal;function Xe(e,t){return!this._preferInitial&&this._styleMap[e]||this.cssInitial(e,t)}class Node extends squared.lib.base.Container{constructor(e,t="0",i){if(super(),this.id=e,this.sessionId=t,this.documentRoot=false,this.depth=-1,this.childIndex=1/0,this._preferInitial=false,this._element=null,this._data={},this._inlineText=false,this._parent=null,i)this._element=i,this.style=!this.pseudoElement?H(i):H(i.parentElement,re(i,t));else this.style={},this._styleMap={}}init(){const e=this._element;if(e){const t=this.sessionId;if(!this.syncWith(t))this._styleMap={};if("0"!==t)oe(e,"node",t,this)}}syncWith(e,t){const i=this._element;if(i){if(!e)if((e=le(i,"sessionId","0"))===this.sessionId)return true;const s=le(i,"styleMap",e);if(s){if(this.styleElement){const e=this.style,t={},n=e.writingMode;if(!this.pseudoElement){const e=Array.from(i.style),t=e.length;if(t>0){let n=0;while(n<t){const t=e[n++];s[de(t)]=i.style.getPropertyValue(t)}}}for(let a in s){const l=s[a],r=F(a,n);if(""!==r)if(!s[r])a=r;else continue;const o=W(i,a,l,e);if(""!==o)t[a]=o}this._styleMap=t}else this._styleMap=s;if(this._cssStyle=s,t)this._cached={};return true}}return false}saveAsInitial(){this._initial={styleMap:Object.assign({},this._styleMap),children:this.length>0?this.duplicate():void 0,bounds:this._bounds}}data(e,t,i,s=true){const n=this._data;if(null===i){if(n[e])delete n[e][t];return}else if(void 0!==i){let a=n[e];if(!be(a))a={},n[e]=a;if(s||void 0===a[t])a[t]=i}const a=n[e];return be(a)?a[t]:void 0}unsetCache(...e){const t=e.length;if(t>0){const i=this._cached;let s=0;while(s<t){const t=e[s++];switch(t){case"position":if(!this._preferInitial)this.cascade(e=>!e.pageFlow&&e.unsetCache("absoluteParent"));case"display":case"float":case"tagName":return void(this._cached={});case"width":i.actualWidth=void 0,i.percentWidth=void 0;case"minWidth":i.width=void 0;break;case"height":i.actualHeight=void 0,i.percentHeight=void 0;case"minHeight":if(i.height=void 0,!this._preferInitial)this.unsetCache("blockVertical"),this.each(e=>e.unsetCache("height","actualHeight","blockVertical","overflow","bottomAligned"));break;case"verticalAlign":i.baseline=void 0;break;case"left":case"right":case"textAlign":i.rightAligned=void 0,i.centerAligned=void 0;break;case"top":case"bottom":i.bottomAligned=void 0;break;default:if(t.startsWith("margin"))i.autoMargin=void 0,i.rightAligned=void 0,i.centerAligned=void 0;else if(t.startsWith("padding"))i.contentBoxWidth=void 0,i.contentBoxHeight=void 0;else if(t.startsWith("border"))i.visibleStyle=void 0,i.contentBoxWidth=void 0,i.contentBoxHeight=void 0;else if(t.startsWith("background"))i.visibleStyle=void 0;else if(Node.TEXT_STYLE.includes(t))i.lineHeight=void 0,this._textStyle=void 0;break}if(t in i)i[t]=void 0}}else this._cached={},this._textStyle=void 0;if(!this._preferInitial){let t;if(e.some(e=>ge(P[e].trait,8)))t=this.pageFlow&&this.ascend({condition:e=>e.documentRoot})[0]||this;else if(e.some(e=>ge(P[e].trait,16)))t=this;if(t){t.resetBounds();const e=t.queryMap;if(e){const t=e.length;let i,s=0;while(s<t){const t=e[s++],n=t.length;i=0;while(i<n)t[i++].resetBounds()}}else this.cascade(e=>e.resetBounds())}}}ascend(e){let t=e.attr;if(!t)t="actualParent";else if(!/[pP]arent$/.test(t))return[];const{condition:i,including:s,error:n,every:a,excluding:l}=e,r=[];let o=e.startSelf?this:this[t];while(o&&o!==l){if(n&&n(o))break;if(i){if(i(o))if(r.push(o),!a)break}else r.push(o);if(o===s)break;o=o[t]}return r}intersectX(e,t="linear"){if(e.width>0){const{left:i,right:s}=this[t],{left:n,right:a}=e;return Math.ceil(i)>=n&&i<Math.floor(a)||Math.floor(s)>n&&s<=Math.ceil(a)||Math.ceil(n)>=i&&n<Math.floor(s)||Math.floor(a)>i&&a<=Math.ceil(s)}return false}intersectY(e,t="linear"){if(e.height>0){const{top:i,bottom:s}=this[t],{top:n,bottom:a}=e;return Math.ceil(i)>=n&&i<Math.floor(a)||Math.floor(s)>n&&s<=Math.ceil(a)||Math.ceil(n)>=i&&n<Math.floor(s)||Math.floor(a)>i&&a<=Math.ceil(s)}return false}withinX(e,t="linear"){if(this.pageFlow||e.width>0){const{left:i,right:s}=this[t];return ce(i,e.left)&&he(s,e.right)}return true}withinY(e,t="linear"){if(this.pageFlow||e.height>0){const{top:i,bottom:s}=this[t];return Math.ceil(i)>=e.top&&Math.floor(s)<=e.bottom}return true}outsideX(e,t="linear"){if(this.pageFlow||e.width>0){const{left:i,right:s}=this[t];return i<Math.floor(e.left)||s>Math.ceil(e.right)}return false}outsideY(e,t="linear"){if(this.pageFlow||e.height>0){const{top:i,bottom:s}=this[t];return i<Math.floor(e.top)||s>Math.ceil(e.bottom)}return false}css(e,t,i=true){if(t&&this.styleElement)if(this.style[e]=t,Ne(t,this.style[e])){if(this._styleMap[e]=t,i)this.unsetCache(e);return t}return this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=true){for(const i in e){const s=e[i];if(this.css(i,s,t)===s&&t)this.unsetCache(i)}return this}cssParent(e,t,i=false){var s;return(null===(s=this.actualParent)||void 0===s?void 0:s.css(e,t,i))||""}cssInitial(e,t){var i;return((null===(i=this._initial)||void 0===i?void 0:i.styleMap)||this._styleMap)[e]||(null==t?void 0:t.modified)&&this._styleMap[e]||(null==t?void 0:t.computed)&&this.style[e]||""}cssAscend(e,t){let i,s;if(t)({startSelf:i,initial:s}=t);let n,a=i?this:this.actualParent;while(a){if(n=s?a.cssInitial(e):a.css(e),""!==n)return n;if(a.documentBody)break;a=a.actualParent}return""}cssAny(e,t){const i=t.initial?this.cssInitial(e,t):this.css(e);return""!==i&&t.values.includes(i)}cssSort(e,t={}){const i=false!==t.ascending,s=true===t.byFloat,n=!s&&true===t.byInt;return(t.duplicate?this.duplicate():this.children).sort((t,a)=>{let l,r;if(s)l=t.toFloat(e,t.childIndex),r=a.toFloat(e,a.childIndex);else if(n)l=t.toInt(e,t.childIndex),r=a.toInt(e,a.childIndex);else l=t.css(e),r=a.css(e);if(l===r)return 0;else if(i)return l<r?-1:1;return l>r?-1:1})}cssPX(e,t,i,s){const n=this._styleMap[e];if(n&&q(n)){if((t+=Y(n,this.fontSize))<0&&true!==(null==s?void 0:s.negative))t=0;const a=O(t);if(this.css(e,a),i)this.unsetCache(e);return a}return""}cssSpecificity(e){var t,i;let s;if(this.styleElement){const n=this._element;s=this.pseudoElement?null===(t=le(n.parentElement,"styleSpecificity"+re(n,this.sessionId),this.sessionId))||void 0===t?void 0:t[e]:null===(i=le(n,"styleSpecificity",this.sessionId))||void 0===i?void 0:i[e]}return s||0}cssTry(e,t){if(this.styleElement){const i=this._element;return Ie(i,e,this.sessionId,t,H(i).getPropertyValue(e))}return false}cssFinally(e){if(this.styleElement){const t=this._element;if("string"==typeof e)Re(t,e,this.sessionId);else for(const i in e)Re(t,i,this.sessionId)}}cssTryAll(e){if(this.styleElement){const t=[],i=this._element,s=H(i);for(const n in e)if(Ie(i,n,this.sessionId,e[n],s.getPropertyValue(n)))t.push(n);else{let e=0;while(e<t.length)this.cssFinally(t[e++]);return}return e}}cssCopy(e,...t){const i=this._styleMap;let s=0;while(s<t.length){const n=t[s++];i[n]=e.css(n)}}cssCopyIfEmpty(e,...t){const i=this._styleMap;let s=0;while(s<t.length){const n=t[s++];if(!pe(i[n]))i[n]=e.css(n)}}cssAsTuple(...e){const t=e.length,i=new Array(t);let s=0;while(s<t)i[s]=this.css(e[s++]);return i}cssAsObject(...e){const t={};let i=0;while(i<e.length){const s=e[i++];t[s]=this.css(s)}return t}toInt(e,t=NaN,i=false){var s;const n=parseInt((i&&(null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e]);return!isNaN(n)?n:t}toFloat(e,t=NaN,i=false){var s;const n=parseFloat((i&&(null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e]);return!isNaN(n)?n:t}toElementInt(e,t=NaN){var i;const s=parseInt(null===(i=this._element)||void 0===i?void 0:i[e]);return!isNaN(s)?s:t}toElementFloat(e,t=NaN){var i;const s=parseFloat(null===(i=this._element)||void 0===i?void 0:i[e]);return!isNaN(s)?s:t}toElementBoolean(e,t=false){var i;const s=null===(i=this._element)||void 0===i?void 0:i[e];return"boolean"==typeof s?s:t}toElementString(e,t=""){var i,s;return(null!==(s=null===(i=this._element)||void 0===i?void 0:i[e])&&void 0!==s?s:t).toString()}parseUnit(e,t){var i;if(z(e)){const s=false!==(null==t?void 0:t.parent)&&(null===(i=this.absoluteParent)||void 0===i?void 0:i.box)||this.bounds;let n=parseFloat(e)/100;switch(null==t?void 0:t.dimension){case"height":n*=s.height;break;default:n*=s.width;break}return n}return Y(e,this.fontSize,null==t?void 0:t.screenDimension)}has(e,t){var i,s;const n=("initial"===(null==t?void 0:t.map)&&(null===(i=this._initial)||void 0===i?void 0:i.styleMap)||this._styleMap)[e];if(n){if("initial"===n||n===(null===(s=P[e])||void 0===s?void 0:s.value))return false;let i,a;if(t)({not:i,type:a}=t);if(i)if(n===i)return false;else if(Array.isArray(i)){let e=0;while(e<i.length)if(n===i[e++])return false}if(a)return ge(a,2)&&q(n)||ge(a,4)&&z(n)||ge(a,8)&&X(n)||ge(a,16)&&V(n);else return true}return false}hasPX(e,t){var i;let s,n;if(t)({initial:s,percent:n}=t);const a=(s&&(null===(i=this._initial)||void 0===i?void 0:i.styleMap)||this._styleMap)[e];return!!a&&q(a,false!==n)}setBounds(e=true){let t;if(this.styleElement){if(!e)ne(this._element,"clientRect",this.sessionId);t=K(ie(this._element,this.sessionId)),this._bounds=t}else if(this.plainText){const e=J(this._element);t=K(e);const i=e.numberOfLines;t.numberOfLines=i,this._bounds=t,this._textBounds=t,this._cached.multiline=i>1}if(!e&&t)this._box=void 0,this._linear=void 0;return t}resetBounds(){this._bounds=void 0,this._box=void 0,this._linear=void 0,this._textBounds=void 0,this._cached.multiline=void 0}querySelector(e){return this.querySelectorAll(e,1)[0]||null}querySelectorAll(e,t=-1){let i=[];const s=this.queryMap;if(s&&0!==t){const n=G(e);let a=n.length,l=0;while(l<a){const e=n[l++],r=[];let o=-1;if("*"===e)r.push({all:true}),++o;else{e:{let t,i;while(i=Se.exec(e)){let e=i[1],s=false;if(1===e.length){const i=e.charAt(0);switch(i){case"+":case"~":--o;case">":if(t||0===r.length){r.length=0;break e}t=i;continue;case"*":s=true;break}}else if(e.startsWith("*|*")){if(e.length>3){r.length=0;break e}s=true}else if(e.startsWith("*|"))e=e.substring(2);else if(e.startsWith("::")){r.length=0;break e}if(s)r.push({all:true});else{let i,s,n,a,l,o,c;while(c=we.exec(e)){if(!a)a=[];let t=c[1].replace("\\:",":"),i=false;switch(t.indexOf("|")){case-1:break;case 1:if("*"===t.charAt(0)){i=true,t=t.substring(2);break}default:r.length=0;break e}const s="i"===c[6];let n=c[3]||c[4]||c[5]||"";if(s)n=n.toLowerCase();a.push({key:t,symbol:c[2],value:n,endsWith:i,caseInsensitive:s}),e=ye(e,c.index,c[0].length)}if(e.includes("::")){r.length=0;break e}while(c=ke.exec(e)){const t=c[0];if(t.startsWith(":not(")){if(c[1]){if(!o)o=[];o.push(c[1])}}else{if(!l)l=[];l.push(t)}e=ye(e,c.index,t.length)}while(c=Ee.exec(e)){const t=c[0];switch(t.charAt(0)){case"#":s=t.substring(1);break;case".":if(!n)n=[];n.push(t.substring(1));break;default:i=t.toUpperCase();break}e=ye(e,c.index,t.length)}r.push({tagName:i,id:s,adjacent:t,classList:n,pseudoList:l,notList:o,attrList:a})}++o,t=void 0}}Se.lastIndex=0}if(a=s.length,r.length>0&&-1!==o&&o<a){const e=r.pop(),c=0===r.length,h=i.length;let d;if(e.all&&a-o==1)d=s[o];else{d=[];let t=o;while(t<a){const n=s[t++];if(e.all)d=d.concat(n);else{const t=n.length;let s=0;while(s<t){const t=n[s++];if((0===h||!i.includes(t))&&Ve(this,t,e,l,c))d.push(t)}}}}if(r.length>0){r.reverse();let s=h;const n=d.length;let a=0;while(a<n){const n=d[a++];if((0===h||!i.includes(n))&&qe(this,r,l,0,e.adjacent,[n]))if(i.push(n),++s===t)return i.sort(Me)}}else if(0===h)if(l===n.length-1||t>0&&t<=d.length){if(t>0&&d.length>t)d.length=t;return d.sort(Me)}else i=d;else{const e=d.length;if(t>0){let s=h,n=0;while(n<e){const e=d[n++];if(!i.includes(e))if(i.push(e),++s===t)return i.sort(Me)}}else{let t=0;while(t<e){const e=d[t++];if(!i.includes(e))i.push(e)}}}}}}return i.sort(Me)}set $parent(e){this._parent=e}set parent(e){if(e){const t=this._parent;if(e!==t)null==t||t.remove(this),this._parent=e,e.add(this);else if(!e.contains(this))e.add(this);if(-1===this.depth)this.depth=e.depth+1}}get parent(){return this._parent}get tagName(){let e=this._cached.tagName;if(void 0===e){const t=this._element;if(t){const i=t.nodeName;e="#"===i.charAt(0)?i:t.tagName}else e="";this._cached.tagName=e}return e}get element(){return this._element}get elementId(){var e;return((null===(e=this._element)||void 0===e?void 0:e.id)||"").trim()}get htmlElement(){let e=this._cached.htmlElement;if(void 0===e)e=!this.plainText&&this._element instanceof HTMLElement,this._cached.htmlElement=e;return e}get svgElement(){let e=this._cached.svgElement;if(void 0===e)e=!this.htmlElement&&!this.plainText&&this._element instanceof SVGElement||this.imageElement&&te.SVG.test(this.toElementString("src")),this._cached.svgElement=e;return e}get styleElement(){return this.htmlElement||this.svgElement}get naturalChild(){return true}get naturalElement(){let e=this._cached.naturalElement;if(void 0===e)e=this.naturalChild&&this.styleElement&&!this.pseudoElement,this._cached.naturalElement=e;return e}get parentElement(){var e,t;return(null===(e=this._element)||void 0===e?void 0:e.parentElement)||(null===(t=this.actualParent)||void 0===t?void 0:t.element)||null}get textElement(){return this.plainText||this.inlineText&&"BUTTON"!==this.tagName}get pseudoElement(){return false}get imageElement(){return"IMG"===this.tagName}get flexElement(){return this.display.endsWith("flex")}get gridElement(){return this.display.endsWith("grid")}get tableElement(){return"TABLE"===this.tagName||"table"===this.display}get inputElement(){switch(this.tagName){case"INPUT":case"BUTTON":case"SELECT":case"TEXTAREA":return true;default:return false}}get plainText(){return"#text"===this.tagName}get styleText(){return this.naturalElement&&this.inlineText}get lineBreak(){return"BR"===this.tagName}get display(){return this.css("display")}get positionRelative(){return"relative"===this.css("position")}get floating(){return"none"!==this.float}get float(){return this.pageFlow&&this.css("float")||"none"}get zIndex(){return this.toInt("zIndex",0)}get textContent(){return this.naturalChild&&!this.svgElement?this._element.textContent:""}get dataset(){if(this.styleElement)return this._element.dataset;else{let e=this._dataset;if(void 0===e)e={},this._dataset=e;return e}}get documentBody(){return this._element===document.body}get initial(){return this._initial}get bounds(){return this._bounds||this.setBounds(false)||K(this.boundingClientRect)}get linear(){if(void 0===this._linear){const e=this.bounds;if(e)if(this.styleElement){const{marginBottom:t,marginRight:i}=this,s=Math.max(this.marginTop,0),n=Math.max(this.marginLeft,0);this._linear={top:e.top-s,right:e.right+i,bottom:e.bottom+t,left:e.left-n,width:e.width+n+i,height:e.height+s+t}}else this._linear=e;else return Z()}return this._linear}get box(){if(void 0===this._box){const e=this.bounds;if(e)if(this.styleElement&&this.naturalChildren.length>0)this._box={top:e.top+(this.paddingTop+this.borderTopWidth),right:e.right-(this.paddingRight+this.borderRightWidth),bottom:e.bottom-(this.paddingBottom+this.borderBottomWidth),left:e.left+(this.paddingLeft+this.borderLeftWidth),width:e.width-this.contentBoxWidth,height:e.height-this.contentBoxHeight};else this._box=e;else return Z()}return this._box}get flexdata(){let e=this._cached.flexdata;if(void 0===e){if(this.flexElement){const{flexWrap:t,flexDirection:i,alignContent:s,justifyContent:n}=this.cssAsObject("flexWrap","flexDirection","alignContent","justifyContent"),a=i.startsWith("row");e={row:a,column:!a,reverse:i.endsWith("reverse"),wrap:t.startsWith("wrap"),wrapReverse:"wrap-reverse"===t,alignContent:s,justifyContent:n}}else e={};this._cached.flexdata=e}return e}get flexbox(){let e=this._cached.flexbox;if(void 0===e){if(this.styleElement&&this.actualParent.flexElement){const[t,i,s]=this.cssAsTuple("alignSelf","justifySelf","flexBasis");e={alignSelf:"auto"===t?this.cssParent("alignItems"):t,justifySelf:"auto"===i?this.cssParent("justifyItems"):i,basis:s,grow:We(this,"flexGrow",0),shrink:We(this,"flexShrink",1),order:this.toInt("order",0)}}else e={};this._cached.flexbox=e}return e}get width(){let e=this._cached.width;if(void 0===e)e=Oe(this,this._styleMap,"width","minWidth","maxWidth"),this._cached.width=e;return e}get height(){let e=this._cached.height;if(void 0===e)e=Oe(this,this._styleMap,"height","minHeight","maxHeight"),this._cached.height=e;return e}get hasWidth(){let e=this._cached.hasWidth;if(void 0===e)e=this.width>0,this._cached.hasWidth=e;return e}get hasHeight(){var e;let t=this._cached.hasHeight;if(void 0===t){const i=this.css("height");if(z(i))t=this.pageFlow?(null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||this.documentBody:"fixed"===this.css("position")||this.hasPX("top")||this.hasPX("bottom");else t=this.height>0||this.hasPX("height",{percent:false});this._cached.hasHeight=t}return t}get lineHeight(){var e;let t=this._cached.lineHeight;if(void 0===t){if(t=0,!this.imageElement&&!this.svgElement){let i=this.has("lineHeight"),s=0;if(i){const t=this.css("lineHeight");if(z(t))s=ue(this.style.lineHeight);else if(me(t))s=parseFloat(t)*this.fontSize;else if(s=Y(t,this.fontSize),j(t)&&"inherit"!==(null===(e=this._cssStyle)||void 0===e?void 0:e.lineHeight)){const e=Xe.call(this,"fontSize");if(Be(e))s*=parseFloat(e)}}else{let e=this.ascend({condition:e=>e.has("lineHeight")})[0];if(e){const t=e.css("lineHeight");if(me(t))s=parseFloat(t)*this.fontSize,i=true}if(0===s)if(e=this.ascend({condition:e=>e.lineHeight>0})[0],e)s=e.lineHeight;if(this.styleElement){const e=Xe.call(this,"fontSize");if(Be(e)){const t=parseFloat(e);if(1!==t)s*=t,this.css("lineHeight",O(s)),i=true}}}if(i||s>this.height||this.multiline||this.block&&this.naturalChildren.some(e=>e.textElement))t=s}this._cached.lineHeight=t}return t}get positionStatic(){var e;let t=this._cached.positionStatic;if(void 0===t){switch(this.css("position")){case"absolute":case"fixed":t=false;break;case"relative":t=!this.documentBody&&0===this.toFloat("top",0)&&0===this.toFloat("right",0)&&0===this.toFloat("bottom",0)&&0===this.toFloat("left",0),this._cached.positionRelative=!t;break;case"inherit":{const i=null===(e=this._element)||void 0===e?void 0:e.parentElement;if(i){const e=U(i,"position");t="static"===e||"initial"===e}else t=true;break}default:t=true;break}this._cached.positionStatic=t}return t}get top(){let e=this._cached.top;if(void 0===e)e=De(this,"top"),this._cached.top=e;return e}get right(){let e=this._cached.right;if(void 0===e)e=De(this,"right"),this._cached.right=e;return e}get bottom(){let e=this._cached.bottom;if(void 0===e)e=De(this,"bottom"),this._cached.bottom=e;return e}get left(){let e=this._cached.left;if(void 0===e)e=De(this,"left"),this._cached.left=e;return e}get marginTop(){let e=this._cached.marginTop;if(void 0===e)e=this.inlineStatic?0:He(this,"marginTop",true),this._cached.marginTop=e;return e}get marginRight(){let e=this._cached.marginRight;if(void 0===e)e=He(this,"marginRight",true),this._cached.marginRight=e;return e}get marginBottom(){let e=this._cached.marginBottom;if(void 0===e)e=this.inlineStatic?0:He(this,"marginBottom",true),this._cached.marginBottom=e;return e}get marginLeft(){let e=this._cached.marginLeft;if(void 0===e)e=He(this,"marginLeft",true),this._cached.marginLeft=e;return e}get borderTopWidth(){let e=this._cached.borderTopWidth;if(void 0===e)e=Ue(this,"height",_e),this._cached.borderTopWidth=e;return e}get borderRightWidth(){let e=this._cached.borderRightWidth;if(void 0===e)e=Ue(this,"height",Te),this._cached.borderRightWidth=e;return e}get borderBottomWidth(){let e=this._cached.borderBottomWidth;if(void 0===e)e=Ue(this,"width",Ce),this._cached.borderBottomWidth=e;return e}get borderLeftWidth(){let e=this._cached.borderLeftWidth;if(void 0===e)e=Ue(this,"width",Ae),this._cached.borderLeftWidth=e;return e}get paddingTop(){let e=this._cached.paddingTop;if(void 0===e)e=He(this,"paddingTop",false),this._cached.paddingTop=e;return e}get paddingRight(){let e=this._cached.paddingRight;if(void 0===e)e=He(this,"paddingRight",false),this._cached.paddingRight=e;return e}get paddingBottom(){let e=this._cached.paddingBottom;if(void 0===e)e=He(this,"paddingBottom",false),this._cached.paddingBottom=e;return e}get paddingLeft(){let e=this._cached.paddingLeft;if(void 0===e)e=He(this,"paddingLeft",false),this._cached.paddingLeft=e;return e}get contentBox(){return"border-box"!==this.css("boxSizing")||this.tableElement&&M(8)}get contentBoxWidth(){let e=this._cached.contentBoxWidth;if(void 0===e)e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderLeftWidth+this.paddingLeft+this.paddingRight+this.borderRightWidth,this._cached.contentBoxWidth=e;return e}get contentBoxHeight(){let e=this._cached.contentBoxHeight;if(void 0===e)e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderTopWidth+this.paddingTop+this.paddingBottom+this.borderBottomWidth,this._cached.contentBoxHeight=e;return e}get inline(){let e=this._cached.inline;if(void 0===e){const t=this.display;e="inline"===t||"initial"===t&&!$.includes(this.tagName),this._cached.inline=e}return e}get inlineStatic(){let e=this._cached.inlineStatic;if(void 0===e)e=this.inline&&this.pageFlow&&!this.floating&&!this.imageElement,this._cached.inlineStatic=e;return e}set inlineText(e){switch(this.tagName){case"IMG":case"INPUT":case"SELECT":case"TEXTAREA":case"SVG":case"BR":case"HR":case"PROGRESS":case"METER":case"CANVAS":this._inlineText=false;break;case"BUTTON":this._inlineText=""!==this.textContent.trim();break;default:this._inlineText=e;break}}get inlineText(){return this._inlineText}get block(){let e=this._cached.block;if(void 0===e){switch(this.display){case"block":case"flex":case"grid":case"list-item":e=true;break;case"initial":e=$.includes(this.tagName);break;case"inline":if("svg"===this.tagName&&this.actualParent.htmlElement){e=!this.hasPX("width")&&0===ue(Q(this._element,"width"));break}default:e=false;break}this._cached.block=e}return e}get blockStatic(){let e=this._cached.blockStatic;if(void 0===e){e=false;const t=this.pageFlow;if(t&&(this.block&&!this.floating||this.lineBreak))e=true;else if(!t||!this.inline&&!this.display.startsWith("table-")&&!this.hasPX("maxWidth")){const t=Xe.call(this,"width"),i=Xe.call(this,"minWidth");let s=0;if(z(t))s=parseFloat(t);if(z(i))s=Math.max(parseFloat(i),s);if(s>0){const t=Xe.call(this,"marginLeft"),i=Xe.call(this,"marginRight");e=s+(z(t)?parseFloat(t):0)+(z(i)?parseFloat(i):0)>=100}}this._cached.blockStatic=e}return e}get pageFlow(){let e=this._cached.pageFlow;if(void 0===e)e=this.positionStatic||this.positionRelative,this._cached.pageFlow=e;return e}get centerAligned(){let e=this._cached.centerAligned;if(void 0===e)e=!this.pageFlow?this.hasPX("left")&&this.hasPX("right"):this.autoMargin.leftRight||ze(this)&&Fe(this,"center"),this._cached.centerAligned=e;return e}get rightAligned(){let e=this._cached.rightAligned;if(void 0===e)e=!this.pageFlow?this.hasPX("right")&&!this.hasPX("left"):"right"===this.float||this.autoMargin.left||ze(this)&&Fe(this,"right","end"),this._cached.rightAligned=e;return e}get bottomAligned(){var e;let t=this._cached.bottomAligned;if(void 0===t)t=!this.pageFlow?this.hasPX("bottom")&&!this.hasPX("top"):true===(null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)&&true===this.autoMargin.top,this._cached.bottomAligned=t;return t}get autoMargin(){let e=this._cached.autoMargin;if(void 0===e){if(!this.pageFlow||this.blockStatic||"table"===this.display){const t=this._styleMap,i="auto"===t.marginLeft&&(this.pageFlow||this.hasPX("right")),s="auto"===t.marginRight&&(this.pageFlow||this.hasPX("left")),n="auto"===t.marginTop&&(this.pageFlow||this.hasPX("bottom")),a="auto"===t.marginBottom&&(this.pageFlow||this.hasPX("top"));e={horizontal:i||s,left:i&&!s,right:!i&&s,leftRight:i&&s,vertical:n||a,top:n&&!a,bottom:!n&&a,topBottom:n&&a}}else e={};this._cached.autoMargin=e}return e}get baseline(){let e=this._cached.baseline;if(void 0===e){if(this.pageFlow&&!this.floating){const t=this.css("verticalAlign");e="baseline"===t||"initial"===t||0===this.naturalElements.length&&q(t,true)}else e=false;this._cached.baseline=e}return e}get verticalAlign(){let e=this._cached.verticalAlign;if(void 0===e){if(this.pageFlow){if(e=this.css("verticalAlign"),q(e,true))e=this.parseUnit(e,{dimension:"height"})+"px"}else e="0px";this._cached.verticalAlign=e}return e}set textBounds(e){this._textBounds=e}get textBounds(){let e=this._textBounds;if(void 0===e){if(e=null,this.naturalChild)if(this.textElement)e=se(this._element,this.sessionId);else{const t=this.naturalChildren,i=t.length;if(i>0){let s=1/0,n=-1/0,a=-1/0,l=1/0,r=0,o=0;while(o<i){const e=t[o++];if(e.textElement){const t=se(e.element,e.sessionId);s=Math.min(t.top,s),n=Math.max(t.right,n),l=Math.min(t.left,l),a=Math.max(t.bottom,a),r+=t.numberOfLines||0}}if(r>0)e={top:s,right:n,left:l,bottom:a,width:n-l,height:a-s,numberOfLines:r}}}this._textBounds=e}return e}get multiline(){var e;let t=this._cached.multiline;if(void 0===t){if(this.styleText)t=(this.inline||0===this.naturalElements.length||Le(this.display)||this.floating)&&(null===(e=this.textBounds)||void 0===e?void 0:e.numberOfLines)>1;else t=this.plainText&&Math.floor(J(this._element).width)>this.actualParent.box.width;this._cached.multiline=t}return t}get backgroundColor(){let e=this._cached.backgroundColor;if(void 0===e){if(!this.plainText)switch(e=this.css("backgroundColor"),e){case"initial":case"transparent":case"rgba(0, 0, 0, 0)":if(e="",this.inputElement)if("BUTTON"===this.tagName)e="rgba(0, 0, 0, 0)";else switch(this.toElementString("type")){case"button":case"submit":case"reset":case"image":e="rgba(0, 0, 0, 0)";break}break;default:if(""!==e&&this.styleElement&&!this.inputElement&&(!this._initial||Xe.call(this,"backgroundColor")===e)){let t=this.actualParent;while(t){const i=Xe.call(t,"backgroundColor",{modified:true});if(""!==i){if(i===e&&""===t.backgroundColor)e="";break}t=t.actualParent}}break}else e="";this._cached.backgroundColor=e}return e}get backgroundImage(){let e=this._cached.backgroundImage;if(void 0===e){if(!this.plainText){let t=this.css("backgroundImage");if(""!==t&&"none"!==t&&"initial"!==t)e=t;else{e="";const i=/\s*(url|[a-z-]+gradient)/;if(t=this.css("background"),i.test(t)){const s=ve(t),n=s.length;for(let t=1;t<n;++t){const n=s[t-1].trim();if(i.test(n))e+=(""!==e?", ":"")+n+s[t]}}}}else e="";this._cached.backgroundImage=e}return e}get percentWidth(){let e=this._cached.percentWidth;if(void 0===e){const t=Xe.call(this,"width");e=z(t)?parseFloat(t)/100:0,this._cached.percentWidth=e}return e}get percentHeight(){var e;let t=this._cached.percentHeight;if(void 0===t){const i=Xe.call(this,"height");t=z(i)&&((null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||"fixed"===this.css("position"))?parseFloat(i)/100:0,this._cached.percentHeight=t}return t}get visibleStyle(){let e=this._cached.visibleStyle;if(void 0===e){if(!this.plainText){const t=this.borderTopWidth>0||this.borderRightWidth>0||this.borderBottomWidth>0||this.borderLeftWidth>0,i=""!==this.backgroundColor,s=""!==this.backgroundImage;let n=false,a=false;if(s)for(const e of this.css("backgroundRepeat").split(",")){const[t,i]=e.trim().split(" ");if(!n)n="repeat"===t||"repeat-x"===t;if(!a)a="repeat"===t||"repeat-y"===t||"repeat"===i}e={background:t||s||i,borderWidth:t,backgroundImage:s,backgroundColor:i,backgroundRepeat:n||a,backgroundRepeatX:n,backgroundRepeatY:a}}else e={};this._cached.visibleStyle=e}return e}get absoluteParent(){let e=this._cached.absoluteParent;if(void 0===e){if(e=this.actualParent,!this.pageFlow&&!this.documentBody)while(e&&!e.documentBody){switch(Xe.call(e,"position",{computed:true})){case"static":case"initial":case"unset":e=e.actualParent;continue}break}this._cached.absoluteParent=e}return e}set actualParent(e){this._cached.actualParent=e}get actualParent(){var e;let t=this._cached.actualParent;if(void 0===t){const i=null===(e=this._element)||void 0===e?void 0:e.parentElement;t=i&&ae(i,this.sessionId)||null,this._cached.actualParent=t}return t}get actualWidth(){var e;let t=this._cached.actualWidth;if(void 0===t){if(this.plainText){const e=this.bounds;switch(e.numberOfLines||1){case 1:t=e.width;break;case 2:t=Math.min(e.width,this.actualParent.box.width);break;default:t=Math.min(e.right-e.left,this.actualParent.box.width);break}}else if(this.inlineStatic||"table-cell"===this.display||true===(null===(e=this.actualParent)||void 0===e?void 0:e.flexdata.row))t=this.bounds.width;else if(t=this.width,t>0){if(this.contentBox&&!this.tableElement)t+=this.contentBoxWidth}else t=this.bounds.width;this._cached.actualWidth=t}return t}get actualHeight(){var e;let t=this._cached.actualHeight;if(void 0===t){if(this.inlineStatic||"table-cell"===this.display||true===(null===(e=this.actualParent)||void 0===e?void 0:e.flexdata.column))t=this.bounds.height;else if(t=this.height,t>0){if(this.contentBox&&!this.tableElement)t+=this.contentBoxHeight}else t=this.bounds.height;this._cached.actualHeight=t}return t}get actualDimension(){return{width:this.actualWidth,height:this.actualHeight}}set naturalChildren(e){this._naturalChildren=e}get naturalChildren(){return this._naturalChildren||function(e){var t;let i;if(e.naturalElement){i=[];const t=e.sessionId;let s=0;e.element.childNodes.forEach(e=>{const n=ae(e,t);if(n)n.childIndex=s++,i.push(n)})}else i=((null===(t=e.initial)||void 0===t?void 0:t.children)||e.children).slice(0);return e.naturalChildren=i,i}(this)}set naturalElements(e){this._naturalElements=e}get naturalElements(){return this._naturalElements||function(e){const t=e.naturalChildren.filter(e=>e.naturalElement);return e.naturalElements=t,t}(this)}get firstChild(){return this.naturalElements[0]||null}get lastChild(){const e=this.naturalElements,t=e.length;return t?e[t-1]:null}get previousSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex-1])||null}get nextSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex+1])||null}get previousElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(e>0)return t[e-1]}return null}get nextElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(-1!==e)return t[e+1]||null}return null}get attributes(){let e=this._cached.attributes;if(void 0===e){if(e={},this.styleElement){const t=this._element.attributes,i=t.length;let s=0;while(s<i){const i=t.item(s++);e[i.name]=i.value}}this._cached.attributes=e}return e}get boundingClientRect(){var e;return this.naturalElement&&(null===(e=this._element)||void 0===e?void 0:e.getBoundingClientRect())||this._bounds||Z()}get fontSize(){var e,t,i,s;let n=this._fontSize;if(void 0===n){if(this.naturalChild&&this.styleElement){const i=Xe.call(this,"fontSize");if(j(i))n=parseFloat(i);else if(z(i)&&this._element!==document.documentElement)n=(null!==(t=null===(e=this.actualParent)||void 0===e?void 0:e.fontSize)&&void 0!==t?t:Pe(H(this._element.parentElement||document.documentElement)))*parseFloat(i)/100;else n=Pe(this.style)}else n=Y(this.css("fontSize"));if(0===n&&!this.naturalChild){const e=this.element;n=e&&D(e)?(null===(i=ae(e,this.sessionId))||void 0===i?void 0:i.fontSize)||Pe(H(e)):(null===(s=this.ascend({condition:e=>e.fontSize>0})[0])||void 0===s?void 0:s.fontSize)||Pe(H(document.documentElement))}this._fontSize=n}return n}get cssStyle(){return Object.assign({},this._cssStyle)}get textStyle(){let e=this._textStyle;if(void 0===e)e=this.cssAsObject(...Node.TEXT_STYLE),e.fontSize=this.fontSize+"px",this._textStyle=e;return e}set dir(e){this._cached.dir=e}get dir(){let e=this._cached.dir;if(void 0===e){if(e=this.naturalElement?this._element.dir:"",""===e){let t=this.actualParent;while(t){if(e=t.dir,""!==e)break;t=t.actualParent}}this._cached.dir=e}return e}get center(){const e=this.bounds;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}}Node.BOX_POSITION=["top","right","bottom","left"],Node.TEXT_STYLE=["fontFamily","fontWeight","fontStyle","fontVariant","fontStretch","color","whiteSpace","textDecoration","textTransform","letterSpacing","wordSpacing"];const{extractURL:je}=squared.lib.css,{STRING:Ge}=squared.lib.regex,{fromLastIndexOf:Ye,fromMimeType:$e,hasMimeType:Ke,randomUUID:Qe}=squared.lib.util,Je=new RegExp(`^${Ge.DATAURI}$`);class Resource{reset(){var e;const t=Resource.ASSETS;for(const e in t)t[e].clear();null===(e=this._fileHandler)||void 0===e||e.reset()}addImage(e){if(e.complete){const t=e.src;if(t.startsWith("data:image/")){const i=Je.exec(t);if(i){const s=i[1].trim().split(/\s*;\s*/);this.addRawData(t,s[0],i[2],{encoding:s[1]||"base64",width:e.naturalWidth,height:e.naturalHeight})}}if(""!==t)Resource.ASSETS.image.set(t,{width:e.naturalWidth,height:e.naturalHeight,uri:t})}}addVideo(e,t){Resource.ASSETS.video.set(e,{uri:e,mimeType:t})}addAudio(e,t){Resource.ASSETS.audio.set(e,{uri:e,mimeType:t})}addFont(e){const t=Resource.ASSETS.fonts,i=e.fontFamily.trim().toLowerCase();e.fontFamily=i;const s=t.get(i);if(s)s.push(e);else t.set(i,[e])}addRawData(e,t,i,s){let n,a,l,r,o,c;if(s)if(({filename:n,encoding:a,data:l,width:r,height:o}=s),a)a=a.toLowerCase();if(t=t.toLowerCase(),"base64"===a)if(i)if("image/svg+xml"===t)i=window.atob(i);else c=i;else if(l)c=l;else return"";else if(i)i=i.replace(/\\(["'])/g,(e,...t)=>t[0]);else if(!Array.isArray(l))return"";const h=this.mimeTypeMap.image;if("*"===h||h.includes(t)){if(!n){const i="."+($e(t)||"unknown");n=e.endsWith(i)?Ye(e,"/","\\"):this.randomUUID+i}return Resource.ASSETS.rawData.set(e,{pathname:e.startsWith(location.origin)?e.substring(location.origin.length+1,e.lastIndexOf("/")):"",filename:n,content:i,base64:c,mimeType:t,bytes:l,width:r,height:o}),n}return""}getImage(e){return Resource.ASSETS.image.get(e)}getVideo(e){return Resource.ASSETS.video.get(e)}getAudio(e){return Resource.ASSETS.audio.get(e)}getFont(e,t="normal",i){const s=Resource.ASSETS.fonts.get(e.trim().toLowerCase());if(s){const e=this.mimeTypeMap.font;return s.find(s=>t.startsWith(s.fontStyle)&&(!i||s.fontWeight===parseInt(i))&&(Ke(e,s.srcFormat)||s.srcUrl&&Ke(e,s.srcUrl)))}}getRawData(e){if(e.startsWith("url(")){const t=je(e);if(!t)return;e=t}return Resource.ASSETS.rawData.get(e)}addUnsafeData(e,t,i){Resource.ASSETS[e].set(t,i)}set fileHandler(e){if(e)e.resource=this;this._fileHandler=e}get fileHandler(){return this._fileHandler}get controllerSettings(){return this.application.controllerHandler.localSettings}get mimeTypeMap(){return this.controllerSettings.mimeType}get randomUUID(){return Qe()}get mapOfAssets(){return Resource.ASSETS}}var Ze,et,tt;Resource.KEY_NAME="squared.resource",Resource.ASSETS={fonts:new Map,image:new Map,video:new Map,audio:new Map,rawData:new Map},Resource.canCompressImage=(e,t)=>/\.(png|jpg|jpeg)$/i.test(e)||"image/png"===t||"image/jpeg"===t,Resource.getExtension=e=>{var t;return(null===(t=/\.(\w+)\s*$/.exec(e))||void 0===t?void 0:t[1])||""},function(e){e[e.DOM_TRAVERSE=2]="DOM_TRAVERSE",e[e.EXTENSION=4]="EXTENSION",e[e.RENDER=8]="RENDER",e[e.ALL=14]="ALL"}(Ze||(Ze={})),function(e){e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.IMAGE_SOURCE=32]="IMAGE_SOURCE",e[e.ASSET=56]="ASSET",e[e.ALL=126]="ALL"}(et||(et={})),function(e){e[e.CONSTRAINT=2]="CONSTRAINT",e[e.LAYOUT=4]="LAYOUT",e[e.ALIGNMENT=8]="ALIGNMENT",e[e.ACCESSIBILITY=16]="ACCESSIBILITY",e[e.LOCALIZATION=32]="LOCALIZATION",e[e.CUSTOMIZATION=64]="CUSTOMIZATION",e[e.ALL=126]="ALL"}(tt||(tt={}));var it=Object.freeze({__proto__:null,get APP_SECTION(){return Ze},get NODE_RESOURCE(){return et},get NODE_PROCEDURE(){return tt}});const{CSS_PROPERTIES:st}=squared.lib.css,{equal:nt}=squared.lib.math,{getElementAsNode:at}=squared.lib.session,{capitalize:lt,cloneObject:rt,convertWord:ot,hasBit:ct,hasKeys:ht,isArray:dt,iterateArray:ut,safeNestedMap:ft,searchObject:gt,withinRange:pt}=squared.lib.util,mt=new Map,bt=[2,4,8,16],xt=st.margin.value,yt=[32,64,128,256],vt=st.padding.value;for(let e=0;e<4;++e)mt.set(bt[e],xt[e]),mt.set(yt[e],vt[e]);function wt(e,t,i,s,n){const a=s[e+"Child"+n]||s[e+"Child"];let l=i[e+n]||i[e]||"",r=0;if(a)l+=(""!==l?"|":"")+a;if(""!==l)for(const e of l.split("|")){const i=t[e.trim().toUpperCase()]||0;if(i>0&&!ct(r,i))r|=i}return r}function St(e,t,i,s){let n,a,l,r;if(s)({floating:n,pageFlow:a,lineBreak:l,excluded:r}=s);const o=[];while(e){const s=at(e,i);if(s)if(false!==l&&s.lineBreak||false!==r&&s.excluded&&!s.lineBreak)o.push(s);else if(s.pageFlow&&!s.excluded){if(false===a)break;if(o.push(s),false!==n||!s.floating&&(s.visible||s.rendered)&&"none"!==s.display)break}e=e[t]}return o}function Et(e,t,i,s,n,a){for(let l=0;l<4;++l){const r=s[l];if(ct(n,r)){const s=i[l];if(t[s]=1,a){const t=e.registerBox(r);if(t)t.resetBox(r,a);else{if(e.naturalChild){const t=e[s];if(t>=0)a.modifyBox(r,t)}e.transferBox(r,a)}}}}}function kt(e,t,i,s,n,a){for(let l=0;l<4;++l){const r=s[l];if(ct(n,r)){const s=e.registerBox(r);if(s)s.transferBox(r,a);else{const s=i[l],n=t[s];if(0!==n)a.modifyBox(r,n,false),t[s]=0;e.registerBox(r,a)}}}}function _t(e){let t=0;if(e.scrollElement){const i=e.element,[s,n]=e.cssAsTuple("overflowX","overflowY");if(e.hasHeight&&(e.hasPX("height")||e.hasPX("maxHeight"))&&("scroll"===n||"auto"===n&&i.clientHeight!==i.scrollHeight))t|=16;if((e.hasPX("width")||e.hasPX("maxWidth"))&&("scroll"===s||"auto"===s&&i.clientWidth!==i.scrollWidth))t|=8}return t}const Tt=e=>e.naturalElements.length>0&&!e.layoutElement&&!e.tableElement,Ct=(e,t)=>e.blockDimension&&Math.ceil(e.bounds.top)>=t.bounds.bottom&&(e.blockVertical||t.blockVertical||e.percentWidth>0||t.percentWidth>0),At=e=>e.inlineDimension&&!e.hasPX("maxWidth")?e.percentWidth:-1/0,It=e=>e.actualWidth+Math.max(e.marginLeft,0)+e.marginRight;class NodeUI extends Node{constructor(){super(...arguments),this.alignmentType=0,this.rendered=false,this.excluded=false,this.rootElement=false,this.floatContainer=false,this.lineBreakLeading=false,this.lineBreakTrailing=false,this.baselineActive=false,this.baselineAltered=false,this.visible=true,this._boxRegister={},this._preferInitial=true,this._excludeSection=0,this._excludeProcedure=0,this._excludeResource=0,this._childIndex=1/0,this._containerIndex=1/0,this._renderAs=null,this._locked={}}static justified(e){if(e.naturalChild&&"justify"===e.cssAscend("textAlign")){let t=0;const{box:i,naturalChildren:s}=e.actualParent,n=s.length;let a=0;while(a<n){const e=s[a++];if(!e.inlineVertical){t=NaN;break}else t+=e.linear.width}if(Math.floor(t)>i.width)return true}return false}static refitScreen(e,t){const{width:i,height:s}=e.localSettings.screenDimension;let{width:n,height:a}=t;if(n>i)a=Math.round(a*i/n),n=i;else if(a>s)n=Math.round(n*s/a),a=s;else return t;return{width:n,height:a}}static outerRegion(e){let t,i,s,n,a=1/0,l=-1/0,r=-1/0,o=1/0,c=-1/0,h=-1/0;return e.each(e=>{if(e.companion)t=e.actualRect("top"),i=e.actualRect("right"),s=e.actualRect("bottom"),n=e.actualRect("left");else{if(({top:t,right:i,bottom:s,left:n}=e.linear),e.marginRight<0){const t=i+Math.abs(e.marginRight);if(t>c)c=t}if(e.marginBottom<0){const t=s+Math.abs(e.marginBottom);if(t>h)h=t}}if(t<a)a=t;if(i>l)l=i;if(s>r)r=s;if(n<o)o=n}),{top:a,right:l,bottom:r,left:o,width:Math.max(l,c)-o,height:Math.max(r,h)-a}}static baseline(e,t=false){const i=[],s=e.length;let n=0;while(n<s){const s=e[n++];if(s.baseline&&(!t||s.textElement)&&!s.baselineAltered)if(s.naturalElements.length>0){if(s.baselineElement)i.push(s)}else i.push(s)}if(i.length>1)i.sort((e,t)=>{if(e.length>0&&0===t.length)return 1;else if(t.length>0&&0===e.length)return-1;const i=e.baselineHeight+e.marginBottom,s=t.baselineHeight+t.marginBottom;if(!nt(i,s))return i>s?-1:1;else if(e.textElement&&t.textElement){if(!e.pseudoElement&&t.pseudoElement)return-1;else if(e.pseudoElement&&!t.pseudoElement)return 1;else if(!e.plainText&&t.plainText)return-1;else if(e.plainText&&!t.plainText)return 1}else if(e.inputElement&&t.inputElement&&e.containerType!==t.containerType)return e.containerType>t.containerType?-1:1;else if(t.textElement&&e.inputElement&&t.childIndex<e.childIndex)return 1;else if(e.textElement&&t.inputElement&&e.childIndex<t.childIndex)return-1;const n=e.bounds.bottom,a=t.bounds.bottom;if(n>a)return-1;else if(n<a)return 1;return 0});return i[0]||null}static linearData(e,t){const i=new Set;let s=false,n=false;const a=e.length;if(a>1){const l=new Array(a);let r=0,o=0;while(r<a){const t=e[r++];if(t.pageFlow){if(t.floating)i.add(t.float);l[o++]=t}else if(t.autoPosition)l[o++]=t}if(o){l.length=o;const e=i.size>0,a=[l[0]];let c=1,h=1;r=1;while(r<o){const i=l[r++];if(i.alignedVertically(a,e?t:void 0)>0)++h;else++c;if(c>1&&h>1)break;a.push(i)}if(s=c===o,n=h===o,s&&e){let e=1/0,t=-1/0,i=-1/0,n=1/0;r=0;while(r<o){const s=l[r++],{left:a,right:o}=s.linear;switch(e=Math.min(e,a),t=Math.max(t,o),s.float){case"left":i=Math.max(i,o);break;case"right":n=Math.min(n,a);break}}let a=0,c=0,h=0,d=0;for(r=0;r<o;++r){const o=l[r],{left:u,right:f}=o.linear;if(Math.floor(u)<=e)++a;if(Math.ceil(f)>=t)++c;if(!o.floating){if(u===i)++h;if(f===n)++d}if(0===r)continue;if(2===a||2===c||2===h||2===d){s=false;break}const g=l[r-1];if(pt(u,g.linear.left)||g.floating&&Math.ceil(o.bounds.top)>=g.bounds.bottom){s=false;break}}}}}else if(a>0)n=e[0].blockStatic,s=!n;return{linearX:s,linearY:n,floated:i,cleared:t}}static partitionRows(e,t){const i=[];let s=[],n=[];const a=e.length;let l=0;while(l<a){const a=e[l++];let r=a;if(!a.naturalChild){if(a.nodeGroup){if(s.length>0)i.push(s);i.push([a]),s=[],n.length=0;continue}const e=a.innerMostWrapped;if(e!==a)r=e}if(0===s.length)s.push(a),n.push(r);else if(r.alignedVertically(n,t)>0){if(s.length>0)i.push(s);s=[a],n=[r]}else s.push(a),n.push(r)}if(s.length>0)i.push(s);return i}is(e){return this.containerType===e}of(e,...t){return this.is(e)&&t.some(e=>this.hasAlign(e))}attr(e,t,i,s=true){const n=this.namespace(e);if(i){if(s&&this.lockedAttr(e,t))s=false;if(!s&&n[t])return n[t];else return n[t]=i,i}return n[t]||""}delete(e,...t){const i=this._namespaces[e];if(i){let e=0;while(e<t.length){const s=t[e++];if(s.includes("*"))for(const[e]of gt(i,s))delete i[e];else delete i[s]}}}namespace(e){var t;return null!==(t=this._namespaces[e])&&void 0!==t?t:(()=>{const t={};return this._namespaces[e]=t,t})()}unsafe(e,t){if(void 0!==t)this["_"+e]=t;return this["_"+e]}unset(e){delete this["_"+e]}lockAttr(e,t){ft(this._locked,e)[t]=true}unlockAttr(e,t){const i=this._locked[e];if(i)i[t]=false}lockedAttr(e,t){var i;return true===(null===(i=this._locked[e])||void 0===i?void 0:i[t])}render(e){this.renderParent=e,this.rendered=true}parseUnit(e,t={}){if(!t.screenDimension)t.screenDimension=this.localSettings.screenDimension;return super.parseUnit(e,t)}parseWidth(e,t=true){return super.parseUnit(e,{parent:t,screenDimension:this.localSettings.screenDimension})}parseHeight(e,t=true){return super.parseUnit(e,{dimension:"height",parent:t,screenDimension:this.localSettings.screenDimension})}renderEach(e){const t=this.renderChildren,i=t.length;let s=0;while(s<i)e(t[s],s++,t);return this}hide(e){if(null==e?void 0:e.remove)this.removeTry(e);this.rendered=true,this.visible=false}inherit(e,...t){let i,s=0;while(s<t.length)switch(t[s++]){case"base":{if(this._documentParent=e.documentParent,this._bounds=e.bounds,this._linear=e.linear,this._box=e.box,-1===this.depth)this.depth=e.depth;const t=e.actualParent;if(t)this.actualParent=t,this.dir=t.dir;break}case"initial":i=e.unsafe("initial"),this.inheritApply("initial",i);break;case"alignment":if(this.cssCopy(e,"position","display","verticalAlign","float","clear","zIndex"),!this.positionStatic){let t=0;while(t<4){const i=NodeUI.BOX_POSITION[t++];if(e.hasPX(i))this._styleMap[i]=e.css(i)}}Object.assign(this.autoMargin,e.autoMargin),this.autoPosition=e.autoPosition;break;case"styleMap":this.cssCopyIfEmpty(e,...Object.keys(e.unsafe("styleMap")));break;case"textStyle":i=e.textStyle,this.inheritApply("textStyle",i);break;case"boxStyle":{i=e.cssAsObject("backgroundRepeat","backgroundSize","backgroundPositionX","backgroundPositionY","backgroundClip","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"),Object.assign(i,{backgroundColor:e.backgroundColor,backgroundImage:e.backgroundImage,border:"inherit",borderRadius:"inherit"}),this.inheritApply("boxStyle",i),this.setCacheValue("visibleStyle",void 0),e.setCacheValue("backgroundColor",""),e.setCacheValue("backgroundImage",""),e.cssApply({backgroundColor:"transparent",backgroundImage:"none",border:"initial",borderRadius:"initial"});const t=e.visibleStyle;t.background=false,t.backgroundImage=false,t.backgroundRepeatX=false,t.backgroundRepeatY=false,t.backgroundColor=false,t.borderWidth=false;break}}return i}inheritApply(e,t){switch(e){case"initial":rt(t,this.initial);break;case"textStyle":this.cssApply(t),this.setCacheValue("fontSize",parseFloat(t.fontSize));break;case"boxStyle":this.cssApply(t),this.unsetCache("borderTopWidth","borderBottomWidth","borderRightWidth","borderLeftWidth"),this.setCacheValue("backgroundColor",t.backgroundColor),this.setCacheValue("backgroundImage",t.backgroundImage);break}}addAlign(e){if(!this.hasAlign(e))this.alignmentType|=e}removeAlign(e){if(this.hasAlign(e))this.alignmentType^=e}hasAlign(e){return ct(this.alignmentType,e)}hasResource(e){return!ct(this._excludeResource,e)}hasProcedure(e){return!ct(this._excludeProcedure,e)}hasSection(e){return!ct(this._excludeSection,e)}exclude(e){const{resource:t,procedure:i,section:s}=e;if(t&&!ct(this._excludeResource,t))this._excludeResource|=t;if(i&&!ct(this._excludeProcedure,i))this._excludeProcedure|=i;if(s&&!ct(this._excludeSection,s))this._excludeSection|=s}setExclusions(){var e;if(this.naturalElement){const t=this._element,i=t.dataset,s=(null===(e=t.parentElement)||void 0===e?void 0:e.dataset)||{};if(ht(i)||ht(s)){const e=lt(this.localSettings.systemName);this.exclude({resource:wt("excludeResource",et,i,s,e),procedure:wt("excludeProcedure",tt,i,s,e),section:wt("excludeSection",Ze,i,s,e)})}}}replaceTry(e){const{child:t,replaceWith:i}=e,s=this.children,n=s.length;for(let e=0;e<n;++e){const n=s[e];if(n===t||n===t.outerMostWrapper)return s[e]=i,i.$parent=this,i.containerIndex=t.containerIndex,i.depth=t.depth,true}if(e.notFoundAppend)return i.parent=this,true;else return false}removeTry(e){var t,i,s;const n=this.renderParent;if(n){const{renderTemplates:a,renderChildren:l}=n;if(a){const r=l.findIndex(e=>e===this);if(-1!==r){const o=a[r];if(o.node===this){const c=null==e?void 0:e.replaceWith;if(c){const s=c.renderParent;if(s){const h=s.renderTemplates;if(h){const d=h.findIndex(e=>e.node===c);if(-1!==d){if(null===(i=(t=e).beforeReplace)||void 0===i||i.call(t,this,c),l[r]=c,a[r]=h[d],h.splice(d,1),s.renderChildren.splice(d,1),c.renderParent=n,this.documentRoot)c.documentRoot=true,this.documentRoot=false;return c.depth=this.depth,this.renderParent=void 0,o}}}}else return null===(s=null==e?void 0:e.beforeReplace)||void 0===s||s.call(e,this,void 0),l.splice(r,1),this.renderParent=void 0,a.splice(r,1)[0]}}}}}sort(e){if(e)super.sort(e);else this.children.sort((e,t)=>e.containerIndex<t.containerIndex?-1:1);return this}alignedVertically(e,t,i){if(this.lineBreak)return 2;else if(!this.pageFlow){if(this.autoPosition){if(!e)e=this.siblingsLeading;let i=e.length-1;while(i>=0){const s=e[i--];if(s.pageFlow)return s.blockStatic||(null==t?void 0:t.has(s))?1:0}return 0}return 1}else{const s=this.floating;if(dt(e)){const n=e[e.length-1];if(t)if(t.size>0&&(t.has(this)||this.siblingsLeading.some(e=>e.excluded&&t.has(e))))return 4;else if(s&&n.floating){if(i&&this.float===n.float||Math.floor(this.bounds.top)===Math.floor(n.bounds.top))return 0;else if(Math.ceil(this.bounds.top)>=n.bounds.bottom){if(e.every(e=>e.inlineDimension)){const t=this.actualParent;if(t&&t.ascend({condition:e=>!e.inline&&e.hasWidth,error:e=>e.layoutElement,startSelf:true})){const i=e.length;if(t.naturalChildren.filter(e=>e.visible&&e.pageFlow).length===i+1){let s=t.box.width-It(this),n=0;while(n<i)s-=It(e[n++]);if(s>=0)return 0}}}return 6}}else if(this.blockStatic&&e.reduce((e,t)=>e+(t.floating?t.linear.width:-1/0),0)/this.actualParent.box.width>=.8)return 7;else if(e.every(e=>e.inlineDimension&&Math.ceil(this.bounds.top)>=e.bounds.bottom))return 5;else if(void 0!==i)if(s&&!i&&n.blockStatic)return 0;else if(!this.display.startsWith("inline-")){let{top:s,bottom:n}=this.bounds;if(this.textElement&&t.size>0&&e.some(e=>t.has(e))&&e.some(e=>Math.floor(s)<e.bounds.top&&Math.ceil(n)>e.bounds.bottom))return 7;else if(e[0].floating){const t=e.length;if(t>1){const a=e[0].float;let l=-1/0,r=0,o=0;while(o<t){const t=e[o++];if(t.floating){if(t.float===a)l=Math.max(t.actualRect("bottom","bounds"),l);r+=t.linear.width}}if(Math.ceil(r)>=this.actualParent.box.width)return 5;else if(this.multiline){if(this.styleText){const e=this.textBounds;if(e)n=e.bottom}const e=n-l;s=e<=0||e/(n-s)<.5?-1/0:1/0}else s=Math.ceil(s);if(s<Math.floor(l))return i?0:5;else return i?5:0}else if(!i)return 5}}if(Ct(this,n))return 3;else{const t=At(this);if(t>0&&e.reduce((e,t)=>e+At(t),t)>1)return 8}}const n=this.blockStatic||"table"===this.display,a=this.siblingsLeading.length;if(n&&(0===a||0===this.containerIndex))return 1;for(let e=a-1;e>=0;--e){const l=this.siblingsLeading[e];if(l.excluded&&(null==t?void 0:t.has(l)))return 4;else if(l.blockStatic||l.autoMargin.leftRight||(false===i||s&&0===l.childIndex)&&l.plainText&&l.multiline)return 1;else if(n&&(!l.floating||(null==t?void 0:t.has(l))||e===a-1&&!l.pageFlow))return 1;else if(l.floating){if("left"===l.float){if(this.autoMargin.right)return 5}else if(this.autoMargin.left)return 5;if(this.floatContainer&&this.some(e=>e.floating&&Math.ceil(e.bounds.top)>=l.bounds.bottom))return 5}if(Ct(this,l))return 3}return 0}}previousSiblings(e){var t;const i=this.innerMostWrapped;if(e)return St(null===(t=i.element)||void 0===t?void 0:t.previousSibling,"previousSibling",this.sessionId,e);else return i.siblingsLeading}nextSiblings(e){var t;const i=this.innerMostWrapped;if(e)return St(null===(t=i.element)||void 0===t?void 0:t.nextSibling,"nextSibling",this.sessionId,e);else return i.siblingsTrailing}modifyBox(e,t,i=true){if(0!==t){const s=mt.get(e);if(s){const n=this._boxRegister[e];if(void 0===t)if(n){const t=this[s]||n.getBox(e)[1];if(t>0)n.modifyBox(e,-t,i)}else this._boxReset[s]=1;else if(n)n.modifyBox(e,t,i);else{const e=this._boxAdjustment;if(!i&&(0===this._boxReset[s]?this[s]:0)+e[s]+t<=0){if(e[s]=0,this[s]>=0&&t<0)this._boxReset[s]=1}else e[s]+=t}}}}getBox(e){const t=mt.get(e);return t?[this._boxReset[t],this._boxAdjustment[t]]:[NaN,0]}setBox(e,t){const i=mt.get(e);if(i){const s=this._boxRegister[e];if(s)s.setBox(e,t);else{const{reset:e,adjustment:s}=t,n=this._boxReset,a=this._boxAdjustment;if(void 0!==e)n[i]=e;if(void 0!==s){let e=a[i];if(t.accumulate)e+=s;else e=s;if(false===t.negative&&(0===n[i]?this[i]:0)+e<=0)if(e=0,this[i]>=0&&e<0)n[i]=1;a[i]=e}else if(1===e&&!this.naturalChild)a[i]=0}}}resetBox(e,t){if(ct(30,e))Et(this,this._boxReset,xt,bt,e,t);if(ct(480,e))Et(this,this._boxReset,vt,yt,e,t)}transferBox(e,t){if(ct(30,e))kt(this,this._boxAdjustment,xt,bt,e,t);if(ct(480,e))kt(this,this._boxAdjustment,vt,yt,e,t)}registerBox(e,t){const i=this._boxRegister;if(t)i[e]=t;else t=i[e];while(t){const i=t.unsafe("boxRegister")[e];if(i)t=i;else break}return t}actualPadding(e,t){if(t>0){if(!this.layoutElement){const i=this.innerMostWrapped;if(i!==this)if(i.naturalChild){if(0===i.getBox("paddingTop"===e?32:128)[0])return 0}else return t;if(i.naturalChild)return Tt(i)&&function e(t,i,s){let n=false;const a=t.length;let l=0;while(l<a){const a=t[l++];if(a.blockStatic)return false;else if(a.inlineStatic)if(a.has("lineHeight")&&a.lineHeight>a.bounds.height)return false;else if(a[i]>=s)n=true;else if(Tt(a))if(!e(a.naturalChildren,i,s))return false;else n=true}return n}(i.naturalChildren,e,t)?0:t}else if(this.gridElement)switch(this.css("alignContent")){case"space-around":case"space-evenly":return 0}return t}return 0}actualBoxWidth(e){if(!e)e=this.box.width;if(this.pageFlow){let t=0,i=0,s=this.actualParent;while(s){if(s.hasPX("width",{percent:false})||!s.pageFlow)return e;else t+=Math.max(s.marginLeft,0)+s.borderLeftWidth+s.paddingLeft,i+=s.paddingRight+s.borderRightWidth+s.marginRight;s=s.actualParent}const n=this.localSettings.screenDimension.width-t-i;if(n>0)return Math.min(e,n)}return e}cloneBase(e){if(e.depth=this.depth,e.childIndex=this.childIndex,e.inlineText=this.inlineText,e.actualParent=this.actualParent,e.documentRoot=this.documentRoot,e.localSettings=this.localSettings,e.alignmentType=this.alignmentType,e.containerName=this.containerName,e.visible=this.visible,e.excluded=this.excluded,e.rendered=this.rendered,e.containerIndex=this.containerIndex,e.lineBreakLeading=this.lineBreakLeading,e.lineBreakTrailing=this.lineBreakTrailing,e.documentParent=this.documentParent,e.renderParent=this.renderParent,e.rootElement=this.rootElement,this.length>0)e.retainAs(this.duplicate());e.inherit(this,"initial","base","alignment","styleMap","textStyle"),Object.assign(e.unsafe("cached"),this._cached)}unsetCache(...e){const t=e.length;if(t>0){const i=this._cached;let s=0;while(s<t)switch(e[s++]){case"top":case"right":case"bottom":case"left":i.autoPosition=void 0,i.positiveAxis=void 0;break;case"float":i.floating=void 0;break;case"fontSize":case"lineHeight":i.baselineHeight=void 0;break;case"whiteSpace":i.preserveWhiteSpace=void 0,i.textEmpty=void 0;break;case"width":case"height":case"maxWidth":case"maxHeight":case"overflowX":case"overflowY":i.overflow=void 0;break}}super.unsetCache(...e)}css(e,t,i=false){if(arguments.length>=2){if(t)this._styleMap[e]=t;else if(null===t)delete this._styleMap[e];if(i)this.unsetCache(e)}return this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t){if(Object.assign(this._styleMap,e),t)this.unsetCache(...Object.keys(e));return this}cssSet(e,t,i=true){return super.css(e,t,i)}setCacheValue(e,t){this._cached[e]=t}get element(){return this._element||!!this.innerWrapped&&this.innerMostWrapped.unsafe("element")||null}set naturalChild(e){this._cached.naturalChild=e}get naturalChild(){let e=this._cached.naturalChild;if(void 0===e){const t=this._element;e=t?t.parentElement?true:t===document.documentElement:false,this._cached.naturalChild=e}return e}get pseudoElement(){var e;return"__squared.pseudo"===(null===(e=this._element)||void 0===e?void 0:e.className)}get layoutElement(){let e=this._cached.layoutElement;if(void 0===e)e=this.flexElement||this.gridElement,this._cached.layoutElement=e;return e}get scrollElement(){let e=this._cached.scrollElement;if(void 0===e){if(this.htmlElement)switch(this.tagName){case"INPUT":switch(this.toElementString("type")){case"button":case"submit":case"reset":case"file":case"date":case"datetime-local":case"month":case"week":case"time":case"range":case"color":e=true;break;default:e=false;break}break;case"IMG":case"SELECT":case"TABLE":case"VIDEO":case"AUDIO":case"PROGRESS":case"METER":case"HR":case"BR":case"WBR":e=false;break;default:e=this.blockDimension;break}else e=false;this._cached.scrollElement=e}return e}get imageElement(){var e;return null!==(e=this._cached.imageElement)&&void 0!==e?e:(()=>(this._cached.imageElement=super.imageElement,this._cached.imageElement))()}get flexElement(){var e;return null!==(e=this._cached.flexElement)&&void 0!==e?e:(()=>(this._cached.flexElement=super.flexElement,this._cached.flexElement))()}get gridElement(){var e;return null!==(e=this._cached.gridElement)&&void 0!==e?e:(()=>(this._cached.gridElement=super.gridElement,this._cached.gridElement))()}get tableElement(){var e;return null!==(e=this._cached.tableElement)&&void 0!==e?e:(()=>(this._cached.tableElement=super.tableElement,this._cached.tableElement))()}get inputElement(){var e;return null!==(e=this._cached.inputElement)&&void 0!==e?e:(()=>(this._cached.inputElement=super.inputElement,this._cached.inputElement))()}get floating(){var e;return null!==(e=this._cached.floating)&&void 0!==e?e:(()=>(this._cached.floating=super.floating,this._cached.floating))()}get float(){var e;return null!==(e=this._cached.float)&&void 0!==e?e:(()=>(this._cached.float=super.float,this._cached.float))()}set textContent(e){this._cached.textContent=e}get textContent(){var e;return null!==(e=this._cached.textContent)&&void 0!==e?e:(()=>(this._cached.textContent=super.textContent,this._cached.textContent))()}get contentBox(){var e;return null!==(e=this._cached.contentBox)&&void 0!==e?e:(()=>(this._cached.contentBox=super.contentBox,this._cached.contentBox))()}set documentParent(e){this._documentParent=e}get documentParent(){return this._documentParent||this.absoluteParent||this.actualParent||this.parent||this}set containerName(e){this._cached.containerName=e.toUpperCase()}get containerName(){let e=this._cached.containerName;if(void 0===e){const t=this.element;if(t)if("#text"===t.nodeName)e="PLAINTEXT";else if("INPUT"===t.tagName)e="INPUT_"+ot(t.type,true).toUpperCase();else e=t.tagName.toUpperCase();else e="";this._cached.containerName=e}return e}get layoutHorizontal(){return this.hasAlign(8)}get layoutVertical(){if(this.hasAlign(16))return true;else if(this.naturalChild){const e=this.naturalChildren;return 1===e.length&&e[0].blockStatic}return false}get nodeGroup(){return false}set renderAs(e){if(!this.rendered&&false===(null==e?void 0:e.rendered))this._renderAs=e}get renderAs(){return this._renderAs}get positionRelative(){var e;return null!==(e=this._cached.positionRelative)&&void 0!==e?e:super.positionRelative}get inlineVertical(){let e=this._cached.inlineVertical;if(void 0===e){if((this.naturalElement||this.pseudoElement)&&!this.floating){const t=this.display;e=t.startsWith("inline")||"table-cell"===t}else e=false;this._cached.inlineVertical=e}return e}get inlineDimension(){let e=this._cached.inlineDimension;if(void 0===e)e=(this.naturalElement||this.pseudoElement)&&(this.display.startsWith("inline-")||this.floating),this._cached.inlineDimension=e;return e}get inlineFlow(){var e;let t=this._cached.inlineFlow;if(void 0===t)t=this.inline||this.inlineDimension||this.inlineVertical||this.imageElement||this.svgElement&&this.hasPX("width",{percent:false})||this.tableElement&&true===(null===(e=this.previousSibling)||void 0===e?void 0:e.floating),this._cached.inlineFlow=t;return t}get blockStatic(){return super.blockStatic||this.hasAlign(64)&&this.pageFlow&&!this.floating}get blockDimension(){let e=this._cached.blockDimension;if(void 0===e){if(this.block||this.floating||this.imageElement||this.svgElement)e=true;else{const t=this.display;e=t.startsWith("inline-")||"table"===t}this._cached.blockDimension=e}return e}get blockVertical(){let e=this._cached.blockVertical;if(void 0===e)e=this.blockDimension&&this.hasHeight,this._cached.blockVertical=e;return e}get rightAligned(){return super.rightAligned||this.hasAlign(2048)}set autoPosition(e){this._cached.autoPosition=e}get autoPosition(){let e=this._cached.autoPosition;if(void 0===e){if(this.pageFlow)e=false;else{const{top:t,right:i,bottom:s,left:n}=this._styleMap;e=!(t&&"auto"!==t||n&&"auto"!==n||i&&"auto"!==i||s&&"auto"!==s)}this._cached.autoPosition=e}return e}get positiveAxis(){let e=this._cached.positiveAxis;if(void 0===e)e=(!this.positionRelative||this.positionRelative&&this.top>=0&&this.left>=0&&(this.right<=0||this.hasPX("left"))&&(this.bottom<=0||this.hasPX("top")))&&this.marginTop>=0&&this.marginLeft>=0&&this.marginRight>=0,this._cached.positiveAxis=e;return e}get leftTopAxis(){let e=this._cached.leftTopAxis;if(void 0===e){switch(this.cssInitial("position")){case"absolute":e=this.absoluteParent===this.documentParent;break;case"fixed":e=true;break;default:e=false;break}this._cached.leftTopAxis=e}return e}get baselineElement(){let e=this._cached.baselineElement;if(void 0===e){if(this.baseline){const t=this.naturalChildren;if(t.length>0)e=t.every(e=>e.baselineElement&&0===e.length);else e=this.inlineText&&this.textElement||this.plainText&&!this.multiline||this.inputElement||this.imageElement||this.svgElement}else e=false;this._cached.baselineElement=e}return e}set multiline(e){this._cached.multiline=e,this._cached.baselineElement=void 0}get multiline(){return super.multiline}set controlName(e){if(!this.rendered||!this._controlName)this._controlName=e}get controlName(){return this._controlName||""}set actualParent(e){this._cached.actualParent=e}get actualParent(){let e=this._cached.actualParent;if(void 0===e)e=super.actualParent||this.innerMostWrapped.actualParent,this._cached.actualParent=e;return e}set siblingsLeading(e){this._siblingsLeading=e}get siblingsLeading(){var e;return null!==(e=this._siblingsLeading)&&void 0!==e?e:this._siblingsLeading=this.previousSiblings({lineBreak:true,excluded:true})}set siblingsTrailing(e){this._siblingsTrailing=e}get siblingsTrailing(){var e;return null!==(e=this._siblingsTrailing)&&void 0!==e?e:this._siblingsTrailing=this.nextSiblings({lineBreak:true,excluded:true})}get flowElement(){return this.pageFlow&&(!this.excluded||this.lineBreak)}get previousSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){let e=i-1;while(e>=0){const i=t[e--];if(i.flowElement)return i}}}return null}get nextSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){const e=t.length;let s=i+1;while(s<e){const e=t[s++];if(e.flowElement)return e}}}return null}get firstChild(){return this.naturalChildren.find(e=>!e.excluded||e.lineBreak)||null}get lastChild(){const e=this.naturalChildren;let t=e.length-1;while(t>=0){const i=e[t--];if(!i.excluded||i.lineBreak)return i}return null}get firstStaticChild(){return this.naturalChildren.find(e=>e.flowElement)||null}get lastStaticChild(){const e=this.naturalChildren;let t=e.length-1;while(t>=0){const i=e[t--];if(i.flowElement)return i}return null}get onlyChild(){var e,t,i;return 1===(null!==(t=null===(e=this.renderParent)||void 0===e?void 0:e.renderChildren.length)&&void 0!==t?t:null===(i=this.parent)||void 0===i?void 0:i.length)&&!this.documentRoot}get overflowX(){let e=this._cached.overflow;if(void 0===e)e=_t(this),this._cached.overflow=e;return ct(e,8)}get overflowY(){let e=this._cached.overflow;if(void 0===e)e=_t(this),this._cached.overflow=e;return ct(e,16)}get textEmpty(){let e=this._cached.textEmpty;if(void 0===e){if(this.styleElement&&!this.imageElement&&!this.svgElement&&!this.inputElement){const t=this.textContent;e=""===t||!this.preserveWhiteSpace&&""===t.trim()}else e=false;this._cached.textEmpty=e}return e}set childIndex(e){this._childIndex=e}get childIndex(){let e=this._childIndex;if(e===1/0){let t=this.innerWrapped;if(t)do{const i=t.childIndex;if(i!==1/0){e=i,this._childIndex=e;break}t=t.innerWrapped}while(t);else{const t=this._element;if(t){const i=t.parentElement;if(i)ut(i.childNodes,(i,s)=>{if(i===t)return e=s,this._childIndex=s,true})}}}return e}set containerIndex(e){this._containerIndex=e}get containerIndex(){let e=this._containerIndex;if(e===1/0){let t=this.innerWrapped;while(t){const i=t.containerIndex;if(i!==1/0){e=i,this._containerIndex=e;break}t=t.innerWrapped}}return e}get innerMostWrapped(){if(this.naturalChild)return this;let e=this.innerWrapped;while(e){const t=e.innerWrapped;if(t)e=t;else break}return e||this}get outerMostWrapper(){let e=this.outerWrapper;while(e){const t=e.outerWrapper;if(t)e=t;else break}return e||this}get preserveWhiteSpace(){let e=this._cached.preserveWhiteSpace;if(void 0===e){const t=this.css("whiteSpace");e="pre"===t||"pre-wrap"===t,this._cached.preserveWhiteSpace=e}return e}set use(e){const t=this.use;this.dataset["use"+lt(this.localSettings.systemName)]=(t?t+", ":"")+e}get use(){const e=this.dataset;return e["use"+lt(this.localSettings.systemName)]||e.use}get extensions(){var e;let t=this._cached.extensions;if(void 0===t){const i=null===(e=this.use)||void 0===e?void 0:e.trim();t=i?i.split(/\s*,\s*/):[],this._cached.extensions=t}return t}}const{hasBit:Rt}=squared.lib.util;class LayoutUI extends squared.lib.base.Container{constructor(e,t,i=0,s=0,n){super(n),this.parent=e,this.node=t,this.containerType=i,this.alignmentType=s,this.rowCount=0,this.columnCount=0,this.renderType=0,this.renderIndex=-1}static create(e){const{parent:t,node:i,containerType:s,alignmentType:n,children:a,itemCount:l,rowCount:r,columnCount:o}=e,c=new LayoutUI(t,i,s,n,a);if(l)c.itemCount=l;if(r)c.rowCount=r;if(o)c.columnCount=o;return c}init(){const e=this.length;if(e>1){const e=NodeUI.linearData(this.children);this._floated=e.floated,this._linearX=e.linearX,this._linearY=e.linearY}else if(e>0)this._linearY=this.item(0).blockStatic,this._linearX=!this._linearY;else return;this._initialized=true}setContainerType(e,t){if(this.containerType=e,t)this.addAlign(t)}hasAlign(e){return Rt(this.alignmentType,e)}addAlign(e){if(!Rt(this.alignmentType,e))this.alignmentType|=e;return this.alignmentType}addRender(e){if(!Rt(this.renderType,e))this.renderType|=e;return this.renderType}delete(e){if(Rt(this.alignmentType,e))this.alignmentType^=e;return this.alignmentType}retainAs(e){return super.retainAs(e),this.init(),this}set itemCount(e){this._itemCount=e}get itemCount(){var e;return null!==(e=this._itemCount)&&void 0!==e?e:this.length}set type(e){this.setContainerType(e.containerType,e.alignmentType);const t=e.renderType;if(t)this.addRender(t)}get linearX(){var e;if(!this._initialized)this.init();return null!==(e=this._linearX)&&void 0!==e?e:true}get linearY(){var e;if(!this._initialized)this.init();return null!==(e=this._linearY)&&void 0!==e?e:false}get floated(){if(!this._initialized)this.init();return this._floated||new Set}get singleRowAligned(){let e=this._singleRow;if(void 0===e){const t=this.children,i=t.length;if(i>0){if(e=true,i>1){let s=1/0,n=0;while(n<i){const i=t[n++];if(i.blockStatic||i.multiline||Math.ceil(i.bounds.top)>=s){e=false;break}s=i.bounds.bottom}}this._singleRow=e}else return false}return e}get unknownAligned(){return this.length>1&&!this.linearX&&!this.linearY}}const{convertListStyle:Nt,formatPX:Mt,getStyle:Pt,hasComputedStyle:Bt,hasCoords:Lt,insertStyleSheetRule:Wt,resolveURL:Ft}=squared.lib.css,{getNamedItem:Ot,removeElementsByClassName:Ut}=squared.lib.dom,{maxArray:Ht}=squared.lib.math,{getElementCache:Dt,getPseudoElt:Vt,setElementCache:qt}=squared.lib.session,{appendSeparator:zt,capitalize:Xt,convertWord:jt,flatArray:Gt,hasBit:Yt,hasMimeType:$t,isString:Kt,iterateArray:Qt,partitionArray:Jt,safeNestedArray:Zt,safeNestedMap:ei,trimBoth:ti,trimString:ii}=squared.lib.util,{isPlainText:si}=squared.lib.xml,ni=NodeUI.TEXT_STYLE.concat(["fontSize"]);function ai(e,t){const i=e.trim().split(/\s*,\s*/),s=[],n=[],a=t.length;let l=0;while(l<a){const e=t[l++],a=i.indexOf(e.name);if(-1!==a)s[a]=e;else n.push(e)}return s.length>0?Gt(s).concat(n):t}function li(e){let t=0,i=true,s=true;const n=e.length;let a=0;while(a<n){const t=e[a++];if(!t.floating)s=false;if(!t.rightAligned)i=false;if(!s&&!i)break}if(s)t|=512;if(i)t|=2048;return t}function ri(e,t,i){switch(e.display){case void 0:case"block":case"inline":case"inherit":case"initial":break;default:return true}if((t||!parseFloat(e.width))&&!parseFloat(e.height)){for(const t in e)if(/(padding|Width|Height)/.test(t)&&parseFloat(e[t])>0)return true;else if(!i&&t.startsWith("margin")&&parseFloat(e[t]))return true;return false}return true}function oi(e,t,i,s,n){var a;let l=e,r=0,o=0,c=-1;while("Q"===(null==l?void 0:l.tagName)){const e=(null===(a=Dt(l,"styleMap",n))||void 0===a?void 0:a.quotes)||getComputedStyle(l).quotes;if(e){const n=/("(?:[^"]|\\")+"|[^\s]+)\s+("(?:[^"]|\\")+"|[^\s]+)(?:\s+("(?:[^"]|\\")+"|[^\s]+)\s+("(?:[^"]|\\")+"|[^\s]+))?/.exec(e);if(n){if("::before"===t){if(0===r)i=gi(n[1]),++r;if(n[3]&&r<2)s=gi(n[3]),++r}else{if(0===r)i=gi(n[2]),++r;if(n[4]&&r<2)s=gi(n[4]),++r}c=o}}l=l.parentElement,++o}if(0===r)--o;else if(0===c)return i;else if(c>0)return s;return o%2==0?i:s}function ci(e,t){return e.positionRelative?e.hasPX("left")?e.left*(t?1:-1):e.right*(t?-1:1):0}function hi(e,t,i){const s=e.get(t);if(s)s.add(i);else e.set(t,new Set([i]))}function di(e,t,i=1){if(e&&"none"!==e){const s=/\b([^\-\d][^\-\d]?[^\s]*)\s+(-?\d+)\b/g;let n;while(n=s.exec(e))if(n[1]===t)return parseInt(n[2]);return i}}function ui(e,t){const i=e.length;let s=0;while(s<i){const i=e[s++];if(!(i.hasPX("width")||i.hasPX("maxWidth")||i.imageElement||i.svgElement))i.css("maxWidth",Mt(t))}}const fi=(e,t,i,s,n)=>{var a;return di(null===(a=Dt(e,"styleMap"+i,s))||void 0===a?void 0:a.counterIncrement,t,n)},gi=e=>{var t;return(null===(t=/^"(.+)"$/.exec(e))||void 0===t?void 0:t[1])||e},pi=e=>!e.blockStatic&&true!==e.autoMargin.horizontal&&!(e.blockDimension&&"100%"===e.css("width"))&&(!(e.plainText&&e.multiline)||e.floating),mi=(e,t)=>e.textElement&&(e.blockStatic||e.multiline||1===t),bi=e=>-1*e-2;const{USER_AGENT:xi,isUserAgent:yi}=squared.lib.client,{CSS_PROPERTIES:vi,formatPX:wi,getStyle:Si,hasCoords:Ei,isLength:ki,isPercent:_i}=squared.lib.css,{withinViewport:Ti}=squared.lib.dom,{actualClientRect:Ci,getElementCache:Ai,setElementCache:Ii}=squared.lib.session,{capitalize:Ri,convertFloat:Ni,flatArray:Mi,iterateArray:Pi,safeNestedArray:Bi}=squared.lib.util,{pushIndent:Li,pushIndentArray:Wi}=squared.lib.xml,Fi=vi.borderTop.value,Oi=vi.borderRight.value,Ui=vi.borderBottom.value,Hi=vi.borderLeft.value,Di=[Fi,Oi,Ui,Hi];function Vi(e,t){if(!e.border&&!(Fi[0]in e||Oi[0]in e||Ui[0]in e||Hi[0]in e)){e.border="1px outset "+t;let i=0;while(i<4){const s=Di[i++];e[s[0]]="1px",e[s[1]]="outset",e[s[2]]=t}return true}return false}function qi(e,t,i){if(t){const t=e.backgroundColor;if(!t||"initial"===t)e.backgroundColor=i}if(!e.textAlign)e.textAlign="center";if(!e.padding&&!vi.padding.value.some(t=>!!e[t]))e.paddingTop="2px",e.paddingRight="6px",e.paddingBottom="3px",e.paddingLeft="6px"}const{capitalize:zi,includes:Xi}=squared.lib.util;class ExtensionUI extends Extension{constructor(e,t,i,s=[]){super(e,t,i),this.tagNames=s,this._isAll=0===s.length}static findNestedElement(e,t){if(e.styleElement){const i=zi(e.localSettings.systemName),s=e.element.children,n=s.length;let a=0;while(a<n){const e=s[a++];if(Xi(e.dataset["use"+i]||e.dataset.use,t))return e}}return null}is(e){return this._isAll||this.tagNames.includes(e.tagName)}condition(e,t){return e.use?this.included(e.element):!this._isAll}included(e){return Xi(this.application.getDatasetName("use",e),this.name)}processNode(e,t){}processChild(e,t){}addDescendant(e){const t=this.application.session.extensionMap,i=e.id,s=t.get(i);if(s){if(!s.includes(this))s.push(this)}else t.set(i,[this])}postBaseLayout(e){}postConstraints(e){}postOptimize(e){}afterBaseLayout(e){}afterConstraints(e){}afterResources(e){}beforeBaseLayout(e){}beforeCascade(e,t){}afterFinalize(){}set application(e){this._application=e,this._controller=e.controllerHandler,this._resource=e.resourceHandler}get application(){return this._application}get controller(){return this._controller}get resource(){return this._resource}}const{isLength:ji}=squared.lib.css;const{USER_AGENT:Gi,isUserAgent:Yi}=squared.lib.client,{parseColor:$i}=squared.lib.color,{CSS_PROPERTIES:Ki,calculate:Qi,convertAngle:Ji,formatPX:Zi,getBackgroundPosition:es,getInheritedStyle:ts,hasComputedStyle:is,hasCoords:ss,isCalc:ns,isLength:as,isParentStyle:ls,isPercent:rs,parseAngle:os}=squared.lib.css,{getNamedItem:cs}=squared.lib.dom,{cos:hs,equal:ds,hypotenuse:us,offsetAngleX:fs,offsetAngleY:gs,relativeAngle:ps,sin:ms,triangulate:bs,truncateFraction:xs}=squared.lib.math,{STRING:ys}=squared.lib.regex,{getElementAsNode:vs}=squared.lib.session,{appendSeparator:ws,convertCamelCase:Ss,hasValue:Es,isEqual:ks,isNumber:_s,isString:Ts,iterateArray:Cs}=squared.lib.util,{STRING_SPACE:As}=squared.lib.xml,Is=Ki.borderTop.value,Rs=Ki.borderRight.value,Ns=Ki.borderBottom.value,Ms=Ki.borderLeft.value,Ps=Ki.outline.value,Bs=`((?:rgb|hsl)a?\\(\\d+,\\s+\\d+%?,\\s+\\d+%?(?:,\\s+[\\d.]+)?\\)|#[A-Za-z\\d]{3,8}|[a-z]+)\\s*(${ys.LENGTH_PERCENTAGE}|${ys.CSS_ANGLE}|(?:${ys.CSS_CALC}(?=,)|${ys.CSS_CALC}))?,?\\s*`,Ls=new RegExp(`(?:initial|url\\([^)]+\\)|(repeating-)?(linear|radial|conic)-gradient\\(((?:to\\s+[a-z\\s]+|(?:from\\s+)?-?[\\d.]+(?:deg|rad|turn|grad)|(?:circle|ellipse)?\\s*(?:closest-side|closest-corner|farthest-side|farthest-corner)?)?(?:\\s*(?:(?:-?[\\d.]+(?:[a-z%]+)?\\s*)+)?(?:at\\s+[\\w %]+)?)?),?\\s*((?:${Bs})+)\\))`,"g"),Ws=new RegExp(Bs,"g"),Fs=/\n([^\S\n]*)?$/,Os=/^\s+/,Us=/\s+$/;function Hs(e,t,i){const{width:s,height:n}=t.dimension,a=[];let l,r=false,o=true,c=1;switch(t.type){case"linear":{const{repeating:e,angle:i}=t;switch(r=e,i){case 0:case 180:case 360:l=n,o=false;break;case 90:case 270:l=s;break;default:l=Math.abs(s*ms(i-180))+Math.abs(n*hs(i-180)),o=s>=n;break}break}case"radial":{const{repeating:i,radiusExtent:s,radius:n}=t;o=e.actualWidth>=e.actualHeight,r=i,c=s/n,l=n;break}case"conic":l=Math.min(s,n);break;default:return a}let h,d=0;while(h=Ws.exec(i)){const i=$i(h[1],1,true);if(i){let s=-1;if("conic"===t.type){const e=h[3],t=h[4];if(e&&t)s=Ji(e,t)/360}else{const t=h[2];if(rs(t))s=parseFloat(t)/100;else if(as(t))s=(o?e.parseWidth(t,false):e.parseHeight(t,false))/l;else if(ns(t))if(s=Qi(h[6],{boundingSize:l,fontSize:e.fontSize})/l,isNaN(s))s=-1;if(r&&-1!==s)s*=c}if(isNaN(s))continue;if(0===a.length)if(-1===s)s=0;else if(s>0)a.push({color:i,offset:0});if(-1!==s)s=Math.max(d,s),d=s;a.push({color:i,offset:s})}}const u=a.length,f=a[u-1];if(-1===f.offset)f.offset=1;let g=0;for(let e=0;e<u;++e){const t=a[e];if(-1===t.offset)if(0===e)t.offset=0;else{for(let i=e+1,s=2;i<u-1;++s){const e=a[i++];if(-1!==e.offset){t.offset=(g+e.offset)/s;break}}if(-1===t.offset)t.offset=g+f.offset/(u-1)}g=t.offset}if(r){if(g<100)e:{let e=g;const t=a.slice(0);while(g<100){let i=0;while(i<u){const s=t[i++];if(g=Math.min(e+s.offset,1),a.push(Object.assign(Object.assign({},s),{offset:g})),1===g)break e}e=g}}}else if(g<1)a.push(Object.assign(Object.assign({},a[u-1]),{offset:1}));return Ws.lastIndex=0,a}function Ds(e,t,i,s){if(""!==i){const n=i.split(/\s*,\s*/);return ResourceUI.getBackgroundSize(e,n[t%n.length],s)}}function Vs(e,t,i,s){const n=e.css(s[1])||"none";if("none"!==n){let a=Zi("outline"!==i?e[s[0]]:parseFloat(e.style[s[0]]));if("0px"!==a){let l=e.css(s[2])||"initial";switch(l){case"initial":l="rgb(0, 0, 0)";break;case"inherit":case"currentcolor":case"currentColor":l=ts(e.element,s[2]);break}if("2px"===a&&("inset"===n||"outset"===n))a="1px";if(l=$i(l,1,true),l)return t[i]={width:a,style:n,color:l},true}}return false}function qs(e,t,i){let s=e.css(i);if("initial"===s)s="backgroundClip"===i?"border-box":"padding-box";switch(s){case"border-box":return true;case"padding-box":t[i]={top:e.borderTopWidth,right:e.borderRightWidth,bottom:e.borderBottomWidth,left:e.borderLeftWidth};break;case"content-box":t[i]={top:e.borderTopWidth+e.paddingTop,right:e.borderRightWidth+e.paddingRight,bottom:e.borderBottomWidth+e.paddingBottom,left:e.borderLeftWidth+e.paddingLeft};break}return false}function zs(e,t=0){if(""!==(e=e.trim())){let i=os(e,t);if(!isNaN(i)){if(i<0)i+=360;return i}}return t}function Xs(e){return Ts(e)?e.includes("at ")?/(.+?)?\s*at (.+?)\s*$/.exec(e):[e,e]:null}class ResourceUI extends Resource{static isBackgroundVisible(e){return!!e&&("backgroundImage"in e||"borderTop"in e||"borderRight"in e||"borderBottom"in e||"borderLeft"in e)}static generateId(e,t,i=1){const s=t;let n=i;if(1===i)t+="_"+n;const a=this.STORED.ids,l=a.get(e)||[];do{if(!l.includes(t)){l.push(t);break}else t=s+"_"+ ++n}while(true);return a.set(e,l),t}static insertStoredAsset(e,t,i){const s=ResourceUI.STORED[e];if(s&&Es(i)){let e="";if(s)for(const[t,n]of s.entries())if(ks(i,n)){e=t;break}if(""===e){if(_s(t))t="__"+t;let n=0;do{if(e=0===n?t:t+"_"+n,!s.has(e)){s.set(e,i);break}}while(++n)}return e}return""}static getOptionArray(e,t){let i=[],s=true;return Cs(e.children,e=>{if(!e.disabled||t)switch(e.tagName){case"OPTION":{const t=e.text.trim()||e.value.trim();if(""!==t){if(s&&!_s(t))s=false;i.push(t)}break}case"OPTGROUP":{const[n,a]=this.getOptionArray(e,t);if(n)i=i.concat(n),s=false;else if(a)i=i.concat(a);break}}}),s?[void 0,i]:[i]}static parseBackgroundImage(e,t,i){var s,n;if(""!==t){const a=[];let l,r=0;while(l=Ls.exec(t)){const t=l[0];if(t.startsWith("url(")||"initial"===t)a.push(t);else{const t=!!l[1],o=l[2],c=l[3],h=Ds(e,r,e.css("backgroundSize"),i),d=NodeUI.refitScreen(e,h||e.actualDimension);let u;switch(o){case"linear":{const{width:i,height:s}=d;let n=180;switch(c){case"to top":n=360;break;case"to right top":n=45;break;case"to right":n=90;break;case"to right bottom":n=135;break;case"to bottom":break;case"to left bottom":n=225;break;case"to left":n=270;break;case"to left top":n=315;break;default:if(c)n=zs(c,180)||360;break}let a=xs(fs(n,i)),r=xs(gs(n,s));if(a!==i&&r!==s&&!ds(Math.abs(a),Math.abs(r))){let e;if(n<=90)e=ps({x:0,y:s},{x:i,y:0});else if(n<=180)e=ps({x:0,y:0},{x:i,y:s});else if(n<=270)e=ps({x:0,y:0},{x:-i,y:s});else e=ps({x:0,y:s},{x:-i,y:0});const t=Math.abs(e-n);a=xs(fs(n,bs(t,90-t,us(i,s))[1])),r=xs(gs(n,bs(90,90-n,a)[0]))}const h={type:o,repeating:t,dimension:d,angle:n,angleExtent:{x:a,y:r}};h.colorStops=Hs(e,h,l[4]),u=h;break}case"radial":{const a=Xs(c),r=es((null==a?void 0:a[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i}),{left:f,top:g}=r,{width:p,height:m}=d;let b="ellipse",x=g,y=g,v=1/0,w=-1/0,S=0,E=0;if(a){const t=null===(s=a[1])||void 0===s?void 0:s.trim();if(t)if(t.startsWith("circle"))b="circle";else{let i=1/0;const s=t.split(" ");for(let t=0;t<s.length;++t)i=Math.min(0===t?e.parseWidth(s[t],false):e.parseHeight(s[t],false),i);if(S=i,E=i,1===length||s[0]===s[1])b="circle"}}for(const e of[[0,0],[p,0],[p,m],[0,m]]){const t=Math.round(us(Math.abs(e[0]-f),Math.abs(e[1]-g)));v=Math.min(t,v),w=Math.max(t,w)}for(const e of[p-f,m-g,f])x=Math.min(e,x),y=Math.max(e,y);const k={type:o,repeating:t,dimension:d,shape:b,center:r,closestSide:x,farthestSide:y,closestCorner:v,farthestCorner:w};if(0===S&&0===E){S=w;const e=(null===(n=null==a?void 0:a[1])||void 0===n?void 0:n.split(" ").pop())||"";switch(e){case"closest-corner":case"closest-side":case"farthest-side":{const i=k[Ss(e)];if(t)E=i;else S=i;break}default:E=w;break}}k.radius=S,k.radiusExtent=E,k.colorStops=Hs(e,k,l[4]),u=k;break}case"conic":{const t=Xs(c),s={type:o,dimension:d,angle:zs(c),center:es((null==t?void 0:t[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i})};s.colorStops=Hs(e,s,l[4]),u=s;break}}a.push(u||"initial")}++r}if(Ls.lastIndex=0,a.length>0)return a}}static getBackgroundSize(e,t,i){let s=0,n=0;switch(t){case"":case"cover":case"contain":case"100% 100%":case"auto":case"auto auto":case"initial":return;default:{const a=t.split(" ");for(let t=0;t<a.length;++t){let l=a[t];if("auto"===l)l="100%";switch(t){case 0:s=e.parseUnit(l,{parent:false,screenDimension:i});break;case 1:n=e.parseUnit(l,{dimension:"height",parent:false,screenDimension:i});break}}break}}return s>0&&n>0?{width:Math.round(s),height:Math.round(n)}:void 0}static hasLineBreak(e,t,i){if(e.naturalElements.length>0)return e.naturalElements.some(e=>e.lineBreak);else if(!t&&e.naturalChild){const t=e.element;let s=t.textContent;if(i)s=s.trim();return s.includes("\n")&&(e.plainText&&ls(t,"whiteSpace","pre","pre-wrap")||e.css("whiteSpace").startsWith("pre"))}return false}static checkPreIndent(e){if(e.plainText){const t=e.actualParent;if(t.preserveWhiteSpace&&t.ascend({condition:e=>"PRE"===e.tagName,startSelf:true}).length>0){let t=e.nextSibling;if(null==t?void 0:t.naturalElement){const i=e.textContent;if(Ts(i)){const e=Fs.exec(i);if(e){if(!t.textElement)t=t.find(e=>e.naturalChild&&e.textElement,{cascade:true,error:e=>e.naturalChild&&!e.textElement&&0===e.length});if(t)return[e[1]?e[0]:"",t]}}}}}}finalize(e){}reset(){super.reset();const e=ResourceUI.STORED;for(const t in e)e[t].clear()}writeRawImage(e,t){const i=this.fileHandler;if(i){const{filename:s,data:n,encoding:a,width:l,height:r}=t;if(s&&n){const t={pathname:ws(this.userSettings.outputDirectory,this.controllerSettings.directory.image),filename:s,mimeType:e,width:l,height:r};if("base64"===a)t.base64=n.startsWith("data:image/")?n.substring(n.indexOf(",")+1):n;else if(Array.isArray(n))t.bytes=n;else return;return i.addAsset(t),t}}}setBoxStyle(e){var t;if((e.styleElement||e.visibleStyle.background)&&e.hasResource(et.BOX_STYLE)){const i={};let s,n=e.visibleStyle.borderWidth,a=e.backgroundColor;if(n){if(e.borderTopWidth>0)Vs(e,i,"borderTop",Is);if(e.borderRightWidth>0)Vs(e,i,"borderRight",Rs);if(e.borderBottomWidth>0)Vs(e,i,"borderBottom",Ns);if(e.borderLeftWidth>0)Vs(e,i,"borderLeft",Ms)}if(Vs(e,i,"outline",Ps))n=true;if(""===a&&e.has("backgroundColor")&&!e.documentParent.visible)a=e.css("backgroundColor");if(e.hasResource(et.IMAGE_SOURCE))s=ResourceUI.parseBackgroundImage(e,e.backgroundImage,e.localSettings.screenDimension);if(a||s||n||e.data(Resource.KEY_NAME,"embedded")){if(i.backgroundColor=(null===(t=$i(a,1,e.inputElement))||void 0===t?void 0:t.valueAsRGBA)||"",i.backgroundImage=s,Object.assign(i,e.cssAsObject("backgroundSize","backgroundRepeat","backgroundPositionX","backgroundPositionY")),qs(e,i,"backgroundClip"))qs(e,i,"backgroundOrigin");if("0px"!==e.css("borderRadius")){const[t,s,n,a]=e.cssAsTuple("borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"),[l,r]=t.split(" "),[o,c]=s.split(" "),[h,d]=n.split(" "),[u,f]=a.split(" "),g=!(r||c||d||f)?[l,o,h,u]:[l,r||l,o,c||o,h,d||h,u,f||u],p=e.actualWidth>=e.actualHeight,m=g[0];if(g.every(e=>e===m))g.length="0px"===m||""===m?0:1;const b=g.length;if(b>0){const t=p?"width":"height";let s=0;while(s<b)g[s]=Zi(e.parseUnit(g[s++],{dimension:t,parent:false}));i.borderRadius=g}}e.data(ResourceUI.KEY_NAME,"boxStyle",i)}}}setFontStyle(e){if((e.textElement||e.inlineText)&&(!e.textEmpty||e.visibleStyle.background||e.pseudoElement)||e.inputElement){const t=$i(e.css("color"));let i=e.css("fontWeight");if(!_s(i))switch(i){case"lighter":i="200";break;case"bold":i="700";break;case"bolder":i="900";break;default:i="400";break}e.data(ResourceUI.KEY_NAME,"fontStyle",{fontFamily:e.css("fontFamily").trim(),fontStyle:e.css("fontStyle"),fontSize:e.fontSize,fontWeight:i,color:(null==t?void 0:t.valueAsRGBA)||""})}}setValueString(e){var t,i,s;const n=e.element;if(n){let a,l,r=false,o=false;switch(n.tagName){case"INPUT":switch(l=cs(n,"value"),n.type){case"radio":case"checkbox":{const t=e.companion;if(false===(null==t?void 0:t.visible))l=t.textContent.trim();break}case"submit":if(""===l&&!e.visibleStyle.backgroundImage)l="Submit";break;case"reset":if(""===l&&!e.visibleStyle.backgroundImage)l="Reset";break;case"time":if(""===l)a="--:-- --";break;case"date":case"datetime-local":if(""===l){switch((new Intl.DateTimeFormat).resolvedOptions().locale){case"en-US":a="mm/dd/yyyy";break;default:a="dd/mm/yyyy";break}if("datetime-local"===n.type)a+=" --:-- --"}break;case"week":if(""===l)a="Week: --, ----";break;case"month":if(""===l)a="--------- ----";break;case"text":case"password":case"url":case"email":case"search":case"number":case"tel":if(""===l)a=n.placeholder;break;case"file":l=Yi(8)?"Browse...":"Choose File";break;case"color":{const t=this.controllerSettings.style.inputColorBorderColor,i=($i(l)||$i("rgb(0, 0, 0)")).valueAsRGBA,{width:s,height:n}=e.actualDimension,a=`${s-10}px ${n-10}px, ${s-8}px ${n-8}px`,r="no-repeat, no-repeat",o="center, center",c="center, center",h=ResourceUI.parseBackgroundImage(e,`linear-gradient(${i}, ${i}), linear-gradient(${t}, ${t})`);l="";let d=e.data(ResourceUI.KEY_NAME,"boxStyle");if(d){const e=d.backgroundImage;if(e){d.backgroundSize=a+", "+d.backgroundSize,d.backgroundRepeat=r+", "+d.backgroundRepeat,d.backgroundPositionX=o+", "+d.backgroundPositionX,d.backgroundPositionY=c+", "+d.backgroundPositionY,e.unshift(...h);break}}else d={};e.data(ResourceUI.KEY_NAME,"boxStyle",Object.assign(d,{backgroundSize:a,backgroundRepeat:r,backgroundPositionX:o,backgroundPositionY:c,backgroundImage:h}));break}case"range":a=l,l="";break}break;case"TEXTAREA":l=n.value,a=n.placeholder;break;case"IFRAME":l=n.src;break;default:if(r=true,e.plainText||e.pseudoElement||e.hasAlign(1024)&&e.textElement)l=e.textContent.replace(/&/g,"&amp;"),o=true;else if(e.inlineText)l=e.textEmpty?As:"BUTTON"===e.tagName?e.textContent:this.removeExcludedFromText(e,n);if(l)switch(l=l.replace(/\u00A0/g,As),e.css("whiteSpace")){case"pre":case"pre-wrap":{if(false===(null===(t=e.renderParent)||void 0===t?void 0:t.layoutVertical))l=l.replace(/^\s*\n/,"");const i=ResourceUI.checkPreIndent(e);if(i){const[e,t]=i;if(""!==e)t.textContent=e+t.textContent;l=l.replace(Fs,"")}l=l.replace(/\n/g,"\\n").replace(/\t/g,As.repeat(e.toInt("tabSize",8))).replace(/\s/g,As),o=true,r=false;break}case"pre-line":l.replace(/\n/g,"\\n").replace(/\s+/g," "),o=true,r=false;break;case"nowrap":l=l.replace(/\n+/g," "),o=true;default:{const t=e.onlyChild&&e.htmlElement;if(t||(null===(i=e.previousSibling)||void 0===i?void 0:i.blockStatic))l=l.replace(Os,"");if(t||(null===(s=e.nextSibling)||void 0===s?void 0:s.blockStatic))l=l.replace(Us,"")}}else if(0===e.naturalChildren.length&&!e.hasPX("height")&&ResourceUI.isBackgroundVisible(e.data(ResourceUI.KEY_NAME,"boxStyle"))&&!Ts(e.textContent))l=e.textContent;break}if(a)e.data(ResourceUI.KEY_NAME,"hintString",a);if(l){if(r)if(e.pageFlow){const t=e.siblingsLeading[0],i=e.siblingsTrailing.find(e=>!e.excluded||e.lineBreak);let s=false;if(l.length>1)if(!t||t.multiline||t.lineBreak||t.floating||t.plainText&&Us.test(t.textContent))l=l.replace(Os,"");else if(t.naturalElement){const e=t.textContent,i=e.length;if(i>0)s=32===e.charCodeAt(i-1)}if(o){const n=!e.lineBreakTrailing&&Us.test(l);if(Os.test(l)&&false===(null==t?void 0:t.block)&&!t.lineBreak&&!s)l=As+l.trim();else l=l.trim();if(n&&false===(null==i?void 0:i.blockStatic)&&!i.floating)l+=As}else if(!/^[\s\n]+$/.test(l))l=l.replace(Os,t&&(t.block||t.lineBreak||s&&t.htmlElement&&t.textContent.length>1||e.multiline&&ResourceUI.hasLineBreak(e))?"":As),l=l.replace(Us,"table-cell"===e.display||e.lineBreakTrailing||e.blockStatic||(null==i?void 0:i.floating)?"":As);else if(!e.inlineText)return}else l=l.trim();if(l)e.data(ResourceUI.KEY_NAME,"valueString",l)}}else if(e.inlineText){const t=e.textContent;if(t)e.data(ResourceUI.KEY_NAME,"valueString",t)}}removeExcludedFromText(e,t){const{preserveWhiteSpace:i,sessionId:s}=e,n=t.children.length>0||"CODE"===t.tagName,a=n?"innerHTML":"textContent";let l=t[a]||"";if(t.childNodes.forEach((e,t)=>{const r=vs(e,s);if(!r||!r.textElement||!r.pageFlow||r.positioned||r.pseudoElement||r.excluded){if(r)if(n&&r.htmlElement){const e=r.toElementString("outerHTML");if(r.lineBreak)l=l.replace(!i?new RegExp(`\\s*${e}\\s*`):e,"\\n");else if(r.positioned)l=l.replace(e,"");else if(!i)l=l.replace(e,r.pageFlow&&Ts(r.textContent)?As:"");return}else{const e=r.plainText?r.textContent:r[a];if(Ts(e)){if(!i)l=l.replace(e,"");return}}else if(is(e))l=l.replace(e.outerHTML,!ss(getComputedStyle(e).getPropertyValue("position"))&&Ts(e.textContent)?As:"");if(!i)if(0===t)l=l.replace(Os,"");else if(t===length-1)l=l.replace(Us,"")}}),!n)return l;else if(!i&&/^[\s\n]+$/.test(l))return e.blockStatic?As:"";return l.replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(parseInt(t)))}get controllerSettings(){return this.application.controllerHandler.localSettings}get mapOfStored(){return ResourceUI.STORED}}ResourceUI.STORED={ids:new Map,strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,images:new Map};const{formatPercent:js,formatPX:Gs,isLength:Ys,isPercent:$s,isPx:Ks}=squared.lib.css,{maxArray:Qs}=squared.lib.math,{isNumber:Js,plainMap:Zs,safeNestedArray:en,trimString:tn,withinRange:sn}=squared.lib.util,nn="[\\d.]+[a-z%]+|auto|max-content|min-content",an="minmax\\(\\s*([^,]+),\\s+([^)]+)\\s*\\)",ln=new RegExp(`^${nn}$`),rn=new RegExp(`\\s*(repeat\\(\\s*(auto-fit|auto-fill|\\d+),\\s+(.+)\\)|\\[([\\w\\s\\-]+)\\]|${an}|fit-content\\(\\s*([\\d.]+[a-z%]+)\\s*\\)|${nn}\\s*)\\s*`,"g"),on=new RegExp(`\\s*(\\[([\\w\\s\\-]+)\\]|${an}|fit-content\\(\\s*([\\d.]+[a-z%]+)\\s*\\)|${nn})\\s*`,"g"),cn=new RegExp(nn),hn=new RegExp(an),dn=new RegExp("fit-content\\(\\s*([\\d.]+[a-z%]+)\\s*\\)"),un=new RegExp("\\[([\\w\\s\\-]+)\\]");function fn(e,t){const i=e.repeat,s=[],n=[],a=t.length;for(let e=0;e<a;++e)if(i[e])n.push(t[e]);else s.push(t[e]);const l=e.length,r=l-s.length,o=new Array(l);for(let e=0;e<l;++e)if(i[e]){for(let t=0,i=0;t<r;++e,++t,++i){if(i===n.length)i=0;o[e]=n[i]}--e}else o[e]=s.shift();return o}function gn(e,t){const i=e.unit;if(1===i.length&&(e.autoFill||e.autoFit)){const s=e.unitMin;let n=0;for(const e of[i[0],s[0]])if($s(e))n=Math.max(parseFloat(e)/100*t,n);else if(Ys(e))n=Math.max(parseFloat(e),n);if(n>0)return e.length=Math.floor(t/(n+e.gap)),e.unit=fn(e,i),e.unitMin=fn(e,s),true}return false}function pn(e,t,i,s,n){let a=0,l=0,r=1;const o=s.length;let c=0;while(c<o){const e=s[c++];if(Ks(e))a+=parseFloat(e);else if(CssGrid.isFr(e))l+=parseFloat(e);else if($s(e))r-=parseFloat(e)/100}if(r<1&&l>0){const h=(e*r-(i-1)*t-n.reduce((e,t)=>e+Math.max(0,t),0)-a)/l;if(h>0)for(c=0;c<o;++c){const e=s[c];if(CssGrid.isFr(e))s[c]=Gs(parseFloat(e)*h)}}}function mn(e,t){if(0===e.length){let i=0;while(i<t)e[i++]="1fr"}}function bn(e,t,i){if(i){for(let s=0,n=-1,a=0;s<e;++s)if(0===i[s]){if(-1===n)n=s;if(++a===t)return n}else n=-1;return-1}return 0}function xn(e){const t=e.length;for(let i=0;i<t;++i)for(const t of e[i])if(0===t)return i;return Math.max(0,t-1)}function yn(e,t,i,s){let n=t.unit,a=n.length;if(a<i)if(t.autoFill||t.autoFit){if(0===a)n.push("auto"),t.unitMin.push(""),t.repeat.push(true);n=fn(t,n),t.unit=n,t.unitMin=fn(t,t.unitMin)}else{const e=t.auto,s=e.length;if(s>0){let t=0;while(n.length<i){if(t===s)t=0;n.push(e[t++])}}}else if(t.autoFit||t.autoFill&&(s&&e.blockStatic&&!e.hasWidth&&!e.hasPX("maxWidth",{percent:false})||!s&&!e.hasHeight))n.length=i;let l=1,r=0,o=0;a=n.length;let c=0;while(c<a){const e=n[c++];if($s(e))l-=parseFloat(e)/100;else if(CssGrid.isFr(e))r+=parseFloat(e);else if("auto"===e)++o}if(t.flexible=l<1||r>0,l<1)if(r>0)for(c=0;c<a;++c){const e=n[c];if(CssGrid.isFr(e))n[c]=l*(parseFloat(e)/r)+"fr"}else if(1===o){const e=n.findIndex(e=>"auto"===e);if(-1!==e)n[e]=js(l)}}const vn=(e,t,i)=>Ys(t)?Gs(e.parseUnit(t,{dimension:0!==i?"width":"height"})):t;class CssGrid extends ExtensionUI{static createDataRowAttribute(e=0){return{length:0,gap:e,unit:[],unitMin:[],unitTotal:[],repeat:[],auto:[],autoFill:false,autoFit:false,name:{},fixedWidth:false,flexible:false,frTotal:0}}is(e){return e.gridElement}condition(e){return e.length>0}processNode(e){const t=function(e){const t=e.cssAsObject("alignItems","alignContent","justifyItems","justifyContent","gridAutoFlow");return Object.assign(t,{children:[],rowData:[],rowSpanMultiple:[],rowDirection:!t.gridAutoFlow.includes("column"),dense:t.gridAutoFlow.includes("dense"),templateAreas:{},row:CssGrid.createDataRowAttribute(e.parseHeight(e.css("rowGap"),false)),column:CssGrid.createDataRowAttribute(e.parseWidth(e.css("columnGap"),false)),emptyRows:[],minCellHeight:0})}(e),{column:i,dense:s,row:n,rowDirection:a}=t,l=[],r=[],o=[],c=[e.cssInitial("gridTemplateRows"),e.cssInitial("gridTemplateColumns"),e.css("gridAutoRows"),e.css("gridAutoColumns")],[h,d,u,f]=a?[0,1,2,3]:[1,0,3,2];let g,p=false,m=false;for(let t=0;t<4;++t){const s=c[t];if(""!==s&&"none"!==s&&"auto"!==s){const a=0===t?n:i,{name:l,repeat:r,unit:o,unitMin:c}=a;let h,d=1;while(h=rn.exec(s)){const s=h[1].trim();switch(t){case 0:case 1:if(s.startsWith("["))for(const e of h[4].split(/\s+/))en(l,e).push(d);else if(s.startsWith("repeat")){let i=1;switch(h[2]){case"auto-fit":a.autoFit=true;break;case"auto-fill":a.autoFill=true;break;default:i=parseInt(h[2])||1;break}if(i>0){const s=[];let n;while(n=on.exec(h[3])){const i=n[1];let a;if(a=un.exec(i)){const e=a[1];if(!l[e])l[e]=[];s.push({name:e})}else if(a=hn.exec(i))s.push({unit:vn(e,a[2],t),unitMin:vn(e,a[1],t)});else if(a=dn.exec(i))s.push({unit:vn(e,a[1],t),unitMin:"0px"});else if(a=cn.exec(i))s.push({unit:vn(e,a[0],t)})}if(s.length>0)for(let e=0;e<i;++e)for(let e=0;e<s.length;++e){const t=s[e];if(t.name)l[t.name].push(d);else if(t.unit)o.push(t.unit),c.push(t.unitMin||""),r.push(true),++d}on.lastIndex=0}}else if(s.startsWith("minmax"))o.push(vn(e,h[6],t)),c.push(vn(e,h[5],t)),r.push(false),++d;else if(s.startsWith("fit-content"))o.push(vn(e,h[7],t)),c.push("0px"),r.push(false),++d;else if(ln.test(s))o.push(vn(e,s,t)),c.push(""),r.push(false),++d;break;case 2:case 3:(2===t?n:i).auto.push(Ys(s)?Gs(e.parseUnit(s,{dimension:2!==t?"width":"height"})):s);break}}rn.lastIndex=0}}if(a)e.sort((e,t)=>{const i=e.linear,s=t.linear;if(!sn(i.top,s.top))return i.top<s.top?-1:1;else if(!sn(i.left,s.left))return i.left<s.left?-1:1;return 0});else e.sort((e,t)=>{const i=e.linear,s=t.linear;if(!sn(i.left,s.left))return i.left<s.left?-1:1;else if(!sn(i.top,s.top))return i.top<s.top?-1:1;return 0});if(!e.has("gridTemplateAreas")&&e.every(e=>"auto"===e.css("gridRowStart")&&"auto"===e.css("gridColumnStart"))){const[s,l,r,c,h]=a?["top","bottom",2,1,3]:["left","right",3,0,2];let d,u=0,f=0,g=0;if(a){if(i.autoFill)p=gn(i,e.actualWidth)}else if(n.autoFill)m=gn(n,e.actualHeight);e.each((e,i)=>{if(!d||e.linear[s]>=d.linear[l]||f>0&&f===g)g=Math.max(f,g),++u,f=1;const[n,p]=e.cssAsTuple("gridRowEnd","gridColumnEnd");let m=1,b=1;if(n.startsWith("span"))m=parseInt(n.split(" ")[1]);else if(Js(n))m=parseInt(n)-u;if(p.startsWith("span"))b=parseInt(p.split(" ")[1]);else if(Js(p))b=parseInt(p)-f;if(1===f&&g>0){let e=false;do{const i=new Array(g-1).fill(1);for(const e of o){const t=e.placement;if(t[r]>u)for(let e=t[c];e<t[h];++e)i[e-1]=0}const s=i.length;for(let t=0,n=0,a=0;t<s;++t)if(i[t]){if(0===n)a=t;if(++n===b){f=a+1,e=true;break}}else n=0;if(!e)t.emptyRows[u-1]=i,++u}while(!e)}if(a)o[i]={outerCoord:e.linear.top,placement:[u,f,u+m,f+b],rowSpan:m,columnSpan:b};else o[i]={outerCoord:e.linear.left,placement:[f,u,f+b,u+m],rowSpan:m,columnSpan:b};f+=b,d=e})}else{const s=t.templateAreas;let l;p=gn(i,e.actualWidth),m=gn(n,e.actualHeight),e.css("gridTemplateAreas").split(/"[\s\n]+"/).forEach((e,t)=>{if("none"!==e)tn(e.trim(),'"').split(/\s+/).forEach((e,i)=>{if("."!==e.charAt(0)){const n=s[e];if(n)n.rowSpan=t-n.rowStart+1,n.columnSpan=i-n.columnStart+1;else s[e]={rowStart:t,rowSpan:1,columnStart:i,columnSpan:1}}})}),e.each((e,t)=>{const r=e.cssAsTuple("gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd"),c=[0,0,0,0];let h=-1,d=-1;if(Object.keys(s).length)for(let e=0;e<4;++e){const t=r[e];let i=s[t];if(i)switch(e){case 0:c[0]=i.rowStart+1;break;case 1:c[1]=i.columnStart+1;break;case 2:c[2]=i.rowStart+i.rowSpan+1;break;case 3:c[3]=i.columnStart+i.columnSpan+1;break}else{const n=/^([\w-]+)-(start|end)$/.exec(t);if(n)if(i=s[n[1]],i)if("start"===n[2])switch(e){case 0:case 2:c[e]=i.rowStart+1;break;case 1:case 3:c[e]=i.columnStart+1;break}else switch(e){case 0:case 2:c[e]=i.rowStart+i.rowSpan+1;break;case 1:case 3:c[e]=i.columnStart+i.columnSpan+1;break}}}if(0===c[0]||0===c[1]||0===c[2]||0===c[3]){const e=(e,t,i,s)=>{if(Js(e)){const i=parseInt(e);if(i>0)return c[t]=i,true;else if(i<0&&t>=2){const e=t-2;return c[c[e]>0?t:e]=i+s+2,true}}else if(e.startsWith("span")){const n=parseInt(e.split(" ")[1]);if(n===s&&l)if(a){if(!i){const e=l[2];if(e>0&&0===c[0])c[0]=e}}else if(i){const e=l[3];if(e>0&&0===c[1])c[1]=e}const o=c[t-2];switch(t){case 0:{const e=r[2];if(Js(e)){const t=parseInt(e);c[0]=t-n,c[2]=t}break}case 1:{const e=r[3];if(Js(e)){const t=parseInt(e);c[1]=t-n,c[3]=t}break}case 2:case 3:if(o>0)c[t]=o+n;break}if(i){if(-1===h)h=n}else if(-1===d)d=n;return true}return false};let t,s;for(let a=0;a<4;++a){const l=r[a];if("auto"!==l&&0===c[a]){const o=a%2==0,u=o?n:i;if(!e(l,a,o,Math.max(1,u.unit.length))){const e=l.split(" ");if(1===e.length)e[1]=e[0],e[0]="1";else if(Js(e[0]))if(o)if(t)h=parseInt(e[0])-parseInt(t[0]);else t=e;else if(s)d=parseInt(e[0])-parseInt(s[0]);else s=e;const i=u.name[e[1]];if(i){const t=parseInt(e[0]);if(t<=i.length)c[a]=i[t-1]+(e[1]===r[a-2]?1:0)}}}}}if(!l){if(0===c[0])c[0]=1;if(0===c[1])c[1]=1}const[u,f,g,p]=c;if(-1===h)h=u>0&&g>0?g-u:1;else if(u>0&&0===g)c[2]=u+h;if(-1===d)d=f>0&&p>0?p-f:1;else if(f>0&&0===p)c[3]=u+d;if(0===c[2]&&c[0]>0)c[2]=c[0]+h;if(0===c[3]&&c[1]>0)c[3]=c[1]+d;o[t]={outerCoord:a?e.bounds.top:e.bounds.left,placement:c,rowSpan:h,columnSpan:d},l=c})}{let t=1,s=0,l=0;while(l<o.length){const i=o[l++];if(i){const[n,l,r]=a?[i.columnSpan,1,3]:[i.rowSpan,0,2],o=i.placement;if(o.some(e=>e>0))t=Math.max(t,n,o[l],o[r]-1);if(sn(i.outerCoord,a?e.box.top:e.box.left))s+=n}}g=Math.max(t,s,a&&!p?i.unit.length:0,!a&&!m?n.unit.length:0)}e.each((e,i)=>{const{placement:n,rowSpan:c,columnSpan:p}=o[i],[m,b]=a?[c,p]:[p,c];while(0===n[0]||0===n[1]){const e=n.slice(0);if(0===e[h]){let t=l.length;for(let i=s?0:xn(r),n=0,a=-1;i<t;++i){if(-1!==bn(g,b,r[i])){if(0===n)a=i,t=Math.max(t,i+m);if(++n===m){e[h]=a+1;break}}else n=0,a=-1,t=l.length}}if(0===e[h]){if(n[h]=l.length+1,0===n[d])n[d]=1}else if(0===e[d]){if(0===e[u])e[u]=e[h]+m;const t=[],i=e[h]-1,s=e[u]-1;let n=i;while(n<s){const e=l[n++];if(!e)t.push([[0,-1]]);else if(e.reduce((e,t)=>e+(t?1:0),0)+b<=g){const i=[];let s=0;for(let t=0,n=-1;t<g;++t){const a=e[t];if(!a){if(-1===n)n=t;++s}if(a||t===g-1){if(s>=b)i.push([n,n+s]);n=-1,s=0}}if(i.length>0)t.push(i);else break}else break}const a=t.length;if(a>0){const l=t[0];if(-1===l[0][1])e[d]=1;else if(a===s-i)if(a>1)e:{const i=l.length;n=0;while(n<i){const i=l[n++];for(let s=i[0];s<i[1];++s){let i=1;while(i<a){const n=t[i++];let a=0;while(a<n.length){const t=n[a++];if(s>=t[0]&&(-1===t[1]||s+b<=t[1])){e[d]=s+1;break e}}}}}}else e[d]=l[0][0]+1}}const t=e[h];if(t>0){const i=e[d];if(i>0)n[h]=t,n[d]=i}}if(0===n[u])n[u]=n[h]+m;if(0===n[f])n[f]=n[d]+b;if(function(e,t,i,s,n,a,l,r,o,c){if(r.every(e=>e>0)){for(let h=r[i]-1;h<r[s]-1;++h){const i=en(e,h);let s=t[h],d=r[n]-1;if(!s){if(s=new Array(o).fill(0),!c){let e=0;while(e<d)s[e++]=1}t[h]=s}while(d<r[a]-1)en(i,d).push(l),s[d++]=1}return true}return false}(l,r,h,u,d,f,e,n,g,s)){const[i,l,o,c]=n,h=i-1,d=o-i,u=l-1;if(!s){const e=a?h:u;if(e>0){const t=r[e-1];let i=0;while(i<g)t[i++]=1}}if(d>1){const e=t.rowSpanMultiple,i=h+d;let s=h;while(s<i)e[s++]=true}e.data(this.name,"cellData",{rowStart:h,rowSpan:d,columnStart:u,columnSpan:c-l})}});let b=l.length;if(b>0){let s;if(a)s=l,t.rowData=l,b=Math.max(Qs(Zs(l,e=>e.length)),i.unit.length);else{let e;s=t.rowData;for(let t=0;t<b;++t){const i=l[t],n=i.length;e=0;while(e<n)en(s,e)[t]=i[e++]}}const r=a?n.unitTotal:i.unitTotal,o=t.children;{const e=s.length;let t,i,n=0;while(n<e){const e=s[n++],l=e.length;t=0;while(t<l){const s=e[t];let n=r[t]||0;if(s){let e=0;const t=s.length;i=0;while(i<t){const t=s[i++];if(!o.includes(t))e=Math.max(e,a?t.bounds.height:t.bounds.width),o.push(t)}n+=e}r[t++]=n}}}if(o.length===e.length){const{gap:l,unit:r}=n,c=i.gap,h=Math.max(r.length,s.length),d=new Array(h).fill(0),u=new Array(b).fill(0),f=new Set;n.length=h,i.length=b;let g=0;for(let e=0;e<h;++e){const i=s[e],n=r[e];if(i)for(let s=0;s<b;++s){const n=i[s];if(n){const t=n.length;let i=0;while(i<t){const t=n[i++];if(!f.has(t)){const{columnSpan:i,rowSpan:n}=t.data(this.name,"cellData"),a=s+i-1,r=e+n-1;if(c>0&&a<b-1)t.modifyBox(4,c);if(l>0&&r<h-1)t.modifyBox(8,l);if(1===n){const i=t.bounds.height,s=d[e];if(t.hasHeight)if(s<0){if(i>Math.abs(s))d[e]=i}else d[e]=Math.max(i,s);else if(i>Math.abs(s))d[e]=-i;g=Math.max(i,g)}if(1===i){const e=t.bounds.width,i=u[s];if(t.hasWidth)if(i<0){if(e>Math.abs(i))u[s]=e}else u[s]=Math.max(e,i);else if(e>Math.abs(i))u[s]=-e}f.add(t)}}}else if(!a)t.emptyRows[s]=[1/0]}else{if(Js(n))d[e]=parseFloat(n);if(a)t.emptyRows[e]=[1/0]}}if(t.minCellHeight=g,a){if(e.hasPX("width",{percent:false}))i.fixedWidth=true,i.flexible=false,pn(e.actualWidth,c,b,i.unit,u);if(e.hasHeight&&!CssGrid.isAligned(e))mn(n.unit,h)}else{if(e.hasPX("height",{percent:false}))n.fixedWidth=true,n.flexible=false,pn(e.actualHeight,l,h,r,d);if(e.hasWidth&&!CssGrid.isJustified(e))mn(i.unit,b)}if(e.retainAs(o),e.cssSort("zIndex",{byInt:true}),e.cssTry("display","block"))e.each(e=>{const{width:t,height:i}=e.boundingClientRect;e.data(this.name,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i}))}),e.cssFinally("display");yn(e,i,b,true),yn(e,n,h,false),e.data(this.name,"mainData",t)}}}}CssGrid.isFr=e=>/\dfr$/.test(e),CssGrid.isAligned=e=>e.hasHeight&&/^space-|center|flex-end|end/.test(e.css("alignContent")),CssGrid.isJustified=e=>(e.blockStatic||e.hasWidth)&&/^space-|center|flex-end|end|right/.test(e.css("justifyContent"));const{withinRange:wn}=squared.lib.util;const{aboveRange:Sn,belowRange:En,plainMap:kn,safeNestedArray:_n,withinRange:Tn}=squared.lib.util;function Cn(e,t){const i=t.bounds.top,s=e.length;let n=0;while(n<s){const t=e[n++].findIndex(e=>{if(!e)return false;const t=e.bounds.top;return Tn(i,t)||Math.ceil(i)>=t&&i<Math.floor(e.bounds.bottom)});if(-1!==t)return t}return-1}class Grid extends ExtensionUI{static createDataCellAttribute(){return{rowSpan:0,columnSpan:0,index:-1,cellStart:false,cellEnd:false,rowEnd:false,rowStart:false}}condition(e){if(e.length>1&&!e.layoutElement&&"TABLE"!==e.tagName&&!e.has("listStyle"))if("table"===e.display)return e.every(e=>"table-row"===e.display&&e.every(e=>"table-cell"===e.display))||e.every(e=>"table-cell"===e.display);else if(0===e.percentWidth||!e.find(e=>e.percentWidth>0,{cascade:true})){let t=false,i=0;for(const s of e)if(s.pageFlow&&s.blockStatic&&!s.visibleStyle.background&&0===s.percentWidth&&!s.autoMargin.leftRight&&!s.autoMargin.left){if(s.length>1)t=true;if("list-item"===s.display&&!s.has("listStyleType"))++i}else return false;return i===e.length||t&&e.every(e=>e.length>0&&NodeUI.linearData(e.children).linearX)}return false}processNode(e){var t;const i=[],s={};let n=[];e.each(e=>{e.each(e=>{if(e.visible)_n(s,Math.floor(e.linear.left)).push(e)})});const a=Object.keys(s),l=a.length;if(l>0){let r=-1;for(let e=0;e<l;++e){const t=s[a[e]];if(0===e)r=l;else if(r!==t.length){r=-1;break}}if(-1!==r)n=kn(a,e=>s[e]);else{const r=[];for(let e=0;e<l;++e){const t=s[a[e]],i=t.length;if(0===e&&0===i)return;r[e]=0===e?0:r[e-1];for(let s=0;s<i;++s){const a=t[s],{left:l,right:o}=a.linear;if(0===e||Sn(l,r[e-1])){const t=_n(n,e);if(0===e||n[0].length===i)t[s]=a;else{const e=Cn(n,a);if(-1!==e)t[e]=a;else return}}else{const e=n[n.length-1];if(e){let t=1/0,i=-1/0,s=0;while(s<e.length){const n=e[s++].linear;t=Math.min(n.left,t),i=Math.max(n.right,i)}if(Math.floor(l)>Math.ceil(t)&&Math.floor(o)>Math.ceil(i)){const t=Cn(n,a);if(-1!==t){s=n.length-1;while(s>=0){const i=n[s--];if(i){if(!i[t])e.length=0;break}}}}}}r[e]=Math.max(o,r[e])}}const o=r.length;for(let e=0,t=-1;e<o;++e)if(!n[e]){if(-1===t)t=e-1;else if(e===o-1)r[t]=r[e]}else if(-1!==t)r[t]=r[e-1],t=-1;for(let e=0;e<n.length;++e)if(null===(t=n[e])||void 0===t?void 0:t.length)i.push(r[e]);else n.splice(e--,1);const c=n.reduce((e,t)=>Math.max(e,t.length),0);for(let e=0;e<c;++e){const t=n.length;let i=0;while(i<t){const t=n[i++];if(!t[e])t[e]={spacer:1}}}i.push(e.box.right)}}const r=n.length;if(r>1&&n[0].length===e.length){const t=[],s=new Set;for(let e=0,a=0;e<r;++e){const l=n[e],o=l.length;for(let c=0,h=0,d=0;c<o;++c){const u=l[c],f=_n(t,c);if(!u.spacer){const t=Object.assign(Grid.createDataCellAttribute(),u.data(this.name,"cellData"));let g=1,p=1+d,m=e+1;while(m<r){const e=n[m++][c];if(1===e.spacer)++p,e.spacer=2;else break}if(1===p){m=c+1;while(m<o){const e=l[m++];if(1===e.spacer)++g,e.spacer=2;else break}}if(i.length>0){const n=Math.min(e+(p-1),i.length-1),a=u.actualParent.naturalChildren,l=a.length;m=0;while(m<l){const e=a[m++];if(!s.has(e)&&e.visible&&!e.rendered){const{left:s,right:a}=e.linear;if(Sn(s,u.linear.right)&&En(a,i[n]))_n(t,"siblings").push(e)}}}t.rowSpan=g,t.columnSpan=p,t.rowStart=0==h++,t.rowEnd=p+e===r,t.cellStart=0==a++,t.cellEnd=t.rowEnd&&c===o-1,t.index=e,d=0,u.data(this.name,"cellData",t),f.push(u),s.add(u)}else if(1===u.spacer)++d}}e.each(e=>e.hide()),e.clear();const a=t.length;let l,o=0;while(o<a){const i=t[o++],s=i.length;l=0;while(l<s)i[l++].parent=e}if(e.tableElement&&"collapse"===e.css("borderCollapse"))e.resetBox(480);e.data(this.name,"columnCount",r)}}}const{convertListStyle:An}=squared.lib.css,{isNumber:In}=squared.lib.util,Rn=e=>e.backgroundImage&&!e.backgroundRepeat;const{assignRect:Nn}=squared.lib.dom,{convertFloat:Mn,withinRange:Pn}=squared.lib.util;const{getBackgroundPosition:Bn,resolveURL:Ln}=squared.lib.css;const{formatPercent:Wn,formatPX:Fn,getInheritedStyle:On,getStyle:Un,isLength:Hn,isPercent:Dn}=squared.lib.css,{getNamedItem:Vn}=squared.lib.dom,{maxArray:qn}=squared.lib.math,{isNumber:zn,replaceMap:Xn,safeNestedArray:jn,withinRange:Gn}=squared.lib.util;function Yn(e,t,i){i.percent=Math.round(t.bounds.width/e.box.width*100)+"%",i.expand=true}function $n(e,t,i){const s=t+"Style";e.ascend({including:i}).some(i=>{if(i.has(s)){const n=t+"Color",a=t+"Width";return e.css("border","inherit"),e.cssApply(i.cssAsObject(s,n,a)),e.unsetCache(a),true}return false})}function Kn(e){e.exclude({resource:et.ALL}),e.hide()}const Qn=e=>e.css("width",Fn(e.bounds.width),true);const{isLength:Jn}=squared.lib.css;var Zn;const{formatPX:ea}=squared.lib.css,{maxArray:ta}=squared.lib.math,{getElementCache:ia}=squared.lib.session,{iterateReverseArray:sa}=squared.lib.util,na="html"===(null===(Zn=document.doctype)||void 0===Zn?void 0:Zn.name);function aa(e,t,i,s=0){let n;switch(t){case 2:n=e.actualRect("top")-i;break;case 16:n=e.actualRect("left")-i;break;case 8:n=i-e.actualRect("bottom");break;default:n=0;break}if(n-=s,n>0)(e.renderAs||e).modifyBox(t,n)}function la(e,t,i){if(1===e.getBox(t)[0]){const s=e.registerBox(t);if(s){const[e,n]=s.getBox(t);if(i=Math.max(n,i),1===e)s.setBox(t,{adjustment:i});else s.setCacheValue("marginTop",i);return}}e.setBox(t,{reset:1,adjustment:i})}function ra(e,t,i){if(!i||oa(t,true)){const[s,n,a,l]=i?["marginTop","borderTopWidth","paddingTop",2]:["marginBottom","borderBottomWidth","paddingBottom",8];if(0===e[n])if(0===e[a]){let r=t;while(na&&0===r[s]&&0===r[n]&&0===r[a]&&fa(r))if(i){const e=r.firstStaticChild;if(oa(e,i))r=e;else break}else{const e=ha(r);if(e)r=e;else break}const o=e[s],c=r[s];if(o>=0&&c>=0){const n=r.bounds.height;let a=false;if(!na&&0===o&&c>0&&""===r.cssInitial(s))a=true;else{const s=o>=c;if(0===n&&s&&r.textEmpty&&0===r.extensions.length)r.hide({collapse:true});else{const n=r.registerBox(l);if(n){const t=n.getBox(l)[1];if(t>0){if(t>o)la(e,l,t);n.setBox(l,{reset:1,adjustment:0})}}else if(0===r.getBox(l)[0])if(s)a=c>0;else if(e.documentBody){if(ua(e,l),i){if(e.bounds.top>0)e.bounds.top=0,e.unset("box"),e.unset("linear");if(e.layoutVertical){const i=e.renderChildren[0];if((r.positionStatic||r.top>=0&&!r.hasPX("bottom"))&&i!==t.outerMostWrapper)la(i,l,c),la(r,l,0),a=true}}}else la(e,l,c),a=true}}if(a){if(ua(r,l),!i&&r.floating){const e=r.actualParent.naturalChildren,t=e.length;let i=0;while(i<t){const t=e[i++];if(t.floating&&t!==r&&t.intersectY(r.bounds,"bounds"))ua(t,l)}}if(0===n&&!r.every(e=>e.floating||!e.pageFlow))ua(r,i?8:2)}}else if(o<0&&c<0)if(!i){if(c<o)la(e,l,c);ua(r,l)}}else if(0===t[s]&&0===t[n]&&fa(t)){let l=true;do{const r=i?t.firstStaticChild:t.lastStaticChild;if(r&&0===r[s]&&0===r[n]&&!r.visibleStyle.background&&fa(r)){const s=r[a];if(s>0){if(s>=e[a])e.setBox(i?32:128,{reset:1});else if(l)e.modifyBox(i?32:128,-s,false);break}else{if(!oa(r,i))l=false;t=r}}else break}while(true)}}}function oa(e,t){if(!e||!e.styleElement||e.lineBreak)return false;else if(e.blockStatic)return true;else if(!e.floating){switch(e.display){case"table":case"list-item":return true;case"inline-flex":case"inline-grid":case"inline-table":return false}if(t){const t=e.firstStaticChild;return oa(t)&&ga(t,false)}else if(false===t){const t=e.lastStaticChild;return oa(t)&&pa(t,false)}}return false}function ca(e,t,i,s){let n=1/0;if(e.nodeGroup&&e.some(e=>e.floating))e.renderEach(t=>{if(!t.floating){const i=t.linear.top;if(i<n)n=i,e=t}});if(n===1/0)n=e.linear.top;if(s){const a=Math.max(s.linear.top,t.linear.bottom);if(a<n)return[n-a-i,e]}return[Math.round(n-t.linear.bottom-i),e]}function ha(e){let t;if(!e.floatContainer){if(t=e.lastStaticChild,!oa(e,false)||t&&e.hasHeight&&Math.floor(t.linear.bottom)<e.box.bottom)t=void 0}else{let i;const s=e.naturalChildren;let n=s.length-1;while(n>=0){const a=s[n--];if(a.floating){if(!t){const t=a.linear.bottom;if(i){if(t>i.linear.bottom)i=a}else if(Math.ceil(a.linear.bottom)>=e.box.bottom)i=a}else if(a.linear.bottom>=t.linear.bottom){t=a;break}}else if(!t){if(i&&i.linear.bottom>a.linear.bottom){t=i;break}t=a}}if(!t)t=i}return t}function da(e){for(const t of[e.cssInitial("overflow"),e.cssInitial("overflowX"),e.cssInitial("overflowY")])switch(t){case"auto":case"hidden":case"overlay":return true}return false}function ua(e,t,i){if(e.setBox(t,{reset:1}),i)e.registerBox(t,i)}const fa=(e,t=true)=>(!t&&e.blockStatic||t&&e.length>0&&!e.floating)&&!e.layoutElement&&!e.tableElement&&"FIELDSET"!==e.tagName,ga=(e,t)=>!e.hasHeight&&0===e.borderBottomWidth&&0===e.paddingBottom&&fa(e,t),pa=(e,t)=>!e.hasHeight&&0===e.borderTopWidth&&0===e.paddingTop&&fa(e,t),ma=e=>e.pageFlow&&e.blockDimension&&!e.floating&&!e.excluded;var ba=Object.freeze({__proto__:null,EXT_NAME:{ACCESSIBILITY:"squared.accessibility",COLUMN:"squared.column",CSS_GRID:"squared.css-grid",FLEXBOX:"squared.flexbox",GRID:"squared.grid",LIST:"squared.list",RELATIVE:"squared.relative",SPRITE:"squared.sprite",TABLE:"squared.table",VERTICAL_ALIGN:"squared.verticalalign",WHITESPACE:"squared.whitespace"}});const xa={Accessibility:class Accessibility extends ExtensionUI{},Column:class Column extends ExtensionUI{is(e){return e.length>1&&e.blockDimension&&"table"!==e.display&&!e.layoutElement}condition(e){return e.has("columnCount")||e.hasPX("columnWidth")}processNode(e,t){let i=[],s=1/0,n=false;const a=[i];if(e.each(e=>{var t;if("all"===e.css("columnSpan")){if(i.length>0)a.push([e]);else i.push(e);i=[],a.push(i)}else{if(e.textElement&&(null===(t=e.textBounds)||void 0===t?void 0:t.overflow))s=NaN;if(e.multiline)n=true;else if(!isNaN(s))s=Math.min(e.bounds.width,s);i.push(e)}}),0===i.length)a.pop();const[l,r,o]=e.cssAsTuple("columnRuleStyle","columnRuleWidth","columnRuleColor"),c=e.box.width,h=e.toInt("columnCount"),d=e.parseWidth(e.css("columnWidth"));let u,f=e.parseWidth(e.css("columnGap"));const g=()=>isNaN(h)&&d>0?c/(d+f):1/0;if(f>0)u=Math.floor(g());else f=(d>0&&!isNaN(s)&&s!==1/0?Math.max(s-d,0):0)+16,u=Math.ceil(g());e.data(this.name,"mainData",{rows:a,columnCount:h,columnWidth:d,columnGap:f,columnSized:u,columnRule:{borderLeftStyle:l,borderLeftWidth:r,borderLeftColor:o},boxWidth:t.actualBoxWidth(c),multiline:n})}},CssGrid:CssGrid,Flexbox:class Flexbox extends ExtensionUI{is(e){return e.flexElement}condition(e){return e.length>0}processNode(e){const t=this.controller,[i,s]=e.partition(e=>e.pageFlow),n=function(e,t){return Object.assign(Object.assign({},e.flexdata),{rowCount:0,columnCount:0,children:t})}(e,i);if(e.cssTry("align-items","start")){if(e.cssTry("justify-items","start")){const t=i.length;let s=0;while(s<t){const e=i[s++];if(e.cssTry("align-self","start")){if(e.cssTry("justify-self","start")){const{width:t,height:i}=e.boundingClientRect;e.data(this.name,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i})),e.cssFinally("justify-self")}e.cssFinally("align-self")}}e.cssFinally("justify-items")}e.cssFinally("align-items")}if(n.wrap){const[a,l,r,o]=n.row?["top","left","right","intersectY"]:["left","top","bottom","intersectX"];i.sort((e,t)=>{const i=e.linear,s=t.linear;if(!e[o](t.bounds,"bounds"))return i[a]<s[a]?-1:1;else{const e=i[l],t=s[l];if(!wn(e,t))return e<t?-1:1}return 0});let c,h=i[0],d=[h],u=i.length,f=0;const g=[d];let p=1;while(p<u){const e=i[p++];if(h[o](e.bounds,"bounds"))d.push(e);else h=e,d=[e],g.push(d)}if(e.clear(),u=g.length,p=0,u>1){const i=e.box[r];while(p<u){const s=g[p];f=Math.max(s.length,f);const n=t.createNodeGroup(s[0],s,e,{delegate:true,cascade:true});n.addAlign(128),n.box[r]=i,n.containerIndex=p++}c=u}else{const t=g[0];e.retainAs(t),f=t.length;while(p<f)t[p].containerIndex=p++;c=f}p=0;while(p<s.length)s[p].containerIndex=c+p++;if(e.addAll(s),n.row)n.rowCount=u,n.columnCount=f;else n.rowCount=f,n.columnCount=u}else{if(i.some(e=>0!==e.flexbox.order)){const[e,t]=n.reverse?[-1,1]:[1,-1];i.sort((i,s)=>{const n=i.flexbox.order,a=s.flexbox.order;if(n===a)return 0;else return n>a?e:t})}else if(n.reverse)i.reverse();if(n.row)n.rowCount=1,n.columnCount=e.length;else n.rowCount=e.length,n.columnCount=1}e.data(this.name,"mainData",n)}},Grid:Grid,List:class List extends ExtensionUI{condition(e){const t=e.length;if(t>0){const i=e.children;let s,n=true,a=true,l=true,r=true,o=false;for(let e=0;e<t;++e){const c=i[e],h=c.css("listStyleType");if("list-item"===c.display&&("none"!==h||c.innerBefore)||c.marginLeft<0&&"none"===h&&Rn(c.visibleStyle))o=true;if(l||r)if(c.floating){if(!s)s=new Set;s.add(c.float),r=false}else if(0===e||e===t-1||c.blockStatic||i[e-1].blockStatic&&i[e+1].blockStatic)l=false;else l=false,r=false;if(!c.blockStatic)n=false;if(!c.inlineVertical)a=false;if(!(n||a||r||l))return false}return o&&(n||a||1===(null==s?void 0:s.size)||r)}return false}processNode(e){const t="OL"===e.tagName;let i=t&&e.toElementInt("start")||1;e.each(e=>{const s={ordinal:"",imageSrc:"",imagePosition:""},n=e.css("listStyleType"),a="list-item"===e.display;if(a||""!==n&&"none"!==n||Rn(e.visibleStyle)){if(e.has("listStyleImage"))s.imageSrc=e.css("listStyleImage");else{if(t&&a&&"LI"===e.tagName){const t=e.attributes.value;if(t&&In(t))i=Math.floor(parseFloat(t))}let l=An(n,i);if(""===l)switch(n){case"disc":l="";break;case"square":l="";break;case"none":{let t="",i="";if(!e.visibleStyle.backgroundRepeat)t=e.backgroundImage,i=e.css("backgroundPosition");if(""!==t&&"none"!==t)s.imageSrc=t,s.imagePosition=i,e.exclude({resource:et.IMAGE_SOURCE});break}default:l="";break}else l+=".";s.ordinal=l}if(a)++i}e.data(this.name,"mainData",s)})}},Relative:class Relative extends ExtensionUI{is(e){return e.positionRelative&&!e.autoPosition||0!==Mn(e.verticalAlign)}condition(){return true}processNode(e){return{subscribe:true}}postOptimize(e){const t=e.renderParent,i=!e.baselineAltered?Mn(e.verticalAlign):0;let s=0,n=0,a=0,l=0;if(e.hasPX("top"))s=e.top;else a=e.bottom;if(e.hasPX("left"))l=e.left;else n=e.right;if(t.support.positionTranslation){let t=0,r=0;if(0!==l)t=l;else if(0!==n)t=-n;if(0!==s)r=s;else if(0!==a)r=-a;if(0!==i)r-=i;if(0!==t)e.translateX(t,{relative:true});if(0!==r)e.translateY(r,{relative:true})}else{let r=e;if((0!==s||0!==a||0!==i)&&t.layoutHorizontal&&t.support.positionRelative&&0===e.renderChildren.length){r=e.clone(this.application.nextId),r.baselineAltered=true,e.hide({hidden:true}),this.application.getProcessingCache(e.sessionId).add(r,false);const i=new LayoutUI(t,r,r.containerType,r.alignmentType),s=t.renderChildren.findIndex(t=>t===e);if(-1!==s)i.renderIndex=s+1;if(this.application.addLayout(i),e.parseUnit(e.css("textIndent"))<0){const i=e.documentId;t.renderEach(e=>{if(e.alignSibling("topBottom")===i)e.alignSibling("topBottom",r.documentId);else if(e.alignSibling("bottomTop")===i)e.alignSibling("bottomTop",r.documentId)})}if(e.baselineActive&&!e.baselineAltered)for(const i of t.horizontalRows||[t.renderChildren])if(i.includes(e)){const t=i.filter(t=>t.positionRelative&&t.length>0&&0!==Mn(e.verticalAlign)),s=t.length;if(s>0){t.sort((e,t)=>{const i=e.linear.top,s=t.linear.top;if(Pn(i,s))return 0;else return i<s?-1:1});let i=true,n=0;while(n<s){const s=t[n++];if(i)e.modifyBox(2,Mn(s.verticalAlign)),i=false;else s.modifyBox(2,s.linear.top-t[0].linear.top);s.setCacheValue("verticalAlign","0px")}}break}}else if(e.positionRelative&&e.naturalElement){const i=e.bounds,r=0!==s||0!==a,o=0!==l||0!==n,c=e.actualParent.naturalChildren;let h,d=false;const u=c.length;let f=0;while(f<u){const u=c[f++];if(u===e){if(d){if(r&&t.layoutVertical){const t=Nn(e.boundingClientRect);if(0!==s)s-=t.top-i.top;else if((null==h?void 0:h.positionRelative)&&h.hasPX("top"))a+=i.bottom-t.bottom;else a+=t.bottom-i.bottom}if(o&&t.layoutHorizontal&&!e.alignSibling("leftRight")){const t=Nn(e.boundingClientRect);if(0!==l)l-=t.left-i.left;else if((null==h?void 0:h.positionRelative)&&h.hasPX("right"))n+=i.right-t.right;else n+=t.right-i.right}}else if(t.layoutVertical)if(0!==s){if((null==h?void 0:h.blockStatic)&&h.positionRelative&&u.blockStatic)s-=h.top}else if(0!==a){if(1===u.getBox(2)[0])a-=u.marginTop}break}else if(u.positionRelative&&u.renderParent===t)d=true;if(u.pageFlow)h=u}}if(0!==i)r.modifyBox(2,-1*i);if(0!==s)r.modifyBox(2,s);else if(0!==a)r.modifyBox(2,-1*a);if(0!==l)if(r.autoMargin.left)r.modifyBox(4,-1*l);else r.modifyBox(16,l);else if(0!==n)r.modifyBox(16,-1*n);if(r!==e)r.setBoxSpacing()}}},Sprite:class Sprite extends ExtensionUI{is(e){return 0===e.length&&e.hasWidth&&e.hasHeight}condition(e){const t=e.backgroundImage;if(""!==t&&(!e.use||this.included(e.element))){const i=Ln(t),s=this.resource.getRawData(t)||i&&this.resource.getImage(i);if(s){const t=e.actualDimension,[i,n]=e.cssAsTuple("backgroundPositionX","backgroundPositionY"),a=Bn(i+" "+n,t,{fontSize:e.fontSize,screenDimension:e.localSettings.screenDimension}),l=/^0[a-z%]+|left|start|top/,r=(a.left<0||l.test(i))&&s.width>t.width,o=(a.top<0||l.test(n))&&s.height>t.height;if((r||o)&&(r||0===a.left)&&(o||0===a.top))return e.data(this.name,"mainData",{image:s,position:a}),true}}return false}},Table:class Table extends ExtensionUI{processNode(e){const t=function(e){return{layoutType:0,rowCount:0,columnCount:0,layoutFixed:"fixed"===e.css("tableLayout"),borderCollapse:"collapse"===e.css("borderCollapse"),expand:false}}(e);let i,s,n=[];const a=(e,t)=>{if(e)e.cascade(t=>{switch(t.tagName){case"TH":case"TD":t.inherit(e,"styleMap"),t.unsetCache("visibleStyle");break}}),n=t?n.concat(e.children):e.children.concat(n)};e.each(e=>{switch(e.tagName){case"THEAD":if(!s)s=e;Kn(e);break;case"TBODY":n=n.concat(e.children),Kn(e);break;case"TFOOT":if(!i)i=e;Kn(e);break}}),a(s,false),a(i,true);const l=e.hasWidth,r=t.borderCollapse,[o,c]=r?[0,0]:Xn(e.css("borderSpacing").split(" "),(t,i)=>0===i?e.parseWidth(t):e.parseHeight(t)),h=o>1?Math.round(o/2):o,d=c>1?Math.round(c/2):c,u=e.element.querySelector("COLGROUP"),f=e.find(e=>"CAPTION"===e.tagName),g="bottom"===e.css("captionSide"),p=[],m=[],b=[],x=[],y=n.length;let v,w=0;for(let i=0;i<y;++i){const s=n[i];p[i]=o;const a=b[i]||[];b[i]=a,s.each((s,n)=>{const l=s.element,r=l.rowSpan;let f=l.colSpan;v=0;while(a[v])++v;const g=i+r;let w=i;while(w<g){const e=jn(b,w++),t=v+f;for(let i=v,n=0;i<t;++i)if(!e[i])e[i]=s,++n;else{f=n;break}}if(!s.hasPX("width")){const e=Vn(l,"width");if(Dn(e))s.css("width",e,true);else if(zn(e))s.css("width",Fn(parseFloat(e)),true)}if(!s.hasPX("height")){const e=Vn(l,"height");if(Dn(e))s.css("height",e);else if(zn(e))s.css("height",Fn(parseFloat(e)))}if(""===s.cssInitial("verticalAlign"))s.css("verticalAlign","middle",true);if(!s.visibleStyle.backgroundImage&&!s.visibleStyle.backgroundColor){const e=/rgba\(0, 0, 0, 0\)|transparent/;if(u){const{backgroundImage:t,backgroundColor:i}=Un(u.children[n+1]);if(t&&"none"!==t)s.css("backgroundImage",t,true);if(i&&!e.test(i))s.css("backgroundColor",i),s.setCacheValue("backgroundColor",i)}else{let t=On(l,"backgroundImage",/none/,"TABLE");if(""!==t)s.css("backgroundImage",t,true);if(t=On(l,"backgroundColor",e,"TABLE"),""!==t)s.css("backgroundColor",t),s.setCacheValue("backgroundColor",t)}}switch(s.tagName){case"TD":{const e=s.parent;if(0===s.borderTopWidth)$n(s,"borderTop",e);if(0===s.borderRightWidth)$n(s,"borderRight",e);if(0===s.borderBottomWidth)$n(s,"borderBottom",e);if(0===s.borderLeftWidth)$n(s,"borderLeft",e);break}case"TH":if(""===s.cssInitial("textAlign"))s.css("textAlign","center");if(0===s.borderTopWidth)$n(s,"borderTop",e);if(0===s.borderBottomWidth)$n(s,"borderBottom",e);break}const S=s.cssInitial("width"),E=void 0===x[v]||"auto"===x[v],k=s.bounds.width;if(0===i||E||!t.layoutFixed)if(""===S||"auto"===S){if(void 0===x[v])x[v]=S||"0px",m[v]=0;else if(i===y-1&&E&&0===m[v])m[v]=k}else{const e=Dn(S),t=Hn(x[v]);if(E||k<m[v]||k===m[v]&&(t&&e||e&&Dn(x[v])&&s.parseWidth(S)>=s.parseWidth(x[v])||t&&Hn(S)&&s.parseWidth(S)>s.parseWidth(x[v])))x[v]=S;if(E||1===l.colSpan)m[v]=k}if(s.length>0||s.inlineText)p[i]+=k+o;if(h>0)s.modifyBox(16,0===v?o:h),s.modifyBox(4,0===n?h:o);if(d>0)s.modifyBox(2,0===i?c:d),s.modifyBox(8,i+r<y?d:c);s.data(this.name,"cellData",{colSpan:f,rowSpan:r})}),Kn(s),w=Math.max(w,a.length)}if(e.hasPX("width",{percent:false})&&x.some(e=>Dn(e)))Xn(x,(e,t)=>{if("auto"===e){const e=m[t];if(e>0)return Fn(e)}return e});let S=false,E=0;if(x.every(e=>Dn(e))){if(x.reduce((e,t)=>e+parseFloat(t),0)>1){let e=100;Xn(x,t=>{const i=parseFloat(t);if(e<=0)t="0px";else if(e-i<0)t=Wn(e/100);return e-=i,t})}if(!e.hasWidth)t.expand=true;S=true}else if(x.every(e=>Hn(e))){const i=x.reduce((e,t)=>e+parseFloat(t),0);if(e.hasWidth)if(i<e.width)Xn(x,e=>"0px"!==e?parseFloat(e)/i*100+"%":e);else if(i>e.width)if(e.css("width","auto"),!t.layoutFixed)e.cascade(e=>(e.css("width","auto"),false));if(t.layoutFixed&&!e.hasPX("width"))e.css("width",Fn(e.bounds.width))}if(t.layoutType=(()=>{if(x.length>1){if(E=x.reduce((e,t)=>e+(Dn(t)?parseFloat(t):0),0),t.layoutFixed&&x.reduce((e,t)=>e+(Hn(t)?parseFloat(t):0),0)>=e.actualWidth)return 4;else if(x.length>1&&x.some(e=>Dn(e))||x.every(e=>Hn(e)&&"0px"!==e))return 3;else if(x.every(e=>e===x[0]))if(e.find(e=>e.hasHeight,{cascade:true}))return t.expand=true,3;else if("auto"===x[0])if(e.hasWidth)return 3;else{const t=e.cascade(e=>"TD"===e.tagName);return t.length>0&&t.every(e=>Gn(e.bounds.width,t[0].bounds.width))?0:3}else if(e.hasWidth)return 2;if(x.every(e=>"auto"===e||Hn(e)&&"0px"!==e)){if(!e.hasWidth)t.expand=true;return 1}}return 0})(),e.clear(),f){if(!f.hasWidth)if(f.textElement){if(!f.hasPX("maxWidth"))f.css("maxWidth",Fn(f.bounds.width))}else if(f.bounds.width>qn(p))Qn(f);if(!f.cssInitial("textAlign"))f.css("textAlign","center");if(f.data(this.name,"cellData",{colSpan:w}),!g)f.parent=e}let k=0;while(k<y){const i=b[k++],s=i.length;v=0;while(v<s){const s=i[v],n=s.data(this.name,"cellData"),a=x[v];if(v+=n.colSpan,!n.placed){if(a)switch(t.layoutType){case 0:break;case 3:if("auto"===a)if(E>=1)Qn(s),n.exceed=!l,n.downsized=true;else Yn(e,s,n);else if(Dn(a))if(S)n.percent=a,n.expand=true;else Qn(s);else if(Hn(a)&&parseInt(a)>0)if(s.bounds.width>=parseInt(a))Qn(s),n.expand=false,n.downsized=false;else if(t.layoutFixed)Yn(e,s,n),n.downsized=true;else Qn(s),n.expand=false;else{if(!s.hasPX("width",{percent:false})||s.percentWidth)Qn(s);n.expand=false}break;case 2:Yn(e,s,n);break;case 1:if("auto"===a)n.flexible=true;else{if(t.layoutFixed)n.downsized=true;else Qn(s);n.expand=false}break;case 4:if(!Hn(a))s.hide();break}n.placed=true,s.parent=e}}if(s<w){const e=i[s-1].data(this.name,"cellData");if(e)e.spaceSpan=w-s}}if(f&&g)f.parent=e;if(t.borderCollapse){const t=e.cssAsObject("borderTopColor","borderTopStyle","borderTopWidth"),i=e.cssAsObject("borderRightColor","borderRightStyle","borderRightWidth"),s=e.cssAsObject("borderBottomColor","borderBottomStyle","borderBottomWidth"),n=e.cssAsObject("borderLeftColor","borderLeftStyle","borderLeftWidth"),a=parseInt(t.borderTopWidth),l=parseInt(i.borderRightWidth),r=parseInt(s.borderBottomWidth),o=parseInt(n.borderLeftWidth);let c=false,h=false,d=false,u=false;for(k=0;k<y;++k){const e=b[k];for(v=0;v<w;++v){const f=e[v];if("visible"===(null==f?void 0:f.css("visibility"))){if(0===k)if(f.borderTopWidth<a)f.cssApply(t),f.unsetCache("borderTopWidth");else c=true;if(k>=0&&k<y-1){const e=b[k+1][v];if("visible"===(null==e?void 0:e.css("visibility"))&&e!==f)if(f.borderBottomWidth>e.borderTopWidth)e.css("borderTopWidth","0px",true);else f.css("borderBottomWidth","0px",true)}if(k===y-1)if(f.borderBottomWidth<r)f.cssApply(s),f.unsetCache("borderBottomWidth");else d=true;if(0===v)if(f.borderLeftWidth<o)f.cssApply(n),f.unsetCache("borderLeftWidth");else u=true;if(v>=0&&v<w-1){const t=e[v+1];if("visible"===(null==t?void 0:t.css("visibility"))&&t!==f)if(f.borderRightWidth>=t.borderLeftWidth)t.css("borderLeftWidth","0px",true);else f.css("borderRightWidth","0px",true)}if(v===w-1)if(f.borderRightWidth<l)f.cssApply(i),f.unsetCache("borderRightWidth");else h=true}}}if(c||h||d||u)e.cssApply({borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"},true)}t.rowCount=y+(f?1:0),t.columnCount=w,e.data(this.name,"mainData",t)}},VerticalAlign:class VerticalAlign extends ExtensionUI{is(e){return e.length>0}condition(e){const t=e.children;let i=false,s=0,n=0;const a=t.length;let l=0;while(l<a){const e=t[l++];if(!(e.positionStatic||e.positionRelative&&e.length>0))return false;else if(e.inlineVertical){const t=parseFloat(e.verticalAlign);if(!isNaN(t))if(i=true,!isNaN(n))if(0===n)n=t;else if(n!==t)n=NaN;++s}else n=NaN}return i&&isNaN(n)&&s>1&&NodeUI.linearData(t).linearX}processNode(e){return e.each(e=>{if(e.inlineVertical&&Jn(e.verticalAlign)||e.imageElement||e.svgElement)e.baselineAltered=true}),{subscribe:true}}postConstraints(e){if(e.layoutHorizontal)for(const t of e.horizontalRows||[e.renderChildren]){const e=[];let i,s=1/0;const n=t.length;let a=0;while(a<n){const n=t[a++],l=n.linear.top;if(n.inlineVertical&&l<=s){if(l<s)e.length=0;e.push(n),s=l}if(n.baselineActive)i=n}if(e.length>0){const s=e[0],l=s.linear.top;a=0;while(a<n){const s=t[a++];if(s!==i){if(s.inlineVertical)if(!e.includes(s)){if(Jn(s.verticalAlign)||!i)s.setBox(2,{reset:1,adjustment:s.linear.top-l}),s.baselineAltered=true}else if(i&&(s.imageElement||s.svgElement)&&i.documentId===s.alignSibling("baseline"))s.setBox(2,{reset:1,adjustment:i.linear.top-s.linear.top});if(s.baselineAltered)s.setCacheValue("verticalAlign","0px")}}if(i)i.setBox(2,{reset:1,adjustment:i.linear.top-l+Math.min(0,s.parseHeight(s.cssInitial("verticalAlign")))}),i.baselineAltered=true}}else e.each(e=>e.baselineAltered=false)}},WhiteSpace:class WhiteSpace extends ExtensionUI{afterBaseLayout(e){const{cache:t,excluded:i}=this.application.getProcessing(e),s=this.application.session.clearMap,n=new Set;t.each(e=>{var t,i;if(e.naturalElement&&!e.hasAlign(4)){const a=e.naturalChildren,l=a.length;if(0===l)return;const r=e.pageFlow,o=r&&oa(e,true)&&!e.actualParent.layoutElement;let c,h;for(let r=0;r<l;++r){const d=a[r];if(d.pageFlow){if(o)if(!d.floating){if(!c)c=d;h=d}else if(h){if(d.linear.bottom>=h.linear.bottom)h=d}else h=d;if(oa(d,true))if(r>0){const a=d.previousSiblings({floating:false}),o=a.length;if(o>0){let h=false;const u=a[o-1];if(oa(u,false)){let e=u.marginBottom,i=d.marginTop;if(u.marginTop<0&&0===u.bounds.height){const t=Math.min(e,u.marginTop);if(t<0){if(Math.abs(t)<i)d.modifyBox(2,t);else ua(d,2);n.add(u.id),u.hide({collapse:true});continue}}else if(d.marginBottom<0&&0===d.bounds.height){const t=Math.min(i,d.marginBottom);if(t<0){if(Math.abs(t)<e)u.modifyBox(8,t);else ua(u,8);n.add(d.id),d.hide({collapse:true});continue}}let a=false,l=u;while(ga(l,true)){let t=ha(l);if(0===(null==t?void 0:t.getBox(8)[0])){let i=t.marginBottom,s=t;while(0===s.bounds.height&&!s.pseudoElement){const e=s.marginTop;if(i=Math.max(e,s.marginBottom,i),0!==e)ua(s,2);const n=s.previousSibling;if(n)if(n.marginBottom>=i){if(0!==s.marginBottom)ua(s,8);t=n,i=n.marginBottom,s=n}else if(n.bounds.height>0)break;else{if(0!==n.marginBottom)ua(n,8);s=n}else break}if(0!==i)ua(t,8,0===u.getBox(8)[0]?u:void 0);if(i>e)e=i,a=true;else if(0===i&&0===e){l=t;continue}}break}l=d;while(pa(l,true)){let e=l.firstStaticChild;if(oa(e,true)&&0===e.getBox(2)[0]){let t=e.marginTop,s=e;while(0===s.bounds.height&&!s.pseudoElement){const i=s.marginBottom;if(t=Math.max(s.marginTop,i,t),0!==i)ua(s,8);const n=s.nextSibling;if(n)if(n.marginTop>=t){if(0!==s.marginTop)ua(s,2);e=n,t=n.marginTop,s=n}else if(n.bounds.height>0)break;else{if(0!==n.marginTop)ua(n,2);s=n}else break}if(0!==t)ua(e,2,0===d.getBox(2)[0]?d:void 0);if(t>i)i=t,h=true;else if(0===t&&0===i){l=e;continue}}break}if(e>0)if(i>0){if(i<=e){if(!h||!da(d)){if(ua(d,2),0===d.bounds.height&&e>=d.marginBottom)ua(d,8);h=false}}else if(!a||!da(u)){if(ua(u,8),0===u.bounds.height&&i>=u.marginTop)ua(u,2);a=false}}else if(0===d.bounds.height)if(i=Math.min(i,d.marginBottom),i<0)u.modifyBox(8,i),d.hide({collapse:true});if(i>0&&u.floatContainer&&0===d.getBox(2)[1]&&!da(u)){let e=false;if(0===u.bounds.height)e=true;else{let i;if(sa(u.naturalElements,e=>{if(s.has(e))return true;else if(e.floating){if(e.linear.bottom>Math.ceil(u.bounds.bottom))i=e.float;return true}}),i){const s=null===(t=ia(u.element,"styleMap::after",u.sessionId))||void 0===t?void 0:t.clear;e=!("both"===s||s===i)}}if(e)d.modifyBox(2,u.box.top-ta(u.naturalElements.map(e=>e.linear.bottom)),false)}if(h){let e=0;if(0===u.bounds.height){const t=u.previousSibling;e=t&&oa(t,false)?Math.max(t.getBox(8)[1],t.marginBottom):0}if(i>e)(d.registerBox(2)||d).setCacheValue("marginTop",i)}if(a){let t=0;if(0===d.bounds.height){const e=d.nextSibling;t=e&&oa(e,true)?Math.max(e.getBox(2)[1],e.marginTop):0}if(e>=t)(u.registerBox(8)||u).setCacheValue("marginBottom",e)}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;if(e>0&&t>0)if(e<t)ua(d,2);else if(r===l-1)d.setCacheValue("marginBottom",e),ua(d,2);else ua(d,8)}if(!h&&d!==c&&a.length>1&&(e.layoutVertical||(null===(i=d.renderParent)||void 0===i?void 0:i.layoutVertical))){const e=a.pop();if(e.floating&&Math.floor(e.bounds.top)===Math.floor(d.bounds.top))d.modifyBox(2,-e.bounds.height,false)}}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;if(e>0&&t>0){if(e<t)d.setCacheValue("marginTop",t);ua(d,8)}}}}if(r&&!da(e)&&"FIELDSET"!==e.tagName){if(null==c?void 0:c.naturalElement)ra(e,c,true);if(null==h?void 0:h.naturalElement)if(ra(e,h,false),h.marginTop<0){const t=h.bounds.height+h.marginBottom+h.marginTop;if(t<0)e.modifyBox(128,t,false)}}}}),i.each(e=>{var t,i;if(e.lineBreak&&!e.lineBreakTrailing&&!s.has(e)&&!n.has(e.id)){let s=false;const a=e.previousSiblings({floating:false}),l=a.length;if(l>0){const r=e.actualParent,o=e.siblingsTrailing,c=o.length;if(c>0){let h,d,u=a[l-1],f=o[c-1],g=0;if(u.rendered&&f.rendered){const l=u.inlineStatic&&f.inlineStatic;if(l&&0===a.length)return void n.add(e.id);if(l){if(h=a[0],1===a.length)h=h.lineBreak?e:void 0;null==h||h.setBounds(false)}let o=u.renderParent,c=f.renderParent;if(o!==c){while(o&&o!==r)u=o,o=u.renderParent;while(c&&c!==r)f=c,c=f.renderParent}if(!u.multiline){let e;if(u.has("lineHeight"))e=u.lineHeight;else if(u.length>0)if(u.layoutVertical)e=null===(t=u.lastStaticChild)||void 0===t?void 0:t.lineHeight;else e=ta(u.map(e=>e.lineHeight));if(e){const t=Math.floor((e-u.bounds.height)/2);if(t>0)g+=t}}if(!f.multiline){let e;if(f.has("lineHeight"))e=f.lineHeight;else if(f.length>0)if(f.layoutVertical)e=null===(i=f.firstStaticChild)||void 0===i?void 0:i.lineHeight;else e=ta(f.map(e=>e.lineHeight));if(e){const t=Math.round((e-f.bounds.height)/2);if(t>0)g+=t}}if([d,f]=ca(f,u,g,h),d>=1)if(f.visible)f.modifyBox(2,d),s=true;else if(u.visible)u.modifyBox(8,d),s=true}else if([d,f]=ca(f,u,g),d>=1)if((f.lineBreak||f.excluded)&&r.lastChild===f)r.modifyBox(128,d),s=true;else if((u.lineBreak||u.excluded)&&r.firstChild===u)r.modifyBox(32,d),s=true}else if(r.visible&&!r.preserveWhiteSpace&&"CODE"!==r.tagName&&!r.documentRoot&&!r.documentBody){const e=a[a.length-1],t=0===e.bounds.height&&e.length>0?NodeUI.outerRegion(e):e.linear,i=r.box.bottom-(e.lineBreak||e.excluded?t.top:t.bottom);if(0!==i)if(e.rendered||r.visibleStyle.background)r.modifyBox(128,i);else if(!r.hasHeight)((e,t)=>{e.css("minHeight",ea(Math.max(t,e.hasPX("minHeight",{percent:false})?e.parseHeight(e.css("minHeight")):0)))})(r,i)}if(s){let e=0;while(e<l)n.add(a[e++].id);e=0;while(e<c)n.add(o[e++].id)}}}})}afterConstraints(e){this.application.getProcessingCache(e).each(e=>{if(e.naturalChild&&e.styleElement&&e.inlineVertical&&e.pageFlow&&!e.positioned&&!e.actualParent.layoutElement){const t=e.outerMostWrapper,i=t.renderParent;if(false===(null==i?void 0:i.hasAlign(4))){if(e.blockDimension&&!e.floating)if(i.layoutVertical){const s=i.renderChildren,n=s.findIndex(e=>e===t);if(-1!==n){if(!e.lineBreakLeading&&!e.baselineAltered){const e=s[n-1];if(null==e?void 0:e.pageFlow)aa(t,2,e.actualRect("bottom"),e.getBox(8)[1])}if(!e.lineBreakTrailing){const e=s[n+1];if((null==e?void 0:e.pageFlow)&&e.styleElement&&!e.inlineVertical)aa(t,8,e.actualRect("top"),e.getBox(2)[1])}}}else if(!e.baselineAltered){const s=i.horizontalRows;let n;if(s&&s.length>1)e:{let e=-1/0;const i=s.length;let a;for(let l=0;l<i;++l){const i=s[l],r=i.length;a=0;while(a<r)if(t===i[a++]){if(l>0)aa(t,2,e);else n=i;break e}let o=0;while(o<i.length){const t=i[o++].innerMostWrapped;if(ma(t))e=Math.max(t.actualRect("bottom"),e)}if(e===-1/0)break}}else if(i.layoutHorizontal||i.hasAlign(1024))n=i.renderChildren;if(n){let i=[],s=-1/0,a=n.length,l=0;while(l<a){const e=n[l++];if(e.nodeGroup)i=i.concat(e.cascade(e=>e.naturalChild));else if(e.innerWrapped)i.push(e.innerMostWrapped);else i.push(e)}const r=e.actualParent.naturalChildren;a=r.length,l=0;while(l<a){const e=r[l++];if(i.includes(e))break;else if(e.lineBreak||e.block)s=-1/0;else if(ma(e))s=Math.max(e.actualRect("bottom"),s)}if(s!==-1/0&&e.actualRect("top")>s)aa(t,2,s)}}if(!i.layoutVertical&&!t.alignParent("left")&&!NodeUI.justified(e)){const s=t.alignSibling("leftRight");if(""!==s){const e=i.renderChildren.find(e=>e.documentId===s);if((null==e?void 0:e.inlineVertical)&&e.bounds.width>0)aa(t,16,e.actualRect("right"))}else{let i=e;while(true){const e=i.siblingsLeading;if(e.length>0&&!e.some(e=>e.lineBreak||e.excluded&&e.blockStatic)){const s=e[0];if(s.inlineVertical)aa(t,16,s.actualRect("right"));else if(s.floating){i=s;continue}}break}}}}}if(e.floatContainer&&e.layoutVertical){const t=[],i=e.naturalChildren,s=i.length;let n=0;while(n<s){const s=i[n++];if(s.pageFlow)if(!s.floating){const i=t.length;if(i>0){const n=s.outerMostWrapper;let a=n.renderParent;if(a){const[l,r]=s.getBox(2);if((0===l?s.marginTop:0)+r>0){const s=Math.floor(e.bounds.top);let l=0;while(l<i){const i=t[l++];if(s<=Math.floor(i.bounds.top)){let t=i.outerMostWrapper.renderParent;if(t){if(a=a.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||a,t=t.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||t,a!==t)n.modifyBox(2,-1*(t!==e?t:i).linear.height,false);break}}}}}t.length=0}}else t.push(s)}}})}}},ya={constant:ba,enumeration:it};e.Application=Application,e.ApplicationUI=class ApplicationUI extends Application{constructor(e,t,i,s,n){super(e,t,i,s,n),this.session={extensionMap:new Map,clearMap:new Map,active:new Map,unusedStyles:new Set},this.builtInExtensions={},this.extensions=[],this._layouts=[];const a=this.controllerHandler.localSettings;this._controllerSettings=a,this._layoutFileExtension=new RegExp(`\\.${a.layout.fileExtension}$`),this._excluded=a.unsupported.excluded}finalize(){var e;if(super.finalize())return false;const t=this.controllerHandler,i=this._layouts,s=this.childrenAll;let n=s.length;const a=new Array(n);let l=0,r=0;while(l<n){const e=s[l++];if(e.renderParent&&e.visible){if(e.hasProcedure(tt.LAYOUT))e.setLayout();if(e.hasProcedure(tt.ALIGNMENT))e.setAlignment();a[r++]=e}}a.length=r,t.optimize(a);const o=this.extensions;n=o.length,l=0;while(l<n){const e=o[l++];for(const t of e.subscribers)e.postOptimize(t)}const c=[];l=0;while(l<r){const e=a[l++];if(e.hasResource(et.BOX_SPACING))e.setBoxSpacing();if(e.documentRoot){if(0===e.renderChildren.length&&!e.inlineText&&e.naturalElements.length>0&&e.naturalElements.every(e=>e.documentRoot))continue;const t=e.innerMostWrapped.data(Application.KEY_NAME,"layoutName");if(t)c.push({node:e,layoutName:t})}}l=0;while(l<n)o[l++].beforeCascade(a,c);const h=this._controllerSettings.layout.baseTemplate,d=Xt(this.systemName);l=0;while(l<c.length){const{node:i,layoutName:s}=c[l++],n=i.renderParent.renderTemplates;if(n)this.saveDocument(s,h+t.cascadeDocument(n,Math.abs(i.depth)),i.dataset["pathname"+d],(null===(e=i.renderExtension)||void 0===e?void 0:e.some(e=>e.documentBase))?0:void 0)}this.resourceHandler.finalize(i),t.finalize(i),l=0;while(l<n)o[l++].afterFinalize();return Ut("__squared.pseudo"),this.closed=true,true}copyToDisk(e,t){return super.copyToDisk(e,this.createAssetOptions(t))}appendToArchive(e,t){return super.appendToArchive(e,this.createAssetOptions(t))}saveToArchive(e,t){return super.saveToArchive(e,this.createAssetOptions(t))}reset(){const e=this.session,t="iteration"+Xt(this.systemName);for(const i of e.active.values())for(const e of i.rootElements)delete e.dataset[t];super.reset(),e.extensionMap.clear(),e.clearMap.clear(),this._layouts.length=0}conditionElement(e,t,i,s){if(!this._excluded.has(e.tagName))if(this.controllerHandler.visibleElement(e,t,s)||i)return true;else if(!s){if(Lt(Pt(e).position))return this.useElement(e);let i=e.parentElement;while(i){if("none"===Pt(i).display)return this.useElement(e);i=i.parentElement}const s=this.controllerHandler;if(Qt(e.children,e=>s.visibleElement(e,t))===1/0)return true;else return this.useElement(e)}return false}insertNode(e,t,i,s){if("#text"===e.nodeName||this.conditionElement(e,t,i,s))return this.controllerHandler.applyDefaultStyles(e,t),this.createNode(t,{element:e,append:false});else{const i=this.createNode(t,{element:e,append:false});return i.visible=false,i.excluded=true,i}}saveDocument(e,t,i,s){const n={pathname:i?ii(i.replace(/\\/g,"/"),"/"):zt(this.userSettings.outputDirectory,this._controllerSettings.layout.pathName),filename:e,content:t,index:s};if(void 0===s||!(s>=0&&s<this._layouts.length))this._layouts.push(n);else this._layouts.splice(s,0,n)}renderNode(e){return 0===e.itemCount?this.controllerHandler.renderNode(e):this.controllerHandler.renderNodeGroup(e)}addLayout(e){const t=e.renderType;if(Yt(t,512))if(Yt(t,8))e=this.processFloatHorizontal(e);else if(Yt(t,16))e=this.processFloatVertical(e);if(0!==e.containerType){const t=this.renderNode(e);if(t)return this.addLayoutTemplate(t.parent||e.parent,e.node,t,e.renderIndex)}return false}addLayoutTemplate(e,t,i,s){if(i){if(!t.renderExclude){if(t.renderParent){const n=Zt(e,"renderTemplates");if(void 0===s||!(s>=0&&s<e.renderChildren.length))e.renderChildren.push(t),n.push(i);else e.renderChildren.splice(s,0,t),n.splice(s,0,i)}}else t.hide({remove:true}),t.excluded=true;return true}return false}createNode(e,t){const{element:i,parent:s,children:n}=t,a=this.getProcessingCache(e),l=new this.Node(this.nextId,e,i);if(this.controllerHandler.afterInsertNode(l),s){if(l.depth=s.depth+1,!i&&s.naturalElement)l.actualParent=s;const e=t.innerWrap;if(e&&s.replaceTry({child:e,replaceWith:l}))e.parent=l,l.innerWrapped=e}if(n){const e=n.length;let t=0;while(t<e)n[t++].parent=l}if(false!==t.append)a.add(l,true===t.delegate,true===t.cascade);return l}createCache(e,t){const i=this.createRootNode(e,t);if(i){const{cache:e,excluded:s}=this.getProcessing(t),n=i.parent;if(n)if(n.visible=false,i.documentParent=n,"HTML"===n.tagName)n.addAlign(4),n.exclude({resource:et.FONT_STYLE|et.VALUE_STRING,procedure:tt.ALL}),e.add(n);i.rootElement=true;const a={},l=new Set,r=[];let o=false;e.each(e=>{if(e.styleElement){const t=e.element;if(e.length>0){const i=e.cssInitial("textAlign");switch(i){case"center":case"right":case"end":ei(a,e.id)["text-align"]=i,t.style.setProperty("text-align","left");break}}if(e.positionRelative){let i=0;while(i<4){const s=NodeUI.BOX_POSITION[i++];if(e.hasPX(s))ei(a,e.id)[s]=e.css(s),t.style.setProperty(s,"auto"),o=true}}if("rtl"===e.dir)t.dir="ltr",l.add(t),o=true}}),s.each(e=>{if(!e.pageFlow)e.cssTry("display","none")}),e.each(e=>{if(!e.pseudoElement)e.setBounds(!o&&void 0===a[e.id]);else r.push(e)});const c=r.length;if(c>0){const e=[];let t=0;while(t<c){const i=r[t++],s=i.parentElement;let n,a=s.id.trim();if(i.pageFlow){if(""===a)a="__squared_"+Math.round(Math.random()*(new Date).getTime()),s.id=a;n=Wt(`#${a+Vt(i.element,i.sessionId)} { display: none !important; }`)}if(i.cssTry("display",i.display))e.push({item:i,id:a,parentElement:s,styleElement:n})}const i=e.length;t=0;while(t<i)e[t++].item.setBounds(false);t=0;while(t<i){const i=e[t++],s=i.styleElement;if(i.id.startsWith("__squared_"))i.parentElement.id="";if(s)try{document.head.removeChild(s)}catch(e){}i.item.cssFinally("display")}}s.each(e=>{if(!e.lineBreak)e.setBounds(!o),e.saveAsInitial();if(!e.pageFlow)e.cssFinally("display")}),e.each(e=>{if(e.styleElement){const t=e.element,i=a[e.id];if(i)for(const e in i)t.style.setProperty(e,i[e]);if(l.has(t))t.dir="rtl"}e.saveAsInitial()}),this.controllerHandler.evaluateNonStatic(i,e),this.controllerHandler.sortInitialCache(e)}return i}afterCreateCache(e){const t=Xt(this.systemName),i=e.dataset,s=i["filename"+t]||i.filename,n=i["iteration"+t],a=Kt(s)&&s.replace(this._layoutFileExtension,"")||e.elementId||"document_"+this.length,l=(n?parseInt(n):-1)+1,r=jt(l>0?a+"_"+l:a,true);i["iteration"+t]=l.toString(),i["layoutName"+t]=r,e.data(Application.KEY_NAME,"layoutName",r);const o=e.sessionId;this.setBaseLayout(o),this.setConstraints(o),this.setResources(o)}useElement(e){const t=this.getDatasetName("use",e);return Kt(t)&&t.split(",").some(e=>!!this.extensionManager.retrieve(e.trim()))}toString(){var e;return(null===(e=this.layouts[0])||void 0===e?void 0:e.content)||""}cascadeParentNode(e,t,i,s,n,a,l,r){var o;const c=this.insertNode(s,n,r);if(0===a){e.add(c);for(const e of c.extensions)if(null===(o=this.extensionManager.retrieve(e))||void 0===o?void 0:o.cascadeAll){r=true;break}}if("none"!==c.display||0===a||r){const o=this.controllerHandler;if(c.excluded||o.preventNodeCascade(c))return c;const h=this.createPseduoElement(s,"::before",n),d=this.createPseduoElement(s,"::after",n),u=s.childNodes,f=u.length,g=new Array(f),p=new Array(s.childElementCount),m=a+1;let b=true,x=0,y=0,v=0;while(x<f){const a=u[x++];let f;if(a===h){if(f=this.insertNode(h,n,r,"::before"),c.innerBefore=f,!f.textEmpty)f.inlineText=true;b=false}else if(a===d){if(f=this.insertNode(d,n,r,"::after"),c.innerAfter=f,!f.textEmpty)f.inlineText=true;b=false}else if("#"===a.nodeName.charAt(0))if("#text"===a.nodeName&&(si(a.textContent)||c.preserveWhiteSpace&&("PRE"!==s.tagName||0===s.childElementCount)))f=this.insertNode(a,n),f.cssApply(c.textStyle);else continue;else if(o.includeElement(a)){if(l){const e=this.getDatasetName("use",a);if(e)ai(e,l).some(e=>e.init(a,n))}if(!i.has(a)){if(f=this.cascadeParentNode(e,t,i,a,n,m,l,r),!f.excluded)b=false}else f=this.insertNode(a,n),f.documentRoot=true,f.visible=false,f.excluded=true,b=false;p[v++]=f}else continue;f.depth=m,f.childIndex=y,f.naturalChild=true,g[y++]=f}if(g.length=y,p.length=v,c.naturalChildren=g,c.naturalElements=p,c.inlineText=b,!b){if(y>0)this.cacheNodeChildren(e,t,c,g);c.inlineText=b}else c.inlineText=!c.textEmpty;if(v>0&&this.userSettings.createQuerySelectorMap)c.queryMap=this.createQueryMap(p,v)}return c}cacheNodeChildren(e,t,i,s){const n=s.length;if(n>1){let a,l=[],r=[],o=s[0],c=false;for(let h=0,d=0;h<n;++h){const u=s[h];if(u.pageFlow){if(u.floating)c=true;if(h>0)if(r.push(u),u.lineBreak)s[h-1].lineBreakTrailing=true;if(!u.excluded)u.siblingsLeading=l,o.siblingsTrailing=r,l=[],r=[],o=u;if(h<n-1)if(l.push(u),u.lineBreak)s[h+1].lineBreakLeading=true}if(u.excluded)a=true,t.add(u);else u.$parent=i,u.containerIndex=d++,e.add(u);u.actualParent=i}o.siblingsTrailing=r,i.floatContainer=c,i.retainAs(a?s.filter(e=>!e.excluded):s.slice(0))}else{const n=s[0];if(n.excluded)t.add(n);else n.$parent=i,n.containerIndex=0,i.add(n),e.add(n),i.floatContainer=n.floating;n.actualParent=i}}setBaseLayout(e){const{controllerHandler:t,session:i}=this,{extensionMap:s,clearMap:n}=i,{cache:a,node:l}=this.getProcessing(e),r=new Map;{let e=0;hi(r,-1,l.parent),a.each(t=>{if(t.length>0){const i=t.depth;if(hi(r,i,t),e=Math.max(i,e),t.floatContainer){const e=new Set;let i=[];const s=t.documentChildren||t.naturalChildren,a=s.length;let l=0;while(l<a){const t=s[l++];if(t.pageFlow){const s=t.floating;if(e.size>0){const a=t.css("clear");if(e.has(a)||"both"===a){if(!s)t.setBox(2,{reset:1});n.set(t,2===e.size?"both":e.values().next().value),e.clear(),i.length=0}else if(t.blockStatic&&Math.ceil(t.bounds.top)>=Ht(i.map(e=>e.bounds.bottom)))t.data(Application.KEY_NAME,"cleared",i),e.clear(),i=[]}if(s){const s=t.float;e.add(s),i.push(t)}}}}}});let t=0;while(t<e)r.set(bi(t++),new Set);a.afterAdd=(e,t=false)=>{if(hi(r,bi(e.depth),e),t&&e.length>0)e.cascade(e=>{var t;if(e.length>0){const i=e.depth;null===(t=r.get(i))||void 0===t||t.delete(e),hi(r,bi(i),e)}})}}const o=this.extensions,c=o.length;let h=0;while(h<c)o[h++].beforeBaseLayout(e);let d=this.extensionsTraverse;for(const e of r.values())for(const i of e.values()){if(0===i.length)continue;const e=i.floatContainer,a=i.renderExtension,l=i.duplicate(),r=l.length;for(h=0;h<r;++h){let i=l[h];if(i.rendered||!i.visible)continue;let o=i.parent;if(r>1&&h<r-1&&i.pageFlow&&!i.nodeGroup&&(0===o.alignmentType||o.hasAlign(2)||i.hasAlign(8192))&&!o.hasAlign(4)&&i.hasSection(Ze.DOM_TRAVERSE)){const s=[],a=[];let c=h,d=0;if(o.layoutVertical&&i.hasAlign(8192))s.push(i),++c,++d;e:{let t,i=false;for(;c<r;++c,++d){const r=l[c];if(r.pageFlow){if(r.labelFor&&!r.visible){--d;continue}if(e){if(i){if(n.get(r))i=false}if(t=r.floating,t)i=true}if(0===d){const e=r.siblingsTrailing[0];if(e){if(!pi(r)||e.alignedVertically([r])>0)a.push(r);else s.push(r);continue}}if(r.siblingsLeading[0]){const t=s.length>0;if(e){const e=r.alignedVertically(t?s:a,n,t);if(e>0){if(s.length>0){if(i&&e<4&&!r.siblingsLeading.some(e=>n.has(e)&&!s.includes(e))){s.push(r);continue}else switch(e){case 6:case 7:if(!n.has(r))n.set(r,"both");break}break e}a.push(r)}else{if(a.length>0)break e;s.push(r)}}else if(r.alignedVertically(t?s:a,void 0,t)>0){if(s.length>0)break e;a.push(r)}else{if(a.length>0)break e;s.push(r)}}else break e}else if(r.autoPosition){const e=a.length;if(e>0){if(a[e-1].blockStatic&&!r.renderExclude)a.push(r);break}else s.push(r)}}}let u,f,g=s.length,p=true;if(g>1){const e=s.filter(e=>!e.renderExclude||n.has(e));if(e.length>1)u=t.processTraverseHorizontal(new LayoutUI(o,i,0,0,e),l);f=s[g-1]}else if(g=a.length,g>1){const e=a.filter(e=>!e.renderExclude||n.has(e));if(e.length>1)u=t.processTraverseVertical(new LayoutUI(o,i,0,0,e),l);if(f=a[g-1],pi(f)&&f!==l[r-1])f.addAlign(8192)}if(u)if(this.addLayout(u))o=i.parent;else p=false;if(p&&f===l[r-1])o.removeAlign(2)}if(i.removeAlign(8192),h===r-1)o.removeAlign(2);if(i.renderAs&&o.replaceTry({child:i,replaceWith:i.renderAs}))if(i.hide(),i=i.renderAs,i.positioned)o=i.parent;if(!i.rendered&&i.hasSection(Ze.EXTENSION)){const e=s.get(i.id);let t=e?(null==a?void 0:a.concat(e))||e:a,n=false;if(t){const e=t.length;let s=0;while(s<e){const e=t[s++],a=e.processChild(i,o);if(a){if(a.output)this.addLayoutTemplate(a.outerParent||o,i,a.output);if(a.renderAs&&a.outputAs)this.addLayoutTemplate(a.parentAs||o,a.renderAs,a.outputAs);if(o=a.parent||o,a.subscribe)e.subscribers.add(i);if(n=true===a.next,a.complete||n)break}}if(n)continue}if(i.styleElement){t=i.use?ai(i.use,d):d;const s=t.length;let a=0;while(a<s){const s=t[a++];if(s.is(i))if(s.condition(i,o)&&(!e||!e.includes(s))){const e=s.processNode(i,o);if(e){if(e.output)this.addLayoutTemplate(e.outerParent||o,i,e.output);if(e.renderAs&&e.outputAs)this.addLayoutTemplate(e.parentAs||o,e.renderAs,e.outputAs);if(o=e.parent||o,e.include)Zt(i,"renderExtension").push(s),s.subscribers.add(i);else if(e.subscribe)s.subscribers.add(i);if(e.remove){const e=d.indexOf(s);if(-1!==e)d=d.slice(0),d.splice(e,1)}if(n=true===e.next,e.complete||n)break}}}if(n)continue}}if(!i.rendered&&i.hasSection(Ze.RENDER)){let e=this.createLayoutControl(o,i);if(0===e.containerType){const s=i.length>0?t.processUnknownParent(e):t.processUnknownChild(e);if(s.next)continue;e=s.layout}this.addLayout(e)}}}a.sort((e,t)=>{if(e.depth===t.depth){if(e.innerWrapped===t)return-1;else if(e===t.innerWrapped)return 1;const i=e.outerWrapper,s=t.outerWrapper;if(e===s||!i&&s)return-1;else if(t===i||!s&&i)return 1;if(e.nodeGroup&&t.nodeGroup)return e.id<t.id?-1:1;else if(e.nodeGroup)return-1;else if(t.nodeGroup)return 1;return 0}return e.depth<t.depth?-1:1}),h=0;while(h<c){const t=o[h++];for(const e of t.subscribers)if(a.contains(e))t.postBaseLayout(e);t.afterBaseLayout(e)}}setConstraints(e){const t=this.getProcessingCache(e);this.controllerHandler.setConstraints(t);const i=this.extensions,s=i.length;let n=0;while(n<s){const s=i[n++];for(const e of s.subscribers)if(t.contains(e))s.postConstraints(e);s.afterConstraints(e)}}setResources(e){const t=this.resourceHandler;this.getProcessingCache(e).each(e=>{if(t.setBoxStyle(e),e.hasResource(et.VALUE_STRING)&&e.visible&&!e.imageElement&&!e.svgElement)t.setFontStyle(e),t.setValueString(e)});const i=this.extensions,s=i.length;let n=0;while(n<s)i[n++].afterResources(e)}processFloatHorizontal(e){const t=this.controllerHandler,{containerType:i,alignmentType:s}=t.containerTypeVertical,n=this.session.clearMap,a=[],l=[],r=[],o=[];let c,h,d,u,f,g,p=false,m=false,b=false;if(e.each((e,t)=>{const i=e.float;if(m&&"left"===i)b=true;if(t>0){if(n.get(e))b=true;else if(e.data(Application.KEY_NAME,"cleared"))m=true}if(!b)if("left"===i)r.push(e);else if("right"===i)o.push(e);else if(r.length>0||o.length>0){let t=e.linear.top;if(e.styleText){const i=e.textBounds;if(i)t=Math.max(i.top,t)}if(t=Math.ceil(t),e.blockStatic&&r.some(e=>t>=e.bounds.bottom))if(f)f.push(e);else f=[e];else l.push(e)}else l.push(e);else if("left"===i)if(c)c.push(e);else c=[e];else if("right"===i)if(h)h.push(e);else h=[e];else if(f)f.push(e);else f=[e]}),r.length>0)d=c?[r,c]:r;else if(c)d=c;if(o.length>0)u=h?[o,h]:o;else if(h)u=h;if(o.length+((null==h?void 0:h.length)||0)===e.length)e.addAlign(2048);if(l.length>0)a.push(l),p=e.every(e=>l.includes(e)||!e.imageElement);if(d)a.push(d);if(u)a.push(u);if(f){const{node:n,parent:a}=e;if(f.length>1)f[0].addAlign(8192);f.unshift(n);const l=t.createNodeGroup(n,f,a);l.childIndex=n.childIndex,l.containerName=n.containerName,g=l.inherit(n,"boxStyle"),l.innerWrapped=n,n.resetBox(30,l),n.resetBox(480,l),this.addLayout(new LayoutUI(a,l,i,s|(a.blockStatic?64:0),f)),e.parent=l}e.type=t.containerTypeVerticalMargin,e.itemCount=a.length,e.addAlign(64);let x,y=0;while(y<e.itemCount){const n=a[y++];let r,c,h;if(Array.isArray(n[0])){r=n,c=r.length;let a=r[0];x=1;while(x<c)a=a.concat(r[x++]);a.sort((e,t)=>e.childIndex<t.childIndex?-1:1);const l=e.node;if(l.layoutVertical)h=l;else h=t.createNodeGroup(a[0],a,l),this.addLayout(LayoutUI.create({parent:l,node:h,containerType:i,alignmentType:s|(r.some(e=>e===u||e===o)?2048:0),itemCount:c}))}else r=[n],c=1;x=0;while(x<c){const n=r[x++],a=h||e.node,o=t.createNodeGroup(n[0],n,a,{delegate:true,cascade:true}),c=new LayoutUI(a,o,0,128);if(n===l){if(c.addAlign(256),p)if(g)o.inheritApply("boxStyle",g);else o.inherit(e.node,"boxStyle")}else c.addAlign(li(n));if(n.some(e=>e.percentWidth>0||e.percentHeight>0)){if(c.type=t.containerTypePercent,1===n.length)c.node.innerWrapped=n[0]}else if(1===n.length||c.linearY)c.setContainerType(i,s);else if(!c.linearX)c.setContainerType(i,2);else t.processLayoutHorizontal(c);if(this.addLayout(c),n===l)this.setFloatPadding(a,o,l,d&&Gt(d),u&&Gt(u))}}return e}processFloatVertical(e){const t=this.controllerHandler,{containerType:i,alignmentType:s}=t.containerTypeVertical,n=this.session.clearMap;if(0!==e.containerType){const n=e.node,a=t.createNodeGroup(n,[n],e.parent);this.addLayout(new LayoutUI(a,n,i,s,a.children)),e.node=a}else e.setContainerType(i,s);const a=[],l=[],r=[],o=[];let c=false,h=false,d=true;if(e.each(e=>{if(e.blockStatic&&0===o.length)r.push(e),h=true;else{if(n.has(e))if(!e.floating)e.setBox(2,{reset:1}),a.push(r.slice(0)),l.push(o.slice(0)),r.length=0,o.length=0;else c=true;if(e.floating){if(h)a.push(r.slice(0)),l.push(null),r.length=0,o.length=0,h=false;o.push(e)}else{if(c&&!n.has(e))d=false;r.push(e)}}}),o.length>0)l.push(o);if(r.length>0)a.push(r);if(!d){const{containerType:n,alignmentType:r}=t.containerTypeVerticalMargin,o=e.node,c=Math.max(l.length,a.length);for(let e=0;e<c;++e){const c=a[e],h=l[e],d=c.length;if(!h&&d>0){const e=t.containerTypeVertical;this.addLayout(new LayoutUI(o,t.createNodeGroup(c[0],c,o),e.containerType,192|e.alignmentType,c))}else{const e=[];let a,l=0;if(h)if(h.length>1){const i=t.createNodeGroup(h[0],h);if(l=512,0===d&&h.every(e=>"right"===e.float))l|=2048;e.push(i)}else e.push(h[0]);if(d>1||h)a=t.createNodeGroup(c[0],c),e.push(a);else if(1===d)e.push(c[0]);const u=t.createNodeGroup((h||c)[0],e,o);this.addLayout(new LayoutUI(o,u,n,r|l));let f=0;while(f<e.length){const t=e[f++];this.addLayout(new LayoutUI(u,t,i,192|s,t.children))}if(d&&h&&a){const[e,t]=Jt(h,e=>"right"!==e.float);this.setFloatPadding(o,a,c,e,t)}}}}return e}createPseduoElement(e,t,i){var s;let n=Dt(e,"styleMap"+t,i);if("Q"===e.tagName){if(!n)n={},qt(e,"styleMap"+t,i,n);let s=n.content;if(!s)s=Pt(e,t).getPropertyValue("content")||("::before"===t?"open-quote":"close-quote"),n.content=s}if(n){let a=n.content;if(a){const l=ti(a,'"');if(!Kt(l)){const i=Lt(n.position);if("::after"===t){if((i||""===l||!function(e){const t=e.childNodes[e.childNodes.length-1];return"#text"===t.nodeName&&!/\s+$/.test(t.textContent)}(e))&&!ri(n,true,i))return}else{const t=e.childNodes,s=t.length;let a=0;while(a<s){const e=t[a++];if("#text"===e.nodeName){if(Kt(e.textContent))break}else if(Bt(e)){const t=Pt(e);if(Lt(n.position))continue;else if("none"!==t.getPropertyValue("float"))return;break}}if(!ri(n,false,i))return}}else if("inherit"===a){let t=e;do{if(a=Pt(t).getPropertyValue("content"),"inherit"!==a)break;t=t.parentElement}while(t)}const r=Pt(e);let o="",c="",h=0;while(h<ni.length){const e=ni[h++];if(!n[e])n[e]=r[e]}switch(a){case"normal":case"none":case"initial":case"inherit":case"unset":case"no-open-quote":case"no-close-quote":case'""':break;case"open-quote":if("::before"===t)c=oi(e,t,"","",i);break;case"close-quote":if("::after"===t)c=oi(e,t,"","",i);break;default:{const n=Ft(a);if(n)if(c=n,$t(this._controllerSettings.mimeType.image,n))o="img";else c="";else{const n=/\s*(?:attr\(([^)]+)\)|(counter)\(([^,)]+)(?:,\s+([a-z-]+))?\)|(counters)\(([^,]+),\s+"([^"]*)"(?:,\s+([a-z-]+))?\)|"([^"]+)")\s*/g;let l,o=false;while(l=n.exec(a)){const n=l[1];if(n)c+=Ot(e,n.trim());else if(l[2]||l[5]){const n="counter"===l[2],[a,o]=n?[l[3],l[4]||"decimal"]:[l[6],l[8]||"decimal"],d=(null!==(s=fi(e,a,t,i,0))&&void 0!==s?s:1)+(di(r.getPropertyValue("counter-reset"),a,0)||0),u=[];let f,g=e,p=d,m=false;const b=(e,t)=>{if(0===u.length)p+=e;else if(m||t)u[u.length-1]+=e},x=e=>{if(void 0===di(Pt(e).getPropertyValue("counter-reset"),a))Qt(e.children,e=>{if("__squared.pseudo"!==e.className){let s=fi(e,a,t,i);if(s)b(s,true);const n=Pt(e);if(s=di(n.getPropertyValue("counter-increment"),a),s)b(s,false);if(s=di(n.getPropertyValue("counter-reset"),a),void 0!==s)return true;x(e)}})};while(g){if(m=false,g.previousElementSibling){if(g=g.previousElementSibling,g)x(g)}else{if(g=g.parentElement,!g)break;m=true}if(g&&"__squared.pseudo"!==g.className){const e=fi(g,a,t,i);if(e)b(e,true);const s=Pt(g),l=di(s.getPropertyValue("counter-increment"),a);if(l)b(l,false);const r=di(s.getPropertyValue("counter-reset"),a);if(void 0!==r){if(!f)p+=r;if(f=g,n)break;else if(m)u.push((e||0)+r)}}}if(f){if(!n&&u.length>1){u.reverse().splice(1,1);const e=l[7];h=0;while(h<u.length)c+=Nt(o,u[h++],true)+e}}else p=d;c+=Nt(o,p,true)}else if(l[9])c+=l[9];o=true}if(!o)c=a}break}}if(!n.display)n.display="inline";if(c||'""'===a){if(""===o)o=/^(inline|table)/.test(n.display)?"span":"div";const s=document.createElement(o);if(s.className="__squared.pseudo",s.style.setProperty("display","none"),"::before"===t)e.insertBefore(s,e.childNodes[0]);else e.appendChild(s);if("img"===o){s.src=c;const e=this.resourceHandler.getImage(c);if(e){if(!n.width&&e.width>0)n.width=Mt(e.width);if(!n.height&&e.height>0)n.height=Mt(e.height)}}else if('""'!==a)s.innerText=c;for(const e in n)if("display"!==e)s.style[e]=n[e];return qt(s,"pseudoElement",i,t),qt(s,"styleMap",i,n),s}}}}createAssetOptions(e){let t=null==e?void 0:e.assets;if(t)t=this.layouts.concat(t);else t=this.layouts;return Object.assign(Object.assign({},e),{assets:t})}createLayoutControl(e,t){return new LayoutUI(e,t,t.containerType,t.alignmentType,t.children)}setFloatPadding(e,t,i,s=[],n=[]){let a=[],l=0;while(l<i.length){const e=i[l++];if(mi(e)||e.centerAligned)a.push(e);if(e.blockStatic)a=a.concat(e.cascade(t=>mi(t,t.depth-e.depth)))}const r=a.length;if(0===r)return;const o=t.bounds.bottom,c=e.actualBoxWidth();let h=s.length;if(h>0){let i=-1/0,n=false;l=0;while(l<h){const e=s[l++];if(e.bounds.top<o){const t=e.linear.right+ci(e,false);if(t>i)i=t,n=e.marginRight>0;else if(t===i&&e.marginRight<=0)n=false}}if(i!==-1/0){let o=-1/0;l=0;while(l<r){const e=a[l++];if(Math.floor(e.linear.left)<=i||e.centerAligned)o=Math.max(o,e.marginLeft)}if(o!==-1/0){const l=i-e.box.left-o-Ht(t.map(e=>!a.includes(e)?e.marginLeft:0));if(l>0&&l<c)t.modifyBox(256,l+(!n&&t.find(e=>e.multiline,{cascade:true})?Math.max(o,this._controllerSettings.deviations.textMarginBoundarySize):0)),ui(s,l)}}}if(h=n.length,h>0){let i=1/0,s=false;l=0;while(l<h){const e=n[l++];if(e.bounds.top<o){const t=e.linear.left+ci(e,true);if(t<i)i=t,s=e.marginLeft>0;else if(t===i&&e.marginLeft<=0)s=false}}if(i!==1/0){let o=-1/0;l=0;while(l<r){const e=a[l++];if(e.multiline||e.centerAligned||Math.ceil(e.linear.right)>=i)o=Math.max(o,e.marginRight)}if(o!==-1/0){const l=e.box.right-i-o-Ht(t.map(e=>!a.includes(e)?e.marginRight:0));if(l>0&&l<c)t.modifyBox(64,l+(!s&&t.find(e=>e.multiline,{cascade:true})?Math.max(o,this._controllerSettings.deviations.textMarginBoundarySize):0)),ui(n,l)}}}}get mainElement(){return document.body}get layouts(){return this._layouts.sort((e,t)=>{const i=e.index,s=t.index;if(i!==s)if(0===i||s===1/0||void 0===s&&!(i===1/0))return-1;else if(0===s||i===1/0||void 0===i&&!(s===1/0))return 1;else if(void 0!==i&&void 0!==s)return i<s?-1:1;return 0})}get extensionsCascade(){return this.extensions.filter(e=>!!e.init)}get extensionsTraverse(){return this.extensions.filter(e=>!e.eventOnly)}get clearMap(){return this.session.clearMap}},e.Controller=Controller,e.ControllerUI=class ControllerUI extends Controller{constructor(){super(...arguments),this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}init(){const e=this.localSettings.unsupported;this._unsupportedCascade=e.cascade,this._unsupportedTagName=e.tagName}preventNodeCascade(e){return this._unsupportedCascade.has(e.tagName)}includeElement(e){const t=e.tagName;return!(this._unsupportedTagName.has(t)||"INPUT"===t&&this._unsupportedTagName.has(t+":"+e.type))||"true"===e.contentEditable}reset(){this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}applyDefaultStyles(e,t){let i;if("#text"===e.nodeName)i={position:"static",display:"inline",verticalAlign:"baseline",float:"none",clear:"none"};else{i=Ai(e,"styleMap",t)||{};const s=e.tagName;if(yi(8))switch(s){case"BODY":if("rgba(0, 0, 0, 0)"===i.backgroundColor)i.backgroundColor="rgb(255, 255, 255)";break;case"INPUT":case"SELECT":case"BUTTON":case"TEXTAREA":if(!i.display)i.display="inline-block";break;case"FIELDSET":if(!i.display)i.display="block";break}switch(s){case"INPUT":{const t=e.type;switch(t){case"radio":case"checkbox":case"image":break;case"week":case"month":case"time":case"date":case"datetime-local":i.paddingTop=wi(Ni(i.paddingTop)+1),i.paddingRight=wi(Ni(i.paddingRight)+1),i.paddingBottom=wi(Ni(i.paddingBottom)+1),i.paddingLeft=wi(Ni(i.paddingLeft)+1);break;default:{const e=this.localSettings.style,s=Vi(i,e.inputBorderColor);switch(t){case"file":case"reset":case"submit":case"button":qi(i,s,e.inputBackgroundColor);break}break}}break}case"BUTTON":{const e=this.localSettings.style;qi(i,Vi(i,e.inputBorderColor),e.inputBackgroundColor);break}case"TEXTAREA":case"SELECT":Vi(i,this.localSettings.style.inputBorderColor);break;case"BODY":{const e=i.backgroundColor;if(!e||"initial"===e)i.backgroundColor="rgb(255, 255, 255)";break}case"FORM":if(!i.marginTop)i.marginTop="0px";break;case"LI":if(!i.listStyleImage){const t=Si(e);i.listStyleImage=t.getPropertyValue("list-style-image")}break;case"IFRAME":if(!i.display)i.display="block";case"IMG":case"CANVAS":case"svg":case"VIDEO":case"OBJECT":case"EMBED":this.setElementDimension(e,s,i,"width","height"),this.setElementDimension(e,s,i,"height","width");break}}Ii(e,"styleMap",t,i)}addBeforeOutsideTemplate(e,t,i=true,s=-1){const n=Bi(this._beforeOutside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addBeforeInsideTemplate(e,t,i=true,s=-1){const n=Bi(this._beforeInside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addAfterInsideTemplate(e,t,i=true,s=-1){const n=Bi(this._afterInside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addAfterOutsideTemplate(e,t,i=true,s=-1){const n=Bi(this._afterOutside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}getBeforeOutsideTemplate(e,t){const i=this._beforeOutside[e];return i?Wi(i,t):""}getBeforeInsideTemplate(e,t){const i=this._beforeInside[e];return i?Wi(i,t):""}getAfterInsideTemplate(e,t){const i=this._afterInside[e];return i?Wi(i,t):""}getAfterOutsideTemplate(e,t){const i=this._afterOutside[e];return i?Wi(i,t):""}hasAppendProcessing(e){return void 0===e?this._requireFormat:e in this._beforeOutside||e in this._beforeInside||e in this._afterInside||e in this._afterOutside}visibleElement(e,t,i){let s,n,a;if(i){const t=e.parentElement;s=t?Si(t,i):Si(e),n=1,a=1}else if(s=Si(e),"none"!==s.getPropertyValue("display")){const i=Ci(e,t);if(!Ti(i))return false;({width:n,height:a}=i)}else return false;if(n>0&&a>0)return"visible"===s.getPropertyValue("visibility")||!Ei(s.getPropertyValue("position"));else if(!i&&("IMG"===e.tagName&&"none"!==s.getPropertyValue("display")||Pi(e.children,e=>this.visibleElement(e,t))===1/0))return true;return!Ei(s.getPropertyValue("position"))&&(n>0&&"none"!==s.getPropertyValue("float")||i&&"none"!==s.getPropertyValue("clear")||"block"===s.getPropertyValue("display")&&(0!==parseInt(s.getPropertyValue("margin-top"))||0!==parseInt(s.getPropertyValue("margin-bottom"))))}evaluateNonStatic(e,t){const i=new Set,s=new Set,n=new Map;t.each(t=>{if(t.floating){if("left"===t.float){const e=t.actualParent;let i,s=e;while("P"===(null==s?void 0:s.tagName)&&!s.documentRoot)i=s,s=s.actualParent;if(s&&i&&s!==e&&"DIV"===s.tagName)if(n.has(i))n.get(i).appending.push(t);else n.set(i,{parent:s,appending:[t]})}}else if(!t.pageFlow&&!t.documentRoot){const n=t.actualParent,a=t.absoluteParent;let l;switch(t.css("position")){case"fixed":if(!t.autoPosition){l=e;break}case"absolute":if(l=a,t.autoPosition){if(!t.siblingsLeading.some(e=>e.multiline||e.excluded&&!e.blockStatic))t.cssApply({display:"inline-block",verticalAlign:"top"},true);else t.autoPosition=false;l=n}else if(this.userSettings.supportNegativeLeftTop){let i=false;while(l&&l!==e&&(!l.rightAligned&&!l.centerAligned||!l.pageFlow)){const e=l.linear;if(!i)if(t.hasPX("top")&&t.hasPX("bottom")||t.hasPX("left")&&t.hasPX("right"))break;else{const s="hidden"===l.css("overflowX"),n="hidden"===l.css("overflowY");if(s&&n)break;const a=!s&&t.outsideX(e),r=!n&&t.outsideY(e);if(a&&(t.left<0||t.right>0)||r&&(t.top<0||0!==t.bottom))i=true;else if(!s&&((t.left<0||t.right>0)&&Math.ceil(t.bounds.right)<e.left||(t.left>0||t.right<0)&&Math.floor(t.bounds.left)>e.right)&&l.some(e=>e.pageFlow))i=true;else if(!n&&((t.top<0||t.bottom>0)&&Math.ceil(t.bounds.bottom)<l.bounds.top||(t.top>0||t.bottom<0)&&Math.floor(t.bounds.top)>l.bounds.bottom))i=true;else if(a&&r&&(!l.pageFlow||l.actualParent.documentRoot&&(t.top>0||t.left>0)))i=true;else if(!(s||n||t.intersectX(e)||t.intersectY(e)))i=true;else break}else if(l.layoutElement){l=a;break}else if(t.withinX(e)&&t.withinY(e))break;l=l.actualParent}}break}if(!l)l=e;if(l!==n){if(a.positionRelative&&l!==a){const{left:e,right:i,top:s,bottom:n}=a,l=t.bounds;if(0!==e)l.left+=e,l.right+=e;else if(!a.hasPX("left")&&0!==i)l.left-=i,l.right-=i;if(0!==s)l.top+=s,l.bottom+=s;else if(!a.hasPX("top")&&0!==n)l.top-=n,l.bottom-=n;t.unset("box"),t.unset("linear")}let e=t.toFloat("opacity",1),r=n;do{e*=r.toFloat("opacity",1),r=r.actualParent}while(r&&r!==l);t.css("opacity",e.toString()),t.parent=l,t.containerIndex=1/0,i.add(l),s.add(n)}t.documentParent=l}});for(const e of s)e.each((e,t)=>e.containerIndex=t);for(const[e,t]of n.entries()){const{parent:i,appending:s}=t,n=i.children;if(n.includes(e)){const t=new Set,{childIndex:a,containerIndex:l}=e,r=i.naturalChildren.slice(0),o=n[l],c=i.depth+1;for(let e=0,h=0,d=0,u=false;e<s.length;++e){const f=s[e];if(0===f.containerIndex)u=true;else if(u){const t=s[e-1];u=f.containerIndex-t.containerIndex==1&&f.actualParent===t.actualParent}const g=h+(u?0:d+1),p=a+g,m=l+g;if(r.splice(p,0,f),n.splice(m,0,f),u)o.siblingsLeading.unshift(f),++h;else++d;f.parent.remove(f),f.$parent=i,f.depth=c,f.documentParent=i;const b=f.css("clear");switch(b){case"left":case"right":case"both":e:{let e,t=p-1;while(t>=0){const i=r[t--];if(i.floating){const t=i.float;if("both"===b||t===b){this.application.session.clearMap.set(f,b);let e=f.nextElementSibling;while(e){if(e.floating&&!s.includes(e))s.push(e);e=e.nextElementSibling}break}else if(t===e)break}else{const t=i.css("clear");switch(t){case"left":case"right":if(b===t)break e;else e=t;break;case"both":break e}}}}break}t.add(f.actualParent)}i.each((e,t)=>e.containerIndex=t),i.floatContainer=true;const h=r.length;let d,u=0;while(u<s.length){const e=s[u++],t=r.findIndex(t=>t===e);if(-1!==t){const i=[],s=[];d=t-1;while(d>=0){const e=r[d--];if(i.push(e),!e.excluded)break}d=t+1;while(d<h){const e=r[d++];if(s.push(e),!e.excluded)break}e.siblingsLeading=i,e.siblingsTrailing=s}}for(const e of t){let t=false;if(e.each((e,i)=>{if(e.floating)t=true;e.containerIndex=i}),!t)e.floatContainer=false}}}for(const e of i){const t=[];let i=-1;e.each(s=>{if(s.containerIndex===1/0)e.some(e=>{let i=e.naturalElements.includes(s);if(!i){const t=e.cascade();i=s.ascend({condition:e=>t.includes(e)}).length>0}if(i)Bi(t,e.containerIndex+(s.zIndex>=0||e!==s.actualParent?1:0)).push(s);return i});else if(s.containerIndex>i)i=s.containerIndex});const s=t.length;if(s>0){const n=e.children;for(let e=0,a=0,l=1;e<s;++e,++a){const s=t[e];if(s){s.sort((e,t)=>{if(e.parent===t.parent){const i=e.zIndex,s=t.zIndex;if(i===s)return e.id<t.id?-1:1;else return i<s?-1:1}return 0}).forEach(e=>e.containerIndex=i+l++);const e=n.length;for(let t=0;t<e;++t)if(s.includes(n[t]))n[t]=void 0;n.splice(a,0,...s),a+=s.length}}e.retainAs(Mi(n))}}}sortInitialCache(e){e.sort((e,t)=>{if(e.depth!==t.depth)return e.depth<t.depth?-1:1;else{const i=e.documentParent,s=t.documentParent;if(i!==s){const e=i.depth,t=s.depth;if(e!==t)return e<t?-1:1;else if(i.actualParent===s.actualParent)return i.childIndex<s.childIndex?-1:1;return i.id<s.id?-1:1}}return 0})}cascadeDocument(e,t){const i=this.userSettings.showAttributes,s="\t".repeat(t);let n="";const a=e.length;let l=0;while(l<a){const a=e[l++],r=a.node;switch(a.type){case 1:{const{controlName:e,attributes:l}=a,{id:o,renderTemplates:c}=r,h=t+1,d=r.depth<0?t+r.depth:t,u=this.getBeforeInsideTemplate(o,h),f=this.getAfterInsideTemplate(o,h);let g=s+"<"+e+(0===t?"{#0}":"")+(i?l?Li(l,h):r.extractAttributes(h):"");if(c||""!==u||""!==f)g+=">\n"+u+(c?this.cascadeDocument(this.sortRenderPosition(r,c),h):"")+f+s+`</${e}>\n`;else g+=" />\n";n+=this.getBeforeOutsideTemplate(o,d)+g+this.getAfterOutsideTemplate(o,d);break}case 2:{const e=a.content;if(e)n+=Li(e,t);break}}}return n}getEnclosingXmlTag(e,t="",i){return"<"+e+t+(i?`>\n${i}</${e}>\n`:" />\n")}setElementDimension(e,t,i,s,n){var a;const l=i[s];if(!l||"auto"===l){const t=new RegExp(`\\s+${s}="([^"]+)"`).exec(e.outerHTML);if(t){const e=t[1];if(ki(e))i[s]=e+"px";else if(_i(e))i[s]=e}else if(300===e.clientWidth&&150===e.clientHeight)if("width"===s)i.width="300px";else i.height="150px";else{const t=null===(a=this.application.resourceHandler)||void 0===a?void 0:a.getImage(e.src);if(t&&t.width>0&&t.height>0){const e=i[n];if(e&&ki(e)){const a="max"+Ri(s);if(!i[a]||!_i(a))i[s]=wi(t[s]*parseFloat(e)/t[n])}}}}}},e.Extension=Extension,e.ExtensionManager=class ExtensionManager{constructor(e){this.application=e}include(e){const t=this.application,i=t.extensions;if("string"==typeof e){const t=this.retrieve(e);if(!t)return false;e=t}const s=e.name,n=i.findIndex(e=>e.name===s);if(-1!==n)return i[n]=e,true;else{const{framework:s,dependencies:n}=e;if(s>0){const e=n.length;let i=0;while(i<e){const e=n[i++];if(e.preload)if(!this.retrieve(e.name)){const i=t.builtInExtensions[e.name];if(i)this.include(i)}}}if((0===s||T(s,t.framework))&&n.every(e=>!!this.retrieve(e.name)))return e.application=t,i.push(e),true}return false}exclude(e){const t=this.extensions,i=t.length;for(let s=0;s<i;++s)if(t[s]===e||"string"==typeof e&&this.retrieve(e))return t.splice(s,1),true;return false}retrieve(e,t){const i=this.extensions,s=i.length;let n=0;while(n<s){const t=i[n++];if(t.name===e)return t}return t&&this.application.builtInExtensions[e]||null}optionValue(e,t,i){var s;const n=null===(s=this.retrieve(e))||void 0===s?void 0:s.options;return C(n)?n[t]:i}optionValueAsObject(e,t,i=null){const s=this.optionValue(e,t);return C(s)?s:i}optionValueAsString(e,t,i=""){const s=this.optionValue(e,t);return"string"==typeof s?s:i}optionValueAsNumber(e,t,i=NaN){const s=this.optionValue(e,t);return"number"==typeof s?s:i}optionValueAsBoolean(e,t,i=false){const s=this.optionValue(e,t);return"boolean"==typeof s?s:i}get extensions(){return this.application.extensions}},e.ExtensionUI=ExtensionUI,e.File=File,e.FileUI=class FileUI extends File{get directory(){return this.resource.controllerSettings.directory}},e.LayoutUI=LayoutUI,e.Node=Node,e.NodeElement=class NodeElement extends Node{constructor(e,t,i){super(e,t,i),this._cached={},this.init()}},e.NodeGroupUI=class NodeGroupUI extends NodeUI{init(){var e;if(this.length>0)this.setBounds(),this.saveAsInitial();this.dir=(null===(e=this.actualParent)||void 0===e?void 0:e.dir)||""}setBounds(){if(this.length>0)return this._bounds=NodeUI.outerRegion(this),this._bounds}previousSiblings(e){let t=this;do{t=t.item(0)}while(null==t?void 0:t.nodeGroup);return(null==t?void 0:t.previousSiblings(e))||[]}nextSiblings(e){let t=this;do{t=t.item()}while(null==t?void 0:t.nodeGroup);return(null==t?void 0:t.nextSiblings(e))||[]}get inline(){if(this.hasAlign(64))return false;let e=this._cached.inline;if(void 0===e)e=this.every(e=>e.inline),this._cached.inline=e;return e}get inlineStatic(){if(this.hasAlign(64))return false;let e=this._cached.inlineStatic;if(void 0===e)e=this.every(e=>e.inlineStatic),this._cached.inlineStatic=e;return e}get inlineVertical(){if(this.hasAlign(64))return false;let e=this._cached.inlineVertical;if(void 0===e)e=this.every(e=>e.inlineVertical),this._cached.inlineVertical=e;return e}get inlineFlow(){if(this.hasAlign(64))return false;let e=this._cached.inlineFlow;if(void 0===e)e=this.every(e=>e.inlineFlow),this._cached.inlineFlow=e;return e}get inlineDimension(){if(this.hasAlign(64))return false;let e=this._cached.inlineDimension;if(void 0===e)e=this.every(e=>e.inlineDimension),this._cached.inlineDimension=e;return e}get block(){if(this.hasAlign(64))return true;let e=this._cached.block;if(void 0===e)e=this.some(e=>e.block),this._cached.block=e;return e}get blockStatic(){if(this.hasAlign(64))return true;let e=this._cached.blockStatic;if(void 0===e){const t=this.actualParent||this.documentParent;if(e=this.some(e=>e.blockStatic||e.percentWidth>0)||this.layoutVertical&&(t.hasWidth||this.some(e=>e.centerAligned||e.rightAligned))||t.percentWidth>0||t.blockStatic&&(t.layoutVertical||this.hasAlign(256)),e||0!==this.containerType)this._cached.blockStatic=e}return e}get blockDimension(){let e=this._cached.blockDimension;if(void 0===e)e=this.every(e=>e.blockDimension),this._cached.blockDimension=e;return e}get blockVertical(){let e=this._cached.blockVertical;if(void 0===e)e=this.every(e=>e.blockVertical),this._cached.blockVertical=e;return e}get pageFlow(){let e=this._cached.pageFlow;if(void 0===e){const t=this.css("position");e="absolute"!==t&&"fixed"!==t,this._cached.pageFlow=e}return e}set baseline(e){this._cached.baseline=e}get baseline(){let e=this._cached.baseline;if(void 0===e){if(this.some(e=>e.floating||e.hasAlign(512)))e=false;else{const t=this.css("verticalAlign");e=""===t?this.every(e=>e.baseline):"baseline"===t||ji(t,true)}this._cached.baseline=e}return e}get float(){if(!this.floating)return"none";else if(this.hasAlign(2048))return"right";else if(this.every(e=>"right"===e.float))return this.addAlign(2048),"right";return"left"}get floating(){return this.every(e=>e.floating||e.hasAlign(512))}get display(){return super.display||(this.some(e=>e.blockStatic)?"block":this.blockDimension?"inline-block":"inline")}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}set childIndex(e){super.childIndex=e}get childIndex(){let e=super.childIndex;if(e===1/0)this.each(t=>e=Math.min(t.childIndex,e)),super.childIndex=e;return e}set containerIndex(e){super.containerIndex=e}get containerIndex(){let e=super.containerIndex;if(e===1/0)this.each(t=>e=Math.min(t.containerIndex,e)),super.containerIndex=e;return e}get centerAligned(){let e=this._cached.centerAligned;if(void 0===e)e=this.every(e=>e.centerAligned),this._cached.centerAligned=e;return e}get rightAligned(){if(this.hasAlign(2048))return true;let e=this._cached.rightAligned;if(void 0===e)e=this.every(e=>e.rightAligned),this._cached.rightAligned=e;return e}get tagName(){return""}get plainText(){return false}get styleText(){return false}get multiline(){return false}get nodeGroup(){return true}get naturalChild(){return false}get naturalElement(){return false}get pseudoElement(){return false}get previousSibling(){return null}get nextSibling(){return null}get previousElementSibling(){return null}get nextElementSibling(){return null}},e.NodeList=NodeList,e.NodeUI=NodeUI,e.Resource=Resource,e.ResourceUI=ResourceUI,e.extensions=xa,e.lib=ya,Object.defineProperty(e,"__esModule",{value:true})}));
var android=function(){"use strict";const e=(e,t)=>e.element===t||e.elementId===t||e.controlId===t;class Application extends squared.base.ApplicationUI{constructor(){super(...arguments),this.systemName="android"}resolveTarget(t,i){if(i){for(const a of this.getProcessingCache(t))if(e(a,i))return a;for(const[a,n]of this.session.active.entries())if(a!==t)for(const t of n.cache)if(e(t,i))return t}}set viewModel(e){this._viewModel=e}get viewModel(){return this._viewModel}}var t;!function(e){e[e.RADIO=1]="RADIO",e[e.CHECKBOX=2]="CHECKBOX",e[e.SELECT=3]="SELECT",e[e.SVG=4]="SVG",e[e.IMAGE=5]="IMAGE",e[e.BUTTON=6]="BUTTON",e[e.PROGRESS=7]="PROGRESS",e[e.RANGE=8]="RANGE",e[e.EDIT=9]="EDIT",e[e.TEXT=10]="TEXT",e[e.INLINE=11]="INLINE",e[e.LINE=12]="LINE",e[e.SPACE=13]="SPACE",e[e.BLOCK=14]="BLOCK",e[e.FRAME=15]="FRAME",e[e.LINEAR=16]="LINEAR",e[e.GRID=17]="GRID",e[e.RELATIVE=18]="RELATIVE",e[e.CONSTRAINT=19]="CONSTRAINT",e[e.WEBVIEW=20]="WEBVIEW",e[e.VIDEOVIEW=21]="VIDEOVIEW",e[e.UNKNOWN=22]="UNKNOWN"}(t||(t={}));var i=Object.freeze({__proto__:null,get CONTAINER_NODE(){return t}});const a={EXTERNAL:"android.external",SUBSTITUTE:"android.substitute",DELEGATE_BACKGROUND:"android.delegate.background",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_POSITIVEX:"android.delegate.positive-x",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_DATA:"android.resource.data",RESOURCE_STYLES:"android.resource.styles"},n={RADIO:"RadioButton",CHECKBOX:"CheckBox",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",EDIT:"EditText",SVG:"ImageView",IMAGE:"ImageView",BUTTON:"Button",RANGE:"SeekBar",METER:"ProgressBar",PROGRESS:"ProgressBar",TEXT:"TextView",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",VIDEOVIEW:"VideoView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},o={VERTICAL_SCROLL:"androidx.core.widget.NestedScrollView",CONSTRAINT:"androidx.constraintlayout.widget.ConstraintLayout",GUIDELINE:"androidx.constraintlayout.widget.Guideline",BARRIER:"androidx.constraintlayout.widget.Barrier"},r={DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},s={DRAWER:"androidx.drawerlayout.widget.DrawerLayout",NAVIGATION_VIEW:"com.google.android.material.navigation.NavigationView",COORDINATOR:"androidx.coordinatorlayout.widget.CoordinatorLayout",APPBAR:"com.google.android.material.appbar.AppBarLayout",COLLAPSING_TOOLBAR:"com.google.android.material.appbar.CollapsingToolbarLayout",TOOLBAR:"androidx.appcompat.widget.Toolbar",FLOATING_ACTION_BUTTON:"com.google.android.material.floatingactionbutton.FloatingActionButton",BOTTOM_NAVIGATION:"com.google.android.material.bottomnavigation.BottomNavigationView"},l={PLAINTEXT:t.TEXT,HR:t.LINE,SVG:t.SVG,IMG:t.IMAGE,CANVAS:t.IMAGE,BUTTON:t.BUTTON,SELECT:t.SELECT,TEXTAREA:t.EDIT,METER:t.PROGRESS,PROGRESS:t.PROGRESS,AUDIO:t.VIDEOVIEW,VIDEO:t.VIDEOVIEW,IFRAME:t.WEBVIEW,INPUT_RANGE:t.RANGE,INPUT_TEXT:t.EDIT,INPUT_PASSWORD:t.EDIT,INPUT_NUMBER:t.EDIT,INPUT_EMAIL:t.EDIT,INPUT_SEARCH:t.EDIT,INPUT_URL:t.EDIT,INPUT_DATE:t.EDIT,INPUT_TEL:t.EDIT,INPUT_TIME:t.EDIT,INPUT_WEEK:t.EDIT,INPUT_MONTH:t.EDIT,INPUT_BUTTON:t.BUTTON,INPUT_FILE:t.BUTTON,INPUT_IMAGE:t.BUTTON,INPUT_COLOR:t.BUTTON,INPUT_SUBMIT:t.BUTTON,INPUT_RESET:t.BUTTON,INPUT_CHECKBOX:t.CHECKBOX,INPUT_RADIO:t.RADIO,INPUT_DATETIME_LOCAL:t.EDIT},c={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},d={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},h={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},f={left:"start",right:"end",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toLeftOf:"layout_toStartOf",layout_toRightOf:"layout_toEndOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},u=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var p=Object.freeze({__proto__:null,EXT_ANDROID:a,CONTAINER_ANDROID:n,CONTAINER_ANDROID_X:o,SUPPORT_ANDROID:r,SUPPORT_ANDROID_X:s,ELEMENT_ANDROID:l,LAYOUT_ANDROID:c,XMLNS_ANDROID:d,STRING_ANDROID:h,LOCALIZE_ANDROID:f,RESERVED_JAVA:u});const{findColorShade:g,parseColor:m}=squared.lib.color,{extractURL:b,getSrcSet:y}=squared.lib.css,{FILE:S}=squared.lib.regex,{fromLastIndexOf:T,hasMimeType:w,isNumber:E,isPlainObject:v,isString:x,resolvePath:A,safeNestedArray:_,spliceArray:R,trimString:I}=squared.lib.util,N=squared.base.ResourceUI.STORED;let C={};function k(e,t){var i;for(const a in e)if(v(e[a]))k(e,t);else{let n=null===(i=e[a])||void 0===i?void 0:i.toString();if(n)switch(a){case"text":if(!n.startsWith("@string/"))e[a]=Resource.addString(n,"",t);break;case"src":case"srcCompat":if(S.PROTOCOL.test(n))if(n=Resource.addImage({mdpi:n}),""!==n)e[a]="@drawable/"+n;break;default:{const t=m(n);if(t){const i=Resource.addColor(t);if(""!==i)e[a]="@color/"+i}}}}}class Resource extends squared.base.ResourceUI{constructor(e,t){super(),this.application=e,this.cache=t,N.styles=new Map,N.themes=new Map,N.dimens=new Map,N.drawables=new Map,N.animators=new Map;const i=this.controllerSettings.mimeType.image;if("*"!==i)this._imageFormat=R(i.slice(0),e=>"image/svg+xml"===e)}static formatOptions(e,t){for(const i in e){const a=e[i];if(v(a))k(a,t)}return e}static formatName(e){if(/^\d/.test(e))e="__"+e;return e.replace(/[^\w]+/g,"_")}static addTheme(e){const t=N.themes,{items:i,output:a}=e;let n="res/values",o="themes.xml",r=e.name,s="";if(a){if(a.path)n=I(a.path.trim().replace(/\\/g,"/"),"/");if(a.file)o=I(a.file.trim().replace(/\\/g,"/"),"/")}const l=n+"/"+o,c=t.get(l)||new Map;if(""===r||"."===r.charAt(0)){e:for(const e of t.values())for(const t of e.values())if(t.name){s=t.name;break e}if(""===s)return false}else s=r;r=s+("."===r.charAt(0)?r:""),e.name=r,Resource.formatOptions(i);const d=c.get(r);if(d){const e=d.items;for(const t in i)e[t]=i[t]}else c.set(r,e);return t.set(l,c),true}static addString(e,t,i){if(""!==e){const a=E(e);if(!a||i){const i=N.strings;for(const[t,a]of i.entries())if(a===e)return"@string/"+t;const n=I((t||(e.length>64?e.substring(0,64):e)).replace(/(\\[nt]|<\/?[a-z]+>|&#?[A-Za-z\d]{2,};)/g,"_").replace(/[^A-Za-z\d]+/g,"_"),"_").split(/_+/);if(n.length>1){if(n.length>4)n.length=4;t=n.join("_")}else t=n[0];if(!(t=t.toLowerCase()))t="__symbol"+ ++Resource.SYMBOL_COUNTER;else if(a||/^\d/.test(t)||u.includes(t))t="__"+t;if(i.has(t))t=Resource.generateId("string",t);return i.set(t,e),"@string/"+t}}return e}static addImage(e,t="",i){const a=e.mdpi;if(a){if(1===Object.keys(e).length){const e=C[a];if(e)return e}const n=T(a,"/"),o=this.getExtension(n),r=o.length;if(!i||0===r||w(i,o)){const i=Resource.insertStoredAsset("images",Resource.formatName(t+n.substring(0,n.length-(r>0?r+1:0))).toLowerCase(),e);return C[a]=i,i}}return""}static addColor(e,t){if("string"==typeof e)e=m(e,1,t);if(e&&(!e.transparent||t)){const t=e.opacity<1?e.valueAsARGB:e.value;let i=N.colors.get(t);if(i)return i;const a=g(e.value);if(a)return i=t===a.value?a.key:Resource.generateId("color",a.key),N.colors.set(t,i),i}return""}reset(){super.reset(),C={},Resource.UUID_COUNTER=0,Resource.SYMBOL_COUNTER=0}addImageSrc(e,t="",i){const a={};let n;if("string"==typeof e){if(n=b(e),n&&!n.startsWith("data:image/"))return this.addImageSet({mdpi:A(n)},t)}else{if(!i&&x(e.srcset))i=y(e,this._imageFormat);if(i)for(const e of i){const t=e.pixelRatio;if(t>0){const i=e.src;if(t<1)a.ldpi=i;else if(1===t){if(!n||e.actualWidth)n=i}else if(t<=1.5)a.hdpi=i;else if(t<=2)a.xhdpi=i;else if(t<=3)a.xxhdpi=i;else a.xxxhdpi=i}}if(!n)n=e.src}if(n){const e=this.application.resourceHandler.getRawData(n);if(e){if(e.base64){const i=e.filename;return this.application.resourceHandler.writeRawImage(e.mimeType,{filename:t+i,data:e.base64,encoding:"base64"}),i.substring(0,i.lastIndexOf("."))}return""}a.mdpi=n}return this.addImageSet(a,t)}addImageSet(e,t){return Resource.addImage(e,t,this._imageFormat)}writeRawImage(e,t){const i=super.writeRawImage(e,t);if(i&&this.userSettings.compressImages&&Resource.canCompressImage(t.filename||"",e))_(i,"compress").unshift({format:"png"});return i}get userSettings(){return this.application.userSettings}get randomUUID(){return"__"+(++Resource.UUID_COUNTER).toString().padStart(5,"0")}}function L(e,t,i,a=0){if(!i||i>=a)return e.attr=t,true;else return false}Resource.UUID_COUNTER=0,Resource.SYMBOL_COUNTER=0;const P={29:{android:{},assign:{}},28:{android:{allowAudioPlaybackCapture:false,enforceNavigationBarContrast:false,enforceStatusBarContrast:false,forceDarkAllowed:false,forceUriPermissions:false,foregroundServiceType:false,hasFragileUserData:false,identifier:false,inheritShowWhenLocked:false,interactiveUiTimeout:false,isLightTheme:false,isSplitRequired:false,minAspectRatio:false,nonInteractiveUiTimeout:false,opticalInsetBottom:false,opticalInsetLeft:false,opticalInsetRight:false,opticalInsetTop:false,packageType:false,requestLegacyExternalStorage:false,secureElementName:false,selectionDividerHeight:false,settingsSliceUri:false,shell:false,supportsMultipleDisplays:false,textLocale:false,useAppZygote:false,useEmbeddedDex:false,zygotePreloadName:false},assign:{}},27:{android:{accessibilityHeading:false,accessibilityPaneTitle:false,appComponentFactory:false,buttonCornerRadius:false,cantSaveState:false,dialogCornerRadius:false,fallbackLineSpacing:false,firstBaselineToTopHeight:false,fontVariationSettings:false,lastBaselineToBottomHeight:false,lineHeight:false,maxLongVersionCode:false,outlineAmbientShadowColor:false,outlineSpotShadowColor:false,screenReaderFocusable:false,textFontWeight:false,ttcIndex:false,versionCodeMajor:false,versionMajor:false,widgetFeatures:false,windowLayoutInDisplayCutoutMode:false},assign:{}},26:{android:{classLoader:false,navigationBarDividerColor:false,showWhenLocked:false,turnScreenOn:false,windowLightNavigationBar:false},assign:{}},25:{android:{fontWeight:false,justificationMode:false,layout_marginHorizontal:false,layout_marginVertical:false,paddingHorizontal:false,paddingVertical:false,tooltipText:false},assign:{}},24:{android:{colorSecondary:false,contextDescription:false,contextUri:false,roundIcon:false,shortcutDisabledMessage:false,shortcutId:false,shortcutLongLabel:false,shortcutShortLabel:false,showMetadataInPreview:false},assign:{}},23:{android:{backupInForeground:false,bitmap:false,buttonGravity:false,canControlMagnification:false,canPerformGestures:false,canRecord:false,collapseIcon:false,contentInsetEndWithActions:false,contentInsetStartWithNavigation:false,contextPopupMenuStyle:false,countDown:false,defaultHeight:false,defaultToDeviceProtectedStorage:false,defaultWidth:false,directBootAware:false,enableVrMode:false,endX:false,endY:false,externalService:false,fillType:false,forceHasOverlappingRendering:false,hotSpotX:false,hotSpotY:false,languageTag:false,level:false,listMenuViewStyle:false,maxButtonHeight:false,networkSecurityConfig:false,numberPickerStyle:false,offset:false,pointerIcon:false,popupEnterTransition:false,popupExitTransition:false,preferenceFragmentStyle:false,resizeableActivity:false,startX:false,startY:false,subMenuArrow:false,supportsLocalInteraction:false,supportsPictureInPicture:false,textAppearancePopupMenuHeader:false,tickMark:false,tickMarkTint:false,tickMarkTintMode:false,titleMargin:false,titleMarginBottom:false,titleMarginEnd:false,titleMarginStart:false,titleMarginTop:false,tunerCount:false,use32bitAbi:false,version:false,windowBackgroundFallback:false},assign:{}},22:{android:{allowUndo:false,autoVerify:false,breakStrategy:false,colorBackgroundFloating:false,contextClickable:false,drawableTint:false,drawableTintMode:false,end:e=>L(e,"right"),extractNativeLibs:false,fingerprintAuthDrawable:false,fraction:false,fullBackupContent:false,hyphenationFrequency:false,lockTaskMode:false,logoDescription:false,numbersInnerTextColor:false,scrollIndicators:false,showForAllUsers:false,start:e=>L(e,"left"),subtitleTextColor:false,supportsAssist:false,supportsLaunchVoiceAssistFromKeyguard:false,thumbPosition:false,titleTextColor:false,trackTint:false,trackTintMode:false,usesCleartextTraffic:false,windowLightStatusBar:false},assign:{}},21:{android:{accessibilityTraversalAfter:false,accessibilityTraversalBefore:false,collapseContentDescription:false,dialogPreferredPadding:false,resizeClip:false,revisionCode:false,searchHintIcon:false},assign:{}},20:{android:{actionBarPopupTheme:false,actionBarTheme:false,actionModeFindDrawable:false,actionModeShareDrawable:false,actionModeWebSearchDrawable:false,actionOverflowMenuStyle:false,amPmBackgroundColor:false,amPmTextColor:false,ambientShadowAlpha:false,autoRemoveFromRecents:false,backgroundTint:false,backgroundTintMode:false,banner:false,buttonBarNegativeButtonStyle:false,buttonBarNeutralButtonStyle:false,buttonBarPositiveButtonStyle:false,buttonTint:false,buttonTintMode:false,calendarTextColor:false,checkMarkTint:false,checkMarkTintMode:false,closeIcon:false,colorAccent:false,colorButtonNormal:false,colorControlActivated:false,colorControlHighlight:false,colorControlNormal:false,colorEdgeEffect:false,colorPrimary:false,colorPrimaryDark:false,commitIcon:false,contentAgeHint:false,contentInsetEnd:false,contentInsetLeft:false,contentInsetRight:false,contentInsetStart:false,controlX1:false,controlX2:false,controlY1:false,controlY2:false,country:false,datePickerDialogTheme:false,datePickerMode:false,dayOfWeekBackground:false,dayOfWeekTextAppearance:false,documentLaunchMode:false,elegantTextHeight:false,elevation:false,excludeClass:false,excludeId:false,excludeName:false,fastScrollStyle:false,fillAlpha:false,fillColor:false,fontFeatureSettings:false,foregroundTint:false,foregroundTintMode:false,fragmentAllowEnterTransitionOverlap:false,fragmentAllowReturnTransitionOverlap:false,fragmentEnterTransition:false,fragmentExitTransition:false,fragmentReenterTransition:false,fragmentReturnTransition:false,fragmentSharedElementEnterTransition:false,fragmentSharedElementReturnTransition:false,fromId:false,fullBackupOnly:false,goIcon:false,headerAmPmTextAppearance:false,headerDayOfMonthTextAppearance:false,headerMonthTextAppearance:false,headerTimeTextAppearance:false,headerYearTextAppearance:false,hideOnContentScroll:false,indeterminateTint:false,indeterminateTintMode:false,inset:false,isGame:false,launchTaskBehindSourceAnimation:false,launchTaskBehindTargetAnimation:false,layout_columnWeight:false,layout_rowWeight:false,letterSpacing:false,matchOrder:false,maxRecentsv:false,maximumAngle:false,minimumHorizontalAngle:false,minimumVerticalAngle:false,multiArch:false,navigationBarColor:false,navigationContentDescription:false,navigationIcon:false,nestedScrollingEnabled:false,numbersBackgroundColor:false,numbersSelectorColor:false,numbersTextColor:false,outlineProvider:false,overlapAnchor:false,paddingMode:false,pathData:false,patternPathData:false,persistableMode:false,popupElevation:false,popupTheme:false,progressBackgroundTint:false,progressBackgroundTintMode:false,progressTint:false,progressTintMode:false,propertyXName:false,propertyYName:false,queryBackground:false,recognitionService:false,relinquishTaskIdentity:false,reparent:false,reparentWithOverlay:false,restrictionType:false,resumeWhilePausing:false,reversible:false,searchIcon:false,searchViewStyle:false,secondaryProgressTint:false,secondaryProgressTintMode:false,selectableItemBackgroundBorderless:false,sessionService:false,setupActivity:false,showText:false,slideEdge:false,splitTrack:false,spotShadowAlpha:false,src:(e,t,i)=>{if(i.svgElement)e.obj="app",e.attr="srcCompat";return true},stackViewStyle:false,stateListAnimator:false,statusBarColor:false,strokeAlpha:false,strokeColor:false,strokeLineCap:false,strokeLineJoin:false,strokeMiterLimit:false,strokeWidth:false,submitBackground:false,subtitleTextAppearance:false,suggestionRowLayout:false,switchStyle:false,targetName:false,textAppearanceListItemSecondary:false,thumbTint:false,thumbTintMode:false,tileModeX:false,tileModeY:false,timePickerDialogTheme:false,timePickerMode:false,timePickerStyle:false,tintMode:false,titleTextAppearance:false,toId:false,toolbarStyle:false,touchscreenBlocksFocus:false,transitionGroup:false,transitionName:false,transitionVisibilityMode:false,translateX:false,translateY:false,translationZ:false,trimPathEnd:false,trimPathOffset:false,trimPathStart:false,viewportHeight:false,viewportWidth:false,voiceIcon:false,windowActivityTransitions:false,windowAllowEnterTransitionOverlap:false,windowAllowReturnTransitionOverlap:false,windowClipToOutline:false,windowContentTransitionManager:false,windowContentTransitions:false,windowDrawsSystemBarBackgrounds:false,windowElevation:false,windowEnterTransition:false,windowExitTransition:false,windowReenterTransition:false,windowReturnTransition:false,windowSharedElementEnterTransition:false,windowSharedElementExitTransition:false,windowSharedElementReenterTransition:false,windowSharedElementReturnTransition:false,windowSharedElementsUseOverlay:false,windowTransitionBackgroundFadeDuration:false,yearListItemTextAppearance:false,yearListSelectorColor:false},assign:{}},19:{android:{allowEmbedded:false,windowSwipeToDismiss:false},assign:{}},18:{android:{accessibilityLiveRegion:false,addPrintersActivity:false,advancedPrintOptionsActivity:false,apduServiceBanner:false,autoMirrored:false,category:false,fadingMode:false,fromScene:false,isAsciiCapable:false,keySet:false,requireDeviceUnlock:false,ssp:false,sspPattern:false,sspPrefix:false,startDelay:false,supportsSwitchingToNextInputMethod:false,targetId:false,toScene:false,transition:false,transitionOrdering:false,vendor:false,windowTranslucentNavigation:false,windowTranslucentStatus:false},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(e,t)=>t<26,canRequestFilterKeyEvents:false,canRequestTouchExplorationMode:false,childIndicatorEnd:false,childIndicatorStart:false,indicatorEnd:false,indicatorStart:false,layoutMode:false,mipMap:false,mirrorForRtl:false,requiredAccountType:false,requiredForAllUsers:false,restrictedAccountType:false,windowOverscan:false},assign:{}},16:{android:{checkedTextViewStyle:false,format12Hour:false,format24Hour:false,initialKeyguardLayout:false,labelFor:false,layoutDirection:false,layout_alignEnd:e=>L(e,"layout_alignRight"),layout_alignParentEnd:e=>L(e,"layout_alignParentRight"),layout_alignParentStart:e=>L(e,"layout_alignParentLeft"),layout_alignStart:e=>L(e,"layout_alignLeft"),layout_marginEnd:e=>L(e,"layout_marginRight"),layout_marginStart:e=>L(e,"layout_marginLeft"),layout_toEndOf:e=>L(e,"layout_toRightOf"),layout_toStartOf:e=>L(e,"layout_toLeftOf"),listPreferredItemPaddingEnd:e=>L(e,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:e=>L(e,"listPreferredItemPaddingLeft"),paddingEnd:e=>L(e,h.PADDING_RIGHT),paddingStart:e=>L(e,h.PADDING_LEFT),permissionFlags:false,permissionGroupFlags:false,presentationTheme:false,showOnLockScreen:false,singleUser:false,subtypeId:false,supportsRtl:false,textAlignment:false,textDirection:false,timeZone:false,widgetCategory:false},assign:{}},15:{android:{fontFamily:false,importantForAccessibility:false,isolatedProcess:false,keyboardLayout:false,mediaRouteButtonStyle:false,mediaRouteTypes:false,parentActivityName:false},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},O={android:{amPmBackgroundColor:(e,t)=>L(e,"headerBackground",t,23),amPmTextColor:(e,t)=>L(e,"headerTextColor",t,23),animationResolution:(e,t)=>t<16,canRequestEnhancedWebAccessibility:(e,t)=>t<26,dayOfWeekBackground:(e,t)=>t<23,dayOfWeekTextAppearance:(e,t)=>t<23,directionDescriptions:(e,t)=>t<23,headerAmPmTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),headerDayOfMonthTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),headerMonthTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),headerTimeTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),headerYearTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),showOnLockScreen:(e,t)=>L(e,"showForAllUsers",t,23),targetDescriptions:(e,t)=>t<23,yearListItemTextAppearance:(e,t)=>L(e,"yearListTextColor",t,23),yearListSelectorColor:(e,t)=>t<23}};var W=Object.freeze({__proto__:null,API_ANDROID:P,DEPRECATED_ANDROID:O,getValue:function(e,t,i,a){var n,o;for(const r of[P[e],P[0]]){const e=null===(o=null===(n=r.assign[t])||void 0===n?void 0:n[i])||void 0===o?void 0:o[a];if(e)return e}return""}});const{truncate:D}=squared.lib.math,{capitalize:B,isPlainObject:M}=squared.lib.util,{BOX_STANDARD:H}=squared.base.lib.enumeration;function G(e,t,i=3){if(0===e)return 0;else if(0===t)return 1;return parseFloat(D(Math.max(e/(e+t),0),i))}function X(e,t,i=3){if("string"==typeof e)e=parseFloat(e);return!t?Math.round(e)+"dp":D(e,i)+"sp"}function V(e){return e.replace(/^@\+?id\//,"")}function z(e){switch(e){case"left":case"start":case"right":case"end":case"center_horizontal":return true}return false}function F(e){switch(e){case"top":case"bottom":case"center_vertical":return true}return false}function U(e,t){let i;for(const a in e)if(a.startsWith(t)){if(!i)i={};i[B(a.substring(t.length),false)]=e[a]}return i}function q(e,t,i){if(i>0){if(e.documentBody)switch(t){case 32:if(0===e.getBox(2)[0])i-=e.marginTop;break;case 64:i-=e.marginRight;break;case 128:if(0===e.getBox(8)[0])i-=e.marginBottom;break;case 256:i-=e.marginLeft;break}if(0===e.getBox(t)[0])switch(t){case 32:i+=e.borderTopWidth-e.paddingTop;break;case 64:i+=e.borderRightWidth-e.paddingRight;break;case 128:i+=e.borderBottomWidth-e.paddingBottom;break;case 256:i+=e.borderLeftWidth-e.paddingLeft;break}return Math.max(i,0)}else if(i<0){switch(t){case 32:i+=e.marginTop;break;case 64:i+=e.marginRight;break;case 128:i+=e.marginBottom;break;case 256:i+=e.marginLeft;break}return i}return 0}function Y(e){const t={android:{}};if(e){if(e.android)Object.assign(t.android,e.android);if(e.app){if(!t.app)t.app={};Object.assign(t.app,e.app)}}return t}function j(e){const t={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(M(e))for(const i in t)if(typeof e[i]==typeof t[i])t[i]=e[i];return t}function K(e,t,i){return t&&i>=17&&f[e]||e}function $(e){return d[e]?`xmlns:${e}="${d[e]}"`:""}function Z(e){let t="";for(const i in d)if(e.includes(i+":"))t+="\n\t"+$(i);return t}var J=Object.freeze({__proto__:null,convertLength:X,getDocumentId:V,isHorizontalAlign:z,isVerticalAlign:F,getDataSet:U,getHorizontalBias:function(e){const t=e.documentParent.box;return G(Math.max(0,e.actualRect("left","bounds")-t.left),Math.max(0,t.right-e.actualRect("right","bounds")),e.localSettings.floatPrecision)},getVerticalBias:function(e){const t=e.documentParent.box;return G(Math.max(0,e.actualRect("top","bounds")-t.top),Math.max(0,t.bottom-e.actualRect("bottom","bounds")),e.localSettings.floatPrecision)},adjustAbsolutePaddingOffset:q,createViewAttribute:Y,createStyleAttribute:j,localizeString:K,getXmlNs:$,getRootNs:Z});const{CSS_PROPERTIES:Q,CSS_UNIT:ee,formatPX:te,getBackgroundPosition:ie,isLength:ae,isPercent:ne,newBoxModel:oe,parseTransform:re}=squared.lib.css,{createElement:se,getNamedItem:le}=squared.lib.dom,{clamp:ce,truncate:de}=squared.lib.math,{actualTextRangeRect:he}=squared.lib.session,{capitalize:fe,convertFloat:ue,convertInt:pe,convertWord:ge,fromLastIndexOf:me,hasKeys:be,isNumber:ye,isPlainObject:Se,isString:Te,replaceMap:we}=squared.lib.util,{EXT_NAME:Ee}=squared.base.lib.constant,{BOX_STANDARD:ve,NODE_ALIGNMENT:xe,NODE_PROCEDURE:Ae}=squared.base.lib.enumeration,_e=squared.base.ResourceUI,Re=Q.margin.value,Ie=Q.padding.value,{constraint:Ne,relative:Ce,relativeParent:ke}=c;function Le(e,t){switch(e){case"left":case"start":return!t?e:"";case"center":return"center_horizontal";case"justify":case"initial":case"inherit":return""}return e}function Pe(e,t){const i=t.indexOf(e+"_horizontal"),a=t.indexOf(e+"_vertical");if(-1!==i&&-1!==a){if(t.splice(Math.min(i,a),1),t.splice(Math.max(i,a)-1,1),!t.includes(e))t.push(e);return true}else if(t.includes(e)){if(-1!==i)return t.splice(i,1),true;if(-1!==a)return t.splice(a,1),true}return false}function Oe(e,t){if(t.horizontal&&(!e.blockWidth||e.hasWidth||e.hasPX("maxWidth")||e.innerMostWrapped.has("width",{type:4,not:"100%"}))){const i=(e.blockWidth||!e.pageFlow)&&!e.outerWrapper?"gravity":"layout_gravity";return e.mergeGravity(i,t.leftRight?"center_horizontal":t.left?"right":"left"),true}return false}function We(e,t,i){const a=Me(e,t);if(e.api>=28)e.android("lineHeight",te(t),i);else if(a>0)e.android("lineSpacingExtra",te(a),i);else return;const n=Math.round(a);if(n>0)if(e.modifyBox(e.inline?2:32,n),!(e.block&&!e.floating))e.modifyBox(e.inline?8:128,Math.floor(a))}function De(e,t,i,a,n){const o=e.cssInitial("lineHeight");if(!(e.imageOrSvgElement||e.renderChildren.length>0||0===e.actualHeight||"initial"===o))if(e.multiline)We(e,t,false);else{const r=e.height;if(t===r)e.mergeGravity("gravity","center_vertical",false);else{const s=(s,l=false)=>{let c=Math.round(s);if(c>0){const d=(i||r>t)&&(e.styleText||l)&&!e.inline&&!(e.inputElement&&!ae(o,true));if(a)if(d){if(c>0)e.modifyBox(32,c)}else if(i||!e.baselineAltered)if(c-=e.paddingTop,c>0)e.modifyBox(2,c);if(n)if(s=Math.floor(s),d){if(s>0)e.modifyBox(128,s)}else if((s-=e.paddingBottom)>0)e.modifyBox(8,s)}};if(e.textElement)s(Me(e,t));else if(r>0){const i=t/2-e.paddingTop;if(i>0)e.modifyBox(32,i)}else if(e.inputElement){const i=se("div",{parent:document.body,style:Object.assign(Object.assign({},e.textStyle),{visibility:"hidden"})});i.innerText="AgjpyZ";const a=he(i).height;document.body.removeChild(i);let n=1;switch(e.tagName){case"SELECT":n=e.toElementInt("size",1);break;case"TEXTAREA":n=e.toElementInt("rows",1);break}s((t-a*Math.max(n,1))/2,true)}else s((t-e.bounds.height)/2)}}}function Be(e,t){if("0px"===t){const t=e.renderParent;return!!t&&(t.layoutConstraint||t.layoutGrid)}return false}function Me(e,t){let i=NaN;if(e.styleText){const t=e.cssTryAll({display:"inline-block",height:"auto","max-height":"none","min-height":"auto","line-height":"normal","white-space":"nowrap"});if(t)i=he(e.element).height,e.cssFinally(t)}else if(e.plainText){const t=e.bounds;i=t.height/(t.numberOfLines||1)}return(t-(!isNaN(i)?i:e.boundingClientRect.height))/2}function He(e,t){if(!e.hasPX(t?"width":"height",{percent:false})){const i=e.cssInitial(t?"minWidth":"minHeight",{modified:true});if(ae(i,true)&&parseFloat(i)>0&&"100%"!==i)if(t){if(Ue(e))if(e.setLayoutWidth("0px",false),e.flexibleWidth)e.app("layout_constraintWidth_min",te(e.parseWidth(i)+e.contentBoxWidth)),e.css("minWidth","auto")}else if(qe(e))if(e.setLayoutHeight("0px",false),e.flexibleHeight)e.app("layout_constraintHeight_min",te(e.parseHeight(i)+e.contentBoxHeight)),e.css(t?"minWidth":"minHeight","auto")}if(t||!e.support.maxDimension){const i=e.cssInitial(t?"maxWidth":"maxHeight",{modified:true});if(ae(i,true)&&"100%"!==i)if(t){if(Ue(e)){const t=e.parseWidth(i);if(t>e.width||e.percentWidth>0)e.setLayoutWidth("0px"),e.app("layout_constraintWidth_max",te(t+(e.contentBox?e.contentBoxWidth:0))),e.css("maxWidth","auto")}}else if(qe(e)){const t=e.parseHeight(i);if(t>e.height||e.percentHeight>0)e.setLayoutHeight("0px"),e.app("layout_constraintHeight_max",te(t+(e.contentBox?e.contentBoxHeight:0))),e.css("maxHeight","auto")}}}function Ge(e,t,i,a){if(t<1&&!isNaN(a)&&e.pageFlow){const n=e.actualParent||e.documentParent;let o,r;if(i){const t=n.box.width;o=!n.gridElement?e.contentBoxWidth/t:0,r=(Math.max(0===e.getBox(16)[0]?e.marginLeft:0,0)+(0===e.getBox(4)[0]?e.marginRight:0))/t}else{const t=n.box.height;o=!n.gridElement?e.contentBoxHeight/t:0,r=(Math.max(0===e.getBox(2)[0]?e.marginTop:0,0)+(0===e.getBox(8)[0]?e.marginBottom:0))/t}if(1===a&&t+r>=1)t=1-r;else{if(o>0)if(a<o)o=Math.max(a,0),a=0;else a-=o;if(0===a)o-=r;else a=Math.max(a-r,0);t=Math.min(t+o,1)}}let n=e.outerMostWrapper;if(n!==e&&n.css(i?"width":"height")!==e.css(i?"width":"height"))n=e;if(1===t&&!e.hasPX(i?"maxWidth":"maxHeight")){if(Xe(n,i?it(n,n.renderParent):"match_parent",i,false),e!==n)Xe(e,i?it(e,e.renderParent):"match_parent",i,false)}else if(n.app(i?"layout_constraintWidth_percent":"layout_constraintHeight_percent",de(t,e.localSettings.floatPrecision)),Xe(n,"0px",i,false),e!==n)Xe(e,"0px",i,false);return a}function Xe(e,t,i,a){if(i)e.setLayoutWidth(t,a);else e.setLayoutHeight(t,a)}function Ve(e,t,i){const a=t?e.percentWidth:e.percentHeight;return a>0?Ge(e,a,t,i):i}function ze(e,t=1){const i=e.percentWidth;if(i>0)if(e.renderParent.hasPX("width",{percent:false})&&!(e.actualParent||e.documentParent).layoutElement)if(i<1)e.setLayoutWidth(te(e.actualWidth));else e.setLayoutWidth(it(e,e.renderParent),false);else if(!e.inputElement)return Ve(e,true,t);return t}function Fe(e,t=1){const i=e.percentHeight;if(i>0)if(e.renderParent.hasPX("height",{percent:false})&&!(e.actualParent||e.documentParent).layoutElement)if(i<1)e.setLayoutHeight(te(e.actualHeight));else e.setLayoutHeight("match_parent",false);else if(!e.inputElement)return Ve(e,false,t);return t}function Ue(e){if(e.documentRoot&&(e.hasWidth||e.blockStatic||e.blockWidth))return true;let i=e.renderParent,a=0;while(i){if(!i.inlineWidth&&(i.hasWidth||parseInt(i.layoutWidth)>0||i.of(t.CONSTRAINT,64)||i.documentRoot&&(i.blockWidth||i.blockStatic)))return true;else if(i.flexibleWidth){if(++a>1)return false}else if(i.inlineWidth||i.naturalElement&&i.inlineVertical)return false;i=i.renderParent}return false}function qe(e){var t;if(e.documentRoot&&e.hasHeight)return true;const i=e.renderParent;return!!i&&(i.hasHeight||i.layoutConstraint&&i.blockHeight)||true===(null===(t=e.absoluteParent)||void 0===t?void 0:t.hasHeight)}function Ye(e,t){const i=e.anchorChain("left").shift(),a=e.anchorChain("right").shift(),n=e.anchorChain("top").shift(),o=e.anchorChain("bottom").shift();if(i&&a)i.anchor("rightLeft",a.documentId,true),a.anchor("leftRight",i.documentId,true);else if(i){if(i.anchorDelete("rightLeft"),e.alignParent("right"))i.anchor("right",t),je(e,i)}else if(a)if(a.anchorDelete("leftRight"),e.alignParent("left"))a.anchor("left",t),je(e,a);if(n&&o)n.anchor("bottomTop",o.documentId,true),o.anchor("topBottom",n.documentId,true);else if(n){if(n.anchorDelete("bottomTop"),e.alignParent("bottom"))n.anchor("bottom",t),Ke(e,n)}else if(o)if(o.anchorDelete("topBottom"),e.alignParent("top"))o.anchor("top",t),Ke(e,o)}function je(e,t){t.app("layout_constraintHorizontal_bias",e.app("layout_constraintHorizontal_bias")),t.app("layout_constraintHorizontal_chainStyle",e.app("layout_constraintHorizontal_chainStyle"))}function Ke(e,t){t.app("layout_constraintVertical_bias",e.app("layout_constraintVertical_bias")),t.app("layout_constraintVertical_chainStyle",e.app("layout_constraintVertical_chainStyle"))}function $e(e,t){t.anchorClear();const i=e.unsafe("namespaces");for(const e in i){const a=i[e];for(const i in a){switch(i){case"layout_width":case"layout_height":continue;default:if(i.includes("margin"))continue;break}if(i.startsWith("layout_"))t.attr(e,i,a[i],true)}}}function Ze(e,t){const i=tt(e,t);if(i&&i.length>1){let a=false;if(Pe("center",i))a=true;if(Pe("fill",i))a=true;if(a)e.android(t,i.join("|"))}}function Je(e,t,i,a,n){if(i>0)return e.app(t?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",de(i,e.localSettings.floatPrecision)),true;else if(a){if(n)if(n>1)a/=n;else if(n>0)a*=1-n;e.app(t?"layout_constraintWidth_min":"layout_constraintHeight_min",te(a))}return false}function Qe(e,t,i){if(t)for(const a in t){const n=t[a];for(const t in n)e.attr(a,t,n[t],i)}}function et(e,i,a,o,r){let s=0,l=0,c=0,d=0;for(let t=0;t<4;++t){const n=i[t];let h=0===a[n]?e[n]:0;if(0!==h)if(r)switch(t){case 1:if(e.inline){const t=e.documentParent.box.right,i=e.bounds.right;if(Math.floor(i)>t){if(!e.onlyChild&&!e.alignParent("left"))e.setSingleLine(true);continue}else if(i+h>t)h=ce(t-i,0,h)}break;case 2:if(h<0&&e.pageFlow&&!e.blockStatic)h=0;break}else switch(t){case 0:h=e.actualPadding(n,h);break;case 2:if(e.hasPX("height",{percent:false,initial:true})&&(!e.layoutElement&&(e.layoutVertical||e.layoutFrame)||!e.pageFlow)||e.documentParent.gridElement&&e.hasPX("height",{percent:false}))continue;else if(e.floatContainer){let t=-1/0;const i=e.naturalChildren,a=i.length;let n=0;while(n<a){const e=i[n++];if(e.floating)t=Math.max(e.bounds.bottom,t)}h=ce(e.bounds.bottom-t,0,h)}else h=e.actualPadding(n,h);break}if(o)h+=o[n];switch(t){case 0:s=h;break;case 1:l=h;break;case 2:c=h;break;case 3:d=h;break}}if(r){if(e.floating){let t=e.renderParent.renderChildren.find(e=>!e.floating);if(t){const i=Math.floor(e.bounds.top);let a;while(Math.floor(t.bounds.top)===i){a=t;const e=t.innerWrapped;if(e)t=e;else break}if(a){const[e,t]=a.getBox(2);s+=(0===e?a.marginTop:0)+t}}}if(e.positionStatic&&!e.blockWidth&&(d<0||l<0))switch(e.cssAscend("textAlign")){case"center":if(d<l)l+=Math.abs(d),l/=2,d=0;else d+=Math.abs(l),d/=2,l=0;break;case"right":case"end":if(d<0)d=0;break}if("PICTURE"===e.tagName)c+=4,l+=4;switch(e.controlName){case n.RADIO:case n.CHECKBOX:s=Math.max(s-4,0),c=Math.max(c-4,0);break;case n.SELECT:s=Math.max(s-2,0),c=Math.max(c-2,0);break}if(s<0)if(!e.pageFlow){if(c>=0&&e.leftTopAxis&&(e.hasPX("top")||!e.hasPX("bottom"))&&e.translateY(s))s=0}else if(e.blockDimension&&!e.inputElement&&e.translateY(s)){for(const t of e.anchorChain("bottom"))t.translateY(s);s=0}if(c<0)if(!e.pageFlow){if(s>=0&&e.leftTopAxis&&e.hasPX("bottom")&&!e.hasPX("top")&&e.translateY(-c))c=0}else if(e.blockDimension&&!e.inputElement&&e.renderParent.layoutConstraint){for(const t of e.anchorChain("bottom"))t.translateY(-c);c=0}if(d<0)if(!e.pageFlow){if(l>=0&&e.leftTopAxis&&(e.hasPX("left")||!e.hasPX("right"))&&e.translateX(d))d=0}else if("right"===e.float){d=Math.min(-d,-e.bounds.width);for(const t of e.anchorChain("left"))t.translateX(-d);d=0}else if(e.blockDimension&&e.translateX(d)){for(const t of e.anchorChain("right"))t.translateX(d);d=0}if(l<0)if(!e.pageFlow){if(d>=0&&e.leftTopAxis&&e.hasPX("right")&&!e.hasPX("left")&&e.translateX(-l))l=0}else if(e.rightAligned){if(e.translateX(-l))l=0}else if(e.blockDimension&&e.renderParent.layoutConstraint){for(const t of e.anchorChain("right"))t.translateX(l);l=0}}else if(e.visibleStyle.borderWidth&&!e.is(t.LINE))s+=e.borderTopWidth,c+=e.borderBottomWidth,l+=e.borderRightWidth,d+=e.borderLeftWidth;if(0!==s||0!==d||0!==c||0!==l){let t=0,i=0;if((!r||!e.renderParent.layoutGrid)&&e.api>=26)if(s===l&&l===c&&c===d)return void e.android(r?h.MARGIN:h.PADDING,te(s));else{if(d===l)t=d;if(s===c)i=s}if(0!==t)e.android(r?h.MARGIN_HORIZONTAL:h.PADDING_HORIZONTAL,te(t));else{if(0!==d)e.android(e.localizeString(r?h.MARGIN_LEFT:h.PADDING_LEFT),te(d));if(0!==l)e.android(e.localizeString(r?h.MARGIN_RIGHT:h.PADDING_RIGHT),te(l))}if(0!==i)e.android(r?h.MARGIN_VERTICAL:h.PADDING_VERTICAL,te(i));else{if(0!==s)e.android(r?h.MARGIN_TOP:h.PADDING_TOP,te(s));if(0!==c)e.android(r?h.MARGIN_BOTTOM:h.PADDING_BOTTOM,te(c))}}}function tt(e,t,i){const a=e.android(t);if(""!==a){const e=a.split("|");if(i){if(e.includes(i))return;e.push(i)}return e}else if(i)e.android(t,i)}const it=(e,t)=>t.layoutConstraint&&!t.flexibleWidth&&(!t.inlineWidth||e.renderChildren.length>0)&&!e.onlyChild&&!(t.documentRoot&&e.blockStatic)&&(e.alignParent("left")&&e.alignParent("right")&&!e.textElement&&!e.inputElement&&!e.controlElement||e.hasPX("minWidth")&&(t.inlineWidth||""===t.layoutWidth&&!t.blockStatic&&!t.hasPX("width"))||e.alignSibling("leftRight")||e.alignSibling("rightLeft"))?"0px":"match_parent",at=e=>0===e.bounds.width&&0===e.contentBoxWidth&&e.textEmpty&&0===e.marginLeft&&0===e.marginRight&&!e.visibleStyle.background,nt=e=>0===e.bounds.height&&0===e.contentBoxHeight&&(0===e.marginTop&&0===e.marginBottom||"hidden"===e.css("overflow")),ot=e=>0===e.renderChildren.length&&!e.multiline&&!isNaN(e.lineHeight)&&!e.has("lineHeight");var rt=e=>{var i;return(i=class View extends e{constructor(e=0,t,i){super(e,t,i),this.api=29,this.renderChildren=[],this.constraint={horizontal:false,vertical:false,current:{}},this._namespaces={android:{},app:{}},this._cached={},this._containerType=0,this._controlName="",this._boxAdjustment=oe(),this._boxReset=oe(),this._positioned=false,this.init()}static setConstraintDimension(e,t=NaN){if(t=ze(e,t),Fe(e,1),!e.inputElement)He(e,true),He(e,false);return t}static setFlexDimension(e,t,i=NaN){const{grow:a,basis:n,shrink:o}=e.flexbox,r="width"===t;if(ae(n))Je(e,r,a,e.parseUnit(n,{dimension:t}),o),Xe(e,"0px",r,true);else if("0%"!==n&&ne(n)){Je(e,r,a);const t=parseFloat(n)/100;if(r)Ge(e,t,true,NaN);else Ge(e,t,false,NaN)}else{let n=false;if(e.hasFlex(r?"row":"column"))if(n=Je(e,r,a,e.hasPX(t,{percent:false})?r?e.actualWidth:e.actualHeight:0,o),n)Xe(e,"0px",r,true);if(!n)if(r)i=ze(e,i);else Fe(e,0)}if(o>1)e.app(r?"layout_constrainedWidth":"layout_constrainedHeight","true");if(r)Fe(e);if(!e.inputElement&&!e.imageOrSvgElement)He(e,true),He(e,false);return i}static availablePercent(e,t,i){const a="width"===t;let n=1,o=false;const r=e.length;let s=0;while(s<r){let r=e[s++];if(r=r.innerMostWrapped,r.pageFlow){if(o=true,r.hasPX(t,{initial:true})){const e=r.cssInitial(t);if(ne(e)){n-=parseFloat(e)/100;continue}else if(ae(e)){if(a)n-=Math.max(r.actualWidth+r.marginLeft+r.marginRight,0)/i;else n-=Math.max(r.actualHeight+r.marginTop+r.marginBottom,0)/i;continue}}n-=r.linear[t]/i}}return o?Math.max(0,n):1}static getControlName(e,i=29){const a=t[e];return i>=29&&o[a]||n[a]}setControlType(e,i){if(this.controlName=e,i)this._containerType=i;else if(0===this._containerType)this._containerType=t.UNKNOWN}setExclusions(){if(super.setExclusions(),!this.hasProcedure(Ae.LOCALIZATION))this.localSettings.supportRTL=false}setLayout(){if(this.plainText)return this.setLayoutWidth("wrap_content",false),void this.setLayoutHeight("wrap_content",false);switch(this.css("visibility")){case"visible":break;case"hidden":this.hide({hidden:true});break;case"collapse":this.hide({collapse:true});break}const e=this.actualParent||this.documentParent,i=this.renderParent,a=!i.inlineWidth,n=!i.inlineHeight,o=this.support.maxDimension;let{layoutWidth:r,layoutHeight:s}=this;if(""===r){if(this.hasPX("width")&&(!this.inlineStatic||""===this.cssInitial("width"))){const t=this.css("width");let n=-1;if(ne(t)){const s=()=>"100%"===t&&a&&(o||!this.hasPX("maxWidth"));if(this.inputElement)if(s())r=it(this,i);else n=this.actualWidth;else if(i.layoutConstraint)if(a)if(s())r=it(this,i);else View.setConstraintDimension(this,1),r=this.layoutWidth;else n=this.actualWidth;else if(i.layoutGrid)r="0px",this.android("layout_columnWeight",de(parseFloat(t)/100,this.localSettings.floatPrecision));else if(this.imageElement)if(s())r=it(this,i);else n=this.bounds.width;else if("100%"===t){if(!o&&this.hasPX("maxWidth")){const t=this.css("maxWidth"),o=this.parseWidth(t),s=this.absoluteParent||e;if("100%"===t)if(a&&Math.ceil(o)>=s.box.width)r=it(this,i);else n=Math.min(this.actualWidth,o);else if(o>0)if(this.blockDimension)n=Math.min(this.actualWidth,o);else r=Math.floor(o)<s.box.width?"wrap_content":it(this,i)}if(""===r&&(this.documentRoot||a))r=it(this,i)}else n=this.actualWidth}else if(ae(t))n=this.actualWidth;if(-1!==n)r=te(n)}else if(this.length>0)switch(this.cssInitial("width")){case"max-content":case"fit-content":this.renderEach(e=>{if(!e.hasPX("width")&&!e.hasPX("maxWidth"))e.setLayoutWidth("wrap_content")}),r="wrap_content";break;case"min-content":{const e=[];let t=0;this.renderEach(i=>{if(!i.textElement||i.hasPX("width"))t=Math.max(i.actualWidth,t);else if(t=Math.max(i.width,t),i.support.maxDimension)e.push(i)});const i=e.length;if(i>0&&t>0){const a=te(t);let n=0;while(n<i){const t=e[n++];if(!t.hasPX("maxWidth"))t.css("maxWidth",a)}}r="wrap_content";break}}if(""===r)if(this.textElement&&this.textEmpty&&this.inlineFlow&&!this.visibleStyle.backgroundImage)r=te(this.actualWidth);else if(this.imageElement&&this.hasHeight)r="wrap_content";else if(a&&(this.nodeGroup&&(i.layoutFrame&&(this.hasAlign(512)||this.hasAlign(2048))||this.hasAlign(32768))||e.flexElement&&this.some(e=>e.multiline,{cascade:true})||this.layoutGrid&&this.some(e=>e.flexibleWidth)))r=it(this,i);else if(!this.imageElement&&!this.inputElement&&!this.controlElement){const t=t=>{var a;if(e.pageFlow||!this.some(e=>e.textElement)){if(this.styleText){if((null===(a=this.textBounds)||void 0===a?void 0:a.numberOfLines)>1){if(t)r="match_parent";return}else if(this.cssTry("display","inline-block")){const t=Math.ceil(he(this.element).width);return r=t>=e.box.width?"wrap_content":"match_parent",void this.cssFinally("display")}}r=it(this,i)}};if(i.layoutGrid){if(this.blockStatic&&"1"===i.android("columnCount"))r=it(this,i)}else if(this.blockStatic){if(this.documentRoot)r="match_parent";else if(!e.layoutElement)if(this.nodeGroup||i.hasWidth||this.hasAlign(64)||this.rootElement)r=it(this,i);else t(true);else if(a&&(e.gridElement&&!i.layoutElement||e.flexElement&&this.layoutVertical&&this.some(e=>e.textElement&&e.multiline)))r=it(this,i)}else if(this.floating&&this.block&&!this.rightAligned&&this.alignParent("left")&&this.alignParent("right"))r="match_parent";else if(this.naturalElement&&this.inlineStatic&&!this.blockDimension&&this.some(e=>e.naturalElement&&e.blockStatic)&&!e.layoutElement&&(i.layoutVertical||!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft")))t(false)}this.setLayoutWidth(r||"wrap_content")}if(""===s){if(this.hasPX("height")&&(!this.inlineStatic||""===this.cssInitial("height"))){const a=this.css("height");let r=-1;if(ne(a)){if(this.inputElement)r=this.bounds.height;else if(this.imageElement)if("100%"===a&&n)s="match_parent";else r=this.bounds.height;else if("100%"===a){if(!o){const t=this.css("maxHeight"),i=this.parseHeight(t),a=this.absoluteParent||e;if("100%"===t)if(n||Math.ceil(i)>=a.box.height)s="match_parent";else r=Math.min(this.actualHeight,i);else if(i>0)if(this.blockDimension)r=Math.min(this.actualHeight,i);else s=Math.floor(i)<a.box.height?"wrap_content":"match_parent";else if(n)s="match_parent"}if(""===s)if(!this.pageFlow){if("fixed"===this.css("position"))s="match_parent";else if(i.layoutConstraint&&(this.hasPX("top")||this.hasPX("bottom")))s="0px"}else if(this.documentRoot||n&&this.onlyChild)s="match_parent"}if(""===s&&this.hasHeight)r=this.actualHeight}else if(ae(a))r=this.actualHeight;if(-1!==r){if(this.is(t.LINE)&&"HR"!==this.tagName&&this.hasPX("height",{initial:true}))r+=this.borderTopWidth+this.borderBottomWidth;if(this.styleText&&this.multiline&&!this.overflowY&&!this.hasPX("minHeight")&&!e.layoutElement)this.android("minHeight",te(r)),s="wrap_content";else s=te(r)}}if(""===s)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage){if(i.layoutConstraint&&!this.floating&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||e).box.height)s="0px",this.anchor("bottom","parent");else if(this.naturalChild&&!this.pseudoElement)s=te(this.actualHeight)}else if(this.imageElement&&this.hasWidth)s="wrap_content";else if("table-cell"===this.display&&e.hasHeight)s="match_parent";this.setLayoutHeight(s||"wrap_content")}else if("0px"===s&&i.inlineHeight&&!(this.alignParent("top")&&this.alignParent("bottom"))&&""===i.android("minHeight")&&!e.layoutElement&&e===this.absoluteParent)this.setLayoutHeight("wrap_content");if(this.hasPX("minWidth")&&(!this.hasFlex("row")||e.flexElement&&!this.flexibleWidth)){const e=this.css("minWidth");if("100%"===e&&this.inlineWidth)this.setLayoutWidth(it(this,i));else this.android("minWidth",te(this.parseWidth(e)+(this.contentBox?this.contentBoxWidth:0)),false)}if(this.hasPX("minHeight")&&"table-cell"!==this.display&&(!this.hasFlex("column")||e.flexElement&&!this.flexibleHeight)){const e=this.css("minHeight");if("100%"===e&&n&&this.inlineHeight)this.setLayoutHeight("match_parent");else this.android("minHeight",te(this.parseHeight(e)+(this.contentBox?this.contentBoxHeight:0)),false)}if(o){const e=this.css("maxWidth");let t=this.css("maxHeight"),o=-1;if(ae(e,true))if("100%"===e){if(!this.hasPX("width",{initial:true}))if(this.svgElement)o=this.bounds.width;else if(this.imageElement){if(o=this.toElementInt("naturalWidth"),o>this.documentParent.actualWidth)this.setLayoutWidth(it(this,i)),this.setLayoutHeight("wrap_content"),o=-1,t=""}else if(a)this.setLayoutWidth(it(this,i))}else o=this.parseWidth(e);else if(!this.pageFlow&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&(this.ascend({condition:e=>e.hasPX("width")}).length>0||!this.textContent.includes("\n")))o=this.actualWidth;if(o>=0)this.android("maxWidth",te(o),false);if(ae(t,true)){let e=-1;if("100%"===t&&!this.svgElement){if(!this.hasPX("height",{initial:true}))if(n)this.setLayoutHeight("match_parent");else e=this.imageElement?this.toElementInt("naturalHeight"):this.parseHeight(t)}else e=this.parseHeight(t);if(e>=0)if(this.android("maxHeight",te(e)),this.flexibleHeight)this.setLayoutHeight("wrap_content")}}}setAlignment(){const e=this.outerMostWrapper,t=this.renderParent,i=e.renderParent||t,a=this.autoMargin;let n=Le(this.cssInitial("textAlign",{modified:true}),false),o=Le(this.cssAscend("textAlign"),true);if(this.nodeGroup&&""===n&&!this.hasAlign(512)){const e=this.actualParent;if(e)n=Le(e.cssInitial("textAlign",{modified:true}),false)}if(this.pageFlow){let r="";if(this.inlineVertical&&(i.layoutFrame||i.layoutGrid)||"table-cell"===this.display){const t="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",{modified:true})){case"top":e.mergeGravity(t,"top");break;case"middle":e.mergeGravity(t,"center_vertical");break;case"bottom":e.mergeGravity(t,"bottom");break}}if(!this.blockWidth){if(i.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))if(this.floating)e.mergeGravity("layout_gravity",this.float);else if(!Oe(e,a)&&""!==n&&this.hasWidth&&!this.blockStatic&&!this.inputElement&&"table"!==this.display)e.mergeGravity("layout_gravity",n,false);if(this.rightAligned)r="right";else if(this.nodeGroup)if(this.renderChildren.every(e=>e.rightAligned))r="right";else if(this.hasAlign(512)&&!this.renderChildren.some(e=>e.rightAligned))r="left"}else if(this.rightAligned&&e.nodeGroup&&e.layoutVertical)e.renderEach(e=>{if(e.rightAligned)e.mergeGravity("layout_gravity","right")});if(t.layoutFrame){if(!Oe(this,a)){if(!this.innerWrapped){if(this.floating)r=this.float;if(""!==r&&!t.naturalElement&&(t.inlineWidth||!t.documentRoot&&this.onlyChild))t.mergeGravity("layout_gravity",r),r=""}if(this.centerAligned)this.mergeGravity("layout_gravity",Le("center",false));else if(this.rightAligned&&t.blockWidth)this.mergeGravity("layout_gravity","right")}if(this.onlyChild&&"table-cell"===e.documentParent.display){let t;switch(e.documentParent.css("verticalAlign")){case"top":t="top";break;case"bottom":t="bottom";break;default:t="center_vertical";break}this.mergeGravity("layout_gravity",t)}}if(""!==r)if(this.blockWidth){if(""===n||"right"===r)n=r}else(e.blockWidth&&this!==e?this:e).mergeGravity("layout_gravity",r);else if(Oe(e.inlineWidth?e:this,a)&&""!==n)o=""}if(""!==o&&this.blockStatic&&!this.centerAligned&&!this.rightAligned)e.mergeGravity("layout_gravity","left",false);if(!(this.layoutConstraint||this.layoutFrame||this.layoutElement||this.layoutGrid))if(""!==n){if(!this.imageOrSvgElement)this.mergeGravity("gravity",n)}else if(""!==o&&!this.inputElement)if(this.imageOrSvgElement){if(this.pageFlow)this.mergeGravity("layout_gravity",o)}else if(!this.nodeGroup||!this.hasAlign(512))this.mergeGravity("gravity",o);if(this.textElement&&this.layoutElement){switch(this.css("justifyContent")){case"center":case"space-around":case"space-evenly":this.mergeGravity("gravity","center_horizontal");break;case"flex-end":this.mergeGravity("gravity","right");break}switch(this.css("alignItems")){case"center":this.mergeGravity("gravity","center_vertical");break;case"flex-end":this.mergeGravity("gravity","bottom");break}}if(a.vertical&&(t.layoutFrame||t.layoutVertical&&t.layoutLinear))e.mergeGravity("layout_gravity",a.topBottom?"center_vertical":a.top?"bottom":"top")}setBoxSpacing(){et(this,Re,this._boxReset,this._boxAdjustment,true),et(this,Ie,this._boxReset,this._boxAdjustment,false)}apply(e){for(const t in e){const i=e[t];if(Se(i))for(const e in i)this.attr(t,e,i[e]);else if(i)this.attr("_",t,i.toString())}}clone(e,t){let i,a;if(t)({attributes:i,position:a}=t);const n=new View(!isNaN(e)?e:this.id,this.sessionId,this.element||void 0);if(void 0!==e)n.setControlType(this.controlName,this.containerType);else n.controlId=this.controlId,n.controlName=this.controlName,n.containerType=this.containerType;if(this.cloneBase(n),false!==i){Object.assign(n.unsafe("boxReset"),this._boxReset),Object.assign(n.unsafe("boxAdjustment"),this._boxAdjustment);for(const e in this._namespaces){const t=this._namespaces[e];for(const i in t)n.attr(e,i,"id"===i&&"android"===e?n.documentId:t[i])}}if(false!==a){n.anchorClear();const e=this.documentId;if(n.anchor("left",e))n.setBox(16,{reset:1,adjustment:0});if(n.anchor("top",e))n.setBox(2,{reset:1,adjustment:0})}return n.saveAsInitial(),n}extractAttributes(e){if("rtl"===this.dir&&!this.imageOrSvgElement)if(this.textElement)this.android("textDirection","rtl");else if(this.renderChildren.length>0)this.android("layoutDirection","rtl");if(this.styleElement||this.hasAlign(16384)){const e=U(this.dataset,"android");if(e)for(const t in e){const i="attr"===t?"android":/^attr[A-Z]/.test(t)?fe(t.substring(4),false):"";if(""!==i)for(const a of e[t].split(";")){const[e,t]=a.split("::");if(t)this.attr(i,e,t)}}if(!this.svgElement){const e=this.css("opacity");if("1"!==e&&ye(e))this.android("alpha",e)}}const t="\n"+"\t".repeat(e),i=this.combine();let a="";const n=i.length;let o=0;while(o<n)a+=t+i[o++];return a}alignParent(e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint){const i=Ne[e];if(i)return"parent"===t.app(this.localizeString(i))}else if(i.layoutRelative){const i=ke[e];if(i)return"true"===t.android(this.localizeString(i))}else if(i.layoutLinear){const a=i.renderChildren;if(i.layoutVertical)switch(e){case"top":return t===a[0];case"bottom":return t===a[a.length-1]}else switch(e){case"left":case"start":return t===a[0];case"right":case"end":return t===a[a.length-1]}}return false}alignSibling(e,t){const i=this.anchorTarget,a=i.renderParent;if(a)if(t){if(a.layoutConstraint){const a=Ne[e];if(a)i.app(this.localizeString(a),t)}else if(a.layoutRelative){const a=Ce[e];if(a)i.android(this.localizeString(a),t)}}else if(a.layoutConstraint){const t=Ne[e];if(t){const e=i.app(this.localizeString(t));return"parent"!==e&&e!==a.documentId?e:""}}else if(a.layoutRelative){const t=Ce[e];if(t)return i.android(this.localizeString(t))}return""}actualRect(e,t="linear"){let i=this[t][e];if(this.positionRelative&&this.floating)switch(e){case"top":if(this.hasPX("top"))i+=this.top;else i-=this.bottom;break;case"bottom":if(!this.hasPX("top"))i-=this.bottom;else i+=this.top;break;case"left":if(this.hasPX("left"))i+=this.left;else i-=this.right;break;case"right":if(!this.hasPX("left"))i-=this.right;else i+=this.left;break}if(this.inputElement){const a=this.companion;if((null==a?void 0:a.labelFor)===this&&!a.visible){const n=a[t][e];switch(e){case"top":case"left":return Math.min(n,i);case"right":case"bottom":return Math.max(n,i)}}}return i}translateX(e,t){const i=this.anchorTarget,a=i.renderParent;if(null==a?void 0:a.layoutConstraint){let n,o,r;if(t)({oppose:n,accumulate:o,contain:r}=t);let s=pe(i.android("translationX"));if(false===n&&(s>0&&e<0||s<0&&e>0))return false;else if(false!==o)s+=e;if(r){const e=a.box,t=this.linear;if(t.left+s<e.left)s=Math.max(t.left-e.left,0);else if(t.right+s>e.right)s=Math.max(e.right-t.right,0)}if(0!==s)i.android("translationX",te(s));else i.delete("android","translationX");return true}return false}translateY(e,t){const i=this.anchorTarget,a=i.renderParent;if(null==a?void 0:a.layoutConstraint){let n,o,r;if(t)({oppose:n,accumulate:o,contain:r}=t);let s=pe(i.android("translationY"));if(false===n&&(s>0&&e<0||s<0&&e>0))return false;else if(false!==o)s+=e;if(r){const e=a.box,t=this.linear;if(t.top+s<e.top)s=Math.max(t.top-e.top,0);else if(t.bottom+s>e.bottom)s=Math.max(e.bottom-t.bottom,0)}if(0!==s)i.android("translationY",te(s));else i.delete("android","translationY");return true}return false}localizeString(e){return K(e,this.localSettings.supportRTL,this.api)}removeTry(e){if(e&&!e.beforeReplace){const t=e.replaceWith||e.alignSiblings;if(t)e.beforeReplace=()=>this.anchorClear(t)}return super.removeTry(e)}hasFlex(e){const t=this.actualParent;if(true===(null==t?void 0:t.flexdata[e])){if("column"===e&&!t.hasHeight){const e=t.actualParent;if(e){if(e.flexElement&&!e.flexdata.column){if(!e.hasHeight){let i=0,a=0;for(const n of e){const e=(n.data(Ee.FLEXBOX,"boundsData")||n.bounds).height;if(e>i)i=e;if(n===t)if(a=e,a<i)break}if(a>=i)return false}}else if(!e.gridElement)return false}else return false}return this.flexbox.grow>0||1!==this.flexbox.shrink}return false}hide(e){if(e)if(e.hidden)return void this.android("visibility","invisible");else if(e.collapse)return void this.android("visibility","gone");super.hide(e)}android(e,t,i=true){if(t){if(""!==(t=this.attr("android",e,t,i)))return t}else if(""===t)return this.delete("android",e),"";return this._namespaces.android[e]||""}app(e,t,i=true){if(t){if(""!==(t=this.attr("app",e,t,i)))return t}else if(""===t)return this.delete("app",e),"";return this._namespaces.app[e]||""}formatted(e,t=true){const i=/^(?:([a-z]+):)?(\w+)="((?:@\+?[a-z]+\/)?.+)"$/.exec(e);if(i)this.attr(i[1]||"_",i[2],i[3],t)}anchor(e,t="",i){const a=this.anchorTarget,n=a.renderParent;if(n&&a.documentId!==t)if(n.layoutConstraint){if(""===t||void 0===a.constraint.current[e]||i){const n="parent"===t;if(void 0===i&&""!==t)i=n;const o=Ne[e];if(o){let r=false;switch(a.app(this.localizeString(o),t,i),e){case"left":case"right":if(n)a.constraint.horizontal=true;case"leftRight":case"rightLeft":r=true;break;case"top":case"bottom":case"baseline":if(n)a.constraint.vertical=true;break}return a.constraint.current[e]={documentId:t,horizontal:r},true}}}else if(n.layoutRelative){const n="true"===t;if(void 0===i&&""!==t)i=n;const o=(n?ke:Ce)[e];if(o)return a.android(this.localizeString(o),t,i),true}return false}anchorParent(e,t,i="",a){const n=this.anchorTarget,o=n.renderParent;if(o){const r="horizontal"===e;if(o.layoutConstraint){if(a||!n.constraint[e]){if(r)n.anchor("left","parent",a),n.anchor("right","parent",a),n.constraint.horizontal=true;else n.anchor("top","parent",a),n.anchor("bottom","parent",a),n.constraint.vertical=true;if(void 0!==t)n.anchorStyle(e,t,i,a);return true}}else if(o.layoutRelative)return n.anchor(r?"centerHorizontal":"centerVertical","true",a),true}return false}anchorStyle(e,t,i,a=true){const n=this.anchorTarget;if("horizontal"===e){if(n.app("layout_constraintHorizontal_bias",t.toString(),a),i)n.app("layout_constraintHorizontal_chainStyle",i,a)}else if(n.app("layout_constraintVertical_bias",t.toString(),a),i)n.app("layout_constraintVertical_chainStyle",i,a)}anchorChain(e){const t=[],i=this.anchorTarget,a=i.renderParent;if(a&&(a.layoutConstraint||a.layoutRelative)){let n,o;switch(e){case"top":n="topBottom",o="bottomTop";break;case"right":n="rightLeft",o="leftRight";break;case"bottom":n="bottomTop",o="topBottom";break;case"left":n="leftRight",o="rightLeft";break}const r=a.renderChildren;let s=i;do{const e=s.alignSibling(n);if(""!==e){const i=r.find(t=>t.documentId===e);if((null==i?void 0:i.alignSibling(o))===s.documentId)t.push(i),s=i;else break}else break}while(true)}return t}anchorDelete(...e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint)t.delete("app",...we(e,e=>this.localizeString(Ne[e])));else if(i.layoutRelative){const i=[];let a=0;while(a<e.length){const t=e[a++];let n=Ce[t];if(n)i.push(this.localizeString(n));if(n=ke[t],n)i.push(this.localizeString(n))}t.delete("android",...i)}}anchorClear(e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint){if(true===e)Ye(t,"parent");else if(e)$e(t,e);t.anchorDelete(...Object.keys(Ne)),t.delete("app","layout_constraintHorizontal_bias","layout_constraintHorizontal_chainStyle","layout_constraintVertical_bias","layout_constraintVertical_chainStyle")}else if(i.layoutRelative){if(true===e)Ye(t,"true");else if(e)$e(t,e);t.anchorDelete(...Object.keys(ke)),t.anchorDelete(...Object.keys(Ce))}}supported(e,t={}){var i;if("function"==typeof O.android[e]){const i=O.android[e](t,this.api,this);if(!i||be(t))return i}let a=this.api;while(a<=29){const n=null===(i=P[a++])||void 0===i?void 0:i.android[e];switch(typeof n){case"boolean":return n;case"function":return n(t,this.api,this)}}return true}combine(...e){const t=0===e.length,i=[];let a=false,n="";for(const o in this._namespaces)if(t||e.includes(o)){const e=this._namespaces[o];let t=o+":";switch(o){case"android":if(this.api<29)for(let a in e)if("id"===a)n=e[a];else{const n={};let o=e[a];if(!this.supported(a,n))continue;if(be(n)){if(Te(n.attr))a=n.attr;if(Te(n.value))o=n.value}i.push(t+`${a}="${o}"`)}else for(const a in e)if("id"===a)n=e[a];else i.push(t+`${a}="${e[a]}"`);a=true;break;case"_":t="";default:for(const a in e)i.push(t+`${a}="${e[a]}"`);break}}if(i.sort((e,t)=>e>t?1:-1),a)i.unshift(`android:id="${n||"@+id/"+this.controlId}"`);return i}mergeGravity(e,i,a=true){if("layout_gravity"===e){const e=this.renderParent;if(e)if(z(i)&&(this.blockWidth||e.inlineWidth&&this.onlyChild||!a&&this.outerWrapper&&this.hasPX("maxWidth")))return;else if(e.layoutRelative){if("center_horizontal"===i&&!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))return this.anchorDelete("left","right"),void this.anchor("centerHorizontal","true")}else if(e.layoutConstraint){if(!e.layoutHorizontal&&!this.positioned)switch(i){case"top":this.anchorStyle("vertical",0);break;case"right":case"end":if(!this.alignSibling("rightLeft"))if(this.anchor("right","parent",false),this.alignParent("left")||this.alignSibling("left"))this.anchorStyle("horizontal",1);break;case"bottom":this.anchorStyle("vertical",1);break;case"left":case"start":if(!this.alignSibling("leftRight"))if(this.anchor("left","parent",false),this.alignParent("right")||this.alignSibling("right"))this.anchorStyle("horizontal",0);break;case"center_horizontal":if(!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))this.anchorParent("horizontal",.5);break}return}}else switch(this.tagName){case"#text":case"IMG":case"SVG":case"HR":case"VIDEO":case"AUDIO":case"OBJECT":case"EMBED":return;case"INPUT":switch(this.toElementString("type")){case"radio":case"checkbox":case"image":case"range":return}break;default:if(this.controlElement||this.is(t.TEXT)&&this.textEmpty||this.length>0&&(this.layoutFrame||this.layoutConstraint||this.layoutGrid))return;break}const n=tt(this,e,this.localizeString(i));if(n){let t="",i="",o="",r="",s=0;while(s<n.length){const e=n[s++];if(z(e)){if(""===t||a)t=e}else if(F(e)){if(""===i||a)i=e}else o+=(""!==o?"|":"")+e}if(r=""!==t&&""!==i?t+"|"+i:t||i,""!==o)r+=(""!==r?"|":"")+o;this.android(e,r)}}applyOptimizations(){var e;const{lineHeight:t,renderChildren:i,renderParent:a}=this;if(a){if(this.renderExclude){if(!(this.alignSibling("topBottom")||this.alignSibling("bottomTop")||this.alignSibling("leftRight")||this.alignSibling("rightLeft")))this.hide({remove:true});else this.hide({collapse:true});return}if(this.layoutLinear)if(this.layoutVertical){if(!a.layoutFrame&&!this.documentRoot&&i.length>0&&(this.baselineElement||!i[0].multiline&&i.every(e=>e.textElement)))this.android("baselineAlignedChildIndex","0")}else{let e=!this.baselineActive;if(i.some(e=>e.floating)&&!i.some(e=>e.imageElement&&e.baseline))this.android("baselineAligned","false"),e=false;const t=i.length;for(let a=0;a<t;++a){const n=i[a];if(n.setSingleLine(a>0&&a===t-1),e&&n.baselineElement)this.android("baselineAlignedChildIndex",a.toString()),e=false}}if(t>0){const n=this.has("lineHeight",{map:"initial"});if(this.multiline)We(this,t,n);else if(i.length>0)if(!n&&this.layoutHorizontal&&this.alignSibling("baseline"))return;else if(this.layoutVertical||this.layoutFrame)this.renderEach(e=>{if(ot(e))De(e,e.lineHeight||t,true,true,true)});else{let a=false;const n=this.horizontalRows||[i],o=n.length;for(let i=0;i<o;++i){const r=n[i],s=n[i+1],l=!!s&&(1===s.length&&s[0].multiline||s[0].lineBreakLeading||i<o-1&&!!(null===(e=s.find(e=>e.baselineActive))||void 0===e?void 0:e.has("lineHeight"))),c=r[0],d=1===r.length,h=d&&!c.multiline,f=!d&&r.find(e=>e.baselineActive&&0===e.renderChildren.length),u=h||!a&&(i>0||1===o)||c.lineBreakLeading,p=h||!l&&(i<o-1||1===o);if(f)if(!isNaN(f.lineHeight)&&!f.has("lineHeight"))De(f,t,false,u,p);else{a=true;continue}else{const e=r.length;let i=0;while(i<e){const e=r[i++];if(ot(e))De(e,t,d,u,p)}}a=d&&c.multiline}}else if((n||0===a.lineHeight)&&this.inlineText&&!this.textEmpty)De(this,t,n,true,true)}if(Ze(this,"layout_gravity"),Ze(this,"gravity"),this.imageElement){const{layoutWidth:e,layoutHeight:t}=this;if("wrap_content"===e&&"wrap_content"!==t||"wrap_content"!==e&&"wrap_content"===t||"match_parent"===e||"match_parent"===t||"0px"===e||"0px"===t||""!==this.android("minWidth")||""!==this.android("minHeight")||""!==this.android("maxWidth")||""!==this.android("maxHeight"))this.android("adjustViewBounds","true")}if(this.has("transform")){const e=re(this.css("transform"),{accumulate:true,boundingBox:this.bounds,fontSize:this.fontSize});let t=false,i=0;while(i<e.length){const a=e[i++],[n,o,r]=a.values;switch(a.method){case"rotate":if(n===o)this.android("rotation",n.toString());else{if(0!==n)this.android("rotationX",n.toString());if(0!==o)this.android("rotationY",o.toString())}t=true;break;case"scale":if(1!==n)this.android("scaleX",n.toString());if(1!==o)this.android("scaleY",o.toString());t=true;break;case"translate":if(0!==n&&!this.translateX(n))this.android("translationX",te(n));if(0!==o&&!this.translateY(o))this.android("translationY",te(o));if(0!==r)this.android("translationZ",te(r));break}}if(t&&this.has("transformOrigin")){const{left:e,top:t}=ie(this.css("transformOrigin"),this.bounds,{fontSize:this.fontSize});if(0!==e)this.android("transformPivotX",te(e));if(0!==t)this.android("transformPivotY",te(t))}}if(this.onlyChild&&i.length>0&&this.controlName===a.controlName&&!this.visibleStyle.borderWidth&&""===this.elementId){let e=true;for(const t in this._namespaces){const i=a.unsafe("namespaces")[t];if(i){const a=this._namespaces[t];for(const t in a)if("id"!==t&&a[t]!==i[t]){e=false;break}}else{e=false;break}}if(e){const e=this.renderTemplates,t=e.length;let n=0;while(n<t){const t=e[n++];t.parent=a,t.node.renderParent=a}a.renderTemplates=e,a.renderChildren=i;const o=this._boxReset,r=this._boxAdjustment;a.modifyBox(32,(0===o.marginTop?this.marginTop:0)+(0===o.paddingTop?this.paddingTop:0)+r.marginTop+r.paddingTop),a.modifyBox(64,(0===o.marginRight?this.marginRight:0)+(0===o.paddingRight?this.paddingRight:0)+r.marginRight+r.paddingRight),a.modifyBox(128,(0===o.marginBottom?this.marginBottom:0)+(0===o.paddingBottom?this.paddingBottom:0)+r.marginBottom+r.paddingBottom),a.modifyBox(256,(0===o.marginLeft?this.marginLeft:0)+(0===o.paddingLeft?this.paddingLeft:0)+r.marginLeft+r.paddingLeft)}}}}applyCustomizations(e=true){const{tagName:t,controlName:i}=this;let a=P[0].assign;Qe(this,a[t],e),Qe(this,a[i],e);const n=P[this.api];if(n)a=n.assign,Qe(this,a[t],e),Qe(this,a[i],e)}setSingleLine(e){if(this.textElement&&this.naturalChild&&(e||!this.hasPX("width"))){const t=this.actualParent;if(!(t.preserveWhiteSpace||"CODE"===t.tagName||this.multiline&&"nowrap"!==t.css("whiteSpace")))this.android("maxLines","1");if(e&&this.textContent.trim().length>1)this.android("ellipsize","end")}}setLayoutWidth(e,t=true){this.android("layout_width",e,t)}setLayoutHeight(e,t=true){this.android("layout_height",e,t)}get controlElement(){switch(this.tagName){case"PROGRESS":case"METER":return true;case"INPUT":return"range"===this.toElementString("type")}return false}get imageElement(){switch(this.tagName){case"IMG":case"CANVAS":return true}return false}set containerType(e){this._containerType=e}get containerType(){if(0===this._containerType){const e=l[this.containerName];if(e)this._containerType=e}return this._containerType}set controlId(e){this._controlId=e}get controlId(){var e;let t=this._controlId;if(void 0===t){const i=this.controlName;if(i){let a;if(this.styleElement){const t=(null===(e=this.elementId)||void 0===e?void 0:e.trim())||le(this.element,"name");if(""!==t)if(a=t.replace(/[^\w$\-_.]/g,"_").toLowerCase(),"parent"===a||u.includes(a))a="_"+a}t=ge(_e.generateId("android",a||me(i,".").toLowerCase(),a?0:1)),this._controlId=t}else if(0===this.id)return"baseroot";else return""}return t}get documentId(){const e=this.controlId;return""!==e?"@id/"+e:""}get support(){let e=this._cached.support;if(void 0===e)if(e={positionTranslation:this.layoutConstraint,positionRelative:this.layoutRelative,maxDimension:this.textElement||this.imageOrSvgElement},0!==this.containerType)this._cached.support=e;return e}set renderExclude(e){this._cached.renderExclude=e}get renderExclude(){const e=this._cached.renderExclude;if(void 0!==e)return e;else if(this.naturalChild&&!this.plainText&&!this.rootElement)if(!this.pageFlow)return this._cached.renderExclude=at(this)||nt(this)||/^rect\(0[a-z]*,\s+0[a-z]*,\s+0[a-z]*,\s+0[a-z]*\)$/.test(this.css("clip")),this._cached.renderExclude;else if(this.styleElement&&0===this.length&&!this.imageElement&&!this.pseudoElement){const e=this.renderParent||this.parent;if(e.layoutFrame)return at(this)||nt(this);else if(e.layoutVertical)return nt(this);else return at(this)&&(e.layoutHorizontal||nt(this))}return false}get baselineHeight(){var e;let t=this._cached.baselineHeight;if(void 0===t){if(this.plainText){const{height:e,numberOfLines:i}=this.bounds;t=e/(i||1)}else{if(this.multiline&&this.cssTry("white-space","nowrap"))t=this.boundingClientRect.height,this.cssFinally("white-space");else if(this.hasHeight)t=this.actualHeight;else if("PICTURE"===this.tagName)t=Math.max((null===(e=this.naturalElements.find(e=>"IMG"===e.tagName))||void 0===e?void 0:e.height)||0,this.bounds.height);else t=this.bounds.height;if(this.naturalElement&&!this.pseudoElement&&this.lineHeight>t)t=this.lineHeight;else if(this.inputElement)switch(this.controlName){case n.RADIO:case n.CHECKBOX:t+=8;break;case n.SELECT:t/=this.toElementInt("size")||1,t+=4;break;default:t+=Math.max(-1*ue(this.verticalAlign),0);break}}this._cached.baselineHeight=t}return t}get innerWrapped(){return this._innerWrapped}set innerWrapped(e){if(!this.naturalChild&&e)e=e.outerMostWrapper,this._innerWrapped=e,e.outerWrapper=this}get anchorTarget(){let e=this;do{const t=e.renderParent;if(t){if(t.layoutConstraint||t.layoutRelative)return e}else break;e=e.outerWrapper}while(e);return this}set anchored(e){this.constraint.horizontal=e,this.constraint.vertical=e}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this._containerType===t.FRAME}get layoutLinear(){return this._containerType===t.LINEAR}get layoutGrid(){return this._containerType===t.GRID}get layoutRelative(){return this._containerType===t.RELATIVE}get layoutConstraint(){return this._containerType===t.CONSTRAINT}get layoutWidth(){return this._namespaces.android.layout_width||""}get layoutHeight(){return this._namespaces.android.layout_height||""}get inlineWidth(){return"wrap_content"===this.layoutWidth}get inlineHeight(){return"wrap_content"===this.layoutHeight}get blockWidth(){return"match_parent"===this.layoutWidth}get blockHeight(){return"match_parent"===this.layoutHeight}get flexibleWidth(){return Be(this,this.layoutWidth)}get flexibleHeight(){return Be(this,this.layoutHeight)}get labelFor(){return this._labelFor}set labelFor(e){if(e)e.companion=this;this._labelFor=e}set localSettings(e){if(this._localSettings)Object.assign(this._localSettings,e);else this._localSettings=Object.assign({},e)}get localSettings(){return this._localSettings}set positioned(e){this._positioned=e}get positioned(){return this._positioned||!!this.target}get target(){const e=this.dataset.androidTarget;return e?document.getElementById(e):null}}).horizontalMatchConstraint=(e,t)=>it(e,t),i};class View extends(rt(squared.base.NodeUI)){}class ViewGroup extends(rt(squared.base.NodeGroupUI)){constructor(e,t,i){super(e,t.sessionId),this.depth=t.depth,this.containerName=t.containerName+"_GROUP",this.actualParent=t.actualParent,this.documentParent=t.documentParent;const a=i.length;let n=0;while(n<a)i[n++].parent=this}set containerType(e){this._containerType=e}get containerType(){return this._containerType}}const{PLATFORM:st,isPlatform:lt}=squared.lib.client,{parseColor:ct}=squared.lib.color,{CSS_UNIT:dt,formatPX:ht,getSrcSet:ft,hasComputedStyle:ut,isLength:pt,isPercent:gt}=squared.lib.css,{getElementsBetweenSiblings:mt,getRangeClientRect:bt}=squared.lib.dom,{truncate:yt}=squared.lib.math,{getElementAsNode:St,getPseudoElt:Tt}=squared.lib.session,{assignEmptyValue:wt,convertFloat:Et,convertWord:vt,hasBit:xt,hasMimeType:At,isString:_t,iterateArray:Rt,parseMimeType:It,partitionArray:Nt,safeNestedArray:Ct,withinRange:kt}=squared.lib.util,{STRING_XMLENCODING:Lt,replaceTab:Pt}=squared.lib.xml,{APP_SECTION:Ot,BOX_STANDARD:Wt,NODE_ALIGNMENT:Dt,NODE_PROCEDURE:Bt,NODE_RESOURCE:Mt,NODE_TEMPLATE:Ht}=squared.base.lib.enumeration,Gt=squared.base.NodeUI;function Xt(e){e.sort((e,t)=>{const i=e.float,a=t.float;if("none"!==i&&"none"!==a){if(i!==a)return"left"===i?-1:1;else if("right"===i&&"right"===a)return 1}else if("none"!==i)return"left"===i?-1:1;else if("none"!==a)return"left"===a?1:-1;return 0})}function Vt(e,t){const i=e.actualParent;if(e===t.actualParent)return-1;else if(i===t)return 1;const{pageFlow:a,zIndex:n}=e,{pageFlow:o,zIndex:r}=t;if(!a&&o)return n>=0?1:-1;else if(!o&&a)return r>=0?-1:1;else if(n===r)return e.childIndex<t.childIndex?-1:1;return n<r?-1:1}function zt(e,i,a,n){let o,r=0;const s=i.length;let l=0;while(l<s){const s=i[l++];if(s.baselineAltered)continue;let c=s.baselineHeight;if(c>0||s.textElement)if(s.blockVertical&&e.blockVertical)s.anchor("bottom",e.documentId);else if(a&&s.is(t.BUTTON))s.anchor("centerVertical","true");else{const t=s.isEmpty;let i=s.imageOrSvgElement;if(!i&&!t)s.renderEach(e=>{if(hi(e))c=Math.max(e.baselineHeight,c),i=true});if(i)if(c>e.baselineHeight){if(!o||c>=r)null==o||o.anchor(fi(s),s.documentId),r=c,o=s;else s.anchor(fi(o),o.documentId);continue}else if(kt(s.linear.top,n)){s.anchor("top","true");continue}if(t&&s.naturalChild)s.anchor("baseline",e.documentId);else if(s.baselineElement)s.anchor(i?"bottom":"baseline",e.documentId)}else if(hi(s))o=s}if(o)e.anchor(fi(o),o.documentId)}function Ft(e,t){if("left"===t.float){if(t.marginRight<0){const i=Math.abs(t.marginRight);return e.modifyBox(16,t.actualWidth+(t.hasWidth?t.paddingLeft+t.borderLeftWidth:0)-i),e.anchor("left",t.documentId),t.setBox(4,{reset:1}),true}}else if("right"===e.float&&t.marginLeft<0){const i=Math.abs(t.marginLeft),a=t.actualWidth;if(i<a)e.modifyBox(4,a-i);return e.anchor("right",t.documentId),t.setBox(16,{reset:1}),true}return false}function Ut(e){return e.filter(e=>(e.baseline||pt(e.verticalAlign,true))&&("TEXTAREA"===e.tagName||"SELECT"===e.tagName&&e.toElementInt("size")>1)||"text-bottom"===e.verticalAlign&&"INPUT_IMAGE"!==e.containerName).sort((e,t)=>{if(e.baselineHeight===t.baselineHeight)return"SELECT"===e.tagName?1:0;else return e.baselineHeight>t.baselineHeight?-1:1})}function qt(e){if("BR"===e.tagName)return true;else if(ut(e)){const t=getComputedStyle(e),i=t.getPropertyValue("position");if(!("absolute"===i||"fixed"===i)){const e=t.getPropertyValue("display"),i="none"!==t.getPropertyValue("float");switch(e){case"block":case"flex":case"grid":return!i||ui(t)}return(e.startsWith("inline-")||"table"===e)&&ui(t)}}return false}function Yt(e){const t=e.element;if(t.readOnly)e.android("focusable","false");if(t.disabled)e.android("enabled","false")}function jt(e,t,i){if(e.css("width",ht(t),true),i&&i.width>0&&i.height>0){const a=i.height*(t/i.width);e.css("height",ht(a),true)}}function Kt(e,t){if(-1!==t.minLength)e.android("minLength",t.minLength.toString());if(t.maxLength>0)e.android("maxLength",t.maxLength.toString())}function $t(e,t){if(t.min)e.android("min",t.min);if(t.max)e.android("max",t.max)}function Zt(e,t){if(e.naturalChild)return t.has(e);else if(e.nodeGroup)return e.some(e=>e.naturalChild&&t.has(e),{cascade:true});else return t.has(e.innerMostWrapped)}function Jt(e,t){const i=e.parent;if(i.flexElement&&("baseline"===i.css("alignItems")||e.some(e=>"baseline"===e.flexbox.alignSelf)))return false;const a=e.length>1;return e.some(t=>a&&(t.rightAligned||t.centerAligned)&&e.singleRowAligned||t.percentWidth>0&&t.percentWidth<1||t.hasPX("maxWidth"))&&(!t||e.every(e=>e.marginTop>=0))}function Qt(e,t){if(e.leftTopAxis){const i=e.absoluteParent;if(i.documentBody)switch(t){case"top":if(0===i.getBox(2)[0])return i.marginTop;break;case"left":return i.marginLeft}}return 0}function ei(e){const{centerAligned:t,rightAligned:i}=e;e.css("display","inline-block",true),e.setCacheValue("centerAligned",t),e.setCacheValue("rightAligned",i)}function ti(e){e.addAlign(16),e.removeAlign(2)}function ii(e,t,i,a,n,o){e.anchor(n,a,true),e.setBox(t?16:2,{reset:1,adjustment:o}),e.constraint[i]=true}function ai(e){return Nt(e,e=>"right"===e.float||true===e.autoMargin.left)}function ni(e,t,i,a,n,o){let r=0,s=n+e.marginLeft;if(a&&!o.items.includes(a))s+=a.linear.width;if(!a||!e.plainText||i||!o.items.includes(a)||o.clearMap.has(e))s+=t.width;if(e.marginRight<0)s+=e.marginRight;if(r=o.boxWidth,0!==o.textIndent)if(o.textIndent<0){if(o.rowLength<=1)r+=o.textIndent}else if(o.textIndent>0&&1===o.rowLength)r-=o.textIndent;if(e.styleElement&&e.inlineStatic)s-=e.contentBoxWidth;return r=Math.ceil(r),Math.floor(s)>r}function oi(e,t){return t.anchorParent("vertical",0),t.setBox(2,{reset:1,adjustment:Math.max(t.bounds.top-e.box.top,Math.min(-1*Et(t.verticalAlign),0))}),t.baselineAltered=true,false}function ri(e){return Jt(e,true)?t.CONSTRAINT:e.some(e=>e.positionRelative||!e.pageFlow&&e.autoPosition)?t.RELATIVE:t.LINEAR}function si(e){return Jt(e,true)?t.CONSTRAINT:e.some(e=>e.positionRelative)?t.RELATIVE:t.LINEAR}function li(e){const i=e.node,a=i.element,n=("OBJECT"===a.tagName?a.data:a.src).trim(),o=a.type||It(n);if(o.startsWith("image/"))i.setCacheValue("tagName","IMG"),i.setCacheValue("imageElement",true),a.src=n,e.setContainerType(t.IMAGE);else if(o.startsWith("video/"))i.setCacheValue("tagName","VIDEO"),a.src=n,e.setContainerType(t.VIDEOVIEW);else if(o.startsWith("audio/"))i.setCacheValue("tagName","AUDIO"),a.src=n,e.setContainerType(t.VIDEOVIEW);else e.setContainerType(t.TEXT)}const ci=(e=false)=>e?["right","left","rightLeft","leftRight"]:["left","right","leftRight","rightLeft"],di=(e,t,i,a,n)=>t.floating&&t.alignParent(t.float)&&(i||Math.floor(a+(e.hasWidth?e.actualWidth:0))<n.boxWidth),hi=e=>e.imageOrSvgElement&&e.baseline,fi=e=>e.imageOrSvgElement?"baseline":"bottom",ui=e=>("100%"===e.getPropertyValue("width")||"100%"===e.getPropertyValue("minWidth"))&&"none"===e.getPropertyValue("max-width"),pi=(e,t)=>function(e,t){const i=e.depth,a=t.depth;if(i===a){const i=e.actualParent,a=t.actualParent;if(e===a)return-1;else if(i===t)return 1;else if(i&&a)if(i===a)return Vt(e,t);else if(i.actualParent===a.actualParent)return Vt(i,a);return e.id<t.id?-1:1}return i<a?-1:1}(e.node.innerMostWrapped,t.node.innerMostWrapped),gi=(e,t)=>Vt(e.node.innerMostWrapped,t.node.innerMostWrapped),mi=(e,t,i=true)=>t.size>0&&e.some((e,a)=>(a>0||!i)&&t.has(e)),bi=e=>e.plainText&&Resource.hasLineBreak(e,false,true)||e.preserveWhiteSpace&&/^\s*\n+/.test(e.textContent),yi=e=>Math.max(e.actualHeight,e.lineHeight),Si=(e,t,i)=>e.containerType===t&&e.length===i&&(0===e.alignmentType||e.hasAlign(2));function Ti(e,t){const i=e.renderParent;if(i.overflowY)return i.box.width;else{const a=e.actualParent;if(a)if(e.naturalElement&&e.inlineStatic&&a.blockStatic&&a===i)return a.box.width-(e.linear.left-a.box.left);else if(a.floatContainer){const{containerType:i,alignmentType:n}=this.containerTypeVerticalMargin;if(e.ascend({condition:e=>e.of(i,n),including:a,attr:"renderParent"}).length>0){const{left:i,right:n,width:o}=e.box;let r=0,s=0;const l=a.naturalChildren,c=l.length;let d=0;while(d<c){const a=l[d++];if(a.floating){const o=a.linear;if(!t.includes(a)&&e.intersectY(o))if("left"===a.float){if(Math.floor(o.right)>i)r=Math.max(r,o.right-i)}else if(n>Math.ceil(o.left))s=Math.max(s,n-o.left)}}return o-(r+s)}}}}function wi(e){if(e.centerAligned)e.anchorParent("horizontal",.5);else{const t=e.autoMargin;if(t.horizontal)e.anchorParent("horizontal",t.left?1:t.leftRight?.5:0);else{const t=e.rightAligned;if(t)e.anchor("right","parent"),e.anchorStyle("horizontal",1);else e.anchor("left","parent"),e.anchorStyle("horizontal",0);if(e.blockStatic||e.percentWidth>0||e.block&&e.multiline&&e.floating)e.anchor(t?"left":"right","parent")}}}function Ei(e,t=true,i){const a=e.autoMargin;let n=t?0:NaN;if(e.floating)n=0;else if(a.vertical)n=a.top?1:a.topBottom?.5:0;else if(e.imageOrSvgElement||e.inlineVertical)switch(e.verticalAlign){case"baseline":n=t?0:1;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=0;break}else{const t=e.actualParent;if("table-cell"===(null==t?void 0:t.display))switch(t.verticalAlign){case"middle":n=.5;break;case"bottom":n=1;break;default:n=0;break}else switch(e.display){case"inline-flex":case"inline-grid":case"inline-table":case"table-cell":n=0;break}}if(!isNaN(n))if(i)e.app("layout_constraintVertical_bias",n.toString(),false),e.delete("layout_constraintVertical_chainStyle");else e.anchorStyle("vertical",n,t?"":"packed",false)}class Controller extends squared.base.ControllerUI{constructor(e){super(),this.application=e,this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:Lt},directory:{string:"res/values",font:"res/font",image:"res/drawable",video:"res/raw",audio:"res/raw"},svg:{enabled:false},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:lt(4)?"rgb(255, 255, 255)":"rgb(221, 221, 221)",inputColorBorderColor:"rgb(119, 119, 199)",meterForegroundColor:"rgb(99, 206, 68)",meterBackgroundColor:"rgb(237, 237, 237)",progressForegroundColor:"rgb(138, 180, 248)",progressBackgroundColor:"rgb(237, 237, 237)"},mimeType:{font:["font/ttf","font/otf"],image:["image/jpeg","image/png","image/gif","image/bmp","image/webp","image/svg+xml","image/heic","image/heif","image/x-icon"],audio:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","audio/aac","audio/flac","audio/gsm","audio/midi","audio/mpeg","audio/wav","audio/ogg"],video:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","video/webm"]},unsupported:{cascade:new Set(["IMG","INPUT","SELECT","TEXTAREA","PROGRESS","METER","HR","IFRAME","VIDEO","AUDIO","OBJECT","svg"]),tagName:new Set(["HEAD","TITLE","META","BASE","SCRIPT","STYLE","LINK","OPTION","INPUT:hidden","COLGROUP","MAP","AREA","SOURCE","TEMPLATE","DATALIST","PARAM","TRACK"]),excluded:new Set(["BR","WBR"])},precision:{standardFloat:3},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.35,superscriptTopOffset:.35,legendBottomOffset:.25}}}static anchorPosition(e,t,i,a=true){const[n,o,r,s,l,c,d,h]=i?["horizontal","width","left","right",16,4,256,64]:["vertical","height","top","bottom",2,8,32,128],f=e.autoMargin,u=e.hasPX(o),p={},g=e.hasPX(r),m=e.hasPX(s);if(u&&f[n])if(g&&f[s])if(a)e.anchor(r,"parent"),e.modifyBox(l,e[r]);else p[r]=e[r];else if(m&&f[r])if(a)e.anchor(s,"parent"),e.modifyBox(c,e[s]);else p[s]=e[s];else if(a)e.anchorParent(n,.5),e.modifyBox(l,e[r]),e.modifyBox(c,e[s]);else p[r]=e[r],p[s]=e[s];else{if("100%"===e.css(o)||"100%"===e.css(i?"minWidth":"minHeight")){const o=g?q(t,d,e[r]):void 0,f=m?q(t,h,e[s]):void 0;if(a){if(e.anchorParent(n),i)e.setLayoutWidth(View.horizontalMatchConstraint(e,t));else e.setLayoutHeight("0px");if(o)e.modifyBox(l,o);if(f)e.modifyBox(c,f)}else p[r]=o,p[s]=f}else{let b=0;if(g){const i=q(t,d,e[r]);if(a)e.anchor(r,"parent"),e.modifyBox(l,i),++b;else p[r]=i}if(m)if(!g||!u){const i=q(t,h,e[s]);if(a)e.anchor(s,"parent"),e.modifyBox(c,i),++b;else p[s]=i}if(a)switch(b){case 0:if(i)if(e.centerAligned)e.anchorParent("horizontal",.5);else if(e.rightAligned)if(e.blockStatic)e.anchorParent("horizontal",1);else e.anchor("right","parent");break;case 2:if(!(u||true===f[n]&&true!==f[r]&&true!==f[s])){if(i)e.setLayoutWidth(View.horizontalMatchConstraint(e,t));else e.setLayoutHeight("0px");if(t.innerMostWrapped.documentBody){const e={type:6,not:"100%"};do{if(!t.has(o,e)&&!t.has(i?"maxWidth":"maxHeight",e)){if(i)t.setLayoutWidth("match_parent",t.inlineWidth);else t.setLayoutHeight("match_parent",t.inlineWidth);t=t.outerWrapper}else break}while(t)}}break}}}return p}init(){const e=this.userSettings,t=160/e.resolutionDPI;this._targetAPI=e.targetAPI||29,this._screenDimension={width:e.resolutionScreenWidth*t,height:e.resolutionScreenHeight*t},this._defaultViewSettings={systemName:this.application.systemName,screenDimension:this._screenDimension,supportRTL:e.supportRTL,floatPrecision:this.localSettings.precision.standardFloat},super.init()}optimize(e){const t=e.length;let i=0;while(i<t){const t=e[i++];if(t.applyOptimizations(),t.hasProcedure(Bt.CUSTOMIZATION))t.applyCustomizations(this.userSettings.customizationsOverwritePrivilege);const a=t.target;if(a){const e=t.outerMostWrapper;if(t!==e&&a===e.target)continue;const i=this.application.resolveTarget(t.sessionId,a);if(i){const e=t.removeTry({alignSiblings:true});if(e){const a=i.renderChildren,n=Ct(i,"renderTemplates"),o=parseInt(t.dataset.androidTargetIndex);if(!isNaN(o)&&o>=0&&o<a.length)a.splice(o,0,t),n.splice(o,0,e);else a.push(t),n.push(e);t.renderParent=i}}}}}finalize(e){const t=this.userSettings.insertSpaces;for(const i of e)i.content=Pt(i.content.replace("{#0}",Z(i.content)),t)}processUnknownParent(e){const i=e.node,a=i.tagName;if("OBJECT"===a||"EMBED"===a)li(e);else if(e.some(e=>!e.pageFlow&&!e.autoPosition))e.setContainerType(t.CONSTRAINT,34);else if(e.length<=1){const a=i.item(0);if(a){if(a.plainText)a.hide(),i.clear(),i.inlineText=true,i.textContent=a.textContent,e.setContainerType(t.TEXT,1024);else if(a.percentWidth>0&&a.percentWidth<1)e.setContainerType(t.CONSTRAINT,32768);else if(a.autoMargin.leftRight||a.autoMargin.left||a.hasPX("maxWidth")&&!a.support.maxDimension&&!a.inputElement)e.setContainerType(t.CONSTRAINT);else if(a.baselineElement)if(e.parent.flexElement&&"baseline"===i.flexbox.alignSelf)e.setContainerType(t.LINEAR,8);else e.setContainerType(si(e),16);else e.setContainerType(t.FRAME);e.addAlign(4096)}else return this.processUnknownChild(e)}else if(Resource.hasLineBreak(i,true))e.setContainerType(si(e),18);else if(this.checkConstraintFloat(e))if(e.setContainerType(t.CONSTRAINT),e.every(e=>e.floating))e.addAlign(512);else if(e.linearY)e.addAlign(16);else if(e.some(e=>e.floating||e.rightAligned)&&e.singleRowAligned)e.addAlign(8);else e.addAlign(e.some(e=>e.blockStatic)?16:1024),e.addAlign(2);else if(e.linearX||e.singleRowAligned){if(this.checkFrameHorizontal(e))e.addRender(512),e.addRender(8);else if(this.checkConstraintHorizontal(e))e.setContainerType(t.CONSTRAINT);else if(this.checkLinearHorizontal(e)){if(e.setContainerType(t.LINEAR),e.floated.size>0)Xt(e.children)}else e.setContainerType(Jt(e,false)?t.CONSTRAINT:t.RELATIVE);e.addAlign(8)}else if(e.linearY)e.setContainerType(ri(e),16|(i.rootElement||e.some((t,i)=>t.inlineFlow&&e.item(i+1).inlineFlow,{end:e.length-1})?2:0));else if(e.every(e=>e.inlineFlow))if(this.checkFrameHorizontal(e))e.addRender(512),e.addRender(8);else e.setContainerType(ri(e),18);else{const i=e.children,a=e.parent.floatContainer?this.application.clearMap:void 0;if(e.some((e,t)=>e.alignedVertically(t>0?i.slice(0,t):void 0,a)>0))e.setContainerType(ri(e),18);else e.setContainerType(t.CONSTRAINT,2)}return{layout:e}}processUnknownChild(e){const i=e.node,a=i.visibleStyle.background;if("OBJECT"===i.tagName)li(e);else if(i.inlineText&&(a||!i.textEmpty))e.setContainerType(t.TEXT);else if(i.blockStatic&&0===i.naturalChildren.length&&(a||i.contentBoxHeight>0))e.setContainerType(t.FRAME);else if(0===i.bounds.height&&i.naturalChild&&0===i.naturalElements.length&&""===i.elementId&&0===i.marginTop&&0===i.marginRight&&0===i.marginBottom&&0===i.marginLeft&&!a&&!i.rootElement&&!i.use)return i.hide(),{layout:e,next:true};else switch(i.tagName){case"LI":case"OUTPUT":e.setContainerType(t.TEXT);break;default:if(""!==i.textContent&&(a||!i.pageFlow||i.pseudoElement&&"::after"===Tt(i.element,i.sessionId)))e.setContainerType(t.TEXT),i.inlineText=true;else e.setContainerType(t.FRAME),i.exclude({resource:Mt.VALUE_STRING})}return{layout:e}}processTraverseHorizontal(e,i){const a=e.parent;if(1===e.floated.size&&e.every(e=>e.floating))if(Si(a,t.CONSTRAINT,e.length))return a.addAlign(512),void a.removeAlign(2);else e.node=this.createNodeGroup(e.node,e.children,a),e.setContainerType(t.CONSTRAINT,512);else if(this.checkFrameHorizontal(e))e.node=this.createNodeGroup(e.node,e.children,a),e.addRender(512),e.addRender(8);else if(e.length!==i.length||a.hasAlign(16))e.node=this.createNodeGroup(e.node,e.children,a),this.processLayoutHorizontal(e);else{if(!a.hasAlign(1024))a.addAlign(8);a.removeAlign(2)}return e}processTraverseVertical(e){const i=e.parent,a=this.application.clearMap,n=e.floated.size,o=e.length;if(e.some((e,t)=>e.lineBreakTrailing&&t<o-1)){if(!i.hasAlign(16)){const t=ri(e);if(Si(i,t,o))return void ti(i);else{if(i.layoutConstraint)if(i.addAlign(16),!i.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,18)}}}else if(1===n&&e.every((e,t)=>0===t||t===o-1||a.has(e)))if(e.same(e=>e.float))if(Si(i,t.CONSTRAINT,o))return void ti(i);else e.node=this.createLayoutGroup(e),e.setContainerType(t.CONSTRAINT,512);else if(mi(e,a)||this.checkFrameHorizontal(e))e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(8);else{const t=si(e);if(Si(i,t,o))return void ti(i);else{if(i.layoutConstraint)if(i.addAlign(16),!i.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,16)}}else if(n)if(mi(e,a))e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(16);else if(e.item(0).floating)e.node=this.createLayoutGroup(e),e.addRender(512),e.addRender(8);if(!i.hasAlign(16)){const t=si(e);if(Si(i,t,o))return void ti(i);else{if(i.layoutConstraint)if(i.addAlign(16),!i.hasAlign(32))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,16)}}return e}processLayoutHorizontal(e){if(this.checkConstraintFloat(e))e.setContainerType(t.CONSTRAINT,e.every(e=>e.floating)?512:1024);else if(this.checkConstraintHorizontal(e))e.setContainerType(t.CONSTRAINT,8);else if(this.checkLinearHorizontal(e)){if(e.setContainerType(t.LINEAR,8),e.floated.size>0)Xt(e.children)}else e.setContainerType(t.RELATIVE,8);return e}sortRenderPosition(e,t){var i;if(e.layoutRelative){if(t.some(e=>0!==e.node.zIndex))t.sort(gi)}else if(e.layoutConstraint)if(t.some(e=>0!==e.node.zIndex||!e.node.pageFlow)){const a=e.innerMostWrapped,n=[],o=[];let r=[],s=t.length,l=0;while(l<s){const e=t[l++],i=e.node.innerMostWrapped;if(i.pageFlow||i.actualParent===i.documentParent||i===a)r.push(e),n.push(i);else o.push(e)}if(r.sort(gi),s=o.length,s>0){const e=new Map,t=[],a=[];l=0;while(l<s){const r=o[l++],s=r.node.innerMostWrapped,c=s.ascend({condition:e=>n.includes(e),error:e=>e.rootElement})[0];if(c)(null===(i=e.get(c))||void 0===i?void 0:i.push(r))||e.set(c,[r]);else if(s.zIndex<0)a.push(r);else t.push(r)}for(const[i,n]of e.entries()){n.sort(gi);const e=r.findIndex(e=>e.node.innerMostWrapped===i);if(-1!==e)r.splice(e+1,0,...n);else{const e=n.length;l=0;while(l<e){const e=n[l++];if(e.node.innerMostWrapped.zIndex<0)a.push(e);else t.push(e)}}}if(a.length>0)a.sort(pi),r=a.concat(r);if(t.length>0)t.sort(pi),r=r.concat(t)}return r}return t}checkFrameHorizontal(e){switch(e.floated.size){case 1:if("center"===e.node.cssAscend("textAlign")&&e.some(e=>!e.block&&!e.floating))return true;else if(e.floated.has("right")){let t=0,i=false;for(const a of e)if(!a.floating){if(a.multiline)i=true;++t}else if(i)return false;return t>0&&!e.singleRowAligned}else if(e.item(0).floating)return e.linearY||e.some(e=>e.block&&!e.floating||!e.inlineFlow,{start:1});break;case 2:return true}return false}checkConstraintFloat(e){if(e.length>1){const t=this.application.clearMap;let i=true,a=true;for(const n of e)if(!t.has(n)){const e=n.inputElement||n.controlElement;if(i&&!(n.floating||n.autoMargin.horizontal||n.inlineDimension&&!e||n.imageOrSvgElement||n.marginTop<0))i=false;if(a&&0===n.percentWidth)a=false;if(!i&&!a)return false}return true}return false}checkConstraintHorizontal(e){if(e.length>1&&e.singleRowAligned){switch(e.floated.size){case 1:if(mi(e,this.application.clearMap))return false;else{let t=false,i=false;for(const a of e){const{float:e,autoMargin:n}=a;if("left"===e||n.right)if(t=true,i)return false;if("right"===e||n.left)if(i=true,t)return false}}break;case 2:return false}return e.some(t=>t.blockVertical||t.percentWidth>0&&t.percentWidth<1&&!t.inputElement&&!t.controlElement||t.marginTop<0||"bottom"===t.verticalAlign&&!e.parent.hasHeight)}return false}checkLinearHorizontal(e){const t=e.floated,i=t.size;if((0===i||1===i&&t.has("left"))&&0===e.node.lineHeight&&e.singleRowAligned){const{fontSize:t,lineHeight:i}=e.item(0),a=e.parent.actualBoxWidth();let n=0;for(const o of e){if(!(o.naturalChild&&o.isEmpty&&!o.inputElement&&!o.controlElement&&!o.positionRelative&&o.baseline&&!o.blockVertical&&0===o.zIndex&&o.lineHeight===i&&o.fontSize===t))return false;else n+=o.linear.width;if(n>=a)return false}return true}return false}setConstraints(e){e.each(e=>{const t=e.renderChildren,i=t.length;if(i>0&&e.hasProcedure(Bt.CONSTRAINT))if(e.hasAlign(4)){if(e.layoutConstraint&&!e.layoutElement)this.evaluateAnchors(t)}else if(e.layoutRelative)this.processRelativeHorizontal(e,t);else if(e.layoutConstraint){const a=new Array(i);let n=0,o=0;while(n<i){const i=t[n++];if(!i.positioned)if(i.pageFlow||i.autoPosition)a[o++]=i;else{const t=i.constraint;if(i.outerWrapper===e){if(!t.horizontal)i.anchorParent("horizontal",0);if(!t.vertical)i.anchorParent("vertical",0)}else{if(i.leftTopAxis){if(!t.horizontal)Controller.anchorPosition(i,e,true);if(!t.vertical)Controller.anchorPosition(i,e,false)}if(!t.horizontal)this.addGuideline(i,e,{orientation:"horizontal"});if(!t.vertical)this.addGuideline(i,e,{orientation:"vertical"});i.positioned=true}}}if(o>0){if(a.length=o,e.layoutHorizontal)this.processConstraintHorizontal(e,a);else if(o>1)this.processConstraintChain(e,a);else{const e=a[0];if(!e.constraint.horizontal)wi(e);if(!e.constraint.vertical)e.anchorParent("vertical"),Ei(e);View.setConstraintDimension(e,1)}this.evaluateAnchors(a)}}})}renderNodeGroup(e){const{node:i,containerType:a}=e;switch(a){case t.FRAME:case t.RELATIVE:case t.CONSTRAINT:break;case t.LINEAR:{const t=Y();t.android.orientation=xt(e.alignmentType,16)?"vertical":"horizontal",i.apply(t);break}case t.GRID:{const t=Y(),a=t.android;if(e.rowCount>0)a.rowCount=e.rowCount.toString();a.columnCount=e.columnCount>0?e.columnCount.toString():"1",i.apply(t);break}default:return e.isEmpty?this.renderNode(e):void 0}return i.setControlType(View.getControlName(a,i.api),a),i.addAlign(e.alignmentType),i.render(e.parent),{type:1,node:i,controlName:i.controlName}}renderNode(e){var i;let{parent:a,containerType:o}=e;const r=e.node;let s=View.getControlName(o,r.api);switch(r.tagName){case"IMG":case"CANVAS":{const i=r.element;let l;if("PICTURE"===r.actualParent.tagName){const e=this.localSettings.mimeType.image;if(l=ft(i,"*"===e?void 0:e),l){const e=l[0],t=e.actualWidth;if(t)jt(r,t,this.application.resourceHandler.getImage(i.src));else{const t=this.application.resourceHandler.getImage(e.src);if(t)jt(r,t.width,t)}}}else{let e;switch(r.css("objectFit")){case"fill":e="fitXY";break;case"contain":e="centerInside";break;case"cover":e="centerCrop";break;case"scale-down":e="fitCenter";break;case"none":e="center";break}if(e)r.android("scaleType",e)}if(r.baseline)if(r.android("baselineAlignBottom","true"),r.marginBottom>0&&a.layoutLinear&&a.layoutHorizontal)r.mergeGravity("layout_gravity","bottom");if(r.hasResource(Mt.IMAGE_SOURCE)){let e;if("CANVAS"===r.tagName){const t=i.toDataURL();if(t)r.setControlType(s,o),e="canvas_"+vt(r.controlId,true),this.application.resourceHandler.writeRawImage("image/png",{filename:e+".png",data:t,encoding:"base64"})}else e=this.application.resourceHandler.addImageSrc(i,"",l);if(e)r.android("src","@drawable/"+e)}if(!r.pageFlow&&a===r.absoluteParent&&(r.left<0&&"hidden"===a.css("overflowX")||r.top<0&&"hidden"===a.css("overflowY"))){const i=this.application.createNode(r.sessionId,{parent:a,innerWrap:r});if(i.setControlType(n.FRAME,t.FRAME),i.inherit(r,"base"),i.cssCopy(r,"position","zIndex"),i.exclude({resource:Mt.ALL,procedure:Bt.ALL}),i.autoPosition=false,r.percentWidth>0&&a.layoutConstraint&&(a.blockStatic||a.hasWidth))i.app("layout_constraintWidth_percent",yt(r.percentWidth,r.localSettings.floatPrecision)),i.setLayoutHeight("0px");else if(r.hasPX("width"))i.setLayoutWidth(ht(r.actualWidth));else i.setLayoutWidth("wrap_content");if(r.percentHeight>0&&a.layoutConstraint)i.app("layout_constraintHeight_percent",yt(r.percentHeight,r.localSettings.floatPrecision)),i.setLayoutHeight("0px");else if(r.hasPX("height"))i.setLayoutHeight(ht(r.actualHeight));else i.setLayoutHeight("wrap_content");i.render(a),i.saveAsInitial(),r.modifyBox(2,r.top),r.modifyBox(16,r.left),this.application.addLayoutTemplate(a,i,{type:1,node:i,controlName:n.FRAME}),a=i,e.parent=i}break}case"INPUT":{const e=r.element;switch(e.type){case"radio":case"checkbox":if(e.checked)r.android("checked","true");break;case"text":r.android("inputType","text");break;case"password":r.android("inputType","textPassword");break;case"number":case"range":r.android("inputType","number"),r.android("progress",e.value),$t(r,e);break;case"time":r.android("inputType","time"),$t(r,e);break;case"date":r.android("inputType","date"),$t(r,e);break;case"datetime-local":r.android("inputType","datetime"),$t(r,e);break;case"email":r.android("inputType","textEmailAddress"),Kt(r,e);break;case"tel":r.android("inputType","phone"),Kt(r,e);break;case"url":r.android("inputType","textUri"),Kt(r,e);break;case"week":case"month":case"search":r.android("inputType","text"),Kt(r,e);break;case"image":case"color":if(!r.hasWidth)r.css("width",ht(r.bounds.width));break}break}case"BUTTON":for(const e of r.naturalChildren)if(!e.pageFlow||!e.textElement)e.android("elevation","2px");break;case"TEXTAREA":{const{cols:e,maxLength:t,rows:i}=r.element;switch(r.android("minLines",i>0?i.toString():"2"),r.css("verticalAlign")){case"middle":r.mergeGravity("gravity","center_vertical");break;case"bottom":r.mergeGravity("gravity","bottom");break;default:r.mergeGravity("gravity","top");break}if(t>0)r.android("maxLength",t.toString());if(!r.hasWidth&&e>0)r.css("width",ht(8*e));if(!r.hasHeight)r.css("height",ht(r.bounds.height));if(r.android("scrollbars","vertical"),r.android("inputType","textMultiLine"),r.overflowX)r.android("scrollHorizontally","true");break}case"LEGEND":{if(!r.hasWidth)r.css("minWidth",ht(r.actualWidth)),ei(r);const e=r.actualHeight*this.localSettings.deviations.legendBottomOffset;r.modifyBox(8,e),r.linear.bottom+=e;break}case"METER":case"PROGRESS":{const{min:e,max:t,value:i}=r.element;let a,n;if("METER"===r.tagName){if(({meterForegroundColor:a,meterBackgroundColor:n}=this.localSettings.style),t){if(i)r.android("progress",Math.round(i/t*100).toString());if(100===t)r.android("min",e.toString()),r.android("max",t.toString())}}else{if(({progressForegroundColor:a,progressBackgroundColor:n}=this.localSettings.style),i)r.android("progress",i.toString());if(t)r.android("max",t.toString())}if(!r.hasWidth)r.css("width",ht(r.bounds.width));if(!r.hasHeight)r.css("height",ht(r.bounds.height));r.android("progressTint","@color/"+Resource.addColor(a)),r.android("progressBackgroundTint","@color/"+Resource.addColor(n)),r.attr("_","style","@android:style/Widget.ProgressBar.Horizontal"),r.exclude({resource:Mt.BOX_STYLE|Mt.FONT_STYLE});break}case"AUDIO":case"VIDEO":{const i=this.localSettings.mimeType.video,a=r.element;let n,l=a.src.trim();if(At(i,l))n=It(l);else l="",Rt(a.children,e=>{if("SOURCE"===e.tagName)if(At(i,e.src))return l=e.src.trim(),n=It(l),true;else if(n=e.type.trim().toLowerCase(),i.includes(n))return l=e.src,true});if(!r.hasPX("width"))r.css("width",ht(r.actualWidth),true);if(!r.hasPX("height"))r.css("height",ht(r.actualHeight),true);if(r.inline)ei(r);if(""!==l){if(this.application.resourceHandler.addVideo(l,n),r.inlineText=false,r.exclude({resource:Mt.FONT_STYLE}),_t(a.poster))Resource.addImage({mdpi:a.poster.trim()})}else if(_t(a.poster)){r.setCacheValue("tagName","IMG"),l=a.src,a.src=a.poster.trim(),e.containerType=t.IMAGE;const i=this.renderNode(e);return a.src=l,i}else o=t.TEXT,s=View.getControlName(o,r.api),e.containerType=o,r.inlineText=true}}switch(s){case n.TEXT:{let e="";if(r.overflowX)e+="horizontal";if(r.overflowY)e+=(""!==e?"|":"")+"vertical";if(""!==e)r.android("scrollbars",e);if(r.has("letterSpacing"))r.android("letterSpacing",yt(r.toFloat("letterSpacing")/r.fontSize,r.localSettings.floatPrecision));if("justify"===r.css("textAlign"))r.android("justificationMode","inter_word");if(r.has("textShadow")){const e=/((?:rgb|hsl)a?\([^)]+\)|[a-z]{4,})?\s*(-?[\d.]+[a-z]+)\s+(-?[\d.]+[a-z]+)\s*([\d.]+[a-z]+)?/.exec(r.css("textShadow"));if(e){const t=Resource.addColor(ct(e[1]||r.css("color")));if(""!==t){const i=r.localSettings.floatPrecision;r.android("shadowColor","@color/"+t),r.android("shadowDx",yt(2*r.parseWidth(e[2]),i)),r.android("shadowDy",yt(2*r.parseHeight(e[3]),i)),r.android("shadowRadius",yt(e[4]?Math.max(r.parseWidth(e[4]),0):.01,i))}}}if("nowrap"===r.css("whiteSpace"))if(r.android("maxLines","1"),"ellipsis"===r.css("textOverflow")&&"hidden"===r.css("overflow"))r.android("ellipsize","end");break}case n.BUTTON:if(!r.hasHeight)r.android("minHeight",ht(Math.ceil(r.actualHeight)));r.mergeGravity("gravity","center_vertical"),Yt(r);break;case n.SELECT:case n.CHECKBOX:case n.RADIO:Yt(r);break;case n.EDIT:if(!r.companion&&r.hasProcedure(Bt.ACCESSIBILITY))[r.previousSibling,r.nextSibling].some(e=>{var t;if((null==e?void 0:e.visible)&&e.pageFlow){const i=r.elementId,a=e.element,n="LABEL"===e.documentParent.tagName&&e.documentParent;if(""!==i&&i===(null===(t=a.htmlFor)||void 0===t?void 0:t.trim()))return e.android("labelFor",r.documentId),true;else if(n&&e.textElement)return n.android("labelFor",r.documentId),true}return false});if(null===(i=r.element.list)||void 0===i?void 0:i.children.length)s=n.EDIT_LIST;else if(r.api>=26)r.android("importantForAutofill","no");Yt(r);case n.RANGE:if(!r.hasPX("width"))r.css("width",ht(r.bounds.width));break;case n.LINE:if(!r.hasHeight)r.setLayoutHeight(ht(r.contentBoxHeight||1));break}return r.setControlType(s,o),r.addAlign(e.alignmentType),r.render(a),{type:1,node:r,parent:a,controlName:s}}renderNodeStatic(e,t){let i=e.controlName;if(!i)if(e.controlType)i=View.getControlName(e.controlType,this.userSettings.targetAPI);else return"";const a=new View;if(this.afterInsertNode(a),a.setControlType(i),a.setLayoutWidth(e.width||"wrap_content"),a.setLayoutHeight(e.height||"wrap_content"),t)a.apply(t),t.documentId=a.documentId;return this.getEnclosingXmlTag(i,this.userSettings.showAttributes?a.extractAttributes(1):void 0,e.content)}renderSpace(e){const t=e.android;let{width:i,height:a}=e;if(i){if(gt(i))t.layout_columnWeight=yt(parseFloat(i)/100,this.localSettings.precision.standardFloat),i="0px"}else i="wrap_content";if(a){if(gt(a))t.layout_rowWeight=yt(parseFloat(a)/100,this.localSettings.precision.standardFloat),a="0px"}else a="wrap_content";if(void 0!==e.column)t.layout_column=e.column.toString();if(e.columnSpan)t.layout_columnSpan=e.columnSpan.toString();if(void 0!==e.row)t.layout_row=e.row.toString();if(e.rowSpan)t.layout_rowSpan=e.rowSpan.toString();const o={android:t,app:e.app},r=this.renderNodeStatic({controlName:n.SPACE,width:i,height:a},o);return e.documentId=o.documentId,r}addGuideline(e,t,i){this.applyGuideline(e,t,"horizontal",i),this.applyGuideline(e,t,"vertical",i)}addBarrier(e,t){const i=[];let a=e.length,r=0;while(r<a){const a=e[r++],n=a.constraint.barrier;if(!n)a.constraint.barrier={};else if(n[t])continue;i.push(a)}if(a=i.length,a>0){const e={android:{},app:{barrierDirection:t,constraint_referenced_ids:i.map(e=>V(e.anchorTarget.documentId)).join(",")}},{api:s,anchorTarget:l}=i[a-1],c=this.renderNodeStatic({controlName:s<29?n.BARRIER:o.BARRIER},e);switch(t){case"top":case"left":this.addBeforeOutsideTemplate(l.id,c,false);break;default:this.addAfterOutsideTemplate(l.id,c,false);break}const d=e.documentId;if(d){r=0;while(r<a)i[r++].constraint.barrier[t]=d;return d}}return""}evaluateAnchors(e){var t;const i=[],a=[],n=e.length;let o=0;while(o<n){const n=e[o++];if(n.constraint.horizontal)i.push(n);if(n.constraint.vertical)a.push(n);if(n.alignParent("top")||n.alignSibling("top")){let i=n;do{const a=i.alignSibling("bottomTop");if(""!==a){const t=e.find(e=>e.documentId===a);if((null==t?void 0:t.alignSibling("topBottom"))===i.documentId)if(t.alignParent("bottom"))break;else i=t;else break}else{if(i!==n&&!i.alignParent("bottom"))if(i.blockHeight)i.anchor("bottom","parent");else{const e=(null===(t=i.constraint.barrier)||void 0===t?void 0:t.bottom)||this.addBarrier([i],"bottom");if(e)i.anchor("bottomTop",e)}break}}while(true)}}o=0;while(o<n){const t=e[o++],n=t.constraint,r=n.current;if(!n.horizontal)for(const e in r){const{documentId:a,horizontal:s}=r[e];if(s&&i.some(e=>e.documentId===a)){n.horizontal=true,i.push(t),o=0;break}}if(!n.vertical)for(const e in r){const{documentId:i,horizontal:s}=r[e];if(!s&&a.some(e=>e.documentId===i)){n.vertical=true,a.push(t),o=0;break}}}}createNodeGroup(e,t,i,a){const n=new ViewGroup(this.application.nextId,e,t);if(this.afterInsertNode(n),i)i.replaceTry({child:e,replaceWith:n,notFoundAppend:true});else n.containerIndex=e.containerIndex;return this.application.getProcessingCache(e.sessionId).add(n,true===(null==a?void 0:a.delegate),true===(null==a?void 0:a.cascade)),n}createNodeWrapper(e,t,i={}){var a,n,o;const{children:r,containerType:s,alignmentType:l}=i,c=this.application.createNode(e.sessionId,{parent:t,children:r,append:true,innerWrap:e,delegate:true,cascade:true===i.cascade||!!r&&r.length>0&&!e.rootElement});if(c.inherit(e,"base","alignment"),e.documentRoot)c.documentRoot=true,e.documentRoot=false;if(c.actualParent=t.naturalElement?t:e.actualParent,s)c.setControlType(View.getControlName(s,e.api),s);if(l)c.addAlign(l);if(c.addAlign(16384),c.exclude({resource:null!==(a=i.resource)&&void 0!==a?a:Mt.BOX_STYLE|Mt.ASSET,procedure:null!==(n=i.procedure)&&void 0!==n?n:Bt.CUSTOMIZATION,section:null!==(o=i.section)&&void 0!==o?o:Ot.ALL}),c.saveAsInitial(),c.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),false!==i.inheritContentBox)c.setCacheValue("contentBoxWidth",e.contentBoxWidth),c.setCacheValue("contentBoxHeight",e.contentBoxHeight);if(i.resetMargin)e.resetBox(30,c);if(i.inheritDataset&&e.naturalElement)Object.assign(c.dataset,e.dataset);if(e.documentParent.layoutElement){const t=e.namespace("android");for(const e in t)if(e.startsWith("layout_"))c.android(e,t[e]),delete t[e]}if((e.renderParent||t).layoutGrid&&"0px"===e.android("layout_width")){const t=e.android("layout_columnWeight");if(parseFloat(t)>0)e.delete("android","layout_columnWeight"),e.setLayoutWidth("match_parent"),c.android("layout_columnWeight",t),c.setLayoutWidth("0px")}if(e.renderParent&&e.removeTry({alignSiblings:true}))e.rendered=false;return c}processRelativeHorizontal(e,i){const a=[];let o,r=false,s=false;if(e.hasAlign(16)){let e;const t=i.length;let n=0;while(n<t){const t=i[n++];if(e)t.anchor("topBottom",e.documentId);else t.anchor("top","true");if(t.pageFlow)a.push([t]),e=t;else r=true}}else{const t=e.nodeGroup?e.documentParent:e,n=this.application.clearMap,s="nowrap"!==e.css("whiteSpace");let l=t.actualBoxWidth(Ti.call(this,e,i)),c=0;if(e.naturalElement){if(e.blockDimension)c=e.parseUnit(e.css("textIndent"));if(e.floating){const t=e.nextSibling;if((null==t?void 0:t.floating)&&t.float!==e.float&&t.hasWidth)if(l=Math.max(l,e.actualParent.box.width-t.linear.width),!e.visibleStyle.background&&!e.hasPX("maxWidth")&&l>e.width)e.css("width",ht(l),true)}}const d={clearMap:n,textIndent:c,boxWidth:l,rowLength:0},h=ai(i);for(let t=0;t<2;++t){const i=h[t],f=i.length;if(0===f)continue;const u=1===t;let p,g,m,b,y,S=true,T=0,w=false;if(u){if((!e.naturalElement&&i[0].actualParent||e).cssAny("textAlign",{initial:true,values:["right","end"]}))g="right",S=false,i[f-1].anchor(g,"true");else g="left";if(i.some(e=>e.floating))Xt(i);m=a}else g="right",d.rowLength=0,o=[],m=o;for(let t=0;t<f;++t){const a=i[t];let o;if(u&&S){if(o="leftRight",0===t&&a.inline&&Math.abs(c)>=a.actualWidth&&"right"!==a.float&&!a.positionRelative)if(w=true,!a.floating)a.setCacheValue("float","left"),a.setCacheValue("floating",true)}else o="rightLeft";if(!a.pageFlow){if(b){const e=b.documentId;a.anchor(o,e),a.anchor("top",e)}else a.anchor(g,"true"),a.anchor("top","true");r=true;continue}let h,f=a.bounds,E=a.multiline,v=true===a.autoMargin.horizontal;if(a.styleText&&!a.hasPX("width")){const e=a.textBounds;if(e&&(e.numberOfLines>1||Math.ceil(e.width)<a.box.width))f=e}if(E&&Math.floor(f.width)<=l&&!a.hasPX("width")&&!bi(a))E=false,a.multiline=false;if(v)if(a.autoMargin.leftRight)a.anchorParent("horizontal");else a.anchor(a.autoMargin.left?"right":"left","true");if(b){h=a.inlineVertical&&b.inlineVertical&&a.previousSibling!==b?mt(b.element,a.element):void 0;let i=false,r=false;if(a.textElement){let e=true;if(b.textElement)if(1===t&&a.plainText&&a.previousSibling===b&&!/^\s+/.test(a.textContent)&&!/\s+$/.test(b.textContent))r=true,e=false;else if(s&&b.multiline&&(b.bounds.width>=l||a.plainText&&Resource.hasLineBreak(b,false,true)))i=true,e=false;if(e&&s&&!di(a,b,E,T,d))if(ni(a,f,E,p,T,d))i=true;else if("CODE"!==a.actualParent.tagName)i=E&&a.plainText||bi(a)}if(b.floating&&Ft(a,b))o="";if(i||a.nodeGroup&&!a.hasAlign(128)||Math.ceil(a.bounds.top)>=b.bounds.bottom&&(a.blockStatic||a.floating&&b.float===a.float)||!a.textElement&&ni(a,f,E,p,T,d)&&!di(a,b,E,T,d)||!a.floating&&(b.blockStatic||a.siblingsLeading.some(e=>e.excluded&&e.blockStatic)||(null==h?void 0:h.some(e=>qt(e))))||b.autoMargin.horizontal||n.has(a)||Resource.checkPreIndent(b)){if(n.has(a)&&!p)a.setBox(2,{reset:1});if(S){if(p&&(a.bounds.bottom<=p.bounds.bottom||w)){if(!v)a.anchor(o,p.documentId)}else{if(!v)a.anchor(g,"true");p=void 0}v=true}else{if(p&&a.linear.bottom>p.bounds.bottom)p=void 0;b.anchor(g,"true")}T=Math.min(0,i&&!b.multiline&&E&&!n.has(a)?a.linear.right-e.box.right:0),y=[a],m.push(y),d.items=y,++d.rowLength}else{if(""!==o)if(S){if(!v)a.anchor(o,b.documentId),v=true}else b.anchor(o,a.documentId);if(E&&!a.hasPX("width")&&!b.floating&&!r)a.multiline=false;y.push(a)}}else{if(S)if(!v)a.anchor(g,"true");y=[a],m.push(y),d.items=y,++d.rowLength}if("left"===a.float&&u)if(p){if(a.linear.bottom>p.linear.bottom)p=a}else p=a;if(false===(null==h?void 0:h.some(e=>!!St(e,a.sessionId)||qt(e)))){const e=bt(h[0]);if(!e.numberOfLines){const t=h.length>1&&bt(h.pop());if(!t||!t.numberOfLines)T+=t?e.left-t.right:e.width}}T+=a.marginLeft+f.width+a.marginRight,b=a}}if(c<0&&1===a.length)e.setCacheValue("paddingLeft",Math.max(0,e.paddingLeft+c))}if(a.length>1||o&&o.length>1)s=true;const l=a=>{let o=null;const r=a.length,l=1===r&&!e.hasHeight;for(let c=0,d=0;c<r;++c){const h=a[c];let f;const u=h.length;if(u>1){const a=Ut(h);f=Gt.baseline(a.length>0?h.filter(e=>!a.includes(e)):h);let p=a[0],g=0,m=null;if(f&&p)if(f!==p&&f.bounds.height<p.bounds.height)f.anchor("bottom",p.documentId);else f=Gt.baseline(h),p=void 0;const b=[],y=0===c?"true":null==f?void 0:f.documentId;d=0;while(d<u){const t=h[d++];if(t===f||t===p)continue;const i=t.inlineVertical?t.css("verticalAlign"):"";if(t.controlElement){let i=t.bounds.top;if(o)i-=o.linear.bottom;else t.anchor("top","true"),i-=e.box.top;t.setBox(2,{reset:1,adjustment:i}),t.baselineAltered=true;continue}let a=false;if(t.baseline)if(t.renderChildren.length>0&&(pt(t.verticalAlign)||!t.baselineElement))a=true;else b.push(t);else switch(i){case"text-top":if(!m)m=Gt.baseline(h,true);if(m&&t!==m)t.anchor("top",m.documentId);break;case"super":if(!t.baselineAltered)t.modifyBox(2,-1*Math.floor(t.baselineHeight*this.localSettings.deviations.superscriptTopOffset));case"top":if(y&&y!==t.documentId)t.anchor("top",y);else if(f)t.anchor("top",f.documentId);break;case"middle":{const e=Math.max(t.actualHeight,t.lineHeight);if(!s){if(t.anchor("centerVertical","true"),t.imageElement)g=Math.max(e,g)}else if(f){const i=Math.max(f.actualHeight,f.lineHeight);if(e<i)t.anchor("top",f.documentId),t.setBox(2,{reset:1,adjustment:Math.round((i-e)/2)}),t.baselineAltered=true;else if(e>g)g=e}break}case"text-bottom":if(!m)m=Gt.baseline(h,true);if(m&&m!==t)t.anchor("bottom",m.documentId);else if(f)t.anchor("bottom",f.documentId);break;case"sub":if(!t.baselineAltered)t.modifyBox(2,1*Math.ceil(t.baselineHeight*this.localSettings.deviations.subscriptBottomOffset));case"bottom":if(y&&!kt(e.bounds.height,t.bounds.height))if("true"===y&&!e.hasHeight)t.anchor("top",y),t.setBox(2,{reset:1,adjustment:t.bounds.top-e.box.top}),t.baselineAltered=true;else t.anchor("bottom",y);break;default:a=!t.baselineAltered;break}if(0===c&&a)t.anchor("top","true")}const S=b.length;if(f){if(f.baselineActive=true,S>0){if(zt(f,b,l,e.box.top),l&&f.is(t.BUTTON))f.anchor("centerVertical","true"),f=null}else if(f.textElement)if(g>Math.max(f.actualHeight,f.lineHeight))f.anchor("centerVertical","true"),f=null;else if(f.multiline){const{left:e,height:t}=f.bounds;let i=0;while(i<u){const a=h[i++];if(a===f)break;else if(e<a.bounds.right&&t<a.bounds.height){f.anchor("bottom",a.documentId);break}}}}else if(S>0&&S<u)if(p=Ut(h)[0],p){let e=0;while(e<S){const t=b[e++];if(t.baseline&&!t.multiline&&p.bounds.height>t.bounds.height)t.anchor("bottom",p.documentId)}}let T=true;d=u-1;while(d>=0){const e=h[d--];if(e.textElement)e.setSingleLine(T&&!e.rightAligned&&!e.centerAligned);T=false}if("center"===e.cssInitial("textAlign")&&r>1){const a=this.application,r=this.createNodeGroup(h[0],h,e);r.setControlType(n.RELATIVE,t.RELATIVE),r.render(e),r.anchorParent("horizontal"),r.setLayoutWidth("wrap_content"),r.setLayoutHeight("wrap_content");let s=-1;d=0;while(d<u){const e=h[d++],t=i.indexOf(e);if(-1!==t)if(-1===s)s=t;else s=Math.min(t,s);e.removeTry(),e.render(r),a.addLayoutTemplate(r,e,{type:1,node:e,controlName:e.controlName})}if(a.addLayoutTemplate(e,r,{type:1,node:r,controlName:r.controlName},s),o)r.anchor("topBottom",o.documentId);else o=r;continue}}else if(f=h[0],f.centerAligned)f.anchorParent("horizontal"),f.anchorDelete("left","right");let p=false;if(!f)f=h[0],p=true;d=0;while(d<u){const e=h[d++];if(o&&!e.alignSibling("baseline"))e.anchor("topBottom",o.documentId);if(p&&e.linear.bottom>=f.linear.bottom)f=e}o=f}};if(l(a),o)l(o);if(e.horizontalRows=o?a.concat(o):a,r)e.renderChildren.sort((e,t)=>{if(!e.pageFlow&&t.pageFlow)return 1;else if(!t.pageFlow&&e.pageFlow)return-1;return 0}),e.renderTemplates.sort((e,t)=>{const i=e.node.pageFlow,a=t.node.pageFlow;if(!i&&a)return 1;else if(!a&&i)return-1;return 0})}processConstraintHorizontal(e,t){const i=e.hasAlign(2048),[a,n,o,r]=ci(i);let s,l,c,d,h,f=true,u=0,p=0;if(!i)switch(e.cssAscend("textAlign",{startSelf:true})){case"center":u=.5;break;case"right":case"end":u=1;break}if(t.some(e=>e.floating)){if(!i)switch(u){case.5:{let i;if([i,t]=Nt(t,e=>e.floating||true===e.autoMargin.horizontal),i.length>0)this.processConstraintChain(e,i);break}case 1:{let i;if([i,t]=function(e){return Nt(e,e=>"left"===e.float||true===e.autoMargin.right)}(t),i.length>0)this.processConstraintChain(e,i);break}default:{let i;if([i,t]=ai(t),i.length>0)this.processConstraintChain(e,i);break}}Xt(t)}if(!e.hasPX("width")&&t.some(e=>e.percentWidth>0))e.setLayoutWidth("match_parent");const g=Gt.baseline(t),m=null==g?void 0:g.documentId;let b=View.availablePercent(t,"width",e.box.width);const y=t.length;for(let i=0;i<y;++i){const S=t[i];if(h){if(S.pageFlow){if(h.anchor(r,S.documentId),S.anchor(o,h.documentId),i===y-1)S.anchor(n,"parent")}else if(S.autoPosition)S.anchor(o,h.documentId)}else if(1===y)if(u=S.centerAligned?.5:S.rightAligned?1:0,S.blockStatic||.5===u)S.anchorParent("horizontal",u);else S.anchor(a,"parent"),S.anchorStyle("horizontal",0);else S.anchor(a,"parent"),S.anchorStyle("horizontal",u,Gt.justified(S.innerMostWrapped)?"spread_inside":"packed");if(S.pageFlow){if(S!==g){if(S.controlElement)f=oi(e,S);else if(S.inlineVertical){if(!c||yi(S)>yi(c))c=S;switch(S.css("verticalAlign")){case"text-top":if(void 0===s)s=Gt.baseline(t,true);if(s&&S!==s)S.anchor("top",s.documentId);else f=oi(e,S);break;case"middle":if(void 0===l)l=Ut(t)[0]||null;if(l||false===(null==g?void 0:g.textElement))f=oi(e,S);else S.anchorParent("vertical",.5);break;case"text-bottom":if(void 0===s)s=Gt.baseline(t,true);if(s&&S!==s){if(void 0===l)l=Ut(t)[0]||null;if(S!==l)S.anchor("bottom",s.documentId);else if(l)f=oi(e,S);break}case"bottom":if(!d){let e=0;while(e<y){const i=t[e++];if(!i.baseline&&(!d||i.linear.bottom>d.linear.bottom))d=i}}if(S===d)f=oi(e,S);else S.anchor("bottom","parent");break;case"baseline":if(!g||S.blockVertical||!S.textElement&&yi(S)>yi(g))f=oi(e,S);else S.anchor("baseline",m||"parent"),++p;break;default:f=oi(e,S);break}}else if(S.plainText)S.anchor("baseline",m||"parent"),++p;else f=oi(e,S);S.anchored=true}b=View.setConstraintDimension(S,b),h=S}else if(S.autoPosition)if(m)S.anchor("top",m);else S.anchorParent("vertical",0),S.anchored=true,f=false}if(g){if(c&&g.textElement&&yi(c)>yi(g))switch(c.verticalAlign){case"middle":g.anchorParent("vertical",.5,"",true);break;case"baseline":g.anchor("baseline",c.documentId);break;case"bottom":case"text-bottom":g.anchor("bottom",c.documentId);break;default:oi(e,g);break}else if(f&&g.baselineElement&&!g.imageOrSvgElement&&e.ascend({condition:e=>e.layoutHorizontal,error:e=>e.naturalChild&&e.layoutVertical||e.layoutGrid,attr:"renderParent"}).length>0)g.anchorParent("vertical"),g.anchor("baseline","parent");else oi(e,g);g.baselineActive=p>0,g.anchored=true}}processConstraintChain(e,t){const i=this.application.clearMap,a=e.hasAlign(512),n=t[0].actualParent||e,o=Gt.partitionRows(t,i);let r,s=[],l=false;const c=o.length;for(let t=0;t<c;++t){const d=o[t],[h,f]=Nt(d,e=>"right"===e.float||true===e.autoMargin.left);let u,p,g,m=false;const b=(o,h)=>{const f=o.length;if(0===f)return;const[b,y,S,T]=ci(h),w=o[0],E=o[f-1];if(f>1){if(w.anchor(b,"parent"),h)E.anchorStyle("horizontal",1,"packed");else w.anchorStyle("horizontal",!a&&"center"===n.css("textAlign")?.5:0,1===c&&Gt.justified(w.innerMostWrapped)?"spread_inside":"packed");E.anchor(y,"parent")}else if(!w.constraint.horizontal)wi(w);let v=View.availablePercent(d,"width",e.box.width);if(1===t||l)m=!((w.floating||true!==(null==r?void 0:r.every(e=>e.floating||!e.pageFlow))||0!==i.size&&d.some(e=>Zt(e,i)))&&(w.pageFlow||w.autoPosition&&1!==f)&&true!==(null==r?void 0:r.every(e=>!e.pageFlow))),l=m;g=void 0;for(let e=0;e<f;++e){const l=o[e];if(0===t||m)if(1===c)l.anchorParent("vertical"),Ei(l,1===f,true);else l.anchor("top","parent"),l.anchorStyle("vertical",0,"packed");else if(t===c-1&&!p)l.anchor("bottom","parent");if(l.autoMargin.leftRight)l.anchorParent("horizontal");else if(f>1){const t=o[e-1],i=o[e+1];if(t)if(!t.pageFlow&&t.autoPosition){let t,i=e-2;while(i>=0)if(t=o[i--],t.pageFlow)break;else t=void 0;if(t)l.anchor(S,t.documentId);else if(!l.constraint.horizontal)l.anchor(b,"parent")}else l.anchor(S,t.documentId);if(i)l.anchor(T,i.documentId)}if(v=View.setConstraintDimension(l,v),r&&0===e){if(i.has(l)&&!l.floating)l.modifyBox(2,-r[r.length-1].bounds.height,false);if(a){let e=false,t=0;while(t<s.length)if(l.bounds.top<Math.floor(s[t++].bounds.bottom)){e=true;break}if(e){u=r[r.length-1],t=s.length-2;while(t>=0){const e=s[t--];if(e.linear.bottom>u.linear.bottom){if(h&&Math.ceil(e.linear[y])-Math.floor(n.box[y])<l.linear.width)continue;if(l.anchorDelete(b),l.anchor(S,e.documentId,true),h)l.modifyBox(4,e.marginLeft);else l.modifyBox(16,e.marginRight);if(w.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),w.anchorDelete(T),E.anchorDelete(y),!p)p=l;break}}}}}if(!g||l.linear.height>g.linear.height)g=l}};if(b(f,false),b(h,true),a)s=s.concat(f,h);if(!m){if(r){const e=d[0],t=r.length,i=d.length;if(1===t&&1===i){const t=r[0];t.anchor("bottomTop",e.documentId),e.anchor("topBottom",t.documentId),e.app("layout_constraintVertical_bias","0")}else{if(!u||!p){u=r[0];let e=1;while(e<t){const t=r[e++];if(t.linear.bottom>u.linear.bottom)u=t}}if(!p){p=d[0];let e=p.linear.top,t=1;while(t<i){const i=d[t++],a=i.linear.top;if(a<e||a===e&&i.linear.height>p.linear.height)p=i,e=a}}const e=p.documentId;u.anchor("bottomTop",e),p.anchor("topBottom",u.documentId),Ei(p,1===t,true);const a=p.marginTop;let n=0;while(n<i){const t=d[n++];if(t!==p)Ei(t,1===i),t.anchor("top",e),t.modifyBox(2,-1*a)}}}r=d}}if(e.horizontalRows=o,!e.hasWidth&&t.some(e=>e.percentWidth>0))e.setLayoutWidth("match_parent",false)}applyGuideline(e,t,i,a){var r,s;if(e.constraint[i])return;let l,c,d;if(a)if(({orientation:l,percent:c,opposing:d}=a),l&&i!==l)return;let h=e.documentParent;if(t.nodeGroup&&!h.hasAlign(4))h=t;const f="horizontal"===i;let u,p;if(f)if(!d)u="left",p="right";else u="right",p="left";else if(!d)u="top",p="bottom";else u="bottom",p="top";const g=e.linear,m=h.box;if(!c&&!d){if(kt(g[u],m[u]))return void e.anchor(u,"parent",true);if(e.autoPosition){const t=e.siblingsLeading,a=t.length;if(a>0&&!e.alignedVertically()){let n=a-1;while(n>=0){const a=t[n--];if(a.pageFlow){if(a.renderParent===e.renderParent)return e.anchor(f?"leftRight":"top",a.documentId,true),void(e.constraint[i]=true);break}}}}if(!e.pageFlow&&"fixed"!==e.css("position")&&!t.hasAlign(4)){const a=t=>{if(!t.pageFlow)if(f){if(t.has("right")&&!t.has("left"))return!e.has("left")&&!e.has("right")}else if(t.has("bottom")&&!t.has("top"))return!e.has("top")&&!e.has("bottom");return true},n=e.innerMostWrapped.bounds,o=t.renderChildren,r=o.length;let s=0;while(s<r){const t=o[s++];if(t===e||t.plainText||t.pseudoElement||t.rootElement||!a(t))continue;const r=t.innerMostWrapped;if(r.pageFlow||t.constraint[i]){const{linear:a,bounds:o}=r;let s,l=NaN;if(kt(n[u],o[u]))s=u;else if(kt(g[u],a[u]))s=u,l=(f?n.left-o.left:n.top-o.top)+Qt(e,u);else if(kt(g[u],a[p]))if(f){if(!e.hasPX("left")&&!e.hasPX("right")||!t.inlineStatic&&t.hasPX("width",{percent:false,initial:true}))s="leftRight",l=n.left-o.right}else if(!e.hasPX("top")&&!e.hasPX("bottom")||!t.inlineStatic&&t.hasPX("height",{percent:false,initial:true}))s="topBottom",l=n.top-o.bottom;if(s){if(f){if(!isNaN(l))if(e.setBox(16,{reset:1,adjustment:0}),0!==l)e.translateX(l)}else if(!isNaN(l))if(e.setBox(2,{reset:1,adjustment:0}),0!==l)e.translateY(l);return e.anchor(s,t.documentId,true),void(e.constraint[i]=true)}}}const l=f?"top":"left";let c,d;s=0;while(s<r){const t=o[s++];if(t===e||t.pageFlow||t.rootElement||!t.constraint[i]||!a(t))continue;const r=t.innerMostWrapped,h=r.bounds;if(kt(n[l],h[l])||kt(g[l],r.linear[l])){const a=n[u]-h[p];if(a>=0)return void ii(e,f,i,t.documentId,f?"leftRight":"topBottom",a)}else if(h[u]<=n[u])if(h[l]<=n[l])c=r;else d=r}if(!c)c=d;if(c){const t=n[u]-c.bounds[u]+Qt(e,u);if(t>=0)return void ii(e,f,i,c.documentId,u,t)}}}const b=e.absoluteParent,y=e.positionStatic?e.bounds:g;let S="layout_constraintGuide_",T=0;if(!e.leftTopAxis&&h.rootElement){const t=e.renderParent;if(h.ascend({condition:e=>e===t,attr:"renderParent"}).length>0)T=f?!d?h.marginLeft:h.marginRight:!d?h.marginTop:h.marginBottom}if(c){const t=Math.abs(y[u]-m[u])/(f?m.width:m.height);S+="percent",T+=parseFloat(yt(!d?t:1-t,e.localSettings.floatPrecision))}else S+="begin",T+=y[u]-m[!d?u:p];if(!e.pageFlow){if(h.outerWrapper&&e.parent===h.outerMostWrapper)T+=h[f?!d?"paddingLeft":"paddingRight":!d?"paddingTop":"paddingBottom"];else if(b===e.documentParent){T=q(h,f?!d?256:64:!d?32:128,T)}}else if(e.inlineVertical){const t=Et(e.verticalAlign);if(t<0)T+=t}if(!f&&e.marginTop<0)T-=e.marginTop,e.setBox(2,{reset:1});if(e.constraint[i]=true,T<=0)e.anchor(u,"parent",true);else if(f&&T+y.width>=m.right&&h.hasPX("width")&&!e.hasPX("right")||!f&&T+y.height>=m.bottom&&h.hasPX("height")&&!e.hasPX("bottom"))e.anchor(p,"parent",true);else{const a=t.constraint.guideline||{},l=null===(s=null===(r=a[i])||void 0===r?void 0:r[S])||void 0===s?void 0:s[u];if(l)for(const t in l)if(parseInt(l[t])===T)return e.anchor(u,t,true),void e.anchorDelete(p);const h={android:{orientation:f?"vertical":"horizontal"},app:{[S]:c?T.toString():"@dimen/"+Resource.insertStoredAsset("dimens","constraint_guideline_"+(!d?u:p),ht(T))}};this.addAfterOutsideTemplate(e.id,this.renderNodeStatic({controlName:e.api<29?n.GUIDELINE:o.GUIDELINE},h),false);const g=h.documentId;if(g)if(e.anchor(u,g,true),e.anchorDelete(p),T>0)wt(a,i,S,u,g,T.toString()),t.constraint.guideline=a}}createLayoutGroup(e){return this.createNodeGroup(e.node,e.children,e.parent)}get containerTypeHorizontal(){return{containerType:t.RELATIVE,alignmentType:8}}get containerTypeVertical(){return{containerType:t.CONSTRAINT,alignmentType:16}}get containerTypeVerticalMargin(){return{containerType:t.FRAME,alignmentType:256}}get containerTypePercent(){return{containerType:t.CONSTRAINT,alignmentType:32768}}get afterInsertNode(){return e=>{e.localSettings=this._defaultViewSettings,e.api=this._targetAPI,e.setExclusions()}}get userSettings(){return this.application.userSettings}get screenDimension(){return this._screenDimension}}var vi={resources:{">":{color:{"@":["name"],"~":true}}}},xi={resources:{">":{dimen:{"@":["name"],"~":true}}}},Ai={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},_i={resources:{">":{string:{"@":["name"],"~":true}}}},Ri={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":true}}}}}},Ii={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":true}}}}}};const{fromLastIndexOf:Ni,parseMimeType:Ci,plainMap:ki}=squared.lib.util,{applyTemplate:Li,replaceTab:Pi}=squared.lib.xml,Oi=Resource.STORED;function Wi(e,t){const i=t.length;if(i>0){const a=new Array(i/3);for(let n=0,o=0;n<i;n+=3)a[o++]={pathname:e+t[n+1],filename:t[n+2],content:t[n]};return a}return t}function Di(e,t,i,a){const n=t.length;if(n>0){i=i.toLowerCase();let o=Ci(i);if(!o.startsWith("image/"))o="";const r=new Array(n/3);for(let s=0,l=0;s<n;s+=3){const n=t[s+2];let c;if(n.endsWith(".unknown"))c=(a?"png@:":"")+"image/unknown";else if(""!==o){const e=Ci(n);if(e!==o&&e.startsWith("image/"))c=i+(!/[@%]/.test(i)?"@":"")+":"+e}r[l++]={pathname:e+t[s+1],filename:n,mimeType:c,compress:a&&Resource.canCompressImage(n,o)?[{format:"png"}]:void 0,uri:t[s]}}return r}return t}function Bi(e,t){const i=t.length;if(i>0){const a=new Array(i/3);for(let n=0,o=0;n<i;n+=3)a[o++]={pathname:e,filename:t[n+2].toLowerCase(),mimeType:t[n+1],uri:t[n]};return a}return t}function Mi(e){return(e=e.trim().replace(/\\/g,"/"))+(!e.endsWith("/")?"/":"")}class File extends squared.base.FileUI{copyToDisk(e,t){return this.copying(Object.assign(Object.assign({},t),{assets:this.combineAssets(null==t?void 0:t.assets),directory:e}))}appendToArchive(e,t){return this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{assets:this.combineAssets(null==t?void 0:t.assets),appendTo:e}))}saveToArchive(e,t){return this.archiving(Object.assign(Object.assign({},t),{assets:this.combineAssets(null==t?void 0:t.assets),filename:e}))}resourceAllToXml(e={}){const t={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),anim:this.resourceAnimToXml(),drawableImage:this.resourceDrawableImageToString(),rawVideo:this.resourceRawVideoToString(),rawAudio:this.resourceRawAudioToString()};for(const e in t)if(0===t[e].length)delete t[e];if(e.directory||e.filename){const i=Mi(this.userSettings.outputDirectory);let a=[];for(const e in t)switch(e){case"drawableImage":a=a.concat(Di(i,t[e],this.userSettings.convertImages,this.userSettings.compressImages));break;case"rawVideo":a=a.concat(Bi(i+this.directory.video,t[e]));break;case"rawAudio":a=a.concat(Bi(i+this.directory.audio,t[e]));break;default:a=a.concat(Wi(i,t[e]));break}if(e.assets=a.concat(e.assets||[]),e.directory)this.copying(e);if(e.filename)this.archiving(e)}return t}resourceStringToXml(e={}){const t={string:[]},i=t.string;if(!Oi.strings.has("app_name"))i.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[e,t]of Array.from(Oi.strings.entries()).sort((e,t)=>e.toString().toLowerCase()>=t.toString().toLowerCase()?1:-1))i.push({name:e,innerText:t});return this.checkFileAssets([Pi(Li("resources",_i,[t]),this.userSettings.insertSpaces,true),this.directory.string,"strings.xml"],e)}resourceStringArrayToXml(e={}){if(Oi.arrays.size>0){const t={"string-array":[]},i=t["string-array"];for(const[e,t]of Array.from(Oi.arrays.entries()).sort())i.push({name:e,item:ki(t,e=>({innerText:e}))});return this.checkFileAssets([Pi(Li("resources",Ri,[t]),this.userSettings.insertSpaces,true),this.directory.string,"string_arrays.xml"],e)}return[]}resourceFontToXml(e={}){var t;if(Oi.fonts.size>0){const i=this.resource,{insertSpaces:a,targetAPI:n}=this.userSettings,o=n<26?d.app:d.android,r=Mi(this.userSettings.outputDirectory),s=this.directory.font,l=[];for(const[e,c]of Array.from(Oi.fonts.entries()).sort()){const d={"xmlns:android":o,font:[]},h=d.font;for(const a in c){const[n,o,l]=a.split("|");let d=e;if("normal"===o)d+="400"===l?"_normal":"_"+c[a];else d+="_"+o+("400"!==l?c[a]:"");h.push({font:"@font/"+d,fontStyle:o,fontWeight:l});const f=null===(t=i.getFont(n,o,l))||void 0===t?void 0:t.srcUrl;if(f)this.addAsset({pathname:r+s,filename:d+"."+(Resource.getExtension(f.split("?")[0]).toLowerCase()||"ttf"),uri:f})}let f=Pi(Li("font-family",Ai,[d]),a);if(n<26)f=f.replace(/\s+android:/g," app:");l.push(f,s,e+".xml")}return this.checkFileAssets(l,e)}return[]}resourceColorToXml(e={}){if(Oi.colors.size>0){const t={color:[]},i=t.color;for(const[e,t]of Array.from(Oi.colors.entries()).sort())i.push({name:t,innerText:e});return this.checkFileAssets([Pi(Li("resources",vi,[t]),this.userSettings.insertSpaces),this.directory.string,"colors.xml"],e)}return[]}resourceStyleToXml(e={}){const t=[];if(Oi.styles.size>0){const e={style:[]},i=e.style;for(const e of Array.from(Oi.styles.values()).sort((e,t)=>e.name.toString().toLowerCase()>=t.name.toString().toLowerCase()?1:-1)){const t=e.items;if(Array.isArray(t))i.push({name:e.name,parent:e.parent,item:ki(t.sort((e,t)=>e.key>=t.key?1:-1),e=>({name:e.key,innerText:e.value}))})}t.push(Pi(Li("resources",Ii,[e]),this.userSettings.insertSpaces),this.directory.string,"styles.xml")}if(Oi.themes.size>0){const{convertPixels:e,insertSpaces:i,manifestThemeName:a}=this.userSettings,n={};for(const[o,r]of Oi.themes.entries()){const s=/^(.+)\/(.+?\.\w+)$/.exec(o);if(s){const l={style:[]},c=l.style;for(const[e,t]of r.entries()){const i=[],r=t.items;for(const e in r)i.push({name:e,innerText:r[e]});if(!n[o]||e!==a||l.length)c.push({name:e,parent:t.parent,item:i});if(e===a)n[o]=true}const d=Li("resources",Ii,[l]);t.push(Pi("dp"===e?d.replace(/>(-?[\d.]+)px</g,(e,...t)=>">"+X(t[0],false)+"<"):d,i),s[1],s[2])}}}return this.checkFileAssets(t,e)}resourceDimenToXml(e={}){if(Oi.dimens.size>0){const t=this.userSettings.convertPixels,i={dimen:[]},a=i.dimen;for(const[e,i]of Array.from(Oi.dimens.entries()).sort())a.push({name:e,innerText:t?X(i,false):i});return this.checkFileAssets([Pi(Li("resources",xi,[i])),this.directory.string,"dimens.xml"],e)}return[]}resourceDrawableToXml(e={}){if(Oi.drawables.size>0){const{convertPixels:t,insertSpaces:i}=this.userSettings,a=this.directory.image,n=[];for(const[e,o]of Oi.drawables.entries())n.push(Pi("dp"===t?o.replace(/"(-?[\d.]+)px"/g,(e,...t)=>'"'+X(t[0],false)+'"'):o,i),a,e+".xml");return this.checkFileAssets(n,e)}return[]}resourceAnimToXml(e={}){if(Oi.animators.size>0){const t=this.userSettings.insertSpaces,i=[];for(const[e,a]of Oi.animators.entries())i.push(Pi(a,t),"res/anim",e+".xml");return this.checkFileAssets(i,e)}return[]}resourceDrawableImageToString(e={}){if(Oi.images.size>0){const t=this.directory.image,i=[];for(const[e,a]of Oi.images.entries())if(Object.keys(a).length>1)for(const n in a){const o=a[n];i.push(o,t+"-"+n,e+"."+(Resource.getExtension(o).toLowerCase()||"unknown"))}else{const n=a.mdpi;if(n)i.push(n,t,e+"."+(Resource.getExtension(n).toLowerCase()||"unknown"))}if(e.directory||e.filename){if(e.assets=Di(Mi(this.userSettings.outputDirectory),i,this.userSettings.convertImages,this.userSettings.compressImages).concat(e.assets||[]),e.directory)this.copying(e);if(e.filename)this.archiving(e)}return i}return[]}resourceRawVideoToString(e={}){if(Resource.ASSETS.video.size>0){const t=[];for(const e of Resource.ASSETS.video.values()){const i=e.uri;t.push(i,e.mimeType||"",Ni(i,"/","\\"))}if(e.directory||e.filename){if(e.assets=Bi(Mi(this.userSettings.outputDirectory)+this.directory.video,t).concat(e.assets||[]),e.directory)this.copying(e);if(e.filename)this.archiving(e)}return t}return[]}resourceRawAudioToString(e={}){if(Resource.ASSETS.video.size>0){const t=[];for(const e of Resource.ASSETS.audio.values()){const i=e.uri;t.push(i,e.mimeType||"",Ni(i,"/","\\"))}if(e.directory||e.filename){if(e.assets=Bi(Mi(this.userSettings.outputDirectory)+this.directory.audio,t).concat(e.assets||[]),e.directory)this.copying(e);if(e.filename)this.archiving(e)}return t}return[]}layoutAllToXml(e,t={}){const i=t.directory||t.filename,a={},n=[];for(let t=0;t<e.length;++t){const{content:o,filename:r,pathname:s}=e[t];if(a[r]=[o],i)n.push({pathname:s,filename:0===t?this.userSettings.outputMainFileName:r+".xml",content:o})}if(i){if(t.assets=t.assets?n.concat(t.assets):n,t.directory)this.copying(t);if(t.filename)this.archiving(t)}return a}combineAssets(e){const t=this.userSettings;let i=[];if(e){const a=e.length;let n=true,o=0;while(o<a){const i=e[o++];if(!i.uri)if(n)i.filename=t.outputMainFileName,n=false;else{const e=i.filename;if(!e.endsWith(".xml"))i.filename=e+".xml"}}i=i.concat(e)}const a=Mi(t.outputDirectory);return i.concat(Wi(a,this.resourceStringToXml()),Wi(a,this.resourceStringArrayToXml()),Wi(a,this.resourceFontToXml()),Wi(a,this.resourceColorToXml()),Wi(a,this.resourceDimenToXml()),Wi(a,this.resourceStyleToXml()),Wi(a,this.resourceDrawableToXml()),Di(a,this.resourceDrawableImageToString(),t.convertImages,t.compressImages),Wi(a,this.resourceAnimToXml()),Bi(a+this.directory.video,this.resourceRawVideoToString()),Bi(a+this.directory.audio,this.resourceRawAudioToString()))}checkFileAssets(e,t){if(t.directory||t.filename){if(t.assets=Wi(Mi(this.userSettings.outputDirectory),e).concat(t.assets||[]),t.directory)this.copying(t);if(t.filename)this.archiving(t)}return e}get userSettings(){return this.resource.userSettings}}const{formatPX:Hi}=squared.lib.css,{NODE_PROCEDURE:Gi,NODE_RESOURCE:Xi}=squared.base.lib.enumeration;class Accessibility extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=true,this.options={displayLabel:false}}beforeBaseLayout(e){const t=this.application.getProcessingCache(e);t.each(e=>{if(e.inputElement&&e.hasProcedure(Gi.ACCESSIBILITY)){const i=e.attributes["aria-describedby"];if(i){const a=t.find(e=>e.elementId===i);if(a){const t=a.textContent.trim();if(""!==t)e.data(Resource.KEY_NAME,"titleString",t)}}switch(e.containerName){case"INPUT_RADIO":case"INPUT_CHECKBOX":if(!e.rightAligned&&!e.centerAligned){const t=e.elementId;[e.nextSibling,e.previousSibling].some(i=>{if((null==i?void 0:i.pageFlow)&&!i.visibleStyle.backgroundImage&&i.visible){let a=false;if(t&&t===i.toElementString("htmlFor"))a=true;else if(i.textElement){const t=i.actualParent;if("LABEL"===t.tagName)t.renderAs=e,a=true;else if(i.plainText)a=true}if(a){if(i.labelFor=e,!this.options.displayLabel)i.hide();return true}}return false})}break;case"INPUT_IMAGE":if(e.hasResource(Xi.IMAGE_SOURCE))e.data(Resource.KEY_NAME,"embedded",[e]);break;case"BUTTON":if(e.length>0){let{width:t,height:i}=e.bounds,a=false;if(e.cascade(n=>{if(n.width>=t&&n.height>=i){if(({width:t,height:i}=n),!e.visibleStyle.background)e.inherit(n,"boxStyle");a=true}}),a)e.css("minWidth",Hi(t)),e.css("minHeight",Hi(i));const n=e.extract(e=>!e.textElement);if(n.length>0&&e.hasResource(Xi.IMAGE_SOURCE))e.data(Resource.KEY_NAME,"embedded",n);e.clear()}break}}})}}const{formatPX:Vi}=squared.lib.css,{createElement:zi}=squared.lib.dom,{truncate:Fi}=squared.lib.math,{safeNestedArray:Ui}=squared.lib.util,{APP_SECTION:qi,BOX_STANDARD:Yi,NODE_ALIGNMENT:ji,NODE_PROCEDURE:Ki,NODE_RESOURCE:$i,NODE_TEMPLATE:Zi}=squared.base.lib.enumeration;class Column extends squared.base.extensions.Column{processNode(e,i){return super.processNode(e,i),e.containerType=t.CONSTRAINT,e.addAlign(4),{complete:true,subscribe:true}}postBaseLayout(e){const i=e.data(this.name,"mainData");if(i){const a=this.application,{columnCount:o,columnGap:r,columnWidth:s,columnRule:l,columnSized:c,boxWidth:d,rows:h,multiline:f}=i,{borderLeftWidth:u,borderLeftColor:p,borderLeftStyle:g}=l,m=e.parseUnit(u),b="none"!==g&&m>0,y=()=>{const i=a.createNode(e.sessionId,{parent:e,append:true});let o;if(i.inherit(e,"base"),i.containerName=e.containerName+"_COLUMNRULE",i.setControlType(n.LINE,t.LINE),i.exclude({resource:$i.ASSET,procedure:Ki.ALL}),b)o=Vi(m),i.cssApply({width:o,paddingLeft:o,borderLeftStyle:g,borderLeftWidth:u,borderLeftColor:p,lineHeight:"initial",boxSizing:"border-box",display:"inline-block"});else o=Vi(r),i.cssApply({width:o,lineHeight:"initial",display:"inline-block"});return i.saveAsInitial(),i.setLayoutWidth(o),i.setLayoutHeight("0px"),i.render(e),i.positioned=true,i.renderExclude=false,a.addLayoutTemplate(e,i,{type:1,node:i,controlName:i.controlName}),i};let S;const T=h.length;for(let t=0;t<T;++t){const i=h[t],a=i.length;if(1===a){const e=i[0];if(0===t)e.anchor("top","parent"),e.anchorStyle("vertical",0,"packed");else S.anchor("bottomTop",e.documentId),e.anchor("topBottom",S.documentId);if(t===T-1)e.anchor("bottom","parent");else S=i[0];e.anchorParent("horizontal",e.rightAligned?1:e.centerAligned?.5:0),e.anchored=true,e.positioned=true}else{const n=[];let l=Math.min(a,c,o||1/0),h=0;if(l>1){const e=Math.floor(i.reduce((e,t)=>e+t.bounds.height,0)/l);let t=a>=l?Math.ceil(a/l):1,s=f||t>1&&(a%t!=0||!isNaN(o)&&t*o%a>1),c=s&&a%l!=0?a-l:1/0;for(let o=0,r=0,d=0;o<a;++o,++d){const h=i[o],f=d%t==0;if(r<l-1&&(f||c<=0||o>0&&(i[o-1].bounds.height>=e||n[r].length>0&&o<a-2&&a-o+1==l-r&&i[o-1].bounds.height>i[o+1].bounds.height))){if(o>0)if(++r,f)--c;else++c;if(d=0,!f&&c>0)s=true}const u=Ui(n,r);if(u.push(h),o>0&&/^H\d/.test(h.tagName)){if(1===u.length&&o===a-2)--l,c=0;else if((d+1)%t==0&&a-o>l&&!i[o+1].multiline&&i[o+1].bounds.height<e)u.push(i[++o]),d=-1}else if(s&&a-o==l-r&&c!==1/0)t=1}h=l>1?Math.max(r*(l-1)/d/l,.01):0}else n.push(i);const u=n.length,p=new Array(u);let g;for(g=0;g<u;++g){const t=n[g];for(let i=0;i<t.length;++i){const a=t[i];a.app("layout_constraintWidth_percent",Fi(1/l-h,e.localSettings.floatPrecision)),a.setLayoutWidth("0px"),a.setBox(4,{reset:1}),a.exclude({section:qi.EXTENSION}),a.anchored=true,a.positioned=true}p[g]=t[0]}for(g=0;g<u;++g){const e=n[g];if(g<u-1&&e.length>1){const t=e[e.length-1];if(/^H\d/.test(t.tagName)){e.pop();const i=g+1;p[i]=t,n[i].unshift(t)}}}const m=new Array(u);for(g=0;g<u;++g){const t=n[g],i=[];let a=0,o=t.length,r=0;while(r<o){const e=t[r++];if(e.naturalChild){const t=e.element.cloneNode(true);if(e.styleElement)if(e.imageOrSvgElement||e.some(e=>e.imageOrSvgElement,{cascade:true}))t.style.height=Vi(e.bounds.height);else{const i=e.textStyle;for(const e in i)t.style[e]=i[e]}i.push(t)}else a+=e.linear.height}if(o=i.length,o>0){const t=zi("div",{parent:document.body,style:{width:Vi(s||e.box.width/l),visibility:"hidden"}});r=0;while(r<o)t.appendChild(i[r++]);a+=t.getBoundingClientRect().height,document.body.removeChild(t)}m[g]=a}let b,w,E=0;for(g=0;g<u;++g){const e=m[g];if(e>=E){const t=n[g];b=t[0],w=t[t.length-1],E=e}}for(g=0;g<u;++g){const e=p[g];if(0===g)e.anchor("left","parent"),e.anchorStyle("horizontal",0,"packed");else{const t=p[g-1];e.anchor("leftRight",t.documentId),e.modifyBox(16,r)}if(g===u-1)e.anchor("right","parent");else e.anchor("rightLeft",p[g+1].documentId)}const v=[];for(g=0;g<u;++g){const e=n[g],i=e.length;for(let a=0;a<i;++a){const o=e[a];if(0===a){if(g>0){const e=y();e.anchor("top",b.documentId),e.anchor("left",n[g-1][0].documentId),e.anchor("right",o.documentId),v.push(e)}if(0===t)o.anchor("top","parent");else if(o!==b)o.anchor("top",b.documentId);else S.anchor("bottomTop",o.documentId),o.anchor("topBottom",S.documentId);o.anchorStyle("vertical",0,"packed"),o.setBox(2,{reset:1})}else{const t=e[a-1];t.anchor("bottomTop",o.documentId),o.anchor("topBottom",t.documentId),o.app("layout_constraintVertical_bias","0"),o.anchor("left",e[0].documentId)}if(a===i-1){if(t===T-1)o.anchor("bottom","parent");o.setBox(8,{reset:1})}}}const x=t<T-1?w.documentId:"parent";g=0;while(g<v.length)v[g++].anchor("bottom",x);S=w}}}}}var Ji=squared.base.LayoutUI;const{formatPercent:Qi,formatPX:ea,isLength:ta,isPercent:ia,isPx:aa}=squared.lib.css,{maxArray:na,truncate:oa}=squared.lib.math,{conditionArray:ra,flatArray:sa,isArray:la}=squared.lib.util,{BOX_STANDARD:ca,NODE_ALIGNMENT:da,NODE_PROCEDURE:ha,NODE_RESOURCE:fa}=squared.base.lib.enumeration;function ua(e,t,i,a,n){const o=i?t.column:t.row,r=o.unit,s=r.length;let l=0;if(s>0){const e=i?"width":"height";for(let i=0;i<s;++i){const a=r[i];if(aa(a))l+=parseFloat(a);else{let a=0;ra(t.rowData[i],e=>la(e),t=>a=Math.min(a,...t.map(t=>t.bounds[e]))),l+=a}}}else if(l=na(o.unitTotal),l<=0)return 0;if(l+=o.gap*(o.length-1),i)return l+=e.contentBox?e.borderLeftWidth+e.borderRightWidth:e.contentBoxWidth,(a>l?Math.min(a,e.actualWidth):e.actualWidth)-l;else return l+=e.contentBox?e.borderTopWidth+e.borderBottomWidth:e.contentBoxHeight,(n>l&&e.documentBody?Math.min(n,e.actualHeight):e.actualHeight)-l}function pa(e,t){const i=Math.floor(t/e);return[i,t-i*e]}function ga(e,t,i,a,n,o,r,s,l,c){const d=a?t.column:t.row;if(i.startsWith("space")){const h=ua(e,t,a,l,c);if(h>0){const e=function(e,t){const i=e.rowData;if(t){const t=e.column.length,a=e.row.length,n=new Array(t);let o,r=0;while(r<t){const e=new Array(a);o=0;while(o<a)e[o]=i[o++][r];n[r++]=e}return n}return i}(t,a),l=d.length,c=new Set;switch(i){case"space-around":{const[t,i]=pa(2*l,h);for(let a=0;a<l;++a)for(const o of new Set(sa(e[a],1/0))){const e=(a>0&&a<=i?1:0)+t;if(!c.has(o))o.modifyBox(r,e),o.modifyBox(s,t),c.add(o);else o.cssPX(n,h/l,true)}break}case"space-between":if(l>1){const[t,i]=pa(l-1,h);for(let o=0;o<l;++o)for(const r of new Set(sa(e[o],1/0)))if(o<l-1){const e=t+(o<i?1:0);if(!c.has(r))r.modifyBox(s,e),c.add(r);else r.cssPX(n,e,true)}else{if(parseInt(r.android(a?"layout_columnSpan":"layout_rowSpan"))>1){const e=t+(i>0?Math.max(i-1,1):0);if(r.cssPX(n,e,true),c.has(r))r.modifyBox(s,-e,false)}}}else return;break;case"space-evenly":{const[t,i]=pa(l+1,h);for(let a=0;a<l;++a)for(const l of new Set(sa(e[a],1/0))){let e=t+(a<i?1:0);if(!c.has(l)){if(o)e/=2,l.modifyBox(r,e),l.modifyBox(s,e);else{if(0===a)l.modifyBox(r,t);l.modifyBox(s,e)}c.add(l)}else l.cssPX(n,e,true)}break}}}}else if(!o){let n=ua(e,t,a,l,c);if(n>0)switch(i){case"center":if(n/=2,a)e.modifyBox(256,Math.floor(n));else e.modifyBox(32,Math.floor(n)),e.modifyBox(128,Math.ceil(n));break;case"right":if(!a)break;case"end":case"flex-end":e.modifyBox(a?256:32,n);break}}}function ma(e,t,i,a){let n,o,r,s;if(i.every(e=>aa(e))){const e=i.reduce((e,t)=>e+parseFloat(t),a),r=ea(e);if(t)n=r;else o=r}else if(i.every(e=>CssGrid.isFr(e))){const a=i.reduce((e,t)=>e+parseFloat(t),0),l=oa(a,e.localSettings.floatPrecision);if(t)n="0px",r=l;else o="0px",s=l}else if(i.every(e=>ia(e))){const r=Qi((i.reduce((e,t)=>e+parseFloat(t),0)+a/(t?e.actualWidth:e.actualHeight))/100);if(t)n=r;else o=r}else if(t)n="wrap_content";else o="wrap_content";return[n,o,r,s]}function ba(e,t){const i=e.unit;if(i.length>0&&i.every(e=>"auto"===e))e.unit=new Array(length).fill(t?"1fr":"")}function ya(e,t){const i=e.unit;let a=0,n=0,o=0;while(o<i.length){const e=i[o++];if(aa(e))a+=parseFloat(e);else if(ia(e))n+=parseFloat(e);else if(CssGrid.isFr(e))return 0}const r=Math.ceil(a+(e.length-1)*e.gap);if(n>0)return n+r/t*100;else if(a>0)return r<t?-1:0;return 0}const Sa=e=>"space-between"===e?"match_parent":"wrap_content",Ta=e=>/start|end|center|baseline/.test(e);class CssGrid extends squared.base.extensions.CssGrid{processNode(e,i){let a,n,o;if(CssGrid.isJustified(e)||CssGrid.isAligned(e)){if(a=this.controller.createNodeWrapper(e,i,{containerType:t.CONSTRAINT,resource:fa.ASSET}),a.inherit(e,"styleMap","boxStyle"),e.resetBox(30,a),e.resetBox(480,a),e.data(this.name,"unsetContentBox",true),CssGrid.isJustified(e))e.setLayoutWidth(Sa(e.css("justifyContent")));else if(e.hasPX("width",{percent:false}))e.setLayoutWidth("match_parent");else a.setLayoutWidth(e.blockStatic?"match_parent":"wrap_content");if(CssGrid.isAligned(e))e.setLayoutHeight(Sa(e.css("alignContent")));else if(e.hasPX("height",{percent:false}))e.setLayoutHeight("match_parent");else a.setLayoutHeight("wrap_content");n=a,o=this.application.renderNode(new Ji(i,a,t.CONSTRAINT,4096,a.children))}super.processNode(e,i);const r=e.data(this.name,"mainData");if(r){const{column:s,row:l}=r,c=s.unit,d=s.length,h=Ji.create({parent:a||i,node:e,containerType:t.GRID,alignmentType:4,children:e.children,rowCount:l.length,columnCount:d});if(!e.rootElement&&!e.hasWidth&&0===r.rowSpanMultiple.length&&c.length===d&&c.every(e=>CssGrid.isFr(e))&&e.ascend({condition:e=>function(e,t){const i=e.actualParent;if(null==i?void 0:i.gridElement){const a=i.data(t,"mainData"),n=e.data(t,"cellData");if(a&&n){const e=a.column.unit,{columnStart:t,columnSpan:i}=n;let o=false,r=0;while(r<i){const i=e[t+r++];if(CssGrid.isFr(i)||ia(i))o=true;else if("auto"===i){o=false;break}}return o}}else if(e.hasFlex("row")&&e.flexbox.grow>0)return true;return false}(e,this.name),error:e=>e.hasWidth}).length>0){const i=r.rowData,a=i.length,n=new Array(a);let o=true;e:{let e,t=0;while(t<a){const a=[],r=i[t];e=0;while(e<r.length){const t=r[e++];if(1===(null==t?void 0:t.length))a.push(t[0]);else{o=false;break e}}n[t++]=a}}if(o)s.frTotal=c.reduce((e,t)=>e+parseFloat(t),0),l.frTotal=l.unit.reduce((e,t)=>e+(CssGrid.isFr(t)?parseFloat(t):0),0),e.setLayoutWidth("match_parent"),e.lockAttr("android","layout_width"),e.data(this.name,"constraintData",n),h.setContainerType(t.CONSTRAINT)}if(h.containerType===t.GRID)ba(s,true),ba(l,false);return{parent:a,renderAs:n,outputAs:o,outerParent:a,output:this.application.renderNode(h),include:true,complete:true}}}processChild(e,i){var a;const o=i.data(this.name,"mainData"),r=e.data(this.name,"cellData");let s,l;if(o&&r){const{column:c,row:d}=o,h=e.has("alignSelf")?e.css("alignSelf"):o.alignItems,f=e.has("justifySelf")?e.css("justifySelf"):o.justifyItems,u=i.layoutConstraint,p=(t,a,n)=>{const[s,l,h,f]=a?[c,r.columnStart,r.columnSpan,"minWidth"]:[d,r.rowStart,r.rowSpan,"minHeight"],{unit:p,unitMin:g}=s;let m=0,b=0,y=0,S=0,T=false,w=false,E=0,v=0;while(E<h){const r=l+E++,c=g[r];if(""!==c)y+=a?i.parseUnit(c):i.parseUnit(c,{dimension:"height"});let d=p[r];if(!d){const e=s.auto;if(e[v]){if(d=e[v],e[v+1])++v}else continue}if("auto"===d||"max-content"===d){if(w=true,h<p.length&&(!i.hasPX(n)||p.some(e=>ta(e))||"max-content"===d)){m=e.bounds[n],b=0,S=0;break}else if(a){m=0,b=0,S=-1;break}}else if("min-content"===d){if(!t.hasPX(n)){if(a)t.setLayoutWidth("wrap_content",false);else t.setLayoutHeight("wrap_content",false);break}}else if(CssGrid.isFr(d)){if(a||i.hasHeight){if(-1===S)S=0;S+=parseFloat(d),b=m}else S=0,b+=o.minCellHeight*parseFloat(d);m=0}else if(ia(d)){if(-1===S)S=0;S+=parseFloat(d)/100,b=m,m=0}else{const e=a?t.parseUnit(d):t.parseUnit(d,{dimension:"height"});if(0===b)m+=e;else b+=e}if(e.textElement&&/^\s*0[a-z]*\s*$/.test(c))T=true}if(h>1){const e=(h-1)*s.gap;if(m>0&&0===b)m+=e;else if(b>0)b+=e;if(y>0)y+=e}if(y>0)if(s.autoFill&&0===m&&1===(a?d.length:c.length))m=Math.max(e.actualWidth,y),S=0;else b=y;if(b>0&&!t.hasPX(f))t.css(f,ea(b),true);if(u){if(a){if(!t.hasPX("width",{percent:false}))t.app("layout_constraintWidth_percent",oa(S/c.frTotal,t.localSettings.floatPrecision)),t.setLayoutWidth("0px");if(0===l)t.anchor("left","parent"),t.anchorStyle("horizontal",0,"spread");else{const e=t.innerMostWrapped.previousSibling;if(e)e.anchor("rightLeft",t.documentId),t.anchor("leftRight",e.anchorTarget.documentId)}if(l+h===c.length)t.anchor("right","parent");t.positioned=true}else if(!t.hasPX("height",{percent:false}))if(S>0)if(1===d.length)t.setLayoutHeight("match_parent");else t.app("layout_constraintHeight_percent",oa(S/d.frTotal,t.localSettings.floatPrecision)),t.setLayoutHeight("0px");else if(m>0){if(t.contentBox)m-=t.contentBoxHeight;t.css(w?"minHeight":"height",ea(m),true)}}else{t.android(a?"layout_column":"layout_row",l.toString()),t.android(a?"layout_columnSpan":"layout_rowSpan",h.toString());let o=a&&c.flexible;if(0!==S){if(!t.hasPX(n))if(a){if(r.columnSpan===c.length)t.setLayoutWidth("match_parent");else t.setLayoutWidth("0px"),t.android("layout_columnWeight",-1===S?"0.01":oa(S,e.localSettings.floatPrecision)),t.mergeGravity("layout_gravity","fill_horizontal");o=false}else if(r.rowSpan===d.length)t.setLayoutHeight("match_parent");else t.setLayoutHeight("0px"),t.android("layout_rowWeight",oa(S,e.localSettings.floatPrecision)),t.mergeGravity("layout_gravity","fill_vertical")}else if(m>0){const e=a?"maxWidth":"maxHeight";if(T&&!t.hasPX(e))t.css(e,ea(m),true),t.mergeGravity("layout_gravity",a?"fill_horizontal":"fill_vertical");else if(!t.hasPX(n)){if(t.contentBox)m-=a?t.contentBoxWidth:t.contentBoxHeight;if(w&&!i.hasPX(e))if(t.css(f,ea(m),true),a)t.setLayoutWidth("wrap_content");else t.setLayoutHeight("wrap_content");else t.css(n,ea(m),true)}}else if(0===p.length&&!t.hasPX(n))if(a)t.setLayoutWidth("match_parent",false);else t.setLayoutHeight("wrap_content",false);if(o)t.android("layout_columnWeight","0")}return[l,h]};if(Ta(h)||/start|center|end|baseline|right|left/.test(f)||u){s=this.application.createNode(e.sessionId,{parent:i,innerWrap:e}),s.containerName=e.containerName,s.setControlType(n.FRAME,t.FRAME),s.inherit(e,"base","initial"),s.exclude({resource:fa.BOX_STYLE|fa.ASSET,procedure:ha.CUSTOMIZATION}),s.resetBox(30),s.resetBox(480),s.render(i),e.transferBox(30,s);let a=true;switch(f){case"first baseline":case"baseline":case"left":case"start":case"flex-start":case"self-start":e.mergeGravity("layout_gravity","left");break;case"last baseline":case"right":case"end":case"flex-end":case"self-end":e.mergeGravity("layout_gravity","right");break;case"center":e.mergeGravity("layout_gravity","center_horizontal");break;default:a=false;break}if(!e.hasWidth)e.setLayoutWidth(a?"wrap_content":"match_parent",false);switch(h){case"first baseline":case"baseline":case"start":case"flex-start":case"self-start":e.mergeGravity("layout_gravity","top");break;case"last baseline":case"end":case"flex-end":case"self-end":e.mergeGravity("layout_gravity","bottom");break;case"center":e.mergeGravity("layout_gravity","center_vertical");break;default:if(!e.hasHeight)e.setLayoutHeight("match_parent",false);break}l=this.application.renderNode(new Ji(i,s,t.FRAME,4096,s.children))}else e.mergeGravity("layout_gravity","top");const g=s||e;if(p(g,true,"width"),g!==e||e.hasPX("maxHeight"))g.mergeGravity("layout_gravity","fill");else if(!g.hasPX("width"))g.mergeGravity("layout_gravity","fill_horizontal");const[m,b]=p(g,false,"height");if("normal"===o.alignContent&&!i.hasPX("height")&&!e.hasPX("minHeight")&&(!d.unit[m]||"auto"===d.unit[m])&&Math.floor(e.bounds.height)>(null===(a=e.data(this.name,"boundsData"))||void 0===a?void 0:a.height)&&function(e,t,i,a,n){if(1===t&&a.rowSpanMultiple[i]){const o=a.rowData;for(const a of sa(o[i],1/0))if(a!==e){const e=a.data(n,"cellData");if(e&&e.rowSpan>t&&(0===i||e.rowSpan<o.length))return true}}return false}(e,b,m,o,this.name))g.css("minHeight",ea(e.box.height));else if(!(g.hasPX("height")||g.hasPX("maxHeight")||1===d.length&&o.alignContent.startsWith("space")&&!Ta(o.alignItems)))g.mergeGravity("layout_gravity","fill_vertical")}return{parent:s,renderAs:s,outputAs:l}}postBaseLayout(e){const t=e.data(this.name,"mainData");if(t){const i=this.controller,{children:a,column:n,row:o,rowData:r}=t,s=true===e.data(this.name,"unsetContentBox"),l=a[a.length-1].id;if(CssGrid.isJustified(e)){switch(ga(e,t,t.justifyContent,true,"width",s,16,4,i.userSettings.resolutionScreenWidth-e.bounds.left,0),t.justifyContent){case"center":case"space-around":case"space-evenly":if(s)e.anchorParent("horizontal",.5,"",true);break;case"right":case"end":case"flex-end":if(s)e.anchorParent("horizontal",1,"",true);break;default:if(1===t.column.length)e.setLayoutWidth("match_parent");break}if(s)if(n.unit.some(e=>CssGrid.isFr(e)))e.setLayoutWidth("match_parent")}else{const t=n.length;if(e.blockStatic||e.hasWidth){const a=ya(n,e.actualWidth);if(0!==a&&a<100){if(a>0)i.addAfterOutsideTemplate(l,i.renderSpace({width:Qi((100-a)/100),height:"match_parent",rowSpan:o.length,android:{layout_row:"0",layout_column:t.toString(),layout_columnWeight:n.flexible?"0.01":""}}),false);e.android("columnCount",(t+1).toString())}}if(s)if(e.contentBoxWidth>0&&e.hasPX("width",{percent:false}))e.anchorParent("horizontal",.5,"",true);else if(1===t)e.setLayoutWidth("match_parent");else e.setLayoutWidth("wrap_content",false)}if(CssGrid.isAligned(e)){if(ga(e,t,t.alignContent,false,"height",s,2,8,0,this.controller.userSettings.resolutionScreenHeight),s)switch(t.alignContent){case"center":case"space-around":case"space-evenly":e.anchorParent("vertical",.5,"",true);break;case"end":case"flex-end":e.anchorParent("vertical",1,"",true);break}}else{if(e.hasHeight){const t=ya(o,e.actualHeight);if(0!==t&&t<100){if(t>0)i.addAfterOutsideTemplate(l,i.renderSpace({width:"match_parent",height:Qi((100-t)/100),columnSpan:n.length,android:{layout_row:o.length.toString(),layout_column:"0",layout_rowWeight:o.flexible?"0.01":""}}),false);e.android("rowCount",(o.length+1).toString())}}if(s)if(e.contentBoxHeight>0&&e.hasPX("height",{percent:false}))e.anchorParent("vertical",.5,"",true);else e.setLayoutHeight("wrap_content",false)}const c=e.data(this.name,"constraintData");if(c){const{gap:t,length:a}=n,o=c.length,r=new Array(o-1);let s=1,l=0;while(s<o)r[l++]=i.addBarrier(c[s++],"top");for(s=0;s<o;++s){const d=c[s],h=r[s-1],f=r[s];let u;for(l=0;l<a;++l){const r=d[l];if(r){if(0===s)r.anchor("top","parent"),r.anchor("bottomTop",f),r.anchorStyle("vertical",0,"packed");else{if(s===o-1)r.anchor("bottom","parent");else r.anchor("bottomTop",f);r.anchor("topBottom",h)}if(l===a-1)r.anchor("right","parent");else r.modifyBox(4,-t);if(u)u.anchor("rightLeft",r.documentId),r.anchor("leftRight",u.documentId);else r.anchor("left","parent"),r.anchorStyle("horizontal",0,"packed");r.anchored=true,r.positioned=true,u=r}else if(u){const t={width:"0px",height:"wrap_content",android:{},app:{layout_constraintTop_toTopOf:0===s?"parent":"",layout_constraintTop_toBottomOf:h,layout_constraintBottom_toTopOf:s<a-1?f:"",layout_constraintBottom_toBottomOf:s===a-1?"parent":"",layout_constraintStart_toEndOf:u.anchorTarget.documentId,layout_constraintEnd_toEndOf:"parent",layout_constraintVertical_bias:0===s?"0":"",layout_constraintVertical_chainStyle:0===s?"packed":"",layout_constraintWidth_percent:(n.unit.slice(l,a).reduce((e,t)=>e+parseFloat(t),0)/n.frTotal).toString()}};i.addAfterInsideTemplate(e.id,i.renderSpace(t),false),u.anchor("rightLeft",t.documentId);break}}}}else{const{emptyRows:a,rowDirection:s}=t,{flexible:c,gap:d,unit:f}=s?n:o,u=f.length;let p=-1,g=0;const m=(t,a,n,o="wrap_content",r="",d=0)=>{if(-1!==p){const f=a.slice(p,p+g);let u,m,b,y,S="",T="",w=1,E=1;if(s)b=t.toString(),y=p.toString(),T=o,u=c?"0.01":"",m=r,E=g;else b=p.toString(),y=t.toString(),m=c?"0.01":"",u=r,S=o,w=g;if(f.length===a.length){if(s)S="match_parent",u="";else T="match_parent",m="";n=0}else{const[t,i,a,o]=ma(e,s,f,n*(f.length-1));if(t)S=t;if(i)T=i;if(a)u=a;if(o)m=o}i.addAfterOutsideTemplate(l,i.renderSpace({width:S,height:T,rowSpan:w,columnSpan:E,android:{[s?e.localizeString(h.MARGIN_RIGHT):"bottom"]:n>0&&p+g<a.length?"@dimen/"+Resource.insertStoredAsset("dimens",`${e.controlId}_cssgrid_${s?"column":"row"}_gap`,ea(n)):"",[s?"bottom":e.localizeString(h.MARGIN_RIGHT)]:d>0?"@dimen/"+Resource.insertStoredAsset("dimens",`${e.controlId}_cssgrid_${s?"row":"column"}_gap`,ea(d)):"",layout_row:b,layout_column:y,layout_rowWeight:m,layout_columnWeight:u,layout_gravity:"fill"}}),aa(S)||aa(T)),p=-1}g=0};let b=Math.max(r.length,1);for(let e=0;e<b;++e)if(!a[e]){const t=r[e];for(let i=0;i<u;++i)if(t[i])m(e,f,d);else{if(-1===p)p=i;++g}m(e,f,d)}b=a.length;for(let t=0;t<b;++t){const i=a[t];if(i){const a=i.length;for(let r=0;r<a;++r){const l=i[r];if(l>0){p=r;const{unit:i,gap:c}=s?o:n,h=ma(e,!s,[i[s?r:t]],0);if(g=l===1/0?f.length:1,s)m(t,i,c,h[1],h[3],t<b-1?d:0);else m(t,i,c,h[0],h[2],r<a-1?d:0)}}}}}}}postOptimize(e){var t;const i=e.data(this.name,"mainData");if(i)if(e.blockStatic&&!e.hasPX("minWidth",{percent:false})&&false===(null===(t=e.actualParent)||void 0===t?void 0:t.layoutElement)){const{gap:t,length:a,unit:n}=i.column;let o=t*(a-1),r=0;while(r<n.length){const e=n[r++];if(aa(e))o+=parseFloat(e);else return}if(o>e.width)if(e.android("minWidth",ea(o)),!e.flexibleWidth&&!e.blockWidth)e.setLayoutWidth("wrap_content")}}}class External extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}init(e,t){var i;if(this.included(e))null===(i=this.application.getProcessing(t))||void 0===i||i.rootElements.add(e);return false}}var wa=squared.base.LayoutUI;const{isLength:Ea}=squared.lib.css,{truncate:va}=squared.lib.math,{capitalize:xa,iterateReverseArray:Aa,sameArray:_a,withinRange:Ra}=squared.lib.util,{BOX_STANDARD:Ia,NODE_ALIGNMENT:Na}=squared.base.lib.enumeration,Ca=squared.base.NodeUI,ka={orientation:"horizontal",orientationInverse:"vertical",WHL:"width",HWL:"height",LT:"left",TL:"top",RB:"right",BR:"bottom",LRTB:"leftRight",RLBT:"rightLeft"},La={orientation:"vertical",orientationInverse:"horizontal",WHL:"height",HWL:"width",LT:"top",TL:"left",RB:"bottom",BR:"right",LRTB:"topBottom",RLBT:"bottomTop"};function Pa(e,t,i){const a="width"===i,n=a?"hasWidth":"hasHeight";let o=e[n]||a&&e.blockStatic&&Ra(e.parseWidth(e.css("maxWidth")),e.box.width),r=0,s=0;const l=t.length;let c=0;while(c<l){const e=t[c++];if(o)if(a){if(e.innerMostWrapped.autoMargin.horizontal){o=false;break}}else if(e.innerMostWrapped.autoMargin.vertical){o=false;break}s+=e.flexbox.grow}if(l>1&&(a||o)){const a=[],s=[];let d,h=0,f=0,u=NaN;c=0;while(c<l){const e=t[c++],{alignSelf:l,basis:p,shrink:g,grow:m}=e.flexbox,b=e.bounds[i];let y=false;if(m>0||1!==g){const t=e.parseUnit("auto"===p?e.css(i):p,{dimension:i});if(t>0){let i=false;if(b<t){if(isNaN(u)||g<u)u=g,i=true,r=1}else if(isNaN(u)||m>u)u=m,i=true,r=2;if(i)d=e,h=t,f=b;a.push({item:e,basis:t,dimension:b,shrink:g,grow:m});continue}else if(m>0)y=true}else if(Ea(p)){a.push({item:e,basis:Math.min(b,e.parseUnit(p,{dimension:i})),dimension:b,shrink:g,grow:m}),e.flexbox.basis="auto";continue}if("auto"===l&&(o&&!e[n]||y))s.push(e)}if(r){let t=a.length;if(t>1){c=0;while(c<t){const e=a[c++],{basis:t,item:i}=e;if(i===d||t===h&&(1===r&&u===e.shrink||2===r&&u===e.grow))i.flexbox.grow=1;else if(t>0)i.flexbox.grow=e.dimension/t/(f/h)*t/h}}t=s.length,c=0;while(c<t)Ma(e,s[c++],i)}}if(a&&0===r){c=0;while(c<l){if(t[c++].find(t=>t.multiline&&0===t.ascend({condition:e=>e[n],including:e}).length,{cascade:true})){c=0;while(c<l)Ma(e,t[c++],i);break}}}return s}function Oa(e){const t=e.length;let i=0;while(i<t){const t=e[i++];if(t.textElement&&t.baseline)return t}return Ca.baseline(e)}function Wa(e,t,i){if(!i)e.setLayoutWidth(t);else e.setLayoutHeight(t)}function Da(e){while(e){if(e.layoutFrame)return e.innerWrapped;e=e.innerWrapped}}function Ba(e,t,i,a,n){if(0===e[i])if(e.app(a,va(n,e.localSettings.floatPrecision)),t)e.setLayoutWidth("0px");else e.setLayoutHeight("0px")}const Ma=(e,t,i)=>t.flexbox.basis=t.bounds[i]/e.box[i]*100+"%";class Flexbox extends squared.base.extensions.Flexbox{processNode(e,i){super.processNode(e,i);const a=e.data(this.name,"mainData"),{rowCount:n,columnCount:o}=a;if(1===n&&a.row||1===o&&a.column)return e.containerType=t.CONSTRAINT,e.addAlign(4),e.addAlign(a.column?16:8),a.wrap=false,{include:true,complete:true};else return{output:this.application.renderNode(wa.create({parent:i,node:e,containerType:t.CONSTRAINT,alignmentType:4|(a.column?8:16),itemCount:e.length,rowCount:n,columnCount:o})),include:true,complete:true}}processChild(e,i){if(e.hasAlign(128))return{output:this.application.renderNode(new wa(i,e,t.CONSTRAINT,4,e.children)),complete:true,subscribe:true};else{const a=e.autoMargin;if(a.horizontal||a.vertical&&i.hasHeight){const n=i.data(this.name,"mainData");if(n){const o=n.children.findIndex(t=>t===e);if(-1!==o){const r=this.controller.createNodeWrapper(e,i);if(r.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},true),r.saveAsInitial(),r.setCacheValue("flexbox",e.flexbox),n.children[o]=r,a.horizontal&&!e.hasWidth)e.setLayoutWidth("wrap_content");return{parent:r,renderAs:r,outputAs:this.application.renderNode(new wa(i,r,t.FRAME,4096,r.children))}}}}}}postBaseLayout(e){const t=e.data(this.name,"mainData");if(t){const i=this.controller,{row:a,column:n,reverse:o,wrap:r,wrapReverse:s,alignContent:l,justifyContent:c,children:d}=t,h=e.hasPX("height",{percent:false})||e.percentHeight>0?e.linear.bottom:0,f=[],u=[],p=[];let g=0;if(r){let t;if(e.each(e=>{if(e.hasAlign(128)){const i=e.renderChildren.filter(e=>e.pageFlow);if(i.length>0){if(a)e.setLayoutWidth("match_parent"),f.push(i);else{if(e.setLayoutHeight("match_parent"),t){let i=t[0],a=1;while(a<t.length){const e=t[a++];if(e.linear.right>i.linear.right)i=e}e.constraint.horizontal=true}u.push(i),t=i}p.push(e)}}}),a)u.push(p);else{if(s){const t=u[0][0],i=t.linear.left-e.box.left;if(i>0)t.modifyBox(16,i);else p[0].anchorStyle("horizontal",0,"packed")}else{const t=u[u.length-1][0],i=e.box.right-t.linear.right;if(i>0)t.modifyBox(4,i);else p[0].anchorStyle("horizontal",0,"packed")}f.push(p)}}else if(a)f[0]=d;else u[0]=d;const m=(t,a)=>{const d=t.length;if(0===d)return;const{orientation:f,orientationInverse:u,WHL:m,HWL:b,LT:y,TL:S,RB:T,BR:w,LRTB:E,RLBT:v}=a?ka:La,[x,A]=a?[e.hasHeight,e.hasWidth]:[e.hasWidth,e.hasHeight],_=`layout_constraint${xa(f)}_weight`;for(let R=0;R<d;++R){const I=t[R],N=I.length,C=I[0],k=I[N-1],L=I===p,P=!L&&I.every(e=>0===e.flexbox.grow),O=P&&("space-between"===c||"space-around"===c&&N>1),W=[];let D,B=0,M=0,H=0,G=true,X=null;if(C.anchor(y,"parent"),k.anchor(T,"parent"),L)if(D=false,A){let e="spread",t=0;switch(l){case"left":case"right":case"flex-end":t=1;case"baseline":case"start":case"end":case"flex-start":e="packed",G=false;break}C.anchorStyle(f,t,e)}else C.anchorStyle(f,0,"spread_inside",false);else if(D=a||A,M=1-Pa(e,I,m),N>1){let t=0,i=0;while(i<N){const e=I[i++],a=(e.data(this.name,"boundsData")||e.bounds)[b];if(0===t)B=a,++t;else if(a===B)++t;else if(a>B)B=a,t=1}if(t===N)B=NaN;if(a)H=View.availablePercent(I,"width",e.box.width)}for(let e=0;e<N;++e){const t=I[e],i=I[e-1],n=I[e+1];if(n)t.anchor(v,n.documentId);if(i)t.anchor(E,i.documentId);if(L){if(t.anchor(S,"parent"),G)if(A)Ba(t,a,m,_,1);else t.anchor(w,"parent"),t.anchorStyle(u,o?1:0,"packed")}else{const o=Da(t),c=t.innerMostWrapped.autoMargin;if(a){if(c.horizontal)if(o){if(o.mergeGravity("layout_gravity",c.leftRight?"center_horizontal":c.left?t.localizeString("right"):t.localizeString("left")),M>0)t.flexbox.basis="0%",W.push(t)}else if(!c.leftRight)if(c.left){if(i)t.anchorDelete(E)}else if(n)t.anchorDelete(v)}else if(c.vertical)if(o){if(o.mergeGravity("layout_gravity",c.topBottom?"center_vertical":c.top?"bottom":"top"),M>0)t.flexbox.basis="0%",W.push(t)}else if(!c.topBottom)if(c.top){if(i)t.anchorDelete(E)}else if(n)t.anchorDelete(v);switch(t.flexbox.alignSelf){case"first baseline":if("top"===S&&t.baselineElement){const e=I.find(e=>e!==t&&e.baselineElement);if(e){t.anchor("baseline",e.documentId);break}}case"start":case"flex-start":t.anchor(S,"parent");break;case"last baseline":if("bottom"===w&&t.baselineElement){if(Aa(I,e=>{if(e!==t&&e.baselineElement)return t.anchor("baseline",e.documentId),true})===1/0)break}case"end":case"flex-end":t.anchor(w,"parent");break;case"baseline":if(a){if(!X)X=Oa(I);if(X)if(X!==t)t.anchor("baseline",X.documentId);else t.anchorParent(u,0)}break;case"center":if(t.anchorParent(u,.5),!a&&t.textElement)t.mergeGravity("gravity","center");break;default:{const i=Da(t);switch(l){case"center":if(d%2==1&&R===Math.floor(d/2))t.anchorParent(u);else if(R<d/2)t.anchor(w,"parent");else if(R>=d/2)t.anchor(S,"parent");break;case"space-evenly":case"space-around":if(i)i.mergeGravity("layout_gravity",a?"center_vertical":"center_horizontal");else t.anchorParent(u);break;case"space-between":if(O&&2===N)t.anchorDelete(0===e?v:E);if(0===R)if(i)i.mergeGravity("layout_gravity",s?w:S);else t.anchor(s?w:S,"parent");else if(d>2&&R<d-1)if(i)i.mergeGravity("layout_gravity",a?"center_vertical":"center_horizontal");else t.anchorParent(u);else if(i)i.mergeGravity("layout_gravity",s?S:w);else t.anchor(s?S:w,"parent");break;default:if(t.anchorParent(u),!o||!t.innerMostWrapped.autoMargin[u])t.anchorStyle(u,s?1:0);if(0===t[b])if(!a&&t.blockStatic)Wa(t,"match_parent",a);else if(isNaN(B))if(!a&&!r&&t.length>0||x&&"normal"===l)Wa(t,x?"0px":"match_parent",a);else Wa(t,"wrap_content",a);else if(1===N)if(!a)Wa(t,x?"0px":"match_parent",a);else Wa(t,"wrap_content",a);else if((t.naturalElement?(t.data(this.name,"boundsData")||t.bounds)[b]:1/0)<B){if(Wa(t,t.flexElement&&t.css("flexDirection").startsWith(a?"row":"column")?"match_parent":"0px",a),o&&!o.autoMargin[f])Wa(o,"match_parent",a)}else if(x)Wa(t,"0px",a);else Wa(t,"wrap_content",a),t.lockAttr("android","layout_"+b);break}break}}if(H=View.setFlexDimension(t,m,H),!t.innerMostWrapped.has("flexGrow"))D=false;if(h>0&&R===d-1){if(t.linear.bottom-h>0)g=Math.max(t.linear.bottom-h,g);t.setBox(8,{reset:1})}}t.anchored=true,t.positioned=true}if(!L){if(D){let e=0;while(e<N){const t=I[e++];Ba(t,a,m,_,t.flexbox.grow)}}else if(M>0){const e=W.length;let t=0;while(t<e){const e=W[t++],i=e.innerMostWrapped.autoMargin;let n=1;if(a){if(i.leftRight)n=2}else if(i.topBottom)n=2;Ba(e,a,m,_,Math.max(e.flexbox.grow,M*n/W.length))}}if(g>0)e.modifyBox(8,g);if(a||n){let t=false;if(P)switch(c){case"normal":if(n){C.anchorStyle(f,o?1:0,"packed");continue}break;case"left":if(!a)break;case"start":case"flex-start":C.anchorStyle(f,o?1:0,"packed");continue;case"center":if(N>1){C.anchorStyle(f,.5,"packed");continue}t=true;break;case"right":if(!a)break;case"end":case"flex-end":C.anchorStyle(f,1,"packed");continue;case"space-between":if(1===N){k.anchorDelete(T);continue}break;case"space-evenly":if(N>1){C.anchorStyle(f,0,"spread");continue}t=true;break;case"space-around":if(N>1){C.constraint[f]=false,k.constraint[f]=false,i.addGuideline(C,e,{orientation:f,percent:true}),i.addGuideline(k,e,{orientation:f,percent:true,opposing:true}),C.anchorStyle(f,0,"spread_inside");continue}t=true;break}if(O||!r&&I.some(e=>""!==e.app(_))&&!_a(I,e=>e.app(_)))C.anchorStyle(f,0,"spread_inside",false);else if(!t)C.anchorStyle(f,o?1:0,"packed",false)}}}};m(f,true),m(u,false)}}}var Ha=squared.base.LayoutUI;const{formatPX:Ga}=squared.lib.css,{withinRange:Xa}=squared.lib.util,{BOX_STANDARD:Va,NODE_ALIGNMENT:za}=squared.base.lib.enumeration;class Grid extends squared.base.extensions.Grid{processNode(e,i){super.processNode(e,i);const a=e.data(this.name,"columnCount");if(a>0)return{output:this.application.renderNode(Ha.create({parent:i,node:e,containerType:t.GRID,alignmentType:256,children:e.children,columnCount:a})),include:true,complete:true}}processChild(e,t){var i;const a=e.data(this.name,"cellData");if(a){const n=null===(i=a.siblings)||void 0===i?void 0:i.slice(0);let o;if(n){const i=this.controller,a=Grid.createDataCellAttribute();n.unshift(e),o=i.processLayoutHorizontal(new Ha(t,i.createNodeGroup(e,n,t,{delegate:true,cascade:true}),0,0,n)),e=o.node;let r=0;while(r<n.length){const e=n[r++],t=e.data(this.name,"cellData");if(t){if(t.cellStart)a.cellStart=true;if(t.cellEnd)a.cellEnd=true;if(t.rowEnd)a.rowEnd=true;if(t.rowStart)a.rowStart=true;e.data(this.name,"cellData",null)}}e.data(this.name,"cellData",a)}if(a.rowSpan>1)e.android("layout_rowSpan",a.rowSpan.toString());if(a.columnSpan>1)e.android("layout_columnSpan",a.columnSpan.toString());if("table-cell"===e.display)e.mergeGravity("layout_gravity","fill");if(o)return{parent:o.node,renderAs:o.node,outputAs:this.application.renderNode(o)}}}postConstraints(e){if("collapse"!==e.css("borderCollapse")){const t=e.data(this.name,"columnCount");if(t){let i=0,a=0,n=0,o=0;e.renderEach(r=>{const s=r.data(this.name,"cellData");if(s){const l=r.actualParent;if(false===(null==l?void 0:l.visible)){const c=0===l.getBox(2)[0]?l.marginTop:0,d=0===l.getBox(8)[0]?l.marginBottom:0;if(s.cellStart)i=c+l.paddingTop;if(s.rowStart)o=Math.max(l.marginLeft+l.paddingLeft,o);if(s.rowEnd){const i=d+l.paddingBottom+(s.cellEnd?0:c+l.paddingTop);if(i>0)if(s.cellEnd)n=i;else{const a=this.controller;a.addAfterOutsideTemplate(r.id,a.renderSpace({width:"match_parent",height:"@dimen/"+Resource.insertStoredAsset("dimens",e.controlId+"_grid_space",Ga(i)),columnSpan:t,android:{}}),false)}a=Math.max(l.marginRight+l.paddingRight,a)}}}}),e.modifyBox(32,i),e.modifyBox(64,a),e.modifyBox(128,n),e.modifyBox(256,o)}}if(!e.hasWidth){let t=-1/0;if(e.renderEach(e=>{if(e.inlineFlow||!e.blockStatic)t=Math.max(t,e.linear.right)}),Xa(e.box.right,t))e.setLayoutWidth("wrap_content")}}}var Fa=squared.base.LayoutUI;const{formatPX:Ua,getBackgroundPosition:qa,isPercent:Ya}=squared.lib.css,{convertInt:ja}=squared.lib.util,{STRING_SPACE:Ka}=squared.lib.xml,{BOX_STANDARD:$a,NODE_ALIGNMENT:Za,NODE_TEMPLATE:Ja}=squared.base.lib.enumeration;class List extends squared.base.extensions.List{processNode(e,i){const a=new Fa(i,e,0,0,e.children);if(!a.unknownAligned||a.singleRowAligned){if(super.processNode(e,i),a.linearY)a.rowCount=e.length,a.columnCount=e.some(e=>"inside"===e.css("listStylePosition"))?3:2,a.setContainerType(t.GRID,16);else if(a.linearX||a.singleRowAligned)a.rowCount=1,a.columnCount=a.length,a.setContainerType(t.LINEAR,8);else return;return{output:this.application.renderNode(a),complete:true,include:true}}}processChild(e,i){const a=e.data(this.name,"mainData");if(a){const o=this.application,r=this.controller,s=i.firstStaticChild===e,l=e.marginTop;let c,d,h=a.ordinal||"",f=e.marginLeft,u=0,p=0,g=false,m=NaN,b=false;if(e.setBox(16,{reset:1}),i.layoutGrid)p=ja(i.android("columnCount"))||1,g=true;else if(s)g=true;if(g)if(i.paddingLeft>0)f+=i.paddingLeft;else f+=i.marginLeft;if(0===e.length&&!e.outerWrapper)c=r.createNodeWrapper(e,i),b=true;else c=e.outerMostWrapper;if(c!==e)e.resetBox(10,c);if(""===h)d=e.find(e=>"left"===e.float&&e.marginLeft<0&&Math.abs(e.marginLeft)<=e.documentParent.marginLeft);if(d){if(3===p)e.android("layout_columnSpan","2");if(!d.hasWidth)if(f+=d.marginLeft,f>0)d.android("minWidth",Ua(f));d.parent=i,d.setControlType(n.TEXT,t.INLINE),d.setBox(16,{reset:1}),d.render(i);const a=new Fa(i,d);if(d.inlineText||0===d.length)a.setContainerType(t.TEXT);else{if(a.singleRowAligned)a.setContainerType(t.RELATIVE,8);else a.setContainerType(t.CONSTRAINT,2);a.retainAs(d.children)}o.addLayoutTemplate(i,d,o.renderNode(a))}else{let r,s=0,l=0,b=0,y="right";if(""!==a.imageSrc){const t=this.resource;if(a.imagePosition){if(({top:s,left:l}=qa(a.imagePosition,e.actualDimension,{fontSize:e.fontSize,imageDimension:t.getImage(a.imageSrc),screenDimension:e.localSettings.screenDimension})),e.marginLeft<0)m=e.marginLeft+(i.paddingLeft>0?i.paddingLeft:i.marginLeft);else g=false,u=e.marginLeft;f=e.paddingLeft-l,e.setBox(256,{reset:1}),y=""}r=t.addImageSrc(a.imageSrc)}const S=Y();if(d=o.createNode(e.sessionId,{parent:i}),d.childIndex=e.childIndex,d.containerName=e.containerName+"_ORDINAL",d.inherit(e,"textStyle"),""!==h&&!h.endsWith("."))d.setCacheValue("fontSize",.75*d.fontSize);if("right"===y)if(r)b=Math.max(f/6,4),f-=b;else if(""!==h)h+=Ka.repeat(1===h.length?3:2);if(3===p)c.android("layout_columnSpan","2");if("DT"===e.tagName&&!r)c.android("layout_columnSpan",p.toString());else{if(r)d.setControlType(n.IMAGE,t.IMAGE),Object.assign(S.android,{src:"@drawable/"+r,scaleType:"right"===y?"fitEnd":"fitStart",baselineAlignBottom:g?"true":""});else if(""!==h){if(d.textContent=h,d.inlineText=true,d.setControlType(n.TEXT,t.TEXT),"DFN"===e.tagName)f+=8,d.modifyBox(64,8)}else d.setControlType(n.SPACE,t.SPACE),d.renderExclude=false,e.setBox(256,{reset:1});const{paddingTop:a,lineHeight:c}=e;if(d.cssApply({minWidth:f>0?Ua(f):"",marginLeft:u>0?Ua(u):"",paddingTop:a>0&&0===e.getBox(32)[0]?Ua(a):"",paddingRight:b>0?Ua(b):"",lineHeight:c>0?Ua(c):""}),d.apply(S),d.modifyBox(256,2),d.cssTry("display","block"))d.setBounds(),d.cssFinally("display");if(d.saveAsInitial(),""!==y)d.mergeGravity("gravity",e.localizeString(y));if(0!==s)d.modifyBox(2,s);if(0!==l)d.modifyBox(16,l);d.render(i),o.addLayoutTemplate(i,d,{type:1,node:d,controlName:d.controlName})}}if(0!==l)d.modifyBox(2,l),d.companion=c,this.subscribers.add(d);if(d.positioned=true,g){if(isNaN(m)||m<=0)i.setBox(i.paddingLeft>0?256:16,{reset:1});if(m<0)i.modifyBox(16,m)}if(p>0&&0===e.ascend({condition:e=>!e.blockStatic&&!e.hasWidth,error:e=>e.hasWidth,startSelf:e.naturalElement}).length)c.setLayoutWidth("0px"),c.android("layout_columnWeight","1");if(b)return{parent:c,renderAs:c,outputAs:o.renderNode(new Fa(i,c,e.baselineElement&&0===e.percentWidth&&!Ya(e.css("maxWidth"))?t.LINEAR:t.CONSTRAINT,18,c.children)),subscribe:true}}}postConstraints(e){const t=!e.naturalChild&&e.companion;if(t){const[i,a]=t.getBox(2);if(0===i)e.modifyBox(2,a-e.getBox(2)[1],false);else e.setBox(2,{adjustment:0})}}}const{BOX_STANDARD:Qa}=squared.base.lib.enumeration;class Relative extends squared.base.extensions.Relative{is(e){if(e.inlineStatic||e.imageOrSvgElement)switch(e.verticalAlign){case"sub":case"super":return true}return super.is(e)}postOptimize(e){if(!e.baselineAltered)switch(e.verticalAlign){case"sub":if(!e.outerMostWrapper.renderParent.layoutHorizontal)e.modifyBox(8,-1*Math.floor(e.baselineHeight*this.controller.localSettings.deviations.subscriptBottomOffset));break;case"super":if(!e.outerMostWrapper.renderParent.layoutHorizontal)e.modifyBox(2,-1*Math.floor(e.baselineHeight*this.controller.localSettings.deviations.superscriptTopOffset));break}super.postOptimize(e)}}var en=squared.base.LayoutUI;const{formatPX:tn}=squared.lib.css,{APP_SECTION:an,BOX_STANDARD:nn,NODE_ALIGNMENT:on,NODE_PROCEDURE:rn,NODE_RESOURCE:sn}=squared.base.lib.enumeration;class Sprite extends squared.base.extensions.Sprite{processNode(e,i){const a=e.data(this.name,"mainData");if(a){const o=this.resource.addImageSrc(e.backgroundImage);if(""!==o){const r=this.application.createNode(e.sessionId,{parent:i,innerWrap:e});return r.inherit(e,"base","initial","styleMap"),r.setControlType(n.FRAME,t.FRAME),r.exclude({resource:sn.ASSET,procedure:rn.CUSTOMIZATION,section:an.ALL}),e.setControlType(n.IMAGE,t.IMAGE),e.resetBox(30),e.resetBox(480),e.registerBox(2,r),e.registerBox(4,r),e.registerBox(8,r),e.registerBox(16,r),e.exclude({resource:sn.FONT_STYLE|sn.BOX_STYLE|sn.BOX_SPACING}),e.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:a.image.width>0?tn(a.image.width):"auto",height:a.image.height>0?tn(a.image.height):"auto",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"transparent"}),e.unsetCache(),e.android("src","@drawable/"+o),e.android("layout_marginTop",tn(a.position.top)),e.android(e.localizeString("layout_marginLeft"),tn(a.position.left)),{renderAs:r,outputAs:this.application.renderNode(new en(i,r,t.FRAME,4096,r.children)),parent:r,complete:true}}}}}const{convertCamelCase:ln}=squared.lib.util,{NODE_ALIGNMENT:cn,NODE_TEMPLATE:dn}=squared.base.lib.enumeration;class Substitute extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.require(a.EXTERNAL,true)}processNode(e,i){const a=U(e.dataset,ln(this.name,"."));if(a){const n=a.tag;if(n){e.setControlType(n,e.blockStatic?t.BLOCK:t.INLINE),e.render(i);const o=a.tagChild;if(o){const t=this.name;e.addAlign(4),e.each(e=>{if(e.styleElement)if(e.pseudoElement&&e.textEmpty)e.hide({remove:true});else e.use=t,e.dataset.androidSubstituteTag=o})}return{output:{type:1,node:e,controlName:n},include:true}}}}postOptimize(e){e.apply(Resource.formatOptions(Y(this.options[e.elementId]),this.application.extensionManager.optionValueAsBoolean(a.RESOURCE_STRINGS,"numberResourceValue")))}}var hn=squared.base.LayoutUI;const{CSS_UNIT:fn,formatPX:un}=squared.lib.css,{convertFloat:pn,convertInt:gn,trimEnd:mn}=squared.lib.util,{NODE_ALIGNMENT:bn}=squared.base.lib.enumeration;function yn(e){if(e.hasPX("height")&&e.height+e.contentBoxHeight<Math.floor(e.bounds.height)&&"top"!==e.css("verticalAlign"))e.setLayoutHeight("wrap_content")}class Table extends squared.base.extensions.Table{processNode(e,i){super.processNode(e,i);const a=e.data(this.name,"mainData");let n=false;if(a.columnCount>1)n=a.expand,e.each(e=>{const t=e.data(this.name,"cellData");if(t.flexible)e.android("layout_columnWeight",t.colSpan.toString()),e.setLayoutWidth("0px"),n=true;else{if(false===t.expand)e.android("layout_columnWeight","0");else if(t.percent){const i=pn(t.percent)/100;if(i>0)e.setLayoutWidth("0px"),e.android("layout_columnWeight",mn(i.toPrecision(3),"0")),n=true}if(t.downsized)if(t.exceed)e.setLayoutWidth("0px"),e.android("layout_columnWeight","0.01"),n=true;else if(e.hasPX("width")){const t=e.bounds.width;if(e.actualWidth<t)e.setLayoutWidth(un(t))}}if("TD"===e.tagName)e.setSingleLine(true);yn(e)});else e.each(e=>{if(e.has("width",{type:4}))e.setLayoutWidth("wrap_content"),n=true;yn(e)});if(e.hasWidth){if(e.width<Math.floor(e.bounds.width))if(a.layoutFixed)e.android("width",un(e.bounds.width));else{if(!e.hasPX("minWidth"))e.android("minWidth",un(e.actualWidth));e.css("width","auto")}}else if(n)if((i.blockStatic||i.hasPX("width"))&&Math.ceil(e.bounds.width)>=i.box.width)e.setLayoutWidth("match_parent");else e.css("width",un(e.actualWidth));if(e.hasHeight&&e.height<Math.floor(e.bounds.height)){if(!e.hasPX("minHeight"))e.android("minHeight",un(e.actualHeight));e.css("height","auto")}return{output:this.application.renderNode(hn.create({parent:i,node:e,containerType:t.GRID,alignmentType:4,children:e.children,rowCount:a.rowCount,columnCount:a.columnCount})),include:true,complete:true}}processChild(e,t){const i=e.data(this.name,"cellData");if(i){if(i.rowSpan>1)e.android("layout_rowSpan",i.rowSpan.toString());if(i.colSpan>1)e.android("layout_columnSpan",i.colSpan.toString());if(i.spaceSpan){const t=this.controller;t.addAfterOutsideTemplate(e.id,t.renderSpace({width:"wrap_content",height:"wrap_content",columnSpan:i.spaceSpan,android:{}}),false)}if(e.mergeGravity("layout_gravity","fill"),"hide"===t.css("emptyCells")&&e.textEmpty)e.hide({hidden:true})}}postOptimize(e){const t=gn(e.layoutWidth);if(t>0){const i=e.bounds.width;if(i>t)e.setLayoutWidth(un(i));if("auto"===e.cssInitial("width")&&e.renderChildren.every(e=>e.inlineWidth))e.renderEach(e=>{e.setLayoutWidth("0px"),e.android("layout_columnWeight","1")})}}}var Sn=squared.base.LayoutUI;const{NODE_ALIGNMENT:Tn}=squared.base.lib.enumeration;class VerticalAlign extends squared.base.extensions.VerticalAlign{processNode(e,i){return super.processNode(e,i),{output:this.application.renderNode(new Sn(i,e,t.RELATIVE,8,e.children)),subscribe:true}}}class WhiteSpace extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=true}}var wn=squared.base.LayoutUI;const{formatPX:En}=squared.lib.css,{hypotenuse:vn}=squared.lib.math,{withinRange:xn}=squared.lib.util,{NODE_ALIGNMENT:An}=squared.base.lib.enumeration;class Guideline extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:false}}is(e){return this.included(e.element)}condition(e){return e.length>0}processNode(e,i){return{output:this.application.renderNode(new wn(i,e,t.CONSTRAINT,32,e.children))}}postBaseLayout(e){const t=this.controller,i=this.options.circlePosition,{left:a,top:n}=e.box;let o;if(e.each(e=>{const t=e.linear;if(xn(t.left,a))e.anchorParent("horizontal",0);if(xn(t.top,n))e.anchorParent("vertical",0);if(i)if(e.anchored)o=e;else if(o){if(e.constraint.vertical&&!o.constraint.vertical)o=e}else if(e.constraint.vertical)o=e;else if(e.constraint.horizontal)o=e;e.positioned=true}),i){if(!o)o=e.item(0);if(!o.anchored)t.addGuideline(o,e);const{x:i,y:a}=o.center;e.each(e=>{if(e!==o){const{x:t,y:n}=e.center,r=Math.abs(t-i),s=Math.abs(n-a),l=Math.round(vn(r,s));let c=Math.round(Math.atan(Math.min(r,s)/Math.max(r,s))*(180/Math.PI));if(n>a)if(t>i)if(r>s)c+=90;else c=180-c;else if(r>s)c=270-c;else c+=180;else if(n<a){if(i>t)if(r>s)c+=270;else c=360-c;else if(r>s)c=90-c}else c=t>i?90:270;e.app("layout_constraintCircle",o.documentId),e.app("layout_constraintCircleRadius",En(l)),e.app("layout_constraintCircleAngle",c.toString())}})}else e.each(i=>{if(!i.anchored)t.addGuideline(i,e)})}}var _n=squared.base.LayoutUI;const{CSS_UNIT:Rn,isLength:In}=squared.lib.css,{BOX_STANDARD:Nn,NODE_ALIGNMENT:Cn,NODE_RESOURCE:kn,NODE_TEMPLATE:Ln}=squared.base.lib.enumeration,Pn=squared.base.extensions.CssGrid,On=e=>!e.blockStatic&&!e.hasPX("width")||e.has("width",{type:6,not:"100%"})&&"100%"!==e.css("minWidth")||e.has("maxWidth",{type:6,not:"100%"}),Wn=e=>"100%"===e.css("height")||"100%"===e.css("minHeight"),Dn=e=>e.marginTop>0||e.marginRight>0||e.marginBottom>0||e.marginLeft>0,Bn=(e,t)=>t.visibleStyle.background&&(On(e)||!Wn(t)||!Wn(e)),Mn=e=>"HTML"===e.tagName&&(e.contentBoxWidth>0||e.contentBoxHeight>0||Dn(e)),Hn=(e,t,i,a,n,o,r)=>i&&a&&(!o&&e.has("backgroundPositionY")||r&&(!n||!o)&&(On(e)||!Wn(t)||!Wn(e))||"fixed"===e.css("backgroundAttachment"));class Background extends squared.base.ExtensionUI{is(e){return e.documentBody}condition(e,t){const{backgroundColor:i,backgroundImage:a,backgroundRepeatX:n,backgroundRepeatY:o,borderWidth:r}=e.visibleStyle;return((e,t,i,a,n)=>(i||a)&&!Bn(e,t)&&(n||e.gridElement&&(Pn.isJustified(e)||Pn.isAligned(e))))(e,t,i,a,r)||Hn(e,t,i,a,n,o,r)||a&&Dn(e)||Mn(t)}processNode(e,i){const a=this.controller,{backgroundColor:n,backgroundImage:o,visibleStyle:r}=e,s=Hn(e,i,r.backgroundColor,r.backgroundImage,r.backgroundRepeatX,r.backgroundRepeatY,r.borderWidth),l=e.hasHeight||true===e.actualParent.hasHeight,c=Bn(e,i),d="fixed"===e.css("backgroundAttachment");let h,f,u=i;if(""!==n){if(!(r.backgroundImage&&r.backgroundRepeatX&&r.backgroundRepeatY)||/\.(gif|png)"?\)$/i.test(o)){if(h=a.createNodeWrapper(e,u,{resource:kn.BOX_SPACING|kn.FONT_STYLE|kn.VALUE_STRING}),h.css("backgroundColor",n),h.setCacheValue("backgroundColor",n),!c)h.setLayoutWidth("match_parent"),h.setLayoutHeight("match_parent");else if(!On(e))h.setLayoutWidth("match_parent");h.unsetCache("visibleStyle")}e.css("backgroundColor","transparent"),e.setCacheValue("backgroundColor",""),r.backgroundColor=false}if(""!==o&&(c||s||r.backgroundRepeatY||i.visibleStyle.background||Dn(e))){if(h){if(s||d)h.setControlType(View.getControlName(t.CONSTRAINT,e.api),t.CONSTRAINT),h.addAlign(16),h.render(u),this.application.addLayoutTemplate(u,h,{type:1,node:h,controlName:h.controlName}),f=h,u=h,h=a.createNodeWrapper(e,f,{resource:kn.BOX_SPACING})}else h=a.createNodeWrapper(e,u,{resource:kn.BOX_SPACING|kn.FONT_STYLE|kn.VALUE_STRING});h.setLayoutWidth("match_parent");const n=i.cssInitial("height"),p=i.cssInitial("minHeight");let g=e.css("backgroundSize");if(""===n&&""===p)h.setLayoutHeight(!c&&(d||!(s&&l)&&(r.backgroundRepeatY||e.has("backgroundSize")||e.css("backgroundPosition").split(" ").some(e=>In(e)&&parseInt(e)>0)))?"match_parent":"wrap_content");else{if("100%"!==n&&"100%"!==p){const e=i.toElementInt("offsetHeight");if(e<window.innerHeight)g=`auto ${e}px`}h.setLayoutHeight("match_parent")}if(h.cssApply({backgroundImage:o,backgroundSize:g,border:"0px none solid",borderRadius:"0px"}),h.cssApply(e.cssAsObject("backgroundRepeat","backgroundPositionX","backgroundPositionY","backgroundClip")),h.setCacheValue("backgroundImage",o),h.unsetCache("visibleStyle"),d)h.android("scrollbars","vertical");e.css("backgroundImage","none"),e.setCacheValue("backgroundImage",""),r.backgroundImage=false,r.backgroundRepeatX=false,r.backgroundRepeatY=false}if(Mn(i)){if(!h)h=a.createNodeWrapper(e,u);h.unsafe("excludeResource",kn.FONT_STYLE|kn.VALUE_STRING),i.resetBox(30,h),i.resetBox(480,h),h.setLayoutWidth("match_parent",false),h.setLayoutHeight("wrap_content",false)}if(h)return r.background=r.borderWidth||r.backgroundImage||r.backgroundColor,{parent:h,parentAs:f,renderAs:h,outputAs:this.application.renderNode(new _n(f||i,h,t.CONSTRAINT,16,h.children)),remove:true};else return{remove:true}}}var Gn=squared.base.LayoutUI;const{NODE_ALIGNMENT:Xn}=squared.base.lib.enumeration;class MaxWidthHeight extends squared.base.ExtensionUI{is(e){return!e.support.maxDimension&&!e.inputElement&&!e.controlElement}condition(e,t){const i=e.hasPX("maxWidth")&&!t.layoutConstraint&&!t.layoutElement&&(t.layoutVertical||t.layoutFrame||e.blockStatic||e.onlyChild&&(t.blockStatic||t.hasWidth)),a=e.hasPX("maxHeight")&&(t.hasHeight||t.gridElement||t.tableElement);if(i||a)return e.data(this.name,"mainData",{maxWidth:i,maxHeight:a}),true;else return false}processNode(e,i){const a=e.data(this.name,"mainData");if(a){const n=this.controller.createNodeWrapper(e,i,{containerType:t.CONSTRAINT,alignmentType:64,resetMargin:true});if(a.maxWidth)if(e.setLayoutWidth("0px"),n.setLayoutWidth("match_parent"),i.layoutElement){const t=e.autoMargin;t.horizontal=false,t.left=false,t.right=false,t.leftRight=false}if(a.maxHeight)if(e.setLayoutHeight("0px"),n.setLayoutHeight("match_parent"),i.layoutElement){const t=e.autoMargin;if(t.vertical=false,t.top=false,t.bottom=false,t.topBottom=false,!a.maxHeight&&e.blockStatic&&!e.hasWidth)e.setLayoutWidth("match_parent",false)}return{parent:n,renderAs:n,outputAs:this.application.renderNode(new Gn(i,n,n.containerType,4096,n.children))}}}}var Vn=squared.base.LayoutUI;const{BOX_STANDARD:zn,NODE_ALIGNMENT:Fn}=squared.base.lib.enumeration;function Un(e,t){if(e.pageFlow)return e===t.firstStaticChild&&e.inlineFlow&&!e.centerAligned&&!e.rightAligned&&e.marginLeft<0&&Math.abs(e.marginLeft)<=t.marginLeft+t.paddingLeft&&!t.some(e=>e.multiline);else return e.leftTopAxis&&(e.left<0||!e.hasPX("left")&&e.right<0)}class NegativeX extends squared.base.ExtensionUI{is(e){return e.length>0&&!e.rootElement&&"hidden"!==e.css("overflowX")}condition(e){return e.some(t=>Un(t,e))}processNode(e,i){const a=e.children.filter(t=>Un(t,e)),n=this.controller.createNodeWrapper(e,i,{children:a,containerType:t.CONSTRAINT});let o,r=NaN,s=NaN;e.resetBox(10,n);const l=a.length;let c=0;while(c<l){const e=a[c++],t=e.linear;if(e.pageFlow){if(isNaN(r)||t.left<r)r=t.left;o=e}else if(e.hasPX("left")){if(e.left<0&&(isNaN(r)||t.left<r))r=t.left}else if(e.right<0&&(isNaN(s)||t.right>s))s=t.right}if(!e.pageFlow){if(!isNaN(r)&&!e.has("left")){const t=e.linear.left-r;if(t>0)e.modifyBox(16,t)}if(!isNaN(s)&&!e.has("right")){const t=s-e.linear.right;if(t>0)e.modifyBox(4,t)}}else if(e.hasPX("width",{percent:false}))n.setLayoutWidth("wrap_content");else if(e.hasPX("width"))n.css("width",e.css("width"),true),e.setLayoutWidth("0px");return e.data(this.name,"mainData",{container:n,children:a,offsetLeft:e.marginLeft+e.paddingLeft,firstChild:o}),{parent:n,renderAs:n,outputAs:this.application.renderNode(new Vn(i,n,n.containerType,4104,n.children)),subscribe:true}}postBaseLayout(e){const t=e.data(this.name,"mainData");if(t){let i=t.firstChild;if(i)i=i.ascend({excluding:e,attr:"outerWrapper"}).pop()||i,i.anchor("left","parent"),i.anchorStyle("horizontal",0),i.anchorParent("vertical",0),i.modifyBox(16,t.offsetLeft),View.setConstraintDimension(i),i.positioned=true;const a=t.children,n=a.length;let o=0;while(o<n){const t=a[o++];if(t!==i)if(t.hasPX("left"))t.translateX(t.left),t.alignSibling("left",e.documentId),t.constraint.horizontal=true;else if(t.hasPX("right"))t.translateX(-t.right),t.alignSibling("right",e.documentId),t.constraint.horizontal=true}e.anchorParent("horizontal",0),e.anchorParent("vertical",0),View.setConstraintDimension(e),e.positioned=true}}beforeCascade(){for(const e of this.subscribers){const t=e.data(this.name,"mainData");if(t){const i=e.android("translationX"),a=e.android("translationY");if(""!==i||""!==a){const e=parseInt(i),n=parseInt(a),o=t.children,r=o.length;let s=0;while(s<r){const t=o[s++];if(!isNaN(e))t.translateX(e);if(!isNaN(n))t.translateY(n)}}}}}}var qn=squared.base.LayoutUI;const{BOX_STANDARD:Yn,NODE_ALIGNMENT:jn}=squared.base.lib.enumeration,Kn=(e,t)=>t.marginLeft<0&&(e.rootElement||t.linear.left<Math.floor(e.box.left)),$n=(e,t)=>t.marginTop<0&&(e.rootElement||t.linear.top<Math.floor(e.box.top));class PositiveX extends squared.base.ExtensionUI{is(e){return e.length>0}condition(e){var t,i;const{documentBody:a,lastStaticChild:n}=e;let o=e.contentBoxWidth>0||e.contentBoxHeight>0||0!==e.marginTop||0!==e.marginRight||0!==e.marginBottom||0!==e.marginLeft,r=false,s=false;if(null===(t=e.firstStaticChild)||void 0===t?void 0:t.lineBreak)o=true,r=true;if((null==n?void 0:n.lineBreak)&&(null===(i=n.previousSibling)||void 0===i?void 0:i.blockStatic))o=true,s=true;if(!a&&!o)return false;const l=e.rootElement,c=a&&e.positionStatic,d=e.paddingTop+(a?e.marginTop:0),h=e.paddingRight+(a?e.marginRight:0),f=e.paddingBottom+(a?e.marginBottom:0),u=e.paddingLeft+(a?e.marginLeft:0),p=new Set;let g=false,m=false;if(e.each(t=>{const i=l&&"fixed"===t.css("position");if(t.pageFlow||!o&&!i)return;const n=i&&t.autoPosition;if(t.hasPX("left")||n)if(a&&("100%"===t.css("width")||"100%"===t.css("minWidth"))){if(u>0||h>0)p.add(t);g=true}else{const i=t.left;if((i>=0||l)&&i<u)p.add(t);else if(i<0&&e.marginLeft>0)p.add(t);else if(!t.hasPX("right")&&Kn(e,t))p.add(t)}else if(t.hasPX("right"))if(c)p.add(t),g=true;else{const i=t.right;if((i>=0||l)&&i<h)p.add(t);else if(i<0&&e.marginRight>0)p.add(t);else if(((e,t)=>t.marginRight<0&&(e.rootElement||t.linear.right>Math.ceil(e.box.right)))(e,t))p.add(t)}else if(Kn(e,t))p.add(t);if(t.hasPX("top")||n)if(a&&("100%"===t.css("height")||"100%"===t.css("minHeight"))){if(d>0||f>0)p.add(t);m=true}else{const i=t.top;if((i>=0||l)&&(i<d||r))p.add(t);else if(i<0&&e.marginTop>0)p.add(t);else if(!t.hasPX("bottom")&&$n(e,t))p.add(t)}else if(t.hasPX("bottom"))if(c)p.add(t),m=true;else{const i=t.bottom;if((i>=0||l)&&(i<f||s))p.add(t);else if(i<0&&e.marginBottom>0)p.add(t);else if(((e,t)=>t.marginBottom<0&&(e.rootElement||t.linear.bottom>Math.ceil(e.box.bottom)))(e,t))p.add(t)}else if($n(e,t))p.add(t)}),p.size>0||g||m)return e.data(this.name,"mainData",{children:Array.from(p),right:g,bottom:m}),true;else return false}processNode(e,i){const a=e.data(this.name,"mainData");if(a){const n=a.children;let o;if(n.length>0)o=this.controller.createNodeWrapper(e,i,{children:n,resetMargin:!e.rootElement&&!e.pageFlow||i.layoutGrid,cascade:true,inheritDataset:true});if(e.documentBody){if(a.right)(o||e).setLayoutWidth("match_parent");if(a.bottom)(o||e).setLayoutHeight("match_parent")}else if(!e.pageFlow){if(!e.hasPX("width")&&e.hasPX("left")&&e.hasPX("right"))e.setLayoutWidth("match_parent");if(!e.hasPX("height")&&e.hasPX("top")&&e.hasPX("bottom"))e.setLayoutHeight("match_parent")}if(o)return{parent:o,renderAs:o,outputAs:this.application.renderNode(new qn(i,o,t.CONSTRAINT,32,o.children)),subscribe:true}}}postBaseLayout(e){const t=e.data(this.name,"mainData");if(t){const i=e.documentId,a=t.children,n=a.length;let o=0;while(o<n){const t=a[o++],n=!t.pageFlow&&(t.absoluteParent!==t.documentParent||"fixed"===t.css("position")||e.documentBody),r=t.outerMostWrapper;if(t.hasPX("left")){if(!n)t.translateX(t.left),t.alignSibling("left",i),t.constraint.horizontal=true;r.modifyBox(16,e.borderLeftWidth)}if(t.hasPX("right")){if(!n){if(t.translateX(-t.right),e.rootElement)t.anchor("right","parent");else t.alignSibling("right",i);t.constraint.horizontal=true}r.modifyBox(4,e.borderRightWidth)}else if(t.marginLeft<0&&Kn(e,t))r.alignSibling("left",i),r.translateX(t.linear.left-e.bounds.left),r.modifyBox(16,e.borderLeftWidth),r.constraint.horizontal=true,t.setBox(16,{reset:1});if(t.hasPX("top")){if(!n)t.translateY(t.top),t.alignSibling("top",i),t.constraint.vertical=true;r.modifyBox(2,e.borderTopWidth)}if(t.hasPX("bottom")){if(!n){if(t.translateY(-t.bottom),e.rootElement)t.anchor("bottom","parent");else t.alignSibling("bottom",i);t.constraint.vertical=true}r.modifyBox(8,e.borderBottomWidth)}else if(t.marginTop<0&&$n(e,t))r.alignSibling("top",i),r.translateY(t.linear.top-e.bounds.top),r.modifyBox(2,e.borderTopWidth),r.constraint.vertical=true,t.setBox(2,{reset:1})}}}}var Zn=squared.base.LayoutUI;const{CSS_UNIT:Jn,formatPX:Qn,isPercent:eo}=squared.lib.css,{truncate:to}=squared.lib.math,{BOX_STANDARD:io,NODE_ALIGNMENT:ao}=squared.base.lib.enumeration;const no=e=>eo(e)&&parseFloat(e)>0;class Percent extends squared.base.ExtensionUI{is(e){return!e.actualParent.layoutElement&&!e.display.startsWith("table")}condition(e,t){const i=e.absoluteParent||t,a=!i.hasPX("width",{percent:false}),n=!i.hasPX("height",{percent:false}),o=a&&function(e){const t=e.percentWidth;return t>0&&t<1||eo(e.css("maxWidth"))}(e)&&!t.layoutConstraint&&("100%"!==e.cssInitial("width")||e.has("maxWidth",{type:4,not:"100%"}))&&(e.rootElement||(t.layoutVertical||e.onlyChild)&&(t.blockStatic||t.percentWidth>0)),r=a&&function(e,t,i){return(no(e.css("marginLeft"))||no(e.css("marginRight")))&&(t.layoutVertical&&!t.hasAlign(2)||t.layoutFrame||e.blockStatic&&e.alignedVertically(void 0,i)||1===e.documentParent.length||!e.pageFlow)}(e,t,this.application.clearMap),s=n&&function(e,t){const i=e.percentHeight;return i>0&&i<1||eo(e.css("maxHeight"))&&t.hasHeight}(e,t)&&("100%"!==e.cssInitial("height")||e.has("maxHeight",{type:4,not:"100%"}))&&(e.rootElement||t.percentHeight>0),l=n&&(e=>(no(e.css("marginTop"))||no(e.css("marginBottom")))&&e.documentParent.percentHeight>0&&!e.inlineStatic&&(1===e.documentParent.length||!e.pageFlow))(e);if(o||s||r||l)return e.data(this.name,"mainData",{percentWidth:o,percentHeight:s,marginHorizontal:r,marginVertical:l}),true;else return false}processNode(e,i){const a=e.data(this.name,"mainData");if(a){let n;if(!i.layoutConstraint||a.percentHeight)n=this.controller.createNodeWrapper(e,i,{resetMargin:true});const o=n||i;if(a.percentWidth){if(!o.hasWidth)o.setCacheValue("hasWidth",true),o.css("display","block"),o.setLayoutWidth("match_parent");e.setLayoutWidth("100%"===e.cssInitial("width")&&!e.hasPX("maxWidth")?"match_parent":"0px")}else if(n&&!a.marginHorizontal)n.setLayoutWidth("wrap_content");if(a.percentHeight){if(!o.hasHeight)o.setCacheValue("hasHeight",true),o.setLayoutHeight("match_parent");e.setLayoutHeight("100%"===e.cssInitial("height")&&!e.hasPX("maxHeight")?"match_parent":"0px")}else if(n&&!a.marginVertical)n.setLayoutHeight("wrap_content");if(n)return{parent:n,renderAs:n,outputAs:this.application.renderNode(new Zn(i,n,t.CONSTRAINT,4096,n.children)),include:true};else return{include:true}}}postBaseLayout(e){const t=this.controller,i=e.data(this.name,"mainData"),a=c.constraint,n=e.renderParent,o=e.anchorTarget.renderParent.id;if(i.marginHorizontal){const[i,r]=e.cssAsTuple("marginLeft","marginRight"),s=Controller.anchorPosition(e,n,true,false),l=e.rightAligned;let c=e.percentWidth,d=no(i)?parseFloat(i)/100:0,f=no(r)?parseFloat(r)/100:0;if(c>0)if(l){if(c+f<1)d=1-(c+f)}else if(c+d<1)f=1-(c+d);if(d>0){const i=!l&&!e.centerAligned,n={width:"0px",height:"wrap_content",android:{[e.localizeString(h.MARGIN_LEFT)]:s.left?Qn(s.left):""},app:{layout_constraintHorizontal_chainStyle:i?"packed":"",layout_constraintHorizontal_bias:i?"0":"",layout_constraintWidth_percent:to(d,e.localSettings.floatPrecision),[a.top]:"parent",[e.localizeString(a.left)]:"parent",[e.localizeString(a.rightLeft)]:e.documentId}},r=t.renderSpace(n);if(n.documentId){if(e.anchorDelete("left"),e.anchor("leftRight",n.documentId),e.setBox(16,{reset:1}),0===f){if(l)e.anchor("right","parent"),e.app("layout_constraintHorizontal_chainStyle","packed"),e.app("layout_constraintHorizontal_bias","1");if(s.right)e.modifyBox(4,s.right)}e.constraint.horizontal=true,t.addAfterInsideTemplate(o,r)}}if(f>0){const i={width:"0px",height:"wrap_content",android:{[e.localizeString(h.MARGIN_RIGHT)]:s.right?Qn(s.right):""},app:{layout_constraintHorizontal_chainStyle:l?"packed":"",layout_constraintHorizontal_bias:l?"1":"",layout_constraintWidth_percent:to(f,e.localSettings.floatPrecision),[a.top]:"parent",[e.localizeString(a.right)]:"parent",[e.localizeString(a.leftRight)]:e.documentId}},n=t.renderSpace(i);if(i.documentId){if(e.anchorDelete("right"),e.anchor("rightLeft",i.documentId),e.setBox(4,{reset:1}),0===d){if(!l)e.anchor("left","parent"),e.app("layout_constraintHorizontal_chainStyle","packed"),e.app("layout_constraintHorizontal_bias","0");if(s.left)e.modifyBox(16,s.left)}e.constraint.horizontal=true,t.addAfterInsideTemplate(o,n)}}if(e.blockStatic&&!e.hasWidth)e.app("layout_constraintWidth_percent",(1-(d+f)).toString()),e.setLayoutWidth("0px"),e.setCacheValue("contentBoxWidth",0);else if(c>0){let t=c+d+f;if(t>=1)c-=t-1;else{const i=e.contentBox&&!e.tableElement?e.contentBoxWidth/n.box.width:0;if(i>0)if(t+=i,t>=1)c=1-(d+f);else c=t}e.app("layout_constraintWidth_percent",c.toString()),e.setLayoutWidth("0px"),e.setCacheValue("contentBoxWidth",0)}}if(i.marginVertical){const[i,r]=e.cssAsTuple("marginTop","marginBottom"),s=Controller.anchorPosition(e,n,true,false),l=e.bottomAligned;let c=e.percentHeight,d=no(i)?parseFloat(i)/100:0,f=no(r)?parseFloat(r)/100:0;if(c>0)if(l){if(c+f<1)d=1-(c+f)}else if(c+d<1)f=1-(c+d);if(d>0){const i={width:"wrap_content",height:"0px",android:{[h.MARGIN_TOP]:s.top?Qn(s.top):""},app:{layout_constraintVertical_chainStyle:!l?"packed":"",layout_constraintVertical_bias:!l?"0":"",layout_constraintHeight_percent:to(d,e.localSettings.floatPrecision),[e.localizeString(a.left)]:"parent",[a.top]:"parent",[a.bottomTop]:e.documentId}},n=t.renderSpace(i);if(i.documentId){if(e.anchorDelete("top"),e.anchor("topBottom",i.documentId),e.setBox(2,{reset:1}),0===f){if(l)e.anchor("bottom","parent"),e.app("layout_constraintVertical_chainStyle","packed"),e.app("layout_constraintVertical_bias","1");if(s.bottom)e.modifyBox(8,s.bottom)}e.constraint.vertical=true,t.addAfterInsideTemplate(o,n)}}if(f>0){const i={width:"wrap_content",height:"0px",android:{[h.MARGIN_BOTTOM]:s.bottom?Qn(s.bottom):""},app:{layout_constraintVertical_chainStyle:l?"packed":"",layout_constraintVertical_bias:l?"1":"",layout_constraintHeight_percent:to(f,e.localSettings.floatPrecision),[e.localizeString(a.left)]:"parent",[a.bottom]:"parent",[a.topBottom]:e.documentId}},n=t.renderSpace(i);if(i.documentId){if(e.anchorDelete("bottom"),e.anchor("bottomTop",i.documentId),e.setBox(8,{reset:1}),0===d){if(!l)e.anchor("top","parent"),e.app("layout_constraintHorizontal_chainStyle","packed"),e.app("layout_constraintHorizontal_bias","0");if(s.top)e.modifyBox(2,s.top)}e.constraint.vertical=true,t.addAfterInsideTemplate(o,n)}}if("100%"===e.css("height")||"100%"===e.css("minHeight"))e.app("layout_constraintHeight_percent",(1-(d+f)).toString()),e.setLayoutHeight("0px"),e.setCacheValue("contentBoxHeight",0);else if(c>0){let t=c+d+f;if(t>=1)c-=t-1;else{const i=e.contentBox&&!e.tableElement?e.contentBoxHeight/n.box.height:0;if(i>0)if(t+=i,t>=1)c=1-(d+f);else c=t}e.app("layout_constraintHeight_percent",c.toString()),e.setLayoutHeight("0px"),e.setCacheValue("contentBoxHeight",0)}}}}const{getElementAsNode:oo}=squared.lib.session,{NODE_ALIGNMENT:ro,NODE_RESOURCE:so,NODE_TEMPLATE:lo}=squared.base.lib.enumeration,co=squared.base.NodeUI;function ho(e,t,i){let a=false;const n=e.length;let o=0;while(o<n){const n=e[o++];if(n.toElementBoolean("checked"))n.android("checked","true");if(!a&&n.baseline&&n.parent===t&&t.layoutLinear&&(0===o||t.layoutHorizontal))t.android("baselineAlignedChildIndex",o.toString()),a=true;n.data(i,"siblings",e)}return a}const fo=e=>{var t;return(null===(t=e.name)||void 0===t?void 0:t.trim())||""};class RadioGroup extends squared.base.ExtensionUI{is(e){return e.is(t.RADIO)}condition(e){return""!==fo(e.element)&&!e.data(this.name,"siblings")}processNode(e,i){var a,o;const r=fo(e.element),s=[],l=[];let c=-1,d=-1;i.each((i,a)=>{const n=i.renderAs;let o;if(n){if(n!==e)o=i;i=n}if(i.is(t.RADIO)&&!i.rendered&&fo(i.element)===r){if(s.push(i),-1===c)c=a;d=a}else if(!i.visible&&s.includes(i.labelFor))d=a;if(o)l.push(o)});let h=s.length;if(h>1){const a=co.linearData(i.children.slice(c,d+1)).linearX,o=this.controller.createNodeGroup(e,s,i,{delegate:true}),r=n.RADIOGROUP;if(o.setControlType(r,t.LINEAR),a)o.addAlign(136),o.android("orientation","horizontal");else o.addAlign(16),o.android("orientation","vertical");if(o.inherit(e,"alignment"),o.exclude({resource:so.ASSET}),o.render(i),!ho(s,o,this.name))o.css("verticalAlign","middle"),o.setCacheValue("baseline",false),o.setCacheValue("verticalAlign","middle");h=l.length;let f=0;while(f<h)l[f++].hide({remove:true});return this.subscribers.add(o),{renderAs:o,outputAs:{type:1,node:o,controlName:r},parent:o,complete:true}}else{s.length=0;const i=fo(e.element),r=e.sessionId;if(document.querySelectorAll(`input[type=radio][name=${i}]`).forEach(e=>{const t=oo(e,r);if(t)s.push(t)}),h=s.length,h>1&&s.includes(e)){const e=n.RADIOGROUP,i=new Map;let r=0;while(r<h){const t=s[r++].ascend({condition:e=>e.layoutLinear,error:t=>t.controlName===e,every:true}),a=t.length;if(a>0){let e=0;while(e<a){const a=t[e++];i.set(a,(i.get(a)||0)+1)}}else{i.clear();break}}for(const[n,r]of i.entries())if(r===h){n.unsafe("controlName",e),n.containerType=t.RADIO;const i=null===(o=null===(a=n.renderParent)||void 0===a?void 0:a.renderTemplates)||void 0===o?void 0:o.find(e=>e.node===n);if(i)i.controlName=e;return void ho(s,n,this.name)}}}}postBaseLayout(e){e.renderEach(t=>t.naturalElement&&t.toElementBoolean("checked")&&e.android("checkedButton",t.documentId))}}const{formatPX:uo}=squared.lib.css,{BOX_STANDARD:po,NODE_RESOURCE:go,NODE_TEMPLATE:mo}=squared.base.lib.enumeration;class ScrollBar extends squared.base.ExtensionUI{is(e){return e.scrollElement&&!e.textElement}condition(e){return(e.overflowX&&e.hasPX("width")||e.overflowY&&e.hasPX("height")&&e.hasHeight)&&!e.rootElement&&"TEXTAREA"!==e.tagName}processNode(e,i){const a=[],r=[],s=n.HORIZONTAL_SCROLL,l=e.api<29?n.VERTICAL_SCROLL:o.VERTICAL_SCROLL,c=[];let d=NaN;if(e.overflowX&&e.overflowY)a.push(s,l);else if(e.overflowX)a.push(s);else if(e.overflowY)a.push(l);if(a.includes(s)){d=e.actualWidth-e.contentBoxWidth;let t=true,i=0;if(e.each(e=>{if(e.textElement&&"nowrap"!==e.css("whiteSpace"))c.push(e);else{const t=e.actualWidth;if(t<=d)return;else if(t>i)i=t}t=false}),!t){if(i>d)d=i}else a.shift()}const h=a.length;if(h>0){for(let n=0;n<h;++n){const o=this.application.createNode(e.sessionId,{parent:i});if(0===n){if(o.inherit(e,"base","initial","styleMap"),!i.replaceTry({child:e,replaceWith:o}))return}else o.inherit(e,"base"),o.exclude({resource:go.BOX_STYLE});o.setControlType(a[n],t.BLOCK),o.exclude({resource:go.ASSET}),o.resetBox(480),o.childIndex=e.childIndex,r.push(o)}for(let t=0;t<h;++t){const a=r[t];switch(a.controlName){case l:e.setLayoutHeight("wrap_content"),a.setLayoutHeight(uo(e.actualHeight)),a.android("scrollbars","vertical"),a.cssApply({width:1===h&&e.css("width")||"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case s:e.setLayoutWidth("wrap_content"),a.setLayoutWidth(uo(e.actualWidth)),a.android("scrollbars","horizontal"),a.cssApply({height:1===h&&e.css("height")||"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"});break}if(0===t)a.render(i);else a.render(r[t-1]);a.unsetCache(),this.application.addLayoutTemplate(a.renderParent||i,a,{type:1,node:a,controlName:a.controlName})}const n=c.length;let o=0;while(o<n){const e=c[o++];if(e.textElement)e.css("maxWidth",uo(d))}let f,u=true;do{if(f=r.pop(),u)i=f,f.innerWrapped=e,u=false;else f.innerWrapped=i}while(r.length>0);return e.exclude({resource:go.BOX_STYLE}),e.resetBox(30,f),e.parent=i,{parent:i}}}}var bo={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},yo={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","start","top","right","end","bottom","drawable","width","height","gravity"],">":{shape:bo.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const So={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},To={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":true,">":{"clip-path":{"^":"android","@":["name","pathData","fillType"]},path:So.path},"#":"include"}};var wo={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:So.path},"#":"include"}};const{reduceRGBA:Eo}=squared.lib.color,{extractURL:vo,formatPercent:xo,formatPX:Ao,getBackgroundPosition:_o}=squared.lib.css,{truncate:Ro}=squared.lib.math,{delimitString:Io,flatArray:No,isEqual:Co,plainMap:ko,resolvePath:Lo}=squared.lib.util,{applyTemplate:Po}=squared.lib.xml,{BOX_STANDARD:Oo,NODE_RESOURCE:Wo}=squared.base.lib.enumeration,Do=squared.base.NodeUI,Bo=/\s*,\s*/;function Mo(e,t=-1,i=false){const{style:a,color:n}=e,o=Zo(e.width),r=Jo(n);switch(a){case"solid":break;case"dotted":r.dashWidth=Ao(o),r.dashGap=r.dashWidth;break;case"dashed":{let e,t;switch(o){case 1:case 2:e=3*o,t=e-1;break;case 3:e=6,t=3;break;default:e=2*o,t=4;break}r.dashWidth=Ao(e),r.dashGap=Ao(t);break}case"inset":case"outset":case"groove":case"ridge":{const e=n.rgba;let r=1;if(1===o){if("inset"===a||"outset"===a)r=.5}else{const n=e.r===e.g&&e.g===e.b;let o=0;if("ridge"===a)i=!i,o+=.25;else if("groove"===a)o+=.25;else if(n){if("inset"===a)i=!i}else if("outset"===a)i=!i;if(i)switch(t){case 0:case 3:t=1;break;case 1:case 2:t=0;break}switch(t){case 0:case 3:if(n)r=.5+o;break;case 1:case 2:r=n?.75+o:-.75;break}}if(1!==r){const t=Eo(e,r,n.valueAsRGBA);if(t)return Jo(t)}break}}return r}function Ho(e,t=-1,i=false,a=false){if(e){let n;if(Vo(e.style)){const o=parseFloat(e.width);n=Mo(e,t,!a),n.width=a?Ao(2*Math.ceil(o/2)):Ao(i?Math.ceil(o/2):Zo(e.width))}else n=Mo(e),n.width=Ao(Zo(e.width));return n}}function Go(e){const[t,i,a,n]=e,o={};let r=false;if("0px"!==t)o.topLeftRadius=t,r=true;if("0px"!==i)o.topRightRadius=i,r=true;if("0px"!==a)o.bottomRightRadius=a,r=true;if("0px"!==n)o.bottomLeftRadius=n,r=true;return r?o:void 0}function Xo(e){const t=Yo(e,false);return""!==t?{color:t}:void 0}function Vo(e,t=0){switch(e){case"groove":case"ridge":case"inset":case"outset":return 1!==t;default:return false}}function zo(e,t,i,a,n,o,r=0,s){const l=Zo(t.width),c=Math.max(1,Math.floor(l/3)),d=r>0?Ao(r):"";let h="-"+Ao(c+r+1);e.push({top:i?d:h,right:a?d:h,bottom:n?d:h,left:o?d:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Ao(c)},Mo(t)),corners:s}});const f=l-c+r,u=Ao(f);h="-"+Ao(f+1),e.push({top:i?u:h,right:a?u:h,bottom:n?u:h,left:o?u:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Ao(c)},Mo(t)),corners:s}})}function Fo(e,t,i){if(!e.includes(" ")&&t.includes(" "))return/^[a-z]+$/.test(e)?("initial"===e?i:e)+" 0px":i+" "+e;else if("initial"===e)return"0px";return e}function Uo(e,t=29,i,a,n){const{colorStops:o,type:r}=e;let s=t>=21;const l={type:r,positioning:s},c=o.length;switch(r){case"conic":{const t=e.center;if(l.type="sweep",s)l.centerX=(2*t.left).toString(),l.centerY=(2*t.top).toString();else l.centerX=xo(t.leftAsPercent),l.centerY=xo(t.topAsPercent);break}case"radial":{const{center:t,radius:i}=e;if(s)l.gradientRadius=i.toString(),l.centerX=t.left.toString(),l.centerY=t.top.toString();else l.gradientRadius=Ao(i),l.centerX=xo(t.leftAsPercent),l.centerY=xo(t.topAsPercent);break}case"linear":if(!s||a&&1===i&&1===o[c-1].offset&&(2===c||3===c&&.5===o[1].offset))l.angle=(e.angle+90).toString(),l.positioning=false,s=false;else{const{angle:t,angleExtent:i,dimension:a}=e,{width:o,height:r}=a;let{x:s,y:c}=i;if(t<=90)c+=r,l.startX="0",l.startY=r.toString();else if(t<=180)l.startX="0",l.startY="0";else if(t<=270)s+=o,l.startX=o.toString(),l.startY="0";else s+=o,c+=r,l.startX=o.toString(),l.startY=r.toString();l.endX=Ro(s,n),l.endY=Ro(c,n)}break}if(s)l.item=tr(o);else if(l.startColor=Yo(o[0].color),l.endColor=Yo(o[c-1].color),c>2)l.centerColor=Yo(o[Math.floor(c/2)].color);return l}function qo(e,t=[],i=true,a,n,o){const r=[],s=[{"xmlns:android":d.android,item:r}],l=!i&&Xo(e.backgroundColor);if(l&&!t.find(e=>!!e.gradient))r.push({shape:{"android:shape":"rectangle",solid:l,corners:n}});let c=0;while(c<t.length){const e=t[c++];r.push(e.gradient?{shape:{"android:shape":"rectangle",gradient:e.gradient,corners:n}}:e)}if(a)r.push({top:o,right:o,left:o,bottom:o,shape:{"android:shape":"rectangle",stroke:a,corners:n}});return s}function Yo(e,t=true){const i=Resource.addColor(e,t);return""!==i?"@color/"+i:""}function jo(e,t){while(e.length<t)e=e.concat(e.slice(0));return e.length=t,e}function Ko(e,t,i,a,n,o){const r=t[i];if(r){const t=Zo(r.width);if("double"===r.style&&t>1)zo(e.item,r,0===i,1===i,2===i,3===i,n,a);else{const s=t>1&&Qo(r);if(s){const a="-"+Ao(t+n+1);e.item.push({top:0===i?"":a,right:1===i?"":a,bottom:2===i?"":a,left:3===i?"":a,shape:{"android:shape":"rectangle",stroke:Ho(r,i,s,true)}})}const l="-"+Ao((s?Math.ceil(t/2):t)+n+1);e.item.push({top:0===i?o:l,right:1===i?o:l,bottom:2===i?o:l,left:3===i?o:l,shape:{"android:shape":"rectangle",corners:a,stroke:Ho(r,i,s)}})}}}function $o(e,t){if(e!==t&&!t.hasResource(Wo.BOX_SPACING)&&0===e.percentWidth)switch(e.cssInitial("maxWidth")){case"":case"auto":case"100%":{const e=t.renderChildren;if(1===e.length)t.removeTry({replaceWith:e[0]});break}}}const Zo=e=>Math.round(parseFloat(e)),Jo=e=>({color:Yo(e),dashWidth:"",dashGap:""}),Qo=e=>"groove"===e.style||"ridge"===e.style||"double"===e.style&&Zo(e.width)>1,er=(e,t)=>`${e}px ${t}px`;function tr(e,t){return ko(e,e=>({color:Yo(e.color),offset:Ro(e.offset,t)}))}function ir(e,t,i=0,a=0,n){if(n)i=Ro(i,n),a=Ro(a,n),e=Ro(i+e,n),t=Ro(a+t,n);else e+=i,t+=a;return`M${i},${a} ${e},${a} ${e},${t} ${i},${t} Z`}class ResourceBackground extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={drawOutlineAsInsetBorder:true},this.eventOnly=true}beforeParseDocument(){this._resourceSvgInstance=this.controller.localSettings.svg.enabled?this.application.builtInExtensions[a.RESOURCE_SVG]:void 0}afterResources(e){const t=this.application.userSettings,i=this.options.drawOutlineAsInsetBorder;let a=false;const o=(e,t,i)=>{Resource.addTheme({name:e,parent:t,items:{"android:windowBackground":i,"android:windowFullscreen":"true","android:fitsSystemWindows":"true"}}),a=true},r=(e,i)=>{if(""!==i){const n="@drawable/"+Resource.insertStoredAsset("drawables",e.containerName.toLowerCase()+"_"+e.controlId,i);if(!a)if("HTML"===e.tagName)return void o(t.manifestThemeName,t.manifestParentThemeName,n);else{const i=e.innerMostWrapped;if(i.documentBody&&(""!==e.backgroundColor||e.visibleStyle.backgroundRepeatY))return o(t.manifestThemeName,t.manifestParentThemeName,n),void $o(i,e)}e.android("background",n,false)}};this.application.getProcessingCache(e).each(e=>{var s,l;const c=e.data(Resource.KEY_NAME,"boxStyle");if(c){if(e.inputElement){const t=e.companion;if("LABEL"===(null==t?void 0:t.tagName)&&!t.visible){const e=null===(s=t.data(Resource.KEY_NAME,"boxStyle"))||void 0===s?void 0:s.backgroundColor;if(e)c.backgroundColor=e}}const d=this.getDrawableImages(e,c);if(e.controlName===n.BUTTON&&1===(null===(l=c.borderRadius)||void 0===l?void 0:l.length)&&(null==d?void 0:d.some(e=>true===e.vectorGradient))&&e.api>=28)e.android("buttonCornerRadius",c.borderRadius[0]),c.borderRadius=void 0;const h=c.outline;let[f,u]=this.getDrawableBorder(c,void 0,d,i&&h?function(e){const t=Zo(e.width);return 2===t&&"double"===e.style?3:t}(h):0);const p=void 0===f&&void 0===u;if(h&&(i||p)){const[e,t]=this.getDrawableBorder(c,h,p?d:void 0,void 0,!p);if(e){if(!f)f=e}else if(t)if(u)u[0].item=u[0].item.concat(t[0].item);else u=t}if(f)r(e,Po("shape",bo,f));else if(u)r(e,Po("layer-list",yo,u));else{const i=c.backgroundColor;if(i){const n=Yo(i,e.inputElement);if(""!==n){if(!a)if("HTML"===e.tagName)return void o(t.manifestThemeName,t.manifestParentThemeName,n);else{const i=e.innerMostWrapped;if(i.documentBody)return o(t.manifestThemeName,t.manifestParentThemeName,n),void $o(i,e)}const r=e.data(Resource.KEY_NAME,"fontStyle");if(r)r.backgroundColor=i;else e.android("background",n,false)}}}}})}getDrawableBorder(e,t,i,a=0,n=false){const o=new Array(4),r=!n?function(e){if(e)switch(e.length){case 1:return{radius:e[0]};case 8:{const t=new Array(4);let i=0,a=0;while(i<8)t[a++]=Ao((parseFloat(e[i++])+parseFloat(e[i++]))/2);return Go(t)}default:return Go(e)}}(e.borderRadius):void 0,s=a>0?Ao(a):"";let l,c,h,f,u,p=true,g=true;if(t){h=t,l=new Array(4);for(let e=0;e<4;++e)l[e]=t,o[e]=true}else{l=[e.borderTop,e.borderRight,e.borderBottom,e.borderLeft];for(let e=0;e<4;++e){const t=l[e];if(t){if(p&&h)if(p=Co(h,t),!p)g=false;h=t,o[e]=true}else o[e]=false,g=false}}if(g)c=h;if(c&&!Vo(c.style,Zo(c.width))&&!("double"===c.style&&parseInt(c.width)>1)||!h&&(r||(null==i?void 0:i.length))){const t=c?Ho(c):false;if((null==i?void 0:i.length)||a>0||n)u=qo(e,i,n,t,r,s);else f=function(e,t,i){return[{"xmlns:android":d.android,"android:shape":"rectangle",stroke:e,solid:t,corners:i}]}(t,!n&&Xo(e.backgroundColor),r)}else if(h)if(u=qo(e,i,n),p&&!Vo(h.style)){const e=Zo(h.width);if("double"===h.style&&e>1)zo(u[0].item,h,o[0],o[1],o[2],o[3],a,r);else{const t="-"+Ao(e+a+1);u[0].item.push({top:o[0]?s:t,right:o[1]?s:t,bottom:o[2]?s:t,left:o[3]?s:t,shape:{"android:shape":"rectangle",corners:r,stroke:Ho(h)}})}}else{const e=u[0];Ko(e,l,0,r,a,s),Ko(e,l,3,r,a,s),Ko(e,l,2,r,a,s),Ko(e,l,1,r,a,s)}return[f,u]}getDrawableImages(e,i){var a;const n=i.backgroundImage,o=e.data(Resource.KEY_NAME,"embedded");if(n||o){const l=this.resource,c=e.localSettings.screenDimension,{bounds:h,fontSize:f}=e,{width:u,height:p}=h,g=[],m=[],b=[],y=[],S=[],T=i.backgroundPositionX.split(Bo),w=i.backgroundPositionY.split(Bo);let E=i.backgroundRepeat.split(Bo),v=i.backgroundSize.split(Bo),x=0;if(n){const t=this._resourceSvgInstance,o=n.length;E=jo(E,o),v=jo(v,o);let r=false;for(let s=0;s<o;++s){let d=n[s],h=false;if("string"==typeof d){if("initial"!==d){if(t){const[i,n]=t.createSvgElement(e,d);if(i&&n){const o=t.createSvgDrawable(e,n);if(o){const t=(null===(a=e.data(Resource.KEY_NAME,"svg"))||void 0===a?void 0:a.viewBox)||{width:n.width.baseVal.value,height:n.height.baseVal.value};if(!e.svgElement){let{width:e,height:i}=t;if(e>u||i>p){const t=e/u,a=i/p;if(t>a)if(t>1)e=u,i/=t;else i=p*(a/t);else if(a>1)i=p,e/=a;else e=u*(t/a)}t.width=e,t.height=i}m[x]=o,y[x]=t,b[x]=true,h=true}i.removeChild(n)}}if(!h){const e=vo(d);if(e)if(e.startsWith("data:image/")){const t=l.getRawData(e);if(null==t?void 0:t.base64){const e=t.filename;if(e)m[x]=e.substring(0,e.lastIndexOf(".")),y[x]=t.width&&t.height?t:void 0,l.writeRawImage(t.mimeType,{filename:e,data:t.base64,encoding:"base64"}),h=true}}else{d=Lo(e);const t=l.addImageSet({mdpi:d});if(m[x]=t,""!==t)y[x]=l.getImage(d),h=true}}}}else if(d.colorStops.length>1){const t=Uo(d,e.api,o,i.borderRadius);if(t)m[x]=t,y[x]=d.dimension,h=true}if(h){const t=T[s]||T[s-1],i=w[s]||w[s-1];S[x]=_o(Fo(t,i,"left")+" "+Fo(i,t,"top"),e.actualDimension,{fontSize:f,imageDimension:y[x],imageSize:v[s],screenDimension:c}),++x}else E[s]=void 0,v[s]=void 0,r=true}if(r)E=No(E),v=No(v)}if(o){if(0===x)E.length=0,v.length=0;for(const t of o.filter(e=>e.visible&&(e.imageElement||"INPUT_IMAGE"===e.containerName))){const i=t.element,a=l.addImageSrc(i);if(""!==a){const n=t.bounds;m[x]=a,E[x]="no-repeat",v[x]=er(t.actualWidth,t.actualHeight);const o=_o("INPUT_IMAGE"===t.containerName?er(0,0):er(n.left-h.left+e.borderLeftWidth,n.top-h.top+e.borderTopWidth),e.actualDimension,{fontSize:f,imageDimension:n,screenDimension:c}),r=l.getImage(i.src);if(!e.hasPX("width")){const t=((null==r?void 0:r.width)||i.naturalWidth)+o.left-(e.paddingLeft+e.borderLeftWidth);if(t>0)e.modifyBox(256,t)}y[x]=r,S[x]=o,++x}}}const A=e.innerMostWrapped.documentBody;for(let a=x-1,n=0;a>=0;--a){const o=m[a],l={order:1/0};if("object"==typeof o&&!o.positioning){l.gravity="fill",l.gradient=o,l.order=n++,g.push(l);continue}const f=S[a],T=4===f.orientation.length,w=v[a];let x=E[a],_=y[a],R=NaN,I=NaN,N=true!==b[a],C=e.is(t.IMAGE)||"string"!=typeof o,k=0,L=0,P=0,O=0,W=0,D=0,B=0,M=NaN,H=NaN,G=NaN,X=NaN,V="",z="",F="",U="",q="",Y=false,j=false;if(_)if(!_.width||!_.height)_=void 0;else R=_.width,I=_.height;if(x.includes(" ")){const[e,t]=x.split(" ");if("no-repeat"===e)x="no-repeat"===t?"no-repeat":"repeat-y";else if("no-repeat"===t)x="repeat-x";else x="repeat"}else if("space"===x||"round"===x)x="repeat";switch(x){case"repeat":V="repeat",z="repeat";break;case"repeat-x":V="repeat",z="disabled";break;case"repeat-y":V="disabled",z="repeat";break;default:V="disabled",z="disabled";break}switch(f.horizontal){case"left":case"0%":case"0px":if(F=e.localizeString("left"),T)X=0,Y=true;break;case"center":case"50%":F="center_horizontal";break;case"right":case"100%":if(F=e.localizeString("right"),H=0,T)Y=true;break;default:if(f.leftAsPercent<1)F="left",X=0,Y=true;else F="right",H=0,Y=true;break}switch(f.vertical){case"top":case"0%":case"0px":if(U="top",T)M=0,j=true;break;case"center":case"50%":U="center_vertical";break;case"bottom":case"100%":if(U="bottom",G=0,T)j=true;break;default:if(f.topAsPercent<1)U="top",M=0,j=true;else U="bottom",G=0,j=true;break}switch(w){case"auto":case"auto auto":case"initial":if("string"!=typeof o)q="fill";break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(e.ascend({condition:e=>e.hasPX("width"),startSelf:true}).length>0)F="",U="";case"contain":case"cover":case"round":if(V="",z="",q="fill",A){const t=e.visibleStyle;t.backgroundRepeat=true,t.backgroundRepeatY=true}break;default:if(""!==w)w.split(" ").forEach((t,i)=>{if("100%"===t)q=0===i?"fill_horizontal":Io({value:q,delimiter:"|"},"fill_vertical");else if("auto"!==t)if(0===i){if("repeat"!==V||!N)W=e.parseWidth(t,false)}else if("repeat"!==z||!N)D=e.parseHeight(t,false)});break}let K,$=false,Z=false,J=false,Q=false,ee=true;if(_){let t=u,i=p;if("contain"!==w)if(!e.hasWidth){const a=window.innerWidth,n=c.width,o=()=>p*(t/u);if(u===a)if(a>=n)t=n,i=o();else({width:t,height:i}=Do.refitScreen(e,h));else if(a>=n)t=e.actualBoxWidth(u),i=o()}const a=R/t,n=I/i,o=()=>R*D/I,r=()=>I*W/R,s=()=>t*(a/n),l=()=>i*(n/a),d=(e,t)=>{if(V="",z="",q="",e)F="",U="";if(t)M=NaN,H=NaN,G=NaN,X=NaN,Y=false,j=false;ee=false};switch(w){case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(I>=p){J=true,Q=true,D=p,C=true;break}case"cover":{const o="cover"===w;if(d(o,!o),a<n)if(W=t,D=l(),D>p){const t=f.topAsPercent;if(0!==t)k=Math.round((p-D)*t);const i=e.layoutConstraint||e.layoutRelative?"minHeight":"height";if(!e.hasPX(i))e.css(i,Ao(p-e.contentBoxHeight));if(!Y)q="center_horizontal|fill_horizontal"}else{if(D<p)W=t*p/D,D=p;if(!Y)q="center_horizontal|fill"}else if(a>n){if(W=s(),D=i,W>u){if(e.hasWidth){const e=f.leftAsPercent;if(0!==e)O=Math.round((u-W)*e)}if(!j)q="center_vertical|fill_vertical"}else{if(W<u)W=u,D=i*u/W;if(!j)q="center_vertical|fill"}Y=false}else q="fill";j=false;break}case"contain":if(d(true,true),a>n)D=l(),W=R<u?o():u,U="center_vertical",q="fill_horizontal";else if(a<n)W=s(),D=I<p?r():p,F="center_horizontal",q="fill_vertical";else q="fill";break;default:if(0===W&&D>0)W=o();if(0===D&&W>0)D=r();break}}if(i.backgroundClip){const{top:t,right:a,left:n,bottom:o}=i.backgroundClip;if(0===W)W=u;else W+=e.contentBoxWidth;if(0===D)D=p;else D+=e.contentBoxHeight;if(W-=n+a,D-=t+o,!isNaN(H))L+=a;else O+=n;if(!isNaN(G))P+=o;else k+=t;F="",U=""}else if(ee){if(i.backgroundOrigin){if("repeat"!==V)if(!isNaN(H))L+=i.backgroundOrigin.right;else O+=i.backgroundOrigin.left;if("repeat"!==z)if(!isNaN(G))P+=i.backgroundOrigin.bottom;else k+=i.backgroundOrigin.top}if(!C&&!A){if(0===W&&R>u){W=u-(Y?Math.min(f.left,0):0);let t=true;if("repeat"===z&&""!==F){switch(F){case"start":case"left":if(L+=u-R,Y){const e=f.left;if(e<0)B=e;W=0,L-=e,t=false,F="right",z=""}else F="";X=NaN,H=0;break;case"center_horizontal":F+="|fill_vertical",z="";break;case"right":if(O+=u-R,Y){const i=f.right;if(i<0)B=i;W=0,O-=i,t=false,F=e.localizeString("left"),z=""}else F="";X=0,H=NaN;break}Y=false,U=""}if(t)q=Io({value:q,delimiter:"|",not:["fill"]},"fill_horizontal");if("disabled"!==V)V="";$=true}if(0===D&&I>p){D=p;let e=true;if("repeat"===V&&""!==U){switch(U){case"top":if(j){P+=p-I;const t=f.top;if(t<0)B=t;D=0,P-=t,e=false,U="bottom",V="",M=NaN,G=0}break;case"center_vertical":U+="|fill_horizontal",V="";break;case"bottom":if(k+=p-I,j){const t=f.bottom;if(t<0)B=t;D=0,k-=t,e=false,U="top"}else U="";V="",M=0,G=NaN;break}F="",j=false}if(e)q=Io({value:q,delimiter:"|",not:["fill"]},"fill_vertical");if("disabled"!==z)z="";Z=true}}}switch(e.controlName){case r.TOOLBAR:case s.TOOLBAR:F="",U="",q="fill";break}if(!C){if(0===W&&R<u&&"disabled"===V)W=R,J=true;if(0===D&&I<p&&"disabled"===z)D=I,Q=true;const t=F;if("repeat"===V){switch(U){case"top":if(!isNaN(M))V="";U="";break;case"bottom":if(W>0&&!J)V="";else if(Q)if(W=R,q=Io({value:q,delimiter:"|",not:["fill"]},"fill_horizontal"),I>=R)V="";break}F=""}if("repeat"===z){switch(t){case"start":case"left":if(!isNaN(X))z="";F="";break;case"center_horizontal":if(e.renderChildren.length>0)z="";break;case"right":case"end":if(D>0&&!Q)z="";else if(J)if(D=I,q=Io({value:q,delimiter:"|",not:["fill"]},"fill_vertical"),R>=I)z="";break}U=""}if(""!==F&&!$)q=Io({value:q,delimiter:"|"},F),F="";if(""!==U&&!Z)q=Io({value:q,delimiter:"|"},U),U=""}else if(0===W&&0===D&&"fill"===q)N=false;if("string"==typeof o)K="@drawable/"+o;else if(o.item){if(0===W)W=(null==_?void 0:_.width)||Do.refitScreen(e,e.actualDimension).width;if(0===D)D=(null==_?void 0:_.height)||Do.refitScreen(e,e.actualDimension).height;const t=Resource.insertStoredAsset("drawables",`${e.controlId}_gradient_${a+1}`,Po("vector",wo,[{"xmlns:android":d.android,"xmlns:aapt":d.aapt,"android:width":Ao(W),"android:height":Ao(D),"android:viewportWidth":W.toString(),"android:viewportHeight":D.toString(),path:{pathData:ir(W,D),"aapt:attr":{name:"android:fillColor",gradient:o}}}]));if(""!==t)K="@drawable/"+t,l.order=n++,l.vectorGradient=true;if("left"===F||"start"===F)F="";if("top"===U)U="";if("fill"!==q)if("repeat"===V&&"repeat"===z)q="fill";else if("repeat"===V)if("fill_vertical"===q)q="fill";else q="fill_horizontal";else if("repeat"===z)if("fill_horizontal"===q)q="fill";else q="fill_vertical"}const te="center_horizontal"===F&&"center_vertical"===U?"center":Io({value:F,delimiter:"|"},U);if(K){if(N&&(!C&&(""!==q&&""!==te||"repeat"===V||"repeat"===z||A)||J||Q)){let e="";if("disabled"===V&&"disabled"===z)e="disabled",V="",z="";else if("repeat"===V&&"repeat"===z)e="repeat",V="",z="";l.gravity=q,l.bitmap=[{src:K,gravity:te,tileMode:e,tileModeX:V,tileModeY:z}]}else l.gravity=Io({value:te,delimiter:"|"},q),l.drawable=K;if(l.drawable||l.bitmap||l.gradient){if(!isNaN(G)){if(j)P+=f.bottom;if(P+=G,0!==P)l.bottom=Ao(P);if(B<0)l.top=Ao(B)}else{if(j)k+=f.top;if(!isNaN(M))k+=M;if(0!==k)l.top=Ao(k);if(B<0)l.bottom=Ao(B)}if(!isNaN(H)){if(Y)L+=f.right;if(L+=H,0!==L)l[e.localizeString("right")]=Ao(L);if(B<0)l[e.localizeString("left")]=Ao(B)}else{if(Y)O+=f.left;if(!isNaN(X))O+=X;if(0!==O)l[e.localizeString("left")]=Ao(O);if(B<0)l[e.localizeString("right")]=Ao(B)}if(W>0)l.width=Ao(W);if(D>0)l.height=Ao(D);g.push(l)}}}return g.sort((e,t)=>{const i=e.order,a=t.order;if(i===a)return 0;else return i<a?-1:1})}}}const{capitalize:ar}=squared.lib.util;class ResourceData extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e,t){const i=this.application.viewModel;if(i){const a=this.controller,n=new Set,o=e.length;let r=0;while(r<o){const t=e[r++];if(t.styleElement&&t.visible)for(const e of t.unsafe("namespaces")){const i=U(t.dataset,"viewmodel"+ar(e));if(i){for(const a in i)t.attr(e,a,`@{${i[a]}}`,true);n.add(t)}}}if(n.size>0){r=0;while(r<t.length){const e=t[r++].node;for(const t of n)if(t.ascend({condition:t=>t===e,attr:"renderParent"}).length>0){const{import:o,variable:r}=i,{depth:s,id:l}=e,c="\t".repeat(s),d="\t".repeat(s+1),h="\t".repeat(s+2);let f=c+"<layout {#0}>\n"+d+"<data>\n";if(o){let e=0;while(e<o.length)f+=h+`<import type="${o[e++]}" />\n`}if(r){let e=0;while(e<r.length){const{name:t,type:i}=r[e++];f+=h+`<variable name="${t}" type="${i}" />\n`}}f+=d+"</data>\n",a.addBeforeOutsideTemplate(l,f),a.addAfterOutsideTemplate(l,c+"</layout>\n"),e.depth=s-1,n.delete(t);break}}}}}}const{convertUnderscore:nr,fromLastIndexOf:or,safeNestedArray:rr,safeNestedMap:sr}=squared.lib.util;function lr(e,t,i){if(e.get(t)===i)return t;for(const[a,n]of e.entries())if(i===n&&a.startsWith(t))return a;return Resource.generateId("dimen",t)}function cr(e,t,i){const a=t.namespace(e);for(const n in a)if("text"!==n){const o=a[n];if(/\dpx$/.test(o))rr(i,`${e},${n},${o}`).push(t)}}class ResourceDimens extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e){const t=Resource.STORED.dimens,i={},a=e.length;let n=0;while(n<a){const t=e[n++];if(t.visible){const e=t.containerName.toLowerCase(),a=sr(i,e);cr("android",t,a),cr("app",t,a)}}for(const e in i){const a=i[e];for(const i in a){const[n,o,r]=i.split(","),s=lr(t,or(e,".")+"_"+nr(o),r);for(const e of a[i])e[n](o,"@dimen/"+s);t.set(s,r)}}}afterFinalize(){if(this.controller.hasAppendProcessing()){const e=Resource.STORED.dimens,t=this.application.layouts;let i=0;while(i<t.length){const a=t[i++],n=/:(\w+)="(-?[\d.]+px)"/g;let o,r=a.content;while(o=n.exec(a.content)){const[t,i,a]=o;if("text"!==i){const n=lr(e,"custom_"+nr(i),a);r=r.replace(t,t.replace(a,"@dimen/"+n)),e.set(n,a)}}a.content=r}}}}const{capitalize:dr,convertInt:hr,convertWord:fr,hasKeys:ur,plainMap:pr,safeNestedArray:gr,safeNestedMap:mr,spliceArray:br,trimBoth:yr}=squared.lib.util,{NODE_RESOURCE:Sr}=squared.base.lib.enumeration,Tr={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},wr={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},Er={"arial black":"sans-serif","ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},vr={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},xr={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'};function Ar(e,t,i){const a=t.split(";"),n=a.length,o=e.length;let r,s=0;while(s<n){const t=a[s++];e:{r=0;while(r<o){const a=e[r++];for(const e in a)if(e===t){if(a[e]=a[e].filter(e=>!i.includes(e)),0===a[e].length)delete a[e];break e}}}}}class ResourceFonts extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:false},this.eventOnly=true}afterParseDocument(e){const t=this.resource,i=t.userSettings,a=this.options.disableFontAlias,n=i.targetAPI,o="dp"===i.convertPixels,{fonts:r,styles:s}=t.mapOfStored,l=Object.keys(xr),c={},d={};let h=[];this.application.getProcessingCache(e).each(e=>{if(e.data(Resource.KEY_NAME,"fontStyle")&&e.hasResource(Sr.FONT_STYLE))gr(c,e.containerName).push(e)});for(const e in c){const i=[],s=c[e];h=h.concat(s);const f=s.length;let u=0;while(u<f){let e=s[u++];const c=e.data(Resource.KEY_NAME,"fontStyle"),{id:d,companion:h}=e;let{fontFamily:f,fontStyle:p,fontWeight:g}=c;if("LABEL"===(null==h?void 0:h.tagName)&&!h.visible)e=h;f.replace(/"/g,"").split(",").some((i,o,s)=>{let l=i=yr(i.trim(),"'").toLowerCase(),c="";if(!a&&Er[l])l=this.options.systemDefaultFont;if(n>=Tr[l]||!a&&n>=Tr[wr[l]])f=l;else if(p&&g){let e;if(t.getFont(i,p,g))e=true;else{const a=p.startsWith("oblique")?t.getFont(i,"italic")||t.getFont(i,"normal"):t.getFont(i,p);if(a)c=g,g=a.fontWeight.toString(),e=true;else if(o<s.length-1)return false;else f=this.options.systemDefaultFont}if(e){l=fr(l);const e=r.get(l)||{};e[i+"|"+p+"|"+g]=vr[g]||g,r.set(l,e),f="@font/"+l}}else return false;if("normal"===p||p.startsWith("oblique"))p="";if(""!==c)g=c;else if("400"===g||e.api<26)g="";if(parseInt(g)>500)p+=(p?"|":"")+"bold";return true});const m={fontFamily:f,fontStyle:p,fontWeight:g,fontSize:c.fontSize,color:Resource.addColor(c.color),backgroundColor:Resource.addColor(c.backgroundColor,e.inputElement)};for(let e=0;e<6;++e){const t=l[e];let a=m[t];if(a){if(3===e&&o)a=X(a,true);gr(mr(i,e),xr[t]+a+'"').push(d)}}}d[e]=i}const f={};for(const e in d){const t={};f[e]=t;const i=d[e].filter(e=>!!e).sort((e,t)=>{let i=0,a=0,n=0,o=0;for(const t in e){const a=e[t].length;i=Math.max(a,i),n+=a}for(const e in t){const i=t[e];if(i){const e=i.length;a=Math.max(e,a),o+=e}}if(i!==a)return i>a?-1:1;else if(n!==o)return n>o?-1:1;return 0});do{const a=i.length;if(1===a){const e=i[0];for(const i in e){const a=e[i];if(a.length>0)t[i]=a}break}else{const n={};for(let o=0;o<a;++o){const r=i[o],s={};for(const t in r){const l=r[t];if(0===l.length)continue;else if(l.length===c[e].length){n[t]=l,i[o]={};break}const d={};let h=false;for(let e=0;e<a;++e)if(o!==e){const t=i[e];for(const e in t){const i=t[e];if(i.length>0){const t=l.length;let a=0;while(a<t){const t=l[a++];if(i.includes(t))gr(d,e).push(t)}}}}for(const e in d){const i=d[e];if(i.length>1)s[t<e?t+";"+e:e+";"+t]=i,h=true}if(!h)s[t]=l}if(ur(s)){const e={},a=new Set,n={};for(const e in s)n[e]=s[e].join(",");for(const t in s)for(const i in s){const o=n[t];if(t!==i&&o===n[i]){let n=e[o];if(!n)n=new Set(t.split(";")),e[o]=n;for(const e of i.split(";"))n.add(e);a.add(t).add(i)}}for(const e in s)if(!a.has(e))Ar(i,e,s[e]),t[e]=s[e];for(const a in e){const n=Array.from(e[a]).sort().join(";"),o=pr(a.split(","),e=>parseInt(e));Ar(i,n,o),t[n]=o}}}const o=Object.keys(n);if(o.length>0)t[o.join(";")]=n[o[0]];br(i,e=>{for(const t in e)if(e[t].length>0)return false;return true})}}while(i.length>0)}const u={},p={},g=new Set;for(const e in f){const t=f[e],i=[];for(const e in t){const a=[];for(const t of e.split(";")){const e=/([^\s]+)="((?:[^"]|\\")+)"/.exec(t);if(e)a.push({key:e[1],value:e[2]})}i.push({name:"",parent:"",items:a,ids:t[e]})}i.sort((e,t)=>{let i=e.ids.length,a=t.ids.length;if(i===a)if(i=e.items.length,a=t.items.length,i===a)i=e.name,a=t.name;return i<=a?1:-1});for(let t=0;t<i.length;++t)i[t].name=dr(e)+(t>0?"_"+t:"");u[e]=i}for(const e in u)for(const t of u[e]){const e=t.ids;if(e){const i=e.length;let a=0;while(a<i)gr(p,e[a++]).push(t.name)}}const m=h.length;let b=0;while(b<m){const e=h[b++],t=p[e.id];if(t){if(t.length>1)g.add(t.join(".")),t.shift();else g.add(t[0]);e.attr("_","style","@style/"+t.join("."))}}for(const e of g){const t=[],i=e.split(".");let a,n="";const o=i.length;for(b=0;b<o;++b){const e=i[b],r=/^(\w*?)(?:_(\d+))?$/.exec(e);if(r){const i=u[r[1].toUpperCase()][hr(r[2])];if(i)if(0===b){if(n=e,1===o)a=i.items;else if(!s.has(e))s.set(e,{name:e,parent:"",items:i.items})}else{if(a){const e=i.items,t=e.length;let n=0;while(n<t){const t=e[n++],i=t.key,o=a.findIndex(e=>e.key===i);if(-1!==o)a[o]=t;else a.push(t)}}else a=i.items.slice(0);t.push(e)}}}if(a)if(0===t.length)s.set(n,{name:n,parent:"",items:a});else{const e=t.join(".");s.set(e,{name:e,parent:n,items:a})}}}}const{NODE_TEMPLATE:_r}=squared.base.lib.enumeration;class ResourceIncludes extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e){const t=e.length;let i=0;while(i<t){const t=e[i++],a=t.renderTemplates;if(a){let e,i;if(t.renderEach((t,a)=>{const n=t.dataset,o=n.androidInclude,r="true"===n.androidIncludeEnd;if(o||r){if(t.documentRoot)return;const s={item:t,name:o,index:a,include:"false"===n.androidIncludeMerge};if(o){if(!e)e=[];e.push(s)}if(r){if(!i)i=[];i.push(s)}}}),e&&i){const t=this.application,n=this.controller,o=Math.min(e.length,i.length),r=i.length-o;if(r>0)i.splice(0,r);let s=o-1;while(s>=0){const{index:o,include:r,item:l,name:c}=e[s--];for(let e=0;e<i.length;++e){const s=i[e].index;if(s>=o){const d=[];let h=o;while(h<=s)d.push(a[h++]);const f=!r||d.length>1,u=f?1:0;a.splice(o,d.length,{type:2,node:d[0].node,content:n.renderNodeStatic({controlName:"include",width:"match_parent"},{layout:"@layout/"+c,android:{}}),indent:true});let p=n.cascadeDocument(d,u);if(f)p=n.getEnclosingXmlTag("merge",Z(p),p);else l.documentRoot=true;t.saveDocument(c,p,"",1/0),i.splice(e,1);break}}}}}}}}const{isPercent:Rr,parseAngle:Ir}=squared.lib.css,{measureTextWidth:Nr}=squared.lib.dom,{clamp:Cr}=squared.lib.math,{capitalizeString:kr,delimitString:Lr,lowerCaseString:Pr}=squared.lib.util,{STRING_SPACE:Or,replaceCharacterData:Wr}=squared.lib.xml,{NODE_RESOURCE:Dr}=squared.base.lib.enumeration;function Br(e,t,i){if(""!==i)e.android(t,i,false)}class ResourceStrings extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:false},this.eventOnly=true}afterResources(e){const t=this.options.numberResourceValue;this.application.getProcessingCache(e).each(e=>{if(e.hasResource(Dr.VALUE_STRING)){if(e.styleElement){const i=e.data(Resource.KEY_NAME,"titleString")||e.toElementString("title");if(""!==i)Br(e,"tooltipText",Resource.addString(Wr(i),e.controlId.toLowerCase()+"_title",t))}if(e.inputElement){if(e.controlName===n.EDIT_LIST){const t=e.element.list;if(t)this.createOptionArray(t,e.controlId)}const i=e.data(Resource.KEY_NAME,"hintString");if(i)Br(e,"hint",Resource.addString(Wr(i),e.controlId.toLowerCase()+"_hint",t))}const i=e.tagName;switch(i){case"SELECT":{const t=this.createOptionArray(e.element,e.controlId);if(""!==t)e.android("entries","@array/"+t);break}case"IFRAME":{const t=e.data(Resource.KEY_NAME,"valueString");if(t)Resource.addString(Wr(t));break}default:{let a=e.data(Resource.KEY_NAME,"valueString");if(a){let n=0;if(e.blockDimension||"table-cell"===e.display){const t=e.css("textIndent");if(n=e.parseUnit(t),"100%"===t||n+e.bounds.width<0)return void e.delete("android","ellipsize","maxLines")}if(e.naturalChild&&e.alignParent("left")&&e.pageFlow&&!(e.preserveWhiteSpace&&!e.plainText||e.plainText&&e.actualParent.preserveWhiteSpace)){const t=e.textContent,i=t.length;let n=0,o=0;while(n<i){switch(t.charCodeAt(n++)){case 9:case 10:case 32:++o;continue}break}if(o>0)a=a.replace(new RegExp(`^(\\s|&#160;){1,${o}}`),"")}switch(e.css("textTransform")){case"uppercase":e.android("textAllCaps","true"),e.lockAttr("android","textAllCaps");break;case"lowercase":a=Pr(a);break;case"capitalize":a=kr(a);break}a=Wr(a,e.preserveWhiteSpace||"CODE"===i?e.toInt("tabSize",8):void 0);const o=e.css("textDecorationLine");if("none"!==o)for(const e of o.split(" "))switch(e){case"underline":a=`<u>${a}</u>`;break;case"line-through":a=`<strike>${a}</strike>`;break}if("INS"===i&&!o.includes("line-through"))a=`<strike>${a}</strike>`;if(0===n){const t=e.actualParent;if((null==t?void 0:t.firstChild)===e&&(t.blockDimension||"table-cell"===t.display))n=t.parseUnit(t.css("textIndent"))}if(n>0){const t=Nr(" ",e.css("fontFamily"),e.fontSize)||e.fontSize/2;a=Or.repeat(Math.max(Math.floor(n/t),1))+a}let r=function(e){if("italic"===e)return"'ital' 1";const t=/oblique(?:\s+(-?[\d.]+[a-z]+))?/.exec(e);if(t){let e;if(t[1])e=Ir(t[1]);return"'slnt' "+(void 0!==e&&!isNaN(e)?Cr(e,-90,90):"14")}return""}(e.css("fontStyle")),s="";if(e.has("fontStretch")){let t=e.css("fontStretch");switch(t){case"100%":t="";break;case"ultra-condensed":t="50%";break;case"extra-condensed":t="62.5%";break;case"condensed":t="75%";break;case"semi-condensed":t="87.5%";break;case"semi-expanded":t="112.5%";break;case"expanded":t="125%";break;case"extra-expanded":t="150%";break;case"ultra-expanded":t="200%";break}if(Rr(t))r=Lr({value:r},"'wdth' "+parseFloat(t))}if(e.has("fontVariantCaps"))for(const t of e.css("fontVariantCaps").split(" "))switch(t){case"small-caps":s=Lr({value:s},"'smcp'");break;case"all-small-caps":s=Lr({value:s},"'c2sc'","'smcp'");break;case"petite-caps":s=Lr({value:s},"'pcap'");break;case"all-petite-caps":s=Lr({value:s},"'c2pc'","'pcap'");break;case"unicase":s=Lr({value:s},"'unic'");break;case"titling-caps":s=Lr({value:s},"'titl'");break}if(e.has("fontVariantNumeric"))for(const t of e.css("fontVariantNumeric").split(" "))switch(t){case"ordinal":s=Lr({value:s},"'ordn'");break;case"slashed-zero":s=Lr({value:s},"'zero'");break;case"lining-nums":s=Lr({value:s},"'lnum'");break;case"oldstyle-nums":s=Lr({value:s},"'onum'");break;case"proportional-nums":s=Lr({value:s},"'pnum'");break;case"tabular-nums":s=Lr({value:s},"'tnum'");break;case"diagonal-fractions":s=Lr({value:s},"'frac'");break;case"stacked-fractions":s=Lr({value:s},"'afrc'");break}if(e.has("fontVariantLigatures"))for(const t of e.css("fontVariantLigatures").split(" "))switch(t){case"common-ligatures":s=Lr({value:s},"'liga'");break;case"no-common-ligatures":s=Lr({value:s},"'liga' 0");break;case"discretionary-ligatures":s=Lr({value:s},"'dlig'");break;case"no-discretionary-ligatures":s=Lr({value:s},"'dlig' 0");break;case"historical-ligatures":s=Lr({value:s},"'hlig'");break;case"no-historical-ligatures":s=Lr({value:s},"'hlig' 0");break;case"contextual":s=Lr({value:s},"'calt'");break;case"no-contextual":s=Lr({value:s},"'calt' 0");break}if(e.has("fontVariantEastAsian"))for(const t of e.css("fontVariantEastAsian").split(" "))switch(t){case"ruby":s=Lr({value:s},"'ruby'");break;case"jis78":s=Lr({value:s},"'jp78'");break;case"jis83":s=Lr({value:s},"'jp83'");break;case"jis90":s=Lr({value:s},"'jp90'");break;case"jis04":s=Lr({value:s},"'jp04'");break;case"simplified":s=Lr({value:s},"'smpl'");break;case"traditional":s=Lr({value:s},"'trad'");break;case"proportional-width":s=Lr({value:s},"'pwid'");break;case"full-width":s=Lr({value:s},"'fwid'");break}if(e.has("fontVariationSettings"))for(const t of e.css("fontVariationSettings").replace(/"/g,"'").split(","))r=Lr({value:r},t.trim());if(e.has("fontFeatureSettings"))for(const t of e.css("fontFeatureSettings").replace(/"/g,"'").split(","))s=Lr({value:s},t.trim());if(""!==r)e.android("fontVariationSettings",r);if(""!==s)e.android("fontFeatureSettings",s);Br(e,"text",Resource.addString(a,"",t))}}}}})}createOptionArray(e,t){const[i,a]=Resource.getOptionArray(e),n=this.options.numberResourceValue;let o;if(!n&&a)o=a;else{const e=i||a;if(e){o=[];const t=e.length;let i=0;while(i<t){const t=Resource.addString(Wr(e[i++]),"",n);if(""!==t)o.push(t)}}}return(null==o?void 0:o.length)?Resource.insertStoredAsset("arrays",t+"_array",o):""}}const{capitalize:Mr}=squared.lib.util;class ResourceStyles extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e){const t=this.resource.mapOfStored,i=e.length;let a=0;while(a<i){const i=e[a++];if(i.controlId&&i.visible){const e=i.renderChildren,a=e.length;if(a>1){const n={};let o,r="",s=0;while(s<a){const t=e[s++].combine("_","android");let i=false;const a=t.length;o=0;while(o<a){const e=t[o++];if(!i&&e.startsWith("style=")){if(0===s)r=e;else if(""===r||e!==r)return;i=true}else n[e]=(n[e]||0)+1}if(!i&&""!==r)return}const l=[];for(const e in n)if(n[e]===a)l.push(e);const c=l.length;if(c>1){if(""!==r)r=r.substring(r.indexOf("/")+1,r.length-1);const n=[],o=[];s=0;while(s<c){const e=/(\w+:(\w+))="([^"]+)"/.exec(l[s++]);if(e)n.push({key:e[1],value:e[3]}),o.push(e[2])}const d=(""!==r?r+".":"")+Mr(i.controlId);if(!t.styles.has(d))n.sort((e,t)=>e.key<t.key?-1:1),t.styles.set(d,Object.assign(j(),{name:d,items:n}));s=0;while(s<a){const t=e[s++];t.attr("_","style","@style/"+d),t.delete("android",...o)}}}}}}}var Hr={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const Gr={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var Xr={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":["ordering"],">":{set:{"^":"android","@":["ordering"],">":{objectAnimator:Gr.objectAnimator}},objectAnimator:Gr.objectAnimator}},objectAnimator:Gr.objectAnimator}}};if(!squared.svg)Object.assign(squared,{svg:{lib:{constant:{},util:{}}}});var Vr=squared.svg.Svg,zr=squared.svg.SvgAnimate,Fr=squared.svg.SvgAnimateTransform,Ur=squared.svg.SvgBuild,qr=squared.svg.SvgG,Yr=squared.svg.SvgPath,jr=squared.svg.SvgShape;const{extractURL:Kr,formatPX:$r,isPercent:Zr}=squared.lib.css,{truncate:Jr}=squared.lib.math,{FILE:Qr}=squared.lib.regex,{convertCamelCase:es,convertInt:ts,convertWord:is,formatString:as,hasKeys:ns,isArray:os,isNumber:rs,partitionArray:ss,plainMap:ls,replaceMap:cs}=squared.lib.util,{applyTemplate:ds}=squared.lib.xml,{KEYSPLINE_NAME:hs,SYNCHRONIZE_MODE:fs}=squared.svg.lib.constant,{MATRIX:us,SVG:ps,TRANSFORM:gs,getAttribute:ms,getRootOffset:bs}=squared.svg.lib.util,ys=squared.base.NodeUI,Ss={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"},Ts=["name","value","fill","stroke","fillPattern","fillRule","strokeWidth","fillOpacity","strokeOpacity","strokeLinecap","strokeLinejoin","strokeLineJoin","strokeMiterlimit"];if(hs)Object.assign(Ss,{[hs["ease-in"]]:Ss.accelerate,[hs["ease-out"]]:Ss.decelerate,[hs["ease-in-out"]]:Ss.accelerate_decelerate,[hs.linear]:Ss.linear});const ws={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function Es(e,t){const i=null==e?void 0:e[t];return i?Ss[i]||vs(i):""}function vs(e){const t=Ss[e];if(t)return t;const i=Resource.STORED,a="path_interpolator_"+is(e);if(!i.animators.has(a))i.animators.set(a,as('<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',...e.split(/\s+/)));return"@anim/"+a}function xs(e){const t={},i=e.length;let a=0;while(a<i){const{matrix:i,origin:n,angle:o,type:r}=e[a++];switch(r){case SVGTransform.SVG_TRANSFORM_SCALE:if(t.scaleX=i.a.toString(),t.scaleY=i.d.toString(),n)t.pivotX=n.x.toString(),t.pivotY=n.y.toString();break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(t.rotation=o.toString(),n)t.pivotX=n.x.toString(),t.pivotY=n.y.toString();else t.pivotX="0",t.pivotY="0";break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:t.translateX=i.e.toString(),t.translateY=i.f.toString();break}}return t}function As(e,t,i=1,a=1){if((ps.circle(e)||ps.ellipse(e))&&t.some(e=>e.type===SVGTransform.SVG_TRANSFORM_ROTATE))if(i!==a||t.length>1&&t.some(e=>e.type===SVGTransform.SVG_TRANSFORM_SCALE&&e.matrix.a!==e.matrix.d))return _s(e,t);return[[],t]}function _s(e,t,i=false){if(t.length>0){const a=[],n=[],o=t[0].fromStyle?[]:gs.rotateOrigin(e).reverse(),r=t.slice(0).reverse(),s=[],l=()=>{a.push(s.slice(0)),s.length=0};for(let e=1;e<r.length;++e){const t=r[e],i=r[e-1];if(t.type===i.type){let a;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:a=us.clone(t.matrix),a.e+=i.matrix.e,a.f+=i.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:a=us.clone(t.matrix),a.a*=i.matrix.a,a.d*=i.matrix.d;break}if(a)t.matrix=a,r.splice(--e,1)}}const c=r.length;let d=0;while(d<c){const e=r[d++];switch(e.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:n.push(e);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(!i&&0===a.length&&0===s.length)n.push(e);else s.push(e),l();break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(o.length>0){const t=o.shift();if(t.angle===e.angle){if(0!==t.x||0!==t.y)e.origin=t;break}}if(!e.origin&&1===s.length&&s[0].type===SVGTransform.SVG_TRANSFORM_SCALE){s.push(e);continue}case SVGTransform.SVG_TRANSFORM_SCALE:if(s.length>0)l();s.push(e);break}}if(s.length>0)a.push(s);return[a.reverse(),n]}return[[],t]}function Rs(e,t,i,a,n){const o=e[t];let r;if(o)r=Array.isArray(o)?o[i].toString():o;else if(!a&&0===t)r=n;return r||""}function Is(e){switch(e){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:if(Ps(e))return"floatType";else return}}function Ns(e,t,i,a){const n=new zr;return n.attributeName=e,n.delay=t,n.duration=1,n.from=a||i,n.to=i,n.fillForwards=true,n.convertToValues(),n}function Cs(e,t=true){let i=ws[e];if(!i&&t&&Ps(e))i=[e];return i}function ks(e){switch(e){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function Ls(e){switch(e.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return Fr.toRotateList(e.values);case SVGTransform.SVG_TRANSFORM_SCALE:return Fr.toScaleList(e.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return Fr.toTranslateList(e.values)}}function Ps(e){switch(e){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Os(e,t){const i="@color/"+Resource.addColor(e);return t?[i]:i}function Ws(e,t){return Fs(e.attributeName)?Os(t):t.trim()||void 0}function Ds(e){switch(e){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function Bs(e,t,i){const{colorStops:a,type:n}=e,o={type:n,item:tr(a,i),positioning:false};switch(n){case"radial":{const{cxAsString:i,cyAsString:a,rAsString:n,spreadMethod:r}=e,s=t.element;let l,c,d,h,f=[];switch(s.tagName){case"path":for(const e of Ur.getPathCommands(t.value))f=f.concat(e.value);case"polygon":if(ps.polygon(s))f=f.concat(Ur.clonePoints(s.points));if(0===f.length)return;({left:l,top:c,right:d,bottom:h}=Ur.minMaxPoints(f)),d-=l,h-=c;break;default:if(ps.rect(s))l=s.x.baseVal.value,c=s.y.baseVal.value,d=s.width.baseVal.value,h=s.height.baseVal.value;else if(ps.circle(s))d=s.r.baseVal.value,l=s.cx.baseVal.value-d,c=s.cy.baseVal.value-d,d*=2,h=d;else if(ps.ellipse(s))d=s.rx.baseVal.value,h=s.ry.baseVal.value,l=s.cx.baseVal.value-d,c=s.cy.baseVal.value-h,d*=2,h*=2;else return;break}if(o.centerX=(l+d*qs(i)).toString(),o.centerY=(c+h*qs(a)).toString(),o.gradientRadius=((d+h)/2*(Zr(n)?parseFloat(n)/100:1)).toString(),r)o.tileMode=Ds(r);break}case"linear":{const{x1:t,y1:i,x2:a,y2:n,spreadMethod:r}=e;if(o.startX=t.toString(),o.startY=i.toString(),o.endX=a.toString(),o.endY=n.toString(),r)o.tileMode=Ds(r)}}return o}function Ms(e,t){const i=e.synchronized,a=t.synchronized;return i&&a?i.key>=a.key?1:-1:0}function Hs(e,t,i,a,n){const o=i.set,r=o.length;if(r>0){let s=false;if(r>1&&o.every(e=>""===e.ordering)){const e={set:[],objectAnimator:[]};let t=0;while(t<r){const i=o[t++];e.set=e.set.concat(i.set),e.objectAnimator=e.objectAnimator.concat(i.objectAnimator)}i=e}while(1===i.set.length){const e=i.set[0];if((!s||""===e.ordering)&&0===e.objectAnimator.length)i=e,s=true;else break}if(i["xmlns:android"]=d.android,s)i["android:ordering"]=i.ordering,i.ordering=void 0;const l={name:t,animation:Resource.insertStoredAsset("animators",zs(a,n,"anim",t),ds("set",Xr,[i]))};if(""!==l.animation)l.animation="@anim/"+l.animation,e[0].target.push(l)}}function Gs(e,t,i,a,n,o="",r="",s="0"){return{propertyName:e,startOffset:r,duration:a,repeatCount:s,valueType:t,valueFrom:rs(o)?Jr(o,n):o,valueTo:rs(i)?Jr(i,n):i,propertyValuesHolder:false}}function Xs(e,t,i,a,n){if(i&&-1===a.findIndex(t=>t.propertyName===e))a.push(Gs(e,t,i,"0",n))}function Vs(e,t,i,a,n,o,r,s,l,c){if(!a&&i.fillReplace){let a,d=i.replaceValue;if(!d){if(n)d=Ps(e);else{const t=i.parent;if(t)if(Ur.isShape(t)){const i=t.path;if(i)d="pathData"===e?i.value:i[function(e){for(const t in ws)if(ws[t].includes(e))return es(t);return""}(e)]}}if(!d)d=i.baseValue}if(null==l?void 0:l.length){const e=l[l.length-1];if(os(e.propertyValuesHolder)){const t=e.propertyValuesHolder[e.propertyValuesHolder.length-1];a=t.keyframe[t.keyframe.length-1].value}else a=e.valueTo}if(d&&d!==a)if(d=Ws(i,d),d){switch(e){case"trimPathStart":case"trimPathEnd":d=d.split(" ")["trimPathStart"===e?0:1];break}r.push(Gs(e,t,d,"1",o,"pathType"===t?a:"",c?c.toString():""))}if(s)if(e.endsWith("X"))r.push(Gs("translateX",t,"0","1",o));else if(e.endsWith("Y"))r.push(Gs("translateY",t,"0","1",o))}}const zs=(e,t,i,a)=>e+(i?"_"+i:"")+(t?"_vector":"")+(a?"_"+a.toLowerCase():""),Fs=e=>"fill"===e||"stroke"===e,Us=(e,t,i=-1)=>e.name+"_"+t+(-1!==i?"_"+(i+1):""),qs=e=>Zr(e)?parseFloat(e)/100:.5,Ys=e=>"@drawable/"+e,js=(e="")=>({ordering:e,objectAnimator:[]});class ResourceSvg extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=true,this._vectorData=new Map,this._animateData=new Map,this._animateTarget=new Map,this._imageData=[],this._synchronizeMode=0,this._namespaceAapt=false}beforeParseDocument(){if(Ur)Ur.resetNameCache(),this.controller.localSettings.svg.enabled=true}afterResources(e){if(Ur){const t={};for(const[e,i]of Resource.ASSETS.rawData.entries())if("image/svg+xml"===i.mimeType&&i.content)t[e]=i.content;let i,a;this.application.getProcessingCache(e).each(e=>{if(e.imageElement)[i,a]=this.createSvgElement(e,e.toElementString("src"));else if(e.svgElement)a=e.element;if(a){const n=this.createSvgDrawable(e,a,t);if(n)if(e.api>=21)e.android("src",Ys(n));else e.app("srcCompat",Ys(n));if(!e.hasWidth)e.setLayoutWidth("wrap_content");if(!e.hasHeight)e.setLayoutHeight("wrap_content");if(e.baseline)e.android("baselineAlignBottom","true");const o=e.data(Resource.KEY_NAME,"svg");if(o){const t=o.getTitle(),i=o.getDesc();if(""!==t)e.android("tooltipText",Resource.addString(t,`svg_${e.controlId.toLowerCase()}_title`,true));if(""!==i)e.android("contentDescription",Resource.addString(i,`svg_${e.controlId.toLowerCase()}_desc`,true))}if(i)i.removeChild(a),i=void 0;a=void 0}})}}afterFinalize(){if(Ur)this.controller.localSettings.svg.enabled=false}createSvgElement(e,t){const i=Kr(t);if(i)t=i;if(Qr.SVG.test(t)||t.startsWith("data:image/svg+xml")){const i=this.resource.getRawData(t);if(i){const t=(e.actualParent||e.documentParent).element;t.insertAdjacentHTML("beforeend",i.content);const a=t.lastElementChild;if(a instanceof SVGSVGElement){const i=a;if(0===i.width.baseVal.value)i.setAttribute("width",e.actualWidth.toString());if(0===i.height.baseVal.value)i.setAttribute("height",e.actualHeight.toString());return[t,i]}}}return[]}createSvgDrawable(e,t,i){var a;const{transformExclude:n,floatPrecisionValue:o,floatPrecisionKeyTime:r}=this.options,s=new Vr(t);s.contentMap=i;const l=e.api>=23,c=2|(l?32:64),h=this._animateData,f=this._imageData;this._svgInstance=s,this._vectorData.clear(),h.clear(),this._animateTarget.clear(),f.length=0,this._namespaceAapt=false,this._synchronizeMode=c;const u=(e.tagName+"_"+is(e.controlId,true)+"_viewbox").toLowerCase();s.build({contentMap:i,exclude:n,residualHandler:As,precision:o}),s.synchronize({keyTimeMode:c,framesPerSecond:this.controller.userSettings.framesPerSecond,precision:o}),this.queueAnimations(s,s.name,e=>"opacity"===e.attributeName);const p=this.parseVectorData(s),g=f.length;let m;if(""!==p){const{width:t,height:i}=ys.refitScreen(e,{width:s.width,height:s.height});if(m=Resource.insertStoredAsset("drawables",zs(u,g),ds("vector",wo,[{"xmlns:android":d.android,"xmlns:aapt":this._namespaceAapt?d.aapt:"","android:name":h.size>0?s.name:"","android:width":$r(t),"android:height":$r(i),"android:viewportWidth":(s.viewBox.width||t).toString(),"android:viewportHeight":(s.viewBox.height||i).toString(),"android:alpha":parseFloat(s.opacity)<1?s.opacity.toString():"",include:p}])),h.size>0){const e=[{"xmlns:android":d.android,"android:drawable":Ys(m),target:[]}];for(const[t,i]of h.entries()){const n=new Map,s=new Map,c=[],d=[],h=[],f=[],p=[],[m,b]=ss(i.animate,e=>"companion"in e),y={set:[],objectAnimator:[]};let S=b.length;for(let e=0;e<S;++e){const t=b[e];if(t.setterType){if(ws[t.attributeName]&&t.to)if(t.fillReplace&&t.duration>0)d.push(t);else c.push(t)}else if(Ur.isAnimate(t)){const i=m.filter(e=>e.companion.value===t),a=i.length;if(a>0){i.sort((e,t)=>e.companion.key>=t.companion.key?1:0);const o=[],r=[];for(let e=0;e<a;++e){const a=i[e];if(a.companion.key<=0){if(o.push(a),0===e)a.delay+=t.delay,t.delay=0}else r.push(a)}o.push(t),n.set("sequentially_companion_"+e,o.concat(r))}else{const e=t.synchronized;if(e){const i=e.value;if(Ur.isAnimateTransform(t)){const e=s.get(i);if(e)e.push(t);else s.set(i,[t])}else{const e=n.get(i);if(e)e.push(t);else n.set(i,[t])}}else{if(Ur.isAnimateTransform(t))t.expandToValues();if(-1===t.iterationCount)d.push(t);else if((!t.fromToType||Ur.isAnimateTransform(t)&&t.transformOrigin)&&!(l&&"pathType"!==Is(t.attributeName)))h.push([t]);else if(t.fillReplace)d.push(t);else c.push(t)}}}}if(c.length>0)h.push(c);for(const[e,t]of n.entries())if(e.startsWith("sequentially_companion"))h.push(t);else h.push(t.sort(Ms));for(const e of s.values())p.push(e.sort(Ms));for(let e=0;e<d.length;++e)f.push([[d[e]]]);const T=[h,p,...f];S=T.length;for(let e=0;e<S;++e){const t=T[e],n=t.length;if(0===n)continue;const s={ordering:0===e||1===n?"":"sequentially",set:[],objectAnimator:[]};let c=0;while(c<n){const n=t[c++];let d="",h=false,f=false,u=true;if(e<=1&&n.some(e=>!!e.synchronized&&""!==e.synchronized.value)){if(!Ur.isAnimateTransform(n[0]))d="sequentially";h=true,u=false}else if(e<=1&&n.some(e=>!!e.synchronized&&""===e.synchronized.value))d="sequentially",h=true,f=true;else if(e<=1&&n.some(e=>"companion"in e))d="sequentially";else{if(e>0)d="sequentially";if(e>1&&Ur.isAnimateTransform(n[0]))f=true}const p=js(),g=js(),m=js(),b=js(),y=g.objectAnimator,S=m.objectAnimator;let T=p.objectAnimator,w=b.objectAnimator,E=[];const v=h?ss(n,e=>-1!==e.iterationCount):[n],x=v.length;for(let t=0;t<x;++t){const n=v[t],c=n.length;if(1===t&&c>1)m.ordering="sequentially";const p=new Map;for(let g=0;g<c;++g){const m=n[g],b=Is(m.attributeName);if(void 0===b)continue;const v=m.delay>0;let x,A=false;if(m.setterType){const t=Cs(m.attributeName);if(t){const i=Fs(m.attributeName)?Os(m.to,true):m.to.trim().split(" "),a=t.length;if(i.length===a&&!i.some(e=>""===e)){let n,r;for(let s=0;s<a;++s){let a;if("pathType"===b)a=i[s];else if(v)if(m.baseValue)a=Ws(m,m.baseValue.trim().split(" ")[s]);const l=Gs(t[s],b,i[s],"1",o,a,m.delay>0?m.delay.toString():"");if(e>1)S.push(l),Vs(t[s],b,m,h,A,o,w,x,void 0,e>1?m.duration:0);else{const e=m.companion;if(e){if(e.key<=0){if(!n)n=[];n.push(l)}else if(e.key>0){if(!r)r=[];r.push(l)}}else E.push(l)}}if(n)T=T.concat(n);if(r)w=w.concat(r)}}}else if(Ur.isAnimate(m)){let n,E,_,R,I=f;if(1===t)n=c>1?"0":"-1";else n=-1!==m.iterationCount?Math.ceil(m.iterationCount-1).toString():"-1";const N=Gs("",b,"",m.duration.toString(),o,"",m.delay>0?m.delay.toString():"",n);if(!h&&"pathType"===b){if(i.pathData){const e=m.parent;let t,n;if(e&&Ur.isShape(e))n=e,t=null===(a=e.path)||void 0===a?void 0:a.transformed;_=["pathData"],R=Yr.extrapolate(m.attributeName,i.pathData,m.values,t,n,o)}}else if(Ur.asAnimateTransform(m)){if(_=ks(m.type),R=Ls(m),_&&R){if(f&&0===m.keyTimes[0])I=false;if(I||v)E=ls(_,e=>Ps(e)||"0");x=m.transformOrigin}A=true}else if(Ur.asAnimateMotion(m)){if(_=ks(m.type),R=Ls(m),_&&R){const e=m.rotateValues,t=R.length;if((null==e?void 0:e.length)===t){_.push("rotation");let i=0;while(i<t)R[i].push(e[i++])}}A=true}else switch(_=Cs(m.attributeName),b){case"intType":if(R=ls(m.values,e=>ts(e).toString()),v&&m.baseValue)E=cs(Ur.parseCoordinates(m.baseValue),e=>Math.trunc(e).toString());break;case"floatType":if("stroke-dasharray"===m.attributeName)R=ls(m.values,e=>cs(e.split(" "),e=>parseFloat(e)));else R=m.values;if(v&&m.baseValue)E=cs(Ur.parseCoordinates(m.baseValue),e=>e.toString());break;default:if(R=m.values.slice(0),Fs(m.attributeName)){if(v&&m.baseValue)E=Os(m.baseValue,true);for(let e=0;e<R.length;++e)if(""!==R[e])R[e]=Os(R[e])}break}if(!m.keySplines){const e=m.timingFunction;N.interpolator=e?vs(e):this.options.animateInterpolator}if(R&&_){const{keyTimes:a,synchronized:n}=m,c=_.length,C=a.length,k=n?n.key+n.value:0!==e||c>1?JSON.stringify(N):"";for(let e=0;e<c;++e){const n=_[e];if(I&&E)Xs(n,b,E[e],T,o);if(u&&C>1)if(l&&"pathType"!==b){if(!I&&v&&E)Xs(n,b,E[e],T,o);const i=p.get(k)||[],s=[];for(let t=0;t<C;++t){let i=Rs(R,t,e,true);if(i&&"floatType"===b)i=Jr(i,o);s.push({interpolator:t>0&&""!==i&&"pivotX"!==n&&"pivotY"!==n?Es(m.keySplines,t-1):"",fraction:0===a[t]&&""===i?"":Jr(a[t],r),value:i})}if(i.push({propertyName:n,keyframe:s}),!p.has(k)){if(""!==k)p.set(k,i);(0===t?y:S).push(Object.assign(Object.assign({},N),{propertyValuesHolder:i}))}x=void 0}else{d="sequentially";const t=js("sequentially");for(let r=0;r<C;++r){const s=a[r],l=Object.assign(Object.assign({},N),{propertyName:n,startOffset:0===r?(m.delay+(s>0?Math.floor(s*m.duration):0)).toString():"",propertyValuesHolder:false});let c=Rs(R,r,e,false,"pathType"===b?i.pathData:m.baseValue);if(c){let d;if(0===r){if(!f&&v&&E)l.valueFrom=E[e];else if("pathType"===b)l.valueFrom=i.pathData||R[0].toString();else l.valueFrom=m.baseValue||m.replaceValue||"";d=0}else l.valueFrom=Rs(R,r-1,e).toString(),d=Math.floor((s-a[r-1])*m.duration);if("floatType"===b)c=Jr(c,o);const h=null==x?void 0:x[r];if(h){let e,i=0;if(n.endsWith("X"))i=h.x,e="translateX";else if(n.endsWith("Y"))i=h.y,e="translateY";if(e){const a=Gs(e,"floatType",Jr(i,o),d.toString(),o);a.interpolator=vs(hs["step-start"]),t.objectAnimator.push(a)}}if(r>0)l.interpolator=Es(m.keySplines,r-1);l.duration=d.toString(),l.valueTo=c,y.push(l)}}if(t.objectAnimator.length>0)s.set.push(t)}else{const a=Object.assign(Object.assign({},N),{propertyName:n,interpolator:m.duration>1?Es(m.keySplines,0):"",propertyValuesHolder:false}),r=R.length;if(Array.isArray(R[0])){const t=R[r-1][e];if(r>1){const i=R[0][e];if(i!==t)a.valueFrom=i.toString()}a.valueTo=t.toString()}else{let e;if(r>1)e=R[0].toString(),a.valueTo=R[r-1].toString();else e=m.from||(!f&&v&&E?E[g]:""),a.valueTo=m.to;if("pathType"===b)a.valueFrom=e||i.pathData||a.valueTo;else if(e!==a.valueTo&&e)a.valueFrom=Ws(m,e)}const s=a.valueTo;if(s){if("floatType"===b)a.valueTo=Jr(s,o);(0===t?y:S).push(a)}}if(0===t&&!h&&-1!==m.iterationCount)Vs(n,b,m,h,A,o,w,x,y)}if(v&&(null==x?void 0:x.length))Xs("translateX",b,"0",T,o),Xs("translateY",b,"0",T,o)}}}}const A=y.length>0||S.length>0;if("sequentially"===d){if(A&&1===T.length)y.unshift(T[0]),T.length=0;if(1===S.length)y.push(S[0]),S.length=0;if(A&&1===w.length)y.push(w[0]),w.length=0}if(0===T.length&&0===S.length&&0===w.length){if("sequentially"===d&&1===y.length)d="";if("sequentially"!==s.ordering&&"sequentially"!==d)E=E.concat(y),y.length=0}if(y.length>0||S.length>0){if(T.length>0)s.ordering="sequentially",s.set.push(p);if(y.length>0)g.ordering=d,s.set.push(g);if(S.length>0)s.ordering="sequentially",s.set.push(m);if(w.length>0)s.ordering="sequentially",s.set.push(b)}if(E.length>0)s.objectAnimator=s.objectAnimator.concat(E)}if(s.set.length>0||s.objectAnimator.length>0)y.set.push(s)}Hs(e,t,y,u,g)}for(const[t,i]of this._animateTarget.entries()){const a=i.animate;let n;const r=a.length;let s=0;while(s<r){const e=a[s++];if(Ur.asAnimateMotion(e)){const t=e.parent;if(t&&Ur.isShape(t)){const i=t.path;if(i){const{value:t,baseValue:a}=i;if(t!==a){if(!n)n=[];if(n.push(Gs("pathData","pathType",a,"0",o,t)),-1!==e.iterationCount&&!e.setterType)n.push(Gs("pathData","pathType",t,"0",o,a,e.getTotalDuration().toString()))}}}}}if(n)Hs(e,t,{set:[{set:void 0,objectAnimator:n}],objectAnimator:void 0},u,g)}if(e[0].target)m=Resource.insertStoredAsset("drawables",zs(u,g,"anim"),ds("animated-vector",Hr,e))}}if(g){const e=this.resource,t=[],i=[{"xmlns:android":d.android,item:t}];if(m)t.push({drawable:Ys(m)});let a=0;while(a<g){const i=f[a++],{x:n,y:o}=bs(i.element,s.element),r=s.viewBox,l=s.width/r.width,c=s.height/r.height,d=i.getBaseValue("x",0)*l+n,h=i.getBaseValue("y",0)*c+o,u={width:$r(i.getBaseValue("width",0)*l),height:$r(i.getBaseValue("height",0)*c),left:0!==d?$r(d):"",top:0!==h?$r(h):""},p=Ys(e.addImageSet({mdpi:i.href}));if(i.rotateAngle)u.rotate={drawable:p,fromDegrees:i.rotateAngle.toString(),visible:i.visible?"true":"false"};else u.drawable=p;t.push(u)}return Resource.insertStoredAsset("drawables",u,ds("layer-list",yo,i))}return e.data(Resource.KEY_NAME,"svg",s),m}parseVectorData(e,t=0){const i=this.options.floatPrecisionValue,a=this.createGroup(e),n=a.length,o=t+n;let r="";if(e.each(t=>{if(t.visible)if(Ur.isShape(t)){const e=t.path;if(null==e?void 0:e.value){const[a,n]=this.createPath(t,e),s=[];if(parseFloat(e.strokeWidth)>0&&(e.strokeDasharray||e.strokeDashoffset)){const o=this._animateData.get(t.name);if(!o||o.animate.every(e=>e.attributeName.startsWith("stroke-dash"))){const[r,l,c,d]=e.extractStrokeDash(null==o?void 0:o.animate,i);if(l){if(o)if(this._animateData.delete(t.name),r)o.animate=r;const e=Us(t,"stroke"),h={name:e};if(""!==c)a.pathData=c;if(""!==d)h["clip-path"]=[{pathData:d}];const f=l.length;for(let t=0;t<f;++t){const n=0===t?a:Object.assign({},a),r=l[t];if(n.name=e+"_"+t,o)this._animateData.set(n.name,{element:o.element,animate:o.animate.filter(e=>void 0===e.id||e.id===t)});n.trimPathStart=Jr(r.start,i),n.trimPathEnd=Jr(r.end,i),s.push(n)}n.unshift(h)}}}if(0===s.length)s.push(a);if(n.length>0){n[n.length-1].path=s,r+=ds("group",To,n,o+1)}else r+=ds("path",So,s,o+1)}}else if(Ur.isContainer(t)){if(t.length>0)r+=this.parseVectorData(t,o)}else if(Ur.asImage(t))if(!Ur.asPattern(e))t.extract(this.options.transformExclude.image),this._imageData.push(t)}),n>0)return a[n-1].include=r,ds("group",To,a,t+1);else return r}createGroup(e){const t=[],i=[],a={"clip-path":t},n={"clip-path":i},o=[],r={};if((Ur.asSvg(e)&&!e.documentRoot||Ur.isUse(e))&&(0!==e.x||0!==e.y))r.name=Us(e,"main"),r.translateX=e.x.toString(),r.translateY=e.y.toString();if(this.createClipPath(e,t,e.clipRegion),t.length>0||ns(r))Object.assign(a,r),o.push(a);if(e!==this._svgInstance){const t={},a=Us(e,"animate"),r=_s(e.element,e.transforms,true)[0];if((Ur.asG(e)||Ur.asUseSymbol(e))&&this.createClipPath(e,i,e.clipPath))t.name=a;if(this.queueAnimations(e,a,e=>Ur.asAnimateTransform(e)))t.name=a;if(t.name)Object.assign(n,t),o.push(n);const s=r.length;if(s>0){let t=[],i=0;while(i<s){const e=r[i++];o.push(xs(e)),t=t.concat(e)}e.transformed=t.reverse()}}return o}createPath(e,t){var i,a;const n={name:e.name},o=[],r=[],s={},l=Us(e,"group"),c=function(e){let t=parseFloat(e.opacity),i=e.parent;while(i){const e=parseFloat(i.opacity||"1");if(!isNaN(e)&&e<1)t*=e;i=i.parent}return t}(e),d=Ur.asUseShape(e),h=t.clipPath;if(h){const{transformExclude:e,floatPrecisionValue:i}=this.options,a=new jr(t.element);a.build({exclude:e,residualHandler:As,precision:i}),a.synchronize({keyTimeMode:this._synchronizeMode,precision:i}),this.createClipPath(a,r,h)}if(Ur.asUseShape(e)&&e.clipPath!==h)this.createClipPath(e,r,e.clipPath);if(this.queueAnimations(e,l,e=>Ur.isAnimateTransform(e),"",e.name))s.name=l;else if(r.length>0)s.name="";if(Ur.asUseShape(e)&&(0!==e.x||0!==e.y))s.translateX=e.x.toString(),s.translateY=e.y.toString();if(r.length>0)s["clip-path"]=r;if(ns(s))o.push(s);null===(i=t.transformResidual)||void 0===i||i.forEach(e=>o.push(xs(e)));let f=0;while(f<Ts.length){let i=Ts[f++],a=t[i]||d&&e[i];if(a){switch(i){case"name":break;case"value":i="pathData";break;case"fill":if(i="fillColor","none"!==a&&!n["aapt:attr"]){const e=Resource.addColor(a);if(""!==e)a="@color/"+e}else continue;break;case"stroke":if(i="strokeColor","none"!==a){const e=Resource.addColor(a);if(""!==e)a="@color/"+e}else continue;break;case"fillPattern":{const e=this._svgInstance.findFillPattern(a);if(e)switch(t.element.tagName){case"path":if(!/[zZ]\s*$/.test(t.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const i=Bs(e,t,this.options.floatPrecisionValue);if(i)n["aapt:attr"]={name:"android:fillColor",gradient:i},n.fillColor="",this._namespaceAapt=true}}continue}case"fillRule":if("evenodd"===a)i="fillType",a="evenOdd";else continue;break;case"strokeWidth":if("0"===a)continue;break;case"fillOpacity":case"strokeOpacity":if(a=((rs(a)?parseFloat(a):1)*c).toString(),"1"===a)continue;i="fillOpacity"===i?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===a)continue;i="strokeLineCap";break;case"strokeLinejoin":if("miter"===a)continue;i="strokeLineJoin";break;case"strokeMiterlimit":if("4"===a)continue;i="strokeMiterLimit";break;default:continue}n[i]=a}}if(!n.strokeWidth)n.strokeColor="";else if(!n.strokeColor)n.strokeWidth="";const u=new Map,p=[],g=[],m=t.value,b=e.animations;let y=m,S=0,T=b.length;f=0;while(f<T){const e=b[f++];if(Ur.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);if(u.set(t,{index:S,time:t,to:e.transformFrom,reset:false,animate:e}),-1!==e.iterationCount&&e.fillReplace)if(t=e.delay+e.iterationCount*e.duration,!u.has(t))u.set(t,{index:S,time:t,to:m,reset:true});++S}}const w=Array.from(u.values()).sort((e,t)=>e.time<t.time?-1:1);for(T=w.length,f=0;f<T;++f){const e=w[f];if(!e.reset||e.to!==y){let t=true;if(e.reset)e:{let i=0;while(i<f){const a=w[i++];if(!a.reset){let i=f+1;while(i<T)switch(w[i++].index){case a.index:t=false;case e.index:break e}}}}else{const t=[],i=new Set;let n=0;while(n<f){const e=w[n++];t[e.index]=t[e.index]?2:1}for(n=0;n<t.length;++n)if(1===t[n]){const e=null===(a=w.find(e=>e.index===n&&"animate"in e))||void 0===a?void 0:a.animate;if(e)i.add(e.type)}for(const t of i){const i=ks(t);if(i){const a=gs.typeAsValue(t).split(" ");n=0;while(n<a.length)p.push(Ns(i[n],e.time,a[n++],""))}}}if(t)g.push(Ns("d",e.time,e.to)),y=e.to}}if(!this.queueAnimations(e,n.name,e=>(Ur.asAnimate(e)||Ur.asSet(e))&&"clip-path"!==e.attributeName,m)&&0===g.length&&s.name!==l)n.name="";const E=this._animateData;if(p.length>0){const e=E.get(l);if(e)e.animate=e.animate.concat(p)}if(g.length>0){const t=E.get(n.name);if(t)t.animate=t.animate.concat(g);else E.set(n.name,{element:e.element,animate:g,pathData:m})}return[n,o]}createClipPath(e,t,i){let a=false;if(i){const n=this._svgInstance.definitions,o=this._synchronizeMode,{transformExclude:r,floatPrecisionValue:s}=this.options;i.split(";").forEach((i,l,c)=>{if("#"===i.charAt(0)){const e=n.clipPath.get(i);if(e){const i=new qr(e);i.build({exclude:r,residualHandler:As,precision:s}),i.synchronize({keyTimeMode:o,precision:s}),i.each(e=>{const i=e.path;if(i){const n=i.value;if(n){let i=Us(e,"clip_path",c.length>1?l+1:-1);if(!this.queueAnimations(e,i,e=>Ur.asAnimate(e)||Ur.asSet(e),n))i="";t.push({name:i,pathData:n,fillType:"evenodd"===ms(e.element,"fill-rule",true)?"evenOdd":""}),a=true}}})}}else{let n=Us(e,"clip_path",c.length>1?l+1:-1);if(!this.queueAnimations(e,n,e=>"clip-path"===e.attributeName&&(Ur.asAnimate(e)||Ur.asSet(e)),i))n="";t.push({name:n,pathData:i,fillType:"evenodd"===ms(e.element,"fill-rule",true)?"evenOdd":""}),a=true}})}return a}queueAnimations(e,t,i,a="",n){if(e.animations.length>0){const o=e.animations.filter((e,t,a)=>!e.paused&&(e.duration>=0||e.setterType)&&i(e,t,a));if(o.length>0){const i=e.element;if(this._animateData.set(t,{element:i,animate:o,pathData:a}),n)this._animateTarget.set(n,{element:i,animate:o,pathData:a});return true}}return false}}const Ks={builtInExtensions:["android.delegate.background","android.delegate.negative-x","android.delegate.positive-x","android.delegate.max-width-height","android.delegate.percent","android.delegate.scrollbar","android.delegate.radiogroup","squared.accessibility","squared.relative","squared.css-grid","squared.flexbox","squared.table","squared.column","squared.list","squared.verticalalign","squared.grid","squared.sprite","squared.whitespace","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.data","android.resource.includes"],targetAPI:29,resolutionDPI:160,resolutionScreenWidth:1280,resolutionScreenHeight:900,framesPerSecond:60,supportRTL:true,preloadImages:true,compressImages:false,convertImages:"",supportNegativeLeftTop:true,customizationsOverwritePrivilege:true,showAttributes:true,createQuerySelectorMap:false,convertPixels:"dp",insertSpaces:4,autoCloseOnWrite:true,showErrorMessages:true,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputMainFileName:"activity_main.xml",outputDirectory:"app/src/main",outputEmptyCopyDirectory:false,outputArchiveName:"android-xml",outputArchiveFormat:"zip"};let $s,Zs,Js=false;function Qs(e,t,i){return Object.assign(Object.assign({},e),{directory:t,filename:i})}const el=e=>Js&&(e.closed||function(){if(Js&&!$s.initializing&&!$s.closed&&$s.userSettings.autoCloseOnWrite)return $s.finalize(),true;else return false}()),tl={base:{Controller:Controller,File:File,Resource:Resource,View:View},extensions:{Accessibility:Accessibility,Column:Column,CssGrid:CssGrid,External:External,Flexbox:Flexbox,Grid:Grid,List:List,Relative:Relative,Sprite:Sprite,Substitute:Substitute,Table:Table,VerticalAlign:VerticalAlign,WhiteSpace:WhiteSpace,constraint:{Guideline:Guideline},delegate:{Background:Background,MaxWidthHeight:MaxWidthHeight,NegativeX:NegativeX,Percent:Percent,PositiveX:PositiveX,RadioGroup:RadioGroup,ScrollBar:ScrollBar},resource:{Background:ResourceBackground,Data:ResourceData,Dimens:ResourceDimens,Fonts:ResourceFonts,Includes:ResourceIncludes,Strings:ResourceStrings,Styles:ResourceStyles,Svg:ResourceSvg}},lib:{constant:p,customization:W,enumeration:i,util:J},system:{customize(e,t,i){if(P[e]){const a=P[e].assign;if(a[t])Object.assign(a[t],i);else a[t]=i;return a[t]}},addXmlNs(e,t){d[e]=t},copyLayoutAllXml(e,t){if(el($s))Zs.layoutAllToXml($s.layouts,Qs(t,e))},copyResourceAllXml(e,t){if(el($s))Zs.resourceAllToXml(Qs(t,e))},copyResourceStringXml(e,t){if(el($s))Zs.resourceStringToXml(Qs(t,e))},copyResourceArrayXml(e,t){if(el($s))Zs.resourceStringArrayToXml(Qs(t,e))},copyResourceFontXml(e,t){if(el($s))Zs.resourceFontToXml(Qs(t,e))},copyResourceColorXml(e,t){if(el($s))Zs.resourceColorToXml(Qs(t,e))},copyResourceStyleXml(e,t){if(el($s))Zs.resourceStyleToXml(Qs(t,e))},copyResourceDimenXml(e,t){if(el($s))Zs.resourceDimenToXml(Qs(t,e))},copyResourceDrawableXml(e,t){if(el($s))Zs.resourceDrawableToXml(Qs(t,e))},copyResourceAnimXml(e,t){if(el($s))Zs.resourceAnimToXml(Qs(t,e))},copyResourceDrawableImage(e,t){if(el($s))Zs.resourceDrawableImageToString(Qs(t,e))},copyResourceRawVideo(e,t){if(el($s))Zs.resourceRawVideoToString(Qs(t,e))},copyResourceRawAudio(e,t){if(el($s))Zs.resourceRawAudioToString(Qs(t,e))},saveLayoutAllXml(e,t){if(el($s))Zs.layoutAllToXml($s.layouts,Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-layouts"))},saveResourceAllXml(e,t){if(el($s))Zs.resourceAllToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-resources"))},saveResourceStringXml(e,t){if(el($s))Zs.resourceStringToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-string"))},saveResourceArrayXml(e,t){if(el($s))Zs.resourceStringArrayToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-array"))},saveResourceFontXml(e,t){if(el($s))Zs.resourceFontToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-font"))},saveResourceColorXml(e,t){if(el($s))Zs.resourceColorToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-color"))},saveResourceStyleXml(e,t){if(el($s))Zs.resourceStyleToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-style"))},saveResourceDimenXml(e,t){if(el($s))Zs.resourceDimenToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-dimen"))},saveResourceDrawableXml(e,t){if(el($s))Zs.resourceDrawableToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-drawable"))},saveResourceAnimXml(e,t){if(el($s))Zs.resourceAnimToXml(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-anim"))},saveResourceDrawableImage(e,t){if(el($s))Zs.resourceDrawableImageToString(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-drawable-image"))},saveResourceRawVideo(e,t){if(el($s))Zs.resourceRawVideoToString(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-raw-video"))},saveResourceRawAudio(e,t){if(el($s))Zs.resourceRawAudioToString(Qs(t,void 0,e||$s.userSettings.outputArchiveName+"-raw-audio"))},writeLayoutAllXml:e=>el($s)?Zs.layoutAllToXml($s.layouts,e):{},writeResourceAllXml:e=>el($s)?Zs.resourceAllToXml(e):{},writeResourceStringXml:e=>el($s)?Zs.resourceStringToXml(e):[],writeResourceArrayXml:e=>el($s)?Zs.resourceStringArrayToXml(e):[],writeResourceFontXml:e=>el($s)?Zs.resourceFontToXml(e):[],writeResourceColorXml:e=>el($s)?Zs.resourceColorToXml(e):[],writeResourceStyleXml:e=>el($s)?Zs.resourceStyleToXml(e):[],writeResourceDimenXml:e=>el($s)?Zs.resourceDimenToXml(e):[],writeResourceDrawableXml:e=>el($s)?Zs.resourceDrawableToXml(e):[],writeResourceAnimXml:e=>el($s)?Zs.resourceAnimToXml(e):[],writeResourceDrawableImage:e=>el($s)?Zs.resourceDrawableImageToString(e):[],writeResourceRawVideo:e=>el($s)?Zs.resourceRawVideoToString(e):[],writeResourceRawAudio:e=>el($s)?Zs.resourceRawAudioToString(e):[]},create(){const e=squared.base.lib.constant.EXT_NAME,t=a;return $s=new Application(2,View,Controller,Resource,squared.base.ExtensionManager),Zs=new File,$s.resourceHandler.fileHandler=Zs,Object.assign($s.builtInExtensions,{[e.TABLE]:new Table(e.TABLE,2,void 0,["TABLE"]),[e.LIST]:new List(e.LIST,2,void 0,["DIV","UL","OL","DL"]),[e.GRID]:new Grid(e.GRID,2,void 0,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[e.CSS_GRID]:new CssGrid(e.CSS_GRID,2),[e.FLEXBOX]:new Flexbox(e.FLEXBOX,2),[e.COLUMN]:new Column(e.COLUMN,2),[e.SPRITE]:new Sprite(e.SPRITE,2),[e.ACCESSIBILITY]:new Accessibility(e.ACCESSIBILITY,2),[e.RELATIVE]:new Relative(e.RELATIVE,2),[e.VERTICAL_ALIGN]:new VerticalAlign(e.VERTICAL_ALIGN,2),[e.WHITESPACE]:new WhiteSpace(e.WHITESPACE,2),[t.EXTERNAL]:new External(t.EXTERNAL,2),[t.SUBSTITUTE]:new Substitute(t.SUBSTITUTE,2),[t.DELEGATE_BACKGROUND]:new Background(t.DELEGATE_BACKGROUND,2),[t.DELEGATE_MAXWIDTHHEIGHT]:new MaxWidthHeight(t.DELEGATE_MAXWIDTHHEIGHT,2),[t.DELEGATE_NEGATIVEX]:new NegativeX(t.DELEGATE_NEGATIVEX,2),[t.DELEGATE_PERCENT]:new Percent(t.DELEGATE_PERCENT,2),[t.DELEGATE_POSITIVEX]:new PositiveX(t.DELEGATE_POSITIVEX,2),[t.DELEGATE_RADIOGROUP]:new RadioGroup(t.DELEGATE_RADIOGROUP,2),[t.DELEGATE_SCROLLBAR]:new ScrollBar(t.DELEGATE_SCROLLBAR,2),[t.RESOURCE_BACKGROUND]:new ResourceBackground(t.RESOURCE_BACKGROUND,2),[t.RESOURCE_DATA]:new ResourceData(t.RESOURCE_DATA,2),[t.RESOURCE_DIMENS]:new ResourceDimens(t.RESOURCE_DIMENS,2),[t.RESOURCE_FONTS]:new ResourceFonts(t.RESOURCE_FONTS,2),[t.RESOURCE_INCLUDES]:new ResourceIncludes(t.RESOURCE_INCLUDES,2),[t.RESOURCE_STRINGS]:new ResourceStrings(t.RESOURCE_STRINGS,2),[t.RESOURCE_STYLES]:new ResourceStyles(t.RESOURCE_STYLES,2),[t.RESOURCE_SVG]:new ResourceSvg(t.RESOURCE_SVG,2),[t.CONSTRAINT_GUIDELINE]:new Guideline(t.CONSTRAINT_GUIDELINE,2)}),Js=true,{application:$s,framework:2,userSettings:Object.assign({},Ks)}},cached(){if(Js)return{application:$s,framework:2,userSettings:$s.userSettings};else return tl.create()}};return tl}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.bottomnavigation=function(){"use strict";const{assignEmptyValue:e,capitalize:t,iterateArray:i,safeNestedMap:a}=squared.lib.util,{createStyleAttribute:n,createViewAttribute:o}=android.lib.util,{NODE_RESOURCE:s,NODE_TEMPLATE:d}=squared.base.lib.enumeration,{EXT_ANDROID:r,SUPPORT_ANDROID:u,SUPPORT_ANDROID_X:c}=android.lib.constant,{BUILD_ANDROID:m,CONTAINER_NODE:p}=android.lib.enumeration,l=android.base.Resource;class BottomNavigation extends squared.base.ExtensionUI{constructor(e,t,i,a){super(e,t,i,a),this.require("android.widget.menu")}processNode(t,a){const n=o(this.options[t.elementId]);e(n,"android","background","?android:attr/windowBackground"),i(t.children,e=>{e.hide(),e.cascade(e=>e.hide())},5);const d=t.api<29?u.BOTTOM_NAVIGATION:c.BOTTOM_NAVIGATION;return t.setControlType(d,p.BLOCK),t.exclude({resource:s.ASSET}),t.render(a),t.apply(l.formatOptions(n,this.application.extensionManager.optionValueAsBoolean(r.RESOURCE_STRINGS,"numberResourceValue"))),t.setLayoutWidth("match_parent"),t.setLayoutHeight("wrap_content"),t.cascade(e=>this.addDescendant(e)),this.setStyleTheme(),{output:{type:1,node:t,controlName:d},complete:true,include:true}}postOptimize(i){var n;const s=i.renderParent;if(s.documentRoot){if(s.inlineWidth)s.setLayoutWidth("match_parent");if(s.inlineHeight)s.setLayoutHeight("match_parent")}const d=null===(n=BottomNavigation.findNestedElement(i,"android.widget.menu"))||void 0===n?void 0:n.dataset["layoutName"+t(this.application.systemName)];if(d){const t=o(this.options[i.elementId]),n=a(t,"app");e(n,"menu","@menu/"+d),i.app("menu",n.menu)}}setStyleTheme(){const t=n(this.options.resource);e(t,"name",this.application.userSettings.manifestThemeName),e(t,"parent","Theme.AppCompat.Light.DarkActionBar"),l.addTheme(t)}}const h=new BottomNavigation("android.widget.bottomnavigation",2);if(squared)squared.include(h);return h}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.coordinator=function(){"use strict";const{getElementAsNode:e}=squared.lib.session,{createViewAttribute:t}=android.lib.util,{NODE_RESOURCE:i,NODE_TEMPLATE:o}=squared.base.lib.enumeration,{EXT_ANDROID:n,SUPPORT_ANDROID:r,SUPPORT_ANDROID_X:d}=android.lib.constant,{BUILD_ANDROID:s,CONTAINER_NODE:a}=android.lib.enumeration,l=android.base.Resource;class Coordinator extends squared.base.ExtensionUI{processNode(o,s){var u;const c=t(this.options[o.elementId]);l.formatOptions(c,this.application.extensionManager.optionValueAsBoolean(n.RESOURCE_STRINGS,"numberResourceValue"));const O=Coordinator.findNestedElement(o,"android.widget.toolbar");if(O){const t=e(O,o.sessionId);if(t){const e=null===(u=this.application.extensionManager.retrieve("android.widget.toolbar"))||void 0===u?void 0:u.options[t.elementId];if(e&&"collapsingToolbar"in e)o.android("fitsSystemWindows","true")}}const R=o.api<29?r.COORDINATOR:d.COORDINATOR;return o.setControlType(R,a.BLOCK),o.exclude({resource:i.ASSET}),o.render(s),o.renderExclude=false,{output:{type:1,node:o,controlName:R}}}postOptimize(e){if(e.documentRoot){if(e.inlineWidth)e.some(t=>{if(t.rightAligned)return e.setLayoutWidth("match_parent",true),true;else return false});if(e.inlineHeight)e.some(t=>{if(t.bottomAligned)return e.setLayoutHeight("match_parent",true),true;else return false})}}}const u=new Coordinator("android.widget.coordinator",2);if(squared)squared.include(u);return u}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const{getElementAsNode:e}=squared.lib.session,{assignEmptyValue:t,capitalize:i,cloneObject:a,safeNestedMap:n,includes:o,iterateArray:r}=squared.lib.util,{createStyleAttribute:s,createViewAttribute:d}=android.lib.util,{NODE_RESOURCE:u,NODE_TEMPLATE:l}=squared.base.lib.enumeration,{EXT_ANDROID:c,SUPPORT_ANDROID:m,SUPPORT_ANDROID_X:p}=android.lib.constant,{BUILD_ANDROID:h,CONTAINER_NODE:N}=android.lib.enumeration,E=android.base.Resource;class Drawer extends squared.base.ExtensionUI{constructor(e,t,i,a){super(e,t,i,a),this.documentBase=true,this.require(c.EXTERNAL,true),this.require("android.widget.menu"),this.require("android.widget.coordinator")}init(e,t){var i;if(this.included(e)){const a=this.application;if(r(e.children,e=>{if("NAV"===e.tagName){const t=a.getDatasetName("use",e);if(!o(t,c.EXTERNAL))a.setDatasetName("use",e,(t?t+", ":"")+c.EXTERNAL)}})&&(null===(i=a.getProcessing(t))||void 0===i?void 0:i.rootElements.add(e)))return true}return false}processNode(e,i){const a=d(this.options.self);if(Drawer.findNestedElement(e,"android.widget.menu"))t(a,"android","fitsSystemWindows","true"),this.setStyleTheme(e.api);else{const i=d(this.options.navigationView);t(i,"android","layout_gravity",e.localizeString("left"));const a=e.item();a.mergeGravity("layout_gravity",i.android.layout_gravity),a.setLayoutHeight("match_parent"),a.positioned=true}e.documentRoot=true,e.renderExclude=false;const n=e.api<29?m.DRAWER:p.DRAWER;return e.setControlType(n,N.BLOCK),e.exclude({resource:u.FONT_STYLE}),e.apply(E.formatOptions(a,this.application.extensionManager.optionValueAsBoolean(c.RESOURCE_STRINGS,"numberResourceValue"))),e.render(i),e.setLayoutWidth("match_parent"),e.setLayoutHeight("match_parent"),{output:{type:1,node:e,controlName:n},complete:true,include:true,remove:true}}afterParseDocument(){var e,a;const o=i(this.application.systemName);for(const i of this.subscribers){const r=d(this.options.navigationView),s=null===(e=Drawer.findNestedElement(i,"android.widget.menu"))||void 0===e?void 0:e.dataset["layoutName"+o],u=null===(a=Drawer.findNestedElement(i,c.EXTERNAL))||void 0===a?void 0:a.dataset["layoutName"+o],l=n(r,"app");if(s)t(l,"menu","@menu/"+s);if(u)t(l,"headerLayout","@layout/"+u);if(s||u){const e=this.controller;t(r,"android","id",`@+id/${i.controlId}_navigation`),t(r,"android","fitsSystemWindows","true"),t(r,"android","layout_gravity",i.localizeString("left")),e.addAfterInsideTemplate(i.id,e.renderNodeStatic({controlName:i.api<29?m.NAVIGATION_VIEW:p.NAVIGATION_VIEW,width:"wrap_content",height:"match_parent"},E.formatOptions(r,this.application.extensionManager.optionValueAsBoolean(c.RESOURCE_STRINGS,"numberResourceValue"))))}}}postOptimize(t){const i=Drawer.findNestedElement(t,"android.widget.coordinator");if(i){const a=e(i,t.sessionId);if((null==a?void 0:a.inlineHeight)&&a.some(e=>e.positioned))a.setLayoutHeight("match_parent")}}setStyleTheme(e){const i=this.application.userSettings,n=s(this.options.resource);if(t(n,"name",i.manifestThemeName),t(n,"parent",i.manifestParentThemeName),t(n.items,"android:windowTranslucentStatus","true"),E.addTheme(n),e>=21){const e=s(a(n)),i={};t(e.output,"path","res/values-v21"),t(i,"android:windowDrawsSystemBarBackgrounds","true"),t(i,"android:statusBarColor","@android:color/transparent"),e.items=i,E.addTheme(e)}}}const g=new Drawer("android.widget.drawer",2);if(squared)squared.include(g);return g}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.floatingactionbutton=function(){"use strict";const{parseColor:t}=squared.lib.color,{assignEmptyValue:e,safeNestedMap:o}=squared.lib.util,{adjustAbsolutePaddingOffset:a,createViewAttribute:i,getHorizontalBias:r,getVerticalBias:n}=android.lib.util,{BOX_STANDARD:l,NODE_PROCEDURE:d,NODE_RESOURCE:s,NODE_TEMPLATE:c}=squared.base.lib.enumeration,{EXT_ANDROID:g,SUPPORT_ANDROID:u,SUPPORT_ANDROID_X:y}=android.lib.constant,{BUILD_ANDROID:m,CONTAINER_NODE:p}=android.lib.enumeration,f=android.base.Resource,_=["button","file","image","reset","search","submit"];class FloatingActionButton extends squared.base.ExtensionUI{is(t){const e=t.element;return super.is(t)&&("INPUT"!==e.tagName||_.includes(e.type))}condition(t){return this.included(t.element)}processNode(l,c){const m=this.resource,_=l.element,T=l.target,b=i(this.options[_.id.trim()]),N=f.addColor(t(l.css("backgroundColor"),l.toFloat("opacity",1)));if(e(b,"android","backgroundTint",""!==N?"@color/"+N:"?attr/colorAccent"),!l.hasProcedure(d.ACCESSIBILITY))e(b,"android","focusable","false");let O;switch(_.tagName){case"IMG":O=m.addImageSrc(_,"ic_dialog_");break;case"INPUT":if("image"===_.type){O=m.addImageSrc(_,"ic_dialog_");break}case"BUTTON":O=m.addImageSrc(l.backgroundImage,"ic_dialog_");break}if(O)e(o(b,"app"),"srcCompat","@drawable/"+O);const v=l.api<29?u.FLOATING_ACTION_BUTTON:y.FLOATING_ACTION_BUTTON;if(l.setControlType(v,p.BUTTON),l.exclude({resource:s.BOX_STYLE|s.ASSET}),f.formatOptions(b,this.application.extensionManager.optionValueAsBoolean(g.RESOURCE_STRINGS,"numberResourceValue")),!l.pageFlow){const t=this.application.resolveTarget(l.sessionId,T)||c;if(l.autoMargin.leftRight)l.mergeGravity("layout_gravity","center_horizontal");else if(l.hasPX("left"))l.mergeGravity("layout_gravity",l.localizeString("left")),l.modifyBox(16,a(t,256,l.left));else if(l.hasPX("right"))l.mergeGravity("layout_gravity",l.localizeString("right")),l.modifyBox(4,a(t,64,l.right));if(l.autoMargin.topBottom)l.mergeGravity("layout_gravity","center_vertical");else if(l.hasPX("top"))l.app("layout_dodgeInsetEdges","top"),l.mergeGravity("layout_gravity","top"),l.modifyBox(2,a(t,32,l.top));else if(l.hasPX("bottom"))l.mergeGravity("layout_gravity","bottom"),l.modifyBox(8,a(t,128,l.bottom));l.positioned=true}else if(T){const t=l.documentParent.box,e=l.linear,o=r(l),a=n(l);if(o<.5)l.mergeGravity("layout_gravity",l.localizeString("left")),l.modifyBox(16,e.left-t.left);else if(o>.5)l.mergeGravity("layout_gravity",l.localizeString("right")),l.modifyBox(4,t.right-e.right);else l.mergeGravity("layout_gravity","center_horizontal");if(a<.5)l.app("layout_dodgeInsetEdges","top"),l.mergeGravity("layout_gravity","top"),l.modifyBox(2,e.top-t.top);else if(a>.5)l.mergeGravity("layout_gravity","bottom"),l.modifyBox(8,t.bottom-e.bottom);else l.mergeGravity("layout_gravity","center_vertical");l.positioned=true}if(T){const t=l.android("layout_gravity");let e=c.documentId;if(c.controlName===(l.api<29?u.TOOLBAR:y.TOOLBAR)){const t=c.data("android.widget.toolbar","outerParent");if(t)e=t}if(""!==t)l.app("layout_anchorGravity",t),l.delete("android","layout_gravity");l.app("layout_anchor",e),l.exclude({procedure:d.ALIGNMENT})}return l.render(c),l.apply(b),{output:{type:1,node:l,controlName:v},complete:true}}}const T=new FloatingActionButton("android.widget.floatingactionbutton",2,["BUTTON","INPUT","IMG"]);if(squared)squared.include(T);return T}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.menu=function(){"use strict";const{appendSeparator:e,capitalize:t,sameArray:i,safeNestedMap:n}=squared.lib.util,{createViewAttribute:a}=android.lib.util,{NODE_ALIGNMENT:r,NODE_PROCEDURE:o,NODE_RESOURCE:s,NODE_TEMPLATE:l}=squared.base.lib.enumeration,{EXT_ANDROID:c}=android.lib.constant,{CONTAINER_NODE:d}=android.lib.enumeration,u=android.base.Resource,h={id:/^@\+id\/\w+$/,title:/^.+$/,titleCondensed:/^.+$/,icon:/^@drawable\/.+$/,onClick:/^.+$/,showAsAction:/^(ifRoom|never|withText|always|collapseActionView)$/,actionLayout:/^@layout\/.+$/,actionViewClass:/^.+$/,actionProviderClass:/^.+$/,alphabeticShortcut:/^[a-zA-Z]+$/,alphabeticModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,numericShortcut:/^\d+$/,numericModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,checkable:/^(true|false)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^\d+$/},m={id:/^@\+id\/\w+$/,checkableBehavior:/^(none|all|single)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^\d+$/},p="menu",f="item",N="group",g=["showAsAction","actionViewClass","actionProviderClass"];function A(e,t,i){const a=t.dataset;for(const t in a){const r=e[t];if(r){const e=a[t];if(e){const a=r.exec(e);if(a)n(i,g.includes(t)?"app":"android")[t]=Array.from(new Set(a)).join("|")}}}}function b(e,t){const i=t.title;if(i)return i;else{const t=e.naturalChildren,i=t.length;let n=0;while(n<i){const e=t[n++];if(e.textElement)return e.textContent.trim()}}return""}const E=(e,t)=>e.some(e=>e.toElementString("type")===t);class Menu extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.cascadeAll=true,this.require(c.EXTERNAL,true)}init(e,t){var n;if(this.included(e))if(e.childElementCount>0){if(!i(e.children,e=>e.tagName))return false;const a=null===(n=this.application.getProcessing(t))||void 0===n?void 0:n.rootElements;if(a){let t=e.parentElement;while(t){if("NAV"===t.tagName&&a.has(t))return false;t=t.parentElement}a.add(e)}}return false}condition(e){return this.included(e.element)}processNode(i,n){const a=this.application.createNode(i.sessionId,{parent:n,append:false});return a.childIndex=i.childIndex,a.actualParent=n.actualParent,i.documentRoot=true,i.setControlType(p,d.INLINE),i.addAlign(4),i.exclude({resource:s.ALL,procedure:o.ALL}),i.render(a),i.cascade(e=>(this.addDescendant(e),false)),i.dataset["pathname"+t(this.application.systemName)]=e(this.controller.userSettings.outputDirectory,"res/menu"),{outerParent:a,output:{type:1,node:i,controlName:p},complete:true}}processChild(e,t){if(e.plainText)return e.hide(),{next:true};const i=a(),n=i.android,r=e.element;let l,g;if("NAV"===e.tagName)l=p,g=b(e,r);else if(e.some(e=>e.length>0)){if(e.some(e=>"NAV"===e.tagName))l=f;else if(l=N,e.every(e=>E(e,"radio")))n.checkableBehavior="single";else if(e.every(e=>E(e,"checkbox")))n.checkableBehavior="all";g=b(e,r)}else if(l=f,g=(r.title||r.innerText).trim(),E(e,"checkbox")&&!t.android("checkableBehavior"))n.checkable="true";switch(l){case p:e.addAlign(4);break;case N:e.addAlign(4),A(m,r,i);break;case f:if(A(h,r,i),!n.icon){const t=this.resource;let i=t.addImageSrc(e.backgroundImage,"ic_menu_");if(""!==i)n.icon="@drawable/"+i;else{const a=e.find(e=>e.imageElement);if(a)if(i=t.addImageSrc(a.element,"ic_menu_"),""!==i)n.icon="@drawable/"+i}}e.each(e=>"NAV"!==e.tagName&&e.hide());break}if(""!==g)n.title=u.addString(g,"",this.application.extensionManager.optionValueAsBoolean(c.RESOURCE_STRINGS,"numberResourceValue"));return e.setControlType(l,d.INLINE),e.exclude({resource:s.ALL,procedure:o.ALL}),e.render(t),e.apply(i),{output:{type:1,node:e,controlName:l},complete:true,next:l===p}}}const C=new Menu("android.widget.menu",2,["NAV"]);if(squared)squared.include(C);return C}();
this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.toolbar=function(){"use strict";const{formatPX:e}=squared.lib.css,{getElementAsNode:t}=squared.lib.session,{assignEmptyValue:a,capitalize:o,includes:r,iterateArray:i,safeNestedMap:n}=squared.lib.util,{createStyleAttribute:d,createViewAttribute:s,getDocumentId:l}=android.lib.util,{NODE_PROCEDURE:c,NODE_RESOURCE:p,NODE_TEMPLATE:u}=squared.base.lib.enumeration,{CONTAINER_ANDROID:m,EXT_ANDROID:h,SUPPORT_ANDROID:g,SUPPORT_ANDROID_X:f}=android.lib.constant,{BUILD_ANDROID:b,CONTAINER_NODE:y}=android.lib.enumeration,O=android.base.Resource;class Toolbar extends squared.base.ExtensionUI{constructor(e,t,a,o){super(e,t,a,o),this.require("android.widget.menu")}init(e,t){var a;if(this.included(e)){const o=this.application;i(e.children,e=>{if("NAV"===e.tagName){const t=o.getDatasetName("use",e);if(!r(t,h.EXTERNAL))return o.setDatasetName("use",e,(t?t+", ":"")+h.EXTERNAL),true}});const n=e.dataset.androidTarget;if(n){const i=document.getElementById(n);if(i&&!r(o.getDatasetName("use",i),"android.widget.coordinator"))null===(a=o.getProcessing(t))||void 0===a||a.rootElements.add(e)}}return false}processNode(o,r){const d=this.application,u=this.resource,b=d.userSettings,T=o.element,A=Object.assign({},this.options[T.id.trim()]),N=s(A.self),I=s(A.appBar),_=s(A.collapsingToolbar),w=d.extensionManager.optionValueAsBoolean(h.RESOURCE_STRINGS,"numberResourceValue"),E=Toolbar.findNestedElement(o,"android.widget.menu"),L=o.has("backgroundImage"),B=[],R=[];let D=n(N,"app");i(T.children,e=>{const r=e.dataset;if("IMG"===e.tagName){if(r.navigationIcon){const t=u.addImageSrc(e,"ic_menu_");if(""!==t)a(D,"navigationIcon","@drawable/"+t)}if(r.collapseIcon){const t=u.addImageSrc(e,"ic_menu_");if(""!==t)a(D,"collapseIcon","@drawable/"+t)}}if(!r.androidTarget){const a=t(e,o.sessionId);if(a)switch(r.androidTargetModule){case"appBar":B.push(a);break;case"collapsingToolbar":R.push(a);break}}});const[P,v,S]=o.api<29?[g.TOOLBAR,g.APPBAR,g.COLLAPSING_TOOLBAR]:[f.TOOLBAR,f.APPBAR,f.COLLAPSING_TOOLBAR],C="collapsingToolbar"in A||R.length>0,k="appBar"in A||B.length>0||C;let x,M,U,q="",W="";if(C)a(D,"layout_collapseMode","pin");else if(a(D,"popupTheme","@style/ThemeOverlay.AppCompat.Light"),!L)a(D,"layout_scrollFlags","scroll|enterAlways");if(k){if(E){const e=D.popupTheme;if(e)W=e.replace("@style/","");D.popupTheme=`@style/${b.manifestThemeName}.PopupOverlay`}}else o.exclude({procedure:c.LAYOUT}),a(N,"android","fitsSystemWindows","true");if(a(N,"android","layout_height",k||!o.hasPX("height")?"?android:attr/actionBarSize":""),o.setControlType(P,y.BLOCK),o.exclude({resource:p.FONT_STYLE}),k){let t=I.android;if(a(I,"android","id",`@+id/${o.controlId}_appbar`),a(I,"android","layout_height",o.hasHeight?e(o.actualHeight):"wrap_content"),a(I,"android","fitsSystemWindows","true"),E){if(t.theme)q=t.theme;t.theme=`@style/${b.manifestThemeName}.AppBarOverlay`,o.data("android.widget.toolbar","themeData",{appBarOverlay:q,popupOverlay:W})}else a(I,"android","theme","@style/ThemeOverlay.AppCompat.Dark.ActionBar");x=this.createPlaceholder(o,B,o.target),x.parent=r;let i=t.id;if(i)x.controlId=l(i),delete t.id;if(x.setControlType(v,y.BLOCK),C){if(D=n(_,"app"),a(_,"android","id",`@+id/${o.controlId}_collapsingtoolbar`),a(_,"android","fitsSystemWindows","true"),!L)a(D,"contentScrim","?attr/colorPrimary");if(a(D,"layout_scrollFlags","scroll|exitUntilCollapsed"),a(D,"toolbarId",o.documentId),M=this.createPlaceholder(o,R),M){if(M.parent=x,t=_.android,i=t.id,i)x.controlId=l(i),delete t.id;M.setControlType(S,y.BLOCK)}}}if(x){if(x.setLayoutWidth("match_parent"),x.setLayoutHeight("wrap_content"),x.apply(O.formatOptions(I,w)),x.render(r),U={type:1,node:x,controlName:v},M){if(o.parent=M,M.apply(O.formatOptions(_,w)),M.render(x),M.setLayoutWidth("match_parent"),M.setLayoutHeight("match_parent"),d.addLayoutTemplate(M.renderParent,M,{type:1,node:M,controlName:S}),L){const e=u.addImageSrc(o.backgroundImage);if(""!==e){const t=this.controller,r=s(A.backgroundImage);let i;switch(o.css("backgroundSize")){case"cover":case"100% auto":case"auto 100%":i="centerCrop";break;case"contain":case"100%":case"100% 100%":i="fitXY";break;case"auto":i="matrix";break;default:i="center";break}D=n(r,"app"),a(r,"android","id",`@+id/${o.controlId}_image`),a(r,"android","src","@drawable/"+e),a(r,"android","scaleType",i),a(r,"android","fitsSystemWindows","true"),a(D,"layout_collapseMode","parallax"),t.addBeforeOutsideTemplate(o.id,t.renderNodeStatic({controlName:m.IMAGE,width:"match_parent",height:"match_parent"},O.formatOptions(r,w))),o.setCacheValue("backgroundImage","")}}}else if(o.parent=x,L)o.data("android.widget.toolbar","background",x);o.data("android.widget.toolbar","outerParent",x.android("id")||x.documentId),o.render(o.parent)}else o.render(r);o.setLayoutWidth("match_parent"),o.apply(O.formatOptions(N,w));const X={type:1,node:o,controlName:P};if(x)return{output:X,outerParent:o.parent,renderAs:x,outputAs:U,include:true};else return{output:X,include:true}}processChild(e){if(e.imageElement&&(e.dataset.navigationIcon||e.dataset.collapseIcon))return e.hide(),{next:true}}postOptimize(e){var t,r;const i=null===(t=Toolbar.findNestedElement(e,"android.widget.menu"))||void 0===t?void 0:t.dataset["layoutName"+o(this.application.systemName)];if(i){const t=s(null===(r=this.options[e.elementId])||void 0===r?void 0:r.self),o=n(t,"app");a(o,"menu","@menu/"+i),e.app("menu",o.menu)}const l=e.data("android.widget.toolbar","themeData");if(l){const e=d(this.options.resource),t=d({name:".NoActionBar",output:e.output}),o=d({name:".AppBarOverlay",output:e.output}),r=d({name:".PopupOverlay",output:e.output});a(e,"name",this.application.userSettings.manifestThemeName),a(e,"parent","Theme.AppCompat.Light.DarkActionBar"),a(t.items,"windowActionBar","false"),a(t.items,"windowNoTitle","true"),a(o,"parent",l.appBarOverlay||"ThemeOverlay.AppCompat.Dark.ActionBar"),a(r,"parent",l.popupOverlay||"ThemeOverlay.AppCompat.Light"),O.addTheme(e),O.addTheme(t),O.addTheme(o),O.addTheme(r)}const c=e.data("android.widget.toolbar","background");if(c){const t=e.android("background");if(""!==t)c.android("background",t),e.delete("android","background")}}createPlaceholder(e,t,a){const o=t.length>0,r=this.application.createNode(e.sessionId,{parent:e,children:t,delegate:o,cascade:true});if(r.inherit(e,"base"),o){let e=1/0,a=0;while(a<t.length)e=Math.min(e,t[a++].containerIndex);r.containerIndex=e}if(a)r.dataset.androidTarget=a.id,r.innerWrapped=e;return r.exclude({resource:p.ALL}),r.positioned=true,r.renderExclude=false,r}}const T=new Toolbar("android.widget.toolbar",2);if(squared)squared.include(T);return T}();
