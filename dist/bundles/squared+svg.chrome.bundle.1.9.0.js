!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).squared={})}(this,(function(e){"use strict";const t="-?(?:\\d+(?:\\.\\d+)?|\\d*\\.\\d+)",r="px|em|pt|rem|ch|pc|vw|vh|vmin|vmax|mm|cm|in|ex|Q",n={DECIMAL:t,PERCENT:"-?\\d+(?:\\.\\d+)?%",LENGTH:`(${t})(${r})?`,LENGTH_PERCENTAGE:`(${t}(?:${r}|%)?)`,UNIT_LENGTH:r,DATAURI:"(?:data:([^,]+),)?(.+?)",CSS_SELECTOR_LABEL:"[\\.#]?[\\w\\-]+",CSS_SELECTOR_PSEUDO_ELEMENT:"::[\\w\\-]+",CSS_SELECTOR_PSEUDO_CLASS:":[\\w\\-]+(?:\\(\\s*([^()]+)\\s*\\)|\\(\\s*([\\w\\-]+\\(.+?\\))\\s*\\))?",CSS_SELECTOR_ATTR:"\\[((?:\\*\\|)?(?:\\w+\\\\:)?[\\w\\-]+)(?:([~^$*|])?=(?:\"((?:[^\"]|\\\\\")+)\"|'((?:[^']|\\')+)'|([^\\s\\]]+))\\s*(i)?)?\\]",CSS_ANGLE:`(${t})(deg|rad|turn|grad)`,CSS_TIME:`(${t})(s|ms)`,CSS_CALC:"calc\\((.+)\\)"},i={NAME:/[/\\]?(([^/\\]+?)\.([^/\\]+?))$/,PROTOCOL:/^([A-Za-z]{3,}:\/\/)([A-Za-z\d\-.]+)(:\d+)?(\/[^?]*)?[?]?(.*)?$/,SVG:/\.svg$/i},a={URL:/^\s*url\((?:"?((?:[^")]|\\")+)"?)\)\s*$/,HEX:/[A-Za-z\d]{3,8}/,RGBA:/rgba?\((\d+),\s+(\d+),\s+(\d+)(?:,\s+([\d.]+%?))?\)/,HSLA:/hsla?\((\d+),\s+(\d+)%,\s+(\d+)%(?:,\s+([\d.]+%?))?\)/,SELECTOR_G:new RegExp(`\\s*((?:${n.CSS_SELECTOR_ATTR}|${n.CSS_SELECTOR_PSEUDO_CLASS}|${n.CSS_SELECTOR_PSEUDO_ELEMENT}|${n.CSS_SELECTOR_LABEL})+|[>~+*])\\s*`,"g"),SELECTOR_LABEL:new RegExp(n.CSS_SELECTOR_LABEL),SELECTOR_PSEUDO_ELEMENT:new RegExp(n.CSS_SELECTOR_PSEUDO_ELEMENT),SELECTOR_PSEUDO_CLASS:new RegExp(n.CSS_SELECTOR_PSEUDO_CLASS),SELECTOR_ATTR:new RegExp(n.CSS_SELECTOR_ATTR)},s={MATRIX:new RegExp(`(matrix(?:3d)?)\\((${n.DECIMAL}),\\s+(${n.DECIMAL}),\\s+(${n.DECIMAL}),\\s+(${n.DECIMAL}),\\s+(${n.DECIMAL}),\\s+(${n.DECIMAL})(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?(?:,\\s+(${n.DECIMAL}))?\\)`),ROTATE:new RegExp(`(rotate[XYZ]?)\\(${n.CSS_ANGLE}\\)`),SKEW:new RegExp(`(skew[XY]?)\\(${n.CSS_ANGLE}(?:,\\s+${n.CSS_ANGLE})?\\)`),SCALE:new RegExp(`(scale[XYZ]?)\\((${n.DECIMAL})(?:,\\s+(${n.DECIMAL}))?\\)`),TRANSLATE:new RegExp(`(translate[XYZ]?)\\(${n.LENGTH_PERCENTAGE}(?:,\\s+${n.LENGTH_PERCENTAGE})?\\)`),PERSPECTIVE:new RegExp(`(perspective)\\(${n.LENGTH_PERCENTAGE}\\)`)};var l=Object.freeze({__proto__:null,STRING:n,FILE:i,CSS:a,TRANSFORM:s});const o=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],c={},u={},h=new RegExp(`^${n.DECIMAL}$`);function f(e){switch(L(e.trim(),".").toLowerCase()){case"aac":return"audio/aac";case"abw":return"application/x-abiword";case"apng":return"image/apng";case"arc":return"application/x-freearc";case"avi":return"video/x-msvideo";case"azw":return"application/vnd.amazon.ebook";case"bin":return"application/octet-stream";case"bmp":case"bmpf":case"bmpp":return"image/bmp";case"bz":return"application/x-bzip";case"bz2":return"application/x-bzip2";case"csh":return"application/x-csh";case"css":return"text/css";case"csv":return"text/csv";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"eot":case"embedded-opentype":return"application/vnd.ms-fontobject";case"epub":return"application/epub+zip";case"flac":return"audio/flac";case"gif":return"image/gif";case"gsm":return"audio/gsm";case"heic":return"image/heic";case"heif":return"image/heif";case"htm":case"html":return"text/html";case"cur":case"ico":return"image/x-icon";case"ics":return"text/calendar";case"jar":return"application/java-archive";case"jpeg":case"jpg":case"jfif":case"pjpeg":case"pjp":return"image/jpeg";case"js":case"mjs":return"text/javascript";case"json":return"application/json";case"jsonp":return"application/javascript";case"jsonld":return"application/ld+json";case"mid":case"midi":return"audio/midi";case"mkv":return"video/x-matroska";case"mp3":case"mpeg":return"audio/mpeg";case"mp4":return"video/mp4";case"mpkg":return"application/vnd.apple.installer+xml";case"odp":return"application/vnd.oasis.opendocument.presentation";case"ods":return"application/vnd.oasis.opendocument.spreadsheet";case"odt":return"application/vnd.oasis.opendocument.text";case"oga":case"spx":case"ogg":return"audio/ogg";case"ogv":case"ogm":return"video/ogg";case"ogx":return"application/ogg";case"otf":case"opentype":return"font/otf";case"png":return"image/png";case"pdf":return"application/pdf";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"rar":return"application/x-rar-compressed";case"rtf":return"application/rtf";case"sh":return"application/x-sh";case"svg":return"image/svg+xml";case"swf":return"application/x-shockwave-flash";case"tar":return"application/x-tar";case"tif":case"tiff":return"image/tiff";case"ts":return"video/mp2t";case"ttf":case"truetype":return"font/ttf";case"txt":return"text/plain";case"vsd":return"application/vnd.visio";case"vtt":return"text/vtt";case"wav":return"audio/wav";case"weba":case"webm":return"audio/webm";case"webp":return"image/webp";case"woff":return"font/woff";case"woff2":return"font/woff2";case"xhtml":return"application/xhtml+xml";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xml":return"application/xml";case"xul":return"application/vnd.mozilla.xul+xml";case"zip":return"application/zip";case"3gp":return"video/3gpp";case"3g2":return"video/3gpp2";case"7z":return"application/x-7z-compressed";default:return""}}function g(e){for(const t in e)return void 0!==e[t];return false}function d(e,t,r){return 0===t?e.substring(r):e.substring(0,t)+e.substring(t+r)}function p(e,t="-"){let r=e.indexOf(t);if(-1===r)return e;const n=c[e];if(n)return n;let i=e.substring(0,r),a="";const s=e.length;while(r<s){const n=e.charAt(r++);if(n!==t)if(a===t)i+=n.toUpperCase();else i+=n;a=n}return c[e]=i,i}function b(e){return parseFloat(e)||0}function m(e){if(e>=0){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let r="";const n=t.length;while(e>=n){const i=Math.floor(e/n);if(i>1&&i<=n)r+=t.charAt(i-1),e-=i*n;else if(i>0)return r+="Z",r+=m(e-=Math.pow(n,2)),r;const a=e%n;r+=t.charAt(a),e-=a+n}return t.charAt(e)+r}return e.toString()}function v(e){const t=e.toString().split("");let r="",n=3;while(n--)r=(o[parseInt(t.pop())+10*n]||"")+r;return"M".repeat(parseInt(t.join("")))+r}function w(e,t,r="",n="(",i=")"){if(r.length>1)return[];if(!x(t))t=n;const a=t!==n,s=a?t+n:n,l=[],o=e=>{for(let t of e.split(r))if(t=t.trim(),""!==t)l.push(t)};let c=0,u=-1;const h=e.length;while(-1!==(u=e.indexOf(s,c))){let s="";if(u!==c){let n=e.substring(c,u);if(r){if(n=n.trim(),""!==n)if(o(n),!a){const r=l[l.length-1];if(e.substring(u-r.length,u+1)===r+t)s=r,--l.length}}else l.push(n)}let f=false;for(let o=u+(a?t.length:0)+1,g=1,d=0;o<h;++o){switch(e.charAt(o)){case n:++g;break;case i:++d;break}if(g===d){if(r){for(;o<h;++o)if(e.charAt(o)===r)break;c=o+1,l.push(s+e.substring(u,o).trim())}else c=o+1,l.push(e.substring(u,c));if(c===h)return l;f=true;break}}if(!f)return[]}if(c<h){const t=e.substring(c);if(r){const e=t.trim();if(""!==e)o(e)}else l.push(t)}return l}function y(e,t){return(e&t)===t}function k(e){return h.test(e)}function x(e){return"string"==typeof e&&""!==e.trim()}function E(e){return"object"==typeof e&&null!==e}function S(e){return E(e)&&(e.constructor===Object||null===Object.getPrototypeOf(Object(e)))}function A(e,t=[],r=false){for(let n=0;n<e.length;++n){const i=e[n];if(Array.isArray(i))t.push(A(i,[],r));else if(r&&S(i))t.push(C(i,{},true));else t.push(i)}return t}function C(e,t={},r=false){for(const n in e){const i=e[n];if(Array.isArray(i))t[n]=r?A(i,[],true):i;else if(S(i))t[n]=C(i,{},r);else t[n]=i}return t}function R(e,t){if(e=e.trim(),!i.PROTOCOL.test(e)){const r=location.origin,n=((null==t?void 0:t.replace(r,""))||location.pathname).replace(/\\/g,"/").split("/");if(n.pop(),"/"===(e=e.replace(/\\/g,"/")).charAt(0))return r+e;else if(e.startsWith("../")){const t=[];for(const r of e.split("/"))if(".."===r)if(0===t.length)n.pop();else t.pop();else t.push(r);e=t.join("/")}return r+n.join("/")+"/"+e}return e}function F(e,t){return e.replace(new RegExp(`^${t}+`),"")}function T(e,t){return e.replace(new RegExp(t+"+$"),"")}function L(e,...t){for(let r=0;r<t.length;++r){const n=e.lastIndexOf(t[r]);if(-1!==n)return e.substring(n+1)}return e}function I(e){return null!=e&&""!==e}function N(e,t,r=1){return t>=e-r&&t<=e+r}function P(e,t){let r=0;for(const n of e)if(t(n,r++,e))return n}function M(e,t){const r=e.length,n=new Array(r),i=new Array(r);let a=0,s=0,l=0;while(a<r){const r=e[a];if(t(r,a++,e))n[s++]=r;else i[l++]=r}return n.length=s,i.length=l,[n,i]}function B(e,t){const r=e.length;if(r){let n;for(let i=0;i<r;++i){const r=t(e[i],i,e);if(0===i)n=r;else if(r!==n)return false}return true}return false}function _(e,t,r="\n",n=true){let i="";const a=e.length;let s=0;while(s<a){const n=t(e[s],s++,e);if(""!==n)i+=n+r}return n?i:i.substring(0,i.length-r.length)}function D(e,t,r=0,n=1/0){r=Math.max(r,0);const i=Math.min(e.length,n);let a=r;while(a<i){if(true===t(e[a],a++,e))return 1/0}return i}function O(e,t){const r=e.length;let n=0;while(n<r)e[n]=t(e[n],n++,e);return e}function z(e,t){const r=e.length,n=new Array(r);let i=0;while(i<r)n[i]=t(e[i],i++,e);return n}var $=Object.freeze({__proto__:null,promisify:function(e){return(...t)=>new Promise((r,n)=>{try{r(e.call(null,...t))}catch(e){n(e)}})},hasMimeType:function(e,t){return"*"===e||e.includes(f(t))},parseMimeType:f,fromMimeType:function(e){switch(e){case"audio/aac":return"aac";case"application/x-abiword":return"abw";case"image/apng":return"apng";case"application/x-freearc":return"arc";case"video/x-msvideo":return"avi";case"application/vnd.amazon.ebook":return"azw";case"application/octet-stream":return"bin";case"image/bmp":case"image/x-ms-bmp":return"bmp";case"application/x-bzip":return"bz";case"application/x-bzip2":return"bz2";case"application/x-csh":return"csh";case"text/css":return"css";case"text/csv":return"csv";case"application/msword":return"doc";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"docx";case"application/vnd.ms-fontobject":return"eot";case"application/epub+zip":return"epub";case"audio/flac":return"flac";case"image/gif":return"gif";case"audio/gsm":return"gsm";case"image/heic":return"heic";case"image/heif":return"heif";case"text/html":return"html";case"image/x-icon":return"ico";case"text/calendar":return"ics";case"application/java-archive":return"jar";case"image/jpeg":return"jpg";case"text/javascript":return"js";case"application/json":return"json";case"application/ld+json":return"jsonld";case"audio/midi":return"mid";case"video/x-matroska":return"mkv";case"audio/mpeg":return"mp3";case"video/mp4":return"mp4";case"application/vnd.apple.installer+xml":return"mpkg";case"application/vnd.oasis.opendocument.presentation":return"odp";case"application/vnd.oasis.opendocument.spreadsheet":return"ods";case"application/vnd.oasis.opendocument.text":return"odt";case"audio/ogg":return"ogg";case"video/ogg":return"ogv";case"application/ogg":return"ogx";case"font/otf":return"otf";case"image/png":return"png";case"application/pdf":return"pdf";case"application/vnd.ms-powerpoint":return"ppt";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"pptx";case"application/x-rar-compressed":return"rar";case"application/rtf":return"rtf";case"application/x-sh":return"sh";case"image/svg+xml":return"svg";case"application/x-shockwave-flash":return"swf";case"application/x-tar":return"tar";case"image/tiff":return"tif";case"video/mp2t":return"ts";case"font/ttf":return"ttf";case"text/plain":return"txt";case"application/vnd.visio":return"vsd";case"text/vtt":return"vtt";case"audio/wav":return"wav";case"audio/webm":return"video/webm";case"image/webp":return"webp";case"font/woff":return"woff";case"font/woff2":return"woff2";case"application/xhtml+xml":return"xhtml";case"application/vnd.ms-excel":return"xls";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"xlsx";case"text/xml":return"xml";case"application/vnd.mozilla.xul+xml":return"xul";case"application/zip":return"zip";case"video/3gpp":return"3gp";case"video/3gpp2":return"3g2";case"application/x-7z-compressed":return"7z";default:return""}},hasKeys:g,capitalize:function(e,t){return false===t?e.charAt(0).toLowerCase()+e.substring(1):e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},capitalizeString:function(e){let t;const r=/\b([a-z].*?)\b/g;let n;while(n=r.exec(e)){if(void 0===t)t=e.split("");t[n.index]=n[1].charAt(0).toUpperCase()}return(null==t?void 0:t.join(""))||e},lowerCaseString:function(e){const t=[],r=/&#?[A-Za-z\d]+?;/g;let n;while(n=r.exec(e))t.push(n[0]);if(t.length){let n="";const i=e.split(r),a=i.length;for(let e=0;e<a;++e)n+=i[e].toLowerCase()+(t[e]||"");return n}return e.toLowerCase()},spliceString:d,convertUnderscore:function(e){const t=u[e];if(t)return t;let r=e[0].toLowerCase(),n=true;const i=e.length;let a=1;while(a<i){const t=e.charAt(a++),i=t===t.toUpperCase();if(n&&i&&"_"!==t)r+="_"+t.toLowerCase();else r+=t;n=!i}return u[e]=r,r},convertCamelCase:p,convertWord:function(e,t){let r="";const n=t?/[a-zA-Z\d]/:/\w/,i=e.length;let a=0;while(a<i){const t=e.charAt(a++);r+=n.test(t)?t:"_"}return r},convertInt:function(e){return parseInt(e)||0},convertFloat:b,convertAlpha:m,convertRoman:v,convertEnum:function(e,t,r){for(const n of Object.keys(t))if(e===t[n])return r[n];return""},randomUUID:function(e="-"){let t="";for(const r of[8,4,4,4,12]){if(""!==t)t+=e;for(let e=0;e<r;++e)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()))}return t},formatString:function(e,...t){const r=t.length;let n=0;while(n<r)e=e.replace(`{${n}}`,t[n++]);return e},delimitString:function(e,...t){const r=t.length,n=e.value;if(1===r&&!x(n))return t[0];const i=e.delimiter||", ",a=e.not||[],s=e.remove||false,l=""!==n?n.split(i):[];for(let e=0;e<r;++e){const r=t[e];if(""!==r){if(l.includes(a[e]))continue;const t=l.findIndex(e=>e===r);if(-1===t)l.push(r);else if(s)l.splice(t,1)}}if(e.sort)l.sort();return l.join(i)},splitEnclosing:w,hasBit:y,isNumber:k,isString:x,isArray:function(e){return Array.isArray(e)&&e.length>0},isObject:E,isPlainObject:S,isEqual:function e(t,r){if(t===r)return true;else if(Array.isArray(t)&&Array.isArray(r)){const e=t.length;if(e===r.length){let n=0;while(n<e)if(t[n]!==r[n++])return false;return true}}else if(S(t)&&S(r))if(Object.keys(t).length===Object.keys(r).length){for(const n in t){const i=t[n],a=r[n];if(i!==a){if(S(i)&&S(a)&&e(i,a))continue;return false}}return true}return false},includes:function(e,t,r=","){if(e)for(const n of e.split(r))if(n.trim()===t)return true;return false},cloneInstance:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)},cloneArray:A,cloneObject:C,resolvePath:R,trimBoth:function(e,t='"'){const r=new RegExp(`^(${t})(.*?)\\1$`).exec(e);return r?r[2]:e},trimString:function(e,t){return F(T(e,t),t)},trimStart:F,trimEnd:T,appendSeparator:function(e,t,r="/"){switch(e=e.trim(),t=t.trim(),r){case"\\":e=e.replace(/\//g,"\\"),t=t.replace(/\//g,"\\");break;case"/":e=e.replace(/\\/g,"/"),t=t.replace(/\\/g,"/");break}return e+(""!==e&&""!==t&&!e.endsWith(r)&&!t.startsWith(r)?r:"")+t},fromLastIndexOf:L,partitionLastIndexOf:function(e,...t){for(let r=0;r<t.length;++r){const n=e.lastIndexOf(t[r]);if(-1!==n)return[e.substring(0,n),e.substring(n+1)]}return["",e]},searchObject:function(e,t){const r=[];if("object"==typeof t)for(const n in t){const i=t[n];if(I(e[i]))r.push([i,e[i]])}else{const n=/^\*.+\*$/.test(t)?e=>e.includes(t.replace(/^\*/,"").replace(/\*$/,"")):t.startsWith("*")?e=>e.endsWith(t.replace(/^\*/,"")):t.endsWith("*")?e=>e.startsWith(t.replace(/\*$/,"")):e=>e===t;for(const t in e)if(n(t))r.push([t,e[t]])}return r},hasValue:I,withinRange:N,aboveRange:function(e,t,r=1){return e+r>t},belowRange:function(e,t,r=1){return e-r<t},assignEmptyProperty:function(e,t){for(const r in t)if(!Object.prototype.hasOwnProperty.call(e,r))e[r]=t[r];return e},assignEmptyValue:function(e,...t){const r=t.length;if(r>1){let n=e,i=0;do{const e=t[i],a=n[e];if(i===r-2){if(!I(a))n[e]=t[i+1];break}else if(x(e))if(null==a)n={},n[e]=n;else if(E(a))n=a;else break;else break}while(++i)}},findSet:P,sortNumber:function(e,t=true){return t?e.sort((e,t)=>e<t?-1:1):e.sort((e,t)=>e>t?-1:1)},safeNestedArray:function(e,t){let r=e[t];if(null==r)r=[],e[t]=r;return r},safeNestedMap:function(e,t){let r=e[t];if(null==r)r={},e[t]=r;return r},sortArray:function(e,t,...r){return e.sort((e,n)=>{for(let i=0;i<r.length;++i){let a=e,s=n;for(const e of r[i].split(".")){const t=a[e],r=s[e];if(void 0!==t&&void 0!==r)a=t,s=r;else if(void 0===t&&void 0===r)return 0;else if(void 0!==t)return-1;else return 1}if(a!==s)if(t)return a>s?1:-1;else return a<s?-1:1}return 0})},flatArray:function e(t,r=0,n=0){let i=[];const a=t.length;let s=0;while(s<a){const a=t[s++];if(n<r&&Array.isArray(a)){if(a.length)i=i.concat(e(a,r,n+1))}else if(null!=a)i.push(a)}return i},spliceArray:function(e,t,r,n){let i=0;for(let a=0;a<e.length;++a){const s=e[a];if(t(s,a,e)){if(r)r(s,a,e);if(e.splice(a--,1),++i===n)break}}return e},partitionArray:M,sameArray:B,joinArray:_,iterateArray:D,iterateReverseArray:function(e,t,r=0,n=1/0){r=Math.max(r,0);const i=Math.min(e.length,n);let a=i-1;while(a>=r){if(true===t(e[a],a--,e))return 1/0}return i},conditionArray:function(e,t,r){const n=e.length;for(let i=0;i<n;++i){const n=e[i];if(t(n,i,e)){if(false===r(n,i,e))break}}},replaceMap:O,plainMap:z});function W(e){const t=navigator.platform.toLowerCase();if("string"==typeof e)return t.includes(e.toLowerCase());else return y(e,2)&&t.includes("win")||y(e,4)&&/(mac|iphone|ipad|ipod)/.test(t)}function j(e){const t=navigator.userAgent;let r;if(t.includes("Safari")&&!t.includes("Chrome"))r=4;else if(t.includes("Firefox"))r=8;else if(t.includes("Edge"))r=16;else r=2;if("string"==typeof e){const t=e.toUpperCase();if(e=0,t.includes("CHROME"))e|=2;if(t.includes("SAFARI"))e|=4;if(t.includes("FIREFOX"))e|=8;if(t.includes("EDGE"))e|=16}return y(e,r)}function G(){return 96*window.devicePixelRatio}var V=Object.freeze({__proto__:null,isWinEdge:function(){return j(16)&&W(2)},isPlatform:W,isUserAgent:j,getDeviceDPI:G});const H={};function X(e){return Math.min.apply(null,e)}function U(e,t,r=5){return r+=Math.floor(e).toString().length,e.toPrecision(r)===t.toPrecision(r)}function Y(e,t=3){if("string"==typeof e)e=parseFloat(e);const r=Math.floor(e);if(e===r)return e.toString();else if(e>=0&&e<=1/Math.pow(10,t)||e<0&&e>=-1/Math.pow(10,t))return"0";else{if(0!==r)t+=r.toString().length;return Z(e.toPrecision(t))}}function q(e){if(e!==Math.floor(e)){const t=/^(-?\d+)\.(\d*?)(0{5,}|9{5,})\d*$/.exec(function(e){const t=/^(-?\d+\.\d+)e(-?\d+)$/.exec(e.toString());return t?parseInt(t[2])>0?Number.MAX_SAFE_INTEGER.toString():"0":e.toString()}(e));if(t){const r=t[2];if(""===r)return Math.round(e);const n=t[1];return parseFloat(e.toPrecision(("0"!==n?n.length:0)+r.length))}}return e}function Z(e){const t=/\.(\d*?)(0+)$/.exec(e);return t?e.substring(0,e.length-t[t[1]?2:0].length):e}function K(e){return e*Math.PI/180}function Q(e,t){const r=t.x-e.x,n=t.y-e.y;return 180*Math.atan2(n,r)/Math.PI}function J(e,t=0,r=1){if(e<t)e=t;else if(e>r)e=r;return e}function ee(e,t=11){let r=e=K(e);for(let n=3,i=0;n<=t;n+=2,++i)r+=Math.pow(e,n)/re(n)*(i%2==0?-1:1);return r}function te(e,t=10){e=K(e);let r=1;for(let n=2,i=0;n<=t;n+=2,++i)r+=Math.pow(e,n)/re(n)*(i%2==0?-1:1);return r}function re(e){let t=2,r=3;while(r<=e)t*=r++;return t}var ne=Object.freeze({__proto__:null,minArray:X,maxArray:function(e){return Math.max.apply(null,e)},equal:U,moreEqual:function(e,t,r=5){return e>t||U(e,t,r)},lessEqual:function(e,t,r=5){return e<t||U(e,t,r)},truncate:Y,truncateFraction:q,truncateTrailingZero:Z,truncateString:function(e,t=3){let r=H[t];if(!r)r=new RegExp(`(-?\\d+\\.\\d{${t}})(\\d)\\d*`,"g"),H[t]=r;else r.lastIndex=0;let n,i=e;while(n=r.exec(e)){let e=n[1];if(parseInt(n[2])>=5)e=q(parseFloat(e)+1/Math.pow(10,t)).toString();i=i.replace(n[0],Z(e))}return i},convertRadian:K,triangulate:function(e,t,r){const n=180-e-t;return[r/Math.sin(K(n))*Math.sin(K(e)),r/Math.sin(K(n))*Math.sin(K(t))]},absoluteAngle:Q,relativeAngle:function(e,t,r=90){let n=Q(e,t)+r;if(n<0)n+=360;return n},offsetAngleX:function(e,t){return t*Math.sin(K(e))},offsetAngleY:function(e,t){return t*Math.cos(K(e))*-1},clamp:J,multipleOf:function(e,t=0,r){const n=e.length;if(n>1){const i=X(e);if((null==r?void 0:r.length)===n){let i=0;while(i<n)t=Math.max(t,r[i]+e[i++])}else r=void 0,t=Math.max(t,i);let a=0;while(a<t)a+=i;const s=(null==r?void 0:r[0])||0;let l=false;while(!l){const t=s+a;let o=1;while(o<n){if(t%((r?r[o]:0)+e[o++])==0)l=true;else{l=false,a+=i;break}}}return s+a}return e[0]},sin:ee,cos:te,tan:function(e,t=11){return ee(e,t)/te(e,t)},factorial:re,hypotenuse:function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}});const ie=[{value:"#000000",key:"black",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0}},{value:"#696969",key:"dimgray",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#696969",key:"dimgrey",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#808080",key:"gray",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#808080",key:"grey",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#A9A9A9",key:"darkgray",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#A9A9A9",key:"darkgrey",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#C0C0C0",key:"silver",rgb:{r:192,g:192,b:192},hsl:{h:0,s:0,l:75}},{value:"#D3D3D3",key:"lightgray",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#D3D3D3",key:"lightgrey",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#DCDCDC",key:"gainsboro",rgb:{r:220,g:220,b:220},hsl:{h:0,s:0,l:86}},{value:"#F5F5F5",key:"whitesmoke",rgb:{r:245,g:245,b:245},hsl:{h:0,s:0,l:96}},{value:"#FFFFFF",key:"white",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100}},{value:"#BC8F8F",key:"rosybrown",rgb:{r:188,g:143,b:143},hsl:{h:0,s:25,l:65}},{value:"#CD5C5C",key:"indianred",rgb:{r:205,g:92,b:92},hsl:{h:0,s:53,l:58}},{value:"#A52A2A",key:"brown",rgb:{r:165,g:42,b:42},hsl:{h:0,s:59,l:41}},{value:"#B22222",key:"firebrick",rgb:{r:178,g:34,b:34},hsl:{h:0,s:68,l:42}},{value:"#F08080",key:"lightcoral",rgb:{r:240,g:128,b:128},hsl:{h:0,s:79,l:72}},{value:"#800000",key:"maroon",rgb:{r:128,g:0,b:0},hsl:{h:0,s:100,l:25}},{value:"#8B0000",key:"darkred",rgb:{r:139,g:0,b:0},hsl:{h:0,s:100,l:27}},{value:"#FF0000",key:"red",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50}},{value:"#FFFAFA",key:"snow",rgb:{r:255,g:250,b:250},hsl:{h:0,s:100,l:99}},{value:"#FFE4E1",key:"mistyrose",rgb:{r:255,g:228,b:225},hsl:{h:6,s:100,l:94}},{value:"#FA8072",key:"salmon",rgb:{r:250,g:128,b:114},hsl:{h:6,s:93,l:71}},{value:"#FF6347",key:"tomato",rgb:{r:255,g:99,b:71},hsl:{h:9,s:100,l:64}},{value:"#E9967A",key:"darksalmon",rgb:{r:233,g:150,b:122},hsl:{h:15,s:72,l:70}},{value:"#FF7F50",key:"coral",rgb:{r:255,g:127,b:80},hsl:{h:16,s:100,l:66}},{value:"#FF4500",key:"orangered",rgb:{r:255,g:69,b:0},hsl:{h:16,s:100,l:50}},{value:"#FFA07A",key:"lightsalmon",rgb:{r:255,g:160,b:122},hsl:{h:17,s:100,l:74}},{value:"#A0522D",key:"sienna",rgb:{r:160,g:82,b:45},hsl:{h:19,s:56,l:40}},{value:"#FFF5EE",key:"seashell",rgb:{r:255,g:245,b:238},hsl:{h:25,s:100,l:97}},{value:"#D2691E",key:"chocolate",rgb:{r:210,g:105,b:30},hsl:{h:25,s:75,l:47}},{value:"#8B4513",key:"saddlebrown",rgb:{r:139,g:69,b:19},hsl:{h:25,s:76,l:31}},{value:"#F4A460",key:"sandybrown",rgb:{r:244,g:164,b:96},hsl:{h:28,s:87,l:67}},{value:"#FFDAB9",key:"peachpuff",rgb:{r:255,g:218,b:185},hsl:{h:28,s:100,l:86}},{value:"#CD853F",key:"peru",rgb:{r:205,g:133,b:63},hsl:{h:30,s:59,l:53}},{value:"#FAF0E6",key:"linen",rgb:{r:250,g:240,b:230},hsl:{h:30,s:67,l:94}},{value:"#FFE4C4",key:"bisque",rgb:{r:255,g:228,b:196},hsl:{h:33,s:100,l:88}},{value:"#FF8C00",key:"darkorange",rgb:{r:255,g:140,b:0},hsl:{h:33,s:100,l:50}},{value:"#DEB887",key:"burlywood",rgb:{r:222,g:184,b:135},hsl:{h:34,s:57,l:70}},{value:"#FAEBD7",key:"antiquewhite",rgb:{r:250,g:235,b:215},hsl:{h:34,s:78,l:91}},{value:"#D2B48C",key:"tan",rgb:{r:210,g:180,b:140},hsl:{h:34,s:44,l:69}},{value:"#FFDEAD",key:"navajowhite",rgb:{r:255,g:222,b:173},hsl:{h:36,s:100,l:84}},{value:"#FFEBCD",key:"blanchedalmond",rgb:{r:255,g:235,b:205},hsl:{h:36,s:100,l:90}},{value:"#FFEFD5",key:"papayawhip",rgb:{r:255,g:239,b:213},hsl:{h:37,s:100,l:92}},{value:"#FFE4B5",key:"moccasin",rgb:{r:255,g:228,b:181},hsl:{h:38,s:100,l:85}},{value:"#FFA500",key:"orange",rgb:{r:255,g:165,b:0},hsl:{h:39,s:100,l:50}},{value:"#F5DEB3",key:"wheat",rgb:{r:245,g:222,b:179},hsl:{h:39,s:77,l:83}},{value:"#FDF5E6",key:"oldlace",rgb:{r:253,g:245,b:230},hsl:{h:39,s:85,l:95}},{value:"#FFFAF0",key:"floralwhite",rgb:{r:255,g:250,b:240},hsl:{h:40,s:100,l:97}},{value:"#B8860B",key:"darkgoldenrod",rgb:{r:184,g:134,b:11},hsl:{h:43,s:89,l:38}},{value:"#DAA520",key:"goldenrod",rgb:{r:218,g:165,b:32},hsl:{h:43,s:74,l:49}},{value:"#FFF8DC",key:"cornsilk",rgb:{r:255,g:248,b:220},hsl:{h:48,s:100,l:93}},{value:"#FFD700",key:"gold",rgb:{r:255,g:215,b:0},hsl:{h:51,s:100,l:50}},{value:"#FFFACD",key:"lemonchiffon",rgb:{r:255,g:250,b:205},hsl:{h:54,s:100,l:90}},{value:"#F0E68C",key:"khaki",rgb:{r:240,g:230,b:140},hsl:{h:54,s:77,l:75}},{value:"#EEE8AA",key:"palegoldenrod",rgb:{r:238,g:232,b:170},hsl:{h:55,s:67,l:80}},{value:"#BDB76B",key:"darkkhaki",rgb:{r:189,g:183,b:107},hsl:{h:56,s:38,l:58}},{value:"#F5F5DC",key:"beige",rgb:{r:245,g:245,b:220},hsl:{h:60,s:56,l:91}},{value:"#FAFAD2",key:"lightgoldenrodyellow",rgb:{r:250,g:250,b:210},hsl:{h:60,s:80,l:90}},{value:"#808000",key:"olive",rgb:{r:128,g:128,b:0},hsl:{h:60,s:100,l:25}},{value:"#FFFF00",key:"yellow",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50}},{value:"#FFFFE0",key:"lightyellow",rgb:{r:255,g:255,b:224},hsl:{h:60,s:100,l:94}},{value:"#FFFFF0",key:"ivory",rgb:{r:255,g:255,b:240},hsl:{h:60,s:100,l:97}},{value:"#6B8E23",key:"olivedrab",rgb:{r:107,g:142,b:35},hsl:{h:80,s:60,l:35}},{value:"#9ACD32",key:"yellowgreen",rgb:{r:154,g:205,b:50},hsl:{h:80,s:61,l:50}},{value:"#556B2F",key:"darkolivegreen",rgb:{r:85,g:107,b:47},hsl:{h:82,s:39,l:30}},{value:"#ADFF2F",key:"greenyellow",rgb:{r:173,g:255,b:47},hsl:{h:84,s:100,l:59}},{value:"#7FFF00",key:"chartreuse",rgb:{r:127,g:255,b:0},hsl:{h:90,s:100,l:50}},{value:"#7CFC00",key:"lawngreen",rgb:{r:124,g:252,b:0},hsl:{h:90,s:100,l:49}},{value:"#8FBC8F",key:"darkseagreen",rgb:{r:143,g:188,b:143},hsl:{h:120,s:25,l:65}},{value:"#228B22",key:"forestgreen",rgb:{r:34,g:139,b:34},hsl:{h:120,s:61,l:34}},{value:"#32CD32",key:"limegreen",rgb:{r:50,g:205,b:50},hsl:{h:120,s:61,l:50}},{value:"#90EE90",key:"lightgreen",rgb:{r:144,g:238,b:144},hsl:{h:120,s:73,l:75}},{value:"#98FB98",key:"palegreen",rgb:{r:152,g:251,b:152},hsl:{h:120,s:93,l:79}},{value:"#006400",key:"darkgreen",rgb:{r:0,g:100,b:0},hsl:{h:120,s:100,l:20}},{value:"#008000",key:"green",rgb:{r:0,g:128,b:0},hsl:{h:120,s:100,l:25}},{value:"#00FF00",key:"lime",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50}},{value:"#F0FFF0",key:"honeydew",rgb:{r:240,g:255,b:240},hsl:{h:120,s:100,l:97}},{value:"#2E8B57",key:"seagreen",rgb:{r:46,g:139,b:87},hsl:{h:146,s:50,l:36}},{value:"#3CB371",key:"mediumseagreen",rgb:{r:60,g:179,b:113},hsl:{h:147,s:50,l:47}},{value:"#00FF7F",key:"springgreen",rgb:{r:0,g:255,b:127},hsl:{h:150,s:100,l:50}},{value:"#F5FFFA",key:"mintcream",rgb:{r:245,g:255,b:250},hsl:{h:150,s:100,l:98}},{value:"#00FA9A",key:"mediumspringgreen",rgb:{r:0,g:250,b:154},hsl:{h:157,s:100,l:49}},{value:"#66CDAA",key:"mediumaquamarine",rgb:{r:102,g:205,b:170},hsl:{h:160,s:51,l:60}},{value:"#7FFFD4",key:"aquamarine",rgb:{r:127,g:255,b:212},hsl:{h:160,s:100,l:75}},{value:"#40E0D0",key:"turquoise",rgb:{r:64,g:224,b:208},hsl:{h:174,s:72,l:56}},{value:"#20B2AA",key:"lightseagreen",rgb:{r:32,g:178,b:170},hsl:{h:177,s:70,l:41}},{value:"#48D1CC",key:"mediumturquoise",rgb:{r:72,g:209,b:204},hsl:{h:178,s:60,l:55}},{value:"#2F4F4F",key:"darkslategray",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#2F4F4F",key:"darkslategrey",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#AFEEEE",key:"paleturquoise",rgb:{r:175,g:238,b:238},hsl:{h:180,s:65,l:81}},{value:"#008080",key:"teal",rgb:{r:0,g:128,b:128},hsl:{h:180,s:100,l:25}},{value:"#008B8B",key:"darkcyan",rgb:{r:0,g:139,b:139},hsl:{h:180,s:100,l:27}},{value:"#00FFFF",key:"aqua",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#00FFFF",key:"cyan",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#E0FFFF",key:"lightcyan",rgb:{r:224,g:255,b:255},hsl:{h:180,s:100,l:94}},{value:"#F0FFFF",key:"azure",rgb:{r:240,g:255,b:255},hsl:{h:180,s:100,l:97}},{value:"#00CED1",key:"darkturquoise",rgb:{r:0,g:206,b:209},hsl:{h:181,s:100,l:41}},{value:"#5F9EA0",key:"cadetblue",rgb:{r:95,g:158,b:160},hsl:{h:182,s:25,l:50}},{value:"#B0E0E6",key:"powderblue",rgb:{r:176,g:224,b:230},hsl:{h:187,s:52,l:80}},{value:"#ADD8E6",key:"lightblue",rgb:{r:173,g:216,b:230},hsl:{h:195,s:53,l:79}},{value:"#00BFFF",key:"deepskyblue",rgb:{r:0,g:191,b:255},hsl:{h:195,s:100,l:50}},{value:"#87CEEB",key:"skyblue",rgb:{r:135,g:206,b:235},hsl:{h:197,s:71,l:73}},{value:"#87CEFA",key:"lightskyblue",rgb:{r:135,g:206,b:250},hsl:{h:203,s:92,l:75}},{value:"#4682B4",key:"steelblue",rgb:{r:70,g:130,b:180},hsl:{h:207,s:44,l:49}},{value:"#F0F8FF",key:"aliceblue",rgb:{r:240,g:248,b:255},hsl:{h:208,s:100,l:97}},{value:"#1E90FF",key:"dodgerblue",rgb:{r:30,g:144,b:255},hsl:{h:210,s:100,l:56}},{value:"#708090",key:"slategray",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#708090",key:"slategrey",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#778899",key:"lightslategray",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#778899",key:"lightslategrey",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#B0C4DE",key:"lightsteelblue",rgb:{r:176,g:196,b:222},hsl:{h:214,s:41,l:78}},{value:"#6495ED",key:"cornflower",rgb:{r:100,g:149,b:237},hsl:{h:219,s:79,l:66}},{value:"#4169E1",key:"royalblue",rgb:{r:65,g:105,b:225},hsl:{h:225,s:73,l:57}},{value:"#191970",key:"midnightblue",rgb:{r:25,g:25,b:112},hsl:{h:240,s:64,l:27}},{value:"#E6E6FA",key:"lavender",rgb:{r:230,g:230,b:250},hsl:{h:240,s:67,l:94}},{value:"#000080",key:"navy",rgb:{r:0,g:0,b:128},hsl:{h:240,s:100,l:25}},{value:"#00008B",key:"darkblue",rgb:{r:0,g:0,b:139},hsl:{h:240,s:100,l:27}},{value:"#0000CD",key:"mediumblue",rgb:{r:0,g:0,b:205},hsl:{h:240,s:100,l:40}},{value:"#0000FF",key:"blue",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50}},{value:"#F8F8FF",key:"ghostwhite",rgb:{r:248,g:248,b:255},hsl:{h:240,s:100,l:99}},{value:"#6A5ACD",key:"slateblue",rgb:{r:106,g:90,b:205},hsl:{h:248,s:53,l:58}},{value:"#483D8B",key:"darkslateblue",rgb:{r:72,g:61,b:139},hsl:{h:248,s:39,l:39}},{value:"#7B68EE",key:"mediumslateblue",rgb:{r:123,g:104,b:238},hsl:{h:249,s:80,l:67}},{value:"#9370DB",key:"mediumpurple",rgb:{r:147,g:112,b:219},hsl:{h:260,s:60,l:65}},{value:"#8A2BE2",key:"blueviolet",rgb:{r:138,g:43,b:226},hsl:{h:271,s:76,l:53}},{value:"#4B0082",key:"indigo",rgb:{r:75,g:0,b:130},hsl:{h:275,s:100,l:25}},{value:"#9932CC",key:"darkorchid",rgb:{r:153,g:50,b:204},hsl:{h:280,s:61,l:50}},{value:"#9400D3",key:"darkviolet",rgb:{r:148,g:0,b:211},hsl:{h:282,s:100,l:41}},{value:"#BA55D3",key:"mediumorchid",rgb:{r:186,g:85,b:211},hsl:{h:288,s:59,l:58}},{value:"#D8BFD8",key:"thistle",rgb:{r:216,g:191,b:216},hsl:{h:300,s:24,l:80}},{value:"#DDA0DD",key:"plum",rgb:{r:221,g:160,b:221},hsl:{h:300,s:47,l:75}},{value:"#EE82EE",key:"violet",rgb:{r:238,g:130,b:238},hsl:{h:300,s:76,l:72}},{value:"#800080",key:"purple",rgb:{r:128,g:0,b:128},hsl:{h:300,s:100,l:25}},{value:"#8B008B",key:"darkmagenta",rgb:{r:139,g:0,b:139},hsl:{h:300,s:100,l:27}},{value:"#FF00FF",key:"fuchsia",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#FF00FF",key:"magenta",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#DA70D6",key:"orchid",rgb:{r:218,g:112,b:214},hsl:{h:302,s:59,l:65}},{value:"#C71585",key:"mediumvioletred",rgb:{r:199,g:21,b:133},hsl:{h:322,s:81,l:43}},{value:"#FF1493",key:"deeppink",rgb:{r:255,g:20,b:147},hsl:{h:328,s:100,l:54}},{value:"#FF69B4",key:"hotpink",rgb:{r:255,g:105,b:180},hsl:{h:330,s:100,l:71}},{value:"#FFF0F5",key:"lavenderblush",rgb:{r:255,g:240,b:245},hsl:{h:340,s:100,l:97}},{value:"#DB7093",key:"palevioletred",rgb:{r:219,g:112,b:147},hsl:{h:340,s:60,l:65}},{value:"#DC143C",key:"crimson",rgb:{r:220,g:20,b:60},hsl:{h:348,s:83,l:47}},{value:"#FFC0CB",key:"pink",rgb:{r:255,g:192,b:203},hsl:{h:350,s:100,l:88}},{value:"#FFB6C1",key:"lightpink",rgb:{r:255,g:182,b:193},hsl:{h:351,s:100,l:86}}],ae={};function se(e,t,r){if(e<0)e+=1;else if(e>1)e-=1;if(e<1/6)return t+6*(r-t)*e;else if(e<.5)return r;else if(e<2/3)return t+(r-t)*(2/3-e)*6;return t}const le=e=>parseFloat(e)/(e.includes("%")?100:1),oe=e=>255*J(e);function ce(e){e=e.toLowerCase();const t=ie.length;let r=0;while(r<t){const t=ie[r++];if(t.key===e)return t}}function ue(e,t=1,r=false){if(e&&("transparent"!==e||r)){let n=ae[e];if(n)return n;let i,s="";if(e.startsWith("#"))i=fe(e);else{let r=a.RGBA.exec(e);if(r)i={r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:r[4]?255*le(r[4]):oe(t)};else if(r=a.HSLA.exec(e),r)i=de({h:parseInt(r[1]),s:parseInt(r[2]),l:parseInt(r[3]),a:J(r[4]?le(r[4]):t)});else switch(e){case"transparent":i={r:0,g:0,b:0,a:0},s="transparent";break;case"initial":i={r:0,g:0,b:0,a:255},s="black";break;default:{const r=ce(e);if(r)i=Object.assign(Object.assign({},r.rgb),{a:oe(t)}),s=e;break}}}if(i){const{r:a,g:l,b:o,a:c}=i;if(c>0||r){const r=he(a,l,o),u=he(c),h="#"+(r+u);if(ae[h])return ae[h];if(t=c/255,n={key:s,value:e="#"+r,valueAsRGBA:h,valueAsARGB:"#"+(u+r),rgba:i,hsl:ge(i),opacity:t,transparent:0===t},1===t)ae[e]=n;return ae[h]=n,n}}}}function he(...e){let t="",r=0;while(r<e.length){const n=Math.max(0,Math.min(e[r++],255));t+=isNaN(n)?"00":"0123456789ABCDEF".charAt((n-n%16)/16)+"0123456789ABCDEF".charAt(n%16)}return t}function fe(e){if(e=e.replace(/#/g,"").trim(),a.HEX.test(e)){let t=255;switch(e.length){case 4:t=parseInt(e.charAt(3).repeat(2),16);case 3:e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2);break;case 5:e+=e.charAt(4);break;default:if(e.length>=8)t=parseInt(e.substring(6,8),16);e=e.substring(0,6);break}if(6===e.length)return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16),a:t}}}function ge(e){const t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n);let s=(a+i)/2;const l=s;let o;if(a===i)s=0,o=0;else{const e=a-i;switch(o=l>.5?e/(2-a-i):e/(a+i),a){case t:s=(r-n)/e+(r<n?6:0);break;case r:s=(n-t)/e+2;break;case n:s=(t-r)/e+4;break}s/=6}return{h:Math.round(360*s),s:Math.round(100*o),l:Math.round(100*l),a:e.a/255}}function de(e){let t,r,n,{h:i,s:a,l:s,a:l}=e;if(i/=360,a/=100,s/=100,0===a)t=s,r=s,n=s;else{const e=s<.5?s*(1+a):s+a-s*a,l=2*s-e;t=se(i+1/3,l,e),r=se(i,l,e),n=se(i-1/3,l,e)}return t=Math.round(255*Math.min(t,1)),r=Math.round(255*Math.min(r,1)),n=Math.round(255*Math.min(n,1)),l=Math.round(255*Math.min(l,1)),{r:t,g:r,b:n,a:l}}function pe(e){return`rgb${e.a<255?"a":""}(${e.r}, ${e.g}, ${e.b}`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}var be=Object.freeze({__proto__:null,findColorName:ce,findColorShade:function(e){const t=fe(e);if(t){const r=ge(t),n=[];let i=-1;const a=ie.length;let s=0;while(s<a){const t=ie[s++];if(t.value===e)return t;else if(-1!==i){if(i===t.hsl.h)n.push(t)}else if(r.h<=t.hsl.h)n.push(t),i=t.hsl.h}const l=n.length;if(1===l)return n[0];else if(l>1){const e=r.l+r.s;let t=1/0,i=-1;for(s=0;s<l;++s){const{l:r,s:a}=n[s].hsl,l=Math.abs(e-(r+a));if(l<t)t=l,i=s}return n[i]}else return ie[ie.length-1]}},parseColor:ue,reduceRGBA:function(e,t,r){if(r){const e=ae[r+="_"+t];if(e)return e}let{r:n,g:i,b:a}=e;if(0===n&&0===i&&0===a)if(n=255,i=255,a=255,t>0)t*=-1;const s=t<0?0:255;t=Math.abs(t);const l=ue(pe({r:(n+Math.round((s-n)*t))%255,g:(i+Math.round((s-i)*t))%255,b:(a+Math.round((s-a)*t))%255,a:e.a}));if(r)ae[r]=l;return l},getHexCode:he,convertHex:function(e){return"#"+he(e.r,e.g,e.b)+(e.a<255?he(e.a):"")},parseRGBA:fe,convertHSLA:ge,convertRGBA:de,formatRGBA:pe,formatHSLA:function(e){return`hsl${e.a<255?"a":""}(${e.h}, ${e.s}%, ${e.l}%`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}});const me=`(\\(\\s*(?:orientation:\\s*(?:portrait|landscape)|(?:max|min)-width:\\s*${n.LENGTH_PERCENTAGE})\\s*\\))`,ve=new RegExp(`^${n.LENGTH}$`),we=new RegExp(`^${n.PERCENT}$`),ye=new RegExp(`^${n.LENGTH_PERCENTAGE}$`),ke=new RegExp(`^${n.CSS_ANGLE}$`),xe=new RegExp(`^${n.CSS_TIME}$`),Ee=new RegExp(`^${n.CSS_CALC}$`),Se=new RegExp(n.CSS_CALC),Ae=new RegExp(`\\s*(?:(\\(\\s*)?${me}|(\\(\\s*))?\\s*(and|or|not)?\\s*(?:${me}(\\s*\\))?)?\\s*(.+)`),Ce=/\s+/,Re=/\s*,\s*/,Fe=/\s*\/\s*/;function Te(e,t,r){switch(e){case"<=":return t<=r;case"<":return t<r;case">=":return t>=r;case">":return t>r;default:return t===r}}function Le(e,t,r){const n=[];for(const e of O(w(t.trim(),"calc"),e=>e.trim()))if(e.includes(" ")&&!bt(e))n.push(...e.split(Ce));else n.push(e);const i=n.length;switch(i){case 1:case 2:return at(e,n.join(" "),{dimension:["width","height"],boundingBox:r,parent:false});case 3:case 4:{let t=0,a=0;for(let s=0;s<i;++s){const l=n[s];switch(l){case"top":case"bottom":if(2==++a)return"";break;case"center":if(4===i)return"";break;case"left":case"right":if(2==++t)return"";break;default:{let t;switch(n[s-1]){case"top":case"bottom":t="height";break;case"left":case"right":t="width";break;default:return""}if(bt(l)){const i=Xe(st(e,l,{dimension:t,boundingBox:r}));if(""!==i)n[s]=i;else return""}break}}}return n.join(" ")}}return""}function Ie(e,t){const r=w(t),n=r.length;if(n>1){for(let t=1;t<n;++t){const n=r[t].trim();if(kt(n)){const i=r[t-1].trim();if(He(i)){const a=Ye(n).split(Re),s=a.length;if(s>=3){const n=i.startsWith("hsl");for(let t=0;t<s;++t){const r=a[t];if(bt(r))if(n&&(1===t||2===t)){const n=st(e,r,{unitType:4,supportPercent:true});if(!isNaN(n))a[t]=J(n,0,100)+"%";else return""}else if(3===t){const n=r.includes("%");let i=st(e,r,n?{unitType:4}:{unitType:64});if(!isNaN(i)){if(n)i/=100;a[t]=J(i).toString()}else return""}else{const n=st(e,r,{unitType:64,supportPercent:false});if(!isNaN(n))a[t]=J(n,0,255).toString();else return""}}r[t]=`(${a.join(", ")})`;continue}}return""}}return r.join("")}return t}function Ne(e,t,r,n,i,a="width"){const s=w(t,"calc"),l=s.length;for(let t=0;t<l;++t){const l=s[t];if(bt(l)){const o=ve.test(l),c=st(e,l,o?{dimension:a,boundingBox:i,min:0,parent:false}:{unitType:r,min:n,supportPercent:false});if(!isNaN(c))s[t]=c+(o?"px":"");else return""}}return s.join("").trim()}function Pe(e){switch(e){case"vertical-lr":return 1;case"vertical-rl":return 2;default:return 0}}function Me(e){switch(e){case"none":case"initial":case"hidden":return false;default:return true}}function Be(e){return(Me(e.getPropertyValue("border-left-style"))?parseFloat(e.getPropertyValue("border-left-width")):0)+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))+(Me(e.getPropertyValue("border-right-style"))?parseFloat(e.getPropertyValue("border-right-width")):0)}function _e(e){return(Me(e.getPropertyValue("border-top-style"))?parseFloat(e.getPropertyValue("border-top-width")):0)+parseFloat(e.getPropertyValue("padding-top"))+parseFloat(e.getPropertyValue("padding-bottom"))+(Me(e.getPropertyValue("border-bottom-style"))?parseFloat(e.getPropertyValue("border-bottom-width")):0)}function De(e){switch(e){case"absolute":case"fixed":return true;default:return false}}function Oe(e=["left","top"]){return{static:true,top:0,left:0,right:0,bottom:0,topAsPercent:0,leftAsPercent:0,rightAsPercent:0,bottomAsPercent:0,horizontal:"left",vertical:"top",orientation:e}}function ze(e,t){if(e)switch(t){case"+":case"-":if(k(e))return false;break;case"*":case"/":if(!k(e))return false;break}return true}function $e(e,t){if(e)switch(t){case"+":case"-":return false}return true}const We=e=>(null==e?void 0:e.width)||window.innerWidth,je=e=>(null==e?void 0:e.height)||window.innerHeight,Ge=(e,t,r,n)=>yt(e)?Math.round(b(e)/100*t):ut(e,r,n),Ve=(e,t,r,n)=>yt(e)?parseFloat(e)/100:ut(e,r,n)/t,He=e=>/(rgb|hsl)a?/.test(e),Xe=e=>!isNaN(e)?e+"px":"",Ue=e=>!isNaN(e)?e.toString():"",Ye=e=>e.substring(1,e.length-1),qe=e=>/^\*(\s+\*){0,2}$/.test(e)?"*":e.replace(/^(\*\s+){1,2}/,"");function Ze(e,t=""){if(e){const r=e["__style"+t];if(r)return r;if(Qe(e)){const r=getComputedStyle(e,t);return e["__style"+t]=r,r}return{position:"static",display:"inline"}}return{position:"static",display:"none"}}function Ke(e){if("#"===e.nodeName.charAt(0))e=e.parentElement||document.body;return parseFloat(Ze(e).getPropertyValue("font-size"))}function Qe(e){return"#"!==e.nodeName.charAt(0)&&(e instanceof HTMLElement||e instanceof SVGElement)}function Je(e,t){switch(e){case"inlineSize":return 0===Pe(t)?"width":"height";case"blockSize":return 0===Pe(t)?"height":"width";case"maxInlineSize":return 0===Pe(t)?"maxWidth":"maxHeight";case"maxBlockSize":return 0===Pe(t)?"maxHeight":"maxWidth";case"minInlineSize":return 0===Pe(t)?"minWidth":"minHeight";case"minBlockSize":return 0===Pe(t)?"minHeight":"minWidth";case"borderInlineStart":return 0===Pe(t)?"borderLeft":"borderTop";case"borderInlineEnd":return 0===Pe(t)?"borderRight":"borderBottom";case"borderInlineStartWidth":return 0===Pe(t)?"borderLeftWidth":"borderTopWidth";case"borderInlineEndWidth":return 0===Pe(t)?"borderRightWidth":"borderBottomWidth";case"insetInlineStart":return 0===Pe(t)?"left":"top";case"insetInlineEnd":return 0===Pe(t)?"right":"bottom";case"marginInlineStart":return 0===Pe(t)?"marginLeft":"marginTop";case"marginInlineEnd":return 0===Pe(t)?"marginRight":"marginBottom";case"paddingInlineStart":return 0===Pe(t)?"paddingLeft":"paddingTop";case"paddingInlineEnd":return 0===Pe(t)?"paddingRight":"paddingBottom";case"scrollMarginInlineStart":return 0===Pe(t)?"scrollMarginLeft":"scrollMarginTop";case"scrollMarginInlineEnd":return 0===Pe(t)?"scrollMarginRight":"scrollMarginBottom";case"scrollPaddingInlineStart":return 0===Pe(t)?"scrollPaddingLeft":"scrollPaddingTop";case"scrollPaddingInlineEnd":return 0===Pe(t)?"scrollPaddingRight":"scrollPaddingBottom";case"borderBlockStart":switch(Pe(t)){case 0:return"borderTop";case 1:return"borderLeft";case 2:return"borderRight"}case"borderBlockEnd":switch(Pe(t)){case 0:return"borderBottom";case 1:return"borderRight";case 2:return"borderLeft"}case"borderBlockStartWidth":switch(Pe(t)){case 0:return"borderTopWidth";case 1:return"borderLeftWidth";case 2:return"borderRightWidth"}case"borderBlockEndWidth":switch(Pe(t)){case 0:return"borderBottomWidth";case 1:return"borderRightWidth";case 2:return"borderLeftWidth"}case"insetBlockStart":switch(Pe(t)){case 0:return"top";case 1:return"left";case 2:return"right"}case"insetBlockEnd":switch(Pe(t)){case 0:return"bottom";case 1:return"right";case 2:return"left"}case"marginBlockStart":switch(Pe(t)){case 0:return"marginTop";case 1:return"marginLeft";case 2:return"marginRight"}case"marginBlockEnd":switch(Pe(t)){case 0:return"marginBottom";case 1:return"marginRight";case 2:return"marginLeft"}case"paddingBlockStart":switch(Pe(t)){case 0:return"paddingTop";case 1:return"paddingLeft";case 2:return"paddingRight"}case"paddingBlockEnd":switch(Pe(t)){case 0:return"paddingBottom";case 1:return"paddingRight";case 2:return"paddingLeft"}case"scrollMarginBlockStart":switch(Pe(t)){case 0:return"scrollMarginTop";case 1:return"scrollMarginLeft";case 2:return"scrollMarginRight"}case"scrollMarginBlockEnd":switch(Pe(t)){case 0:return"scrollMarginBottom";case 1:return"scrollMarginRight";case 2:return"scrollMarginLeft"}case"scrollPaddingBlockStart":switch(Pe(t)){case 0:return"scrollPaddingTop";case 1:return"scrollPaddingLeft";case 2:return"scrollPaddingRight"}case"scrollPaddingBlockEnd":switch(Pe(t)){case 0:return"scrollPaddingBottom";case 1:return"scrollPaddingRight";case 2:return"scrollPaddingLeft"}}return""}function et(e,t,r,n){switch(t){case"left":case"right":case"textIndent":return Xe(st(e,r,{dimension:"width",boundingBox:n}));case"columnWidth":case"marginBottom":case"marginLeft":case"marginRight":case"marginTop":case"maxWidth":case"minWidth":case"paddingBottom":case"paddingLeft":case"paddingRight":case"paddingTop":case"scrollMarginBottom":case"scrollMarginLeft":case"scrollMarginRight":case"scrollMarginTop":case"scrollPaddingBottom":case"scrollPaddingLeft":case"scrollPaddingRight":case"scrollPaddingTop":case"width":return Xe(st(e,r,{dimension:"width",boundingBox:n,min:0}));case"columnGap":case"gridColumnGap":case"shapeMargin":return Xe(st(e,r,{dimension:"width",boundingBox:n,min:0,parent:false}));case"bottom":case"top":case"verticalAlign":return Xe(st(e,r,{dimension:"height",boundingBox:n}));case"height":case"maxHeight":case"minHeight":return Xe(st(e,r,{dimension:"height",boundingBox:n,min:0}));case"gridRowGap":case"rowGap":return Xe(st(e,r,{dimension:"height",boundingBox:n,min:0,parent:false}));case"flexBasis":{const t=e.parentElement;return Xe(st(e,r,{dimension:!!t&&Ze(t).flexDirection.includes("column")?"height":"width",boundingBox:n,min:0}))}case"borderBottomWidth":case"borderLeftWidth":case"borderRightWidth":case"borderTopWidth":case"columnRuleWidth":case"letterSpacing":case"outlineOffset":case"outlineWidth":case"perspective":case"wordSpacing":return Xe(st(e,r,{min:0,supportPercent:false}));case"offsetDistance":{let t=0;if(r.includes("%")){const r=Ze(e).getPropertyValue("offset-path");if("none"!==r){const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",r),t=e.getTotalLength()}}return Xe(st(e,r,{boundingSize:t}))}case"lineHeight":return Xe(st(e,r,{boundingSize:Ke(e),min:0}));case"fontSize":return Xe(st(e,r,{boundingSize:Ke(e.parentElement||document.body),min:0}));case"margin":return at(e,r,{dimension:"width",boundingBox:n});case"borderBottomLeftRadius":case"borderBottomRightRadius":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderRadius":case"padding":case"scrollMargin":case"scrollMarginBlock":case"scrollMarginInline":case"scrollPadding":case"scrollPaddingBlock":case"scrollPaddingInline":return at(e,r,{dimension:"width",boundingBox:n,min:0});case"objectPosition":return at(e,r,{dimension:["width","height"],boundingBox:n});case"gap":case"gridGap":case"perspectiveOrigin":return at(e,r,{dimension:["width","height"],boundingBox:n,min:"perspectiveOrigin"===t?void 0:0,parent:false});case"borderImageOutset":case"borderImageWidth":return at(e,r,{dimension:["height","width","height","width"],boundingBox:n,min:0,parent:false});case"borderWidth":case"borderSpacing":return at(e,r,{min:0,supportPercent:false});case"gridAutoColumns":case"gridTemplateColumns":return Ne(e,r,32,1,n);case"gridAutoRows":case"gridTemplateRows":return Ne(e,r,32,1,n,"height");case"zIndex":return Ue(st(e,r,{unitType:32}));case"tabSize":return Ue(st(e,r,{unitType:32,min:0}));case"columnCount":case"fontWeight":case"widows":return Ue(st(e,r,{unitType:32,min:1}));case"gridRow":case"gridRowEnd":case"gridRowStart":case"gridColumn":case"gridColumnEnd":case"gridColumnStart":case"counterIncrement":case"counterReset":return at(e,r,{unitType:32});case"gridArea":return at(e,r,{unitType:32,min:1});case"flexGrow":case"flexShrink":return Ue(st(e,r,{unitType:64,min:0}));case"animationIterationCount":case"fontSizeAdjust":return Ue(st(e,r,{unitType:64,min:0,supportPercent:false}));case"opacity":case"shapeImageThreshold":{const t=r.includes("%"),n=st(e,r,{unitType:t?4:64});return!isNaN(n)?J(n/(t?100:1)).toString():""}case"fontStretch":return at(e,r,{unitType:4,min:0,supportPercent:true});case"fontStyle":case"offsetRotate":return at(e,r,{unitType:16,supportPercent:false});case"offsetAnchor":case"transformOrigin":return Le(e,r,n);case"transform":{const t=w(r=r.trim()),i=t.length;if(i>1){for(let r=1;r<i;++r){let i=t[r];if(kt(i)){let a;switch(i=Ye(i),t[r-1].trim()){case"matrix":case"matrix3d":a=at(e,i,{unitType:64,supportPercent:false});break;case"scaleX":case"scaleY":case"scaleZ":{const t=st(e,i,{unitType:64,min:0,supportPercent:false});if(!isNaN(t))a=t.toString();break}case"scale":case"scale3d":a=at(e,i,{unitType:64,min:0,supportPercent:false});break;case"translateX":a=Xe(st(e,i,{dimension:"width",boundingBox:n,parent:true}));break;case"translateY":a=Xe(st(e,i,{dimension:"height",boundingBox:n,parent:true}));break;case"translateZ":case"perspective":a=Xe(st(e,i,{supportPercent:false}));break;case"translate":case"translate3d":a=at(e,i,{dimension:["width","height"],boundingBox:n,parent:true});break;case"skew":case"rotate":a=at(e,i,{unitType:16,supportPercent:false});break;case"skewX":case"skewY":case"rotateX":case"rotateY":case"rotateZ":{const t=st(e,i,{unitType:16,supportPercent:false});if(!isNaN(t))a=t+"deg";break}case"rotate3d":{const t=i.split(Re),r=t.length;if(3===r||4===r){a="";for(let n=0;n<r;++n){let r=t[n];if(bt(r)){const t=st(e,r,{unitType:3===n?16:64,supportPercent:false});if(!isNaN(t))r=t+(3===n?"deg":"");else return""}a+=(""!==a?", ":"")+r}}break}}if(a)t[r]=`(${a})`;else return""}}return t.join("")}return r}case"backgroundImage":case"borderImageSource":{const t=w(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r];if(He(n)&&kt(n)){const i=w(Ye(n)),a=i.length;for(let t=1;t<a;++t)if(kt(i[t])){const r=i[t-1];if(He(r)){const n=r.split(Ce).pop(),a=Ie(e,n+i[t]);if(""!==a){i[t]=a.replace(n,"");continue}}return""}t[r]=`(${i.join("")})`}}return t.join("")}return r}case"borderColor":case"scrollbarColor":{const t=w(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1];if(He(n)&&kt(t[r])){const i=n.split(Ce).pop(),a=Ie(e,i+t[r]);if(""!==a)t[r]=a,t[r-1]=n.substring(0,n.length-i.length);else return""}}return t.join("")}return r}case"boxShadow":case"textShadow":return at(e,et(e,"borderColor",r),{supportPercent:false,errorString:/-?[\d.]+[a-z]*\s+-?[\d.]+[a-z]*(\s+-[\d.]+[a-z]*)/});case"backgroundSize":case"animation":case"animationDelay":case"animationDuration":case"transition":case"transitionDelay":case"transitionDuration":return at(e,r,{unitType:8,min:0,precision:0,separator:","});case"fontFeatureSettings":case"fontVariantCaps":case"fontVariantEastAsian":case"fontVariantLigatures":case"fontVariantNumeric":case"fontVariationSettings":return at(e,r,{unitType:32,min:0,separator:","});case"columns":return Ne(e,r,32,1,n);case"borderImageSlice":case"flex":case"font":return Ne(e,r,64,0,n);case"backgroundPosition":{const t=[];for(const i of r.split(Re)){const r=Le(e,i,n);if(""!==r)t.push(r);else return""}return t.join(", ")}case"border":case"borderBottom":case"borderLeft":case"borderRight":case"borderTop":case"columnRule":case"outline":{const t=w(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1],i=n.split(Ce).pop();let a;if("calc"===i)a=Xe(st(e,i+t[r],{min:0,supportPercent:false}));else if(He(i))a=Ie(e,i+t[r]);else continue;if(""!==a)t[r]=a,t[r-1]=n.substring(0,n.length-i.length);else return""}return t.join("")}return r}case"animationTimingFunction":case"transitionTimingFunction":{const t=w(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){let n=t[r];if(kt(n)){const i=t[r-1].trim();let a;if(n=Ye(n),i.endsWith("cubic-bezier")){const t=n.split(Re),r=t.length;if(4===r){a="";const n={unitType:64,supportPercent:false};for(let i=0;i<r;++i){let r=t[i];if(bt(r)){if(i%2==0)n.min=0,n.max=1;else n.min=void 0,n.max=void 0;const t=st(e,r,n);if(!isNaN(t))r=t.toString();else return""}a+=(""!==a?", ":"")+r}}}else if(i.endsWith("steps"))a=at(e,n,{unitType:32,min:1});if(a)t[r]=`(${a})`;else return""}}return t.join("")}return r}case"clip":return De(Ze(e).position)?at(e,r,{supportPercent:false}):"";case"clipPath":case"offsetPath":case"shapeOutside":{const t=w(r=r.trim());if(2===t.length){const i=t[0].trim();switch(i){case"url":case"path":return!kt(t[1])?r:"";case"linear-gradient":case"repeating-linear-gradient":case"radial-gradient":case"repeating-radial-gradient":case"conic-gradient":return et(e,"backgroundImage",r,n)}let a=t[1].trim();switch(a=Ye(a),i){case"circle":case"ellipse":{const t=[];let[r,s]=a.split(/\s+at\s+/);if(kt(r)){const a={boundingBox:n,min:0,parent:true};if("circle"===i){if(r.includes("%")){const{width:t,height:r}=n||lt(e.parentElement);if(t>0&&r>0)a.boundingSize=Math.min(t,r);else return""}}else a.dimension=["width","height"];if(r=at(e,r,a),""!==r)t.push(r);else return""}else if(r)t.push(r);if(kt(s))if(s=at(e,s,{dimension:["width","height"],boundingBox:n,parent:true}),""!==s)t.push(s);else return"";else if(s)t.push(s);a=t.join(" at ");break}case"inset":a=at(e,a,{dimension:["height","width","height","width","width"],boundingBox:n,checkUnit:true});break;case"polygon":{const t=[];for(let r of a.split(Re))if(kt(r))if(r=at(e,r,{dimension:["width","height"],boundingBox:n,parent:true}),""!==r)t.push(r);else return"";else t.push(r);a=t.join(", ");break}}if(""!==a)return`${i}(${a})`}return r}case"grid":{let[t,i]=r.trim().split(Fe);if(kt(t)){const r=et(e,"gridTemplateRows",t,n);if(""!==r)t=r;else return""}if(kt(i)){const t=et(e,"gridTemplateColumns",i,n);if(""!==t)i=t;else return""}return t+(i?" / "+i:"")}case"offset":{let[t,i]=r.trim().split(Fe);if(kt(t)){const r=w(t.trim()),i=r.length;if(i>=2){if(t=r[0]+r[1],kt(t))if(t=et(e,"offsetPath",t,n),""===t)return"";if(i>2){let i=r.slice(2).join("");if(kt(t))if(i=et(e,ve.test(i)?"offsetDistance":"offsetRotate",i,n),""===i)return"";t+=" "+i}}else return""}if(kt(i)){const t=et(e,"offsetAnchor",i,n);if(""!==t)i=t;else return""}return t+(i?" / "+i:"")}case"borderImage":{const t=/([a-z-]+\(.+?\))\s*([^/]+)(?:\s*\/\s*)?(.+)?/.exec(r.trim());if(t){let r=t[2].trim();if(kt(r))r=et(e,"borderImageSlice",r,n);if(""!==r){let i,a;if(t[3]){if([i,a]=t[3].trim().split(Fe),kt(i)){const t=et(e,"borderImageWidth",i,n);if(""!==t)i=t;else return""}if(kt(a)){const t=et(e,"borderImageOutset",a,n);if(""!==t)a=t;else return""}}return t[1]+" "+r+(i?" / "+i:"")+(a?" / "+a:"")}}return""}case"background":case"gridTemplate":return Ze(e)[t];default:if(t.endsWith("Color"))return Ie(e,r.trim());else{const i=Je(t,Ze(e).writingMode);if(""!==i)return et(e,i,r,n)}}return""}function tt(e){const t={},r=e.length;let n=0;while(n<r){const r=e[n++],i=/((?:\d+%\s*,?\s*)+|from|to)\s*{\s*(.+?)\s*}/.exec(r.cssText);if(i){const e=(r.keyText||i[1]).trim().split(Re),n=e.length;let a=0;while(a<n){let r=e[a++];switch(r){case"from":r="0%";break;case"to":r="100%";break}const n={};for(const e of i[2].split(/\s*;\s*/)){const t=e.indexOf(":");if(-1!==t){const r=e.substring(t+1).trim();if(""!==r){n[e.substring(0,t).trim()]=r}}}t[r]=n}}}return t}function rt(e,t){switch(e.trim()){case"all":case"screen":case"only all":case"only screen":return true;default:{const r=/(?:(not|only)?\s*(?:all|screen)\s+and\s+)?((?:\([^)]+\)(?:\s+and\s+)?)+),?\s*/g;let n;while(n=r.exec(e)){const e=/\(([a-z-]+)\s*(:|<?=?|=?>?)?\s*([\w.%]+)?\)(?:\s+and\s+)?/g,r="not"===n[1];let i,a=false;while(i=e.exec(n[2])){const e=i[1];let r=i[2];const n=i[3];if(e.startsWith("min"))r=">=";else if(e.startsWith("max"))r="<=";switch(e){case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":if(n){const[e,t]=O(n.split("/"),e=>parseInt(e));a=Te(r,window.innerWidth/window.innerHeight,e/t)}else a=false;break;case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":a=Te(r,e.endsWith("width")?window.innerWidth:window.innerHeight,ut(n,t));break;case"orientation":a="portrait"===n&&window.innerWidth<=window.innerHeight||"landscape"===n&&window.innerWidth>window.innerHeight;break;case"resolution":case"min-resolution":case"max-resolution":if(n){let e=parseFloat(n);if(n.endsWith("dpcm"))e*=2.54;else if(n.endsWith("dppx"))e*=96;a=Te(r,G(),e)}else a=false;break;case"grid":a="0"===n;break;case"color":a=void 0===n||parseInt(n)>0;break;case"min-color":a=parseInt(n)<=screen.colorDepth/3;break;case"max-color":a=parseInt(n)>=screen.colorDepth/3;break;case"color-index":case"min-color-index":case"monochrome":case"min-monochrome":a="0"===n;break;case"max-color-index":case"max-monochrome":a=parseInt(n)>=0;break;default:a=false;break}if(!a)break}if(!r&&a||r&&!a)return true}}}return false}function nt(e,t,r,...n){let i="",a=e.parentElement;while(a&&!n.includes(a.tagName)){if(i=Ze(a)[t],"inherit"===i||(null==r?void 0:r.test(i)))i="";else if(i)break;a=a.parentElement}return i}function it(e,t){const r=Ze(e),n=/var\((--[A-Za-z\d-]+)\s*(?!,\s*var\()(?:,\s*([a-z-]+\([^)]+\)|[^)]+))?\)/;let i;while(i=n.exec(t)){let e=r.getPropertyValue(i[1]).trim();const n=i[2];if(n&&(""===e||pt(n,true)&&!pt(e,true)||k(n)&&!k(e)||ue(n)&&!ue(e)))e=n;if(e)t=t.replace(i[0],e).trim();else return""}return t}function at(e,t,r){let n,i,a,s,l,o;const c={};if(r){if(Object.assign(c,r),Array.isArray(r.orderedSize))n=r.orderedSize;if(Array.isArray(r.dimension))i=r.dimension;({separator:a,unitType:s,checkUnit:l,errorString:o}=r)}let u;switch(t=t.trim(),s){case 32:case 64:u="";break;case 4:u="%";break;case 8:u="ms";break;case 16:u="deg";break;default:u="px",s=2;break}const h=[];for(let r of a?t.split(a):[t])if(r=r.trim(),""!==r){const t=w(r,"calc"),a=t.length;if(a){let r="",o=0,f=0;while(o<a){let a=t[o++];if(bt(a)){if(void 0!==(null==n?void 0:n[f]))c.boundingSize=n[f++];else if(i)c.dimension=i[f++],c.boundingSize=void 0;else if(n)c.boundingSize=void 0;const t=st(e,a,c);if(!isNaN(t))r+=t+u;else return""}else if(r+=a,i)if(a=a.trim(),""!==a&&(!l||2===s&&(pt(a,true)||"auto"===a)))++f}h.push(r)}else return""}if(t=1===h.length?h[0]:h.join(" "===a?" ":a?a+" ":""),o){let e;while(e=o.exec(t)){if(void 0===e[1])return"";const r=e[0];let n=r;let i=e.length-1;while(i>=1)n=n.replace(new RegExp(e[i--]+"$"),"");if(n===r)return"";else t=t.replace(r,n)}}return t}function st(e,t,r={}){const n=it(e,t);if(n){const{precision:i,unitType:a}=r;if(t.includes("%")){if(false===r.supportPercent||32===a)return NaN;else if(void 0===r.boundingSize){const{dimension:t,boundingBox:n}=r;if(t)if(n)r.boundingSize=n[t];else{let n,i=0;if(false===r.parent)n=e;else if(n=e.parentElement,n instanceof HTMLElement){let r;if(De(Ze(e).position))do{if(r=Ze(n),n===document.body)break;switch(r.position){case"static":case"initial":case"unset":n=n.parentElement;continue}break}while(n);else r=Ze(n);if(r)i="width"===t?Be(r):_e(r)}else if(e instanceof SVGElement){if(true!==r.parent)n=e}else n=null;if(n)r.boundingSize=Math.max(0,n.getBoundingClientRect()[t]-i)}}}else if(r.supportPercent)return NaN;if((!a||2===a)&&/\d(em|ch)/.test(t)&&void 0===r.fontSize)r.fontSize=Ke(e);let s=ct(n,r);if(void 0!==i)s=0===i?Math.floor(s):parseFloat(Y(s,i));else if(r.roundValue)s=Math.round(s);return s}return NaN}function lt(e){let t=0,r=0;if(e){const n=Ze(e);({width:t,height:r}=e.getBoundingClientRect()),t=Math.max(0,t-Be(n)),r=Math.max(0,r-_e(n))}return{width:t,height:r}}function ot(e){const t=a.URL.exec(e);return t?t[1]||t[2]:""}function ct(e,t){if(""===(e=e.trim()))return NaN;let r=e.length;if("("!==e.charAt(0)||")"!==e.charAt(r-1))e=`(${e})`,r+=2;let n=0;const i=[],a=[];for(let t=0;t<r;++t)switch(e.charAt(t)){case"(":++n,i[t]=true;break;case")":a.push(t);break}if(n===a.length){const r=[];let n=0;while(true)for(let s=0;s<a.length;++s){let l=a[s]-1,o=false;for(;l>=0;l--)if(i[l]){o=true,i[l]=false;break}else if(a.includes(l))break;if(o){let i,o,c,u,h,f,g;if(t)({boundingSize:i,min:o,max:c,unitType:u,fontSize:h}=t);let d=false;const p=[],b=[],m=e.substring(l+1,a[s]).split(/\s+([+-]\s+|\s*[*/])\s*/),v=m.length;let w=0;while(w<v){const e=m[w++].trim();switch(e){case"+":case"-":case"*":case"/":b.push(e),g=e;break;default:{const t=/\s*{(\d+)}\s*/.exec(e);if(t){switch(u){case 32:case 64:break;default:if(!ze(f,g))return NaN;break}const e=r[parseInt(t[1])];p.push(e),f=e.toString(),d=true}else{switch(u){case 4:if(k(e)){if(!$e(f,g))return NaN;p.push(parseFloat(e))}else if(yt(e)){if(!ze(f,g))return NaN;p.push(parseFloat(e)),d=true}else return NaN;break;case 8:if(k(e)){if(!$e(f,g))return NaN;p.push(parseFloat(e))}else if(wt(e)){if(!ze(f,g))return NaN;p.push(gt(e)),d=true}else return NaN;break;case 16:if(k(e)){if(!$e(f,g))return NaN;p.push(parseFloat(e))}else if(vt(e)){if(!ze(f,g))return NaN;const t=ht(e);if(!isNaN(t))p.push(),d=true;else return NaN}else return NaN;break;case 32:if(/^\s*-?\d+\s*$/.test(e))p.push(parseInt(e)),d=true;else return NaN;break;case 64:if(k(e))p.push(parseFloat(e)),d=true;else if(yt(e)&&void 0!==i&&!isNaN(i))p.push(parseFloat(e)/100*i);else return NaN;break;default:if(k(e)){if(!$e(f,g))return NaN;p.push(parseFloat(e))}else if(pt(e)){if(!ze(f,g))return NaN;p.push(ut(e,h)),d=true}else if(yt(e)&&void 0!==i&&!isNaN(i)){if(!ze(f,g))return NaN;p.push(parseFloat(e)/100*i),d=true}else return NaN;break}f=e}break}}}if(!d||p.length!==b.length+1)return NaN;for(w=0;w<b.length;++w)if("/"===b[w])if(0!==Math.abs(p[w+1]))p.splice(w,2,p[w]/p[w+1]),b.splice(w--,1);else return NaN;for(w=0;w<b.length;++w)if("*"===b[w])p.splice(w,2,p[w]*p[w+1]),b.splice(w--,1);for(w=0;w<b.length;++w)p.splice(w,2,p[w]+p[w+1]*("-"===b[w]?-1:1)),b.splice(w--,1);if(1===p.length)if(1===a.length){const e=p[0];if(void 0!==o&&e<o||void 0!==c&&e>c)return NaN;else return q(e)}else{r[n]=p[0];const t=`{${n++}}`,i=a[s]+1;e=e.substring(0,l)+t+" ".repeat(i-(l+t.length))+e.substring(i),a.splice(s--,1)}else return NaN}}}return NaN}function ut(e,t,r){const n=ve.exec(e);if(n){let e=parseFloat(n[1]);switch(n[2]){case"px":return e;case"ex":e/=2;case"em":case"ch":return e*(null!=t?t:Ke(document.body)||16);case"rem":return e*(Ke(document.querySelector("html")||document.body)||16);case"pc":e*=12;case"pt":return 4*e/3;case"Q":e/=4;case"mm":e/=10;case"cm":e/=2.54;case"in":return e*G();case"vw":return e*We(r)/100;case"vh":return e*je(r)/100;case"vmin":return e*Math.min(We(r),je(r))/100;case"vmax":return e*Math.max(We(r),je(r))/100}}return 0}function ht(e,t=NaN){const r=ke.exec(e);return r?ft(r[1],r[2]):t}function ft(e,t="deg",r=NaN){let n=b(e);if(isNaN(n))return r;switch(t){case"rad":n*=180/Math.PI;break;case"grad":n/=400;case"turn":n*=360;break}return n}function gt(e){const t=xe.exec(e);if(t)switch(t[2]){case"ms":return parseInt(t[1]);case"s":return 1e3*parseFloat(t[1])}return 0}function dt(e,t){if("string"==typeof e)if(e=parseFloat(e),isNaN(e))return"0%";return e*=100,(t?Math.round(e):e)+"%"}function pt(e,t){return!t?ve.test(e):ye.test(e)}function bt(e){return Ee.test(e)}function mt(e){return/^\s*var\(.+\)\s*$/.test(e)}function vt(e){return ke.test(e)}function wt(e){return xe.test(e)}function yt(e){return we.test(e)}function kt(e){return Se.test(e)}var xt=Object.freeze({__proto__:null,CSS_PROPERTIES:{alignContent:{trait:16,value:"normal"},alignItems:{trait:16,value:"normal"},alignSelf:{trait:16,value:"auto"},animation:{trait:6,value:["animationDuration","animationTimingFunction","animationDelay","animationIterationCount","animationDirection","animationFillMode","animationPlayState","animationName"]},animationDelay:{trait:2,value:"0s"},animationDirection:{trait:0,value:"normal"},animationDuration:{trait:2,value:"0s"},animationFillMode:{trait:0,value:"none"},animationIterationCount:{trait:2,value:"1"},animationName:{trait:0,value:"none"},animationPlayState:{trait:0,value:"running"},animationTimingFunction:{trait:0,value:"ease"},backfaceVisibility:{trait:0,value:"visible"},background:{trait:6,value:["backgroundImage","backgroundPositionX","backgroundPositionY","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"]},backgroundAttachment:{trait:0,value:"scroll"},backgroundClip:{trait:0,value:"border-box"},backgroundColor:{trait:2,value:"transparent"},backgroundImage:{trait:2,value:"none"},backgroundOrigin:{trait:0,value:"padding-box"},backgroundPosition:{trait:6,value:["backgroundPositionX","backgroundPositionY"]},backgroundPositionX:{trait:2,value:"0%"},backgroundPositionY:{trait:2,value:"0%"},backgroundRepeat:{trait:0,value:"repeat"},backgroundSize:{trait:2,value:"auto auto"},border:{trait:14,value:["borderTopWidth","borderTopStyle","borderTopColor","borderRightWidth","borderRightStyle","borderRightColor","borderBottomWidth","borderBottomStyle","borderBottomColor","borderLeftWidth","borderLeftStyle","borderLeftColor"]},borderBottom:{trait:6,value:["borderBottomWidth","borderBottomStyle","borderBottomColor"]},borderBottomColor:{trait:34,value:""},borderBottomLeftRadius:{trait:2,value:"0"},borderBottomRightRadius:{trait:2,value:"0"},borderBottomStyle:{trait:0,value:"none"},borderBottomWidth:{trait:10,value:"0"},borderCollapse:{trait:8,value:"separate"},borderColor:{trait:6,value:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"]},borderImage:{trait:6,value:["borderImageSource","borderImageSlice","borderImageWidth","borderImageOutset","borderImageRepeat"]},borderImageOutset:{trait:2,value:"0"},borderImageRepeat:{trait:0,value:"stretch"},borderImageSlice:{trait:2,value:"100%"},borderImageSource:{trait:2,value:"none"},borderImageWidth:{trait:2,value:"1"},borderLeft:{trait:6,value:["borderLeftWidth","borderLeftStyle","borderLeftColor"]},borderLeftColor:{trait:34,value:""},borderLeftStyle:{trait:0,value:"none"},borderLeftWidth:{trait:10,value:"0"},borderRadius:{trait:6,value:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"]},borderRight:{trait:6,value:["borderRightWidth","borderRightStyle","borderRightColor"]},borderRightColor:{trait:34,value:""},borderRightStyle:{trait:0,value:"none"},borderRightWidth:{trait:10,value:"0"},borderSpacing:{trait:2,value:"0"},borderStyle:{trait:4,value:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"]},borderTop:{trait:6,value:["borderTopWidth","borderTopStyle","borderTopColor"]},borderTopColor:{trait:34,value:""},borderTopLeftRadius:{trait:2,value:"0"},borderTopRightRadius:{trait:2,value:"0"},borderTopStyle:{trait:0,value:"none"},borderTopWidth:{trait:10,value:"0"},borderWidth:{trait:14,value:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"]},bottom:{trait:10,value:"auto"},boxShadow:{trait:10,value:"none"},boxSizing:{trait:8,value:"content-box"},captionSide:{trait:0,value:"top"},clear:{trait:8,value:"none"},clip:{trait:66,value:"clip"},color:{trait:34,value:""},columnCount:{trait:2,value:"auto"},columnFill:{trait:0,value:"balance"},columnGap:{trait:2,value:"normal"},columnRule:{trait:6,value:["columRuleWidth","columnRuleStyle","columnRuleColor"]},columnRuleColor:{trait:34,value:""},columnRuleStyle:{trait:0,value:"none"},columnRuleWidth:{trait:2,value:"0"},columnSpan:{trait:0,value:"none"},columnWidth:{trait:2,value:"auto"},columns:{trait:6,value:["columnCount","columnWidth"]},content:{trait:0,value:"normal"},counterIncrement:{trait:2,value:"none"},counterReset:{trait:2,value:"none"},cursor:{trait:0,value:"auto"},direction:{trait:8,value:"ltr"},display:{trait:8,value:"inline"},emptyCells:{trait:0,value:"show"},flex:{trait:6,value:["flexGrow","flexShrink","flexBasis"]},flexBasis:{trait:10,value:"auto"},flexDirection:{trait:8,value:"row"},flexFlow:{trait:12,value:["flexDirection","flexWrap"]},flexGrow:{trait:10,value:"0"},flexShrink:{trait:10,value:"1"},flexWrap:{trait:8,value:"nowrap"},float:{trait:8,value:"none"},font:{trait:14,value:["fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily"]},fontFamily:{trait:8,value:""},fontFeatureSettings:{trait:10,value:"normal"},fontKerning:{trait:8,value:"auto"},fontSize:{trait:10,value:"medium"},fontSizeAdjust:{trait:10,value:"none"},fontStretch:{trait:10,value:"normal"},fontStyle:{trait:10,value:"normal"},fontVariant:{trait:14,value:["fontVariantCaps","fontVariantLigatures","fontVariantNumeric","fontVariantEastAsian"]},fontVariantCaps:{trait:10,value:"normal"},fontVariantEastAsian:{trait:10,value:"normal"},fontVariantLigatures:{trait:10,value:"normal"},fontVariantNumeric:{trait:10,value:"normal"},fontVariationSettings:{trait:10,value:"normal"},fontWeight:{trait:10,value:"normal"},gap:{trait:14,value:["rowGap","columnGap"]},grid:{trait:14,value:["gridTemplateRows","gridAutoColumns","gridTemplateColumns","gridAutoRows","gridTemplateAreas","gridAutoFlow","gridRowGap","gridColumnGap"]},gridArea:{trait:14,value:["gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd"]},gridAutoColumns:{trait:10,value:"auto"},gridAutoFlow:{trait:8,value:"row"},gridAutoRows:{trait:10,value:"auto"},gridColumn:{trait:14,value:["gridColumnStart","gridColumnEnd"]},gridColumnEnd:{trait:10,value:"auto"},gridColumnGap:{trait:10,value:"normal"},gridColumnStart:{trait:10,value:"auto"},gridGap:{trait:14,value:["gridRowGap","gridColumnGap"]},gridRow:{trait:14,value:["gridRowStart","gridRowEnd"]},gridRowEnd:{trait:10,value:"auto"},gridRowGap:{trait:10,value:"normal"},gridRowStart:{trait:10,value:"auto"},gridTemplate:{trait:14,value:["gridTemplateRows","gridTemplateColumns","gridTemplateAreas"]},gridTemplateAreas:{trait:8,value:"none"},gridTemplateColumns:{trait:10,value:"none"},gridTemplateRows:{trait:10,value:"none"},height:{trait:10,value:"auto"},justifyContent:{trait:16,value:"normal"},justifyIems:{trait:16,value:"normal"},justifySelf:{trait:16,value:"auto"},left:{trait:10,value:"auto"},letterSpacing:{trait:10,value:"normal"},lineHeight:{trait:10,value:"normal"},listStyle:{trait:12,value:["listStyleType","listStylePosition","listStyleImage"]},listStyleImage:{trait:8,value:"normal"},listStylePosition:{trait:8,value:"outside"},listStyleType:{trait:8,value:"disc"},margin:{trait:14,value:["marginTop","marginRight","marginBottom","marginLeft"]},marginBottom:{trait:10,value:"0"},marginLeft:{trait:10,value:"0"},marginRight:{trait:10,value:"0"},marginTop:{trait:10,value:"0"},maxHeight:{trait:10,value:"none"},maxWidth:{trait:10,value:"none"},minHeight:{trait:10,value:"0"},minWidth:{trait:10,value:"0"},offset:{trait:6,value:["offsetPath","offsetDistance","offsetRotate","offsetAnchor"]},offsetPath:{trait:0,value:"none"},offsetDistance:{trait:2,value:"0"},offsetRotate:{trait:2,value:"auto 0deg"},offsetAnchor:{trait:2,value:"auto"},opacity:{trait:2,value:"1"},order:{trait:14,value:"0"},outline:{trait:6,value:["outlineWidth","outlineStyle","outlineColor"]},outlineColor:{trait:34,value:""},outlineOffset:{trait:2,value:"0"},outlineStyle:{trait:0,value:"none"},outlineWidth:{trait:2,value:"0"},overflow:{trait:12,value:["overflowX","overflowY"]},overflowX:{trait:8,value:"visible"},overflowY:{trait:8,value:"visible"},padding:{trait:14,value:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},paddingBottom:{trait:10,value:"0"},paddingLeft:{trait:10,value:"0"},paddingRight:{trait:10,value:"0"},paddingTop:{trait:10,value:"0"},pageBreakAfter:{trait:0,value:"auto"},pageBreakBefore:{trait:0,value:"auto"},pageBreakInside:{trait:0,value:"auto"},perspective:{trait:2,value:"none"},perspectiveOrigin:{trait:2,value:"50% 50%"},placeContent:{trait:16,value:["alignContent","justifyContent"]},placeItems:{trait:20,value:["alignItems","justifyItems"]},placeSelf:{trait:20,value:["alignSelf","justifySelf"]},position:{trait:8,value:"static"},quotes:{trait:8,value:"none"},resize:{trait:8,value:"none"},right:{trait:10,value:"0"},rowGap:{trait:10,value:"normal"},scrollMargin:{trait:14,value:["scrollMarginTop","scrollMarginRight","scrollMarginBottom","scrollMarginLeft"]},scrollMarginBottom:{trait:10,value:"0"},scrollMarginLeft:{trait:10,value:"0"},scrollMarginRight:{trait:10,value:"0"},scrollMarginTop:{trait:10,value:"0"},scrollPadding:{trait:14,value:["scrollPaddingTop","scrollPaddingRight","scrollPaddingBottom","scrollPaddingLeft"]},scrollPaddingBottom:{trait:8,value:"0"},scrollPaddingLeft:{trait:8,value:"0"},scrollPaddingRight:{trait:8,value:"0"},scrollPaddingTop:{trait:8,value:"0"},shapeOutside:{trait:2,value:"none"},tabSize:{trait:8,value:"8"},tableLayout:{trait:8,value:"auto"},textAlign:{trait:0,value:"left"},textAlignLast:{trait:0,value:"auto"},textDecoration:{trait:4,value:["textDecorationLine","textDecorationStyle","textDecorationColor"]},textDecorationColor:{trait:34,value:""},textDecorationLine:{trait:0,value:"none"},textDecorationStyle:{trait:0,value:"solid"},textIndent:{trait:10,value:"0"},textJustify:{trait:0,value:"auto"},textOverflow:{trait:0,value:"clip"},textShadow:{trait:2,value:"none"},textTransform:{trait:8,value:"none"},top:{trait:10,value:"0"},transform:{trait:2,value:"none"},transformOrigin:{trait:2,value:"50% 50% 0"},transformStyle:{trait:0,value:"flat"},transition:{trait:6,value:["transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay"]},transitionDelay:{trait:2,value:"0s"},transitionDuration:{trait:2,value:"0s"},transitionProperty:{trait:0,value:"all"},transitionTimingFunction:{trait:2,value:"ease"},unicodeBidi:{trait:8,value:"normal"},verticalAlign:{trait:10,value:"baseline"},visibility:{trait:8,value:"visible"},whiteSpace:{trait:8,value:"normal"},width:{trait:10,value:"auto"},wordBreak:{trait:8,value:"normal"},wordSpacing:{trait:10,value:"normal"},wordWrap:{trait:8,value:"normal"},zIndex:{trait:2,value:"auto"}},newBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},getStyle:Ze,getFontSize:Ke,hasComputedStyle:Qe,parseSelectorText:function(e,t){if((e=t?e.trim():qe(e.trim())).includes(",")){let t,r=e,n=false;while(t=a.SELECTOR_ATTR.exec(r)){const e=t.index,i=t[0].length;r=(e>0?r.substring(0,e):"")+"_".repeat(i)+r.substring(e+i),n=true}if(n){const t=[];let n=0;while(true){const i=r.indexOf(",",n);if(-1!==i){const r=e.substring(n,i).trim();t.push(0===n?r:qe(r)),n=i+1}else{if(n>0)t.push(qe(e.substring(n).trim()));break}}return t}return O(e.split(Re),e=>qe(e))}return[e]},getSpecificity:function e(t){a.SELECTOR_G.lastIndex=0;let r,n=0;while(r=a.SELECTOR_G.exec(t)){let t,i=r[1];if(1===i.length)switch(i.charAt(0)){case"+":case"~":case">":case"*":continue}else if(i.startsWith("*|*")){if(i.length>3)return 0}else if(i.startsWith("*|"))i=i.substring(2);else if(i.startsWith("::"))return 0;while(t=a.SELECTOR_ATTR.exec(i)){if(t[1])n+=1;if(t[3]||t[4]||t[5])n+=10;i=d(i,t.index,t[0].length)}while(t=a.SELECTOR_PSEUDO_CLASS.exec(i)){if(t[0].startsWith(":not(")){const r=t[1];if(r){const t=a.SELECTOR_G.lastIndex;n+=e(r),a.SELECTOR_G.lastIndex=t}}else switch(r[2]){case":scope":case":root":break;default:n+=10;break}i=d(i,t.index,t[0].length)}while(t=a.SELECTOR_PSEUDO_ELEMENT.exec(i))n+=1,i=d(i,t.index,t[0].length);while(t=a.SELECTOR_LABEL.exec(i)){const e=t[0];switch(e.charAt(0)){case"#":n+=100;break;case".":n+=10;break;default:n+=1;break}i=d(i,t.index,e.length)}}return n},checkWritingMode:Je,calculateStyle:et,checkStyleValue:function(e,t,r,n){if("initial"===r)switch(t){case"position":case"display":case"baseline":case"lineHeight":case"backgroundColor":case"backgroundImage":case"borderTopStyle":case"borderRightStyle":case"borderBottomStyle":case"borderLeftStyle":return r;default:return""}else if("inherit"===r)switch(t){case"fontSize":case"lineHeight":if(n)return n[t];default:return nt(e,t)}else if(kt(r))r=et(e,t,r);else if(mt(r))r=it(e,r);return""===r&&(null==n?void 0:n[t])||r},getKeyframesRules:function(){const e={};e:{const t=document.styleSheets,r=t.length;let n=0;while(n<r){const r=t[n++].cssRules;if(r){const t=r.length;for(let n=0;n<t;++n)try{const t=r[n];if(t.type===CSSRule.KEYFRAMES_RULE){const r=tt(t.cssRules);if(g(r)){const n=t.name;if(e[n])Object.assign(e[n],r);else e[n]=r}}}catch(e){break e}}}}return e},parseKeyframes:tt,checkMediaRule:rt,isParentStyle:function(e,t,...r){if("#"!==e.nodeName.charAt(0)&&r.includes(Ze(e)[t]))return true;const n=e.parentElement;return!!n&&r.includes(Ze(n)[t])},getInheritedStyle:nt,parseVar:it,calculateVarAsString:at,calculateVar:st,getContentBoxDimension:lt,getBackgroundPosition:function(e,t,r){if(""!==(e=e.trim())){const n=e.split(Ce);if(1===n.length)n.push("center");const i=Math.min(n.length,4);let a,s,l,o;if(r)({fontSize:a,imageDimension:s,imageSize:l,screenDimension:o}=r);const{width:c,height:u}=t,h=Oe(n),f=(e,t,r,n)=>{if(s&&!pt(e)){let e=h[n];if(l&&"auto"!==l&&"initial"!==l){const[r,n]=l.split(Ce);if(t){let t=c;if(pt(r,true))if(yt(r))t*=parseFloat(r)/100;else{const e=ut(r,a,o);if(e)t=e}else if(n){let e=1;if(yt(n))e=parseFloat(n)/100*u/s.height;else if(pt(n)){const t=ut(n,a,o);if(t)e=t/s.height}t=e*s.width}e*=t}else{let t=u;if(pt(n,true))if(yt(n))t*=parseFloat(n)/100;else{const e=ut(n,a,o);if(e)t=e}else if(r){let e=1;if(yt(r))e=parseFloat(r)/100*c/s.width;else if(pt(r)){const t=ut(r,a,o);if(t)e=t/s.width}t=e*s.height}e*=t}}else e*=t?s.width:s.height;h[r]-=e}};if(2===i){n.sort((e,t)=>{switch(e){case"left":case"right":return-1;case"top":case"bottom":return 1}switch(t){case"left":case"right":return 1;case"top":case"bottom":return-1}return 0});for(let e=0;e<2;++e){let t=n[e];const r=0===e,[i,s]=r?["left",c]:["top",u],l=i+"AsPercent";switch(t){case"0%":if(r)t="left";case"left":case"top":break;case"100%":if(r)t="right";case"right":case"bottom":h[i]=s,h[l]=1;break;case"50%":case"center":t="center",h[i]=s/2,h[l]=.5;break;default:{const c=Ve(t,s,a,o);if(c>1)n[e]="100%",t=r?"right":"bottom",h[t]=-1*Ge(dt(c-1),s,a,o);else h[i]=Ge(t,s,a,o);h[l]=c;break}}if(r)h.horizontal=t;else h.vertical=t;f(t,r,i,l)}}else{let e=0,t=0;const r=(r,n)=>{switch(r){case"left":case"right":h.horizontal=r,++e;break;case"center":if(4===i)return false;else{let t=true;if(void 0===n)if(e>0)h.vertical=r,t=false;else h.horizontal=r;else switch(n){case"left":case"right":h.vertical=r,t=false;break;case"top":case"bottom":h.horizontal=r;break;default:return false}if(t)h.left=c/2,h.leftAsPercent=.5,f(r,true,"left","leftAsPercent");else h.top=u/2,h.topAsPercent=.5,f(r,false,"top","topAsPercent")}break;case"top":case"bottom":h.vertical=r,++t;break;default:return false}return e<2&&t<2};for(let e=0;e<i;++e){const t=n[e];if(pt(t,true)){const r=n[e-1];switch(r){case"left":case"right":{const e=Ge(t,c,a,o),n=Ve(t,c,a,o);if("right"===r)h.right=e,h.rightAsPercent=n,f(t,true,"right","rightAsPercent"),h.left=c-e,h.leftAsPercent=1-n;else{if(n>1){const e=1-n;h.horizontal="right",h.right=Ge(dt(e),c,a,o),h.rightAsPercent=e,f(t,true,"right","rightAsPercent")}h.left=e,h.leftAsPercent=n}f(t,true,"left","leftAsPercent");break}case"top":case"bottom":{const e=Ge(t,u,a,o),n=Ve(t,u,a,o);if("bottom"===r)h.bottom=e,h.bottomAsPercent=n,f(t,false,"bottom","bottomAsPercent"),h.top=u-e,h.topAsPercent=1-n;else{if(n>1){const e=1-n;h.horizontal="bottom",h.bottom=Ge(dt(e),u,a,o),h.bottomAsPercent=e,f(t,false,"bottom","bottomAsPercent")}h.top=e,h.topAsPercent=n}f(t,false,"top","topAsPercent");break}default:return Oe()}}else if(!r(t,n[e+1]))return Oe()}}return h.static=0===h.top&&0===h.right&&0===h.bottom&&0===h.left,h}return Oe()},getSrcSet:function(e,t){const r=[],n=e.parentElement;let{srcset:i,sizes:a}=e;if("PICTURE"===(null==n?void 0:n.tagName))D(n.children,e=>{if("SOURCE"===e.tagName){const{media:r,type:n,srcset:s}=e;if(x(s)&&!(x(r)&&!rt(r))&&(!x(n)||!t||t.includes(n.trim().toLowerCase())))return i=s,a=e.sizes,true}});if(""!==i)for(const e of i.trim().split(Re)){const t=/^(.*?)(?:\s+([\d.]+)([xw]))?$/.exec(e);if(t){let e=0,n=0;switch(t[3]){case"w":e=b(t[2]);break;case"x":n=b(t[2]);break;default:n=1;break}r.push({src:R(t[1].split(Ce)[0]),pixelRatio:n,width:e})}}const s=r.length;if(0===s)r.push({src:e.src,pixelRatio:1,width:0});else if(s>1)if(r.sort((e,t)=>{const r=e.pixelRatio,n=t.pixelRatio;if(r>0&&n>0){if(r!==n)return r<n?-1:1}else{const r=e.width,n=t.width;if(r!==n&&r>0&&n>0)return r<n?-1:1}return 0}),x(a)){let t=NaN;for(const r of a.trim().split(Re)){let n=Ae.exec(r);if(n){const r=n[2]?rt(n[2]):void 0,i=n[6]?rt(n[6]):void 0;switch(n[5]){case"and":if(!r||!i)continue;break;case"or":if(!r&&!i)continue;break;case"not":if(void 0!==r||i)continue;break;default:if(false===r||void 0!==i)continue;break}const a=n[9];if(a)if(n=Ee.exec(a),n)t=ct(n[1],n[1].includes("%")?{boundingSize:lt(e.parentElement).width}:void 0);else if(yt(a))t=parseFloat(a)/100*lt(e.parentElement).width;else if(pt(a))t=ut(a);if(!isNaN(t))break}}if(!isNaN(t)){const e=t*window.devicePixelRatio;let n=-1;for(let t=0;t<s;++t){const i=r[t].width;if(i>0&&i<=e&&(-1===n||r[n].width<i))n=t}if(0===n){const e=r[0];e.pixelRatio=1,e.actualWidth=t}else if(n>0){const e=r.splice(n,1)[0];e.pixelRatio=1,e.actualWidth=t,r.unshift(e)}let i=1;while(i<s){const e=r[i++];if(0===e.pixelRatio)e.pixelRatio=e.width/t}}}return r},convertListStyle:function(e,t,r){switch(e){case"decimal":return t.toString();case"decimal-leading-zero":return(t<9?"0":"")+t.toString();case"upper-alpha":case"upper-latin":if(t>=1)return m(t-1);break;case"lower-alpha":case"lower-latin":if(t>=1)return m(t-1).toLowerCase();break;case"upper-roman":return v(t);case"lower-roman":return v(t).toLowerCase()}return r?t.toString():""},extractURL:ot,resolveURL:function(e){return""!==(e=ot(e))?R(e):""},insertStyleSheetRule:function(e,t=0){const r=document.createElement("style");if(j(4))r.appendChild(document.createTextNode(""));document.head.appendChild(r);const n=r.sheet;if("function"==typeof(null==n?void 0:n.insertRule))try{n.insertRule(e,t)}catch(e){return null}return r},calculate:ct,parseUnit:ut,parseTransform:function(e,t,r){var n,i,a,l;const o=[],c=/(\w+)\([^)]+\)/g;let u;while(u=c.exec(e)){const e=u[1];if(e.startsWith("translate")){const i=s.TRANSLATE.exec(u[0]);if(i)if(t){let t=0,a=0,s=0;switch(e){case"translate":if(t=ut(i[2],r),i[3])a=ut(i[3],r);break;case"translateX":t=ut(i[2],r);break;case"translateY":a=ut(i[2],r);break;case"translateZ":s=ut(i[2],r);break}const l=null===(n=o.find(e=>"translate"===e.method))||void 0===n?void 0:n.values;if(l)l[0]+=t,l[1]+=a,l[2]+=s;else o.push({method:"translate",values:[t,a,s]})}else{const t=[ut(i[2],r)];if("translate"===e&&i[3])t.push(ut(i[3],r));o.push({method:e,values:t})}}else if(e.startsWith("rotate")){const r=s.ROTATE.exec(u[0]);if(r){const n=ft(r[2],r[3]);if(!isNaN(n))if(t){let t=0,r=0,a=0;switch(e){case"rotate":t=n,r=n;break;case"rotateX":t=n;break;case"rotateY":r=n;break;case"rotateZ":a=n;break}const s=null===(i=o.find(e=>"rotate"===e.method))||void 0===i?void 0:i.values;if(s)s[0]+=t,s[1]+=r,s[2]+=a;else o.push({method:"rotate",values:[t,r,a]})}else o.push({method:e,values:[n]})}}else if(e.startsWith("scale")){const r=s.SCALE.exec(u[0]);if(r)if(t){let t=1,n=1,i=1;switch(e){case"scale":if(t=parseFloat(r[2]),r[3])n=parseFloat(r[3]);break;case"scaleX":t=parseFloat(r[2]);break;case"scaleY":n=parseFloat(r[2]);break;case"scaleZ":i=parseFloat(r[2]);break}const s=null===(a=o.find(e=>"scale"===e.method))||void 0===a?void 0:a.values;if(s)s[0]*=t,s[1]*=n,s[2]*=i;else o.push({method:"scale",values:[t,n,i]})}else{const t=[parseFloat(r[2])];if("scale"===e&&r[3])t.push(parseFloat(r[3]));o.push({method:e,values:t})}}else if(e.startsWith("skew")){const r=s.SKEW.exec(u[0]);if(r){let n=ft(r[2],r[3]);if(!isNaN(n))if(t){let t=0,i=0;switch(e){case"skew":if(t=n,r[4]&&r[5])i=ft(r[4],r[5],0);break;case"skewX":t=n;break;case"skewY":i=n;break}const a=null===(l=o.find(e=>"skew"===e.method))||void 0===l?void 0:l.values;if(a)a[0]+=t,a[1]+=i;else o.push({method:"skew",values:[t,i]})}else{const t=[n];if("skew"===e&&r[4]&&r[5])if(n=ft(r[4],r[5]),!isNaN(n))t.push(n);o.push({method:e,values:t})}}}else if(e.startsWith("matrix")&&!t){const t=s.MATRIX.exec(u[0]);if(t)o.push({method:e,values:[parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6]),parseFloat(t[7])]})}}return o},parseAngle:ht,convertAngle:ft,parseTime:gt,formatPX:function(e){return Math.round(e)+"px"},formatPercent:dt,isLength:pt,isPx:function(e){return/\dpx$/.test(e)},isCalc:bt,isCustomProperty:mt,isAngle:vt,isTime:wt,isPercent:yt,hasCalc:kt});function Et(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}}function St(e,t=true){const r={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height};if(t){const{scrollX:e,scrollY:t}=window;if(0!==t)r.top+=t,r.bottom+=t;if(0!==e)r.left+=e,r.right+=e}return r}function At(e){const t=[],r=document.createRange();r.selectNodeContents(e);const n=r.getClientRects();let i,a=n.length,s=0;while(s<a){const e=n.item(s++);if(Math.round(e.width)>0&&!N(e.left,e.right,.5))t.push(e)}if(a=t.length,a){i=St(t[0]);let e=1,r=false;s=0;while(++s<a){const{left:n,right:a,top:l,bottom:o,width:c}=t[s];if(n<i.left)i.left=n;else if(n>i.right)r=true;if(a>i.right)i.right=a;if(l<i.top)i.top=l;else if(l>=t[s-1].bottom)++e;if(o>i.bottom)i.bottom=o;i.width+=c}if(i.height=i.bottom-i.top,e>1)i.numberOfLines=e,i.overflow=r}else i={top:0,left:0,right:0,bottom:0,width:0,height:0};return i}var Ct=Object.freeze({__proto__:null,ELEMENT_BLOCK:["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DD","DETAILS","DIALOG","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","TABLE","UL"],newBoxRect:function(){return{top:0,left:0,right:0,bottom:0}},newBoxRectDimension:Et,withinViewport:function(e){return!(e.top+window.scrollY+e.height<0||e.left+window.scrollX+e.width<0)},assignRect:St,getRangeClientRect:At,removeElementsByClassName:function(e){Array.from(document.getElementsByClassName(e)).forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.removeChild(e)})},getElementsBetweenSiblings:function(e,t){const r=[];if(!e||e.parentElement===t.parentElement){const n=t.parentElement;if(n){let i=e?-1:0,a=-1;if(D(n.childNodes,(r,n)=>{if(r===t){if(a=n,-1!==i)return true}else if(r===e)if(i=n,-1!==a)return true}),-1!==i&&-1!==a)D(n.childNodes,e=>{const t=e.nodeName;if("#"!==t[0]||"#text"===t)r.push(e)},Math.min(i,a),Math.max(i,a)+1)}}return r},createElement:function(e,t,r){const n=document.createElement(t),i=n.style;for(const e in r)if(e.includes("-"))i.setProperty(e,r[e]);else i[e]=r[e];return e.appendChild(n),n},measureTextWidth:function(e,t,r){if(t&&r){const n=document.createElement("canvas").getContext("2d");if(n)return n.font=`${r}px ${t}`,n.measureText(e).width}return 0},getNamedItem:function(e,t){var r;return(null===(r=e.attributes.getNamedItem(t))||void 0===r?void 0:r.value.trim())||""}});function Rt(){return Promise.reject(new Error("Framework not installed."))}function Ft(e,t,r,n){e[`__${t}::${r}`]=n}function Tt(e,t,r){if(!r)r=e["__sessionId::0"]||"0";return e[`__${t}::${r}`]}var Lt=Object.freeze({__proto__:null,frameworkNotInstalled:Rt,actualClientRect:function(e,t){if(t){const r=Tt(e,"clientRect",t);if(r)return r}const r=e.getBoundingClientRect();if(t)Ft(e,"clientRect",t,r);return r},actualTextRangeRect:function(e,t){if(t){const r=Tt(e,"textRangeRect",t);if(r)return r}let r;if(e.childElementCount)D(e.children,e=>{const t=Ze(e);if("visible"!==t.getPropertyValue("visibility")){const n=t.getPropertyValue("position");if("absolute"===n||"fixed"===n){const n=t.getPropertyValue("display");if("none"!==n){if(e.style.display="none",!r)r=[];r.push([e,n])}}}});const n=At(e);if(r)for(let e=0;e<r.length;++e){const[t,n]=r[e];t.style.display=n}if(t)Ft(e,"textRangeRect",t,n);return n},getStyleValue:function(e,t,r){var n;return(null===(n=Tt(e,"styleMap",r))||void 0===n?void 0:n[p(t)])||""},getPseudoElt:function(e,t){return Tt(e,"pseudoElement",t)||""},getElementAsNode:function(e,t){return Tt(e,"node",t)||null},setElementCache:Ft,getElementCache:Tt,deleteElementCache:function(e,t,r){e[`__${t}::${r}`]=void 0}});function It(e,t,r="\t",n){if(t>0){if(void 0===n)n=r.repeat(t);return _(e.split("\n"),e=>""!==e?n+e:"")}return e}var Nt=Object.freeze({__proto__:null,STRING_XMLENCODING:'<?xml version="1.0" encoding="utf-8"?>\n',STRING_SPACE:"&#160;",isPlainText:function(e){const t=e.length;let r=0;while(r<t)switch(e.charCodeAt(r++)){case 9:case 10:case 13:case 32:continue;default:return true}return false},pushIndent:It,pushIndentArray:function(e,t,r="\t",n=""){if(t>0){let i="";const a=r.repeat(t),s=e.length;let l=0;while(l<s)i+=(l>0?n:"")+It(e[l++],t,r,a);return i}return e.join(n)},replaceIndent:function(e,t,r){if(t>=0){let n=-1;return _(e.split("\n"),e=>{const i=r.exec(e);if(i){if(-1===n)n=i[2].length;return(i[1]||"")+"\t".repeat(t+(i[2].length-n))+i[3]}return e})}return e},replaceTab:function(e,t=4,r=false){if(t>0)if(r)return _(e.split("\n"),e=>{const r=/^(\t+)(.*)$/.exec(e);return r?" ".repeat(t*r[1].length)+r[2]:e});else return e.replace(/\t/g," ".repeat(t));return e},applyTemplate:function e(t,r,n,i){const a=r[t],s=true===a[">>"];let l="",o="";if(void 0===i)l+='<?xml version="1.0" encoding="utf-8"?>\n',i=0;else o+="\t".repeat(i);let c=n.length;for(let r=0;r<c;++r){const c=n[r],u=a["#"]&&c[a["#"]],h=!s&&!u,f=a["@"],g=a[">"];let d=false;if(l+=o+"<"+t,f){const e=f.length;let t=0;while(t<e){const e=f[t++],r=c[e];if(r)l+=` ${(a["^"]?a["^"]+":":"")+e}="${r}"`}}if(g){let n="";const a=i+(s?r:0)+1;for(const t in g){const r=c[t];if(Array.isArray(r))n+=e(t,g,r,a);else if(S(r))n+=e(t,g,[r],a)}if(""!==n){if(l+=">\n"+n,h)l+=o+`</${t}>\n`}else l+=h?" />\n":">\n";d=true}else if(a["~"]){if(l+=">"+c.innerText,h)l+=`</${t}>\n`;d=true}else if(h)l+=" />\n";if(u){if(!d)l+=">\n";if(l+=u,!s)l+=o+`</${t}>\n`}if(s)o+="\t"}if(s)while(--c>=0)o=o.substring(1),l+=o+`</${t}>\n`;return l},formatTemplate:function(e,t=false,r=-1,n="\t"){const i=[],a=/\s*(<(\/)?([?\w]+)[^>]*>)\n?([^<]*)/g;let s;while(s=a.exec(e))i.push({tag:s[1],closing:!!s[2],tagName:s[3],value:s[4]});let l="",o=r,c=false;const u=i.length;for(let e=0;e<u;++e){const a=i[e];let s=o;if(e>0){let r=false;if(a.closing)--o;else{const n=i[e+1];if(r=n.closing&&a.tagName===n.tagName,!/\/>\n*$/.exec(a.tag))if(t&&!x(a.value))if((null==n?void 0:n.closing)&&n.tagName===a.tagName)a.tag=a.tag.replace(/\s*>$/," />"),++e;else++o;else++o;++s}const u=a.tag.trim().split("\n"),h=u.length;for(let e=0;e<h;++e){const t=u[e];if(c)l+=t,c=false;else{const r=s+Math.min(e,1);l+=(r>0?n.repeat(r):"")+t.trim()}if(r&&1===h)c=true;else l+="\n"}}else l+=(r>0?n.repeat(r):"")+a.tag+"\n";l+=a.value}return l},replaceCharacterData:function(e,t){const r=[],n=(e=e.replace(/&nbsp;/g,"&#160;").replace(/&(?!#?[A-Za-z\d]{2,};)/g,"&amp;")).length;for(let i=0;i<n;++i)switch(e.charAt(i)){case"'":r.push({i:i,text:"\\'"});break;case'"':r.push({i:i,text:"&quot;"});break;case"<":r.push({i:i,text:"&lt;"});break;case">":r.push({i:i,text:"&gt;"});break;case"\t":if(t)r.push({i:i,text:"&#160;".repeat(t)});break;case"":r.push({i:i,text:" "});break;case" ":r.push({i:i,text:"&#160;"});break}if(r.length){const t=e.split("");let n=0;while(n<r.length){const{i:e,text:i}=r[n++];t[e]=i}return t.join("")}return e}});class Iterator{constructor(e){this.children=e,this.index=-1,this._iterating=0,this.length=e.length}next(){if(this.hasNext())return this._iterating=1,this.children[++this.index]}hasNext(){return this.index<this.length-1}remove(){const e=this._iterating;if(0!==e)this.children.splice(this.index,1),this.index-=e,--this.length,this._iterating=0}forEachRemaining(e){while(this.hasNext())e(this.children[++this.index])}}class ListIterator extends Iterator{constructor(e){super(e)}add(e){const t=this._iterating;if(0!==t)this.children.splice(1===t?Math.min(++this.index,this.length):Math.max(--this.index,0),0,e),++this.length,this._iterating=0}set(e){if(0!==this._iterating)this.children[this.index]=e,this._iterating=0}nextIndex(){return Math.min(this.index+1,this.length)}hasPrevious(){return this.previousIndex()>0}previous(){if(this.hasPrevious())return this._iterating=-1,this.children[--this.index]}previousIndex(){return Math.max(this.index-1,-1)}}class Iter{constructor(e){this.children=e,this.index=-1,this.length=e.length}next(){const e=++this.index;return e<this.length?{value:this.children[e]}:{done:true}}}class Container{constructor(e){this._children=e||[]}[Symbol.iterator](){return new Iter(this._children)}item(e,t){const r=this._children;if(void 0!==e){if(t)if(e>=0&&e<r.length)return r[e]=t,t;else return;return r[e]}return r[r.length-1]}add(e){return this._children.push(e),this}addAll(e){return this._children=this._children.concat(e),this}remove(...e){const t=[],r=this._children;let n=0;while(n<e.length){const i=e[n++];for(let e=0;e<r.length;++e)if(r[e]===i){r.splice(e,1),t.push(i);break}}return t}removeAt(e){return this._children.splice(e,1)[0]}retainAs(e){return this._children=e,this}contains(e){return this._children.includes(e)}duplicate(){return this._children.slice(0)}clear(){return this._children.length=0,this}each(e){const t=this._children,r=t.length;let n=0;while(n<r)e(t[n],n++,t);return this}iterate(e,t){let r,n;if(t)({start:r,end:n}=t);return D(this._children,e,r,n)}every(e,t){const r=this._children;let n=r.length;if(n){let i=0;if(t){if(t.start)i=Math.max(t.start,0);if(t.end)n=Math.min(n,t.end)}while(i<n)if(!e(r[i],i++,r))return false;return true}return false}extract(e,t){let r,n;if(t)({also:r,error:n}=t);const i=[],a=this._children;for(let t=0;t<a.length;++t){const s=a[t];if(n&&n(s,t,a))break;if(e(s,t,a))null==r||r.call(s,s),i.push(s),a.splice(t--,1)}return i}findIndex(e,t){let r,n;if(t)({also:r,error:n}=t);const i=this._children,a=i.length;for(let t=0;t<a;++t){const a=i[t];if(n&&n(a,t,i))return-1;if(e(a,t,i))return null==r||r.call(a,a),t}return-1}find(e,t){let r,n,i,a,s;if(t)if(({also:n,error:r,cascade:i}=t),!i){if(({start:a,end:s}=t),a)a=Math.max(a,0);if(s)s=Math.min(this.length,s)}let l=false;const o=t=>{const c=t.children,u=null!=s?s:c.length;for(let t=a||0;t<u;++t){const a=c[t];if(r&&r(a,t,c)){l=true;break}if(e(a,t,c))return null==n||n.call(a,a),a;if(i&&a instanceof Container&&!a.isEmpty){const e=o(a);if(e)return null==n||n.call(a,a),e;else if(l)break}}};return o(this)}some(e,t){return void 0!==this.find(e,t)}cascade(e,t){let r,n;if(t)({also:n,error:r}=t);let i=false;const a=t=>{let s=[];const l=t.children,o=l.length;for(let t=0;t<o;++t){const o=l[t];if(r&&r(o,t,l)){i=true;break}if(!e||true===e(o))null==n||n.call(o,o),s.push(o);if(o instanceof Container&&!o.isEmpty)if(s=s.concat(a(o)),i)break}return s};return a(this)}map(e){return z(this._children,e)}same(e){return B(this._children,e)}partition(e){return M(this._children,e)}sort(e){return this._children.sort(e),this}joinWith(...e){let t=this._children;for(let r=0;r<e.length;++r)t=t.concat(e[r].children);return this._children=t,this}iterator(){return new ListIterator(this._children)}get children(){return this._children}get isEmpty(){return 0===this._children.length}get length(){return this._children.length}}const Pt=new Set,Mt=new Set,Bt=new Map,_t={},Dt={};let Ot,zt;function $t(e,t){if(Ot&&!e.includes(t))t.application=Ot,e.push(t)}function Wt(e){for(const t in e)delete e[t]}const jt=e=>false===(null==e?void 0:e.initializing)&&e.length>0;function Gt(e,t){if(S(t))if("string"==typeof e){e=e.trim();const r=(null==Ot?void 0:Ot.extensionManager.retrieve(e))||P(Pt,t=>t.name===e);if(r)Object.assign(r.options,t);else Bt.set(e,t);return true}else if(e instanceof squared.base.Extension)return Object.assign(e.options,t),true;return false}function Vt(e){let t=null;if(Ot)if(t=Ot.extensionManager.retrieve(e),!t)for(const t of Mt)if(t.name===e)return t;return t}function Ht(){null==Ot||Ot.reset()}const Xt={base:{Container:Container,ArrayIterator:Iterator,ListIterator:ListIterator},client:V,color:be,css:xt,dom:Ct,math:ne,regex:l,session:Lt,util:$,xml:Nt};e.appendFromArchive=function(e,t){var r;if(jt(Ot)&&x(e)&&S(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length))return Ot.appendFromArchive(e,t);else return Rt()},e.appendToArchive=function(e,t){if(jt(Ot)&&x(e))return Ot.finalize(),Ot.appendToArchive(e,t);else return Rt()},e.close=function(){if(jt(Ot))Ot.finalize()},e.configure=Gt,e.copyToDisk=function(e,t){if(jt(Ot)&&x(e))return Ot.finalize(),Ot.copyToDisk(e,t);else return Rt()},e.createFrom=function(e,t){var r;if(jt(Ot)&&x(e)&&S(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length))return Ot.createFrom(e,t);else return Rt()},e.exclude=function(e){if(Ot){const t=Ot.extensionManager;if("string"==typeof e)e=t.retrieve(e.trim());if(e instanceof squared.base.Extension)return Pt.delete(e),Mt.delete(e),t.exclude(e)}return false},e.include=function(e,t){if("string"==typeof e)e=e.trim(),e=(null==Ot?void 0:Ot.builtInExtensions[e])||Vt(e);if(e instanceof squared.base.Extension){if(Mt.add(e),!(true===(null==Ot?void 0:Ot.extensionManager.include(e))))Pt.add(e);if(t)Gt(e,t);return true}return false},e.lib=Xt,e.parseDocument=function(...e){if(Ot){if(Pt.size){const e=Ot.extensionManager;for(const t of Pt)e.include(t);Pt.clear()}if(Bt.size){for(const[e,t]of Bt.entries())Gt(e,t);Bt.clear()}if(!Ot.closed)return Ot.parseDocument(...e);else if(!_t.showErrorMessages||confirm("ERROR: Document is closed. Reset and rerun?"))return Ot.reset(),Ot.parseDocument(...e)}return Rt()},e.ready=function(){return false===(null==Ot?void 0:Ot.initializing)&&!Ot.closed},e.reset=Ht,e.retrieve=Vt,e.saveToArchive=function(e,t){if(jt(Ot))return Ot.finalize(),Ot.saveToArchive(e,t);else return Rt()},e.setFramework=function(e,t,r=false){const n=void 0!==zt;if(zt!==e){const i=r?e.cached():e.create();if(void 0===zt)Object.assign(i.userSettings,_t);if(S(t))Object.assign(i.userSettings,t);Wt(_t),Object.assign(_t,i.userSettings),Ot=i.application,Ot.userSettings=_t;const{builtInExtensions:a,extensions:s}=Ot;s.length=0;for(const e of _t.builtInExtensions){const t=a[e];if(t)$t(s,t);else{const t=e+".";for(const e in a)if(e.startsWith(t))$t(s,a[e])}}if(n)Wt(Dt);Object.assign(Dt,e.system),zt=e}if(n)Ht()},e.setHostname=function(e){const t=null==Ot?void 0:Ot.resourceHandler.fileHandler;if(t){const r=i.PROTOCOL.exec(e);if(r&&r[1].startsWith("http"))t.hostname=r[1]+r[2]+(r[3]||"")}},e.setViewModel=function(e){if(Ot)Ot.viewModel=e},e.settings=_t,e.system=Dt,e.toString=function(){return(null==Ot?void 0:Ot.toString())||""},Object.defineProperty(e,"__esModule",{value:true})}));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.base={}))}(this,(function(e){"use strict";const{hasBit:t,isObject:i}=squared.lib.util;class ExtensionManager{constructor(e){this.application=e}include(e){const i=this.application,s=i.extensions;if("string"==typeof e){const t=this.retrieve(e);if(!t)return false;e=t}const n=e.name,a=s.findIndex(e=>e.name===n);if(-1!==a)return s[a]=e,true;else{const{framework:n,dependencies:a}=e;if(n>0){const e=a.length;let t=0;while(t<e){const e=a[t++];if(e.preload)if(!this.retrieve(e.name)){const t=i.builtInExtensions[e.name];if(t)this.include(t)}}}if((0===n||t(n,i.framework))&&a.every(e=>!!this.retrieve(e.name)))return e.application=i,s.push(e),true}return false}exclude(e){const t=this.extensions,i=t.length;for(let s=0;s<i;++s)if(t[s]===e||"string"==typeof e&&this.retrieve(e))return t.splice(s,1),true;return false}retrieve(e,t=false){const i=this.extensions,s=i.length;let n=0;while(n<s){const t=i[n++];if(t.name===e)return t}return t&&this.application.builtInExtensions[e]||null}optionValue(e,t,s){var n;const a=null===(n=this.retrieve(e))||void 0===n?void 0:n.options;return i(a)?a[t]:s}optionValueAsObject(e,t,s=null){const n=this.optionValue(e,t);return i(n)?n:s}optionValueAsString(e,t,i=""){const s=this.optionValue(e,t);return"string"==typeof s?s:i}optionValueAsNumber(e,t,i=NaN){const s=this.optionValue(e,t);return"number"==typeof s?s:i}optionValueAsBoolean(e,t,i=false){const s=this.optionValue(e,t);return"boolean"==typeof s?s:i}get extensions(){return this.application.extensions}}class NodeList extends squared.lib.base.Container{constructor(e){super(e),this._currentId=0}add(e,t=false,i=false){var s;if(super.add(e),t)null===(s=this.afterAdd)||void 0===s||s.call(this,e,i);return this}reset(){return this._currentId=0,this.clear(),this}get nextId(){return++this._currentId}}const{STRING:s}=squared.lib.regex,{extractURL:n}=squared.lib.css,{fromLastIndexOf:a,fromMimeType:l,hasMimeType:r,randomUUID:o}=squared.lib.util,c=new RegExp(`^${s.DATAURI}$`);let h=(()=>{class Resource{reset(){var e;const t=Resource.ASSETS;for(const e in t)t[e].clear();null===(e=this._fileHandler)||void 0===e||e.reset()}addImage(e){var t;if(e.complete){const i=e.src;if(i.startsWith("data:image/")){const s=c.exec(i);if(s){const n=s[1].split(";");this.addRawData(i,n[0].trim(),(null===(t=n[1])||void 0===t?void 0:t.trim())||"base64",s[2],e.naturalWidth,e.naturalHeight)}}if(""!==i)Resource.ASSETS.image.set(i,{width:e.naturalWidth,height:e.naturalHeight,uri:i})}}addVideo(e,t){Resource.ASSETS.video.set(e,{uri:e,mimeType:t})}addAudio(e,t){Resource.ASSETS.audio.set(e,{uri:e,mimeType:t})}addFont(e){const t=Resource.ASSETS.fonts,i=e.fontFamily.trim().toLowerCase();e.fontFamily=i;const s=t.get(i);if(s)s.push(e);else t.set(i,[e])}addRawData(e,t,i,s,n=0,r=0){let o;if(t=t.toLowerCase(),"base64"===(i=i.toLowerCase())){if(o=s,"image/svg+xml"===t)s=window.atob(s)}else s=s.replace(/\\(["'])/g,(e,...t)=>t[0]);const c=this.mimeTypeMap.image;if("*"===c||c.includes(t)){const i="."+l(t),c=e.endsWith(i)?a(e,"/","\\"):this.randomUUID+i;return Resource.ASSETS.rawData.set(e,{pathname:e.startsWith(location.origin)?e.substring(location.origin.length+1,e.lastIndexOf("/")):"",filename:c,content:s,base64:o,mimeType:t,width:n,height:r}),c}return""}getImage(e){return Resource.ASSETS.image.get(e)}getVideo(e){return Resource.ASSETS.video.get(e)}getAudio(e){return Resource.ASSETS.audio.get(e)}getFont(e,t="normal",i){const s=Resource.ASSETS.fonts.get(e.trim().toLowerCase());if(s){const e=this.mimeTypeMap.font;return s.find(s=>t.startsWith(s.fontStyle)&&(!i||s.fontWeight===parseInt(i))&&(r(e,s.srcFormat)||s.srcUrl&&r(e,s.srcUrl)))}}getRawData(e){if(e.startsWith("url("))if(""===(e=n(e)))return;return Resource.ASSETS.rawData.get(e)}set fileHandler(e){if(e)e.resource=this;this._fileHandler=e}get fileHandler(){return this._fileHandler}get controllerSettings(){return this.application.controllerHandler.localSettings}get mimeTypeMap(){return this.controllerSettings.mimeType}get randomUUID(){return o()}}return Resource.KEY_NAME="squared.resource",Resource.ASSETS={ids:new Map,fonts:new Map,image:new Map,video:new Map,audio:new Map,rawData:new Map},Resource.canCompressImage=(e,t)=>/\.(png|jpg|jpeg)$/i.test(e)||"image/png"===t||"image/jpeg"===t,Resource})();const{CSS_PROPERTIES:d,checkMediaRule:u,getSpecificity:f,getStyle:g,hasComputedStyle:p,insertStyleSheetRule:m,parseSelectorText:b}=squared.lib.css,{capitalize:x,convertCamelCase:y,isString:v,plainMap:S,promisify:w,resolvePath:E}=squared.lib.util,{FILE:k,STRING:_}=squared.lib.regex,{frameworkNotInstalled:T,getElementCache:C,setElementCache:I}=squared.lib.session,{image:A,rawData:R}=h.ASSETS,N=new RegExp(`url\\("?(${_.DATAURI})"?\\),?\\s*`,"g");function M(e,t=0,i=0){if(e){const s=A.get(e);if(t>0&&i>0||!s||0===s.width||0===s.height)A.set(e,{width:t,height:i,uri:e})}}function P(e){if(e)for(const t of e.split(","))M(E(t.trim().split(" ")[0]))}function B(e,t,i,s){var n;const a=t[i];if(a&&"initial"!==a){N.lastIndex=0;let l,r=a;while(l=N.exec(a))if(l[2]){const t=l[2].split(";");e.addRawData(l[1],t[0].trim(),(null===(n=t[1])||void 0===n?void 0:n.trim())||"utf8",l[3])}else{const t=E(l[3],s);if(""!==t){if(!e.getImage(t))M(t);r=r.replace(l[0],`url("${t}")`)}}t[i]=r}}const L=e=>k.SVG.test(e),W=(e,t)=>{var i;return(null===(i=new RegExp(`\\s*@${e}([^{]+)`).exec(t))||void 0===i?void 0:i[1].trim())||t};let F=(()=>{class Application{constructor(e,t,i,s,n){this.framework=e,this.initializing=false,this.closed=false,this.systemName="",this.rootElements=new Set,this.session={active:[]},this.processing={cache:new NodeList,excluded:new NodeList,unusedStyles:new Set,sessionId:""},this._cascadeAll=false;const a=this.processing.cache;this._cache=a,this._controllerHandler=new i(this,a),this._resourceHandler=new s(this,a),this._extensionManager=new(n||ExtensionManager)(this,a),this._afterInsertNode=this._controllerHandler.afterInsertNode,this.Node=t}copyToDisk(e,t){var i;return(null===(i=this.resourceHandler.fileHandler)||void 0===i?void 0:i.copyToDisk(e,t))||T()}appendToArchive(e,t){var i;return(null===(i=this.resourceHandler.fileHandler)||void 0===i?void 0:i.appendToArchive(e,t))||T()}saveToArchive(e,t){var i;return(null===(i=this.resourceHandler.fileHandler)||void 0===i?void 0:i.saveToArchive(e||this.userSettings.outputArchiveName,t))||T()}createFrom(e,t){var i;return(null===(i=this.resourceHandler.fileHandler)||void 0===i?void 0:i.createFrom(e,t))||T()}appendFromArchive(e,t){var i;return(null===(i=this.resourceHandler.fileHandler)||void 0===i?void 0:i.appendFromArchive(e,t))||T()}reset(){const e=this.processing;e.cache.reset(),e.excluded.clear(),e.sessionId="",e.unusedStyles.clear(),this.session.active.length=0,this.controllerHandler.reset(),this.resourceHandler.reset(),this.extensions.forEach(e=>e.subscribers.clear()),this.closed=false}parseDocument(...e){const{controllerHandler:t,resourceHandler:i}=this;this.initializing=false,this.rootElements.clear();const s=t.generateSessionId;this.processing.sessionId=s,this.session.active.push(s),t.sessionId=s,t.init(),this.setStyleMap();const n=[],a=this.userSettings.preloadImages,l=[],r=m("html > body { overflow: hidden !important; }");let o;if(0===e.length)e.push(document.body);for(let t=0;t<e.length;++t){const i=e[t];let s;if("string"==typeof i)s=document.getElementById(i);else if(p(i))s=i;else continue;if(s){if(!o)o=s;this.rootElements.add(s)}}for(const e of this.rootElements)e.querySelectorAll("picture > source").forEach(e=>P(e.srcset)),e.querySelectorAll("video").forEach(e=>M(e.poster)),e.querySelectorAll("input[type=image]").forEach(e=>M(e.src,e.width,e.height));const c=()=>{this.initializing=false;const e=n.length;let t=0;while(t<e){const e=n[t++];if(e.parentElement)o.removeChild(e)}n.length=0,this.extensions.forEach(e=>e.beforeParseDocument());const i=[];for(const e of this.rootElements){const t=this.createCache(e);if(t)this.afterCreateCache(t),i.push(t)}this.extensions.forEach(e=>e.afterParseDocument());try{document.head.removeChild(r)}catch(e){}return i};if(a){for(const e of A.values()){const t=e.uri;if(L(t))l.push(t);else if(0===e.width||0===e.height){const i=document.createElement("img");if(i.src=t,i.naturalWidth>0&&i.naturalHeight>0)e.width=i.naturalWidth,e.height=i.naturalHeight;else o.appendChild(i),n.push(i)}}for(const[e,t]of R.entries()){const i=t.mimeType;if((null==i?void 0:i.startsWith("image/"))&&!i.endsWith("svg+xml")){const s=document.createElement("img");s.src=`data:${i};${t.base64?"base64,"+t.base64:t.content}`;const{naturalWidth:a,naturalHeight:l}=s;if(a>0&&l>0)t.width=a,t.height=l,A.set(e,{width:a,height:l,uri:t.filename});else document.body.appendChild(s),n.push(s)}}}for(const e of this.rootElements)e.querySelectorAll("img").forEach(e=>{if(P(e.srcset),!a)i.addImage(e);else if(L(e.src))l.push(e.src);else if(e.complete)i.addImage(e);else l.push(e)});if(l.length)return this.initializing=true,Promise.all(S(l,e=>new Promise((t,i)=>{if("string"==typeof e)(async()=>{const i=await fetch(e,{method:"GET",headers:new Headers({Accept:"application/xhtml+xml, image/svg+xml","Content-Type":"image/svg+xml"})});t(await i.text())})();else e.addEventListener("load",()=>t(e)),e.addEventListener("error",()=>i(e))}))).then(e=>{const t=e.length;for(let s=0;s<t;++s){const t=e[s];if("string"==typeof t){const e=l[s];if("string"==typeof e)i.addRawData(e,"image/svg+xml","utf8",t)}else i.addImage(t)}return c()}).catch(e=>{let t=e;if(e instanceof Event)t=e.target;const i=t instanceof HTMLImageElement?t.src:"";return!v(i)||!this.userSettings.showErrorMessages||confirm("FAIL: "+i)?c():Promise.reject(i)});else return w(c)()}createCache(e){const t=this.createRootNode(e);if(t)this.controllerHandler.sortInitialCache();return t}setStyleMap(){const e=document.styleSheets,t=e.length;let i=0;while(i<t){const t=e[i++];let s;try{s=t.media.mediaText}catch(e){}if(!v(s)||u(s))this.applyStyleSheet(t)}}getDatasetName(e,t){return t.dataset[e+x(this.systemName)]||t.dataset[e]}setDatasetName(e,t,i){t.dataset[e+x(this.systemName)]=i}toString(){return""}createRootNode(e){const t=this.processing,i=t.cache;i.clear(),t.excluded.clear(),this._cascadeAll=false;const s=this.extensionsCascade,n=this.cascadeParentNode(e,0,s.length?s:void 0);if(n){const i=new this.Node(0,t.sessionId,e.parentElement||document.body);this._afterInsertNode(i),n.parent=i,n.actualParent=i,n.childIndex=0,n.documentRoot=true}return t.node=n,i.afterAdd=void 0,n}cascadeParentNode(e,t,i){const s=this.insertNode(e);if(s){const{controllerHandler:n,processing:a}=this,l=a.cache;if(s.depth=t,0===t)l.add(s);if(n.preventNodeCascade(s))return s;const r=e.childNodes,o=r.length,c=new Array(o),h=new Array(e.childElementCount);let d=true,u=0,f=0,g=0;while(u<o){const e=r[u++];let o;if("#"===e.nodeName.charAt(0)){if("#text"===e.nodeName)if(o=this.insertNode(e),o)o.cssApply(s.textStyle)}else if(n.includeElement(e)){if(o=this.cascadeParentNode(e,t+1,i),o)h[g++]=o,l.add(o),d=false}else if(o=this.insertNode(e),o)a.excluded.add(o),d=false;if(o)o.$parent=s,o.childIndex=f,o.actualParent=s,c[f++]=o}if(c.length=f,h.length=g,s.naturalChildren=c,s.naturalElements=h,s.inlineText=d,s.retainAs(c),g>0&&this.userSettings.createQuerySelectorMap)s.queryMap=this.createQueryMap(h,g)}return s}createQueryMap(e,t){var i;const s=[e];let n=0;while(n<t){const t=e[n++].queryMap;if(t){const e=t.length;for(let n=0;n<e;++n){const e=n+1;s[e]=(null===(i=s[e])||void 0===i?void 0:i.concat(t[n]))||t[n]}}}return s}applyStyleRule(e){var t,i,s,n,a,l,r,o;const c=this.resourceHandler,h=this.processing.sessionId,u=(null===(t=e.parentStyleSheet)||void 0===t?void 0:t.href)||location.href,p=e.cssText;switch(e.type){case CSSRule.SUPPORTS_RULE:this.applyCSSRuleList(e.cssRules);break;case CSSRule.STYLE_RULE:{const t={};{const i=e.style,s=Array.from(i),n=s.length;for(let e=0;e<n;++e){const n=s[e];t[y(n)]=i[n]}}B(c,t,"backgroundImage",u),B(c,t,"listStyleImage",u),B(c,t,"content",u);const s={};{const e=/\s*([a-z-]+):[^!;]+!important;/g;let t;while(t=e.exec(p)){const e=y(t[1]),n=null===(i=d[e])||void 0===i?void 0:i.value;if(Array.isArray(n)){let e=0;while(e<n.length)s[n[e++]]=true}else s[e]=true}}for(const i of b(e.selectorText,true)){const e=f(i),[n,a]=i.split("::"),l=a?"::"+a:"",r=document.querySelectorAll(n||"*"),o=r.length;if(0===o){this.processing.unusedStyles.add(i);continue}let c=0;while(c<o){const i=r[c++],n="styleMap"+l,a="styleSpecificity"+l,o=C(i,n,h);if(o){const n=C(i,a,h)||{};for(const i in t){const a=n[i],l=e+(s[i]?1e3:0);if(void 0===a||l>=a)o[i]=t[i],n[i]=l}}else{const r=Object.assign({},t),o={};for(const t in r)o[t]=e+(s[t]?1e3:0);I(i,"style"+l,"0",g(i,l)),I(i,"sessionId","0",h),I(i,n,h,r),I(i,a,h,o)}}}break}case CSSRule.FONT_FACE_RULE:{const e=null===(s=/\s*@font-face\s*{([^}]+)}\s*/.exec(p))||void 0===s?void 0:s[1];if(e){const t=((null===(n=/\s*font-family:[^\w]*([^'";]+)/.exec(e))||void 0===n?void 0:n[1])||"").trim();if(""===t)break;const i=((null===(a=/\s*src:\s*([^;]+);/.exec(e))||void 0===a?void 0:a[1])||"").split(","),s=i.length;if(s){const n=(null===(l=/\s*font-style:\s*(\w+)\s*;/.exec(e))||void 0===l?void 0:l[1].toLowerCase())||"normal",a=parseInt((null===(r=/\s*font-weight:\s*(\d+)\s*;/.exec(e))||void 0===r?void 0:r[1])||"400");let h=0;while(h<s){const e=/\s*(url|local)\((?:"((?:[^"]|\\")+)"|([^)]+))\)(?:\s*format\("?([\w-]+)"?\))?\s*/.exec(i[h++]);if(e){let i,s;const l=(e[2]||e[3]).trim();if("url"===e[1])i=E(l,u);else s=l;c.addFont({fontFamily:t,fontWeight:a,fontStyle:n,srcUrl:i,srcLocal:s,srcFormat:(null===(o=e[4])||void 0===o?void 0:o.toLowerCase().trim())||"truetype"})}}}}break}}}applyCSSRuleList(e){const t=e.length;let i=0;while(i<t)this.applyStyleRule(e[i++])}applyStyleSheet(e){var t;try{const i=e.cssRules;if(i){const e=i.length;let s=0;while(s<e){const e=i[s++];switch(e.type){case CSSRule.STYLE_RULE:case CSSRule.FONT_FACE_RULE:this.applyStyleRule(e);break;case CSSRule.IMPORT_RULE:{const i=E(e.href,(null===(t=e.parentStyleSheet)||void 0===t?void 0:t.href)||location.href);if(""!==i)this.resourceHandler.addRawData(i,"text/css","utf8","");this.applyStyleSheet(e.styleSheet);break}case CSSRule.MEDIA_RULE:if(u(e.conditionText||W("media",e.cssText)))this.applyCSSRuleList(e.cssRules);break;case CSSRule.SUPPORTS_RULE:if(CSS.supports&&CSS.supports(e.conditionText||W("supports",e.cssText)))this.applyCSSRuleList(e.cssRules);break}}}}catch(t){(this.userSettings.showErrorMessages?alert:console.log)("CSS cannot be parsed inside <link> tags when loading files directly from your hard drive or from external websites. Either use a local web server, embed your CSS into a <style> tag, or you can also try using a different browser. See the README for more detailed instructions.\n\n"+e.href+"\n\n"+t)}}get controllerHandler(){return this._controllerHandler}get resourceHandler(){return this._resourceHandler}get extensionManager(){return this._extensionManager}get extensionsCascade(){return[]}get nextId(){return this._cache.nextId}get length(){return 0}}return Application.KEY_NAME="squared.application",Application})();class Controller{preventNodeCascade(e){return false}get generateSessionId(){return(new Date).getTime().toString()}get afterInsertNode(){return e=>{}}}class Extension{constructor(e,t,i){if(this.name=e,this.framework=t,this.options={},this.dependencies=[],this.subscribers=new Set,i)Object.assign(this.options,i)}require(e,t=false){this.dependencies.push({name:e,preload:t})}beforeParseDocument(){}afterParseDocument(){}set application(e){this._application=e,this._controller=e.controllerHandler}get application(){return this._application}get controller(){return this._controller}}const{frameworkNotInstalled:O}=squared.lib.session,{fromLastIndexOf:U,isString:H,trimEnd:D}=squared.lib.util;class File{constructor(){this.assets=[]}static downloadFile(e,t,i){const s=new Blob([e],{type:i||"application/octet-stream"}),n=window.URL.createObjectURL(s),a=document.createElement("a");if(a.style.setProperty("display","none"),a.setAttribute("href",n),a.setAttribute("download",t),!a.download)a.setAttribute("target","_blank");const l=document.body;l.appendChild(a),a.click(),l.removeChild(a),setTimeout(()=>window.URL.revokeObjectURL(n),1)}createFrom(e,t){return this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{format:e}))}appendFromArchive(e,t){return this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{appendTo:e,format:e.substring(e.lastIndexOf(".")+1)}))}addAsset(e){if(e.content||e.uri||e.base64){const{pathname:t,filename:i}=e,s=this.assets.find(e=>e.pathname===t&&e.filename===i);if(s)Object.assign(s,e);else this.assets.push(e)}}reset(){this.assets.length=0}copying(e){if(this.hasHttpProtocol()){const{assets:t,directory:i}=e,s=this.createRequestBody(t,e);if(s&&H(i))return fetch(this.hostname+"/api/assets/copy?to="+encodeURIComponent(i.trim())+"&empty="+(this.userSettings.outputEmptyCopyDirectory?"1":"0")+this.getCopyQueryParameters(e),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(s)}).then(e=>e.json()).then(t=>{if(t)if("function"==typeof e.callback)e.callback(t);else if(t.system)(this.userSettings.showErrorMessages?alert:console.log)(t.application+"\n\n"+t.system);return t})}else(this.userSettings.showErrorMessages?alert:console.log)("SERVER (required): See README for instructions");return O()}archiving(e){if(this.hasHttpProtocol()){const{assets:t,filename:i}=e,s=this.createRequestBody(t,e);if(s&&H(i))return fetch(this.hostname+"/api/assets/archive?filename="+encodeURIComponent(i.trim())+"&format="+(e.format||this.userSettings.outputArchiveFormat).trim().toLowerCase()+"&to="+encodeURIComponent((e.copyTo||"").trim())+"&append_to="+encodeURIComponent((e.appendTo||"").trim())+this.getArchiveQueryParameters(e),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(s)}).then(e=>e.json()).then(t=>{if(t){if("function"==typeof e.callback)e.callback(t);const i=t.zipname;if(H(i))fetch("/api/browser/download?filepath="+encodeURIComponent(i)).then(async e=>File.downloadFile(await e.blob(),U(i,"/","\\")));else if(t.system)(this.userSettings.showErrorMessages?alert:console.log)(t.application+"\n\n"+t.system)}return t})}else(this.userSettings.showErrorMessages?alert:console.log)("SERVER (required): See README for instructions");return O()}createRequestBody(e,t){const i=e?e.concat(this.assets):this.assets,s=i[0];if(s){if(t.exclusions)s.exclusions=t.exclusions;const e=this.getDataMap(t);if(e)s.dataMap=e;return i}}hasHttpProtocol(){return(this._hostname||location.protocol).startsWith("http")}set hostname(e){if(null==e?void 0:e.startsWith("http"))this._hostname=D(e,"/")}get hostname(){return this._hostname||location.origin}}const{USER_AGENT:V,isUserAgent:q}=squared.lib.client,{CSS_PROPERTIES:X,CSS_TRAITS:z,CSS_UNIT:j,checkStyleValue:G,checkWritingMode:Y,formatPX:$,getInheritedStyle:K,getStyle:Q,hasComputedStyle:J,isLength:Z,isPercent:ee,isPx:te,parseSelectorText:ie,parseUnit:se}=squared.lib.css,{ELEMENT_BLOCK:ne,assignRect:ae,getNamedItem:le,getRangeClientRect:re,newBoxRectDimension:oe}=squared.lib.dom,{CSS:ce,FILE:he}=squared.lib.regex,{actualClientRect:de,actualTextRangeRect:ue,deleteElementCache:fe,getElementAsNode:ge,getElementCache:pe,getPseudoElt:me,setElementCache:be}=squared.lib.session,{aboveRange:xe,belowRange:ye,convertCamelCase:ve,convertFloat:Se,convertInt:we,hasBit:Ee,hasValue:ke,isNumber:_e,isObject:Te,isString:Ce,iterateArray:Ie,spliceString:Ae,splitEnclosing:Re}=squared.lib.util,{SELECTOR_ATTR:Ne,SELECTOR_G:Me,SELECTOR_LABEL:Pe,SELECTOR_PSEUDO_CLASS:Be}=ce,Le=X.borderTop.value,We=X.borderRight.value,Fe=X.borderBottom.value,Oe=X.borderLeft.value;function Ue(e,t,i,s,n){if(n!==s)if(e.style.setProperty(t,s),De(s,e.style.getPropertyValue(t)))be(e,t,i,"auto"!==s?n:"");else return false;return true}function He(e,t,i){const s=pe(e,t,i);if(void 0!==s)e.style.setProperty(t,s),fe(e,t,i)}const De=(e,t)=>e===t||Z(e,true)&&te(t),Ve=(e,t)=>e.id<t.id?-1:1,qe=e=>parseFloat(e.getPropertyValue("font-size")),Xe=e=>/\dem$/.test(e),ze=e=>/^(inline|table-cell)/.test(e);function je(e,t,i,s){const n=(s||e).css(t);if(_e(n))return parseFloat(n);else if("inherit"===n&&!s)return je(e,t,i,e.actualParent);return i}function Ge(e,...t){const i=e.cssAscend("textAlign",e.textElement&&e.blockStatic&&!e.hasPX("width",true,true));return""!==i&&t.includes(i)&&(e.blockStatic?e.textElement&&!e.hasPX("width",true,true)&&!e.hasPX("maxWidth",true,true):e.display.startsWith("inline"))}function Ye(e,t,i,s,n){const a=t[i],l=e.parseUnit(a,i);let r=Math.max(l,e.parseUnit(t[s],i));if(0===r&&e.styleElement){const t=e.element;switch(t.tagName){case"IMG":case"INPUT":if("image"!==t.type)break;case"TD":case"TH":case"SVG":case"IFRAME":case"VIDEO":case"AUDIO":case"CANVAS":case"OBJECT":case"EMBED":{const s=le(t,i);if(""!==s)if(r=_e(s)?parseFloat(s):e.parseUnit(s,i),r>0)e.css(i,ee(s)?s:s+"px");break}}}let o=0;if(l>0&&!e.imageElement){const s=t[n];if(a===s)delete t[n];else if(o=e.parseUnit(s,i),o>0&&o<=l&&Z(a))o=0,t[i]=s,delete t[n]}return o>0?Math.min(r,o):r}function $e(e){let t=0;if(e.htmlElement&&!e.inputElement&&!e.imageElement&&"HR"!==e.tagName&&!e.documentBody){const i=e.element,[s,n]=e.cssAsTuple("overflowX","overflowY");if(e.hasHeight&&(e.hasPX("height")||e.hasPX("maxHeight"))&&("scroll"===n||"auto"===n&&i.clientHeight!==i.scrollHeight))t|=16;if((e.hasPX("width")||e.hasPX("maxWidth"))&&("scroll"===s||"auto"===s&&i.clientWidth!==i.scrollWidth))t|=8}return t}function Ke(e,t,i){if(!e.plainText){switch(e.css(i[1])){case"none":case"initial":case"hidden":return 0}const s=e.css(i[0]),n=Z(s,true)?e.parseUnit(s,t):Se(e.style[i[0]]);if(n>0)return Math.max(Math.round(n),1)}return 0}function Qe(e,t,i){var s;switch(e.display){case"table":if(!i&&"collapse"===e.css("borderCollapse"))return 0;break;case"table-row":return 0;case"table-cell":if(i){switch(e.tagName){case"TD":case"TH":return 0;default:{const i=e.ascend({condition:e=>"TABLE"===e.tagName})[0];if(i){const[s,n]=i.css("borderSpacing").split(" ");switch(t){case"marginTop":case"marginBottom":return n?e.parseUnit(n,"height",false):e.parseUnit(s,"width",false);case"marginRight":if(e.actualParent.lastChild!==e)return e.parseUnit(s,"width",false);case"marginLeft":return 0}}break}}return 0}break}return e.parseUnit(e.css(t),"width",!(true===(null===(s=e.actualParent)||void 0===s?void 0:s.gridElement)))}function Je(e){return e.naturalChild&&(0===e.length||ze(e.display))&&!e.floating&&true!==e.autoMargin.horizontal}function Ze(e,t){if(!e.positionStatic){const i=tt.call(e,t,true);if(Z(i))return e.parseUnit(i,"left"===t||"right"===t?"width":"height");else if(ee(i)&&e.styleElement)return Se(e.style[t])}return 0}function et(e,t,i,s,n,a){var l,r;if(i.all)return true;let o=i.tagName;if(o&&o!==t.tagName.toUpperCase())return false;if(i.id&&i.id!==t.elementId)return false;const{attrList:c,classList:h,notList:d,pseudoList:u}=i;if(u){const i=t.actualParent;o=t.tagName;for(let s=0;s<u.length;++s){const c=u[s];switch(c){case":first-child":case":nth-child(1)":if(t!==i.firstChild)return false;break;case":last-child":case":nth-last-child(1)":if(t!==i.lastChild)return false;break;case":only-child":if(i.naturalElements.length>1)return false;break;case":only-of-type":{const e=i.naturalElements,t=e.length;for(let i=0,s=0;i<t;++i)if(e[i].tagName===o&&++s>1)return false;break}case":first-of-type":{const e=i.naturalElements,s=e.length;for(let i=0;i<s;++i){const s=e[i];if(s.tagName===o){if(s!==t)return false;break}}break}case":nth-child(n)":case":nth-last-child(n)":break;case":empty":if(t.element.childNodes.length)return false;break;case":checked":switch(o){case"INPUT":if(!t.toElementBoolean("checked"))return false;break;case"OPTION":if(!t.toElementBoolean("selected"))return false;break;default:return false}break;case":enabled":if(!t.inputElement||t.toElementBoolean("disabled"))return false;break;case":disabled":if(!t.inputElement||!t.toElementBoolean("disabled"))return false;break;case":read-only":{const e=t.element;if(e.isContentEditable||("INPUT"===o||"TEXTAREA"===o)&&!e.readOnly)return false;break}case":read-write":{const e=t.element;if(!e.isContentEditable||("INPUT"===o||"TEXTAREA"===o)&&e.readOnly)return false;break}case":required":if(!t.inputElement||"BUTTON"===o||!t.toElementBoolean("required"))return false;break;case":optional":if(!t.inputElement||"BUTTON"===o||t.toElementBoolean("required"))return false;break;case":placeholder-shown":if(!(("INPUT"===o||"TEXTAREA"===o)&&""!==t.toElementString("placeholder")))return false;break;case":default":switch(o){case"INPUT":{const e=t.element;switch(e.type){case"radio":case"checkbox":if(!e.checked)return false;break;default:return false}break}case"OPTION":if(void 0===t.element.attributes.selected)return false;break;case"BUTTON":{const e=t.ascend({condition:e=>"FORM"===e.tagName})[0];if(e){let i=false;const s=t.element;if(Ie(e.element.querySelectorAll("*"),e=>{switch(e.tagName){case"BUTTON":return i=s===e,true;case"INPUT":switch(e.type){case"submit":case"image":return i=s===e,true}break}}),!i)return false}break}default:return false}break;case":in-range":case":out-of-range":if("INPUT"===o){const e=t.element,i=parseFloat(e.value);if(!isNaN(i)){const t=parseFloat(e.min),s=parseFloat(e.max);if(i>=t&&i<=s){if(":out-of-range"===c)return false}else if(":in-range"===c)return false}else if(":in-range"===c)return false}else return false;break;case":indeterminate":if("INPUT"===o){const e=t.element;switch(e.type){case"checkbox":if(!e.indeterminate)return false;break;case"radio":if(e.checked)return false;else if(e.name)if(Ie(((null===(l=t.ascend({condition:e=>"FORM"===e.tagName})[0])||void 0===l?void 0:l.element)||document).querySelectorAll(`input[type=radio][name="${e.name}"`),e=>e.checked)===1/0)return false;break;default:return false}}else if("PROGRESS"===o){if(-1!==t.toElementInt("value",-1))return false}else return false;break;case":target":if(""===location.hash)return false;else{const e=t.element;if(!(location.hash==="#"+e.id||"A"===o&&location.hash==="#"+e.name))return false}break;case":scope":if(!n||">"===a&&t!==e)return false;break;case":root":if(!n||a)return false;break;case":link":case":visited":case":any-link":case":hover":case":focus":case":focus-within":case":valid":case":invalid":{const e=t.element;if(Ie(i.element.querySelectorAll(":scope > "+c),t=>t===e)!==1/0)return false;break}default:{let e=/^:nth(-last)?-(child|of-type)\((.+)\)$/.exec(c);if(e){const s=e[3].trim();let n=i.naturalElements;if(e[1])n=n.slice(0).reverse();const a="child"===e[2]?n.indexOf(t)+1:n.filter(e=>e.tagName===o).indexOf(t)+1;if(a>0){if(_e(s)){if(parseInt(s)!==a)return false}else switch(s){case"even":if(a%2!=0)return false;break;case"odd":if(a%2==0)return false;break;default:{const e=/^(-)?(\d+)?n\s*([+-]\d+)?$/.exec(s);if(e){const t=we(e[3]);if(e[2]){if(e[1])return false;const i=parseInt(e[2]);if(0!==i){if(a!==t)for(let e=i;;e+=i){const e=i+t;if(e===a)break;else if(e>a)return false}}else if(a!==t)return false}else if(e[3])if(t>0){if(e[1]){if(a>t)return false}else if(a<t)return false}else return false}break}}continue}}else if(e=/^:lang\(\s*(.+)\s*\)$/.exec(c),e)if((null===(r=t.attributes.lang)||void 0===r?void 0:r.trim().toLowerCase())===e[1].toLowerCase())continue;return false}}}}if(d)for(let i=0;i<d.length;++i){const a=d[i],l={};switch(a.charAt(0)){case".":l.classList=[a];break;case"#":l.id=a.substring(1);break;case":":l.pseudoList=[a];break;case"[":{Ne.lastIndex=0;const e=Ne.exec(a);if(e){const t="i"===e[6];let i=e[3]||e[4]||e[5]||"";if(t)i=i.toLowerCase();l.attrList=[{key:e[1],symbol:e[2],value:i,caseInsensitive:t}]}else continue;break}default:if(/[a-zA-Z\d]/.test(a))l.tagName=a;else return false;break}if(et(e,t,l,s,n))return false}if(h){const e=t.element.classList;for(let t=0;t<h.length;++t)if(!e.contains(h[t]))return false}if(c){const e=t.attributes;for(let t=0;t<c.length;++t){const i=c[t];let s;if(i.endsWith){const t=new RegExp(`^(.+:)?${i.key}$`);for(const i in e)if(t.test(i)){s=e[i];break}}else s=e[i.key];if(void 0===s)return false;else{const e=i.value;if(e){if(i.caseInsensitive)s=s.toLowerCase();if(i.symbol)switch(i.symbol){case"~":if(!s.split(/\s+/).includes(e))return false;break;case"^":if(!s.startsWith(e))return false;break;case"$":if(!s.endsWith(e))return false;break;case"*":if(!s.includes(e))return false;break;case"|":if(s!==e&&!s.startsWith(e+"-"))return false;break}else if(s!==e)return false}}}}return true}function tt(e,t,i){return!this._preferInitial&&this._styleMap[e]||this.cssInitial(e,t,i)}let it=(()=>{class Node extends squared.lib.base.Container{constructor(e,t="0",i){if(super(),this.id=e,this.sessionId=t,this.documentRoot=false,this.depth=-1,this.childIndex=1/0,this._preferInitial=false,this._element=null,this._data={},this._inlineText=false,this._parent=null,i)this._element=i;else this.style={},this._styleMap={},this._cssStyle={};this._documentBody=i===document.body}init(){const e=this._element;if(e){const{styleElement:t,sessionId:i}=this,s=pe(e,"styleMap",i)||{};let n;if(!this.pseudoElement){if(n=Q(e),t){const t=Array.from(e.style),i=t.length;if(i){let n=0;while(n<i){const i=t[n++];s[ve(i)]=e.style.getPropertyValue(i)}}}}else n=Q(e.parentElement,me(e,i));if(t){const t={},i=n.writingMode;for(let a in s){const l=s[a],r=Y(a,i);if(""!==r)if(!s[r])a=r;else continue;const o=G(e,a,l,n);if(""!==o)t[a]=o}this._styleMap=t}else this._styleMap=s;if(this.style=n,this._cssStyle=s,"0"!==i)be(e,"node",i,this)}}saveAsInitial(){this._initial={children:this.duplicate(),styleMap:Object.assign({},this._styleMap)}}data(e,t,i,s=true){const n=this._data;if(null===i){if(n[e])delete n[e][t];return}else if(void 0!==i){let a=n[e];if(!Te(a))a={},n[e]=a;if(s||void 0===a[t])a[t]=i}const a=n[e];return Te(a)?a[t]:void 0}unsetCache(...e){if(e.length){const t=this._cached;for(let i=0;i<e.length;++i){const s=e[i];switch(s){case"position":if(!this._preferInitial)this.cascade(e=>!e.pageFlow&&e.unsetCache("absoluteParent"));case"display":case"float":case"tagName":return void(this._cached={});case"width":t.actualWidth=void 0,t.percentWidth=void 0;case"minWidth":t.width=void 0;case"maxWidth":t.overflow=void 0;break;case"height":t.actualHeight=void 0,t.percentHeight=void 0;case"minHeight":if(t.height=void 0,!this._preferInitial)this.unsetCache("blockVertical"),this.each(e=>e.unsetCache("height","actualHeight","blockVertical","overflow","bottomAligned"));case"maxHeight":t.overflow=void 0;break;case"verticalAlign":t.baseline=void 0;break;case"left":case"right":case"textAlign":t.rightAligned=void 0,t.centerAligned=void 0;break;case"top":case"bottom":t.bottomAligned=void 0;break;case"overflowX":case"overflowY":t.overflow=void 0;break;default:if(s.startsWith("margin"))t.autoMargin=void 0,t.rightAligned=void 0,t.centerAligned=void 0;else if(s.startsWith("padding"))t.contentBoxWidth=void 0,t.contentBoxHeight=void 0;else if(s.startsWith("border"))t.visibleStyle=void 0,t.contentBoxWidth=void 0,t.contentBoxHeight=void 0;else if(s.startsWith("background"))t.visibleStyle=void 0;else if(Node.TEXT_STYLE.includes(s))t.lineHeight=void 0,this._textStyle=void 0;break}if(s in t)t[s]=void 0}}else this._cached={},this._textStyle=void 0;if(!this._preferInitial){let t;if(e.some(e=>Ee(X[e].trait,8)))t=this.pageFlow&&this.ascend({condition:e=>e.documentRoot})[0]||this;else if(e.some(e=>Ee(X[e].trait,16)))t=this;if(t){t.resetBounds();const e=t.queryMap;if(e){const t=e.length;let i,s=0;while(s<t){const t=e[s++],n=t.length;i=0;while(i<n)t[i++].resetBounds()}}else this.cascade(e=>e.resetBounds())}}}ascend(e){let t=e.attr;if(!Ce(t))t="actualParent";else if(!/[pP]arent$/.test(t))return[];const{condition:i,including:s,error:n,every:a,excluding:l}=e,r=[];let o=e.startSelf?this:this[t];while(o&&o!==l){if(n&&n(o))break;if(i){if(i(o))if(r.push(o),!a)break}else r.push(o);if(o===s)break;o=o[t]}return r}intersectX(e,t="linear"){if(e.width>0){const{left:i,right:s}=this[t],{left:n,right:a}=e;return Math.ceil(i)>=n&&Math.floor(i)<=a||s>=Math.floor(n)&&s<=Math.ceil(a)||Math.ceil(n)>=i&&Math.floor(n)<=s||a>=Math.floor(i)&&a<=Math.ceil(s)}return false}intersectY(e,t="linear"){if(e.height>0){const{top:i,bottom:s}=this[t],{top:n,bottom:a}=e;return Math.ceil(i)>=n&&Math.floor(i)<=a||s>=Math.floor(n)&&s<=Math.ceil(a)||Math.ceil(n)>=i&&Math.floor(n)<=s||a>=Math.floor(i)&&a<=Math.ceil(s)}return false}withinX(e,t="linear"){if(this.pageFlow||e.width>0){const{left:i,right:s}=this[t];return xe(i,e.left)&&ye(s,e.right)}return true}withinY(e,t="linear"){if(this.pageFlow||e.height>0){const{top:i,bottom:s}=this[t];return Math.ceil(i)>=e.top&&Math.floor(s)<=e.bottom}return true}outsideX(e,t="linear"){if(this.pageFlow||e.width>0){const{left:i,right:s}=this[t];return i<Math.floor(e.left)||s>Math.ceil(e.right)}return false}outsideY(e,t="linear"){if(this.pageFlow||e.height>0){const{top:i,bottom:s}=this[t];return i<Math.floor(e.top)||s>Math.ceil(e.bottom)}return false}css(e,t,i=true){if(t&&this.styleElement)if(this.style[e]=t,De(t,this.style[e])){if(this._styleMap[e]=t,i)this.unsetCache(e);return t}return this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=true){for(const i in e){const s=e[i];if(this.css(i,s,t)===s&&t)this.unsetCache(i)}return this}cssInitial(e,t=false,i=false){var s;let n=((null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e]||t&&this._styleMap[e];if(!n&&i)n=this.style[e];return n||""}cssAny(e,...t){const i=this.css(e);return""!==i&&t.includes(i)}cssInitialAny(e,...t){const i=this.cssInitial(e);return""!==i&&t.includes(i)}cssAscend(e,t=false,i=false){let s,n=t?this:this.actualParent;while(n){if(s=i?n.cssInitial(e):n.css(e),""!==s)return s;if(n.documentBody)break;n=n.actualParent}return""}cssSort(e,t=true,i=false){return(i?this.duplicate():this.children).sort((i,s)=>{const n=i.toFloat(e,i.childIndex),a=s.toFloat(e,s.childIndex);if(n===a)return 0;else if(t)return n<a?-1:1;return n>a?-1:1})}cssPX(e,t,i=false,s=false){const n=this._styleMap[e];if(n&&Z(n)){if(t+=se(n,this.fontSize),!i&&t<0)t=0;const a=$(t);if(this.css(e,a),s)this.unsetCache(e);return a}return""}cssSpecificity(e){var t,i;let s;if(this.styleElement){const n=this._element;if(this.pseudoElement)s=null===(t=pe(n.parentElement,"styleSpecificity"+me(n,this.sessionId),this.sessionId))||void 0===t?void 0:t[e];else s=null===(i=pe(n,"styleSpecificity",this.sessionId))||void 0===i?void 0:i[e]}return s||0}cssTry(e,t){if(this.styleElement){const i=this._element;return Ue(i,e,this.sessionId,t,Q(i).getPropertyValue(e))}return false}cssFinally(e){if(this.styleElement){const t=this._element;if("string"==typeof e)He(t,e,this.sessionId);else for(const i in e)He(t,i,this.sessionId)}}cssTryAll(e){if(this.styleElement){const t=[],i=this._element,s=Q(i);for(const n in e)if(Ue(i,n,this.sessionId,e[n],s.getPropertyValue(n)))t.push(n);else{for(let e=0;e<t.length;++e)this.cssFinally(t[e]);return}return e}}cssParent(e,t,i=false){return this.naturalChild?this.actualParent.css(e,t,i):""}cssCopy(e,...t){const i=this._styleMap;for(let s=0;s<t.length;++s){const n=t[s];i[n]=e.css(n)}}cssCopyIfEmpty(e,...t){const i=this._styleMap;for(let s=0;s<t.length;++s){const n=t[s];if(!ke(i[n]))i[n]=e.css(n)}}cssAsTuple(...e){const t=e.length,i=new Array(t);let s=0;while(s<t)i[s]=this.css(e[s++]);return i}cssAsObject(...e){const t={};for(let i=0;i<e.length;++i){const s=e[i];t[s]=this.css(s)}return t}toInt(e,t=NaN,i=false){var s;const n=parseInt((i&&(null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e]);return isNaN(n)?t:n}toFloat(e,t=NaN,i=false){var s;const n=parseFloat((i&&(null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e]);return isNaN(n)?t:n}toElementInt(e,t=NaN){var i;const s=parseInt(null===(i=this._element)||void 0===i?void 0:i[e]);return!isNaN(s)?s:t}toElementFloat(e,t=NaN){var i;const s=parseFloat(null===(i=this._element)||void 0===i?void 0:i[e]);return!isNaN(s)?s:t}toElementBoolean(e,t=false){var i;const s=null===(i=this._element)||void 0===i?void 0:i[e];return"boolean"==typeof s?s:t}toElementString(e,t=""){var i,s;return(null!==(s=null===(i=this._element)||void 0===i?void 0:i[e])&&void 0!==s?s:t).toString()}parseUnit(e,t="width",i=true,s){var n;if(ee(e)){const s=i&&(null===(n=this.absoluteParent)||void 0===n?void 0:n.box)||this.bounds;let a=parseFloat(e)/100;switch(t){case"width":a*=s.width;break;case"height":a*=s.height;break}return a}return se(e,this.fontSize,s)}has(e,t){var i;let s,n,a;if(t)({map:s,not:n,type:a}=t);const l=("initial"===s&&(null===(i=this._initial)||void 0===i?void 0:i.styleMap)||this._styleMap)[e];if(l)switch(l){case"auto":case"none":case"initial":case"normal":case"rgba(0, 0, 0, 0)":return false;case"top":case"baseline":return"verticalAlign"!==e;case"left":case"start":return"textAlign"!==e;default:if(n)if(Array.isArray(n)){for(let e=0;e<n.length;++e)if(l===n[e])return false}else if(l===n)return false;if(a)return Ee(a,2)&&Z(l)||Ee(a,4)&&ee(l);else return true}return false}hasPX(e,t=true,i=false){var s;return Z((i&&(null===(s=this._initial)||void 0===s?void 0:s.styleMap)||this._styleMap)[e],t)}setBounds(e=true){let t;if(this.styleElement){if(!e)fe(this._element,"clientRect",this.sessionId);t=ae(de(this._element,this.sessionId)),this._bounds=t}else if(this.plainText){const e=re(this._element);t=ae(e);const i=e.numberOfLines;t.numberOfLines=i,this._bounds=t,this._textBounds=t,this._cached.multiline=i>1}if(!e&&t)this._box=void 0,this._linear=void 0;return t}resetBounds(){this._bounds=void 0,this._box=void 0,this._linear=void 0,this._textBounds=void 0,this._cached.multiline=void 0}querySelector(e){return this.querySelectorAll(e,1)[0]||null}querySelectorAll(e,t=-1){let i=[];const s=this.queryMap;if(s&&0!==t){const n=ie(e);let a=n.length,l=0;while(l<a){const e=n[l++],r=[];let o=-1;e:if("*"===e)r.push({all:true}),++o;else{let t,i;Me.lastIndex=0;while(i=Me.exec(e)){let e=i[1],s=false;if(1===e.length){const i=e.charAt(0);switch(i){case"+":case"~":--o;case">":if(t||0===r.length){r.length=0;break e}t=i;continue;case"*":s=true;break}}else if(e.startsWith("*|*")){if(e.length>3){r.length=0;break e}s=true}else if(e.startsWith("*|"))e=e.substring(2);else if(e.startsWith("::")){r.length=0;break e}if(s)r.push({all:true});else{let i,s,n,a,l,o,c;while(c=Ne.exec(e)){if(void 0===a)a=[];let t=c[1].replace("\\:",":"),i=false;switch(t.indexOf("|")){case-1:break;case 1:if("*"===t.charAt(0)){i=true,t=t.substring(2);break}default:r.length=0;break e}const s="i"===c[6];let n=c[3]||c[4]||c[5]||"";if(s)n=n.toLowerCase();a.push({key:t,symbol:c[2],value:n,endsWith:i,caseInsensitive:s}),e=Ae(e,c.index,c[0].length)}if(e.includes("::")){r.length=0;break e}while(c=Be.exec(e)){const t=c[0];if(t.startsWith(":not(")){if(c[1]){if(void 0===o)o=[];o.push(c[1])}}else{if(void 0===l)l=[];l.push(t)}e=Ae(e,c.index,t.length)}while(c=Pe.exec(e)){const t=c[0];switch(t.charAt(0)){case"#":s=t.substring(1);break;case".":if(void 0===n)n=[];n.push(t.substring(1));break;default:i=t.toUpperCase();break}e=Ae(e,c.index,t.length)}r.push({tagName:i,id:s,adjacent:t,classList:n,pseudoList:l,notList:o,attrList:a})}++o,t=void 0}}if(a=s.length,r.length&&-1!==o&&o<a){const e=r.pop(),c=0===r.length,h=i.length;let d;if(e.all&&a-o==1)d=s[o];else{d=[];let t=o;while(t<a){const n=s[t++];if(e.all)d=d.concat(n);else{const t=n.length;let s=0;while(s<t){const t=n[s++];if((0===h||!i.includes(t))&&et(this,t,e,l,c))d.push(t)}}}}if(r.length){const s=this.depth;r.reverse(),a=r.length;const n=(e,t,i)=>{const o=r[e],c=e===a-1,h=[],d=i.length;let u=0;while(u<d){const n=i[u++];if(t){const e=n.actualParent;if(">"===t){if(et(this,e,o,l,c,t))h.push(e)}else{const i=e.naturalElements;switch(t){case"+":{const e=i.indexOf(n);if(e>0){const s=i[e-1];if(s&&et(this,s,o,l,c,t))h.push(s)}break}case"~":{const e=i.length;let s=0;while(s<e){const e=i[s++];if(e===n)break;else if(et(this,e,o,l,c,t))h.push(e)}break}}}}else if(n.depth-s>=a-e){let e=n.actualParent;do{if(et(this,e,o,l,c))h.push(e);e=e.actualParent}while(e)}}if(h.length)if(++e===a)return true;else return n(e,o.adjacent,h);return false};let o=h;const c=d.length;let u=0;while(u<c){const s=d[u++];if((0===h||!i.includes(s))&&n(0,e.adjacent,[s]))if(i.push(s),++o===t)return i.sort(Ve)}}else if(0===h)if(l===n.length-1||t>0&&t<=d.length){if(t>0&&d.length>t)d.length=t;return d.sort(Ve)}else i=d;else{const e=d.length;if(t>0){let s=h,n=0;while(n<e){const e=d[n++];if(!i.includes(e))if(i.push(e),++s===t)return i.sort(Ve)}}else{let t=0;while(t<e){const e=d[t++];if(!i.includes(e))i.push(e)}}}}}}return i.sort(Ve)}set $parent(e){this._parent=e}set parent(e){if(e){const t=this._parent;if(e!==t)null==t||t.remove(this),this._parent=e,e.add(this);else if(!e.contains(this))e.add(this);if(-1===this.depth)this.depth=e.depth+1}}get parent(){return this._parent}get tagName(){let e=this._cached.tagName;if(void 0===e){const t=this._element;if(t){const i=t.nodeName;e="#"===i.charAt(0)?i:t.tagName}else e="";this._cached.tagName=e}return e}get element(){return this._element}get elementId(){var e;return(null===(e=this._element)||void 0===e?void 0:e.id)||""}get htmlElement(){let e=this._cached.htmlElement;if(void 0===e)e=!this.plainText&&this._element instanceof HTMLElement,this._cached.htmlElement=e;return e}get svgElement(){let e=this._cached.svgElement;if(void 0===e)e=!this.htmlElement&&!this.plainText&&this._element instanceof SVGElement||this.imageElement&&he.SVG.test(this.toElementString("src")),this._cached.svgElement=e;return e}get styleElement(){return this.htmlElement||this.svgElement}get naturalChild(){return true}get naturalElement(){let e=this._cached.naturalElement;if(void 0===e)e=this.naturalChild&&this.styleElement&&!this.pseudoElement,this._cached.naturalElement=e;return e}get pseudoElement(){return false}get imageElement(){return"IMG"===this.tagName}get flexElement(){return this.display.endsWith("flex")}get gridElement(){return this.display.endsWith("grid")}get textElement(){return this.plainText||this.inlineText&&"BUTTON"!==this.tagName}get tableElement(){return"TABLE"===this.tagName||"table"===this.display}get inputElement(){switch(this.tagName){case"INPUT":case"BUTTON":case"SELECT":case"TEXTAREA":return true;default:return false}}get plainText(){return"#text"===this.tagName}get styleText(){return this.naturalElement&&this.inlineText}get lineBreak(){return"BR"===this.tagName}get documentBody(){return this._documentBody}get initial(){return this._initial}get bounds(){return this._bounds||this.setBounds(false)||ae(this.boundingClientRect)}get linear(){let e=this._linear;if(void 0===e){const t=this.bounds;if(t)if(this.styleElement){const{marginBottom:i,marginRight:s}=this,n=Math.max(this.marginTop,0),a=Math.max(this.marginLeft,0);e={top:t.top-n,right:t.right+s,bottom:t.bottom+i,left:t.left-a,width:t.width+a+s,height:t.height+n+i}}else e=t;else e=oe();this._linear=e}return e}get box(){let e=this._box;if(void 0===e){const t=this.bounds;if(t)if(this.styleElement&&this.naturalChildren.length)e={top:t.top+(this.paddingTop+this.borderTopWidth),right:t.right-(this.paddingRight+this.borderRightWidth),bottom:t.bottom-(this.paddingBottom+this.borderBottomWidth),left:t.left+(this.paddingLeft+this.borderLeftWidth),width:t.width-this.contentBoxWidth,height:t.height-this.contentBoxHeight};else e=t;else e=oe();this._box=e}return e}get dataset(){if(this.styleElement)return this._element.dataset;else{let e=this._dataset;if(void 0===e)e={},this._dataset=e;return e}}get flexdata(){let e=this._cached.flexdata;if(void 0===e){if(this.flexElement){const{flexWrap:t,flexDirection:i,alignContent:s,justifyContent:n}=this.cssAsObject("flexWrap","flexDirection","alignContent","justifyContent"),a=i.startsWith("row");e={row:a,column:!a,reverse:i.endsWith("reverse"),wrap:t.startsWith("wrap"),wrapReverse:"wrap-reverse"===t,alignContent:s,justifyContent:n}}else e={};this._cached.flexdata=e}return e}get flexbox(){var e;let t=this._cached.flexbox;if(void 0===t){if((null===(e=this.actualParent)||void 0===e?void 0:e.flexElement)&&this.styleElement){const[e,i,s]=this.cssAsTuple("alignSelf","justifySelf","flexBasis");t={alignSelf:"auto"===e?this.cssParent("alignItems"):e,justifySelf:"auto"===i?this.cssParent("justifyItems"):i,basis:s,grow:je(this,"flexGrow",0),shrink:je(this,"flexShrink",1),order:this.toInt("order",0)}}else t={};this._cached.flexbox=t}return t}get width(){let e=this._cached.width;if(void 0===e)e=Ye(this,this._styleMap,"width","minWidth","maxWidth"),this._cached.width=e;return e}get height(){let e=this._cached.height;if(void 0===e)e=Ye(this,this._styleMap,"height","minHeight","maxHeight"),this._cached.height=e;return e}get hasWidth(){let e=this._cached.hasWidth;if(void 0===e)e=this.width>0,this._cached.hasWidth=e;return e}get hasHeight(){var e;let t=this._cached.hasHeight;if(void 0===t){const i=this.css("height");if(ee(i))t=this.pageFlow?(null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||this.documentBody:"fixed"===this.css("position")||this.hasPX("top")||this.hasPX("bottom");else t=this.height>0||this.hasPX("height",false);this._cached.hasHeight=t}return t}get lineHeight(){let e=this._cached.lineHeight;if(void 0===e){if(e=0,!this.imageElement&&!this.svgElement){let t=this.has("lineHeight"),i=0;if(t){const e=this.css("lineHeight");if(ee(e))i=Se(this.style.lineHeight);else if(_e(e))i=parseFloat(e)*this.fontSize;else if(i=se(e,this.fontSize),te(e)&&"inherit"!==this._cssStyle.lineHeight){const e=tt.call(this,"fontSize");if(Xe(e))i*=parseFloat(e)}}else{let e=this.ascend({condition:e=>e.has("lineHeight")})[0];if(e){const s=e.css("lineHeight");if(_e(s))i=parseFloat(s)*this.fontSize,t=true}if(0===i)if(e=this.ascend({condition:e=>e.lineHeight>0})[0],e)i=e.lineHeight;if(this.styleElement){const e=tt.call(this,"fontSize");if(Xe(e)){const s=parseFloat(e);if(1!==s)i*=s,this.css("lineHeight",$(i)),t=true}}}if(t||i>this.height||this.multiline||this.block&&this.naturalChildren.some(e=>e.textElement))e=i}this._cached.lineHeight=e}return e}get display(){return this.css("display")}get positionStatic(){var e;let t=this._cached.positionStatic;if(void 0===t){switch(this.css("position")){case"fixed":case"absolute":t=false;break;case"relative":t=!this.documentBody&&0===this.toFloat("top",0)&&0===this.toFloat("right",0)&&0===this.toFloat("bottom",0)&&0===this.toFloat("left",0),this._cached.positionRelative=!t;break;case"inherit":{const i=null===(e=this._element)||void 0===e?void 0:e.parentElement;if(i){const e=K(i,"position");t="static"===e||"initial"===e}else t=true;break}default:t=true;break}this._cached.positionStatic=t}return t}get positionRelative(){return"relative"===this.css("position")}get top(){let e=this._cached.top;if(void 0===e)e=Ze(this,"top"),this._cached.top=e;return e}get right(){let e=this._cached.right;if(void 0===e)e=Ze(this,"right"),this._cached.right=e;return e}get bottom(){let e=this._cached.bottom;if(void 0===e)e=Ze(this,"bottom"),this._cached.bottom=e;return e}get left(){let e=this._cached.left;if(void 0===e)e=Ze(this,"left"),this._cached.left=e;return e}get marginTop(){let e=this._cached.marginTop;if(void 0===e)e=this.inlineStatic?0:Qe(this,"marginTop",true),this._cached.marginTop=e;return e}get marginRight(){let e=this._cached.marginRight;if(void 0===e)e=Qe(this,"marginRight",true),this._cached.marginRight=e;return e}get marginBottom(){let e=this._cached.marginBottom;if(void 0===e)e=this.inlineStatic?0:Qe(this,"marginBottom",true),this._cached.marginBottom=e;return e}get marginLeft(){let e=this._cached.marginLeft;if(void 0===e)e=Qe(this,"marginLeft",true),this._cached.marginLeft=e;return e}get borderTopWidth(){let e=this._cached.borderTopWidth;if(void 0===e)e=Ke(this,"height",Le),this._cached.borderTopWidth=e;return e}get borderRightWidth(){let e=this._cached.borderRightWidth;if(void 0===e)e=Ke(this,"height",We),this._cached.borderRightWidth=e;return e}get borderBottomWidth(){let e=this._cached.borderBottomWidth;if(void 0===e)e=Ke(this,"width",Fe),this._cached.borderBottomWidth=e;return e}get borderLeftWidth(){let e=this._cached.borderLeftWidth;if(void 0===e)e=Ke(this,"width",Oe),this._cached.borderLeftWidth=e;return e}get paddingTop(){let e=this._cached.paddingTop;if(void 0===e)e=Qe(this,"paddingTop",false),this._cached.paddingTop=e;return e}get paddingRight(){let e=this._cached.paddingRight;if(void 0===e)e=Qe(this,"paddingRight",false),this._cached.paddingRight=e;return e}get paddingBottom(){let e=this._cached.paddingBottom;if(void 0===e)e=Qe(this,"paddingBottom",false),this._cached.paddingBottom=e;return e}get paddingLeft(){let e=this._cached.paddingLeft;if(void 0===e)e=Qe(this,"paddingLeft",false),this._cached.paddingLeft=e;return e}get contentBox(){return"border-box"!==this.css("boxSizing")||this.tableElement&&q(8)}get contentBoxWidth(){let e=this._cached.contentBoxWidth;if(void 0===e)e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderLeftWidth+this.paddingLeft+this.paddingRight+this.borderRightWidth,this._cached.contentBoxWidth=e;return e}get contentBoxHeight(){let e=this._cached.contentBoxHeight;if(void 0===e)e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderTopWidth+this.paddingTop+this.paddingBottom+this.borderBottomWidth,this._cached.contentBoxHeight=e;return e}get inline(){let e=this._cached.inline;if(void 0===e){const t=this.display;e="inline"===t||"initial"===t&&!ne.includes(this.tagName),this._cached.inline=e}return e}get inlineStatic(){let e=this._cached.inlineStatic;if(void 0===e)e=this.inline&&this.pageFlow&&!this.floating&&!this.imageElement,this._cached.inlineStatic=e;return e}set inlineText(e){switch(this.tagName){case"IMG":case"INPUT":case"SELECT":case"TEXTAREA":case"SVG":case"BR":case"HR":case"PROGRESS":case"METER":case"CANVAS":this._inlineText=false;break;case"BUTTON":this._inlineText=Ce(this.textContent);break;default:this._inlineText=e;break}}get inlineText(){return this._inlineText}get block(){let e=this._cached.block;if(void 0===e){switch(this.display){case"block":case"flex":case"grid":case"list-item":e=true;break;case"initial":e=ne.includes(this.tagName);break;case"inline":if("svg"===this.tagName&&this.actualParent.htmlElement){e=!this.hasPX("width")&&0===Se(le(this._element,"width"));break}default:e=false;break}this._cached.block=e}return e}get blockStatic(){let e=this._cached.blockStatic;if(void 0===e){if(e=false,this.pageFlow)if(this.block&&!this.floating||this.lineBreak)e=true;else if("inline"!==this.display&&!this.display.startsWith("table-")&&!this.hasPX("maxWidth")){const t=tt.call(this,"width"),i=tt.call(this,"minWidth");let s=0;if(ee(t))s=parseFloat(t);if(ee(i))s=Math.max(parseFloat(i),s);if(s>0){const t=tt.call(this,"marginLeft"),i=tt.call(this,"marginRight");e=s+(ee(t)?parseFloat(t):0)+(ee(i)?parseFloat(i):0)>=100}}this._cached.blockStatic=e}return e}get pageFlow(){let e=this._cached.pageFlow;if(void 0===e)e=this.positionStatic||this.positionRelative,this._cached.pageFlow=e;return e}get centerAligned(){let e=this._cached.centerAligned;if(void 0===e)e=!this.pageFlow?this.hasPX("left")&&this.hasPX("right"):this.autoMargin.leftRight||Je(this)&&Ge(this,"center"),this._cached.centerAligned=e;return e}get rightAligned(){let e=this._cached.rightAligned;if(void 0===e)e=!this.pageFlow?this.hasPX("right")&&!this.hasPX("left"):"right"===this.float||this.autoMargin.left||Je(this)&&Ge(this,"right","end"),this._cached.rightAligned=e;return e}get bottomAligned(){var e;let t=this._cached.bottomAligned;if(void 0===t)t=!this.pageFlow?this.hasPX("bottom")&&!this.hasPX("top"):true===(null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)&&true===this.autoMargin.top,this._cached.bottomAligned=t;return t}get autoMargin(){let e=this._cached.autoMargin;if(void 0===e){if(!this.pageFlow||this.blockStatic||"table"===this.display){const t=this._styleMap,i="auto"===t.marginLeft&&(this.pageFlow||this.hasPX("right")),s="auto"===t.marginRight&&(this.pageFlow||this.hasPX("left")),n="auto"===t.marginTop&&(this.pageFlow||this.hasPX("bottom")),a="auto"===t.marginBottom&&(this.pageFlow||this.hasPX("top"));e={horizontal:i||s,left:i&&!s,right:!i&&s,leftRight:i&&s,vertical:n||a,top:n&&!a,bottom:!n&&a,topBottom:n&&a}}else e={};this._cached.autoMargin=e}return e}get floating(){return"none"!==this.float}get float(){return this.pageFlow&&this.css("float")||"none"}get zIndex(){return this.toInt("zIndex",0)}get textContent(){return this.naturalChild&&!this.svgElement?this._element.textContent:""}get overflowX(){let e=this._cached.overflow;if(void 0===e)e=$e(this),this._cached.overflow=e;return Ee(e,8)}get overflowY(){let e=this._cached.overflow;if(void 0===e)e=$e(this),this._cached.overflow=e;return Ee(e,16)}get baseline(){let e=this._cached.baseline;if(void 0===e){if(this.pageFlow&&!this.floating){const t=this.css("verticalAlign");e="baseline"===t||"initial"===t||0===this.naturalElements.length&&Z(t,true)}else e=false;this._cached.baseline=e}return e}get verticalAlign(){let e=this._cached.verticalAlign;if(void 0===e){if(this.pageFlow){if(e=this.css("verticalAlign"),Z(e,true))e=this.parseUnit(e,"height")+"px"}else e="0px";this._cached.verticalAlign=e}return e}set textBounds(e){this._textBounds=e}get textBounds(){let e=this._textBounds;if(void 0===e){if(e=null,this.naturalChild)if(this.textElement)e=ue(this._element,this.sessionId);else{const t=this.naturalChildren,i=t.length;if(i){let s=1/0,n=-1/0,a=-1/0,l=1/0,r=0,o=0;while(o<i){const e=t[o++];if(e.textElement){const t=ue(e.element,e.sessionId);s=Math.min(t.top,s),n=Math.max(t.right,n),l=Math.min(t.left,l),a=Math.max(t.bottom,a),r+=t.numberOfLines||0}}if(r>0)e={top:s,right:n,left:l,bottom:a,width:n-l,height:a-s,numberOfLines:r}}}this._textBounds=e}return e}get multiline(){var e;let t=this._cached.multiline;if(void 0===t){if(this.plainText)t=Math.floor(re(this._element).width)>this.actualParent.box.width;else if(this.styleText&&(this.inline||0===this.naturalElements.length||ze(this.display)||this.floating))t=(null===(e=this.textBounds)||void 0===e?void 0:e.numberOfLines)>1;else t=false;this._cached.multiline=t}return t}get backgroundColor(){let e=this._cached.backgroundColor;if(void 0===e){switch(e=this.css("backgroundColor"),e){case"initial":case"transparent":case"rgba(0, 0, 0, 0)":e="";break;default:if(""!==e&&this.pageFlow&&this.styleElement&&!this.inputElement&&(!this._initial||tt.call(this,"backgroundColor")===e)){let t=this.actualParent;while(t){const i=tt.call(t,"backgroundColor",true);if(""!==i){if(i===e&&""===t.backgroundColor)e="";break}t=t.actualParent}}break}this._cached.backgroundColor=e}return e}get backgroundImage(){let e=this._cached.backgroundImage;if(void 0===e){let t=this.css("backgroundImage");if(""!==t&&"none"!==t&&"initial"!==t)e=t;else{e="";const i=/\s*(url|[a-z-]+gradient)/;if(t=this.css("background"),i.test(t)){const s=Re(t),n=s.length;for(let t=1;t<n;++t){const n=s[t-1].trim();if(i.test(n))e+=(""!==e?", ":"")+n+s[t]}}}this._cached.backgroundImage=e}return e}get percentWidth(){let e=this._cached.percentWidth;if(void 0===e){const t=tt.call(this,"width");e=ee(t)?parseFloat(t)/100:0,this._cached.percentWidth=e}return e}get percentHeight(){var e;let t=this._cached.percentHeight;if(void 0===t){const i=tt.call(this,"height");t=ee(i)&&((null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||"fixed"===this.css("position"))?parseFloat(i)/100:0,this._cached.percentHeight=t}return t}get visibleStyle(){let e=this._cached.visibleStyle;if(void 0===e){if(!this.plainText){const t=this.borderTopWidth>0||this.borderRightWidth>0||this.borderBottomWidth>0||this.borderLeftWidth>0,i=""!==this.backgroundColor,s=""!==this.backgroundImage;let n=false,a=false;if(s)for(const e of this.css("backgroundRepeat").split(",")){const[t,i]=e.trim().split(" ");if(!n)n="repeat"===t||"repeat-x"===t;if(!a)a="repeat"===t||"repeat-y"===t||"repeat"===i}e={background:t||s||i,borderWidth:t,backgroundImage:s,backgroundColor:i,backgroundRepeat:n||a,backgroundRepeatX:n,backgroundRepeatY:a}}else e={};this._cached.visibleStyle=e}return e}get absoluteParent(){let e=this._cached.absoluteParent;if(void 0===e){if(e=this.actualParent,!this.pageFlow&&!this.documentBody)while(e&&!e.documentBody){switch(tt.call(e,"position",false,true)){case"static":case"initial":case"unset":e=e.actualParent;continue}break}this._cached.absoluteParent=e}return e}set actualParent(e){this._cached.actualParent=e}get actualParent(){var e;let t=this._cached.actualParent;if(void 0===t){const i=null===(e=this._element)||void 0===e?void 0:e.parentElement;t=i&&ge(i,this.sessionId)||null,this._cached.actualParent=t}return t}get actualWidth(){var e;let t=this._cached.actualWidth;if(void 0===t){if(this.plainText){const e=this.bounds;switch(e.numberOfLines||1){case 1:t=e.width;break;case 2:t=Math.min(e.width,this.actualParent.box.width);break;default:t=Math.min(e.right-e.left,this.actualParent.box.width);break}}else if(this.inlineStatic||"table-cell"===this.display||true===(null===(e=this.actualParent)||void 0===e?void 0:e.flexdata.row))t=this.bounds.width;else if(t=this.width,t>0){if(this.contentBox&&!this.tableElement)t+=this.contentBoxWidth}else t=this.bounds.width;this._cached.actualWidth=t}return t}get actualHeight(){var e;let t=this._cached.actualHeight;if(void 0===t){if(this.inlineStatic||"table-cell"===this.display||true===(null===(e=this.actualParent)||void 0===e?void 0:e.flexdata.column))t=this.bounds.height;else if(t=this.height,t>0){if(this.contentBox&&!this.tableElement)t+=this.contentBoxHeight}else t=this.bounds.height;this._cached.actualHeight=t}return t}get actualDimension(){return{width:this.actualWidth,height:this.actualHeight}}set naturalChildren(e){this._naturalChildren=e}get naturalChildren(){return this._naturalChildren||function(e){var t;let i;if(e.naturalElement){const t=e.sessionId;i=[];let s=0;e.element.childNodes.forEach(e=>{const n=ge(e,t);if(n)n.childIndex=s++,i.push(n)})}else i=((null===(t=e.initial)||void 0===t?void 0:t.children)||e.children).slice(0);return e.naturalChildren=i,i}(this)}set naturalElements(e){this._naturalElements=e}get naturalElements(){return this._naturalElements||function(e){const t=e.naturalChildren.filter(e=>e.naturalElement);return e.naturalElements=t,t}(this)}get firstChild(){return this.naturalElements[0]||null}get lastChild(){const e=this.naturalElements,t=e.length;return t?e[t-1]:null}get previousSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex-1])||null}get nextSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex+1])||null}get previousElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(e>0)return t[e-1]}return null}get nextElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(-1!==e)return t[e+1]||null}return null}get attributes(){let e=this._cached.attributes;if(void 0===e){if(e={},this.styleElement){const t=this._element.attributes,i=t.length;let s=0;while(s<i){const{name:i,value:n}=t.item(s++);e[i]=n}}this._cached.attributes=e}return e}get boundingClientRect(){var e;return this.naturalElement&&(null===(e=this._element)||void 0===e?void 0:e.getBoundingClientRect())||this._bounds||oe()}get fontSize(){var e,t,i;let s=this._fontSize;if(void 0===s){if(this.naturalChild&&this.styleElement){const t=tt.call(this,"fontSize");if(te(t))s=parseFloat(t);else if(ee(t)&&!this.documentBody)s=((null===(e=this.actualParent)||void 0===e?void 0:e.fontSize)||qe(Q(document.body)))*parseFloat(t)/100;else s=qe(this.style)}else s=se(this.css("fontSize"));if(0===s&&!this.naturalChild){const e=this.element;if(e&&J(e))s=(null===(t=ge(e,this.sessionId))||void 0===t?void 0:t.fontSize)||qe(Q(e));else s=(null===(i=this.ascend({condition:e=>e.fontSize>0})[0])||void 0===i?void 0:i.fontSize)||qe(Q(document.body))}this._fontSize=s}return s}get cssStyle(){return this._cssStyle}get textStyle(){let e=this._textStyle;if(void 0===e)e=this.cssAsObject(...Node.TEXT_STYLE),e.fontSize=this.fontSize+"px",this._textStyle=e;return e}set dir(e){this._cached.dir=e}get dir(){let e=this._cached.dir;if(void 0===e){if(e=this.naturalElement?this._element.dir:"",""===e){let t=this.actualParent;while(t){if(e=t.dir,""!==e)break;t=t.actualParent}}this._cached.dir=e}return e}get center(){const e=this.bounds;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}}return Node.BOX_POSITION=["top","right","bottom","left"],Node.TEXT_STYLE=["fontFamily","fontWeight","fontStyle","fontVariant","fontStretch","color","whiteSpace","textDecoration","textTransform","letterSpacing","wordSpacing"],Node})();var st,nt,at;!function(e){e[e.DOM_TRAVERSE=2]="DOM_TRAVERSE",e[e.EXTENSION=4]="EXTENSION",e[e.RENDER=8]="RENDER",e[e.ALL=14]="ALL"}(st||(st={})),function(e){e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.IMAGE_SOURCE=32]="IMAGE_SOURCE",e[e.ASSET=56]="ASSET",e[e.ALL=126]="ALL"}(nt||(nt={})),function(e){e[e.CONSTRAINT=2]="CONSTRAINT",e[e.LAYOUT=4]="LAYOUT",e[e.ALIGNMENT=8]="ALIGNMENT",e[e.ACCESSIBILITY=16]="ACCESSIBILITY",e[e.LOCALIZATION=32]="LOCALIZATION",e[e.CUSTOMIZATION=64]="CUSTOMIZATION",e[e.ALL=126]="ALL"}(at||(at={}));var lt=Object.freeze({__proto__:null,get APP_SECTION(){return st},get NODE_RESOURCE(){return nt},get NODE_PROCEDURE(){return at}});const{CSS_PROPERTIES:rt}=squared.lib.css,{equal:ot}=squared.lib.math,{getElementAsNode:ct}=squared.lib.session,{capitalize:ht,cloneObject:dt,convertWord:ut,hasBit:ft,hasKeys:gt,isArray:pt,isString:mt,iterateArray:bt,safeNestedMap:xt,searchObject:yt,withinRange:vt}=squared.lib.util,St=new Map,wt=[2,4,8,16],Et=rt.margin.value,kt=[32,64,128,256],_t=rt.padding.value;for(let e=0;e<4;++e)St.set(wt[e],Et[e]);for(let e=0;e<4;++e)St.set(kt[e],_t[e]);function Tt(e,t,i,s,n){let a=i[e+n]||i[e]||"",l=0;const r=s[e+"Child"+n]||s[e+"Child"];if(r)a+=(""!==a?"|":"")+r;if(""!==a)for(const e of a.split("|")){const i=t[e.trim().toUpperCase()]||0;if(i>0&&!ft(l,i))l|=i}return l}function Ct(e,t,i,s){let n,a,l,r;if(s)({floating:n,pageFlow:a,lineBreak:l,excluded:r}=s);const o=[];while(e){const s=ct(e,i);if(s)if(false!==l&&s.lineBreak||false!==r&&s.excluded&&!s.lineBreak)o.push(s);else if(s.pageFlow&&!s.excluded){if(false===a)break;if(o.push(s),false!==n||!s.floating&&(s.visible||s.rendered)&&"none"!==s.display)break}e=e[t]}return o}function It(e){return e.naturalElements.length>0&&!e.layoutElement&&!e.tableElement}function At(e,t){return e.blockDimension&&Math.ceil(e.bounds.top)>=t.bounds.bottom&&(e.blockVertical||t.blockVertical||e.percentWidth>0||t.percentWidth>0)}function Rt(e){return e.inlineDimension&&!e.hasPX("maxWidth")?e.percentWidth:-1/0}function Nt(e){return e.actualWidth+Math.max(e.marginLeft,0)+e.marginRight}function Mt(e,t,i,s,n,a){for(let l=0;l<4;++l){const r=s[l];if(ft(n,r)){const s=i[l];if(t[s]=1,a){const t=e.registerBox(r);if(t)t.resetBox(r,a);else{if(e.naturalChild){const t=e[s];if(t>=0)a.modifyBox(r,t)}e.transferBox(r,a)}}}}}function Pt(e,t,i,s,n,a){for(let l=0;l<4;++l){const r=s[l];if(ft(n,r)){const s=e.registerBox(r);if(s)s.transferBox(r,a);else{const s=i[l],n=t[s];if(0!==n)a.modifyBox(r,n,false),t[s]=0;e.registerBox(r,a)}}}}class NodeUI extends it{constructor(){super(...arguments),this.alignmentType=0,this.rendered=false,this.excluded=false,this.originalRoot=false,this.floatContainer=false,this.lineBreakLeading=false,this.lineBreakTrailing=false,this.baselineActive=false,this.baselineAltered=false,this._boxRegister={},this._preferInitial=true,this._excludeSection=0,this._excludeProcedure=0,this._excludeResource=0,this._childIndex=1/0,this._containerIndex=1/0,this._visible=true,this._renderAs=null,this._locked={}}static refitScreen(e,t){const{width:i,height:s}=e.localSettings.screenDimension;let{width:n,height:a}=t;if(n>i)a=Math.round(a*i/n),n=i;else if(a>s)n=Math.round(n*s/a),a=s;else return t;return{width:n,height:a}}static outerRegion(e){let t,i,s,n,a=1/0,l=-1/0,r=-1/0,o=1/0,c=-1/0,h=-1/0;return e.each(e=>{if(e.companion)t=e.actualRect("top"),i=e.actualRect("right"),s=e.actualRect("bottom"),n=e.actualRect("left");else{if(({top:t,right:i,bottom:s,left:n}=e.linear),e.marginRight<0){const t=i+Math.abs(e.marginRight);if(t>c)c=t}if(e.marginBottom<0){const t=s+Math.abs(e.marginBottom);if(t>h)h=t}}if(t<a)a=t;if(i>l)l=i;if(s>r)r=s;if(n<o)o=n}),{top:a,right:l,bottom:r,left:o,width:Math.max(l,c)-o,height:Math.max(r,h)-a}}static baseline(e,t=false){const i=[],s=e.length;let n=0;while(n<s){const s=e[n++];if(s.baseline&&(!t||s.textElement)&&!s.baselineAltered)if(s.naturalElements.length){if(s.baselineElement)i.push(s)}else i.push(s)}if(i.length>1)i.sort((e,t)=>{if(e.length&&0===t.length)return 1;else if(t.length&&0===e.length)return-1;const i=e.baselineHeight+e.marginBottom,s=t.baselineHeight+t.marginBottom;if(!ot(i,s))return i>s?-1:1;else if(e.textElement&&t.textElement){if(!e.pseudoElement&&t.pseudoElement)return-1;else if(e.pseudoElement&&!t.pseudoElement)return 1;else if(!e.plainText&&t.plainText)return-1;else if(e.plainText&&!t.plainText)return 1}else if(e.inputElement&&t.inputElement&&e.containerType!==t.containerType)return e.containerType>t.containerType?-1:1;else if(t.textElement&&e.inputElement&&t.childIndex<e.childIndex)return 1;else if(e.textElement&&t.inputElement&&e.childIndex<t.childIndex)return-1;const n=e.bounds.bottom,a=t.bounds.bottom;if(n>a)return-1;else if(n<a)return 1;return 0});return i[0]||null}static linearData(e,t){const i=new Set;let s=false,n=false;const a=e.length;if(a>1){const l=new Array(a);let r=0,o=0;while(r<a){const t=e[r++];if(t.pageFlow){if(t.floating)i.add(t.float);l[o++]=t}else if(t.autoPosition)l[o++]=t}if(o){l.length=o;const e=[l[0]];let a=1,c=1;r=1;while(r<o){const i=l[r++];if(i.alignedVertically(e,t)>0)++c;else++a;if(a>1&&c>1)break;e.push(i)}if(s=a===o,n=c===o,s&&i.size){let e=1/0,t=-1/0,i=-1/0,n=1/0;r=0;while(r<o){const s=l[r++],{left:a,right:o}=s.linear;switch(e=Math.min(e,a),t=Math.max(t,o),s.float){case"left":i=Math.max(i,o);break;case"right":n=Math.min(n,a);break}}let a=0,c=0,h=0,d=0;for(r=0;r<o;++r){const o=l[r],{left:u,right:f}=o.linear;if(Math.floor(u)<=e)++a;if(Math.ceil(f)>=t)++c;if(!o.floating){if(u===i)++h;if(f===n)++d}if(0===r)continue;if(2===a||2===c||2===h||2===d){s=false;break}const g=l[r-1];if(vt(u,g.linear.left)||g.floating&&Math.ceil(o.bounds.top)>=g.bounds.bottom){s=false;break}}}}}else if(a)n=e[0].blockStatic,s=!n;return{linearX:s,linearY:n,floated:i,cleared:t}}static partitionRows(e,t){const i=[];let s=[],n=[];const a=e.length;let l=0;while(l<a){const a=e[l++];let r=a;if(!a.naturalChild){if(a.nodeGroup){if(s.length)i.push(s);i.push([a]),s=[],n.length=0;continue}const e=a.innerMostWrapped;if(e!==a)r=e}if(0===s.length)s.push(a),n.push(r);else if(r.alignedVertically(n,t)>0){if(s.length)i.push(s);s=[a],n=[r]}else s.push(a),n.push(r)}if(s.length)i.push(s);return i}is(e){return this.containerType===e}of(e,...t){return this.is(e)&&t.some(e=>this.hasAlign(e))}attr(e,t,i,s=true){let n=this["__"+e];if(i){if(!n){if(!this._namespaces.includes(e))this._namespaces.push(e);n={},this["__"+e]=n}if(s&&this.lockedAttr(e,t))s=false;if(!s&&n[t])i=n[t];else n[t]=i;return i}else return(null==n?void 0:n[t])||""}unsafe(e,t){if(void 0!==t)this["_"+e]=t;else return this["_"+e]}unset(e){delete this["_"+e]}namespace(e){return this["__"+e]||{}}delete(e,...t){const i=this["__"+e];if(i)for(let e=0;e<t.length;++e){const s=t[e];if(s.includes("*"))for(const[e]of yt(i,s))delete i[e];else delete i[s]}}lockAttr(e,t){xt(this._locked,e)[t]=true}unlockAttr(e,t){const i=this._locked[e];if(i)i[t]=false}lockedAttr(e,t){var i;return true===(null===(i=this._locked[e])||void 0===i?void 0:i[t])}render(e){this.renderParent=e,this.rendered=true}parseUnit(e,t="width",i=true,s){return super.parseUnit(e,t,i,s||this.localSettings.screenDimension)}parseWidth(e,t=true){return super.parseUnit(e,"width",t,this.localSettings.screenDimension)}parseHeight(e,t=true){return super.parseUnit(e,"height",t,this.localSettings.screenDimension)}renderEach(e){const t=this.renderChildren,i=t.length;let s=0;while(s<i)e(t[s],s++,t);return this}hide(e){if(null==e?void 0:e.remove)this.removeTry(e);this.rendered=true,this.visible=false}inherit(e,...t){let i;for(let s=0;s<t.length;++s)switch(t[s]){case"base":{if(this._documentParent=e.documentParent,this._bounds=e.bounds,this._linear=e.linear,this._box=e.box,-1===this.depth)this.depth=e.depth;const t=e.actualParent;if(t)this.actualParent=t,this.dir=t.dir;break}case"initial":i=e.unsafe("initial"),this.inheritApply("initial",i);break;case"alignment":if(this.cssCopy(e,"position","display","verticalAlign","float","clear","zIndex"),!this.positionStatic){let t=0;while(t<4){const i=NodeUI.BOX_POSITION[t++];if(e.hasPX(i))this._styleMap[i]=e.css(i)}}Object.assign(this.autoMargin,e.autoMargin),this.autoPosition=e.autoPosition;break;case"styleMap":this.cssCopyIfEmpty(e,...Object.keys(e.unsafe("styleMap")));break;case"textStyle":i=e.textStyle,this.inheritApply("textStyle",i);break;case"boxStyle":{i=e.cssAsObject("backgroundRepeat","backgroundSize","backgroundPositionX","backgroundPositionY","backgroundClip","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"),Object.assign(i,{backgroundColor:e.backgroundColor,backgroundImage:e.backgroundImage,border:"inherit",borderRadius:"inherit"}),this.inheritApply("boxStyle",i),e.setCacheValue("backgroundColor",""),e.setCacheValue("backgroundImage",""),e.cssApply({backgroundColor:"transparent",backgroundImage:"none",border:"initial",borderRadius:"initial"});const t=e.visibleStyle;t.background=false,t.backgroundImage=false,t.backgroundRepeatX=false,t.backgroundRepeatY=false,t.backgroundColor=false,t.borderWidth=false;break}}return i}inheritApply(e,t){switch(e){case"initial":dt(t,this.initial);break;case"textStyle":this.cssApply(t),this.setCacheValue("fontSize",parseFloat(t.fontSize));break;case"boxStyle":this.cssApply(t),this.unsetCache("borderTopWidth","borderBottomWidth","borderRightWidth","borderLeftWidth"),this.setCacheValue("backgroundColor",t.backgroundColor),this.setCacheValue("backgroundImage",t.backgroundImage);break}}addAlign(e){if(!this.hasAlign(e))this.alignmentType|=e}removeAlign(e){if(this.hasAlign(e))this.alignmentType^=e}hasAlign(e){return ft(this.alignmentType,e)}hasResource(e){return!ft(this._excludeResource,e)}hasProcedure(e){return!ft(this._excludeProcedure,e)}hasSection(e){return!ft(this._excludeSection,e)}exclude(e){const{resource:t,procedure:i,section:s}=e;if(t&&!ft(this._excludeResource,t))this._excludeResource|=t;if(i&&!ft(this._excludeProcedure,i))this._excludeProcedure|=i;if(s&&!ft(this._excludeSection,s))this._excludeSection|=s}setExclusions(e){var t;if(this.naturalElement){const i=this._element,s=i.dataset,n=(null===(t=i.parentElement)||void 0===t?void 0:t.dataset)||{};if(gt(s)||gt(n))e=ht(e||this.localSettings.systemName),this.exclude({resource:Tt("excludeResource",nt,s,n,e),procedure:Tt("excludeProcedure",at,s,n,e),section:Tt("excludeSection",st,s,n,e)})}}replaceTry(e){const{child:t,replaceWith:i}=e,s=this.children,n=s.length;for(let e=0;e<n;++e){const n=s[e];if(n===t||n===t.outerMostWrapper)return s[e]=i,i.$parent=this,i.containerIndex=t.containerIndex,i.depth=t.depth,true}if(e.notFoundAppend)return i.parent=this,true;else return false}removeTry(e){var t,i,s;const n=this.renderParent;if(n){const{renderTemplates:a,renderChildren:l}=n;if(a){const r=l.findIndex(e=>e===this);if(-1!==r){const o=a[r];if(o.node===this){const c=null==e?void 0:e.replaceWith;if(c){const s=c.renderParent;if(s){const h=s.renderTemplates;if(h){const d=h.findIndex(e=>e.node===c);if(-1!==d){if(null===(i=(t=e).beforeReplace)||void 0===i||i.call(t,this,c),l[r]=c,a[r]=h[d],h.splice(d,1),s.renderChildren.splice(d,1),c.renderParent=n,this.documentRoot)c.documentRoot=true,this.documentRoot=false;return c.depth=this.depth,this.renderParent=void 0,o}}}}else return null===(s=null==e?void 0:e.beforeReplace)||void 0===s||s.call(e,this,void 0),l.splice(r,1),this.renderParent=void 0,a.splice(r,1)[0]}}}}}sort(e){if(e)super.sort(e);else this.children.sort((e,t)=>e.containerIndex<t.containerIndex?-1:1);return this}alignedVertically(e,t,i){if(this.lineBreak)return 2;else if(this.autoPosition&&pt(e))return e[e.length-1].blockStatic?1:0;else if(this.pageFlow){const s=this.floating;if(pt(e)){const n=e[e.length-1];if(t)if(t.size&&(t.has(this)||this.siblingsLeading.some(e=>e.excluded&&t.has(e))))return 4;else if(s&&n.floating){if(i&&this.float===n.float||Math.floor(this.bounds.top)===Math.floor(n.bounds.top))return 0;else if(Math.ceil(this.bounds.top)>=n.bounds.bottom){if(e.every(e=>e.inlineDimension)){const t=this.actualParent;if(t&&t.ascend({condition:e=>!e.inline&&e.hasWidth,error:e=>e.layoutElement,startSelf:true})){const i=e.length;if(t.naturalChildren.filter(e=>e.visible&&e.pageFlow).length===i+1){let s=t.box.width-Nt(this),n=0;while(n<i)s-=Nt(e[n++]);if(s>=0)return 0}}}return 6}}else if(this.blockStatic&&e.reduce((e,t)=>e+(t.floating?t.linear.width:-1/0),0)/this.actualParent.box.width>=.8)return 7;else if(e.every(e=>e.inlineDimension&&Math.ceil(this.bounds.top)>=e.bounds.bottom))return 5;else if(void 0!==i)if(s&&!i&&n.blockStatic)return 0;else if(!this.display.startsWith("inline-")){let{top:s,bottom:n}=this.bounds;if(this.textElement&&t.size&&e.some(e=>t.has(e))&&e.some(e=>Math.floor(s)<e.bounds.top&&Math.ceil(n)>e.bounds.bottom))return 7;else if(e[0].floating)if(e.length>1){const t=e[0].float;let a=-1/0,l=0,r=0;while(r<e.length){const i=e[r++];if(i.floating){if(i.float===t)a=Math.max(i.actualRect("bottom","bounds"),a);l+=i.linear.width}}if(Math.ceil(l)>=this.actualParent.box.width)return 5;else if(this.multiline){if(this.styleText){const e=this.textBounds;if(e)n=e.bottom}const e=n-a;s=e<=0||e/(n-s)<.5?-1/0:1/0}else s=Math.ceil(s);if(s<Math.floor(a))return i?0:5;else return i?5:0}else if(!i)return 5}if(At(this,n))return 3;else{const t=Rt(this);if(t>0&&e.reduce((e,t)=>e+Rt(t),t)>1)return 8}}const n=this.blockStatic||"table"===this.display,a=this.siblingsLeading.length;if(n&&(0===this.containerIndex||0===a))return 1;let l=0;while(l<a){const r=this.siblingsLeading[l++];if(r.lineBreak)return 2;else if(r.blockStatic||r.autoMargin.leftRight||(s&&0===r.childIndex||false===i)&&r.plainText&&r.multiline)return 1;else if(n&&(!r.floating||(null==t?void 0:t.has(r))||l===a-1&&!r.pageFlow))return 1;else if(r.floating){if("left"===r.float){if(this.autoMargin.right)return 5}else if(this.autoMargin.left)return 5;if(this.floatContainer&&this.some(e=>e.floating&&Math.ceil(e.bounds.top)>=r.bounds.bottom))return 5}if((null==t?void 0:t.has(r))&&!((null==e?void 0:e[0])===r))return 4;else if(At(this,r))return 3}}else return 1;return 0}previousSiblings(e){var t,i,s;return Ct(this.nodeGroup?null===(i=null===(t=this.firstChild)||void 0===t?void 0:t.element)||void 0===i?void 0:i.previousSibling:null===(s=this.innerMostWrapped.element)||void 0===s?void 0:s.previousSibling,"previousSibling",this.sessionId,e)}nextSiblings(e){var t,i,s;return Ct(this.nodeGroup?null===(i=null===(t=this.firstChild)||void 0===t?void 0:t.element)||void 0===i?void 0:i.nextSibling:null===(s=this.innerMostWrapped.element)||void 0===s?void 0:s.nextSibling,"nextSibling",this.sessionId,e)}modifyBox(e,t,i=true){if(0!==t){const s=St.get(e);if(s){const n=this._boxRegister[e];if(void 0===t)if(n){const t=this[s]||n.getBox(e)[1];if(t>0)n.modifyBox(e,-t,i)}else this._boxReset[s]=1;else if(n)n.modifyBox(e,t,i);else{const e=this._boxAdjustment;if(!i&&(0===this._boxReset[s]?this[s]:0)+e[s]+t<=0){if(e[s]=0,this[s]>=0&&t<0)this._boxReset[s]=1}else e[s]+=t}}}}getBox(e){const t=St.get(e);return t?[this._boxReset[t],this._boxAdjustment[t]]:[NaN,0]}setBox(e,t){const i=St.get(e);if(i){const s=this._boxRegister[e];if(s)s.setBox(e,t);else{const{reset:e,adjustment:s}=t,n=this._boxReset,a=this._boxAdjustment;if(void 0!==e)n[i]=e;if(void 0!==s){let e=a[i];if(t.accumulate)e+=s;else e=s;if(false===t.negative&&(0===n[i]?this[i]:0)+e<=0)if(e=0,this[i]>=0&&e<0)n[i]=1;a[i]=e}else if(1===e&&!this.naturalChild)a[i]=0}}}resetBox(e,t){if(ft(30,e))Mt(this,this._boxReset,Et,wt,e,t);if(ft(480,e))Mt(this,this._boxReset,_t,kt,e,t)}transferBox(e,t){if(ft(30,e))Pt(this,this._boxAdjustment,Et,wt,e,t);if(ft(480,e))Pt(this,this._boxAdjustment,_t,kt,e,t)}registerBox(e,t){const i=this._boxRegister;if(t)i[e]=t;else t=i[e];while(t){const i=t.unsafe("boxRegister")[e];if(i)t=i;else break}return t}actualPadding(e,t){if(t>0){if(!this.layoutElement){const i=this.innerMostWrapped;if(i!==this)if(i.naturalChild){if(0===i.getBox("paddingTop"===e?32:128)[0])return 0}else return t;if(i.naturalChild)return It(i)&&function e(t,i,s){let n=false;const a=t.length;let l=0;while(l<a){const a=t[l++];if(a.blockStatic)return false;else if(a.inlineStatic)if(a.has("lineHeight")&&a.lineHeight>a.bounds.height)return false;else if(a[i]>=s)n=true;else if(It(a))if(!e(a.naturalChildren,i,s))return false;else n=true}return n}(i.naturalChildren,e,t)?0:t}else if(this.gridElement)switch(this.css("alignContent")){case"space-around":case"space-evenly":return 0}return t}return 0}actualBoxWidth(e){if(!e)e=this.box.width;if(this.pageFlow&&!this.documentRoot){let t=0,i=0,s=this.actualParent;while(s){if(s.hasPX("width",false)||!s.pageFlow)return e;else t+=Math.max(s.marginLeft,0)+s.borderLeftWidth+s.paddingLeft,i+=s.paddingRight+s.borderRightWidth+s.marginRight;if(s.documentRoot)break;else s=s.actualParent}const n=this.localSettings.screenDimension.width-t-i;if(n>0)return Math.min(e,n)}return e}cloneBase(e){if(e.localSettings=this.localSettings,e.alignmentType=this.alignmentType,e.containerName=this.containerName,e.depth=this.depth,e.visible=this.visible,e.excluded=this.excluded,e.rendered=this.rendered,e.childIndex=this.childIndex,e.containerIndex=this.containerIndex,e.inlineText=this.inlineText,e.lineBreakLeading=this.lineBreakLeading,e.lineBreakTrailing=this.lineBreakTrailing,e.actualParent=this.actualParent,e.documentParent=this.documentParent,e.documentRoot=this.documentRoot,e.renderParent=this.renderParent,this.length)e.retainAs(this.duplicate());e.inherit(this,"initial","base","alignment","styleMap","textStyle"),Object.assign(e.unsafe("cached"),this._cached)}unsetCache(...e){if(e.length){const t=this._cached;for(let i=0;i<e.length;++i)switch(e[i]){case"top":case"right":case"bottom":case"left":t.autoPosition=void 0,t.positiveAxis=void 0;break;case"fontSize":case"lineHeight":t.baselineHeight=void 0;break;case"whiteSpace":t.preserveWhiteSpace=void 0,t.textEmpty=void 0;break}}super.unsetCache(...e)}css(e,t,i=false){if(arguments.length>=2){if(t)this._styleMap[e]=t;else if(null===t)delete this._styleMap[e];if(i)this.unsetCache(e)}return this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=false){if(Object.assign(this._styleMap,e),t)this.unsetCache(...Object.keys(e));return this}cssSet(e,t,i=true){return super.css(e,t,i)}setCacheValue(e,t){this._cached[e]=t}get element(){return this._element||!!this.innerWrapped&&this.innerMostWrapped.unsafe("element")||null}set naturalChild(e){this._cached.naturalChild=e}get naturalChild(){var e;let t=this._cached.naturalChild;if(void 0===t)t=!!(null===(e=this._element)||void 0===e?void 0:e.parentElement),this._cached.naturalChild=t;return t}get pseudoElement(){var e;return"__squared.pseudo"===(null===(e=this._element)||void 0===e?void 0:e.className)}get layoutElement(){let e=this._cached.layoutElement;if(void 0===e)e=this.flexElement||this.gridElement,this._cached.layoutElement=e;return e}set documentParent(e){this._documentParent=e}get documentParent(){return this._documentParent||this.absoluteParent||this.actualParent||this.parent||this}set containerName(e){this._cached.containerName=e.toUpperCase()}get containerName(){let e=this._cached.containerName;if(void 0===e){const t=this.element;if(t)if("#text"===t.nodeName)e="PLAINTEXT";else if("INPUT"===t.tagName)e="INPUT_"+ut(t.type,true).toUpperCase();else e=t.tagName.toUpperCase();else e="";this._cached.containerName=e}return e}get layoutHorizontal(){return this.hasAlign(8)}get layoutVertical(){if(this.hasAlign(16))return true;else if(this.naturalChild){const e=this.naturalChildren;return 1===e.length&&e[0].blockStatic}return false}get nodeGroup(){return false}set renderAs(e){if(!this.rendered&&false===(null==e?void 0:e.rendered))this._renderAs=e}get renderAs(){return this._renderAs}get positionRelative(){var e;return null!==(e=this._cached.positionRelative)&&void 0!==e?e:super.positionRelative}get inlineVertical(){let e=this._cached.inlineVertical;if(void 0===e){if(this.naturalElement&&!this.floating){const t=this.display;e=t.startsWith("inline")||"table-cell"===t}else e=false;this._cached.inlineVertical=e}return e}get inlineDimension(){let e=this._cached.inlineDimension;if(void 0===e)e=this.naturalElement&&(this.display.startsWith("inline-")||this.floating),this._cached.inlineDimension=e;return e}get inlineFlow(){var e;let t=this._cached.inlineFlow;if(void 0===t)t=this.inline||this.inlineDimension||this.inlineVertical||this.imageElement||this.svgElement&&this.hasPX("width",false)||this.tableElement&&true===(null===(e=this.previousSibling)||void 0===e?void 0:e.floating),this._cached.inlineFlow=t;return t}get blockStatic(){return super.blockStatic||this.hasAlign(64)&&this.pageFlow&&!this.floating}get blockDimension(){let e=this._cached.blockDimension;if(void 0===e){if(this.block||this.floating||this.imageElement||this.svgElement)e=true;else{const t=this.display;e=t.startsWith("inline-")||"table"===t}this._cached.blockDimension=e}return e}get blockVertical(){let e=this._cached.blockVertical;if(void 0===e)e=this.blockDimension&&this.hasHeight,this._cached.blockVertical=e;return e}get rightAligned(){return super.rightAligned||this.hasAlign(2048)}set autoPosition(e){this._cached.autoPosition=e}get autoPosition(){let e=this._cached.autoPosition;if(void 0===e){if(this.pageFlow)e=false;else{const{top:t,right:i,bottom:s,left:n}=this._styleMap;e=!(t&&"auto"!==t||n&&"auto"!==n||i&&"auto"!==i||s&&"auto"!==s)}this._cached.autoPosition=e}return e}set textContent(e){this._cached.textContent=e}get textContent(){var e;return null!==(e=this._cached.textContent)&&void 0!==e?e:(()=>(this._cached.textContent=super.textContent,this._cached.textContent))()}get positiveAxis(){let e=this._cached.positiveAxis;if(void 0===e)e=(!this.positionRelative||this.positionRelative&&this.top>=0&&this.left>=0&&(this.right<=0||this.hasPX("left"))&&(this.bottom<=0||this.hasPX("top")))&&this.marginTop>=0&&this.marginLeft>=0&&this.marginRight>=0,this._cached.positiveAxis=e;return e}get leftTopAxis(){let e=this._cached.leftTopAxis;if(void 0===e){switch(this.cssInitial("position")){case"absolute":e=this.absoluteParent===this.documentParent;break;case"fixed":e=true;break;default:e=false;break}this._cached.leftTopAxis=e}return e}get baselineElement(){let e=this._cached.baselineElement;if(void 0===e){if(this.baseline){const t=this.naturalChildren;if(t.length)e=t.every(e=>e.baselineElement&&0===e.length);else e=this.inlineText&&this.textElement||this.plainText&&!this.multiline||this.inputElement||this.imageElement||this.svgElement}else e=false;this._cached.baselineElement=e}return e}set multiline(e){this._cached.multiline=e,this._cached.baselineElement=void 0}get multiline(){return super.multiline}set visible(e){this._visible=e}get visible(){return this._visible}set controlName(e){if(!this.rendered||!this._controlName)this._controlName=e}get controlName(){return this._controlName||""}set actualParent(e){this._cached.actualParent=e}get actualParent(){let e=this._cached.actualParent;if(void 0===e)e=super.actualParent||this.innerMostWrapped.actualParent,this._cached.actualParent=e;return e}set siblingsLeading(e){this._siblingsLeading=e}get siblingsLeading(){return this._siblingsLeading||this.previousSiblings()}set siblingsTrailing(e){this._siblingsTrailing=e}get siblingsTrailing(){return this._siblingsTrailing||this.nextSiblings()}get previousSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){let e=i-1;while(e>=0){const i=t[e--];if(i&&(!i.excluded||i.lineBreak))return i}}}return null}get nextSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){const e=t.length;let s=i+1;while(s<e){const e=t[s++];if(e&&(!e.excluded||e.lineBreak))return e}}}return null}get firstChild(){return this.naturalChildren[0]||null}get lastChild(){return this.naturalChildren[this.naturalChildren.length-1]||null}get firstStaticChild(){return this.naturalChildren.find(e=>e.pageFlow)||null}get lastStaticChild(){const e=this.naturalChildren;let t=e.length-1;while(t>=0){const i=e[t--];if(i.pageFlow)return i}return null}get onlyChild(){var e,t,i;return 1===(null!==(t=null===(e=this.renderParent)||void 0===e?void 0:e.renderChildren.length)&&void 0!==t?t:null===(i=this.parent)||void 0===i?void 0:i.length)&&!this.documentRoot}set childIndex(e){this._childIndex=e}get childIndex(){let e=this._childIndex;if(e===1/0){let t=this.innerWrapped;if(t)do{const i=t.childIndex;if(i!==1/0){e=i,this._childIndex=e;break}t=t.innerWrapped}while(t);else{const t=this._element;if(t){const i=t.parentElement;if(i)bt(i.childNodes,(i,s)=>{if(i===t)return e=s,this._childIndex=s,true})}}}return e}set containerIndex(e){this._containerIndex=e}get containerIndex(){let e=this._containerIndex;if(e===1/0){let t=this.innerWrapped;while(t){const i=t.containerIndex;if(i!==1/0){e=i,this._containerIndex=e;break}t=t.innerWrapped}}return e}get textEmpty(){if(this.styleElement&&!this.imageElement&&!this.svgElement&&!this.inputElement){const e=this.textContent;return""===e||!this.preserveWhiteSpace&&!mt(e)}return false}get innerMostWrapped(){if(this.naturalChild)return this;let e=this.innerWrapped;while(e){const t=e.innerWrapped;if(t)e=t;else break}return e||this}get outerMostWrapper(){let e=this.outerWrapper;while(e){const t=e.outerWrapper;if(t)e=t;else break}return e||this}get preserveWhiteSpace(){let e=this._cached.preserveWhiteSpace;if(void 0===e){const t=this.css("whiteSpace");e="pre"===t||"pre-wrap"===t,this._cached.preserveWhiteSpace=e}return e}set use(e){const t=this.use;this.dataset["use"+ht(this.localSettings.systemName)]=(t?t+", ":"")+e}get use(){const e=this.dataset;return e["use"+ht(this.localSettings.systemName)]||e.use}get extensions(){var e;let t=this._cached.extensions;if(void 0===t){const i=null===(e=this.use)||void 0===e?void 0:e.trim();t=i?i.split(/\s*,\s*/):[],this._cached.extensions=t}return t}}const{hasBit:Bt}=squared.lib.util;class LayoutUI extends squared.lib.base.Container{constructor(e,t,i=0,s=0,n){super(n),this.parent=e,this.node=t,this.containerType=i,this.alignmentType=s,this.rowCount=0,this.columnCount=0,this.renderType=0,this.renderIndex=-1}static create(e){const{parent:t,node:i,containerType:s,alignmentType:n,children:a,itemCount:l,rowCount:r,columnCount:o}=e,c=new LayoutUI(t,i,s,n,a);if(l)c.itemCount=l;if(r)c.rowCount=r;if(o)c.columnCount=o;return c}init(){const e=this.length;if(e>1){const e=NodeUI.linearData(this.children);this._floated=e.floated,this._linearX=e.linearX,this._linearY=e.linearY}else if(e)this._linearY=this.item(0).blockStatic,this._linearX=!this._linearY;else return;this._initialized=true}setContainerType(e,t){if(this.containerType=e,t)this.addAlign(t)}hasAlign(e){return Bt(this.alignmentType,e)}addAlign(e){if(!Bt(this.alignmentType,e))this.alignmentType|=e;return this.alignmentType}addRender(e){if(!Bt(this.renderType,e))this.renderType|=e;return this.renderType}delete(e){if(Bt(this.alignmentType,e))this.alignmentType^=e;return this.alignmentType}retainAs(e){return super.retainAs(e),this.init(),this}set itemCount(e){this._itemCount=e}get itemCount(){var e;return null!==(e=this._itemCount)&&void 0!==e?e:this.length}set type(e){this.setContainerType(e.containerType,e.alignmentType);const t=e.renderType;if(t)this.addRender(t)}get linearX(){var e;if(!this._initialized)this.init();return null!==(e=this._linearX)&&void 0!==e?e:true}get linearY(){var e;if(!this._initialized)this.init();return null!==(e=this._linearY)&&void 0!==e?e:false}get floated(){if(!this._initialized)this.init();return this._floated||new Set}get singleRowAligned(){let e=this._singleRow;if(void 0===e){const t=this.children,i=t.length;if(i){if(e=true,i>1){let s=1/0,n=0;while(n<i){const i=t[n++];if(i.blockStatic||i.multiline||Math.ceil(i.bounds.top)>=s){e=false;break}s=i.bounds.bottom}}this._singleRow=e}else return false}return e}get unknownAligned(){return this.length>1&&!this.linearX&&!this.linearY}}const{convertListStyle:Lt,formatPX:Wt,getStyle:Ft,insertStyleSheetRule:Ot,resolveURL:Ut}=squared.lib.css,{getNamedItem:Ht,removeElementsByClassName:Dt}=squared.lib.dom,{maxArray:Vt}=squared.lib.math,{appendSeparator:qt,capitalize:Xt,convertFloat:zt,convertWord:jt,flatArray:Gt,hasBit:Yt,hasMimeType:$t,isString:Kt,iterateArray:Qt,partitionArray:Jt,safeNestedArray:Zt,safeNestedMap:ei,trimBoth:ti,trimString:ii}=squared.lib.util,{getElementCache:si,getPseudoElt:ni,setElementCache:ai}=squared.lib.session,{isPlainText:li}=squared.lib.xml,ri=NodeUI.TEXT_STYLE.concat(["fontSize"]);function oi(e,t,i=1){if("none"!==e){const s=/\b([^\-\d][^\-\d]?[^\s]*)\s+(-?\d+)\b/g;let n;while(n=s.exec(e))if(n[1]===t)return parseInt(n[2]);return i}}function ci(e,t,i,s,n){var a;const l=null===(a=si(e,"styleMap"+i,s))||void 0===a?void 0:a.counterIncrement;return l&&oi(l,t,n)}function hi(e,t){const i=e.trim().split(/\s*,\s*/),s=[],n=[];for(let e=0;e<t.length;++e){const a=t[e],l=i.indexOf(a.name);if(-1!==l)s[l]=a;else n.push(a)}if(s.length)return Gt(s).concat(n);else return t}function di(e){let t=0,i=true,s=true;const n=e.length;let a=0;while(a<n){const t=e[a++];if(!t.floating)s=false;if(!t.rightAligned)i=false;if(!s&&!i)break}if(s)t|=512;if(i)t|=2048;return t}function ui(e,t,i){if((t||0===zt(e.width))&&0===zt(e.height)){for(const t in e)if(/(padding|Width|Height)/.test(t)&&zt(e[t])>0)return true;else if(!i&&t.startsWith("margin")&&0!==zt(e[t]))return true;return false}return true}function fi(e,t,i,s,n){var a;let l=e,r=0,o=0,c=-1;while("Q"===(null==l?void 0:l.tagName)){const e=(null===(a=si(l,"styleMap",n))||void 0===a?void 0:a.quotes)||getComputedStyle(l).quotes;if(e){const n=/("(?:[^"]|\\")+"|[^\s]+)\s+("(?:[^"]|\\")+"|[^\s]+)(?:\s+("(?:[^"]|\\")+"|[^\s]+)\s+("(?:[^"]|\\")+"|[^\s]+))?/.exec(e);if(n){if("::before"===t){if(0===r)i=mi(n[1]),++r;if(n[3]&&r<2)s=mi(n[3]),++r}else{if(0===r)i=mi(n[2]),++r;if(n[4]&&r<2)s=mi(n[4]),++r}c=o}}l=l.parentElement,++o}if(0===r)--o;else if(0===c)return i;else if(c>0)return s;return o%2==0?i:s}function gi(e,t){return e.positionRelative?e.hasPX("left")?e.left*(t?1:-1):e.right*(t?-1:1):0}function pi(e,t,i){const s=e.get(t);if(s)s.add(i);else e.set(t,new Set([i]))}const mi=e=>{var t;return(null===(t=/^"(.+)"$/.exec(e))||void 0===t?void 0:t[1])||e},bi=e=>!e.blockStatic&&true!==e.autoMargin.horizontal&&!(e.blockDimension&&"100%"===e.css("width"))&&(!(e.plainText&&e.multiline)||e.floating),xi=(e,t)=>e.textElement&&(e.blockStatic||e.multiline||1===t),yi=e=>e.ascend({condition:e=>Kt(e.use)}).length>0,vi=e=>-1*e-2;const{USER_AGENT:Si,isUserAgent:wi,isWinEdge:Ei}=squared.lib.client,{CSS_PROPERTIES:ki,formatPX:_i,getStyle:Ti,isLength:Ci,isPercent:Ii}=squared.lib.css,{withinViewport:Ai}=squared.lib.dom,{capitalize:Ri,convertFloat:Ni,flatArray:Mi,isString:Pi,iterateArray:Bi,safeNestedArray:Li}=squared.lib.util,{actualClientRect:Wi,getElementCache:Fi,setElementCache:Oi}=squared.lib.session,{pushIndent:Ui,pushIndentArray:Hi}=squared.lib.xml,Di=ki.borderTop.value,Vi=ki.borderRight.value,qi=ki.borderBottom.value,Xi=ki.borderLeft.value,zi=[Di,Vi,qi,Xi];function ji(e){switch(e.getPropertyValue("position")){case"absolute":case"fixed":return true}return false}function Gi(e,t){if(!Pi(e.border)&&!(Di[0]in e||Vi[0]in e||qi[0]in e||Xi[0]in e)){e.border="1px outset "+t;let i=0;while(i<4){const s=zi[i++];e[s[0]]="1px",e[s[1]]="outset",e[s[2]]=t}return true}return false}function Yi(e,t,i){if(t){const t=e.backgroundColor;if(!Pi(t)||"initial"===t)e.backgroundColor=i}if(!Pi(e.textAlign))e.textAlign="center";if(!Pi(e.padding)&&!ki.padding.value.some(t=>!!e[t]))e.paddingTop="2px",e.paddingRight="6px",e.paddingBottom="3px",e.paddingLeft="6px"}const{capitalize:$i,includes:Ki}=squared.lib.util;class ExtensionUI extends Extension{constructor(e,t,i,s=[]){super(e,t,i),this.eventOnly=false,this.documentBase=false,this.cascadeAll=false,this.removeIs=false,this.tagNames=s,this._isAll=0===s.length}static findNestedElement(e,t){if(e.styleElement){const i=$i(e.localSettings.systemName),s=e.element.children,n=s.length;let a=0;while(a<n){const e=s[a++];if(Ki(e.dataset["use"+i]||e.dataset.use,t))return e}}return null}is(e){return this._isAll||this.tagNames.includes(e.tagName)}condition(e,t){return e.use?this.included(e.element):!this._isAll}included(e){return Ki(this.application.getDatasetName("use",e),this.name)}processNode(e,t){}processChild(e,t){}addDescendant(e){const t=this.application.session.extensionMap,i=e.id,s=t.get(i);if(s){if(!s.includes(this))s.push(this)}else t.set(i,[this])}postBaseLayout(e){}postConstraints(e){}postOptimize(e){}afterBaseLayout(){}afterConstraints(){}afterResources(){}beforeBaseLayout(){}beforeCascade(e){}afterFinalize(){}set application(e){this._application=e,this._controller=e.controllerHandler,this._resource=e.resourceHandler,this._cache=e.session.cache,this._cacheProcessing=e.processing.cache}get application(){return this._application}get controller(){return this._controller}get resource(){return this._resource}get cache(){return this._cache}get cacheProcessing(){return this._cacheProcessing}}const{isLength:Qi}=squared.lib.css;const{USER_AGENT:Ji,isUserAgent:Zi}=squared.lib.client,{parseColor:es}=squared.lib.color,{CSS_PROPERTIES:ts,calculate:is,convertAngle:ss,formatPX:ns,getBackgroundPosition:as,getInheritedStyle:ls,isCalc:rs,isLength:os,isParentStyle:cs,isPercent:hs,parseAngle:ds}=squared.lib.css,{getNamedItem:us}=squared.lib.dom,{cos:fs,equal:gs,hypotenuse:ps,offsetAngleX:ms,offsetAngleY:bs,relativeAngle:xs,sin:ys,triangulate:vs,truncateFraction:Ss}=squared.lib.math,{STRING:ws}=squared.lib.regex,{getElementAsNode:Es}=squared.lib.session,{appendSeparator:ks,convertCamelCase:_s,convertFloat:Ts,hasValue:Cs,isEqual:Is,isNumber:As,isString:Rs,iterateArray:Ns}=squared.lib.util,{STRING_SPACE:Ms}=squared.lib.xml,Ps=ts.borderTop.value,Bs=ts.borderRight.value,Ls=ts.borderBottom.value,Ws=ts.borderLeft.value,Fs=ts.outline.value,Os=`((?:rgb|hsl)a?\\(\\d+,\\s+\\d+%?,\\s+\\d+%?(?:,\\s+[\\d.]+)?\\)|#[A-Za-z\\d]{3,8}|[a-z]+)\\s*(${ws.LENGTH_PERCENTAGE}|${ws.CSS_ANGLE}|(?:${ws.CSS_CALC}(?=,)|${ws.CSS_CALC}))?,?\\s*`,Us=new RegExp(`(?:initial|url\\([^)]+\\)|(repeating-)?(linear|radial|conic)-gradient\\(((?:to\\s+[a-z\\s]+|(?:from\\s+)?-?[\\d.]+(?:deg|rad|turn|grad)|(?:circle|ellipse)?\\s*(?:closest-side|closest-corner|farthest-side|farthest-corner)?)?(?:\\s*(?:(?:-?[\\d.]+(?:[a-z%]+)?\\s*)+)?(?:at\\s+[\\w %]+)?)?),?\\s*((?:${Os})+)\\))`,"g"),Hs=new RegExp(Os,"g"),Ds=/\n([^\S\n]*)?$/,Vs=/^\s+/,qs=/\s+$/;function Xs(e,t,i){const{width:s,height:n}=t.dimension,a=[];let l,r=false,o=true,c=1;switch(t.type){case"linear":{const{repeating:e,angle:i}=t;switch(r=e,i){case 0:case 180:case 360:l=n,o=false;break;case 90:case 270:l=s;break;default:l=Math.abs(s*ys(i-180))+Math.abs(n*fs(i-180)),o=s>=n;break}break}case"radial":{const{repeating:i,radiusExtent:s,radius:n}=t;o=e.actualWidth>=e.actualHeight,r=i,c=s/n,l=n;break}case"conic":l=Math.min(s,n);break;default:return a}let h,d=0;while(h=Hs.exec(i)){const i=es(h[1],1,true);if(i){let s=-1;if("conic"===t.type){const e=h[3],t=h[4];if(e&&t)s=ss(e,t)/360}else{const t=h[2];if(hs(t))s=parseFloat(t)/100;else if(os(t))s=(o?e.parseWidth(t,false):e.parseHeight(t,false))/l;else if(rs(t))if(s=is(h[6],{boundingSize:l,fontSize:e.fontSize})/l,isNaN(s))s=-1;if(r&&-1!==s)s*=c}if(isNaN(s))continue;if(0===a.length)if(-1===s)s=0;else if(s>0)a.push({color:i,offset:0});if(-1!==s)s=Math.max(d,s),d=s;a.push({color:i,offset:s})}}const u=a.length,f=a[u-1];if(-1===f.offset)f.offset=1;let g=0;for(let e=0;e<u;++e){const t=a[e];if(-1===t.offset)if(0===e)t.offset=0;else{for(let i=e+1,s=2;i<u-1;++s){const e=a[i++];if(-1!==e.offset){t.offset=(g+e.offset)/s;break}}if(-1===t.offset)t.offset=g+f.offset/(u-1)}g=t.offset}if(r){if(g<100)e:{let e=g;const t=a.slice(0);while(g<100){let i=0;while(i<u){const s=t[i++];if(g=Math.min(e+s.offset,1),a.push(Object.assign(Object.assign({},s),{offset:g})),1===g)break e}e=g}}}else if(g<1)a.push(Object.assign(Object.assign({},a[u-1]),{offset:1}));return Hs.lastIndex=0,a}function zs(e,t,i,s){if(""!==i){const n=i.split(/\s*,\s*/);return Ks.getBackgroundSize(e,n[t%n.length],s)}}function js(e,t,i,s){const n=e.css(s[1])||"none";if("none"!==n){let a=ns("outline"!==i?e[s[0]]:Ts(e.style[s[0]]));if("0px"!==a){let l=e.css(s[2])||"initial";switch(l){case"initial":l="rgb(0, 0, 0)";break;case"inherit":case"currentcolor":case"currentColor":l=ls(e.element,s[2]);break}if("2px"===a&&("inset"===n||"outset"===n))a="1px";if(l=es(l,1,true),l)return t[i]={width:a,style:n,color:l},true}}return false}function Gs(e,t,i){let s=e.css(i);if("initial"===s)s="backgroundClip"===i?"border-box":"padding-box";switch(s){case"border-box":return true;case"padding-box":t[i]={top:e.borderTopWidth,right:e.borderRightWidth,bottom:e.borderBottomWidth,left:e.borderLeftWidth};break;case"content-box":t[i]={top:e.borderTopWidth+e.paddingTop,right:e.borderRightWidth+e.paddingRight,bottom:e.borderBottomWidth+e.paddingBottom,left:e.borderLeftWidth+e.paddingLeft};break}return false}function Ys(e,t=0){if(""!==(e=e.trim())){let i=ds(e,t);if(!isNaN(i)){if(i<0)i+=360;return i}}return t}function $s(e){return Rs(e)?e.includes("at ")?/(.+?)?\s*at (.+?)\s*$/.exec(e):[e,e]:null}let Ks=(()=>{class ResourceUI extends h{static isBackgroundVisible(e){return!!e&&("backgroundImage"in e||"borderTop"in e||"borderRight"in e||"borderBottom"in e||"borderLeft"in e)}static generateId(e,t,i=1){const s=t;let n=i;if(1===i)t+="_"+n;const a=this.ASSETS.ids,l=a.get(e)||[];do{if(!l.includes(t)){l.push(t);break}else t=s+"_"+ ++n}while(true);return a.set(e,l),t}static insertStoredAsset(e,t,i){const s=ResourceUI.STORED[e];if(s&&Cs(i)){let e="";if(s)for(const[t,n]of s.entries())if(Is(i,n)){e=t;break}if(""===e){if(As(t))t="__"+t;let n=0;do{if(e=0===n?t:t+"_"+n,!s.has(e)){s.set(e,i);break}}while(++n)}return e}return""}static getOptionArray(e,t=false){let i=[],s=true;return Ns(e.children,e=>{if(!e.disabled||t)switch(e.tagName){case"OPTION":{const t=e.text.trim()||e.value.trim();if(""!==t){if(s&&!As(t))s=false;i.push(t)}break}case"OPTGROUP":{const[n,a]=this.getOptionArray(e,t);if(n)i=i.concat(n),s=false;else if(a)i=i.concat(a);break}}}),s?[void 0,i]:[i]}static parseBackgroundImage(e,t,i){var s,n;if(""!==t){Us.lastIndex=0;const a=[];let l,r=0;while(l=Us.exec(t)){const t=l[0];if(t.startsWith("url(")||"initial"===t)a.push(t);else{const t=!!l[1],o=l[2],c=l[3],h=zs(e,r,e.css("backgroundSize"),i),d=NodeUI.refitScreen(e,h||e.actualDimension);let u;switch(o){case"linear":{const{width:i,height:s}=d;let n=180;switch(c){case"to top":n=360;break;case"to right top":n=45;break;case"to right":n=90;break;case"to right bottom":n=135;break;case"to bottom":break;case"to left bottom":n=225;break;case"to left":n=270;break;case"to left top":n=315;break;default:if(c)n=Ys(c,180)||360;break}let a=Ss(ms(n,i)),r=Ss(bs(n,s));if(a!==i&&r!==s&&!gs(Math.abs(a),Math.abs(r))){let e;if(n<=90)e=xs({x:0,y:s},{x:i,y:0});else if(n<=180)e=xs({x:0,y:0},{x:i,y:s});else if(n<=270)e=xs({x:0,y:0},{x:-i,y:s});else e=xs({x:0,y:s},{x:-i,y:0});const t=Math.abs(e-n);a=Ss(ms(n,vs(t,90-t,ps(i,s))[1])),r=Ss(bs(n,vs(90,90-n,a)[0]))}const h={type:o,repeating:t,dimension:d,angle:n,angleExtent:{x:a,y:r}};h.colorStops=Xs(e,h,l[4]),u=h;break}case"radial":{const a=$s(c),r=as((null==a?void 0:a[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i}),{left:f,top:g}=r,{width:p,height:m}=d;let b="ellipse",x=g,y=g,v=1/0,S=-1/0,w=0,E=0;if(a){const t=null===(s=a[1])||void 0===s?void 0:s.trim();if(t)if(t.startsWith("circle"))b="circle";else{let i=1/0;const s=t.split(" ");for(let t=0;t<s.length;++t)i=Math.min(0===t?e.parseWidth(s[t],false):e.parseHeight(s[t],false),i);if(w=i,E=i,1===length||s[0]===s[1])b="circle"}}for(const e of[[0,0],[p,0],[p,m],[0,m]]){const t=Math.round(ps(Math.abs(e[0]-f),Math.abs(e[1]-g)));v=Math.min(t,v),S=Math.max(t,S)}for(const e of[p-f,m-g,f])x=Math.min(e,x),y=Math.max(e,y);const k={type:o,repeating:t,dimension:d,shape:b,center:r,closestSide:x,farthestSide:y,closestCorner:v,farthestCorner:S};if(0===w&&0===E){w=S;const e=(null===(n=null==a?void 0:a[1])||void 0===n?void 0:n.split(" ").pop())||"";switch(e){case"closest-corner":case"closest-side":case"farthest-side":{const i=k[_s(e)];if(t)E=i;else w=i;break}default:E=S;break}}k.radius=w,k.radiusExtent=E,k.colorStops=Xs(e,k,l[4]),u=k;break}case"conic":{const t=$s(c),s={type:o,dimension:d,angle:Ys(c),center:as((null==t?void 0:t[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i})};s.colorStops=Xs(e,s,l[4]),u=s;break}}a.push(u||"initial")}++r}if(a.length)return a}}static getBackgroundSize(e,t,i){let s=0,n=0;switch(t){case"":case"cover":case"contain":case"100% 100%":case"auto":case"auto auto":case"initial":return;default:{const a=t.split(" ");for(let t=0;t<a.length;++t){let l=a[t];if("auto"===l)l="100%";switch(t){case 0:s=e.parseUnit(l,"width",false,i);break;case 1:n=e.parseUnit(l,"height",false,i);break}}break}}return s>0&&n>0?{width:Math.round(s),height:Math.round(n)}:void 0}static hasLineBreak(e,t=false,i=false){if(e.naturalElements.length)return e.naturalElements.some(e=>e.lineBreak);else if(!t&&e.naturalChild){const t=e.element;let s=t.textContent;if(i)s=s.trim();return s.includes("\n")&&(e.plainText&&cs(t,"whiteSpace","pre","pre-wrap")||e.css("whiteSpace").startsWith("pre"))}return false}static checkPreIndent(e){if(e.plainText){const t=e.actualParent;if(t.preserveWhiteSpace&&t.ascend({condition:e=>"PRE"===e.tagName,startSelf:true}).length){let t=e.nextSibling;if(null==t?void 0:t.naturalElement){const i=e.textContent;if(Rs(i)){const e=Ds.exec(i);if(e){if(!t.textElement)t=t.find(e=>e.naturalChild&&e.textElement,{cascade:true,error:e=>e.naturalChild&&!e.textElement&&0===e.length});if(t)return[e[1]?e[0]:"",t]}}}}}}finalize(e){}reset(){super.reset();const e=ResourceUI.STORED;for(const t in e)e[t].clear()}writeRawImage(e,t){const i=this.fileHandler;if(i){const s={pathname:ks(this.userSettings.outputDirectory,this.controllerSettings.directory.image),filename:e,base64:t};return i.addAsset(s),s}}setBoxStyle(e){var t;if((e.styleElement||e.visibleStyle.background)&&e.hasResource(nt.BOX_STYLE)){const i={};let s=e.visibleStyle.borderWidth;if(s){if(e.borderTopWidth>0)js(e,i,"borderTop",Ps);if(e.borderRightWidth>0)js(e,i,"borderRight",Bs);if(e.borderBottomWidth>0)js(e,i,"borderBottom",Ls);if(e.borderLeftWidth>0)js(e,i,"borderLeft",Ws)}if(js(e,i,"outline",Fs))s=true;let n,a=e.backgroundColor;if(""===a&&e.has("backgroundColor")&&!e.documentParent.visible)a=e.css("backgroundColor");if(e.hasResource(nt.IMAGE_SOURCE))n=ResourceUI.parseBackgroundImage(e,e.backgroundImage,e.localSettings.screenDimension);if(a||n||s||e.data(h.KEY_NAME,"embedded")){if(i.backgroundColor=(null===(t=es(a))||void 0===t?void 0:t.valueAsRGBA)||"",i.backgroundImage=n,Object.assign(i,e.cssAsObject("backgroundSize","backgroundRepeat","backgroundPositionX","backgroundPositionY")),Gs(e,i,"backgroundClip"))Gs(e,i,"backgroundOrigin");if("0px"!==e.css("borderRadius")){const[t,s,n,a]=e.cssAsTuple("borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"),[l,r]=t.split(" "),[o,c]=s.split(" "),[h,d]=n.split(" "),[u,f]=a.split(" "),g=!(r||c||d||f)?[l,o,h,u]:[l,r||l,o,c||o,h,d||h,u,f||u],p=e.actualWidth>=e.actualHeight,m=g[0];if(g.every(e=>e===m))g.length="0px"===m||""===m?0:1;const b=g.length;if(b){const t=p?"width":"height";let s=0;while(s<b)g[s]=ns(e.parseUnit(g[s++],t,false));i.borderRadius=g}}e.data(ResourceUI.KEY_NAME,"boxStyle",i)}}}setFontStyle(e){if((e.textElement||e.inlineText)&&(!e.textEmpty||e.visibleStyle.background||e.pseudoElement)||e.inputElement){const t=es(e.css("color"));let i=e.css("fontWeight");if(!As(i))switch(i){case"lighter":i="200";break;case"bold":i="700";break;case"bolder":i="900";break;default:i="400";break}e.data(ResourceUI.KEY_NAME,"fontStyle",{fontFamily:e.css("fontFamily").trim(),fontStyle:e.css("fontStyle"),fontSize:e.fontSize,fontWeight:i,color:(null==t?void 0:t.valueAsRGBA)||""})}}setValueString(e){var t,i,s;const n=e.element;if(n){let a="",l="",r=false,o=false;switch(n.tagName){case"INPUT":switch(a=us(n,"value"),n.type){case"radio":case"checkbox":{const t=e.companion;if(false===(null==t?void 0:t.visible))a=t.textContent.trim();break}case"submit":if(""===a&&!e.visibleStyle.backgroundImage)a="Submit";break;case"reset":if(""===a&&!e.visibleStyle.backgroundImage)a="Reset";break;case"time":if(""===a)l="--:-- --";break;case"date":case"datetime-local":if(""===a){switch((new Intl.DateTimeFormat).resolvedOptions().locale){case"en-US":l="mm/dd/yyyy";break;default:l="dd/mm/yyyy";break}if("datetime-local"===n.type)l+=" --:-- --"}break;case"week":if(""===a)l="Week: --, ----";break;case"month":if(""===a)l="--------- ----";break;case"text":case"password":case"url":case"email":case"search":case"number":case"tel":if(""===a)l=n.placeholder;break;case"file":a=Zi(8)?"Browse...":"Choose File";break;case"color":{const t=this.controllerSettings.style.inputColorBorderColor,i=(es(a)||es("rgb(0, 0, 0)")).valueAsRGBA,{width:s,height:n}=e.actualDimension,l=`${s-10}px ${n-10}px, ${s-8}px ${n-8}px`,r="no-repeat, no-repeat",o="center, center",c="center, center",h=ResourceUI.parseBackgroundImage(e,`linear-gradient(${i}, ${i}), linear-gradient(${t}, ${t})`);a="";let d=e.data(ResourceUI.KEY_NAME,"boxStyle");if(d){const e=d.backgroundImage;if(e){d.backgroundSize=l+", "+d.backgroundSize,d.backgroundRepeat=r+", "+d.backgroundRepeat,d.backgroundPositionX=o+", "+d.backgroundPositionX,d.backgroundPositionY=c+", "+d.backgroundPositionY,e.unshift(...h);break}}else d={};e.data(ResourceUI.KEY_NAME,"boxStyle",Object.assign(d,{backgroundSize:l,backgroundRepeat:r,backgroundPositionX:o,backgroundPositionY:c,backgroundImage:h}));break}case"range":l=a,a="";break}break;case"TEXTAREA":a=n.value,l=n.placeholder;break;case"IFRAME":a=n.src;break;default:if(r=true,e.plainText||e.pseudoElement||e.hasAlign(1024)&&e.textElement)a=e.textContent.replace(/&/g,"&amp;"),o=true;else if(e.inlineText)a=e.textEmpty?Ms:this.removeExcludedFromText(e,n);if(""!==a)switch(a=a.replace(/\u00A0/g,Ms),e.css("whiteSpace")){case"pre":case"pre-wrap":{if(false===(null===(t=e.renderParent)||void 0===t?void 0:t.layoutVertical))a=a.replace(/^\s*\n/,"");const i=ResourceUI.checkPreIndent(e);if(i){const[e,t]=i;if(""!==e)t.textContent=e+t.textContent;a=a.replace(Ds,"")}a=a.replace(/\n/g,"\\n").replace(/\t/g,Ms.repeat(e.toInt("tabSize",8))).replace(/\s/g,Ms),o=true,r=false;break}case"pre-line":a.replace(/\n/g,"\\n").replace(/\s+/g," "),o=true,r=false;break;case"nowrap":a=a.replace(/\n+/g," "),o=true;default:{const t=e.onlyChild&&e.htmlElement;if(t||(null===(i=e.previousSibling)||void 0===i?void 0:i.blockStatic))a=a.replace(Vs,"");if(t||(null===(s=e.nextSibling)||void 0===s?void 0:s.blockStatic))a=a.replace(qs,"")}}else if(0===e.naturalChildren.length&&!e.hasPX("height")&&ResourceUI.isBackgroundVisible(e.data(ResourceUI.KEY_NAME,"boxStyle"))&&!Rs(e.textContent))a=e.textContent;break}if(""!==l)e.data(ResourceUI.KEY_NAME,"hintString",l);if(""!==a){if(r)if(e.pageFlow){const t=e.siblingsLeading[0],i=e.siblingsTrailing.find(e=>!e.excluded||e.lineBreak);let s=false;if(a.length>1)if(!t||t.multiline||t.lineBreak||t.floating||t.plainText&&qs.test(t.textContent))a=a.replace(Vs,"");else if(t.naturalElement){const e=t.textContent,i=e.length;if(i)s=32===e.charCodeAt(i-1)}if(o){const n=!e.lineBreakTrailing&&qs.test(a);if(Vs.test(a)&&false===(null==t?void 0:t.block)&&!t.lineBreak&&!s)a=Ms+a.trim();else a=a.trim();if(n&&false===(null==i?void 0:i.blockStatic)&&!i.floating)a+=Ms}else if(!/^[\s\n]+$/.test(a))a=a.replace(Vs,t&&(t.block||t.lineBreak||s&&t.htmlElement&&t.textContent.length>1||e.multiline&&ResourceUI.hasLineBreak(e))?"":Ms),a=a.replace(qs,"table-cell"===e.display||e.lineBreakTrailing||e.blockStatic||(null==i?void 0:i.floating)?"":Ms);else if(!e.inlineText)return}else a=a.trim();if(""!==a)e.data(ResourceUI.KEY_NAME,"valueString",a)}}else if(e.inlineText){const t=e.textContent;if(""!==t)e.data(ResourceUI.KEY_NAME,"valueString",t)}}removeExcludedFromText(e,t){const i=t.children.length>0||"CODE"===t.tagName,s=e.preserveWhiteSpace,n=i?"innerHTML":"textContent";let a=t[n]||"";const l=e.sessionId;if(t.childNodes.forEach((e,t)=>{const r=Es(e,l);if(!r||!r.textElement||!r.pageFlow||r.positioned||r.pseudoElement||r.excluded){if(r)if(i&&r.htmlElement){const e=r.toElementString("outerHTML");if(r.lineBreak)a=a.replace(!s?new RegExp(`\\s*${e}\\s*`):e,"\\n");else if(r.positioned)a=a.replace(e,"");else if(!s)a=a.replace(e,r.pageFlow&&Rs(r.textContent)?Ms:"");return}else{const e=r.plainText?r.textContent:r[n];if(Rs(e)){if(!s)a=a.replace(e,"");return}}else if(e instanceof HTMLElement){const t=getComputedStyle(e).getPropertyValue("position");a=a.replace(e.outerHTML,"absolute"!==t&&"fixed"!==t&&Rs(e.textContent)?Ms:"")}if(!s)if(0===t)a=a.replace(Vs,"");else if(t===length-1)a=a.replace(qs,"")}}),!i)return a;else if(!s&&/^[\s\n]+$/.test(a))return e.blockStatic?Ms:"";return a.replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(parseInt(t)))}get controllerSettings(){return this.application.controllerHandler.localSettings}}return ResourceUI.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,images:new Map},ResourceUI})();const{formatPercent:Qs,formatPX:Js,isLength:Zs,isPercent:en,isPx:tn}=squared.lib.css,{convertFloat:sn,isNumber:nn,safeNestedArray:an,trimString:ln,withinRange:rn}=squared.lib.util,on="[\\d.]+[a-z%]+|auto|max-content|min-content",cn="minmax\\(\\s*([^,]+),\\s+([^)]+)\\s*\\)",hn="fit-content\\(\\s*([\\d.]+[a-z%]+)\\s*\\)",dn=new RegExp(`^${on}$`),un=new RegExp(`\\s*(repeat\\(\\s*(auto-fit|auto-fill|\\d+),\\s+(.+)\\)|\\[([\\w\\s\\-]+)\\]|${cn}|${hn}|${on}\\s*)\\s*`,"g"),fn=new RegExp(`\\s*(\\[([\\w\\s\\-]+)\\]|${cn}|${hn}|${on})\\s*`,"g"),gn=new RegExp(on),pn=new RegExp(cn),mn=new RegExp(hn),bn=new RegExp("\\[([\\w\\s\\-]+)\\]");function xn(e,t){const i=e.repeat,s=[],n=[],a=t.length;for(let e=0;e<a;++e)if(i[e])n.push(t[e]);else s.push(t[e]);const l=e.length,r=l-s.length,o=new Array(l);for(let e=0;e<l;++e)if(i[e]){for(let t=0,i=0;t<r;++e,++t,++i){if(i===n.length)i=0;o[e]=n[i]}--e}else o[e]=s.shift();return o}function yn(e,t){const i=e.unit;if(1===i.length&&(e.autoFill||e.autoFit)){const s=e.unitMin;let n=0;for(const e of[i[0],s[0]])if(en(e))n=Math.max(parseFloat(e)/100*t,n);else if(Zs(e))n=Math.max(parseFloat(e),n);if(n>0)return e.length=Math.floor(t/(n+e.gap)),e.unit=xn(e,i),e.unitMin=xn(e,s),true}return false}function vn(e,t,i,s,n){let a=0,l=0,r=1;const o=s.length;let c=0;while(c<o){const e=s[c++];if(tn(e))a+=parseFloat(e);else if(Tn.isFr(e))l+=parseFloat(e);else if(en(e))r-=parseFloat(e)/100}if(r<1&&l>0){const h=(e*r-(i-1)*t-n.reduce((e,t)=>e+Math.max(0,t),0)-a)/l;if(h>0)for(c=0;c<o;++c){const e=s[c];if(Tn.isFr(e))s[c]=Js(parseFloat(e)*h)}}}function Sn(e,t){if(0===e.length){let i=0;while(i<t)e[i++]="1fr"}}function wn(e,t,i){if(i){for(let s=0,n=-1,a=0;s<e;++s)if(0===i[s]){if(-1===n)n=s;if(++a===t)return n}else n=-1;return-1}return 0}function En(e){const t=e.length;for(let i=0;i<t;++i)for(const t of e[i])if(0===t)return i;return Math.max(0,t-1)}function kn(e){const t=e.gridAutoFlow;return Object.assign(e,{children:[],rowData:[],rowSpanMultiple:[],rowDirection:!t.includes("column"),dense:t.includes("dense"),templateAreas:{},row:Tn.createDataRowAttribute(),column:Tn.createDataRowAttribute(),emptyRows:[],minCellHeight:0})}const _n=(e,t,i)=>Zs(t)?Js(e.parseUnit(t,0!==i?"width":"height")):t;let Tn=(()=>{class CssGrid extends ExtensionUI{static createDataRowAttribute(){return{length:0,gap:0,unit:[],unitMin:[],unitTotal:[],repeat:[],auto:[],autoFill:false,autoFit:false,name:{},fixedWidth:false,flexible:false,frTotal:0}}is(e){return e.gridElement}condition(e){return e.length>0}processNode(e){const t=kn(e.cssAsObject("alignItems","alignContent","justifyItems","justifyContent","gridAutoFlow")),{column:i,dense:s,row:n,rowDirection:a}=t,[l,r,o,c]=a?[0,1,2,3]:[1,0,3,2],h=[],d=[],u=[];i.gap=e.parseWidth(e.css("columnGap"),false),n.gap=e.parseHeight(e.css("rowGap"),false);const f=[e.cssInitial("gridTemplateRows",true),e.cssInitial("gridTemplateColumns",true),e.css("gridAutoRows"),e.css("gridAutoColumns")];for(let t=0;t<4;++t){const s=f[t];if(""!==s&&"none"!==s&&"auto"!==s){un.lastIndex=0;const a=0===t?n:i,{name:l,repeat:r,unit:o,unitMin:c}=a;let h,d=1;while(h=un.exec(s)){const s=h[1].trim();switch(t){case 0:case 1:if(s.startsWith("["))for(const e of h[4].split(/\s+/))an(l,e).push(d);else if(s.startsWith("repeat")){let i=1;switch(h[2]){case"auto-fit":a.autoFit=true;break;case"auto-fill":a.autoFill=true;break;default:i=parseInt(h[2])||1;break}if(i>0){fn.lastIndex=0;const s=[];let n;while(n=fn.exec(h[3])){const i=n[1];let a;if(a=bn.exec(i)){const e=a[1];if(!l[e])l[e]=[];s.push({name:e})}else if(a=pn.exec(i))s.push({unit:_n(e,a[2],t),unitMin:_n(e,a[1],t)});else if(a=mn.exec(i))s.push({unit:_n(e,a[1],t),unitMin:"0px"});else if(a=gn.exec(i))s.push({unit:_n(e,a[0],t)})}if(s.length)for(let e=0;e<i;++e)for(let e=0;e<s.length;++e){const t=s[e],{name:i,unit:n}=t;if(i)l[i].push(d);else if(n)o.push(n),c.push(t.unitMin||""),r.push(true),++d}}}else if(s.startsWith("minmax"))o.push(_n(e,h[6],t)),c.push(_n(e,h[5],t)),r.push(false),++d;else if(s.startsWith("fit-content"))o.push(_n(e,h[7],t)),c.push("0px"),r.push(false),++d;else if(dn.test(s))o.push(_n(e,s,t)),c.push(""),r.push(false),++d;break;case 2:case 3:(2===t?n:i).auto.push(Zs(s)?Js(e.parseUnit(s,2!==t?"width":"height")):s);break}}}}if(a)e.sort((e,t)=>{const{left:i,top:s}=e.linear,{left:n,top:a}=t.linear;if(!rn(s,a))return s<a?-1:1;else if(!rn(i,n))return i<n?-1:1;return 0});else e.sort((e,t)=>{const{left:i,top:s}=e.linear,{left:n,top:a}=t.linear;if(!rn(i,n))return i<n?-1:1;else if(!rn(s,a))return s<a?-1:1;return 0});let g,p=false,m=false;if(!e.has("gridTemplateAreas")&&e.every(e=>"auto"===e.css("gridRowStart")&&"auto"===e.css("gridColumnStart"))){const[s,l,r,o,c]=a?["top","bottom",2,1,3]:["left","right",3,0,2];let h,d=0,f=0,g=0;if(a){if(i.autoFill)p=yn(i,e.actualWidth)}else if(n.autoFill)m=yn(n,e.actualHeight);e.each((e,i)=>{if(!h||e.linear[s]>=h.linear[l]||f>0&&f===g)g=Math.max(f,g),++d,f=1;const[n,p]=e.cssAsTuple("gridRowEnd","gridColumnEnd");let m=1,b=1;if(n.startsWith("span"))m=parseInt(n.split(" ")[1]);else if(nn(n))m=parseInt(n)-d;if(p.startsWith("span"))b=parseInt(p.split(" ")[1]);else if(nn(p))b=parseInt(p)-f;if(1===f&&g>0){let e=false;do{const i=new Array(g-1).fill(1);for(const e of u){const t=e.placement;if(t[r]>d)for(let e=t[o];e<t[c];++e)i[e-1]=0}const s=i.length;for(let t=0,n=0,a=0;t<s;++t)if(i[t]){if(0===n)a=t;if(++n===b){f=a+1,e=true;break}}else n=0;if(!e)t.emptyRows[d-1]=i,++d}while(!e)}if(a)u[i]={outerCoord:e.linear.top,placement:[d,f,d+m,f+b],rowSpan:m,columnSpan:b};else u[i]={outerCoord:e.linear.left,placement:[f,d,f+b,d+m],rowSpan:m,columnSpan:b};f+=b,h=e})}else{const s=t.templateAreas;let l;p=yn(i,e.actualWidth),m=yn(n,e.actualHeight),e.css("gridTemplateAreas").split(/"[\s\n]+"/).forEach((e,t)=>{if("none"!==e)ln(e.trim(),'"').split(/\s+/).forEach((e,i)=>{if("."!==e.charAt(0)){const n=s[e];if(n)n.rowSpan=t-n.rowStart+1,n.columnSpan=i-n.columnStart+1;else s[e]={rowStart:t,rowSpan:1,columnStart:i,columnSpan:1}}})}),e.each((e,t)=>{const r=e.cssAsTuple("gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd"),o=[0,0,0,0];let c=-1,h=-1;if(Object.keys(s).length)for(let e=0;e<4;++e){const t=r[e];let i=s[t];if(i)switch(e){case 0:o[0]=i.rowStart+1;break;case 1:o[1]=i.columnStart+1;break;case 2:o[2]=i.rowStart+i.rowSpan+1;break;case 3:o[3]=i.columnStart+i.columnSpan+1;break}else{const n=/^([\w-]+)-(start|end)$/.exec(t);if(n)if(i=s[n[1]],i)if("start"===n[2])switch(e){case 0:case 2:o[e]=i.rowStart+1;break;case 1:case 3:o[e]=i.columnStart+1;break}else switch(e){case 0:case 2:o[e]=i.rowStart+i.rowSpan+1;break;case 1:case 3:o[e]=i.columnStart+i.columnSpan+1;break}}}if(0===o[0]||0===o[1]||0===o[2]||0===o[3]){const e=(e,t,i,s)=>{if(nn(e)){const i=parseInt(e);if(i>0)return o[t]=i,true;else if(i<0&&t>=2){const e=t-2;return o[o[e]>0?t:e]=i+s+2,true}}else if(e.startsWith("span")){const n=parseInt(e.split(" ")[1]);if(n===s&&l)if(a){if(!i){const e=l[2];if(e>0&&0===o[0])o[0]=e}}else if(i){const e=l[3];if(e>0&&0===o[1])o[1]=e}const d=o[t-2];switch(t){case 0:{const e=r[2];if(nn(e)){const t=parseInt(e);o[0]=t-n,o[2]=t}break}case 1:{const e=r[3];if(nn(e)){const t=parseInt(e);o[1]=t-n,o[3]=t}break}case 2:case 3:if(d>0)o[t]=d+n;break}if(i){if(-1===c)c=n}else if(-1===h)h=n;return true}return false};let t,s;for(let a=0;a<4;++a){const l=r[a];if("auto"!==l&&0===o[a]){const d=a%2==0,u=d?n:i;if(!e(l,a,d,Math.max(1,u.unit.length))){const e=l.split(" ");if(1===e.length)e[1]=e[0],e[0]="1";else if(nn(e[0]))if(d)if(t)c=parseInt(e[0])-parseInt(t[0]);else t=e;else if(s)h=parseInt(e[0])-parseInt(s[0]);else s=e;const i=u.name[e[1]];if(i){const t=parseInt(e[0]);if(t<=i.length)o[a]=i[t-1]+(e[1]===r[a-2]?1:0)}}}}}if(!l){if(0===o[0])o[0]=1;if(0===o[1])o[1]=1}const[d,f,g,p]=o;if(-1===c)c=d>0&&g>0?g-d:1;else if(d>0&&0===g)o[2]=d+c;if(-1===h)h=f>0&&p>0?p-f:1;else if(f>0&&0===p)o[3]=d+h;if(0===o[2]&&o[0]>0)o[2]=o[0]+c;if(0===o[3]&&o[1]>0)o[3]=o[1]+h;u[t]={outerCoord:a?e.bounds.top:e.bounds.left,placement:o,rowSpan:c,columnSpan:h},l=o})}{const[t,s]=a?[i,e.box.top]:[n,e.box.left];let l=t.unit,r=1,o=0;for(let e=0;e<u.length;++e){const t=u[e];if(t){const[e,i,n]=a?[t.columnSpan,1,3]:[t.rowSpan,0,2],l=t.placement;if(l.some(e=>e>0))r=Math.max(r,e,l[i],l[n]-1);if(rn(t.outerCoord,s))o+=e}}let c=l.length;if(g=Math.max(r,o,a&&!p||!a&&!m?c:0),t.length=g,c<g)if(t.autoFill||t.autoFit){if(0===c)l.push("auto"),t.unitMin.push(""),t.repeat.push(true);l=xn(t,l),t.unit=l,t.unitMin=xn(t,t.unitMin)}else{const e=t.auto,i=e.length;if(i){let t=0;while(l.length<g){if(t===i)t=0;l.push(e[t++])}}}else if(t.autoFit||t.autoFill&&e.blockStatic&&(a&&!e.hasWidth&&!e.hasPX("maxWidth",false)||!a&&!e.hasHeight))l.length=g;let h=1,d=0,f=0;for(let e=0;e<l.length;++e){const t=l[e];if(en(t))h-=parseFloat(t)/100;else if(CssGrid.isFr(t))d+=parseFloat(t);else if("auto"===t)++f}if(t.flexible=h<1||d>0,h<1)if(d>0){c=l.length;for(let e=0;e<c;++e){const t=l[e];if(CssGrid.isFr(t))l[e]=h*(parseFloat(t)/d)+"fr"}}else if(1===f){const e=l.findIndex(e=>"auto"===e);if(-1!==e)l[e]=Qs(h)}}if(e.each((e,i)=>{const{placement:n,rowSpan:f,columnSpan:p}=u[i],[m,b]=a?[f,p]:[p,f];while(0===n[0]||0===n[1]){const e=n.slice(0);if(0===e[l]){let t=h.length;for(let i=s?0:En(d),n=0,a=-1;i<t;++i){if(-1!==wn(g,b,d[i])){if(0===n)a=i,t=Math.max(t,i+m);if(++n===m){e[l]=a+1;break}}else n=0,a=-1,t=h.length}}if(0===e[l]){if(n[l]=h.length+1,0===n[r])n[r]=1}else if(0===e[r]){if(0===e[o])e[o]=e[l]+m;const t=[],i=e[l]-1,s=e[o]-1;let n=i;while(n<s){const e=h[n++];if(!e)t.push([[0,-1]]);else if(e.reduce((e,t)=>e+(t?1:0),0)+b<=g){const i=[];let s=0;for(let t=0,n=-1;t<g;++t){const a=e[t];if(!a){if(-1===n)n=t;++s}if(a||t===g-1){if(s>=b)i.push([n,n+s]);n=-1,s=0}}if(i.length)t.push(i);else break}else break}const a=t.length;if(a){const l=t[0];if(-1===l[0][1])e[r]=1;else if(a===s-i)if(a>1)e:{const i=l.length;n=0;while(n<i){const i=l[n++];for(let s=i[0];s<i[1];++s){let i=1;while(i<a){const n=t[i++];let a=0;while(a<n.length){const t=n[a++];if(s>=t[0]&&(-1===t[1]||s+b<=t[1])){e[r]=s+1;break e}}}}}}else e[r]=l[0][0]+1}}const t=e[l];if(t>0){const i=e[r];if(i>0)n[l]=t,n[r]=i}}if(0===n[o])n[o]=n[l]+m;if(0===n[c])n[c]=n[r]+b;if(((e,t,i)=>{if(t.every(e=>e>0)){for(let n=t[l]-1;n<t[o]-1;++n){const a=an(h,n);let l=d[n],o=t[r]-1;if(!l){if(l=new Array(i).fill(0),!s){let e=0;while(e<o)l[e++]=1}d[n]=l}while(o<t[c]-1)an(a,o).push(e),l[o++]=1}return true}return false})(e,n,g)){const[i,l,r,o]=n,c=i-1,h=r-i,u=l-1;if(!s){const e=a?c:u;if(e>0){const t=d[e-1];let i=0;while(i<g)t[i++]=1}}if(h>1){const e=t.rowSpanMultiple,i=c+h;let s=c;while(s<i)e[s++]=true}e.data(this.name,"cellData",{rowStart:c,rowSpan:h,columnStart:u,columnSpan:o-l})}}),h.length){let s;if(a)s=h,t.rowData=h;else{let e;s=t.rowData;for(let t=0;t<h.length;++t){const i=h[t];e=0;while(e<i.length)an(s,e)[t]=i[e++]}}const l=a?n.unitTotal:i.unitTotal,r=t.children,o=i.unit.length;for(let e=0;e<s.length;++e){const t=s[e],i=t.length;let n=0;while(n<i){const e=t[n];let i=l[n]||0;if(e){let t=0;const s=e.length;let n=0;while(n<s){const i=e[n++];if(!r.includes(i))t=Math.max(t,a?i.bounds.height:i.bounds.width),r.push(i)}i+=t}l[n++]=i}}if(r.length===e.length){const{gap:l,unit:c}=n,{gap:h,unit:d}=i,u=Math.max(c.length,s.length),f=new Array(u).fill(0),g=new Array(o).fill(0),p=new Set;n.length=u,i.length=o;let m=0;for(let e=0;e<u;++e){const i=s[e],n=c[e];if(i)for(let s=0;s<o;++s){const n=i[s];if(n)for(let t=0;t<n.length;++t){const i=n[t];if(!p.has(i)){const{columnSpan:t,rowSpan:n}=i.data(this.name,"cellData"),a=s+t-1,r=e+n-1;if(h>0&&a<o-1)i.modifyBox(4,h);if(l>0&&r<u-1)i.modifyBox(8,l);if(1===n){const t=i.bounds.height,s=f[e];if(i.hasHeight)if(s<0){if(t>Math.abs(s))f[e]=t}else f[e]=Math.max(t,s);else if(t>Math.abs(s))f[e]=-t;m=Math.max(t,m)}if(1===t){const e=i.bounds.width,t=g[s];if(i.hasWidth)if(t<0){if(e>Math.abs(t))g[s]=e}else g[s]=Math.max(e,t);else if(e>Math.abs(t))g[s]=-e}p.add(i)}}else if(!a)t.emptyRows[s]=[1/0]}else if(f[e]=sn(n),a)t.emptyRows[e]=[1/0]}if(t.minCellHeight=m,a){if(e.hasPX("width",false))i.fixedWidth=true,i.flexible=false,vn(e.actualWidth,h,o,d,g);if(e.hasHeight&&!CssGrid.isAligned(e))Sn(n.unit,u)}else{if(e.hasPX("height",false))n.fixedWidth=true,n.flexible=false,vn(e.actualHeight,l,u,c,f);if(e.hasWidth&&!CssGrid.isJustified(e))Sn(i.unit,o)}if(e.retainAs(r),e.cssSort("zIndex"),e.cssTry("display","block"))e.each(e=>{const{width:t,height:i}=e.boundingClientRect;e.data(this.name,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i}))}),e.cssFinally("display");e.data(this.name,"mainData",t)}}}}return CssGrid.isFr=e=>/\dfr$/.test(e),CssGrid.isAligned=e=>e.hasHeight&&/^space-|center|flex-end|end/.test(e.css("alignContent")),CssGrid.isJustified=e=>(e.blockStatic||e.hasWidth)&&/^space-|center|flex-end|end|right/.test(e.css("justifyContent")),CssGrid})();const{withinRange:Cn}=squared.lib.util;const{aboveRange:In,belowRange:An,plainMap:Rn,safeNestedArray:Nn,withinRange:Mn}=squared.lib.util;function Pn(e,t){const i=t.bounds.top,s=e.length;let n=0;while(n<s){const t=e[n++].findIndex(e=>{if(!e)return false;const t=e.bounds.top;return Mn(i,t)||Math.ceil(i)>=t&&i<Math.floor(e.bounds.bottom)});if(-1!==t)return t}return-1}class Grid extends ExtensionUI{static createDataCellAttribute(){return{rowSpan:0,columnSpan:0,index:-1,cellStart:false,cellEnd:false,rowEnd:false,rowStart:false}}condition(e){if(e.length>1&&!e.layoutElement&&"TABLE"!==e.tagName&&!e.has("listStyle"))if("table"===e.display)return e.every(e=>"table-row"===e.display&&e.every(e=>"table-cell"===e.display))||e.every(e=>"table-cell"===e.display);else if(0===e.percentWidth||!e.find(e=>e.percentWidth>0,{cascade:true})){let t=false,i=0;for(const s of e)if(s.pageFlow&&s.blockStatic&&!s.visibleStyle.background&&0===s.percentWidth&&!s.autoMargin.leftRight&&!s.autoMargin.left){if(s.length>1)t=true;if("list-item"===s.display&&!s.has("listStyleType"))++i}else return false;return i===e.length||t&&e.every(e=>e.length>0&&NodeUI.linearData(e.children).linearX)}return false}processNode(e){var t;const i=[],s={};let n=[];e.each(e=>{e.each(e=>{if(e.visible)Nn(s,Math.floor(e.linear.left)).push(e)})});const a=Object.keys(s),l=a.length;if(l){let r=-1;for(let e=0;e<l;++e){const t=s[a[e]];if(0===e)r=l;else if(r!==t.length){r=-1;break}}if(-1!==r)n=Rn(a,e=>s[e]);else{const r=[];for(let e=0;e<l;++e){const t=s[a[e]],i=t.length;if(0===e&&0===i)return;r[e]=0===e?0:r[e-1];for(let s=0;s<i;++s){const a=t[s],{left:l,right:o}=a.linear;if(0===e||In(l,r[e-1])){const t=Nn(n,e);if(0===e||n[0].length===i)t[s]=a;else{const e=Pn(n,a);if(-1!==e)t[e]=a;else return}}else{const e=n[n.length-1];if(e){let t=1/0,i=-1/0;for(let s=0;s<e.length;++s){const n=e[s].linear;t=Math.min(n.left,t),i=Math.max(n.right,i)}if(Math.floor(l)>Math.ceil(t)&&Math.floor(o)>Math.ceil(i)){const t=Pn(n,a);if(-1!==t){let i=n.length-1;while(i>=0){const s=n[i--];if(s){if(!s[t])e.length=0;break}}}}}}r[e]=Math.max(o,r[e])}}const o=r.length;for(let e=0,t=-1;e<o;++e)if(!n[e]){if(-1===t)t=e-1;else if(e===o-1)r[t]=r[e]}else if(-1!==t)r[t]=r[e-1],t=-1;for(let e=0;e<n.length;++e)if(null===(t=n[e])||void 0===t?void 0:t.length)i.push(r[e]);else n.splice(e--,1);const c=n.reduce((e,t)=>Math.max(e,t.length),0);for(let e=0;e<c;++e){let t=0;while(t<n.length){const i=n[t++];if(!i[e])i[e]={spacer:1}}}i.push(e.box.right)}}const r=n.length;if(r>1&&n[0].length===e.length){const t=[],s=new Set;for(let e=0,a=0;e<r;++e){const l=n[e],o=l.length;for(let c=0,h=0,d=0;c<o;++c){const u=l[c],f=Nn(t,c);if(!u.spacer){const t=Object.assign(Grid.createDataCellAttribute(),u.data(this.name,"cellData"));let g=1,p=1+d,m=e+1;while(m<r){const e=n[m++][c];if(1===e.spacer)++p,e.spacer=2;else break}if(1===p){m=c+1;while(m<o){const e=l[m++];if(1===e.spacer)++g,e.spacer=2;else break}}if(i.length){const n=Math.min(e+(p-1),i.length-1),a=u.actualParent.naturalChildren,l=a.length;m=0;while(m<l){const e=a[m++];if(!s.has(e)&&e.visible&&!e.rendered){const{left:s,right:a}=e.linear;if(In(s,u.linear.right)&&An(a,i[n]))Nn(t,"siblings").push(e)}}}t.rowSpan=g,t.columnSpan=p,t.rowStart=0==h++,t.rowEnd=p+e===r,t.cellStart=0==a++,t.cellEnd=t.rowEnd&&c===o-1,t.index=e,d=0,u.data(this.name,"cellData",t),f.push(u),s.add(u)}else if(1===u.spacer)++d}}e.each(e=>e.hide()),e.clear();const a=t.length;let l,o=0;while(o<a){const i=t[o++],s=i.length;l=0;while(l<s)i[l++].parent=e}if(e.tableElement&&"collapse"===e.css("borderCollapse"))e.resetBox(480);e.data(this.name,"columnCount",r)}}}const{convertListStyle:Bn}=squared.lib.css,{isNumber:Ln}=squared.lib.util,Wn=e=>e.backgroundImage&&!e.backgroundRepeat;const{assignRect:Fn}=squared.lib.dom,{convertFloat:On,withinRange:Un}=squared.lib.util;const{getBackgroundPosition:Hn,resolveURL:Dn}=squared.lib.css;const{formatPercent:Vn,formatPX:qn,getInheritedStyle:Xn,getStyle:zn,isLength:jn,isPercent:Gn}=squared.lib.css,{getNamedItem:Yn}=squared.lib.dom,{maxArray:$n}=squared.lib.math,{isNumber:Kn,replaceMap:Qn,safeNestedArray:Jn,withinRange:Zn}=squared.lib.util;function ea(e,t,i){i.percent=Math.round(t.bounds.width/e.box.width*100)+"%",i.expand=true}function ta(e,t,i){const s=t+"Style";e.ascend({including:i}).some(i=>{if(i.has(s)){const n=t+"Color",a=t+"Width";return e.css("border","inherit"),e.cssApply(i.cssAsObject(s,n,a)),e.unsetCache(a),true}return false})}function ia(e){e.exclude({resource:nt.ALL}),e.hide()}const sa=e=>e.css("width",qn(e.bounds.width),true);const{isLength:na}=squared.lib.css,{convertFloat:aa}=squared.lib.util;var la;const{formatPX:ra}=squared.lib.css,{maxArray:oa}=squared.lib.math,{getElementCache:ca}=squared.lib.session,{iterateReverseArray:ha}=squared.lib.util,da="html"===(null===(la=document.doctype)||void 0===la?void 0:la.name);function ua(e,t,i,s=0){let n;switch(t){case 2:n=e.actualRect("top")-i;break;case 16:n=e.actualRect("left")-i;break;case 8:n=i-e.actualRect("bottom");break;default:n=0;break}if(n-=s,n>0)(e.renderAs||e).modifyBox(t,n)}function fa(e,t,i){if(1===e.getBox(t)[0]){const s=e.registerBox(t);if(s){const[e,n]=s.getBox(t);if(i=Math.max(n,i),1===e)s.setBox(t,{adjustment:i});else s.setCacheValue("marginTop",i);return}}e.setBox(t,{reset:1,adjustment:i})}function ga(e,t,i){if(!i||pa(t,true)){const[s,n,a,l]=i?["marginTop","borderTopWidth","paddingTop",2]:["marginBottom","borderBottomWidth","paddingBottom",8];if(0===e[n])if(0===e[a]){let r=t;while(da&&0===r[s]&&0===r[n]&&0===r[a]&&Sa(r))if(i){const e=r.firstStaticChild;if(pa(e,i))r=e;else break}else{const e=ba(r);if(e)r=e;else break}const o=e[s],c=r[s];if(o>=0&&c>=0){const n=r.bounds.height;let a=false;if(!da&&0===o&&c>0&&""===r.cssInitial(s))a=true;else{const s=o>=c;if(0===n&&s&&r.textEmpty&&0===r.extensions.length)r.hide({collapse:true});else{const n=r.registerBox(l);if(n){const t=n.getBox(l)[1];if(t>0){if(t>o)fa(e,l,t);n.setBox(l,{reset:1,adjustment:0})}}else if(0===r.getBox(l)[0])if(s)a=c>0;else if(e.documentBody){if(ya(e,l),i){if(e.bounds.top>0)e.bounds.top=0,e.unset("box"),e.unset("linear");if(e.layoutVertical){const i=e.renderChildren[0];if((r.positionStatic||r.top>=0&&!r.hasPX("bottom"))&&i!==t.outerMostWrapper)fa(i,l,c),fa(r,l,0),a=true}}}else fa(e,l,c),a=true}}if(a){if(ya(r,l),!i&&r.floating){const e=r.actualParent.naturalChildren,t=e.length;for(let i=0;i<t;++i){const t=e[i];if(t.floating&&t!==r&&t.intersectY(r.bounds,"bounds"))ya(t,l)}}if(0===n&&!r.every(e=>e.floating||!e.pageFlow))ya(r,i?8:2)}}else if(o<0&&c<0)if(!i){if(c<o)fa(e,l,c);ya(r,l)}}else if(0===t[s]&&0===t[n]&&Sa(t)){let l=true;do{const r=i?t.firstStaticChild:t.lastStaticChild;if(r&&0===r[s]&&0===r[n]&&!r.visibleStyle.background&&Sa(r)){const s=r[a];if(s>0){if(s>=e[a])e.setBox(i?32:128,{reset:1});else if(l)e.modifyBox(i?32:128,-s,false);break}else{if(!pa(r,i))l=false;t=r}}else break}while(true)}}}function pa(e,t){if(!e||!e.styleElement||e.lineBreak)return false;else if(e.blockStatic)return true;else if(!e.floating){switch(e.display){case"table":case"list-item":return true}if(void 0!==t)if(t){const t=e.firstStaticChild;return pa(t)&&wa(t,false)}else{const t=e.lastStaticChild;return pa(t)&&Ea(t,false)}}return false}function ma(e,t,i,s){let n=1/0;if(e.nodeGroup&&e.some(e=>e.floating))e.renderEach(t=>{if(!t.floating){const i=t.linear.top;if(i<n)n=i,e=t}});if(n===1/0)n=e.linear.top;if(s){const a=Math.max(s.linear.top,t.linear.bottom);if(a<n)return[n-a-i,e]}return[Math.round(n-t.linear.bottom-i),e]}function ba(e){let t;if(!e.floatContainer){if(t=e.lastStaticChild,!pa(e,false)||e.hasHeight&&Math.floor(t.linear.bottom)<e.box.bottom)t=void 0}else{let i;const s=e.naturalChildren;let n=s.length-1;while(n>=0){const a=s[n--];if(a.floating){if(!t){const t=a.linear.bottom;if(i){if(t>i.linear.bottom)i=a}else if(Math.ceil(a.linear.bottom)>=e.box.bottom)i=a}else if(a.linear.bottom>=t.linear.bottom){t=a;break}}else if(!t){if(i&&i.linear.bottom>a.linear.bottom){t=i;break}t=a}}if(!t)t=i}return t}function xa(e){for(const t of[e.cssInitial("overflowX"),e.cssInitial("overflowY")])switch(t){case"auto":case"hidden":case"overlay":return true}return false}function ya(e,t,i){if(e.setBox(t,{reset:1}),i)e.registerBox(t,i)}const va=(e,t)=>e.css("minHeight",ra(Math.max(t,e.hasPX("minHeight",false)?e.parseHeight(e.css("minHeight")):0))),Sa=(e,t=true)=>(!t&&e.blockStatic||t&&e.length>0&&!e.floating)&&!e.layoutElement&&!e.tableElement&&"FIELDSET"!==e.tagName,wa=(e,t)=>!e.hasHeight&&0===e.borderBottomWidth&&0===e.paddingBottom&&Sa(e,t),Ea=(e,t)=>!e.hasHeight&&0===e.borderTopWidth&&0===e.paddingTop&&Sa(e,t),ka=e=>e.pageFlow&&e.blockDimension&&!e.floating&&!e.excluded;var _a=Object.freeze({__proto__:null,EXT_NAME:{ACCESSIBILITY:"squared.accessibility",COLUMN:"squared.column",CSS_GRID:"squared.css-grid",FLEXBOX:"squared.flexbox",GRID:"squared.grid",LIST:"squared.list",RELATIVE:"squared.relative",SPRITE:"squared.sprite",TABLE:"squared.table",VERTICAL_ALIGN:"squared.verticalalign",WHITESPACE:"squared.whitespace"}});const Ta={Accessibility:class Accessibility extends ExtensionUI{},Column:class Column extends ExtensionUI{is(e){return e.length>1&&e.blockDimension&&"table"!==e.display&&!e.layoutElement}condition(e){return e.has("columnCount")||e.hasPX("columnWidth")}processNode(e,t){let i=[];const s=[i];let n=1/0,a=false;if(e.each(e=>{var t;if("all"===e.css("columnSpan")){if(i.length)s.push([e]);else i.push(e);i=[],s.push(i)}else{if(e.textElement&&(null===(t=e.textBounds)||void 0===t?void 0:t.overflow))n=NaN;if(e.multiline)a=true;else if(!isNaN(n))n=Math.min(e.bounds.width,n);i.push(e)}}),0===i.length)s.pop();const[l,r,o]=e.cssAsTuple("columnRuleStyle","columnRuleWidth","columnRuleColor"),c=e.box.width,h=e.toInt("columnCount"),d=e.parseWidth(e.css("columnWidth"));let u,f=e.parseWidth(e.css("columnGap"));const g=()=>isNaN(h)&&d>0?c/(d+f):1/0;if(f>0)u=Math.floor(g());else f=(d>0&&!isNaN(n)&&n!==1/0?Math.max(n-d,0):0)+16,u=Math.ceil(g());e.data(this.name,"mainData",{rows:s,columnCount:h,columnWidth:d,columnGap:f,columnSized:u,columnRule:{borderLeftStyle:l,borderLeftWidth:r,borderLeftColor:o},boxWidth:t.actualBoxWidth(c),multiline:a})}},CssGrid:Tn,Flexbox:class Flexbox extends ExtensionUI{is(e){return e.flexElement}condition(e){return e.length>0}processNode(e){const t=this.controller,[i,s]=e.partition(e=>e.pageFlow),n=function(e,t){return Object.assign(Object.assign({},e.flexdata),{rowCount:0,columnCount:0,children:t})}(e,i);if(e.cssTry("align-items","start")){if(e.cssTry("justify-items","start")){const t=i.length;let s=0;while(s<t){const e=i[s++];if(e.cssTry("align-self","start")){if(e.cssTry("justify-self","start")){const{width:t,height:i}=e.boundingClientRect;e.data(this.name,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i})),e.cssFinally("justify-self")}e.cssFinally("align-self")}}e.cssFinally("justify-items")}e.cssFinally("align-items")}if(n.wrap){const[a,l,r,o]=n.row?["top","left","right","intersectY"]:["left","top","bottom","intersectX"];i.sort((e,t)=>{const i=e.linear,s=t.linear;if(!e[o](t.bounds,"bounds"))return i[a]<s[a]?-1:1;else{const e=i[l],t=s[l];if(!Cn(e,t))return e<t?-1:1}return 0});let c=i[0],h=[c];const d=[h];let u=i.length,f=1;while(f<u){const e=i[f++];if(c[o](e.bounds,"bounds"))h.push(e);else c=e,h=[e],d.push(h)}e.clear();let g,p=0;if(u=d.length,f=0,u>1){const i=e.box[r];while(f<u){const s=d[f];p=Math.max(s.length,p);const n=t.createNodeGroup(s[0],s,e,{delegate:true,cascade:true});n.addAlign(128),n.box[r]=i,n.containerIndex=f++}g=u}else{const t=d[0];e.retainAs(t),p=t.length;while(f<p)t[f].containerIndex=f++;g=p}f=0;while(f<s.length)s[f].containerIndex=g+f++;if(e.addAll(s),e.sort(),n.row)n.rowCount=u,n.columnCount=p;else n.rowCount=p,n.columnCount=u}else{if(i.some(e=>0!==e.flexbox.order)){const[e,t]=n.reverse?[-1,1]:[1,-1];i.sort((i,s)=>{const n=i.flexbox.order,a=s.flexbox.order;if(n===a)return 0;else return n>a?e:t})}if(n.row)n.rowCount=1,n.columnCount=e.length;else n.rowCount=e.length,n.columnCount=1}e.data(this.name,"mainData",n)}},Grid:Grid,List:class List extends ExtensionUI{condition(e){const t=e.length;if(t){const i=new Set;let s=true,n=true,a=true,l=true,r=false;const o=e.children;for(let e=0;e<t;++e){const c=o[e],h=c.css("listStyleType");if("list-item"===c.display&&("none"!==h||c.innerBefore)||c.marginLeft<0&&"none"===h&&Wn(c.visibleStyle))r=true;if(a||l)if(c.floating)i.add(c.float),l=false;else if(0===e||e===t-1||c.blockStatic||o[e-1].blockStatic&&o[e+1].blockStatic)a=false;else a=false,l=false;if(!c.blockStatic)s=false;if(!c.inlineVertical)n=false;if(!(s||n||l||a))return false}return r&&(s||n||a&&1===i.size||l)}return false}processNode(e){const t="OL"===e.tagName;let i=t&&e.toElementInt("start")||1;e.each(e=>{const s={ordinal:"",imageSrc:"",imagePosition:""},n=e.css("listStyleType"),a="list-item"===e.display;if(a||""!==n&&"none"!==n||Wn(e.visibleStyle)){if(e.has("listStyleImage"))s.imageSrc=e.css("listStyleImage");else{if(t&&a&&"LI"===e.tagName){const t=e.attributes.value;if(Ln(t))i=Math.floor(parseFloat(t))}let l=Bn(n,i);if(""===l)switch(n){case"disc":l="●";break;case"square":l="■";break;case"none":{let t="",i="";if(!e.visibleStyle.backgroundRepeat)t=e.backgroundImage,i=e.css("backgroundPosition");if(""!==t&&"none"!==t)s.imageSrc=t,s.imagePosition=i,e.exclude({resource:nt.IMAGE_SOURCE});break}default:l="○";break}else l+=".";s.ordinal=l}if(a)++i}e.data(this.name,"mainData",s)})}},Relative:class Relative extends ExtensionUI{is(e){return e.positionRelative&&!e.autoPosition||0!==On(e.verticalAlign)}condition(){return true}processNode(e){return{subscribe:true}}postOptimize(e){const t=e.renderParent,i=!e.baselineAltered?On(e.verticalAlign):0;let s=0,n=0,a=0,l=0;if(e.hasPX("top"))s=e.top;else a=e.bottom;if(e.hasPX("left"))l=e.left;else n=e.right;if(t.support.positionTranslation){let t=0,r=0;if(0!==l)t=l;else if(0!==n)t=-n;if(0!==s)r=s;else if(0!==a)r=-a;if(0!==i)r-=i;if(0!==t)e.translateX(t,{relative:true});if(0!==r)e.translateY(r,{relative:true})}else{let r=e;if((0!==s||0!==a||0!==i)&&t.layoutHorizontal&&t.support.positionRelative&&0===e.renderChildren.length){const i=this.application;r=e.clone(i.nextId,true,true),r.baselineAltered=true,e.hide({hidden:true}),this.cache.add(r,false);const s=new LayoutUI(t,r,r.containerType,r.alignmentType),n=t.renderChildren.findIndex(t=>t===e);if(-1!==n)s.renderIndex=n+1;if(i.addLayout(s),e.parseUnit(e.css("textIndent"))<0){const i=e.documentId;t.renderEach(e=>{if(e.alignSibling("topBottom")===i)e.alignSibling("topBottom",r.documentId);else if(e.alignSibling("bottomTop")===i)e.alignSibling("bottomTop",r.documentId)})}if(e.baselineActive&&!e.baselineAltered)for(const i of t.horizontalRows||[t.renderChildren])if(i.includes(e)){const t=i.filter(t=>t.positionRelative&&t.length>0&&0!==On(e.verticalAlign)),s=t.length;if(s){t.sort((e,t)=>{const i=e.linear.top,s=t.linear.top;if(Un(i,s))return 0;else return i<s?-1:1});let i=true,n=0;while(n<s){const s=t[n++];if(i)e.modifyBox(2,On(s.verticalAlign)),i=false;else s.modifyBox(2,s.linear.top-t[0].linear.top);s.setCacheValue("verticalAlign","0px")}}break}}else if(e.positionRelative&&e.naturalElement){const i=e.bounds,r=0!==s||0!==a,o=0!==l||0!==n;let c,h=false;const d=e.actualParent.naturalChildren,u=d.length;let f=0;while(f<u){const u=d[f++];if(u===e){if(h){if(r&&t.layoutVertical){const t=Fn(e.boundingClientRect);if(0!==s)s-=t.top-i.top;else if((null==c?void 0:c.positionRelative)&&c.hasPX("top"))a+=i.bottom-t.bottom;else a+=t.bottom-i.bottom}if(o&&t.layoutHorizontal&&!e.alignSibling("leftRight")){const t=Fn(e.boundingClientRect);if(0!==l)l-=t.left-i.left;else if((null==c?void 0:c.positionRelative)&&c.hasPX("right"))n+=i.right-t.right;else n+=t.right-i.right}}else if(t.layoutVertical)if(0!==s){if((null==c?void 0:c.blockStatic)&&c.positionRelative&&u.blockStatic)s-=c.top}else if(0!==a){if(1===u.getBox(2)[0])a-=u.marginTop}break}else if(u.positionRelative&&u.renderParent===t)h=true;if(u.pageFlow)c=u}}if(0!==i)r.modifyBox(2,-1*i);if(0!==s)r.modifyBox(2,s);else if(0!==a)r.modifyBox(2,-1*a);if(0!==l)if(r.autoMargin.left)r.modifyBox(4,-1*l);else r.modifyBox(16,l);else if(0!==n)r.modifyBox(16,-1*n);if(r!==e)r.setBoxSpacing()}}},Sprite:class Sprite extends ExtensionUI{is(e){return 0===e.length&&e.hasWidth&&e.hasHeight}condition(e){const t=e.backgroundImage;if(""!==t&&(!e.use||this.included(e.element))){const i=this.resource.getRawData(t)||this.resource.getImage(Dn(t));if(i){const t=e.actualDimension,[s,n]=e.cssAsTuple("backgroundPositionX","backgroundPositionY"),a=Hn(s+" "+n,t,{fontSize:e.fontSize,screenDimension:e.localSettings.screenDimension}),l=/^0[a-z%]+|left|start|top/,r=(a.left<0||l.test(s))&&i.width>t.width,o=(a.top<0||l.test(n))&&i.height>t.height;if((r||o)&&(r||0===a.left)&&(o||0===a.top))return e.data(this.name,"mainData",{image:i,position:a}),true}}return false}},Table:class Table extends ExtensionUI{processNode(e){const t=function(e){return{layoutType:0,rowCount:0,columnCount:0,layoutFixed:"fixed"===e.css("tableLayout"),borderCollapse:"collapse"===e.css("borderCollapse"),expand:false}}(e),i=[];let s,n,a=[];const l=e=>{if(e)e.cascade(t=>{switch(t.tagName){case"TH":case"TD":t.inherit(e,"styleMap"),t.unsetCache("visibleStyle");break}}),a=a.concat(e.children),ia(e)};e.each(e=>{switch(e.tagName){case"THEAD":if(!n)n=e;else ia(e);break;case"TBODY":i.push(e);break;case"TFOOT":if(!s)s=e;else ia(e);break}}),l(n);for(let e=0;e<i.length;++e){const t=i[e];a=a.concat(t.children),ia(t)}l(s);const r=e.hasWidth,o=t.borderCollapse,[c,h]=o?[0,0]:Qn(e.css("borderSpacing").split(" "),(t,i)=>0===i?e.parseWidth(t):e.parseHeight(t)),d=c>1?Math.round(c/2):c,u=h>1?Math.round(h/2):h,f=e.element.querySelector("COLGROUP"),g=e.find(e=>"CAPTION"===e.tagName),p="bottom"===e.css("captionSide"),m=[],b=[],x=[],y=[],v=a.length;let S,w=0;for(let i=0;i<v;++i){const s=a[i];m[i]=c;const n=x[i]||[];x[i]=n,s.each((s,a)=>{const l=s.element,r=l.rowSpan;let o=l.colSpan;S=0;while(n[S])++S;const g=i+r;let p=i;while(p<g){const e=Jn(x,p++),t=S+o;for(let i=S,n=0;i<t;++i)if(!e[i])e[i]=s,++n;else{o=n;break}}if(!s.hasPX("width")){const e=Yn(l,"width");if(Gn(e))s.css("width",e,true);else if(Kn(e))s.css("width",qn(parseFloat(e)),true)}if(!s.hasPX("height")){const e=Yn(l,"height");if(Gn(e))s.css("height",e);else if(Kn(e))s.css("height",qn(parseFloat(e)))}if(""===s.cssInitial("verticalAlign"))s.css("verticalAlign","middle",true);if(!s.visibleStyle.backgroundImage&&!s.visibleStyle.backgroundColor){const e=/rgba\(0, 0, 0, 0\)|transparent/;if(f){const{backgroundImage:t,backgroundColor:i}=zn(f.children[a+1]);if(t&&"none"!==t)s.css("backgroundImage",t,true);if(i&&!e.test(i))s.css("backgroundColor",i),s.setCacheValue("backgroundColor",i)}else{let t=Xn(l,"backgroundImage",/none/,"TABLE");if(""!==t)s.css("backgroundImage",t,true);if(t=Xn(l,"backgroundColor",e,"TABLE"),""!==t)s.css("backgroundColor",t),s.setCacheValue("backgroundColor",t)}}switch(s.tagName){case"TD":{const e=s.parent;if(0===s.borderTopWidth)ta(s,"borderTop",e);if(0===s.borderRightWidth)ta(s,"borderRight",e);if(0===s.borderBottomWidth)ta(s,"borderBottom",e);if(0===s.borderLeftWidth)ta(s,"borderLeft",e);break}case"TH":if(""===s.cssInitial("textAlign"))s.css("textAlign","center");if(0===s.borderTopWidth)ta(s,"borderTop",e);if(0===s.borderBottomWidth)ta(s,"borderBottom",e);break}const w=s.cssInitial("width"),E=void 0===y[S]||"auto"===y[S],k=s.bounds.width;if(0===i||E||!t.layoutFixed)if(""===w||"auto"===w){if(void 0===y[S])y[S]=w||"0px",b[S]=0;else if(i===v-1&&E&&0===b[S])b[S]=k}else{const e=Gn(w),t=jn(y[S]);if(E||k<b[S]||k===b[S]&&(t&&e||e&&Gn(y[S])&&s.parseWidth(w)>=s.parseWidth(y[S])||t&&jn(w)&&s.parseWidth(w)>s.parseWidth(y[S])))y[S]=w;if(E||1===l.colSpan)b[S]=k}if(s.length||s.inlineText)m[i]+=k+c;if(d>0)s.modifyBox(16,0===S?c:d),s.modifyBox(4,0===a?d:c);if(u>0)s.modifyBox(2,0===i?h:u),s.modifyBox(8,i+r<v?u:h);s.data(this.name,"cellData",{colSpan:o,rowSpan:r})}),ia(s),w=Math.max(w,n.length)}if(e.hasPX("width",false)&&y.some(e=>Gn(e)))Qn(y,(e,t)=>{if("auto"===e){const e=b[t];if(e>0)return qn(e)}return e});let E=false,k=0;if(y.every(e=>Gn(e))){if(y.reduce((e,t)=>e+parseFloat(t),0)>1){let e=100;Qn(y,t=>{const i=parseFloat(t);if(e<=0)t="0px";else if(e-i<0)t=Vn(e/100);return e-=i,t})}if(!e.hasWidth)t.expand=true;E=true}else if(y.every(e=>jn(e))){const i=y.reduce((e,t)=>e+parseFloat(t),0);if(e.hasWidth)if(i<e.width)Qn(y,e=>"0px"!==e?parseFloat(e)/i*100+"%":e);else if(i>e.width)if(e.css("width","auto"),!t.layoutFixed)e.cascade(e=>(e.css("width","auto"),false));if(t.layoutFixed&&!e.hasPX("width"))e.css("width",qn(e.bounds.width))}if(t.layoutType=(()=>{if(y.length>1){if(k=y.reduce((e,t)=>e+(Gn(t)?parseFloat(t):0),0),t.layoutFixed&&y.reduce((e,t)=>e+(jn(t)?parseFloat(t):0),0)>=e.actualWidth)return 4;else if(y.length>1&&y.some(e=>Gn(e))||y.every(e=>jn(e)&&"0px"!==e))return 3;else if(y.every(e=>e===y[0]))if(e.find(e=>e.hasHeight,{cascade:true}))return t.expand=true,3;else if("auto"===y[0])if(e.hasWidth)return 3;else{const t=e.cascade(e=>"TD"===e.tagName);return t.length&&t.every(e=>Zn(e.bounds.width,t[0].bounds.width))?0:3}else if(e.hasWidth)return 2;if(y.every(e=>"auto"===e||jn(e)&&"0px"!==e)){if(!e.hasWidth)t.expand=true;return 1}}return 0})(),e.clear(),g){if(!g.hasWidth)if(g.textElement){if(!g.hasPX("maxWidth"))g.css("maxWidth",qn(g.bounds.width))}else if(g.bounds.width>$n(m))sa(g);if(!g.cssInitial("textAlign"))g.css("textAlign","center");if(g.data(this.name,"cellData",{colSpan:w}),!p)g.parent=e}let _=0;while(_<v){const i=x[_++],s=i.length;S=0;while(S<s){const s=i[S],n=s.data(this.name,"cellData"),a=y[S];if(S+=n.colSpan,!n.placed){if(a)switch(t.layoutType){case 0:break;case 3:if("auto"===a)if(k>=1)sa(s),n.exceed=!r,n.downsized=true;else ea(e,s,n);else if(Gn(a))if(E)n.percent=a,n.expand=true;else sa(s);else if(jn(a)&&parseInt(a)>0)if(s.bounds.width>=parseInt(a))sa(s),n.expand=false,n.downsized=false;else if(t.layoutFixed)ea(e,s,n),n.downsized=true;else sa(s),n.expand=false;else{if(!s.hasPX("width",false)||s.percentWidth)sa(s);n.expand=false}break;case 2:ea(e,s,n);break;case 1:if("auto"===a)n.flexible=true;else{if(t.layoutFixed)n.downsized=true;else sa(s);n.expand=false}break;case 4:if(!jn(a))s.hide();break}n.placed=true,s.parent=e}}if(s<w){const e=i[s-1].data(this.name,"cellData");if(e)e.spaceSpan=w-s}}if(g&&p)g.parent=e;if(t.borderCollapse){const t=e.cssAsObject("borderTopColor","borderTopStyle","borderTopWidth"),i=e.cssAsObject("borderRightColor","borderRightStyle","borderRightWidth"),s=e.cssAsObject("borderBottomColor","borderBottomStyle","borderBottomWidth"),n=e.cssAsObject("borderLeftColor","borderLeftStyle","borderLeftWidth"),a=parseInt(t.borderTopWidth),l=parseInt(i.borderRightWidth),r=parseInt(s.borderBottomWidth),o=parseInt(n.borderLeftWidth);let c=false,h=false,d=false,u=false;for(_=0;_<v;++_){const e=x[_];for(S=0;S<w;++S){const f=e[S];if("visible"===(null==f?void 0:f.css("visibility"))){if(0===_)if(f.borderTopWidth<a)f.cssApply(t),f.unsetCache("borderTopWidth");else c=true;if(_>=0&&_<v-1){const e=x[_+1][S];if("visible"===(null==e?void 0:e.css("visibility"))&&e!==f)if(f.borderBottomWidth>e.borderTopWidth)e.css("borderTopWidth","0px",true);else f.css("borderBottomWidth","0px",true)}if(_===v-1)if(f.borderBottomWidth<r)f.cssApply(s),f.unsetCache("borderBottomWidth");else d=true;if(0===S)if(f.borderLeftWidth<o)f.cssApply(n),f.unsetCache("borderLeftWidth");else u=true;if(S>=0&&S<w-1){const t=e[S+1];if("visible"===(null==t?void 0:t.css("visibility"))&&t!==f)if(f.borderRightWidth>=t.borderLeftWidth)t.css("borderLeftWidth","0px",true);else f.css("borderRightWidth","0px",true)}if(S===w-1)if(f.borderRightWidth<l)f.cssApply(i),f.unsetCache("borderRightWidth");else h=true}}}if(c||h||d||u)e.cssApply({borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"},true)}t.rowCount=v+(g?1:0),t.columnCount=w,e.data(this.name,"mainData",t)}},VerticalAlign:class VerticalAlign extends ExtensionUI{is(e){return e.length>0}condition(e){let t=false,i=0,s=0;const n=e.children,a=n.length;let l=0;while(l<a){const e=n[l++];if(!(e.positionStatic||e.positionRelative&&e.length))return false;else if(e.inlineVertical){const n=aa(e.verticalAlign);if(0!==n)t=true;if(!isNaN(s))if(0===s)s=n;else if(s!==n)s=NaN;++i}else s=NaN}return t&&isNaN(s)&&i>1&&NodeUI.linearData(n).linearX}processNode(e){return e.each(e=>{if(e.inlineVertical&&na(e.verticalAlign)||e.imageElement||e.svgElement)e.baselineAltered=true}),{subscribe:true}}postConstraints(e){if(e.layoutHorizontal)for(const t of e.horizontalRows||[e.renderChildren]){const e=[];let i,s=1/0;const n=t.length;let a=0;while(a<n){const n=t[a++],l=n.linear.top;if(n.inlineVertical&&l<=s){if(l<s)e.length=0;e.push(n),s=l}if(n.baselineActive)i=n}if(e.length){const s=e[0],l=s.linear.top;a=0;while(a<n){const s=t[a++];if(s!==i){if(s.inlineVertical)if(!e.includes(s)){if(na(s.verticalAlign)||!i)s.setBox(2,{reset:1,adjustment:s.linear.top-l}),s.baselineAltered=true}else if(i&&(s.imageElement||s.svgElement)&&i.documentId===s.alignSibling("baseline"))s.setBox(2,{reset:1,adjustment:i.linear.top-s.linear.top});if(s.baselineAltered)s.setCacheValue("verticalAlign","0px")}}if(i)i.setBox(2,{reset:1,adjustment:i.linear.top-l+Math.min(0,s.parseHeight(s.cssInitial("verticalAlign")))}),i.baselineAltered=true}}else e.each(e=>e.baselineAltered=false)}},WhiteSpace:class WhiteSpace extends ExtensionUI{afterBaseLayout(){const e=this.application,t=new Set,i=e.session.clearMap;this.cacheProcessing.each(e=>{var s,n;if(e.naturalElement&&!e.hasAlign(4)){const a=e.naturalChildren,l=a.length;if(0===l)return;const r=e.pageFlow,o=r&&pa(e,true)&&!e.actualParent.layoutElement;let c,h;for(let r=0;r<l;++r){const d=a[r];if(d.pageFlow){if(o)if(!d.floating){if(!c)c=d;h=d}else if(h){if(d.linear.bottom>=h.linear.bottom)h=d}else h=d;if(pa(d,true))if(r>0){const a=d.previousSiblings({floating:false}),o=a.length;if(o){let h=false;const u=a[o-1];if(pa(u,false)){let e=u.marginBottom,n=d.marginTop;if(u.marginTop<0&&0===u.bounds.height){const i=Math.min(e,u.marginTop);if(i<0){if(Math.abs(i)<n)d.modifyBox(2,i);else ya(d,2);t.add(u.id),u.hide({collapse:true});continue}}else if(d.marginBottom<0&&0===d.bounds.height){const i=Math.min(n,d.marginBottom);if(i<0){if(Math.abs(i)<e)u.modifyBox(8,i);else ya(u,8);t.add(d.id),d.hide({collapse:true});continue}}let a=false,l=u;while(wa(l,true)){let t=ba(l);if(0===(null==t?void 0:t.getBox(8)[0])){let i=t.marginBottom,s=t;while(0===s.bounds.height&&!s.pseudoElement){const e=s.marginTop;if(i=Math.max(e,s.marginBottom,i),0!==e)ya(s,2);const n=s.previousSibling;if(n)if(n.marginBottom>=i){if(0!==s.marginBottom)ya(s,8);t=n,i=n.marginBottom,s=n}else if(n.bounds.height>0)break;else{if(0!==n.marginBottom)ya(n,8);s=n}else break}if(0!==i)ya(t,8,0===u.getBox(8)[0]?u:void 0);if(i>e)e=i,a=true;else if(0===i&&0===e){l=t;continue}}break}l=d;while(Ea(l,true)){let e=l.firstStaticChild;if(pa(e,true)&&0===e.getBox(2)[0]){let t=e.marginTop,i=e;while(0===i.bounds.height&&!i.pseudoElement){const s=i.marginBottom;if(t=Math.max(i.marginTop,s,t),0!==s)ya(i,8);const n=i.nextSibling;if(n)if(n.marginTop>=t){if(0!==i.marginTop)ya(i,2);e=n,t=n.marginTop,i=n}else if(n.bounds.height>0)break;else{if(0!==n.marginTop)ya(n,2);i=n}else break}if(0!==t)ya(e,2,0===d.getBox(2)[0]?d:void 0);if(t>n)n=t,h=true;else if(0===t&&0===n){l=e;continue}}break}if(e>0)if(n>0){if(n<=e){if(!h||!xa(d)){if(ya(d,2),0===d.bounds.height&&e>=d.marginBottom)ya(d,8);h=false}}else if(!a||!xa(u)){if(ya(u,8),0===u.bounds.height&&n>=u.marginTop)ya(u,2);a=false}}else if(0===d.bounds.height)if(n=Math.min(n,d.marginBottom),n<0)u.modifyBox(8,n),d.hide({collapse:true});if(n>0&&u.floatContainer&&0===d.getBox(2)[1]&&!xa(u)){let e=false;if(0===u.bounds.height)e=true;else{let t;if(ha(u.naturalElements,e=>{if(i.has(e))return true;else if(e.floating){if(e.linear.bottom>Math.ceil(u.bounds.bottom))t=e.float;return true}}),t){const i=null===(s=ca(u.element,"styleMap::after",u.sessionId))||void 0===s?void 0:s.clear;e=!("both"===i||i===t)}}if(e)d.modifyBox(2,u.box.top-oa(u.naturalElements.map(e=>e.linear.bottom)),false)}if(h){let e=0;if(0===u.bounds.height){const t=u.previousSibling;e=t&&pa(t,false)?Math.max(t.getBox(8)[1],t.marginBottom):0}if(n>e)(d.registerBox(2)||d).setCacheValue("marginTop",n)}if(a){let t=0;if(0===d.bounds.height){const e=d.nextSibling;t=e&&pa(e,true)?Math.max(e.getBox(2)[1],e.marginTop):0}if(e>=t)(u.registerBox(8)||u).setCacheValue("marginBottom",e)}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;if(e>0&&t>0)if(e<t)ya(d,2);else if(r===l-1)d.setCacheValue("marginBottom",e),ya(d,2);else ya(d,8)}if(!h&&d!==c&&a.length>1&&(e.layoutVertical||(null===(n=d.renderParent)||void 0===n?void 0:n.layoutVertical))){const e=a.pop();if(e.floating&&Math.floor(e.bounds.top)===Math.floor(d.bounds.top))d.modifyBox(2,-e.bounds.height,false)}}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;if(e>0&&t>0){if(e<t)d.setCacheValue("marginTop",t);ya(d,8)}}}}if(r&&!xa(e)&&"FIELDSET"!==e.tagName){if(null==c?void 0:c.naturalElement)ga(e,c,true);if(null==h?void 0:h.naturalElement)if(ga(e,h,false),h.marginTop<0){const t=h.bounds.height+h.marginBottom+h.marginTop;if(t<0)e.modifyBox(128,t,false)}}}}),e.processing.excluded.each(e=>{if(e.lineBreak&&!e.lineBreakTrailing&&!i.has(e)&&!t.has(e.id)){let i=false;const s=e.previousSiblings({floating:false});if(s.length){const n=e.actualParent,a=e.nextSiblings();if(a.length){let l,r,o=s.pop(),c=a.pop(),h=0;if(o.rendered&&c.rendered){const a=o.inlineStatic&&c.inlineStatic;if(a&&0===s.length)return void t.add(e.id);if(!o.multiline&&o.has("lineHeight")){const e=Math.floor((o.lineHeight-o.bounds.height)/2);if(e>0)h+=e}if(!c.multiline&&c.has("lineHeight")){const e=Math.round((c.lineHeight-c.bounds.height)/2);if(e>0)h+=e}if(a){if(l=s[0],1===s.length)l=l.lineBreak?e:void 0;null==l||l.setBounds(false)}let d=o.renderParent,u=c.renderParent;if(d!==u){while(d&&d!==n)o=d,d=o.renderParent;while(u&&u!==n)c=u,u=c.renderParent}if([r,c]=ma(c,o,h,l),r>=1)if(c.visible)c.modifyBox(2,r),i=true;else if(o.visible)o.modifyBox(8,r),i=true}else if([r,c]=ma(c,o,h),r>=1)if((c.lineBreak||c.excluded)&&n.lastChild===c)n.modifyBox(128,r),i=true;else if((o.lineBreak||o.excluded)&&n.firstChild===o)n.modifyBox(32,r),i=true}else if(n.visible&&!n.preserveWhiteSpace&&"CODE"!==n.tagName){if(!n.documentRoot&&!n.documentBody){const e=s[s.length-1],t=0===e.bounds.height&&e.length?NodeUI.outerRegion(e):e.linear,i=n.box.bottom-(e.lineBreak||e.excluded?t.top:t.bottom);if(0!==i)if(e.rendered||n.visibleStyle.background)n.modifyBox(128,i);else if(!n.hasHeight)va(n,i)}else if(a.length){const e=a[a.length-1],t=(e.lineBreak||e.excluded?e.linear.bottom:e.linear.top)-n.box.top;if(0!==t)if(e.rendered||n.visibleStyle.background)n.modifyBox(32,t);else if(!n.hasHeight)va(n,t)}i=true}if(i){for(let e=0;e<s.length;++e)t.add(s[e].id);for(let e=0;e<a.length;++e)t.add(a[e].id)}}}})}afterConstraints(){this.cacheProcessing.each(e=>{if(e.naturalChild&&e.styleElement&&e.inlineVertical&&e.pageFlow&&!e.positioned&&!e.actualParent.layoutElement){const t=e.outerMostWrapper,i=t.renderParent;if(false===(null==i?void 0:i.hasAlign(4))){if(e.blockDimension&&!e.floating)if(i.layoutVertical){const s=i.renderChildren,n=s.findIndex(e=>e===t);if(-1!==n){if(!e.lineBreakLeading&&!e.baselineAltered){const e=s[n-1];if(null==e?void 0:e.pageFlow)ua(t,2,e.actualRect("bottom"),e.getBox(8)[1])}if(!e.lineBreakTrailing){const e=s[n+1];if((null==e?void 0:e.pageFlow)&&e.styleElement&&!e.inlineVertical)ua(t,8,e.actualRect("top"),e.getBox(2)[1])}}}else if(!e.baselineAltered){const s=i.horizontalRows;let n;if(s&&s.length>1)e:{let e=-1/0;const i=s.length;let a;for(let l=0;l<i;++l){const i=s[l],r=i.length;a=0;while(a<r)if(t===i[a++]){if(l>0)ua(t,2,e);else n=i;break e}let o=0;while(o<i.length){const t=i[o++].innerMostWrapped;if(ka(t))e=Math.max(t.actualRect("bottom"),e)}if(e===-1/0)break}}else if(i.layoutHorizontal||i.hasAlign(1024))n=i.renderChildren;if(n){let i=[],s=n.length,a=0;while(a<s){const e=n[a++];if(e.nodeGroup)i=i.concat(e.cascade(e=>e.naturalChild));else if(e.innerWrapped)i.push(e.innerMostWrapped);else i.push(e)}let l=-1/0;const r=e.actualParent.naturalChildren;s=r.length,a=0;while(a<s){const e=r[a++];if(i.includes(e))break;else if(e.lineBreak||e.block)l=-1/0;else if(ka(e))l=Math.max(e.actualRect("bottom"),l)}if(l!==-1/0&&e.actualRect("top")>l)ua(t,2,l)}}if(!i.layoutVertical&&!t.alignParent("left")){const s=t.alignSibling("leftRight");if(""!==s){const e=i.renderChildren.find(e=>e.documentId===s);if(null==e?void 0:e.inlineVertical)ua(t,16,e.actualRect("right"))}else{let i=e;while(true){const e=i.siblingsLeading;if(e.length&&!e.some(e=>e.lineBreak||e.excluded&&e.blockStatic)){const s=e[0];if(s.inlineVertical)ua(t,16,s.actualRect("right"));else if(s.floating){i=s;continue}}break}}}}}if(e.floatContainer&&e.layoutVertical){const t=[],i=e.naturalChildren,s=i.length;for(let n=0;n<s;++n){const s=i[n];if(s.pageFlow)if(!s.floating){const i=t.length;if(i){const n=s.outerMostWrapper;let a=n.renderParent;if(a){const[l,r]=s.getBox(2);if((0===l?s.marginTop:0)+r>0){const s=Math.floor(e.bounds.top);let l=0;while(l<i){const i=t[l++];if(s<=Math.floor(i.bounds.top)){let t=i.outerMostWrapper.renderParent;if(t){if(a=a.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||a,t=t.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||t,a!==t)n.modifyBox(2,-1*(t!==e?t:i).linear.height,false);break}}}}}t.length=0}}else t.push(s)}}})}}},Ca={constant:_a,enumeration:lt};e.Application=F,e.ApplicationUI=class ApplicationUI extends F{constructor(e,t,i,s,n){super(e,t,i,s,n),this.session={cache:new NodeList,excluded:new NodeList,extensionMap:new Map,clearMap:new Map,active:[]},this.builtInExtensions={},this.extensions=[],this._layouts=[];const a=this.controllerHandler.localSettings;this._controllerSettings=a,this._layoutFileExtension=new RegExp(`\\.${a.layout.fileExtension}$`),this._excluded=a.unsupported.excluded}finalize(){var e;if(this.closed)return;const{controllerHandler:t,session:i}=this,s=i.cache,n=this.extensions,a=this._layouts,l=s.children;let r=l.length;const o=new Array(r);let c=0,h=0;while(c<r){const e=l[c++];if(e.renderParent&&e.visible){if(e.hasProcedure(at.LAYOUT))e.setLayout();if(e.hasProcedure(at.ALIGNMENT))e.setAlignment();o[h++]=e}}o.length=h,t.optimize(o),r=n.length,c=0;while(c<r){const e=n[c++];for(const t of e.subscribers)e.postOptimize(t)}const d=[];c=0;while(c<h){const e=o[c++];if(e.hasResource(nt.BOX_SPACING))e.setBoxSpacing();if(e.documentRoot){if(0===e.renderChildren.length&&!e.inlineText){const t=e.naturalElements;if(t.length&&t.every(e=>e.documentRoot))continue}const t=e.innerMostWrapped.data(F.KEY_NAME,"layoutName");if(t)d.push({node:e,layoutName:t})}}c=0;while(c<r)n[c++].beforeCascade(d);const u=this._controllerSettings.layout.baseTemplate,f=Xt(this.systemName);for(c=0;c<d.length;++c){const{node:i,layoutName:s}=d[c],n=i.renderParent.renderTemplates;if(n)this.saveDocument(s,u+t.cascadeDocument(n,Math.abs(i.depth)),i.dataset["pathname"+f],(null===(e=i.renderExtension)||void 0===e?void 0:e.some(e=>e.documentBase))?0:void 0)}this.resourceHandler.finalize(a),t.finalize(a),c=0;while(c<r)n[c++].afterFinalize();Dt("__squared.pseudo"),this.closed=true}copyToDisk(e,t){return super.copyToDisk(e,this.createAssetOptions(t))}appendToArchive(e,t){return super.appendToArchive(e,this.createAssetOptions(t))}saveToArchive(e,t){return super.saveToArchive(e,this.createAssetOptions(t))}reset(){super.reset();const e="iteration"+Xt(this.systemName);for(const t of this.rootElements)delete t.dataset[e];const t=this.session;t.cache.reset(),t.excluded.reset(),t.extensionMap.clear(),this._layouts.length=0}conditionElement(e,t){if(!this._excluded.has(e.tagName))if(this.controllerHandler.visibleElement(e,t)||this._cascadeAll)return true;else if(!t){switch(Ft(e).position){case"absolute":case"fixed":return this.useElement(e)}let t=e.parentElement;while(t){if("none"===Ft(t).display)return this.useElement(e);t=t.parentElement}const i=this.controllerHandler;if(Qt(e.children,e=>i.visibleElement(e))===1/0)return true;else return this.useElement(e)}return false}insertNode(e,t){if("#text"===e.nodeName||this.conditionElement(e,t)){this.controllerHandler.applyDefaultStyles(e);return this.createNode({element:e,append:false})}else{const t=this.createNode({element:e,append:false});return t.visible=false,t.excluded=true,t}}saveDocument(e,t,i,s){if(Kt(t)){const n={pathname:i?ii(i.replace(/\\/g,"/"),"/"):qt(this.userSettings.outputDirectory,this._controllerSettings.layout.pathName),filename:e,content:t,index:s};if(void 0===s||!(s>=0&&s<this._layouts.length))this._layouts.push(n);else this._layouts.splice(s,0,n)}}renderNode(e){return 0===e.itemCount?this.controllerHandler.renderNode(e):this.controllerHandler.renderNodeGroup(e)}addLayout(e){const t=e.renderType;if(Yt(t,512))if(Yt(t,8))e=this.processFloatHorizontal(e);else if(Yt(t,16))e=this.processFloatVertical(e);if(0!==e.containerType){const t=this.renderNode(e);if(t)return this.addLayoutTemplate(t.parent||e.parent,e.node,t,e.renderIndex)}return false}addLayoutTemplate(e,t,i,s){if(i){if(!t.renderExclude){if(t.renderParent){const n=Zt(e,"renderTemplates");if(void 0===s||!(s>=0&&s<e.renderChildren.length))e.renderChildren.push(t),n.push(i);else e.renderChildren.splice(s,0,t),n.splice(s,0,i)}}else t.hide({remove:true}),t.excluded=true;return true}return false}createNode(e){const{element:t,parent:i,children:s}=e,n=new this.Node(this.nextId,this.processing.sessionId,t);if(this.controllerHandler.afterInsertNode(n),i){if(n.depth=i.depth+1,!t&&i.naturalElement)n.actualParent=i;const s=e.innerWrap;if(s&&i.replaceTry({child:s,replaceWith:n}))s.parent=n,n.innerWrapped=s}if(s){const e=s.length;let t=0;while(t<e)s[t++].parent=n}if(false!==e.append)this.processing.cache.add(n,true===e.delegate,true===e.cascade);return n}createCache(e){const t=this.createRootNode(e);if(t){const e=this.controllerHandler,i=this._cache,s=this.processing.excluded,n=t.parent,a={},l=new Set,r=[];let o=false;if(t.documentBody)n.naturalChild=true,n.setCacheValue("naturalElement",true),n.visible=false,n.addAlign(4),n.exclude({resource:nt.FONT_STYLE|nt.VALUE_STRING,procedure:at.ALL}),i.add(n);if(t.originalRoot=true,t.documentParent=n,i.each(e=>{if(e.styleElement){const t=e.element;if(e.length){const i=e.cssInitial("textAlign");switch(i){case"center":case"right":case"end":ei(a,e.id)["text-align"]=i,t.style.setProperty("text-align","left");break}}if(e.positionRelative){let i=0;while(i<4){const s=NodeUI.BOX_POSITION[i++];if(e.hasPX(s))ei(a,e.id)[s]=e.css(s),t.style.setProperty(s,"auto"),o=true}}if("rtl"===e.dir)t.dir="ltr",l.add(t),o=true}}),s.each(e=>{if(!e.pageFlow)e.cssTry("display","none")}),i.each(e=>{if(!e.pseudoElement)e.setBounds(!o&&void 0===a[e.id]);else r.push(e)}),r.length){const e=[];for(let t=0;t<r.length;++t){const i=r[t],s=i.actualParent.element;let n,a=s.id;if(i.pageFlow){if(""===a)a="__squared_"+Math.round(Math.random()*(new Date).getTime()),s.id=a;n=Ot(`#${a+ni(i.element,i.sessionId)} { display: none !important; }`)}if(i.cssTry("display",i.display))e.push({item:i,id:a,parentElement:s,styleElement:n})}e.forEach(e=>e.item.setBounds(false));for(let t=0;t<e.length;++t){const i=e[t],s=i.styleElement;if(i.id.startsWith("__squared_"))i.parentElement.id="";if(s)try{document.head.removeChild(s)}catch(e){}i.item.cssFinally("display")}}s.each(e=>{if(!e.lineBreak)e.setBounds(!o),e.saveAsInitial();if(!e.pageFlow)e.cssFinally("display")}),i.each(e=>{if(e.styleElement){const t=e.element,i=a[e.id];if(i)for(const e in i)t.style.setProperty(e,i[e]);if(l.has(t))t.dir="rtl"}e.saveAsInitial()}),e.evaluateNonStatic(t,i),e.sortInitialCache()}return t}afterCreateCache(e){const t=Xt(this.systemName),i=e.dataset,s=i["filename"+t]||i.filename,n=i["iteration"+t],a=Kt(s)&&s.replace(this._layoutFileExtension,"")||e.elementId||"document_"+this.length,l=(n?parseInt(n):-1)+1,r=jt(l>0?a+"_"+l:a,true);i["iteration"+t]=l.toString(),i["layoutName"+t]=r,e.data(F.KEY_NAME,"layoutName",r),this.setBaseLayout(),this.setConstraints(),this.setResources()}useElement(e){const t=this.getDatasetName("use",e);return Kt(t)&&t.split(",").some(e=>!!this.extensionManager.retrieve(e.trim()))}toString(){var e;return(null===(e=this.layouts[0])||void 0===e?void 0:e.content)||""}cascadeParentNode(e,t,i){var s;const n=this.insertNode(e);if("none"!==n.display||0===t||yi(n)){if(0===t){n.depth=t,this._cache.add(n);for(const e of n.extensions)if(null===(s=this.extensionManager.retrieve(e))||void 0===s?void 0:s.cascadeAll){this._cascadeAll=true;break}}const a=this.controllerHandler;if(n.excluded&&!yi(n)||a.preventNodeCascade(n))return n;const l=this.processing.sessionId,r=this.createPseduoElement(e,"::before",l),o=this.createPseduoElement(e,"::after",l),c=e.childNodes,h=c.length,d=new Array(h),u=new Array(e.childElementCount),f=t+1;let g=true,p=0,m=0,b=0;while(p<h){const t=c[p++];let s;if(t===r){if(s=this.insertNode(r,"::before"),n.innerBefore=s,!s.textEmpty)s.inlineText=true;g=false}else if(t===o){if(s=this.insertNode(o,"::after"),n.innerAfter=s,!s.textEmpty)s.inlineText=true;g=false}else if("#"===t.nodeName.charAt(0))if("#text"===t.nodeName&&(li(t.textContent)||n.preserveWhiteSpace&&("PRE"!==e.tagName||0===e.childElementCount)))s=this.insertNode(t),s.cssApply(n.textStyle);else continue;else if(a.includeElement(t)){if(i){const e=this.getDatasetName("use",t);if(e)hi(e,i).some(e=>e.init(t))}if(!this.rootElements.has(t)){if(s=this.cascadeParentNode(t,f,i),false===(null==s?void 0:s.excluded))g=false}else s=this.insertNode(t),s.documentRoot=true,s.visible=false,s.excluded=true,g=false;u[b++]=s}else continue;s.depth=f,s.childIndex=m,s.naturalChild=true,d[m++]=s}if(d.length=m,u.length=b,n.naturalChildren=d,n.naturalElements=u,n.inlineText=g,!g){if(m>0)this.cacheNodeChildren(n,d);n.inlineText=g}else n.inlineText=!n.textEmpty;if(b>0&&this.userSettings.createQuerySelectorMap)n.queryMap=this.createQueryMap(u,b)}return n}cacheNodeChildren(e,t){const i=this._cache,s=t.length;if(s>1){let n,a=[],l=[],r=t[0],o=false;for(let c=0,h=0;c<s;++c){const d=t[c];if(d.pageFlow){if(d.floating)o=true;if(c>0)if(l.push(d),d.lineBreak)t[c-1].lineBreakTrailing=true;if(!d.excluded)d.siblingsLeading=a,r.siblingsTrailing=l,a=[],l=[],r=d;if(c<s-1)if(a.push(d),d.lineBreak)t[c+1].lineBreakLeading=true}if(d.excluded)n=true,this.processing.excluded.add(d);else d.$parent=e,d.containerIndex=h++,i.add(d);d.actualParent=e}r.siblingsTrailing=l,e.floatContainer=o,e.retainAs(n?t.filter(e=>!e.excluded):t.slice(0))}else{const s=t[0];if(s.excluded)this.processing.excluded.add(s);else s.$parent=e,s.containerIndex=0,e.add(s),i.add(s),e.floatContainer=s.floating;s.actualParent=e}}setBaseLayout(){const{controllerHandler:e,processing:t,session:i}=this,{extensionMap:s,clearMap:n}=i,a=t.cache,l=t.node,r=new Map;{let e=0;pi(r,-1,l.parent),a.each(t=>{if(t.length){const i=t.depth;if(pi(r,i,t),e=Math.max(i,e),t.floatContainer){const e=new Set;let i=[];const s=t.documentChildren||t.naturalChildren,a=s.length;let l=0;while(l<a){const t=s[l++];if(t.pageFlow){const s=t.floating;if(e.size){const a=t.css("clear");if(e.has(a)||"both"===a){if(!s)t.setBox(2,{reset:1});n.set(t,2===e.size?"both":e.values().next().value),e.clear(),i.length=0}else if(t.blockStatic&&Math.ceil(t.bounds.top)>=Vt(i.map(e=>e.bounds.bottom)))t.data(F.KEY_NAME,"cleared",i),e.clear(),i=[]}if(s){const s=t.float;e.add(s),i.push(t)}}}}}});let t=0;while(t<e)r.set(vi(t++),new Set);a.afterAdd=(e,t=false)=>{if(pi(r,vi(e.depth),e),t&&e.length)e.cascade(e=>{var t;if(e.length){const i=e.depth;null===(t=r.get(i))||void 0===t||t.delete(e),pi(r,vi(i),e)}})}}const o=this.extensions,c=o.length;let h=0;while(h<c)o[h++].beforeBaseLayout();let d=this.extensionsTraverse;for(const t of r.values())for(const i of t.values()){if(0===i.length)continue;const t=i.floatContainer,a=i.renderExtension,l=i.duplicate(),r=l.length;for(h=0;h<r;++h){let i=l[h];if(i.rendered||!i.visible)continue;let o=i.parent;if(r>1&&h<r-1&&i.pageFlow&&!i.nodeGroup&&(0===o.alignmentType||o.hasAlign(2)||i.hasAlign(8192))&&!o.hasAlign(4)&&i.hasSection(st.DOM_TRAVERSE)){const s=[],a=[];let c,d,u=h,f=0;if(o.layoutVertical&&i.hasAlign(8192))s.push(i),++u,++f;e:{let e,i=false;for(;u<r;++u,++f){const r=l[u];if(r.pageFlow){if(r.labelFor&&!r.visible){--f;continue}if(t){if(i){if(n.get(r))i=false}if(e=r.floating,e)i=true}if(0===f){const e=r.siblingsTrailing[0];if(e){if(!bi(r)||e.alignedVertically([r])>0)a.push(r);else s.push(r);continue}}if(r.siblingsLeading[0]){const e=s.length>0;if(t){const t=r.alignedVertically(e?s:a,n,e);if(t>0){if(s.length){if(i&&t<4&&!r.siblingsLeading.some(e=>n.has(e)&&!s.includes(e))){s.push(r);continue}else switch(t){case 6:case 7:if(!n.has(r))n.set(r,"both");break}break e}a.push(r)}else{if(a.length)break e;s.push(r)}}else if(r.alignedVertically(e?s:a,void 0,e)>0){if(s.length)break e;a.push(r)}else{if(a.length)break e;s.push(r)}}else break e}else if(r.autoPosition){const e=a.length;if(e){if(a[e-1].blockStatic&&!r.renderExclude)a.push(r);break}else s.push(r)}}}let g=s.length;if(g>1){const t=s.filter(e=>!e.renderExclude||n.has(e));if(t.length>1)c=e.processTraverseHorizontal(new LayoutUI(o,i,0,0,t),l);d=s[g-1]}else if(g=a.length,g>1){const t=a.filter(e=>!e.renderExclude||n.has(e));if(t.length>1)c=e.processTraverseVertical(new LayoutUI(o,i,0,0,t),l);if(d=a[g-1],bi(d)&&d!==l[r-1])d.addAlign(8192)}let p=true;if(c)if(this.addLayout(c))o=i.parent;else p=false;if(p&&d===l[r-1])o.removeAlign(2)}if(i.removeAlign(8192),h===r-1)o.removeAlign(2);if(i.renderAs&&o.replaceTry({child:i,replaceWith:i.renderAs}))if(i.hide(),i=i.renderAs,i.positioned)o=i.parent;if(!i.rendered&&i.hasSection(st.EXTENSION)){const e=s.get(i.id);let t=e?(null==a?void 0:a.concat(e))||e:a,n=false;if(t){const e=t.length;let s=0;while(s<e){const e=t[s++],a=e.processChild(i,o);if(a){const{output:t,renderAs:s,outputAs:l}=a;if(t)this.addLayoutTemplate(a.outerParent||o,i,t);if(s&&l)this.addLayoutTemplate(a.parentAs||o,s,l);if(o=a.parent||o,a.subscribe)e.subscribers.add(i);if(n=true===a.next,a.complete||n)break}}if(n)continue}if(i.styleElement){t=i.use?hi(i.use,d):d;const s=t.length;let a=0;while(a<s){const s=t[a++];if(s.is(i))if(s.condition(i,o)&&(!e||!e.includes(s))){const e=s.processNode(i,o);if(e){const{output:t,renderAs:a,outputAs:l}=e;if(t)this.addLayoutTemplate(e.outerParent||o,i,t);if(a&&l)this.addLayoutTemplate(e.parentAs||o,a,l);if(o=e.parent||o,e.include)Zt(i,"renderExtension").push(s),s.subscribers.add(i);else if(e.subscribe)s.subscribers.add(i);if(e.remove){const e=d.indexOf(s);if(-1!==e)d=d.slice(0),d.splice(e,1)}if(n=true===e.next,e.complete||n)break}}}if(n)continue}}if(!i.rendered&&i.hasSection(st.RENDER)){let t=this.createLayoutControl(o,i);if(0===t.containerType){const s=i.length?e.processUnknownParent(t):e.processUnknownChild(t);if(s.next)continue;t=s.layout}this.addLayout(t)}}}a.sort((e,t)=>{if(e.depth===t.depth){if(e.innerWrapped===t)return-1;else if(e===t.innerWrapped)return 1;const i=e.outerWrapper,s=t.outerWrapper;if(e===s||!i&&s)return-1;else if(t===i||!s&&i)return 1;const n=e.nodeGroup,a=t.nodeGroup;if(n&&a)return e.id<t.id?-1:1;else if(n)return-1;else if(a)return 1;return 0}return e.depth<t.depth?-1:1}),h=0;while(h<c){const e=o[h++];for(const t of e.subscribers)if(a.contains(t))e.postBaseLayout(t);e.afterBaseLayout()}i.cache.joinWith(a),i.excluded.joinWith(t.excluded)}setConstraints(){const e=this._cache;this.controllerHandler.setConstraints();const t=this.extensions,i=t.length;let s=0;while(s<i){const i=t[s++];for(const t of i.subscribers)if(e.contains(t))i.postConstraints(t);i.afterConstraints()}}setResources(){const e=this.resourceHandler;this._cache.each(t=>{if(e.setBoxStyle(t),t.hasResource(nt.VALUE_STRING)&&t.visible&&!t.imageElement&&!t.svgElement)e.setFontStyle(t),e.setValueString(t)}),this.extensions.forEach(e=>e.afterResources())}processFloatHorizontal(e){const t=this.controllerHandler,{containerType:i,alignmentType:s}=t.containerTypeVertical,n=this.session.clearMap,a=[],l=[],r=[];let o,c,h,d,u,f=false,g=false;if(e.each((e,t)=>{const i=e.float;if(g&&"left"===i)f=true;if(t>0){if(n.get(e))f=true;else if(e.data(F.KEY_NAME,"cleared"))g=true}if(!f)if("left"===i)l.push(e);else if("right"===i)r.push(e);else if(l.length||r.length){let t=e.linear.top;if(e.styleText){const i=e.textBounds;if(i)t=Math.max(i.top,t)}if(t=Math.ceil(t),e.blockStatic&&l.some(e=>t>=e.bounds.bottom))if(o)o.push(e);else o=[e];else a.push(e)}else a.push(e);else if("left"===i)if(c)c.push(e);else c=[e];else if("right"===i)if(h)h.push(e);else h=[e];else if(o)o.push(e);else o=[e]}),l.length)d=c?[l,c]:l;else if(c)d=c;if(r.length)u=h?[r,h]:r;else if(h)u=h;if(r.length+((null==h?void 0:h.length)||0)===e.length)e.addAlign(2048);const p=[];let m,b=false;if(a.length)p.push(a),b=e.every(e=>a.includes(e)||!e.imageElement);if(d)p.push(d);if(u)p.push(u);if(o){const{node:n,parent:a}=e;if(o.length>1)o[0].addAlign(8192);o.unshift(n);const l=t.createNodeGroup(n,o,a);l.childIndex=n.childIndex,l.containerName=n.containerName,m=l.inherit(n,"boxStyle"),l.innerWrapped=n,n.resetBox(30,l),n.resetBox(480,l),this.addLayout(new LayoutUI(a,l,i,s|(a.blockStatic?64:0),o)),e.parent=l}e.type=t.containerTypeVerticalMargin,e.itemCount=p.length,e.addAlign(64);for(let n=0;n<e.itemCount;++n){const l=p[n];let o,c;if(Array.isArray(l[0])){o=l;const n=o.length;let a=o[0],h=1;while(h<n)a=a.concat(o[h++]);a.sort((e,t)=>e.childIndex<t.childIndex?-1:1);const d=e.node;if(d.layoutVertical)c=d;else c=t.createNodeGroup(a[0],a,d),this.addLayout(LayoutUI.create({parent:d,node:c,containerType:i,alignmentType:s|(o.some(e=>e===u||e===r)?2048:0),itemCount:n}))}else o=[l];for(let n=0;n<o.length;++n){const l=o[n],r=c||e.node,h=t.createNodeGroup(l[0],l,r,{delegate:true,cascade:true}),f=new LayoutUI(r,h,0,128);if(l===a){if(f.addAlign(256),b)if(m)h.inheritApply("boxStyle",m);else h.inherit(e.node,"boxStyle")}else f.addAlign(di(l));if(l.some(e=>e.percentWidth>0||e.percentHeight>0)){if(f.type=t.containerTypePercent,1===l.length)f.node.innerWrapped=l[0]}else if(1===l.length||f.linearY)f.setContainerType(i,s);else if(!f.linearX)f.setContainerType(i,2);else t.processLayoutHorizontal(f);if(this.addLayout(f),l===a)this.setFloatPadding(r,h,a,d&&Gt(d),u&&Gt(u))}}return e}processFloatVertical(e){const t=this.controllerHandler,{containerType:i,alignmentType:s}=t.containerTypeVertical,n=this.session.clearMap;if(0!==e.containerType){const n=e.node,a=t.createNodeGroup(n,[n],e.parent);this.addLayout(new LayoutUI(a,n,i,s,a.children)),e.node=a}else e.setContainerType(i,s);const a=[],l=[],r=[],o=[];let c=false,h=false,d=true;if(e.each(e=>{if(e.blockStatic&&0===o.length)r.push(e),h=true;else{if(n.has(e))if(!e.floating)e.setBox(2,{reset:1}),a.push(r.slice(0)),l.push(o.slice(0)),r.length=0,o.length=0;else c=true;if(e.floating){if(h)a.push(r.slice(0)),l.push(null),r.length=0,o.length=0,h=false;o.push(e)}else{if(c&&!n.has(e))d=false;r.push(e)}}}),o.length)l.push(o);if(r.length)a.push(r);if(!d){const{containerType:n,alignmentType:r}=t.containerTypeVerticalMargin,o=e.node,c=Math.max(l.length,a.length);for(let e=0;e<c;++e){const c=a[e],h=l[e],d=c.length;if(!h&&d){const e=t.containerTypeVertical;this.addLayout(new LayoutUI(o,t.createNodeGroup(c[0],c,o),e.containerType,192|e.alignmentType,c))}else{const e=[];let a,l=0;if(h)if(h.length>1){const i=t.createNodeGroup(h[0],h);if(l=512,0===d&&h.every(e=>"right"===e.float))l|=2048;e.push(i)}else e.push(h[0]);if(d>1||h)a=t.createNodeGroup(c[0],c),e.push(a);else if(1===d)e.push(c[0]);const u=t.createNodeGroup((h||c)[0],e,o);this.addLayout(new LayoutUI(o,u,n,r|l));for(let t=0;t<e.length;++t){const n=e[t];this.addLayout(new LayoutUI(u,n,i,192|s,n.children))}if(d&&h&&a){const[e,t]=Jt(h,e=>"right"!==e.float);this.setFloatPadding(o,a,c,e,t)}}}}return e}createPseduoElement(e,t,i){let s=si(e,"styleMap"+t,i);if("Q"===e.tagName){if(!s)s={},ai(e,"styleMap"+t,i,s);let n=s.content;if(!n)n=Ft(e,t).getPropertyValue("content")||("::before"===t?"open-quote":"close-quote"),s.content=n}if(s){let n=s.content;if(n){const a=ti(n);let l=false;switch(s.position){case"absolute":case"fixed":l=true;break}if(!Kt(a))if("::after"===t){if((l||""===a||!function(e){const t=e.childNodes[e.childNodes.length-1];return"#text"===t.nodeName&&!/\s+$/.test(t.textContent)}(e))&&!ui(s,true,l))return}else{const t=e.childNodes,i=t.length;let n=0;while(n<i){const e=t[n++];if("#text"===e.nodeName){if(Kt(e.textContent))break}else if(e instanceof HTMLElement){const t=Ft(e);switch(t.getPropertyValue("position")){case"fixed":case"absolute":continue}if("none"!==t.getPropertyValue("float"))return;break}}switch(s.display){case void 0:case"block":case"inline":case"inherit":case"initial":if(!ui(s,false,l))return;break}}else if("inherit"===n){let t=e;do{if(n=Ft(t).getPropertyValue("content"),"inherit"!==n)break;t=t.parentElement}while(t)}const r=Ft(e);for(let e=0;e<ri.length;++e){const t=ri[e];if(!Kt(s[t]))s[t]=r[t]}let o="",c="";switch(n){case"normal":case"none":case"initial":case"inherit":case"unset":case"no-open-quote":case"no-close-quote":case'""':break;case"open-quote":if("::before"===t)c=fi(e,t,"“","‘",i);break;case"close-quote":if("::after"===t)c=fi(e,t,"”","’",i);break;default:{const s=Ut(n);if(""!==s)if(c=s,$t(this._controllerSettings.mimeType.image,s))o="img";else c="";else{const s=/\s*(?:attr\(([^)]+)\)|(counter)\(([^,)]+)(?:,\s+([a-z-]+))?\)|(counters)\(([^,]+),\s+"([^"]*)"(?:,\s+([a-z-]+))?\)|"([^"]+)")\s*/g;let a,l=false;while(a=s.exec(n)){const s=a[1];if(s)c+=Ht(e,s.trim());else if(a[2]||a[5]){const s="counter"===a[2],[n,l]=s?[a[3],a[4]||"decimal"]:[a[6],a[8]||"decimal"],o=(ci(e,n,t,i,0)||0)+(oi(r.getPropertyValue("counter-reset"),n,0)||0),h=[];let d,u=e,f=o,g=false;const p=(e,t)=>{const i=h.length;if(0===i)f+=e;else if(g||t)h[i-1]+=e},m=e=>{if(void 0===oi(Ft(e).getPropertyValue("counter-reset"),n))Qt(e.children,e=>{if("__squared.pseudo"!==e.className){let s=ci(e,n,t,i);if(s)p(s,true);const a=Ft(e);if(s=oi(a.getPropertyValue("counter-increment"),n),s)p(s,false);if(s=oi(a.getPropertyValue("counter-reset"),n),void 0!==s)return true;m(e)}})};while(u){if(g=false,u.previousElementSibling){if(u=u.previousElementSibling,u)m(u)}else if(u.parentElement)u=u.parentElement,g=true;else break;if(u&&"__squared.pseudo"!==u.className){const e=ci(u,n,t,i);if(e)p(e,true);const a=Ft(u),l=oi(a.getPropertyValue("counter-increment"),n);if(l)p(l,false);const r=oi(a.getPropertyValue("counter-reset"),n);if(void 0!==r){if(!d)f+=r;if(d=u,s)break;else if(g)h.push((e||0)+r)}}}if(d){if(!s&&h.length>1){h.reverse().splice(1,1);const e=a[7];for(let t=0;t<h.length;++t)c+=Lt(l,h[t],true)+e}}else f=o;c+=Lt(l,f,true)}else if(a[9])c+=a[9];l=true}if(!l)c=n}break}}if(!Kt(s.display))s.display="inline";if(c||'""'===n){if(""===o)o=/^(inline|table)/.test(s.display)?"span":"div";const a=document.createElement(o);if(a.className="__squared.pseudo",a.style.setProperty("display","none"),"::before"===t)e.insertBefore(a,e.childNodes[0]);else e.appendChild(a);if("img"===o){a.src=c;const e=this.resourceHandler.getImage(c);if(e){if(!Kt(s.width)&&e.width>0)s.width=Wt(e.width);if(!Kt(s.height)&&e.height>0)s.height=Wt(e.height)}}else if('""'!==n)a.innerText=c;for(const e in s)if("display"!==e)a.style[e]=s[e];return ai(a,"pseudoElement",i,t),ai(a,"styleMap",i,s),a}}}}createAssetOptions(e){let t=null==e?void 0:e.assets;if(t)t=this.layouts.concat(t);else t=this.layouts;return Object.assign(Object.assign({},e),{assets:t})}createLayoutControl(e,t){return new LayoutUI(e,t,t.containerType,t.alignmentType,t.children)}setFloatPadding(e,t,i,s=[],n=[]){let a=[];for(let e=0;e<i.length;++e){const t=i[e];if(xi(t)||t.centerAligned)a.push(t);if(t.blockStatic)a=a.concat(t.cascade(e=>xi(e,e.depth-t.depth)))}const l=a.length;if(0===l)return;const r=t.bounds.bottom,o=e.actualBoxWidth();let c=s.length;if(c){let i=-1/0,n=false,h=0;while(h<c){const e=s[h++];if(e.bounds.top<r){const t=e.linear.right+gi(e,false);if(t>i)i=t,n=e.marginRight>0;else if(t===i&&e.marginRight<=0)n=false}}if(i!==-1/0){let s=-1/0;h=0;while(h<l){const e=a[h++];if(Math.floor(e.linear.left)<=i||e.centerAligned)s=Math.max(s,e.marginLeft)}if(s!==-1/0){const l=i-e.box.left-s-Vt(t.map(e=>!a.includes(e)?e.marginLeft:0));if(l>0&&l<o)t.modifyBox(256,l+(!n&&t.find(e=>e.multiline,{cascade:true})?Math.max(s,this._controllerSettings.deviations.textMarginBoundarySize):0))}}}if(c=n.length,c){let i=1/0,s=false,h=0;while(h<c){const e=n[h++];if(e.bounds.top<r){const t=e.linear.left+gi(e,true);if(t<i)i=t,s=e.marginLeft>0;else if(t===i&&e.marginLeft<=0)s=false}}if(i!==1/0){let n=-1/0;h=0;while(h<l){const e=a[h++];if(e.multiline||e.centerAligned||Math.ceil(e.linear.right)>=i)n=Math.max(n,e.marginRight)}if(n!==-1/0){const l=e.box.right-i-n-Vt(t.map(e=>!a.includes(e)?e.marginRight:0));if(l>0&&l<o)t.modifyBox(64,l+(!s&&t.find(e=>e.multiline,{cascade:true})?Math.max(n,this._controllerSettings.deviations.textMarginBoundarySize):0))}}}}get layouts(){return this._layouts.sort((e,t)=>{const i=e.index,s=t.index;if(i!==s)if(0===i||s===1/0||void 0===s&&!(i===1/0))return-1;else if(0===s||i===1/0||void 0===i&&!(s===1/0))return 1;else if(void 0!==i&&void 0!==s)return i<s?-1:1;return 0})}get extensionsCascade(){return this.extensions.filter(e=>!!e.init)}get extensionsTraverse(){return this.extensions.filter(e=>!e.eventOnly)}get clearMap(){return this.session.clearMap}get length(){return this.session.cache.length}},e.Controller=Controller,e.ControllerUI=class ControllerUI extends Controller{constructor(){super(...arguments),this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}init(){const e=this.localSettings.unsupported;this._unsupportedCascade=e.cascade,this._unsupportedTagName=e.tagName}preventNodeCascade(e){return this._unsupportedCascade.has(e.tagName)}includeElement(e){const t=e.tagName;return!(this._unsupportedTagName.has(t)||"INPUT"===t&&this._unsupportedTagName.has(t+":"+e.type))||"true"===e.contentEditable}reset(){this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}applyDefaultStyles(e){const t=this.sessionId;let i;if("#text"===e.nodeName)i={position:"static",display:"inline",verticalAlign:"baseline",float:"none",clear:"none"};else{i=Fi(e,"styleMap",t)||{};const s=e.tagName;if(wi(8))switch(s){case"BODY":if("rgba(0, 0, 0, 0)"===i.backgroundColor)i.backgroundColor="rgb(255, 255, 255)";break;case"INPUT":case"SELECT":case"BUTTON":case"TEXTAREA":if(!Pi(i.display))i.display="inline-block";break;case"FIELDSET":if(!Pi(i.display))i.display="block";break}else if(Ei())switch(s){case"BODY":if("transparent"===i.backgroundColor)i.backgroundColor="rgb(255, 255, 255)";break;case"INPUT":switch(e.type){case"text":case"password":case"time":case"date":case"datetime-local":case"week":case"month":case"url":case"email":case"search":case"number":case"tel":if(!Pi(i.fontSize))i.fontSize="13.3333px";break}break;case"CODE":if(!Pi(i.fontFamily))i.fontFamily="monospace";break;case"LEGEND":case"RT":if(!Pi(i.display))i.display="block";break}switch(s){case"INPUT":{const t=e.type;switch(t){case"radio":case"checkbox":case"image":break;case"week":case"month":case"time":case"date":case"datetime-local":i.paddingTop=_i(Ni(i.paddingTop)+1),i.paddingRight=_i(Ni(i.paddingRight)+1),i.paddingBottom=_i(Ni(i.paddingBottom)+1),i.paddingLeft=_i(Ni(i.paddingLeft)+1);break;default:{const e=this.localSettings.style,s=Gi(i,e.inputBorderColor);switch(t){case"file":case"reset":case"submit":case"button":Yi(i,s,e.inputBackgroundColor);break}break}}break}case"BUTTON":{const e=this.localSettings.style;Yi(i,Gi(i,e.inputBorderColor),e.inputBackgroundColor);break}case"TEXTAREA":case"SELECT":Gi(i,this.localSettings.style.inputBorderColor);break;case"BODY":{const e=i.backgroundColor;if(!Pi(e)||"initial"===e)i.backgroundColor="rgb(255, 255, 255)";break}case"FORM":if(!Pi(i.marginTop))i.marginTop="0px";break;case"LI":if(!Pi(i.listStyleImage)){const t=Ti(e);i.listStyleImage=t.getPropertyValue("list-style-image")}break;case"IFRAME":if(!Pi(i.display))i.display="block";case"IMG":case"CANVAS":case"svg":case"VIDEO":case"OBJECT":case"EMBED":this.setElementDimension(e,s,i,"width","height"),this.setElementDimension(e,s,i,"height","width");break}}Oi(e,"styleMap",t,i)}addBeforeOutsideTemplate(e,t,i=true,s=-1){const n=Li(this._beforeOutside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addBeforeInsideTemplate(e,t,i=true,s=-1){const n=Li(this._beforeInside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addAfterInsideTemplate(e,t,i=true,s=-1){const n=Li(this._afterInside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}addAfterOutsideTemplate(e,t,i=true,s=-1){const n=Li(this._afterOutside,e);if(-1!==s&&s<n.length)n.splice(s,0,t);else n.push(t);if(i)this._requireFormat=true}getBeforeOutsideTemplate(e,t){const i=this._beforeOutside[e];return i?Hi(i,t):""}getBeforeInsideTemplate(e,t){const i=this._beforeInside[e];return i?Hi(i,t):""}getAfterInsideTemplate(e,t){const i=this._afterInside[e];return i?Hi(i,t):""}getAfterOutsideTemplate(e,t){const i=this._afterOutside[e];return i?Hi(i,t):""}hasAppendProcessing(e){return void 0===e?this._requireFormat:e in this._beforeOutside||e in this._beforeInside||e in this._afterInside||e in this._afterOutside}visibleElement(e,t){let i,s,n;if(t){const a=e.parentElement;i=a?Ti(a,t):Ti(e),s=1,n=1}else if(i=Ti(e),"none"!==i.getPropertyValue("display")){const t=Wi(e,this.sessionId);if(!Ai(t))return false;({width:s,height:n}=t)}else return false;if(s>0&&n>0)return"visible"===i.getPropertyValue("visibility")||!ji(i);else if(!t&&(Bi(e.children,e=>this.visibleElement(e))===1/0||"IMG"===e.tagName&&"none"!==i.getPropertyValue("display")))return true;return!ji(i)&&(s>0&&"none"!==i.getPropertyValue("float")||Pi(t)&&"none"!==i.getPropertyValue("clear")||"block"===i.getPropertyValue("display")&&(0!==parseInt(i.getPropertyValue("margin-top"))||0!==parseInt(i.getPropertyValue("margin-bottom"))))}evaluateNonStatic(e,t){const i=new Set,s=new Set,n=new Map;t.each(t=>{if(t.floating){if("left"===t.float){const e=t.actualParent;let i,s=e;while("P"===(null==s?void 0:s.tagName)&&!s.documentRoot)i=s,s=s.actualParent;if(s&&i&&s!==e&&"DIV"===s.tagName)if(n.has(i))n.get(i).appending.push(t);else n.set(i,{parent:s,appending:[t]})}}else if(!t.pageFlow&&!t.documentRoot){const n=t.actualParent,a=t.absoluteParent;let l;switch(t.css("position")){case"fixed":if(!t.autoPosition){l=e;break}case"absolute":if(l=a,t.autoPosition){if(!t.siblingsLeading.some(e=>e.multiline||e.excluded&&!e.blockStatic))t.cssApply({display:"inline-block",verticalAlign:"top"},true);else t.autoPosition=false;l=n}else if(this.userSettings.supportNegativeLeftTop){let i=false;while(l&&l!==e&&(!l.rightAligned&&!l.centerAligned||!l.pageFlow)){const e=l.linear;if(!i)if(t.hasPX("top")&&t.hasPX("bottom")||t.hasPX("left")&&t.hasPX("right"))break;else{const s="hidden"===l.css("overflowX"),n="hidden"===l.css("overflowY");if(s&&n)break;const a=!s&&t.outsideX(e),r=!n&&t.outsideY(e);if(a&&(t.left<0||t.right>0)||r&&(t.top<0||0!==t.bottom))i=true;else if(!s&&((t.left<0||t.right>0)&&Math.ceil(t.bounds.right)<e.left||(t.left>0||t.right<0)&&Math.floor(t.bounds.left)>e.right)&&l.some(e=>e.pageFlow))i=true;else if(!n&&((t.top<0||t.bottom>0)&&Math.ceil(t.bounds.bottom)<l.bounds.top||(t.top>0||t.bottom<0)&&Math.floor(t.bounds.top)>l.bounds.bottom))i=true;else if(a&&r&&(!l.pageFlow||l.actualParent.documentRoot&&(t.top>0||t.left>0)))i=true;else if(!(s||n||t.intersectX(e)||t.intersectY(e)))i=true;else break}else if(l.layoutElement){l=a;break}else if(t.withinX(e)&&t.withinY(e))break;l=l.actualParent}}break}if(!l)l=e;if(l!==n){if(a.positionRelative&&l!==a){const{left:e,right:i,top:s,bottom:n}=a,l=t.bounds;if(0!==e)l.left+=e,l.right+=e;else if(!a.hasPX("left")&&0!==i)l.left-=i,l.right-=i;if(0!==s)l.top+=s,l.bottom+=s;else if(!a.hasPX("top")&&0!==n)l.top-=n,l.bottom-=n;t.unset("box"),t.unset("linear")}let e=t.toFloat("opacity",1),r=n;do{e*=r.toFloat("opacity",1),r=r.actualParent}while(r&&r!==l);t.css("opacity",e.toString()),t.parent=l,t.containerIndex=1/0,i.add(l),s.add(n)}t.documentParent=l}});for(const e of s)e.each((e,t)=>e.containerIndex=t);for(const[e,t]of n.entries()){const{parent:i,appending:s}=t,n=i.children;if(n.includes(e)){const t=new Set,{childIndex:a,containerIndex:l}=e,r=i.naturalChildren.slice(0),o=n[l],c=i.depth+1;for(let e=0,h=0,d=0,u=false;e<s.length;++e){const f=s[e];if(0===f.containerIndex)u=true;else if(u){const t=s[e-1];u=f.containerIndex-t.containerIndex==1&&f.actualParent===t.actualParent}const g=h+(u?0:d+1),p=a+g,m=l+g;if(r.splice(p,0,f),n.splice(m,0,f),u)o.siblingsLeading.unshift(f),++h;else++d;f.parent.remove(f),f.$parent=i,f.depth=c,f.documentParent=i;const b=f.css("clear");switch(b){case"left":case"right":case"both":e:{let e;for(let t=p-1;t>=0;--t){const i=r[t];if(i.floating){const t=i.float;if("both"===b||t===b){this.application.session.clearMap.set(f,b);let e=f.nextElementSibling;while(e){if(e.floating&&!s.includes(e))s.push(e);e=e.nextElementSibling}break}else if(t===e)break}else{const t=i.css("clear");switch(t){case"left":case"right":if(b===t)break e;else e=t;break;case"both":break e}}}}break}t.add(f.actualParent)}i.each((e,t)=>e.containerIndex=t),i.floatContainer=true;const h=r.length;for(let e=0;e<s.length;++e){const t=s[e],i=r.findIndex(e=>e===t);if(-1!==i){const e=[],s=[];for(let t=i-1;t>=0;--t){const i=r[t];if(e.push(i),!i.excluded)break}for(let e=i+1;e<h;++e){const t=r[e];if(s.push(t),!t.excluded)break}t.siblingsLeading=e,t.siblingsTrailing=s}}for(const e of t){let t=false;if(e.each((e,i)=>{if(e.floating)t=true;e.containerIndex=i}),!t)e.floatContainer=false}}}for(const e of i){const t=[];let i=-1;e.each(s=>{if(s.containerIndex===1/0)e.some(e=>{let i=e.naturalElements.includes(s);if(!i){const t=e.cascade();i=s.ascend({condition:e=>t.includes(e)}).length>0}if(i)Li(t,e.containerIndex+(s.zIndex>=0||e!==s.actualParent?1:0)).push(s);return i});else if(s.containerIndex>i)i=s.containerIndex});const s=t.length;if(s){const n=e.children;for(let e=0,a=0,l=1;e<s;++e,++a){const s=t[e];if(s){s.sort((e,t)=>{if(e.parent===t.parent){const i=e.zIndex,s=t.zIndex;if(i===s)return e.id<t.id?-1:1;else return i<s?-1:1}return 0}).forEach(e=>e.containerIndex=i+l++);const e=n.length;for(let t=0;t<e;++t)if(s.includes(n[t]))n[t]=void 0;n.splice(a,0,...s),a+=s.length}}e.retainAs(Mi(n))}}}sortInitialCache(e){(e||this.cache).sort((e,t)=>{if(e.depth!==t.depth)return e.depth<t.depth?-1:1;else{const i=e.documentParent,s=t.documentParent;if(i!==s){const e=i.depth,t=s.depth;if(e!==t)return e<t?-1:1;else if(i.actualParent===s.actualParent)return i.childIndex<s.childIndex?-1:1;return i.id<s.id?-1:1}}return 0})}cascadeDocument(e,t){const i=this.userSettings.showAttributes,s="\t".repeat(t);let n="";const a=e.length;let l=0;while(l<a){const a=e[l++],r=a.node;switch(a.type){case 1:{const{controlName:e,attributes:l}=a,{id:o,renderTemplates:c}=r,h=t+1,d=r.depth<0?t+r.depth:t,u=this.getBeforeInsideTemplate(o,h),f=this.getAfterInsideTemplate(o,h);let g=s+"<"+e+(0===t?"{#0}":"")+(i?l?Ui(l,h):r.extractAttributes(h):"");if(c||""!==u||""!==f)g+=">\n"+u+(c?this.cascadeDocument(this.sortRenderPosition(r,c),h):"")+f+s+`</${e}>\n`;else g+=" />\n";n+=this.getBeforeOutsideTemplate(o,d)+g+this.getAfterOutsideTemplate(o,d);break}case 2:{const e=a.content;if(e)n+=Ui(e,t);break}}}return n}getEnclosingXmlTag(e,t="",i){return"<"+e+t+(i?`>\n${i}</${e}>\n`:" />\n")}setElementDimension(e,t,i,s,n){const a=i[s];if(!Pi(a)||"auto"===a){const a=new RegExp(`\\s+${s}="([^"]+)"`).exec(e.outerHTML);if(a){const e=a[1];if(Ci(e))i[s]=e+"px";else if(Ii(e))i[s]=e}else if("IFRAME"===t)if("width"===s)i.width="300px";else i.height="150px";else{const t=i[n];if(t&&Ci(t)){const a="max"+Ri(s);if(!Pi(i[a])||!Ii(a)){const a=this.application.resourceHandler.getImage(e.src);if(a&&a.width>0&&a.height>0)i[s]=_i(a[s]*parseFloat(t)/a[n])}}}}}get generateSessionId(){return(new Date).getTime().toString()}},e.Extension=Extension,e.ExtensionManager=ExtensionManager,e.ExtensionUI=ExtensionUI,e.File=File,e.FileUI=class FileUI extends File{get directory(){return this.resource.controllerSettings.directory}},e.LayoutUI=LayoutUI,e.Node=it,e.NodeGroupUI=class NodeGroupUI extends NodeUI{init(){var e;if(this.length)this.setBounds(),this.saveAsInitial();this.dir=(null===(e=this.actualParent)||void 0===e?void 0:e.dir)||""}setBounds(){if(this.length)return this._bounds=NodeUI.outerRegion(this),this._bounds}previousSiblings(e){var t;const i=((null===(t=this._initial)||void 0===t?void 0:t.children)||this.children)[0];return(null==i?void 0:i.previousSiblings(e))||[]}nextSiblings(e){var t;const i=(null===(t=this._initial)||void 0===t?void 0:t.children)||this.children,s=i[i.length-1];return(null==s?void 0:s.nextSiblings(e))||[]}get inline(){if(this.hasAlign(64))return false;let e=this._cached.inline;if(void 0===e)e=this.every(e=>e.inline),this._cached.inline=e;return e}get inlineStatic(){if(this.hasAlign(64))return false;let e=this._cached.inlineStatic;if(void 0===e)e=this.every(e=>e.inlineStatic),this._cached.inlineStatic=e;return e}get inlineVertical(){if(this.hasAlign(64))return false;let e=this._cached.inlineVertical;if(void 0===e)e=this.every(e=>e.inlineVertical),this._cached.inlineVertical=e;return e}get inlineFlow(){if(this.hasAlign(64))return false;let e=this._cached.inlineFlow;if(void 0===e)e=this.every(e=>e.inlineFlow),this._cached.inlineFlow=e;return e}get inlineDimension(){if(this.hasAlign(64))return false;let e=this._cached.inlineDimension;if(void 0===e)e=this.every(e=>e.inlineDimension),this._cached.inlineDimension=e;return e}get block(){let e=this._cached.block;if(void 0===e)e=this.some(e=>e.block),this._cached.block=e;return e}get blockStatic(){if(this.hasAlign(64))return true;let e=this._cached.blockStatic;if(void 0===e){const t=this.actualParent||this.documentParent;if(e=this.some(e=>e.blockStatic||e.percentWidth>0)||t.percentWidth>0||this.layoutVertical&&(t.hasWidth||this.some(e=>e.centerAligned||e.rightAligned))||t.blockStatic&&(t.layoutVertical||this.hasAlign(256)),e||0!==this.containerType)this._cached.blockStatic=e}return e}get blockDimension(){let e=this._cached.blockDimension;if(void 0===e)e=this.every(e=>e.blockDimension),this._cached.blockDimension=e;return e}get blockVertical(){let e=this._cached.blockVertical;if(void 0===e)e=this.every(e=>e.blockVertical),this._cached.blockVertical=e;return e}get pageFlow(){let e=this._cached.pageFlow;if(void 0===e){const t=this.css("position");e="absolute"!==t&&"fixed"!==t,this._cached.pageFlow=e}return e}set baseline(e){this._cached.baseline=e}get baseline(){let e=this._cached.baseline;if(void 0===e){const t=this.cssInitial("verticalAlign",true);if(""===t)e=this.every(e=>e.baseline);else e="baseline"===t||Qi(t,true);this._cached.baseline=e}return e}get float(){if(!this.floating)return"none";else if(this.hasAlign(2048))return"right";else if(this.every(e=>"right"===e.float))return this.addAlign(2048),"right";return"left"}get floating(){return this.every(e=>e.floating||e.hasAlign(512))}get display(){return super.display||(this.some(e=>e.blockStatic)?"block":this.blockDimension?"inline-block":"inline")}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}set childIndex(e){super.childIndex=e}get childIndex(){let e=super.childIndex;if(e===1/0)this.each(t=>e=Math.min(t.childIndex,e)),super.childIndex=e;return e}set containerIndex(e){super.containerIndex=e}get containerIndex(){let e=super.containerIndex;if(e===1/0)this.each(t=>e=Math.min(t.containerIndex,e)),super.containerIndex=e;return e}get centerAligned(){let e=this._cached.centerAligned;if(void 0===e)e=this.every(e=>e.centerAligned),this._cached.centerAligned=e;return e}get rightAligned(){if(this.hasAlign(2048))return true;let e=this._cached.rightAligned;if(void 0===e)e=this.every(e=>e.rightAligned),this._cached.rightAligned=e;return e}get tagName(){return""}get plainText(){return false}get styleText(){return false}get multiline(){return false}get nodeGroup(){return true}get naturalChild(){return false}get naturalElement(){return false}get pseudoElement(){return false}get previousSibling(){return null}get nextSibling(){return null}get previousElementSibling(){return null}get nextElementSibling(){return null}},e.NodeList=NodeList,e.NodeUI=NodeUI,e.Resource=h,e.ResourceUI=Ks,e.extensions=Ta,e.lib=Ca,Object.defineProperty(e,"__esModule",{value:true})}));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,(function(e){"use strict";const{CSS_UNIT:t,calculateStyle:i,calculateVar:s,convertAngle:n,getFontSize:a,isLength:r,isPercent:l,parseUnit:o}=squared.lib.css,{getNamedItem:f}=squared.lib.dom,{clamp:c,convertRadian:h,hypotenuse:u}=squared.lib.math,{TRANSFORM:g}=squared.lib.regex,{getStyleValue:d}=squared.lib.session,{convertCamelCase:p,convertFloat:m,isString:y}=squared.lib.util;function v(e,t,i,s,n){if(r(s))t[i]=o(s,a(e));else if(l(s))t[i]=parseFloat(s)/100*n}function S(e,t){const{width:i,height:s}=t;return e?Math.min(i,s):u(i,s)}const b={svg:e=>"svg"===e.tagName,g:e=>"g"===e.tagName,symbol:e=>"symbol"===e.tagName,path:e=>"path"===e.tagName,shape:e=>{switch(e.tagName){case"path":case"line":case"rect":case"ellipse":case"circle":case"polyline":case"polygon":return true;default:return false}},image:e=>"image"===e.tagName,use:e=>"use"===e.tagName,line:e=>"line"===e.tagName,rect:e=>"rect"===e.tagName,circle:e=>"circle"===e.tagName,ellipse:e=>"ellipse"===e.tagName,polygon:e=>"polygon"===e.tagName,polyline:e=>"polyline"===e.tagName,clipPath:e=>"clipPath"===e.tagName,pattern:e=>"pattern"===e.tagName,linearGradient:e=>"linearGradient"===e.tagName,radialGradient:e=>"radialGradient"===e.tagName},k={applyX:(e,t,i)=>e.a*t+e.c*i+e.e,applyY:(e,t,i)=>e.b*t+e.d*i+e.f,clone:e=>({a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}),rotate(e){const t=h(e),i=Math.cos(t),s=Math.sin(t);return{a:i,b:s,c:-1*s,d:i,e:0,f:0}},skew:(e=0,t=0)=>({a:1,b:Math.tan(h(t)),c:Math.tan(h(e)),d:1,e:0,f:0}),scale:(e=1,t=1)=>({a:e,b:0,c:0,d:t,e:0,f:0}),translate:(e=0,t=0)=>({a:1,b:0,c:0,d:1,e:e,f:t})},T={create:(e,t,i=0,s=true,n=true)=>({type:e,matrix:t,angle:i,method:{x:s,y:n}}),parse(e,t){if(!t)t=e.style.getPropertyValue("transform");if(t){const i=[],s=/(\w+)\([^)]+\)/g;let r;while(r=s.exec(t)){const t=r[1],s=t.endsWith("X"),l=t.endsWith("Y");if(t.startsWith("translate")){const t=g.TRANSLATE.exec(r[0]);if(t){const n=a(e),r=o(t[2],n),f=!s&&t[3]?o(t[3],n):0,c=l?0:r,h=l?r:f;i.push(T.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,k.translate(c,h),0))}}else if(t.startsWith("rotate")){const e=g.ROTATE.exec(r[0]);if(e){const t=n(e[2],e[3]);if(!isNaN(t)){const e=k.rotate(t);if(s)e.a=1,e.b=0,e.c=0;else if(l)e.b=0,e.c=0,e.d=1;i.push(T.create(SVGTransform.SVG_TRANSFORM_ROTATE,e,t,!s,!l))}}}else if(t.startsWith("scale")){const e=g.SCALE.exec(r[0]);if(e){const t=l?void 0:parseFloat(e[2]),n=l?parseFloat(e[2]):!s&&e[3]?parseFloat(e[3]):t;i.push(T.create(SVGTransform.SVG_TRANSFORM_SCALE,k.scale(t,s?void 0:n),0,!l,!s))}}else if(t.startsWith("skew")){const e=g.SKEW.exec(r[0]);if(e){const t=n(e[2],e[3],0),a=l?0:t,r=l?t:e[4]&&e[5]?n(e[4],e[5],0):0,o=k.skew(a,r);if(s)i.push(T.create(SVGTransform.SVG_TRANSFORM_SKEWX,o,a,true,false));else if(l)i.push(T.create(SVGTransform.SVG_TRANSFORM_SKEWY,o,r,false,true));else if(i.push(T.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign(Object.assign({},o),{b:0}),a,true,false)),0!==r)i.push(T.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign(Object.assign({},o),{c:0}),r,false,true))}}else if(t.startsWith("matrix")){const t=T.matrix(e,r[0]);if(t)i.push(T.create(SVGTransform.SVG_TRANSFORM_MATRIX,t))}}return i.forEach(e=>e.fromStyle=true),i}},matrix(e,t){const i=g.MATRIX.exec(t||getComputedStyle(e).transform);if(i)switch(i[1]){case"matrix":return{a:parseFloat(i[2]),b:parseFloat(i[3]),c:parseFloat(i[4]),d:parseFloat(i[5]),e:parseFloat(i[6]),f:parseFloat(i[7])};case"matrix3d":return{a:parseFloat(i[2]),b:parseFloat(i[3]),c:parseFloat(i[6]),d:parseFloat(i[7]),e:parseFloat(i[14]),f:parseFloat(i[15])}}},origin(e,t){if(!t)t=x(e,"transform-origin");const i={x:0,y:0};if(""!==t){const s=_(e);let n,a;if(s)({width:n,height:a}=s);else{const t=e.parentElement;if(t instanceof SVGGraphicsElement){const e=t.viewportElement;if(e&&(b.svg(e)||b.symbol(e)))({width:n,height:a}=e.viewBox.baseVal)}}if(!n||!a)({width:n,height:a}=e.getBoundingClientRect());const r=t.split(" ");if(1===r.length)r.push("center");switch(r[0]){case"0%":case"left":break;case"100%":case"right":i.x=n;break;case"center":r[0]="50%";default:v(e,i,"x",r[0],n);break}switch(r[1]){case"0%":case"top":break;case"100%":case"bottom":i.y=a;break;case"center":r[1]="50%";default:v(e,i,"y",r[1],a);break}}return i},rotateOrigin(e,t="transform"){const i=f(e,t),s=[];if(""!==i){const e=/rotate\((-?[\d.]+)(?:,?\s+(-?[\d.]+))?(?:,?\s+(-?[\d.]+))?\)/g;let t;while(t=e.exec(i)){const e=parseFloat(t[1]);if(0!==e)s.push({angle:e,x:m(t[2]),y:m(t[3])})}}return s},typeAsName(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}};function w(e){const t=e.getBoundingClientRect();return t.x=t.left,t.y=t.top,t}function A(e,t,n){switch(t=p(t)){case"clipPath":case"height":case"offsetAnchor":case"offsetPath":case"transform":case"transformOrigin":case"width":return i(e,t,n,_(e));case"animationDelay":case"animationDuration":case"animationIterationCount":case"offsetDistance":case"offsetRotate":return i(e,t,n);case"fill":case"stroke":return i(e,"fontColor",n);case"fillOpacity":case"strokeOpacity":{const t=s(e,n,{boundingSize:1,unitType:64});return!isNaN(t)?c(t).toString():""}case"strokeMiterlimit":{const t=s(e,n,{supportPercent:false,unitType:64,min:1});return!isNaN(t)?t.toString():""}}const a=_(e)||e.getBoundingClientRect();switch(t){case"cx":case"x":case"x1":case"x2":{const t=s(e,n,{boundingSize:a.width});return!isNaN(t)?t.toString():""}case"cy":case"y":case"y1":case"y2":{const t=s(e,n,{boundingSize:a.height});return!isNaN(t)?t.toString():""}case"r":{const t=s(e,n,{boundingSize:S(true,a),min:0});return!isNaN(t)?t.toString():"0"}case"rx":{const t=s(e,n,{boundingSize:a.width,min:0});if(!isNaN(t))return b.rect(e)?Math.min(t,a.width/2).toString():t.toString();else return"0"}case"ry":{const t=s(e,n,{boundingSize:a.height,min:0});if(!isNaN(t))return b.rect(e)?Math.min(t,a.height/2).toString():t.toString();else return"0"}case"strokeDashoffset":{const t=s(e,n,{boundingSize:S(true,a),unitType:64});return!isNaN(t)?t.toString():""}case"strokeWidth":{const t=s(e,n,{boundingSize:S(false,a),unitType:64,min:0});return!isNaN(t)?t.toString():""}}return""}function x(e,t,i=false){let s;if(i)s=f(e,t)||d(e,t);else s=d(e,t)||function(e,t){var i;const s=e.dataset.baseValue;if(s)try{const e=JSON.parse(s);if(e)return(null===(i=e[t])||void 0===i?void 0:i.toString().trim())||""}catch(e){}return""}(e,t)||f(e,t);if(!y(s)&&(i||Array.from(e.style).includes(t)))s=getComputedStyle(e).getPropertyValue(t);return s||""}function R(e,t,i=true){let s,n=e;do{if(s=x(n,t,i),""!==s&&"inherit"!==s)break;n=n.parentElement}while(n&&!(n instanceof HTMLElement));return s}function V(e,t){const i=f(e,"href");if("#"===i.charAt(0)){const s=i.substring(1);let n;if(t)n=t;else{n=e.parentElement;while(n&&n.parentElement instanceof SVGGraphicsElement)n=n.parentElement}if(n){const e=n.querySelectorAll("*"),t=e.length;let i=0;while(i<t){const t=e.item(i++);if(t.id===s&&t instanceof SVGElement)return t}}else{const e=document.getElementById(s);if(e instanceof SVGElement)return e}}return null}function _(e){let t=e.parentElement;while(t){if(b.svg(t)||b.symbol(t)){const e=t.viewBox;if(e){const t=e.baseVal;if(t.width>0&&t.height>0)return t}}t=t.parentElement}}function E(e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t}function P(e){return E(e).getTotalLength()}var M=Object.freeze({__proto__:null,SVG:b,MATRIX:k,TRANSFORM:T,getDOMRect:w,calculateStyle:A,getAttribute:x,getParentAttribute:R,getTargetElement:V,getNearestViewBox:_,createPath:E,getPathLength:P});const{isAngle:N,parseAngle:F}=squared.lib.css,{getNamedItem:G}=squared.lib.dom,{absoluteAngle:C,offsetAngleY:O,relativeAngle:B,truncate:L,truncateFraction:I,truncateString:q}=squared.lib.math,{STRING:X}=squared.lib.regex,{convertWord:z,hasBit:D,isArray:W,isString:Y,plainMap:$}=squared.lib.util,U=new RegExp(X.DECIMAL,"g"),j=new Map;let K=(()=>{class SvgBuild{static drawLine(e,t,i=0,s=0,n){if(n)e=L(e,n),t=L(t,n),i=L(i,n),s=L(s,n);return`M${e},${t} L${i},${s}`}static drawRect(e,t,i=0,s=0,n){if(n)e=L(i+e,n),t=L(s+t,n),i=L(i,n),s=L(s,n);else e+=i,t+=s;return`M${i},${s} ${e},${s} ${e},${t} ${i},${t} Z`}static drawEllipse(e,t,i,s,n){if(void 0===s)s=i;let a=2*i;if(n)e=L(e-i,n),t=L(t,n),i=L(i,n),s=L(s,n),a=L(a,n);else e-=i;return`M${e},${t} a${i},${s},0,0,1,${a},0 a${i},${s},0,0,1,-${a},0`}static drawPolyline(e,t){let i="M";const s=e.length;let n=0;if(t)while(n<s){const{x:s,y:a}=e[n++];i+=` ${L(s,t)},${L(a,t)}`}else while(n<s){const{x:t,y:s}=e[n++];i+=` ${t},${s}`}return i}static drawPath(e,t){let i="";const s=e.length;let n=0;while(n<s){const t=e[n++];switch(i+=(""!==i?" ":"")+t.key,t.key.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":i+=t.coordinates.join(",");break;case"H":i+=t.coordinates[0];break;case"V":i+=t.coordinates[1];break;case"A":i+=`${t.radiusX},${t.radiusY},${t.xAxisRotation},${t.largeArcFlag},${t.sweepFlag},${t.coordinates.join(",")}`;break}}return t?q(i,t):i}static drawRefit(e,t,i){let s;if(b.path(e)){if(s=G(e,"d"),null==t?void 0:t.requireRefit){const e=SvgBuild.getPathCommands(s);if(e.length){const n=SvgBuild.getPathPoints(e);if(n.length)t.refitPoints(n),s=SvgBuild.drawPath(SvgBuild.syncPathPoints(e,n),i)}}}else if(b.line(e)){const n=[{x:e.x1.baseVal.value,y:e.y1.baseVal.value},{x:e.x2.baseVal.value,y:e.y2.baseVal.value}];if(null==t?void 0:t.requireRefit)t.refitPoints(n);s=SvgBuild.drawPolyline(n,i)}else if(b.circle(e)||b.ellipse(e)){let n,a;if(b.ellipse(e))n=e.rx.baseVal.value,a=e.ry.baseVal.value;else n=e.r.baseVal.value,a=n;const r=[{x:e.cx.baseVal.value,y:e.cy.baseVal.value,rx:n,ry:a}];if(null==t?void 0:t.requireRefit)t.refitPoints(r);const l=r[0];s=SvgBuild.drawEllipse(l.x,l.y,l.rx,l.ry,i)}else if(b.rect(e)){let n=e.x.baseVal.value,a=e.y.baseVal.value,r=e.width.baseVal.value,l=e.height.baseVal.value;if(null==t?void 0:t.requireRefit)n=t.refitX(n),a=t.refitY(a),r=t.refitSize(r),l=t.refitSize(l);s=SvgBuild.drawRect(r,l,n,a,i)}else if(b.polygon(e)||b.polyline(e)){const n=SvgBuild.clonePoints(e.points);if(null==t?void 0:t.requireRefit)t.refitPoints(n);s=b.polygon(e)?SvgBuild.drawPolygon(n,i):SvgBuild.drawPolyline(n,i)}else s="";return s}static transformRefit(e,t,i,s,n){const a=SvgBuild.getPathCommands(e);if(a.length){let r=SvgBuild.getPathPoints(a);if(r.length){const l=W(t);if(l)r=SvgBuild.applyTransforms(t,r,i&&T.origin(i.element));if(null==s?void 0:s.requireRefit)s.refitPoints(r);e=SvgBuild.drawPath(SvgBuild.syncPathPoints(a,r,l),n)}}return e}static getOffsetPath(e,t="auto 0deg"){const i=E(e),s=Math.ceil(i.getTotalLength()),n=[];if(s){const a=[],r=[];let l=0,o=0;if(N(t))l=F(t,0);else{for(const t of SvgBuild.getPathCommands(e))switch(t.key.toUpperCase()){case"M":case"L":case"H":case"V":case"Z":{const e=t.value;for(let t=0;t<e.length;++t)a.push(e[t]),r.push(false);break}case"C":case"S":case"Q":case"T":case"A":a.push(t.end),r.push(true);break}if("auto 0deg"!==t)o=F(t.split(" ").pop(),0)}let f,c=false,h=0,u=0,g=-1;while(++g<=s){const e=i.getPointAtLength(g);if(a.length){const t=a.findIndex(t=>{const i=t.x.toString(),s=t.y.toString();return i===e.x.toPrecision(i.length-(i.includes(".")?1:0))&&s===e.y.toPrecision(s.length-(s.includes(".")?1:0))});if(-1!==t){const i=a[t+1];if(i)if(c=r[t+1],c)f=SvgBuild.centerPoints(a[t],i),l=0;else f=void 0,l=I(C(e,i));else f=void 0;u=0,a.splice(0,t+1),r.splice(0,t+1)}}let t;if(c){if(t=f?I(B(f,e)):0,h>0&&h%360==0&&0===Math.floor(t))u=h;t+=u}else t=l;t+=o,n.push({key:g,value:e,rotate:t}),h=Math.ceil(t)}}return n}static getPathCommands(e){const t=[];let i=true;const s=/([A-Za-z])([^A-Za-z]+)?/g;let n;while(n=s.exec(e.trim())){let e=n[1];if(i&&"M"!==e.toUpperCase())break;const s=SvgBuild.parseCoordinates((n[2]||"").trim());let a,r,l,o,f,c,h;if(!i){const e=t[t.length-1];a=e.key.toUpperCase(),r=e.end}switch(e.toUpperCase()){case"M":if(i)e="M";case"L":if(s.length>=2){if(s.length%2!=0)--s.length;break}else continue;case"H":if(r&&s.length){s[1]="h"===e?0:r.y,s.length=2;break}else continue;case"V":if(r&&s.length){const t=s[0];s[0]="v"===e?0:r.x,s[1]=t,s.length=2;break}else continue;case"Z":if(!i){const i=t[0].coordinates;s[0]=i[0],s[1]=i[1],s.length=2,e="Z";break}else continue;case"C":if(s.length>=6){s.length=6;break}else continue;case"S":if(s.length>=4&&("C"===a||"S"===a)){s.length=4;break}else continue;case"Q":if(s.length>=4){s.length=4;break}else continue;case"T":if(s.length>=2&&("Q"===a||"T"===a)){s.length=2;break}else continue;case"A":if(s.length>=7){[l,o,f,c,h]=s.splice(0,5),s.length=2;break}else continue;default:continue}const u=s.length;if(u>=2){const n=e===e.toLowerCase(),a=[];let g=0;while(g<u){let e=s[g++],t=s[g++];if(n&&r)e+=r.x,t+=r.y;a.push({x:e,y:t})}t.push({key:e,value:a,start:a[0],end:a[a.length-1],relative:n,coordinates:s,radiusX:l,radiusY:o,xAxisRotation:f,largeArcFlag:c,sweepFlag:h}),i=false}}return t}static getPathPoints(e){const t=[];let i=0,s=0;const n=e.length;let a,r=0;while(r<n){const n=e[r++],{key:l,relative:o,coordinates:f}=n,c=f.length;a=0;while(a<c){if(o)i+=f[a++],s+=f[a++];else i=f[a++],s=f[a++];const e={x:i,y:s};if("A"===l.toUpperCase())e.rx=n.radiusX,e.ry=n.radiusY;t.push(e)}if(o)n.key=l.toUpperCase()}return t}static syncPathPoints(e,t,i=false){e:{let s;const n=e.length;let a=0;while(a<n){const n=e[a++],r=n.coordinates;if(n.relative)if(s){if(i&&("H"===n.key||"V"===n.key)){const e=t.shift();if(e)r[0]=e.x,r[1]=e.y,n.value[0]=e,n.start=e,n.end=e,n.key="L",n.relative=false;else break e}else{const e=r.length;let i=0,a=0;while(i<e){const e=t.shift();if(e){if(r[i++]=e.x-s.x,r[i++]=e.y-s.y,"a"===n.key&&void 0!==e.rx&&void 0!==e.ry)n.radiusX=e.rx,n.radiusY=e.ry;n.value[a++]=e}else break e}n.key=n.key.toLowerCase()}s=n.end}else break;else{switch(n.key.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":{const i=r.length;let s=0,a=0;while(s<i){const i=t.shift();if(i)r[s++]=i.x,r[s++]=i.y,n.value[a++]=i;else{e=[];break e}}break}case"A":{const i=t.shift();if(i)r[0]=i.x,r[1]=i.y,n.radiusX=i.rx,n.radiusY=i.ry,n.value[0]=i;else{e=[];break e}break}}if(!n.relative)s=n.end}}}return e}static filterTransforms(e,t){const i=[];for(let s=0;s<e.length;++s){const n=e[s],a=n.type;if(!t||!t.includes(a)){switch(a){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===n.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:{const e=n.matrix;if(1===e.a&&1===e.d)continue;break}case SVGTransform.SVG_TRANSFORM_TRANSLATE:{const e=n.matrix;if(0===e.e&&0===e.f)continue;break}}i.push(n)}}return i}static applyTransforms(e,t,i){const s=SvgBuild.clonePoints(t);for(const t of e.slice(0).reverse()){const e=t.matrix;let n=0,a=0,r=0,l=0;if(i){const{x:s,y:o}=i,f=t.method;switch(t.type){case SVGTransform.SVG_TRANSFORM_SCALE:if(f.x)r=s*(1-e.a);if(f.y)l=o*(1-e.d);break;case SVGTransform.SVG_TRANSFORM_SKEWX:if(f.y)a-=o;break;case SVGTransform.SVG_TRANSFORM_SKEWY:if(f.x)n-=s;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(f.x)n-=s,r=s+O(t.angle,s);if(f.y)a-=o,l=o+O(t.angle,o);break}}for(let i=0;i<s.length;++i){const o=s[i],{x:f,y:c}=o;if(o.x=k.applyX(e,f,c+a)+r,o.y=k.applyY(e,f+n,c)+l,t.type===SVGTransform.SVG_TRANSFORM_SCALE){const{rx:t,ry:i}=o;if(void 0!==t&&void 0!==i)o.rx=k.applyX(e,t,i+a),o.ry=k.applyY(e,t+n,i)}}}return s}static convertTransforms(e){const t=e.numberOfItems,i=new Array(t);let s=0;while(s<t){const{type:t,matrix:n,angle:a}=e.getItem(s);i[s++]=T.create(t,n,a)}return i}static clonePoints(e){if(Array.isArray(e)){const t=e.length,i=new Array(t);let s=0;while(s<t){const{x:t,y:n,rx:a,ry:r}=e[s],l={x:t,y:n};if(void 0!==a&&void 0!==r)l.rx=a,l.ry=r;i[s++]=l}return i}else{const t=e.numberOfItems,i=new Array(t);let s=0;while(s<t){const{x:t,y:n}=e.getItem(s);i[s++]={x:t,y:n}}return i}}static minMaxPoints(e,t=false){let{x:i,y:s}=e[0],n=i,a=s;const r=e.length;for(let l=1;l<r;++l){const{x:r,y:o}=e[l];if(t&&l>0){const{rx:t,ry:f}=e[l];if(void 0!==t&&void 0!==f){const{x:c,y:h}=e[l-1];let u=(r+c)/2,g=(o+h)/2;if(r>c)g-=f;else if(r<c)g+=f;if(o<h)u+=t;else if(o>c)u-=t;i=Math.min(u,i),n=Math.max(u,n),s=Math.min(g,s),a=Math.max(g,a)}}if(r<i)i=r;else if(r>n)n=r;if(o<s)s=o;else if(o>a)a=o}return[i,s,n,a]}static centerPoints(...e){const t=this.minMaxPoints(e);return{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}}static convertPoints(e){const t=e.length;if(t%2==0){const i=new Array(t/2);let s=0,n=0;while(s<t)i[n++]={x:e[s++],y:e[s++]};return i}return[]}static parsePoints(e){return $(e.trim().split(/\s+/),e=>{const[t,i]=e.split(",");return{x:parseFloat(t),y:parseFloat(i)}})}static parseCoordinates(e){U.lastIndex=0;const t=[];let i;while(i=U.exec(e)){const e=parseFloat(i[0]);if(!isNaN(e))t.push(e)}return t}static getBoxRect(e){let t=[];const i=e.length;let s=0;while(s<i)t=t.concat(SvgBuild.getPathPoints(SvgBuild.getPathCommands(e[s++])));const[n,a,r,l]=this.minMaxPoints(t,true);return{top:a,right:r,bottom:l,left:n}}static setName(e){if(e){let t,i;if(Y(e.id)){const s=z(e.id,true);if(!j.has(s))t=s;i=s}else i=e.tagName;let s=j.get(i)||0;if(t)return j.set(t,s),t;else return j.set(i,++s),i+"_"+s}else return j.clear(),""}}return SvgBuild.isContainer=e=>D(e.instanceType,2),SvgBuild.isElement=e=>D(e.instanceType,4),SvgBuild.isShape=e=>D(e.instanceType,2052),SvgBuild.isAnimate=e=>D(e.instanceType,16392),SvgBuild.isAnimateTransform=e=>D(e.instanceType,49160),SvgBuild.asSvg=e=>18===e.instanceType,SvgBuild.asG=e=>34===e.instanceType,SvgBuild.asPattern=e=>130===e.instanceType,SvgBuild.asShapePattern=e=>258===e.instanceType,SvgBuild.asUsePattern=e=>514===e.instanceType,SvgBuild.asImage=e=>4100===e.instanceType,SvgBuild.asUse=e=>10244===e.instanceType,SvgBuild.asUseSymbol=e=>66===e.instanceType,SvgBuild.asSet=e=>8===e.instanceType,SvgBuild.asAnimate=e=>16392===e.instanceType,SvgBuild.asAnimateTransform=e=>49160===e.instanceType,SvgBuild.asAnimateMotion=e=>114696===e.instanceType,SvgBuild.drawCircle=(e,t,i,s)=>SvgBuild.drawEllipse(e,t,i,i,s),SvgBuild.drawPolygon=(e,t)=>e.length?SvgBuild.drawPolyline(e,t)+"Z":"",SvgBuild})();const{getNamedItem:H}=squared.lib.dom;function Z(e,t,i,s,n){const a=e.length;let r=0;while(r<a){const a=e[r++];if(a.x+=t,a.y+=i,void 0!==a.rx&&void 0!==a.ry)a.rx*=s,a.ry*=n}}var Q=e=>class extends e{constructor(){super(...arguments),this._baseVal={}}setBaseValue(e,t){if(void 0!==t){if(this.verifyBaseValue(e,t))return this._baseVal[e]=t,true}else switch(e){case"d":return this._baseVal[e]=H(this.element,"d"),true;case"points":{const t=this.element[e];if(Array.isArray(t))return this._baseVal[e]=K.clonePoints(t),true;break}default:{const t=this.element[e];if(t){const i=t.baseVal;if(i)return this._baseVal[e]=i.value,true}break}}return false}getBaseValue(e,t){var i;return null!==(i=this._baseVal[e])&&void 0!==i?i:!this.setBaseValue(e)?t:void 0}refitBaseValue(e,t,i,s=1,n=1){const a=this._baseVal;for(const r in a){const l=a[r];if("string"==typeof l){if("d"===r){const o=K.getPathCommands(l),f=K.getPathPoints(o);Z(f,e,t,s,n),a[r]=K.drawPath(K.syncPathPoints(o,f),i)}}else if("number"==typeof l)switch(r){case"cx":case"x1":case"x2":case"x":a[r]+=e;break;case"cy":case"y1":case"y2":case"y":a[r]+=t;break;case"r":a[r]*=Math.min(s,n);break;case"rx":case"width":a[r]*=s;break;case"ry":case"height":a[r]*=n;break}else if(Array.isArray(l))if("points"===r)Z(l,e,t,s,n)}}verifyBaseValue(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}};const{getFontSize:J,isLength:ee,parseUnit:te}=squared.lib.css,{getNamedItem:ie}=squared.lib.dom,{capitalize:se,hasBit:ne,isNumber:ae,isString:re}=squared.lib.util;function le(e,t){const i=ne(this.fillMode,t);if(e){if(!i)this.fillMode|=t}else if(i)this.fillMode^=t}class SvgAnimation{constructor(e,t){if(this.element=null,this.baseValue="",this.fillMode=0,this.synchronizeState=0,this.paused=false,this.animationElement=null,this._attributeName="",this._duration=-1,this._delay=0,this._to="",this._dataset={},e){const t=e.dataset;for(const e in t){const i=t[e];if(re(i))try{this._dataset[e]=JSON.parse(i)}catch(e){}}this.element=e}if(t){this.animationElement=t,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");const e=ie(t,"dur");if(""!==e&&"indefinite"!==e)this.duration=SvgAnimation.convertClockTime(e)}}static convertClockTime(e){let t=0,i=0;if(ae(e))t=parseInt(e);else if(/-?\d+ms$/.test(e))i=parseFloat(e);else if(/-?\d+s$/.test(e))t=parseFloat(e);else if(/-?\d+min$/.test(e))t=60*parseFloat(e);else if(/-?\d+(.\d+)?h$/.test(e))t=60*parseFloat(e)*60;else{const s=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/.exec(e);if(s){const e=s[2],n=s[3],a=s[4],r=s[5];if(e)t+=60*parseInt(e)*60;if(n)t+=60*parseInt(n);if(a)t+=parseInt(a);if(r)i=parseInt(r)*(r.length<3?Math.pow(10,3-r.length):1);if(s[1])t*=-1,i*=-1}}return 1e3*t+i}setAttribute(e,t){const i=this.animationElement;if(i){const s=ie(i,e);if(""!==s)if(re(t))t=t.trim(),this[e+se(t)]=s===t;else this[e]=s}}addState(...e){for(let t=0;t<e.length;++t){const i=e[t];if(!ne(this.synchronizeState,i))this.synchronizeState|=i}}removeState(...e){for(let t=0;t<e.length;++t){const i=e[t];if(ne(this.synchronizeState,i))this.synchronizeState^=i}}hasState(...e){return e.some(e=>ne(this.synchronizeState,e))}set attributeName(e){var t,i,s,n;if("transform"!==e&&!re(this.baseValue)){let a=null===(i=null===(t=this._dataset.baseValue)||void 0===t?void 0:t[e])||void 0===i?void 0:i.toString().trim();if(a)this.baseValue=a;else{const t=this.element;if(t){switch(e){case"opacity":case"stroke-opacity":case"fill-opacity":a=x(t,e)||"1";break;default:a=x(t,e);break}if(!re(a)){const i=this.animationElement;if(i&&"paused"===getComputedStyle(t).animationPlayState){const t=i.parentElement;if(a=null===(n=null===(s=null==t?void 0:t[e])||void 0===s?void 0:s.baseVal)||void 0===n?void 0:n.valueAsString,a&&ee(a))this.baseValue=te(a,J(t)).toString()}}else this.baseValue=a}}}this._attributeName=e}get attributeName(){return this._attributeName}set delay(e){this._delay=e}get delay(){return this._delay}set duration(e){this._duration=Math.round(e)}get duration(){return this._duration}set to(e){this._to=e}get to(){return this._to}set fillBackwards(e){le.call(this,e,8)}get fillBackwards(){return ne(this.fillMode,8)}set fillForwards(e){le.call(this,e,4)}get fillForwards(){return ne(this.fillMode,4)}set fillFreeze(e){le.call(this,e,2)}get fillFreeze(){return ne(this.fillMode,2)}set parent(e){this._parent=e}get parent(){return this._parent}set group(e){this._group=e}get group(){return this._group||{id:-1/0,name:""}}set setterType(e){}get setterType(){return true}get fillReplace(){switch(this.fillMode){case 0:case 8:return true;default:return false}}get parentContainer(){let e=this._parent;while(e&&!K.isContainer(e))e=e.parent;return e}get dataset(){return this._dataset}get instanceType(){return 8}}const oe={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"},fe="cubic-bezier\\(([\\d.]+), ([\\d.]+), ([\\d.]+), ([\\d.]+)\\)";var ce=Object.freeze({__proto__:null,KEYSPLINE_NAME:oe,STRING_CUBICBEZIER:fe});const{getHexCode:he,parseColor:ue}=squared.lib.color,{getFontSize:ge,isLength:de,parseUnit:pe}=squared.lib.css,{getNamedItem:me}=squared.lib.dom,{isNumber:ye,isString:ve,replaceMap:Se,sortNumber:be,trimEnd:ke}=squared.lib.util,Te=new RegExp(fe);const we=e=>parseFloat((1-e).toPrecision(5));let Ae=(()=>{class SvgAnimate extends SvgAnimation{constructor(e,t){if(super(e,t),this.type=0,this.additiveSum=false,this.accumulateSum=false,this._iterationCount=1,this._from="",this._reverse=false,this._alternate=false,this._setterType=false,this._repeatDuration=-1,this._timingFunction="",t){const e=me(t,"values"),i=-1!==this.duration?SvgAnimate.toFractionList(me(t,"keyTimes")):[];if(""!==e){const t=ke(e,";").split(/\s*;\s*/);this.values=t;const s=t.length;if(s>1&&s===i.length)this.from=t[0],this.to=t[s-1],this.keyTimes=i;else if(1===s)this.to=this.values[0],this.convertToValues()}else this.from=me(t,"from"),this.convertToValues(i);const s=me(t,"repeatDur");if(""!==s&&"indefinite"!==s)this._repeatDuration=SvgAnimation.convertClockTime(s);const n=me(t,"repeatCount");if(this.iterationCount="indefinite"===n?-1:parseFloat(n),"animate"===t.tagName)this.setCalcMode()}}static convertTimingFunction(e){const t=oe[e];if(t)return t;else if(/^\s*[\d.]+\s+[\d.]+\s+[\d.]+\s+[\d.]+\s*$/.test(e))return e;else if(e.startsWith("step"))return oe.linear;else{const t=Te.exec(e);return t?t[1]+" "+t[2]+" "+t[3]+" "+t[4]:oe.ease}}static convertStepTimingFunction(e,t,i,s,n,a){const r=s[n],l=s[n+1];let o,f;switch(e){case"fill":case"stroke":{const e=ue(r),t=ue(l);if(e&&t)o=[e],f=[t];break}case"points":o=K.convertPoints(K.parseCoordinates(r)),f=K.convertPoints(K.parseCoordinates(l));break;case"rotate":case"scale":case"translate":o=Se(r.trim().split(/\s+/),e=>parseFloat(e)),f=Se(l.trim().split(/\s+/),e=>parseFloat(e));break;default:if(ye(r))o=[parseFloat(r)];else if(de(r))o=[pe(r,a)];if(ye(l))f=[parseFloat(l)];else if(de(l))f=[pe(l,a)];break}if(o&&f){const s=o.length;if(s===f.length){switch(t){case"step-start":t="steps(1, start)";break;case"step-end":t="steps(1, end)";break}const a=/steps\((\d+)(?:, (start|end))?\)/.exec(t);if(a){const t=i[n+1]-i[n],r=parseInt(a[1]),l=100/r,c=new Array(r+1),h=new Array(r+1);for(let u=0;u<=r;++u){const g=0===u&&"start"===a[2]?1:0,d=i[n]+t*(u/r),p=l*(u+g)/100;let m="";switch(e){case"fill":case"stroke":{const e=o[0].rgba,t=f[0].rgba,i=he(SvgAnimate.getSplitValue(e.r,t.r,p),SvgAnimate.getSplitValue(e.g,t.g,p),SvgAnimate.getSplitValue(e.b,t.b,p)),s=he(SvgAnimate.getSplitValue(e.a,t.a,p));m+=(""!==m?" ":"")+"#"+(i+("FF"!==s?s:""));break}case"points":{let e=0;while(e<s){const t=o[e],i=f[e++];m+=(""!==m?" ":"")+SvgAnimate.getSplitValue(t.x,i.x,p)+","+SvgAnimate.getSplitValue(t.y,i.y,p)}break}default:{let e=0;while(e<s)m+=(""!==m?" ":"")+SvgAnimate.getSplitValue(o[e],f[e++],p).toString();break}}if(""!==m)c[u]=d,h[u]=m;else return}return[c,h]}}}}static toFractionList(e,t=";",i=true){let s=0;const n=Se(e.split(t),e=>{const t=parseFloat(e);if(!isNaN(t)&&(!i||t>=s&&t<=1))return s=t,t;else return-1});return n.length>1&&(!i||0===n[0]&&n.some(e=>-1!==e))?n:[]}get from(){return this._from}set from(e){if(void 0===this._values){const t=this.animationElement;if(t){if(""===this.to){const i=me(t,"by"),s=K.parseCoordinates(i);if(s.length){if(""===e)e=this.baseValue||"";if(""!==e){const t=K.parseCoordinates(e),i=t.length;if(s.length===i){let e="",n=0;while(n<i)e+=(n>0?",":"")+(t[n]+s[n++]);this.to=e}}}}if(K.parseCoordinates(this.to).length)this.setAttribute("additive","sum")}}this._from=e}setCalcMode(e,t){const i=this.animationElement;if(i){if(!t)t=me(i,"calcMode")||"linear";const s=this.keyTimes;switch(t){case"discrete":if(0===s[0]&&2===s.length){let t=[],n=[];const a=this.values,r=s.length-1;let l=0;while(l<r){const r=SvgAnimate.convertStepTimingFunction(e||this.attributeName,"step-end",s,a,l++,ge(i));if(r)t=t.concat(r[0]),n=n.concat(r[1])}t.push(s.pop()),n.push(a.pop()),this._values=n,this._keyTimes=t,this._keySplines=[oe["step-end"]]}break;case"paced":this._keySplines=void 0;break;case"spline":this.keySplines=function(e,t){const i=e.length,s=[];let n=0;while(n<i){const i=t(e[n],n++,e);if(ve(i))s.push(i)}return s}(me(i,"keySplines").split(";"),e=>e.trim());case"linear":if(0!==s[0]&&1!==s[s.length-1]){const e=this.values.length,t=new Array(e);let i=0;while(i<e)t[i]=i++/(e-1);this._keyTimes=t,this._keySplines=void 0}break}}}convertToValues(e){const t=this.to;if(t){if(this.values=[this.from,t],e&&2===e.length){const t=this.keyTimes;if(2!==t.length||0===t[0]&&t[1]<=1)return void(this.keyTimes=e)}this.keyTimes=[0,1]}}setGroupOrdering(e){if(this.group.ordering=e,this.fillBackwards){const t=this.group.name;let i=false,s=e.length-1;while(s>=0){const n=e[s--];if(i){if("forwards"!==n.fillMode){this.fillBackwards=false;break}}else if(n.name===t)i=true}}}getIntervalEndTime(e,t=false){const i=this.getTotalDuration();if(e<i){const{duration:s,keyTimes:n}=this;let a=this.delay;while(a+s<=e)a+=s;return Math.min(a+(t?1:n[n.length-1])*s,i)}return i}getTotalDuration(e=false){let t=this.iterationCount;if(e&&-1===t)t=1;if(-1!==t)return Math.min(this.delay+this.duration*t,this.end||1/0);else return 1/0}set delay(e){super.delay=e;const t=this.animationElement,i=t&&me(t,"end");if(i){const e=be(Se(i.split(";"),e=>SvgAnimation.convertClockTime(e)))[0];if(!isNaN(e)){const{duration:t,iterationCount:i}=this;if(-1===i||t>0&&e<t*i){const s=this.delay;if(s>e){if(this.end=e,-1===i)this.iterationCount=Math.ceil((e-s)/t)}else this.duration=-1}}}}get delay(){return super.delay}set duration(e){super.duration=e}get duration(){const e=super.duration;if(-1===e&&-1!==this._repeatDuration)return this._repeatDuration;else return e}set iterationCount(e){this._iterationCount=isNaN(e)?1:e;const t=this.animationElement;if(t)if(-1!==this.iterationCount)this.setAttribute("accumulate","sum"),this.fillFreeze="freeze"===me(t,"fill");else this.accumulateSum=false,this.fillFreeze=false}get iterationCount(){const e=this.duration;if(e>0){const t=this._iterationCount,i=this._repeatDuration;if(-1!==i&&(-1===t||i<t*e))return i/e;else return t}return 1}set to(e){super.to=e}get to(){if(this._setterType)return this.valueTo||super.to;else return this.setterType?this.values[0]:super.to}set values(e){if(this._values=e,e&&e.length!==this.keyTimes.length)this._keyTimes=void 0,this._keySplines=void 0}get values(){if(void 0===this._values)this._values=[];return this._values}set keyTimes(e){const t=this._values;if((void 0===t||t.length===e.length)&&e.every(e=>e>=0&&e<=1))this._keyTimes=e}get keyTimes(){if(void 0===this._keyTimes)this._keyTimes=[];return this._keyTimes}set keySplines(e){if(null==e?void 0:e.length){const t=this.keyTimes.length-1;if(e.length>=t&&!e.every(e=>""===e||e===oe.linear)){const i=[];let s=0;while(s<t){const t=Se(e[s++].split(/\s+/),e=>parseFloat(e));if(4===t.length&&!t.some(e=>isNaN(e))&&t[0]>=0&&t[0]<=1&&t[2]>=0&&t[2]<=1)i.push(t.join(" "));else i.push(oe.linear)}this._keySplines=i}}else this._keySplines=void 0}get keySplines(){return this._keySplines}set timingFunction(e){this._timingFunction=e?SvgAnimate.convertTimingFunction(e):e}get timingFunction(){var e;return this._timingFunction||(null===(e=this.keySplines)||void 0===e?void 0:e[0])||""}set reverse(e){if(this.length&&e!==this._reverse){const e=this.keyTimes,t=this._keySplines,i=e.length,s=new Array(i);let n=i-1,a=0;while(n>=0)s[a++]=1-e[n--];if(this.keyTimes=s,this.values.reverse(),t){const e=[];n=t.length-1;while(n>=0){const i=Se(t[n--].split(" "),e=>parseFloat(e));e.push(4===i.length?we(i[2])+" "+we(i[3])+" "+we(i[0])+" "+we(i[1]):oe.linear)}this._keySplines=e}}this._reverse=e}get reverse(){return this._reverse}set alternate(e){this._alternate=e}get alternate(){return this._alternate}set setterType(e){this._setterType=e}get setterType(){if(this._setterType)return true;else if(this.animationElement&&0===this.duration){const e=this.keyTimes;return e.length>=2&&0===e[0]&&""!==this.values[0]}return false}set length(e){if(0===e)this._values=void 0}get length(){var e;return(null===(e=this._values)||void 0===e?void 0:e.length)||0}get valueTo(){const e=this._values;return(null==e?void 0:e[e.length-1])||""}get valueFrom(){return this.values[0]||""}get playable(){return!this.paused&&this.duration>0&&this.keyTimes.length>0}get fillReplace(){return super.fillReplace||-1===this.iterationCount}get fromToType(){const e=this.keyTimes;return 2===e.length&&0===e[0]&&1===e[1]}get evaluateStart(){const e=this.keyTimes;return e.length>0&&e[0]>0}get evaluateEnd(){const e=this.keyTimes;return e.length>0&&e[e.length-1]<1}get instanceType(){return 16392}}return SvgAnimate.getSplitValue=(e,t,i)=>e+(t-e)*i,SvgAnimate})();const{getNamedItem:xe}=squared.lib.dom,{replaceMap:Re}=squared.lib.util;class SvgAnimateTransform extends Ae{constructor(e,t){if(super(e,t),this.attributeName="transform",t){const e=xe(t,"type");this.setType(e),this.setCalcMode(e)}}static toRotateList(e){const t=e.length,i=new Array(t);for(let s=0;s<t;++s){const t=e[s];if(""===t)i[s]=[0,0,0];else{const e=K.parseCoordinates(t);if(2===e.length)e[2]=0;if(3===e.length)i[s]=e;else return}}return i}static toScaleList(e){const t=e.length,i=new Array(t);for(let s=0;s<t;++s){const t=e[s];if(""===t)i[s]=[1,1,0,0];else{const e=K.parseCoordinates(t);if(1===e.length)e[1]=e[0];if(2===e.length)e[2]=0,e[3]=0;if(4===e.length)i[s]=e;else return}}return i}static toTranslateList(e){const t=e.length,i=new Array(t);for(let s=0;s<t;++s){const t=e[s];if(""===t)i[s]=[0,0];else{const e=K.parseCoordinates(t);if(1===e.length)e[1]=0;if(2===e.length)i[s]=e;else return}}return i}static toSkewList(e){const t=e.length,i=new Array(t);for(let s=0;s<t;++s){const t=e[s];if(""===t)i[s]=[0];else{const e=K.parseCoordinates(t);if(1===e.length)i[s]=e;else return}}return i}expandToValues(){if(this.additiveSum){const{duration:e,keyTimes:t,iterationCount:i}=this;if(-1!==i&&e>0&&t.length){const s=e*i;e:{const{type:n,keySplines:a,values:r}=this,l=[],o=[],f=[];let c;const h=t.length;for(let u=0;u<i;++u){if(u>0&&a)f.push("");for(let g=0;g<h;++g){const d=K.parseCoordinates(r[g]),p=d.length;if(p){let r;switch(n){case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(1===p)r=[d[0],0];else if(2===p)r=d;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(1===p)r=[d[0],d[0]];else if(2===p)r=d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(1===p)r=[d[0],0,0];else if(3===p)r=d;break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(1===p)r=d;break}if(r){let n=(t[g]+u)*e;if(c){let e=0;while(e<r.length)r[e]+=c[e++]}if(u<i-1&&g===h-1){if(this.accumulateSum)c=r;--n}if(l.push(n/s),o.push(r.join(" ")),a&&g<h-1)f.push(a[g])}else break e}else break e}}this.values=o,this.keyTimes=l,this.keySplines=f.length?f:void 0,this.duration=s,this.iterationCount=1,this.accumulateSum=false}}}}setType(e){let t;switch(e){case"translate":if(this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement)t=SvgAnimateTransform.toTranslateList(this.values);break;case"scale":if(this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement)t=SvgAnimateTransform.toScaleList(this.values);break;case"rotate":if(this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement)t=SvgAnimateTransform.toRotateList(this.values);break;case"skewX":if(this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement)t=SvgAnimateTransform.toSkewList(this.values);break;case"skewY":if(this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement)t=SvgAnimateTransform.toSkewList(this.values);break;default:return}if(t)this.values=Re(t,e=>e.join(" "));this.baseValue=T.typeAsValue(this.type)}get instanceType(){return 49160}}const{hasValue:Ve,safeNestedArray:_e,sortNumber:Ee}=squared.lib.util;function Pe(e,t,i,s,n,a=0,r,l=false,o=false,f=0,c=false,h){if(n)_e(e[i],s).push({time:s,value:n,animation:r,start:l,end:o,endTime:a,fillMode:f,infinite:c,valueFrom:h}),t[i].add(s)}let Me=(()=>{class SvgAnimationIntervalMap{constructor(e,...t){var i;e=(t.length?e.filter(e=>t.includes(e.attributeName)):e.slice(0)).sort((e,t)=>{if(e.delay===t.delay)return e.group.id<t.group.id?1:-1;else return e.delay<t.delay?-1:1}),t.length=0;const s=e.length;for(let i=0;i<s;++i){const s=e[i],n=SvgAnimationIntervalMap.getKeyName(s);if(!t.includes(n))t.push(n)}const n={},a={},r={};for(let i=0;i<t.length;++i){const s=t[i];n[s]=new Map,a[s]={},r[s]=new Set;const l=s.split(":")[0],o=e.filter(e=>e.fillBackwards&&e.attributeName===l).sort((e,t)=>e.group.id<t.group.id?1:-1)[0];if(o){const e=o.delay;Pe(a,r,s,0,o.values[0],e,o,0===e,false,8)}}for(let t=0;t<s;++t){const i=e[t],s=SvgAnimationIntervalMap.getKeyName(i);if(i.baseValue&&void 0===a[s][-1])Pe(a,r,s,-1,i.baseValue);if(i.setterType){const{delay:e,duration:t}=i,n=i.fillReplace&&t>0;if(Pe(a,r,s,e,i.to,n?e+t:0,i,n,!n,2),n)Pe(a,r,s,e+t,"",0,i,false,true,2)}else if(K.isAnimate(i)&&i.duration>0){const e=-1===i.iterationCount,t=i.getTotalDuration();if(Pe(a,r,s,i.delay,i.valueTo,t,i,true,false,0,e,i.valueFrom),!e&&!i.fillReplace)Pe(a,r,s,t,i.valueTo,0,i,false,true,i.fillForwards?4:2)}}for(const e in a){const t=Ee(Array.from(r[e])),i=t.length;let s=0;while(s<i){const i=t[s++],r=a[e][i];for(let t=0;t<r.length;++t){const i=r[t],s=i.animation;if(""===i.value||s&&i.start&&K.isAnimate(s)&&""===s.from){let s,a;for(const t of n[e].values()){a=0;while(a<t.length){const e=t[a++];if(i.animation!==e.animation&&""!==e.value&&(-1===e.time||4===e.fillMode||2===e.fillMode)){s=e.value;break}}}if(s)i.value=s;else if(""===i.value)r.splice(t--,1)}}if(r.length)r.sort((e,t)=>{if(e.animation&&t.animation)if(e.fillMode===t.fillMode)return e.animation.group.id<t.animation.group.id?1:-1;else return e.fillMode<t.fillMode?1:-1;return 0}),n[e].set(i,r)}}for(const e in n)for(const[t,s]of n[e].entries())for(let a=0;a<s.length;++a){const r=s[a],l=r.animation;if(l)if(2===r.fillMode){const i=[];for(const[s,a]of n[e].entries())if(s<t)for(let e=0;e<a.length;++e){const t=a[e];if(t.start){const e=t.animation;if(null==e?void 0:e.animationElement)i.push(e)}}else for(let e=0;e<a.length;++e){const n=a[e];if(s>t){if(n.end&&i.includes(n.animation))a.splice(e--,1)}else if(n.end){const t=n.animation;if((null==t?void 0:t.animationElement)&&t.group.id<l.group.id)a.splice(e--,1)}}}else if(4===r.fillMode||r.infinite){let s=false;const a=l.group,r=a.ordering;if(r){const e=l.getTotalDuration(),t=a.name;let i=0;while(i<r.length){const n=r[i++];if(n.name===t)s=true;else if(SvgAnimationIntervalMap.getGroupEndTime(n)>=e)break}}const o=[];for(const[a,r]of n[e].entries())if(!s&&a<t)for(let e=0;e<r.length;++e){const t=r[e];if(t.start){const e=t.animation;if(e)o.push(e)}}else for(let e=0;e<r.length;++e){const n=r[e];if(a>t){const t=n.animation;if(s||t&&(n.end&&o.includes(t)||!l.animationElement&&t.group.id<l.group.id))r.splice(e--,1)}else if(n.end){if(((null===(i=n.animation)||void 0===i?void 0:i.group.id)||NaN)<l.group.id)r.splice(e--,1)}}}}for(const e in n){const t=n[e];for(const[e,i]of t.entries())if(0===i.length)t.delete(e)}this.map=n}has(e,t,i){const s=this.map[e];if(void 0!==t){if(s&&s.has(t))if(!i)return true;else return-1!==s.get(t).findIndex(e=>e.animation===i);return false}return!!s}get(e,t,i=false){let s;const n=this.map[e];if(n)for(const[e,a]of n.entries())if(e<=t){const n=a.length;let r=0;while(r<n){const n=a[r++];if(""!==n.value&&(-1===n.time||n.end&&(4===n.fillMode||2===n.fillMode))||i&&n.start&&t!==e){s=n.value;break}}}else break;return s}paused(e,t){let i=0;const s=this.map[e];if(s)for(const[e,n]of s.entries())if(e<=t){const e=n.length;let s=0;while(s<e){const e=n[s++];if(e.start&&(e.infinite||0===e.fillMode&&e.endTime>t))if(e.animation)i=2;else{i=1;break}else if(e.end&&(4===e.fillMode||1===i&&2===e.fillMode)){i=0;break}}}else break;return 0===i}evaluateStart(e,t){const i=e.values;let s=e.reverse?i[i.length-1]:i[0];if(""===s)if(s=this.get(e.attributeName,e.delay)||(null==t?void 0:t.toString())||e.baseValue,Ve(s))if(s=s.toString(),e.reverse)i[i.length-1]=s,e.to=s;else i[0]=s,e.from=s;return i}}return SvgAnimationIntervalMap.getGroupEndTime=e=>"infinite"===e.iterationCount?1/0:e.delay+e.duration*parseInt(e.iterationCount),SvgAnimationIntervalMap.getKeyName=e=>e.attributeName+(K.isAnimateTransform(e)?":"+T.typeAsName(e.type):""),SvgAnimationIntervalMap})();const{clamp:Ne,equal:Fe,multipleOf:Ge}=squared.lib.math,{hasBit:Ce,hasKeys:Oe,hasValue:Be,isEqual:Le,isNumber:Ie,joinArray:qe,plainMap:Xe,replaceMap:ze,safeNestedArray:De,spliceArray:We,sortNumber:Ye}=squared.lib.util;function $e(e,t,i,s,n){let a,r,l,o=0;for(const[t,s]of e.entries()){if(i===t){r={key:t,value:s};break}else if(i>o&&i<t&&void 0!==a){r={key:o,value:a},l={key:t,value:s};break}o=t,a=s}if(r&&l)nt(e,i,et(i,r.key,r.value,l.key,l.value),true);else if(r)nt(e,i,r.value,true);else if(!n){let n=s.get(t,i,true);if(void 0!==n)if(n=je(n,true),""!==n)nt(e,i,n)}}function Ue(e){const t=new Set,i=e.length,s=e[i-1][0];let n=0;while(n<i){const i=e[n++];let a=i[0]/s;if(a>0){let e=7;do{const i=parseFloat(a.toString().substring(0,e));if(!t.has(i)){a=i;break}}while(++e)}i[0]=a,t.add(a)}return e}function je(e,t=false){if("string"==typeof e)if(Ie(e))e=parseFloat(e);else if(0===(e=K.parsePoints(e)).length)e="";return t&&"string"==typeof e?"":e}function Ke(e,t){let i;if(e)for(let s=0;s<e.length;++s){const n=e[s];if(n.time<=t)i=n.value;else break}return i}function He(e,t,i,s,n){var a;const r=[],l=t.element.tagName;let o;switch(l){case"line":o=["x1","y1","x2","y2"];break;case"rect":o=["width","height","x","y"];break;case"polyline":case"polygon":o=["points"];break;case"circle":o=["cx","cy","r"];break;case"ellipse":o=["cx","cy","rx","ry"];break;default:return}const f=T.origin(t.element),c=e.length;let h,u=0;while(u<c){const[c,g]=e[u++],d=[],p=o.length;h=0;while(h<p){const e=o[h++];let i=g.get(e);if(void 0===i)i=null!==(a=Ke(s[e],c))&&void 0!==a?a:t.getBaseValue(e);if(void 0!==i)d.push(i);else return}let m;switch(l){case"line":m=[{x:d[0],y:d[1]},{x:d[2],y:d[4]}];break;case"rect":{const[e,t,i,s]=d;m=[{x:i,y:s},{x:i+e,y:s},{x:i+e,y:s+t},{x:i,y:s+t}];break}case"polygon":case"polyline":m=d[0];break;case"circle":case"ellipse":m=[{x:d[0],y:d[1],rx:d[2],ry:d[d.length-1]}];break}if(m){let e;if(t.transformed)m=K.applyTransforms(t.transformed,m,f);switch(null==i||i.refitPoints(m),l){case"line":case"polyline":e=K.drawPolyline(m,n);break;case"rect":case"polygon":e=K.drawPolygon(m,n);break;case"circle":case"ellipse":{const{x:t,y:i,rx:s,ry:a}=m[0];e=K.drawEllipse(t,i,s,a,n);break}}if(void 0!==e)r.push({key:c,value:e})}}return r}function Ze(e,t,i){const s=new Map,n=t.length;let a=0;while(a<n){const n=t[a++],r=new Map;for(const t in e){let s=e[t].get(n);if(void 0===s)s=Ke(i[t],n);if(void 0!==s)r.set(t,s)}s.set(n,r)}return s}function Qe(e,t,i,s){if(t)if(e.set(i,t),void 0!==s)e.set(s,t)}function Je(e,t,i,s,n){if(e.alternate&&i%2!=0)t=t.slice(0).reverse();switch(e.attributeName){case"transform":if(e.additiveSum&&"string"==typeof n){const a=ze(n.split(" "),e=>parseFloat(e)),r=Xe(t,e=>ze(e.trim().split(" "),e=>parseFloat(e))),l=a.length;if(r.every(e=>e.length===l)){const t=r[s];if(!e.accumulateSum)i=0;let n=0;while(n<l)t[n]+=a[n++];const o=r.length;for(n=0;n<i;++n)for(let e=0;e<o;++e){const i=r[e];for(let e=0;e<i.length;++e)t[e]+=i[e]}return t.join(" ")}}return t[s];case"points":return K.parsePoints(t[s]);default:{let a=parseFloat(t[s]);if(!isNaN(a)){if(e.additiveSum&&"number"==typeof n){if(a+=n,!e.accumulateSum)i=0;const s=t.length;for(let e=0;e<i;++e)for(let e=0;e<s;++e)a+=parseFloat(t[e])}return a}else return n||0}}}function et(e,t,i,s,n){if(e>t)if("number"==typeof i&&"number"==typeof n)return Ae.getSplitValue(i,n,(e-t)/(s-t));else if("string"==typeof i&&"string"==typeof n){const a=ze(i.split(" "),e=>parseFloat(e)),r=ze(n.split(" "),e=>parseFloat(e)),l=a.length;if(l===r.length){let i="",n=0;while(n<l)i+=(n>0?" ":"")+et(e,t,a[n],s,r[n++]);return i}}else if(Array.isArray(i)&&Array.isArray(n)){const a=[],r=Math.min(i.length,n.length);let l=0;while(l<r){const r=i[l],o=n[l++];a.push({x:et(e,t,r.x,s,o.x),y:et(e,t,r.y,s,o.y)})}return a}return i}function tt(e,t,i,s,n,a,r,l,o,f,c,h,u,g){if(r<0)t-=r,r=0;const d=e.duration,p=t-(r+d*l),m=0===p?0===o?0:1:Ne(p/d);let y=-1,v=-1;const S=s.length;for(let e=0;e<S;++e){if(-1!==y&&m<=s[e]){v=e;break}if(m>=s[e])y=e}let b;if(-1!==y&&-1!==v)b=et(m,s[y],Je(e,n,l,y,i),s[v],Je(e,n,l,v,i));else v=-1!==y?y+1:s.length-1,b=Je(e,n,l,v,i);return at(e,f=nt(h,f,b),a,v,c,u,g),[f,b]}function it(e,t,i,s,n,a,r,l){const o=(e-t)/a,f=s.length;for(let e=1;e<f;++e){const t=s[e-1],a=s[e];if(o>=t&&o<=a)return vt(et(o,t,Je(i,n,r,e-1,l),a,Je(i,n,r,e,l)))}}function st(e,t,i,s,n,a,r,l,o,f,c){let h=r.length;if(!l)l=new Array(h-1).fill("");const{delay:u,duration:g}=n,d=u+g*s,p=n.getTotalDuration(),m=d+(c?a[0]:1)*g,y=parseFloat(r[c?0:h-1]);let v=d;e:{h=f.length;for(let s=0;s<h;++s){const u=f[s];if(u!==n){const n=u.getTotalDuration();if(u.addState(4),n>v){const{delay:S,duration:b}=u,[k,T,w]=Tt(u);rt(e,t,i,u,o,k,T,w);let A=m;t:{let e=false,t=wt(v,S,b)-1;const i=(i,s,f)=>{let h,S;if(c)h=!e&&v===d?0:i%g/g;else h=s===m?1:s%g/g;if(i===s)S=vt(Je(u,T,t,f,o));else S=it(i,s,u,k,T,b,t,o);if(S){if(h>0)S=Math.round((parseFloat(S)+y)/2).toString();const t=a.length;if(!(h===a[t-1]&&S===r[t-1])){const o=e||0===h?(null==w?void 0:w[f])||u.timingFunction:"";if(c){if(!e&&h>0&&i===v)h+=.001;for(let e=0;e<t;++e)if(h<=a[e]){if(0===e||0===h)a.unshift(h),r.unshift(S),l.unshift(o);else a.splice(e,0,h),r.splice(e,0,S),l.splice(e,0,o);break}}else{if((s===n||s===m)&&s<p)h-=.001;a.push(h),r.push(S),l.push(o)}}}};do{if(c){let e=s+1;while(e<h){const t=f[e++];if(t.delay>v){A=t.delay;break}}}const a=k.length;for(let s=0;s<a;++s){const a=yt(S,b,k,t,s);if(a>=v){if(!e)i(a,v,s),e=true;if(a>v){if(c&&a>=m)break e;if(i(a,Math.min(a,n,m),s),a>=m)break e;else if(v=a,a>=n){if(n<=p)u.addState(16);break t}else if(a>=A)break t}}}}while(++t)}}}}}return[a,r,l]}function nt(e,t,i,s=false){if(""!==i){let n=e.get(t),a=false;if(void 0===n)n=e.get(t-1),a=true;if(n!==i||s){if(!s){if("number"==typeof n&&Fe(i,n))return t;while(t>0&&e.has(t))++t}e.set(t,i)}else if(a&&!e.has(t))e.delete(t-1),e.set(t,i)}return t}function at(e,t,i,s,n,a,r){if(!St(K.isAnimateTransform(e),n)){if(0===s)return;--s}const l=null==i?void 0:i[s];if(l)a.set(t,l);if(r)!function(e,t,i,s){var n;if(K.asAnimateTransform(t)){const a=null===(n=t.transformOrigin)||void 0===n?void 0:n[s];if(a)e.set(i,a)}}(r,e,t,s)}function rt(e,t,i,s,n,a,r,l){var o;if(0!==a[0]){let i;if(s.additiveSum)i=vt(n);else i=(null===(o=lt(t,s.attributeName))||void 0===o?void 0:o.value.toString())||e.get(Me.getKeyName(s),s.delay)||vt(n);const f=s.by;if(f&&Ie(i))i=(parseFloat(i)+f).toString();a.unshift(0),r.unshift(i),null==l||l.unshift(s.timingFunction)}if(a[a.length-1]<1){const t=e.get(Me.getKeyName(s),s.delay)||vt(i[s.attributeName])||r[0];a.push(1),r.push(t),null==l||l.push(s.timingFunction)}}function lt(e,t){const i=e[t];return null==i?void 0:i[i.length-1]}function ot(e,t,i,s,n){if(void 0===s)s=t.delay;if(void 0===n)n=t.to;return nt(e,s,i?n:je(n))}function ft(e,t){if(t)e.push(t);e.sort((e,t)=>{if(e.delay===t.delay)return e.group.id<t.group.id?-1:1;else return e.delay<t.delay?-1:1});for(let t=0;t<e.length-1;++t)if(e[t].delay===e[t+1].delay)e.splice(t--,1)}function ct(e,t){if(!t.hasState(16,64)){const i=e.indexOf(t);if(-1!==i)e.splice(i,1);e.push(t),t.addState(4)}}function ht(e,t=1/0){e.sort((e,i)=>{const s=e.delay,n=e.delay;if(t!==1/0)if(t===s&&t!==n)return-1;else if(t!==s&&t===n)return 1;else if(s>t&&n<t)return 1;else if(s<t&&n>t)return-1;if(s!==n)return s>n?-1:1;else return e.group.id>i.group.id?-1:1})}function ut(e,t){if(t){if(-1!==t.iterationCount)We(e,e=>e===t)}else We(e,e=>!!e.animationElement)}function gt(e,t){e.sort((e,i)=>{if(e.getTotalDuration()<=t)return 1;if(i.getTotalDuration()<=t)return-1;const s=e.delay,n=i.delay;if(s===n)return e.group.id<i.group.id?1:-1;else if(s===t)return-1;else if(n===t)return 1;else if(s<t&&n<t)return s>n?-1:1;return s<n?-1:1})}function dt(e,t){const i=e.get("x")||0,s=e.get("y")||0;return t?t.refitX(i)+" "+t.refitX(s):i+" "+s}function pt(e,t,i){if(!i)t.iterationCount=-1;t.from=t.valueFrom,t.to=t.valueTo,e.push(t)}function mt(e,t){if(t.length)We(e,e=>t.includes(e))}const yt=(e,t,i,s,n)=>Math.round(e+(i[n]+s)*t),vt=e=>Array.isArray(e)?Xe(e,e=>e.x+","+e.y).join(" "):(null==e?void 0:e.toString())||"",St=(e,t)=>Ce(t,e?32:4),bt=(e,t)=>Ce(t,e?16:2),kt=e=>e.playable||e.animationElement&&-1!==e.duration,Tt=e=>{var t;return[e.keyTimes.slice(0),e.values.slice(0),null===(t=e.keySplines)||void 0===t?void 0:t.slice(0)]},wt=(e,t,i)=>Math.floor(Math.max(0,e-t)/i);var At=e=>class extends e{getAnimateShape(e){const t=[],i=this.animations,s=i.length;let n=0;while(n<s){const s=i[n++];if(kt(s))switch(s.attributeName){case"r":case"cx":case"cy":if(b.circle(e)){t.push(s);break}case"rx":case"ry":if(b.ellipse(e))t.push(s);break;case"x1":case"x2":case"y1":case"y2":if(b.line(e))t.push(s);break;case"points":if(b.polyline(e)||b.polygon(e))t.push(s);break;case"x":case"y":case"width":case"height":if(b.rect(e))t.push(s);break}}return t}getAnimateTransform(e){const t=[],i=this.animations,s=i.length;let n=0;while(n<s){const s=i[n++];if(K.isAnimateTransform(s)&&s.duration>0)if(t.push(s),K.asAnimateMotion(s))s.framesPerSecond=null==e?void 0:e.framesPerSecond}return t}getAnimateViewRect(e){if(!e)e=this.animations;const t=[],i=e.length;let s=0;while(s<i){const i=e[s++];if(kt(i))switch(i.attributeName){case"x":case"y":t.push(i);break}}return t}animateSequentially(e,t,i,s){var n,a,r;let l,o=18;if(s){if(s.keyTimeMode)o=s.keyTimeMode;l=s.precision}const f=this.animations;for(const s of[e,t]){const e=s===t;if(!s||0===s.length||!e&&Ce(o,8)||e&&Ce(o,64))continue;const c=[],h={},u=new Set;let g=0;const d=e=>{De(h,e.attributeName).push(e),++g};{const e=[],t=s.length;for(let i=0;i<t;++i){const n=s[i];if(n.setterType)d(n);else{const a=n.getTotalDuration();for(let r=0;r<t;++r){const t=s[r];if(i!==r&&n.attributeName===t.attributeName&&n.group.id<t.group.id&&n.fillReplace&&!t.evaluateEnd)if(t.setterType){if(n.delay===t.delay){e[i]=n;break}}else if(!t.evaluateStart&&!t.evaluateEnd)if(n.delay===t.delay&&(!t.fillReplace||-1===t.iterationCount||a<=t.getTotalDuration())||t.fillBackwards&&n.delay<=t.delay&&(t.fillForwards||n.fillReplace&&a<=t.delay)||n.animationElement&&!t.animationElement&&(n.delay>=t.delay&&a<=t.getTotalDuration()||t.fillForwards)){e[i]=n;break}}}}const i=[];let n=0;while(n<t){const t=s[n];if(e[n++])if(!t.fillReplace)t.setterType=true,d(t);else i.push(t);else if(!t.setterType)c.push(t),u.add(t.group.name)}mt(f,i)}const p=c.length;if(p+g>1||1===p&&(c[0].alternate||void 0!==c[0].end)){const t={},g={};let d=0;for(let e=0;e<p;++e){const i=c[e],s=i.group.ordering;if(s)We(s,e=>!u.has(e.name));const n=i.attributeName;let a=t[n];if(!a)a=new Map,t[n]=a,g[n]=[];const r=i.delay,l=a.get(r)||[];l.push(i),g[n].push(i),a.set(r,l)}for(const e in t){const i=new Map,s=t[e],n=Ye(Array.from(s.keys())),a=n.length;let r,l=0;while(l<a){const e=n[l++],t=s.get(e);r=0;while(r<t.length)d=Math.max(d,t[r++].getTotalDuration(true));i.set(e,t.reverse())}t[e]=i,g[e].reverse()}const m=new Me(s),y={},v=new Map,S=e?new Map:void 0,b={},k=new Set,w={},A=new Map,x=e?new Map:void 0,R={},V={},_=new Map;let E,P,M=-1;for(const s in t){const a=new Map;if(y[s]=a,!e){let e;if(i)e=i.getBaseValue(s);else if(e=this[s],void 0===e)try{this.getBaseValue(s)}catch(e){}if(Be(e))R[s]=e}const r=h[s]||[],l=[],f=[],c=[];for(const[e,i]of t[s].entries())l.push(e),f.push(i);let u,p,A,x=-1,E=0,P=1/0;const M=(t,i)=>{if(k.add(t),t.addState(16),A=t,t.fillForwards){G(E,u,t.type,t);const{name:e,ordering:i}=t.group;if(i){const s=t.getTotalDuration();for(let t=0;t<i.length;++t){const n=i[t];if(n.name===e)return true;else if(Me.getGroupEndTime(n)>=s)return false}}}else{if(t.fillFreeze)G(E,u,t.type,t);if(void 0!==i){let s=x;const n=N(E,E+1);if(void 0!==n&&t.fillReplace&&i>E&&0===c.length){if(s=nt(a,s,n),e)Qe(_,t.type,s);u=n,x=s}}F()}return false},N=(t,i)=>{var n;let l=null===(n=lt(V,s))||void 0===n?void 0:n.value;return We(r,e=>e.delay>=t&&e.delay<i,i=>{const s=i.to;if(i.animationElement)ut(c);if(0===c.length)u=s;if(G(i.delay,s,i.type,i),i.delay===t)l=e?s:je(s);else x=ot(a,i,e),E=i.delay}),l},F=(e,t)=>{if(c.length)We(c,e=>e.getTotalDuration()<=E,i=>{if(i.addState(16),i.fillForwards)if(G(i.getTotalDuration(),i.valueTo,i.type,i),void 0!==e&&void 0!==t){const s=l.length;let n=e;while(n<s){if(n!==e)t=-1;const s=f[n++],a=s.length;let r=t+1;while(r<a){const e=s[r++];if(i.group.id>e.group.id)e.addState(16)}}}})},G=(t,i,n=0,a)=>{if(!e)i=je(i);const l=lt(V,s);if(""!==i&&(!l||t>=l.time))De(V,s).push({key:n,value:i,time:t});if(a&&K.isAnimate(a)&&!a.fillReplace)if(a.fillForwards){We(r,e=>e.group.id<a.group.id||e.delay<t),c.length=0;for(let e=0;e<f.length;++e){const t=f[e];for(let e=0;e<t.length;++e){const i=t[e];if(i.group.id<a.group.id)i.addState(16)}}}else if(a.fillFreeze)ut(c)},C=(e,t,i)=>{if(p&&!e){if(void 0===i)i=T.typeAsValue(p.type);if(x=nt(a,t,i),t!==x)Qe(_,p.type,x)}p=void 0},O=g[s].find(e=>e.fillBackwards);if(O){if(u=Je(O,O.values,0,0),x=nt(a,0,u),e)Qe(_,O.type,0),p=O;let t=true;for(const e of g[s])if(e.group.id>O.group.id&&e.delay<=O.delay){t=false;break}const i=O.getTotalDuration(),n=[];for(let e=0;e<l.length;++e){const s=f[e];for(let a=0;a<s.length;++a){const o=s[a];if(t)if(o===O&&(0!==e||0!==a)){s.splice(a--,1),l.unshift(O.delay),f.unshift([O]);continue}else if(o.group.id<O.group.id&&(O.fillForwards||o.getTotalDuration()<=i)){if(o.fillForwards)o.setterType=true,r.push(o);n.push(o);continue}if(o.animationElement&&o.delay<=O.delay)s.splice(a--,1),ct(c,o)}}for(let e=0;e<l.length;++e){const t=f[e];if(n.length)for(let e=0;e<t.length;++e)if(n.includes(t[e]))t.splice(e--,1);if(0===t.length)f.splice(e,1),l.splice(e--,1)}O.addState(2)}if(!e){const e=R[s];if(!V[s]&&void 0!==e)G(0,e,0);if(void 0===u)u=(null===(n=lt(V,s))||void 0===n?void 0:n.value)||e}ft(r);{let t;if(We(r,e=>e.delay<=l[0],i=>{const n=K.isAnimate(i)&&i.fillForwards,r=i.delay;if(r<l[0]&&(!O||n))if(O&&n)G(r,i.to,i.type);else{const n=r-1;if(!t){if(!a.has(0)){const t=e&&K.isAnimateTransform(i)?T.typeAsValue(i.type):R[s];if(void 0!==t)ot(a,i,e,0,t),ot(a,i,e,n,t)}else if(!e)ot(a,i,e,n,u)}else ot(a,t,e,n);x=ot(a,i,e),E=r,t=i}}),t)ot(a,t,e,l[0]-1)}e:{const t=l.length;for(let i=0;i<t;++i){let n=f[i],h=l[i];for(let g=0;g<n.length;++g){const y=n[g];if(y.hasState(16,64)||y.hasState(4)&&y.animationElement)continue;const b=-1===y.iterationCount,k=y.duration,A=y.iterationCount;let O,B,L;if(!b){if(O=y.getTotalDuration(),O<=x){if(y.fillReplace)y.addState(64);else ct(c,y);continue}}else O=h+k;if(b)B=Math.ceil((d-h)/k),L=0;else B=Math.ceil(A),L=A-Math.floor(A);if(r.length&&E>0&&E<h)N(E,h);if(-1!==x&&x<h)x=nt(a,h-1,u),E=h;P=1/0;const I=y.group.ordering;if(I&&I.length>1){let e=true;for(let t=0;t<I.length;++t){const i=I[t];if(i.name===y.group.name){e=false;break}else if(!i.paused&&E<=i.delay&&i.attributes.includes(s))break}if(e)t:for(let e=i+1;e<t;++e){const t=f[e],i=t.length;for(let e=0;e<i;++e){const i=t[e];if(i.group.ordering){P=i.delay;break t}else if(i.getTotalDuration()<=O){if(i.fillFreeze)ft(r,i);i.addState(16)}else if(i.delay<O)ct(c,i)}}}else for(let e=i+1;e<t;++e){const t=l[e];if(t!==1/0){const i=f[e];if(i.length&&!i.every(e=>e.hasState(16,64))){P=t;break}}}const q=E;let X,z=x+1,D=Math.min(P,y.end||1/0);if(y.animationElement&&r.length){const t=Math.min(P,O,D);if(X=r.find(e=>e.delay>=E&&e.delay<=t),X){switch(X.delay){case E:if(u=X.to,G(E,u,X.type,X),X.group.id>y.group.id){if(e&&p)C(y.additiveSum,Math.max(h-1,x));x=ot(a,X,e,Math.max(X.delay,x),u),D=-1}break;case P:X.addState(32);break;default:D=X.delay,X.addState(32);break}We(r,e=>e!==X),y.addState(4)}}let W,Y=false;if(D>x){if(e){if(p)C(y.additiveSum,Math.max(h-1,x)),z=x+1;u=T.typeAsValue(y.type),G(E,u,y.type)}let r=h===1/0||(-1!==x||y.hasState(2))&&!(0===i&&0===g)||y.hasState(8);Y=true;t:{const e=lt(V,s);for(let i=wt(E,h,k);i<B;++i){const{evaluateStart:s,evaluateEnd:l}=y;let f,d,p;if(s||l){[f,d,p]=Tt(y);const e=n.length;if(s){const t=c.concat(n.slice(g+1,e)).filter(e=>!!e.animationElement&&e.delay<D);if(t.length){gt(t,E),[f,d,p]=st(m,V,R,i,y,f,d,p,u,t,true);for(let e=0;e<t.length;++e){const i=t[e];if(i.hasState(4)&&n.includes(i))ct(c,i)}}}if(l)if(y.getIntervalEndTime(E)<D&&(c.length||g<e-1)){const t=c.filter(e=>!!e.animationElement);let s=g+1;while(s<e){const e=n[s++];if(e.animationElement){if(!t.includes(e))t.push(e);ct(c,e)}}if(t.length)ht(t,E),[f,d,p]=st(m,V,R,i,y,f,d,p,u,t,false)}rt(m,V,R,y,u,f,d,p)}else({keyTimes:f,values:d,keySplines:p}=y);const b=f.length;for(let s=0;s<b;++s){const n=f[s];let l=-1,c=Je(y,d,i,s,u);if(i===B-1&&L>0)if(L===n)L=-1;else if(s===b-1)l=O,E=l,c=et(L,f[s-1],Je(y,d,i,s-1,u),n,c),L=-1;else if(L>n)for(let e=s+1;e<b;++e)if(L<=f[e]){l=O,E=l,c=et(L,n,c,f[e],Je(y,d,i,e,u)),L=-1;break}if(-1===l){if(l=yt(h,k,f,i,s),l<0||l<x)continue;if(l===D)Y=i===B-1&&s===b-1,E=l;else{const e=e=>[x,W]=tt(y,E,u,f,d,p,h,i,s,e,o,a,v,S);if(h<0&&-1===x){if(l>0)E=0,e(0)}else if(l>D){if(r&&x+1<D)e(x);E=D,e(D+(D===P&&!a.has(D-1)?-1:0)),Y=false;break t}else if(r){if(y.hasState(2))E=q;if(h>=x)l=Math.max(h,x+1),E=h;else if(l===x)E=l,l=x+1;else e(x),E=Math.max(l,x);r=false}else{if(E=l,i>0&&0===s&&y.accumulateSum){at(y,l,p,s,o,v,S),x=l;continue}l=Math.max(l,x+1)}}}if(l>x){if(s===t-1&&!y.accumulateSum&&(i<B-1||y.fillReplace&&(!e||c!==e.value)))--l;x=nt(a,l,c),at(y,x,p,s,o,v,S),W=c}if(!Y||-1===L)break t}}}F(i,g)}if(void 0!==W)if(u=W,e)Qe(_,y.type,z,x),p=y;if(X){if(X.hasState(32))W=X.to,x=ot(a,X,e,X.delay,W),E=X.delay,G(E,W,X.type,X);else if(y.hasState(64))Qe(_,x,X.type);ut(c),Y=true}if(We(r,e=>e.delay>=q&&e.delay<=E,e=>{if(G(e.delay,e.to,e.type,e),e.animationElement)ut(c)}),b)if(Y){if(!X){w[s]=y;break e}}else{c.length=0,c.push(y);continue}if(Y){if(!b&&M(y,P))break e;for(let e=i;e<t;++e)if(l[e]<E){const t=f[e];for(let e=0;e<t.length;++e){const i=t[e],s=i.getTotalDuration();if(s>E&&!i.hasState(4,16,64))ct(c,i);else if(!i.fillReplace)G(s,i.valueTo,i.type,i)}l[e]=1/0,t.length=0}if(c.length&&E<P){ht(c);const e=c.find(e=>e.delay<=E);if(e)e.removeState(4,2),e.addState(8),ut(c,e),h=e.delay,n=[e],g=-1}}else ct(c,y)}}if(c.length){ht(c);while(c.length){const t=c.shift(),{delay:i,duration:n}=t,r=x-i;let l=1/0;const f=()=>{let[f,h,g]=Tt(t);const d=wt(E,i,n);if(c.length){if(t.evaluateStart){const e=c.slice(0);gt(e,E),[f,h,g]=st(m,V,R,d,t,f,h,g,u,e,true)}if(t.evaluateEnd&&t.getIntervalEndTime(E)<l)[f,h,g]=st(m,V,R,d,t,f,h,g,u,c,false)}rt(m,V,R,t,u,f,h,g);const p=x+1;let b=Math.floor(r/n),k=false;const T=(e,n)=>tt(t,E,u,f,h,g,i,b,e,n,o,y[s],v,S);do{const e=f.length;for(let s=0;s<e;++s){let r=yt(i,n,f,b,s);if(!k&&r>=x)[x,u]=T(s,x),k=true;if(k)if(r>=l){if(l>x){const e=t.fillReplace||-1===t.iterationCount;if([x,u]=T(s,l-(e?1:0)),e)u=Je(t,h,b,0,u),x=nt(a,l,u);E=l}}else if(r>x){if(E=r,s===e-1&&r<l)--r;u=Je(t,h,b,s,u),x=nt(a,r,u),at(t,x,g,s,o,v,S)}}}while(x<l&&++b);if(e)Qe(_,t.type,p,x)};if(-1===t.iterationCount){if(r>0&&r%t.duration!=0)l=i+t.duration*Math.ceil(r/n),f();w[s]=t;break e}else if(l=Math.min(i+t.duration*t.iterationCount,t.end||1/0),l>x)if(f(),M(t))break e}}if((null==A?void 0:A.fillReplace)&&void 0===w[s]){let t,i=0;if(V[s]){const e=lt(V,s);if(e)({key:i,value:t}=e)}else if(e)i=Array.from(_.values()).pop(),t=T.typeAsValue(i);else t=R[s];if(void 0!==t&&!Le(a.get(x),t))if(x=nt(a,x,t),e)Qe(_,i,x)}}b[s]=x}{const t=new Set;let s=0;for(const e in y){let i=0;for(const s of y[e].keys())t.add(s),i=s;s=Math.max(s,i),null===(a=V[e])||void 0===a||a.sort((e,t)=>{if(e.time===t.time)return 0;else return e.time<t.time?-1:1})}if(Oe(w)){const e=[],i=[];for(const t in w){const s=w[t];e.push(s.delay),i.push(s.duration)}const n=e[0];if(0===k.size&&1===new Set(e).size&&1===new Set(i).size&&n===t.values().next().value)M=n;else if(i.length>1&&i.every(e=>e%250==0))s=Ge(i,s,e);else{const e=i[0];if((s-n)%e!=0)s=e*Math.ceil(s/e)}}if(-1===M)for(const i in y){const n=w[i];if(n){let a=b[i];if(a<s){const r=y[i],l=n.delay,f=a+1;let c=Array.from(r.values()).pop(),h=Math.floor((a-l)/n.duration);const[u,g,d]=Tt(n);rt(m,V,R,n,c,u,g,d);const p=u.length;do{let e=false;for(let i=0;i<p;++i){let f=yt(l,n.duration,u,h,i);if(!e&&f>=a)[a,c]=tt(n,a,c,u,g,d,l,h,i,a,o,r,v,S),t.add(a),e=true;if(e&&f>a){if(i===p-1&&f<s)--f;c=Je(n,g,h,i,c),a=nt(r,f,c),at(n,f,d,i,o,v,S),t.add(a)}}}while(a<s&&++h);if(b[i]=a,e)Qe(_,n.type,f,a)}}}const n=Ye(Array.from(t));if(i||e){let e=false;for(const t in y){const i=y[t];if(!i.has(0)){const s=R[t];if(void 0!==s){const t=i.keys().next().value-1;if(i.set(0,s),i.set(t,s),!n.includes(0))n.push(0),e=true;if(!n.includes(t))n.push(t),e=true}}}if(e)Ye(n)}if(!e)for(const t in y){const i=y[t],s=i.keys().next().value,a=i.values().next().value,r=n.length;let l=0;while(l<r){const r=n[l++];if(r<=b[t]){if(!i.has(r)){if(m.paused(t,r))if(r<s)i.set(r,a);else{let e=m.get(t,r);if(void 0!==e)if(e=je(e,true),""!==e){i.set(r,e);continue}}$e(i,t,r,m,e)}}else break}}E=Ze(y,n,V)}if(-1===M&&Oe(w)){const t={},i=[],s=[],n=[];for(const e in w){const t=w[e];n.push(t.duration),i.push(t)}const a=Ge(n);for(let e=0;e<i.length;++e){const n=i[e],l=n.attributeName;t[l]=new Map;let f=null!==(r=y[l].get(b[l]))&&void 0!==r?r:R[l];const[c,h,u]=Tt(n);rt(m,V,R,n,f,c,h,u);let g=0;const d=c.length;let p=0;do{for(let e=0;e<d;++e){let i=yt(0,n.duration,c,p,e);if(e===c.length-1&&i<a)--i;if(f=Je(n,h,p,e,f),g=nt(t[l],i,f),at(n,g,u,e,o,A,x),!s.includes(g))s.push(g)}}while(g<a&&++p)}if(i.every(e=>e.alternate)){let e=-1;for(const i in w){const n=t[i],r=Array.from(n.keys()),l=Array.from(n.values()).reverse(),o=r.length;for(let t=0;t<o;++t){const i=r[t];if(0!==i){e=a+i;const r=A.get(i);if(r)A.set(e,r);if(e=nt(n,e,l[t]),!s.includes(e))s.push(e)}}}}Ye(s);for(const i in t){const n=t[i];for(let t=0;t<s.length;++t){const a=s[t];if(!n.has(a))$e(n,i,a,m,e)}}P=Ze(t,s,V)}if(E||P){mt(f,c);const t=Array.from(_.entries()),s=qe(c,e=>K.isAnimateTransform(e)?T.typeAsName(e.type):e.attributeName,"-",false),n=this.parent;for(const a of[E,P])if(a){const r=a===E,c=r?v:A,h=r?S:x;if(St(e,o)){const s=[];if(e){const e=[];if(r){const i=Array.from(a.entries());let s=t[0][1];const n=t.length,r=i.length;for(let a=0,l=0,o=0;a<n;++a){const f=a<n-1?t[a+1][1]:-1;if(s!==f){const n=new Map;for(let e=o;e<r;++e){const r=i[e][0];if(r>=t[l][0]&&r<=t[a][0])n.set(r,new Map([[s,i[e][1].values().next().value]])),o=e;else if(r>t[a][0])break}e.push(n),s=f,l=a+1}}}else if(w.transform){const t=new Map;for(const[e,i]of a.entries())t.set(e,new Map([[w.transform.type,i.values().next().value]]));e.push(t)}else continue;let i=0;const n=e.length;for(let t=0;t<n;++t){const a=Array.from(e[t].entries()),l=a[0];let o=l[0];const u=l[1];if(1===a.length)if(t<n-1)a.push([e[t+1].keys().next().value,u]);else a.push([o+1,u]);const g=a.length,d=a[g-1][0];let p=d-o;const m=new SvgAnimateTransform;m.type=u.keys().next().value;for(let e=0;e<g;++e){const t=a[e];if(s.push(c.get(t[0])||""),m.type!==SVGTransform.SVG_TRANSFORM_ROTATE){const i=h.get(t[0]);if(i)De(m,"transformOrigin")[e]=i}t[0]-=o}for(const[e,t]of Ue(a))m.keyTimes.push(e),m.values.push(t.values().next().value);if(o-=i,o>1)m.delay=o;else if(1===o&&(p+1)%10==0)++p;m.duration=p,m.keySplines=s,m.synchronized={key:t,value:""},i=d,pt(f,m,r)}}else{const e=Array.from(a.entries()),t=-1!==M?M:0;let o;for(let i=0;i<e.length;++i){const n=e[i];s.push(c.get(n[0])||""),n[0]-=t}if(i){const t=He(Ue(e),i,n,V,l);if(t){o=new Ae,o.attributeName="d";const e=t.length;let i=0;while(i<e){const e=t[i++];o.keyTimes.push(e.key),o.values.push(e.value.toString())}}else continue}else{const e=new SvgAnimateTransform;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;for(const[t,i]of a.entries()){const s=i.get("x")||0,a=i.get("y")||0;e.keyTimes.push(t),e.values.push(n?n.refitX(s)+" "+n.refitX(a):s+" "+a)}o=e}o.delay=t,o.keySplines=s,o.duration=e[e.length-1][0],pt(f,o,r)}}else if(bt(e,o)){const o=Array.from(a.entries()),u=o.length-1;for(let a=0;a<u;++a){const[u,g]=o[a],[d,p]=o[a+1];let m,y=s;if(e){const e=new SvgAnimateTransform;if(r){const i=t.length-1;for(let s=0;s<i;++s){const i=t[s],n=t[s+1];if(i[1]===n[1]&&u>=i[0]&&d<=n[0]){e.type=i[1];break}else if(d-u==1&&d===n[0]){e.type=n[1];break}}}else if(w.transform)e.type=w.transform.type;if(0===e.type)continue;e.values=[g.values().next().value,p.values().next().value];const i=h.get(d);if(i)e.transformOrigin=[i];m=e}else if(i){const e=He([[u,g],[d,p]],i,n,V,l);if(e)m=new Ae,m.attributeName="d",m.values=ze(e,e=>e.value.toString());else continue}else{const e=new SvgAnimateTransform;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,e.values=[dt(g,n),dt(p,n)],y+=a,m=e}if(r)m.delay=0===a?u:0;m.duration=d-u,m.keyTimes=[0,1],m.synchronized={key:a,value:y};const v=c.get(d);if(v)m.keySplines=[v];pt(f,m,r)}}}}}}}};const{isPercent:xt,parseAngle:Rt}=squared.lib.css,{getNamedItem:Vt}=squared.lib.dom,{truncateFraction:_t}=squared.lib.math,{isEqual:Et,isNumber:Pt,isString:Mt,iterateArray:Nt,plainMap:Ft}=squared.lib.util,Gt=(e,t,i,s)=>!!e&&e.key===t&&e.rotate===s&&Et(e.value,i);class SvgAnimateMotion extends SvgAnimateTransform{constructor(e,t){if(super(e,t),this.path="",this.distance="0%",this.rotate="auto 0deg",this.motionPathElement=null,this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this._offsetLength=0,this._keyPoints=[],t){this.setAttribute("path");const e=Vt(t,"rotate");switch(e){case"auto":break;case"auto-reverse":this.rotate="auto 180deg";break;default:if(Pt(e))this.rotate=parseFloat(e)+"deg";break}Nt(t.children,e=>{if("mpath"===e.tagName){let t=V(e);if(t){if(b.use(t))t=V(t);if(t&&b.shape(t))return this.motionPathElement=t,true}}}),this.setCalcMode()}else if(e){const t=/path\("([^"]+)"\)/.exec(x(e,"offset-path"));if(t)this.path=t[1];const i=x(e,"offset-distance");if(""!==i)this.distance=i;const s=x(e,"offset-rotate");if(""!==s&&"auto"!==s)this.rotate=s}}setCalcMode(){const e=this.animationElement;if(e){const t=Vt(e,"calcMode")||"paced";switch(t){case"paced":case"discrete":case"spline":super.setCalcMode("translate",t);break;case"linear":{const t=SvgAnimateTransform.toFractionList(Vt(e,"keyPoints"),";",false);let i=super.keyTimes;if(0===i.length&&-1!==this.duration)i=SvgAnimateTransform.toFractionList(Vt(e,"keyTimes")),this.length=0,super.keyTimes=i;if(t.length===i.length)this._keyPoints=t;break}}}}addKeyPoint(e){if(void 0===this._offsetPath){const t=e.key;if(t>=0&&t<=1){const i=super.keyTimes,s=this._keyPoints;if(i.length===s.length){const n=e.value;let a=NaN;if(xt(n))a=parseFloat(n)/100;else if(Pt(n))a=parseFloat(n)/this.offsetLength;if(!isNaN(a)){a=Math.min(a,1);const n=i.findIndex(e=>e===t);if(-1!==n)i[n]=e.key,s[n]=a;else i.push(e.key),s.push(a)}}}}}setOffsetPath(){if(void 0===this._offsetPath&&Mt(this.path)){const{duration:e,rotateData:t}=this;let i=K.getOffsetPath(this.path,this.rotate),s=i.length;if(s>0){let n=1;if(e>=s){n=e/s;const t=s-1;let a=1;while(a<t)i[a++].key*=n;i[t].key=e}else if(e>0){const t=new Array(e),n=s/e;let a,r=0;while(r<e)a=i[Math.floor(r*n)],a.key=r,t[r++]=a;const l=i.pop();if(a.value!==l.value)l.key=e,t.push(l);i=t,s=t.length}const{framesPerSecond:a,keyPoints:r}=this,l=a?1e3/a:0;if(r.length){const t=s-1,a=super.keyTimes,o=[];if(r.length>1){let s;const f=a.length-1;for(let c=0;c<f;++c){const f=a[c],h=_t(f*e),u=_t((a[c+1]-f)*e),g=r[c],d=r[c+1];if(0===u){const e=h,{value:n,rotate:a}=i[Math.floor(d*t)];if(!Gt(s,e,n,a))s={key:e,value:n,rotate:a},o.push(s)}else{let e=0,a=h;if(g===d){const{value:r,rotate:f}=i[Math.floor(g*t)];if(Gt(s,h,r,f))e+=n,a+=l;for(;e<u;e+=n){const t=h+e;if(t>=a)if(o.push({key:t,value:r,rotate:f}),e<u-1)a+=l;else a=0}}else{const n=Math.floor(Math.min(g,d)*t),r=Math.floor(Math.max(g,d)*t),f=[];let c=n;while(c<=r)f.push(i[c++]);if(g>d)f.reverse();const p=f.length,m=u/p,y=f[0];if(Gt(s,h,y.value,y.rotate))++e,a+=l;for(;e<p;++e){const t=h+e*m;if(t>=a){const i=f[e];if(i.key=t,o.push(i),e<p-1)a+=l;else a=0}}}o[o.length-1].key=h+u}}}else if(o.push(i[Math.floor(r[0]*t)]),0===a[0])o[0].rotate=0;this._offsetPath=o}else if(l>0){const e=[];for(let t=0;t<s;t+=l)e.push(i[Math.floor(t)]);const t=i.pop();if(e[e.length-1]!==t)e.push(t);this._offsetPath=e}else this._offsetPath=i;if(t){i=this._offsetPath;const s=t.length-1;for(let n=0,a=0;n<s;++n){const s=t[n],r=t[n+1],l=r.key,o=[];if(s.key===l)o.push(i[a++]);else{const t=Math.floor(_t(l*e));do{const e=i[a];if((null==e?void 0:e.key)<=t)o.push(e);else break}while(++a)}const f=s.value,c=r.value,h=Rt(f.split(" ").pop()),u=Rt(c.split(" ").pop());if(isNaN(h)||isNaN(u))continue;const g=f.startsWith("auto");if(f===c||h===u){const e=o.length;if(g){if(0!==h){let t=0;while(t<e)o[t++].rotate+=h}}else{let t=0;while(t<e)o[t++].rotate=h}}else{const e=u-h,t=o.length-1,i=e/t;let s=0;if(g){while(s<t)o[s].rotate+=h+s++*i;o[t].rotate+=h+e}else{while(s<t)o[s].rotate=h+s++*i;o[t].rotate=h+e}}}}this.keySplines=void 0,this.timingFunction=oe.linear}}}reverseKeyPoints(){let e,t;if(this.validKeyPoints())t=this._keyPoints.slice(0).reverse(),e=Ft(super.keyTimes,e=>1-e).reverse();return{keyTimes:e,keyPoints:t}}validKeyPoints(){const e=this.keyPoints;return e.length>0&&e.length===super.keyTimes.length}set keyTimes(e){if(!Mt(this.path))super.keyTimes=e}get keyTimes(){this.setOffsetPath();const e=this._offsetPath;if(e){const t=this.duration;return Ft(e,e=>e.key/t)}return super.keyTimes}set values(e){if(!Mt(this.path))super.values=e}get values(){this.setOffsetPath();const e=this._offsetPath;if(e)return Ft(e,e=>{const{x:t,y:i}=e.value;return`${t} ${i}`});else return super.values}set reverse(e){if(e!==super.reverse){const{keyTimes:t,keyPoints:i}=this.reverseKeyPoints();if(t&&i)this.length=0,this._keyPoints=i,super.keyTimes=t,super.reverse=e}}get reverse(){return super.reverse}set alternate(e){const t=this.iterationCount;if(e!==super.alternate&&(-1===t||t>1)){const{keyTimes:i,keyPoints:s}=this.reverseKeyPoints();if(i&&s){let n=super.keyTimes,a=this.keyPoints;const r=n.length;if(-1===t){let e=0;while(e<r)n[e]/=2,i[e]=.5+i[e++]/2;n=n.concat(i),a=a.concat(s),this.duration=2*this.duration}else{const e=n.slice(0),l=a.slice(0);let o;for(let f=0;f<t;++f)if(0===f){o=0;while(o<r)n[o++]/=t}else{const c=f*(1/t),h=f%2==0?e.slice(0):i.slice(0);o=0;while(o<r)h[o]=_t(c+h[o++]/t);n=n.concat(h),a=a.concat(f%2==0?l:s)}this.duration=this.duration*t,this.iterationCount=1}this._keyTimes=n,this._keyPoints=a,super.alternate=e}}}get alternate(){return super.alternate}set parent(e){super.parent=e;const t=this.parentContainer;if(null==t?void 0:t.requireRefit){const e=this.path;if(e)this.path=K.transformRefit(e,void 0,void 0,t)}}get parent(){return super.parent}get offsetPath(){return this._offsetPath}get playable(){return!this.paused&&-1!==this.duration&&Mt(this.path)}get rotateValues(){this.setOffsetPath();const e=this._offsetPath;return e&&Ft(e,e=>e.rotate)}get keyPoints(){return this._keyPoints}get offsetLength(){let e=this._offsetLength;if(0===e){const t=this.path;if(t)e=P(t)}return e}get instanceType(){return 114696}}const{getFontSize:Ct,getKeyframesRules:Ot,isAngle:Bt,isCustomProperty:Lt,hasCalc:It,parseAngle:qt,parseVar:Xt}=squared.lib.css,{isWinEdge:zt}=squared.lib.client,{getNamedItem:Dt}=squared.lib.dom,{isString:Wt,iterateArray:Yt,replaceMap:$t,safeNestedArray:Ut,sortNumber:jt}=squared.lib.util,Kt={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},Ht=Ot(),Zt=new RegExp(`(ease|ease-in|ease-out|ease-in-out|linear|step-(?:start|end)|steps\\(\\d+,\\s+(?:start|end)\\)|${fe}),?\\s*`,"g");function Qt(e,t){const i=x(e,t);if("animation-timing-function"===t){Zt.lastIndex=0;const e=[];let t;while(t=Zt.exec(i))e.push(t[1]);return e}return i.split(/\s*,\s*/)}function Jt(e){return e.sort((e,t)=>{if(e.key!==t.key)return e.key<t.key?-1:1;else return 0})}function ei(e){if("reverse"===e)return"auto 180deg";else if(/^reverse\s+/.test(e)){const t=e.split(" ")[1];return"auto "+(Bt(t)?180+qt(t,0):"0")+"deg"}return e}function ti(e,t,i){var s;const n=null===(s=e["transform-origin"])||void 0===s?void 0:s.find(e=>e.key===i);return n?T.origin(t,n.value):void 0}var ii=e=>class extends e{getTransforms(e){if(!e)e=this.element;return K.filterTransforms(T.parse(e)||K.convertTransforms(e.transform.baseVal))}getAnimations(e){var t,i;const s=[];if(!zt()){if(!e)e=this.element;let n=0;const a=(e,t,i="")=>{if(""===i)++n;e.delay=t,e.group={id:n,name:i},e.parent=this,s.push(e)};Yt(e.children,t=>{var i,s;if(t instanceof SVGAnimationElement){const n=Dt(t,"begin");if(/^[a-zA-Z]+$/.test(n))return;const r=""!==n?jt($t(n.split(";"),e=>SvgAnimation.convertClockTime(e))):[0];if(r.length)switch(t.tagName){case"set":for(let i=0;i<r.length;++i)a(new SvgAnimation(e,t),r[i]);break;case"animate":for(let i=0;i<r.length;++i)a(new Ae(e,t),r[i]);break;case"animateTransform":for(let s=0;s<r.length;++s){const n=new SvgAnimateTransform(e,t);if(K.isShape(this)&&this.path)n.transformFrom=K.drawRefit(e,this.parent,null===(i=this.viewport)||void 0===i?void 0:i.precision);a(n,r[s])}break;case"animateMotion":for(let i=0;i<r.length;++i){const n=new SvgAnimateMotion(e,t),l=n.motionPathElement;if(l)n.path=K.drawRefit(l,this.parent,null===(s=this.viewport)||void 0===s?void 0:s.precision);a(n,r[i])}break}}});const r=Qt(e,"animation-name"),l=r.length;if(l){const s={},o=[],f=[];for(const t in Kt){let i=Qt(e,t);if(0===i.length)i.push(Kt[t]);while(i.length<l)i=i.concat(i.slice(0));i.length=l,s[t]=i}for(let c=0;c<l;++c){const l=Ht[r[c]],h=SvgAnimation.convertClockTime(s["animation-duration"][c]);if(l&&h>0){++n;const u={},g={},d="paused"===s["animation-play-state"][c],p=SvgAnimation.convertClockTime(s["animation-delay"][c]),m=s["animation-iteration-count"][c],y=s["animation-fill-mode"][c],v=r[c]+"_"+c,S=[];let b=true;f.push({name:v,attributes:S,paused:d,delay:p,duration:h,iterationCount:m,fillMode:y});for(const t in l){const i=parseFloat(t)/100,s=l[t];for(const t in s){let n=s[t];if(It(n))n=A(e,t,n);else if(Lt(n))n=Xt(e,n);if(n)Ut(Kt[t]?g:u,t).push({key:i,value:n})}}if(u.transform){const i=Jt(u.transform),s=i.length;let n=0;while(n<s){const s=i[n++],a=s.key,r=ti(u,e,a);null===(t=T.parse(e,s.value))||void 0===t||t.forEach(e=>{const t=e.matrix;let i,s,n;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:i="translate",s=t.e+" "+t.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(i="scale",s=t.a+" "+t.d+" "+(r?r.x+" "+r.y:"0 0"),r&&(0!==a||0!==r.x||0!==r.y))n={x:r.x*(1-t.a),y:r.y*(1-t.d)};break;case SVGTransform.SVG_TRANSFORM_ROTATE:i="rotate",s=e.angle+" "+(r?r.x+" "+r.y:"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:if(i="skewX",s=e.angle.toString(),r&&(0!==a||0!==r.y))n={x:r.y*t.c*-1,y:0};break;case SVGTransform.SVG_TRANSFORM_SKEWY:if(i="skewY",s=e.angle.toString(),r&&(0!==a||0!==r.x))n={x:0,y:r.x*t.b*-1};break;default:return}const l=Ut(u,i),o=l.findIndex(e=>e.key===a);if(-1!==o){const e=l[o];e.value=s,e.transformOrigin=n}else l.push({key:a,value:s,transformOrigin:n})})}delete u.transform,delete u["transform-origin"]}if("none"===x(e,"offset-path"))delete u["offset-distance"],delete u["offset-rotate"];else if(u["offset-rotate"]){const t=u["offset-rotate"];if(u["offset-distance"]||!u.rotate){let i=x(e,"offset-rotate");if(""===i||"auto"===i)i="auto 0deg";Jt(t);const s=t[0],n=t[t.length-1];if(0!==s.key)t.unshift({key:0,value:i});if(1!==n.key)t.push({key:1,value:i});for(let e=1;e<t.length;++e){const i=t[e-1],s=t[e],n=ei(i.value),a=ei(s.value);if(i.value=n,s.value=a,n.split(" ").pop()!==a.split(" ").pop()){const r=n.startsWith("auto"),l=a.startsWith("auto");if(r&&!l||!r&&l){const r=(i.key+s.key)/2;t.splice(e++,0,{key:r,value:n}),t.splice(e++,0,{key:r,value:a})}}}if(!u["offset-distance"]){const i=new SvgAnimateMotion(e);i.duration=0,i.iterationCount=1,i.fillForwards=true,i.addKeyPoint({key:0,value:i.distance}),a(i,p,v);const s=t.length;let n=0;while(n<s){const e=t[n++],i=e.value;let s=qt(i.split(" ").pop(),0);if(i.startsWith("auto"))s+=90;e.value=s+" 0 0"}u.rotate=t,delete u["offset-rotate"],b=false}}else delete u["offset-rotate"]}for(const t in u){let n;switch(t){case"offset-rotate":continue;case"offset-distance":n=new SvgAnimateMotion(e),n.rotateData=u["offset-rotate"];break;case"rotate":case"scale":case"skewX":case"skewY":case"translate":n=new SvgAnimateTransform(e),n.setType(t);break;default:n=new Ae(e),n.attributeName=t;break}a(n,p,v);const r=u[t],l=s["animation-direction"][c],f=s["animation-timing-function"][c];if(Jt(r),"offset-distance"===t){const e=n;if(0!==r[0].key)e.addKeyPoint({key:0,value:e.distance});for(let t=0;t<r.length;++t)e.addKeyPoint(r[t]);if(1!==r.pop().key)e.addKeyPoint({key:1,value:e.distance});if(Wt(f))e.timingFunction=f}else{S.push(t);const s=[];let a=r.length;const l=new Array(a),o=new Array(a);for(let e=0;e<a;++e){const t=r[e],{key:c,value:h}=t;if(l[e]=c,o[e]=h,b&&e<a-1){const e=null===(i=g["animation-timing-function"])||void 0===i?void 0:i.find(e=>e.key===c);s.push((null==e?void 0:e.value)||f)}const u=t.transformOrigin;if(u&&K.asAnimateTransform(n))Ut(n,"transformOrigin")[e]=u}if(b&&!s.every(e=>"linear"===e)){const i=[],r=[],f=[];a=l.length;for(let n=0;n<a;++n){const c=l[n],u=o[n];if(n<a-1){const a=s[n];if(""!==u&&a.startsWith("step")){const s=Ae.convertStepTimingFunction(t,a,l,o,n,Ct(e));if(s){const[e,t]=s,o=(l[n+1]-c)*h,u=e.length-(1===l[n+1]?1:0);let g=0;while(g<u){let s=(c+e[g]*o)/h;if(i.includes(s))s+=.001;i.push(s),r.push(t[g++]),f.push(oe[a.includes("start")?"step-start":"step-end"])}continue}}f.push(Ae.convertTimingFunction(a))}i.push(c),r.push(u)}n.values=r,n.keyTimes=i,n.keySplines=f}else if(n.values=o,n.keyTimes=l,b)n.keySplines=s;else n.timingFunction=f}n.paused=d,n.duration=h,n.iterationCount="infinite"!==m?parseFloat(m):-1,n.fillForwards="forwards"===y||"both"===y,n.fillBackwards="backwards"===y||"both"===y,n.reverse=l.endsWith("reverse"),n.alternate=(-1===n.iterationCount||n.iterationCount>1)&&l.startsWith("alternate"),o.push(n)}}}f.reverse();for(let e=0;e<o.length;++e)o[e].setGroupOrdering(f)}}return s}set name(e){this._name=e}get name(){let e=this._name;if(void 0===e)e=K.setName(this.element),this._name=e;return e}get transforms(){let e=this._transforms;if(void 0===e)e=this.getTransforms(),this._transforms=e;return e}get animations(){let e=this._animations;if(void 0===e)e=this.getAnimations(),this._animations=e;return e}get visible(){const e=x(this.element,"visibility");return"hidden"!==e&&"collapse"!==e&&"none"!==x(this.element,"display")}get opacity(){return x(this.element,"opacity")||"1"}};const{USER_AGENT:si,isUserAgent:ni}=squared.lib.client;function ai(e){if("svg"===e.tagName)if(ni(8))return e.parentElement instanceof HTMLElement;else if(ni(4))return!(e.parentElement instanceof HTMLElement);return false}var ri=e=>class extends e{setRect(){const e=this.parent;let{x:t,y:i,width:s,height:n}=this;if(e)t=e.refitX(t),i=e.refitY(i),s=e.refitSize(s),n=e.refitSize(n);this.setBaseValue("x",t),this.setBaseValue("y",i),this.setBaseValue("width",s),this.setBaseValue("height",n)}getRectElement(){const e=this.element;switch(e.tagName){case"svg":case"use":case"image":return e;default:return null}}set x(e){this._x=e}get x(){var e,t;return null!==(e=this._x)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.x.baseVal.value)||0}set y(e){this._y=e}get y(){var e,t;return null!==(e=this._y)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.y.baseVal.value)||0}set width(e){this._width=e}get width(){const e=this._width;if(void 0!==e)return e;else{const e=this.getRectElement();if(e)return ai(e)?e.getBoundingClientRect().width:e.width.baseVal.value;else return 0}}set height(e){this._height=e}get height(){const e=this._height;if(void 0!==e)return e;else{const e=this.getRectElement();if(e)return ai(e)?e.getBoundingClientRect().height:e.height.baseVal.value;else return 0}}};const{STRING:li}=squared.lib.regex,{extractURL:oi}=squared.lib.css,{cloneObject:fi,iterateArray:ci}=squared.lib.util,hi=new RegExp(li.LENGTH_PERCENTAGE);function ui(e,t){const i=oi(R(e,"fill"));if(""!==i){if(t){const e=t.definitions.pattern.get(i);if(e)return e}const e=document.getElementById(i.substring(1));if(e instanceof SVGPatternElement)return e}}function gi(e,t,i,s){if(e){const n=t.aspectRatio,a=e.aspectRatio;if(i&&s){fi(i,n);const{width:t,height:r}=n;if(t>0&&r>0){const i=t/r,l=a.width||e.viewBox.width,o=a.height||e.viewBox.height,f=l/o,c=l/t,h=o/r,u=x(s,"width"),g=x(s,"height");let d,p;if(b.svg(s))d=s.width.baseVal.value,p=s.height.baseVal.value;else d=parseFloat(u),p=parseFloat(g);const m=pi(u),y=pi(g),v=d/t,S=p/r;let k=m&&y;if(d>=t&&p>=r)n.unit=Math.min(v,S),k=false;else if(c!==h)n.unit=Math.min(c,h);if(m||y){if(!isNaN(d)&&!isNaN(p)){const{align:e,meetOrSlice:i}=s.preserveAspectRatio.baseVal;if(v===S){if(k)n.unit*=v;if(n.align=SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,t>r)n.alignX=true;else n.alignY=true}else{switch(i){case SVGPreserveAspectRatio.SVG_MEETORSLICE_MEET:if(S<v){if(k)if(r>=t&&r>=o)n.unit=S;else n.unit*=S;n.alignX=true}else{if(k)if(t>=r&&t>=l)n.unit=v;else n.unit*=v;n.alignY=true}break;case SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE:if(S>v){if(k)if(r>=t&&r>=o)n.unit=S;else n.unit*=S;n.alignX=true,n.alignY=r>o}else{if(k)if(t>=r&&t>=l)n.unit=v;else n.unit*=v;n.alignX=t>l,n.alignY=true}break}n.align=e}n.meetOrSlice=i}}else if(f>i)n.position.x=(l-o*i)/2;else if(f<i)n.position.y=(o-l*(1/i))/2}}const{parent:r,position:l,unit:o,x:f,y:c}=a;n.parent.x=f+f*(o-1),n.position.x*=a.unit,n.position.x+=l.x-r.x,n.parent.y=c+c*(o-1),n.position.y*=o,n.position.y+=l.y-r.y,n.unit*=o}}const di=e=>e.viewport||K.asSvg(e)&&e||void 0,pi=e=>hi.test(e);class SvgContainer extends squared.lib.base.Container{constructor(e){super(),this.element=e,this.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1,meetOrSlice:SVGPreserveAspectRatio.SVG_MEETORSLICE_UNKNOWN,align:SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,alignX:false,alignY:false},this._clipRegion=[]}add(e,t){return e.parent=this,e.viewport=t||di(this),super.add(e)}build(e){let t,i;if(e)t=e.symbolElement||e.patternElement||e.element||this.element,i=e.precision,e=Object.assign(Object.assign({},e),{symbolElement:void 0,patternElement:void 0,element:void 0});else t=this.element;const s=false!==(null==e?void 0:e.initialize),n=di(this),a=function(e){while(e){if(e.hasViewBox())return e;e=e.parent}}(this),r=this.aspectRatio;let l=false;if(this.clear(),ci(t.children,t=>{let i;if(b.svg(t))i=new squared.svg.Svg(t,false),gi(a,i,t.viewBox.baseVal,t),l=true;else if(b.g(t))i=new squared.svg.SvgG(t),gi(a,i);else if(b.use(t)){const e=V(t);if(e)if(b.symbol(e))i=new squared.svg.SvgUseSymbol(t,e),gi(a,i,e.viewBox.baseVal,e),l=true;else if(b.image(e))i=new squared.svg.SvgImage(t,e);else if(b.shape(e)){const r=ui(t,n);if(r)i=new squared.svg.SvgUsePattern(t,e,r),gi(a,i);else i=new squared.svg.SvgUse(t,e,s)}}else if(b.image(t))i=new squared.svg.SvgImage(t);else if(b.shape(t)){const e=ui(t,n);if(e)i=new squared.svg.SvgShapePattern(t,e),gi(a,i);else i=new squared.svg.SvgShape(t,s)}if(i)this.add(i,n),i.build(e)}),K.asSvg(this)&&(this.documentRoot||r.meetOrSlice))if(this.documentRoot){const{x:e,y:t}=r;if(e<0||t<0)this.clipViewBox(e,t,r.width,r.height,i,true)}else{const{x:e,y:t}=this.parent.aspectRatio;this.clipViewBox(e,t,this.width+e,this.height+t,i,true)}else if(l&&this.hasViewBox()&&(0!==r.x||0!==r.y)){const{left:e,top:t}=K.getBoxRect(this.getPathAll(false)),s=this.refitX(r.x),n=this.refitY(r.y);if(e<s||t<n)this.clipViewBox(e,t,this.refitSize(r.width),this.refitSize(r.height),i)}}hasViewBox(){return K.asSvg(this)&&!!this.element.viewBox.baseVal||K.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}clipViewBox(e,t,i,s,n,a=false){if(a)if(i-=e,s-=t,K.asSvg(this)&&this.documentRoot)e=e<0?-1*e:0,t=t<0?-1*t:0;else e*=-1,t*=-1;this.clipRegion=K.drawRect(i,s,e,t,n)}synchronize(e){this.each(t=>t.synchronize(e))}refitX(e){const t=this.aspectRatio;return(e-t.x)*t.unit-t.parent.x+t.position.x}refitY(e){const t=this.aspectRatio;return(e-t.y)*t.unit-t.parent.y+t.position.y}refitSize(e){return e*this.aspectRatio.unit}refitPoints(e){const{unit:t,meetOrSlice:i}=this.aspectRatio,s=e.length;let n=0;while(n<s){const i=e[n++];if(i.x=this.refitX(i.x),i.y=this.refitY(i.y),void 0!==i.rx&&void 0!==i.ry)i.rx*=t,i.ry*=t}if(i&&K.asSvg(this)){const{align:t,alignX:i,alignY:a,parent:r}=this.aspectRatio,{width:l,height:o}=this,[f,c,h,u]=K.minMaxPoints(e,true);let g=0,d=0;if(i)g=-1*r.x;if(a)d=-1*r.y;let p=g,m=d;const y=()=>l/2-(h+f)/2,v=()=>l-f-h+g,S=()=>o/2-(c+u)/2,b=()=>o-c-u+d;switch(t){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:if(i)p-=g;if(a)m-=d;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:if(i)p-=g;if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:if(i)p-=g;if(a)m+=b();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:if(i)p+=y();if(a)m-=d;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_NONE:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:if(i)p+=y();if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:if(i)p+=y();if(a)m+=b();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:if(i)p+=v();if(a)m-=d;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:if(i)p+=v();if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:if(i)p+=v();if(a)m+=b();break}n=0;while(n<s){const t=e[n++];t.x+=p,t.y+=m}}return e}getPathAll(e=true){var t;const i=[];for(const s of e?this.cascade():this.children)if(K.isShape(s)){const e=null===(t=s.path)||void 0===t?void 0:t.value;if(e)i.push(e)}return i}set clipRegion(e){if(""!==e)this._clipRegion.push(e);else this._clipRegion.length=0}get clipRegion(){return this._clipRegion.join(";")}get requireRefit(){const e=this.aspectRatio;return 0!==e.x||0!==e.y||1!==e.unit||0!==e.position.x||0!==e.position.y||0!==e.parent.x||0!==e.parent.y}get instanceType(){return 2}}const{parseColor:mi}=squared.lib.color,{getNamedItem:yi}=squared.lib.dom,{cloneObject:vi}=squared.lib.util;function Si(e){const t=[],i=e.getElementsByTagName("stop"),s=i.length;let n=0;while(n<s){const e=i[n++],s=mi(yi(e,"stop-color"),parseFloat(yi(e,"stop-opacity")||"1"));if(s)t.push({color:s,offset:parseFloat(yi(e,"offset"))/100})}return t}function bi(e,...t){const i={};for(let s=0;s<t.length;++s){const n=t[s],a=e[n];if(a){const{value:e,valueAsString:t}=a.baseVal;i[n]=e,i[n+"AsString"]=t}}return i}class Svg extends(At(ri(Q(ii(SvgContainer))))){constructor(e,t=true){super(e),this.element=e,this.documentRoot=t,this.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},this.init()}build(e){this.precision=null==e?void 0:e.precision,this.setRect(),super.build(e)}synchronize(e){if(!this.documentRoot&&this.animations.length)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}init(){const e=this.element;if(this.documentRoot)vi(e.viewBox.baseVal,this.aspectRatio),e.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(t=>{var i;const s=V(t,e);if(s)null===(i=t.parentElement)||void 0===i||i.removeChild(t),s.appendChild(t)});this.setDefinitions(e),e.querySelectorAll("defs").forEach(e=>this.setDefinitions(e))}setDefinitions(e){const t=this.definitions;e.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(e=>{let i=e.id;if(i)if(i="#"+i,b.clipPath(e))t.clipPath.set(i,e);else if(b.pattern(e))t.pattern.set(i,e);else if(b.linearGradient(e))t.gradient.set(i,Object.assign({type:"linear",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:Si(e)},bi(e,"x1","x2","y1","y2")));else if(b.radialGradient(e))t.gradient.set(i,Object.assign({type:"radial",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:Si(e)},bi(e,"cx","cy","r","fx","fy","fr")))})}get viewBox(){return this.element.viewBox.baseVal||w(this.element)}get instanceType(){return 18}}class SvgElement{constructor(e){this.element=e}build(e){}synchronize(e){}get instanceType(){return 4}}const{parseColor:ki}=squared.lib.color,{extractURL:Ti,getFontSize:wi,hasCalc:Ai,isCustomProperty:xi,isLength:Ri,isPercent:Vi,parseUnit:_i,parseVar:Ei}=squared.lib.css,{truncate:Pi}=squared.lib.math,{STRING:Mi}=squared.lib.regex,{convertCamelCase:Ni,convertFloat:Fi,isNumber:Gi,isString:Ci,joinArray:Oi,plainMap:Bi}=squared.lib.util,Li={polygon:/polygon\(([^)]+)\)/,inset:new RegExp(`inset\\(${Mi.LENGTH_PERCENTAGE}\\s?${Mi.LENGTH_PERCENTAGE}?\\s?${Mi.LENGTH_PERCENTAGE}?\\s?${Mi.LENGTH_PERCENTAGE}?\\)`),circle:new RegExp(`circle\\(${Mi.LENGTH_PERCENTAGE}(?:\\s+at\\s+${Mi.LENGTH_PERCENTAGE}\\s+${Mi.LENGTH_PERCENTAGE})?\\)`),ellipse:new RegExp(`ellipse\\(${Mi.LENGTH_PERCENTAGE}\\s+${Mi.LENGTH_PERCENTAGE}(?:\\s+at\\s+${Mi.LENGTH_PERCENTAGE}\\s+${Mi.LENGTH_PERCENTAGE})?\\)`)};var Ii=e=>class extends e{constructor(){super(...arguments),this._retainStyle=true,this._strokeWidth="1"}setStroke(){this.setAttribute("stroke"),this.setAttribute("stroke-width")}setPaint(e,t){var i,s;this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setStroke(),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");const n=this.getAttribute("clip-path",true);if(""!==n&&"none"!==n){const a=Ti(n);if(""!==a)this.clipPath=a;else if(null==e?void 0:e.length)for(const a in Li){const r=Li[a].exec(n);if(r){const{top:n,right:l,bottom:o,left:f}=K.getBoxRect(e),c=l-f,h=o-n;switch(a){case"inset":{let e=0,s=this.convertLength(r[1],h),a=0,u=0;if(r[4])e=f+this.convertLength(r[4],c),a=l-this.convertLength(r[2],c),u=o-this.convertLength(r[3],h);else if(r[2])e=this.convertLength(r[2],c),a=l-e,u=o-(r[3]?this.convertLength(r[3],h):s),e+=f;else e=f+s,a=l-s,u=o-s;s+=n;const g=[{x:e,y:s},{x:a,y:s},{x:a,y:u},{x:e,y:u}];null===(i=this.parent)||void 0===i||i.refitPoints(g),this.clipPath=K.drawPolygon(g,t);break}case"polygon":{const e=Bi(r[1].split(","),e=>{let t=f,i=n;return e.trim().split(" ").forEach((e,s)=>{if(0===s)t+=this.convertLength(e,c);else i+=this.convertLength(e,h)}),{x:t,y:i}});null===(s=this.parent)||void 0===s||s.refitPoints(e),this.clipPath=K.drawPolygon(e,t);break}default:if("circle"===a||"ellipse"===a){const e=this.parent,i=c<h?c:h;let s,l;if("circle"===a)s=this.convertLength(r[1],i),l=s;else s=this.convertLength(r[1],c),l=this.convertLength(r[2],h);let o=f,u=n;const g=r.length;if(g>=4)o+=this.convertLength(r[g-2],i),u+=this.convertLength(r[g-1],i);if(e)o=e.refitX(o),u=e.refitX(u),s=e.refitSize(s),l=e.refitSize(l);this.clipPath=K.drawEllipse(o,u,s,l,t)}break}break}}}}setAttribute(e,t=false,i=true){let s=this.getAttribute(e,t,i);if(e=Ni(e),Ci(s)){if(Ai(s))s=A(this.element,e,s)||getComputedStyle(this.element)[e];else if(xi(s))s=Ei(this.element,s)||getComputedStyle(this.element)[e];switch(e){case"strokeDasharray":s="none"!==s?Oi(s.split(/,\s*/),e=>this.convertLength(e).toString(),", ",false):"";break;case"strokeDashoffset":case"strokeWidth":s=this.convertLength(s).toString();break;case"fill":case"stroke":{const t=Ti(s);if(""!==t)this[e+"Pattern"]=t;else{let t;switch(s){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="none";break;case"currentcolor":case"currentColor":t=ki(this.color||x(this.element,"color",true));break;default:t=ki(s);break}if(t)this[e]=t.value}return}}this[e]=s}else if(!this._retainStyle)this[e]=""}getAttribute(e,t=false,i=true){let s=x(this.element,e,t);if(i&&!Ci(s)){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return s}let i=this.useParent||this.parent;while(i){if(s=x(i.element,e,t),Ci(s))break;i=i.parent}}return s}convertLength(e,t){if(!Gi(e))if(Ri(e))return _i(e,wi(this.element));else if(Vi(e))return Math.round(("number"==typeof t?t:this.element.getBoundingClientRect()[t||"width"])*parseFloat(e)/100);return Fi(e)}resetPaint(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}set strokeWidth(e){this._strokeWidth=e}get strokeWidth(){const e=this.stroke;if(Ci(e)&&"none"!==e){const e=this._strokeWidth;if(""!==e){const t=this.parent;return(null==t?void 0:t.requireRefit)?Pi(t.refitSize(parseFloat(e))):e}}return""}};class SvgG extends(Ii(ii(SvgContainer))){constructor(e){super(e),this.element=e}build(e){super.build(e),this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}get instanceType(){return 34}}const{resolvePath:qi}=squared.lib.util;class SvgImage extends(ri(Q(ii(SvgElement)))){constructor(e,t){if(super(e),this.element=e,this.imageElement=null,this.__get_transforms=false,this.__get_animations=false,t)this.imageElement=t}build(){this.setRect()}extract(e){const t=e?K.filterTransforms(this.transforms,e):this.transforms;let{x:i,y:s,width:n,height:a}=this;const r=t.length;if(r){t.reverse();let e=0;while(e<r){const r=t[e++],l=r.matrix,o=i;i=k.applyX(l,o,s),s=k.applyY(l,o,s);let f=this.rotateAngle;switch(r.type){case SVGTransform.SVG_TRANSFORM_SCALE:n*=l.a,a*=l.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(0!==r.angle){if(l.a<0)i+=l.a*n;if(l.c<0)i+=l.c*n;if(l.b<0)s+=l.b*a;if(l.d<0)s+=l.d*a;if(f)f+=r.angle;else f=r.angle}break}this.rotateAngle=f}this.transformed=t}const{parent:l,translationOffset:o}=this;if(l)i=l.refitX(i),s=l.refitY(s),n=l.refitSize(n),a=l.refitSize(a);if(o)i+=o.x,s+=o.y;this.setBaseValue("x",i),this.setBaseValue("y",s),this.setBaseValue("width",n),this.setBaseValue("height",a)}set x(e){super.x=e}get x(){const e=super.x;if(0===e){const e=this.imageElement;if(e)return e.x.baseVal.value}return e}set y(e){super.y=e}get y(){const e=super.y;if(0===e){const e=this.imageElement;if(e)return e.y.baseVal.value}return e}set width(e){super.width=e}get width(){const e=super.width;if(0===e){const e=this.imageElement;if(e)return e.width.baseVal.value}return e}set height(e){super.height=e}get height(){const e=super.height;if(0===e){const e=this.imageElement;if(e)return e.height.baseVal.value}return e}get href(){const e=this.imageElement||this.element;if(b.image(e))return qi(e.href.baseVal);else return""}get transforms(){let e=super.transforms;if(!this.__get_transforms){const t=this.imageElement;if(t)e=e.concat(this.getTransforms(t)),this._transforms=e;this.__get_transforms=true}return e}get animations(){let e=super.animations;if(!this.__get_animations){const t=this.imageElement;if(t)e=e.concat(this.getAnimations(t)),this._animations=e;this.__get_animations=true}return e}get instanceType(){return 4100}}const{getNamedItem:Xi}=squared.lib.dom,{equal:zi,lessEqual:Di,multipleOf:Wi,offsetAngleX:Yi,offsetAngleY:$i,relativeAngle:Ui,truncateFraction:ji}=squared.lib.math,{cloneArray:Ki,convertInt:Hi,convertFloat:Zi}=squared.lib.util;function Qi(e,t,i,s){const n=e[0],a=e[e.length-1];if(void 0!==i)switch(t){case"x":i-=n.start.x;break;case"x1":case"cx":return n.start.x=i,void(n.coordinates[0]=i);case"x2":return a.end.x=i,void(a.coordinates[0]=i)}if(void 0!==s)switch(t){case"y":s-=n.start.y;break;case"y1":case"cy":return n.start.y=s,void(n.coordinates[1]=s);case"y2":return a.end.y=s,void(a.coordinates[1]=s)}const r=e.length;for(let t=0;t<r;++t){const n=e[t],{coordinates:a,value:r}=n,l=a.length;for(let e=0,t=0;e<l;e+=2,++t){if(void 0!==i){if(!n.relative)a[e]+=i;r[t].x+=i}if(void 0!==s){if(!n.relative)a[e+1]+=s;r[t].y+=s}}}}function Ji(e,t,i){const s=e.length;let n=0;while(n<s){const s=e[n++];if("A"===s.key.toUpperCase()){if(void 0!==t){const i=t-s.radiusX;if(s.radiusX=t,s.coordinates[0]=2*t*(s.coordinates[0]<0?-1:1),1===n)e[0].coordinates[0]-=i,e[0].end.x-=i}if(void 0!==i)s.radiusY=i}}}function es(e,t,i,s=false){const n=e.get("stroke-dashoffset",i,s);return n?parseFloat(n):t}function ts(e,t,i,s=false){const n=e.get("stroke-dasharray",i,s);return n?K.parseCoordinates(n):t}const is=e=>e?e.start+" "+e.end:"1 1";class SvgPath extends(Ii(Q(SvgElement))){constructor(e){super(e),this.element=e,this.name="",this.value="",this.baseValue="",this.init()}static extrapolate(e,t,i,s,n,a){const r=null==n?void 0:n.parent,l=!!(s||(null==r?void 0:r.requireRefit)),o=[];let f;const c=i.length;for(let h=0;h<c;++h){if("d"===e)o[h]=i[h];else if("points"===e){const e=K.convertPoints(K.parseCoordinates(i[h]));if(e.length)o[h]=n&&b.polygon(n.element)?K.drawPolygon(e,a):K.drawPolyline(e,a)}else if(t){if(!f)f=K.getPathCommands(t);const s=parseFloat(i[h]);if(!isNaN(s)){const t=h<c-1?Ki(f,[],true):f;switch(e){case"x":case"x1":case"x2":case"cx":Qi(t,e,s);break;case"y":case"y1":case"y2":case"cy":Qi(t,e,void 0,s);break;case"r":Ji(t,s,s);break;case"rx":Ji(t,s);break;case"ry":Ji(t,void 0,s);break;case"width":for(const e of[1,2]){const i=t[e];switch(i.key){case"m":case"l":case"h":i.coordinates[0]=s*(i.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":i.coordinates[0]=t[0].end.x+s;break}}break;case"height":for(const e of[2,3]){const i=t[e];switch(i.key){case"m":case"l":case"v":i.coordinates[1]=s*(i.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":i.coordinates[1]=t[0].end.y+s;break}}break;default:o[h]="";continue}o[h]=K.drawPath(t,a)}}if(o[h]){if(l)o[h]=K.transformRefit(o[h],s,n,r,a)}else o[h]=""}return o}build(e){var t;let i;if(null==e?void 0:e.transforms)i=K.filterTransforms(e.transforms,null===(t=e.exclude)||void 0===t?void 0:t[this.element.tagName]);this.draw(i,e)}draw(e,t){let i,s;if(t)({residual:i,precision:s}=t);const n=this.element,a=this.parent,r=this.patternParent,l=true===(null==a?void 0:a.requireRefit),o=2===(null==r?void 0:r.patternContentUnits);let f;if(this.transformed=void 0,b.path(n)){if(f=this.getBaseValue("d"),(null==e?void 0:e.length)||l||o){const t=K.getPathCommands(f);if(t.length){let c=K.getPathPoints(t);if(c.length){if(o)r.patternRefitPoints(c);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)c=K.applyTransforms(e,c,T.origin(this.element)),this.transformed=e}if(this.baseValue=K.drawPath(K.syncPathPoints(l?Ki(t,[],true):t,l?Ki(c,[],true):c,!!this.transformed),s),l)a.refitPoints(c),f=K.drawPath(K.syncPathPoints(t,c,!!this.transformed),s);else f=this.baseValue}}}if(""===this.baseValue)this.baseValue=f}else if(b.line(n)){let t=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(o)r.patternRefitPoints(t);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)t=K.applyTransforms(e,t,T.origin(this.element)),this.transformed=e}const c=()=>K.drawPolyline(t,s);if(this.baseValue=c(),l)a.refitPoints(t),f=c();else f=this.baseValue}else if(b.circle(n)||b.ellipse(n)){const t=this.getBaseValue("cx"),c=this.getBaseValue("cy");let h,u;if(b.ellipse(n))h=this.getBaseValue("rx"),u=this.getBaseValue("ry");else h=this.getBaseValue("r"),u=h;let g=[{x:t,y:c,rx:h,ry:u}];if(o)r.patternRefitPoints(g);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e,h,u);if(e.length)g=K.applyTransforms(e,g,T.origin(this.element)),this.transformed=e}const d=g[0],p=()=>K.drawEllipse(d.x,d.y,d.rx,d.ry,s);if(this.baseValue=p(),l)a.refitPoints(g),f=p();else f=this.baseValue}else if(b.rect(n)){let t=this.getBaseValue("x"),c=this.getBaseValue("y"),h=this.getBaseValue("width"),u=this.getBaseValue("height");if(l||(null==e?void 0:e.length)){let g=[{x:t,y:c},{x:t+h,y:c},{x:t+h,y:c+u},{x:t,y:c+u}];if(o)r.patternRefitPoints(g);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)g=K.applyTransforms(e,g,T.origin(this.element)),this.transformed=e}if(this.baseValue=K.drawPolygon(g,s),l)a.refitPoints(g),f=K.drawPolygon(g,s);else f=this.baseValue}else{if(o)t=r.patternRefitX(t),c=r.patternRefitY(c),h=r.patternRefitX(h),u=r.patternRefitY(u);f=K.drawRect(h,u,t,c,s),this.baseValue=f}}else if(b.polygon(n)||b.polyline(n)){let t=this.getBaseValue("points");if(o)r.patternRefitPoints(t);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)t=K.applyTransforms(e,t,T.origin(this.element)),this.transformed=e}const c=()=>b.polygon(n)?K.drawPolygon(t,s):K.drawPolyline(t,s);if(this.baseValue=c(),l){if(!this.transformed)t=K.clonePoints(t);a.refitPoints(t),f=c()}else f=this.baseValue}else f="";return this.value=f,this.setPaint([f],s),f}extendLength(e,t){if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":{const i=K.getPathCommands(this.value),s=i.length;if(s){const n=i[0],a=n.start,r=i[s-1],l=r.end,o=r.key.toUpperCase(),{leading:f,trailing:c}=e;let h=false;if("Z"!==o&&(a.x!==l.x||a.y!==l.y)){if(f>0){let e;if(n.value.length>1)e=n.value[1];else if(s>1)e=i[1].start;if(e){const t=n.coordinates;if(e.x===a.x)t[1]+=a.y>e.y?f:-f,h=true;else if(e.y===a.y)t[0]+=a.x>e.x?f:-f,h=true;else{const i=Ui(e,a);t[0]-=Yi(i,f),t[1]-=$i(i,f),h=true}}}switch(o){case"M":case"L":if(c>0){let e;if(1===s){const t=n.value;if(t.length>1)e=t[t.length-2]}else{const t=r.value;if(t.length>1)e=t[t.length-2];else e=i[i.length-2].end}if(e){const t=r.coordinates;if(e.x===l.x)t[1]+=l.y>e.y?c:-c,h=true;else if(e.y===l.y)t[0]+=l.x>e.x?c:-c,h=true;else{const i=Ui(e,l);t[0]+=Yi(i,c),t[1]+=$i(i,c),h=true}}}break;case"H":case"V":{const e=r.coordinates,t="H"===o?0:1;e[t]+=(f+c)*(e[t]>=0?1:-1),h=true;break}}}if(h)return e.leading=f,e.trailing=c,e.path=K.drawPath(i,t),e;break}}}}flattenStrokeDash(e,t,i,s,n){if(!s)s=i;let a,r,l,o,f=0;const c=e=>r[e%a];if(n)({dashArray:r,dashArrayTotal:l,extendedLength:o,startIndex:f}=n),a=r.length,n.items=[],n.leading=0;else{a=e.length,r=e.slice(0);const h=Wi([2,a]);l=0;for(let t=0;t<h;++t){const i=e[t%a];if(l+=i,t>=a)r.push(i)}if(a=h,t>0){let e=c(0);while(t-e>=0)t-=e,e=c(++f);f%=a}else if(t<0){r.reverse();while(t<0)t+=c(f++);f=a-f%a,r.reverse()}o=s,n={dashArray:r,dashArrayTotal:l,items:[],leading:0,trailing:0,startIndex:f,extendedLength:o,lengthRatio:i/(s||i)}}let h,u=0;for(let e=0,i=0;;e+=i,++f){let s,a;if(i=c(f),e<t)n.leading=t-e,s=0,a=i-n.leading;else s=e-t,a=i;const r=ji(s/o);if(h=ji(r+a/o),f%2==0){if(r<1)n.items.push({start:r,end:Math.min(h,1),length:i}),u+=i}else u+=i;if(h>=1)break}n.trailing=ji((h-1)*o);while(u%l!=0){const e=c(++f);n.trailing+=e,u+=e}if(0===n.items.length)n.items.push({start:1,end:1});else n.leadingOffset=ji(n.items[0].start*o),n.leading*=n.lengthRatio,n.trailing*=n.lengthRatio;return n}extractStrokeDash(e,t){const i=Hi(this.strokeWidth);let s,n="",a="";if(i>0){let r=K.parseCoordinates(this.strokeDasharray);if(r.length){const l=this.totalLength,o=this.pathLength||l,f=[];let c,h=Hi(this.strokeDashoffset),u=0;const g=(e,t,i,s=0)=>{const n=this.flattenStrokeDash(e,t,l,o);if(0===f.length)c=n;return u=Math.max(u,n.items.length),f.push({items:n.items,delay:i,duration:s}),n.items};if(s=g(r,h,0),e){const d=e.slice(0).sort((e,t)=>{if(e.attributeName.startsWith("stroke-dash")&&t.attributeName.startsWith("stroke-dash"))if(e.delay!==t.delay)return e.delay<t.delay?-1:1;else if(K.asSet(e)&&K.asAnimate(t)||!e.animationElement&&t.animationElement)return-1;else if(K.asAnimate(e)&&K.asSet(t)||e.animationElement&&!t.animationElement)return 1;return 0}),p=new Me(d,"stroke-dasharray","stroke-dashoffset");if(d.length>1)for(let e=0;e<d.length;++e){const t=d[e];if(!p.has(t.attributeName,t.delay,t))d.splice(e--,1)}let m=e=>{let t=h;const i=d.length;let s=e;while(s<i){const e=d[s++];if("stroke-dasharray"===e.attributeName){const i=p.get("stroke-dashoffset",e.delay);if(i)t=parseFloat(i);for(const i of K.asAnimate(e)?p.evaluateStart(e):[e.to])u=Math.max(u,this.flattenStrokeDash(K.parseCoordinates(i),t,l,o).items.length)}}},y=[],v=false;for(let e=0;e<d.length;++e){const S=d[e];if(S.setterType){const e=(e,t)=>{g(e,t,S.delay,S.fillReplace&&S.duration>0?S.duration:0),v=true};switch(S.attributeName){case"stroke-dasharray":r=K.parseCoordinates(S.to),e(r,es(p,h,S.delay));continue;case"stroke-dashoffset":h=Hi(S.to),e(ts(p,r,S.delay),h);continue}}else if(K.asAnimate(S)&&S.playable)switch(p.evaluateStart(S),S.attributeName){case"stroke-dasharray":{if(m)m(e),m=void 0;const t=es(p,h,S.delay),i=this.flattenStrokeDash(ts(p,r,S.delay),t,l,o).items,s=[],n=[];let a=0;while(a<u){const e=new Ae(this.element);e.id=a,e.baseValue=is(i[a]),e.attributeName="stroke-dasharray",e.delay=S.delay,e.duration=S.duration,e.iterationCount=S.iterationCount,e.fillMode=S.fillMode,n[a++]=[],s.push(e)}const f=S.values;for(a=0;a<f.length;++a){const e=this.flattenStrokeDash(K.parseCoordinates(f[a]),t,l,o).items;let i=0;while(i<u)n[i].push(is(e[i++]))}const{keyTimes:c,keySplines:g}=S,d=S.timingFunction;a=0;while(a<u){const e=s[a];if(e.values=n[a++],e.keyTimes=c,g)e.keySplines=g;else if(d)e.timingFunction=d}if(S.fillReplace){const e=S.getTotalDuration(),t=this.flattenStrokeDash(ts(p,r,e),es(p,h,e),l,o).items;a=0;while(a<u)s[a].replaceValue=is(t[a++])}y=y.concat(s),v=true;continue}case"stroke-dashoffset":{const e=S.duration,r=parseFloat(S.values[0]);let g=0,d=0;if(h!==r&&0===S.delay&&!S.fillReplace)c=this.flattenStrokeDash(c.dashArray,r,l,o),s=c.items,f[0].items=s,u=Math.max(u,c.items.length),h=r;let m,y=l,b=1;if(c.leading>0||c.trailing>0)if(this.extendLength(c,t),c.path){const e=K.getBoxRect([this.value]);if(y=ji(P(c.path)),b=y/l,c.extendedLength=this.pathLength,c.extendedLength>0)c.extendedLength*=b;else c.extendedLength=y;s=this.flattenStrokeDash(c.dashArray,0,l,o,c).items,f[0].items=s,u=Math.max(u,s.length);const t=Math.ceil(i/2);n=c.path,a=K.drawRect(e.right-e.left,e.bottom-e.top+2*t,e.left,e.top-t)}if(S.fillReplace&&-1!==S.iterationCount){const e=Zi(p.get(S.attributeName,S.getTotalDuration()));if(e!==h){let t=Math.abs(e-h)%y/y;if(e>h)t=1-t;m=t.toString()}}const k=S.keyTimes,T=S.values,w=[],A=[],x=k.length;for(let t=0;t<x;++t){const i=0===t?h:parseFloat(T[t-1]),s=parseFloat(T[t]),n=Math.abs(s-i),a=k[t];if(0===n){if(t>0){g=a,A.push(g);const e=w.length;if(e)w.push(w[e-1]),d=parseFloat(w[e-1]);else w.push("0"),d=0}continue}const r=s>i,l=t>0?(a-k[t-1])*e:0,o=n*c.lengthRatio;let f=o/y,u=o,p=0;const m=t=>t/o*l/e,v=()=>{if(!(t>0&&w[w.length-1]===(r?"1":"0")))A.push(0===g?0:ji(g)),w.push(r?"1":"0")},S=(e,t=false)=>{if(p=(u-e)/y,t){const e=ji(p);if(r){if(e>0)p=1-p}else if(0===e)p=1}},b=()=>{g=a,A.push(g);const e=ji(p);w.push(e.toString()),d=e>0&&e<1?p:0};if(0===t){if(u%=y,S(0),r)p=1-p;b()}else{if(d>0){const e=r?d:1-d,t=ji(e*y);if(Di(u,t)){if(S(0),r)p=d-p;else p+=d;b();continue}else w.push(r?"0":"1"),g+=m(t),A.push(ji(g)),f=ji(f-e),u=ji(u-t)}if(zi(u,y))u=y;if(u>y){f=Math.floor(f);const e=f*y;if(e===u)--f;S(e,true)}else f=0,S(0,true);while(f>0)v(),w.push(r?"0":"1"),g+=m(y),A.push(ji(g)),--f;v(),b()}}S.baseValue="0",S.replaceValue=m,S.values=w,S.keyTimes=A;const R=S.timingFunction;if(R)S.keySplines=void 0,S.timingFunction=R;v=true;break}}y.push(S)}if(v){const t=f.length;let i=0;while(i<t){const{delay:e,duration:n,items:a}=f[i++];if(a===s){let e=a.length-1;while(++e<u)a.push({start:1,end:1})}else{const i=t>2?this.flattenStrokeDash(ts(p,r,e-1),es(p,h,e-1),l,o).items:s;let f=0;while(f<u){const t=new SvgAnimation(this.element);t.id=f,t.attributeName="stroke-dasharray",t.baseValue=is(i[f]),t.delay=e,t.duration=n,t.fillFreeze=0===n,t.to=is(a[f++]),y.push(t)}}}e=y}}}}return[e,s,n,a]}init(){const e=this.element;if(b.path(e))this.setBaseValue("d");else if(b.line(e))this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2");else if(b.rect(e))this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height");else if(b.circle(e))this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r");else if(b.ellipse(e))this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry");else if(b.polygon(e)||b.polyline(e))this.setBaseValue("points",K.clonePoints(e.points))}get transforms(){let e=this._transforms;if(void 0===e)e=K.filterTransforms(T.parse(this.element)||K.convertTransforms(this.element.transform.baseVal)),this._transforms=e;return e}get pathLength(){return Zi(Xi(this.element,"pathLength"))}get totalLength(){return this.element.getTotalLength()}get instanceType(){return 1028}}class SvgPattern extends(ii(SvgContainer)){constructor(e,t){super(e),this.element=e,this.patternElement=t}build(e){super.build(Object.assign(Object.assign({},e),{patternElement:this.patternElement,initialize:false}))}get animations(){return[]}get instanceType(){return 130}}class SvgShape extends(At(ii(SvgElement))){constructor(e,t=true){if(super(e),this.element=e,t)this.setPath()}setPath(){this.path=new SvgPath(this.element)}build(e){const t=this.path;if(t)t.parent=this.parent,t.build(Object.assign(Object.assign({},e),{transforms:this.transforms}))}synchronize(e){if(this.animations.length){const t=this.path;if(t){const i=null==e?void 0:e.element;if(i)this.animateSequentially(this.getAnimateShape(i),void 0,t,e);else this.animateSequentially(this.getAnimateShape(this.element),this.getAnimateTransform(e),t,e)}}}set path(e){if(this._path=e,e)e.name=this.name}get path(){return this._path}get instanceType(){return 2052}}const{isPercent:ss}=squared.lib.css,{getNamedItem:ns}=squared.lib.dom,as=e=>ss(e)?parseFloat(e)/100:parseFloat(e);class SvgShapePattern extends(Ii(Q(ii(SvgContainer)))){constructor(e,t){super(e),this.element=e,this.patternElement=t,this.__get_transforms=false,this.patternUnits="userSpaceOnUse"===ns(this.patternElement,"patternUnits")?1:2,this.patternContentUnits="objectBoundingBox"===ns(this.patternElement,"patternContentUnits")?2:1}build(e){const t=(null==e?void 0:e.element)||this.element,i=new SvgPath(t);i.build(Object.assign({},e));const s=i.value;if(s){const n=null==e?void 0:e.precision;if(this.clipRegion=s,i.clipPath)this.clipRegion=i.clipPath;const a=[s];this.setPaint(a,n),this.drawRegion=K.getBoxRect(a);const{drawRegion:r,fillOpacity:l,patternWidth:o,patternHeight:f,tileWidth:c,tileHeight:h}=this,u=2===this.patternUnits;let g=this.offsetX%c,d=this.offsetY%h,p=0,m=0,y=r.right,v=r.bottom;if(u)p=r.left,m=r.top,y-=p,v-=m;if(0!==g)g=c-g,y+=c;if(0!==d)d=h-d,v+=h;let S=0;while(v>0){const i=this.patternElement,s=2===this.patternContentUnits,a=m+S++*h-d;let r=y,u=0;do{const d=p+u++*c-g,m=new SvgPattern(t,i);m.build(Object.assign({},e)),m.cascade(t=>{if(K.isShape(t)){t.setPath();const i=t.path;if(i){if(i.patternParent=this,s)i.refitBaseValue(d/o,a/f,n);else i.refitBaseValue(d,a,n);i.build(Object.assign(Object.assign({},e),{transforms:t.transforms})),i.fillOpacity=(parseFloat(i.fillOpacity)*parseFloat(l)).toString(),i.clipPath=K.drawRect(c,h,d,a,n)+(""!==i.clipPath?";"+i.clipPath:"")}}}),this.add(m),r-=c}while(r>0);v-=h}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){i.fill="",i.fillOpacity="0",i.stroke=this.stroke,i.strokeWidth=this.strokeWidth;const e=new SvgShape(t,false);e.path=i,this.add(e)}}}patternRefitX(e){return this.drawRegion?e*this.patternWidth:e}patternRefitY(e){return this.drawRegion?e*this.patternHeight:e}patternRefitPoints(e){if(this.drawRegion){const t=this.patternWidth,i=this.patternHeight,s=e.length;let n=0;while(n<s){const s=e[n++];if(s.x*=t,s.y*=i,void 0!==s.rx&&void 0!==s.ry)if(s.rx===s.ry){const e=Math.min(t,i);s.rx*=e,s.ry*=e}else s.rx*=t,s.ry*=i}}return e}get patternWidth(){const e=this.drawRegion;return e?e.right-e.left:0}get patternHeight(){const e=this.drawRegion;return e?e.bottom-e.top:0}get transforms(){if(!this.__get_transforms){const e=this.patternElement,t=K.convertTransforms(e.patternTransform.baseVal),i=t.length;if(i){const s=T.rotateOrigin(e,"patternTransform"),n=this.patternWidth/2,a=this.patternHeight/2;let r=0;while(r<i){const e=t[r++];switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(s.length){const t=s.shift();if(t.angle===e.angle){e.origin={x:n+t.x,y:a+t.y};break}}if(e.origin)break;default:e.origin={x:n,y:a};break}}this._transforms=super.transforms.concat(K.filterTransforms(t))}this.__get_transforms=true}return super.transforms}get offsetX(){const e=this.patternElement.x.baseVal;if(2===this.patternUnits)return this.patternWidth*as(e.valueAsString);else return e.value}get offsetY(){const e=this.patternElement.y.baseVal;if(2===this.patternUnits)return this.patternHeight*as(e.valueAsString);else return e.value}get tileWidth(){const e=this.patternElement.width.baseVal;if(2===this.patternUnits)return this.patternWidth*as(e.valueAsString);else return e.value}get tileHeight(){const e=this.patternElement.height.baseVal;if(2===this.patternUnits)return this.patternHeight*as(e.valueAsString);else return e.value}get instanceType(){return 258}}class SvgUse extends(Ii(ri(Q(SvgShape)))){constructor(e,t,i=true){if(super(e,false),this.element=e,this.shapeElement=t,this._retainStyle=false,this.__get_transforms=false,this.__get_animations=false,i)this.setPath()}setPath(){const e=new SvgPath(this.shapeElement);e.useParent=this,this.path=e}build(e){super.build(e);const t=this.path;this.setPaint(t&&[t.value],null==e?void 0:e.precision)}synchronize(e){if(e=Object.assign(Object.assign({},e),{element:this.shapeElement}),this.animations.length)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}get transforms(){let e=super.transforms;if(!this.__get_transforms)e=e.concat(this.getTransforms(this.shapeElement)),this._transforms=e,this.__get_transforms=true;return e}get animations(){let e=super.animations;if(!this.__get_animations)e=e.concat(this.getAnimations(this.shapeElement)),this._animations=e,this.__get_animations=true;return e}get instanceType(){return 10244}}class SvgUsePattern extends(At(ri(SvgShapePattern))){constructor(e,t,i){super(e,i),this.element=e,this.shapeElement=t}build(e){super.build(Object.assign(Object.assign({},e),{element:this.shapeElement}))}synchronize(e){const t=this.animations.filter(e=>"x"===e.attributeName||"y"===e.attributeName||void 0===this.verifyBaseValue(e.attributeName,0)),i=this.getAnimateTransform(e);if(t.length||i.length)this.animateSequentially(this.getAnimateViewRect(t),i,void 0,e);super.synchronize(e)}get instanceType(){return 514}}class SvgUseSymbol extends(Ii(At(ri(Q(ii(SvgContainer)))))){constructor(e,t){super(e),this.element=e,this.symbolElement=t}build(e){this.setRect(),super.build(Object.assign(Object.assign({},e),{symbolElement:this.symbolElement}));const t=this.getBaseValue("x",0),i=this.getBaseValue("y",0);if(0!==t||0!==i){const e={x:t,y:i};this.cascade(t=>{if(K.asImage(t))t.translationOffset=e})}this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}synchronize(e){if(this.animations.length)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}get viewBox(){return this.symbolElement.viewBox.baseVal||w(this.element)}get instanceType(){return 66}}const rs={constant:ce,util:M};e.Svg=Svg,e.SvgAnimate=Ae,e.SvgAnimateMotion=SvgAnimateMotion,e.SvgAnimateTransform=SvgAnimateTransform,e.SvgAnimation=SvgAnimation,e.SvgAnimationIntervalMap=Me,e.SvgBaseVal=Q,e.SvgBuild=K,e.SvgContainer=SvgContainer,e.SvgElement=SvgElement,e.SvgG=SvgG,e.SvgImage=SvgImage,e.SvgPaint=Ii,e.SvgPath=SvgPath,e.SvgPattern=SvgPattern,e.SvgShape=SvgShape,e.SvgShapePattern=SvgShapePattern,e.SvgSynchronize=At,e.SvgUse=SvgUse,e.SvgUsePattern=SvgUsePattern,e.SvgUseSymbol=SvgUseSymbol,e.SvgView=ii,e.SvgViewRect=ri,e.lib=rs,Object.defineProperty(e,"__esModule",{value:true})}));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).chrome=t()}(this,(function(){"use strict";class Resource extends squared.base.Resource{constructor(e,t){super(),this.application=e,this.cache=t}get userSettings(){return this.application.userSettings}}class Application extends squared.base.Application{constructor(){super(...arguments),this.builtInExtensions={},this.extensions=[],this.systemName="chrome",this.queryState=0}finalize(){}createNode(e){return new this.Node(this.nextId,this.processing.sessionId,e.element)}insertNode(e){if("#text"===e.nodeName){if(this.userSettings.excludePlainText)return;this.controllerHandler.applyDefaultStyles(e)}return this.createNode({element:e})}afterCreateCache(e){switch(this.queryState){case 1:this.controllerHandler.cacheElement(e);break;default:this.controllerHandler.cacheElementList(this.processing.cache);break}}get length(){const e=Resource.ASSETS;let t=0;for(const s in e)t+=e[s].size;return t}}const{setElementCache:e}=squared.lib.session;class Controller extends squared.base.Controller{constructor(e,t){super(),this.application=e,this.cache=t,this.localSettings={mimeType:{font:"*",image:"*",audio:"*",video:"*"}},this._elementMap=new Map}sortInitialCache(){}init(){this.application.processing.unusedStyles.clear()}reset(){this._elementMap.clear()}applyDefaultStyles(t){if("#text"===t.nodeName)e(t,"styleMap",this.sessionId,{position:"static",display:"inline",verticalAlign:"baseline",float:"none",clear:"none"})}includeElement(){return true}cacheElement(e){this._elementMap.set(e.element,e)}cacheElementList(e){const t=this._elementMap;e.each(e=>t.set(e.element,e))}get elementMap(){return this._elementMap}get userSettings(){return this.application.userSettings}}const{FILE:t}=squared.lib.regex,{appendSeparator:s,convertWord:i,fromLastIndexOf:r,isString:n,iterateReverseArray:o,parseMimeType:a,partitionLastIndexOf:l,randomUUID:c,resolvePath:p,safeNestedArray:u,trimEnd:m}=squared.lib.util;function f(e,t){if(t){const s=new RegExp(e+':\\s*((?:[^"]|\\\\")+)').exec(t.replace(/\\/g,"/"));if(s){const e=s[1].split("::").map(e=>e.trim());return[e[0],e[1]||void 0,"preserve"===e[2]]}}}function h(e,t=false){let s;if("/"===(e=e.replace(/\\/g,"/")).charAt(0))s="__serverroot__";else if(e.startsWith("../")){s="__serverroot__";const t=location.pathname.split("/");t.pop();for(let s=0;s<e.length&&t.length>0;s+=3)if("../"===e.substring(s,s+3))t.pop();else break;e=t.join("/")+"/"+e.split("../").pop()}else if(e.startsWith("./"))e=e.substring(2);const i=l(e,"/");if(t){const e=T(i[1]);i[1]=c()+(e?"."+e:"")}return[s,i[0],i[1]]}function g(e,t){const s=e instanceof HTMLObjectElement?e.data:e.src;if(n(s)){const i=p(s);if(""!==i)t.set(e,i)}}function d(e){var t,s;if(e){const i=e.dataset,r=(null===(t=i.useChrome)||void 0===t?void 0:t.trim())||(null===(s=i.use)||void 0===s?void 0:s.trim());if(r)return r.split(/\s*,\s*/)}return[]}function v(e,t){const s=[];for(const t of this.application.extensions)if(t.processFile(e))s.push(t);for(const i of t){const t=this.application.extensionManager.retrieve(i,true);if(t&&!s.includes(t))t.processFile(e,true)}}function y(e){for(const t in e){const s=e[t],i=s.length;if(i>1){let e=0;while(e<i)s[e].bundleIndex=e++}}}function A(e,t,s,i,r){const n=t.innerHTML.trim();if(n){const[t,a,l]=h(s);if(o(e,e=>{if((e.moveTo===t||!e.moveTo&&!t)&&e.pathname===a&&e.filename===l)return u(e,"trailingContent").push({value:n,format:i,preserve:r}),true})!==1/0)return{uri:p(s,location.href),pathname:a,filename:l,moveTo:t,content:n,format:i,preserve:r}}}const T=e=>e.includes(".")?r(e,".").toLowerCase():"";class File extends squared.base.File{static parseUri(e,s={}){const{preserveCrossOrigin:n,saveTo:o}=s;let l,{saveAs:u,format:g,preserve:d}=s,v=m(e,"/");const y=v.startsWith(m(location.origin,"/"));if(u){u=m(u.replace(/\\/g,"/"),"/");const e=f("saveAs",u);if(e)[l,g,d]=e;else l=u;if(y&&l)v=p(l,location.href)}if(n&&!y&&!l)return;const A=t.PROTOCOL.exec(v);if(A){const t=A[2],s=A[3],n=A[4]||"",p=T(e);let u,m,f,v="",S="";const E=e=>n.substring(e,n.lastIndexOf("/"));if(!y)if(o&&l)[m,v,S]=h(l+"/"+c()+(p?"."+p:""));else v=i(t)+(s?"/"+s.substring(1):"")+"/";else{f=location.pathname.substring(0,location.pathname.lastIndexOf("/")+1);let e=n.length;if(e){let t=0;e=Math.min(e,f.length);for(let s=0;s<e;++s)if(n.charAt(s)===f.charAt(s))t=s;else break;u=n.substring(0,t+1)}}if(""===S)if(y&&l)[m,v,S]=h(l,o);else if(n&&"/"!==n)if(S=r(n,"/","\\"),y)if(n.startsWith(f))v=E(f.length);else m="__serverroot__",u="",v=E(0);else v+=E(1);else S="index.html";return{uri:e,rootDir:u,moveTo:m,pathname:v.replace(/\\/g,"/"),filename:S,mimeType:p&&a(p),format:g,preserve:d}}}reset(){super.reset(),this._outputFileExclusions=void 0}copyToDisk(e,t){return this.copying(Object.assign(Object.assign({},t),{assets:this.getAssetsAll().concat((null==t?void 0:t.assets)||[]),directory:e}))}appendToArchive(e,t){return this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{assets:this.getAssetsAll(t).concat((null==t?void 0:t.assets)||[]),appendTo:e}))}saveToArchive(e,t){return this.archiving(Object.assign(Object.assign({},t),{assets:this.getAssetsAll(t).concat((null==t?void 0:t.assets)||[]),filename:e}))}getHtmlPage(e){var i;const o=[],l=location.href,c=document.querySelector("html"),p=null===(i=null==e?void 0:e.saveAs)||void 0===i?void 0:i.html;let u,m;if(c)u=c.dataset.chromeFile;if(!n(u)&&(null==p?void 0:p.filename))u=r(p.filename),m=p.format;const f=File.parseUri(l,{preserveCrossOrigin:null==e?void 0:e.preserveCrossOrigin,saveAs:u,format:m});if(f){const i=null==e?void 0:e.name;if(i)f.filename=i;else{const e=f.filename;if(!t.NAME.test(e))f.pathname=s(f.pathname,e),f.filename="index.html"}if(this.validFile(f))f.requestMain=true,f.mimeType=a("html"),v.call(this,f,d(document.querySelector("html"))),o.push(f)}return o}getScriptAssets(e){var t;let i,r;if(e)i=e.preserveCrossOrigin,r=null===(t=e.saveAs)||void 0===t?void 0:t.script;const o=[],l={};return document.querySelectorAll("script").forEach(e=>{const t=e.src.trim();let c=e.dataset.chromeFile;if("exclude"!==c){let m,h,g,y;if(!n(c)&&r){const{pathname:t,filename:i}=r;if(i)c=s(t||"",i),m=r.format,h=e.outerHTML}if(""!==t)y=File.parseUri(p(t),{preserveCrossOrigin:i,saveAs:c,format:m});else if(n(c)){if(!h){const e=f("exportAs",c);if(e)[c,m,g]=e}if(c)y=A(o,e,c,m,g)}if(this.validFile(y)){if(u(l,(y.moveTo||"")+y.pathname+y.filename).push(y),y.mimeType=e.type.trim()||y.uri&&a(y.uri)||"text/javascript",h)y.outerHTML=h;v.call(this,y,d(e)),o.push(y)}}}),y(l),o}getLinkAssets(e){var t;let i,r,o;if(e)({rel:o,preserveCrossOrigin:i}=e),r=null===(t=e.saveAs)||void 0===t?void 0:t.link;const l=[],c={};document.querySelectorAll((o?`link[rel="${o}"]`:"link")+", style").forEach(e=>{let t=e.dataset.chromeFile;if("exclude"!==t){let o,m,h,g,y;if(!n(t)&&r&&("text/css"===m||e instanceof HTMLStyleElement)){const{pathname:i,filename:n}=r;if(n)t=s(i||"",n),h=r.format,g=r.preserve,y=e.outerHTML}if(e instanceof HTMLLinkElement){const s=e.href.trim();if(""!==s){switch(e.rel.trim()){case"stylesheet":m="text/css";break;case"icon":m="image/x-icon";break;default:m=e.type.trim()||a(s);break}o=File.parseUri(p(s),{preserveCrossOrigin:i,saveAs:t,format:h,preserve:g})}}else if(n(t)){if(!y){const e=f("exportAs",t);if(e)[t,h,g]=e}if(t)o=A(l,e,t,h,g)}if(this.validFile(o)){if(u(c,(o.moveTo||"")+o.pathname+o.filename).push(o),o.mimeType=m||"text/css",y)o.outerHTML=y;v.call(this,o,d(e)),l.push(o)}}});for(const[e,t]of Resource.ASSETS.rawData.entries()){const s=t.mimeType;if("text/css"===s){const t=File.parseUri(p(e),{preserveCrossOrigin:i,format:null==r?void 0:r.format});if(this.validFile(t))t.mimeType=s,v.call(this,t,[]),l.push(t)}}return y(c),l}getImageAssets(e){var t;let s,i;if(e)s=e.preserveCrossOrigin,i=null===(t=e.saveAs)||void 0===t?void 0:t.base64;const r=[],n=(e,t,i)=>{if(""!==(t=t.trim())){let n;if(e){const t=f("saveTo",e.dataset.chromeFile);if(t)[n,i]=t}const o=File.parseUri(t,{preserveCrossOrigin:s,saveAs:n,saveTo:true});if(this.validFile(o)&&!r.find(e=>e.uri===t)){if(i)o.mimeType=n?i+":"+o.mimeType:i;return v.call(this,o,d(e)),r.push(o),o}}};document.querySelectorAll("video").forEach(e=>n(null,p(e.poster))),document.querySelectorAll("picture > source").forEach(e=>{for(const t of e.srcset.trim().split(","))n(e,p(t.split(" ")[0]))}),document.querySelectorAll("img, input[type=image]").forEach(e=>{const t=e.src.trim();if(!t.startsWith("data:image/"))n(e,p(t))}),document.querySelectorAll("img[srcset], picture > source[srcset]").forEach(e=>{const t=/[\s\n]*(.+?\.[^\s,]+)(\s+[\d.]+[wx]\s*)?,?/g;let s;while(s=t.exec(e.srcset.trim()))n(e,p(s[1]))});for(const e of Resource.ASSETS.image.keys())n(null,e);for(const e of Resource.ASSETS.rawData.values())if(!e.pathname){const{base64:t,content:s,filename:o}=e;let a,l=e.mimeType;if(t){if(i){const e=i.format;if(e&&(null==l?void 0:l.startsWith("image/")))switch(e){case"png":case"jpeg":case"bmp":case"gif":case"tiff":l=`@${e}:${l}`;break}const s=m(i.pathname||"","/").replace(/\\/g,"/");if(a=n(null,p(h(s+(""!==s?"/":"")+o)[1]+o,location.href),l),a){a.base64=t;continue}}a={pathname:"__generated__/base64",filename:o,mimeType:l,base64:t}}else if(s&&l)a={pathname:"__generated__/"+l.split("/").pop(),filename:o,content:s};else continue;if(this.validFile(a))a.mimeType=l,v.call(this,a,[]),r.push(a)}return r}getVideoAssets(e){return this.getRawAssets("video",e)}getAudioAssets(e){return this.getRawAssets("audio",e)}getFontAssets(e){const t=null==e?void 0:e.preserveCrossOrigin,s=[];for(const e of Resource.ASSETS.fonts.values())for(let i=0;i<e.length;++i){const r=e[i].srcUrl;if(r){const e=File.parseUri(r,{preserveCrossOrigin:t});if(this.validFile(e))v.call(this,e,[]),s.push(e)}}return s}getDataMap(e){if(e.removeUnusedStyles)return{unusedStyles:Array.from(this.application.processing.unusedStyles)}}getCopyQueryParameters(e){return e.productionRelease?"&release=1":""}getArchiveQueryParameters(e){return e.productionRelease?"&release=1":""}validFile(e){if(e){const t=e.pathname+"/"+e.filename;return!this.outputFileExclusions.some(e=>e.test(t))}return false}getRawAssets(e,t){const s=null==t?void 0:t.preserveCrossOrigin,i=[];return document.querySelectorAll(e).forEach(e=>{var t;const r=new Map;switch(g(e,r),e.tagName){case"VIDEO":case"AUDIO":e.querySelectorAll("source, track").forEach(e=>g(e,r));break}for(const[e,n]of r.entries()){const r=null===(t=f("saveTo",e.dataset.chromeFile))||void 0===t?void 0:t[0],o=File.parseUri(n,{preserveCrossOrigin:s,saveAs:r,saveTo:true});if(this.validFile(o))v.call(this,o,d(e)),i.push(o)}}),i}getAssetsAll(e={}){const t=this.getHtmlPage(e).concat(this.getLinkAssets(e));if(e.saveAsWebPage)for(let e=0;e<t.length;++e){const s=t[e],i=s.mimeType;switch(i){case"text/html":case"application/xhtml+xml":case"text/css":s.mimeType="@"+i;break}}return t.concat(this.getScriptAssets(e)).concat(this.getImageAssets(e)).concat(this.getVideoAssets(e)).concat(this.getAudioAssets(e)).concat(this.getRawAssets("object",e)).concat(this.getRawAssets("embed",e)).concat(this.getFontAssets(e))}get outputFileExclusions(){let e=this._outputFileExclusions;if(void 0===e)e=this.userSettings.outputFileExclusions.map(e=>function(e){return e=e.trim().replace(/([.|/\\{}()?])/g,(e,...t)=>"\\"+t[0]).replace(/\*/g,".*?"),new RegExp(e+"$")}(e)),this._outputFileExclusions=e;return e}get userSettings(){return this.resource.userSettings}get application(){return this.resource.application}}class View extends squared.base.Node{constructor(e,t,s){super(e,t,s),this._cached={},this.init()}}const S=e=>"("+Math.max(e.largerThan,0)+","+(e.smallerThan<1/0?e.smallerThan:"*")+")";class Extension extends squared.base.Extension{static getCompressOptions(e){const t=(e.whenSmaller?"%":"")+S(e);return"(0,*)"!==t?t:void 0}static getConvertOptions(e,t){let s="";if(t.replaceWith)s+="@";else if(t.whenSmaller)s+="%";return s+=S(t),e+("(0,*)"!==s?s:"")+(t.opacity<1?`|${t.opacity}|`:"")+":"}processFile(e,t=false){return false}}const{safeNestedArray:E}=squared.lib.util;class Brotli extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["text/css","text/javascript","text/plain","text/csv","text/vtt","application/json","application/javascript","application/ld+json","application/xml"],largerThan:0,smallerThan:1/0,whenSmaller:true,level:11}}processFile(e,t=false){if(!t){const s=e.mimeType;if(s){const e=this.options.mimeTypes;t="*"===e||Array.isArray(e)&&e.includes(s)}}if(t)return E(e,"compress").push({format:"br",level:this.options.level,condition:Extension.getCompressOptions(this.options)}),true;else return false}}const{safeNestedArray:x}=squared.lib.util;class Gzip extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["text/css","text/javascript","text/plain","text/csv","text/vtt","application/json","application/javascript","application/ld+json","application/xml"],largerThan:0,smallerThan:1/0,whenSmaller:true,level:9}}processFile(e,t=false){if(!t){const s=e.mimeType;if(s){const e=this.options.mimeTypes;t="*"===e||Array.isArray(e)&&e.includes(s)}}if(t)return x(e,"compress").push({format:"gz",level:this.options.level,condition:Extension.getCompressOptions(this.options)}),true;else return false}}const{safeNestedArray:O}=squared.lib.util;class Jpeg extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["image/jpeg"],largerThan:0,smallerThan:1/0,whenSmaller:true,level:100}}processFile(e,t=false){if(!t){const s=e.mimeType;if(s){const e=this.options.mimeTypes;t=s.includes("jpeg:")||"*"===e&&s.includes("image/")||Array.isArray(e)&&!!e.find(e=>s.endsWith(e))}}if(t)return O(e,"compress").push({format:"png",condition:Extension.getCompressOptions(this.options)},{format:"jpeg",level:this.options.level}),true;else return false}}const{safeNestedArray:b}=squared.lib.util;class Png extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["image/png"],largerThan:0,smallerThan:1/0,whenSmaller:true}}processFile(e,t=false){if(!t){const s=e.mimeType;if(s){const e=this.options.mimeTypes;t=s.includes("png:")||"*"===e&&s.includes("image/")||Array.isArray(e)&&!!e.find(e=>s.endsWith(e))}}if(t)return b(e,"compress").push({format:"png",condition:Extension.getCompressOptions(this.options)}),true;else return false}}class Bmp extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["image/png","image/jpeg","image/gif","image/tiff"],largerThan:0,smallerThan:1/0,whenSmaller:false,replaceWith:true,opacity:1}}processFile(e,t=false){const s=e.mimeType;if(s&&!/bmp[(%@:]/.test(s)){const i=this.options.mimeTypes;if(t||Array.isArray(i)&&i.find(e=>s.endsWith(e)))return e.mimeType=Extension.getConvertOptions("bmp",this.options)+s,true}return false}}class Jpeg$1 extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["image/png","image/bmp","image/gif","image/tiff"],largerThan:0,smallerThan:1/0,whenSmaller:false,replaceWith:true,opacity:1}}processFile(e,t=false){const s=e.mimeType;if(s&&!/jpeg[(%@:]/.test(s)){const i=this.options.mimeTypes;if(t||Array.isArray(i)&&i.find(e=>s.endsWith(e)))return e.mimeType=Extension.getConvertOptions("jpeg",this.options)+s,true}return false}}class Png$1 extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["image/jpeg","image/bmp","image/gif","image/tiff"],largerThan:0,smallerThan:1/0,whenSmaller:false,replaceWith:true,opacity:.5}}processFile(e,t=false){const s=e.mimeType;if(s&&!/png[(%@:]/.test(s)){const i=this.options.mimeTypes;if(t||Array.isArray(i)&&i.find(e=>s.endsWith(e)))return e.mimeType=Extension.getConvertOptions("png",this.options)+s,true}return false}}class Gif extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["image/png","image/jpeg","image/bmp","image/tiff"],largerThan:0,smallerThan:1/0,whenSmaller:false,replaceWith:true,opacity:1}}processFile(e,t=false){const s=e.mimeType;if(s&&!/gif[(%@:]/.test(s)){const i=this.options.mimeTypes;if(t||Array.isArray(i)&&i.find(e=>s.endsWith(e)))return e.mimeType=Extension.getConvertOptions("gif",this.options)+s,true}return false}}class Tiff extends Extension{constructor(){super(...arguments),this.options={mimeTypes:["image/png","image/jpeg","image/gif","image/bmp"],largerThan:0,smallerThan:1/0,whenSmaller:false,replaceWith:true,opacity:1}}processFile(e,t=false){const s=e.mimeType;if(s&&!/tiff[(%@:]/.test(s)){const i=this.options.mimeTypes;if(t||Array.isArray(i)&&i.find(e=>s.endsWith(e)))return e.mimeType=Extension.getConvertOptions("tiff",this.options)+s,true}return false}}const C={builtInExtensions:[],preloadImages:false,excludePlainText:true,createQuerySelectorMap:true,showErrorMessages:false,outputFileExclusions:[],outputEmptyCopyDirectory:false,outputArchiveName:"chrome-data",outputArchiveFormat:"zip"};var _=Object.freeze({__proto__:null});const F={COMPRESS_BROTLI:"chrome.compress.brotli",COMPRESS_GZIP:"chrome.compress.gzip",COMPRESS_PNG:"chrome.compress.png",COMPRESS_JPEG:"chrome.compress.jpeg",CONVERT_PNG:"chrome.convert.png",CONVERT_JPEG:"chrome.convert.jpeg",CONVERT_BMP:"chrome.convert.bmp",CONVERT_GIF:"chrome.convert.gif",CONVERT_TIFF:"chrome.convert.tiff"};var w=Object.freeze({__proto__:null,EXT_CHROME:F});const{util:P,session:R}=squared.lib,{flatArray:M,isString:N,isObject:I,promisify:j}=P,{frameworkNotInstalled:q}=R;let k,G,V,L,W=false;function H(e,t){let s=function(e,t){if(t)return L.get(e);else L.clear()}(e,t);if(void 0===s)k.queryState=1,(async()=>{await k.parseDocument(e)})(),s=L.get(e),k.queryState=0;return s||null}function B(e){k.queryState=2;let t=false;const s=e.length,i=new Array(s);if((async()=>{for(let r=0;r<s;++r){const s=e[r];let n=L.get(s);if(n)i[r]=n;else if(await k.parseDocument(s),n=L.get(s),n)i[r]=n;else t=true}})(),t)M(i);return k.queryState=0,i}function D(e,t,s,i){if(I(t)){const s=t.assets;if(s)e=e.concat(s)}else t=void 0;return Object.assign(Object.assign({},t),{assets:e,directory:s,filename:i})}const J={base:{Application:Application,Controller:Controller,File:File,Resource:Resource,View:View},lib:{constant:w,enumeration:_},extensions:{compress:{Brotli:Brotli,Gzip:Gzip,Jpeg:Jpeg,Png:Png},convert:{Bmp:Bmp,Gif:Gif,Jpeg:Jpeg$1,Png:Png$1,Tiff:Tiff}},system:{getElementById(e,t=true){if(k){const s=document.getElementById(e);if(s)return H(s,t)}return null},querySelector(e,t=true){if(k){const s=document.querySelector(e);if(s)return H(s,t)}return null},querySelectorAll(e,t=true){if(k){const s=document.querySelectorAll(e);if(s.length){if(!t)L.clear();return B(s)}}return[]},getElement(e,t=false){if(k)return H(e,t);else return null},getElementMap:()=>(null==G?void 0:G.elementMap)||new Map,clearElementMap(){null==G||G.elementMap.clear()},copyHtmlPage(e,t){if(N(e))null==V||V.copying(D(V.getHtmlPage(t),t,e))},copyScriptAssets(e,t){if(N(e))null==V||V.copying(D(V.getScriptAssets(t),t,e))},copyLinkAssets(e,t){if(N(e))null==V||V.copying(D(V.getLinkAssets(t),t,e))},copyImageAssets(e,t){if(V&&N(e))V.copying(D(V.getImageAssets(t),t,e))},copyVideoAssets(e,t){if(N(e))null==V||V.copying(D(V.getVideoAssets(t),t,e))},copyAudioAssets(e,t){if(N(e))null==V||V.copying(D(V.getAudioAssets(t),t,e))},copyFontAssets(e,t){if(N(e))null==V||V.copying(D(V.getFontAssets(t),t,e))},saveHtmlPage(e,t){null==V||V.archiving(D(V.getHtmlPage(t),t,void 0,(e||k.userSettings.outputArchiveName)+"-html"))},saveScriptAssets(e,t){null==V||V.archiving(D(V.getScriptAssets(t),t,void 0,(e||k.userSettings.outputArchiveName)+"-script"))},saveLinkAssets(e,t){null==V||V.archiving(D(V.getLinkAssets(t),t,void 0,(e||k.userSettings.outputArchiveName)+"-link"))},saveImageAssets(e,t){null==V||V.archiving(D(V.getImageAssets(t),t,void 0,(e||k.userSettings.outputArchiveName)+"-image"))},saveVideoAssets(e,t){null==V||V.archiving(D(V.getVideoAssets(t),t,void 0,(e||k.userSettings.outputArchiveName)+"-video"))},saveAudioAssets(e,t){null==V||V.archiving(D(V.getAudioAssets(t),t,void 0,(e||k.userSettings.outputArchiveName)+"-audio"))},saveFontAssets(e,t){null==V||V.archiving(D(V.getFontAssets(t),t,void 0,(e||k.userSettings.outputArchiveName)+"-font"))}},create(){const e=F;return k=new Application(4,View,Controller,Resource),G=k.controllerHandler,V=new File,k.resourceHandler.fileHandler=V,L=G.elementMap,Object.assign(k.builtInExtensions,{[e.COMPRESS_BROTLI]:new Brotli(e.COMPRESS_BROTLI,4),[e.COMPRESS_GZIP]:new Gzip(e.COMPRESS_GZIP,4),[e.COMPRESS_JPEG]:new Jpeg(e.COMPRESS_JPEG,4),[e.COMPRESS_PNG]:new Png(e.COMPRESS_PNG,4),[e.CONVERT_BMP]:new Bmp(e.CONVERT_BMP,4),[e.CONVERT_GIF]:new Gif(e.CONVERT_GIF,4),[e.CONVERT_JPEG]:new Jpeg$1(e.CONVERT_JPEG,4),[e.CONVERT_PNG]:new Png$1(e.CONVERT_PNG,4),[e.CONVERT_TIFF]:new Tiff(e.CONVERT_TIFF,4)}),W=true,{application:k,framework:4,userSettings:Object.assign({},C)}},cached(){if(W)return{application:k,framework:4,userSettings:k.userSettings};else return J.create()},getElementById:(e,t=true)=>{if(k){const s=document.getElementById(e);if(s)return j(H)(s,t)}return q()},querySelector:(e,t=true)=>{if(k){const s=document.querySelector(e);if(s)return j(H)(s,t)}return q()},querySelectorAll:(e,t=true)=>{if(k){const s=document.querySelectorAll(e);if(s.length){if(!t)L.clear();return j(B)(s)}}return q()},getElement:(e,t=false)=>{if(k)return j(H)(e,t);else return q()},saveAsWebPage:(e,t)=>{if(V){(t=!I(t)?{}:Object.assign({},t)).saveAsWebPage=true;const s=k.userSettings,i=s.preloadImages;return s.preloadImages=false,k.reset(),k.parseDocument(document.body).then(r=>(V.saveToArchive(e||k.userSettings.outputArchiveName,t),s.preloadImages=i,r))}return q()}};return J}));
