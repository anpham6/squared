!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).squared={})}(this,(function(e){"use strict";const t="-?(?:\\d+(?:\\.\\d+)?|\\d*\\.\\d+)",r="px|em|pt|rem|ch|pc|vw|vh|vmin|vmax|mm|cm|in",n={DECIMAL:t,PERCENT:"-?\\d+(?:\\.\\d+)?%",LENGTH:`(${t})(${r})?`,LENGTH_PERCENTAGE:`(${t}(?:${r}|%)?)`,UNIT_LENGTH:r,DATAURI:"(?:data:([^,]+),)?(.*?)",CSS_SELECTOR_LABEL:"[\\.#]?[\\w\\-]+",CSS_SELECTOR_PSEUDO_ELEMENT:"::[\\w\\-]+",CSS_SELECTOR_PSEUDO_CLASS:":[\\w\\-]+(?:\\(\\s*([^()]+)\\s*\\)|\\(\\s*([\\w\\-]+\\(.+?\\))\\s*\\))?",CSS_SELECTOR_ATTR:"\\[([\\w\\-]+)(?:([~^$*|])?=(?:\"([^\"]+)\"|'([^']+)'|([^\\s\\]]+))\\s*(i)?)?\\]",CSS_ANGLE:`(${t})(deg|rad|turn|grad)`,CSS_TIME:`(${t})(s|ms)`,CSS_CALC:"calc\\((.+)\\)"},s={DECIMAL:new RegExp(`^${n.DECIMAL}$`),LENGTH:new RegExp(`^${n.LENGTH}$`),PERCENT:new RegExp(`^${n.PERCENT}$`),LENGTH_PERCENTAGE:new RegExp(`^${n.LENGTH_PERCENTAGE}$`)},i={PX:/\dpx$/,ANGLE:new RegExp(`^${n.CSS_ANGLE}$`),TIME:new RegExp(`^${n.CSS_TIME}$`),CALC:new RegExp(`^${n.CSS_CALC}$`),VAR:/var\((--[A-Za-z\d-]+)\s*(?!,\s*var\()(?:,\s*([a-z-]+\([^)]+\)|[^)]+))?\)/,URL:/^url\((?:"(.+)"|(.+))\)$/,CUSTOM_PROPERTY:/^\s*var\(.+\)\s*$/,HEX:/[A-Za-z\d]{3,8}/,RGBA:/rgba?\((\d+),\s+(\d+),\s+(\d+)(?:,\s+([\d.]+))?\)/,HSLA:/hsla?\((\d+),\s+(\d+)%,\s+(\d+)%(?:,\s+([\d.]+))?\)/,SELECTOR_G:new RegExp(`\\s*((?:${n.CSS_SELECTOR_ATTR}|${n.CSS_SELECTOR_PSEUDO_CLASS}|${n.CSS_SELECTOR_PSEUDO_ELEMENT}|${n.CSS_SELECTOR_LABEL})+|[>~+*])\\s*`,"g"),SELECTOR_LABEL:new RegExp(n.CSS_SELECTOR_LABEL),SELECTOR_PSEUDO_ELEMENT:new RegExp(n.CSS_SELECTOR_PSEUDO_ELEMENT),SELECTOR_PSEUDO_CLASS:new RegExp(n.CSS_SELECTOR_PSEUDO_CLASS),SELECTOR_ATTR:new RegExp(n.CSS_SELECTOR_ATTR)},a={ATTRIBUTE:/([^\s]+)="([^"]+)"/,ENTITY:/&#?[A-Za-z\d]+;/,SEPARATOR:/\s*,\s*/,DELIMITER:/\s*;\s*/,BREAKWORD_G:/([A-Za-z\d]+|&#?[A-Za-z\d]+;)/g,NONWORD_G:/[^A-Za-z\d]+/g,TAGNAME_G:/(<([^>]+)>)/g},o={SPACE:/\s+/,LEADINGSPACE:/^\s+/,TRAILINGSPACE:/\s+$/,TRAILINGZERO:/\.(\d*?)(0+)$/,LEADINGNEWLINE:/^\s*\n+/,LEADINGNUMBER:/^\d/,LOWERCASE:/^[a-z]+$/,WORD:/\w/,UNITZERO:/^\s*0[a-z]*\s*$/,WORDDASH:/[a-zA-Z\d]/},l={PROTOCOL:/^([A-Za-z]{3,}:\/\/)([A-Za-z\d\-.]+)(:\d+)?(\/.*)?$/},c={ENTITY:/&#(\d+);/g,NONENTITY:/&(?!#?[A-Za-z\d]{2,};)/g};var u=Object.freeze({__proto__:null,STRING:n,FILE:{NAME:/[/\\]?(([^/\\]+?)\.([^/\\]+?))$/,SVG:/\.svg$/i},UNIT:s,CSS:i,XML:a,CHAR:o,COMPONENT:l,ESCAPE:c});const h=[8,4,4,4,12],g="ABCDEFGHIJKLMNOPQRSTUVWXYZ",d=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],f={},p={};function b(e){switch(L(e.trim(),".").toLowerCase()){case"aac":return"audio/aac";case"abw":return"application/x-abiword";case"apng":return"image/apng";case"arc":return"application/x-freearc";case"avi":return"video/x-msvideo";case"azw":return"application/vnd.amazon.ebook";case"bin":return"application/octet-stream";case"bmp":return"image/bmp";case"bz":return"application/x-bzip";case"bz2":return"application/x-bzip2";case"csh":return"application/x-csh";case"css":return"text/css";case"csv":return"text/csv";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"eot":case"embedded-opentype":return"application/vnd.ms-fontobject";case"epub":return"application/epub+zip";case"flac":return"audio/flac";case"gif":return"image/gif";case"gsm":return"audio/gsm";case"heic":return"image/heic";case"heif":return"image/heif";case"htm":case"html":return"text/html";case"cur":case"ico":return"image/x-icon";case"ics":return"text/calendar";case"jar":return"application/java-archive";case"jpeg":case"jpg":case"jfif":case"pjpeg":case"pjp":return"image/jpeg";case"js":case"mjs":return"text/javascript";case"json":return"application/json";case"jsonp":return"application/javascript";case"jsonld":return"application/ld+json";case"mid":case"midi":return"audio/midi";case"mkv":return"video/x-matroska";case"mp3":case"mpeg":return"audio/mpeg";case"mp4":return"video/mp4";case"mpkg":return"application/vnd.apple.installer+xml";case"odp":return"application/vnd.oasis.opendocument.presentation";case"ods":return"application/vnd.oasis.opendocument.spreadsheet";case"odt":return"application/vnd.oasis.opendocument.text";case"oga":case"spx":case"ogg":return"audio/ogg";case"ogv":case"ogm":return"video/ogg";case"ogx":return"application/ogg";case"otf":case"opentype":return"font/otf";case"png":return"image/png";case"pdf":return"application/pdf";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"rar":return"application/x-rar-compressed";case"rtf":return"application/rtf";case"sh":return"application/x-sh";case"svg":return"image/svg+xml";case"swf":return"application/x-shockwave-flash";case"tar":return"application/x-tar";case"tif":case"tiff":return"image/tiff";case"ts":return"video/mp2t";case"ttf":case"truetype":return"font/ttf";case"txt":return"text/plain";case"vsd":return"application/vnd.visio";case"wav":return"audio/wav";case"weba":case"webm":return"audio/webm";case"webp":return"image/webp";case"woff":return"font/woff";case"woff2":return"font/woff2";case"xhtml":return"application/xhtml+xml";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xml":return"application/xml";case"xul":return"application/vnd.mozilla.xul+xml";case"zip":return"application/zip";case"3gp":return"video/3gpp";case"3g2":return"video/3gpp2";case"7z":return"application/x-7z-compressed";default:return""}}function m(e,t,r){return 0===t?e.substring(r):e.substring(0,t)+e.substring(t+r)}function E(e,t="-"){let r=e.indexOf(t);if(-1===r)return e;const n=f[e];if(n)return n;let s=e.substring(0,r),i="";const a=e.length;while(r<a){const n=e.charAt(r++);n!==t&&(s+=i===t?n.toUpperCase():n),i=n}return f[e]=s,s}function v(e){return parseFloat(e)||0}function w(e){if(e>=0){let t="";const r=g.length;while(e>=r){const n=Math.floor(e/r);if(n>1&&n<=r)t+=g.charAt(n-1),e-=n*r;else if(n>0)return t+="Z",t+=w(e-=Math.pow(r,2)),t;const s=e%r;t+=g.charAt(s),e-=s+r}return g.charAt(e)+t}return e.toString()}function y(e){const t=e.toString().split("");let r="",n=3;while(n--)r=(d[parseInt(t.pop())+10*n]||"")+r;return"M".repeat(parseInt(t.join("")))+r}function k(e,t,r="",n="(",s=")"){if(r.length>1)return[];S(t)||(t=n);const i=t!==n,a=i?t+n:n,o=[],l=e=>{e.split(r).forEach(e=>{""!==(e=e.trim())&&o.push(e)})};let c=0,u=-1;const h=e.length;while(-1!==(u=e.indexOf(a,c))){let a="";if(u!==c){let n=e.substring(c,u);if(r){if(n=n.trim(),""!==n&&(l(n),!i)){const r=o[o.length-1];e.substring(u-r.length,u+1)===r+t&&(a=r,o.length--)}}else o.push(n)}let g=false;for(let l=u+(i?t.length:0)+1,d=1,f=0;l<h;++l){switch(e.charAt(l)){case n:++d;break;case s:++f}if(d===f){if(r){for(;l<h;++l)if(e.charAt(l)===r)break;c=l+1,o.push(a+e.substring(u,l).trim())}else c=l+1,o.push(e.substring(u,c));if(c===h)return o;g=true;break}}if(!g)return[]}if(c<h){const t=e.substring(c);if(r){const e=t.trim();""!==e&&l(e)}else o.push(t)}return o}function x(e,t){return(e&t)===t}function A(e){return"string"==typeof e&&s.DECIMAL.test(e.trim())}function S(e){return"string"==typeof e&&""!==e.trim()}function R(e){return"object"==typeof e&&null!==e}function F(e){return R(e)&&e.constructor===Object}function T(e,t=[],r=false){return e.forEach(e=>{Array.isArray(e)?t.push(T(e,[],r)):r&&F(e)?t.push(C(e,{},true)):t.push(e)}),t}function C(e,t={},r=false){for(const n in e){const s=e[n];Array.isArray(s)?t[n]=r?T(s,[],true):s:F(s)?t[n]=C(s,{},r):t[n]=s}return t}function N(e,t){if(e=e.trim(),!l.PROTOCOL.test(e)){const r=location.origin;let n=((null==t?void 0:t.replace(r,""))||location.pathname).split("/");if(n.pop(),"/"===e.charAt(0))e=r+e;else if(e.startsWith("../")){const t=[];let s=0;e.split("/").forEach(e=>{".."===e?s++:t.push(e)}),n=n.slice(0,Math.max(n.length-s,0)).concat(t),e=r+n.join("/")}else e=r+n.join("/")+"/"+e}return e}function P(e,t){return e.replace(new RegExp(`^${t}+`),"")}function I(e,t){return e.replace(new RegExp(t+"+$"),"")}function L(e,...t){for(const r of t){const t=e.lastIndexOf(r);if(-1!==t)return e.substring(t+1)}return e}function _(e){return null!=e&&""!==e}function B(e,t,r=1){return t>=e-r&&t<=e+r}function O(e,t){let r=0;for(const n of e)if(t(n,r++,e))return n}function M(e,t){const r=e.length,n=new Array(r),s=new Array(r);let i=0,a=0,o=0;while(i<r){const r=e[i];t(r,i++,e)?n[a++]=r:s[o++]=r}return n.length=a,s.length=o,[n,s]}function D(e,t){const r=e.length;if(r){let n,s=0;while(s<r){const r=t(e[s],s,e);if(0==s++)n=r;else if(r!==n)return false}return true}return false}function z(e,t,r="\n",n=true){let s="";const i=e.length;let a=0;while(a<i){const n=t(e[a],a++,e);""!==n&&(s+=n+r)}return n?s:s.substring(0,s.length-r.length)}function j(e,t,r=0,n=Number.POSITIVE_INFINITY){r=Math.max(r,0);const s=Math.min(e.length,n);let i=r;while(i<s){if(true===t(e[i],i++,e))return Number.POSITIVE_INFINITY}return s}function $(e,t){const r=e.length,n=new Array(r);let s=0,i=0;while(s<r){const r=t(e[s],s++,e);_(r)&&(n[i++]=r)}return n.length=i,n}function W(e,t){const r=e.length;let n=0;while(n<r)e[n]=t(e[n],n++,e);return e}function G(e,t){const r=e.length,n=new Array(r);let s=0;while(s<r)n[s]=t(e[s],s++,e);return n}var H=Object.freeze({__proto__:null,hasMimeType:function(e,t){return"*"===e||e.includes(b(t))},parseMimeType:b,fromMimeType:function(e){switch(e){case"audio/aac":return"aac";case"application/x-abiword":return"abw";case"image/apng":return"apng";case"application/x-freearc":return"arc";case"video/x-msvideo":return"avi";case"application/vnd.amazon.ebook":return"azw";case"application/octet-stream":return"bin";case"image/bmp":return"bmp";case"application/x-bzip":return"bz";case"application/x-bzip2":return"bz2";case"application/x-csh":return"csh";case"text/css":return"css";case"text/csv":return"csv";case"application/msword":return"doc";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"docx";case"application/vnd.ms-fontobject":return"eot";case"application/epub+zip":return"epub";case"audio/flac":return"flac";case"image/gif":return"gif";case"audio/gsm":return"gsm";case"image/heic":return"heic";case"image/heif":return"heif";case"text/html":return"html";case"image/x-icon":return"ico";case"text/calendar":return"ics";case"application/java-archive":return"jar";case"image/jpeg":return"jpg";case"text/javascript":return"js";case"application/json":return"json";case"application/ld+json":return"jsonld";case"audio/midi":return"mid";case"video/x-matroska":return"mkv";case"audio/mpeg":return"mp3";case"video/mp4":return"mp4";case"application/vnd.apple.installer+xml":return"mpkg";case"application/vnd.oasis.opendocument.presentation":return"odp";case"application/vnd.oasis.opendocument.spreadsheet":return"ods";case"application/vnd.oasis.opendocument.text":return"odt";case"audio/ogg":return"ogg";case"video/ogg":return"ogv";case"application/ogg":return"ogx";case"font/otf":return"otf";case"image/png":return"png";case"application/pdf":return"pdf";case"application/vnd.ms-powerpoint":return"ppt";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"pptx";case"application/x-rar-compressed":return"rar";case"application/rtf":return"rtf";case"application/x-sh":return"sh";case"image/svg+xml":return"svg";case"application/x-shockwave-flash":return"swf";case"application/x-tar":return"tar";case"image/tiff":return"tif";case"video/mp2t":return"ts";case"font/ttf":return"ttf";case"text/plain":return"txt";case"application/vnd.visio":return"vsd";case"audio/wav":return"wav";case"audio/webm":return"video/webm";case"image/webp":return"webp";case"font/woff":return"woff";case"font/woff2":return"woff2";case"application/xhtml+xml":return"xhtml";case"application/vnd.ms-excel":return"xls";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"xlsx";case"text/xml":return"xml";case"application/vnd.mozilla.xul+xml":return"xul";case"application/zip":return"zip";case"video/3gpp":return"3gp";case"video/3gpp2":return"3g2";case"application/x-7z-compressed":return"7z";default:return""}},capitalize:function(e,t){return false===t?e.charAt(0).toLowerCase()+e.substring(1):e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},capitalizeString:function(e){const t=e.split("");let r;a.BREAKWORD_G.lastIndex=0;while(null!==(r=a.BREAKWORD_G.exec(e))){const e=r.index;void 0!==e&&(t[e]=r[1].charAt(0).toUpperCase())}return t.join("")},lowerCaseString:function(e){let t,r=e;a.BREAKWORD_G.lastIndex=0;while(null!==(t=a.BREAKWORD_G.exec(e))){const n=t.index;if(void 0!==n){const s=t[1];if(!a.ENTITY.test(s)){const i=n+s.length;r=(n>0?r.substring(0,t.index):"")+e.substring(n,i).toLowerCase()+r.substring(i)}}}return r},spliceString:m,convertUnderscore:function(e){const t=p[e];if(t)return t;let r=e[0].toLowerCase(),n=true;const s=e.length;let i=1;while(i<s){const t=e.charAt(i++),s=t===t.toUpperCase();r+=n&&s&&"_"!==t?"_"+t.toLowerCase():t,n=!s}return p[e]=r,r},convertCamelCase:E,convertWord:function(e,t){let r="";const n=t?o.WORDDASH:o.WORD,s=e.length;let i=0;while(i<s){const t=e.charAt(i++);r+=n.test(t)?t:"_"}return r},convertInt:function(e){return parseInt(e)||0},convertFloat:v,convertAlpha:w,convertRoman:y,convertEnum:function(e,t,r){for(const n of Object.keys(t))if(e===t[n])return r[n];return""},randomUUID:function(e="-"){let t="";for(let r=0;r<5;++r){r>0&&(t+=e);const n=h[r];for(let e=0;e<n;++e)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()))}return t},formatString:function(e,...t){const r=t.length;let n=0;while(n<r)e=e.replace(`{${n}}`,t[n++]);return e},delimitString:function(e,...t){const r=e.value||"";if(""===r&&1===t.length)return t[0];const n=e.delimiter||"|",s=e.not||[],i=e.remove||false,a=""!==r?r.split(n):[],o=t.length;let l=-1;while(++l<o){const e=t[l];if(""!==e){if(a.includes(s[l]))continue;const t=a.findIndex(t=>t===e);-1===t?a.push(e):i&&a.splice(t,1)}}return e.sort&&a.sort(),a.join(n)},splitEnclosing:k,hasBit:x,isNumber:A,isString:S,isArray:function(e){return Array.isArray(e)&&e.length>0},isObject:R,isPlainObject:F,isEqual:function e(t,r){if(t===r)return true;if(Array.isArray(t)&&Array.isArray(r)){const e=t.length;if(e===r.length){let n=0;while(n<e)if(t[n]!==r[n++])return false;return true}}else if(F(t)&&F(r)&&Object.keys(t).length===Object.keys(r).length){for(const n in t){const s=t[n],i=r[n];if(s!==i){if(F(s)&&F(i)&&e(s,i))continue;return false}}return true}return false},includes:function(e,t,r=a.SEPARATOR){if(e)for(const n of e.split(r))if(n===t)return true;return false},cloneInstance:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)},cloneArray:T,cloneObject:C,resolvePath:N,trimBoth:function(e,t){const r=new RegExp(`^(${t})(.*?)\\1$`).exec(e);return r?r[2]:e},trimString:function(e,t){return P(I(e,t),t)},trimStart:P,trimEnd:I,appendSeparator:function(e,t,r="/"){return e=e.trim(),t=t.trim(),e+(""===e||""===t||e.endsWith(r)||t.startsWith(r)?"":r)+t},fromLastIndexOf:L,searchObject:function(e,t){const r=[];if("object"==typeof t)for(const n in t){const s=t[n];_(e[s])&&r.push([s,e[s]])}else{const n=/^\*.+\*$/.test(t)?e=>e.includes(t.replace(/^\*/,"").replace(/\*$/,"")):t.startsWith("*")?e=>e.endsWith(t.replace(/^\*/,"")):t.endsWith("*")?e=>e.startsWith(t.replace(/\*$/,"")):e=>e===t;for(const t in e)n(t)&&r.push([t,e[t]])}return r},hasValue:_,withinRange:B,aboveRange:function(e,t,r=1){return e+r>t},belowRange:function(e,t,r=1){return e-r<t},assignEmptyProperty:function(e,t){for(const r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e},assignEmptyValue:function(e,...t){const r=t.length;if(r>1){let n=e,s=0;do{const e=t[s],i=n[e];if(s===r-2){_(i)||(n[e]=t[s+1]);break}if(!S(e))break;if(null==i)n={},n[e]=n;else{if(!R(i))break;n=i}}while(++s)}},findSet:O,sortNumber:function(e,t=true){return t?e.sort((e,t)=>e<t?-1:1):e.sort((e,t)=>e>t?-1:1)},safeNestedArray:function(e,t){let r=e[t];return null==r&&(r=[],e[t]=r),r},safeNestedMap:function(e,t){let r=e[t];return null==r&&(r={},e[t]=r),r},sortArray:function(e,t,...r){return e.sort((e,n)=>{for(const s of r){let r=e,i=n;for(const e of s.split(".")){const t=r[e],n=i[e];if(void 0===t||void 0===n)return void 0===t&&void 0===n?0:void 0!==t?-1:1;r=t,i=n}if(r!==i)return t?r>i?1:-1:r<i?-1:1}return 0})},flatArray:function(e){let t=e.length,r=-1;while(++r<t){const n=e[r];null==n&&(e.splice(r--,1),t--)}return e},flatMultiArray:function e(t){let r=[];const n=t.length;let s=0;while(s<n){const n=t[s++];Array.isArray(n)?n.length&&(r=r.concat(e(n))):null!=n&&r.push(n)}return r},spliceArray:function(e,t,r,n){let s=e.length,i=-1,a=0;while(++i<s){const o=e[i];if(t(o,i,e)){if(r&&r(o,i,e),e.splice(i--,1),++a===n)break;s--}}return e},partitionArray:M,sameArray:D,joinArray:z,iterateArray:j,iterateReverseArray:function(e,t,r=0,n=Number.POSITIVE_INFINITY){r=Math.max(r,0);const s=Math.min(e.length,n);let i=s-1;while(i>=r){if(true===t(e[i],i--,e))return Number.POSITIVE_INFINITY}return s},conditionArray:function(e,t,r){const n=e.length;let s=-1;while(++s<n){const n=e[s];if(t(n,s,e)){if(false===r(n,s,e))break}}},flatMap:$,replaceMap:W,objectMap:G});class V{constructor(e){this._children=e||[]}[Symbol.iterator](){const e={done:false},t=this._children,r=t.length;let n=0;return{next:()=>(n<r?e.value=t[n++]:e.done=true,e)}}item(e,t){const r=this._children;return void 0!==e?t?e>=0&&e<r.length?(r[e]=t,t):void 0:r[e]:r[r.length-1]}append(e){return this._children.push(e),this}remove(...e){const t=[],r=this._children;return e.forEach(e=>{const n=r.length;let s=-1;while(++s<n)if(r[s]===e){r.splice(s,1),t.push(e);break}}),t}contains(e){return this._children.includes(e)}retain(e){return this._children=e,this}duplicate(){return this._children.slice(0)}clear(){return this._children.length=0,this}each(e){const t=this._children,r=t.length;let n=0;while(n<r)e(t[n],n++,t);return this}iterate(e,t,r){return j(this._children,e,t,r)}join(...e){let t=this._children;return e.forEach(e=>t=t.concat(e.children)),this._children=t,this}every(e){const t=this._children,r=t.length;if(r){let n=0;while(n<r)if(!e(t[n],n++,t))return false;return true}return false}same(e){return D(this._children,e)}partition(e){return M(this._children,e)}extract(e,t){let r,n;t&&({also:r,error:n}=t);const s=[],i=this._children;let a=i.length,o=-1;while(++o<a){const t=i[o];if(n&&n(t,o,i))break;e(t,o,i)&&(null==r||r.bind(t,t)(),s.push(t),i.splice(o--,1),a--)}return s}map(e){return G(this._children,e)}flatMap(e){return $(this._children,e)}findIndex(e,t){let r,n;t&&({also:r,error:n}=t);const s=this._children,i=s.length;let a=-1;while(++a<i){const t=s[a];if(n&&n(t,a,s))return-1;if(e(t,a,s))return null==r||r.bind(t,t)(),a}return-1}find(e,t){let r,n,s;t&&({also:n,error:r,cascade:s}=t);let i=false;const a=t=>{const o=t.children,l=o.length;let c=-1;while(++c<l){const t=o[c];if(r&&r(t,c,o)){i=true;break}if(e(t,c,o))return null==n||n.bind(t,t)(),t;if(s&&t instanceof V&&!t.isEmpty){const e=a(t);if(e)return null==n||n.bind(t,t)(),e;if(i)break}}};return a(this)}some(e,t){return void 0!==this.find(e,t)}cascade(e,t){let r,n;t&&({also:n,error:r}=t);let s=false;const i=t=>{let a=[];const o=t.children,l=o.length;let c=-1;while(++c<l){const t=o[c];if(r&&r(t,c,o)){s=true;break}if(e&&!e(t)||(null==n||n.bind(t,t)(),a.push(t)),t instanceof V&&!t.isEmpty&&(a=a.concat(i(t)),s))break}return a};return i(this)}sort(e){return e&&this._children.sort(e),this}concat(e){return this._children=this._children.concat(e),this}get children(){return this._children}get isEmpty(){return 0===this._children.length}get length(){return this._children.length}}function U(e){const t=navigator.platform.toLowerCase();return"string"==typeof e?t.includes(e.toLowerCase()):x(e,2)&&t.includes("win")||x(e,4)&&/(mac|iphone|ipad|ipod)/.test(t)}function X(e){const t=navigator.userAgent;let r;if(r=t.includes("Safari")&&!t.includes("Chrome")?4:t.includes("Firefox")?8:t.includes("Edge")?16:2,"string"==typeof e){const t=e.toUpperCase();e=0,t.includes("CHROME")&&(e|=2),t.includes("SAFARI")&&(e|=4),t.includes("FIREFOX")&&(e|=8),t.includes("EDGE")&&(e|=16)}return x(e,r)}function Y(){return 96*window.devicePixelRatio}var q=Object.freeze({__proto__:null,isWinEdge:function(){return X(16)&&U(2)},isPlatform:U,isUserAgent:X,getDeviceDPI:Y});const Z=/^(-?\d+\.\d+)e(-?\d+)$/,K=/^(-?\d+)\.(\d*?)(0{5,}|9{5,})\d*$/,Q={};function J(e){return Math.min.apply(null,e)}function ee(e,t,r=5){return r+=Math.floor(e).toString().length,e.toPrecision(r)===t.toPrecision(r)}function te(e,t=3){"string"==typeof e&&(e=parseFloat(e));const r=Math.floor(e);return e===r?e.toString():e>=0&&e<=1/Math.pow(10,t)||e<0&&e>=-1/Math.pow(10,t)?"0":(0!==r&&(t+=r.toString().length),ne(e.toPrecision(t)))}function re(e){if(e!==Math.floor(e)){const t=K.exec(function(e){const t=Z.exec(e.toString());return t?parseInt(t[2])>0?Number.MAX_SAFE_INTEGER.toString():"0":e.toString()}(e));if(t){const r=t[2];if(""===r)return Math.round(e);const n=t[1];return parseFloat(e.toPrecision(("0"!==n?n.length:0)+r.length))}}return e}function ne(e){const t=o.TRAILINGZERO.exec(e);return t?e.substring(0,e.length-t[t[1]?2:0].length):e}function se(e){return e*Math.PI/180}function ie(e,t){const r=t.x-e.x,n=t.y-e.y;return 180*Math.atan2(n,r)/Math.PI}function ae(e,t=0,r=1){return e<t?e=t:e>r&&(e=r),e}function oe(e,t=11){let r=e=se(e);for(let n=3,s=0;n<=t;n+=2)r+=Math.pow(e,n)/ce(n)*(s++%2==0?-1:1);return r}function le(e,t=10){e=se(e);let r=1;for(let n=2,s=0;n<=t;n+=2)r+=Math.pow(e,n)/ce(n)*(s++%2==0?-1:1);return r}function ce(e){let t=2,r=3;while(r<=e)t*=r++;return t}var ue=Object.freeze({__proto__:null,minArray:J,maxArray:function(e){return Math.max.apply(null,e)},equal:ee,moreEqual:function(e,t,r=5){return e>t||ee(e,t,r)},lessEqual:function(e,t,r=5){return e<t||ee(e,t,r)},truncate:te,truncateFraction:re,truncateTrailingZero:ne,truncateString:function(e,t=3){let r=Q[t];r?r.lastIndex=0:(r=new RegExp(`(-?\\d+\\.\\d{${t}})(\\d)\\d*`,"g"),Q[t]=r);let n,s=e;while(null!==(n=r.exec(e))){let e=n[1];parseInt(n[2])>=5&&(e=re(parseFloat(e)+1/Math.pow(10,t)).toString()),s=s.replace(n[0],ne(e))}return s},convertRadian:se,triangulate:function(e,t,r){const n=180-e-t;return[r/Math.sin(se(n))*Math.sin(se(e)),r/Math.sin(se(n))*Math.sin(se(t))]},absoluteAngle:ie,relativeAngle:function(e,t,r=90){let n=ie(e,t)+r;return n<0&&(n+=360),n},offsetAngleX:function(e,t){return t*Math.sin(se(e))},offsetAngleY:function(e,t){return t*Math.cos(se(e))*-1},clamp:ae,multipleOf:function(e,t=0,r){const n=e.length;if(n>1){const s=J(e);if((null==r?void 0:r.length)===n){let s=0;while(s<n)t=Math.max(t,r[s]+e[s++])}else r=void 0,t=Math.max(t,s);let i=0;while(i<t)i+=s;const a=(null==r?void 0:r[0])||0;let o=false;while(!o){const t=a+i;let l=1;while(l<n){if(t%((r?r[l]:0)+e[l++])!=0){o=false,i+=s;break}o=true}}return a+i}return e[0]},sin:oe,cos:le,tan:function(e,t=11){return oe(e,t)/le(e,t)},factorial:ce,hypotenuse:function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}});const he=[{value:"#000000",key:"black",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0}},{value:"#696969",key:"dimgray",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#696969",key:"dimgrey",rgb:{r:105,g:105,b:105},hsl:{h:0,s:0,l:41}},{value:"#808080",key:"gray",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#808080",key:"grey",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50}},{value:"#A9A9A9",key:"darkgray",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#A9A9A9",key:"darkgrey",rgb:{r:169,g:169,b:169},hsl:{h:0,s:0,l:66}},{value:"#C0C0C0",key:"silver",rgb:{r:192,g:192,b:192},hsl:{h:0,s:0,l:75}},{value:"#D3D3D3",key:"lightgray",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#D3D3D3",key:"lightgrey",rgb:{r:211,g:211,b:211},hsl:{h:0,s:0,l:83}},{value:"#DCDCDC",key:"gainsboro",rgb:{r:220,g:220,b:220},hsl:{h:0,s:0,l:86}},{value:"#F5F5F5",key:"whitesmoke",rgb:{r:245,g:245,b:245},hsl:{h:0,s:0,l:96}},{value:"#FFFFFF",key:"white",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100}},{value:"#BC8F8F",key:"rosybrown",rgb:{r:188,g:143,b:143},hsl:{h:0,s:25,l:65}},{value:"#CD5C5C",key:"indianred",rgb:{r:205,g:92,b:92},hsl:{h:0,s:53,l:58}},{value:"#A52A2A",key:"brown",rgb:{r:165,g:42,b:42},hsl:{h:0,s:59,l:41}},{value:"#B22222",key:"firebrick",rgb:{r:178,g:34,b:34},hsl:{h:0,s:68,l:42}},{value:"#F08080",key:"lightcoral",rgb:{r:240,g:128,b:128},hsl:{h:0,s:79,l:72}},{value:"#800000",key:"maroon",rgb:{r:128,g:0,b:0},hsl:{h:0,s:100,l:25}},{value:"#8B0000",key:"darkred",rgb:{r:139,g:0,b:0},hsl:{h:0,s:100,l:27}},{value:"#FF0000",key:"red",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50}},{value:"#FFFAFA",key:"snow",rgb:{r:255,g:250,b:250},hsl:{h:0,s:100,l:99}},{value:"#FFE4E1",key:"mistyrose",rgb:{r:255,g:228,b:225},hsl:{h:6,s:100,l:94}},{value:"#FA8072",key:"salmon",rgb:{r:250,g:128,b:114},hsl:{h:6,s:93,l:71}},{value:"#FF6347",key:"tomato",rgb:{r:255,g:99,b:71},hsl:{h:9,s:100,l:64}},{value:"#E9967A",key:"darksalmon",rgb:{r:233,g:150,b:122},hsl:{h:15,s:72,l:70}},{value:"#FF7F50",key:"coral",rgb:{r:255,g:127,b:80},hsl:{h:16,s:100,l:66}},{value:"#FF4500",key:"orangered",rgb:{r:255,g:69,b:0},hsl:{h:16,s:100,l:50}},{value:"#FFA07A",key:"lightsalmon",rgb:{r:255,g:160,b:122},hsl:{h:17,s:100,l:74}},{value:"#A0522D",key:"sienna",rgb:{r:160,g:82,b:45},hsl:{h:19,s:56,l:40}},{value:"#FFF5EE",key:"seashell",rgb:{r:255,g:245,b:238},hsl:{h:25,s:100,l:97}},{value:"#D2691E",key:"chocolate",rgb:{r:210,g:105,b:30},hsl:{h:25,s:75,l:47}},{value:"#8B4513",key:"saddlebrown",rgb:{r:139,g:69,b:19},hsl:{h:25,s:76,l:31}},{value:"#F4A460",key:"sandybrown",rgb:{r:244,g:164,b:96},hsl:{h:28,s:87,l:67}},{value:"#FFDAB9",key:"peachpuff",rgb:{r:255,g:218,b:185},hsl:{h:28,s:100,l:86}},{value:"#CD853F",key:"peru",rgb:{r:205,g:133,b:63},hsl:{h:30,s:59,l:53}},{value:"#FAF0E6",key:"linen",rgb:{r:250,g:240,b:230},hsl:{h:30,s:67,l:94}},{value:"#FFE4C4",key:"bisque",rgb:{r:255,g:228,b:196},hsl:{h:33,s:100,l:88}},{value:"#FF8C00",key:"darkorange",rgb:{r:255,g:140,b:0},hsl:{h:33,s:100,l:50}},{value:"#DEB887",key:"burlywood",rgb:{r:222,g:184,b:135},hsl:{h:34,s:57,l:70}},{value:"#FAEBD7",key:"antiquewhite",rgb:{r:250,g:235,b:215},hsl:{h:34,s:78,l:91}},{value:"#D2B48C",key:"tan",rgb:{r:210,g:180,b:140},hsl:{h:34,s:44,l:69}},{value:"#FFDEAD",key:"navajowhite",rgb:{r:255,g:222,b:173},hsl:{h:36,s:100,l:84}},{value:"#FFEBCD",key:"blanchedalmond",rgb:{r:255,g:235,b:205},hsl:{h:36,s:100,l:90}},{value:"#FFEFD5",key:"papayawhip",rgb:{r:255,g:239,b:213},hsl:{h:37,s:100,l:92}},{value:"#FFE4B5",key:"moccasin",rgb:{r:255,g:228,b:181},hsl:{h:38,s:100,l:85}},{value:"#FFA500",key:"orange",rgb:{r:255,g:165,b:0},hsl:{h:39,s:100,l:50}},{value:"#F5DEB3",key:"wheat",rgb:{r:245,g:222,b:179},hsl:{h:39,s:77,l:83}},{value:"#FDF5E6",key:"oldlace",rgb:{r:253,g:245,b:230},hsl:{h:39,s:85,l:95}},{value:"#FFFAF0",key:"floralwhite",rgb:{r:255,g:250,b:240},hsl:{h:40,s:100,l:97}},{value:"#B8860B",key:"darkgoldenrod",rgb:{r:184,g:134,b:11},hsl:{h:43,s:89,l:38}},{value:"#DAA520",key:"goldenrod",rgb:{r:218,g:165,b:32},hsl:{h:43,s:74,l:49}},{value:"#FFF8DC",key:"cornsilk",rgb:{r:255,g:248,b:220},hsl:{h:48,s:100,l:93}},{value:"#FFD700",key:"gold",rgb:{r:255,g:215,b:0},hsl:{h:51,s:100,l:50}},{value:"#FFFACD",key:"lemonchiffon",rgb:{r:255,g:250,b:205},hsl:{h:54,s:100,l:90}},{value:"#F0E68C",key:"khaki",rgb:{r:240,g:230,b:140},hsl:{h:54,s:77,l:75}},{value:"#EEE8AA",key:"palegoldenrod",rgb:{r:238,g:232,b:170},hsl:{h:55,s:67,l:80}},{value:"#BDB76B",key:"darkkhaki",rgb:{r:189,g:183,b:107},hsl:{h:56,s:38,l:58}},{value:"#F5F5DC",key:"beige",rgb:{r:245,g:245,b:220},hsl:{h:60,s:56,l:91}},{value:"#FAFAD2",key:"lightgoldenrodyellow",rgb:{r:250,g:250,b:210},hsl:{h:60,s:80,l:90}},{value:"#808000",key:"olive",rgb:{r:128,g:128,b:0},hsl:{h:60,s:100,l:25}},{value:"#FFFF00",key:"yellow",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50}},{value:"#FFFFE0",key:"lightyellow",rgb:{r:255,g:255,b:224},hsl:{h:60,s:100,l:94}},{value:"#FFFFF0",key:"ivory",rgb:{r:255,g:255,b:240},hsl:{h:60,s:100,l:97}},{value:"#6B8E23",key:"olivedrab",rgb:{r:107,g:142,b:35},hsl:{h:80,s:60,l:35}},{value:"#9ACD32",key:"yellowgreen",rgb:{r:154,g:205,b:50},hsl:{h:80,s:61,l:50}},{value:"#556B2F",key:"darkolivegreen",rgb:{r:85,g:107,b:47},hsl:{h:82,s:39,l:30}},{value:"#ADFF2F",key:"greenyellow",rgb:{r:173,g:255,b:47},hsl:{h:84,s:100,l:59}},{value:"#7FFF00",key:"chartreuse",rgb:{r:127,g:255,b:0},hsl:{h:90,s:100,l:50}},{value:"#7CFC00",key:"lawngreen",rgb:{r:124,g:252,b:0},hsl:{h:90,s:100,l:49}},{value:"#8FBC8F",key:"darkseagreen",rgb:{r:143,g:188,b:143},hsl:{h:120,s:25,l:65}},{value:"#228B22",key:"forestgreen",rgb:{r:34,g:139,b:34},hsl:{h:120,s:61,l:34}},{value:"#32CD32",key:"limegreen",rgb:{r:50,g:205,b:50},hsl:{h:120,s:61,l:50}},{value:"#90EE90",key:"lightgreen",rgb:{r:144,g:238,b:144},hsl:{h:120,s:73,l:75}},{value:"#98FB98",key:"palegreen",rgb:{r:152,g:251,b:152},hsl:{h:120,s:93,l:79}},{value:"#006400",key:"darkgreen",rgb:{r:0,g:100,b:0},hsl:{h:120,s:100,l:20}},{value:"#008000",key:"green",rgb:{r:0,g:128,b:0},hsl:{h:120,s:100,l:25}},{value:"#00FF00",key:"lime",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50}},{value:"#F0FFF0",key:"honeydew",rgb:{r:240,g:255,b:240},hsl:{h:120,s:100,l:97}},{value:"#2E8B57",key:"seagreen",rgb:{r:46,g:139,b:87},hsl:{h:146,s:50,l:36}},{value:"#3CB371",key:"mediumseagreen",rgb:{r:60,g:179,b:113},hsl:{h:147,s:50,l:47}},{value:"#00FF7F",key:"springgreen",rgb:{r:0,g:255,b:127},hsl:{h:150,s:100,l:50}},{value:"#F5FFFA",key:"mintcream",rgb:{r:245,g:255,b:250},hsl:{h:150,s:100,l:98}},{value:"#00FA9A",key:"mediumspringgreen",rgb:{r:0,g:250,b:154},hsl:{h:157,s:100,l:49}},{value:"#66CDAA",key:"mediumaquamarine",rgb:{r:102,g:205,b:170},hsl:{h:160,s:51,l:60}},{value:"#7FFFD4",key:"aquamarine",rgb:{r:127,g:255,b:212},hsl:{h:160,s:100,l:75}},{value:"#40E0D0",key:"turquoise",rgb:{r:64,g:224,b:208},hsl:{h:174,s:72,l:56}},{value:"#20B2AA",key:"lightseagreen",rgb:{r:32,g:178,b:170},hsl:{h:177,s:70,l:41}},{value:"#48D1CC",key:"mediumturquoise",rgb:{r:72,g:209,b:204},hsl:{h:178,s:60,l:55}},{value:"#2F4F4F",key:"darkslategray",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#2F4F4F",key:"darkslategrey",rgb:{r:47,g:79,b:79},hsl:{h:180,s:25,l:25}},{value:"#AFEEEE",key:"paleturquoise",rgb:{r:175,g:238,b:238},hsl:{h:180,s:65,l:81}},{value:"#008080",key:"teal",rgb:{r:0,g:128,b:128},hsl:{h:180,s:100,l:25}},{value:"#008B8B",key:"darkcyan",rgb:{r:0,g:139,b:139},hsl:{h:180,s:100,l:27}},{value:"#00FFFF",key:"aqua",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#00FFFF",key:"cyan",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50}},{value:"#E0FFFF",key:"lightcyan",rgb:{r:224,g:255,b:255},hsl:{h:180,s:100,l:94}},{value:"#F0FFFF",key:"azure",rgb:{r:240,g:255,b:255},hsl:{h:180,s:100,l:97}},{value:"#00CED1",key:"darkturquoise",rgb:{r:0,g:206,b:209},hsl:{h:181,s:100,l:41}},{value:"#5F9EA0",key:"cadetblue",rgb:{r:95,g:158,b:160},hsl:{h:182,s:25,l:50}},{value:"#B0E0E6",key:"powderblue",rgb:{r:176,g:224,b:230},hsl:{h:187,s:52,l:80}},{value:"#ADD8E6",key:"lightblue",rgb:{r:173,g:216,b:230},hsl:{h:195,s:53,l:79}},{value:"#00BFFF",key:"deepskyblue",rgb:{r:0,g:191,b:255},hsl:{h:195,s:100,l:50}},{value:"#87CEEB",key:"skyblue",rgb:{r:135,g:206,b:235},hsl:{h:197,s:71,l:73}},{value:"#87CEFA",key:"lightskyblue",rgb:{r:135,g:206,b:250},hsl:{h:203,s:92,l:75}},{value:"#4682B4",key:"steelblue",rgb:{r:70,g:130,b:180},hsl:{h:207,s:44,l:49}},{value:"#F0F8FF",key:"aliceblue",rgb:{r:240,g:248,b:255},hsl:{h:208,s:100,l:97}},{value:"#1E90FF",key:"dodgerblue",rgb:{r:30,g:144,b:255},hsl:{h:210,s:100,l:56}},{value:"#708090",key:"slategray",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#708090",key:"slategrey",rgb:{r:112,g:128,b:144},hsl:{h:210,s:13,l:50}},{value:"#778899",key:"lightslategray",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#778899",key:"lightslategrey",rgb:{r:119,g:136,b:153},hsl:{h:210,s:14,l:53}},{value:"#B0C4DE",key:"lightsteelblue",rgb:{r:176,g:196,b:222},hsl:{h:214,s:41,l:78}},{value:"#6495ED",key:"cornflower",rgb:{r:100,g:149,b:237},hsl:{h:219,s:79,l:66}},{value:"#4169E1",key:"royalblue",rgb:{r:65,g:105,b:225},hsl:{h:225,s:73,l:57}},{value:"#191970",key:"midnightblue",rgb:{r:25,g:25,b:112},hsl:{h:240,s:64,l:27}},{value:"#E6E6FA",key:"lavender",rgb:{r:230,g:230,b:250},hsl:{h:240,s:67,l:94}},{value:"#000080",key:"navy",rgb:{r:0,g:0,b:128},hsl:{h:240,s:100,l:25}},{value:"#00008B",key:"darkblue",rgb:{r:0,g:0,b:139},hsl:{h:240,s:100,l:27}},{value:"#0000CD",key:"mediumblue",rgb:{r:0,g:0,b:205},hsl:{h:240,s:100,l:40}},{value:"#0000FF",key:"blue",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50}},{value:"#F8F8FF",key:"ghostwhite",rgb:{r:248,g:248,b:255},hsl:{h:240,s:100,l:99}},{value:"#6A5ACD",key:"slateblue",rgb:{r:106,g:90,b:205},hsl:{h:248,s:53,l:58}},{value:"#483D8B",key:"darkslateblue",rgb:{r:72,g:61,b:139},hsl:{h:248,s:39,l:39}},{value:"#7B68EE",key:"mediumslateblue",rgb:{r:123,g:104,b:238},hsl:{h:249,s:80,l:67}},{value:"#9370DB",key:"mediumpurple",rgb:{r:147,g:112,b:219},hsl:{h:260,s:60,l:65}},{value:"#8A2BE2",key:"blueviolet",rgb:{r:138,g:43,b:226},hsl:{h:271,s:76,l:53}},{value:"#4B0082",key:"indigo",rgb:{r:75,g:0,b:130},hsl:{h:275,s:100,l:25}},{value:"#9932CC",key:"darkorchid",rgb:{r:153,g:50,b:204},hsl:{h:280,s:61,l:50}},{value:"#9400D3",key:"darkviolet",rgb:{r:148,g:0,b:211},hsl:{h:282,s:100,l:41}},{value:"#BA55D3",key:"mediumorchid",rgb:{r:186,g:85,b:211},hsl:{h:288,s:59,l:58}},{value:"#D8BFD8",key:"thistle",rgb:{r:216,g:191,b:216},hsl:{h:300,s:24,l:80}},{value:"#DDA0DD",key:"plum",rgb:{r:221,g:160,b:221},hsl:{h:300,s:47,l:75}},{value:"#EE82EE",key:"violet",rgb:{r:238,g:130,b:238},hsl:{h:300,s:76,l:72}},{value:"#800080",key:"purple",rgb:{r:128,g:0,b:128},hsl:{h:300,s:100,l:25}},{value:"#8B008B",key:"darkmagenta",rgb:{r:139,g:0,b:139},hsl:{h:300,s:100,l:27}},{value:"#FF00FF",key:"fuchsia",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#FF00FF",key:"magenta",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50}},{value:"#DA70D6",key:"orchid",rgb:{r:218,g:112,b:214},hsl:{h:302,s:59,l:65}},{value:"#C71585",key:"mediumvioletred",rgb:{r:199,g:21,b:133},hsl:{h:322,s:81,l:43}},{value:"#FF1493",key:"deeppink",rgb:{r:255,g:20,b:147},hsl:{h:328,s:100,l:54}},{value:"#FF69B4",key:"hotpink",rgb:{r:255,g:105,b:180},hsl:{h:330,s:100,l:71}},{value:"#FFF0F5",key:"lavenderblush",rgb:{r:255,g:240,b:245},hsl:{h:340,s:100,l:97}},{value:"#DB7093",key:"palevioletred",rgb:{r:219,g:112,b:147},hsl:{h:340,s:60,l:65}},{value:"#DC143C",key:"crimson",rgb:{r:220,g:20,b:60},hsl:{h:348,s:83,l:47}},{value:"#FFC0CB",key:"pink",rgb:{r:255,g:192,b:203},hsl:{h:350,s:100,l:88}},{value:"#FFB6C1",key:"lightpink",rgb:{r:255,g:182,b:193},hsl:{h:351,s:100,l:86}}],ge={},de=e=>255*ae(e);function fe(e){e=e.toLowerCase();const t=he.length;let r=0;while(r<t){const t=he[r++];if(t.key===e)return t}}function pe(e,t=1,r=false){if(e&&("transparent"!==e||r)){let n=ge[e];if(n)return n;let s,a="";if(e.startsWith("#"))s=me(e);else{let r=i.RGBA.exec(e);if(r)s={r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:r[4]?255*parseFloat(r[4]):de(t)};else if(r=i.HSLA.exec(e),r)s=ve({h:parseInt(r[1]),s:parseInt(r[2]),l:parseInt(r[3]),a:ae(r[4]?parseFloat(r[4]):t)});else switch(e){case"transparent":s={r:0,g:0,b:0,a:0},a="transparent";break;case"initial":s={r:0,g:0,b:0,a:255},a="black";break;default:{const r=fe(e);r&&(s=Object.assign(Object.assign({},r.rgb),{a:de(t)}),a=e);break}}}if(s){const{r:i,g:o,b:l,a:c}=s;if(c>0||r){const r=be(i,o,l),u=be(c),h="#"+(r+u);return ge[h]?ge[h]:(t=c/255,n={key:a,value:e="#"+r,valueAsRGBA:h,valueAsARGB:"#"+(u+r),rgba:s,hsl:Ee(s),opacity:t,transparent:0===t},1===t&&(ge[e]=n),ge[h]=n,n)}}}}function be(...e){let t="";return e.forEach(e=>{const r=Math.max(0,Math.min(e,255));t+=isNaN(r)?"00":"0123456789ABCDEF".charAt((r-r%16)/16)+"0123456789ABCDEF".charAt(r%16)}),t}function me(e){if(e=e.replace(/#/g,"").trim(),i.HEX.test(e)){let t=255;switch(e.length){case 4:t=parseInt(e.charAt(3).repeat(2),16);case 3:e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2);break;case 5:e+=e.charAt(4);break;default:e.length>=8&&(t=parseInt(e.substring(6,8),16)),e=e.substring(0,6)}if(6===e.length)return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16),a:t}}}function Ee(e){const t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n);let a=(i+s)/2;const o=a;let l;if(i===s)a=0,l=0;else{const e=i-s;switch(l=o>.5?e/(2-i-s):e/(i+s),i){case t:a=(r-n)/e+(r<n?6:0);break;case r:a=(n-t)/e+2;break;case n:a=(t-r)/e+4}a/=6}return{h:Math.round(360*a),s:Math.round(100*l),l:Math.round(100*o),a:e.a/255}}function ve(e){let t,r,n,{h:s,s:i,l:a,a:o}=e;if(s/=360,i/=100,a/=100,0===i)t=a,r=a,n=a;else{const e=a<.5?a*(1+i):a+i-a*i,o=2*a-e,l=t=>(t<0?t+=1:t>1&&(t-=1),t<1/6?o+6*(e-o)*t:t<.5?e:t<2/3?o+(e-o)*(2/3-t)*6:o);t=l(s+1/3),r=l(s),n=l(s-1/3)}return t=Math.round(255*Math.min(t,1)),r=Math.round(255*Math.min(r,1)),n=Math.round(255*Math.min(n,1)),o=Math.round(255*Math.min(o,1)),{r:t,g:r,b:n,a:o}}function we(e){return`rgb${e.a<255?"a":""}(${e.r}, ${e.g}, ${e.b}`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}var ye=Object.freeze({__proto__:null,findColorName:fe,findColorShade:function(e){const t=me(e);if(t){const r=Ee(t),n=[];let s=-1;const i=he.length;let a=0;while(a<i){const t=he[a++];if(t.value===e)return t;-1!==s?s===t.hsl.h&&n.push(t):r.h<=t.hsl.h&&(n.push(t),s=t.hsl.h)}const o=n.length;if(1===o)return n[0];if(o>1){const e=r.l+r.s;let t=Number.POSITIVE_INFINITY,s=-1;for(a=0;a<o;++a){const{l:r,s:i}=n[a].hsl,o=Math.abs(e-(r+i));o<t&&(t=o,s=a)}return n[s]}return he[he.length-1]}},parseColor:pe,reduceRGBA:function(e,t,r){if(r){const e=ge[r+="_"+t];if(e)return e}let{r:n,g:s,b:i}=e;0===n&&0===s&&0===i&&(n=255,s=255,i=255,t>0&&(t*=-1));const a=t<0?0:255;t=Math.abs(t);const o=pe(we({r:(n+Math.round((a-n)*t))%255,g:(s+Math.round((a-s)*t))%255,b:(i+Math.round((a-i)*t))%255,a:e.a}));return r&&(ge[r]=o),o},getHexCode:be,convertHex:function(e){return"#"+be(e.r,e.g,e.b)+(e.a<255?be(e.a):"")},parseRGBA:me,convertHSLA:Ee,convertRGBA:ve,formatRGBA:we,formatHSLA:function(e){return`hsl${e.a<255?"a":""}(${e.h}, ${e.s}%, ${e.l}%`+(e.a<255?", "+(e.a/255).toPrecision(2):"")+")"}});const ke=`(\\(\\s*(?:orientation:\\s*(?:portrait|landscape)|(?:max|min)-width:\\s*${n.LENGTH_PERCENTAGE})\\s*\\))`,xe=/((?:\d+%\s*,?\s*)+|from|to)\s*{\s*(.+?)\s*}/,Ae=/(?:(not|only)?\s*(?:all|screen)\s+and\s+)?((?:\([^)]+\)(?:\s+and\s+)?)+),?\s*/g,Se=/\(([a-z-]+)\s*(:|<?=?|=?>?)?\s*([\w.%]+)?\)(?:\s+and\s+)?/g,Re=/^(.*?)\s+(?:([\d.]+)([xw]))?$/,Fe=/\s+([+-]\s+|\s*[*/])\s*/,Te=/^\s*-?\d+\s*$/,Ce=/\s*\/\s*/,Ne=/^\*(\s+\*){0,2}$/,Pe=/^(\*\s+){1,2}/,Ie=new RegExp(n.CSS_CALC),Le=new RegExp(`(${n.UNIT_LENGTH}|%)`),_e=new RegExp(`\\s*(?:(\\(\\s*)?${ke}|(\\(\\s*))?\\s*(and|or|not)?\\s*(?:${ke}(\\s*\\))?)?\\s*(.+)`);function Be(e,t,r){switch(e){case"<=":return t<=r;case"<":return t<r;case">=":return t>=r;case">":return t>r;default:return t===r}}function Oe(e,t,r){const n=[];W(k(t.trim(),"calc"),e=>e.trim()).forEach(e=>{e.includes(" ")&&!wt(e)?n.push(...e.split(o.SPACE)):n.push(e)});const s=n.length;switch(s){case 1:case 2:return ct(e,n.join(" "),{dimension:["width","height"],boundingBox:r,parent:false});case 3:case 4:{let t=0,i=0;for(let a=0;a<s;++a){const o=n[a];switch(o){case"top":case"bottom":if(2==++i)return"";break;case"center":if(4===s)return"";break;case"left":case"right":if(2==++t)return"";break;default:{let t;switch(n[a-1]){case"top":case"bottom":t="height";break;case"left":case"right":t="width";break;default:return""}if(wt(o)){const s=Ze(ut(e,o,{dimension:t,boundingBox:r}));if(""===s)return"";n[a]=s}break}}}return n.join(" ")}}return""}function Me(e,t){const r=k(t),n=r.length;if(n>1){for(let t=1;t<n;++t){const n=r[t].trim();if(St(n)){const s=r[t-1].trim();if(qe(s)){const i=Qe(n).split(a.SEPARATOR),o=i.length;if(o>=3){const n=s.startsWith("hsl");for(let t=0;t<o;++t){const r=i[t];if(wt(r))if(!n||1!==t&&2!==t)if(3===t){const n=r.includes("%");let s=ut(e,r,n?{unitType:4}:{unitType:64});if(isNaN(s))return"";n&&(s/=100),i[t]=ae(s).toString()}else{const n=ut(e,r,{unitType:64,supportPercent:false});if(isNaN(n))return"";i[t]=ae(n,0,255).toString()}else{const n=ut(e,r,{unitType:4,supportPercent:true});if(isNaN(n))return"";i[t]=ae(n,0,100)+"%"}}r[t]=`(${i.join(", ")})`;continue}}return""}}return r.join("")}return t}function De(e,t,r,n,s,i="width"){const a=k(t,"calc"),o=a.length;for(let t=0;t<o;++t){const o=a[t];if(wt(o)){const l=Le.test(o),c=ut(e,o,l?{dimension:i,boundingBox:s,min:0,parent:false}:{unitType:r,min:n,supportPercent:false});if(isNaN(c))return"";a[t]=c+(l?"px":"")}}return a.join("").trim()}function ze(e){switch(e){case"vertical-lr":return 1;case"vertical-rl":return 2}return 0}function je(e){switch(e){case"none":case"initial":case"hidden":return false}return true}function $e(e){return(je(e.getPropertyValue("border-left-style"))?parseFloat(e.getPropertyValue("border-left-width")):0)+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))+(je(e.getPropertyValue("border-right-style"))?parseFloat(e.getPropertyValue("border-right-width")):0)}function We(e){return(je(e.getPropertyValue("border-top-style"))?parseFloat(e.getPropertyValue("border-top-width")):0)+parseFloat(e.getPropertyValue("padding-top"))+parseFloat(e.getPropertyValue("padding-bottom"))+(je(e.getPropertyValue("border-bottom-style"))?parseFloat(e.getPropertyValue("border-bottom-width")):0)}function Ge(e){switch(e){case"absolute":case"fixed":return true}return false}function He(e=["left","top"]){return{static:true,top:0,left:0,right:0,bottom:0,topAsPercent:0,leftAsPercent:0,rightAsPercent:0,bottomAsPercent:0,horizontal:"left",vertical:"top",orientation:e}}const Ve=e=>(null==e?void 0:e.width)||window.innerWidth,Ue=e=>(null==e?void 0:e.height)||window.innerHeight,Xe=(e,t,r,n)=>At(e)?Math.round(v(e)/100*t):pt(e,r,n),Ye=(e,t,r,n)=>At(e)?parseFloat(e)/100:pt(e,r,n)/t,qe=e=>/(rgb|hsl)a?/.test(e),Ze=e=>isNaN(e)?"":e+"px",Ke=e=>isNaN(e)?"":e.toString(),Qe=e=>e.substring(1,e.length-1),Je=e=>Ne.test(e)?"*":e.replace(Pe,"");function et(e,t=""){if(e){const r=e["__style"+t];if(r)return r;if(rt(e)){const r=getComputedStyle(e,t);return e["__style"+t]=r,r}return{position:"static",display:"inline"}}return{position:"static",display:"none"}}function tt(e){return"#"===e.nodeName.charAt(0)&&(e=e.parentElement||document.body),parseFloat(et(e).getPropertyValue("font-size"))}function rt(e){return"#"!==e.nodeName.charAt(0)&&(e instanceof HTMLElement||e instanceof SVGElement)}function nt(e,t){switch(e){case"inlineSize":return 0===ze(t)?"width":"height";case"blockSize":return 0===ze(t)?"height":"width";case"maxInlineSize":return 0===ze(t)?"maxWidth":"maxHeight";case"maxBlockSize":return 0===ze(t)?"maxHeight":"maxWidth";case"minInlineSize":return 0===ze(t)?"minWidth":"minHeight";case"minBlockSize":return 0===ze(t)?"minHeight":"minWidth";case"borderInlineStart":return 0===ze(t)?"borderLeft":"borderTop";case"borderInlineEnd":return 0===ze(t)?"borderRight":"borderBottom";case"borderInlineStartWidth":return 0===ze(t)?"borderLeftWidth":"borderTopWidth";case"borderInlineEndWidth":return 0===ze(t)?"borderRightWidth":"borderBottomWidth";case"insetInlineStart":return 0===ze(t)?"left":"top";case"insetInlineEnd":return 0===ze(t)?"right":"bottom";case"marginInlineStart":return 0===ze(t)?"marginLeft":"marginTop";case"marginInlineEnd":return 0===ze(t)?"marginRight":"marginBottom";case"paddingInlineStart":return 0===ze(t)?"paddingLeft":"paddingTop";case"paddingInlineEnd":return 0===ze(t)?"paddingRight":"paddingBottom";case"scrollMarginInlineStart":return 0===ze(t)?"scrollMarginLeft":"scrollMarginTop";case"scrollMarginInlineEnd":return 0===ze(t)?"scrollMarginRight":"scrollMarginBottom";case"scrollPaddingInlineStart":return 0===ze(t)?"scrollPaddingLeft":"scrollPaddingTop";case"scrollPaddingInlineEnd":return 0===ze(t)?"scrollPaddingRight":"scrollPaddingBottom";case"borderBlockStart":switch(ze(t)){case 0:return"borderTop";case 1:return"borderLeft";case 2:return"borderRight"}case"borderBlockEnd":switch(ze(t)){case 0:return"borderBottom";case 1:return"borderRight";case 2:return"borderLeft"}case"borderBlockStartWidth":switch(ze(t)){case 0:return"borderTopWidth";case 1:return"borderLeftWidth";case 2:return"borderRightWidth"}case"borderBlockEndWidth":switch(ze(t)){case 0:return"borderBottomWidth";case 1:return"borderRightWidth";case 2:return"borderLeftWidth"}case"insetBlockStart":switch(ze(t)){case 0:return"top";case 1:return"left";case 2:return"right"}case"insetBlockEnd":switch(ze(t)){case 0:return"bottom";case 1:return"right";case 2:return"left"}case"marginBlockStart":switch(ze(t)){case 0:return"marginTop";case 1:return"marginLeft";case 2:return"marginRight"}case"marginBlockEnd":switch(ze(t)){case 0:return"marginBottom";case 1:return"marginRight";case 2:return"marginLeft"}case"paddingBlockStart":switch(ze(t)){case 0:return"paddingTop";case 1:return"paddingLeft";case 2:return"paddingRight"}case"paddingBlockEnd":switch(ze(t)){case 0:return"paddingBottom";case 1:return"paddingRight";case 2:return"paddingLeft"}case"scrollMarginBlockStart":switch(ze(t)){case 0:return"scrollMarginTop";case 1:return"scrollMarginLeft";case 2:return"scrollMarginRight"}case"scrollMarginBlockEnd":switch(ze(t)){case 0:return"scrollMarginBottom";case 1:return"scrollMarginRight";case 2:return"scrollMarginLeft"}case"scrollPaddingBlockStart":switch(ze(t)){case 0:return"scrollPaddingTop";case 1:return"scrollPaddingLeft";case 2:return"scrollPaddingRight"}case"scrollPaddingBlockEnd":switch(ze(t)){case 0:return"scrollPaddingBottom";case 1:return"scrollPaddingRight";case 2:return"scrollPaddingLeft"}}return""}function st(e,t,r,n){switch(t){case"left":case"right":case"textIndent":return Ze(ut(e,r,{dimension:"width",boundingBox:n}));case"columnWidth":case"marginBottom":case"marginLeft":case"marginRight":case"marginTop":case"maxWidth":case"minWidth":case"paddingBottom":case"paddingLeft":case"paddingRight":case"paddingTop":case"scrollMarginBottom":case"scrollMarginLeft":case"scrollMarginRight":case"scrollMarginTop":case"scrollPaddingBottom":case"scrollPaddingLeft":case"scrollPaddingRight":case"scrollPaddingTop":case"width":return Ze(ut(e,r,{dimension:"width",boundingBox:n,min:0}));case"columnGap":case"gridColumnGap":case"shapeMargin":return Ze(ut(e,r,{dimension:"width",boundingBox:n,min:0,parent:false}));case"bottom":case"top":case"verticalAlign":return Ze(ut(e,r,{dimension:"height",boundingBox:n}));case"height":case"maxHeight":case"minHeight":return Ze(ut(e,r,{dimension:"height",boundingBox:n,min:0}));case"gridRowGap":case"rowGap":return Ze(ut(e,r,{dimension:"height",boundingBox:n,min:0,parent:false}));case"flexBasis":{const t=e.parentElement;return Ze(ut(e,r,{dimension:!!t&&et(t).flexDirection.includes("column")?"height":"width",boundingBox:n,min:0}))}case"borderBottomWidth":case"borderLeftWidth":case"borderRightWidth":case"borderTopWidth":case"letterSpacing":case"outlineOffset":case"outlineWidth":case"perspective":case"wordSpacing":return Ze(ut(e,r,{min:0,supportPercent:false}));case"offsetDistance":{let t=0;if(r.includes("%")){const r=et(e).getPropertyValue("offset-path");if("none"!==r){const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",r),t=e.getTotalLength()}}return Ze(ut(e,r,{boundingSize:t}))}case"lineHeight":return Ze(ut(e,r,{boundingSize:tt(e),min:0}));case"fontSize":return Ze(ut(e,r,{boundingSize:tt(e.parentElement||document.body),min:0}));case"margin":return ct(e,r,{dimension:"width",boundingBox:n});case"borderBottomLeftRadius":case"borderBottomRightRadius":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderRadius":case"padding":case"scrollMargin":case"scrollMarginBlock":case"scrollMarginInline":case"scrollPadding":case"scrollPaddingBlock":case"scrollPaddingInline":return ct(e,r,{dimension:"width",boundingBox:n,min:0});case"objectPosition":return ct(e,r,{dimension:["width","height"],boundingBox:n});case"gridGap":case"perspectiveOrigin":return ct(e,r,{dimension:["width","height"],boundingBox:n,min:"gridGap"===t?0:void 0,parent:false});case"borderImageOutset":case"borderImageWidth":return ct(e,r,{dimension:["height","width","height","width"],boundingBox:n,min:0,parent:false});case"borderWidth":case"borderSpacing":case"columnRule":return ct(e,r,{min:0,supportPercent:false});case"gridAutoColumns":case"gridTemplateColumns":return De(e,r,32,1,n);case"gridAutoRows":case"gridTemplateRows":return De(e,r,32,1,n,"height");case"zIndex":return Ke(ut(e,r,{unitType:32}));case"tabSize":return Ke(ut(e,r,{unitType:32,min:0}));case"columnCount":case"fontWeight":case"widows":return Ke(ut(e,r,{unitType:32,min:1}));case"gridRow":case"gridRowEnd":case"gridRowStart":case"gridColumn":case"gridColumnEnd":case"gridColumnStart":case"counterIncrement":case"counterReset":return ct(e,r,{unitType:32});case"fontVariationSettings":return ct(e,r,{unitType:32,min:0});case"gridArea":return ct(e,r,{unitType:32,min:1});case"flexGrow":case"flexShrink":return Ke(ut(e,r,{unitType:64,min:0}));case"animationIterationCount":case"fontSizeAdjust":return Ke(ut(e,r,{unitType:64,min:0,supportPercent:false}));case"opacity":case"shapeImageThreshold":{const t=r.includes("%"),n=ut(e,r,{unitType:t?4:64});return isNaN(n)?"":ae(n*(t?.01:1)).toString()}case"fontStretch":return ct(e,r,{unitType:4,min:0,supportPercent:true});case"fontStyle":case"offsetRotate":return ct(e,r,{unitType:16,supportPercent:false});case"offsetAnchor":case"transformOrigin":return Oe(e,r,n);case"transform":{const t=k(r=r.trim()),s=t.length;if(s>1){for(let r=1;r<s;++r){let s=t[r];if(St(s)){let i;switch(s=Qe(s),t[r-1].trim()){case"matrix":case"matrix3d":i=ct(e,s,{unitType:64,supportPercent:false});break;case"scaleX":case"scaleY":case"scaleZ":{const t=ut(e,s,{unitType:64,min:0,supportPercent:false});isNaN(t)||(i=t.toString());break}case"scale":case"scale3d":i=ct(e,s,{unitType:64,min:0,supportPercent:false});break;case"translateX":i=Ze(ut(e,s,{dimension:"width",boundingBox:n,parent:true}));break;case"translateY":i=Ze(ut(e,s,{dimension:"height",boundingBox:n,parent:true}));break;case"translateZ":case"perspective":i=Ze(ut(e,s,{supportPercent:false}));break;case"translate":case"translate3d":i=ct(e,s,{dimension:["width","height"],boundingBox:n,parent:true});break;case"skew":case"rotate":i=ct(e,s,{unitType:16,supportPercent:false});break;case"skewX":case"skewY":case"rotateX":case"rotateY":case"rotateZ":{const t=ut(e,s,{unitType:16,supportPercent:false});isNaN(t)||(i=t+"deg");break}case"rotate3d":{const t=s.split(a.SEPARATOR),r=t.length;if(3===r||4===r){i="";for(let n=0;n<r;++n){let r=t[n];if(wt(r)){const t=ut(e,r,{unitType:3===n?16:64,supportPercent:false});if(isNaN(t))return"";r=t+(3===n?"deg":"")}i+=(""!==i?", ":"")+r}}break}}if(!i)return"";t[r]=`(${i})`}}return t.join("")}return r}case"backgroundImage":case"borderImageSource":case"maskImage":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r];if(qe(n)&&St(n)){const s=k(Qe(n)),i=s.length;for(let t=1;t<i;++t)if(St(s[t])){const r=s[t-1];if(qe(r)){const n=r.split(o.SPACE).pop(),i=Me(e,n+s[t]);if(""!==i){s[t]=i.replace(n,"");continue}}return""}t[r]=`(${s.join("")})`}}return t.join("")}return r}case"borderColor":case"scrollbarColor":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1];if(qe(n)&&St(t[r])){const s=n.split(o.SPACE).pop(),i=Me(e,s+t[r]);if(""===i)return"";t[r]=i,t[r-1]=n.substring(0,n.length-s.length)}}return t.join("")}return r}case"boxShadow":case"textShadow":return ct(e,st(e,"borderColor",r),{supportPercent:false,errorString:/-?[\d.]+[a-z]*\s+-?[\d.]+[a-z]*(\s+-[\d.]+[a-z]*)/});case"backgroundSize":case"maskPosition":case"maskSize":return ct(e,r,{dimension:["width","height"],boundingBox:n,min:"maskPosition"!==t?0:void 0,parent:false,separator:","});case"animation":case"animationDelay":case"animationDuration":case"transition":case"transitionDelay":case"transitionDuration":return ct(e,r,{unitType:8,min:0,precision:0,separator:","});case"columns":return De(e,r,32,1,n);case"borderImageSlice":case"flex":case"font":return De(e,r,64,0,n);case"backgroundPosition":{const t=[];for(const s of r.split(a.SEPARATOR)){const r=Oe(e,s,n);if(""===r)return"";t.push(r)}return t.join(", ")}case"border":case"borderBottom":case"borderLeft":case"borderRight":case"borderTop":case"outline":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){const n=t[r-1],s=n.split(o.SPACE).pop();let i;if("calc"===s)i=Ze(ut(e,s+t[r],{min:0,supportPercent:false}));else{if(!qe(s))continue;i=Me(e,s+t[r])}if(""===i)return"";t[r]=i,t[r-1]=n.substring(0,n.length-s.length)}return t.join("")}return r}case"animationTimingFunction":case"transitionTimingFunction":{const t=k(r=r.trim()),n=t.length;if(n>1){for(let r=1;r<n;++r){let n=t[r];if(St(n)){const s=t[r-1].trim();let i;if(n=Qe(n),s.endsWith("cubic-bezier")){const t=n.split(a.SEPARATOR),r=t.length;if(4===r){i="";const n={unitType:64,supportPercent:false};for(let s=0;s<r;++s){let r=t[s];if(wt(r)){s%2==0?(n.min=0,n.max=1):(n.min=void 0,n.max=void 0);const t=ut(e,r,n);if(isNaN(t))return"";r=t.toString()}i+=(""!==i?", ":"")+r}}}else s.endsWith("steps")&&(i=ct(e,n,{unitType:32,min:1}));if(!i)return"";t[r]=`(${i})`}}return t.join("")}return r}case"clip":return Ge(et(e).position)?ct(e,r,{supportPercent:false}):"";case"clipPath":case"offsetPath":case"shapeOutside":{const t=k(r=r.trim());if(2===t.length){const s=t[0].trim();switch(s){case"url":case"path":return St(t[1])?"":r;case"linear-gradient":case"repeating-linear-gradient":case"radial-gradient":case"repeating-radial-gradient":case"conic-gradient":return st(e,"backgroundImage",r,n)}let i=t[1].trim();switch(i=Qe(i),s){case"circle":case"ellipse":{const t=[];let[r,a]=i.split(/\s+at\s+/);if(St(r)){const i={boundingBox:n,min:0,parent:true};if("circle"===s){if(r.includes("%")){const{width:t,height:r}=n||ht(e);if(!(t>0&&r>0))return"";i.boundingSize=Math.min(t,r)}}else i.dimension=["width","height"];if(r=ct(e,r,i),""===r)return"";t.push(r)}else r&&t.push(r);if(St(a)){if(a=ct(e,a,{dimension:["width","height"],boundingBox:n,parent:true}),""===a)return"";t.push(a)}else a&&t.push(a);i=t.join(" at ");break}case"inset":i=ct(e,i,{dimension:["height","width","height","width","width"],boundingBox:n,checkUnit:true});break;case"polygon":{const t=[];for(let r of i.split(a.SEPARATOR))if(St(r)){if(r=ct(e,r,{dimension:["width","height"],boundingBox:n,parent:true}),""===r)return"";t.push(r)}else t.push(r);i=t.join(", ");break}}if(""!==i)return`${s}(${i})`}return r}case"grid":{let[t,s]=r.trim().split(Ce);if(St(t)){const r=st(e,"gridTemplateRows",t,n);if(""===r)return"";t=r}if(St(s)){const t=st(e,"gridTemplateColumns",s,n);if(""===t)return"";s=t}return t+(s?" / "+s:"")}case"offset":{let[t,s]=r.trim().split(Ce);if(St(t)){const r=k(t.trim()),s=r.length;if(!(s>=2))return"";if(t=r[0]+r[1],St(t)&&(t=st(e,"offsetPath",t,n),""===t))return"";if(s>2){let s=r.slice(2).join("");if(St(t)&&(s=st(e,Le.test(s)?"offsetDistance":"offsetRotate",s,n),""===s))return"";t+=" "+s}}if(St(s)){const t=st(e,"offsetAnchor",s,n);if(""===t)return"";s=t}return t+(s?" / "+s:"")}case"borderImage":{const t=/([a-z-]+\(.+?\))\s*([^/]+)(?:\s*\/\s*)?(.+)?/.exec(r.trim());if(t){let r=t[2].trim();if(St(r)&&(r=st(e,"borderImageSlice",r,n)),""!==r){let s,i;if(t[3]){if([s,i]=t[3].trim().split(Ce),St(s)){const t=st(e,"borderImageWidth",s,n);if(""===t)return"";s=t}if(St(i)){const t=st(e,"borderImageOutset",i,n);if(""===t)return"";i=t}}return t[1]+" "+r+(s?" / "+s:"")+(i?" / "+i:"")}}return""}case"background":case"gridTemplate":return et(e)[t];default:if(t.endsWith("Color"))return Me(e,r.trim());{const s=nt(t,et(e).writingMode);if(""!==s)return st(e,s,r,n)}}return""}function it(e){const t={},r=e.length;let n=0;while(n<r){const r=e[n++],s=xe.exec(r.cssText);s&&(r.keyText||s[1]).trim().split(a.SEPARATOR).forEach(e=>{switch(e){case"from":e="0%";break;case"to":e="100%"}const r={};s[2].split(a.DELIMITER).forEach(e=>{const t=e.indexOf(":");if(-1!==t){const n=e.substring(t+1).trim();if(""!==n){const s=e.substring(0,t).trim();r[s]=n}}}),t[e]=r})}return t}function at(e,t){switch(e){case"only all":case"only screen":return true;default:{let r;Ae.lastIndex=0;while(null!==(r=Ae.exec(e))){const e="not"===r[1];let n,s=false;Se.lastIndex=0;while(null!==(n=Se.exec(r[2]))){const e=n[1];let r=n[2];const i=n[3];switch(e.startsWith("min")?r=">=":e.startsWith("max")&&(r="<="),e){case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":if(i){const[e,t]=W(i.split("/"),e=>parseInt(e));s=Be(r,window.innerWidth/window.innerHeight,e/t)}else s=false;break;case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":s=Be(r,e.endsWith("width")?window.innerWidth:window.innerHeight,pt(i,t));break;case"orientation":s="portrait"===i&&window.innerWidth<=window.innerHeight||"landscape"===i&&window.innerWidth>window.innerHeight;break;case"resolution":case"min-resolution":case"max-resolution":if(i){let e=parseFloat(i);i.endsWith("dpcm")?e*=2.54:i.endsWith("dppx")&&(e*=96),s=Be(r,Y(),e)}else s=false;break;case"grid":s="0"===i;break;case"color":s=void 0===i||parseInt(i)>0;break;case"min-color":s=parseInt(i)<=screen.colorDepth/3;break;case"max-color":s=parseInt(i)>=screen.colorDepth/3;break;case"color-index":case"min-color-index":case"monochrome":case"min-monochrome":s="0"===i;break;case"max-color-index":case"max-monochrome":s=parseInt(i)>=0;break;default:s=false}if(!s)break}if(!e&&s||e&&!s)return true}}}return false}function ot(e,t,r,...n){let s="",i=e.parentElement;while(i&&!n.includes(i.tagName)){if(s=et(i)[t],"inherit"===s||(null==r?void 0:r.test(s)))s="";else if(s)break;i=i.parentElement}return s}function lt(e,t){const r=et(e);let n;while(null!==(n=i.VAR.exec(t))){let e=r.getPropertyValue(n[1]).trim();const s=n[2];if(s&&(""===e||vt(s,true)&&!vt(e,true)||A(s)&&!A(e)||pe(s)&&!pe(e))&&(e=s),!e)return"";t=t.replace(n[0],e).trim()}return t}function ct(e,t,r){t=t.trim();const n=Object.assign({},r);let s,i,a,o,l,c,u;switch(r&&(Array.isArray(r.orderedSize)&&(s=r.orderedSize),Array.isArray(r.dimension)&&(i=r.dimension),({separator:a,unitType:o,checkUnit:l,errorString:c}=r)),o){case 32:case 64:u="";break;case 4:u="%";break;case 8:u="ms";break;case 16:u="deg";break;default:u="px",o=2}const h=[];for(let r of a?t.split(a):[t])if(r=r.trim(),""!==r){const t=k(r,"calc"),a=t.length;if(!a)return"";{let r="",c=0,g=0;while(c<a){let a=t[c++];if(wt(a)){void 0!==(null==s?void 0:s[g])?n.boundingSize=s[g++]:i?(n.dimension=i[g++],n.boundingSize=void 0):s&&(n.boundingSize=void 0);const t=ut(e,a,n);if(isNaN(t))return"";r+=t+u}else r+=a,i&&(a=a.trim(),""===a||l&&(2!==o||!vt(a,true)&&"auto"!==a)||++g)}h.push(r)}}if(t=1===h.length?h[0]:h.join(" "===a?" ":a?a+" ":""),c){let e;while(null!==(e=c.exec(t))){if(void 0===e[1])return"";const r=e[0];let n=r;let s=e.length-1;while(s>=1)n=n.replace(new RegExp(e[s--]+"$"),"");if(n===r)return"";t=t.replace(r,n)}}return t}function ut(e,t,r={}){const n=lt(e,t);if(n){const{precision:s,unitType:i}=r;if(t.includes("%")){if(false===r.supportPercent||32===i)return NaN;if(void 0===r.boundingSize){const{dimension:t,boundingBox:n}=r;if(t)if(n)r.boundingSize=n[t];else{let n,s=0;if(false===r.parent)n=e;else if(n=e.parentElement,n instanceof HTMLElement){let r;if(Ge(et(e).position))do{if(r=et(n),n===document.body)break;switch(r.position){case"static":case"initial":case"unset":n=n.parentElement;continue}break}while(n);else r=et(n);r&&(s="width"===t?$e(r):We(r))}else e instanceof SVGElement?true!==r.parent&&(n=e):n=null;n&&(r.boundingSize=Math.max(0,n.getBoundingClientRect()[t]-s))}}}else if(r.supportPercent)return NaN;i&&2!==i||!/\d(em|ch)/.test(t)||void 0!==r.fontSize||(r.fontSize=tt(e));let a=ft(n,r);return void 0!==s?a=0===s?Math.floor(a):parseFloat(te(a,s)):r.roundValue&&(a=Math.round(a)),a}return NaN}function ht(e){const t=e.parentElement;let r=0,n=0;if(t){const e=et(t);({width:r,height:n}=t.getBoundingClientRect()),r=Math.max(0,r-$e(e)),n=Math.max(0,n-We(e))}return{width:r,height:n}}function gt(e){const t=i.URL.exec(e);return t?t[1]||t[2]:""}function dt(e,t="deg"){let r=v(e);switch(t){case"rad":r*=180/Math.PI;break;case"grad":r/=400;case"turn":r*=360}return r}function ft(e,t={}){if(""===(e=e.trim()))return NaN;const{boundingSize:r,min:n,max:s,unitType:i,fontSize:a}=t;let o=e.length;"("===e.charAt(0)&&")"===e.charAt(o-1)||(e=`(${e})`,o+=2);let l=0;const c=[],u=[];for(let t=0;t<o;++t)switch(e.charAt(t)){case"(":l++,c[t]=true;break;case")":u.push(t)}if(l===u.length){const t=[];let o=0;while(true)for(let l=0;l<u.length;++l){let h=u[l]-1,g=false;for(;h>=0;h--){if(c[h]){g=true,c[h]=false;break}if(u.includes(h))break}if(g){let c,g;const d=()=>{if(c)switch(g){case"+":case"-":if(A(c))return false;break;case"*":case"/":if(!A(c))return false}return true},f=()=>{if(c)switch(g){case"+":case"-":return false}return true};let p=false;const b=[],m=[],E=e.substring(h+1,u[l]).split(Fe),v=E.length;let w=0;while(w<v){const e=E[w++].trim();switch(e){case"+":case"-":case"*":case"/":m.push(e),g=e;break;default:{const n=/\s*{(\d+)}\s*/.exec(e);if(n){switch(i){case 32:case 64:break;default:if(!d())return NaN}const e=t[parseInt(n[1])];b.push(e),c=e.toString(),p=true}else{switch(i){case 4:if(A(e)){if(!f())return NaN;b.push(parseFloat(e))}else{if(!At(e))return NaN;if(!d())return NaN;b.push(parseFloat(e)),p=true}break;case 8:if(A(e)){if(!f())return NaN;b.push(parseFloat(e))}else{if(!xt(e))return NaN;if(!d())return NaN;b.push(mt(e)),p=true}break;case 16:if(A(e)){if(!f())return NaN;b.push(parseFloat(e))}else{if(!kt(e))return NaN;if(!d())return NaN;b.push(bt(e)),p=true}break;case 32:if(!Te.test(e))return NaN;b.push(parseInt(e)),p=true;break;case 64:if(A(e))b.push(parseFloat(e)),p=true;else{if(!At(e)||void 0===r||isNaN(r))return NaN;b.push(parseFloat(e)/100*r)}break;default:if(A(e)){if(!f())return NaN;b.push(parseFloat(e))}else if(vt(e)){if(!d())return NaN;b.push(pt(e,a)),p=true}else{if(!At(e)||void 0===r||isNaN(r))return NaN;if(!d())return NaN;b.push(parseFloat(e)/100*r),p=true}}c=e}break}}}if(!p||b.length!==m.length+1)return NaN;for(w=0;w<m.length;++w)if("/"===m[w]){if(0===Math.abs(b[w+1]))return NaN;b.splice(w,2,b[w]/b[w+1]),m.splice(w--,1)}for(w=0;w<m.length;++w)"*"===m[w]&&(b.splice(w,2,b[w]*b[w+1]),m.splice(w--,1));for(w=0;w<m.length;++w)b.splice(w,2,b[w]+b[w+1]*("-"===m[w]?-1:1)),m.splice(w--,1);if(1!==b.length)return NaN;if(1===u.length){const e=b[0];return void 0!==n&&e<n||void 0!==s&&e>s?NaN:re(e)}{t[o]=b[0];const r=`{${o++}}`,n=u[l]+1;e=e.substring(0,h)+r+" ".repeat(n-(h+r.length))+e.substring(n),u.splice(l--,1)}}}}return NaN}function pt(e,t,r){const n=s.LENGTH.exec(e);if(n){let e=parseFloat(n[1]);switch(n[2]){case"px":return e;case"em":case"ch":return e*(null!=t?t:tt(document.body)||16);case"rem":return e*(tt(document.body)||16);case"pc":e*=12;case"pt":return 4*e/3;case"mm":e/=10;case"cm":e/=2.54;case"in":return e*Y();case"vw":return e*Ve(r)/100;case"vh":return e*Ue(r)/100;case"vmin":return e*Math.min(Ve(r),Ue(r))/100;case"vmax":return e*Math.max(Ve(r),Ue(r))/100}}return 0}function bt(e){const t=i.ANGLE.exec(e);return t?dt(t[1],t[2]):0}function mt(e){const t=i.TIME.exec(e);if(t)switch(t[2]){case"ms":return parseInt(t[1]);case"s":return 1e3*parseFloat(t[1])}return 0}function Et(e,t=true){return"string"==typeof e&&(e=parseFloat(e),isNaN(e))?"0%":(e*=100,(t?Math.round(e):e)+"%")}function vt(e,t){return t?s.LENGTH_PERCENTAGE.test(e):s.LENGTH.test(e)}function wt(e){return i.CALC.test(e)}function yt(e){return i.CUSTOM_PROPERTY.test(e)}function kt(e){return i.ANGLE.test(e)}function xt(e){return i.TIME.test(e)}function At(e){return s.PERCENT.test(e)}function St(e){return Ie.test(e)}var Rt=Object.freeze({__proto__:null,BOX_POSITION:["top","right","bottom","left"],BOX_MARGIN:["marginTop","marginRight","marginBottom","marginLeft"],BOX_BORDER:[["borderTopStyle","borderTopWidth","borderTopColor"],["borderRightStyle","borderRightWidth","borderRightColor"],["borderBottomStyle","borderBottomWidth","borderBottomColor"],["borderLeftStyle","borderLeftWidth","borderLeftColor"],["outlineStyle","outlineWidth","outlineColor"]],BOX_PADDING:["paddingTop","paddingRight","paddingBottom","paddingLeft"],TEXT_STYLE:["fontFamily","fontSize","fontWeight","fontStyle","color","whiteSpace","textDecoration","textTransform","letterSpacing","wordSpacing"],getStyle:et,getFontSize:tt,hasComputedStyle:rt,parseSelectorText:function(e,t){if((e=t?e.trim():Je(e.trim())).includes(",")){let t,r=e,n=false;while(null!==(t=i.SELECTOR_ATTR.exec(r))){const e=t.index,s=t[0].length;r=(e>0?r.substring(0,e):"")+"_".repeat(s)+r.substring(e+s),n=true}if(n){const t=[];let n=0;while(true){const s=r.indexOf(",",n);if(-1===s){n>0&&t.push(Je(e.substring(n).trim()));break}{const r=e.substring(n,s).trim();t.push(0===n?r:Je(r)),n=s+1}}return t}return W(e.split(a.SEPARATOR),e=>Je(e))}return[e]},getSpecificity:function e(t){let r,n=0;i.SELECTOR_G.lastIndex=0;while(null!==(r=i.SELECTOR_G.exec(t))){let t,s=r[1];if(1===s.length)switch(s.charAt(0)){case"+":case"~":case">":case"*":continue}else{if(s.endsWith("|*"))continue;"*"===s.charAt(0)&&(s=s.substring(1))}while(null!==(t=i.SELECTOR_ATTR.exec(s)))t[1]&&(n+=1),(t[3]||t[4]||t[5])&&(n+=10),s=m(s,t.index,t[0].length);while(null!==(t=i.SELECTOR_PSEUDO_CLASS.exec(s))){if(t[0].startsWith(":not(")){const r=t[1];if(r){const t=i.SELECTOR_G.lastIndex;n+=e(r),i.SELECTOR_G.lastIndex=t}}else switch(r[2]){case":scope":case":root":break;default:n+=10}s=m(s,t.index,t[0].length)}while(null!==(t=i.SELECTOR_PSEUDO_ELEMENT.exec(s)))n+=1,s=m(s,t.index,t[0].length);while(null!==(t=i.SELECTOR_LABEL.exec(s))){const e=t[0];switch(e.charAt(0)){case"#":n+=100;break;case".":n+=10;break;default:n+=1}s=m(s,t.index,e.length)}}return n},checkWritingMode:nt,calculateStyle:st,checkStyleValue:function(e,t,r,n){if("inherit"===r)switch(t){case"fontSize":case"lineHeight":if(n)return n[t];default:return ot(e,t)}else St(r)?""===(r=st(e,t,r))&&n&&(r=n[t]):yt(r)&&""===(r=lt(e,r))&&n&&(r=n[t]);return r||""},getKeyframesRules:function(){const e={};e:{const t=document.styleSheets,r=t.length;let n=0;while(n<r){const r=t[n++].cssRules;if(r){const t=r.length;for(let n=0;n<t;++n)try{const t=r[n];if(t.type===CSSRule.KEYFRAMES_RULE){const r=it(t.cssRules);if(Object.keys(r).length){const n=t.name;e[n]?Object.assign(e[n],r):e[n]=r}}}catch(e){break e}}}}return e},parseKeyframes:it,checkMediaRule:at,isParentStyle:function(e,t,...r){if("#"!==e.nodeName.charAt(0)&&r.includes(et(e)[t]))return true;{const n=e.parentElement;if(n)return r.includes(et(n)[t])}return false},getInheritedStyle:ot,parseVar:lt,calculateVarAsString:ct,calculateVar:ut,getParentBoxDimension:ht,getBackgroundPosition:function(e,t,r={}){if(""!==(e=e.trim())){const{fontSize:n,imageDimension:s,imageSize:i,screenDimension:a}=r,{width:l,height:c}=t,u=e.split(o.SPACE);1===u.length&&u.push("center");const h=u.length;if(h<=4){const e=He(u),t=(t,r,u,h)=>{if(s&&!vt(t)){let t=e[h];if(i&&"auto"!==i&&"initial"!==i){const[e,u]=i.split(o.SPACE);if(r){let r=l;if(vt(e,true))if(At(e))r*=parseFloat(e)/100;else{const t=pt(e,n,a);t&&(r=t)}else if(u){let e=1;if(At(u))e=parseFloat(u)/100*c/s.height;else if(vt(u)){const t=pt(u,n,a);t&&(e=t/s.height)}r=e*s.width}t*=r}else{let r=c;if(vt(u,true))if(At(u))r*=parseFloat(u)/100;else{const e=pt(u,n,a);e&&(r=e)}else if(e){let t=1;if(At(e))t=parseFloat(e)/100*l/s.width;else if(vt(e)){const r=pt(e,n,a);r&&(t=r/s.width)}r=t*s.height}t*=r}}else t*=r?s.width:s.height;e[u]-=t}};if(2===h){u.sort((e,t)=>{switch(e){case"left":case"right":return-1;case"top":case"bottom":return 1}switch(t){case"left":case"right":return 1;case"top":case"bottom":return-1}return 0});for(let r=0;r<2;++r){let s=u[r];const i=0===r,[o,h]=i?["left",l]:["top",c],g=o+"AsPercent";switch(s){case"0%":i&&(s="left");case"left":case"top":break;case"100%":i&&(s="right");case"right":case"bottom":e[o]=h,e[g]=1;break;case"50%":case"center":s="center",e[o]=h/2,e[g]=.5;break;default:{const t=Ye(s,h,n,a);t>1?(u[r]="100%",s=i?"right":"bottom",e[s]=-1*Xe(Et(t-1),h,n,a)):e[o]=Xe(s,h,n,a),e[g]=t;break}}i?e.horizontal=s:e.vertical=s,t(s,i,o,g)}}else{let r=0,s=0;const i=(n,i)=>{switch(n){case"left":case"right":e.horizontal=n,r++;break;case"center":if(4===h)return false;{let s=true;if(void 0===i)r>0?(e.vertical=n,s=false):e.horizontal=n;else switch(i){case"left":case"right":e.vertical=n,s=false;break;case"top":case"bottom":e.horizontal=n;break;default:return false}s?(e.left=l/2,e.leftAsPercent=.5,t(n,true,"left","leftAsPercent")):(e.top=c/2,e.topAsPercent=.5,t(n,false,"top","topAsPercent"))}break;case"top":case"bottom":e.vertical=n,s++;break;default:return false}return r<2&&s<2};for(let r=0;r<h;++r){const s=u[r];if(vt(s,true)){const i=u[r-1];switch(i){case"left":case"right":{const r=Xe(s,l,n,a),o=Ye(s,l,n,a);if("right"===i)e.right=r,e.rightAsPercent=o,t(s,true,"right","rightAsPercent"),e.left=l-r,e.leftAsPercent=1-o;else{if(o>1){const r=1-o;e.horizontal="right",e.right=Xe(Et(r),l,n,a),e.rightAsPercent=r,t(s,true,"right","rightAsPercent")}e.left=r,e.leftAsPercent=o}t(s,true,"left","leftAsPercent");break}case"top":case"bottom":{const r=Xe(s,c,n,a),o=Ye(s,c,n,a);if("bottom"===i)e.bottom=r,e.bottomAsPercent=o,t(s,false,"bottom","bottomAsPercent"),e.top=c-r,e.topAsPercent=1-o;else{if(o>1){const r=1-o;e.horizontal="bottom",e.bottom=Xe(Et(r),c,n,a),e.bottomAsPercent=r,t(s,false,"bottom","bottomAsPercent")}e.top=r,e.topAsPercent=o}t(s,false,"top","topAsPercent");break}default:return He()}}else if(!i(s,u[r+1]))return He()}}return e.static=0===e.top&&0===e.right&&0===e.bottom&&0===e.left,e}}return He()},getSrcSet:function(e,t){const r=e.parentElement,n=[];let{srcset:s,sizes:l}=e;"PICTURE"===(null==r?void 0:r.tagName)&&j(r.children,e=>{if("SOURCE"===e.tagName){const{media:r,type:n,srcset:i}=e;if(S(i)&&!(S(r)&&!at(r))&&(!S(n)||!t||t.includes(n.trim().toLowerCase())))return s=i,l=e.sizes,true}}),""!==s&&s.trim().split(a.SEPARATOR).forEach(e=>{const t=Re.exec(e);if(t){let e=0,r=0;switch(t[3]){case"w":e=v(t[2]);break;case"x":r=v(t[2]);break;default:r=1}n.push({src:N(t[1].split(o.SPACE)[0]),pixelRatio:r,width:e})}});const c=n.length;if(0===c)n.push({src:e.src,pixelRatio:1,width:0});else if(c>1&&(n.sort((e,t)=>{const r=e.pixelRatio,n=t.pixelRatio;if(r>0&&n>0){if(r!==n)return r<n?-1:1}else{const r=e.width,n=t.width;if(r!==n&&r>0&&n>0)return r<n?-1:1}return 0}),S(l))){let t=NaN;for(const r of l.trim().split(a.SEPARATOR)){let n=_e.exec(r);if(n){const r=n[2]?at(n[2]):void 0,s=n[6]?at(n[6]):void 0;switch(n[5]){case"and":if(!r||!s)continue;break;case"or":if(!r&&!s)continue;break;case"not":if(void 0!==r||s)continue;break;default:if(false===r||void 0!==s)continue}const a=n[9];if(a&&(n=i.CALC.exec(a),n?t=ft(n[1],n[1].includes("%")?{boundingSize:ht(e).width}:void 0):At(a)?t=parseFloat(a)/100*ht(e).width:vt(a)&&(t=pt(a))),!isNaN(t))break}}if(!isNaN(t)){const e=t*window.devicePixelRatio;let r=-1;for(let t=0;t<c;++t){const s=n[t].width;s>0&&s<=e&&(-1===r||n[r].width<s)&&(r=t)}if(0===r){const e=n[0];e.pixelRatio=1,e.actualWidth=t}else if(r>0){const e=n.splice(r,1)[0];e.pixelRatio=1,e.actualWidth=t,n.unshift(e)}let s=1;while(s<c){const e=n[s++];0===e.pixelRatio&&(e.pixelRatio=e.width/t)}}}return n},convertListStyle:function(e,t,r){switch(e){case"decimal":return t.toString();case"decimal-leading-zero":return(t<9?"0":"")+t.toString();case"upper-alpha":case"upper-latin":if(t>=1)return w(t-1);break;case"lower-alpha":case"lower-latin":if(t>=1)return w(t-1).toLowerCase();break;case"upper-roman":return y(t);case"lower-roman":return y(t).toLowerCase()}return r?t.toString():""},extractURL:gt,resolveURL:function(e){return""!==(e=gt(e))?N(e):""},insertStyleSheetRule:function(e,t=0){const r=document.createElement("style");X(4)&&r.appendChild(document.createTextNode("")),document.head.appendChild(r);const n=r.sheet;if("function"==typeof(null==n?void 0:n.insertRule))try{n.insertRule(e,t)}catch(e){return null}return r},convertAngle:dt,convertPX:function(e,t){return e?pt(e,t)+"px":"0px"},calculate:ft,parseUnit:pt,parseAngle:bt,parseTime:mt,formatPX:function(e){return Math.round(e)+"px"},formatPercent:Et,isLength:vt,isCalc:wt,isCustomProperty:yt,isAngle:kt,isTime:xt,isPercent:At,hasCalc:St});function Ft(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}}function Tt(e,t=true){const r={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height};if(t){const{scrollX:e,scrollY:t}=window;0!==t&&(r.top+=t,r.bottom+=t),0!==e&&(r.left+=e,r.right+=e)}return r}function Ct(e){const t=[],r=document.createRange();r.selectNodeContents(e);const n=r.getClientRects();let s,i=n.length,a=0;while(a<i){const e=n.item(a++);Math.round(e.width)>0&&!B(e.left,e.right,.5)&&t.push(e)}if(i=t.length,i){s=Tt(t[0]);let e=1,r=false;a=0;while(++a<i){const{left:n,right:i,top:o,bottom:l,width:c}=t[a];n<s.left?s.left=n:n>s.right&&(r=true),i>s.right&&(s.right=i),o<s.top?s.top=o:o>=t[a-1].bottom&&e++,l>s.bottom&&(s.bottom=l),s.width+=c}s.height=s.bottom-s.top,e>1&&(s.numberOfLines=e,s.overflow=r)}else s={top:0,left:0,right:0,bottom:0,width:0,height:0};return s}var Nt=Object.freeze({__proto__:null,ELEMENT_BLOCK:["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DD","DETAILS","DIALOG","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","TABLE","UL"],newBoxRect:function(){return{top:0,left:0,right:0,bottom:0}},newBoxRectDimension:Ft,newBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},withinViewport:function(e){return!(e.top+window.scrollY+e.height<0||e.left+window.scrollX+e.width<0)},assignRect:Tt,getRangeClientRect:Ct,removeElementsByClassName:function(e){Array.from(document.getElementsByClassName(e)).forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.removeChild(e)})},getElementsBetweenSiblings:function(e,t){const r=[];if(!e||e.parentElement===t.parentElement){const n=t.parentElement;if(n){let s=e?-1:0,i=-1;j(n.childNodes,(r,n)=>{if(r===t){if(i=n,-1!==s)return true}else if(r===e&&(s=n,-1!==i))return true}),-1!==s&&-1!==i&&j(n.childNodes,e=>{const t=e.nodeName;"#"===t[0]&&"#text"!==t||r.push(e)},Math.min(s,i),Math.max(s,i)+1)}}return r},createElement:function(e,t,r){const n=document.createElement(t),s=n.style;for(const e in r)e.includes("-")?s.setProperty(e,r[e]):s[e]=r[e];return e.appendChild(n),n},measureTextWidth:function(e,t,r){if(t&&r){const n=document.createElement("canvas").getContext("2d");if(n)return n.font=`${r}px ${t}`,n.measureText(e).width}return 0},getNamedItem:function(e,t){var r;return(null===(r=e.attributes.getNamedItem(t))||void 0===r?void 0:r.value.trim())||""},isTextNode:function(e){return"#text"===e.nodeName}});function Pt(e,t,r,n){e[`__${t}::${r}`]=n}function It(e,t,r){return r||(r=e["__sessionId::0"]||"0"),e[`__${t}::${r}`]}var Lt=Object.freeze({__proto__:null,actualClientRect:function(e,t){if(t){const r=It(e,"clientRect",t);if(r)return r}const r=e.getBoundingClientRect();return t&&Pt(e,"clientRect",t,r),r},actualTextRangeRect:function(e,t){if(t){const r=It(e,"textRangeRect",t);if(r)return r}let r;e.childElementCount&&j(e.children,e=>{const t=et(e);if("visible"!==t.getPropertyValue("visibility")){const n=t.getPropertyValue("position");if("absolute"===n||"fixed"===n){const n=t.getPropertyValue("display");"none"!==n&&(e.style.display="none",r||(r=[]),r.push([e,n]))}}});const n=Ct(e);return null==r||r.forEach(e=>e[0].style.display=e[1]),t&&Pt(e,"textRangeRect",t,n),n},getStyleValue:function(e,t,r){var n;return(null===(n=It(e,"styleMap",r))||void 0===n?void 0:n[E(t)])||""},getPseudoElt:function(e,t){return It(e,"pseudoElement",t)||""},getElementAsNode:function(e,t){return It(e,"node",t)||null},setElementCache:Pt,getElementCache:It,deleteElementCache:function(e,t,r){delete e[`__${t}::${r}`]}});const _t=/^(\t+)(.*)$/,Bt={ITEM:/\s*(<(\/)?([?\w]+)[^>]*>)\n?([^<]*)/g,OPENTAG:/\s*>$/,CLOSETAG:/\/>\n*$/,NBSP:/&nbsp;/g,AMP:/&/g},Ot="&#160;".repeat(8);function Mt(e,t,r="\t",n){return t>0?(void 0===n&&(n=r.repeat(t)),z(e.split("\n"),e=>""!==e?n+e:"")):e}var Dt=Object.freeze({__proto__:null,STRING_XMLENCODING:'<?xml version="1.0" encoding="utf-8"?>\n',STRING_SPACE:"&#160;",STRING_TABSPACE:Ot,isPlainText:function(e){const t=e.length;let r=0;while(r<t)switch(e.charCodeAt(r++)){case 9:case 10:case 13:case 32:continue;default:return true}return false},pushIndent:Mt,pushIndentArray:function(e,t,r="\t",n=""){if(t>0){const n=r.repeat(t),s=e.length;let i=0;while(i<s)e[i]=Mt(e[i++],t,r,n)}return e.join(n)},replaceIndent:function(e,t,r){if(t>=0){let n=-1;return z(e.split("\n"),e=>{const s=r.exec(e);return s?(-1===n&&(n=s[2].length),(s[1]||"")+"\t".repeat(t+(s[2].length-n))+s[3]):e})}return e},replaceTab:function(e,t=4,r=false){return t>0?r?z(e.split("\n"),e=>{const r=_t.exec(e);return r?" ".repeat(t*r[1].length)+r[2]:e}):e.replace(/\t/g," ".repeat(t)):e},applyTemplate:function e(t,r,n,s){const i=r[t],a=true===i[">>"];let o="",l="";void 0===s?(o+='<?xml version="1.0" encoding="utf-8"?>\n',s=0):l+="\t".repeat(s);let c=n.length,u=-1;while(++u<c){const r=n[u],c=i["#"]&&r[i["#"]],h=!a&&!c,g=i["@"],d=i[">"];let f=false;if(o+=l+"<"+t,null==g||g.forEach(e=>{const t=r[e];t&&(o+=` ${(i["^"]?i["^"]+":":"")+e}="${t}"`)}),d){let n="";const i=s+(a?u:0)+1;for(const t in d){const s=r[t];Array.isArray(s)?n+=e(t,d,s,i):F(s)&&(n+=e(t,d,[s],i))}""!==n?(o+=">\n"+n,h&&(o+=l+`</${t}>\n`)):o+=h?" />\n":">\n",f=true}else i["~"]?(o+=">"+r.innerText,h&&(o+=`</${t}>\n`),f=true):h&&(o+=" />\n");c&&(f||(o+=">\n"),o+=c,a||(o+=l+`</${t}>\n`)),a&&(l+="\t")}if(a)while(--c>=0)l=l.substring(1),o+=l+`</${t}>\n`;return o},formatTemplate:function(e,t=true,r=-1,n="\t"){const s=[];let i;while(null!==(i=Bt.ITEM.exec(e)))s.push({tag:i[1],closing:!!i[2],tagName:i[3],value:i[4].trim()});let a="",o=r;const l=s.length;let c=-1;while(++c<l){const e=s[c];let i=o;if(c>0){if(e.closing)--o;else if(++i,!Bt.CLOSETAG.exec(e.tag))if(t&&""===e.value.trim()){const t=s[c+1];(null==t?void 0:t.closing)&&t.tagName===e.tagName?(e.tag=e.tag.replace(Bt.OPENTAG," />"),++c):++o}else++o;let r=true;e.tag.trim().split("\n").forEach(e=>{const t=i+(r?0:1);a+=(t>0?n.repeat(t):"")+e.trim()+"\n",r=false})}else a+=(r>0?n.repeat(r):"")+e.tag+"\n";a+=e.value}return a},replaceCharacterData:function(e,t=false){const r=[];let n=(e=e.replace(Bt.NBSP,"&#160;").replace(c.NONENTITY,"&amp;")).length,s=-1;while(++s<n){switch(e.charAt(s)){case"'":r.push({i:s,text:"\\'"});break;case'"':r.push({i:s,text:"&quot;"});break;case"<":r.push({i:s,text:"&lt;"});break;case">":r.push({i:s,text:"&gt;"});break;case"\t":t&&r.push({i:s,text:Ot});break;case"":r.push({i:s,text:" "});break;case" ":r.push({i:s,text:"&#160;"})}}if(n=r.length,n){const t=e.split("");let i,a=0;while(a<n)({i:s,text:i}=r[a++]),t[s]=i;return t.join("")}return e}}),zt=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const jt=new Set,$t=new Map,Wt={},Gt=new Set,Ht={};let Vt,Ut;function Xt(e,t){Vt&&!e.includes(t)&&(t.application=Vt,e.push(t))}const Yt=e=>false===(null==e?void 0:e.initializing)&&e.length>0;function qt(...e){if(Vt){const t=Vt.extensionManager;for(const e of jt)t.include(e);for(const[e,t]of $t.entries())Zt(e,t);if(jt.clear(),$t.clear(),!Vt.closed)return Vt.parseDocument(...e);if(!Wt.showErrorMessages||confirm("ERROR: Document is closed. Reset and rerun?"))return Vt.reset(),Vt.parseDocument(...e)}else Wt.showErrorMessages&&alert("ERROR: Framework not installed.");return new class{then(e){return this}catch(e){return e(new Error("Framework not installed.")),this}}}function Zt(e,t){if(F(t))if("string"==typeof e){if(Vt){e=e.trim();const r=Vt.extensionManager.retrieve(e)||O(jt,t=>t.name===e);return r?(Object.assign(r.options,t),true):($t.set(e,t),true)}}else if(e instanceof squared.base.Extension)return Object.assign(e.options,t),true;return false}function Kt(e){let t=null;if(Vt&&(t=Vt.extensionManager.retrieve(e),null===t))for(const t of Gt)if(t.name===e)return t;return t}function Qt(){null==Vt||Vt.reset()}const Jt={base:{Container:V},client:q,color:ye,css:Rt,dom:Nt,math:ue,regex:u,session:Lt,util:H,xml:Dt};e.appendFromArchive=function(e,t){var r;Yt(Vt)&&S(e)&&F(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length)&&Vt.appendFromArchive(e,t)},e.appendToArchive=function(e,t){Yt(Vt)&&S(e)&&(Vt.finalize(),Vt.appendToArchive(e,t))},e.close=function(){Yt(Vt)&&Vt.finalize()},e.configure=Zt,e.copyToDisk=function(e,t){Yt(Vt)&&S(e)&&(Vt.finalize(),Vt.copyToDisk(e,t))},e.createFrom=function(e,t){var r;Yt(Vt)&&S(e)&&F(t)&&(null===(r=t.assets)||void 0===r?void 0:r.length)&&Vt.createFrom(e,t)},e.exclude=function(e){if(Vt){const t=Vt.extensionManager;if("string"==typeof e&&(e=t.retrieve(e.trim())),e instanceof squared.base.Extension)return jt.delete(e),Gt.delete(e),t.exclude(e)}return false},e.include=function(e,t){return!!(Vt&&("string"==typeof e&&(e=e.trim(),e=Vt.builtInExtensions[e]||Kt(e)),e instanceof squared.base.Extension))&&(Gt.add(e),Vt.extensionManager.include(e)||jt.add(e),t&&Zt(e,t),true)},e.lib=Jt,e.parseDocument=qt,e.parseDocumentAsync=function(...e){return zt(this,void 0,void 0,(function*(){return yield qt(...e)}))},e.ready=function(){return false===(null==Vt?void 0:Vt.initializing)&&!Vt.closed},e.reset=Qt,e.retrieve=Kt,e.saveToArchive=function(e,t){Yt(Vt)&&(Vt.finalize(),Vt.saveToArchive(e,t))},e.setFramework=function(e,t=false){const r=void 0!==Ut;if(Ut!==e){const n=t?e.cached():e.create();r||Object.assign(n.userSettings,Wt),Object.assign(Wt,n.userSettings),Vt=n.application,Vt.userSettings=Wt;const{builtInExtensions:s,extensions:i}=Vt;i.length=0,Wt.builtInExtensions.forEach(e=>{const t=s[e];if(t)Xt(i,t);else{e+=".";for(const t in s)t.startsWith(e)&&Xt(i,s[t])}}),Ut=e,r&&Object.keys(Ht).forEach(e=>delete Ht[e]),Object.assign(Ht,e.system)}r&&Qt()},e.setViewModel=function(e){Vt&&(Vt.viewModel=e)},e.settings=Wt,e.system=Ht,e.toString=function(){return(null==Vt?void 0:Vt.toString())||""},Object.defineProperty(e,"__esModule",{value:true})}));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.base={}))}(this,(function(e){"use strict";class t extends squared.lib.base.Container{constructor(e){super(e),this._currentId=0}append(e,t=false,i=false){var n;return super.append(e),t&&(null===(n=this.afterAppend)||void 0===n||n.call(this,e,i)),this}reset(){return this._currentId=0,this.clear(),this}get nextId(){return++this._currentId}}const i=squared.lib,{STRING:n,XML:s}=i.regex,{extractURL:a}=i.css,{fromLastIndexOf:r,fromMimeType:o,hasMimeType:l,randomUUID:c}=i.util;class h{reset(){const e=h.ASSETS;for(const t in e)e[t].clear()}addImage(e){var t;if(null==e?void 0:e.complete){const i=e.src;if(i.startsWith("data:image/")){const a=new RegExp(`^${n.DATAURI}$`).exec(i);if(a){const n=a[1].split(s.DELIMITER);this.addRawData(i,n[0].trim(),(null===(t=n[1])||void 0===t?void 0:t.trim())||"base64",a[2],e.naturalWidth,e.naturalHeight)}}""!==i&&h.ASSETS.image.set(i,{width:e.naturalWidth,height:e.naturalHeight,uri:i})}}addVideo(e,t){h.ASSETS.video.set(e,{uri:e,mimeType:t})}addAudio(e,t){h.ASSETS.audio.set(e,{uri:e,mimeType:t})}addFont(e){const t=h.ASSETS.fonts,i=e.fontFamily.trim().toLowerCase();e.fontFamily=i;const n=t.get(i);n?n.push(e):t.set(i,[e])}addRawData(e,t,i,n,s=0,a=0){let l;t=t.toLowerCase(),"base64"===(i=i.toLowerCase())?(l=n,"image/svg+xml"===t&&(n=window.atob(n))):n=n.replace(/\\(["'])/g,(e,...t)=>t[0]);const c=this.mimeTypeMap.image;if("*"===c||c.includes(t)){const i=location.origin,c=o(t),d=e.endsWith("."+c)?r(e,"/"):this.randomUUID+"."+c;return h.ASSETS.rawData.set(e,{pathname:e.startsWith(i)?e.substring(i.length+1,e.lastIndexOf("/")):"",filename:d,content:n,base64:l,mimeType:t,width:s,height:a}),d}return""}getImage(e){return h.ASSETS.image.get(e)}getVideo(e){return h.ASSETS.video.get(e)}getAudio(e){return h.ASSETS.audio.get(e)}getFont(e,t="normal",i){const n=h.ASSETS.fonts.get(e.trim().toLowerCase());if(n){const e=this.mimeTypeMap.font;return n.find(n=>n.fontStyle===t&&(!i||n.fontWeight===parseInt(i))&&(l(e,n.srcFormat)||n.srcUrl&&l(e,n.srcUrl)))}}getRawData(e){if(!e.startsWith("url(")||""!==(e=a(e)))return h.ASSETS.rawData.get(e)}setFileHandler(e){e.resource=this,this.fileHandler=e}get mimeTypeMap(){return this.controllerSettings.mimeType}get randomUUID(){return c()}}h.KEY_NAME="squared.resource",h.ASSETS={ids:new Map,fonts:new Map,image:new Map,video:new Map,audio:new Map,rawData:new Map},h.canCompressImage=e=>/\.(png|jpg|jpeg)$/i.test(e);var d=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))};const u=squared.lib,{getSpecificity:f,getStyle:g,hasComputedStyle:p,insertStyleSheetRule:m,parseSelectorText:b,checkMediaRule:x}=u.css,{isTextNode:y}=u.dom,{convertCamelCase:v,isString:E,objectMap:S,resolvePath:I}=u.util,{CHAR:w,FILE:_,STRING:T,XML:k}=u.regex,{getElementCache:N,setElementCache:A}=u.session,{image:C,rawData:R}=h.ASSETS,P=/all|screen/,M=/^background/,B=/\s*([a-z-]+):[^!;]+!important;/g,L=/\s*@font-face\s*{([^}]+)}\s*/,F=/\s*font-family:[^\w]*([^'";]+)/,W=/\s*src:\s*([^;]+);/,O=/\s*font-style:\s*(\w+)\s*;/,V=/\s*font-weight:\s*(\d+)\s*;/,D=/\s*(url|local)\((?:["']([^'")]+)["']|([^)]+))\)(?:\s*format\(["']?([\w-]+)["']?\))?\s*/,H=new RegExp(`url\\(["']?(${T.DATAURI})["']?\\),?\\s*`,"g");function X(e,t=0,i=0){if(""!==e){const n=C.get(e);(t>0&&i>0||!n||0===n.width||0===n.height)&&C.set(e,{width:t,height:i,uri:e})}}function Y(e){""!==e&&e.split(k.SEPARATOR).forEach(e=>{""!==e&&X(I(e.split(w.SPACE)[0]))})}const U=e=>_.SVG.test(e),z=(e,t)=>{var i;return(null===(i=new RegExp(`\\s*@${e}([^{]+)`).exec(t))||void 0===i?void 0:i[1].trim())||t};class G{constructor(e,i,n,s,a){this.framework=e,this.initializing=false,this.closed=false,this.rootElements=new Set,this.session={active:[]},this.processing={cache:new t,excluded:new t,sessionId:""},this._cascadeAll=false;const r=this.processing.cache;this._cache=r,this._controllerHandler=new n(this,r),this._resourceHandler=new s(this,r),this._extensionManager=new a(this,r),this._afterInsertNode=this._controllerHandler.afterInsertNode,this.Node=i}copyToDisk(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.copyToDisk(e,t)}appendToArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.appendToArchive(e,t)}saveToArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.saveToArchive(e||this.userSettings.outputArchiveName,t)}createFrom(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.createFrom(e,t)}appendFromArchive(e,t){var i;null===(i=this.fileHandler)||void 0===i||i.appendFromArchive(e,t)}reset(){var e;const t=this.processing;t.cache.reset(),t.excluded.clear(),t.sessionId="",this.session.active.length=0,this.controllerHandler.reset(),this.resourceHandler.reset(),null===(e=this.fileHandler)||void 0===e||e.reset(),this.extensions.forEach(e=>e.subscribers.clear()),this.closed=false}parseDocument(...e){const{controllerHandler:t,resourceHandler:i}=this;this.initializing=false,this.rootElements.clear();const n=t.generateSessionId;this.processing.sessionId=n,this.session.active.push(n),t.sessionId=n,t.init(),this.setStyleMap();const s=[],a=this.userSettings.preloadImages,r=[],o=m("html > body { overflow: hidden !important; }"),l=()=>{this.initializing=false,s.forEach(e=>{e.parentElement&&f.removeChild(e)}),s.length=0};let c,h;const u=()=>{l(),this.extensions.forEach(e=>e.beforeParseDocument());for(const e of this.rootElements){const t=this.createCache(e);t&&this.afterCreateCache(t)}this.extensions.forEach(e=>e.afterParseDocument());try{document.head.removeChild(o)}catch(e){}"function"==typeof c&&c.call(this)};0===e.length&&e.push(document.body),e.forEach(e=>{let t;if("string"==typeof e)t=document.getElementById(e);else{if(!p(e))return;t=e}t&&this.rootElements.add(t)});const f=this.rootElements.values().next().value;if(a){for(const e of this.rootElements)e.querySelectorAll("picture > source").forEach(e=>Y(e.srcset)),e.querySelectorAll("video").forEach(e=>X(e.poster)),e.querySelectorAll("input[type=image]").forEach(e=>X(e.src,e.width,e.height));for(const e of C.values()){const t=e.uri;if(U(t))r.push(t);else if(0===e.width||0===e.height){const i=document.createElement("img");i.src=t,i.naturalWidth>0&&i.naturalHeight>0?(e.width=i.naturalWidth,e.height=i.naturalHeight):(f.appendChild(i),s.push(i))}}}for(const[e,t]of R.entries()){const i=t.mimeType;if((null==i?void 0:i.startsWith("image/"))&&!i.endsWith("svg+xml")){const n=document.createElement("img");n.src=`data:${i};${t.base64?"base64,"+t.base64:t.content}`;const{naturalWidth:a,naturalHeight:r}=n;a>0&&r>0?(t.width=a,t.height=r,C.set(e,{width:a,height:r,uri:t.filename})):(document.body.appendChild(n),s.push(n))}}for(const e of this.rootElements)e.querySelectorAll("img").forEach(e=>{U(e.src)?a&&r.push(e.src):(a&&Y(e.srcset),e.complete?i.addImage(e):a&&r.push(e))});r.length?(this.initializing=true,Promise.all(S(r,e=>new Promise((t,i)=>{"string"==typeof e?t(function(e){return d(this,void 0,void 0,(function*(){return(yield fetch(e,{method:"GET",headers:new Headers({Accept:"application/xhtml+xml, image/svg+xml","Content-Type":"image/svg+xml"})})).text()}))}(e)):(e.addEventListener("load",()=>t(e)),e.addEventListener("error",()=>i(e)))}))).then(e=>{const t=e.length;for(let n=0;n<t;++n){const t=e[n];if("string"==typeof t){const e=r[n];"string"==typeof e&&i.addRawData(e,"image/svg+xml","utf8",t)}else i.addImage(t)}u()}).catch(e=>{let t=e;e instanceof Event&&(t=e.target);const i=t instanceof HTMLImageElement?t.src:"";h?(e instanceof Error||(e=new Error(i?"FAIL: "+i:"Unable to preload images.")),l(),h(e,u)):this.userSettings.showErrorMessages&&E(i)&&!confirm("FAIL: "+i)?l():u()})):u();return new class{then(e){return r.length?c=e:e(),this}catch(e){return h=e,this}}}parseDocumentAsync(...e){return d(this,void 0,void 0,(function*(){return yield this.parseDocument(...e)}))}createCache(e){const t=this.createRootNode(e);return t&&this.controllerHandler.sortInitialCache(),t}toString(){return""}createRootNode(e){const t=this.processing,i=t.cache;i.clear(),t.excluded.clear(),this._cascadeAll=false;const n=this.extensionsCascade,s=this.cascadeParentNode(e,0,n.length?n:void 0);if(s){const i=new this.Node(0,t.sessionId,e.parentElement||document.body,this._afterInsertNode);s.parent=i,s.actualParent=i,s.childIndex=0,s.documentRoot=true}return t.node=s,i.afterAppend=void 0,s}cascadeParentNode(e,t,i){const n=this.insertNode(e);if(n){const{controllerHandler:s,processing:a}=this,r=a.cache;if(n.depth=t,0===t&&r.append(n),s.preventNodeCascade(e))return n;const{childElementCount:o,childNodes:l}=e,c=l.length,h=new Array(c),d=new Array(o);let u=true,f=0,g=0,p=0;while(f<c){const e=l[f++];let o;"#"===e.nodeName.charAt(0)?y(e)&&(o=this.insertNode(e,n)):s.includeElement(e)?(o=this.cascadeParentNode(e,t+1,i),o&&(d[p++]=o,r.append(o),u=false)):(o=this.insertNode(e),o&&(a.excluded.append(o),u=false)),o&&(o.parent=n,o.actualParent=n,o.childIndex=g,h[g++]=o)}h.length=g,d.length=p,n.naturalChildren=h,n.naturalElements=d,n.inlineText=u,p>0&&this.userSettings.createQuerySelectorMap&&(n.queryMap=this.createQueryMap(d,p))}return n}createQueryMap(e,t){var i;const n=[e];let s=0;while(s<t){const t=e[s++].queryMap;if(t){const e=t.length;for(let s=0;s<e;++s){const e=s+1;n[e]=(null===(i=n[e])||void 0===i?void 0:i.concat(t[s]))||t[s]}}}return n}setStyleMap(){let e=false;const t=i=>{try{const e=i.cssRules;if(e){const i=e.length;let n=0;while(n<i){const i=e[n++];switch(i.type){case CSSRule.STYLE_RULE:case CSSRule.FONT_FACE_RULE:this.applyStyleRule(i);break;case CSSRule.IMPORT_RULE:t(i.styleSheet);break;case CSSRule.MEDIA_RULE:x(i.conditionText||z("media",i.cssText))&&this.applyCSSRuleList(i.cssRules);break;case CSSRule.SUPPORTS_RULE:CSS.supports&&CSS.supports(i.conditionText||z("supports",i.cssText))&&this.applyCSSRuleList(i.cssRules)}}}}catch(t){this.userSettings.showErrorMessages&&!e&&(alert("CSS cannot be parsed inside <link> tags when loading files directly from your hard drive or from external websites. Either use a local web server, embed your CSS into a <style> tag, or you can also try using a different browser. See the README for more detailed instructions.\n\n"+i.href+"\n\n"+t),e=true)}},i=document.styleSheets,n=i.length;let s=0;while(s<n){const e=i[s++];let n;try{n=e.media.mediaText}catch(e){}E(n)&&!P.test(n)||t(e)}}applyStyleRule(e){var t,i,n,s,a,r;const o=this.resourceHandler,l=this.processing.sessionId,c=(null===(t=e.parentStyleSheet)||void 0===t?void 0:t.href)||void 0,h=e.cssText;switch(e.type){case CSSRule.SUPPORTS_RULE:this.applyCSSRuleList(e.cssRules);break;case CSSRule.STYLE_RULE:{const t=e.style,i={},n={},s=e=>{var t;const i=n[e];if(i&&"initial"!==i){let s,a=i;H.lastIndex=0;while(null!==(s=H.exec(i)))if(s[2]){const e=s[2].split(k.DELIMITER);o.addRawData(s[1],e[0].trim(),(null===(t=e[1])||void 0===t?void 0:t.trim())||"utf8",s[3])}else if(this.userSettings.preloadImages){const e=I(s[3],c);""!==e&&(o.getImage(e)||X(e),a=a.replace(s[0],`url("${e}")`))}n[e]=a}};let a;Array.from(t).forEach(e=>n[v(e)]=t[e]),s("backgroundImage"),s("listStyleImage"),s("content"),B.lastIndex=0;while(null!==(a=B.exec(h))){const e=v(a[1]);switch(e){case"margin":i.marginTop=true,i.marginRight=true,i.marginBottom=true,i.marginLeft=true;break;case"padding":i.paddingTop=true,i.paddingRight=true,i.paddingBottom=true,i.paddingLeft=true;break;case"background":i.backgroundColor=true,i.backgroundImage=true,i.backgroundSize=true,i.backgroundRepeat=true,i.backgroundPositionX=true,i.backgroundPositionY=true;break;case"backgroundPosition":i.backgroundPositionX=true,i.backgroundPositionY=true;break;case"border":i.borderTopStyle=true,i.borderRightStyle=true,i.borderBottomStyle=true,i.borderLeftStyle=true,i.borderTopWidth=true,i.borderRightWidth=true,i.borderBottomWidth=true,i.borderLeftWidth=true,i.borderTopColor=true,i.borderRightColor=true,i.borderBottomColor=true,i.borderLeftColor=true;break;case"borderStyle":i.borderTopStyle=true,i.borderRightStyle=true,i.borderBottomStyle=true,i.borderLeftStyle=true;break;case"borderWidth":i.borderTopWidth=true,i.borderRightWidth=true,i.borderBottomWidth=true,i.borderLeftWidth=true;break;case"borderColor":i.borderTopColor=true,i.borderRightColor=true,i.borderBottomColor=true,i.borderLeftColor=true;break;case"font":i.fontFamily=true,i.fontStyle=true,i.fontSize=true,i.fontWeight=true,i.lineHeight=true}i[e]=true}b(e.selectorText,true).forEach(e=>{const s=f(e),[a,r]=e.split("::"),o=r?"::"+r:"";document.querySelectorAll(a||"*").forEach(e=>{const a="styleMap"+o,r="styleSpecificity"+o,c=N(e,a,l);if(c){const a=N(e,r,l)||{};for(const e in n){const r=a[e],o=s+(i[e]?1e3:0);if(void 0===r||o>=r){const i=n[e];"initial"===i&&M.test(e)?"none"===t.background&&delete c[e]:c[e]=i,a[e]=o}}}else{const t=Object.assign({},n),c={};for(const e in t)c[e]=s+(i[e]?1e3:0);A(e,"style"+o,"0",g(e,o)),A(e,"sessionId","0",l),A(e,a,l,t),A(e,r,l,c)}})});break}case CSSRule.FONT_FACE_RULE:{const e=null===(i=L.exec(h))||void 0===i?void 0:i[1];if(e){const t=((null===(n=F.exec(e))||void 0===n?void 0:n[1])||"").trim(),i=((null===(s=W.exec(e))||void 0===s?void 0:s[1])||"").split(k.SEPARATOR);if(""!==t&&i.length){const n=(null===(a=O.exec(e))||void 0===a?void 0:a[1].toLowerCase())||"normal",s=parseInt((null===(r=V.exec(e))||void 0===r?void 0:r[1])||"400");i.forEach(e=>{var i;const a=D.exec(e);if(a){let e,r;const l=(a[2]||a[3]).trim();"url"===a[1]?e=I(l,c):r=l,o.addFont({fontFamily:t,fontWeight:s,fontStyle:n,srcUrl:e,srcLocal:r,srcFormat:(null===(i=a[4])||void 0===i?void 0:i.toLowerCase().trim())||"truetype"})}})}}break}}}applyCSSRuleList(e){const t=e.length;let i=0;while(i<t)this.applyStyleRule(e[i++])}get controllerHandler(){return this._controllerHandler}get resourceHandler(){return this._resourceHandler}get extensionManager(){return this._extensionManager}get fileHandler(){return this._resourceHandler.fileHandler}get extensionsCascade(){return[]}get nextId(){return this._cache.nextId}get length(){return 0}}G.KEY_NAME="squared.application";class j{preventNodeCascade(e){return false}get generateSessionId(){return(new Date).getTime().toString()}}class q{constructor(e,t,i){this.name=e,this.framework=t,this.options={},this.dependencies=[],this.subscribers=new Set,i&&Object.assign(this.options,i)}require(e,t=false){this.dependencies.push({name:e,preload:t})}beforeParseDocument(){}afterParseDocument(){}set application(e){this._application=e,this._controller=e.controllerHandler}get application(){return this._application}get controller(){return this._controller}}const{hasBit:$,isObject:K}=squared.lib.util;const{fromLastIndexOf:Q,isString:J}=squared.lib.util,Z=()=>location.protocol.startsWith("http");class ee{constructor(){this.assets=[]}static downloadFile(e,t,i){const n=new Blob([e],{type:i||"application/octet-stream"}),s=window.URL.createObjectURL(n),a=document.createElement("a");a.style.setProperty("display","none"),a.setAttribute("href",s),a.setAttribute("download",t),a.download||a.setAttribute("target","_blank");const r=document.body;r.appendChild(a),a.click(),r.removeChild(a),setTimeout(()=>window.URL.revokeObjectURL(s),1)}createFrom(e,t){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{format:e}))}appendFromArchive(e,t){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{appendTo:e,format:e.substring(e.lastIndexOf(".")+1)}))}addAsset(e){if(e.content||e.uri||e.base64){const{pathname:t,filename:i}=e,n=this.assets.find(e=>e.pathname===t&&e.filename===i);n?Object.assign(n,e):this.assets.push(e)}}reset(){this.assets.length=0}copying(e){if(Z()){const{assets:t,directory:i}=e;if(J(i)){const n=t?t.concat(this.assets):this.assets;n.length&&(n[0].exclusions=e.exclusions,fetch("/api/assets/copy?to="+encodeURIComponent(i.trim())+"&empty="+(this.userSettings.outputEmptyCopyDirectory?"1":"0"),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(n)}).then(e=>e.json()).then(t=>{if(t&&("function"==typeof e.callback&&e.callback(t),this.userSettings.showErrorMessages)){const{application:e,system:i}=t;i&&alert(e+"\n\n"+i)}}).catch(e=>{this.userSettings.showErrorMessages&&alert("ERROR: "+e)}))}}else this.userSettings.showErrorMessages&&alert("SERVER (required): See README for instructions")}archiving(e){if(Z()){const{assets:t,filename:i}=e;if(J(i)){const n=t?t.concat(this.assets):this.assets;n.length&&(n[0].exclusions=e.exclusions,fetch("/api/assets/archive?filename="+encodeURIComponent(i.trim())+"&format="+(e.format||this.userSettings.outputArchiveFormat).trim().toLowerCase()+"&append_to="+encodeURIComponent((e.appendTo||"").trim()),{method:"POST",headers:new Headers({Accept:"application/json, text/plain","Content-Type":"application/json"}),body:JSON.stringify(n)}).then(e=>e.json()).then(t=>{if(t){"function"==typeof e.callback&&e.callback(t);const i=t.zipname;if(J(i))fetch("/api/browser/download?filepath="+encodeURIComponent(i)).then(e=>e.blob()).then(e=>ee.downloadFile(e,Q(i,"/","\\")));else if(this.userSettings.showErrorMessages){const{application:e,system:i}=t;i&&alert(e+"\n\n"+i)}}}).catch(e=>{this.userSettings.showErrorMessages&&alert("ERROR: "+e)}))}}else this.userSettings.showErrorMessages&&alert("SERVER (required): See README for instructions")}}const te=squared.lib,{USER_AGENT:ie,isUserAgent:ne}=te.client,{BOX_BORDER:se,CSS_UNIT:ae,TEXT_STYLE:re,checkStyleValue:oe,checkWritingMode:le,formatPX:ce,getInheritedStyle:he,getStyle:de,hasComputedStyle:ue,isLength:fe,isPercent:ge,parseSelectorText:pe,parseUnit:me}=te.css,{ELEMENT_BLOCK:be,assignRect:xe,getNamedItem:ye,getRangeClientRect:ve,newBoxRectDimension:Ee}=te.dom,{CHAR:Se,CSS:Ie,FILE:we,XML:_e}=te.regex,{actualClientRect:Te,actualTextRangeRect:ke,deleteElementCache:Ne,getElementAsNode:Ae,getElementCache:Ce,getPseudoElt:Re,setElementCache:Pe}=te.session,{aboveRange:Me,belowRange:Be,convertCamelCase:Le,convertFloat:Fe,convertInt:We,hasBit:Oe,hasValue:Ve,isNumber:De,isObject:He,isString:Xe,iterateArray:Ye,spliceString:Ue,splitEnclosing:ze}=te.util,{PX:Ge,SELECTOR_ATTR:je,SELECTOR_G:qe,SELECTOR_LABEL:$e,SELECTOR_PSEUDO_CLASS:Ke}=Ie,Qe=/\s*(url|[a-z-]+gradient)/,Je=/^:lang\(\s*(.+)\s*\)$/,Ze=/^:nth(-last)?-(child|of-type)\((.+)\)$/,et=/^(-)?(\d+)?n\s*([+-]\d+)?$/,tt=/\dem$/;function it(e,t,i,n){const s=(n||e).css(t);return De(s)?parseFloat(s):"inherit"!==s||n?i:it(e,t,i,e.actualParent)}function nt(e,t,i,n,s){var a,r;if(t.all)return true;let o=t.tagName;if(o&&o!==e.tagName.toUpperCase())return false;const l=t.id;if(l&&l!==e.elementId)return false;const{attrList:c,classList:h,notList:d,pseudoList:u}=t;if(u){const t=e.actualParent;o=e.tagName;for(const i of u)switch(i){case":first-child":case":nth-child(1)":if(e!==t.firstChild)return false;break;case":last-child":case":nth-last-child(1)":if(e!==t.lastChild)return false;break;case":only-child":if(t.naturalElements.length>1)return false;break;case":only-of-type":{let e=0;for(const i of t.naturalElements)if(i.tagName===o&&++e>1)return false;break}case":first-of-type":for(const i of t.naturalElements)if(i.tagName===o){if(i!==e)return false;break}break;case":nth-child(n)":case":nth-last-child(n)":break;case":empty":if(e.element.childNodes.length)return false;break;case":checked":switch(o){case"INPUT":if(!e.toElementBoolean("checked"))return false;break;case"OPTION":if(!e.toElementBoolean("selected"))return false;break;default:return false}break;case":enabled":if(!e.inputElement||e.toElementBoolean("disabled"))return false;break;case":disabled":if(!e.inputElement||!e.toElementBoolean("disabled"))return false;break;case":read-only":{const t=e.element;if(t.isContentEditable||("INPUT"===o||"TEXTAREA"===o)&&!t.readOnly)return false;break}case":read-write":{const t=e.element;if(!t.isContentEditable||("INPUT"===o||"TEXTAREA"===o)&&t.readOnly)return false;break}case":required":if(!e.inputElement||"BUTTON"===o||!e.toElementBoolean("required"))return false;break;case":optional":if(!e.inputElement||"BUTTON"===o||e.toElementBoolean("required"))return false;break;case":placeholder-shown":if(!(("INPUT"===o||"TEXTAREA"===o)&&""!==e.toElementString("placeholder")))return false;break;case":default":switch(o){case"INPUT":{const t=e.element;switch(t.type){case"radio":case"checkbox":if(!t.checked)return false;break;default:return false}break}case"OPTION":if(void 0===e.element.attributes.selected)return false;break;case"BUTTON":{const t=e.ascend({condition:e=>"FORM"===e.tagName})[0];if(t){let i=false;const n=e.element;if(Ye(t.element.querySelectorAll("*"),e=>{switch(e.tagName){case"BUTTON":return i=n===e,true;case"INPUT":switch(e.type){case"submit":case"image":return i=n===e,true}}}),!i)return false}break}default:return false}break;case":in-range":case":out-of-range":if("INPUT"!==o)return false;{const t=e.element,n=parseFloat(t.value);if(isNaN(n)){if(":in-range"===i)return false}else{const e=parseFloat(t.min),s=parseFloat(t.max);if(n>=e&&n<=s){if(":out-of-range"===i)return false}else if(":in-range"===i)return false}}break;case":indeterminate":if("INPUT"===o){const t=e.element;switch(t.type){case"checkbox":if(!t.indeterminate)return false;break;case"radio":if(t.checked)return false;if(t.name&&Ye(((null===(a=e.ascend({condition:e=>"FORM"===e.tagName})[0])||void 0===a?void 0:a.element)||document).querySelectorAll(`input[type=radio][name="${t.name}"`),e=>e.checked)===Number.POSITIVE_INFINITY)return false;break;default:return false}}else{if("PROGRESS"!==o)return false;if(-1!==e.toElementInt("value",-1))return false}break;case":target":if(""===location.hash)return false;{const t=e.element;if(!(location.hash==="#"+t.id||"A"===o&&location.hash==="#"+t.name))return false}break;case":scope":if(!n||">"===s&&e!==this)return false;break;case":root":if(!n||s)return false;break;case":link":case":visited":case":any-link":case":hover":case":focus":case":focus-within":case":valid":case":invalid":{const n=e.element;if(Ye(t.element.querySelectorAll(":scope > "+i),e=>e===n)!==Number.POSITIVE_INFINITY)return false;break}default:{let n=Ze.exec(i);if(n){const i=n[3].trim();let s=t.naturalElements;n[1]&&(s=s.slice(0).reverse());const a=("child"===n[2]?s.indexOf(e):s.filter(e=>e.tagName===o).indexOf(e))+1;if(a>0){if(De(i)){if(parseInt(i)!==a)return false}else switch(i){case"even":if(a%2!=0)return false;break;case"odd":if(a%2==0)return false;break;default:{const e=et.exec(i);if(e){const t=We(e[3]);if(e[2]){if(e[1])return false;const i=parseInt(e[2]);if(0!==i){if(a!==t)for(let e=i;;e+=i){const e=i+t;if(e===a)break;if(e>a)return false}}else if(a!==t)return false}else if(e[3]){if(!(t>0))return false;if(e[1]){if(a>t)return false}else if(a<t)return false}}break}}continue}}else if(n=Je.exec(i),n&&(null===(r=e.attributes.lang)||void 0===r?void 0:r.trim().toLowerCase())===n[1].toLowerCase())continue;return false}}}if(d)for(const t of d){const s={};switch(t.charAt(0)){case".":s.classList=[t];break;case"#":s.id=t.substring(1);break;case":":s.pseudoList=[t];break;case"[":{je.lastIndex=0;const e=je.exec(t);if(!e)continue;{const t="i"===e[6];let i=e[3]||e[4]||e[5]||"";t&&(i=i.toLowerCase()),s.attrList=[{key:e[1],symbol:e[2],value:i,caseInsensitive:t}]}break}default:if(!Se.WORDDASH.test(t))return false;s.tagName=t}if(nt.call(this,e,s,i,n))return false}if(h){const t=e.element.classList;for(const e of h)if(!t.contains(e))return false}if(c){const t=e.attributes;for(const e of c){let i=t[e.key];if(void 0===i)return false;{const t=e.value;if(t)if(e.caseInsensitive&&(i=i.toLowerCase()),e.symbol)switch(e.symbol){case"~":if(!i.split(Se.SPACE).includes(t))return false;break;case"^":if(!i.startsWith(t))return false;break;case"$":if(!i.endsWith(t))return false;break;case"*":if(!i.includes(t))return false;break;case"|":if(i!==t&&!i.startsWith(t+"-"))return false}else if(i!==t)return false}}}return true}function st(e,t,i){const n=e.cssAscend("textAlign",e.textElement&&e.blockStatic&&!e.hasPX("width"));return(n===t||n===i)&&(e.blockStatic?e.textElement&&!e.hasPX("width",true,true)&&!e.hasPX("maxWidth",true,true):e.display.startsWith("inline"))}function at(e,t,i,n,s){return s===n||(e.style.setProperty(t,n),!!pt(n,e.style.getPropertyValue(t))&&(Pe(e,t,i,"auto"!==n?s:""),true))}function rt(e,t,i){const n=Ce(e,t,i);void 0!==n&&(e.style.setProperty(t,n),Ne(e,t,i))}function ot(e,t){const i=e.actualParent;return true===(null==i?void 0:i.flexElement)&&true===i.flexdata[t]}function lt(e,t,i,n,s){const a=t[i],r=e.parseUnit(a,i);let o=Math.max(r,e.parseUnit(t[n],i));if(0===o&&e.styleElement){const t=e.element;switch(t.tagName){case"IMG":case"INPUT":if("image"!==t.type)break;case"TD":case"TH":case"SVG":case"IFRAME":case"VIDEO":case"AUDIO":case"CANVAS":case"OBJECT":case"EMBED":{const n=ye(t,i);""!==n&&(o=De(n)?parseFloat(n):e.parseUnit(n,i),o>0&&e.css(i,ge(n)?n:n+"px"));break}}}let l=0;if(r>0&&!e.imageElement){const n=t[s];a===n?delete t[s]:(l=e.parseUnit(n,i),l>0&&l<=r&&fe(a)&&(l=0,t[i]=n,delete t[s]))}return l>0?Math.min(o,l):o}function ct(e){let t=0;if(e.htmlElement&&!e.inputElement&&!e.imageElement&&"HR"!==e.tagName&&!e.documentBody){const i=e.element,{overflowX:n,overflowY:s}=e.cssAsObject("overflowX","overflowY");e.hasHeight&&(e.hasPX("height")||e.hasPX("maxHeight"))&&("scroll"===s||"auto"===s&&i.clientHeight!==i.scrollHeight)&&(t|=16),(e.hasPX("width")||e.hasPX("maxWidth"))&&("scroll"===n||"auto"===n&&i.clientWidth!==i.scrollWidth)&&(t|=8)}return t}function ht(e){if(!this.positionStatic){const t=ft.bind(this,e,true)();if(fe(t))return this.parseUnit(t,"left"===e||"right"===e?"width":"height");if(ge(t)&&this.styleElement)return Fe(this.style[e])}return 0}function dt(e,t,i){if(!e.plainText){switch(e.css(i[0])){case"none":case"initial":case"hidden":return 0}const n=e.css(i[1]),s=fe(n,true)?e.parseUnit(n,t):Fe(e.style[i[1]]);if(s>0)return Math.max(Math.round(s),1)}return 0}function ut(e,t,i){var n,s;switch(e.display){case"table":if(!i&&"collapse"===e.css("borderCollapse"))return 0;break;case"table-row":return 0;case"table-cell":if(i){switch(e.tagName){case"TD":case"TH":return 0;default:{const i=e.ascend({condition:e=>"TABLE"===e.tagName})[0];if(i){const[s,a]=i.css("borderSpacing").split(" ");switch(t){case"marginTop":case"marginBottom":return a?e.parseUnit(a,"height",false):e.parseUnit(s,"width",false);case"marginRight":if((null===(n=e.actualParent)||void 0===n?void 0:n.lastChild)!==e)return e.parseUnit(s,"width",false);case"marginLeft":return 0}}break}}return 0}}return e.parseUnit(e.css(t),"width",true!==(null===(s=e.actualParent)||void 0===s?void 0:s.gridElement))}function ft(e,t,i){return!this._preferInitial&&this._styleMap[e]||this.cssInitial(e,t,i)}const gt=e=>e.naturalChild&&(e.inlineVertical||0===e.length)&&!e.floating&&true!==e.autoMargin.horizontal,pt=(e,t)=>e===t||fe(e,true)&&Ge.test(t),mt=(e,t)=>e.id<t.id?-1:1;class bt extends squared.lib.base.Container{constructor(e,t="0",i){super(),this.id=e,this.sessionId=t,this.documentRoot=false,this.depth=-1,this.childIndex=Number.POSITIVE_INFINITY,this._element=null,this._data={},this._documentBody=false,this._inlineText=false,i?(this._element=i,this._documentBody=i===document.body):(this.style={},this._styleMap={},this._cssStyle={})}init(){const e=this._element;if(e){const t=this.styleElement,i=this.sessionId,n=Ce(e,"styleMap",i)||{};let s;if(this.pseudoElement)s=de(e.parentElement,Re(e,i));else if(s=de(e),t){const t=Array.from(e.style),i=t.length;if(i){const s=e.style;let a=0;while(a<i){const e=t[a++];n[Le(e)]=s.getPropertyValue(e)}}}if(t){const t={},i=s.writingMode;for(let a in n){const r=n[a],o=le(a,i);if(""!==o){if(n[o])continue;a=o}const l=oe(e,a,r,s);""!==l&&(t[a]=l)}this._styleMap=t}else this._styleMap=n;this.style=s,this._cssStyle=n,"0"!==i&&Pe(e,"node",i,this)}}saveAsInitial(e=false){(void 0===this._initial||e)&&(this._initial={children:this.duplicate(),styleMap:Object.assign({},this._styleMap)})}data(e,t,i,n=true){const s=this._data;if(Ve(i)){let a=s[e];He(a)||(a={},s[e]=a),(n||void 0===a[t])&&(a[t]=i)}else if(null===i)return void delete s[e];const a=s[e];return He(a)?a[t]:void 0}unsetCache(...e){const t=(e=true)=>{this._preferInitial||(this.resetBounds(),e&&this.cascade(e=>(e.resetBounds(),false)))};if(e.length){const i=this._cached;e.forEach(e=>{switch(e){case"position":this._preferInitial&&this.cascade(e=>(e.pageFlow||e.unsetCache("absoluteParent"),e.resetBounds(),false)),this._cached={},t();break;case"display":case"float":case"tagName":return this._cached={},void t();case"width":i.actualWidth=void 0,i.percentWidth=void 0;case"minWidth":i.width=void 0;case"maxWidth":i.overflow=void 0,t();break;case"height":i.actualHeight=void 0,i.percentHeight=void 0;case"minHeight":i.height=void 0,this._preferInitial&&(i.blockVertical=void 0,i.overflow=void 0,this.each(e=>e.unsetCache("height","blockVertical","overflow","bottomAligned")));case"maxHeight":i.overflow=void 0,t();break;case"verticalAlign":i.baseline=void 0,t();break;case"left":case"right":t();case"textAlign":i.rightAligned=void 0,i.centerAligned=void 0;break;case"top":case"bottom":i.bottomAligned=void 0,t();break;case"overflowX":case"overflowY":i.overflow=void 0,t();break;default:e.startsWith("margin")?(i.autoMargin=void 0,i.rightAligned=void 0,i.centerAligned=void 0,t()):e.startsWith("padding")?(i.contentBoxWidth=void 0,i.contentBoxHeight=void 0,t()):e.startsWith("border")?(i.visibleStyle=void 0,i.contentBoxWidth=void 0,i.contentBoxHeight=void 0,t()):e.startsWith("background")?i.visibleStyle=void 0:re.includes(e)&&(i.lineHeight=void 0,this._textStyle=void 0,t())}i[e]=void 0})}else this._cached={},this._textStyle=void 0,t()}ascend(e={}){let t=e.attr;if(Xe(t)){if(!/Parent$/i.test(t))return[]}else t="actualParent";const{condition:i,including:n,error:s,every:a,excluding:r}=e,o=[];let l=e.startSelf?this:this[t];while(l&&l!==r){if(s&&s(l))break;if(i){if(i(l)&&(o.push(l),!a))break}else o.push(l);if(l===n)break;l=l[t]}return o}intersectX(e,t="linear"){if(e.width>0){const{left:i,right:n}=this[t],{left:s,right:a}=e;return Math.ceil(i)>=s&&Math.floor(i)<=a||n>=Math.floor(s)&&n<=Math.ceil(a)||Math.ceil(s)>=i&&Math.floor(s)<=n||a>=Math.floor(i)&&a<=Math.ceil(n)}return false}intersectY(e,t="linear"){if(e.height>0){const{top:i,bottom:n}=this[t],{top:s,bottom:a}=e;return Math.ceil(i)>=s&&Math.floor(i)<=a||n>=Math.floor(s)&&n<=Math.ceil(a)||Math.ceil(s)>=i&&Math.floor(s)<=n||a>=Math.floor(i)&&a<=Math.ceil(n)}return false}withinX(e,t="linear"){if(this.pageFlow||e.width>0){const i=this[t];return Me(i.left,e.left)&&Be(i.right,e.right)}return true}withinY(e,t="linear"){if(this.pageFlow||e.height>0){const i=this[t];return Math.ceil(i.top)>=e.top&&Math.floor(i.bottom)<=e.bottom}return true}outsideX(e,t="linear"){if(this.pageFlow||e.width>0){const i=this[t];return i.left<Math.floor(e.left)||i.right>Math.ceil(e.right)}return false}outsideY(e,t="linear"){if(this.pageFlow||e.height>0){const i=this[t];return i.top<Math.floor(e.top)||i.bottom>Math.ceil(e.bottom)}return false}css(e,t,i=true){return t&&this.styleElement&&(this.style[e]=t,pt(t,this.style[e]))?(this._styleMap[e]=t,i&&this.unsetCache(e),t):this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=true){for(const i in e){const n=e[i];this.css(i,n,t)===n&&t&&this.unsetCache(i)}return this}cssInitial(e,t=false,i=false){var n;let s=((null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[e]||t&&this._styleMap[e];return!s&&i&&(s=this.style[e]),s||""}cssAny(e,...t){const i=this.css(e);for(const e of t)if(i===e)return true;return false}cssInitialAny(e,...t){for(const i of t)if(this.cssInitial(e)===i)return true;return false}cssAscend(e,t=false){let i,n=t?this:this.actualParent;while(n){if(i=n.cssInitial(e),""!==i)return i;if(n.documentBody)break;n=n.actualParent}return""}cssSort(e,t=true,i=false){return(i?this.duplicate():this.children).sort((i,n)=>{const s=i.toFloat(e,i.childIndex),a=n.toFloat(e,n.childIndex);return s===a?0:t?s<a?-1:1:s>a?-1:1})}cssPX(e,t,i=false,n=false){const s=this._styleMap[e];if(s&&fe(s)){t+=me(s,this.fontSize),!i&&t<0&&(t=0);const a=ce(t);return this.css(e,a),n&&this.unsetCache(e),a}return""}cssSpecificity(e){var t,i;let n;if(this.styleElement)if(this.pseudoElement){const i=this._element,s=this.sessionId;n=null===(t=Ce(i.parentElement,"styleSpecificity"+Re(i,s),s))||void 0===t?void 0:t[e]}else n=null===(i=Ce(this._element,"styleSpecificity",this.sessionId))||void 0===i?void 0:i[e];return n||0}cssTry(e,t){if(this.styleElement){const i=this._element;return at(i,e,this.sessionId,t,de(i).getPropertyValue(e))}return false}cssFinally(e){if(this.styleElement)if("string"==typeof e)rt(this._element,e,this.sessionId);else{const t=this.sessionId,i=this._element;for(const n in e)rt(i,n,t)}}cssTryAll(e){if(this.styleElement){const t=this.sessionId,i=this._element,n=de(i),s=[];for(const a in e){if(!at(i,a,t,e[a],n.getPropertyValue(a)))return void s.forEach(e=>this.cssFinally(e));s.push(a)}return e}}cssParent(e,t,i=false){return this.naturalChild?this.actualParent.css(e,t,i):""}cssCopy(e,...t){const i=this._styleMap;t.forEach(t=>i[t]=e.css(t))}cssCopyIfEmpty(e,...t){const i=this._styleMap;t.forEach(t=>{Ve(i[t])||(i[t]=e.css(t))})}cssAsTuple(...e){const t=e.length,i=new Array(t);let n=0;while(n<t)i[n]=this.css(e[n++]);return i}cssAsObject(...e){const t={};return e.forEach(e=>t[e]=this.css(e)),t}toInt(e,t=NaN,i=false){var n;const s=parseInt((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[e]);return isNaN(s)?t:s}toFloat(e,t=NaN,i=false){var n;const s=parseFloat((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[e]);return isNaN(s)?t:s}toElementInt(e,t=NaN){var i;const n=parseInt(null===(i=this._element)||void 0===i?void 0:i[e]);return isNaN(n)?t:n}toElementFloat(e,t=NaN){var i;const n=parseFloat(null===(i=this._element)||void 0===i?void 0:i[e]);return isNaN(n)?t:n}toElementBoolean(e,t=false){var i;const n=null===(i=this._element)||void 0===i?void 0:i[e];return"boolean"==typeof n?n:t}toElementString(e,t=""){var i;return((null===(i=this._element)||void 0===i?void 0:i[e])||t).toString()}parseUnit(e,t="width",i=true,n){var s;if(e){if(ge(e)){const n=i&&(null===(s=this.absoluteParent)||void 0===s?void 0:s.box)||this.bounds;let a=parseFloat(e)/100;switch(t){case"width":a*=n.width;break;case"height":a*=n.height}return a}return me(e,this.fontSize,n)}return 0}has(e,t){var i;let n,s,a;t&&({map:n,not:s,type:a}=t);const r=("initial"===n&&(null===(i=this._initial)||void 0===i?void 0:i.styleMap)||this._styleMap)[e];if(r)switch(r){case"auto":case"none":case"initial":case"normal":case"rgba(0, 0, 0, 0)":return false;case"baseline":return"verticalAlign"!==e;case"left":case"start":return"textAlign"!==e;default:if(s)if(Array.isArray(s)){for(const e of s)if(r===e)return false}else if(r===s)return false;return!a||!!(Oe(a,2)&&fe(r)||Oe(a,4)&&ge(r))}return false}hasPX(e,t=true,i=false){var n;return fe((i&&(null===(n=this._initial)||void 0===n?void 0:n.styleMap)||this._styleMap)[e],t)}hasFlex(e){return ot(this,e)}setBounds(e=true){let t;if(this.styleElement)e||Ne(this._element,"clientRect",this.sessionId),t=xe(Te(this._element,this.sessionId)),this._bounds=t;else if(this.plainText){const e=ve(this._element);t=xe(e);const i=e.numberOfLines;t.numberOfLines=i,this._bounds=t,this._textBounds=t,this._cached.multiline=i>1}return!e&&t&&(this._box=void 0,this._linear=void 0),t}resetBounds(){this._bounds=void 0,this._box=void 0,this._linear=void 0,this._textBounds=void 0,this._cached.multiline=void 0}querySelector(e){return this.querySelectorAll(e,1)[0]||null}querySelectorAll(e,t=-1){let i=[];const n=this.queryMap;if(n&&0!==t){const s=pe(e);let a=s.length,r=0;while(r<a){const e=s[r++],o=[];let l=-1;e:if("*"===e)o.push({all:true}),l++;else{let t,i;qe.lastIndex=0;while(null!==(i=qe.exec(e))){let e=i[1],n=false;if(1===e.length){const i=e.charAt(0);switch(i){case"+":case"~":l--;case">":if(t||0===o.length){o.length=0;break e}t=i;continue;case"*":n=true}}else if(e.endsWith("|*"))n="*|*"===e;else if("*"===e.charAt(0))e=e.substring(1);else if(e.startsWith("::")){o.length=0;break e}if(n)o.push({all:true});else{let i,n,s,a,r,l,c;while(null!==(c=je.exec(e))){void 0===a&&(a=[]);const t="i"===c[6];let i=c[3]||c[4]||c[5]||"";t&&(i=i.toLowerCase()),a.push({key:c[1],symbol:c[2],value:i,caseInsensitive:t}),e=Ue(e,c.index,c[0].length)}if(e.includes("::")){o.length=0;break e}while(null!==(c=Ke.exec(e))){const t=c[0];t.startsWith(":not(")?c[1]&&(void 0===l&&(l=[]),l.push(c[1])):(void 0===r&&(r=[]),r.push(t)),e=Ue(e,c.index,t.length)}while(null!==(c=$e.exec(e))){const t=c[0];switch(t.charAt(0)){case"#":n=t.substring(1);break;case".":void 0===s&&(s=[]),s.push(t.substring(1));break;default:i=t.toUpperCase()}e=Ue(e,c.index,t.length)}o.push({tagName:i,id:n,adjacent:t,classList:s,pseudoList:r,notList:l,attrList:a})}l++,t=void 0}}if(a=n.length,o.length&&-1!==l&&l<a){const e=o.pop(),c=0===o.length,h=i.length;let d;if(e.all&&a-l==1)d=n[l];else{d=[];let t=l;while(t<a){const s=n[t++];if(e.all)d=d.concat(s);else{const t=s.length;let n=0;while(n<t){const t=s[n++];0!==h&&i.includes(t)||!nt.call(this,t,e,r,c)||d.push(t)}}}}if(o.length){const n=this.depth;o.reverse(),a=o.length;const s=(e,t,i)=>{const l=o[e],c=e===a-1,h=[],d=i.length;let u=0;while(u<d){const s=i[u++];if(t){const e=s.actualParent;if(">"===t)nt.call(this,e,l,r,c,t)&&h.push(e);else{const i=e.naturalElements;switch(t){case"+":{const e=i.indexOf(s);if(e>0){const n=i[e-1];n&&nt.call(this,n,l,r,c,t)&&h.push(n)}break}case"~":{const e=i.length;let n=0;while(n<e){const e=i[n++];if(e===s)break;nt.call(this,e,l,r,c,t)&&h.push(e)}break}}}}else if(s.depth-n>=a-e){let e=s.actualParent;do{nt.call(this,e,l,r,c)&&h.push(e),e=e.actualParent}while(e)}}return!!h.length&&(++e===a||s(e,l.adjacent,h))};let l=h;const c=d.length;let u=0;while(u<c){const n=d[u++];if((0===h||!i.includes(n))&&s(0,e.adjacent,[n])&&(i.push(n),++l===t))return i.sort(mt)}}else if(0===h){if(r===s.length-1||t>0&&t<=d.length)return t>0&&d.length>t&&(d.length=t),d.sort(mt);i=d}else{const e=d.length;if(t>0){let n=h,s=0;while(s<e){const e=d[s++];if(!i.includes(e)&&(i.push(e),++n===t))return i.sort(mt)}}else{let t=0;while(t<e){const e=d[t++];i.includes(e)||i.push(e)}}}}}}return i.sort(mt)}set parent(e){if(e){const t=this._parent;e!==t&&(null==t||t.remove(this),this._parent=e),e.contains(this)||e.append(this),-1===this.depth&&(this.depth=e.depth+1)}}get parent(){return this._parent}get tagName(){let e=this._cached.tagName;if(void 0===e){const t=this._element;if(t){const i=t.nodeName;e="#"===i.charAt(0)?i:t.tagName}else e="";this._cached.tagName=e}return e}get element(){return this._element}get elementId(){var e;return(null===(e=this._element)||void 0===e?void 0:e.id)||""}get htmlElement(){let e=this._cached.htmlElement;return void 0===e&&(e=!this.plainText&&this._element instanceof HTMLElement,this._cached.htmlElement=e),e}get svgElement(){let e=this._cached.svgElement;return void 0===e&&(e=!this.htmlElement&&!this.plainText&&this._element instanceof SVGElement||this.imageElement&&we.SVG.test(this.src),this._cached.svgElement=e),e}get styleElement(){return this.htmlElement||this.svgElement}get naturalChild(){return true}get naturalElement(){let e=this._cached.naturalElement;return void 0===e&&(e=this.naturalChild&&this.styleElement&&!this.pseudoElement,this._cached.naturalElement=e),e}get pseudoElement(){return false}get imageElement(){return"IMG"===this.tagName}get flexElement(){let e=this._cached.flexElement;return void 0===e&&(e=this.display.endsWith("flex"),this._cached.flexElement=e),e}get gridElement(){let e=this._cached.gridElement;return void 0===e&&(e=this.display.endsWith("grid"),this._cached.gridElement=e),e}get textElement(){let e=this._cached.textElement;return void 0===e&&(e=this.plainText||this.inlineText&&!this.inputElement,this._cached.textElement=e),e}get tableElement(){let e=this._cached.tableElement;return void 0===e&&(e="TABLE"===this.tagName||"table"===this.display,this._cached.tableElement=e),e}get inputElement(){let e=this._cached.inputElement;if(void 0===e){switch(this.tagName){case"INPUT":case"BUTTON":case"SELECT":case"TEXTAREA":e=true;break;default:e=false}this._cached.inputElement=e}return e}get layoutElement(){let e=this._cached.layoutElement;return void 0===e&&(e=this.flexElement||this.gridElement,this._cached.layoutElement=e),e}get plainText(){return"#text"===this.tagName}get styleText(){return this.naturalElement&&this.inlineText}get lineBreak(){return"BR"===this.tagName}get documentBody(){return this._documentBody}get initial(){return this._initial}get bounds(){return this._bounds||this.setBounds(false)||xe(this.boundingClientRect)}get linear(){return this._linear||(()=>{const e=this.bounds;if(e){if(this.styleElement){const{marginBottom:t,marginRight:i}=this,n=Math.max(this.marginTop,0),s=Math.max(this.marginLeft,0);this._linear={top:e.top-n,right:e.right+i,bottom:e.bottom+t,left:e.left-s,width:e.width+s+i,height:e.height+n+t}}else this._linear=e;return this._linear}return Ee()})()}get box(){return this._box||(()=>{const e=this.bounds;return e?(this.styleElement?this._box={top:e.top+(this.paddingTop+this.borderTopWidth),right:e.right-(this.paddingRight+this.borderRightWidth),bottom:e.bottom-(this.paddingBottom+this.borderBottomWidth),left:e.left+(this.paddingLeft+this.borderLeftWidth),width:e.width-this.contentBoxWidth,height:e.height-this.contentBoxHeight}:this._box=e,this._box):Ee()})()}get dataset(){if(this.styleElement)return this._element.dataset;{let e=this._dataset;return void 0===e&&(e={},this._dataset=e),e}}get flexdata(){let e=this._cached.flexdata;if(void 0===e){if(this.flexElement){const{flexWrap:t,flexDirection:i,alignContent:n,justifyContent:s}=this.cssAsObject("flexWrap","flexDirection","alignContent","justifyContent"),a=i.startsWith("row");e={row:a,column:!a,reverse:i.endsWith("reverse"),wrap:t.startsWith("wrap"),wrapReverse:"wrap-reverse"===t,alignContent:n,justifyContent:s}}else e={};this._cached.flexdata=e}return e}get flexbox(){var e;let t=this._cached.flexbox;if(void 0===t){if((null===(e=this.actualParent)||void 0===e?void 0:e.flexElement)&&this.styleElement){const e=this.css("alignSelf"),i=this.css("justifySelf");t={alignSelf:"auto"===e?this.cssParent("alignItems"):e,justifySelf:"auto"===i?this.cssParent("justifyItems"):i,basis:this.css("flexBasis"),grow:it(this,"flexGrow",0),shrink:it(this,"flexShrink",1),order:this.toInt("order",0)}}else t={alignSelf:"auto",justifySelf:"auto",basis:"auto",grow:0,shrink:1,order:0};this._cached.flexbox=t}return t}get width(){let e=this._cached.width;return void 0===e&&(e=lt(this,this._styleMap,"width","minWidth","maxWidth"),this._cached.width=e),e}get height(){let e=this._cached.height;return void 0===e&&(e=lt(this,this._styleMap,"height","minHeight","maxHeight"),this._cached.height=e),e}get hasWidth(){let e=this._cached.hasWidth;return void 0===e&&(e=this.width>0,this._cached.hasWidth=e),e}get hasHeight(){var e;let t=this._cached.hasHeight;if(void 0===t){const i=this.css("height");t=ge(i)?this.pageFlow&&((null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||this.documentBody)?parseFloat(i)>0:"fixed"===this.css("position"):this.height>0,this._cached.hasHeight=t}return t}get lineHeight(){let e=this._cached.lineHeight;if(void 0===e){if(e=0,!this.imageElement&&!this.svgElement){let t=this.has("lineHeight"),i=0;if(t){const e=this.css("lineHeight");if(ge(e))i=Fe(this.style.lineHeight);else if(De(e))i=parseFloat(e)*this.fontSize;else if(i=me(e,this.fontSize),Ge.test(e)&&"inherit"!==this._cssStyle.lineHeight){const e=ft.bind(this,"fontSize")();tt.test(e)&&(i*=parseFloat(e))}}else{const e=this.ascend({condition:e=>e.lineHeight>0})[0];if(e&&(i=e.lineHeight),this.styleElement){const e=ft.bind(this,"fontSize")();if(tt.test(e)){const n=parseFloat(e);1!==n&&(i*=n,this.css("lineHeight",ce(i)),t=true)}}}(t||i>this.height||this.multiline||this.block&&this.naturalChildren.some(e=>e.textElement))&&(e=i)}this._cached.lineHeight=e}return e}get display(){return this.css("display")}get positionStatic(){let e=this._cached.positionStatic;if(void 0===e){switch(this.css("position")){case"fixed":case"absolute":e=false;break;case"relative":this.documentBody?e=false:(e=!(this.hasPX("top")||this.hasPX("right")||this.hasPX("bottom")||this.hasPX("left")),e&&(this._cached.positionRelative=false));break;case"inherit":{const t=this._element,i=(null==t?void 0:t.parentElement)?he(t.parentElement,"position"):"";e=""!==i&&!("absolute"===i||"fixed"===i);break}default:e=true}this._cached.positionStatic=e}return e}get positionRelative(){let e=this._cached.positionRelative;return void 0===e&&(e="relative"===this.css("position"),this._cached.positionRelative=e),e}get top(){let e=this._cached.top;return void 0===e&&(e=ht.bind(this,"top")(),this._cached.top=e),e}get right(){let e=this._cached.right;return void 0===e&&(e=ht.bind(this,"right")(),this._cached.right=e),e}get bottom(){let e=this._cached.bottom;return void 0===e&&(e=ht.bind(this,"bottom")(),this._cached.bottom=e),e}get left(){let e=this._cached.left;return void 0===e&&(e=ht.bind(this,"left")(),this._cached.left=e),e}get marginTop(){let e=this._cached.marginTop;return void 0===e&&(e=this.inlineStatic?0:ut(this,"marginTop",true),this._cached.marginTop=e),e}get marginRight(){let e=this._cached.marginRight;return void 0===e&&(e=ut(this,"marginRight",true),this._cached.marginRight=e),e}get marginBottom(){let e=this._cached.marginBottom;return void 0===e&&(e=this.inlineStatic?0:ut(this,"marginBottom",true),this._cached.marginBottom=e),e}get marginLeft(){let e=this._cached.marginLeft;return void 0===e&&(e=ut(this,"marginLeft",true),this._cached.marginLeft=e),e}get borderTopWidth(){let e=this._cached.borderTopWidth;return void 0===e&&(e=dt(this,"height",se[0]),this._cached.borderTopWidth=e),e}get borderRightWidth(){let e=this._cached.borderRightWidth;return void 0===e&&(e=dt(this,"height",se[1]),this._cached.borderRightWidth=e),e}get borderBottomWidth(){let e=this._cached.borderBottomWidth;return void 0===e&&(e=dt(this,"width",se[2]),this._cached.borderBottomWidth=e),e}get borderLeftWidth(){let e=this._cached.borderLeftWidth;return void 0===e&&(e=dt(this,"width",se[3]),this._cached.borderLeftWidth=e),e}get paddingTop(){let e=this._cached.paddingTop;return void 0===e&&(e=ut(this,"paddingTop",false),this._cached.paddingTop=e),e}get paddingRight(){let e=this._cached.paddingRight;return void 0===e&&(e=ut(this,"paddingRight",false),this._cached.paddingRight=e),e}get paddingBottom(){let e=this._cached.paddingBottom;return void 0===e&&(e=ut(this,"paddingBottom",false),this._cached.paddingBottom=e),e}get paddingLeft(){let e=this._cached.paddingLeft;return void 0===e&&(e=ut(this,"paddingLeft",false),this._cached.paddingLeft=e),e}get contentBox(){return"border-box"!==this.css("boxSizing")||this.tableElement&&ne(8)}get contentBoxWidth(){let e=this._cached.contentBoxWidth;return void 0===e&&(e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderLeftWidth+this.paddingLeft+this.paddingRight+this.borderRightWidth,this._cached.contentBoxWidth=e),e}get contentBoxHeight(){let e=this._cached.contentBoxHeight;return void 0===e&&(e=this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderTopWidth+this.paddingTop+this.paddingBottom+this.borderBottomWidth,this._cached.contentBoxHeight=e),e}get inline(){let e=this._cached.inline;if(void 0===e){const t=this.display;e="inline"===t||"initial"===t&&!be.includes(this.tagName),this._cached.inline=e}return e}get inlineStatic(){let e=this._cached.inlineStatic;return void 0===e&&(e=this.inline&&this.pageFlow&&!this.floating&&!this.imageElement,this._cached.inlineStatic=e),e}get inlineVertical(){let e=this._cached.inlineVertical;if(void 0===e){if(this.naturalElement&&!this.floating){const t=this.display;e=t.startsWith("inline")||"table-cell"===t}else e=false;this._cached.inlineVertical=e}return e}get inlineDimension(){let e=this._cached.inlineDimension;return void 0===e&&(e=this.naturalElement&&(this.display.startsWith("inline-")||this.floating),this._cached.inlineDimension=e),e}set inlineText(e){switch(this.tagName){case"INPUT":case"IMG":case"SELECT":case"SVG":case"BR":case"HR":case"TEXTAREA":case"PROGRESS":case"METER":case"CANVAS":this._inlineText=false;break;case"BUTTON":this._inlineText=""!==this.textContent.trim();break;default:this._inlineText=e,this._cached.textElement=void 0}}get inlineText(){return this._inlineText}get block(){var e;let t=this._cached.block;if(void 0===t){switch(this.display){case"block":case"flex":case"grid":case"list-item":t=true;break;case"initial":t=be.includes(this.tagName);break;case"inline":if("svg"===this.tagName&&(null===(e=this.actualParent)||void 0===e?void 0:e.htmlElement)){t=!this.hasPX("width")&&0===Fe(ye(this._element,"width"));break}default:t=false}this._cached.block=t}return t}get blockStatic(){let e=this._cached.blockStatic;return void 0===e&&(e=this.pageFlow&&(this.block&&!this.floating||this.lineBreak||this.blockDimension&&("100%"===ft.bind(this,"width")()||"100%"===ft.bind(this,"minWidth")())&&!this.hasPX("maxWidth")),this._cached.blockStatic=e),e}get blockDimension(){let e=this._cached.blockDimension;if(void 0===e){if(this.block||this.floating||this.imageElement||this.svgElement)e=true;else{const t=this.display;e=t.startsWith("inline-")||"table"===t}this._cached.blockDimension=e}return e}get blockVertical(){let e=this._cached.blockVertical;return void 0===e&&(e=this.blockDimension&&this.hasHeight,this._cached.blockVertical=e),e}get pageFlow(){let e=this._cached.pageFlow;return void 0===e&&(e=this.positionStatic||this.positionRelative,this._cached.pageFlow=e),e}get inlineFlow(){let e=this._cached.inlineFlow;return void 0===e&&(e=this.inline||this.inlineDimension||this.inlineVertical||this.imageElement,this._cached.inlineFlow=e),e}get centerAligned(){let e=this._cached.centerAligned;return void 0===e&&(e=this.pageFlow?this.autoMargin.leftRight||gt(this)&&st(this,"center"):this.hasPX("left")&&this.hasPX("right"),this._cached.centerAligned=e),e}get rightAligned(){let e=this._cached.rightAligned;return void 0===e&&(e=this.pageFlow?"right"===this.float||this.autoMargin.left||gt(this)&&st(this,"right","end"):this.hasPX("right")&&!this.hasPX("left"),this._cached.rightAligned=e),e}get bottomAligned(){var e;let t=this._cached.bottomAligned;return void 0===t&&(t=this.pageFlow?true===(null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)&&true===this.autoMargin.top:this.hasPX("bottom")&&!this.hasPX("top"),this._cached.bottomAligned=t),t}get autoMargin(){let e=this._cached.autoMargin;if(void 0===e){if(!this.pageFlow||this.blockStatic||"table"===this.display){const t=this._styleMap,i="auto"===t.marginLeft&&(this.pageFlow||this.hasPX("right")),n="auto"===t.marginRight&&(this.pageFlow||this.hasPX("left")),s="auto"===t.marginTop&&(this.pageFlow||this.hasPX("bottom")),a="auto"===t.marginBottom&&(this.pageFlow||this.hasPX("top"));e={horizontal:i||n,left:i&&!n,right:!i&&n,leftRight:i&&n,vertical:s||a,top:s&&!a,bottom:!s&&a,topBottom:s&&a}}else e={};this._cached.autoMargin=e}return e}get floating(){let e=this._cached.floating;return void 0===e&&(e="none"!==this.float,this._cached.floating=e),e}get float(){let e=this._cached.float;return void 0===e&&(e=this.pageFlow&&this.css("float")||"none",this._cached.float=e),e}get zIndex(){return this.toInt("zIndex",0)}get textContent(){let e=this._cached.textContent;return void 0===e&&(e=this.svgElement?"":this._element.textContent,this._cached.textContent=e),e}get src(){return this.htmlElement&&this._element.src||""}get overflowX(){let e=this._cached.overflow;return void 0===e&&(e=ct(this),this._cached.overflow=e),Oe(e,8)}get overflowY(){let e=this._cached.overflow;return void 0===e&&(e=ct(this),this._cached.overflow=e),Oe(e,16)}get baseline(){let e=this._cached.baseline;if(void 0===e){if(this.pageFlow&&!this.floating){const t=this.css("verticalAlign");e="baseline"===t||"initial"===t||0===this.naturalElements.length&&fe(t,true)}else e=false;this._cached.baseline=e}return e}get verticalAlign(){let e=this._cached.verticalAlign;return void 0===e&&(this.pageFlow?(e=this.css("verticalAlign"),fe(e,true)&&(e=this.parseUnit(e,"height")+"px")):e="0px",this._cached.verticalAlign=e),e}set textBounds(e){this._textBounds=e}get textBounds(){let e=this._textBounds;if(void 0===e){if(e=null,this.naturalChild)if(this.textElement)e=ke(this._element,this.sessionId);else{const t=this.naturalChildren,i=t.length;if(i){let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=0,l=0;while(l<i){const e=t[l++];if(e.textElement){const t=ke(e.element,e.sessionId);n=Math.min(t.top,n),s=Math.max(t.right,s),a=Math.min(t.left,a),r=Math.max(t.bottom,r),o+=t.numberOfLines||0}}o>0&&(e={top:n,right:s,left:a,bottom:r,width:s-a,height:r-n,numberOfLines:o})}}this._textBounds=e}return e}get multiline(){var e;let t=this._cached.multiline;return void 0===t&&(t=this.plainText?Math.floor(ve(this._element).width)>this.actualParent.box.width:!(!this.styleText||!this.inlineFlow&&0!==this.naturalElements.length)&&(null===(e=this.textBounds)||void 0===e?void 0:e.numberOfLines)>1,this._cached.multiline=t),t}get backgroundColor(){let e=this._cached.backgroundColor;if(void 0===e){switch(e=this.css("backgroundColor"),e){case"initial":case"transparent":case"rgba(0, 0, 0, 0)":e="";break;default:if(""!==e&&this.pageFlow&&this.styleElement&&!this.inputElement&&(!this._initial||ft.bind(this,"backgroundColor")()===e)){let t=this.actualParent;while(t){const i=ft.bind(t,"backgroundColor",true)();if(""!==i){i===e&&""===t.backgroundColor&&(e="");break}t=t.actualParent}}}this._cached.backgroundColor=e}return e}get backgroundImage(){let e=this._cached.backgroundImage;if(void 0===e){let t=this.css("backgroundImage");if(""!==t&&"none"!==t&&"initial"!==t)e=t;else if(t=this.css("background"),Qe.test(t)){const i=[],n=ze(t),s=n.length;for(let e=1;e<s;++e){const t=n[e-1].trim();Qe.test(t)&&i.push(t+n[e])}e=i.join(", ")}else e="";this._cached.backgroundImage=e}return e}get percentWidth(){let e=this._cached.percentWidth;if(void 0===e){const t=ft.bind(this,"width")();e=ge(t)?parseFloat(t)/100:0,this._cached.percentWidth=e}return e}get percentHeight(){var e;let t=this._cached.percentHeight;if(void 0===t){const i=ft.bind(this,"height")();t=ge(i)&&((null===(e=this.actualParent)||void 0===e?void 0:e.hasHeight)||"fixed"===this.css("position"))?parseFloat(i)/100:0,this._cached.percentHeight=t}return t}get visibleStyle(){let e=this._cached.visibleStyle;if(void 0===e){if(this.plainText)e={background:false,borderWidth:false,backgroundImage:false,backgroundColor:false,backgroundRepeat:false,backgroundRepeatX:false,backgroundRepeatY:false};else{const t=this.borderTopWidth>0||this.borderRightWidth>0||this.borderBottomWidth>0||this.borderLeftWidth>0,i=""!==this.backgroundColor,n=""!==this.backgroundImage;let s=false,a=false;n&&this.css("backgroundRepeat").split(_e.SEPARATOR).forEach(e=>{const[t,i]=e.split(Se.SPACE);s||(s="repeat"===t||"repeat-x"===t),a||(a="repeat"===t||"repeat-y"===t||"repeat"===i)}),e={background:t||n||i,borderWidth:t,backgroundImage:n,backgroundColor:i,backgroundRepeat:s||a,backgroundRepeatX:s,backgroundRepeatY:a}}this._cached.visibleStyle=e}return e}get absoluteParent(){let e=this._cached.absoluteParent;if(void 0===e){if(e=this.actualParent,!this.pageFlow&&!this.documentBody)while(e&&!e.documentBody){switch(ft.bind(e,"position",false,true)()){case"static":case"initial":case"unset":e=e.actualParent;continue}break}this._cached.absoluteParent=e}return e}set actualParent(e){this._cached.actualParent=e}get actualParent(){var e;let t=this._cached.actualParent;if(void 0===t){const i=null===(e=this._element)||void 0===e?void 0:e.parentElement;t=i&&Ae(i,this.sessionId)||null,this._cached.actualParent=t}return t}get actualWidth(){let e=this._cached.actualWidth;if(void 0===e){if(this.plainText){const t=this.bounds;switch(t.numberOfLines||1){case 1:e=t.width;break;case 2:e=Math.min(t.width,this.actualParent.box.width);break;default:e=Math.min(t.right-t.left,this.actualParent.box.width)}}else this.inlineStatic||"table-cell"===this.display||ot(this,"row")?e=this.bounds.width:(e=this.width,e>0?this.contentBox&&!this.tableElement&&(e+=this.contentBoxWidth):e=this.bounds.width);this._cached.actualWidth=e}return e}get actualHeight(){let e=this._cached.actualHeight;return void 0===e&&(this.inlineStatic||"table-cell"===this.display||ot(this,"column")?e=this.bounds.height:(e=this.height,e>0?this.contentBox&&!this.tableElement&&(e+=this.contentBoxHeight):e=this.bounds.height),this._cached.actualHeight=e),e}get actualDimension(){return{width:this.actualWidth,height:this.actualHeight}}set naturalChildren(e){this._naturalChildren=e}get naturalChildren(){return this._naturalChildren||function(e){var t;let i;if(e.naturalElement){const t=e.sessionId;i=[];let n=0;e.element.childNodes.forEach(e=>{const s=Ae(e,t);s&&(s.childIndex=n++,i.push(s))})}else i=((null===(t=e.initial)||void 0===t?void 0:t.children)||e.children).slice(0);return e.naturalChildren=i,i}(this)}set naturalElements(e){this._naturalElements=e}get naturalElements(){return this._naturalElements||function(e){const t=e.naturalChildren.filter(e=>e.naturalElement);return e.naturalElements=t,t}(this)}get firstChild(){return this.naturalElements[0]||null}get lastChild(){const e=this.naturalElements,t=e.length;return t?e[t-1]:null}get firstStaticChild(){for(const e of this.naturalChildren)if(e.pageFlow)return e;return null}get lastStaticChild(){const e=this.naturalChildren;let t=e.length-1;while(t>=0){const i=e[t--];if(i.pageFlow)return i}return null}get previousSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex-1])||null}get nextSibling(){var e;return(null===(e=this.actualParent)||void 0===e?void 0:e.naturalChildren[this.childIndex+1])||null}get previousElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(e>0)return t[e-1]}return null}get nextElementSibling(){var e;const t=null===(e=this.actualParent)||void 0===e?void 0:e.naturalElements;if(t){const e=t.indexOf(this);if(-1!==e)return t[e+1]||null}return null}get attributes(){let e=this._cached.attributes;if(void 0===e){if(e={},this.styleElement){const t=this._element.attributes,i=t.length;let n=0;while(n<i){const{name:i,value:s}=t.item(n++);e[i]=s}}this._cached.attributes=e}return e}get boundingClientRect(){var e;return this.naturalElement&&(null===(e=this._element)||void 0===e?void 0:e.getBoundingClientRect())||this._bounds||Ee()}get fontSize(){var e,t,i;let n=this._fontSize;if(void 0===n){const s=e=>parseFloat(e.getPropertyValue("font-size"));if(this.naturalChild&&this.styleElement){const t=this.css("fontSize");n=Ge.test(t)?parseFloat(t):ge(t)&&!this.documentBody?((null===(e=this.actualParent)||void 0===e?void 0:e.fontSize)||s(de(document.body)))*parseFloat(t)/100:s(this.style)}else n=me(this.css("fontSize"));if(0===n&&!this.naturalChild){const e=this.element;n=e&&ue(e)?(null===(t=Ae(e,this.sessionId))||void 0===t?void 0:t.fontSize)||s(de(e)):(null===(i=this.ascend({condition:e=>e.fontSize>0})[0])||void 0===i?void 0:i.fontSize)||s(de(document.body))}this._fontSize=n}return n}get cssStyle(){return this._cssStyle}get textStyle(){let e=this._textStyle;return void 0===e&&(e=this.cssAsObject(...re),e.fontSize=this.fontSize+"px",this._textStyle=e),e}set dir(e){this._cached.dir=e}get dir(){let e=this._cached.dir;if(void 0===e){if(e=this.naturalElement?this._element.dir:"",""===e){let t=this.actualParent;while(t){if(e=t.dir,""!==e)break;t=t.actualParent}}this._cached.dir=e}return e}get center(){const e=this.bounds;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}}const xt=new Map([[2,"marginTop"],[4,"marginRight"],[8,"marginBottom"],[16,"marginLeft"],[32,"paddingTop"],[64,"paddingRight"],[128,"paddingBottom"],[256,"paddingLeft"]]),yt={ACCESSIBILITY:"squared.accessibility",COLUMN:"squared.column",CSS_GRID:"squared.css-grid",FLEXBOX:"squared.flexbox",GRID:"squared.grid",LIST:"squared.list",RELATIVE:"squared.relative",SPRITE:"squared.sprite",TABLE:"squared.table",VERTICAL_ALIGN:"squared.verticalalign",WHITESPACE:"squared.whitespace"};var vt,Et,St,It=Object.freeze({__proto__:null,CSS_SPACING:xt,EXT_NAME:yt});!function(e){e[e.DOM_TRAVERSE=2]="DOM_TRAVERSE",e[e.EXTENSION=4]="EXTENSION",e[e.RENDER=8]="RENDER",e[e.ALL=14]="ALL"}(vt||(vt={})),function(e){e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.IMAGE_SOURCE=32]="IMAGE_SOURCE",e[e.ASSET=56]="ASSET",e[e.ALL=126]="ALL"}(Et||(Et={})),function(e){e[e.CONSTRAINT=2]="CONSTRAINT",e[e.LAYOUT=4]="LAYOUT",e[e.ALIGNMENT=8]="ALIGNMENT",e[e.ACCESSIBILITY=16]="ACCESSIBILITY",e[e.LOCALIZATION=32]="LOCALIZATION",e[e.CUSTOMIZATION=64]="CUSTOMIZATION",e[e.ALL=126]="ALL"}(St||(St={}));var wt=Object.freeze({__proto__:null,get APP_SECTION(){return vt},get NODE_RESOURCE(){return Et},get NODE_PROCEDURE(){return St}});const _t=squared.lib,{BOX_MARGIN:Tt,BOX_PADDING:kt,BOX_POSITION:Nt}=_t.css,{isTextNode:At}=_t.dom,{equal:Ct}=_t.math,{XML:Rt}=_t.regex,{getElementAsNode:Pt}=_t.session,{cloneObject:Mt,convertWord:Bt,hasBit:Lt,isArray:Ft,iterateArray:Wt,safeNestedMap:Ot,searchObject:Vt,spliceArray:Dt,withinRange:Ht}=_t.util,Xt=Array.from(xt.keys()),Yt=["position","display","verticalAlign","float","clear","zIndex"];function Ut(e={},t,i,n){const{floating:s,pageFlow:a,lineBreak:r,excluded:o}=e,l=[];while(t){const e=Pt(t,n);if(e)if(false!==r&&e.lineBreak||false!==o&&e.excluded&&!e.lineBreak)l.push(e);else if(e.pageFlow&&!e.excluded){if(false===a)break;if(l.push(e),false!==s||!e.floating&&(e.visible||e.rendered)&&"none"!==e.display)break}t=t[i]}return l}const zt=e=>e.naturalElements.length>0&&!e.layoutElement&&!e.tableElement,Gt=e=>e.blockVertical||e.percentWidth>0,jt=(e,t)=>e.blockDimension&&Math.ceil(e.bounds.top)>=t.bounds.bottom&&(Gt(e)||Gt(t)),qt=e=>e.inlineDimension&&!e.hasPX("maxWidth")?e.percentWidth:Number.NEGATIVE_INFINITY;class $t extends bt{constructor(){super(...arguments),this.alignmentType=0,this.rendered=false,this.excluded=false,this.originalRoot=false,this.floatContainer=false,this.lineBreakLeading=false,this.lineBreakTrailing=false,this.baselineActive=false,this.baselineAltered=false,this.positioned=false,this._boxRegister={},this._preferInitial=true,this._excludeSection=0,this._excludeProcedure=0,this._excludeResource=0,this._childIndex=Number.POSITIVE_INFINITY,this._containerIndex=Number.POSITIVE_INFINITY,this._visible=true,this._locked={}}static refitScreen(e,t){const{width:i,height:n}=e.localSettings.screenDimension;let{width:s,height:a}=t;if(s>i)a=Math.round(a*i/s),s=i;else{if(!(a>n))return t;s=Math.round(s*n/a),a=n}return{width:s,height:a}}static outerRegion(e){let t,i,n,s,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;return e.each(e=>{if(e.companion)t=e.actualRect("top"),i=e.actualRect("right"),n=e.actualRect("bottom"),s=e.actualRect("left");else{if(({top:t,right:i,bottom:n,left:s}=e.linear),e.marginRight<0){const t=i+Math.abs(e.marginRight);t>c&&(c=t)}if(e.marginBottom<0){const t=n+Math.abs(e.marginBottom);t>h&&(h=t)}}t<a&&(a=t),i>r&&(r=i),n>o&&(o=n),s<l&&(l=s)}),{top:a,right:r,bottom:o,left:l,width:Math.max(r,c)-l,height:Math.max(o,h)-a}}static baseline(e,t=false){const i=[],n=e.length;let s=0;while(s<n){const n=e[s++];!n.baseline||t&&!n.textElement||n.baselineAltered||(n.naturalElements.length?n.baselineElement&&i.push(n):i.push(n))}return i.length>1&&i.sort((e,t)=>{if(e.length&&0===t.length)return 1;if(t.length&&0===e.length)return-1;const i=e.baselineHeight+e.marginBottom,n=t.baselineHeight+t.marginBottom;if(!Ct(i,n))return i>n?-1:1;if(e.textElement&&t.textElement){if(!e.pseudoElement&&t.pseudoElement)return-1;if(e.pseudoElement&&!t.pseudoElement)return 1;if(!e.plainText&&t.plainText)return-1;if(e.plainText&&!t.plainText)return 1}else{if(e.inputElement&&t.inputElement&&e.containerType!==t.containerType)return e.containerType>t.containerType?-1:1;if(t.textElement&&e.inputElement&&t.childIndex<e.childIndex)return 1;if(e.textElement&&t.inputElement&&e.childIndex<t.childIndex)return-1}const s=e.bounds.bottom,a=t.bounds.bottom;return s>a?-1:s<a?1:0}),i[0]||null}static linearData(e,t){const i=new Set;let n=false,s=false;const a=e.length;if(a>1){const r=new Array(a);let o=0,l=0;while(o<a){const t=e[o++];t.pageFlow?(t.floating&&i.add(t.float),r[l++]=t):t.autoPosition&&(r[l++]=t)}if(l){r.length=l;const e=[r[0]];let a=1,c=1;o=1;while(o<l){const i=r[o++];if(i.alignedVertically(e,t)>0?c++:a++,a>1&&c>1)break;e.push(i)}if(n=a===l,s=c===l,n&&i.size){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;o=0;while(o<l){const n=r[o++],{left:a,right:l}=n.linear;switch(e=Math.min(e,a),t=Math.max(t,l),n.float){case"left":i=Math.max(i,l);break;case"right":s=Math.min(s,a)}}let a=0,c=0,h=0,d=0;for(o=0;o<l;++o){const l=r[o],{left:u,right:f}=l.linear;if(Math.floor(u)<=e&&++a,Math.ceil(f)>=t&&++c,l.floating||(u===i&&++h,f===s&&++d),0===o)continue;if(2===a||2===c||2===h||2===d){n=false;break}const g=r[o-1];if(Ht(u,g.linear.left)||g.floating&&Math.ceil(l.bounds.top)>=g.bounds.bottom){n=false;break}}}}}else a&&(s=e[0].blockStatic,n=!s);return{linearX:n,linearY:s,floated:i,cleared:t}}static partitionRows(e,t){const i=[];let n=[],s=[];const a=e.length;let r=0;while(r<a){const a=e[r++];let o=a;if(!a.naturalChild){if(a.nodeGroup){n.length&&i.push(n),i.push([a]),n=[],s.length=0;continue}const e=a.innerMostWrapped;e!==a&&(o=e)}0===n.length?(n.push(a),s.push(o)):o.alignedVertically(s,t)>0?(n.length&&i.push(n),n=[a],s=[o]):(n.push(a),s.push(o))}return n.length&&i.push(n),i}is(e){return this.containerType===e}of(e,...t){return this.is(e)&&t.some(e=>this.hasAlign(e))}attr(e,t,i,n=true){let s=this["__"+e];return i?(s||(this._namespaces.includes(e)||this._namespaces.push(e),s={},this["__"+e]=s),n&&this.lockedAttr(e,t)&&(n=false),!n&&s[t]?i=s[t]:s[t]=i,i):(null==s?void 0:s[t])||""}unsafe(e,t){if(void 0===t)return this["_"+e];this["_"+e]=t}unset(e){delete this["_"+e]}namespace(e){return this["__"+e]||{}}delete(e,...t){const i=this["__"+e];i&&t.forEach(e=>{if(e.includes("*"))for(const[t]of Vt(i,e))delete i[t];else delete i[e]})}lockAttr(e,t){Ot(this._locked,e)[t]=true}unlockAttr(e,t){const i=this._locked[e];i&&(i[t]=false)}lockedAttr(e,t){var i;return true===(null===(i=this._locked[e])||void 0===i?void 0:i[t])}render(e){this.renderParent=e,this.rendered=true}parseUnit(e,t="width",i=true,n){return super.parseUnit(e,t,i,n||this.localSettings.screenDimension)}parseWidth(e,t=true){return super.parseUnit(e,"width",t,this.localSettings.screenDimension)}parseHeight(e,t=true){return super.parseUnit(e,"height",t,this.localSettings.screenDimension)}renderEach(e){const t=this.renderChildren,i=t.length;let n=0;while(n<i)e(t[n],n++,t);return this}hide(e){let t,i;e&&({remove:t,replacement:i}=e),t&&this.removeTry(i),this.rendered=true,this.visible=false}inherit(e,...t){t.forEach(t=>{switch(t){case"base":{this._documentParent=e.documentParent,this._bounds=e.bounds,this._linear=e.linear,this._box=e.box,-1===this.depth&&(this.depth=e.depth);const t=e.actualParent;t&&(this.actualParent=t,this.dir=t.dir);break}case"initial":Mt(e.unsafe("initial"),this.initial);break;case"alignment":{const t=this._styleMap;Yt.forEach(i=>t[i]=e.css(i)),this.positionStatic||Nt.forEach(i=>{e.hasPX(i)&&(t[i]=e.css(i))}),Object.assign(this.autoMargin,e.autoMargin),this.autoPosition=e.autoPosition;break}case"styleMap":this.cssCopyIfEmpty(e,...Object.keys(e.unsafe("styleMap")));break;case"textStyle":this.cssApply(e.textStyle),this.setCacheValue("fontSize",e.fontSize);break;case"boxStyle":{const{backgroundColor:t,backgroundImage:i}=e;this.cssApply(e.cssAsObject("backgroundRepeat","backgroundSize","backgroundPositionX","backgroundPositionY","backgroundClip","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius")),this.cssApply({backgroundColor:t,backgroundImage:i,border:"inherit",borderRadius:"inherit"}),this.unsetCache("borderTopWidth","borderBottomWidth","borderRightWidth","borderLeftWidth"),this.setCacheValue("backgroundColor",t),this.setCacheValue("backgroundImage",i),e.setCacheValue("backgroundColor",""),e.setCacheValue("backgroundImage",""),e.cssApply({backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"none",border:"initial",borderRadius:"initial"});const n=e.visibleStyle;n.background=false,n.backgroundImage=false,n.backgroundRepeatX=false,n.backgroundRepeatY=false,n.backgroundColor=false,n.borderWidth=false;break}}})}addAlign(e){this.hasAlign(e)||(this.alignmentType|=e)}removeAlign(e){this.hasAlign(e)&&(this.alignmentType^=e)}hasAlign(e){return Lt(this.alignmentType,e)}hasResource(e){return!Lt(this._excludeResource,e)}hasProcedure(e){return!Lt(this._excludeProcedure,e)}hasSection(e){return!Lt(this._excludeSection,e)}exclude(e){const{resource:t,procedure:i,section:n}=e;t&&!Lt(this._excludeResource,t)&&(this._excludeResource|=t),i&&!Lt(this._excludeProcedure,i)&&(this._excludeProcedure|=i),n&&!Lt(this._excludeSection,n)&&(this._excludeSection|=n)}setExclusions(){var e;if(this.naturalElement){const t=this._element.dataset,i=(null===(e=this.actualParent)||void 0===e?void 0:e.dataset)||{};if(Object.keys(t).length||Object.keys(i).length){const e=(e,n)=>{let s=t[e]||"",a=0;const r=i[e+"Child"];return r&&(s+=(""!==s?"|":"")+r),""!==s&&s.split(/\s*\|\s*/).forEach(e=>{const t=n[e.toUpperCase()]||0;t>0&&!Lt(a,t)&&(a|=t)}),a};this.exclude({resource:e("excludeResource",Et),procedure:e("excludeProcedure",St),section:e("excludeSection",vt)})}}}appendTry(e,t,i=true){const n=this.children,s=n.length;for(let i=0;i<s;++i){const s=n[i];if(s===e||s===e.innerMostWrapped||s===e.outerMostWrapper)return n[i]=t,t.parent=this,t.containerIndex=e.containerIndex,true}return!!i&&(t.parent=this,true)}removeTry(e,t){const i=this.renderParent;if(i){const{renderTemplates:n,renderChildren:s}=i;if(n){const a=s.findIndex(e=>e===this);if(-1!==a){const r=n[a];if((null==r?void 0:r.node)===this){if(!e)return t&&t.bind(this,e)(),n.splice(a,1),s.splice(a,1),this.renderParent=void 0,true;{const r=e.renderParent;if(r===this){const o=r.renderTemplates;if(o){const l=o.findIndex(t=>(null==t?void 0:t.node)===e);if(-1!==l&&r.renderChildren.splice(l,1),i.appendTry(this,e,false))return t&&t.bind(this,e)(),n[a]=o[l],e.renderParent=i,s[a]=e,this.documentRoot&&(e.documentRoot=true,this.documentRoot=false),e.depth=this.depth,this.renderParent=void 0,true}}}}}}}return false}sort(e){return e?super.sort(e):this.children.sort((e,t)=>e.containerIndex<t.containerIndex?-1:1),this}alignedVertically(e,t,i){if(this.lineBreak)return 2;if(this.autoPosition&&Ft(e))return e[e.length-1].blockStatic?1:0;if(!this.pageFlow)return 1;{const n=this.floating;if(Ft(e)){const s=e[e.length-1];if(t){if(t.size&&(t.has(this)||this.siblingsLeading.some(e=>e.excluded&&t.has(e))))return 4;if(n&&s.floating){if(i&&this.float===s.float||Math.floor(this.bounds.top)===Math.floor(s.bounds.top))return 0;if(Math.ceil(this.bounds.top)>=s.bounds.bottom){if(e.every(e=>e.inlineDimension)){const t=this.actualParent;if(t&&t.ascend({condition:e=>!e.inline&&e.hasWidth,error:e=>e.layoutElement,startSelf:true})){if(t.naturalChildren.filter(e=>e.visible&&e.pageFlow).length===e.length+1){const i=e=>e.actualWidth+Math.max(e.marginLeft,0)+e.marginRight;let n=t.box.width-i(this);if(e.forEach(e=>n-=i(e)),n>=0)return 0}}}return 6}}else{if(this.blockStatic&&e.reduce((e,t)=>e+(t.floating?t.linear.width:Number.NEGATIVE_INFINITY),0)/this.actualParent.box.width>=.8)return 7;if(e.every(e=>e.inlineDimension&&Math.ceil(this.bounds.top)>=e.bounds.bottom))return 5;if(void 0!==i){if(n&&!i&&s.blockStatic)return 0;if(!this.display.startsWith("inline-")){let{top:n,bottom:s}=this.bounds;if(this.textElement&&t.size&&e.some(e=>t.has(e))&&e.some(e=>Math.floor(n)<e.bounds.top&&Math.ceil(s)>e.bounds.bottom))return 7;if(e[0].floating){if(e.length>1){const t=e[0].float;let a=Number.NEGATIVE_INFINITY,r=0;if(e.forEach(e=>{e.floating&&(e.float===t&&(a=Math.max(e.actualRect("bottom","bounds"),a)),r+=e.linear.width)}),Math.ceil(r)>=this.actualParent.box.width)return 5;if(this.multiline){if(this.styleText){const e=this.textBounds;e&&(s=e.bottom)}const e=s-a;n=e<=0||e/(s-n)<.5?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY}else n=Math.ceil(n);return n<Math.floor(a)?i?0:5:i?5:0}if(!i)return 5}}}}}if(jt(this,s))return 3;{const t=qt(this);if(t>0&&e.reduce((e,t)=>e+qt(t),t)>1)return 8}}for(const s of this.siblingsLeading){if(s.lineBreak)return 2;if(s.blockStatic||s.autoMargin.leftRight||(n&&0===s.childIndex||false===i)&&s.plainText&&s.multiline)return 1;if(!(!this.blockStatic&&"table"!==this.display||s.floating&&!(null==t?void 0:t.has(s))))return 1;if(s.floating){if("left"===s.float){if(this.autoMargin.right)return 5}else if(this.autoMargin.left)return 5;if(this.floatContainer&&this.some(e=>e.floating&&Math.ceil(e.bounds.top)>=s.bounds.bottom))return 5}if((null==t?void 0:t.has(s))&&(null==e?void 0:e[0])!==s)return 4;if(jt(this,s))return 3}}return 0}previousSiblings(e={}){var t,i,n;return Ut(e,this.nodeGroup?null===(i=null===(t=this.firstChild)||void 0===t?void 0:t.element)||void 0===i?void 0:i.previousSibling:null===(n=this.innerMostWrapped.element)||void 0===n?void 0:n.previousSibling,"previousSibling",this.sessionId)}nextSiblings(e={}){var t,i,n;return Ut(e,this.nodeGroup?null===(i=null===(t=this.firstChild)||void 0===t?void 0:t.element)||void 0===i?void 0:i.nextSibling:null===(n=this.innerMostWrapped.element)||void 0===n?void 0:n.nextSibling,"nextSibling",this.sessionId)}modifyBox(e,t,i=true){if(0!==t){const n=xt.get(e);if(n){const s=this._boxRegister[e];if(void 0===t)if(s){const t=this[n]||s.getBox(e)[1];t>0&&s.modifyBox(e,-t,i)}else this._boxReset[n]=1;else if(s)s.modifyBox(e,t,i);else{const e=this._boxAdjustment;!i&&(0===this._boxReset[n]?this[n]:0)+e[n]+t<=0?(e[n]=0,this[n]>=0&&t<0&&(this._boxReset[n]=1)):e[n]+=t}}}}getBox(e){const t=xt.get(e);return t?[this._boxReset[t],this._boxAdjustment[t]]:[NaN,0]}setBox(e,t){const i=xt.get(e);if(i){const n=this._boxRegister[e];if(n)n.setBox(e,t);else{const{reset:e,adjustment:n}=t,s=this._boxReset,a=this._boxAdjustment;if(void 0!==e&&(s[i]=e),void 0!==n){let e=a[i];t.accumulate?e+=n:e=n,false===t.negative&&(0===s[i]?this[i]:0)+e<=0&&(e=0,this[i]>=0&&e<0&&(s[i]=1)),a[i]=e}else 1!==e||this.naturalChild||(a[i]=0)}}}resetBox(e,t){const i=this._boxReset,n=(n,s)=>{for(let a=0;a<4;++a){const r=Xt[a+s];if(Lt(e,r)){const e=n[a];if(i[e]=1,t){const i=this.registerBox(r);if(i)i.resetBox(r,t);else{if(this.naturalChild){const i=this[e];i>=0&&t.modifyBox(r,i)}this.transferBox(r,t)}}}}};Lt(30,e)&&n(Tt,0),Lt(480,e)&&n(kt,4)}transferBox(e,t){const i=this._boxAdjustment,n=(n,s)=>{for(let a=0;a<4;++a){const r=Xt[a+s];if(Lt(e,r)){const e=this.registerBox(r);if(e)e.transferBox(r,t);else{const e=n[a],s=i[e];0!==s&&(t.modifyBox(r,s,false),i[e]=0),this.registerBox(r,t)}}}};Lt(30,e)&&n(Tt,0),Lt(480,e)&&n(kt,4)}registerBox(e,t){const i=this._boxRegister;t?i[e]=t:t=i[e];while(t){const i=t.unsafe("boxRegister")[e];if(!i)break;t=i}return t}actualPadding(e,t){if(t>0){if(this.layoutElement){if(this.gridElement)switch(this.css("alignContent")){case"space-around":case"space-evenly":return 0}}else{const i=this.innerMostWrapped;if(i!==this){if(!i.naturalChild)return t;if(0===i.getBox("paddingTop"===e?32:128)[0])return 0}if(i.naturalChild)return zt(i)&&function e(t,i,n){let s=false;const a=t.length;let r=0;while(r<a){const a=t[r++];if(a.blockStatic)return false;if(a.inlineStatic){if(a.has("lineHeight")&&a.lineHeight>a.bounds.height)return false;if(a[i]>=n)s=true;else if(zt(a)){if(!e(a.naturalChildren,i,n))return false;s=true}}}return s}(i.naturalChildren,e,t)?0:t}return t}return 0}actualBoxWidth(e){if(e||(e=this.box.width),this.pageFlow&&!this.documentRoot){let t=0,i=0,n=this.actualParent;while(n){if(n.hasPX("width",false)||!n.pageFlow)return e;if(t+=Math.max(n.marginLeft,0)+n.borderLeftWidth+n.paddingLeft,i+=n.paddingRight+n.borderRightWidth+n.marginRight,n.documentRoot)break;n=n.actualParent}const s=this.localSettings.screenDimension.width-t-i;if(s>0)return Math.min(e,s)}return e}cloneBase(e){e.localSettings=this.localSettings,e.alignmentType=this.alignmentType,e.containerName=this.containerName,e.depth=this.depth,e.visible=this.visible,e.excluded=this.excluded,e.rendered=this.rendered,e.childIndex=this.childIndex,e.containerIndex=this.containerIndex,e.inlineText=this.inlineText,e.lineBreakLeading=this.lineBreakLeading,e.lineBreakTrailing=this.lineBreakTrailing,e.actualParent=this.actualParent,e.documentParent=this.documentParent,e.documentRoot=this.documentRoot,e.renderParent=this.renderParent,this.length&&e.retain(this.duplicate()),e.inherit(this,"initial","base","alignment","styleMap","textStyle"),Object.assign(e.unsafe("cached"),this._cached)}unsetCache(...e){if(e.length){const t=this._cached;e.forEach(e=>{switch(e){case"top":case"right":case"bottom":case"left":t.autoPosition=void 0,t.positiveAxis=void 0;break;case"fontSize":case"lineHeight":t.baselineHeight=void 0;break;case"whiteSpace":t.preserveWhiteSpace=void 0,t.textEmpty=void 0}})}super.unsetCache(...e)}css(e,t,i=false){return arguments.length>=2&&(t?this._styleMap[e]=t:delete this._styleMap[e],i&&this.unsetCache(e)),this._styleMap[e]||this.styleElement&&this.style[e]||""}cssApply(e,t=false){return Object.assign(this._styleMap,e),t&&this.unsetCache(...Object.keys(e)),this}cssSet(e,t,i=true){return super.css(e,t,i)}setCacheValue(e,t){this._cached[e]=t}get element(){return this._element||!!this.innerWrapped&&this.innerMostWrapped.unsafe("element")||null}set naturalChild(e){this._cached.naturalChild=e}get naturalChild(){var e;let t=this._cached.naturalChild;return void 0===t&&(t=!!(null===(e=this._element)||void 0===e?void 0:e.parentElement),this._cached.naturalChild=t),t}get pseudoElement(){var e;return"__squared.pseudo"===(null===(e=this._element)||void 0===e?void 0:e.className)}set documentParent(e){this._documentParent=e}get documentParent(){return this._documentParent||this.absoluteParent||this.actualParent||this.parent||this}set containerName(e){this._cached.containerName=e.toUpperCase()}get containerName(){let e=this._cached.containerName;if(void 0===e){const t=this.element;e=t?At(t)?"PLAINTEXT":"INPUT"===t.tagName?"INPUT_"+Bt(t.type,true).toUpperCase():t.tagName.toUpperCase():"",this._cached.containerName=e}return e}get layoutHorizontal(){return this.hasAlign(8)}get layoutVertical(){if(this.hasAlign(16))return true;if(this.naturalChild){const e=this.naturalChildren;return 1===e.length&&e[0].blockStatic}return false}get nodeGroup(){return false}set renderAs(e){this.rendered||false!==(null==e?void 0:e.rendered)||(this._renderAs=e)}get renderAs(){return this._renderAs}get blockStatic(){return super.blockStatic||this.hasAlign(64)&&this.pageFlow&&!this.floating}get rightAligned(){return super.rightAligned||this.hasAlign(2048)}set autoPosition(e){this._cached.autoPosition=e}get autoPosition(){let e=this._cached.autoPosition;if(void 0===e){if(this.pageFlow)e=false;else{const{top:t,right:i,bottom:n,left:s}=this._styleMap;e=!(t&&"auto"!==t||s&&"auto"!==s||i&&"auto"!==i||n&&"auto"!==n)}this._cached.autoPosition=e}return e}set textContent(e){this._cached.textContent=e}get textContent(){let e=this._cached.textContent;return void 0===e&&(e=this.naturalChild&&this._element.textContent||"",this._cached.textContent=e),e}get positiveAxis(){let e=this._cached.positiveAxis;return void 0===e&&(e=(!this.positionRelative||this.positionRelative&&this.top>=0&&this.left>=0&&(this.right<=0||this.hasPX("left"))&&(this.bottom<=0||this.hasPX("top")))&&this.marginTop>=0&&this.marginLeft>=0&&this.marginRight>=0,this._cached.positiveAxis=e),e}get leftTopAxis(){let e=this._cached.leftTopAxis;if(void 0===e){switch(this.cssInitial("position")){case"absolute":e=this.absoluteParent===this.documentParent;break;case"fixed":e=true;break;default:e=false}this._cached.leftTopAxis=e}return e}get baselineElement(){let e=this._cached.baselineElement;if(void 0===e){if(this.baseline){const t=this.naturalChildren;e=t.length?t.every(e=>e.baselineElement&&0===e.length):this.inlineText&&this.textElement||this.plainText&&!this.multiline||this.inputElement||this.imageElement||this.svgElement}else e=false;this._cached.baselineElement=e}return e}set multiline(e){this._cached.multiline=e,this._cached.baselineElement=void 0}get multiline(){return super.multiline}set visible(e){this._visible=e}get visible(){return this._visible}set controlName(e){this.rendered&&this._controlName||(this._controlName=e)}get controlName(){return this._controlName||""}set actualParent(e){this._cached.actualParent=e}get actualParent(){let e=this._cached.actualParent;return void 0===e&&(e=super.actualParent,null===e&&(e=this.innerMostWrapped.actualParent),this._cached.actualParent=e),e}set siblingsLeading(e){this._siblingsLeading=e}get siblingsLeading(){return this._siblingsLeading||this.previousSiblings()}set siblingsTrailing(e){this._siblingsTrailing=e}get siblingsTrailing(){return this._siblingsTrailing||this.nextSiblings()}get previousSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){let e=i-1;while(e>=0){const i=t[e--];if(i&&(!i.excluded||i.lineBreak))return i}}}return null}get nextSibling(){const e=this.actualParent;if(e){const t=e.naturalChildren,i=t.indexOf(this);if(-1!==i){const e=t.length;let n=i+1;while(n<e){const e=t[n++];if(e&&(!e.excluded||e.lineBreak))return e}}}return null}get firstChild(){return this.naturalChildren[0]||null}get lastChild(){const e=this.naturalChildren;return e[e.length-1]||null}get onlyChild(){var e,t,i;return 1===(null!==(t=null===(e=this.renderParent)||void 0===e?void 0:e.renderChildren.length)&&void 0!==t?t:null===(i=this.parent)||void 0===i?void 0:i.length)&&!this.documentRoot}set childIndex(e){this._childIndex=e}get childIndex(){let e=this._childIndex;if(e===Number.POSITIVE_INFINITY){let t=this.innerWrapped;if(t)do{const i=t.childIndex;if(i!==Number.POSITIVE_INFINITY){e=i,this._childIndex=e;break}t=t.innerWrapped}while(t);else{const t=this._element;if(t){const i=t.parentElement;i&&Wt(i.childNodes,(i,n)=>{if(i===t)return e=n,this._childIndex=n,true})}}}return e}set containerIndex(e){this._containerIndex=e}get containerIndex(){let e=this._containerIndex;if(e===Number.POSITIVE_INFINITY){let t=this.innerWrapped;while(t){const i=t.containerIndex;if(i!==Number.POSITIVE_INFINITY){e=i,this._containerIndex=e;break}t=t.innerWrapped}}return e}get textEmpty(){let e=this._cached.textEmpty;if(void 0===e){if(!this.styleElement||this.imageElement||this.svgElement)e=false;else{const t=this.textContent;e=""===t||!this.preserveWhiteSpace&&""===t.trim()}this._cached.textEmpty=e}return e}get innerMostWrapped(){if(this.naturalChild)return this;let e=this.innerWrapped;while(e){const t=e.innerWrapped;if(!t)break;e=t}return e||this}get outerMostWrapper(){let e=this.outerWrapper;while(e){const t=e.outerWrapper;if(!t)break;e=t}return e||this}get preserveWhiteSpace(){let e=this._cached.preserveWhiteSpace;if(void 0===e){const t=this.css("whiteSpace");e="pre"===t||"pre-wrap"===t,this._cached.preserveWhiteSpace=e}return e}get outerExtensionElement(){if(this.naturalChild){let e=this._element.parentElement;while(e){if(e.dataset.use)return e;e=e.parentElement}}return null}get extensions(){let e=this._cached.extensions;if(void 0===e){const t=this.dataset.use;e=t?Dt(t.split(Rt.SEPARATOR),e=>""===e):[],this._cached.extensions=e}return e}}const{hasBit:Kt}=squared.lib.util;class Qt extends squared.lib.base.Container{constructor(e,t,i=0,n=0,s){super(s),this.parent=e,this.node=t,this.containerType=i,this.alignmentType=n,this.rowCount=0,this.columnCount=0,this.renderType=0,this.renderIndex=-1}static create(e){const{parent:t,node:i,containerType:n,alignmentType:s,children:a,itemCount:r,rowCount:o,columnCount:l}=e,c=new Qt(t,i,n,s,a);return r&&(c.itemCount=r),o&&(c.rowCount=o),l&&(c.columnCount=l),c}init(){const e=this.length;if(e>1){const e=$t.linearData(this.children);this._floated=e.floated,this._linearX=e.linearX,this._linearY=e.linearY}else{if(!e)return;this._linearY=this.item(0).blockStatic,this._linearX=!this._linearY}this._initialized=true}setContainerType(e,t){this.containerType=e,t&&this.add(t)}hasAlign(e){return Kt(this.alignmentType,e)}add(e){return Kt(this.alignmentType,e)||(this.alignmentType|=e),this.alignmentType}addRender(e){return Kt(this.renderType,e)||(this.renderType|=e),this.renderType}delete(e){return Kt(this.alignmentType,e)&&(this.alignmentType^=e),this.alignmentType}retain(e){return super.retain(e),this.init(),this}set itemCount(e){this._itemCount=e}get itemCount(){var e;return null!==(e=this._itemCount)&&void 0!==e?e:this.length}get linearX(){var e;return this._initialized||this.init(),null===(e=this._linearX)||void 0===e||e}get linearY(){var e;return this._initialized||this.init(),null!==(e=this._linearY)&&void 0!==e&&e}get floated(){return this._initialized||this.init(),this._floated||new Set}set type(e){this.setContainerType(e.containerType,e.alignmentType);const t=e.renderType;t&&this.addRender(t)}get singleRowAligned(){let e=this._singleRow;if(void 0===e){const t=this.length;if(t){if(e=true,t>1){let i=Number.POSITIVE_INFINITY;const n=this.children;let s=0;while(s<t){const t=n[s++];if(t.blockStatic||t.multiline||Math.ceil(t.bounds.top)>=i){e=false;break}i=t.bounds.bottom}}this._singleRow=e}else e=false}return e}get unknownAligned(){return this.length>1&&!this.linearX&&!this.linearY}}const Jt=squared.lib,{BOX_POSITION:Zt,TEXT_STYLE:ei,convertListStyle:ti,formatPX:ii,getStyle:ni,insertStyleSheetRule:si,resolveURL:ai}=Jt.css,{getNamedItem:ri,isTextNode:oi,removeElementsByClassName:li}=Jt.dom,{maxArray:ci}=Jt.math,{appendSeparator:hi,convertFloat:di,convertWord:ui,flatArray:fi,hasBit:gi,hasMimeType:pi,isString:mi,iterateArray:bi,partitionArray:xi,safeNestedArray:yi,safeNestedMap:vi,trimBoth:Ei,trimString:Si}=Jt.util,{XML:Ii}=Jt.regex,{getElementCache:wi,getPseudoElt:_i,setElementCache:Ti}=Jt.session,{isPlainText:ki}=Jt.xml,Ni=/\s*(?:attr\(([^)]+)\)|(counter)\(([^,)]+)(?:,\s+([a-z-]+))?\)|(counters)\(([^,]+),\s+"([^"]*)"(?:,\s+([a-z-]+))?\)|"([^"]+)")\s*/g;function Ai(e,t,i,n,s,a){vi(e,i)[n]=a,t.style.setProperty(n,s)}function Ci(e,t,i=1){if("none"!==e){const n=/\s*([^\-\d][^\-\d]?[^\s]*)\s+(-?\d+)\s*/g;let s;while(null!==(s=n.exec(e)))if(s[1]===t)return parseInt(s[2]);return i}}function Ri(e,t,i,n,s){var a;const r=null===(a=wi(e,"styleMap"+i,n))||void 0===a?void 0:a.counterIncrement;return r?Ci(r,t,s):void 0}function Pi(e,t,i){return!i.length&&(t.push(e),true)}function Mi(e,t,i){return!t.length&&(i.push(e),true)}function Bi(e,t){if(e){const i=e.split(Ii.SEPARATOR),n=[],s=[];if(t.forEach(e=>{const t=i.indexOf(e.name);-1!==t?n[t]=e:s.push(e)}),n.length)return fi(n).concat(s)}return t}const Li=e=>!e.blockStatic&&true!==e.autoMargin.horizontal&&!(e.blockDimension&&"100%"===e.css("width"))&&(!(e.plainText&&e.multiline)||e.floating),Fi=e=>e.textElement&&(e.blockStatic||e.multiline),Wi=(e,t)=>e.positionRelative?e.hasPX("left")?e.left*(t?1:-1):e.right*(t?-1:1):0;const Oi=squared.lib,{USER_AGENT:Vi,isUserAgent:Di,isWinEdge:Hi}=Oi.client,{BOX_BORDER:Xi,BOX_PADDING:Yi,formatPX:Ui,getStyle:zi,isLength:Gi,isPercent:ji}=Oi.css,{isTextNode:qi,withinViewport:$i}=Oi.dom,{capitalize:Ki,convertFloat:Qi,flatArray:Ji,isString:Zi,iterateArray:en,safeNestedArray:tn}=Oi.util,{actualClientRect:nn,getElementCache:sn,setElementCache:an}=Oi.session,{pushIndent:rn,pushIndentArray:on}=Oi.xml;function ln(e){switch(e.getPropertyValue("position")){case"absolute":case"fixed":return true}return false}const cn=(e,t)=>parseInt(e.getPropertyValue(t));const hn=squared.lib,{hasComputedStyle:dn}=hn.css,{includes:un}=hn.util;class fn extends q{constructor(e,t,i,n=[]){super(e,t,i),this.eventOnly=false,this.documentBase=false,this.cascadeAll=false,this.removeIs=false,this.tagNames=n,this._isAll=0===n.length}static findNestedElement(e,t){if(e&&dn(e)){const i=e.children,n=i.length;let s=0;while(s<n){const e=i[s++];if(un(e.dataset.use,t))return e}}return null}is(e){return this._isAll||this.tagNames.includes(e.tagName)}condition(e,t){return e.dataset.use?this.included(e.element):!this._isAll}included(e){return un(e.dataset.use,this.name)}processNode(e,t){}processChild(e,t){}addDescendant(e){const t=this.application.session.extensionMap,i=e.id,n=t.get(i);n?n.includes(this)||n.push(this):t.set(i,[this])}postBaseLayout(e){}postConstraints(e){}postOptimize(e){}afterBaseLayout(){}afterConstraints(){}afterResources(){}beforeBaseLayout(){}beforeCascade(e){}afterFinalize(){}set application(e){this._application=e,this._controller=e.controllerHandler,this._resource=e.resourceHandler,this._cache=e.session.cache,this._cacheProcessing=e.processing.cache}get application(){return this._application}get controller(){return this._controller}get resource(){return this._resource}get cache(){return this._cache}get cacheProcessing(){return this._cacheProcessing}}const{isLength:gn}=squared.lib.css;const pn=squared.lib,{USER_AGENT:mn,isUserAgent:bn}=pn.client,{parseColor:xn}=pn.color,{BOX_BORDER:yn,calculate:vn,convertAngle:En,formatPX:Sn,getBackgroundPosition:In,getInheritedStyle:wn,isCalc:_n,isLength:Tn,isParentStyle:kn,isPercent:Nn,parseAngle:An}=pn.css,{cos:Cn,equal:Rn,hypotenuse:Pn,offsetAngleX:Mn,offsetAngleY:Bn,relativeAngle:Ln,sin:Fn,triangulate:Wn,truncateFraction:On}=pn.math,{CHAR:Vn,ESCAPE:Dn,STRING:Hn,XML:Xn}=pn.regex,{getElementAsNode:Yn}=pn.session,{appendSeparator:Un,convertCamelCase:zn,convertFloat:Gn,hasValue:jn,isEqual:qn,isNumber:$n,isString:Kn,iterateArray:Qn,trimEnd:Jn,trimStart:Zn}=pn.util,{STRING_SPACE:es,STRING_TABSPACE:ts}=pn.xml,is=`((?:rgb|hsl)a?\\(\\d+,\\s+\\d+%?,\\s+\\d+%?(?:,\\s+[\\d.]+)?\\)|#[A-Za-z\\d]{3,8}|[a-z]+)\\s*(${Hn.LENGTH_PERCENTAGE}|${Hn.CSS_ANGLE}|(?:${Hn.CSS_CALC}(?=,)|${Hn.CSS_CALC}))?,?\\s*`,ns=/\u00A0/g,ss=new RegExp(`(?:initial|url\\([^)]+\\)|(repeating-)?(linear|radial|conic)-gradient\\(((?:to\\s+[a-z\\s]+|(?:from\\s+)?-?[\\d.]+(?:deg|rad|turn|grad)|(?:circle|ellipse)?\\s*(?:closest-side|closest-corner|farthest-side|farthest-corner)?)?(?:\\s*(?:(?:-?[\\d.]+(?:[a-z%]+)?\\s*)+)?(?:at\\s+[\\w %]+)?)?),?\\s*((?:${is})+)\\))`,"g"),as=new RegExp(is,"g"),rs=/\n([^\S\n]*)?$/;function os(e,t,i){const{width:n,height:s}=t.dimension,a=[];let r,o=false,l=true,c=1;switch(t.type){case"linear":{const{repeating:e,angle:i}=t;switch(o=e,i){case 0:case 180:case 360:r=s,l=false;break;case 90:case 270:r=n;break;default:r=Math.abs(n*Fn(i-180))+Math.abs(s*Cn(i-180)),l=n>=s}break}case"radial":{const{repeating:i,radiusExtent:n,radius:s}=t;l=e.actualWidth>=e.actualHeight,o=i,c=n/s,r=s;break}case"conic":r=Math.min(n,s);break;default:return a}let h,d=0;while(null!==(h=as.exec(i))){const i=xn(h[1],1,true);if(i){let n=-1;if("conic"===t.type){const e=h[3],t=h[4];e&&t&&(n=En(e,t)/360)}else{const t=h[2];Nn(t)?n=parseFloat(t)/100:Tn(t)?n=(l?e.parseWidth(t,false):e.parseHeight(t,false))/r:_n(t)&&(n=vn(h[6],{boundingSize:r,fontSize:e.fontSize})/r,isNaN(n)&&(n=-1)),o&&-1!==n&&(n*=c)}0===a.length&&(-1===n?n=0:n>0&&a.push({color:i,offset:0})),-1!==n&&(n=Math.max(d,n),d=n),a.push({color:i,offset:n})}}const u=a.length,f=a[u-1];-1===f.offset&&(f.offset=1);let g=0;for(let e=0;e<u;++e){const t=a[e];if(-1===t.offset)if(0===e)t.offset=0;else{for(let i=e+1,n=2;i<u-1;++n){const e=a[i++];if(-1!==e.offset){t.offset=(g+e.offset)/n;break}}-1===t.offset&&(t.offset=g+f.offset/(u-1))}g=t.offset}if(o){if(g<100)e:{let e=g;const t=a.slice(0);while(g<100){let i=0;while(i<u){const n=t[i++];if(g=Math.min(e+n.offset,1),a.push(Object.assign(Object.assign({},n),{offset:g})),1===g)break e}e=g}}}else g<1&&a.push(Object.assign(Object.assign({},a[u-1]),{offset:1}));return as.lastIndex=0,a}function ls(e,t=0){if(""!==(e=e.trim())){let t=An(e);return t<0&&(t+=360),t}return t}function cs(e,t){var i,n,s;let a=false;switch(t=t.replace(ns,es),e.css("whiteSpace")){case"nowrap":t=t.replace(/\n/g," "),a=true;break;case"pre":case"pre-wrap":{false===(null===(i=e.renderParent)||void 0===i?void 0:i.layoutVertical)&&(t=t.replace(/^\s*\n/,""));const n=ps.checkPreIndent(e);if(n){const[e,i]=n;""!==e&&(i.textContent=e+i.textContent),t=t.replace(rs,"")}return[t=t.replace(/\n/g,"\\n").replace(/\t/g,ts).replace(/\s/g,es),true,false]}case"pre-line":return[t=t.replace(/\n/g,"\\n").replace(/\s+/g," "),true,false]}return e.onlyChild&&e.htmlElement?t=t.replace(Vn.LEADINGSPACE,"").replace(Vn.TRAILINGSPACE,""):((null===(n=e.previousSibling)||void 0===n?void 0:n.blockStatic)&&(t=t.replace(Vn.LEADINGSPACE,"")),(null===(s=e.nextSibling)||void 0===s?void 0:s.blockStatic)&&(t=t.replace(Vn.TRAILINGSPACE,""))),[t,a,true]}function hs(e,t,i,n){if(i){const s=i.split(Xn.SEPARATOR);return ps.getBackgroundSize(e,s[t%s.length],n)}}function ds(e,t,i,n){const s=e.css(n[0])||"none";if("none"!==s){let a=Sn("outline"!==i?e[n[1]]:Gn(e.style[n[1]]));if("0px"!==a){let r=e.css(n[2])||"initial";switch(r){case"initial":r="rgb(0, 0, 0)";break;case"inherit":case"currentcolor":case"currentColor":r=wn(e.element,n[2])}"2px"!==a||"inset"!==s&&"outset"!==s||(a="1px"),r=xn(r,1,true),r&&(t[i]={width:a,style:s,color:r})}}}function us(e,t,i){let n=e.css(i);switch("initial"===n&&(n="backgroundClip"===i?"border-box":"padding-box"),n){case"border-box":return true;case"padding-box":t[i]={top:e.borderTopWidth,right:e.borderRightWidth,bottom:e.borderBottomWidth,left:e.borderLeftWidth};break;case"content-box":t[i]={top:e.borderTopWidth+e.paddingTop,right:e.borderRightWidth+e.paddingRight,bottom:e.borderBottomWidth+e.paddingBottom,left:e.borderLeftWidth+e.paddingLeft}}return false}const fs=e=>e.replace(/&/g,"&amp;"),gs=e=>Kn(e)?e.includes("at ")?/(.+?)?\s*at (.+?)\s*$/.exec(e):[e,e]:null;class ps extends h{static isInheritedStyle(e,t){var i;return e.styleElement&&e.style[t]===(null===(i=e.actualParent)||void 0===i?void 0:i.style[t])&&("inherit"===e.cssStyle[t]||""===e.cssInitial(t))}static isBackgroundVisible(e){return!!e&&("backgroundImage"in e||"borderTop"in e||"borderRight"in e||"borderBottom"in e||"borderLeft"in e)}static generateId(e,t,i=1){const n=t;let s=i;1===i&&(t+="_"+s);const a=this.ASSETS.ids,r=a.get(e)||[];do{if(!r.includes(t)){r.push(t);break}t=`${n}_${++s}`}while(true);return a.set(e,r),t}static insertStoredAsset(e,t,i){const n=ps.STORED[e];if(n&&jn(i)){let s=function(e,t){const i=ps.STORED[e];if(i)for(const[e,n]of i.entries())if(qn(t,n))return e;return""}(e,i);if(""===s){$n(t)&&(t="__"+t);let e=0;do{if(s=t+(e>0?"_"+e:""),!n.has(s)){n.set(s,i);break}}while(++e)}return s}return""}static getOptionArray(e,t=false){let i=[],n=true;return Qn(e.children,e=>{if(!e.disabled||t)switch(e.tagName){case"OPTION":{const t=e.text.trim()||e.value.trim();""!==t&&(n&&!$n(t)&&(n=false),i.push(t));break}case"OPTGROUP":{const[s,a]=this.getOptionArray(e,t);s?(i=i.concat(s),n=false):a&&(i=i.concat(a));break}}}),n?[void 0,i]:[i]}static parseBackgroundImage(e,t,i){var n,s;if(""!==t){const a=[];let r,o=0;ss.lastIndex=0;while(null!==(r=ss.exec(t))){const t=r[0];if(t.startsWith("url(")||"initial"===t)a.push(t);else{const t=!!r[1],l=r[2],c=r[3],h=hs(e,o,e.css("backgroundSize"),i),d=$t.refitScreen(e,h||e.actualDimension);let u;switch(l){case"linear":{const{width:i,height:n}=d;let s=180;switch(c){case"to top":s=360;break;case"to right top":s=45;break;case"to right":s=90;break;case"to right bottom":s=135;break;case"to bottom":break;case"to left bottom":s=225;break;case"to left":s=270;break;case"to left top":s=315;break;default:c&&(s=ls(c,180)||360)}let a=On(Mn(s,i)),o=On(Bn(s,n));if(a!==i&&o!==n&&!Rn(Math.abs(a),Math.abs(o))){let e;e=s<=90?Ln({x:0,y:n},{x:i,y:0}):s<=180?Ln({x:0,y:0},{x:i,y:n}):s<=270?Ln({x:0,y:0},{x:-i,y:n}):Ln({x:0,y:n},{x:-i,y:0});const t=Math.abs(e-s);a=On(Mn(s,Wn(t,90-t,Pn(i,n))[1])),o=On(Bn(s,Wn(90,90-s,a)[0]))}const h={type:l,repeating:t,dimension:d,angle:s,angleExtent:{x:a,y:o}};h.colorStops=os(e,h,r[4]),u=h;break}case"radial":{const a=gs(c),o=In((null==a?void 0:a[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i}),{left:f,top:g}=o,{width:p,height:m}=d;let b="ellipse",x=g,y=g,v=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,S=0,I=0;if(a){const t=null===(n=a[1])||void 0===n?void 0:n.trim();if(t)if(t.startsWith("circle"))b="circle";else{let i=Number.POSITIVE_INFINITY;const n=t.split(" "),s=n.length;for(let t=0;t<s;++t)i=Math.min(0===t?e.parseWidth(n[t],false):e.parseHeight(n[t],false),i);S=i,I=i,1!==s&&n[0]!==n[1]||(b="circle")}}[[0,0],[p,0],[p,m],[0,m]].forEach(e=>{const t=Math.round(Pn(Math.abs(e[0]-f),Math.abs(e[1]-g)));v=Math.min(t,v),E=Math.max(t,E)}),[p-f,m-g,f].forEach(e=>{x=Math.min(e,x),y=Math.max(e,y)});const w={type:l,repeating:t,dimension:d,shape:b,center:o,closestSide:x,farthestSide:y,closestCorner:v,farthestCorner:E};if(0===S&&0===I){S=E;const e=(null===(s=null==a?void 0:a[1])||void 0===s?void 0:s.split(" ").pop())||"";switch(e){case"closest-corner":case"closest-side":case"farthest-side":{const i=w[zn(e)];t?I=i:S=i;break}default:I=E}}w.radius=S,w.radiusExtent=I,w.colorStops=os(e,w,r[4]),u=w;break}case"conic":{const t=gs(c),n={type:l,dimension:d,angle:ls(c),center:In((null==t?void 0:t[2])||"center",d,{fontSize:e.fontSize,imageDimension:h,screenDimension:i})};n.colorStops=os(e,n,r[4]),u=n;break}}a.push(u||"initial")}++o}if(a.length)return a}}static getBackgroundSize(e,t,i){let n=0,s=0;switch(t){case"":case"cover":case"contain":case"100% 100%":case"auto":case"auto auto":case"initial":return;default:{const a=t.split(Vn.SPACE);1===a.length&&(a[1]=a[0]),a.forEach((t,a)=>{switch("auto"===t&&(t="100%"),a){case 0:n=e.parseUnit(t,"width",false,i);break;case 1:s=e.parseUnit(t,"height",false,i)}});break}}return n>0&&s>0?{width:Math.round(n),height:Math.round(s)}:void 0}static hasLineBreak(e,t=false,i=false){if(e.naturalElements.length)return e.naturalElements.some(e=>e.lineBreak);if(!t&&e.naturalChild){const t=e.element;let n=t.textContent;return i&&(n=n.trim()),n.includes("\n")&&(e.plainText&&kn(t,"whiteSpace","pre","pre-wrap")||e.css("whiteSpace").startsWith("pre"))}return false}static checkPreIndent(e){if(e.plainText){const t=e.actualParent;if((null==t?void 0:t.preserveWhiteSpace)&&t.ascend({condition:e=>"PRE"===e.tagName,startSelf:true}).length){let t=e.nextSibling;if(null==t?void 0:t.naturalElement){const i=e.textContent;if(""!==i.trim()){const e=rs.exec(i);if(e&&(t.textElement||(t=t.find(e=>e.naturalChild&&e.textElement,{cascade:true,error:e=>e.naturalChild&&!e.textElement&&0===e.length})),t))return[e[1]?e[0]:"",t]}}}}}finalize(e){}reset(){super.reset();const e=ps.STORED;for(const t in e)e[t].clear()}writeRawImage(e,t){const i=this.fileHandler;if(i){const n={pathname:Un(this.userSettings.outputDirectory,this.controllerSettings.directory.image),filename:e,base64:t};return i.addAsset(n),n}}setBoxStyle(e){var t;if((e.styleElement||e.visibleStyle.background)&&e.hasResource(Et.BOX_STYLE)){const i=e.cssAsObject("backgroundSize","backgroundRepeat","backgroundPositionX","backgroundPositionY");if(us(e,i,"backgroundClip")&&us(e,i,"backgroundOrigin"),"0px"!==e.css("borderRadius")){const{borderTopLeftRadius:t,borderTopRightRadius:n,borderBottomRightRadius:s,borderBottomLeftRadius:a}=e.cssAsObject("borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"),[r,o]=t.split(" "),[l,c]=n.split(" "),[h,d]=s.split(" "),[u,f]=a.split(" "),g=o||c||d||f?[r,o||r,l,c||l,h,d||h,u,f||u]:[r,l,h,u],p=e.actualWidth>=e.actualHeight,m=g[0];g.every(e=>e===m)&&(g.length="0px"===m||""===m?0:1);const b=g.length;if(b){const t=p?"width":"height";let n=0;while(n<b)g[n]=Sn(e.parseUnit(g[n++],t,false));i.borderRadius=g}}e.visibleStyle.borderWidth&&(e.borderTopWidth>0&&ds(e,i,"borderTop",yn[0]),e.borderRightWidth>0&&ds(e,i,"borderRight",yn[1]),e.borderBottomWidth>0&&ds(e,i,"borderBottom",yn[2]),e.borderLeftWidth>0&&ds(e,i,"borderLeft",yn[3])),ds(e,i,"outline",yn[4]),e.hasResource(Et.IMAGE_SOURCE)&&(i.backgroundImage=ps.parseBackgroundImage(e,e.backgroundImage,e.localSettings.screenDimension));let n=e.backgroundColor;""===n&&e.has("backgroundColor")&&!e.documentParent.visible&&(n=e.css("backgroundColor")),""!==n&&(i.backgroundColor=(null===(t=xn(n))||void 0===t?void 0:t.valueAsRGBA)||""),e.data(ps.KEY_NAME,"boxStyle",i)}}setFontStyle(e){if((e.textElement||e.inlineText)&&(!e.textEmpty||e.visibleStyle.background||e.pseudoElement)||e.inputElement){const t=xn(e.css("color"));let i=e.css("fontWeight");if(!$n(i))switch(i){case"lighter":i="200";break;case"bold":i="700";break;case"bolder":i="900";break;default:i="400"}e.data(ps.KEY_NAME,"fontStyle",{fontFamily:e.css("fontFamily").trim(),fontStyle:e.css("fontStyle"),fontSize:e.fontSize,fontWeight:i,color:(null==t?void 0:t.valueAsRGBA)||""})}}setValueString(e){const t=e.element;if(t){let i="",n="",s="",a=true,r=false;switch(t.tagName){case"INPUT":switch(n=t.value,t.type){case"radio":case"checkbox":{const t=e.companion;false===(null==t?void 0:t.visible)&&(n=t.textContent.trim());break}case"submit":""!==n||e.visibleStyle.backgroundImage||(n="Submit");break;case"reset":""!==n||e.visibleStyle.backgroundImage||(n="Reset");break;case"time":""===n&&(s="--:-- --");break;case"date":case"datetime-local":if(""===n){switch((new Intl.DateTimeFormat).resolvedOptions().locale){case"en-US":s="mm/dd/yyyy";break;default:s="dd/mm/yyyy"}"datetime-local"===t.type&&(s+=" --:-- --")}break;case"week":""===n&&(s="Week: --, ----");break;case"month":""===n&&(s="--------- ----");break;case"text":case"password":case"url":case"email":case"search":case"number":case"tel":""===n&&(s=t.placeholder);break;case"file":n=bn(8)?"Browse...":"Choose File";break;case"color":{const t=this.controllerSettings.style.inputColorBorderColor,i=(xn(n)||xn("rgb(0, 0, 0)")).valueAsRGBA,{width:s,height:a}=e.actualDimension,r=`${s-10}px ${a-10}px, ${s-8}px ${a-8}px`,o="no-repeat, no-repeat",l="center, center",c="center, center",h=ps.parseBackgroundImage(e,`linear-gradient(${i}, ${i}), linear-gradient(${t}, ${t})`);n="";let d=e.data(ps.KEY_NAME,"boxStyle");if(d){const e=d.backgroundImage;if(e){d.backgroundSize=r+", "+d.backgroundSize,d.backgroundRepeat=o+", "+d.backgroundRepeat,d.backgroundPositionX=l+", "+d.backgroundPositionX,d.backgroundPositionY=c+", "+d.backgroundPositionY,e.unshift(...h);break}}else d={};e.data(ps.KEY_NAME,"boxStyle",Object.assign(d,{backgroundSize:r,backgroundRepeat:o,backgroundPositionX:l,backgroundPositionY:c,backgroundImage:h}));break}case"range":s=n,n=""}break;case"TEXTAREA":n=t.value;break;case"IFRAME":n=t.src;break;default:{const s=e.textContent;e.plainText||e.pseudoElement?(i=s.trim(),[n,r,a]=cs(e,fs(s)),r=true):e.inlineText?(i=s.trim(),[n,r,a]=cs(e,e.hasAlign(1024)?fs(s):this.removeExcludedFromText(e,t))):0===e.naturalChildren.length&&""===(null==s?void 0:s.trim())&&!e.hasPX("height")&&ps.isBackgroundVisible(e.data(ps.KEY_NAME,"boxStyle"))&&(n=s);break}}if(""!==n){if(a&&e.pageFlow){const t=e.siblingsLeading[0];let i=false;if(n.length>1)if(!t||t.multiline||t.lineBreak||t.plainText&&Vn.TRAILINGSPACE.test(t.textContent))n=n.replace(Vn.LEADINGSPACE,"");else if(t.naturalElement){const e=t.textContent,n=e.length;n&&(i=32===e.charCodeAt(n-1))}if(r){const s=!e.lineBreakTrailing&&Vn.TRAILINGSPACE.test(n);if(n=!Vn.LEADINGSPACE.test(n)||false!==(null==t?void 0:t.block)||t.lineBreak||i?n.trim():es+n.trim(),s){const t=e.siblingsTrailing.find(e=>!e.excluded||e.lineBreak);false===(null==t?void 0:t.blockStatic)&&(n+=es)}}else if(""!==n.trim())n=n.replace(Vn.LEADINGSPACE,t&&(t.block||t.lineBreak||i&&t.htmlElement&&t.textContent.length>1||e.multiline&&ps.hasLineBreak(e))?"":es),n=n.replace(Vn.TRAILINGSPACE,"table-cell"===e.display||e.lineBreakTrailing||e.blockStatic?"":es);else if(!e.inlineText)return}""!==n&&e.data(ps.KEY_NAME,"valueString",{key:i,value:n})}""!==s&&e.data(ps.KEY_NAME,"hintString",s)}else if(e.inlineText){const t=e.textContent;t&&e.data(ps.KEY_NAME,"valueString",{key:t,value:t})}}removeExcludedFromText(e,t){const i=t.children.length>0||"CODE"===t.tagName,n=e.preserveWhiteSpace,s=i?"innerHTML":"textContent";let a=t[s]||"";if(""===a.trim())return n?a:es;const r=e.sessionId;return t.childNodes.forEach((e,t)=>{const o=Yn(e,r);if(null===o||!o.textElement||!o.pageFlow||o.positioned||o.pseudoElement||o.excluded||o.dataset.target){if(o){if(i&&o.htmlElement){const e=o.toElementString("outerHTML");return void(o.lineBreak?a=a.replace(n?e:new RegExp(`\\s*${e}\\s*`),"\\n"):o.positioned?a=a.replace(e,""):n||(a=a.replace(e,o.pageFlow&&""!==o.textContent.trim()?es:"")))}{const e=o.plainText?o.textContent:o[s];if(Kn(e))return void(n||(a=a.replace(e,"")))}}else if(e instanceof HTMLElement){const t=getComputedStyle(e).getPropertyValue("position");a=a.replace(e.outerHTML,"absolute"!==t&&"fixed"!==t&&""!==e.textContent.trim()?es:"")}0===t?a=Zn(a," "):t===length-1&&(a=Jn(a," "))}}),i&&(a=a.replace(/^\\n\\n/,"\\n").replace(/\\n\\n$/,"\\n").replace(Dn.ENTITY,(e,t)=>String.fromCharCode(parseInt(t)))),a}}ps.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,images:new Map};const ms=squared.lib,{formatPercent:bs,formatPX:xs,isLength:ys,isPercent:vs}=ms.css,{CHAR:Es,CSS:Ss}=ms.regex,{isNumber:Is,safeNestedArray:ws,trimString:_s,withinRange:Ts}=ms.util,ks=yt.CSS_GRID,Ns="[\\d.]+[a-z%]+|auto|max-content|min-content",As="minmax\\(\\s*([^,]+),\\s+([^)]+)\\s*\\)",Cs="fit-content\\(\\s*([\\d.]+[a-z%]+)\\s*\\)",Rs=new RegExp(`^${Ns}$`),Ps=new RegExp(`\\s*(repeat\\(\\s*(auto-fit|auto-fill|\\d+),\\s+(.+)\\)|\\[([\\w\\s\\-]+)\\]|${As}|${Cs}|${Ns}\\s*)\\s*`,"g"),Ms=new RegExp(`\\s*(\\[([\\w\\s\\-]+)\\]|${As}|${Cs}|${Ns})\\s*`,"g"),Bs=new RegExp(Ns),Ls=new RegExp(As),Fs=new RegExp(Cs),Ws=new RegExp("\\[([\\w\\s\\-]+)\\]"),Os=/^([\w-]+)-(start|end)$/;function Vs(e,t){const i=e.repeat,n=[],s=[],a=t.length;for(let e=0;e<a;++e)i[e]?s.push(t[e]):n.push(t[e]);const r=e.length,o=r-n.length,l=s.length,c=new Array(r);for(let e=0;e<r;++e)if(i[e]){for(let t=0,i=0;t<o;++e,++t,++i)i===l&&(i=0),c[e]=s[i];--e}else c[e]=n.shift();return c}function Ds(e,t){const i=e.unit;if(1===i.length&&(e.autoFill||e.autoFit)){const n=e.unitMin;let s=0;if([i[0],n[0]].forEach(e=>{vs(e)?s=Math.max(parseFloat(e)/100*t,s):ys(e)&&(s=Math.max(parseFloat(e),s))}),s>0)return e.length=Math.floor(t/(s+e.gap)),e.unit=Vs(e,i),e.unitMin=Vs(e,n),true}return false}function Hs(e,t,i,n,s){let a=0,r=0,o=1;const l=n.length;let c=0;while(c<l){const e=n[c++];Ss.PX.test(e)?a+=parseFloat(e):Gs.isFr(e)?r+=parseFloat(e):vs(e)&&(o-=parseFloat(e)/100)}if(o<1&&r>0){const h=(e*o-(i-1)*t-s.reduce((e,t)=>e+Math.max(0,t),0)-a)/r;if(h>0)for(c=0;c<l;++c){const e=n[c];Gs.isFr(e)&&(n[c]=xs(parseFloat(e)*h))}}}function Xs(e,t){if(0===e.length){let i=0;while(i<t)e[i++]="1fr"}}function Ys(e,t,i){if(i){for(let n=0,s=-1,a=0;n<e;++n)if(0===i[n]){if(-1===s&&(s=n),++a===t)return s}else s=-1;return-1}return 0}function Us(e){const t=e.length;for(let i=0;i<t;++i){const t=e[i];for(const e of t)if(0===e)return i}return Math.max(0,t-1)}const zs=(e,t,i)=>ys(t)?xs(e.parseUnit(t,0!==i?"width":"height")):t;class Gs extends fn{static createDataAttribute(e){const t=e.gridAutoFlow;return Object.assign(e,{children:[],rowData:[],rowSpanMultiple:[],rowDirection:!t.includes("column"),dense:t.includes("dense"),templateAreas:{},row:Gs.createDataRowAttribute(),column:Gs.createDataRowAttribute(),emptyRows:[],minCellHeight:0})}static createDataRowAttribute(){return{length:0,gap:0,unit:[],unitMin:[],unitTotal:[],repeat:[],auto:[],autoFill:false,autoFit:false,name:{},fixedWidth:false,flexible:false,frTotal:0}}is(e){return e.gridElement}condition(e){return e.length>0}processNode(e){const t=Gs.createDataAttribute(e.cssAsObject("alignItems","alignContent","justifyItems","justifyContent","gridAutoFlow")),{column:i,dense:n,row:s,rowDirection:a}=t,[r,o,l,c]=a?[0,1,2,3]:[1,0,3,2],h=[],d=[],u=[];i.gap=e.parseWidth(e.css("columnGap"),false),s.gap=e.parseHeight(e.css("rowGap"),false),[e.cssInitial("gridTemplateRows",true),e.cssInitial("gridTemplateColumns",true),e.css("gridAutoRows"),e.css("gridAutoColumns")].forEach((t,n)=>{if(""!==t&&"none"!==t&&"auto"!==t){const a=0===n?s:i,{name:r,repeat:o,unit:l,unitMin:c}=a;let h,d=1;Ps.lastIndex=0;while(null!==(h=Ps.exec(t))){const t=h[1].trim();switch(n){case 0:case 1:if(t.startsWith("["))h[4].split(Es.SPACE).forEach(e=>ws(r,e).push(d));else if(t.startsWith("repeat")){let t=1;switch(h[2]){case"auto-fit":a.autoFit=true;break;case"auto-fill":a.autoFill=true;break;default:t=parseInt(h[2])||1}if(t>0){const i=[];let s;Ms.lastIndex=0;while(null!==(s=Ms.exec(h[3]))){const t=s[1];let a;if(null!==(a=Ws.exec(t))){const e=a[1];r[e]||(r[e]=[]),i.push({name:e})}else null!==(a=Ls.exec(t))?i.push({unit:zs(e,a[2],n),unitMin:zs(e,a[1],n)}):null!==(a=Fs.exec(t))?i.push({unit:zs(e,a[1],n),unitMin:"0px"}):null!==(a=Bs.exec(t))&&i.push({unit:zs(e,a[0],n)})}if(i.length)for(let e=0;e<t;++e)i.forEach(e=>{const{name:t,unit:i}=e;t?r[t].push(d):i&&(l.push(i),c.push(e.unitMin||""),o.push(true),++d)})}}else t.startsWith("minmax")?(l.push(zs(e,h[6],n)),c.push(zs(e,h[5],n)),o.push(false),++d):t.startsWith("fit-content")?(l.push(zs(e,h[7],n)),c.push("0px"),o.push(false),++d):Rs.test(t)&&(l.push(zs(e,t,n)),c.push(""),o.push(false),++d);break;case 2:case 3:(2===n?s:i).auto.push(ys(t)?xs(e.parseUnit(t,2!==n?"width":"height")):t)}}}}),a?e.sort((e,t)=>{const{left:i,top:n}=e.linear,{left:s,top:a}=t.linear;return Ts(n,a)?Ts(i,s)?0:i<s?-1:1:n<a?-1:1}):e.sort((e,t)=>{const{left:i,top:n}=e.linear,{left:s,top:a}=t.linear;return Ts(i,s)?Ts(n,a)?0:n<a?-1:1:i<s?-1:1});let f,g=false,p=false;if(!e.has("gridTemplateAreas")&&e.every(e=>"auto"===e.css("gridRowStart")&&"auto"===e.css("gridColumnStart"))){const[n,r,o,l,c]=a?["top","bottom",2,1,3]:["left","right",3,0,2];let h,d=0,f=0,m=0;a?i.autoFill&&(g=Ds(i,e.actualWidth)):s.autoFill&&(p=Ds(s,e.actualHeight)),e.each((e,i)=>{(!h||e.linear[n]>=h.linear[r]||f>0&&f===m)&&(m=Math.max(f,m),d++,f=1);const{gridRowEnd:s,gridColumnEnd:g}=e.cssAsObject("gridRowEnd","gridColumnEnd");let p=1,b=1;if(s.startsWith("span")?p=parseInt(s.split(" ")[1]):Is(s)&&(p=parseInt(s)-d),g.startsWith("span")?b=parseInt(g.split(" ")[1]):Is(g)&&(b=parseInt(g)-f),1===f&&m>0){let e=false;do{const i=new Array(m-1).fill(1);u.forEach(e=>{const t=e.placement;if(t[o]>d)for(let e=t[l];e<t[c];++e)i[e-1]=0});const n=i.length;for(let t=0,s=0,a=0;t<n;++t)if(i[t]){if(0===s&&(a=t),++s===b){f=a+1,e=true;break}}else s=0;e||(t.emptyRows[d-1]=i,d++)}while(!e)}u[i]=a?{outerCoord:e.linear.top,placement:[d,f,d+p,f+b],rowSpan:p,columnSpan:b}:{outerCoord:e.linear.left,placement:[f,d,f+b,d+p],rowSpan:p,columnSpan:b},f+=b,h=e})}else{const n=t.templateAreas;let r;g=Ds(i,e.actualWidth),p=Ds(s,e.actualHeight),e.css("gridTemplateAreas").split(/"[\s\n]+"/).forEach((e,t)=>{"none"!==e&&_s(e.trim(),'"').split(Es.SPACE).forEach((e,i)=>{if("."!==e.charAt(0)){const s=n[e];s?(s.rowSpan=t-s.rowStart+1,s.columnSpan=i-s.columnStart+1):n[e]={rowStart:t,rowSpan:1,columnStart:i,columnSpan:1}}})}),e.each((e,t)=>{const o=e.cssAsTuple("gridRowStart","gridColumnStart","gridRowEnd","gridColumnEnd"),l=[0,0,0,0];let c=-1,h=-1;if(Object.keys(n).length)for(let e=0;e<4;++e){const t=o[e];let i=n[t];if(i)switch(e){case 0:l[0]=i.rowStart+1;break;case 1:l[1]=i.columnStart+1;break;case 2:l[2]=i.rowStart+i.rowSpan+1;break;case 3:l[3]=i.columnStart+i.columnSpan+1}else{const s=Os.exec(t);if(s&&(i=n[s[1]],i))if("start"===s[2])switch(e){case 0:case 2:l[e]=i.rowStart+1;break;case 1:case 3:l[e]=i.columnStart+1}else switch(e){case 0:case 2:l[e]=i.rowStart+i.rowSpan+1;break;case 1:case 3:l[e]=i.columnStart+i.columnSpan+1}}}if(0===l[0]||0===l[1]||0===l[2]||0===l[3]){const e=(e,t,i,n)=>{if(Is(e)){const i=parseInt(e);if(i>0)return l[t]=i,true;if(i<0&&t>=2){const e=t-2;return l[l[e]>0?t:e]=i+n+2,true}}else if(e.startsWith("span")){const s=parseInt(e.split(" ")[1]);if(s===n&&r)if(a){if(!i){const e=r[2];e>0&&0===l[0]&&(l[0]=e)}}else if(i){const e=r[3];e>0&&0===l[1]&&(l[1]=e)}const d=l[t-2];switch(t){case 0:{const e=o[2];if(Is(e)){const t=parseInt(e);l[0]=t-s,l[2]=t}break}case 1:{const e=o[3];if(Is(e)){const t=parseInt(e);l[1]=t-s,l[3]=t}break}case 2:case 3:d>0&&(l[t]=d+s)}return i?-1===c&&(c=s):-1===h&&(h=s),true}return false};let t,n;for(let a=0;a<4;++a){const r=o[a];if("auto"!==r&&0===l[a]){const d=a%2==0,u=d?s:i;if(!e(r,a,d,Math.max(1,u.unit.length))){const e=r.split(" ");1===e.length?(e[1]=e[0],e[0]="1"):Is(e[0])&&(d?t?c=parseInt(e[0])-parseInt(t[0]):t=e:n?h=parseInt(e[0])-parseInt(n[0]):n=e);const i=u.name[e[1]];if(i){const t=parseInt(e[0]);t<=i.length&&(l[a]=i[t-1]+(e[1]===o[a-2]?1:0))}}}}}r||(0===l[0]&&(l[0]=1),0===l[1]&&(l[1]=1));const[d,f,g,p]=l;-1===c?c=d>0&&g>0?g-d:1:d>0&&0===g&&(l[2]=d+c),-1===h?h=f>0&&p>0?p-f:1:f>0&&0===p&&(l[3]=d+h),0===l[2]&&l[0]>0&&(l[2]=l[0]+c),0===l[3]&&l[1]>0&&(l[3]=l[1]+h),u[t]={outerCoord:a?e.bounds.top:e.bounds.left,placement:l,rowSpan:c,columnSpan:h},r=l})}{const[t,n]=a?[i,e.box.top]:[s,e.box.left];let r=t.unit,o=1,l=0;u.forEach(e=>{if(e){const[t,i,s]=a?[e.columnSpan,1,3]:[e.rowSpan,0,2],r=e.placement;r.some(e=>e>0)&&(o=Math.max(o,t,r[i],r[s]-1)),Ts(e.outerCoord,n)&&(l+=t)}});let c=r.length;if(f=Math.max(o,l,a&&!g||!a&&!p?c:0),t.length=f,c<f)if(t.autoFill||t.autoFit)0===c&&(r.push("auto"),t.unitMin.push(""),t.repeat.push(true)),r=Vs(t,r),t.unit=r,t.unitMin=Vs(t,t.unitMin);else{const e=t.auto,i=e.length;if(i){let t=0;while(r.length<f)t===i&&(t=0),r.push(e[t++])}}else(t.autoFit||t.autoFill&&e.blockStatic&&(a&&!e.hasWidth&&!e.hasPX("maxWidth",false)||!a&&!e.hasHeight))&&(r.length=f);let h=1,d=0,m=0;if(r.forEach(e=>{vs(e)?h-=parseFloat(e)/100:Gs.isFr(e)?d+=parseFloat(e):"auto"===e&&m++}),t.flexible=h<1||d>0,h<1)if(d>0){c=r.length;for(let e=0;e<c;++e){const t=r[e];Gs.isFr(t)&&(r[e]=h*(parseFloat(t)/d)+"fr")}}else if(1===m){const e=r.findIndex(e=>"auto"===e);-1!==e&&(r[e]=bs(h))}}if(e.each((e,i)=>{const{placement:s,rowSpan:g,columnSpan:p}=u[i],[m,b]=a?[g,p]:[p,g];while(0===s[0]||0===s[1]){const e=s.slice(0);if(0===e[r]){let t=h.length;for(let i=n?0:Us(d),s=0,a=-1;i<t;++i){if(-1!==Ys(f,b,d[i])){if(0===s&&(a=i,t=Math.max(t,i+m)),++s===m){e[r]=a+1;break}}else s=0,a=-1,t=h.length}}if(0===e[r])s[r]=h.length+1,0===s[o]&&(s[o]=1);else if(0===e[o]){0===e[l]&&(e[l]=e[r]+m);const t=[],i=e[r]-1,n=e[l]-1;let s=i;while(s<n){const e=h[s++];if(e){if(!(e.reduce((e,t)=>e+(t?1:0),0)+b<=f))break;{const i=[];let n=0;for(let t=0,s=-1;t<f;++t){const a=e[t];a||(-1===s&&(s=t),n++),(a||t===f-1)&&(n>=b&&i.push([s,s+n]),s=-1,n=0)}if(!i.length)break;t.push(i)}}else t.push([[0,-1]])}const a=t.length;if(a){const r=t[0];if(-1===r[0][1])e[o]=1;else if(a===n-i)if(a>1)e:for(const i of r)for(s=i[0];s<i[1];++s){let i=1;while(i<a){const n=t[i++],a=n.length;let r=0;while(r<a){const t=n[r++];if(s>=t[0]&&(-1===t[1]||s+b<=t[1])){e[o]=s+1;break e}}}}else e[o]=r[0][0]+1}}const t=e[r];if(t>0){const i=e[o];i>0&&(s[r]=t,s[o]=i)}}if(0===s[l]&&(s[l]=s[r]+m),0===s[c]&&(s[c]=s[o]+b),((e,t,i)=>{if(t.every(e=>e>0)){for(let s=t[r]-1;s<t[l]-1;++s){const a=ws(h,s);let r=d[s],l=t[o]-1;if(!r){if(r=new Array(i).fill(0),!n){let e=0;while(e<l)r[e++]=1}d[s]=r}while(l<t[c]-1)ws(a,l).push(e),r[l++]=1}return true}return false})(e,s,f)){const[i,r,o,l]=s,c=i-1,h=o-i,u=r-1;if(!n){const e=a?c:u;if(e>0){const t=d[e-1];let i=0;while(i<f)t[i++]=1}}if(h>1){const e=t.rowSpanMultiple,i=c+h;let n=c;while(n<i)e[n++]=true}e.data(ks,"cellData",{rowStart:c,rowSpan:h,columnStart:u,columnSpan:l-r})}}),h.length){let n;if(a)n=h,t.rowData=h;else{n=t.rowData;const e=h.length;for(let t=0;t<e;++t){const e=h[t],i=e.length;let s=0;while(s<i)ws(n,s)[t]=e[s++]}}const r=a?s.unitTotal:i.unitTotal,o=t.children,l=i.unit.length;if(n.forEach(e=>{const t=e.length;let i=0;while(i<t){const t=e[i];let n=r[i]||0;if(t){let e=0;t.forEach(t=>{o.includes(t)||(e=Math.max(e,a?t.bounds.height:t.bounds.width),o.push(t))}),n+=e}r[i++]=n}}),o.length===e.length){const{gap:r,unit:c}=s,{gap:h,unit:d}=i,u=Math.max(c.length,n.length),f=new Array(u).fill(0),g=new Array(l).fill(0),p=new Set;s.length=u,i.length=l;let m=0;for(let e=0;e<u;++e){const i=n[e],s=c[e];if(i)for(let n=0;n<l;++n){const s=i[n];s?s.forEach(t=>{if(!p.has(t)){const{columnSpan:i,rowSpan:s}=t.data(ks,"cellData"),a=n+i-1,o=e+s-1;if(h>0&&a<l-1&&t.modifyBox(4,h),r>0&&o<u-1&&t.modifyBox(8,r),1===s){const i=t.bounds.height,n=f[e];t.hasHeight?n<0?i>Math.abs(n)&&(f[e]=i):f[e]=Math.max(i,n):i>Math.abs(n)&&(f[e]=-i),m=Math.max(i,m)}if(1===i){const e=t.bounds.width,i=g[n];t.hasWidth?i<0?e>Math.abs(i)&&(g[n]=e):g[n]=Math.max(e,i):e>Math.abs(i)&&(g[n]=-e)}p.add(t)}}):a||(t.emptyRows[n]=[Number.POSITIVE_INFINITY])}else f[e]=parseFloat(s)||0,a&&(t.emptyRows[e]=[Number.POSITIVE_INFINITY])}t.minCellHeight=m,a?(e.hasPX("width",false)&&(i.fixedWidth=true,i.flexible=false,Hs(e.actualWidth,h,l,d,g)),e.hasHeight&&!Gs.isAligned(e)&&Xs(s.unit,u)):(e.hasPX("height",false)&&(s.fixedWidth=true,s.flexible=false,Hs(e.actualHeight,r,u,c,f)),e.hasWidth&&!Gs.isJustified(e)&&Xs(i.unit,l)),e.retain(o),e.cssSort("zIndex"),e.cssTry("display","block")&&(e.each(e=>{const{width:t,height:i}=e.boundingClientRect;e.data(ks,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i}))}),e.cssFinally("display")),e.data(ks,"mainData",t)}}}}Gs.isFr=e=>/\dfr$/.test(e),Gs.isPx=e=>Ss.PX.test(e),Gs.isAligned=e=>e.hasHeight&&/^space-|center|flex-end|end/.test(e.css("alignContent")),Gs.isJustified=e=>(e.blockStatic||e.hasWidth)&&/^space-|center|flex-end|end|right/.test(e.css("justifyContent"));const{withinRange:js}=squared.lib.util,qs=yt.FLEXBOX;class $s extends fn{static createDataAttribute(e,t){return Object.assign(Object.assign({},e.flexdata),{rowCount:0,columnCount:0,children:t})}is(e){return e.flexElement}condition(e){return e.length>0}processNode(e){const t=this.controller,[i,n]=e.partition(e=>e.pageFlow),s=$s.createDataAttribute(e,i);if(e.cssTry("align-items","start")&&(e.cssTry("justify-items","start")&&(i.forEach(e=>{if(e.cssTry("align-self","start")){if(e.cssTry("justify-self","start")){const{width:t,height:i}=e.boundingClientRect;e.data(qs,"boundsData",Object.assign(Object.assign({},e.bounds),{width:t,height:i})),e.cssFinally("justify-self")}e.cssFinally("align-self")}}),e.cssFinally("justify-items")),e.cssFinally("align-items")),s.wrap){const[a,r,o,l]=s.row?["top","left","right","intersectY"]:["left","top","bottom","intersectX"];i.sort((e,t)=>{const i=e.linear,n=t.linear;if(!e[l](t.bounds,"bounds"))return i[a]<n[a]?-1:1;{const e=i[r],t=n[r];if(!js(e,t))return e<t?-1:1}return 0});let c=i[0],h=[c];const d=[h];let u=i.length,f=1;while(f<u){const e=i[f++];c[l](e.bounds,"bounds")?h.push(e):(c=e,h=[e],d.push(h))}e.clear();let g,p=0;if(u=d.length,f=0,u>1){const i=e.box[o];while(f<u){const n=d[f];p=Math.max(n.length,p);const s=t.createNodeGroup(n[0],n,{parent:e,delegate:true,cascade:true});s.addAlign(128),s.box[o]=i,s.containerIndex=f++}g=u}else{const t=d[0];e.retain(t),p=t.length;while(f<p)t[f].containerIndex=f++;g=p}const m=n.length;f=0;while(f<m)n[f].containerIndex=g+f++;e.concat(n),e.sort(),s.row?(s.rowCount=u,s.columnCount=p):(s.rowCount=p,s.columnCount=u)}else{if(i.some(e=>0!==e.flexbox.order)){const[e,t]=s.reverse?[-1,1]:[1,-1];i.sort((i,n)=>{const s=i.flexbox.order,a=n.flexbox.order;return s===a?0:s>a?e:t})}s.row?(s.rowCount=1,s.columnCount=e.length):(s.rowCount=e.length,s.columnCount=1)}e.data(qs,"mainData",s)}}const Ks=squared.lib,{aboveRange:Qs,belowRange:Js,objectMap:Zs,safeNestedArray:ea,withinRange:ta}=Ks.util,ia=yt.GRID;function na(e,t){const i=t.bounds.top,n=e.length;let s=0;while(s<n){const t=e[s++].findIndex(e=>{const t=e.bounds.top;return ta(i,t)||Math.ceil(i)>=t&&i<Math.floor(e.bounds.bottom)});if(-1!==t)return t}return-1}class sa extends fn{static createDataCellAttribute(){return{rowSpan:0,columnSpan:0,index:-1,cellStart:false,cellEnd:false,rowEnd:false,rowStart:false}}condition(e){if(e.length>1&&!e.layoutElement&&"TABLE"!==e.tagName&&!e.has("listStyle")){if("table"===e.display)return e.every(e=>"table-row"===e.display&&e.every(e=>"table-cell"===e.display))||e.every(e=>"table-cell"===e.display);if(0===e.percentWidth||!e.find(e=>e.percentWidth>0,{cascade:true})){let t=false,i=0;for(const n of e){if(!n.pageFlow||n.visibleStyle.background||!n.blockStatic||0!==n.percentWidth||n.autoMargin.leftRight||n.autoMargin.left)return false;n.length>1&&(t=true),"list-item"!==n.display||n.has("listStyleType")||i++}return i===e.length||t&&e.every(e=>e.length>0&&$t.linearData(e.children).linearX)}}return false}processNode(e){var t;const i=[],n={};let s=[];e.each(e=>{e.each(e=>{e.visible&&ea(n,Math.floor(e.linear.left)).push(e)})});const a=Object.keys(n),r=a.length;if(r){let o=-1;for(let e=0;e<r;++e){const t=n[a[e]];if(0===e)o=r;else if(o!==t.length){o=-1;break}}if(-1!==o)s=Zs(a,e=>n[e]);else{const o=[];for(let e=0;e<r;++e){const t=n[a[e]],i=t.length;if(0===e&&0===i)return;o[e]=0===e?0:o[e-1];for(let n=0;n<i;++n){const a=t[n],{left:r,right:l}=a.linear;if(0===e||Qs(r,o[e-1])){const t=ea(s,e);if(0===e||s[0].length===i)t[n]=a;else{const e=na(s,a);if(-1===e)return;t[e]=a}}else{const e=s[s.length-1];if(e){let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(e.forEach(e=>{const n=e.linear;t=Math.min(n.left,t),i=Math.max(n.right,i)}),Math.floor(r)>Math.ceil(t)&&Math.floor(l)>Math.ceil(i)){const t=na(s,a);if(-1!==t){let i=s.length-1;while(i>=0){const n=s[i--];if(n){n[t]||(e.length=0);break}}}}}}o[e]=Math.max(l,o[e])}}const l=o.length;for(let e=0,t=-1;e<l;++e)s[e]?-1!==t&&(o[t]=o[e-1],t=-1):-1===t?t=e-1:e===l-1&&(o[t]=o[e]);for(let e=0;e<s.length;++e)(null===(t=s[e])||void 0===t?void 0:t.length)?i.push(o[e]):s.splice(e--,1);const c=s.reduce((e,t)=>Math.max(e,t.length),0);for(let e=0;e<c;++e){const t=s.length;let i=0;while(i<t){const t=s[i++];t[e]||(t[e]={spacer:1})}}i.push(e.box.right)}}const o=s.length;if(o>1&&s[0].length===e.length){const t=[],n=new Set;for(let e=0,a=0;e<o;++e){const r=s[e],l=r.length;for(let c=0,h=0,d=0;c<l;++c){const u=r[c],f=ea(t,c);if(u.spacer)1===u.spacer&&d++;else{const t=Object.assign(sa.createDataCellAttribute(),u.data(ia,"cellData"));let g=1,p=1+d,m=e+1;while(m<o){const e=s[m++][c];if(1!==e.spacer)break;p++,e.spacer=2}if(1===p){m=c+1;while(m<l){const e=r[m++];if(1!==e.spacer)break;g++,e.spacer=2}}if(i.length){const s=Math.min(e+(p-1),i.length-1);u.actualParent.naturalChildren.forEach(e=>{if(!n.has(e)&&e.visible&&!e.rendered){const{left:n,right:a}=e.linear;Qs(n,u.linear.right)&&Js(a,i[s])&&ea(t,"siblings").push(e)}})}t.rowSpan=g,t.columnSpan=p,t.rowStart=0==h++,t.rowEnd=p+e===o,t.cellStart=0==a++,t.cellEnd=t.rowEnd&&c===l-1,t.index=e,d=0,u.data(ia,"cellData",t),f.push(u),n.add(u)}}}e.each(e=>e.hide()),e.clear(),t.forEach(t=>t.forEach(t=>t.parent=e)),e.tableElement&&"collapse"===e.css("borderCollapse")&&e.resetBox(480),e.data(ia,"columnCount",o)}}}const aa=squared.lib,{convertListStyle:ra}=aa.css,{isNumber:oa}=aa.util,la=e=>e.backgroundImage&&!e.backgroundRepeat;class ca extends fn{condition(e){const t=e.length;if(t){const i=new Set;let n=true,s=true,a=true,r=true,o=false;const l=e.children;for(let e=0;e<t;++e){const c=l[e],h=c.css("listStyleType");if(("list-item"===c.display&&("none"!==h||c.innerBefore)||c.marginLeft<0&&"none"===h&&la(c.visibleStyle))&&(o=true),(a||r)&&(c.floating?(i.add(c.float),r=false):0===e||e===t-1||c.blockStatic||l[e-1].blockStatic&&l[e+1].blockStatic?a=false:(a=false,r=false)),c.blockStatic||(n=false),c.inlineVertical||(s=false),!(n||s||r||a))return false}return o&&(n||s||a&&1===i.size||r)}return false}processNode(e){const t="OL"===e.tagName;let i=t&&e.toElementInt("start")||1;e.each(e=>{const n=ca.createDataAttribute(),s=e.css("listStyleType"),a="list-item"===e.display;if(a||""!==s&&"none"!==s||la(e.visibleStyle)){if(e.has("listStyleImage"))n.imageSrc=e.css("listStyleImage");else{if(t&&a&&"LI"===e.tagName){const t=e.attributes.value;oa(t)&&(i=Math.floor(parseFloat(t)))}let r=ra(s,i);if(""===r)switch(s){case"disc":r="●";break;case"square":r="■";break;case"none":{let t="",i="";e.visibleStyle.backgroundRepeat||(t=e.backgroundImage,i=e.css("backgroundPosition")),""!==t&&"none"!==t&&(n.imageSrc=t,n.imagePosition=i,e.exclude({resource:Et.IMAGE_SOURCE}));break}default:r="○"}else r+=".";n.ordinal=r}a&&++i}e.data(yt.LIST,"mainData",n)})}}ca.createDataAttribute=()=>({ordinal:"",imageSrc:"",imagePosition:""});const ha=squared.lib,{assignRect:da}=ha.dom,{convertFloat:ua,withinRange:fa}=ha.util,ga={relative:true};const{getBackgroundPosition:pa,resolveURL:ma}=squared.lib.css,ba=/^0[a-z%]+|left|start|top/;const xa=squared.lib,{formatPercent:ya,formatPX:va,getInheritedStyle:Ea,getStyle:Sa,isLength:Ia,isPercent:wa}=xa.css,{getNamedItem:_a}=xa.dom,{maxArray:Ta}=xa.math,{isNumber:ka,replaceMap:Na,safeNestedArray:Aa,withinRange:Ca}=xa.util,Ra=yt.TABLE,Pa=/rgba\(0, 0, 0, 0\)|transparent/;function Ma(e,t,i){i.percent=Math.round(t.bounds.width/e.box.width*100)+"%",i.expand=true}function Ba(e,t,i){const n=t+"Style";e.ascend({including:i}).some(i=>{if(i.has(n)){const s=t+"Color",a=t+"Width";return e.css("border","inherit"),e.cssApply(i.cssAsObject(n,s,a)),e.unsetCache(a),true}return false})}function La(e){e.exclude({resource:Et.ALL}),e.hide()}const Fa=e=>e.css("width",va(e.bounds.width),true);class Wa extends fn{static createDataAttribute(e){return{layoutType:0,rowCount:0,columnCount:0,layoutFixed:"fixed"===e.css("tableLayout"),borderCollapse:"collapse"===e.css("borderCollapse"),expand:false}}processNode(e){const t=Wa.createDataAttribute(e),i=[];let n,s,a=[];const r=e=>{e&&(e.cascade(t=>{switch(t.tagName){case"TH":case"TD":t.inherit(e,"styleMap"),t.unsetCache("visibleStyle")}return false}),a=a.concat(e.children),La(e))};e.each(e=>{switch(e.tagName){case"THEAD":s?La(e):s=e;break;case"TBODY":i.push(e);break;case"TFOOT":n?La(e):n=e}}),r(s),i.forEach(e=>{a=a.concat(e.children),La(e)}),r(n);const o=e.hasWidth,l=t.borderCollapse,[c,h]=l?[0,0]:Na(e.css("borderSpacing").split(" "),(t,i)=>0===i?e.parseWidth(t):e.parseHeight(t)),d=c>1?Math.round(c/2):c,u=h>1?Math.round(h/2):h,f=e.element.querySelector("COLGROUP"),g=e.find(e=>"CAPTION"===e.tagName),p="bottom"===e.css("captionSide"),m=[],b=[],x=[],y=[],v=a.length;let E=0;for(let i=0;i<v;++i){const n=a[i];m[i]=c;const s=x[i]||[];x[i]=s,n.each((n,a)=>{const r=n.element,o=r.rowSpan;let l=r.colSpan,g=0;while(s[g])g++;const p=i+o;let E=i;while(E<p){const e=Aa(x,E++),t=g+l;for(let i=g,s=0;i<t;++i){if(e[i]){l=s;break}e[i]=n,s++}}if(!n.hasPX("width")){const e=_a(r,"width");wa(e)?n.css("width",e,true):ka(e)&&n.css("width",va(parseFloat(e)),true)}if(!n.hasPX("height")){const e=_a(r,"height");wa(e)?n.css("height",e):ka(e)&&n.css("height",va(parseFloat(e)))}if(""===n.cssInitial("verticalAlign")&&n.css("verticalAlign","middle",true),!n.visibleStyle.backgroundImage&&!n.visibleStyle.backgroundColor)if(f){const{backgroundImage:e,backgroundColor:t}=Sa(f.children[a+1]);e&&"none"!==e&&n.css("backgroundImage",e,true),t&&!Pa.test(t)&&(n.css("backgroundColor",t),n.setCacheValue("backgroundColor",t))}else{let e=Ea(r,"backgroundImage",/none/,"TABLE");""!==e&&n.css("backgroundImage",e,true),e=Ea(r,"backgroundColor",Pa,"TABLE"),""!==e&&(n.css("backgroundColor",e),n.setCacheValue("backgroundColor",e))}switch(n.tagName){case"TD":{const e=n.parent;0===n.borderTopWidth&&Ba(n,"borderTop",e),0===n.borderRightWidth&&Ba(n,"borderRight",e),0===n.borderBottomWidth&&Ba(n,"borderBottom",e),0===n.borderLeftWidth&&Ba(n,"borderLeft",e);break}case"TH":""===n.cssInitial("textAlign")&&n.css("textAlign","center"),0===n.borderTopWidth&&Ba(n,"borderTop",e),0===n.borderBottomWidth&&Ba(n,"borderBottom",e)}const S=n.cssInitial("width"),I=void 0===y[g]||"auto"===y[g],w=n.bounds.width;if(0===i||I||!t.layoutFixed)if(""===S||"auto"===S)void 0===y[g]?(y[g]=S||"0px",b[g]=0):i===v-1&&I&&0===b[g]&&(b[g]=w);else{const e=wa(S),t=Ia(y[g]);(I||w<b[g]||w===b[g]&&(t&&e||e&&wa(y[g])&&n.parseWidth(S)>=n.parseWidth(y[g])||t&&Ia(S)&&n.parseWidth(S)>n.parseWidth(y[g])))&&(y[g]=S),(I||1===r.colSpan)&&(b[g]=w)}(n.length||n.inlineText)&&(m[i]+=w+c),d>0&&(n.modifyBox(16,0===g?c:d),n.modifyBox(4,0===a?d:c)),u>0&&(n.modifyBox(2,0===i?h:u),n.modifyBox(8,i+o<v?u:h)),n.data(Ra,"cellData",{colSpan:l,rowSpan:o})}),La(n),E=Math.max(E,s.length)}e.hasPX("width",false)&&y.some(e=>wa(e))&&Na(y,(e,t)=>{if("auto"===e){const e=b[t];if(e>0)return va(e)}return e});let S=false,I=0;if(y.every(e=>wa(e))){if(y.reduce((e,t)=>e+parseFloat(t),0)>1){let e=100;Na(y,t=>{const i=parseFloat(t);return e<=0?t="0px":e-i<0&&(t=ya(e/100)),e-=i,t})}e.hasWidth||(t.expand=true),S=true}else if(y.every(e=>Ia(e))){const i=y.reduce((e,t)=>e+parseFloat(t),0);e.hasWidth&&(i<e.width?Na(y,e=>"0px"!==e?parseFloat(e)/i*100+"%":e):i>e.width&&(e.css("width","auto"),t.layoutFixed||e.cascade(e=>(e.css("width","auto"),false)))),t.layoutFixed&&!e.hasPX("width")&&e.css("width",va(e.bounds.width))}t.layoutType=(()=>{if(y.length>1){if(I=y.reduce((e,t)=>e+(wa(t)?parseFloat(t):0),0),t.layoutFixed&&y.reduce((e,t)=>e+(Ia(t)?parseFloat(t):0),0)>=e.actualWidth)return 4;if(y.length>1&&y.some(e=>wa(e))||y.every(e=>Ia(e)&&"0px"!==e))return 3;if(y.every(e=>e===y[0])){if(e.find(e=>e.hasHeight,{cascade:true}))return t.expand=true,3;if("auto"===y[0]){if(e.hasWidth)return 3;{const t=e.cascade(e=>"TD"===e.tagName);return t.length&&t.every(e=>Ca(e.bounds.width,t[0].bounds.width))?0:3}}if(e.hasWidth)return 2}if(y.every(e=>"auto"===e||Ia(e)&&"0px"!==e))return e.hasWidth||(t.expand=true),1}return 0})(),e.clear(),g&&(g.hasWidth||(g.textElement?g.hasPX("maxWidth")||g.css("maxWidth",va(g.bounds.width)):g.bounds.width>Ta(m)&&Fa(g)),g.cssInitial("textAlign")||g.css("textAlign","center"),g.data(Ra,"cellData",{colSpan:E}),p||(g.parent=e));let w=0;while(w<v){const i=x[w++],n=i.length;let s=0;while(s<n){const n=i[s],a=n.data(Ra,"cellData"),r=y[s];if(s+=a.colSpan,!a.placed){if(r)switch(t.layoutType){case 0:break;case 3:"auto"===r?I>=1?(Fa(n),a.exceed=!o,a.downsized=true):Ma(e,n,a):wa(r)?S?(a.percent=r,a.expand=true):Fa(n):Ia(r)&&parseInt(r)>0?n.bounds.width>=parseInt(r)?(Fa(n),a.expand=false,a.downsized=false):t.layoutFixed?(Ma(e,n,a),a.downsized=true):(Fa(n),a.expand=false):(n.hasPX("width",false)&&!n.percentWidth||Fa(n),a.expand=false);break;case 2:Ma(e,n,a);break;case 1:"auto"===r?a.flexible=true:(t.layoutFixed?a.downsized=true:Fa(n),a.expand=false);break;case 4:Ia(r)||n.hide()}a.placed=true,n.parent=e}}if(n<E){const e=i[n-1].data(Ra,"cellData");e&&(e.spaceSpan=E-n)}}if(g&&p&&(g.parent=e),t.borderCollapse){const t=e.cssAsObject("borderTopColor","borderTopStyle","borderTopWidth"),i=e.cssAsObject("borderRightColor","borderRightStyle","borderRightWidth"),n=e.cssAsObject("borderBottomColor","borderBottomStyle","borderBottomWidth"),s=e.cssAsObject("borderLeftColor","borderLeftStyle","borderLeftWidth"),a=parseInt(t.borderTopWidth),r=parseInt(i.borderRightWidth),o=parseInt(n.borderBottomWidth),l=parseInt(s.borderLeftWidth);let c=false,h=false,d=false,u=false;for(w=0;w<v;++w){const e=x[w];for(let f=0;f<E;++f){const g=e[f];if("visible"===(null==g?void 0:g.css("visibility"))){if(0===w&&(g.borderTopWidth<a?(g.cssApply(t),g.unsetCache("borderTopWidth")):c=true),w>=0&&w<v-1){const e=x[w+1][f];"visible"===(null==e?void 0:e.css("visibility"))&&e!==g&&(g.borderBottomWidth>e.borderTopWidth?e.css("borderTopWidth","0px",true):g.css("borderBottomWidth","0px",true))}if(w===v-1&&(g.borderBottomWidth<o?(g.cssApply(n),g.unsetCache("borderBottomWidth")):d=true),0===f&&(g.borderLeftWidth<l?(g.cssApply(s),g.unsetCache("borderLeftWidth")):u=true),f>=0&&f<E-1){const t=e[f+1];"visible"===(null==t?void 0:t.css("visibility"))&&t!==g&&(g.borderRightWidth>=t.borderLeftWidth?t.css("borderLeftWidth","0px",true):g.css("borderRightWidth","0px",true))}f===E-1&&(g.borderRightWidth<r?(g.cssApply(i),g.unsetCache("borderRightWidth")):h=true)}}}(c||h||d||u)&&e.cssApply({borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"},true)}t.rowCount=v+(g?1:0),t.columnCount=E,e.data(Ra,"mainData",t)}}const Oa=squared.lib,{isLength:Va}=Oa.css,{convertFloat:Da}=Oa.util;var Ha;const Xa=squared.lib,{formatPX:Ya}=Xa.css,{maxArray:Ua}=Xa.math,{getElementCache:za}=Xa.session,{iterateReverseArray:Ga}=Xa.util,ja="html"===(null===(Ha=document.doctype)||void 0===Ha?void 0:Ha.name),qa=["marginTop","borderTopWidth","paddingTop",2],$a=["marginBottom","borderBottomWidth","paddingBottom",8];function Ka(e,t,i,n=0){let s;switch(t){case 2:s=e.actualRect("top")-i;break;case 16:s=e.actualRect("left")-i;break;case 8:s=i-e.actualRect("bottom");break;default:s=0}s-=n,s>0&&(e.renderAs||e).modifyBox(t,s)}function Qa(e,t,i){if(!i||Ja(t,true)){const[n,s,a,r]=i?qa:$a;if(0===e[s])if(0===e[a]){let o=t;while(ja&&0===o[n]&&0===o[s]&&0===o[a]&&sr(o))if(i){const e=o.firstStaticChild;if(!Ja(e,i))break;o=e}else{const e=er(o);if(!e)break;o=e}const l=e[n],c=o[n],h=(e,t)=>{if(1===e.getBox(r)[0]){const i=e.registerBox(r);if(i){const[e,n]=i.getBox(r);return t=Math.max(n,t),void(1===e?i.setBox(r,{adjustment:t}):i.setCacheValue("marginTop",t))}}e.setBox(r,{reset:1,adjustment:t})};if(l>=0&&c>=0){const s=o.bounds.height;let a=false;if(!ja&&0===l&&c>0&&""===o.cssInitial(n))a=true;else{const n=l>=c;if(0===s&&n&&o.textEmpty&&0===o.extensions.length)o.hide({collapse:true});else{const s=o.registerBox(r);if(s){const t=s.getBox(r)[1];t>0&&(t>l&&h(e,t),s.setBox(r,{reset:1,adjustment:0}))}else if(0===o.getBox(r)[0])if(n)a=c>0;else if(e.documentBody){if(ir(e,r),i&&(e.bounds.top>0&&(e.bounds.top=0,e.unset("box"),e.unset("linear")),e.layoutVertical)){const i=e.renderChildren[0];(o.positionStatic||o.top>=0&&!o.hasPX("bottom"))&&i!==t.outerMostWrapper&&(h(i,c),h(o,0),a=true)}}else h(e,c),a=true}}if(a){if(ir(o,r),!i&&o.floating){const e=o.bounds;o.actualParent.naturalChildren.forEach(t=>{t.floating&&t!==o&&t.intersectY(e,"bounds")&&ir(t,r)})}0!==s||o.every(e=>e.floating||!e.pageFlow)||ir(o,i?8:2)}}else l<0&&c<0&&(i||(c<l&&h(e,c),ir(o,r)))}else if(0===t[n]&&0===t[s]&&sr(t)){let r=true;do{const o=i?t.firstStaticChild:t.lastStaticChild;if(!o||0!==o[n]||0!==o[s]||o.visibleStyle.background||!sr(o))break;{const n=o[a];if(n>0){n>=e[a]?e.setBox(i?32:128,{reset:1}):r&&e.modifyBox(i?32:128,-n,false);break}Ja(o,i)||(r=false),t=o}}while(true)}}}function Ja(e,t){if(null===e||!e.styleElement||e.lineBreak)return false;if(e.blockStatic)return true;if(!e.floating){switch(e.display){case"table":case"list-item":return true}if(void 0!==t){if(t){const t=e.firstStaticChild;return Ja(t)&&ar(t,false)}{const t=e.lastStaticChild;return Ja(t)&&rr(t,false)}}}return false}function Za(e,t,i,n){let s=Number.POSITIVE_INFINITY;if(e.nodeGroup&&e.some(e=>e.floating)&&e.renderChildren.forEach(t=>{if(!t.floating){const i=t.linear.top;i<s&&(s=i,e=t)}}),s===Number.POSITIVE_INFINITY&&(s=e.linear.top),n){const a=Math.max(n.linear.top,t.linear.bottom);if(a<s)return[s-a-i,e]}return[Math.round(s-t.linear.bottom-i),e]}function er(e){let t;if(e.floatContainer){let i;const n=e.naturalChildren;let s=n.length-1;while(s>=0){const a=n[s--];if(a.floating)if(t){if(a.linear.bottom>=t.linear.bottom){t=a;break}}else{const t=a.linear.bottom;i?t>i.linear.bottom&&(i=a):Math.ceil(a.linear.bottom)>=e.box.bottom&&(i=a)}else if(!t){if(i&&i.linear.bottom>a.linear.bottom){t=i;break}t=a}}t||(t=i)}else t=e.lastStaticChild,(!Ja(e,false)||e.hasHeight&&Math.floor(t.linear.bottom)<e.box.bottom)&&(t=void 0);return t}function tr(e){for(const t of[e.cssInitial("overflowX"),e.cssInitial("overflowY")])switch(t){case"auto":case"hidden":case"overlay":return true}return false}function ir(e,t,i){e.setBox(t,{reset:1}),i&&e.registerBox(t,i)}const nr=(e,t)=>e.css("minHeight",Ya(Math.max(t,e.hasPX("minHeight",false)?e.parseHeight(e.css("minHeight")):0))),sr=(e,t=true)=>(!t&&e.blockStatic||t&&e.length>0&&!e.floating)&&!e.layoutElement&&!e.tableElement&&"FIELDSET"!==e.tagName,ar=(e,t)=>!e.hasHeight&&0===e.borderBottomWidth&&0===e.paddingBottom&&sr(e,t),rr=(e,t)=>!e.hasHeight&&0===e.borderTopWidth&&0===e.paddingTop&&sr(e,t);const or={Accessibility:class lr extends fn{},Column:class cr extends fn{is(e){return e.blockDimension&&"table"!==e.display&&!e.layoutElement&&e.length>1}condition(e){return e.has("columnCount")||e.hasPX("columnWidth")}processNode(e,t){let i=[];const n=[i];let s=Number.POSITIVE_INFINITY,a=false;e.each(e=>{var t;"all"===e.css("columnSpan")?(i.length?n.push([e]):i.push(e),i=[],n.push(i)):(e.textElement&&(null===(t=e.textBounds)||void 0===t?void 0:t.overflow)&&(s=NaN),e.multiline?a=true:isNaN(s)||(s=Math.min(e.bounds.width,s)),i.push(e))}),0===i.length&&n.pop();const[r,o,l]=e.cssAsTuple("columnRuleStyle","columnRuleWidth","columnRuleColor"),c=e.box.width,h=e.toInt("columnCount"),d=e.parseWidth(e.css("columnWidth"));let u,f=e.parseWidth(e.css("columnGap"));const g=()=>isNaN(h)&&d>0?c/(d+f):Number.POSITIVE_INFINITY;f>0?u=Math.floor(g()):(f=(d>0&&!isNaN(s)&&s!==Number.POSITIVE_INFINITY?Math.max(s-d,0):0)+16,u=Math.ceil(g())),e.data(yt.COLUMN,"mainData",{rows:n,columnCount:h,columnWidth:d,columnGap:f,columnSized:u,columnRule:{borderLeftStyle:r,borderLeftWidth:o,borderLeftColor:l},boxWidth:t.actualBoxWidth(c),multiline:a})}},CssGrid:Gs,Flexbox:$s,Grid:sa,List:ca,Relative:class hr extends fn{is(e){return e.positionRelative&&!e.autoPosition||0!==ua(e.verticalAlign)}condition(){return true}processNode(e){return{subscribe:true}}postOptimize(e){const t=e.renderParent,i=e.baselineAltered?0:ua(e.verticalAlign);let n=0,s=0,a=0,r=0;if(e.hasPX("top")?n=e.top:a=e.bottom,e.hasPX("left")?r=e.left:s=e.right,t.support.positionTranslation){let t=0,o=0;0!==r?t=r:0!==s&&(t=-s),0!==n?o=n:0!==a&&(o=-a),0!==i&&(o-=i),0!==t&&e.translateX(t,ga),0!==o&&e.translateY(o,ga)}else{let o=e;if((0!==n||0!==a||0!==i)&&t.layoutHorizontal&&t.support.positionRelative&&0===e.renderChildren.length){const i=this.application;o=e.clone(i.nextId,true,true),o.baselineAltered=true,e.hide({hidden:true}),this.cache.append(o,false);const n=new Qt(t,o,o.containerType,o.alignmentType),s=t.renderChildren.findIndex(t=>t===e);if(-1!==s&&(n.renderIndex=s+1),i.addLayout(n),e.parseUnit(e.css("textIndent"))<0){const i=e.documentId;t.renderEach(e=>{e.alignSibling("topBottom")===i?e.alignSibling("topBottom",o.documentId):e.alignSibling("bottomTop")===i&&e.alignSibling("bottomTop",o.documentId)})}if(e.baselineActive&&!e.baselineAltered)for(const i of t.horizontalRows||[t.renderChildren])if(i.includes(e)){const t=i.filter(t=>t.positionRelative&&t.length>0&&0!==ua(e.verticalAlign)),n=t.length;if(n){t.sort((e,t)=>{const i=e.linear.top,n=t.linear.top;return fa(i,n)?0:i<n?-1:1});let i=true,s=0;while(s<n){const n=t[s++];i?(e.modifyBox(2,ua(n.verticalAlign)),i=false):n.modifyBox(2,n.linear.top-t[0].linear.top),n.setCacheValue("verticalAlign","0px")}}break}}else if(e.positionRelative&&e.naturalElement){const i=e.bounds,o=0!==n||0!==a,l=0!==r||0!==s;let c,h=false;const d=e.actualParent.naturalChildren,u=d.length;let f=0;while(f<u){const u=d[f++];if(u===e){if(h){if(o&&t.layoutVertical){const t=da(e.boundingClientRect);0!==n?n-=t.top-i.top:(null==c?void 0:c.positionRelative)&&c.hasPX("top")?a+=i.bottom-t.bottom:a+=t.bottom-i.bottom}if(l&&t.layoutHorizontal&&!e.alignSibling("leftRight")){const t=da(e.boundingClientRect);0!==r?r-=t.left-i.left:(null==c?void 0:c.positionRelative)&&c.hasPX("right")?s+=i.right-t.right:s+=t.right-i.right}}else if(t.layoutVertical)if(0!==n)(null==c?void 0:c.blockStatic)&&c.positionRelative&&u.blockStatic&&(n-=c.top);else if(0!==a){1===u.getBox(2)[0]&&(a-=u.marginTop)}break}u.positionRelative&&u.renderParent===t&&(h=true),u.pageFlow&&(c=u)}}0!==i&&o.modifyBox(2,-1*i),0!==n?o.modifyBox(2,n):0!==a&&o.modifyBox(2,-1*a),0!==r?o.autoMargin.left?o.modifyBox(4,-1*r):o.modifyBox(16,r):0!==s&&o.modifyBox(16,-1*s),o!==e&&o.setBoxSpacing()}}},Sprite:class dr extends fn{is(e){return 0===e.length&&e.hasWidth&&e.hasHeight}condition(e){const t=e.backgroundImage;if(""!==t&&(this.included(e.element)||!e.dataset.use)){const i=this.resource.getRawData(t)||this.resource.getImage(ma(t));if(i){const t=e.actualDimension,{backgroundPositionX:n,backgroundPositionY:s}=e.cssAsObject("backgroundPositionX","backgroundPositionY"),a=pa(n+" "+s,t,{fontSize:e.fontSize,screenDimension:e.localSettings.screenDimension}),r=(a.left<0||ba.test(n))&&i.width>t.width,o=(a.top<0||ba.test(s))&&i.height>t.height;if((r||o)&&(r||0===a.left)&&(o||0===a.top))return e.data(yt.SPRITE,"mainData",{image:i,position:a}),true}}return false}},Table:Wa,VerticalAlign:class ur extends fn{is(e){return e.length>0}condition(e){let t=false,i=0,n=0;const s=e.children,a=s.length;let r=0;while(r<a){const e=s[r++];if(!(e.positionStatic||e.positionRelative&&e.length))return false;if(e.inlineVertical){const s=Da(e.verticalAlign);0!==s&&(t=true),isNaN(n)||(0===n?n=s:n!==s&&(n=NaN)),i++}else n=NaN}return t&&isNaN(n)&&i>1&&$t.linearData(e.children).linearX}processNode(e){return e.each(e=>{(e.inlineVertical&&Va(e.verticalAlign)||e.imageElement||e.svgElement)&&(e.baselineAltered=true)}),{subscribe:true}}postConstraints(e){if(e.layoutHorizontal)for(const t of e.horizontalRows||[e.renderChildren]){const e=[];let i,n=Number.POSITIVE_INFINITY;if(t.forEach(t=>{const s=t.linear.top;t.inlineVertical&&s<=n&&(s<n&&(e.length=0),e.push(t),n=s),t.baselineActive&&(i=t)}),e.length){const n=e[0],s=n.linear.top;t.forEach(t=>{t!==i&&(t.inlineVertical&&(e.includes(t)?i&&(t.imageElement||t.svgElement)&&i.documentId===t.alignSibling("baseline")&&t.setBox(2,{reset:1,adjustment:i.linear.top-t.linear.top}):!Va(t.verticalAlign)&&i||(t.setBox(2,{reset:1,adjustment:t.linear.top-s}),t.baselineAltered=true)),t.baselineAltered&&t.setCacheValue("verticalAlign","0px"))}),i&&(i.setBox(2,{reset:1,adjustment:i.linear.top-s+Math.min(0,n.parseHeight(n.cssInitial("verticalAlign")))}),i.baselineAltered=true)}}else e.each(e=>e.baselineAltered=false)}},WhiteSpace:class fr extends fn{afterBaseLayout(){const e=this.application,t=new Set,i=e.session.clearMap;this.cacheProcessing.each(e=>{var n,s;if(e.naturalElement&&!e.hasAlign(4)){const a=e.naturalChildren,r=a.length;if(0===r)return;const o=e.pageFlow,l=o&&Ja(e,true)&&!e.actualParent.layoutElement;let c,h;for(let o=0;o<r;++o){const d=a[o];if(d.pageFlow&&(l&&(d.floating?h?d.linear.bottom>=h.linear.bottom&&(h=d):h=d:(c||(c=d),h=d)),Ja(d,true)))if(o>0){const a=d.previousSiblings({floating:false}),l=a.length;if(l){let h=false;const u=a[l-1];if(Ja(u,false)){let e=u.marginBottom,s=d.marginTop;if(u.marginTop<0&&0===u.bounds.height){const i=Math.min(e,u.marginTop);if(i<0){Math.abs(i)<s?d.modifyBox(2,i):ir(d,2),t.add(u.id),u.hide({collapse:true});continue}}else if(d.marginBottom<0&&0===d.bounds.height){const i=Math.min(s,d.marginBottom);if(i<0){Math.abs(i)<e?u.modifyBox(8,i):ir(u,8),t.add(d.id),d.hide({collapse:true});continue}}let a=false,r=u;while(ar(r,true)){let t=er(r);if(0===(null==t?void 0:t.getBox(8)[0])){let i=t.marginBottom,n=t;while(0===n.bounds.height&&!n.pseudoElement){const e=n.marginTop;i=Math.max(e,n.marginBottom,i),0!==e&&ir(n,2);const s=n.previousSibling;if(!s)break;if(s.marginBottom>=i)0!==n.marginBottom&&ir(n,8),t=s,i=s.marginBottom,n=s;else{if(s.bounds.height>0)break;0!==s.marginBottom&&ir(s,8),n=s}}if(0!==i&&ir(t,8,0===u.getBox(8)[0]?u:void 0),i>e)e=i,a=true;else if(0===i&&0===e){r=t;continue}}break}r=d;while(rr(r,true)){let e=r.firstStaticChild;if(Ja(e,true)&&0===e.getBox(2)[0]){let t=e.marginTop,i=e;while(0===i.bounds.height&&!i.pseudoElement){const n=i.marginBottom;t=Math.max(i.marginTop,n,t),0!==n&&ir(i,8);const s=i.nextSibling;if(!s)break;if(s.marginTop>=t)0!==i.marginTop&&ir(i,2),e=s,t=s.marginTop,i=s;else{if(s.bounds.height>0)break;0!==s.marginTop&&ir(s,2),i=s}}if(0!==t&&ir(e,2,0===d.getBox(2)[0]?d:void 0),t>s)s=t,h=true;else if(0===t&&0===s){r=e;continue}}break}if(e>0&&(s>0?s<=e?h&&tr(d)||(ir(d,2),0===d.bounds.height&&e>=d.marginBottom&&ir(d,8),h=false):a&&tr(u)||(ir(u,8),0===u.bounds.height&&s>=u.marginTop&&ir(u,2),a=false):0===d.bounds.height&&(s=Math.min(s,d.marginBottom),s<0&&(u.modifyBox(8,s),d.hide({collapse:true})))),s>0&&u.floatContainer&&0===d.getBox(2)[1]&&!tr(u)){let e=false;if(0===u.bounds.height)e=true;else{let t;if(Ga(u.naturalElements,e=>!!i.has(e)||(e.floating?(e.linear.bottom>Math.ceil(u.bounds.bottom)&&(t=e.float),true):void 0)),t){const i=null===(n=za(u.element,"styleMap::after",u.sessionId))||void 0===n?void 0:n.clear;e=!("both"===i||i===t)}}e&&d.modifyBox(2,u.box.top-Ua(u.naturalElements.map(e=>e.linear.bottom)),false)}if(h){let e=0;if(0===u.bounds.height){const t=u.previousSibling;e=t&&Ja(t,false)?Math.max(t.getBox(8)[1],t.marginBottom):0}s>e&&(d.registerBox(2)||d).setCacheValue("marginTop",s)}if(a){let t=0;if(0===d.bounds.height){const e=d.nextSibling;t=e&&Ja(e,true)?Math.max(e.getBox(2)[1],e.marginTop):0}e>=t&&(u.registerBox(8)||u).setCacheValue("marginBottom",e)}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;e>0&&t>0&&(e<t?ir(d,2):o===r-1?(d.setCacheValue("marginBottom",e),ir(d,2)):ir(d,8))}if(!h&&d!==c&&a.length>1&&(e.layoutVertical||(null===(s=d.renderParent)||void 0===s?void 0:s.layoutVertical))){const e=a.pop();e.floating&&Math.floor(e.bounds.top)===Math.floor(d.bounds.top)&&d.modifyBox(2,-e.bounds.height,false)}}}else if(0===d.bounds.height){const{marginTop:e,marginBottom:t}=d;e>0&&t>0&&(e<t&&d.setCacheValue("marginTop",t),ir(d,8))}}if(o&&!tr(e)&&"FIELDSET"!==e.tagName&&((null==c?void 0:c.naturalElement)&&Qa(e,c,true),(null==h?void 0:h.naturalElement)&&(Qa(e,h,false),h.marginTop<0))){const t=h.bounds.height+h.marginBottom+h.marginTop;t<0&&e.modifyBox(128,t,false)}}}),e.processing.excluded.each(e=>{if(e.lineBreak&&!e.lineBreakTrailing&&!i.has(e)&&!t.has(e.id)){let i=false;const n=e.previousSiblings({floating:false});if(n.length){const s=e.actualParent,a=e.nextSiblings();if(a.length){let r,o,l=n.pop(),c=a.pop(),h=0;if(l.rendered&&c.rendered){const a=l.inlineStatic&&c.inlineStatic;if(a&&0===n.length)return void t.add(e.id);if(!l.multiline&&l.has("lineHeight")){const e=Math.floor((l.lineHeight-l.bounds.height)/2);e>0&&(h+=e)}if(!c.multiline&&c.has("lineHeight")){const e=Math.round((c.lineHeight-c.bounds.height)/2);e>0&&(h+=e)}a&&(r=n[0],1===n.length&&(r=r.lineBreak?e:void 0),null==r||r.setBounds(false));let d=l.renderParent,u=c.renderParent;if(d!==u){while(d&&d!==s)l=d,d=l.renderParent;while(u&&u!==s)c=u,u=c.renderParent}[o,c]=Za(c,l,h,r),o>=1&&(c.visible?(c.modifyBox(2,o),i=true):l.visible&&(l.modifyBox(8,o),i=true))}else[o,c]=Za(c,l,h),o>=1&&((c.lineBreak||c.excluded)&&s.lastChild===c?(s.modifyBox(128,o),i=true):(l.lineBreak||l.excluded)&&s.firstChild===l&&(s.modifyBox(32,o),i=true))}else if(s.visible&&!s.preserveWhiteSpace&&"CODE"!==s.tagName){if(s.originalRoot){if(a.length){const e=a[a.length-1],t=(e.lineBreak||e.excluded?e.linear.bottom:e.linear.top)-s.box.top;0!==t&&(e.rendered||s.visibleStyle.background?s.modifyBox(32,t):s.hasHeight||nr(s,t))}}else{const e=n[n.length-1],t=0===e.bounds.height&&e.length?$t.outerRegion(e):e.linear,i=s.box.bottom-(e.lineBreak||e.excluded?t.top:t.bottom);0!==i&&(e.rendered||s.visibleStyle.background?s.modifyBox(128,i):s.hasHeight||nr(s,i))}i=true}i&&(n.forEach(e=>t.add(e.id)),a.forEach(e=>t.add(e.id)))}}})}afterConstraints(){this.cacheProcessing.each(e=>{if(e.naturalChild&&e.styleElement&&e.inlineVertical&&e.pageFlow&&!e.positioned&&!e.actualParent.layoutElement){const t=e.outerMostWrapper,i=t.renderParent;if(false===(null==i?void 0:i.hasAlign(4))){if(e.blockDimension&&!e.floating)if(i.layoutVertical){const n=i.renderChildren,s=n.findIndex(e=>e===t);if(-1!==s){if(!e.lineBreakLeading&&!e.baselineAltered){const e=n[s-1];(null==e?void 0:e.pageFlow)&&Ka(t,2,e.actualRect("bottom"),e.getBox(8)[1])}if(!e.lineBreakTrailing){const e=n[s+1];(null==e?void 0:e.pageFlow)&&e.styleElement&&!e.inlineVertical&&Ka(t,8,e.actualRect("top"),e.getBox(2)[1])}}}else if(!e.baselineAltered){const n=i.horizontalRows,s=e=>e.pageFlow&&e.blockDimension&&!e.floating;let a;if(n&&n.length>1)e:{let e=Number.NEGATIVE_INFINITY;const i=n.length;for(let r=0;r<i;++r){const i=n[r],o=i.length;let l=0;while(l<o)if(t===i[l++]){r>0?Ka(t,2,e):a=i;break e}if(i.forEach(t=>{const i=t.innerMostWrapped;s(i)&&(e=Math.max(i.actualRect("bottom"),e))}),e===Number.NEGATIVE_INFINITY)break}}else(i.layoutHorizontal||i.hasAlign(1024))&&(a=i.renderChildren);if(a){let i=[];a.forEach(e=>{e.nodeGroup?i=i.concat(e.cascade(e=>e.naturalChild)):e.innerWrapped?i.push(e.innerMostWrapped):i.push(e)});let n=Number.NEGATIVE_INFINITY;const r=e.actualParent,o=e.actualRect("top"),l=r.naturalChildren,c=l.length;let h=0;while(h<c){const e=l[h++];if(i.includes(e))break;if(e.lineBreak||e.block)n=Number.NEGATIVE_INFINITY;else{if(e.excluded)continue;s(e)&&(n=Math.max(e.actualRect("bottom"),n))}}n!==Number.NEGATIVE_INFINITY&&o>n&&Ka(t,2,n)}}if(!i.layoutVertical&&!t.alignParent("left")){const n=t.alignSibling("leftRight");if(""!==n){const e=i.renderChildren.find(e=>e.documentId===n);(null==e?void 0:e.inlineVertical)&&Ka(t,16,e.actualRect("right"))}else{let i=e;while(true){const e=i.siblingsLeading;if(e.length&&!e.some(e=>e.lineBreak||e.excluded&&e.blockStatic)){const n=e[0];if(n.inlineVertical)Ka(t,16,n.actualRect("right"));else if(n.floating){i=n;continue}}break}}}}}if(e.floatContainer&&e.layoutVertical){const t=[];e.naturalChildren.forEach(i=>{if(i.pageFlow)if(i.floating)t.push(i);else if(t.length){const n=i.outerMostWrapper;let s=n.renderParent;if(s){const[a,r]=i.getBox(2);if((0===a?i.marginTop:0)+r>0){const i=Math.floor(e.bounds.top),a=t.length;let r=0;while(r<a){const a=t[r++];if(i<=Math.floor(a.bounds.top)){let t=a.outerMostWrapper.renderParent;if(t){s=s.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||s,t=t.ascend({error:e=>e.naturalChild,attr:"renderParent"}).pop()||t,s!==t&&n.modifyBox(2,-1*(t!==e?t:a).linear.height,false);break}}}}}t.length=0}})}})}}},gr={constant:It,enumeration:wt};e.Application=G,e.ApplicationUI=class pr extends G{constructor(e,i,n,s,a){super(e,i,n,s,a),this.session={cache:new t,excluded:new t,extensionMap:new Map,clearMap:new Map,active:[],targetQueue:new Map},this.builtInExtensions={},this.extensions=[],this._layouts=[];const r=this.controllerHandler.localSettings;this._controllerSettings=r,this._excluded=r.unsupported.excluded}finalize(){if(this.closed)return;const{controllerHandler:e,session:t}=this,i=t.cache,n=this.extensions,s=this._layouts;for(const[e,n]of t.targetQueue.entries()){const t=this.resolveTarget(e.dataset.target);t?(e.render(t),this.addLayoutTemplate(t,e,n)):e.renderParent||i.remove(e)}const a=i.children,r=a.length,o=new Array(r);let l=0,c=0;while(l<r){const e=a[l++];e.renderParent&&e.visible&&(e.hasProcedure(St.LAYOUT)&&e.setLayout(),e.hasProcedure(St.ALIGNMENT)&&e.setAlignment(),o[c++]=e)}o.length=c,e.optimize(o),n.forEach(e=>{for(const t of e.subscribers)e.postOptimize(t)});const h=[];l=0;while(l<c){const e=o[l++];if(e.hasResource(Et.BOX_SPACING)&&e.setBoxSpacing(),e.documentRoot){if(0===e.renderChildren.length&&!e.inlineText){const t=e.naturalElements;if(t.length&&t.every(e=>e.documentRoot))continue}const t=e.innerMostWrapped.data(G.KEY_NAME,"layoutName");t&&h.push({node:e,layoutName:t})}}n.forEach(e=>e.beforeCascade(h));const d=this._controllerSettings.layout.baseTemplate;h.forEach(t=>{var i;const n=t.node,s=n.renderParent.renderTemplates;s&&this.saveDocument(t.layoutName,d+e.cascadeDocument(s,Math.abs(n.depth)),n.dataset.pathname,(null===(i=n.renderExtension)||void 0===i?void 0:i.some(e=>e.documentBase))?0:void 0)}),this.resourceHandler.finalize(s),e.finalize(s),n.forEach(e=>e.afterFinalize()),li("__squared.pseudo"),this.closed=true}copyToDisk(e,t){super.copyToDisk(e,this.createAssetOptions(t))}appendToArchive(e,t){super.appendToArchive(e,this.createAssetOptions(t))}saveToArchive(e,t){super.saveToArchive(e,this.createAssetOptions(t))}reset(){super.reset();for(const e of this.rootElements)e.dataset.iteration="";const e=this.session;e.cache.reset(),e.excluded.reset(),e.extensionMap.clear(),e.targetQueue.clear(),this._layouts.length=0}conditionElement(e,t){if(!this._excluded.has(e.tagName)){if(this.controllerHandler.visibleElement(e,t)||this._cascadeAll)return true;if(!t){switch(ni(e).position){case"absolute":case"fixed":return this.useElement(e)}let t=e.parentElement;while(t){if("none"===ni(t).display)return this.useElement(e);t=t.parentElement}const i=this.controllerHandler;return bi(e.children,e=>i.visibleElement(e))===Number.POSITIVE_INFINITY||this.useElement(e)}}return false}insertNode(e,t,i){if(!oi(e)){if(this.conditionElement(e,i))return this.controllerHandler.applyDefaultStyles(e),this.createNode({parent:t,element:e,append:false});{const i=this.createNode({parent:t,element:e,append:false});return i.visible=false,i.excluded=true,i}}if(ki(e.textContent)||(null==t?void 0:t.preserveWhiteSpace)&&("PRE"!==t.tagName||0===t.element.childElementCount)){this.controllerHandler.applyDefaultStyles(e);const i=this.createNode({parent:t,element:e,append:false});return t&&(i.cssApply(t.textStyle),i.setCacheValue("fontSize",t.fontSize)),i}}saveDocument(e,t,i,n){if(mi(t)){const s={pathname:i?Si(i,"/"):hi(this.userSettings.outputDirectory,this._controllerSettings.layout.pathName),filename:e,content:t,index:n},a=this._layouts;void 0!==n&&n>=0&&n<a.length?a.splice(n,0,s):a.push(s)}}renderNode(e){return 0===e.itemCount?this.controllerHandler.renderNode(e):this.controllerHandler.renderNodeGroup(e)}addLayout(e){const t=e.renderType;if(gi(t,512)&&(gi(t,8)?e=this.processFloatHorizontal(e):gi(t,16)&&(e=this.processFloatVertical(e))),0!==e.containerType){const t=this.renderNode(e);if(t)return this.addLayoutTemplate(t.parent||e.parent,e.node,t,e.renderIndex)}return false}addLayoutTemplate(e,t,i,n=-1){if(i){if(t.renderExclude)t.hide({remove:true}),t.excluded=true;else if(t.renderParent){const s=yi(e,"renderTemplates");n>=0&&n<e.renderChildren.length?(e.renderChildren.splice(n,0,t),s.splice(n,0,i)):(e.renderChildren.push(t),s.push(i))}else this.session.targetQueue.set(t,i);return true}return false}createNode(e){const t=this.processing,{element:i,parent:n,children:s}=e,a=new this.Node(this.nextId,t.sessionId,i,this.controllerHandler.afterInsertNode);if(n){a.depth=n.depth+1,!n.naturalElement||i&&null!==i.parentElement||(a.actualParent=n);const t=e.replace;t&&n.appendTry(t,a,false)&&(t.parent=a,a.innerWrapped=t)}return null==s||s.forEach(e=>e.parent=a),false!==e.append&&t.cache.append(a,true===e.delegate,true===e.cascade),a}createCache(e){const t=this.createRootNode(e);if(t){const e=this.controllerHandler,i=this._cache,n=t.parent,s={},a=new Set,r=[];let o=false;if(t.documentBody&&(n.naturalChild=true,n.setCacheValue("naturalElement",true),n.visible=false,n.addAlign(4),n.exclude({resource:Et.FONT_STYLE|Et.VALUE_STRING,procedure:St.ALL}),i.append(n)),t.originalRoot=true,t.documentParent=n,i.each(e=>{if(e.styleElement){const t=e.element;if(e.length){const i=e.cssInitial("textAlign");switch(i){case"center":case"right":case"end":Ai(s,t,e.id,"text-align","left",i)}}e.positionRelative&&Zt.forEach(i=>{e.hasPX(i)&&Ai(s,t,e.id,i,"auto",e.css(i))}),"rtl"===e.dir&&(t.dir="ltr",a.add(t),o=true)}}),this.processing.excluded.each(e=>{e.pageFlow||e.cssTry("display","none")}),i.each(e=>{e.pseudoElement?r.push(e):e.setBounds(void 0===s[e.id]&&!o)}),r.length){const e=[];r.forEach(t=>{const i=t.actualParent.element;let n,s=i.id;t.pageFlow&&(""===s&&(s="__squared_"+Math.round(Math.random()*(new Date).getTime()),i.id=s),n=si(`#${s+_i(t.element,t.sessionId)} { display: none !important; }`)),t.cssTry("display",t.display)&&e.push({item:t,id:s,parentElement:i,styleElement:n})}),e.forEach(e=>e.item.setBounds(false)),e.forEach(e=>{const t=e.styleElement;if(e.id.startsWith("__squared_")&&(e.parentElement.id=""),t)try{document.head.removeChild(t)}catch(e){}e.item.cssFinally("display")})}this.processing.excluded.each(e=>{e.lineBreak||(e.setBounds(),e.saveAsInitial()),e.pageFlow||e.cssFinally("display")}),i.each(e=>{if(e.styleElement){const t=e.element,i=s[e.id];if(i)for(const e in i)t.style.setProperty(e,i[e]);a.has(t)&&(t.dir="rtl")}e.saveAsInitial()}),e.evaluateNonStatic(t,i),e.sortInitialCache()}return t}afterCreateCache(e){const t=e.dataset,{filename:i,iteration:n}=t,s=mi(i)&&i.replace(new RegExp(`\\.${this._controllerSettings.layout.fileExtension}$`),"")||e.elementId||"document_"+this.length,a=(n?parseInt(n):-1)+1,r=ui(a>0?`${s}_${a}`:s,true);t.iteration=a.toString(),t.layoutName=r,e.data(G.KEY_NAME,"layoutName",r),this.setBaseLayout(),this.setConstraints(),this.setResources()}resolveTarget(e){if(mi(e)){for(const t of this._cache)if(t.elementId===e||t.controlId===e)return t;for(const t of this.session.cache)if(t.elementId===e||t.controlId===e)return t}}useElement(e){const t=e.dataset.use;return mi(t)&&t.split(Ii.SEPARATOR).some(e=>!!this.extensionManager.retrieve(e))}toString(){var e;return(null===(e=this.layouts[0])||void 0===e?void 0:e.content)||""}cascadeParentNode(e,t,i){var n;const s=this.insertNode(e);if(s&&("none"!==s.display||0===t||s.outerExtensionElement)){if(s.depth=t,0===t){this._cache.append(s);for(const e of s.extensions)if(null===(n=this.extensionManager.retrieve(e))||void 0===n?void 0:n.cascadeAll){this._cascadeAll=true;break}}const a=this.controllerHandler;if(s.excluded&&null===s.outerExtensionElement||a.preventNodeCascade(e))return s;const r=this.processing.sessionId,o=this.createPseduoElement(e,"::before",r),l=this.createPseduoElement(e,"::after",r),c=e.childNodes,h=c.length,d=new Array(h),u=new Array(e.childElementCount);let f=true,g=0,p=0,m=0;while(g<h){const e=c[g++];let n;e===o?(n=this.insertNode(o,void 0,"::before"),n&&(s.innerBefore=n,n.textEmpty||(n.inlineText=true),f=false)):e===l?(n=this.insertNode(l,void 0,"::after"),n&&(s.innerAfter=n,n.textEmpty||(n.inlineText=true),f=false)):"#"===e.nodeName.charAt(0)?oi(e)&&(n=this.insertNode(e,s)):a.includeElement(e)&&(i&&Bi(e.dataset.use,i).some(t=>t.init(e)),this.rootElements.has(e)?(n=this.insertNode(e),n&&(n.documentRoot=true,n.visible=false,n.excluded=true),f=false):(n=this.cascadeParentNode(e,t+1,i),false===(null==n?void 0:n.excluded)&&(f=false)),n&&(u[m++]=n)),n&&(n.childIndex=p,n.naturalChild=true,d[p++]=n)}d.length=p,u.length=m,s.naturalChildren=d,s.naturalElements=u,this.cacheNodeChildren(s,d,f),m>0&&this.userSettings.createQuerySelectorMap&&(s.queryMap=this.createQueryMap(u,m))}return s}cacheNodeChildren(e,t,i){const n=t.length;if(n){const s=this._cache;let a=[],r=[];if(n>1){let o=t[0],l=false;for(let c=0,h=0;c<n;++c){const d=t[c];d.excluded?this.processing.excluded.append(d):d.plainText&&i||(d.containerIndex=h++,d.parent=e,s.append(d)),d.pageFlow&&(d.floating&&(l=true),c>0&&(r.push(d),d.lineBreak&&(t[c-1].lineBreakTrailing=true)),d.excluded||(d.siblingsLeading=a,o.siblingsTrailing=r,a=[],r=[],o=d),c<n-1&&(a.push(d),d.lineBreak&&(t[c+1].lineBreakLeading=true))),d.actualParent=e}o.siblingsTrailing=r,e.floatContainer=l}else{const i=t[0];i.excluded?this.processing.excluded.append(i):i.plainText||(i.siblingsLeading=a,i.siblingsTrailing=r,i.parent=e,i.containerIndex=0,s.append(i),e.floatContainer=i.floating),i.actualParent=e}}else i=!e.textEmpty;e.inlineText=i}setBaseLayout(){const{controllerHandler:e,processing:t,session:i}=this,{extensionMap:n,clearMap:s}=i,a=t.cache,r=t.node,o=new Map;let l=this.extensionsTraverse;{let e=0;const t=(e,t,i)=>{var n;return(null===(n=o.get(e))||void 0===n?void 0:n.set(t,i))||o.set(e,new Map([[t,i]]))},i=e=>-1*e-2;t(-1,0,r.parent),a.each(i=>{if(i.length){const n=i.depth;if(t(n,i.id,i),e=Math.max(n,e),i.floatContainer){const e=new Set,t={};i.naturalChildren.forEach(i=>{if(i.pageFlow){const n=i.floating;if(e.size){const a=i.css("clear");if("none"!==a){if(!n){let n;switch(a){case"left":n=[t.left];break;case"right":n=[t.right];break;case"both":n=[t.left,t.right]}null==n||n.forEach(n=>{if(n){const s=n.float;e.has(s)&&Math.ceil(i.bounds.top)>=n.bounds.bottom&&(e.delete(s),t[s]=void 0)}})}(e.has(a)||"both"===a)&&(s.set(i,2===e.size?"both":a),n||i.setBox(2,{reset:1}),e.clear(),t.left=void 0,t.right=void 0)}}if(n){const n=i.float;e.add(n),t[n]=i}}})}}});let n=0;while(n<e)o.set(i(n++),new Map);a.afterAppend=(e,n=false)=>{t(i(e.depth),e.id,e),n&&e.length&&e.cascade(e=>{var n;if(e.length){const s=e.depth;null===(n=o.get(s))||void 0===n||n.delete(e.id),t(i(s),e.id,e)}return false})}}this.extensions.forEach(e=>e.beforeBaseLayout());for(const t of o.values())for(const i of t.values()){if(0===i.length)continue;const t=i.floatContainer,a=i.renderExtension,r=i.duplicate(),o=r.length;for(let i=0;i<o;++i){let c=r[i];if(c.rendered||!c.visible)continue;let h=c.parent;if(o>1&&i<o-1&&c.pageFlow&&(0===h.alignmentType||h.hasAlign(2)||c.hasAlign(8192))&&!h.hasAlign(4)&&!c.nodeGroup&&c.hasSection(vt.DOM_TRAVERSE)){const n=[],a=[];let l,d,u=i,f=0;h.layoutVertical&&c.hasAlign(8192)&&(n.push(c),++u,++f);e:{let e=false;for(;u<o;++u,++f){const i=r[u];if(i.pageFlow){if(i.labelFor&&!i.visible){f--;continue}if(t){if(e){s.get(i)&&(e=false)}i.floating&&(e=true)}if(0===f){const e=i.siblingsTrailing[0];if(e){!Li(i)||e.alignedVertically([i])>0?a.push(i):n.push(i);continue}}const r=i.siblingsLeading[0];if(!r)break e;{const o=n.length>0;if(t){const t=i.alignedVertically(o?n:a,s,o);if(t>0){if(o){if(t<4&&e&&!i.siblingsLeading.some(e=>e.lineBreak&&!s.has(e))){if(!i.floating||r.floating&&i.bounds.top<Math.floor(r.bounds.bottom)){let t=Number.NEGATIVE_INFINITY;if(i.floating||n.forEach(e=>{e.floating&&(t=Math.max(t,e.bounds.bottom))}),!i.floating&&i.bounds.top<Math.floor(t)||e){if(n.push(i),!i.floating&&Math.ceil(i.bounds.bottom)>t)break e;continue}}}else switch(t){case 6:case 7:s.has(i)||s.set(i,"both")}break e}if(!Mi(i,n,a))break e}else if(!Pi(i,n,a))break e}else if(i.alignedVertically(o?n:a,void 0,o)>0){if(!Mi(i,n,a))break e}else if(!Pi(i,n,a))break e}}else if(i.autoPosition){const e=a.length;if(e){a[e-1].blockStatic&&a.push(i);break}n.push(i)}}}let g=n.length;g>1?(l=e.processTraverseHorizontal(new Qt(h,c,0,0,n),r),d=n[g-1]):(g=a.length,g>1&&(l=e.processTraverseVertical(new Qt(h,c,0,0,a),r),d=a[g-1],Li(d)&&d!==r[o-1]&&d.addAlign(8192)));let p=false;l?this.addLayout(l)&&(p=true,h=c.parent):p=true,p&&d===r[o-1]&&h.removeAlign(2)}if(c.removeAlign(8192),i===o-1&&h.removeAlign(2),c.renderAs&&h.appendTry(c,c.renderAs,false)&&(c.hide(),c=c.renderAs,c.positioned&&(h=c.parent)),!c.rendered&&c.hasSection(vt.EXTENSION)){const e=n.get(c.id);let t=e?a?a.concat(e):e:a,i=false;if(t){const e=t.length;let n=0;while(n<e){const e=t[n++],s=e.processChild(c,h);if(s){const{output:t,renderAs:n,outputAs:a}=s;if(t&&this.addLayoutTemplate(s.outerParent||h,c,t),n&&a&&this.addLayoutTemplate(s.parentAs||h,n,a),h=s.parent||h,s.subscribe&&e.subscribers.add(c),i=true===s.next,s.complete||i)break}}if(i)continue}if(c.styleElement){t=Bi(c.dataset.use,l);const n=t.length;let s=0;while(s<n){const n=t[s++];if(n.is(c)&&n.condition(c,h)&&(!e||!e.includes(n))){const e=n.processNode(c,h);if(e){const{output:t,renderAs:s,outputAs:a}=e;if(t&&this.addLayoutTemplate(e.outerParent||h,c,t),s&&a&&this.addLayoutTemplate(e.parentAs||h,s,a),h=e.parent||h,e.include?(yi(c,"renderExtension").push(n),n.subscribers.add(c)):e.subscribe&&n.subscribers.add(c),e.remove){const e=l.indexOf(n);-1!==e&&(l=l.slice(0),l.splice(e,1))}if(i=true===e.next,e.complete||i)break}}}if(i)continue}}if(!c.rendered&&c.hasSection(vt.RENDER)){let t=this.createLayoutControl(h,c);if(0===t.containerType){const i=c.length?e.processUnknownParent(t):e.processUnknownChild(t);if(i.next)continue;t=i.layout}this.addLayout(t)}}}a.sort((e,t)=>{if(e.depth===t.depth){const i=e.innerWrapped,n=t.innerWrapped;if(i===t)return-1;if(e===n)return 1;const s=e.outerWrapper,a=t.outerWrapper;if(e===a||!s&&a)return-1;if(t===s||!a&&s)return 1;const r=e.nodeGroup,o=t.nodeGroup;return r&&o?e.id<t.id?-1:1:r?-1:o?1:0}return e.depth<t.depth?-1:1}),this.extensions.forEach(e=>{for(const t of e.subscribers)a.contains(t)&&e.postBaseLayout(t);e.afterBaseLayout()}),i.cache.join(a),i.excluded.join(t.excluded)}setConstraints(){const e=this._cache;this.controllerHandler.setConstraints(),this.extensions.forEach(t=>{for(const i of t.subscribers)e.contains(i)&&t.postConstraints(i);t.afterConstraints()})}setResources(){const e=this.resourceHandler;this._cache.each(t=>{e.setBoxStyle(t),t.imageElement||t.svgElement||!t.visible||(e.setFontStyle(t),e.setValueString(t))}),this.extensions.forEach(e=>e.afterResources())}processFloatHorizontal(e){const t=this.controllerHandler,{containerType:i,alignmentType:n}=t.containerTypeVertical,s=this.session.clearMap,a=[],r=[],o=[],l=[],c=[];let h,d,u,f,g=false;if(e.each((e,t)=>{if(t>0){s.get(e)&&(g=true)}const i=e.float;if(g)"left"===i?h?h.push(e):h=[e]:"right"===i?d?d.push(e):d=[e]:o.push(e);else if("left"===i)l.push(e);else if("right"===i)c.push(e);else if(l.length||c.length){let t=e.linear.top;if(e.styleText){const i=e.textBounds;i&&(t=Math.max(i.top,t))}t=Math.ceil(t),l.some(e=>t>=e.bounds.bottom)||c.some(e=>t>=e.bounds.bottom)?o.push(e):r.push(e)}else r.push(e)}),l.length&&(u=h?[l,h]:l),c.length&&(f=d?[c,d]:c),c.length+((null==d?void 0:d.length)||0)===e.length&&e.add(2048),o.length){const{node:s,parent:a}=e;o.length>1&&o[0].addAlign(8192),o.unshift(s);const r=t.createNodeGroup(s,o,{parent:a});r.childIndex=s.childIndex,r.containerName=s.containerName,r.inherit(s,"boxStyle"),r.innerWrapped=s,s.resetBox(30,r),s.resetBox(480,r),this.addLayout(new Qt(a,r,i,n|(a.blockStatic?64:0),o)),e.parent=r}return r.length&&a.push(r),u&&a.push(u),f&&a.push(f),e.type=t.containerTypeVerticalMargin,e.itemCount=a.length,e.add(64),a.forEach(s=>{let a,o;if(Array.isArray(s[0])){a=s;const r=a.length;let l=a[0],h=1;while(h<r)l=l.concat(a[h++]);l.sort((e,t)=>e.childIndex<t.childIndex?-1:1);const d=e.node;d.layoutVertical?o=d:(o=t.createNodeGroup(l[0],l,{parent:d}),this.addLayout(Qt.create({parent:d,node:o,containerType:i,alignmentType:n|(a.some(e=>e===f||e===c)?2048:0),itemCount:r})))}else a=[s];a.forEach(s=>{const a=s[0],h=o||e.node,d=t.createNodeGroup(a,s,{parent:h,delegate:true}),u=new Qt(h,d,0,128);s===r?u.add(256):u.add(function(e){let t=0,i=true,n=true;const s=e.length;let a=0;while(a<s){const t=e[a++];if(t.floating||(i=false),t.rightAligned||(n=false),!i&&!n)break}return i&&(t|=512),n&&(t|=2048),t}(s)),s.some(e=>e.percentWidth>0)?(u.type=t.containerTypePercent,1===s.length&&(u.node.innerWrapped=a)):1===s.length?u.setContainerType(i,n):u.linearY||u.unknownAligned?u.setContainerType(i,n|(u.unknownAligned?2:0)):t.processLayoutHorizontal(u),this.addLayout(u),s===r&&this.setFloatPadding(h,d,r,l,c)})}),e}processFloatVertical(e){const t=this.controllerHandler,{containerType:i,alignmentType:n}=t.containerTypeVertical,s=this.session.clearMap;if(0!==e.containerType){const s=e.node,a=t.createNodeGroup(s,[s],{parent:e.parent});this.addLayout(new Qt(a,s,i,n,a.children)),e.node=a}else e.setContainerType(i,n);const a=[],r=[],o=[],l=[];let c=false,h=false,d=true;if(e.each(e=>{e.blockStatic&&0===l.length?(o.push(e),h=true):(s.has(e)&&(e.floating?c=true:(e.setBox(2,{reset:1}),a.push(o.slice(0)),r.push(l.slice(0)),o.length=0,l.length=0)),e.floating?(h&&(a.push(o.slice(0)),r.push(null),o.length=0,l.length=0,h=false),l.push(e)):(c&&!s.has(e)&&(d=false),o.push(e)))}),l.length&&r.push(l),o.length&&a.push(o),!d){const s=e.node,o=Math.max(r.length,a.length);for(let e=0;e<o;++e){const o=a[e]||[];if(null===r[e]&&o.length){const e=t.containerTypeVertical;this.addLayout(new Qt(s,t.createNodeGroup(o[0],o,{parent:s}),e.containerType,192|e.alignmentType,o))}else{const a=r[e]||[];if(o.length||a.length){const e=t.createNodeGroup(a[0]||o[0],[],{parent:s}),r=new Qt(s,e);r.type=t.containerTypeVerticalMargin;const l=[];let c;if(a.length){const i=t.createNodeGroup(a[0],a,{parent:e});r.add(512),0===o.length&&a.every(e=>"right"===e.float)&&r.add(2048),l.push(i)}if(o.length&&(c=t.createNodeGroup(o[0],o,{parent:e}),l.push(c)),r.itemCount=l.length,this.addLayout(r),l.forEach(s=>{s.nodeGroup||(s=t.createNodeGroup(s,[s],{parent:e,delegate:true})),this.addLayout(new Qt(e,s,i,192|n,s.children))}),o.length&&a.length){const[e,t]=xi(a,e=>"right"!==e.float);this.setFloatPadding(s,c,o,e,t)}}}}}return e}createPseduoElement(e,t,i){let n=wi(e,"styleMap"+t,i),s=0;if("Q"===e.tagName){n||(n={},Ti(e,"styleMap"+t,i,n));let a=n.content;if("string"==typeof a&&""!==a||(a=ni(e,t).getPropertyValue("content")||("::before"===t?"open-quote":"close-quote"),n.content=a),a.endsWith("-quote")){let t=e.parentElement;while("Q"===(null==t?void 0:t.tagName))s++,t=t.parentElement}}if(n){let a=n.content;if(a){const r=Ei(a,'"');let o=false;switch(n.position){case"absolute":case"fixed":o=true}const l=()=>{if(!o&&""!==r){const t=e.childNodes[e.childNodes.length-1];if(oi(t))return!/\s+$/.test(t.textContent)}return false};if(""===r.trim()){const i=e=>{if((e||0===di(n.width))&&0===di(n.height)){for(const e in n){if(/(padding|Width|Height)/.test(e)&&di(n[e])>0)return true;if(!o&&e.startsWith("margin")&&0!==di(n[e]))return true}return false}return true};if("::after"===t){if(!l()&&!i(true))return}else{const t=e.childNodes,s=t.length;let a=0;while(a<s){const e=t[a++];if(oi(e)){if(""!==e.textContent.trim())break}else if(e instanceof HTMLElement){const t=ni(e);switch(t.getPropertyValue("position")){case"fixed":case"absolute":continue}if("none"!==t.getPropertyValue("float"))return;break}}switch(n.display){case void 0:case"block":case"inline":case"inherit":case"initial":if(!i(false))return}}}else if("inherit"===a){let t=e;do{if(a=ni(t).getPropertyValue("content"),"inherit"!==a)break;t=t.parentElement}while(t)}const c=ni(e);ei.forEach(e=>{mi(n[e])||(n[e]=c[e])});let h="",d="";switch(a){case"normal":case"none":case"initial":case"inherit":case"unset":case"no-open-quote":case"no-close-quote":case'""':break;case"open-quote":"::before"===t&&(d=s%2==0?"“":"‘");break;case"close-quote":"::after"===t&&(d=s%2==0?"”":"’");break;default:{const n=ai(a);if(""!==n)d=n,pi(this._controllerSettings.mimeType.image,n)?h="img":d="";else{let n,s=false;Ni.lastIndex=0;while(null!==(n=Ni.exec(a))){const a=n[1];if(a)d+=ri(e,a.trim());else if(n[2]||n[5]){const s="counter"===n[2],[a,r]=s?[n[3],n[4]||"decimal"]:[n[6],n[8]||"decimal"],o=(Ri(e,a,t,i,0)||0)+(Ci(c.getPropertyValue("counter-reset"),a,0)||0),l=[];let h,u=e,f=o,g=false;const p=(e,t)=>{const i=l.length;0===i?f+=e:(g||t)&&(l[i-1]+=e)},m=e=>{void 0===Ci(ni(e).getPropertyValue("counter-reset"),a)&&bi(e.children,e=>{if("__squared.pseudo"!==e.className){let n=Ri(e,a,t,i);n&&p(n,true);const s=ni(e);if(n=Ci(s.getPropertyValue("counter-increment"),a),n&&p(n,false),n=Ci(s.getPropertyValue("counter-reset"),a),void 0!==n)return true;m(e)}})};while(u){if(g=false,u.previousElementSibling)u=u.previousElementSibling,u&&m(u);else{if(!u.parentElement)break;u=u.parentElement,g=true}if(u&&"__squared.pseudo"!==u.className){const e=Ri(u,a,t,i);e&&p(e,true);const n=ni(u),r=Ci(n.getPropertyValue("counter-increment"),a);r&&p(r,false);const o=Ci(n.getPropertyValue("counter-reset"),a);if(void 0!==o){if(h||(f+=o),h=u,s)break;g&&l.push((e||0)+o)}}}if(h){if(!s&&l.length>1){l.reverse().splice(1,1);const e=n[7];l.forEach(t=>d+=ti(r,t,true)+e)}}else f=o;d+=ti(r,f,true)}else n[9]&&(d+=n[9]);s=true}s||(d=a)}break}}if(mi(n.display)||(n.display="inline"),d||'""'===a){""===h&&(h=/^(inline|table)/.test(n.display)?"span":"div");const s=function(e,t="span",i=-1){const n=document.createElement(t);return n.className="__squared.pseudo",n.style.setProperty("display","none"),i>=0&&i<e.childNodes.length?e.insertBefore(n,e.childNodes[i]):e.appendChild(n),n}(e,h,"::before"===t?0:-1);if("img"===h){s.src=d;const e=this.resourceHandler.getImage(d);e&&(!mi(n.width)&&e.width>0&&(n.width=ii(e.width)),!mi(n.height)&&e.height>0&&(n.height=ii(e.height)))}else'""'!==a&&(s.innerText=d);for(const e in n)"display"!==e&&(s.style[e]=n[e]);return Ti(s,"pseudoElement",i,t),Ti(s,"styleMap",i,n),s}}}}createAssetOptions(e){let t=null==e?void 0:e.assets;return t=t?this.layouts.concat(t):this.layouts,Object.assign(Object.assign({},e),{assets:t})}createLayoutControl(e,t){return new Qt(e,t,t.containerType,t.alignmentType,t.children)}setFloatPadding(e,t,i,n,s){let a=[];i.forEach(e=>{(Fi(e)||e.centerAligned)&&a.push(e),e.blockStatic&&(a=a.concat(e.cascade(e=>Fi(e))))});const r=t.bounds.bottom,o=e.actualBoxWidth();if(n.length){let i=Number.NEGATIVE_INFINITY,s=0,l=false,c=false;if(n.forEach(e=>{if(e.bounds.top<r){const t=e.linear.right+Wi(e,false);t>i?(i=t,c=e.marginRight>0):t===i&&e.marginRight<=0&&(c=false)}}),i!==Number.NEGATIVE_INFINITY&&(a.forEach(e=>{(Math.floor(e.linear.left)<=i||e.centerAligned)&&(s=Math.max(s,e.marginLeft),l=true)}),l)){const n=i-e.box.left-s-ci(t.map(e=>a.includes(e)?0:e.marginLeft));n>0&&n<o&&t.modifyBox(256,n+(!c&&t.find(e=>e.multiline,{cascade:true})?Math.max(s,this._controllerSettings.deviations.textMarginBoundarySize):0))}}if(s.length){let i=Number.POSITIVE_INFINITY,n=0,l=false,c=false;if(s.forEach(e=>{if(e.bounds.top<r){const t=e.linear.left+Wi(e,true);t<i?(i=t,c=e.marginLeft>0):t===i&&e.marginLeft<=0&&(c=false)}}),i!==Number.POSITIVE_INFINITY&&(a.forEach(e=>{(e.multiline||Math.ceil(e.linear.right)>=i)&&(n=Math.max(n,e.marginRight),l=true)}),l)){const s=e.box.right-i-n-ci(t.map(e=>a.includes(e)?0:e.marginRight));s>0&&s<o&&t.modifyBox(64,s+(!c&&t.find(e=>e.multiline,{cascade:true})?Math.max(n,this._controllerSettings.deviations.textMarginBoundarySize):0))}}}get layouts(){return this._layouts.sort((e,t)=>{const i=e.index,n=t.index;if(i!==n){if(0===i||n===Number.POSITIVE_INFINITY||void 0===n&&i!==Number.POSITIVE_INFINITY)return-1;if(0===n||i===Number.POSITIVE_INFINITY||void 0===i&&n!==Number.POSITIVE_INFINITY)return 1;if(void 0!==i&&void 0!==n)return i<n?-1:1}return 0})}get clearMap(){return this.session.clearMap}get extensionsCascade(){return this.extensions.filter(e=>!!e.init)}get extensionsTraverse(){return this.extensions.filter(e=>!e.eventOnly)}get length(){return this.session.cache.length}},e.Controller=j,e.ControllerUI=class mr extends j{constructor(){super(...arguments),this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}init(){const e=this.localSettings.unsupported;this._unsupportedCascade=e.cascade,this._unsupportedTagName=e.tagName}reset(){this._requireFormat=false,this._beforeOutside={},this._beforeInside={},this._afterInside={},this._afterOutside={}}preventNodeCascade(e){return this._unsupportedCascade.has(e.tagName)}applyDefaultStyles(e){const t=this.sessionId;let i;if(qi(e))i={position:"static",display:"inline",verticalAlign:"baseline",float:"none",clear:"none"};else{i=sn(e,"styleMap",t)||{};const n=()=>{if(!Zi(i.border)&&a()){const e=this.localSettings.style.inputBorderColor;i.border="outset 1px "+e;for(let t=0;t<4;++t){const n=Xi[t];i[n[0]]="outset",i[n[1]]="1px",i[n[2]]=e}return true}return false},s=e=>{if(e){const e=i.backgroundColor;Zi(e)&&"initial"!==e||(i.backgroundColor=this.localSettings.style.inputBackgroundColor)}Zi(i.textAlign)||(i.textAlign="center"),Zi(i.padding)||Yi.some(e=>!!i[e])||(i.paddingTop="2px",i.paddingRight="6px",i.paddingBottom="3px",i.paddingLeft="6px")},a=()=>!(Xi[0][0]in i||Xi[1][0]in i||Xi[2][0]in i||Xi[3][0]in i),r=e.tagName;if(Di(8))switch(r){case"BODY":"rgba(0, 0, 0, 0)"===i.backgroundColor&&(i.backgroundColor="rgb(255, 255, 255)");break;case"INPUT":case"SELECT":case"BUTTON":case"TEXTAREA":Zi(i.display)||(i.display="inline-block");break;case"FIELDSET":Zi(i.display)||(i.display="block")}else if(Hi())switch(r){case"BODY":"transparent"===i.backgroundColor&&(i.backgroundColor="rgb(255, 255, 255)");break;case"INPUT":switch(e.type){case"text":case"password":case"time":case"date":case"datetime-local":case"week":case"month":case"url":case"email":case"search":case"number":case"tel":Zi(i.fontSize)||(i.fontSize="13.3333px")}break;case"CODE":Zi(i.fontFamily)||(i.fontFamily="monospace");break;case"LEGEND":case"RT":Zi(i.display)||(i.display="block")}switch(r){case"INPUT":{const t=e.type;switch(t){case"radio":case"checkbox":case"image":break;case"week":case"month":case"time":case"date":case"datetime-local":i.paddingTop=Ui(Qi(i.paddingTop)+1),i.paddingRight=Ui(Qi(i.paddingRight)+1),i.paddingBottom=Ui(Qi(i.paddingBottom)+1),i.paddingLeft=Ui(Qi(i.paddingLeft)+1);break;default:{const e=n();switch(t){case"file":case"reset":case"submit":case"button":s(e)}break}}break}case"BUTTON":s(n());break;case"TEXTAREA":case"SELECT":n();break;case"BODY":{const e=i.backgroundColor;Zi(e)&&"initial"!==e||(i.backgroundColor="rgb(255, 255, 255)");break}case"FORM":Zi(i.marginTop)||(i.marginTop="0px");break;case"LI":if(!Zi(i.listStyleImage)){const t=zi(e);i.listStyleImage=t.getPropertyValue("list-style-image")}break;case"IFRAME":Zi(i.display)||(i.display="block");case"VIDEO":case"CANVAS":case"svg":case"IMG":{const t=(t,n)=>{const s=i[t];if(!Zi(s)||"auto"===s){const s=new RegExp(`\\s+${t}="([^"]+)"`).exec(e.outerHTML);if(s){const e=s[1];Gi(e)?i[t]=e+"px":ji(e)&&(i[t]=e)}else if("IFRAME"===r)"width"===t?i.width="300px":i.height="150px";else{const s=i[n];if(s&&Gi(s)){const a="max"+Ki(t);if(!Zi(i[a])||!ji(a)){const a=this.application.resourceHandler.getImage(e.src);a&&a.width>0&&a.height>0&&(i[t]=Ui(a[t]*parseFloat(s)/a[n]))}}}}};t("width","height"),t("height","width");break}}}an(e,"styleMap",t,i)}addBeforeOutsideTemplate(e,t,i=true,n=-1){const s=tn(this._beforeOutside,e);-1!==n&&n<s.length?s.splice(n,0,t):s.push(t),i&&(this._requireFormat=true)}addBeforeInsideTemplate(e,t,i=true,n=-1){const s=tn(this._beforeInside,e);-1!==n&&n<s.length?s.splice(n,0,t):s.push(t),i&&(this._requireFormat=true)}addAfterInsideTemplate(e,t,i=true,n=-1){const s=tn(this._afterInside,e);-1!==n&&n<s.length?s.splice(n,0,t):s.push(t),i&&(this._requireFormat=true)}addAfterOutsideTemplate(e,t,i=true,n=-1){const s=tn(this._afterOutside,e);-1!==n&&n<s.length?s.splice(n,0,t):s.push(t),i&&(this._requireFormat=true)}getBeforeOutsideTemplate(e,t){const i=this._beforeOutside[e];return i?on(i,t):""}getBeforeInsideTemplate(e,t){const i=this._beforeInside[e];return i?on(i,t):""}getAfterInsideTemplate(e,t){const i=this._afterInside[e];return i?on(i,t):""}getAfterOutsideTemplate(e,t){const i=this._afterOutside[e];return i?on(i,t):""}hasAppendProcessing(e){return void 0===e?this._requireFormat:e in this._beforeOutside||e in this._beforeInside||e in this._afterInside||e in this._afterOutside}includeElement(e){return!(this._unsupportedTagName.has(e.tagName)||"INPUT"===e.tagName&&this._unsupportedTagName.has(e.tagName+":"+e.type))||"true"===e.contentEditable}visibleElement(e,t){let i,n,s;if(t){const a=e.parentElement;i=a?zi(a,t):zi(e),n=1,s=1}else{if(i=zi(e),"none"===i.getPropertyValue("display"))return false;{const t=nn(e,this.sessionId);if(!$i(t))return false;({width:n,height:s}=t)}}if(n>0&&s>0)return"visible"===i.getPropertyValue("visibility")||!ln(i);if(!t){if(en(e.children,e=>this.visibleElement(e))===Number.POSITIVE_INFINITY)return true;if("IMG"===e.tagName&&"none"!==i.getPropertyValue("display"))return true}return!ln(i)&&(n>0&&"none"!==i.getPropertyValue("float")||!!t&&"none"!==i.getPropertyValue("clear")||"block"===i.getPropertyValue("display")&&(0!==cn(i,"margin-top")||0!==cn(i,"margin-bottom")))}evaluateNonStatic(e,t){const i=new Set,n=new Set;t.each(t=>{if(!t.documentRoot&&!t.pageFlow){const s=t.parent;let a;switch(t.css("position")){case"fixed":if(!t.autoPosition){a=e;break}case"absolute":{const i=t.absoluteParent;if(i)if(a=i,t.autoPosition)t.siblingsLeading.some(e=>e.multiline||e.excluded&&!e.blockStatic)?t.autoPosition=false:t.cssApply({display:"inline-block",verticalAlign:"top"},true),a=s;else if(this.userSettings.supportNegativeLeftTop){let n=false;while(a&&a!==e&&(!a.rightAligned&&!a.centerAligned||!a.pageFlow)){const e=a.linear;if(n){if(a.layoutElement){a=i;break}if(t.withinX(e)&&t.withinY(e))break}else{if(t.hasPX("top")&&t.hasPX("bottom")||t.hasPX("left")&&t.hasPX("right"))break;{const i="hidden"===a.css("overflowX"),s="hidden"===a.css("overflowY");if(i&&s)break;const r=!i&&t.outsideX(e),o=!s&&t.outsideY(e);if(r&&(t.left<0||t.right>0)||o&&(t.top<0||0!==t.bottom))n=true;else if(!i&&((t.left<0||t.right>0)&&Math.ceil(t.bounds.right)<e.left||(t.left>0||t.right<0)&&Math.floor(t.bounds.left)>e.right)&&a.some(e=>e.pageFlow))n=true;else if(!s&&((t.top<0||t.bottom>0)&&Math.ceil(t.bounds.bottom)<a.bounds.top||(t.top>0||t.bottom<0)&&Math.floor(t.bounds.top)>a.bounds.bottom))n=true;else if(r&&o&&(!a.pageFlow||a.actualParent.documentRoot)&&(t.top>0||t.left>0))n=true;else{if(i||s||t.intersectX(e)||t.intersectY(e))break;n=true}}}a=a.actualParent}}break}}if(a||(a=e),a!==s){const e=t.absoluteParent;if((null==e?void 0:e.positionRelative)&&a!==e){const{left:i,right:n,top:s,bottom:a}=e,r=t.bounds;0!==i?(r.left+=i,r.right+=i):e.hasPX("left")||0===n||(r.left-=n,r.right-=n),0!==s?(r.top+=s,r.bottom+=s):e.hasPX("top")||0===a||(r.top-=a,r.bottom-=a),t.unset("box"),t.unset("linear")}let r=t.toFloat("opacity",1),o=s;do{r*=o.toFloat("opacity",1),o=o.actualParent}while(o&&o!==a);t.css("opacity",r.toString()),t.parent=a,t.containerIndex=Number.POSITIVE_INFINITY,i.add(a),n.add(s)}t.documentParent=a}});for(const e of n)e.each((e,t)=>e.containerIndex=t);for(const e of i){const t=[];let i=-1;e.each(n=>{n.containerIndex===Number.POSITIVE_INFINITY?e.some(e=>{let i=e.naturalElements.includes(n);if(!i){const t=e.cascade();i=n.ascend({condition:e=>t.includes(e)}).length>0}return i&&tn(t,e.containerIndex+(n.zIndex>=0||e!==n.actualParent?1:0)).push(n),i}):n.containerIndex>i&&(i=n.containerIndex)});const n=t.length;if(n){const s=e.children;for(let e=0,a=0,r=1;e<n;++e,++a){const n=t[e];if(n){n.sort((e,t)=>{if(e.parent===t.parent){const i=e.zIndex,n=t.zIndex;return i===n?e.id<t.id?-1:1:i<n?-1:1}return 0}).forEach(e=>e.containerIndex=i+r++);const e=s.length;for(let t=0;t<e;++t)n.includes(s[t])&&(s[t]=void 0);s.splice(a,0,...n),a+=n.length}}e.retain(Ji(s))}}}sortInitialCache(e){(e||this.cache).sort((e,t)=>{if(e.depth!==t.depth)return e.depth<t.depth?-1:1;{const i=e.documentParent,n=t.documentParent;if(i!==n){const e=i.depth,t=n.depth;return e!==t?e<t?-1:1:i.actualParent===n.actualParent?i.childIndex<n.childIndex?-1:1:i.id<n.id?-1:1}}return 0})}cascadeDocument(e,t){const i=this.userSettings.showAttributes,n="\t".repeat(t);let s="";const a=e.length;let r=0;while(r<a){const a=e[r++],o=a.node;switch(a.type){case 1:{const{controlName:e,attributes:r}=a,{id:l,renderTemplates:c}=o,h=t+1,d=o.depth<0?t+o.depth:t,u=this.getBeforeInsideTemplate(l,h),f=this.getAfterInsideTemplate(l,h);let g=n+"<"+e+(0===t?"{#0}":"")+(i?r?rn(r,h):o.extractAttributes(h):"");g+=c||""!==u||""!==f?">\n"+u+(c?this.cascadeDocument(this.sortRenderPosition(o,c),h):"")+f+n+`</${e}>\n`:" />\n",s+=this.getBeforeOutsideTemplate(l,d)+g+this.getAfterOutsideTemplate(l,d);break}case 2:{const e=a.content;e&&(s+=rn(e,t));break}}}return s}getEnclosingXmlTag(e,t="",i){return"<"+e+t+(i?`>\n${i}</${e}>\n`:" />\n")}get generateSessionId(){return(new Date).getTime().toString()}},e.Extension=q,e.ExtensionManager=class br{constructor(e){this.application=e}include(e){const t=this.application,i=t.extensions;let n=e.name;const s=i.findIndex(e=>e.name===n);if(-1!==s)return i[s]=e,true;{const s=e.framework;if(s>0&&e.dependencies.forEach(e=>{if(e.preload&&(n=e.name,null===this.retrieve(n))){const e=t.builtInExtensions[n];e&&this.include(e)}}),(0===s||$(s,t.framework))&&e.dependencies.every(e=>!!this.retrieve(e.name)))return e.application=t,i.push(e),true}return false}exclude(e){const t=this.extensions,i=t.length;for(let n=0;n<i;++n)if(t[n]===e)return t.splice(n,1),true;return false}retrieve(e){const t=this.extensions,i=t.length;let n=0;while(n<i){const i=t[n++];if(i.name===e)return i}return null}optionValue(e,t){var i;const n=null===(i=this.retrieve(e))||void 0===i?void 0:i.options;return K(n)?n[t]:void 0}optionValueAsObject(e,t){const i=this.optionValue(e,t);return K(i)?i:null}optionValueAsString(e,t){const i=this.optionValue(e,t);return"string"==typeof i?i:""}optionValueAsNumber(e,t){const i=this.optionValue(e,t);return"number"==typeof i?i:NaN}optionValueAsBoolean(e,t){const i=this.optionValue(e,t);return"boolean"==typeof i&&i}get extensions(){return this.application.extensions}},e.ExtensionUI=fn,e.File=ee,e.FileUI=class xr extends ee{get directory(){return this.resource.controllerSettings.directory}},e.LayoutUI=Qt,e.Node=bt,e.NodeGroupUI=class yr extends $t{init(){var e;this.length&&(this.each(e=>e.parent=this),this.setBounds(),this.saveAsInitial(),this.dir=(null===(e=this.actualParent)||void 0===e?void 0:e.dir)||"")}setBounds(){if(this.length)return this._bounds=$t.outerRegion(this),this._bounds}previousSiblings(e){var t;const i=((null===(t=this._initial)||void 0===t?void 0:t.children)||this.children)[0];return(null==i?void 0:i.previousSiblings(e))||[]}nextSiblings(e){var t;const i=(null===(t=this._initial)||void 0===t?void 0:t.children)||this.children,n=i[i.length-1];return(null==n?void 0:n.nextSiblings(e))||[]}get block(){let e=this._cached.block;return void 0===e&&(e=this.some(e=>e.block),this._cached.block=e),e}get blockStatic(){let e=this._cached.blockStatic;if(void 0===e){const t=this.actualParent||this.documentParent;e=this.some(e=>e.blockStatic||e.percentWidth>0)||t.percentWidth>0||this.layoutVertical&&(t.hasWidth||this.some(e=>e.centerAligned||e.rightAligned))||t.blockStatic&&(t.layoutVertical||this.hasAlign(256)),(e||0!==this.containerType)&&(this._cached.blockStatic=e)}return e||this.hasAlign(64)}get blockDimension(){let e=this._cached.blockDimension;return void 0===e&&(e=this.every(e=>e.blockDimension),this._cached.blockDimension=e),e}get blockVertical(){let e=this._cached.blockVertical;return void 0===e&&(e=this.every(e=>e.blockVertical),this._cached.blockVertical=e),e}get inline(){let e=this._cached.inline;return void 0===e&&(e=this.every(e=>e.inline),this._cached.inline=e),e&&!this.hasAlign(64)}get inlineStatic(){let e=this._cached.inlineStatic;return void 0===e&&(e=this.every(e=>e.inlineStatic),this._cached.inlineStatic=e),e&&!this.hasAlign(64)}get inlineVertical(){let e=this._cached.inlineVertical;return void 0===e&&(e=this.every(e=>e.inlineVertical),this._cached.inlineVertical=e),e&&!this.hasAlign(64)}get inlineFlow(){let e=this._cached.inlineFlow;return void 0===e&&(e=this.every(e=>e.inlineFlow),this._cached.inlineFlow=e),e&&!this.hasAlign(64)}get inlineDimension(){let e=this._cached.inlineDimension;return void 0===e&&(e=this.every(e=>e.inlineDimension),this._cached.inlineDimension=e),e&&!this.hasAlign(64)}get pageFlow(){let e=this._cached.pageFlow;if(void 0===e){const t=this.css("position");e="absolute"!==t&&"fixed"!==t,this._cached.pageFlow=e}return e}set baseline(e){this._cached.baseline=e}get baseline(){let e=this._cached.baseline;if(void 0===e){const t=this.cssInitial("verticalAlign",true);e=""===t?this.every(e=>e.baseline):"baseline"===t||gn(t,true),this._cached.baseline=e}return e}get float(){let e=this._cached.float;return void 0===e&&(this.floating?this.hasAlign(2048)?e="right":this.every(e=>"right"===e.float)?(this.addAlign(2048),e="right"):e="left":e="none",this._cached.float=e),e}get floating(){let e=this._cached.floating;return void 0===e&&(e=this.every(e=>e.floating||e.hasAlign(512)),this._cached.floating=e),e}get display(){return super.display||(this.some(e=>e.blockStatic)?"block":this.blockDimension?"inline-block":"inline")}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}set childIndex(e){super.childIndex=e}get childIndex(){let e=super.childIndex;return e===Number.POSITIVE_INFINITY&&(this.each(t=>e=Math.min(t.childIndex,e)),super.childIndex=e),e}set containerIndex(e){super.containerIndex=e}get containerIndex(){let e=super.containerIndex;return e===Number.POSITIVE_INFINITY&&(this.each(t=>e=Math.min(t.containerIndex,e)),super.containerIndex=e),e}get centerAligned(){let e=this._cached.centerAligned;return void 0===e&&(e=this.every(e=>e.centerAligned),this._cached.centerAligned=e),e}get rightAligned(){let e=this._cached.rightAligned;return void 0===e&&(e=this.every(e=>e.rightAligned),this._cached.rightAligned=e),e||this.hasAlign(2048)}get tagName(){return""}get plainText(){return false}get styleText(){return false}get multiline(){return false}get nodeGroup(){return true}get naturalChild(){return false}get naturalElement(){return false}get pseudoElement(){return false}get previousSibling(){return null}get nextSibling(){return null}get previousElementSibling(){return null}get nextElementSibling(){return null}},e.NodeList=t,e.NodeUI=$t,e.Resource=h,e.ResourceUI=ps,e.extensions=or,e.lib=gr,Object.defineProperty(e,"__esModule",{value:true})}));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,(function(e){"use strict";const t=squared.lib,{CSS_UNIT:s,calculateStyle:i,calculateVar:n,convertAngle:a,getFontSize:r,isLength:o,isPercent:l,parseUnit:c}=t.css,{getNamedItem:h}=t.dom,{clamp:u,convertRadian:f,hypotenuse:d}=t.math,{STRING:p}=t.regex,{getStyleValue:g}=t.session,{convertCamelCase:m,convertFloat:y,isString:v}=t.util,S=`(${p.DECIMAL})`,b={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},T={MATRIX:new RegExp(`(matrix(?:3d)?)\\(${S},\\s+${S},\\s+${S},\\s+${S},\\s+${S},\\s+${S}(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?(?:,\\s+${S})?\\)`,"g"),ROTATE:new RegExp(`(rotate[XY]?)\\(${p.CSS_ANGLE}\\)`,"g"),SKEW:new RegExp(`(skew[XY]?)\\(${p.CSS_ANGLE}(?:,\\s+${p.CSS_ANGLE})?\\)`,"g"),SCALE:new RegExp(`(scale[XY]?)\\(${S}(?:,\\s+${S})?\\)`,"g"),TRANSLATE:new RegExp(`(translate[XY]?)\\(${p.LENGTH_PERCENTAGE}(?:,\\s+${p.LENGTH_PERCENTAGE})?\\)`,"g")},k=/rotate\((-?[\d.]+)(?:,?\s+(-?[\d.]+))?(?:,?\s+(-?[\d.]+))?\)/g;function w(e,t,s,i,n){o(i)?t[s]=c(i,r(e)):l(i)&&(t[s]=parseFloat(i)/100*n)}const x={svg:e=>"svg"===e.tagName,g:e=>"g"===e.tagName,symbol:e=>"symbol"===e.tagName,path:e=>"path"===e.tagName,shape:e=>e.tagName in b,image:e=>"image"===e.tagName,use:e=>"use"===e.tagName,line:e=>"line"===e.tagName,rect:e=>"rect"===e.tagName,circle:e=>"circle"===e.tagName,ellipse:e=>"ellipse"===e.tagName,polygon:e=>"polygon"===e.tagName,polyline:e=>"polyline"===e.tagName,clipPath:e=>"clipPath"===e.tagName,pattern:e=>"pattern"===e.tagName,linearGradient:e=>"linearGradient"===e.tagName,radialGradient:e=>"radialGradient"===e.tagName},E={applyX:(e,t,s)=>e.a*t+e.c*s+e.e,applyY:(e,t,s)=>e.b*t+e.d*s+e.f,clone:e=>({a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}),rotate(e){const t=f(e),s=Math.cos(t),i=Math.sin(t);return{a:s,b:i,c:-1*i,d:s,e:0,f:0}},skew:(e=0,t=0)=>({a:1,b:Math.tan(f(t)),c:Math.tan(f(e)),d:1,e:0,f:0}),scale:(e=1,t=1)=>({a:e,b:0,c:0,d:t,e:0,f:0}),translate:(e=0,t=0)=>({a:1,b:0,c:0,d:1,e:e,f:t})},R={create:(e,t,s=0,i=true,n=true)=>({type:e,matrix:t,angle:s,method:{x:i,y:n}}),parse(e,t){const s=t||e.style.getPropertyValue("transform");if(""!==s){const i=[];for(const n in T){const o=T[n];let l;while(null!==(l=o.exec(s))){const s=l.index,n=l[1],o=n.endsWith("X"),h=n.endsWith("Y");if(n.startsWith("rotate")){const e=a(l[2],l[3]),t=E.rotate(e);o?(t.a=1,t.b=0,t.c=0):h&&(t.b=0,t.c=0,t.d=1),i[s]=R.create(SVGTransform.SVG_TRANSFORM_ROTATE,t,e,!o,!h)}else if(n.startsWith("skew")){const e=a(l[2],l[3]),t=h?0:e,n=h?e:l[4]&&l[5]?a(l[4],l[5]):0,r=E.skew(t,n);o?i[s]=R.create(SVGTransform.SVG_TRANSFORM_SKEWX,r,t,true,false):h?i[s]=R.create(SVGTransform.SVG_TRANSFORM_SKEWY,r,n,false,true):(i[s]=R.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign(Object.assign({},r),{b:0}),t,true,false),0!==n&&(i[s+1]=R.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign(Object.assign({},r),{c:0}),n,false,true)))}else if(n.startsWith("scale")){const e=h?void 0:parseFloat(l[2]),t=h?parseFloat(l[2]):!o&&l[3]?parseFloat(l[3]):e;i[s]=R.create(SVGTransform.SVG_TRANSFORM_SCALE,E.scale(e,o?void 0:t),0,!h,!o)}else if(n.startsWith("translate")){const t=r(e),n=c(l[2],t),a=!o&&l[3]?c(l[3],t):0,u=h?0:n,f=h?n:a;i[s]=R.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,E.translate(u,f),0)}else if(n.startsWith("matrix")){const n=R.matrix(e,t);n&&(i[s]=R.create(SVGTransform.SVG_TRANSFORM_MATRIX,n))}}o.lastIndex=0}const n=[];return i.forEach(e=>{e.fromCSS=true,n.push(e)}),n}},matrix(e,t){T.MATRIX.lastIndex=0;const s=T.MATRIX.exec(t||getComputedStyle(e).transform);if(s)switch(s[1]){case"matrix":return{a:parseFloat(s[2]),b:parseFloat(s[3]),c:parseFloat(s[4]),d:parseFloat(s[5]),e:parseFloat(s[6]),f:parseFloat(s[7])};case"matrix3d":return{a:parseFloat(s[2]),b:parseFloat(s[3]),c:parseFloat(s[6]),d:parseFloat(s[7]),e:parseFloat(s[14]),f:parseFloat(s[15])}}},origin(e,t){v(t)||(t=_(e,"transform-origin"));const s={x:0,y:0};if(""!==t){const i=M(e);let n,a;if(i)({width:n,height:a}=i);else{const t=e.parentElement;if(t instanceof SVGGraphicsElement){const e=t.viewportElement;e&&(x.svg(e)||x.symbol(e))&&({width:n,height:a}=e.viewBox.baseVal)}}n&&a||({width:n,height:a}=e.getBoundingClientRect());const r=t.split(" ");switch(1===r.length&&r.push("center"),r[0]){case"0%":case"left":break;case"100%":case"right":s.x=n;break;case"center":r[0]="50%";default:w(e,s,"x",r[0],n)}switch(r[1]){case"0%":case"top":break;case"100%":case"bottom":s.y=a;break;case"center":r[1]="50%";default:w(e,s,"y",r[1],a)}}return s},rotateOrigin(e,t="transform"){const s=h(e,t),i=[];if(""!==s){let e;k.lastIndex=0;while(null!==(e=k.exec(s))){const t=parseFloat(e[1]);0!==t&&i.push({angle:t,x:y(e[2]),y:y(e[3])})}}return i},typeAsName(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}};function A(e){const t=e.getBoundingClientRect();return t.x=t.left,t.y=t.top,t}function V(e,t,s){switch(t=m(t)){case"clipPath":case"height":case"offsetAnchor":case"offsetPath":case"transform":case"transformOrigin":case"width":return i(e,t,s,M(e));case"animationDelay":case"animationDuration":case"animationIterationCount":case"offsetDistance":case"offsetRotate":return i(e,t,s);case"fill":case"stroke":return i(e,"fontColor",s);case"fillOpacity":case"strokeOpacity":{const t=n(e,s,{boundingSize:1,unitType:64});return isNaN(t)?"":u(t).toString()}case"strokeMiterlimit":{const t=n(e,s,{supportPercent:false,unitType:64,min:1});return isNaN(t)?"":t.toString()}}const a=M(e)||e.getBoundingClientRect(),r=e=>{const{width:t,height:s}=a;return e?Math.min(t,s):d(t,s)};switch(t){case"cx":case"x":case"x1":case"x2":{const t=n(e,s,{boundingSize:a.width});return isNaN(t)?"":t.toString()}case"cy":case"y":case"y1":case"y2":{const t=n(e,s,{boundingSize:a.height});return isNaN(t)?"":t.toString()}case"r":{const t=n(e,s,{boundingSize:r(true),min:0});return isNaN(t)?"0":t.toString()}case"rx":{const t=n(e,s,{boundingSize:a.width,min:0});return isNaN(t)?"0":x.rect(e)?Math.min(t,a.width/2).toString():t.toString()}case"ry":{const t=n(e,s,{boundingSize:a.height,min:0});return isNaN(t)?"0":x.rect(e)?Math.min(t,a.height/2).toString():t.toString()}case"strokeDashoffset":{const t=n(e,s,{boundingSize:r(true),unitType:64});return isNaN(t)?"":t.toString()}case"strokeWidth":{const t=n(e,s,{boundingSize:r(false),unitType:64,min:0});return isNaN(t)?"":t.toString()}}return""}function _(e,t,s=false){let i;return i=s?h(e,t)||g(e,t):g(e,t)||function(e,t){var s;const i=e.dataset.baseValue;if(i)try{const e=JSON.parse(i);if(e)return(null===(s=e[t])||void 0===s?void 0:s.toString().trim())||""}catch(e){}return""}(e,t)||h(e,t),v(i)||!s&&!Array.from(e.style).includes(t)||(i=getComputedStyle(e).getPropertyValue(t)),i||""}function N(e,t,s=true){let i,n=e;do{if(i=_(n,t,s),""!==i&&"inherit"!==i)break;n=n.parentElement}while(n&&!(n instanceof HTMLElement));return i}function P(e,t){const s=h(e,"href");if("#"===s.charAt(0)){const i=s.substring(1);let n;if(t)n=t;else{n=e.parentElement;while(n&&n.parentElement instanceof SVGGraphicsElement)n=n.parentElement}if(n){const e=n.querySelectorAll("*"),t=e.length;let s=0;while(s<t){const t=e.item(s++);if(t.id===i&&t instanceof SVGElement)return t}}else{const e=document.getElementById(i);if(e instanceof SVGElement)return e}}return null}function M(e){let t=e.parentElement;while(t){if(x.svg(t)||x.symbol(t)){const e=t.viewBox;if(e){const t=e.baseVal;if(t.width>0&&t.height>0)return t}}t=t.parentElement}}function F(e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t}function C(e){return F(e).getTotalLength()}var G=Object.freeze({__proto__:null,SVG:x,MATRIX:E,TRANSFORM:R,getDOMRect:A,calculateStyle:V,getAttribute:_,getParentAttribute:N,getTargetElement:P,getNearestViewBox:M,createPath:F,getPathLength:C});const O=squared.lib,{isAngle:I,parseAngle:L}=O.css,{getNamedItem:B}=O.dom,{absoluteAngle:X,offsetAngleY:$,relativeAngle:Y,truncate:z,truncateFraction:D,truncateString:W}=O.math,{CHAR:q,STRING:j,XML:U}=O.regex,{convertWord:K,hasBit:H,isArray:Z,isString:Q,objectMap:J}=O.util,ee=new RegExp(j.DECIMAL,"g"),te=/([A-Za-z])([^A-Za-z]+)?/g,se=new Map;class ie{static drawLine(e,t,s=0,i=0,n){return n&&(e=z(e,n),t=z(t,n),s=z(s,n),i=z(i,n)),`M${e},${t} L${s},${i}`}static drawRect(e,t,s=0,i=0,n){return n?(e=z(s+e,n),t=z(i+t,n),s=z(s,n),i=z(i,n)):(e+=s,t+=i),`M${s},${i} ${e},${i} ${e},${t} ${s},${t} Z`}static drawEllipse(e,t,s,i,n){void 0===i&&(i=s);let a=2*s;return n?(e=z(e-s,n),t=z(t,n),s=z(s,n),i=z(i,n),a=z(a,n)):e-=s,`M${e},${t} a${s},${i},0,0,1,${a},0 a${s},${i},0,0,1,-${a},0`}static drawPolyline(e,t){let s="M";return t?e.forEach(e=>s+=` ${z(e.x,t)},${z(e.y,t)}`):e.forEach(e=>s+=` ${e.x},${e.y}`),s}static drawPath(e,t){let s="";return e.forEach(e=>{switch(s+=(""!==s?" ":"")+e.key,e.key.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":s+=e.coordinates.join(",");break;case"H":s+=e.coordinates[0];break;case"V":s+=e.coordinates[1];break;case"A":s+=`${e.radiusX},${e.radiusY},${e.xAxisRotation},${e.largeArcFlag},${e.sweepFlag},${e.coordinates.join(",")}`}}),t?W(s,t):s}static drawRefit(e,t,s){let i;if(x.path(e)){if(i=B(e,"d"),null==t?void 0:t.requireRefit){const e=ie.getPathCommands(i);if(e.length){const n=ie.getPathPoints(e);n.length&&(t.refitPoints(n),i=ie.drawPath(ie.syncPathPoints(e,n),s))}}}else if(x.line(e)){const n=[{x:e.x1.baseVal.value,y:e.y1.baseVal.value},{x:e.x2.baseVal.value,y:e.y2.baseVal.value}];(null==t?void 0:t.requireRefit)&&t.refitPoints(n),i=ie.drawPolyline(n,s)}else if(x.circle(e)||x.ellipse(e)){let n,a;x.ellipse(e)?(n=e.rx.baseVal.value,a=e.ry.baseVal.value):(n=e.r.baseVal.value,a=n);const r=[{x:e.cx.baseVal.value,y:e.cy.baseVal.value,rx:n,ry:a}];(null==t?void 0:t.requireRefit)&&t.refitPoints(r);const o=r[0];i=ie.drawEllipse(o.x,o.y,o.rx,o.ry,s)}else if(x.rect(e)){let n=e.x.baseVal.value,a=e.y.baseVal.value,r=e.width.baseVal.value,o=e.height.baseVal.value;(null==t?void 0:t.requireRefit)&&(n=t.refitX(n),a=t.refitY(a),r=t.refitSize(r),o=t.refitSize(o)),i=ie.drawRect(r,o,n,a,s)}else if(x.polygon(e)||x.polyline(e)){const n=ie.clonePoints(e.points);(null==t?void 0:t.requireRefit)&&t.refitPoints(n),i=x.polygon(e)?ie.drawPolygon(n,s):ie.drawPolyline(n,s)}else i="";return i}static transformRefit(e,t,s,i,n){const a=ie.getPathCommands(e);if(a.length){let r=ie.getPathPoints(a);if(r.length){const o=Z(t);o&&(r=ie.applyTransforms(t,r,s&&R.origin(s.element))),(null==i?void 0:i.requireRefit)&&i.refitPoints(r),e=ie.drawPath(ie.syncPathPoints(a,r,o),n)}}return e}static getOffsetPath(e,t="auto 0deg"){const s=F(e),i=Math.ceil(s.getTotalLength()),n=[];if(i){const a=[],r=[];let o=0,l=0;I(t)?o=L(t):(ie.getPathCommands(e).forEach(e=>{switch(e.key.toUpperCase()){case"M":case"L":case"H":case"V":case"Z":e.value.forEach(e=>{a.push(e),r.push(false)});break;case"C":case"S":case"Q":case"T":case"A":a.push(e.end),r.push(true)}}),"auto 0deg"!==t&&(l=L(t.split(" ").pop())));let c,h=false,u=0,f=0,d=-1;while(++d<=i){const e=s.getPointAtLength(d);if(a.length){const t=a.findIndex(t=>{const s=t.x.toString(),i=t.y.toString();return s===e.x.toPrecision(s.length-(s.includes(".")?1:0))&&i===e.y.toPrecision(i.length-(i.includes(".")?1:0))});if(-1!==t){const s=a[t+1];s?(h=r[t+1],h?(c=ie.centerPoints(a[t],s),o=0):(c=void 0,o=D(X(e,s)))):c=void 0,f=0,a.splice(0,t+1),r.splice(0,t+1)}}let t;h?(t=c?D(Y(c,e)):0,u>0&&u%360==0&&0===Math.floor(t)&&(f=u),t+=f):t=o,t+=l,n.push({key:d,value:e,rotate:t}),u=Math.ceil(t)}}return n}static getPathCommands(e){e=e.trim();const t=[];let s,i=true;te.lastIndex=0;while(null!==(s=te.exec(e))){let e=s[1];if(i&&"M"!==e.toUpperCase())break;const n=ie.parseCoordinates((s[2]||"").trim());let a,r,o,l,c,h,u;if(!i){const e=t[t.length-1];a=e.key.toUpperCase(),r=e.end}switch(e.toUpperCase()){case"M":i&&(e="M");case"L":if(n.length>=2){n.length%2!=0&&n.length--;break}continue;case"H":if(r&&n.length){n[1]="h"===e?0:r.y,n.length=2;break}continue;case"V":if(r&&n.length){const t=n[0];n[0]="v"===e?0:r.x,n[1]=t,n.length=2;break}continue;case"Z":if(i)continue;{const s=t[0].coordinates;n[0]=s[0],n[1]=s[1],n.length=2,e="Z";break}case"C":if(n.length>=6){n.length=6;break}continue;case"S":if(n.length>=4&&("C"===a||"S"===a)){n.length=4;break}continue;case"Q":if(n.length>=4){n.length=4;break}continue;case"T":if(n.length>=2&&("Q"===a||"T"===a)){n.length=2;break}continue;case"A":if(n.length>=7){[o,l,c,h,u]=n.splice(0,5),n.length=2;break}continue;default:continue}const f=n.length;if(f>=2){const s=e===e.toLowerCase(),a=[];for(let e=0;e<f;e+=2){let t=n[e],i=n[e+1];s&&r&&(t+=r.x,i+=r.y),a.push({x:t,y:i})}t.push({key:e,value:a,start:a[0],end:a[a.length-1],relative:s,coordinates:n,radiusX:o,radiusY:l,xAxisRotation:c,largeArcFlag:h,sweepFlag:u}),i=false}}return t}static getPathPoints(e){const t=[];let s=0,i=0;return e.forEach(e=>{const n=e.coordinates,a=n.length;for(let r=0;r<a;r+=2){e.relative?(s+=n[r],i+=n[r+1]):(s=n[r],i=n[r+1]);const a={x:s,y:i};"A"===e.key.toUpperCase()&&(a.rx=e.radiusX,a.ry=e.radiusY),t.push(a)}e.relative&&(e.key=e.key.toUpperCase())}),t}static syncPathPoints(e,t,s=false){e:{let i;const n=e.length;let a=0;while(a<n){const n=e[a++],r=n.coordinates;if(n.relative){if(!i)break;if(!s||"H"!==n.key&&"V"!==n.key){const e=r.length;for(let s=0,a=0;s<e;s+=2){const e=t.shift();if(!e)break e;r[s]=e.x-i.x,r[s+1]=e.y-i.y,"a"===n.key&&void 0!==e.rx&&void 0!==e.ry&&(n.radiusX=e.rx,n.radiusY=e.ry),n.value[a++]=e}n.key=n.key.toLowerCase()}else{const e=t.shift();if(!e)break e;r[0]=e.x,r[1]=e.y,n.value[0]=e,n.start=e,n.end=e,n.key="L",n.relative=false}i=n.end}else{switch(n.key.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":{const s=r.length;for(let i=0,a=0;i<s;i+=2){const s=t.shift();if(!s){e=[];break e}r[i]=s.x,r[i+1]=s.y,n.value[a++]=s}break}case"A":{const s=t.shift();if(!s){e=[];break e}r[0]=s.x,r[1]=s.y,n.radiusX=s.rx,n.radiusY=s.ry,n.value[0]=s;break}}n.relative||(i=n.end)}}}return e}static filterTransforms(e,t){const s=[];return e.forEach(e=>{const i=e.type;if(!t||!t.includes(i)){switch(i){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===e.angle)return;break;case SVGTransform.SVG_TRANSFORM_SCALE:{const t=e.matrix;if(1===t.a&&1===t.d)return;break}case SVGTransform.SVG_TRANSFORM_TRANSLATE:{const t=e.matrix;if(0===t.e&&0===t.f)return;break}}s.push(e)}}),s}static applyTransforms(e,t,s){const i=ie.clonePoints(t);return e.slice(0).reverse().forEach(e=>{const t=e.matrix;let n=0,a=0,r=0,o=0;if(s){const{x:i,y:l}=s,c=e.method;switch(e.type){case SVGTransform.SVG_TRANSFORM_SCALE:c.x&&(r=i*(1-t.a)),c.y&&(o=l*(1-t.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:c.y&&(a-=l);break;case SVGTransform.SVG_TRANSFORM_SKEWY:c.x&&(n-=i);break;case SVGTransform.SVG_TRANSFORM_ROTATE:c.x&&(n-=i,r=i+$(e.angle,i)),c.y&&(a-=l,o=l+$(e.angle,l))}}i.forEach(s=>{const{x:i,y:l}=s;if(s.x=E.applyX(t,i,l+a)+r,s.y=E.applyY(t,i+n,l)+o,e.type===SVGTransform.SVG_TRANSFORM_SCALE){const{rx:e,ry:i}=s;void 0!==e&&void 0!==i&&(s.rx=E.applyX(t,e,i+a),s.ry=E.applyY(t,e+n,i))}})}),i}static convertTransforms(e){const t=e.numberOfItems,s=new Array(t);let i=0;while(i<t){const{type:t,matrix:n,angle:a}=e.getItem(i);s[i++]=R.create(t,n,a)}return s}static clonePoints(e){if(Array.isArray(e)){const t=e.length,s=new Array(t);let i=-1;while(++i<t){const{x:t,y:n,rx:a,ry:r}=e[i],o={x:t,y:n};void 0!==a&&void 0!==r&&(o.rx=a,o.ry=r),s[i]=o}return s}{const t=e.numberOfItems,s=new Array(t);let i=0;while(i<t){const{x:t,y:n}=e.getItem(i);s[i++]={x:t,y:n}}return s}}static minMaxPoints(e,t=false){let{x:s,y:i}=e[0],n=s,a=i;const r=e.length;let o=0;while(++o<r){const{x:r,y:l}=e[o];if(t&&o>0){const{rx:t,ry:c}=e[o];if(void 0!==t&&void 0!==c){const{x:h,y:u}=e[o-1];let f=(r+h)/2,d=(l+u)/2;r>h?d-=c:r<h&&(d+=c),l<u?f+=t:l>h&&(f-=t),s=Math.min(f,s),n=Math.max(f,n),i=Math.min(d,i),a=Math.max(d,a)}}r<s?s=r:r>n&&(n=r),l<i?i=l:l>a&&(a=l)}return[s,i,n,a]}static centerPoints(...e){const t=this.minMaxPoints(e);return{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}}static convertPoints(e){const t=e.length;if(t%2==0){const s=new Array(t/2);for(let i=0,n=0;i<t;i+=2)s[n++]={x:e[i],y:e[i+1]};return s}return[]}static parsePoints(e){return J(e.trim().split(q.SPACE),e=>{const[t,s]=e.split(U.SEPARATOR);return{x:parseFloat(t),y:parseFloat(s)}})}static parseCoordinates(e){const t=[];let s;ee.lastIndex=0;while(null!==(s=ee.exec(e))){const e=parseFloat(s[0]);isNaN(e)||t.push(e)}return t}static getBoxRect(e){let t=[];e.forEach(e=>t=t.concat(ie.getPathPoints(ie.getPathCommands(e))));const[s,i,n,a]=this.minMaxPoints(t,true);return{top:i,right:n,bottom:a,left:s}}static setName(e){if(e){let t,s="";if(Q(e.id)){const i=K(e.id,true);se.has(i)||(s=i),t=i}else t=e.tagName;let i=se.get(t)||0;return""!==s?(se.set(s,i),s):(se.set(t,++i),`${t}_${i}`)}return se.clear(),""}}ie.isContainer=e=>H(e.instanceType,2),ie.isElement=e=>H(e.instanceType,4),ie.isShape=e=>H(e.instanceType,2052),ie.isAnimate=e=>H(e.instanceType,16392),ie.isAnimateTransform=e=>H(e.instanceType,49160),ie.asSvg=e=>18===e.instanceType,ie.asG=e=>34===e.instanceType,ie.asPattern=e=>130===e.instanceType,ie.asShapePattern=e=>258===e.instanceType,ie.asUsePattern=e=>514===e.instanceType,ie.asImage=e=>4100===e.instanceType,ie.asUse=e=>10244===e.instanceType,ie.asUseSymbol=e=>66===e.instanceType,ie.asSet=e=>8===e.instanceType,ie.asAnimate=e=>16392===e.instanceType,ie.asAnimateTransform=e=>49160===e.instanceType,ie.asAnimateMotion=e=>114696===e.instanceType,ie.drawCircle=(e,t,s,i)=>ie.drawEllipse(e,t,s,s,i),ie.drawPolygon=(e,t)=>e.length?ie.drawPolyline(e,t)+"Z":"";const{getNamedItem:ne}=squared.lib.dom;function ae(e,t,s,i,n){const a=e.length;let r=0;while(r<a){const a=e[r++];a.x+=t,a.y+=s,void 0!==a.rx&&void 0!==a.ry&&(a.rx*=i,a.ry*=n)}}var re=e=>class extends e{constructor(){super(...arguments),this._baseVal={}}setBaseValue(e,t){if(void 0!==t){if(this.verifyBaseValue(e,t))return this._baseVal[e]=t,true}else switch(e){case"d":return this._baseVal[e]=ne(this.element,"d"),true;case"points":{const t=this.element[e];if(Array.isArray(t))return this._baseVal[e]=ie.clonePoints(t),true;break}default:{const t=this.element[e];if(t){const s=t.baseVal;if(s)return this._baseVal[e]=s.value,true}break}}return false}getBaseValue(e,t){var s;return null!==(s=this._baseVal[e])&&void 0!==s?s:this.setBaseValue(e)?void 0:t}refitBaseValue(e,t,s,i=1,n=1){const a=this._baseVal;for(const r in a){const o=a[r];if("string"==typeof o){if("d"===r){const l=ie.getPathCommands(o),c=ie.getPathPoints(l);ae(c,e,t,i,n),a[r]=ie.drawPath(ie.syncPathPoints(l,c),s)}}else if("number"==typeof o)switch(r){case"cx":case"x1":case"x2":case"x":a[r]+=e;break;case"cy":case"y1":case"y2":case"y":a[r]+=t;break;case"r":a[r]*=Math.min(i,n);break;case"rx":case"width":a[r]*=i;break;case"ry":case"height":a[r]*=n}else Array.isArray(o)&&"points"===r&&ae(o,e,t,i,n)}}verifyBaseValue(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}};const oe=squared.lib,{getFontSize:le,isLength:ce,parseUnit:he}=oe.css,{getNamedItem:ue}=oe.dom,{capitalize:fe,hasBit:de,isNumber:pe,isString:ge}=oe.util,me=/-?\d+ms$/,ye=/-?\d+s$/,ve=/-?\d+min$/,Se=/-?\d+(.\d+)?h$/,be=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/;function Te(e,t){const s=de(this.fillMode,t);e?s||(this.fillMode|=t):s&&(this.fillMode^=t)}class ke{constructor(e,t){if(this.element=null,this.baseValue="",this.fillMode=0,this.synchronizeState=0,this.paused=false,this.animationElement=null,this._attributeName="",this._duration=-1,this._delay=0,this._to="",this._dataset={},e){const t=e.dataset;for(const e in t){const s=t[e];if(ge(s))try{this._dataset[e]=JSON.parse(s)}catch(e){}}this.element=e}if(t){this.animationElement=t,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");const e=ue(t,"dur");""!==e&&"indefinite"!==e&&(this.duration=ke.convertClockTime(e))}}static convertClockTime(e){let t=0,s=0;if(pe(e))t=parseInt(e);else if(me.test(e))s=parseFloat(e);else if(ye.test(e))t=parseFloat(e);else if(ve.test(e))t=60*parseFloat(e);else if(Se.test(e))t=60*parseFloat(e)*60;else{const i=be.exec(e);if(i){const e=i[2],n=i[3],a=i[4],r=i[5];e&&(t+=60*parseInt(e)*60),n&&(t+=60*parseInt(n)),a&&(t+=parseInt(a)),r&&(s=parseInt(r)*(r.length<3?Math.pow(10,3-r.length):1)),i[1]&&(t*=-1,s*=-1)}}return 1e3*t+s}setAttribute(e,t){const s=this.animationElement;if(s){const i=ue(s,e);""!==i&&(ge(t)?(t=t.trim(),this[e+fe(t)]=i===t):this[e]=i)}}addState(...e){e.forEach(e=>{de(this.synchronizeState,e)||(this.synchronizeState|=e)})}removeState(...e){e.forEach(e=>{de(this.synchronizeState,e)&&(this.synchronizeState^=e)})}hasState(...e){return e.some(e=>de(this.synchronizeState,e))}set attributeName(e){var t,s,i,n;if("transform"!==e&&!ge(this.baseValue)){let a=null===(s=null===(t=this._dataset.baseValue)||void 0===t?void 0:t[e])||void 0===s?void 0:s.toString().trim();if(a)this.baseValue=a;else{const t=this.element;if(t){switch(e){case"opacity":case"stroke-opacity":case"fill-opacity":a=_(t,e)||"1";break;default:a=_(t,e)}if(ge(a))this.baseValue=a;else{const s=this.animationElement;if(s&&"paused"===getComputedStyle(t).animationPlayState){const t=s.parentElement;a=null===(n=null===(i=null==t?void 0:t[e])||void 0===i?void 0:i.baseVal)||void 0===n?void 0:n.valueAsString,a&&ce(a)&&(this.baseValue=he(a,le(t)).toString())}}}}}this._attributeName=e}get attributeName(){return this._attributeName}set delay(e){this._delay=e}get delay(){return this._delay}set duration(e){this._duration=Math.round(e)}get duration(){return this._duration}set to(e){this._to=e}get to(){return this._to}set fillBackwards(e){Te.bind(this,e,8)()}get fillBackwards(){return de(this.fillMode,8)}set fillForwards(e){Te.bind(this,e,4)()}get fillForwards(){return de(this.fillMode,4)}set fillFreeze(e){Te.bind(this,e,2)()}get fillFreeze(){return de(this.fillMode,2)}get fillReplace(){const e=this.fillMode;return 0===e||8===e}get parentContainer(){let e=this._parent;while(e&&!ie.isContainer(e))e=e.parent;return e}set parent(e){this._parent=e}get parent(){return this._parent}set group(e){this._group=e}get group(){return this._group||{id:Number.NEGATIVE_INFINITY,name:""}}set setterType(e){}get setterType(){return true}get dataset(){return this._dataset}get instanceType(){return 8}}const we={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"},xe="cubic-bezier\\(([\\d.]+), ([\\d.]+), ([\\d.]+), ([\\d.]+)\\)";var Ee=Object.freeze({__proto__:null,KEYSPLINE_NAME:we,STRING_CUBICBEZIER:xe});const Re=squared.lib,{getHexCode:Ae,parseColor:Ve}=Re.color,{getFontSize:_e,isLength:Ne,parseUnit:Pe}=Re.css,{getNamedItem:Me}=Re.dom,{CHAR:Fe,XML:Ce}=Re.regex,{flatMap:Ge,isNumber:Oe,replaceMap:Ie,sortNumber:Le,trimEnd:Be}=Re.util,Xe=/^\s*[\d.]+\s+[\d.]+\s+[\d.]+\s+[\d.]+\s*$/,$e=e=>parseFloat((1-e).toPrecision(5));class Ye extends ke{constructor(e,t){if(super(e,t),this.type=0,this.additiveSum=false,this.accumulateSum=false,this._iterationCount=1,this._from="",this._reverse=false,this._alternate=false,this._setterType=false,this._repeatDuration=-1,this._timingFunction="",t){const e=Me(t,"values"),s=-1!==this.duration?Ye.toFractionList(Me(t,"keyTimes")):[];if(""!==e){const t=Be(e,";").split(Ce.DELIMITER);this.values=t;const i=t.length;i>1&&i===s.length?(this.from=t[0],this.to=t[i-1],this.keyTimes=s):1===i&&(this.to=this.values[0],this.convertToValues())}else this.from=Me(t,"from"),this.convertToValues(s);const i=Me(t,"repeatDur");""!==i&&"indefinite"!==i&&(this._repeatDuration=ke.convertClockTime(i));const n=Me(t,"repeatCount");this.iterationCount="indefinite"===n?-1:parseFloat(n),"animate"===t.tagName&&this.setCalcMode()}}static convertTimingFunction(e){const t=we[e];if(t)return t;if(Xe.test(e))return e;if(e.startsWith("step"))return we.linear;{const t=new RegExp(xe).exec(e);return t?t[1]+" "+t[2]+" "+t[3]+" "+t[4]:we.ease}}static convertStepTimingFunction(e,t,s,i,n,a){const r=i[n],o=i[n+1];let l,c;switch(e){case"fill":case"stroke":{const e=Ve(r),t=Ve(o);e&&t&&(l=[e],c=[t]);break}case"points":l=ie.convertPoints(ie.parseCoordinates(r)),c=ie.convertPoints(ie.parseCoordinates(o));break;case"rotate":case"scale":case"translate":l=Ie(r.trim().split(Fe.SPACE),e=>parseFloat(e)),c=Ie(o.trim().split(Fe.SPACE),e=>parseFloat(e));break;default:Oe(r)?l=[parseFloat(r)]:Ne(r)&&(l=[Pe(r,a)]),Oe(o)?c=[parseFloat(o)]:Ne(o)&&(c=[Pe(o,a)])}if(l&&c){const i=l.length;if(i===c.length){switch(t){case"step-start":t="steps(1, start)";break;case"step-end":t="steps(1, end)"}const a=/steps\((\d+)(?:, (start|end))?\)/.exec(t);if(a){const t=s[n+1]-s[n],r=parseInt(a[1]),o=100/r,h=[],u=[];for(let f=0;f<=r;++f){const d=0===f&&"start"===a[2]?1:0,p=s[n]+t*(f/r),g=o*(f+d)/100,m=[];switch(e){case"fill":case"stroke":{const e=l[0].rgba,t=c[0].rgba,s=Ae(Ye.getSplitValue(e.r,t.r,g),Ye.getSplitValue(e.g,t.g,g),Ye.getSplitValue(e.b,t.b,g)),i=Ae(Ye.getSplitValue(e.a,t.a,g));m.push("#"+(s+("FF"!==i?i:"")));break}case"points":{let e=0;while(e<i){const t=l[e],s=c[e++];m.push(Ye.getSplitValue(t.x,s.x,g)+","+Ye.getSplitValue(t.y,s.y,g))}break}default:{let e=0;while(e<i)m.push(Ye.getSplitValue(l[e],c[e++],g).toString());break}}if(!m.length)return;h.push(p),u.push(m.join(" "))}return[h,u]}}}}static toFractionList(e,t=";",s=true){let i=0;const n=Ie(e.split(t),e=>{const t=parseFloat(e);return isNaN(t)||s&&!(t>=i&&t<=1)?-1:(i=t,t)});return n.length>1&&(!s||0===n[0]&&n.some(e=>-1!==e))?n:[]}get from(){return this._from}set from(e){if(void 0===this._values){const t=this.animationElement;if(t){if(""===this.to){const s=Me(t,"by"),i=ie.parseCoordinates(s);if(i.length&&(""===e&&(e=this.baseValue||""),""!==e)){const t=ie.parseCoordinates(e),s=t.length;if(i.length===s){const e=[];let n=0;while(n<s)e.push(t[n]+i[n++]);this.to=e.join(",")}}}ie.parseCoordinates(this.to).length&&this.setAttribute("additive","sum")}}this._from=e}setCalcMode(e,t){const s=this.animationElement;if(s){t||(t=Me(s,"calcMode")||"linear");const i=this.keyTimes;switch(t){case"discrete":if(0===i[0]&&2===i.length){let t=[],n=[];const a=this.values,r=i.length-1;let o=0;while(o<r){const r=Ye.convertStepTimingFunction(e||this.attributeName,"step-end",i,a,o++,_e(s));r&&(t=t.concat(r[0]),n=n.concat(r[1]))}t.push(i.pop()),n.push(a.pop()),this._values=n,this._keyTimes=t,this._keySplines=[we["step-end"]]}break;case"paced":this._keySplines=void 0;break;case"spline":this.keySplines=Ge(Me(s,"keySplines").split(";"),e=>e.trim());case"linear":if(0!==i[0]&&1!==i[i.length-1]){const e=[],t=this.values.length;let s=0;while(s<t)e.push(s++/(t-1));this._keyTimes=e,this._keySplines=void 0}}}}convertToValues(e){const t=this.to;if(t){if(this.values=[this.from,t],e&&2===e.length){const t=this.keyTimes;if(2!==t.length||0===t[0]&&t[1]<=1)return void(this.keyTimes=e)}this.keyTimes=[0,1]}}setGroupOrdering(e){if(this.group.ordering=e,this.fillBackwards){const t=this.group.name;let s=false,i=e.length-1;while(i>=0){const n=e[i--];if(s){if("forwards"!==n.fillMode){this.fillBackwards=false;break}}else n.name===t&&(s=true)}}}getIntervalEndTime(e,t=false){const s=this.getTotalDuration();if(e<s){const{duration:i,keyTimes:n}=this;let a=this.delay;while(a+i<=e)a+=i;return Math.min(a+(t?1:n[n.length-1])*i,s)}return s}getTotalDuration(e=false){let t=this.iterationCount;return e&&-1===t&&(t=1),-1!==t?Math.min(this.delay+this.duration*t,this.end||Number.POSITIVE_INFINITY):Number.POSITIVE_INFINITY}set delay(e){super.delay=e;const t=this.animationElement,s=t&&Me(t,"end");if(s){const e=Le(Ie(s.split(";"),e=>ke.convertClockTime(e)))[0];if(!isNaN(e)){const{duration:t,iterationCount:s}=this;if(-1===s||t>0&&e<t*s){const i=this.delay;i>e?(this.end=e,-1===s&&(this.iterationCount=Math.ceil((e-i)/t))):this.duration=-1}}}}get delay(){return super.delay}set duration(e){super.duration=e}get duration(){const e=super.duration;return-1===e&&-1!==this._repeatDuration?this._repeatDuration:e}set iterationCount(e){this._iterationCount=isNaN(e)?1:e;const t=this.animationElement;t&&(-1!==this.iterationCount?(this.setAttribute("accumulate","sum"),this.fillFreeze="freeze"===Me(t,"fill")):(this.accumulateSum=false,this.fillFreeze=false))}get iterationCount(){const e=this.duration;if(e>0){const t=this._iterationCount,s=this._repeatDuration;return-1!==s&&(-1===t||s<t*e)?s/e:t}return 1}set to(e){super.to=e}get to(){return this._setterType?this.valueTo||super.to:this.setterType?this.values[0]:super.to}set values(e){this._values=e,e&&e.length!==this.keyTimes.length&&(this._keyTimes=void 0,this._keySplines=void 0)}get values(){return void 0===this._values&&(this._values=[]),this._values}get valueTo(){const e=this._values;return(null==e?void 0:e[e.length-1])||""}get valueFrom(){return this.values[0]||""}set keyTimes(e){const t=this._values;void 0!==t&&t.length!==e.length||!e.every(e=>e>=0&&e<=1)||(this._keyTimes=e)}get keyTimes(){return void 0===this._keyTimes&&(this._keyTimes=[]),this._keyTimes}set keySplines(e){if(null==e?void 0:e.length){const t=this.keyTimes.length-1;if(e.length>=t&&!e.every(e=>""===e||e===we.linear)){const s=[];let i=0;while(i<t){const t=Ie(e[i++].split(Fe.SPACE),e=>parseFloat(e));4===t.length&&!t.some(e=>isNaN(e))&&t[0]>=0&&t[0]<=1&&t[2]>=0&&t[2]<=1?s.push(t.join(" ")):s.push(we.linear)}this._keySplines=s}}else this._keySplines=void 0}get keySplines(){return this._keySplines}set timingFunction(e){this._timingFunction=e?Ye.convertTimingFunction(e):e}get timingFunction(){var e;return this._timingFunction||(null===(e=this.keySplines)||void 0===e?void 0:e[0])||""}set reverse(e){if(this.length&&e!==this._reverse){const e=this.keyTimes,t=this._keySplines,s=e.length,i=new Array(s);let n=s-1,a=0;while(n>=0)i[a++]=1-e[n--];if(this.keyTimes=i,this.values.reverse(),t){const e=[];n=t.length-1;while(n>=0){const s=Ie(t[n--].split(" "),e=>parseFloat(e));e.push(4===s.length?$e(s[2])+" "+$e(s[3])+" "+$e(s[0])+" "+$e(s[1]):we.linear)}this._keySplines=e}}this._reverse=e}get reverse(){return this._reverse}set alternate(e){this._alternate=e}get alternate(){return this._alternate}get playable(){return!this.paused&&this.duration>0&&this.keyTimes.length>0}get fillReplace(){return super.fillReplace||-1===this.iterationCount}get fromToType(){const e=this.keyTimes;return 2===e.length&&0===e[0]&&1===e[1]}get evaluateStart(){const e=this.keyTimes;return e.length>0&&e[0]>0}get evaluateEnd(){const e=this.keyTimes;return e.length>0&&e[e.length-1]<1}set setterType(e){this._setterType=e}get setterType(){if(this._setterType)return true;if(this.animationElement&&0===this.duration){const e=this.keyTimes;return e.length>=2&&0===e[0]&&""!==this.values[0]}return false}set length(e){0===e&&(this._values=void 0)}get length(){var e;return(null===(e=this._values)||void 0===e?void 0:e.length)||0}get instanceType(){return 16392}}Ye.getSplitValue=(e,t,s)=>e+(t-e)*s;const ze=squared.lib,{getNamedItem:De}=ze.dom,{replaceMap:We}=ze.util;class qe extends Ye{constructor(e,t){if(super(e,t),this.attributeName="transform",t){const e=De(t,"type");this.setType(e),this.setCalcMode(e)}}static toRotateList(e){const t=[],s=e.length;let i=0;while(i<s){const s=e[i++];if(""===s)t.push([0,0,0]);else{const e=ie.parseCoordinates(s);if(2===e.length&&(e[2]=0),3!==e.length)return;t.push(e)}}return t}static toScaleList(e){const t=[],s=e.length;let i=0;while(i<s){const s=e[i++];if(""===s)t.push([1,1,0,0]);else{const e=ie.parseCoordinates(s);if(1===e.length&&(e[1]=e[0]),2===e.length&&(e[2]=0,e[3]=0),4!==e.length)return;t.push(e)}}return t}static toTranslateList(e){const t=[],s=e.length;let i=0;while(i<s){const s=e[i++];if(""===s)t.push([0,0]);else{const e=ie.parseCoordinates(s);if(1===e.length&&(e[1]=0),2!==e.length)return;t.push(e)}}return t}static toSkewList(e){const t=[],s=e.length;let i=0;while(i<s){const s=e[i++];if(""===s)t.push([0]);else{const e=ie.parseCoordinates(s);if(1!==e.length)return;t.push(e)}}return t}expandToValues(){if(this.additiveSum){const{duration:e,keyTimes:t,iterationCount:s}=this;if(-1!==s&&e>0&&t.length){const i=e*s;e:{const{type:n,keySplines:a,values:r}=this,o=[],l=[],c=[];let h;const u=t.length;for(let f=0;f<s;++f){f>0&&a&&c.push("");for(let d=0;d<u;++d){const p=ie.parseCoordinates(r[d]),g=p.length;if(!g)break e;{let r;switch(n){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===g?r=[p[0],0]:2===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===g?r=[p[0],p[0]]:2===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===g?r=[p[0],0,0]:3===g&&(r=p);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===g&&(r=p)}if(!r)break e;{let n=(t[d]+f)*e;if(h){const e=r.length;let t=0;while(t<e)r[t]+=h[t++]}f<s-1&&d===u-1&&(this.accumulateSum&&(h=r),n--),o.push(n/i),l.push(r.join(" ")),a&&d<u-1&&c.push(a[d])}}}}this.values=l,this.keyTimes=o,this.keySplines=c.length?c:void 0,this.duration=i,this.iterationCount=1,this.accumulateSum=false}}}}setType(e){let t;switch(e){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement&&(t=qe.toTranslateList(this.values));break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement&&(t=qe.toScaleList(this.values));break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement&&(t=qe.toRotateList(this.values));break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement&&(t=qe.toSkewList(this.values));break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement&&(t=qe.toSkewList(this.values));break;default:return}t&&(this.values=We(t,e=>e.join(" "))),this.baseValue=R.typeAsValue(this.type)}get instanceType(){return 49160}}const{hasValue:je,safeNestedArray:Ue,sortNumber:Ke}=squared.lib.util;class He{constructor(e,...t){e=(t.length?e.filter(e=>t.includes(e.attributeName)):e.slice(0)).sort((e,t)=>e.delay===t.delay?e.group.id<t.group.id?1:-1:e.delay<t.delay?-1:1),t.length=0,e.forEach(e=>{const s=He.getKeyName(e);t.includes(s)||t.push(s)});const s={},i={},n={},a=(e,t,s,a=0,r,o=false,l=false,c=0,h=false,u)=>{s&&(Ue(i[e],t).push({time:t,value:s,animation:r,start:o,end:l,endTime:a,fillMode:c,infinite:h,valueFrom:u}),n[e].add(t))};t.forEach(t=>{s[t]=new Map,i[t]={},n[t]=new Set;const r=t.split(":")[0],o=e.filter(e=>e.fillBackwards&&e.attributeName===r).sort((e,t)=>e.group.id<t.group.id?1:-1)[0];if(o){const e=o.delay;a(t,0,o.values[0],e,o,0===e,false,8)}}),e.forEach(e=>{const t=He.getKeyName(e);if(e.baseValue&&void 0===i[t][-1]&&a(t,-1,e.baseValue),e.setterType){const{delay:s,duration:i}=e,n=e.fillReplace&&i>0;a(t,s,e.to,n?s+i:0,e,n,!n,2),n&&a(t,s+i,"",0,e,false,true,2)}else if(ie.isAnimate(e)&&e.duration>0){const s=-1===e.iterationCount,i=e.getTotalDuration();a(t,e.delay,e.valueTo,i,e,true,false,0,s,e.valueFrom),s||e.fillReplace||a(t,i,e.valueTo,0,e,false,true,e.fillForwards?4:2)}});for(const e in i)Ke(Array.from(n[e])).forEach(t=>{const n=i[e][t];for(let t=0;t<n.length;++t){const i=n[t],a=i.animation;if(""===i.value||a&&i.start&&ie.isAnimate(a)&&""===a.from){let a;for(const t of s[e].values()){const e=t.length;let s=0;while(s<e){const e=t[s++];if(i.animation!==e.animation&&""!==e.value&&(-1===e.time||4===e.fillMode||2===e.fillMode)){a=e.value;break}}}a?i.value=a:""===i.value&&n.splice(t--,1)}}n.length&&(n.sort((e,t)=>e.animation&&t.animation?e.fillMode===t.fillMode?e.animation.group.id<t.animation.group.id?1:-1:e.fillMode<t.fillMode?1:-1:0),s[e].set(t,n))});for(const e in s)for(const[t,i]of s[e].entries())i.forEach(i=>{var n;const a=i.animation;if(a)if(2===i.fillMode){const i=[];for(const[n,r]of s[e].entries())if(n<t)r.forEach(e=>{if(e.start){const t=e.animation;(null==t?void 0:t.animationElement)&&i.push(t)}});else for(let e=0;e<r.length;++e){const s=r[e];if(n>t)s.end&&i.includes(s.animation)&&r.splice(e--,1);else if(s.end){const t=s.animation;(null==t?void 0:t.animationElement)&&t.group.id<a.group.id&&r.splice(e--,1)}}}else if(4===i.fillMode||i.infinite){let i=false;const r=a.group,o=r.ordering;if(o){const e=a.getTotalDuration(),t=r.name,s=o.length;let n=0;while(n<s){const s=o[n++];if(s.name===t)i=true;else if(He.getGroupEndTime(s)>=e)break}}const l=[];for(const[r,o]of s[e].entries())if(!i&&r<t)o.forEach(e=>{if(e.start){const t=e.animation;t&&l.push(t)}});else for(let e=0;e<o.length;++e){const s=o[e];if(r>t){const t=s.animation;(i||t&&(s.end&&l.includes(t)||null===a.animationElement&&t.group.id<a.group.id))&&o.splice(e--,1)}else if(s.end){((null===(n=s.animation)||void 0===n?void 0:n.group.id)||NaN)<a.group.id&&o.splice(e--,1)}}}});for(const e in s){const t=s[e];for(const[e,s]of t.entries())0===s.length&&t.delete(e)}this.map=s}has(e,t,s){const i=this.map[e];return void 0!==t?!(!i||!i.has(t))&&(!s||-1!==i.get(t).findIndex(e=>e.animation===s)):!!i}get(e,t,s=false){let i;const n=this.map[e];if(n)for(const[e,a]of n.entries()){if(!(e<=t))break;{const n=a.length;let r=0;while(r<n){const n=a[r++];if(""!==n.value&&(-1===n.time||n.end&&(4===n.fillMode||2===n.fillMode))||s&&n.start&&t!==e){i=n.value;break}}}}return i}paused(e,t){let s=0;const i=this.map[e];if(i)for(const[e,n]of i.entries()){if(!(e<=t))break;{const e=n.length;let i=0;while(i<e){const e=n[i++];if(e.start&&(e.infinite||0===e.fillMode&&e.endTime>t)){if(!e.animation){s=1;break}s=2}else if(e.end&&(4===e.fillMode||1===s&&2===e.fillMode)){s=0;break}}}}return 0===s}evaluateStart(e,t){const s=e.values;let i=e.reverse?s[s.length-1]:s[0];return""===i&&(i=this.get(e.attributeName,e.delay)||(null==t?void 0:t.toString())||e.baseValue,je(i)&&(i=i.toString(),e.reverse?(s[s.length-1]=i,e.to=i):(s[0]=i,e.from=i))),s}}He.getGroupEndTime=e=>"infinite"===e.iterationCount?Number.POSITIVE_INFINITY:e.delay+e.duration*parseInt(e.iterationCount),He.getKeyName=e=>e.attributeName+(ie.isAnimateTransform(e)?":"+R.typeAsName(e.type):"");const Ze=squared.lib,{clamp:Qe,equal:Je,multipleOf:et}=Ze.math,{CHAR:tt}=Ze.regex,{hasBit:st,hasValue:it,isEqual:nt,isNumber:at,joinArray:rt,objectMap:ot,replaceMap:lt,safeNestedArray:ct,spliceArray:ht,sortNumber:ut}=Ze.util,ft=["x1","y1","x2","y2"],dt=["width","height","x","y"],pt=["points"],gt=["cx","cy","r"],mt=["cx","cy","rx","ry"];function yt(e,t,s,i,n){let a,r,o,l=0;for(const[t,i]of e.entries()){if(s===t){r={key:t,value:i};break}if(s>l&&s<t&&void 0!==a){r={key:l,value:a},o={key:t,value:i};break}l=t,a=i}if(r&&o)Pt(e,s,At(s,r.key,r.value,o.key,o.value),true);else if(r)Pt(e,s,r.value,true);else if(!n){let n=i.get(t,s,true);void 0!==n&&(n=St(n,true),""!==n&&Pt(e,s,n))}}function vt(e){const t=new Set,s=e.length,i=e[s-1][0];let n=0;while(n<s){const s=e[n++];let a=s[0]/i;if(a>0){let e=7;do{const s=parseFloat(a.toString().substring(0,e));if(!t.has(s)){a=s;break}}while(++e)}s[0]=a,t.add(a)}return e}function St(e,t=false){return"string"==typeof e&&(at(e)?e=parseFloat(e):0===(e=ie.parsePoints(e)).length&&(e="")),t&&"string"==typeof e?"":e}function bt(e,t){let s;if(e)for(const i of e){if(!(i.time<=t))break;s=i.value}return s}function Tt(e,t,s,i,n){var a;const r=[],o=t.element.tagName;let l;switch(o){case"line":l=ft;break;case"rect":l=dt;break;case"polyline":case"polygon":l=pt;break;case"circle":l=gt;break;case"ellipse":l=mt;break;default:return}const c=R.origin(t.element),h=e.length;let u=0;while(u<h){const[h,f]=e[u++],d=[],p=l.length;let g,m=0;while(m<p){const e=l[m++];let s=f.get(e);if(void 0===s&&(s=null!==(a=bt(i[e],h))&&void 0!==a?a:t.getBaseValue(e)),void 0===s)return;d.push(s)}switch(o){case"line":g=kt(d);break;case"rect":g=wt(d);break;case"polygon":case"polyline":g=d[0];break;case"circle":case"ellipse":g=Wt(d)}if(g){let e;switch(t.transformed&&(g=ie.applyTransforms(t.transformed,g,c)),null==s||s.refitPoints(g),o){case"line":case"polyline":e=ie.drawPolyline(g,n);break;case"rect":case"polygon":e=ie.drawPolygon(g,n);break;case"circle":case"ellipse":{const{x:t,y:s,rx:i,ry:a}=g[0];e=ie.drawEllipse(t,s,i,a,n);break}}void 0!==e&&r.push({key:h,value:e})}}return r}function kt(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}function wt(e){const[t,s,i,n]=e;return[{x:i,y:n},{x:i+t,y:n},{x:i+t,y:n+s},{x:i,y:n+s}]}function xt(e,t,s){const i=new Map,n=t.length;let a=0;while(a<n){const n=t[a++],r=new Map;for(const t in e){let i=e[t].get(n);void 0===i&&(i=bt(s[t],n)),void 0!==i&&r.set(t,i)}i.set(n,r)}return i}function Et(e,t,s,i){t&&(e.set(s,t),void 0!==i&&e.set(i,t))}function Rt(e,t,s,i,n){switch(e.alternate&&s%2!=0&&(t=t.slice(0).reverse()),e.attributeName){case"transform":if(e.additiveSum&&"string"==typeof n){const a=lt(n.split(tt.SPACE),e=>parseFloat(e)),r=ot(t,e=>lt(e.trim().split(tt.SPACE),e=>parseFloat(e))),o=a.length;if(r.every(e=>e.length===o)){const t=r[i];e.accumulateSum||(s=0);let n=0;while(n<o)t[n]+=a[n++];const l=r.length;for(n=0;n<s;++n)for(let e=0;e<l;++e){const s=r[e],i=s.length;for(let e=0;e<i;++e)t[e]+=s[e]}return t.join(" ")}}return t[i];case"points":return ie.parsePoints(t[i]);default:{let a=parseFloat(t[i]);if(isNaN(a))return n||0;if(e.additiveSum&&"number"==typeof n){a+=n,e.accumulateSum||(s=0);const i=t.length;for(let e=0;e<s;++e)for(let e=0;e<i;++e)a+=parseFloat(t[e])}return a}}}function At(e,t,s,i,n){if(e>t){if("number"==typeof s&&"number"==typeof n)return Ye.getSplitValue(s,n,(e-t)/(i-t));if("string"==typeof s&&"string"==typeof n){const a=lt(s.split(" "),e=>parseFloat(e)),r=lt(n.split(" "),e=>parseFloat(e)),o=a.length;if(o===r.length){const s=[];let n=0;while(n<o)s.push(At(e,t,a[n],i,r[n++]));return s.join(" ")}}else if(Array.isArray(s)&&Array.isArray(n)){const a=[],r=Math.min(s.length,n.length);let o=0;while(o<r){const r=s[o],l=n[o++];a.push({x:At(e,t,r.x,i,l.x),y:At(e,t,r.y,i,l.y)})}return a}}return s}function Vt(e,t,s,i,n,a,r,o,l,c,h,u,f,d){r<0&&(t-=r,r=0);const p=e.duration,g=t-(r+p*o),m=0===g?0===l?0:1:Qe(g/p);let y=-1,v=-1;const S=i.length;for(let e=0;e<S;++e){if(-1!==y&&m<=i[e]){v=e;break}m>=i[e]&&(y=e)}let b;return-1!==y&&-1!==v?b=At(m,i[y],Rt(e,n,o,y,s),i[v],Rt(e,n,o,v,s)):(v=-1!==y?y+1:i.length-1,b=Rt(e,n,o,v,s)),Mt(e,c=Pt(u,c,b),a,v,h,f,d),[c,b]}function _t(e,t,s,i,n,a,r,o){const l=(e-t)/a,c=i.length;for(let e=1;e<c;++e){const t=i[e-1],a=i[e];if(l>=t&&l<=a)return qt(At(l,t,Rt(s,n,r,e-1,o),a,Rt(s,n,r,e,o)))}}function Nt(e,t,s,i,n,a,r,o,l,c,h){let u=r.length;o||(o=new Array(u-1).fill(""));const{delay:f,duration:d}=n,p=f+d*i,g=n.getTotalDuration(),m=p+(h?a[0]:1)*d,y=parseFloat(r[h?0:u-1]);let v=p;e:{u=c.length;for(let i=0;i<u;++i){const f=c[i];if(f!==n){const n=f.getTotalDuration();if(f.addState(4),n>v){const{delay:S,duration:b}=f,[T,k,w]=Kt(f);Ft(e,t,s,f,l,T,k,w);let x=m;t:{let e=false,t=Ht(v,S,b)-1;const s=(s,i,c)=>{let u,S;if(u=h?e||v!==p?s%d/d:0:i===m?1:i%d/d,S=s===i?qt(Rt(f,k,t,c,l)):_t(s,i,f,T,k,b,t,l),S){u>0&&(S=Math.round((parseFloat(S)+y)/2).toString());const t=a.length;if(!(u===a[t-1]&&S===r[t-1])){const l=e||0===u?(null==w?void 0:w[c])||f.timingFunction:"";if(h){!e&&u>0&&s===v&&(u+=.001);for(let e=0;e<t;++e)if(u<=a[e]){0===e||0===u?(a.unshift(u),r.unshift(S),o.unshift(l)):(a.splice(e,0,u),r.splice(e,0,S),o.splice(e,0,l));break}}else(i===n||i===m)&&i<g&&(u-=.001),a.push(u),r.push(S),o.push(l)}}};do{if(h){let e=i+1;while(e<u){const t=c[e++];if(t.delay>v){x=t.delay;break}}}const a=T.length;for(let i=0;i<a;++i){const a=Dt(S,b,T,t,i);if(a>=v&&(e||(s(a,v,i),e=true),a>v)){if(h&&a>=m)break e;if(s(a,Math.min(a,n,m),i),a>=m)break e;if(v=a,a>=n){n<=g&&f.addState(16);break t}if(a>=x)break t}}}while(++t)}}}}}return[a,r,o]}function Pt(e,t,s,i=false){if(""!==s){let n=e.get(t),a=false;if(void 0===n&&(n=e.get(t-1),a=true),n!==s||i){if(!i){if("number"==typeof n&&Je(s,n))return t;while(t>0&&e.has(t))t++}e.set(t,s)}else a&&!e.has(t)&&(e.delete(t-1),e.set(t,s))}return t}function Mt(e,t,s,i,n,a,r){if(!jt(ie.isAnimateTransform(e),n)){if(0===i)return;i--}const o=null==s?void 0:s[i];o&&a.set(t,o),r&&function(e,t,s,i){var n;if(ie.asAnimateTransform(t)){const a=null===(n=t.transformOrigin)||void 0===n?void 0:n[i];a&&e.set(s,a)}}(r,e,t,i)}function Ft(e,t,s,i,n,a,r,o){var l;if(0!==a[0]){let s;s=i.additiveSum?qt(n):(null===(l=Ct(t,i.attributeName))||void 0===l?void 0:l.value.toString())||e.get(He.getKeyName(i),i.delay)||qt(n);const c=i.by;c&&at(s)&&(s=(parseFloat(s)+c).toString()),a.unshift(0),r.unshift(s),null==o||o.unshift(i.timingFunction)}if(a[a.length-1]<1){const t=e.get(He.getKeyName(i),i.delay)||qt(s[i.attributeName])||r[0];a.push(1),r.push(t),null==o||o.push(i.timingFunction)}}function Ct(e,t){const s=e[t];return null==s?void 0:s[s.length-1]}function Gt(e,t,s,i,n){return void 0===i&&(i=t.delay),void 0===n&&(n=t.to),Pt(e,i,s?n:St(n))}function Ot(e,t){t&&e.push(t),e.sort((e,t)=>e.delay===t.delay?e.group.id<t.group.id?-1:1:e.delay<t.delay?-1:1);for(let t=0;t<e.length-1;++t)e[t].delay===e[t+1].delay&&e.splice(t--,1)}function It(e,t){if(!t.hasState(16,64)){const s=e.indexOf(t);-1!==s&&e.splice(s,1),e.push(t),t.addState(4)}}function Lt(e,t=Number.POSITIVE_INFINITY){e.sort((e,s)=>{const i=e.delay,n=e.delay;if(t!==Number.POSITIVE_INFINITY){if(t===i&&t!==n)return-1;if(t!==i&&t===n)return 1;if(i>t&&n<t)return 1;if(i<t&&n>t)return-1}return i!==n?i>n?-1:1:e.group.id>s.group.id?-1:1})}function Bt(e,t){t?-1!==t.iterationCount&&ht(e,e=>e===t):ht(e,e=>!!e.animationElement)}function Xt(e,t){e.sort((e,s)=>{if(e.getTotalDuration()<=t)return 1;if(s.getTotalDuration()<=t)return-1;const i=e.delay,n=s.delay;return i===n?e.group.id<s.group.id?1:-1:i===t?-1:n===t?1:i<t&&n<t?i>n?-1:1:i<n?-1:1})}function $t(e,t){const s=e.get("x")||0,i=e.get("y")||0;return t?t.refitX(s)+" "+t.refitX(i):s+" "+i}function Yt(e,t,s){s||(t.iterationCount=-1),t.from=t.valueFrom,t.to=t.valueTo,e.push(t)}function zt(e,t){t.length&&ht(e,e=>t.includes(e))}const Dt=(e,t,s,i,n)=>Math.round(e+(s[n]+i)*t),Wt=e=>[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}],qt=e=>Array.isArray(e)?ot(e,e=>e.x+","+e.y).join(" "):(null==e?void 0:e.toString())||"",jt=(e,t)=>st(t,e?32:4),Ut=e=>e.playable||e.animationElement&&-1!==e.duration,Kt=e=>{var t;return[e.keyTimes.slice(0),e.values.slice(0),null===(t=e.keySplines)||void 0===t?void 0:t.slice(0)]},Ht=(e,t,s)=>Math.floor(Math.max(0,e-t)/s);var Zt=e=>class extends e{getAnimateShape(e){const t=[];return this.animations.forEach(s=>{if(Ut(s))switch(s.attributeName){case"r":case"cx":case"cy":if(x.circle(e)){t.push(s);break}case"rx":case"ry":x.ellipse(e)&&t.push(s);break;case"x1":case"x2":case"y1":case"y2":x.line(e)&&t.push(s);break;case"points":(x.polyline(e)||x.polygon(e))&&t.push(s);break;case"x":case"y":case"width":case"height":x.rect(e)&&t.push(s)}}),t}getAnimateTransform(e){const t=[];return this.animations.forEach(s=>{ie.isAnimateTransform(s)&&s.duration>0&&(t.push(s),ie.asAnimateMotion(s)&&(s.framesPerSecond=null==e?void 0:e.framesPerSecond))}),t}getAnimateViewRect(e){e||(e=this.animations);const t=[];return e.forEach(e=>{if(Ut(e))switch(e.attributeName){case"x":case"y":t.push(e)}}),t}animateSequentially(e,t,s,i){let n,a=18;i&&(i.keyTimeMode&&(a=i.keyTimeMode),n=i.precision);const r=this.animations;[e,t].forEach(e=>{var i,o;const l=e===t;if(!e||0===e.length||!l&&st(a,8)||l&&st(a,64))return;const c=[],h={},u=new Set;let f=0;const d=e=>{ct(h,e.attributeName).push(e),f++};{const t=[],s=e.length;for(let i=0;i<s;++i){const n=e[i];if(n.setterType)d(n);else{const a=n.getTotalDuration();for(let r=0;r<s;++r){const s=e[r];if(i!==r&&n.attributeName===s.attributeName&&n.group.id<s.group.id&&n.fillReplace&&!s.evaluateEnd)if(s.setterType){if(n.delay===s.delay){t[i]=n;break}}else if(!s.evaluateStart&&!s.evaluateEnd&&(n.delay===s.delay&&(!s.fillReplace||-1===s.iterationCount||a<=s.getTotalDuration())||s.fillBackwards&&n.delay<=s.delay&&(s.fillForwards||n.fillReplace&&a<=s.delay)||n.animationElement&&null===s.animationElement&&(n.delay>=s.delay&&a<=s.getTotalDuration()||s.fillForwards))){t[i]=n;break}}}}const i=[];let n=0;while(n<s){const s=e[n];t[n++]?s.fillReplace?i.push(s):(s.setterType=true,d(s)):s.setterType||(c.push(s),u.add(s.group.name))}zt(r,i)}if(c.length+f>1||1===c.length&&(c[0].alternate||void 0!==c[0].end)){const t={},f={};let d=0;c.forEach(e=>{const s=e.group.ordering;s&&ht(s,e=>!u.has(e.name));const i=e.attributeName;let n=t[i];n||(n=new Map,t[i]=n,f[i]=[]);const a=e.delay,r=n.get(a)||[];r.push(e),f[i].push(e),n.set(a,r)});for(const e in t){const s=new Map,i=t[e];for(const e of ut(Array.from(i.keys()))){const t=i.get(e);t.forEach(e=>d=Math.max(d,e.getTotalDuration(true))),s.set(e,t.reverse())}t[e]=s,f[e].reverse()}const p=new He(e),g={},m=new Map,y=l?new Map:void 0,v={},S=new Set,b={},T=new Map,k=l?new Map:void 0,w={},x={},E=new Map;let A,V,_=-1;for(const e in t){const n=new Map;if(g[e]=n,!l){let t;if(s)t=s.getBaseValue(e);else if(t=this[e],void 0===t)try{this.getBaseValue(e)}catch(e){}it(t)&&(w[e]=t)}const r=h[e]||[],o=[],c=[],u=[];for(const[s,i]of t[e].entries())o.push(s),c.push(i);let T,k,A,V=-1,_=0,N=Number.POSITIVE_INFINITY;const P=(e,t)=>{if(S.add(e),e.addState(16),A=e,e.fillForwards){C(_,T,e.type,e);const{name:t,ordering:s}=e.group;if(s){const i=e.getTotalDuration();for(const e of s){if(e.name===t)return true;if(He.getGroupEndTime(e)>=i)return false}}}else{if(e.fillFreeze&&C(_,T,e.type,e),void 0!==t){let s=V;const i=M(_,_+1);void 0!==i&&e.fillReplace&&t>_&&0===u.length&&(s=Pt(n,s,i),l&&Et(E,e.type,s),T=i,V=s)}F()}return false},M=(t,s)=>{var i;let a=null===(i=Ct(x,e))||void 0===i?void 0:i.value;return ht(r,e=>e.delay>=t&&e.delay<s,e=>{const s=e.to;e.animationElement&&Bt(u),0===u.length&&(T=s),C(e.delay,s,e.type,e),e.delay===t?a=l?s:St(s):(V=Gt(n,e,l),_=e.delay)}),a},F=(e,t)=>{u.length&&ht(u,e=>e.getTotalDuration()<=_,s=>{if(s.addState(16),s.fillForwards&&(C(s.getTotalDuration(),s.valueTo,s.type,s),void 0!==e&&void 0!==t)){const i=o.length;let n=e;while(n<i){n!==e&&(t=-1);const i=c[n++],a=i.length;let r=t+1;while(r<a){const e=i[r++];s.group.id>e.group.id&&e.addState(16)}}}})},C=(t,s,i=0,n)=>{l||(s=St(s));const a=Ct(x,e);""!==s&&(!a||t>=a.time)&&ct(x,e).push({key:i,value:s,time:t}),n&&ie.isAnimate(n)&&!n.fillReplace&&(n.fillForwards?(ht(r,e=>e.group.id<n.group.id||e.delay<t),u.length=0,c.forEach(e=>{e.forEach(e=>{e.group.id<n.group.id&&e.addState(16)})})):n.fillFreeze&&Bt(u))},G=(e,t,s)=>{k&&!e&&(void 0===s&&(s=R.typeAsValue(k.type)),V=Pt(n,t,s),t!==V&&Et(E,k.type,V)),k=void 0},O=e=>{for(let t=0;t<o.length;++t){const s=c[t];if(e.length)for(let t=0;t<s.length;++t)e.includes(s[t])&&s.splice(t--,1);0===s.length&&(c.splice(t,1),o.splice(t--,1))}},I=f[e].find(e=>e.fillBackwards);if(I){T=Rt(I,I.values,0,0),V=Pt(n,0,T),l&&(Et(E,I.type,0),k=I);let t=true;for(const s of f[e])if(s.group.id>I.group.id&&s.delay<=I.delay){t=false;break}const s=I.getTotalDuration(),i=[];for(let e=0;e<o.length;++e){const n=c[e];for(let a=0;a<n.length;++a){const l=n[a];if(t){if(l===I&&(0!==e||0!==a)){n.splice(a--,1),o.unshift(I.delay),c.unshift([I]);continue}if(l.group.id<I.group.id&&(I.fillForwards||l.getTotalDuration()<=s)){l.fillForwards&&(l.setterType=true,r.push(l)),i.push(l);continue}}l.animationElement&&l.delay<=I.delay&&(n.splice(a--,1),It(u,l))}}O(i),I.addState(2)}if(!l){const t=w[e];x[e]||void 0===t||C(0,t,0),void 0===T&&(T=(null===(i=Ct(x,e))||void 0===i?void 0:i.value)||t)}Ot(r);{let t;ht(r,e=>e.delay<=o[0],s=>{const i=ie.isAnimate(s)&&s.fillForwards,a=s.delay;if(a<o[0]&&(!I||i))if(I&&i)C(a,s.to,s.type);else{const i=a-1;if(t)Gt(n,t,l,i);else if(n.has(0))l||Gt(n,s,l,i,T);else{const t=l&&ie.isAnimateTransform(s)?R.typeAsValue(s.type):w[e];void 0!==t&&(Gt(n,s,l,0,t),Gt(n,s,l,i,t))}V=Gt(n,s,l),_=a,t=s}}),t&&Gt(n,t,l,o[0]-1)}e:{const t=o.length;for(let s=0;s<t;++s){let i=c[s],h=o[s];for(let f=0;f<i.length;++f){const g=i[f];if(g.hasState(16,64)||g.hasState(4)&&g.animationElement)continue;const v=-1===g.iterationCount,S=g.duration,A=g.iterationCount;let O,I,L;if(v)O=h+S;else if(O=g.getTotalDuration(),O<=V){g.fillReplace?g.addState(64):It(u,g);continue}v?(I=Math.ceil((d-h)/S),L=0):(I=Math.ceil(A),L=A-Math.floor(A)),r.length&&_>0&&_<h&&M(_,h),-1!==V&&V<h&&(V=Pt(n,h-1,T),_=h),N=Number.POSITIVE_INFINITY;const B=g.group.ordering;if(B&&B.length>1){let i=true;for(const t of B){if(t.name===g.group.name){i=false;break}if(!t.paused&&_<=t.delay&&t.attributes.includes(e))break}if(i)t:for(let e=s+1;e<t;++e){const t=c[e],s=t.length;for(let e=0;e<s;++e){const s=t[e];if(s.group.ordering){N=s.delay;break t}s.getTotalDuration()<=O?(s.fillFreeze&&Ot(r,s),s.addState(16)):s.delay<O&&It(u,s)}}}else for(let e=s+1;e<t;++e){const t=o[e];if(t!==Number.POSITIVE_INFINITY){const s=c[e];if(s.length&&!s.every(e=>e.hasState(16,64))){N=t;break}}}const X=_;let $,Y=V+1,z=Math.min(N,g.end||Number.POSITIVE_INFINITY);if(g.animationElement&&r.length){const e=Math.min(N,O,z);if($=r.find(t=>t.delay>=_&&t.delay<=e),$){switch($.delay){case _:T=$.to,C(_,T,$.type,$),$.group.id>g.group.id&&(l&&k&&G(g.additiveSum,Math.max(h-1,V)),V=Gt(n,$,l,Math.max($.delay,V),T),z=-1);break;case N:$.addState(32);break;default:z=$.delay,$.addState(32)}ht(r,e=>e!==$),g.addState(4)}}let D,W=false;if(z>V){l&&(k&&(G(g.additiveSum,Math.max(h-1,V)),Y=V+1),T=R.typeAsValue(g.type),C(_,T,g.type));let r=h===Number.POSITIVE_INFINITY||(-1!==V||g.hasState(2))&&!(0===s&&0===f)||g.hasState(8);W=true;t:{const s=Ct(x,e);for(let e=Ht(_,h,S);e<I;++e){const{evaluateStart:o,evaluateEnd:l}=g;let c,d,v;if(o||l){[c,d,v]=Kt(g);const t=i.length;if(o){const s=u.concat(i.slice(f+1,t)).filter(e=>!!e.animationElement&&e.delay<z);s.length&&(Xt(s,_),[c,d,v]=Nt(p,x,w,e,g,c,d,v,T,s,true),s.forEach(e=>{e.hasState(4)&&i.includes(e)&&It(u,e)}))}if(l&&g.getIntervalEndTime(_)<z&&(u.length||f<t-1)){const s=u.filter(e=>!!e.animationElement);let n=f+1;while(n<t){const e=i[n++];e.animationElement&&(s.includes(e)||s.push(e),It(u,e))}s.length&&(Lt(s,_),[c,d,v]=Nt(p,x,w,e,g,c,d,v,T,s,false))}Ft(p,x,w,g,T,c,d,v)}else({keyTimes:c,values:d,keySplines:v}=g);const b=c.length;for(let i=0;i<b;++i){const o=c[i];let l=-1,u=Rt(g,d,e,i,T);if(e===I-1&&L>0)if(L===o)L=-1;else if(i===b-1)l=O,_=l,u=At(L,c[i-1],Rt(g,d,e,i-1,T),o,u),L=-1;else if(L>o)for(let t=i+1;t<b;++t)if(L<=c[t]){l=O,_=l,u=At(L,o,u,c[t],Rt(g,d,e,t,T)),L=-1;break}if(-1===l){if(l=Dt(h,S,c,e,i),l<0||l<V)continue;if(l===z)W=e===I-1&&i===b-1,_=l;else{const t=t=>{[V,D]=Vt(g,_,T,c,d,v,h,e,i,t,a,n,m,y)};if(h<0&&-1===V)l>0&&(_=0,t(0));else{if(l>z){r&&V+1<z&&t(V),_=z,t(z+(z!==N||n.has(z-1)?0:-1)),W=false;break t}if(r)g.hasState(2)&&(_=X),h>=V?(l=Math.max(h,V+1),_=h):l===V?(_=l,l=V+1):(t(V),_=Math.max(l,V)),r=false;else{if(_=l,e>0&&0===i&&g.accumulateSum){Mt(g,l,v,i,a,m,y),V=l;continue}l=Math.max(l,V+1)}}}}if(l>V&&(i===t-1&&!g.accumulateSum&&(e<I-1||g.fillReplace&&(!s||u!==s.value))&&l--,V=Pt(n,l,u),Mt(g,V,v,i,a,m,y),D=u),!W||-1===L)break t}}}F(s,f)}if(void 0!==D&&(T=D,l&&(Et(E,g.type,Y,V),k=g)),$&&($.hasState(32)?(D=$.to,V=Gt(n,$,l,$.delay,D),_=$.delay,C(_,D,$.type,$)):g.hasState(64)&&Et(E,V,$.type),Bt(u),W=true),ht(r,e=>e.delay>=X&&e.delay<=_,e=>{C(e.delay,e.to,e.type,e),e.animationElement&&Bt(u)}),v){if(!W){u.length=0,u.push(g);continue}if(!$){b[e]=g;break e}}if(W){if(!v&&P(g,N))break e;for(let e=s;e<t;++e)if(o[e]<_){const t=c[e];t.forEach(e=>{const t=e.getTotalDuration();t>_&&!e.hasState(4,16,64)?It(u,e):e.fillReplace||C(t,e.valueTo,e.type,e)}),o[e]=Number.POSITIVE_INFINITY,t.length=0}if(u.length&&_<N){Lt(u);const e=u.find(e=>e.delay<=_);e&&(e.removeState(4,2),e.addState(8),Bt(u,e),h=e.delay,i=[e],f=-1)}}else It(u,g)}}if(u.length){Lt(u);while(u.length){const t=u.shift(),{delay:s,duration:i}=t,r=V-s;let o=Number.POSITIVE_INFINITY;const c=()=>{let[c,h,f]=Kt(t);const d=Ht(_,s,i);if(u.length){if(t.evaluateStart){const e=u.slice(0);Xt(e,_),[c,h,f]=Nt(p,x,w,d,t,c,h,f,T,e,true)}t.evaluateEnd&&t.getIntervalEndTime(_)<o&&([c,h,f]=Nt(p,x,w,d,t,c,h,f,T,u,false))}Ft(p,x,w,t,T,c,h,f);const v=V+1;let S=Math.floor(r/i),b=false;const k=(i,n)=>Vt(t,_,T,c,h,f,s,S,n,i,a,g[e],m,y);do{const e=c.length;for(let r=0;r<e;++r){let l=Dt(s,i,c,S,r);if(!b&&l>=V&&([V,T]=k(V,r),b=true),b)if(l>=o){if(o>V){const e=t.fillReplace||-1===t.iterationCount;[V,T]=k(o-(e?1:0),r),e&&(T=Rt(t,h,S,0,T),V=Pt(n,o,T)),_=o}}else l>V&&(_=l,r===e-1&&l<o&&l--,T=Rt(t,h,S,r,T),V=Pt(n,l,T),Mt(t,V,f,r,a,m,y))}}while(V<o&&++S);l&&Et(E,t.type,v,V)};if(-1===t.iterationCount){r>0&&r%t.duration!=0&&(o=s+t.duration*Math.ceil(r/i),c()),b[e]=t;break e}if(o=Math.min(s+t.duration*t.iterationCount,t.end||Number.POSITIVE_INFINITY),o>V&&(c(),P(t)))break e}}if((null==A?void 0:A.fillReplace)&&void 0===b[e]){let t,s=0;if(x[e]){const i=Ct(x,e);i&&({key:s,value:t}=i)}else l?(s=Array.from(E.values()).pop(),t=R.typeAsValue(s)):t=w[e];void 0===t||nt(n.get(V),t)||(V=Pt(n,V,t),l&&Et(E,s,V))}}v[e]=V}{const e=new Set;let t=0;for(const s in g){let i=0;for(const t of g[s].keys())e.add(t),i=t;t=Math.max(t,i),null===(o=x[s])||void 0===o||o.sort((e,t)=>e.time===t.time?0:e.time<t.time?-1:1)}if(Object.keys(b).length){const s=[],i=[];for(const e in b){const t=b[e];s.push(t.delay),i.push(t.duration)}const n=s[0];if(0===S.size&&1===new Set(s).size&&1===new Set(i).size&&n===e.values().next().value)_=n;else if(i.length>1&&i.every(e=>e%250==0))t=et(i,t,s);else{const e=i[0];(t-n)%e!=0&&(t=e*Math.ceil(t/e))}}if(-1===_)for(const s in g){const i=b[s];if(i){let n=v[s];if(n<t){const r=g[s],o=i.delay,c=n+1;let h=Array.from(r.values()).pop(),u=Math.floor((n-o)/i.duration);const[f,d,S]=Kt(i);Ft(p,x,w,i,h,f,d,S);const b=f.length;do{let s=false;for(let l=0;l<b;++l){let c=Dt(o,i.duration,f,u,l);!s&&c>=n&&([n,h]=Vt(i,n,h,f,d,S,o,u,l,n,a,r,m,y),e.add(n),s=true),s&&c>n&&(l===b-1&&c<t&&c--,h=Rt(i,d,u,l,h),n=Pt(r,c,h),Mt(i,c,S,l,a,m,y),e.add(n))}}while(n<t&&++u);v[s]=n,l&&Et(E,i.type,c,n)}}}const i=ut(Array.from(e));if(s||l){let e=false;for(const t in g){const s=g[t];if(!s.has(0)){const n=w[t];if(void 0!==n){const t=s.keys().next().value-1;s.set(0,n),s.set(t,n),i.includes(0)||(i.push(0),e=true),i.includes(t)||(i.push(t),e=true)}}}e&&ut(i)}if(!l)for(const e in g){const t=g[e],s=t.keys().next().value,n=t.values().next().value,a=i.length;let r=0;while(r<a){const a=i[r++];if(!(a<=v[e]))break;if(!t.has(a)){if(p.paused(e,a))if(a<s)t.set(a,n);else{let s=p.get(e,a);if(void 0!==s&&(s=St(s,true),""!==s)){t.set(a,s);continue}}yt(t,e,a,p,l)}}}A=xt(g,i,x)}if(-1===_&&Object.keys(b).length){const e={},t=[],s=[],i=[];for(const e in b){const s=b[e];i.push(s.duration),t.push(s)}const n=et(i);if(t.forEach(t=>{var i;const r=t.attributeName;e[r]=new Map;let o=null!==(i=g[r].get(v[r]))&&void 0!==i?i:w[r];const[l,c,h]=Kt(t);Ft(p,x,w,t,o,l,c,h);let u=0,f=0;const d=l.length;do{for(let i=0;i<d;++i){let d=Dt(0,t.duration,l,f,i);i===l.length-1&&d<n&&d--,o=Rt(t,c,f,i,o),u=Pt(e[r],d,o),Mt(t,u,h,i,a,T,k),s.includes(u)||s.push(u)}}while(u<n&&++f)}),t.every(e=>e.alternate)){let t=-1;for(const i in b){const a=e[i],r=Array.from(a.keys()),o=Array.from(a.values()).reverse(),l=r.length;for(let e=0;e<l;++e){const i=r[e];if(0!==i){t=n+i;const r=T.get(i);r&&T.set(t,r),t=Pt(a,t,o[e]),s.includes(t)||s.push(t)}}}}ut(s);for(const t in e){const i=e[t];s.forEach(e=>{i.has(e)||yt(i,t,e,p,l)})}V=xt(e,s,x)}if(A||V){zt(r,c);const e=Array.from(E.entries()),t=rt(c,e=>ie.isAnimateTransform(e)?R.typeAsName(e.type):e.attributeName,"-",false),i=this.parent;[A,V].forEach(o=>{if(o){const c=o===A,h=c?m:T,u=c?y:k;if(jt(l,a)){const t=[];if(l){const s=[];if(c){const t=Array.from(o.entries());let i=e[0][1];const n=e.length,a=t.length;for(let r=0,o=0,l=0;r<n;++r){const c=r<n-1?e[r+1][1]:-1;if(i!==c){const n=new Map;for(let s=l;s<a;++s){const a=t[s][0];if(a>=e[o][0]&&a<=e[r][0])n.set(a,new Map([[i,t[s][1].values().next().value]])),l=s;else if(a>e[r][0])break}s.push(n),i=c,o=r+1}}}else{if(!b.transform)return;{const e=new Map;for(const[t,s]of o.entries())e.set(t,new Map([[b.transform.type,s.values().next().value]]));s.push(e)}}let i=0;const n=s.length;for(let e=0;e<n;++e){const a=Array.from(s[e].entries()),o=a[0];let l=o[0];const f=o[1];1===a.length&&(e<n-1?a.push([s[e+1].keys().next().value,f]):a.push([l+1,f]));const d=a.length,p=a[d-1][0];let g=p-l;const m=new qe;m.type=f.keys().next().value;for(let e=0;e<d;++e){const s=a[e];if(t.push(h.get(s[0])||""),m.type!==SVGTransform.SVG_TRANSFORM_ROTATE){const t=u.get(s[0]);t&&(ct(m,"transformOrigin")[e]=t)}s[0]-=l}for(const[e,t]of vt(a))m.keyTimes.push(e),m.values.push(t.values().next().value);l-=i,l>1?m.delay=l:1===l&&(g+1)%10==0&&g++,m.duration=g,m.keySplines=t,m.synchronized={key:e,value:""},i=p,Yt(r,m,c)}}else{const e=Array.from(o.entries()),a=-1!==_?_:0;let l;if(e.forEach(e=>{t.push(h.get(e[0])||""),e[0]-=a}),s){const t=Tt(vt(e),s,i,x,n);if(!t)return;{l=new Ye,l.attributeName="d";const e=t.length;let s=0;while(s<e){const e=t[s++];l.keyTimes.push(e.key),l.values.push(e.value.toString())}}}else{const e=new qe;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;for(const[t,s]of o.entries()){const n=s.get("x")||0,a=s.get("y")||0;e.keyTimes.push(t),e.values.push(i?i.refitX(n)+" "+i.refitX(a):n+" "+a)}l=e}l.delay=a,l.keySplines=t,l.duration=e[e.length-1][0],Yt(r,l,c)}}else if(((e,t)=>st(t,e?16:2))(l,a)){const a=Array.from(o.entries()),f=a.length-1;for(let o=0;o<f;++o){const[f,d]=a[o],[p,g]=a[o+1];let m,y=t;if(l){const t=new qe;if(c){const s=e.length-1;for(let i=0;i<s;++i){const s=e[i],n=e[i+1];if(s[1]===n[1]&&f>=s[0]&&p<=n[0]){t.type=s[1];break}if(p-f==1&&p===n[0]){t.type=n[1];break}}}else b.transform&&(t.type=b.transform.type);if(0===t.type)continue;t.values=[d.values().next().value,g.values().next().value];const s=u.get(p);s&&(t.transformOrigin=[s]),m=t}else if(s){const e=Tt([[f,d],[p,g]],s,i,x,n);if(!e)continue;m=new Ye,m.attributeName="d",m.values=lt(e,e=>e.value.toString())}else{const e=new qe;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,e.values=[$t(d,i),$t(g,i)],y+=o,m=e}c&&(m.delay=0===o?f:0),m.duration=p-f,m.keyTimes=[0,1],m.synchronized={key:o,value:y};const v=h.get(p);v&&(m.keySplines=[v]),Yt(r,m,c)}}}})}}})}};const Qt=squared.lib,{isPercent:Jt,parseAngle:es}=Qt.css,{getNamedItem:ts}=Qt.dom,{truncateFraction:ss}=Qt.math,{isEqual:is,isNumber:ns,isString:as,iterateArray:rs,objectMap:os}=Qt.util;class ls extends qe{constructor(e,t){if(super(e,t),this.path="",this.distance="0%",this.rotate="auto 0deg",this.motionPathElement=null,this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this._offsetLength=0,this._keyPoints=[],t){this.setAttribute("path");const e=ts(t,"rotate");switch(e){case"auto":break;case"auto-reverse":this.rotate="auto 180deg";break;default:ns(e)&&(this.rotate=parseFloat(e)+"deg")}rs(t.children,e=>{if("mpath"===e.tagName){let t=P(e);if(t&&(x.use(t)&&(t=P(t)),t&&x.shape(t)))return this.motionPathElement=t,true}}),this.setCalcMode()}else if(e){const t=/path\("([^"]+)"\)/.exec(_(e,"offset-path"));t&&(this.path=t[1]);const s=_(e,"offset-distance");""!==s&&(this.distance=s);const i=_(e,"offset-rotate");""!==i&&"auto"!==i&&(this.rotate=i)}}setCalcMode(){const e=this.animationElement;if(e){const t=ts(e,"calcMode")||"paced";switch(t){case"paced":case"discrete":case"spline":super.setCalcMode("translate",t);break;case"linear":{const t=qe.toFractionList(ts(e,"keyPoints"),";",false);let s=super.keyTimes;0===s.length&&-1!==this.duration&&(s=qe.toFractionList(ts(e,"keyTimes")),this.length=0,super.keyTimes=s),t.length===s.length&&(this._keyPoints=t);break}}}}addKeyPoint(e){if(void 0===this._offsetPath){const t=e.key;if(t>=0&&t<=1){const s=super.keyTimes,i=this._keyPoints;if(s.length===i.length){const n=e.value;let a=NaN;if(Jt(n)?a=parseFloat(n)/100:ns(n)&&(a=parseFloat(n)/this.offsetLength),!isNaN(a)){a=Math.min(a,1);const n=s.findIndex(e=>e===t);-1!==n?(s[n]=e.key,i[n]=a):(s.push(e.key),i.push(a))}}}}}setOffsetPath(){if(void 0===this._offsetPath&&as(this.path)){const{duration:e,rotateData:t}=this;let s=ie.getOffsetPath(this.path,this.rotate),i=s.length;if(i>0){let n=1;if(e>=i){n=e/i;const t=i-1;let a=1;while(a<t)s[a++].key*=n;s[t].key=e}else if(e>0){const t=new Array(e),n=i/e;let a,r=0;while(r<e)a=s[Math.floor(r*n)],a.key=r,t[r++]=a;const o=s.pop();a.value!==o.value&&(o.key=e,t.push(o)),s=t,i=t.length}const{framesPerSecond:a,keyPoints:r}=this,o=a?1e3/a:0;if(r.length){const t=i-1,a=super.keyTimes,l=[];if(r.length>1){let i;const c=(e,t,s)=>(null==i?void 0:i.key)===e&&i.rotate===s&&is(i.value,t),h=a.length-1;for(let u=0;u<h;++u){const h=a[u],f=ss(h*e),d=ss((a[u+1]-h)*e),p=r[u],g=r[u+1];if(0===d){const e=f,{value:n,rotate:a}=s[Math.floor(g*t)];c(e,n,a)||(i={key:e,value:n,rotate:a},l.push(i))}else{let e=0,i=f;if(p===g){const{value:a,rotate:r}=s[Math.floor(p*t)];for(c(f,a,r)&&(e+=n,i+=o);e<d;e+=n){const t=f+e;t>=i&&(l.push({key:t,value:a,rotate:r}),e<d-1?i+=o:i=0)}}else{const n=Math.floor(Math.min(p,g)*t),a=Math.floor(Math.max(p,g)*t),r=[];let h=n;while(h<=a)r.push(s[h++]);p>g&&r.reverse();const u=r.length,m=d/u,y=r[0];for(c(f,y.value,y.rotate)&&(++e,i+=o);e<u;++e){const t=f+e*m;if(t>=i){const s=r[e];s.key=t,l.push(s),e<u-1?i+=o:i=0}}}l[l.length-1].key=f+d}}}else l.push(s[Math.floor(r[0]*t)]),0===a[0]&&(l[0].rotate=0);this._offsetPath=l}else if(o>0){const e=[];for(let t=0;t<i;t+=o)e.push(s[Math.floor(t)]);const t=s.pop();e[e.length-1]!==t&&e.push(t),this._offsetPath=e}else this._offsetPath=s;if(t){s=this._offsetPath;const i=t.length-1;for(let n=0,a=0;n<i;++n){const i=t[n],r=t[n+1],o=r.key,l=[];if(i.key===o)l.push(s[a++]);else{const t=Math.floor(ss(o*e));do{const e=s[a];if(!((null==e?void 0:e.key)<=t))break;l.push(e)}while(++a)}const c=i.value,h=r.value,u=es(c.split(" ").pop()),f=es(h.split(" ").pop()),d=c.startsWith("auto");if(c===h||u===f)d?0!==u&&l.forEach(e=>e.rotate+=u):l.forEach(e=>e.rotate=u);else{const e=f-u,t=l.length-1,s=e/t;let i=0;if(d){while(i<t)l[i].rotate+=u+i++*s;l[t].rotate+=u+e}else{while(i<t)l[i].rotate=u+i++*s;l[t].rotate=u+e}}}}this.keySplines=void 0,this.timingFunction=we.linear}}}reverseKeyPoints(){let e,t;return this.validKeyPoints()&&(t=this._keyPoints.slice(0).reverse(),e=os(super.keyTimes,e=>1-e).reverse()),{keyTimes:e,keyPoints:t}}validKeyPoints(){const e=this.keyPoints;return e.length>0&&e.length===super.keyTimes.length}get offsetPath(){return this._offsetPath}get playable(){return!this.paused&&-1!==this.duration&&as(this.path)}set keyTimes(e){as(this.path)||(super.keyTimes=e)}get keyTimes(){this.setOffsetPath();const e=this._offsetPath;if(e){const t=this.duration;return os(e,e=>e.key/t)}return super.keyTimes}set values(e){as(this.path)||(super.values=e)}get values(){this.setOffsetPath();const e=this._offsetPath;return e?os(e,e=>{const{x:t,y:s}=e.value;return`${t} ${s}`}):super.values}get rotateValues(){this.setOffsetPath();const e=this._offsetPath;return e&&os(e,e=>e.rotate)}get keyPoints(){return this._keyPoints}set reverse(e){if(e!==super.reverse){const{keyTimes:t,keyPoints:s}=this.reverseKeyPoints();t&&s&&(this.length=0,this._keyPoints=s,super.keyTimes=t,super.reverse=e)}}get reverse(){return super.reverse}set alternate(e){const t=this.iterationCount;if(e!==super.alternate&&(-1===t||t>1)){const{keyTimes:s,keyPoints:i}=this.reverseKeyPoints();if(s&&i){let n=super.keyTimes,a=this.keyPoints;const r=n.length;if(-1===t){let e=0;while(e<r)n[e]/=2,s[e]=.5+s[e++]/2;n=n.concat(s),a=a.concat(i),this.duration=2*this.duration}else{const e=n.slice(0),o=a.slice(0);for(let l=0;l<t;++l)if(0===l){let e=0;while(e<r)n[e++]/=t}else{const c=l*(1/t),h=l%2==0?e.slice(0):s.slice(0);let u=0;while(u<r)h[u]=ss(c+h[u++]/t);n=n.concat(h),a=a.concat(l%2==0?o:i)}this.duration=this.duration*t,this.iterationCount=1}this._keyTimes=n,this._keyPoints=a,super.alternate=e}}}get alternate(){return super.alternate}set parent(e){super.parent=e;const t=this.parentContainer;if(null==t?void 0:t.requireRefit){const e=this.path;e&&(this.path=ie.transformRefit(e,void 0,void 0,t))}}get parent(){return super.parent}get offsetLength(){let e=this._offsetLength;if(0===e){const t=this.path;t&&(e=C(t))}return e}get instanceType(){return 114696}}const cs=squared.lib,{getFontSize:hs,getKeyframesRules:us,isAngle:fs,isCustomProperty:ds,hasCalc:ps,parseAngle:gs,parseVar:ms}=cs.css,{isWinEdge:ys}=cs.client,{getNamedItem:vs}=cs.dom,{XML:Ss}=cs.regex,{isString:bs,iterateArray:Ts,replaceMap:ks,safeNestedArray:ws,sortNumber:xs}=cs.util,Es={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},Rs=us(),As=new RegExp(`(ease|ease-in|ease-out|ease-in-out|linear|step-(?:start|end)|steps\\(\\d+,\\s+(?:start|end)\\)|${xe}),?\\s*`,"g");function Vs(e,t){const s=_(e,t);if("animation-timing-function"===t){const e=[];let t;As.lastIndex=0;while(null!==(t=As.exec(s)))e.push(t[1]);return e}return s.split(Ss.SEPARATOR)}function _s(e){return e.sort((e,t)=>e.key!==t.key?e.key<t.key?-1:1:0)}function Ns(e){if("reverse"===e)return"auto 180deg";if(/^reverse\s+/.test(e)){const t=e.split(" ")[1];return"auto "+(fs(t)?180+gs(t):"0")+"deg"}return e}function Ps(e,t,s){var i;const n=null===(i=e["transform-origin"])||void 0===i?void 0:i.find(e=>e.key===s);if(n)return R.origin(t,n.value)}var Ms=e=>class extends e{getTransforms(e){return e||(e=this.element),ie.filterTransforms(R.parse(e)||ie.convertTransforms(e.transform.baseVal))}getAnimations(e){var t,s;const i=[];if(!ys()){e||(e=this.element);let n=0;const a=(e,t,s="")=>{""===s&&n++,e.delay=t,e.group={id:n,name:s},e.parent=this,i.push(e)};Ts(e.children,t=>{if(t instanceof SVGAnimationElement){const s=vs(t,"begin");if(/^[a-zA-Z]+$/.test(s))return;const i=s?xs(ks(s.split(";"),e=>ke.convertClockTime(e))):[0];if(i.length)switch(t.tagName){case"set":i.forEach(s=>a(new ke(e,t),s));break;case"animate":i.forEach(s=>a(new Ye(e,t),s));break;case"animateTransform":i.forEach(s=>{var i;const n=new qe(e,t);ie.isShape(this)&&this.path&&(n.transformFrom=ie.drawRefit(e,this.parent,null===(i=this.viewport)||void 0===i?void 0:i.precision)),a(n,s)});break;case"animateMotion":i.forEach(s=>{var i;const n=new ls(e,t),r=n.motionPathElement;r&&(n.path=ie.drawRefit(r,this.parent,null===(i=this.viewport)||void 0===i?void 0:i.precision)),a(n,s)})}}});const r=Vs(e,"animation-name"),o=r.length;if(o){const i={},l=[],c=[];for(const t in Es){let s=Vs(e,t);0===s.length&&s.push(Es[t]);while(s.length<o)s=s.concat(s.slice(0));s.length=o,i[t]=s}for(let h=0;h<o;++h){const o=Rs[r[h]],u=ke.convertClockTime(i["animation-duration"][h]);if(o&&u>0){n++;const f={},d={},p="paused"===i["animation-play-state"][h],g=ke.convertClockTime(i["animation-delay"][h]),m=i["animation-iteration-count"][h],y=i["animation-fill-mode"][h],v=r[h]+"_"+h,S=[];let b=true;c.push({name:v,attributes:S,paused:p,delay:g,duration:u,iterationCount:m,fillMode:y});for(const t in o){const s=parseFloat(t)/100,i=o[t];for(const t in i){let n=i[t];ps(n)?n=V(e,t,n):ds(n)&&(n=ms(e,n)),n&&ws(Es[t]?d:f,t).push({key:s,value:n})}}if(f.transform){const s=_s(f.transform),i=s.length;let n=0;while(n<i){const i=s[n++],a=i.key,r=Ps(f,e,a);null===(t=R.parse(e,i.value))||void 0===t||t.forEach(e=>{const t=e.matrix;let s,i,n;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:s="translate",i=t.e+" "+t.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:s="scale",i=t.a+" "+t.d+" "+(r?r.x+" "+r.y:"0 0"),!r||0===a&&0===r.x&&0===r.y||(n={x:r.x*(1-t.a),y:r.y*(1-t.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:s="rotate",i=e.angle+" "+(r?r.x+" "+r.y:"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:s="skewX",i=e.angle.toString(),!r||0===a&&0===r.y||(n={x:r.y*t.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:s="skewY",i=e.angle.toString(),!r||0===a&&0===r.x||(n={x:0,y:r.x*t.b*-1});break;default:return}const o=ws(f,s),l=o.findIndex(e=>e.key===a);if(-1!==l){const e=o[l];e.value=i,e.transformOrigin=n}else o.push({key:a,value:i,transformOrigin:n})})}delete f.transform,delete f["transform-origin"]}if("none"===_(e,"offset-path"))delete f["offset-distance"],delete f["offset-rotate"];else if(f["offset-rotate"]){const t=f["offset-rotate"];if(f["offset-distance"]||!f.rotate){let s=_(e,"offset-rotate");""!==s&&"auto"!==s||(s="auto 0deg"),_s(t);const i=t[0],n=t[t.length-1];0!==i.key&&t.unshift({key:0,value:s}),1!==n.key&&t.push({key:1,value:s});for(let e=0;e<t.length;++e){const s=t[e-1],i=t[e],n=Ns(s.value),a=Ns(i.value);if(s.value=n,i.value=a,n.split(" ").pop()!==a.split(" ").pop()){const r=n.startsWith("auto"),o=a.startsWith("auto");if(r&&!o||!r&&o){const r=(s.key+i.key)/2;t.splice(e++,0,{key:r,value:n}),t.splice(e++,0,{key:r,value:a})}}}if(!f["offset-distance"]){const s=new ls(e);s.duration=0,s.iterationCount=1,s.fillForwards=true,s.addKeyPoint({key:0,value:s.distance}),a(s,g,v),t.forEach(e=>{const t=e.value;let s=gs(t.split(" ").pop());t.startsWith("auto")&&(s+=90),e.value=s+" 0 0"}),f.rotate=t,delete f["offset-rotate"],b=false}}else delete f["offset-rotate"]}for(const t in f){let n;switch(t){case"offset-rotate":continue;case"offset-distance":n=new ls(e),n.rotateData=f["offset-rotate"];break;case"rotate":case"scale":case"skewX":case"skewY":case"translate":n=new qe(e),n.setType(t);break;default:n=new Ye(e),n.attributeName=t}a(n,g,v);const r=f[t],o=i["animation-direction"][h],c=i["animation-timing-function"][h];if(_s(r),"offset-distance"===t){const e=n;0!==r[0].key&&e.addKeyPoint({key:0,value:e.distance}),r.forEach(t=>e.addKeyPoint(t)),1!==r.pop().key&&e.addKeyPoint({key:1,value:e.distance}),bs(c)&&(e.timingFunction=c)}else{S.push(t);const i=[],a=[],o=[];let l=r.length;for(let e=0;e<l;++e){const t=r[e],{key:h,value:u}=t;if(i.push(h),a.push(u),b&&e<l-1){const e=null===(s=d["animation-timing-function"])||void 0===s?void 0:s.find(e=>e.key===h);o.push((null==e?void 0:e.value)||c)}const f=t.transformOrigin;f&&ie.asAnimateTransform(n)&&(ws(n,"transformOrigin")[e]=f)}if(b&&!o.every(e=>"linear"===e)){const s=[],r=[],c=[];l=i.length;for(let n=0;n<l;++n){const h=i[n],f=a[n];if(n<l-1){const l=o[n];if(""!==f&&l.startsWith("step")){const o=Ye.convertStepTimingFunction(t,l,i,a,n,hs(e));if(o){const[e,t]=o,a=(i[n+1]-h)*u,f=e.length-(1===i[n+1]?1:0);let d=0;while(d<f){let i=(h+e[d]*a)/u;s.includes(i)&&(i+=.001),s.push(i),r.push(t[d++]),c.push(we[l.includes("start")?"step-start":"step-end"])}continue}}c.push(Ye.convertTimingFunction(l))}s.push(h),r.push(f)}n.values=r,n.keyTimes=s,n.keySplines=c}else n.values=a,n.keyTimes=i,b?n.keySplines=o:n.timingFunction=c}n.paused=p,n.duration=u,n.iterationCount="infinite"!==m?parseFloat(m):-1,n.fillForwards="forwards"===y||"both"===y,n.fillBackwards="backwards"===y||"both"===y,n.reverse=o.endsWith("reverse"),n.alternate=(-1===n.iterationCount||n.iterationCount>1)&&o.startsWith("alternate"),l.push(n)}}}c.reverse(),l.forEach(e=>e.setGroupOrdering(c))}}return i}set name(e){this._name=e}get name(){let e=this._name;return void 0===e&&(e=ie.setName(this.element),this._name=e),e}get transforms(){let e=this._transforms;return void 0===e&&(e=this.getTransforms(),this._transforms=e),e}get animations(){let e=this._animations;return void 0===e&&(e=this.getAnimations(),this._animations=e),e}get visible(){return function(e){const t=_(e,"visibility");return"hidden"!==t&&"collapse"!==t&&"none"!==_(e,"display")}(this.element)}get opacity(){return _(this.element,"opacity")||"1"}};const{USER_AGENT:Fs,isUserAgent:Cs}=squared.lib.client;function Gs(e){if("svg"===e.tagName){if(Cs(8))return e.parentElement instanceof HTMLElement;if(Cs(4))return!(e.parentElement instanceof HTMLElement)}return false}var Os=e=>class extends e{setRect(){const e=this.parent;let{x:t,y:s,width:i,height:n}=this;e&&(t=e.refitX(t),s=e.refitY(s),i=e.refitSize(i),n=e.refitSize(n)),this.setBaseValue("x",t),this.setBaseValue("y",s),this.setBaseValue("width",i),this.setBaseValue("height",n)}getRectElement(){const e=this.element;switch(e.tagName){case"svg":case"use":case"image":return e;default:return null}}set x(e){this._x=e}get x(){var e,t;return null!==(e=this._x)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.x.baseVal.value)||0}set y(e){this._y=e}get y(){var e,t;return null!==(e=this._y)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.y.baseVal.value)||0}set width(e){this._width=e}get width(){const e=this._width;if(void 0!==e)return e;{const e=this.getRectElement();return e?Gs(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}}set height(e){this._height=e}get height(){const e=this._height;if(void 0!==e)return e;{const e=this.getRectElement();return e?Gs(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}};const Is=squared.lib,{STRING:Ls}=Is.regex,{extractURL:Bs}=Is.css,{cloneObject:Xs,iterateArray:$s}=Is.util,Ys=new RegExp(Ls.LENGTH_PERCENTAGE);function zs(e,t){const s=Bs(N(e,"fill"));if(""!==s){if(t){const e=t.definitions.pattern.get(s);if(e)return e}const e=document.getElementById(s.substring(1));if(e instanceof SVGPatternElement)return e}}function Ds(e,t,s,i){if(e){const n=t.aspectRatio,a=e.aspectRatio;if(s&&i){Xs(s,n);const{width:t,height:r}=n;if(t>0&&r>0){const s=t/r,o=a.width||e.viewBox.width,l=a.height||e.viewBox.height,c=o/l,h=o/t,u=l/r,f=_(i,"width"),d=_(i,"height");let p,g;x.svg(i)?(p=i.width.baseVal.value,g=i.height.baseVal.value):(p=parseFloat(f),g=parseFloat(d));const m=qs(f),y=qs(d),v=p/t,S=g/r;let b=m&&y;if(p>=t&&g>=r?(n.unit=Math.min(v,S),b=false):h!==u&&(n.unit=Math.min(h,u)),m||y){if(!isNaN(p)&&!isNaN(g)){const{align:e,meetOrSlice:s}=i.preserveAspectRatio.baseVal;if(v===S)b&&(n.unit*=v),n.align=SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,t>r?n.alignX=true:n.alignY=true;else{switch(s){case SVGPreserveAspectRatio.SVG_MEETORSLICE_MEET:S<v?(b&&(r>=t&&r>=l?n.unit=S:n.unit*=S),n.alignX=true):(b&&(t>=r&&t>=o?n.unit=v:n.unit*=v),n.alignY=true);break;case SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE:S>v?(b&&(r>=t&&r>=l?n.unit=S:n.unit*=S),n.alignX=true,n.alignY=r>l):(b&&(t>=r&&t>=o?n.unit=v:n.unit*=v),n.alignX=t>o,n.alignY=true)}n.align=e}n.meetOrSlice=s}}else c>s?n.position.x=(o-l*s)/2:c<s&&(n.position.y=(l-o*(1/s))/2)}}const{parent:r,position:o,unit:l,x:c,y:h}=a;n.parent.x=c+c*(l-1),n.position.x*=a.unit,n.position.x+=o.x-r.x,n.parent.y=h+h*(l-1),n.position.y*=l,n.position.y+=o.y-r.y,n.unit*=l}}const Ws=e=>e.viewport||ie.asSvg(e)&&e||void 0,qs=e=>Ys.test(e);class js extends squared.lib.base.Container{constructor(e){super(),this.element=e,this.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1,meetOrSlice:SVGPreserveAspectRatio.SVG_MEETORSLICE_UNKNOWN,align:SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,alignX:false,alignY:false},this._clipRegion=[]}append(e,t){return e.parent=this,e.viewport=t||Ws(this),super.append(e)}build(e){const t=Ws(this),s=function(e){while(e){if(e.hasViewBox())return e;e=e.parent}}(this);let i,n,a=true,r=false;e?(i=e.symbolElement||e.patternElement||e.element||this.element,n=e.precision,false===(e=Object.assign(Object.assign({},e),{symbolElement:void 0,patternElement:void 0,element:void 0})).initialize&&(a=false)):i=this.element,this.clear(),$s(i.children,i=>{let n;if(x.svg(i))n=new squared.svg.Svg(i,false),Ds(s,n,i.viewBox.baseVal,i),r=true;else if(x.g(i))n=new squared.svg.SvgG(i),Ds(s,n);else if(x.use(i)){const e=P(i);if(e)if(x.symbol(e))n=new squared.svg.SvgUseSymbol(i,e),Ds(s,n,e.viewBox.baseVal,e),r=true;else if(x.image(e))n=new squared.svg.SvgImage(i,e);else if(x.shape(e)){const r=zs(i,t);r?(n=new squared.svg.SvgUsePattern(i,e,r),Ds(s,n)):n=new squared.svg.SvgUse(i,e,a)}}else if(x.image(i))n=new squared.svg.SvgImage(i);else if(x.shape(i)){const e=zs(i,t);e?(n=new squared.svg.SvgShapePattern(i,e),Ds(s,n)):n=new squared.svg.SvgShape(i,a)}n&&(this.append(n,t),n.build(e))});const o=this.aspectRatio;if(ie.asSvg(this)&&(this.documentRoot||o.meetOrSlice))if(this.documentRoot){const{x:e,y:t}=o;(e<0||t<0)&&this.clipViewBox(e,t,o.width,o.height,n,true)}else{const{x:e,y:t}=this.parent.aspectRatio;this.clipViewBox(e,t,this.width+e,this.height+t,n,true)}else if(r&&this.hasViewBox()&&(0!==o.x||0!==o.y)){const{left:e,top:t}=ie.getBoxRect(this.getPathAll(false)),s=this.refitX(o.x),i=this.refitY(o.y);(e<s||t<i)&&this.clipViewBox(e,t,this.refitSize(o.width),this.refitSize(o.height),n)}}hasViewBox(){return ie.asSvg(this)&&!!this.element.viewBox.baseVal||ie.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}clipViewBox(e,t,s,i,n,a=false){a&&(s-=e,i-=t,ie.asSvg(this)&&this.documentRoot?(e=e<0?-1*e:0,t=t<0?-1*t:0):(e*=-1,t*=-1)),this.clipRegion=ie.drawRect(s,i,e,t,n)}synchronize(e){this.each(t=>t.synchronize(e))}refitX(e){const t=this.aspectRatio;return(e-t.x)*t.unit-t.parent.x+t.position.x}refitY(e){const t=this.aspectRatio;return(e-t.y)*t.unit-t.parent.y+t.position.y}refitSize(e){return e*this.aspectRatio.unit}refitPoints(e){const{unit:t,meetOrSlice:s}=this.aspectRatio,i=e.length;let n=0;while(n<i){const s=e[n++];s.x=this.refitX(s.x),s.y=this.refitY(s.y),void 0!==s.rx&&void 0!==s.ry&&(s.rx*=t,s.ry*=t)}if(s&&ie.asSvg(this)){const{align:t,alignX:s,alignY:a,parent:r}=this.aspectRatio,{width:o,height:l}=this,[c,h,u,f]=ie.minMaxPoints(e,true);let d=0,p=0;s&&(d=-1*r.x),a&&(p=-1*r.y);let g=d,m=p;const y=()=>o/2-(u+c)/2,v=()=>o-c-u+d,S=()=>l/2-(h+f)/2,b=()=>l-h-f+p;switch(t){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:s&&(g-=d),a&&(m-=p);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:s&&(g-=d),a&&(m+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:s&&(g-=d),a&&(m+=b());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:s&&(g+=y()),a&&(m-=p);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_NONE:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:s&&(g+=y()),a&&(m+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:s&&(g+=y()),a&&(m+=b());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:s&&(g+=v()),a&&(m-=p);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:s&&(g+=v()),a&&(m+=S());break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:s&&(g+=v()),a&&(m+=b())}n=0;while(n<i){const t=e[n++];t.x+=g,t.y+=m}}return e}getPathAll(e=true){const t=[];return(e?this.cascade():this.children).forEach(e=>{var s;if(ie.isShape(e)){const i=null===(s=e.path)||void 0===s?void 0:s.value;i&&t.push(i)}}),t}set clipRegion(e){""!==e?this._clipRegion.push(e):this._clipRegion.length=0}get clipRegion(){return this._clipRegion.join(";")}get requireRefit(){const e=this.aspectRatio;return 0!==e.x||0!==e.y||1!==e.unit||0!==e.position.x||0!==e.position.y||0!==e.parent.x||0!==e.parent.y}get instanceType(){return 2}}const Us=squared.lib,{parseColor:Ks}=Us.color,{getNamedItem:Hs}=Us.dom,{cloneObject:Zs}=Us.util;function Qs(e){const t=[],s=e.getElementsByTagName("stop"),i=s.length;let n=0;while(n<i){const e=s[n++],i=Ks(Hs(e,"stop-color"),parseFloat(Hs(e,"stop-opacity")||"1"));i&&t.push({color:i,offset:parseFloat(Hs(e,"offset"))/100})}return t}function Js(e,...t){const s={};return t.forEach(t=>{const i=e[t];if(i){const{value:e,valueAsString:n}=i.baseVal;s[t]=e,s[t+"AsString"]=n}}),s}class ei extends(Zt(Os(re(Ms(js))))){constructor(e,t=true){super(e),this.element=e,this.documentRoot=t,this.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},this.init()}build(e){this.precision=null==e?void 0:e.precision,this.setRect(),super.build(e)}synchronize(e){!this.documentRoot&&this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e),super.synchronize(e)}init(){const e=this.element;this.documentRoot&&(Zs(e.viewBox.baseVal,this.aspectRatio),e.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(t=>{var s;const i=P(t,e);i&&(null===(s=t.parentElement)||void 0===s||s.removeChild(t),i.appendChild(t))})),this.setDefinitions(e),e.querySelectorAll("defs").forEach(e=>this.setDefinitions(e))}setDefinitions(e){const t=this.definitions;e.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(e=>{let s=e.id;s&&(s="#"+s,x.clipPath(e)?t.clipPath.set(s,e):x.pattern(e)?t.pattern.set(s,e):x.linearGradient(e)?t.gradient.set(s,Object.assign({type:"linear",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:Qs(e)},Js(e,"x1","x2","y1","y2"))):x.radialGradient(e)&&t.gradient.set(s,Object.assign({type:"radial",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:Qs(e)},Js(e,"cx","cy","r","fx","fy","fr"))))})}get viewBox(){return this.element.viewBox.baseVal||A(this.element)}get instanceType(){return 18}}class ti{constructor(e){this.element=e}build(e){}synchronize(e){}get instanceType(){return 4}}const si=squared.lib,{parseColor:ii}=si.color,{extractURL:ni,getFontSize:ai,hasCalc:ri,isCustomProperty:oi,isLength:li,isPercent:ci,parseUnit:hi,parseVar:ui}=si.css,{truncate:fi}=si.math,{STRING:di,XML:pi}=si.regex,{convertCamelCase:gi,convertFloat:mi,isNumber:yi,isString:vi,joinArray:Si,objectMap:bi}=si.util,Ti=di.LENGTH_PERCENTAGE,ki={polygon:/polygon\(([^)]+)\)/,inset:new RegExp(`inset\\(${Ti}\\s?${Ti}?\\s?${Ti}?\\s?${Ti}?\\)`),circle:new RegExp(`circle\\(${Ti}(?:\\s+at\\s+${Ti}\\s+${Ti})?\\)`),ellipse:new RegExp(`ellipse\\(${Ti}\\s+${Ti}(?:\\s+at\\s+${Ti}\\s+${Ti})?\\)`)};var wi=e=>class extends e{constructor(){super(...arguments),this._retainStyle=true,this._strokeWidth="1"}setStroke(){this.setAttribute("stroke"),this.setAttribute("stroke-width")}setPaint(e,t){var s,i;this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setStroke(),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");const n=this.getAttribute("clip-path",true);if(""!==n&&"none"!==n){const a=ni(n);if(""!==a)this.clipPath=a;else if(null==e?void 0:e.length)for(const a in ki){const r=ki[a].exec(n);if(r){const{top:n,right:o,bottom:l,left:c}=ie.getBoxRect(e),h=o-c,u=l-n;switch(a){case"inset":{let e=0,i=0,a=this.convertLength(r[1],u),f=0;r[4]?(e=c+this.convertLength(r[4],h),i=o-this.convertLength(r[2],h),f=l-this.convertLength(r[3],u)):r[2]?(e=this.convertLength(r[2],h),i=o-e,f=l-(r[3]?this.convertLength(r[3],u):a),e+=c):(e=c+a,i=o-a,f=l-a),a+=n;const d=[{x:e,y:a},{x:i,y:a},{x:i,y:f},{x:e,y:f}];null===(s=this.parent)||void 0===s||s.refitPoints(d),this.clipPath=ie.drawPolygon(d,t);break}case"polygon":{const e=bi(r[1].split(pi.SEPARATOR),e=>{let t=c,s=n;return e.trim().split(" ").forEach((e,i)=>{0===i?t+=this.convertLength(e,h):s+=this.convertLength(e,u)}),{x:t,y:s}});null===(i=this.parent)||void 0===i||i.refitPoints(e),this.clipPath=ie.drawPolygon(e,t);break}default:if("circle"===a||"ellipse"===a){const e=this.parent,s=h<u?h:u;let i,o;"circle"===a?(i=this.convertLength(r[1],s),o=i):(i=this.convertLength(r[1],h),o=this.convertLength(r[2],u));let l=c,f=n;const d=r.length;d>=4&&(l+=this.convertLength(r[d-2],s),f+=this.convertLength(r[d-1],s)),e&&(l=e.refitX(l),f=e.refitX(f),i=e.refitSize(i),o=e.refitSize(o)),this.clipPath=ie.drawEllipse(l,f,i,o,t)}}break}}}}setAttribute(e,t=false,s=true){let i=this.getAttribute(e,t,s);if(e=gi(e),vi(i)){switch(ri(i)?i=V(this.element,e,i)||getComputedStyle(this.element)[e]:oi(i)&&(i=ui(this.element,i)||getComputedStyle(this.element)[e]),e){case"strokeDasharray":i="none"!==i?Si(i.split(/,\s*/),e=>this.convertLength(e).toString(),", ",false):"";break;case"strokeDashoffset":case"strokeWidth":i=this.convertLength(i).toString();break;case"fill":case"stroke":{const t=ni(i);if(""!==t)this[e+"Pattern"]=t;else{let t;switch(i){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="none";break;case"currentcolor":case"currentColor":t=ii(this.color||_(this.element,"color",true));break;default:t=ii(i)}t&&(this[e]=t.value)}return}}this[e]=i}else this._retainStyle||(this[e]="")}getAttribute(e,t=false,s=true){let i=_(this.element,e,t);if(s&&!vi(i)){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return i}let s=this.useParent||this.parent;while(s){if(i=_(s.element,e,t),vi(i))break;s=s.parent}}return i}convertLength(e,t){if(!yi(e)){if(li(e))return hi(e,ai(this.element));if(ci(e))return Math.round(("number"==typeof t?t:this.element.getBoundingClientRect()[t||"width"])*parseFloat(e)/100)}return mi(e)}resetPaint(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}set strokeWidth(e){this._strokeWidth=e}get strokeWidth(){const e=this.stroke;if(vi(e)&&"none"!==e){const e=this._strokeWidth;if(""!==e){const t=this.parent;return(null==t?void 0:t.requireRefit)?fi(t.refitSize(parseFloat(e))):e}}return""}};class xi extends(wi(Ms(js))){constructor(e){super(e),this.element=e}build(e){super.build(e),this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}get instanceType(){return 34}}const{resolvePath:Ei}=squared.lib.util;class Ri extends(Os(re(Ms(ti)))){constructor(e,t){super(e),this.element=e,this.imageElement=null,this.__get_transforms=false,this.__get_animations=false,t&&(this.imageElement=t)}build(){this.setRect()}extract(e){const t=e?ie.filterTransforms(this.transforms,e):this.transforms;let{x:s,y:i,width:n,height:a}=this;const r=t.length;if(r){t.reverse();let e=0;while(e<r){const r=t[e++],o=r.matrix,l=s;s=E.applyX(o,l,i),i=E.applyY(o,l,i);let c=this.rotateAngle;switch(r.type){case SVGTransform.SVG_TRANSFORM_SCALE:n*=o.a,a*=o.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==r.angle&&(o.a<0&&(s+=o.a*n),o.c<0&&(s+=o.c*n),o.b<0&&(i+=o.b*a),o.d<0&&(i+=o.d*a),c?c+=r.angle:c=r.angle)}this.rotateAngle=c}this.transformed=t}const{parent:o,translationOffset:l}=this;o&&(s=o.refitX(s),i=o.refitY(i),n=o.refitSize(n),a=o.refitSize(a)),l&&(s+=l.x,i+=l.y),this.setBaseValue("x",s),this.setBaseValue("y",i),this.setBaseValue("width",n),this.setBaseValue("height",a)}set x(e){super.x=e}get x(){const e=super.x;if(0===e){const e=this.imageElement;if(e)return e.x.baseVal.value}return e}set y(e){super.y=e}get y(){const e=super.y;if(0===e){const e=this.imageElement;if(e)return e.y.baseVal.value}return e}set width(e){super.width=e}get width(){const e=super.width;if(0===e){const e=this.imageElement;if(e)return e.width.baseVal.value}return e}set height(e){super.height=e}get height(){const e=super.height;if(0===e){const e=this.imageElement;if(e)return e.height.baseVal.value}return e}get href(){const e=this.imageElement||this.element;return x.image(e)?Ei(e.href.baseVal):""}get transforms(){let e=super.transforms;if(!this.__get_transforms){const t=this.imageElement;t&&(e=e.concat(this.getTransforms(t)),this._transforms=e),this.__get_transforms=true}return e}get animations(){let e=super.animations;if(!this.__get_animations){const t=this.imageElement;t&&(e=e.concat(this.getAnimations(t)),this._animations=e),this.__get_animations=true}return e}get instanceType(){return 4100}}const Ai=squared.lib,{getNamedItem:Vi}=Ai.dom,{equal:_i,lessEqual:Ni,multipleOf:Pi,offsetAngleX:Mi,offsetAngleY:Fi,relativeAngle:Ci,truncateFraction:Gi}=Ai.math,{cloneArray:Oi,convertInt:Ii,convertFloat:Li}=Ai.util;function Bi(e,t,s,i){const n=e[0],a=e[e.length-1];if(void 0!==s)switch(t){case"x":s-=n.start.x;break;case"x1":case"cx":return n.start.x=s,void(n.coordinates[0]=s);case"x2":return a.end.x=s,void(a.coordinates[0]=s)}if(void 0!==i)switch(t){case"y":i-=n.start.y;break;case"y1":case"cy":return n.start.y=i,void(n.coordinates[1]=i);case"y2":return a.end.y=i,void(a.coordinates[1]=i)}e.forEach(e=>{const{coordinates:t,value:n}=e,a=t.length;for(let r=0,o=0;r<a;r+=2,++o)void 0!==s&&(e.relative||(t[r]+=s),n[o].x+=s),void 0!==i&&(e.relative||(t[o+1]+=i),n[o].y+=i)})}function Xi(e,t,s){const i=e.length;let n=0;while(n<i){const i=e[n++];if("A"===i.key.toUpperCase()){if(void 0!==t){const s=t-i.radiusX;i.radiusX=t,i.coordinates[0]=2*t*(i.coordinates[0]<0?-1:1),1===n&&(e[0].coordinates[0]-=s,e[0].end.x-=s)}void 0!==s&&(i.radiusY=s)}}}class $i extends(wi(re(ti))){constructor(e){super(e),this.element=e,this.name="",this.value="",this.baseValue="",this.init()}static extrapolate(e,t,s,i,n,a){const r=null==n?void 0:n.parent,o=!!(i||(null==r?void 0:r.requireRefit)),l=[];let c;const h=s.length;for(let u=0;u<h;++u){if("d"===e)l[u]=s[u];else if("points"===e){const e=ie.convertPoints(ie.parseCoordinates(s[u]));e.length&&(l[u]=n&&x.polygon(n.element)?ie.drawPolygon(e,a):ie.drawPolyline(e,a))}else if(t){c||(c=ie.getPathCommands(t));const i=parseFloat(s[u]);if(!isNaN(i)){const t=u<h-1?Oi(c,[],true):c;switch(e){case"x":case"x1":case"x2":case"cx":Bi(t,e,i);break;case"y":case"y1":case"y2":case"cy":Bi(t,e,void 0,i);break;case"r":Xi(t,i,i);break;case"rx":Xi(t,i);break;case"ry":Xi(t,void 0,i);break;case"width":[1,2].forEach(e=>{const s=t[e];switch(s.key){case"m":case"l":case"h":s.coordinates[0]=i*(s.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":s.coordinates[0]=t[0].end.x+i}});break;case"height":[2,3].forEach(e=>{const s=t[e];switch(s.key){case"m":case"l":case"v":s.coordinates[1]=i*(s.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":s.coordinates[1]=t[0].end.y+i}});break;default:l[u]="";continue}l[u]=ie.drawPath(t,a)}}l[u]?o&&(l[u]=ie.transformRefit(l[u],i,n,r,a)):l[u]=""}return l}build(e){var t;let s;(null==e?void 0:e.transforms)&&(s=ie.filterTransforms(e.transforms,null===(t=e.exclude)||void 0===t?void 0:t[this.element.tagName])),this.draw(s,e)}draw(e,t){let s,i;t&&({residual:s,precision:i}=t);const n=this.element,a=this.parent,r=this.patternParent,o=true===(null==a?void 0:a.requireRefit),l=2===(null==r?void 0:r.patternContentUnits);let c;if(this.transformed=void 0,x.path(n)){if(c=this.getBaseValue("d"),(null==e?void 0:e.length)||o||l){const t=ie.getPathCommands(c);if(t.length){let h=ie.getPathPoints(t);h.length&&(l&&r.patternRefitPoints(h),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e)),e.length&&(h=ie.applyTransforms(e,h,R.origin(this.element)),this.transformed=e)),this.baseValue=ie.drawPath(ie.syncPathPoints(o?Oi(t,[],true):t,o?Oi(h,[],true):h,!!this.transformed),i),o?(a.refitPoints(h),c=ie.drawPath(ie.syncPathPoints(t,h,!!this.transformed),i)):c=this.baseValue)}}""===this.baseValue&&(this.baseValue=c)}else if(x.line(n)){let t=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];l&&r.patternRefitPoints(t),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e)),e.length&&(t=ie.applyTransforms(e,t,R.origin(this.element)),this.transformed=e));const h=()=>ie.drawPolyline(t,i);this.baseValue=h(),o?(a.refitPoints(t),c=h()):c=this.baseValue}else if(x.circle(n)||x.ellipse(n)){const t=this.getBaseValue("cx"),h=this.getBaseValue("cy");let u,f;x.ellipse(n)?(u=this.getBaseValue("rx"),f=this.getBaseValue("ry")):(u=this.getBaseValue("r"),f=u);let d=[{x:t,y:h,rx:u,ry:f}];l&&r.patternRefitPoints(d),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e,u,f)),e.length&&(d=ie.applyTransforms(e,d,R.origin(this.element)),this.transformed=e));const p=d[0],g=()=>ie.drawEllipse(p.x,p.y,p.rx,p.ry,i);this.baseValue=g(),o?(a.refitPoints(d),c=g()):c=this.baseValue}else if(x.rect(n)){let t=this.getBaseValue("x"),h=this.getBaseValue("y"),u=this.getBaseValue("width"),f=this.getBaseValue("height");if(o||(null==e?void 0:e.length)){let d=[{x:t,y:h},{x:t+u,y:h},{x:t+u,y:h+f},{x:t,y:h+f}];l&&r.patternRefitPoints(d),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e)),e.length&&(d=ie.applyTransforms(e,d,R.origin(this.element)),this.transformed=e)),this.baseValue=ie.drawPolygon(d,i),o?(a.refitPoints(d),c=ie.drawPolygon(d,i)):c=this.baseValue}else l&&(t=r.patternRefitX(t),h=r.patternRefitY(h),u=r.patternRefitX(u),f=r.patternRefitY(f)),c=ie.drawRect(u,f,t,h,i),this.baseValue=c}else if(x.polygon(n)||x.polyline(n)){let t=this.getBaseValue("points");l&&r.patternRefitPoints(t),(null==e?void 0:e.length)&&("function"==typeof s&&([this.transformResidual,e]=s.call(this,n,e)),e.length&&(t=ie.applyTransforms(e,t,R.origin(this.element)),this.transformed=e));const h=()=>x.polygon(n)?ie.drawPolygon(t,i):ie.drawPolyline(t,i);this.baseValue=h(),o?(null===this.transformed&&(t=ie.clonePoints(t)),a.refitPoints(t),c=h()):c=this.baseValue}else c="";return this.value=c,this.setPaint([c],i),c}extendLength(e,t){if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":{const s=ie.getPathCommands(this.value),i=s.length;if(i){const n=s[0],a=n.start,r=s[i-1],o=r.end,l=r.key.toUpperCase(),{leading:c,trailing:h}=e;let u=false;if("Z"!==l&&(a.x!==o.x||a.y!==o.y)){if(c>0){let e;if(n.value.length>1?e=n.value[1]:i>1&&(e=s[1].start),e){const t=n.coordinates;if(e.x===a.x)t[1]+=a.y>e.y?c:-c,u=true;else if(e.y===a.y)t[0]+=a.x>e.x?c:-c,u=true;else{const s=Ci(e,a);t[0]-=Mi(s,c),t[1]-=Fi(s,c),u=true}}}switch(l){case"M":case"L":if(h>0){let e;if(1===i){const t=n.value;t.length>1&&(e=t[t.length-2])}else{const t=r.value;e=t.length>1?t[t.length-2]:s[s.length-2].end}if(e){const t=r.coordinates;if(e.x===o.x)t[1]+=o.y>e.y?h:-h,u=true;else if(e.y===o.y)t[0]+=o.x>e.x?h:-h,u=true;else{const s=Ci(e,o);t[0]+=Mi(s,h),t[1]+=Fi(s,h),u=true}}}break;case"H":case"V":{const e=r.coordinates,t="H"===l?0:1;e[t]+=(c+h)*(e[t]>=0?1:-1),u=true;break}}}if(u)return e.leading=c,e.trailing=h,e.path=ie.drawPath(s,t),e;break}}}}flattenStrokeDash(e,t,s,i,n){let a,r,o,l;i||(i=s);let c=0;const h=e=>r[e%a];if(n)({dashArray:r,dashArrayTotal:o,extendedLength:l,startIndex:c}=n),a=r.length,n.items=[],n.leading=0;else{a=e.length,r=e.slice(0);const u=Pi([2,a]);o=0;let f=0;while(f<u){const t=e[f%a];o+=t,f++>=a&&r.push(t)}if(a=u,t>0){let e=h(0);while(t-e>=0)t-=e,e=h(++c);c%=a}else if(t<0){r.reverse();while(t<0)t+=h(c++);c=a-c%a,r.reverse()}l=i,n={dashArray:r,dashArrayTotal:o,items:[],leading:0,trailing:0,startIndex:c,extendedLength:l,lengthRatio:s/(i||s)}}let u,f=0;for(let e=0,s=0;;e+=s,++c){let i,a;s=h(c),e<t?(n.leading=t-e,i=0,a=s-n.leading):(i=e-t,a=s);const r=Gi(i/l);if(u=Gi(r+a/l),c%2==0?r<1&&(n.items.push({start:r,end:Math.min(u,1),length:s}),f+=s):f+=s,u>=1)break}n.trailing=Gi((u-1)*l);while(f%o!=0){const e=h(++c);n.trailing+=e,f+=e}return 0===n.items.length?n.items.push({start:1,end:1}):(n.leadingOffset=Gi(n.items[0].start*l),n.leading*=n.lengthRatio,n.trailing*=n.lengthRatio),n}extractStrokeDash(e,t){const s=Ii(this.strokeWidth);let i,n="",a="";if(s>0){let r=ie.parseCoordinates(this.strokeDasharray);if(r.length){const o=this.totalLength,l=this.pathLength||o,c=[];let h,u=Ii(this.strokeDashoffset),f=0;const d=(e,t,s,i=0)=>{const n=this.flattenStrokeDash(e,t,o,l);return 0===c.length&&(h=n),f=Math.max(f,n.items.length),c.push({items:n.items,delay:s,duration:i}),n.items};if(i=d(r,u,0),e){const p=e.slice(0).sort((e,t)=>{if(e.attributeName.startsWith("stroke-dash")&&t.attributeName.startsWith("stroke-dash")){if(e.delay!==t.delay)return e.delay<t.delay?-1:1;if(ie.asSet(e)&&ie.asAnimate(t)||!e.animationElement&&t.animationElement)return-1;if(ie.asAnimate(e)&&ie.asSet(t)||e.animationElement&&!t.animationElement)return 1}return 0}),g=new He(p,"stroke-dasharray","stroke-dashoffset"),m=(e,t=false)=>{const s=g.get("stroke-dashoffset",e,t);return s?parseFloat(s):u},y=(e,t=false)=>{const s=g.get("stroke-dasharray",e,t);return s?ie.parseCoordinates(s):r},v=e=>e?e.start+" "+e.end:"1 1";if(p.length>1)for(let e=0;e<p.length;++e){const t=p[e];g.has(t.attributeName,t.delay,t)||p.splice(e--,1)}let S=e=>{let t=u;const s=p.length;let i=e;while(i<s){const e=p[i++];if("stroke-dasharray"===e.attributeName){const s=g.get("stroke-dashoffset",e.delay);s&&(t=parseFloat(s));for(const s of ie.asAnimate(e)?g.evaluateStart(e):[e.to])f=Math.max(f,this.flattenStrokeDash(ie.parseCoordinates(s),t,o,l).items.length);(ie.asAnimate(e)?g.evaluateStart(e):[e.to]).forEach(e=>f=Math.max(f,this.flattenStrokeDash(ie.parseCoordinates(e),t,o,l).items.length))}}},b=[],T=false;for(let e=0;e<p.length;++e){const k=p[e];if(k.setterType){const e=(e,t)=>{d(e,t,k.delay,k.fillReplace&&k.duration>0?k.duration:0),T=true};switch(k.attributeName){case"stroke-dasharray":r=ie.parseCoordinates(k.to),e(r,m(k.delay));continue;case"stroke-dashoffset":u=Ii(k.to),e(y(k.delay),u);continue}}else if(ie.asAnimate(k)&&k.playable)switch(g.evaluateStart(k),k.attributeName){case"stroke-dasharray":{S&&(S(e),S=void 0);const t=m(k.delay),s=this.flattenStrokeDash(y(k.delay),t,o,l).items,i=[],n=[];let a=0;while(a<f){const e=new Ye(this.element);e.id=a,e.baseValue=v(s[a]),e.attributeName="stroke-dasharray",e.delay=k.delay,e.duration=k.duration,e.iterationCount=k.iterationCount,e.fillMode=k.fillMode,n[a++]=[],i.push(e)}k.values.forEach(e=>{const s=this.flattenStrokeDash(ie.parseCoordinates(e),t,o,l).items;let i=0;while(i<f)n[i].push(v(s[i++]))});const{keyTimes:r,keySplines:c}=k,h=k.timingFunction;a=0;while(a<f){const e=i[a];e.values=n[a++],e.keyTimes=r,c?e.keySplines=c:h&&(e.timingFunction=h)}if(k.fillReplace){const e=k.getTotalDuration(),t=this.flattenStrokeDash(y(e),m(e),o,l).items;a=0;while(a<f)i[a].replaceValue=v(t[a++])}b=b.concat(i),T=true;continue}case"stroke-dashoffset":{const e=k.duration,r=parseFloat(k.values[0]),d=[],p=[];let m=0,y=0;u===r||0!==k.delay||k.fillReplace||(h=this.flattenStrokeDash(h.dashArray,r,o,l),i=h.items,c[0].items=i,f=Math.max(f,h.items.length),u=r);let v,S=o,b=1;if((h.leading>0||h.trailing>0)&&(this.extendLength(h,t),h.path)){const e=ie.getBoxRect([this.value]);S=Gi(C(h.path)),b=S/o,h.extendedLength=this.pathLength,h.extendedLength>0?h.extendedLength*=b:h.extendedLength=S,i=this.flattenStrokeDash(h.dashArray,0,o,l,h).items,c[0].items=i,f=Math.max(f,i.length);const t=Math.ceil(s/2);n=h.path,a=ie.drawRect(e.right-e.left,e.bottom-e.top+2*t,e.left,e.top-t)}if(k.fillReplace&&-1!==k.iterationCount){const e=Li(g.get(k.attributeName,k.getTotalDuration()));if(e!==u){let t=Math.abs(e-u)%S/S;e>u&&(t=1-t),v=t.toString()}}const w=k.keyTimes,x=k.values,E=w.length;let R=-1;while(++R<E){const t=0===R?u:parseFloat(x[R-1]),s=parseFloat(x[R]),i=Math.abs(s-t),n=w[R];if(0===i){if(R>0){m=n,p.push(m);const e=d.length;e?(d.push(d[e-1]),y=parseFloat(d[e-1])):(d.push("0"),y=0)}continue}const a=s>t,r=R>0?(n-w[R-1])*e:0,o=i*h.lengthRatio;let l=o/S,c=o,f=0;const g=t=>t/o*r/e,v=()=>R>0&&d[d.length-1]===(a?"1":"0"),b=(e,t=false)=>{if(f=(c-e)/S,t){const e=Gi(f);a?e>0&&(f=1-f):0===e&&(f=1)}},T=()=>{v()||(p.push(0===m?0:Gi(m)),d.push(a?"1":"0"))},k=()=>{m=n,p.push(m);const e=Gi(f);d.push(e.toString()),y=e>0&&e<1?f:0};if(0===R)c%=S,b(0),a&&(f=1-f),k();else{if(y>0){const e=a?y:1-y,t=Gi(e*S);if(Ni(c,t)){b(0),a?f=y-f:f+=y,k();continue}d.push(a?"0":"1"),m+=g(t),p.push(Gi(m)),l=Gi(l-e),c=Gi(c-t)}if(_i(c,S)&&(c=S),c>S){l=Math.floor(l);const e=l*S;e===c&&l--,b(e,true)}else l=0,b(0,true);while(l>0)T(),d.push(a?"0":"1"),m+=g(S),p.push(Gi(m)),l--;T(),k()}}k.baseValue="0",k.replaceValue=v,k.values=d,k.keyTimes=p;const A=k.timingFunction;A&&(k.keySplines=void 0,k.timingFunction=A),T=true;break}}b.push(k)}if(T){const t=c.length;let s=0;while(s<t){const{delay:e,duration:n,items:a}=c[s++];if(a===i){let e=a.length-1;while(++e<f)a.push({start:1,end:1})}else{const s=t>2?this.flattenStrokeDash(y(e-1),m(e-1),o,l).items:i;let r=0;while(r<f){const t=new ke(this.element);t.id=r,t.attributeName="stroke-dasharray",t.baseValue=v(s[r]),t.delay=e,t.duration=n,t.fillFreeze=0===n,t.to=v(a[r++]),b.push(t)}}}e=b}}}}return[e,i,n,a]}init(){const e=this.element;x.path(e)?this.setBaseValue("d"):x.line(e)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):x.rect(e)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):x.circle(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):x.ellipse(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(x.polygon(e)||x.polyline(e))&&this.setBaseValue("points",ie.clonePoints(e.points))}get transforms(){let e=this._transforms;return void 0===e&&(e=ie.filterTransforms(R.parse(this.element)||ie.convertTransforms(this.element.transform.baseVal)),this._transforms=e),e}get pathLength(){return Li(Vi(this.element,"pathLength"))}get totalLength(){return this.element.getTotalLength()}get instanceType(){return 1028}}class Yi extends(Ms(js)){constructor(e,t){super(e),this.element=e,this.patternElement=t}build(e){super.build(Object.assign(Object.assign({},e),{patternElement:this.patternElement,initialize:false}))}get animations(){return[]}get instanceType(){return 130}}class zi extends(Zt(Ms(ti))){constructor(e,t=true){super(e),this.element=e,t&&this.setPath()}setPath(){this.path=new $i(this.element)}build(e){const t=this.path;t&&(t.parent=this.parent,t.build(Object.assign(Object.assign({},e),{transforms:this.transforms})))}synchronize(e){if(this.animations.length){const t=this.path;if(t){const s=null==e?void 0:e.element;s?this.animateSequentially(this.getAnimateShape(s),void 0,t,e):this.animateSequentially(this.getAnimateShape(this.element),this.getAnimateTransform(e),t,e)}}}set path(e){this._path=e,e&&(e.name=this.name)}get path(){return this._path}get instanceType(){return 2052}}const Di=squared.lib,{isPercent:Wi}=Di.css,{getNamedItem:qi}=Di.dom,ji=e=>Wi(e)?parseFloat(e)/100:parseFloat(e);class Ui extends(wi(re(Ms(js)))){constructor(e,t){super(e),this.element=e,this.patternElement=t,this.__get_transforms=false,this.patternUnits="userSpaceOnUse"===qi(this.patternElement,"patternUnits")?1:2,this.patternContentUnits="objectBoundingBox"===qi(this.patternElement,"patternContentUnits")?2:1}build(e){const t=(null==e?void 0:e.element)||this.element,s=new $i(t);s.build(Object.assign({},e));const i=s.value;if(i){const n=null==e?void 0:e.precision;this.clipRegion=i,s.clipPath&&(this.clipRegion=s.clipPath);const a=[i];this.setPaint(a,n),this.drawRegion=ie.getBoxRect(a);const{drawRegion:r,fillOpacity:o,patternWidth:l,patternHeight:c,tileWidth:h,tileHeight:u}=this,f=2===this.patternUnits;let d=this.offsetX%h,p=this.offsetY%u,g=0,m=0,y=r.right,v=r.bottom;f&&(g=r.left,m=r.top,y-=g,v-=m),0!==d&&(d=h-d,y+=h),0!==p&&(p=u-p,v+=u);let S=0;while(v>0){const s=this.patternElement,i=2===this.patternContentUnits,a=m+S++*u-p;let r=y,f=0;do{const p=g+f++*h-d,m=new Yi(t,s);m.build(Object.assign({},e)),m.cascade(t=>{if(ie.isShape(t)){t.setPath();const s=t.path;s&&(s.patternParent=this,i?s.refitBaseValue(p/l,a/c,n):s.refitBaseValue(p,a,n),s.build(Object.assign(Object.assign({},e),{transforms:t.transforms})),s.fillOpacity=(parseFloat(s.fillOpacity)*parseFloat(o)).toString(),s.clipPath=ie.drawRect(h,u,p,a,n)+(""!==s.clipPath?";"+s.clipPath:""))}return false}),this.append(m),r-=h}while(r>0);v-=u}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){s.fill="",s.fillOpacity="0",s.stroke=this.stroke,s.strokeWidth=this.strokeWidth;const e=new zi(t,false);e.path=s,this.append(e)}}}patternRefitX(e){return this.drawRegion?e*this.patternWidth:e}patternRefitY(e){return this.drawRegion?e*this.patternHeight:e}patternRefitPoints(e){if(this.drawRegion){const t=this.patternWidth,s=this.patternHeight,i=e.length;let n=0;while(n<i){const i=e[n++];if(i.x*=t,i.y*=s,void 0!==i.rx&&void 0!==i.ry)if(i.rx===i.ry){const e=Math.min(t,s);i.rx*=e,i.ry*=e}else i.rx*=t,i.ry*=s}}return e}get patternWidth(){const e=this.drawRegion;return e?e.right-e.left:0}get patternHeight(){const e=this.drawRegion;return e?e.bottom-e.top:0}get transforms(){if(!this.__get_transforms){const e=this.patternElement,t=ie.convertTransforms(e.patternTransform.baseVal),s=t.length;if(s){const i=R.rotateOrigin(e,"patternTransform"),n=this.patternWidth/2,a=this.patternHeight/2;let r=0;while(r<s){const e=t[r++];switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(i.length){const t=i.shift();if(t.angle===e.angle){e.origin={x:n+t.x,y:a+t.y};break}}if(e.origin)break;default:e.origin={x:n,y:a}}}this._transforms=super.transforms.concat(ie.filterTransforms(t))}this.__get_transforms=true}return super.transforms}get offsetX(){const e=this.patternElement.x.baseVal;return 2===this.patternUnits?this.patternWidth*ji(e.valueAsString):e.value}get offsetY(){const e=this.patternElement.y.baseVal;return 2===this.patternUnits?this.patternHeight*ji(e.valueAsString):e.value}get tileWidth(){const e=this.patternElement.width.baseVal;return 2===this.patternUnits?this.patternWidth*ji(e.valueAsString):e.value}get tileHeight(){const e=this.patternElement.height.baseVal;return 2===this.patternUnits?this.patternHeight*ji(e.valueAsString):e.value}get instanceType(){return 258}}class Ki extends(wi(Os(re(zi)))){constructor(e,t,s=true){super(e,false),this.element=e,this.shapeElement=t,this._retainStyle=false,this.__get_transforms=false,this.__get_animations=false,s&&this.setPath()}setPath(){const e=new $i(this.shapeElement);e.useParent=this,this.path=e}build(e){super.build(e);const t=this.path;this.setPaint(t?[t.value]:void 0,null==e?void 0:e.precision)}synchronize(e){e=Object.assign(Object.assign({},e),{element:this.shapeElement}),this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e),super.synchronize(e)}get transforms(){let e=super.transforms;return this.__get_transforms||(e=e.concat(this.getTransforms(this.shapeElement)),this._transforms=e,this.__get_transforms=true),e}get animations(){let e=super.animations;return this.__get_animations||(e=e.concat(this.getAnimations(this.shapeElement)),this._animations=e,this.__get_animations=true),e}get instanceType(){return 10244}}class Hi extends(Zt(Os(Ui))){constructor(e,t,s){super(e,s),this.element=e,this.shapeElement=t}build(e){super.build(Object.assign(Object.assign({},e),{element:this.shapeElement}))}synchronize(e){const t=this.animations.filter(e=>"x"===e.attributeName||"y"===e.attributeName||void 0===this.verifyBaseValue(e.attributeName,0)),s=this.getAnimateTransform(e);(t.length||s.length)&&this.animateSequentially(this.getAnimateViewRect(t),s,void 0,e),super.synchronize(e)}get instanceType(){return 514}}class Zi extends(wi(Zt(Os(re(Ms(js)))))){constructor(e,t){super(e),this.element=e,this.symbolElement=t}build(e){this.setRect(),super.build(Object.assign(Object.assign({},e),{symbolElement:this.symbolElement}));const t=this.getBaseValue("x",0),s=this.getBaseValue("y",0);if(0!==t||0!==s){const e={x:t,y:s};this.cascade(t=>(ie.asImage(t)&&(t.translationOffset=e),false))}this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}synchronize(e){this.animations.length&&this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e),super.synchronize(e)}get viewBox(){return this.symbolElement.viewBox.baseVal||A(this.element)}get instanceType(){return 66}}const Qi={constant:Ee,util:G};e.Svg=ei,e.SvgAnimate=Ye,e.SvgAnimateMotion=ls,e.SvgAnimateTransform=qe,e.SvgAnimation=ke,e.SvgAnimationIntervalMap=He,e.SvgBaseVal=re,e.SvgBuild=ie,e.SvgContainer=js,e.SvgElement=ti,e.SvgG=xi,e.SvgImage=Ri,e.SvgPaint=wi,e.SvgPath=$i,e.SvgPattern=Yi,e.SvgShape=zi,e.SvgShapePattern=Ui,e.SvgSynchronize=Zt,e.SvgUse=Ki,e.SvgUsePattern=Hi,e.SvgUseSymbol=Zi,e.SvgView=Ms,e.SvgViewRect=Os,e.lib=Qi,Object.defineProperty(e,"__esModule",{value:true})}));
var chrome=function(){"use strict";class e extends squared.base.Resource{constructor(e,t){super(),this.application=e,this.cache=t,this.controllerSettings=e.controllerHandler.localSettings}get userSettings(){return this.application.userSettings}}const{isTextNode:t}=squared.lib.dom;class s extends squared.base.Application{constructor(){super(...arguments),this.builtInExtensions={},this.extensions=[],this.queryState=0}finalize(){}createNode(e){return new this.Node(this.nextId,this.processing.sessionId,e.element)}insertNode(e,s){if(t(e)){if(this.userSettings.excludePlainText)return;this.controllerHandler.applyDefaultStyles(e);const t=this.createNode({element:e});return s&&t.cssApply(s.textStyle),t}return this.createNode({element:e})}afterCreateCache(e){switch(this.queryState){case 1:this.controllerHandler.cacheElement(e);break;default:this.controllerHandler.cacheElementList(this.processing.cache)}}get length(){const t=e.ASSETS;let s=0;for(const e in t)s+=t[e].size;return s}}const i=squared.lib,{isTextNode:n}=i.dom,{setElementCache:r}=i.session;class o extends squared.base.Controller{constructor(e,t){super(),this.application=e,this.cache=t,this.localSettings={mimeType:{font:"*",image:"*",audio:"*",video:"*"}},this._elementMap=new Map}init(){}sortInitialCache(){}reset(){this._elementMap.clear()}applyDefaultStyles(e){n(e)&&r(e,"styleMap",this.sessionId,{position:"static",display:"inline",verticalAlign:"baseline",float:"none",clear:"none"})}includeElement(){return true}cacheElement(e){this._elementMap.set(e.element,e)}cacheElementList(e){const t=this._elementMap;e.each(e=>t.set(e.element,e))}get elementMap(){return this._elementMap}get userSettings(){return this.application.userSettings}}class l extends squared.base.ExtensionManager{}const a=squared.lib,{CHAR:c,COMPONENT:u,FILE:p,XML:m}=a.regex,{appendSeparator:h,convertWord:g,fromLastIndexOf:d,objectMap:f,parseMimeType:y,resolvePath:v,safeNestedArray:A,spliceString:S,trimEnd:E}=a.util,T=e.ASSETS,x=/\s*(.+?\.[^\s,]+).*?,\s*/,b=/\s+[0-9.][wx]$/;function _(e){const t=E(e,"/"),s=u.PROTOCOL.exec(t);if(s){let i,n="",r="",o="";const l=s[2],a=s[3],c=s[4],u=(e=1)=>(e>1&&(o=c.substring(0,e)),c.substring(e,c.lastIndexOf("/")));let p=true;if(t.startsWith(E(location.origin,"/"))||(n=g(l)+(a?"/"+a.substring(1):"")+"/",p=false),c&&"/"!==c)if(r=d(c,"/"),p){const e=location.pathname.substring(0,location.pathname.lastIndexOf("/")+1);c.startsWith(e)?n=u(e.length):(i="__serverroot__",n=u())}else n+=u();else r="index.html";const m=r.includes(".")?d(r,".").toLowerCase():void 0;return{uri:e,rootDir:o,moveTo:i,pathname:n,filename:r,extension:m,mimeType:m&&y(m)}}}function O(e,t){const s=v(t);""!==s&&e.add(s)}function P(e){this.application.extensions.forEach(t=>t.processFile(e))}class F extends squared.base.File{reset(){super.reset(),this._outputFileExclusions=void 0}copyToDisk(e,t){this.copying(Object.assign(Object.assign({},t),{assets:this.getAssetsAll().concat((null==t?void 0:t.assets)||[]),directory:e}))}appendToArchive(e,t){this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{assets:this.getAssetsAll(t).concat((null==t?void 0:t.assets)||[]),appendTo:e}))}saveToArchive(e,t){this.archiving(Object.assign(Object.assign({},t),{assets:this.getAssetsAll(t).concat((null==t?void 0:t.assets)||[]),filename:e}))}getHtmlPage(e,t=false){const s=[],i=_(location.href);if(i){if(e)i.filename=e;else{const e=i.filename;p.NAME.test(e)||(i.pathname=h(i.pathname,e),i.filename="index.html")}this.validFile(i)&&(i.mimeType=y("html"),t||P.bind(this,i)(),s.push(i))}return s}getScriptAssets(e=false){const t=[];return document.querySelectorAll("script").forEach(s=>{const i=s.src.trim();if(""!==i){const n=v(i),r=_(n);this.validFile(r)&&(r.mimeType=s.type.trim()||y(n)||"text/javascript",e||P.bind(this,r)(),t.push(r))}}),t}getLinkAssets(e,t=false){const s=[];return document.querySelectorAll(e?`link[rel="${e}"]`:"link").forEach(e=>{const i=e.href.trim();if(""!==i){const n=v(i),r=_(n);if(this.validFile(r)){switch(e.rel.trim()){case"stylesheet":r.mimeType="text/css";break;case"icon":r.mimeType="image/x-icon";break;default:r.mimeType=e.type.trim()||y(n)}t||P.bind(this,r)(),s.push(r)}}}),s}getImageAssets(t=false){const s=[],i=e=>{if(""!==e){const i=_(e);this.validFile(i)&&(t||P.bind(this,i)(),s.push(i))}};if(this.userSettings.preloadImages)for(const e of T.image.keys())i(e);else document.querySelectorAll("picture > source").forEach(e=>e.srcset.split(m.SEPARATOR).forEach(e=>i(v(e.split(c.SPACE)[0])))),document.querySelectorAll("video").forEach(e=>i(v(e.poster))),document.querySelectorAll("img, input[type=image]").forEach(e=>{const t=e.src.trim();t.startsWith("data:image/")||i(v(t))});for(const[e,i]of T.rawData){const n=i.filename;if(n){const{pathname:r,base64:o,content:l,mimeType:a}=i;let c;if(r)c={pathname:r,filename:n,uri:e};else if(o)c={pathname:"__generated__/base64",filename:n,base64:o};else{if(!l||!a)continue;c={pathname:"__generated__/"+a.split("/").pop(),filename:n,content:l}}this.validFile(c)&&(c.mimeType=a,t||P.bind(this,c)(),s.push(c))}}return document.querySelectorAll("img[srcset], picture > source[srcset]").forEach(e=>{const t=[];let i,n=e.srcset.trim();while(null!==(i=x.exec(n)))t.push(v(i[1])),n=S(n,i.index,i[0].length);n=n.trim(),""!==n&&t.push(v(n.replace(b,""))),t.forEach(e=>{if(u.PROTOCOL.test(e)&&-1===s.findIndex(t=>t.uri===e)){const t=_(e);this.validFile(t)&&s.push(t)}})}),this.userSettings.compressImages&&s.forEach(t=>{e.canCompressImage(t.filename)&&A(t,"compress").unshift({format:"png"})}),s}getVideoAssets(e=false){return this.getRawAssets("video",e)}getAudioAssets(e=false){return this.getRawAssets("audio",e)}getFontAssets(e=false){const t=[];for(const s of T.fonts.values())s.forEach(s=>{const i=s.srcUrl;if(i){const s=_(i);this.validFile(s)&&(e||P.bind(this,s)(),t.push(s))}});return t}validFile(e){if(e){const t=`${e.pathname}/${e.filename}`;return!this.outputFileExclusions.some(e=>e.test(t))}return false}getRawAssets(e,t=false){const s=[];return document.querySelectorAll(e).forEach(e=>{const i=new Set;O(i,e.src),e.querySelectorAll("source").forEach(e=>O(i,e.src));for(const e of i){const i=_(e);this.validFile(i)&&(t||P.bind(this,i)(),s.push(i))}}),s}getAssetsAll(e={}){const{name:t,rel:s}=e,i=true===e.saveAsWebPage,n=this.getHtmlPage(t,i).concat(this.getLinkAssets(s,i));return i&&n.forEach(e=>{const t=e.mimeType;switch(t){case"text/html":case"text/css":case"application/xhtml+xml":e.mimeType="@"+t}}),n.concat(this.getScriptAssets(i)).concat(this.getImageAssets(i)).concat(this.getVideoAssets(i)).concat(this.getAudioAssets(i)).concat(this.getFontAssets(i))}get outputFileExclusions(){let e=this._outputFileExclusions;return void 0===e&&(e=f(this.userSettings.outputFileExclusions,e=>function(e){return e=e.trim().replace(/([.|/\\{}()?])/g,(e,...t)=>"\\"+t[0]).replace(/\*/g,".*?"),new RegExp(e+"$")}(e)),this._outputFileExclusions=e),e}get userSettings(){return this.resource.userSettings}get application(){return this.resource.application}}class N extends squared.base.Node{constructor(e,t,s,i){super(e,t,s),this._cached={},this._preferInitial=false,this.init(),i&&i(this)}}class I extends squared.base.Extension{processFile(e){return false}}const{safeNestedArray:q}=squared.lib.util;class C extends I{constructor(){super(...arguments),this.options={level:11,mimeTypes:["text/css","text/javascript","text/plain","text/csv","application/json","application/javascript","application/ld+json","application/xml"]}}processFile(e){const t=e.mimeType;if(t){const{level:s,mimeTypes:i}=this.options;if("*"===i||i.includes(t))return q(e,"compress").push({format:"br",level:s}),true}return false}}const{safeNestedArray:R}=squared.lib.util;class M extends I{constructor(){super(...arguments),this.options={level:9,mimeTypes:["text/css","text/javascript","text/plain","text/csv","application/json","application/javascript","application/ld+json","application/xml"]}}processFile(e){const t=e.mimeType;if(t){const{level:s,mimeTypes:i}=this.options;if("*"===i||i.includes(t))return R(e,"compress").push({format:"gz",level:s}),true}return false}}const{safeNestedArray:w}=squared.lib.util;class j extends I{constructor(){super(...arguments),this.options={level:100,mimeTypes:["image/jpeg"]}}processFile(e){const t=e.mimeType;if(t){const{level:s,mimeTypes:i}=this.options;if("*"===i&&t.startsWith("image/")||i.includes(t))return w(e,"compress").push({format:"jpeg",level:s}),true}return false}}const{safeNestedArray:k}=squared.lib.util;class V extends I{constructor(){super(...arguments),this.options={mimeTypes:["image/png"]}}processFile(e){const t=e.mimeType;if(t){const s=this.options.mimeTypes;if("*"===s&&t.startsWith("image/")||s.includes(t))return k(e,"compress").push({format:"png"}),true}return false}}class G extends I{constructor(){super(...arguments),this.options={mimeTypes:["image/png","image/jpeg","image/gif","image/tiff"],replaceWith:true,pickSmaller:false}}processFile(e){const t=e.mimeType;if(t){const s=this.options;if(s.mimeTypes.includes(t)){let i="";return s.replaceWith?i="@":s.pickSmaller&&(i="%"),e.mimeType=i+"bmp:"+t,true}}return false}}class W extends I{constructor(){super(...arguments),this.options={mimeTypes:["image/png","image/bmp","image/gif","image/tiff"],replaceWith:true,pickSmaller:false}}processFile(e){const t=e.mimeType;if(t){const s=this.options;if(s.mimeTypes.includes(t)){let i="";return s.replaceWith?i="@":s.pickSmaller&&(i="%"),e.mimeType=i+"jpeg:"+t,true}}return false}}class L extends I{constructor(){super(...arguments),this.options={mimeTypes:["image/jpeg","image/bmp","image/gif","image/tiff"],replaceWith:true,pickSmaller:false}}processFile(e){const t=e.mimeType;if(t){const s=this.options;if(s.mimeTypes.includes(t)){let i="";return s.replaceWith?i="@":s.pickSmaller&&(i="%"),e.mimeType=i+"png:"+t,true}}return false}}class H extends I{constructor(){super(...arguments),this.options={mimeTypes:["image/png","image/jpeg","image/bmp","image/tiff"],replaceWith:true,pickSmaller:false}}processFile(e){const t=e.mimeType;if(t){const s=this.options;if(s.mimeTypes.includes(t)){let i="";return s.replaceWith?i="@":s.pickSmaller&&(i="%"),e.mimeType=i+"gif:"+t,true}}return false}}class B extends I{constructor(){super(...arguments),this.options={mimeTypes:["image/png","image/jpeg","image/gif","image/bmp"],replaceWith:true,pickSmaller:false}}processFile(e){const t=e.mimeType;if(t){const s=this.options;if(s.mimeTypes.includes(t)){let i="";return s.replaceWith?i="@":s.pickSmaller&&(i="%"),e.mimeType=i+"tiff:"+t,true}}return false}}const D={builtInExtensions:[],preloadImages:false,compressImages:false,excludePlainText:true,createQuerySelectorMap:true,showErrorMessages:false,outputFileExclusions:["squared.*","chrome.framework.*"],outputEmptyCopyDirectory:false,outputArchiveName:"chrome-data",outputArchiveFormat:"zip"};var z=Object.freeze({__proto__:null});const J={COMPRESS_BROTLI:"chrome.compress.brotli",COMPRESS_GZIP:"chrome.compress.gzip",COMPRESS_PNG:"chrome.compress.png",COMPRESS_JPEG:"chrome.compress.jpeg",CONVERT_PNG:"chrome.convert.png",CONVERT_JPEG:"chrome.convert.jpeg",CONVERT_BMP:"chrome.convert.bmp",CONVERT_GIF:"chrome.convert.gif",CONVERT_TIFF:"chrome.convert.tiff"};var $=Object.freeze({__proto__:null,EXT_CHROME:J}),Z=function(e,t,s,i){return new(s||(s=Promise))((function(n,r){function o(e){try{a(i.next(e))}catch(e){r(e)}}function l(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,l)}a((i=i.apply(e,t||[])).next())}))};const{flatArray:X,isString:Q,isObject:U}=squared.lib.util;let K,Y,ee,te,se,ie=false;function ne(e,t){if(t)return se.get(e);se.clear()}function re(e,t){let s=ne(e,t);return void 0===s&&(K.queryState=1,K.parseDocument(e),s=se.get(e),K.queryState=0),s||null}function oe(e,t){return Z(this,void 0,void 0,(function*(){let s=ne(e,t);return void 0===s&&(K.queryState=1,yield K.parseDocumentAsync(e),s=se.get(e),K.queryState=0),s||null}))}function le(e,t,s,i){if(U(t)){const s=t.assets;s&&(e=e.concat(s))}else t=void 0;return Object.assign(Object.assign({},t),{assets:e,directory:s,filename:i})}const ae={base:{Application:s,ExtensionManager:l,Controller:o,File:F,Resource:e,View:N},lib:{constant:$,enumeration:z},extensions:{compress:{Brotli:C,Gzip:M,Jpeg:j,Png:V},convert:{Bmp:G,Gif:H,Jpeg:W,Png:L,Tiff:B}},system:{getElementById(e,t=true){if(K){const s=document.getElementById(e);if(s)return re(s,t)}return null},querySelector(e,t=true){if(K){const s=document.querySelector(e);if(s)return re(s,t)}return null},querySelectorAll(e,t=true){if(K){const s=document.querySelectorAll(e);if(s.length)return t||se.clear(),function(e){K.queryState=2;let t=false;const s=e.length,i=new Array(s);for(let n=0;n<s;++n){const s=e[n];let r=se.get(s);r?i[n]=r:(K.parseDocument(s),r=se.get(s),r?i[n]=r:t=true)}return t&&X(i),K.queryState=0,i}(s)}return[]},getElement:(e,t=false)=>K?re(e,t):null,getElementMap:()=>(null==Y?void 0:Y.elementMap)||new Map,clearElementMap(){null==Y||Y.elementMap.clear()},copyHtmlPage(e,t){Q(e)&&(null==ee||ee.copying(le(ee.getHtmlPage(null==t?void 0:t.name),t,e)))},copyScriptAssets(e,t){Q(e)&&(null==ee||ee.copying(le(ee.getScriptAssets(),t,e)))},copyLinkAssets(e,t){Q(e)&&(null==ee||ee.copying(le(ee.getLinkAssets(null==t?void 0:t.rel),t,e)))},copyImageAssets(e,t){ee&&Q(e)&&ee.copying(le(ee.getImageAssets(),t,e))},copyVideoAssets(e,t){Q(e)&&(null==ee||ee.copying(le(ee.getVideoAssets(),t,e)))},copyAudioAssets(e,t){Q(e)&&(null==ee||ee.copying(le(ee.getAudioAssets(),t,e)))},copyFontAssets(e,t){Q(e)&&(null==ee||ee.copying(le(ee.getFontAssets(),t,e)))},saveHtmlPage(e,t){null==ee||ee.archiving(le(ee.getHtmlPage(null==t?void 0:t.name),t,void 0,(e||te.outputArchiveName)+"-html"))},saveScriptAssets(e,t){null==ee||ee.archiving(le(ee.getScriptAssets(),t,void 0,(e||te.outputArchiveName)+"-script"))},saveLinkAssets(e,t){null==ee||ee.archiving(le(ee.getLinkAssets(null==t?void 0:t.rel),t,void 0,(e||te.outputArchiveName)+"-link"))},saveImageAssets(e,t){null==ee||ee.archiving(le(ee.getImageAssets(),t,void 0,(e||te.outputArchiveName)+"-image"))},saveVideoAssets(e,t){null==ee||ee.archiving(le(ee.getVideoAssets(),t,void 0,(e||te.outputArchiveName)+"-video"))},saveAudioAssets(e,t){null==ee||ee.archiving(le(ee.getAudioAssets(),t,void 0,(e||te.outputArchiveName)+"-audio"))},saveFontAssets(e,t){null==ee||ee.archiving(le(ee.getFontAssets(),t,void 0,(e||te.outputArchiveName)+"-font"))}},create(){const t=J;return K=new s(4,N,o,e,l),Y=K.controllerHandler,ee=new F,K.resourceHandler.setFileHandler(ee),se=Y.elementMap,te=Object.assign({},D),Object.assign(K.builtInExtensions,{[t.COMPRESS_BROTLI]:new C(t.COMPRESS_BROTLI,4),[t.COMPRESS_GZIP]:new M(t.COMPRESS_GZIP,4),[t.COMPRESS_JPEG]:new j(t.COMPRESS_JPEG,4),[t.COMPRESS_PNG]:new V(t.COMPRESS_PNG,4),[t.CONVERT_BMP]:new G(t.CONVERT_BMP,4),[t.CONVERT_GIF]:new H(t.CONVERT_GIF,4),[t.CONVERT_JPEG]:new W(t.CONVERT_JPEG,4),[t.CONVERT_PNG]:new L(t.CONVERT_PNG,4),[t.CONVERT_TIFF]:new B(t.CONVERT_TIFF,4)}),ie=true,{application:K,framework:4,userSettings:te}},cached:()=>ie?{application:K,framework:4,userSettings:te}:ae.create(),getElementById:(e,t=true)=>Z(void 0,void 0,void 0,(function*(){if(K){const s=document.getElementById(e);if(s)return yield oe(s,t)}return null})),querySelector:(e,t=true)=>Z(void 0,void 0,void 0,(function*(){if(K){const s=document.querySelector(e);if(s)return yield oe(s,t)}return null})),querySelectorAll:(e,t=true)=>Z(void 0,void 0,void 0,(function*(){if(K){const s=document.querySelectorAll(e);if(s.length)return t||se.clear(),yield function(e){return Z(this,void 0,void 0,(function*(){let t=false;const s=e.length,i=new Array(s);return yield(()=>Z(this,void 0,void 0,(function*(){for(let n=0;n<s;++n){const s=e[n],r=se.get(s);r?i[n]=r:(K.queryState=2,yield K.parseDocumentAsync(s).then(()=>{const e=se.get(s);e?i[n]=e:t=true}))}})))(),t&&X(i),K.queryState=0,i}))}(s)}return null})),getElement:(e,t=false)=>Z(void 0,void 0,void 0,(function*(){return K?yield oe(e,t):null})),saveAsWebPage:(e,t)=>Z(void 0,void 0,void 0,(function*(){if(ee){U(t)||(t={}),t.saveAsWebPage=true;const s=te.preloadImages;te.preloadImages=true,yield K.parseDocumentAsync(document.body).then(()=>{ee.saveToArchive(e||te.outputArchiveName,t),te.preloadImages=s})}}))};return ae}();
